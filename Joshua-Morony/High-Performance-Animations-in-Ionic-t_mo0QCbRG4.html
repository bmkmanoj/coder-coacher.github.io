<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>High Performance Animations in Ionic | Coder Coacher - Coaching Coders</title><meta content="High Performance Animations in Ionic - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Joshua-Morony/">Joshua Morony</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>High Performance Animations in Ionic</b></h2><h5 class="post__date">2017-09-19</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/t_mo0QCbRG4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">in this video we're going to talk about
how to create high-performance
animations in an ionic application now
the concepts we're going to be talking
about aren't specifically related to
ionic here we're just going to be using
CSS animations so these will apply to
anywhere they use CSS animations whether
that is in an ionic app or just a normal
website but since an ionic application
runs on a mobile device often we have a
lot less power to work with sayed and if
we were just creating a normal desktop
website so these concepts are more
important in this context so I think
there's a bit of a misconception I guess
around how possible animations are with
ionic I've heard many times that you
can't do animations with ionic it's just
not performant enough and that's not
true it is true to an extent in that it
is more difficult to create
high-performance animations in ionic but
it's not impossible
we do have less power to work with since
we are working in a browser environment
however we just need to take a little
bit more care when creating animations
to make sure that we're not doing
something that's going to perform poorly
so I talked about these concepts a lot
in the course I released recently which
is a lead ionic which you can check out
in the link below if you like but I
thought it would be useful to create
just a really quick overview of this
concept and so to do that I've got two
boxes animated on the screen here and
I've called one poor performance box and
one high performance box and obviously
these two animations look exactly the
same they're doing the exact same thing
here but one is designed poorly and one
is designed well and so this is a pretty
simple animation so it's not going to
really cause any problems even with this
poor performance box you know we're
going to run this fine cuz it's just one
element being animated but if we were to
use this technique you know a more
complex application with more elements
for example then it would start to
become a problem and I'll show you why
this box is designed more poorly in a
second but it's important to understand
how a browser renders a webpage and
again this is a concept that
and a lot more depth in the course but
just to give you a really quick overview
of what happens in the browser is it's
basically this process here and so I'd
recommend checking out this webpage and
having a reboot there's some really good
information on here but basically what
happens is we want to output sign to the
screen we want to show the user
something and every time we make some
kind of change in our application that's
going to change what's on the screen and
it's going to go through this process
here and so the first step is a
JavaScript step here so basically any
kind of logic that our application needs
to perform will be done first and since
that causes a change that's going to
trigger the rest of this process here
and it doesn't have to be JavaScript
that causes a change you can also cause
changes with CSS and then we get to the
style step and in this step basically
the browser calculates what the styles
for elements need to be so if you have
your CSS Styles you might have a bunch
of different classes and ID's set up
different selectors that define
different styles you might have some
styles over other styles and so in this
step the browser calculates what the
final style for each element is going to
be then we have the layout step which
calculates the positions of everything
on the screen and where they should sit
the paint step is basically the browser
painting the result onto the screen so
it's drawing in the colors and the text
and all that kind of stuff and then the
final step is composite which is
basically the browser organizing the
layers and positioning them
appropriately so when it comes to our
animations the the difference between a
good performing animation and a poor
performing animation is how many of
these steps we trigger and so this
layout step here is really expensive
because it needs to the browser needs to
calculate the position of all the
elements on the screen so if we have an
animation that's triggering this layout
step it's going to trigger the layout
and then the paint and the composite
step and so that's quite a bit of work
that the browser needs to do to display
that change so if we can create an
animation that doesn't have to trigger a
layout and even better if it doesn't
need to trigger a paint then it is going
to perform a lot better so if we jump
back into here now and just take a look
at the code for this animation so the
poor performance box is using this move
with margin animation and the high
performance boxes using the move with
transform so the end result is the same
wedges shifting at 20 pixels to the
right and then back to the original
position and we do the same thing here
we're just doing it with translate3d
instead of margin left but the
difference between these two is that by
using the margin left property this is
going to trigger a layout by animating
the margin we could be moving other
things on the screen and so the browser
needs to recalculate the positions of
everything so that's going to trigger
that layout step whereas with the
transform if we're doing transforms or
filters or changing the opacity of
elements we don't need to worry about
triggering the layout step if you're
transforming an element it's not going
to be moving other elements on the
screen so the layout step doesn't need
to be triggered and this also that won't
trigger the paint step either so just to
quickly demonstrate this we're going to
take a look at it happening in the app
here using the performance tab so we're
going to record a snapshot of each of
each box and then we're going to look at
the result so if I just for now if I
just get rid of this high-performance
box animation I'm going to comment that
out okay so now we just have the one box
being animated now so I'm going to
record a performance snapshot just for a
couple of seconds and if I stop that and
again this is another thing that I cover
in depth in the course that I had it had
a debug using these tools and get
valuable information from that so
basically if I just click here I can get
a small snapshot of time and we can see
what is happening in the main thread
here so if I just zoom in we can see the
steps that are performed so we can see
here we have recalculate style we have a
layout update layer tree now we have a
paint step and then a composite layer
step so we're triggering quite a few
steps in that browser rendering process
but if we switch that and bring the
high-performance animation back and get
rid of this one save that and now I'll
perform a record a new snapshot here so
again we'll do the same thing just click
on one of these together
a small snapshot of time here and you
can see if we scroll across is not a lot
of work happening here so that isn't
related to the animation itself there
and so basically the only work we're
performing in order to run that
animation is just a little bit of work
on the GPU so as well as animations
being performed on the CPU we can also
use the GPU which is generally what is
referred to as a hardware accelerated
animation because you're using the
graphics card so since we're essentially
just skipping all of those steps in here
we're not having to perform a layout and
a paint the animation performs a lot
better the browser has a lot less work
to do and so in this case you know
doesn't really matter either way which
approach we use because we're just
moving one box just a little bit but if
you're using this in a more complex
application with more elements on the
screen or you have more animations it's
going to start to make a difference and
especially if you're running on devices
with not as much power so this is just a
really basic overview of some animation
performance concerns in general if
you're animating transforms filters
opacity you're not going to be hitting
those layout and paint steps so where
possible you should aim to use those
properties but you can also animate
properties like as the colors background
colors which will only trigger the paint
step rather than trying out a layout as
we're triggering a layout as well and
you can animate properties that do
trigger layouts if you want to that may
be necessary but just keep in mind that
if you are triggering this layout step
then it is going to cost you quite a bit
in terms of performance okay so I hope
you enjoyed this video and I'll see you
in the next one</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>