<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Custom Pipes in Ionic | Coder Coacher - Coaching Coders</title><meta content="Custom Pipes in Ionic - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Joshua-Morony/">Joshua Morony</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Custom Pipes in Ionic</b></h2><h5 class="post__date">2017-01-17</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Z1g1iroNHK0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">in this tutorial I'm going to introduce
you to the concept of pipes how to
create them and what they can do in your
honey to applications now the app I have
on screen here is one I developed a few
days ago I decided to do a little
challenge with ionic 2 I wanted to see
how quickly I could build out an entire
application one that's ready to be
submitted to the App Store using ionic 2
so I started building this and it took
me about three hours and 57 minutes to
complete and as part of this project it
involves tracking time how much time is
being spent on a project and so you can
see right now this writing project is
currently being timed the the number
just underneath writing there is
incrementing by 1 seconds every second
and so that's the way that time is
stored in this project each project just
has an amount of seconds stored to
represent how long that has been timed
for now there's a pretty obvious problem
here and that's one that we have all
these ugly decimal points on the end and
the other problem is that it's not
really useful to know that I've spent
1056 seconds working on a project or
fifty thousand three hundred and seventy
two seconds
as humans we prefer to think of things
in hours minutes and seconds instead and
so this is where a plat can come in
really handy storing seconds in this
project made made it easier to program
it works for a lot of things that I need
to code but it's not readable so what a
pipe can do is it can take the format
that it is currently in and before we
render out those seconds on the screen
to the user we can run that data through
a pipe and that pipe will modify that in
some way and display that instead so
it's kind of like you're just pumping
your data through this little little
machine that does something to it and
then it spits it back out again
and so what we're going to do is create
a pipe that will take these seconds as
input and then it's going to convert it
into a nice string that reads is
something like three hours 23 minutes 24
seconds and so I'm just going to use
this project as an example to
demonstrate that so I've already done
this so what I've done is I've gone back
and deleted this pipe and we're going to
build it so if I jump into the project
now you'll see over here under the pipes
folder
I've already have the pipe generated to
generate your own pipe you can either
just copy out the format that's here and
put it in a pipes folder or you can use
the ionic command line to generate it
for you so if I just stopped serving
this for a second I could just run ionic
G pipe and then the name of my pipe so
this would be hours minutes seconds and
then that will generate the pipe for you
once you do have the pipe added to your
application you also need to make sure
that it's added to the app module TS
file so you'll need to come into here
and just make sure that you import it
and then add it as a declaration once
you've done that you'll be able to use
it anywhere in your project ok so let's
jump back into the pipe now and start
thinking about how we need to implement
this so you'll see a pipe looks very
similar to a normal component that
you'll be able but with a few key
differences so we have a name property
here that we're setting to hours minutes
seconds and this is going to be the name
that we're going to use to invoke this
pipe so if I just quickly jump into the
home page template here this is where
the seconds are being rendered out to
the screen currently and so the way a
pipe works is we use this little pipe
character and then when we supply the
name of the pipe that we want to use so
I'd write hours minutes seconds because
that is what I'm using as the name here
the other difference we have is that we
don't have a constructor or anything
like that we just have a transform
function and
this function does exactly what it
sounds like it's going to take in that
value the the seconds we pass into it
and it's going to transform it and so
whatever gets returned from this
transform function so I just returned
hello that is what is going to be
displayed in the template so right now
this is just going to take in the
seconds and that's going to be passed
through as the value and then it's just
returning hello so no matter what we
have in here that's always just going to
say hello now in the template so to see
if that actually is the case let's
actually try it or save that and we'll
save this as well and we'll see what
happens okay so you can see now that
instead of the seconds we have hello
being displayed now of course we don't
want to do that so we're going to modify
this transform function to do something
a little bit more interesting than that
but before we do that I also notice we
have this args parameter here too and it
also has a question mark next to it so
the question mark means that it's an
optional parameter we don't need to
supply that if we don't want to but we
can also supply additional arguments
into this pipe to control what we do how
we then transform the data so in our
initial example I'm not going to use
args the arguments here but I will come
back afterwards and we'll go through an
example using some arguments so what we
want to do now is use that value and
convert it into a string that says three
hours 23 minutes four seconds or
something like that so to do that I'm
just going to calculate each of those
individually so I can calculate how many
minutes are in those seconds by doing
the value which will be the seconds and
we want to divide that by 60 and that'll
give us minutes
but as well as that I also want to just
do math.floor to round that down
and then I can work out the hours by
doing a similar thing again but this
time we want to divide the minutes by 60
to get our hours and then finally we can
get our seconds by again doing math
don't floor but this time we're going to
use the original seconds value which is
just value and we're going to use the
modulus operator and that's going to
give us the remainder when we divide
Valley which is the seconds by 60 it
will give us the remainder of that
rather than the divided amount so if it
was a 70 seconds we divide that by 60
which leaves 10 left over so that means
there is 10 seconds and so if you just
think about that for a second if you do
if you did have 70 seconds that is
clearly 1 minute 10 seconds so by
getting the remainder from dividing by
60 it's going to accurately give us the
amount of seconds we want once the
minutes and the hours have been taken
into account so now we have the minutes
hours and seconds and that represents
the amount of seconds we had but in the
format we want so now we need to do is
return that by creating a string that
uses those so what I'm going to do here
is just return a string week right now
might actually just create it separately
here so we say let's string I'll call it
time string to be a little bit more
accurate so I want to do the hours and
then I want to add a string onto the end
of that to indicate that that is the
hours and then we'll do the minutes and
we'll add mins on to that and then the
seconds and we'll just add sex on to the
end of that so now I can return that
time string
and since we are now we've got the
seconds from the project there we're
running it through this pipe so that's
going to run the data through that pipe
and then display it here so hopefully
now we should have the time in the
format that we want so it looks like we
got some kind of error we have missing
let's see
and we're missing the idol prey that is
here so if I save that again and retry
hopefully it should work now okay cool
so it looks like it's working we have a
zero hours 17 minutes 37 seconds there
and here we have 12 minutes 55 seconds
and it's counting up and we'll just see
if that ticks over to 13 minutes and it
does okay so that all looks like it's
working fine now so now we've got a data
being displayed nicely in a human
readable format but as I mentioned
before we can also use some arguments to
further to further define what we want
our pipe to do and so what we could do
is saying here but using this pipe
that's going to let us display that data
in that format of hours and minutes
seconds let's say we want to make this a
little bit more configurable so maybe
instead of just using that one format
maybe we want to allow the developer to
specify which of those three they want
to display so maybe they don't want to
display the seconds they just want to
display the hours in the minutes or
maybe they just want to display only the
hours so to add support of that we can
pass in some arguments into the pipe
from within the template so what I'm
going to do is just add a colon here and
then I'm going to pass in an object to
that pipe and in that object I'm gonna
have three properties I have the
represent the hours minutes and the
seconds so I'm gonna say hours true
minutes true seconds folks
so what I'm saying is open this pipe to
display the house in the minutes but not
the seconds so now I'm going to have to
come back into here and add support for
that functionality so now that we're
passing in that argument there we're
going to be able to grab that using args
and so we just need to modify this
string based on what arguments are
passed in so rather than just
concatenating this whole time string
here all at once I'm going to instead
get rid of that and just start off with
an empty string and then I'm gonna check
the value of the arguments
of the the properties any object that's
passed in to determine whether or not I
should add specific sections to that
string so I can check if we want to
display ours by doing args not ours
because that's accessing the the ours
property in the object we passed in and
so I can just add a bunch of if
conditions here to determine whether or
not I want to add it to the string but
rather than creating a three different
if blocks I'm just going to use the
ternary operator here so if you're not
familiar with that essentially we can
use this format we had a question mark
so we're checking this value and if that
evaluates to true we will do whatever is
here but if it is false then we do what
it was here the ternary operator
essentially says if this do this else do
that it's just a shorter and need a way
of writing it usually I wouldn't use
this but I think it's just going to look
at quite a bit neater in this case so
what I'm going to do is so if that is
true I start ours is true I'm going to
add the hours to the time string I can
do time string plus equals to
concatenate it onto the current string
I'll just add hours and then the string
at the end of that so hours and then
we're also going to have to specify that
else condition otherwise this won't work
properly so we just need to add a true
or something on the end there so that
it's not going to fail now we can do the
same for the minutes so we're just do
time string I which now will have had
that added to it if necessary through
time string plus equals minutes plus
mins
and for the seconds as well the time
string plus equals seconds plus six and
set that to true okay so hopefully this
should work now so we'll save that and
jump back into the browser it looks like
something's finally hopefully that goes
away okay
and we now just have zero hours 17
minutes with the spacing messed up
though let's just put some spaces on the
end there
try that again okay so now 0 how is 17
minutes I would know seconds being
displayed as that eventually takes over
to another minute we'll see this update
I don't know when that's going to happen
so not gonna wait around for it but if
we jump into here again we then decide
we want to bring those seconds back we
just change that to true coming here and
it should all display again also we've
got the seconds back now and then maybe
you don't want to splay the minutes all
the seconds so we just set those to
false refresh it and now we have just
the hours displaying so I think this is
a particularly good example of where a
pipe can come in useful but there is a
ton of different ways you could use them
but in general you're going to be using
them to display data to the user in a
more user readable format so the general
idea of the pipes is that you take some
data you run it through a pipe do
something to that data and something
comes out the other end and that is what
you are actually displaying to the user
ok so I hope you enjoyed this tutorial
if you want to check out the full code
for this perma timer application I will
have just released a tutorial on that
and the code is also available on github
so I'll link to that and you can check
it out if you want I hope that some fun
using pipes in your applications and
I'll see you in the next one
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>