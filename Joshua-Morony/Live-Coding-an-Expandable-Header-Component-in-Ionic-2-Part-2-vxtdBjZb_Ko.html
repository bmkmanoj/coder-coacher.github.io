<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>&quot;Live&quot; Coding an Expandable Header Component in Ionic 2 - Part 2 | Coder Coacher - Coaching Coders</title><meta content="&quot;Live&quot; Coding an Expandable Header Component in Ionic 2 - Part 2 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Joshua-Morony/">Joshua Morony</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>&quot;Live&quot; Coding an Expandable Header Component in Ionic 2 - Part 2</b></h2><h5 class="post__date">2017-03-21</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/vxtdBjZb_Ko" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">in this video we're going to continue
building the expandable had a component
that we started building in the last
video if you haven't seen that yet I'd
recommend going to watch it first
otherwise this won't make that much
sense but if you haven't watched the
last video this type of video is
different to what I usually do in my
tutorials usually I have a sort of plan
to work from I know what I'm going to
build and I just water building it and
explaining the process these videos I
sort of try and code something live so
to speak they have the video still added
so it's not technically live but I just
walked through how I'm approaching
building it and without actually knowing
how I'm going to build it in the first
place so I make mistakes along the way
and sometimes things don't work out as
well as they or as well as I would have
hoped but some people at least in find
it interesting so I'm continuing to do
these types of videos so in the last
tutorial we've started building this UI
that's on screen now and where this this
header that kind of expands as the
content is scrolled or rather it shrinks
as the content is scrolled it starts out
full-size and then as the user Scrolls
down the list it shrinks until it
eventually goes away completely so if I
jump into the app now you can see what
we have so far so we have this app here
where I drag that header area sort of
shrinks and goes away so I had to cut
the last video off at this point it was
getting a bit long but we still have
quite a bit of functionality left to try
and build so I thought it'd be
interesting to follow up to this and
attempt to tackle doing these fields
adding some content into the header area
that I guess it disappears at when it's
relevant or no longer relevant so as the
head of shrinks and there's no longer
room for a certain element it should
fade away so again I have no idea really
how I'm going to implement it yet or if
it's going to work
but we'll see how it goes so the first
thing that we're going to attempt to do
is to get some content into this header
and then we'll deal with making it quiet
as this thing Scrolls so we could just
define this directly in the component
here so we could just write it in here
and that's going to display in the
header the downsides of that is that
it's not really adaptable to use in
other circumstances so this component
will have this hard-coded template that
it's using but really what we prefer to
do wherever we use that component it'd
be good if we could configure it there
so I can just dump some content in here
and that is what the component uses so
this is quite easy to do actually using
something called content projection so
if I just write something in here to say
hello I save that now and we see what
happens in the browser you can see we
don't we don't get anything displaying
there however what I can do is I come
into the component here and I can set up
some tags in here so just have to write
ng content and so what that's going to
do it's going to set up that content
projection so that whatever we write in
here is projected into the component
inside of these ng content tags so if I
save that now we take a look you can see
that hello is displayed now so I can
drag that up now and it does disappear
so really we could just add some stuff
here and then just have it being hidden
behind the rest of the content as it you
know shrinks away which you know
probably would look alright but we're
going to try and get that effect of
things disappearing as they're just
about to sort of hit that limit so let's
get some more realistic content in there
first let's try add some some fields
like like this example use here
okay so I'll probably just cut out a
bunch of what I just did there way too
long playing around with styles and
stuff to get these looking okay yeah I
get sidetracked and spin way too long
fiddling with CSS and stuff so I'm not
going to leave it here we've got some
field to you and she network okay
Stewart so happy with it but I'm going
to go with it now otherwise my computer
is going to explode from overheating
it doesn't really like it when I record
videos too much on the laptop so that's
that dealt with so now go with this for
the for the input fields there and we
still need to deal with this issue of
things of the continent header area
displaying behind the content here so
we'll try and figure out exactly what's
going on there might be a z-index issue
perhaps so let's inspect that and get
that sitting there so let's say we go
into the content area so that's a
actually we don't want that bit
specifically and we want to scroll
content yeah I'm not sure if that's
going to block out the correcting let's
just give this a big that index and see
what happens
so the navbar box that finds just a
Content area so I think what we might
need to do is add kind of background to
a Content area here so my dad is added
directly to my own content we have a
background it seems and if I just let me
try bump that that index up to lots and
yes and that looks out nav far as well
that kind of messes up the whole header
area so that's not really an option to
fix that that's what I might do is
instead add another sort of container in
here
and we had a background color to that in
here and we want to mess around with
them I'm just going to make this like a
black so it's really obvious to see okay
and so we've got the padding on there
too if I scroll that up now you can see
that's still displaying above as if I
expect this I will try bumping up the
red index on the content container
actually I think maybe I'm going battle
this all wrong
try to set that overflow properly only
the expandable header because that's
shrinking the content areas are moving
over the top of it that's shrinking into
nothingness but the the input is still
displaying even though the container
that it's in is or essentially your
height so I should be able to just come
into here and set the overflow to hidden
just leave that and see if that works
yeah a much easier solution so I'm going
to clean up the junk I headed there
remove that container as well it's as
much nicer solution as well because it
doesn't require us doing anything to a
template here everything happened inside
of the expandable header which makes it
more modular and we can sort of use it
wherever we want so that's the goal and
if that works nicely okay so we put that
working now we now we can start working
on the sort of animated effect going on
here so what we're going to have to do
is figure out when these elements are no
longer visible or at least when part of
them is no longer visible so say when it
hits there I want to hide that password
field and then once if we can manage to
get them hiding at that point then we
can animate that transition so I will
see what we can do so what I might do is
just jump in here and
I destroy working with the element ref
directly here and it's probably better
maybe we did saying like creating a as a
child component or something that these
could sit inside of but I just others
want to see if we can get this working
at all in the first place so usually it
is like experimenting and trying to get
things working in the simplest way
possible and then seeing if there's room
to improve that afterwards so what I'm
thinking is that we'll inside of this
when a scroll event is going on as we're
handling the header shrinking we can
check what the new header height is and
then I guess what we're trying to do is
see if this the bottom of this field if
that still falls inside of that new
client height the new height for the
header then display and if not we'll
hide it so let's just try logging out
some things and we'll see what we have
to work with so we're going to do stuff
inside of here I might send this out to
now just do everything inside of here
for now some carrot a bit of event I
already know what's going on there and
what I'm going to do is just log out the
children of the native element which
hopefully should give us our two input
fields so save that take a look okay so
it's scroll now we don't have any
children being rendered out let me just
look at just a native element and just
realize that my inputs have disappeared
I'm not sure what's going on there why
they've gone missing all of a sudden so
try every seventeen implication I reset
the application then back I swear some
really strange stuff is going on with
this these videos branch push on okay so
let's get back to what we were just
doing I was trying to log out the native
element we're going to see and see what
sort of properties we have to work
whether we want to grab the children and
then we want to figure out when to
display and hide them so I'll log that
out again
okay we scroll to get these popping up
okay so we've got the children property
there now so we can we can see eye to
eye on items under children so this
could be good to work with so the first
one the user name input clients hope
that's distance from the top is zero so
if I look at the password field
so it's am a client top you want offset
top so this is an offset top of 54 and
then a user name has an offset top of
zero so if we can combine that offset
with the height we should be able to get
to say let's use the password as an
example just open that up again screen
seven all over the place okay so this
should be the password so we have the
offset top of 54 so that should be the
distance to from the top to where that
field begins and then we have a client
Hyatt of 44 it should be how tall the
field is entirely so if we can find
offset top with client height we should
be able to get the distance at the
bottom of this element is from the top
of the screen hopefully so what I'm
going to try and do is we'll do a this
element on native element children and
again it sort of highlights again this
probably isn't the best way to do it I'm
working with the Dom directly which
isn't really the most angular way to do
things but I just want to see if we can
get this to work so run a for each on
those and we'll pass in the each field I
will just call this I wish they call it
it's not necessarily going to be an
input so I'll just call it really one
quick element one quit header element
and I've just checked that that is
receiving something I should probably
not log that ahead of Soho can't scroll
that it's that not am oh it's nothing to
raise it
htmlcollection so we should go to just
do we should go to do a for of Luke
instead so if I do therefore let header
element of this element native element
dot children and we'll just some log out
the header element there and we'll check
that that works now delete me okay so we
have the elements popping up there now
okay so now for this check off if I can
grab that offset we want to offset top
and we also want the client height so
make sure we can grab those two values
and then we should be good to start
trying to do some stuff with it
syntax error okay
okay so of a scroll and we have numbers
for each so we've got 0 which is the 0
which is the user name and then usually
a good as 44 pixels in height and then
offset 54 for the password which should
be the height of username plus 10 pixels
of margin and then that has also a
height of 44 so now we should be able to
compare those numbers to whatever the
current the new header height is and
then determine whether or not to display
those so I will get rid of this log
stemming here I don't need that and I'm
going to move this down here now go
after I said to find out this really
makes difference so just a test I'm
going to check these values and then
just log out should hide if we want to
hide the element so create a variable
called just call it total height and we
say that equal the offset top plus the
twine height
and then we'll check that against
whatever the new header height was so
we'll say if if total height is greater
than the new header height will logout
should hide em so save that and jump
back into the browser and hope that this
works okay so scroll up I think logging
out now which is good because we don't
hide this element yet and hopefully
we'll soon as we touch that password
field we get signed log out that says
should hide and it looks like that is
actually working for this full time this
whole time that's going to be logging
out because it should be hidden all
those times we might add a check to see
if it's already hidden so enough setting
field unnecessarily and if I get over to
your the username as well we should be
getting two messages every time we move
just a little bit and it looks like we
are so I think this is going to work so
we're going to use this same sort of
thing here this subset element style I'm
going to copy that down here and we'll
pass in the header element instead now
get rid of that console log statement
from now and we'll set the display to as
you won't see the slow set opacity to
zero because that way we can sort of
animate it from forward pasady to no
audacity so we can kind of fade out now
so we set opacity to zero so save that
and we'll see if the things actually
hide now yeah seems to be a string not a
number okay so let's try scroll up again
and hopefully it just disappears this
time and it does that's really cool so
then we need to do the flip side of that
which is to display it if it shouldn't
be hidden so here's another case here
would say else and this stop render a
doctor element and
going to use the opacity again and we
set it back to one and so we get rid of
them and scroll back and they put back
in again so this is actually turning out
quite well do one with the hedge it like
I said I do want to check if those
elements already if they're already
displayed or hidden and only do this
when necessary
probably I'm not going to do that in
this video I will do it in this
follow-up blog post but one more thing I
do want to do is see if we can get that
animation happening and so I'm not
really sure it's going to be better to
put it do something here I'm thinking
the best way to deal with it is probably
to define it in our home file this will
allow us to control the animation
through here rather than through the
header yeah which way is best I'm not
sure but it's going to be easiest to do
it through here so I should be able to
just jump into here and on the my own
height and just add a transition
property she gets do one second linear I
which forget how to do these transitions
they end up looking them up refresh that
okay let's try scrub up right now cool
and it slowly fades out over one second
and as you come back they slowly fade
back in again so it's really a bit slow
though let's change it to zero point two
we'll have a go pretty quick yeah that's
really cool
already like that alright so that more
or less works now we've pretty much the
the functionality that's here it's not
anywhere near as nice looking as how
this one is but it's mostly there's
going to be some additional CSS stuff
going on a bit of a bit of tidying up
but the basic idea is there the basic
functionality is there and it works
yeah just main note I'd like to make is
that there's definitely provements of
the way this could be done in terms of
performance and setting these
unnecessarily and even the general
structure of I guess
looping through these Dom elements
manually so if I have any more thoughts
around this I'll include that in the
blog post I will they all card either
surf will make it look a bit prettier
for the blog post but yeah this is most
of the functionality done already
and I'm very happy with that now just as
a final check this is designed in such a
way that you should be able to put as
many items as you want in here and they
should all just show and hide
automatically so or double these up and
check that that's actually the case of
course all these aren't going to fit but
yeah even if you use man disappeared
there this is actually - it's not tall
enough to fit all that then so I could
go in here and we'll just double it set
up to 300 and that's another improvement
that could be done to this as well we
could allow that to be specified during
input on the component itself and we
could do like a header height equals
whatever you want in here as I mean just
refresh this where this field why are
they not showing up those we reserved
the application and it's showing up
again now I don't know why it might keep
sharpening that's weird but they're
there now so test those that sides
displays yeah it looks like this is all
working we can add as many elements as
we want in there and they're going to
item display as necessary
I say yeah that's about it for this
video I keep a lookout for the blog post
when it is released and I'll see you in
the next video</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>