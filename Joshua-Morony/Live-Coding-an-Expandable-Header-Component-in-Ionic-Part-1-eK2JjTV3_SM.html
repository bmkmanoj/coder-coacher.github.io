<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>&quot;Live&quot; Coding an Expandable Header Component in Ionic - Part 1 | Coder Coacher - Coaching Coders</title><meta content="&quot;Live&quot; Coding an Expandable Header Component in Ionic - Part 1 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Joshua-Morony/">Joshua Morony</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>&quot;Live&quot; Coding an Expandable Header Component in Ionic - Part 1</b></h2><h5 class="post__date">2017-03-20</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/eK2JjTV3_SM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">in this video tutorial we're going to
walk through how to build this UI I have
on screen now somebody sent this in to
me a little while ago forgotten who
actually sent it so sorry to them but
essentially we're going to create this
we're going to attempt to create this
little header expandable header thing
where if you sort of scroll it expands
and as you scroll down further in the
content area the big header disappears
and it goes just back to the normal cabs
they have there so recently I put out a
video where I sort of did this pseudo
live coding video usually for video
tutorials and other tutorials I have a
plan I know that that's going to work
and I just walk through building it in
that particular video I didn't have a
plan I didn't know how I was going to
achieve a database idea of what I wanted
to build and that's going to be the same
with this video I don't know exactly how
I'm gonna go about building this yet I'd
have no idea if it's even going to work
I'm going to try and build it on screen
so you can sort of see how I go about
doing it and all the mistakes I might
make along the way so we might not end
up building playing that's exactly like
this here I just kind of want to get I
guess the spirit of it and we'll get it
as far as we possibly can and like last
time I'll probably do a follow-up blog
post afterwards where I can sort of sit
down and improve it a bit to the point
where it's a bit more usable but
hopefully in this video we can get to a
point where we have something cool so
just taking a look at what is actually
happening here so we have it so that
when the content is scrolled all the way
to the top this header thing is fully
expanded and then as the user Scrolls
down and starts shrinking until we
disappears completely so we're going to
try and build that first if we can get
that going if that's easy
perhaps we'll move on to the next thing
where
we have those fuels in there as well and
so as the header gets bigger more field
start popping in as they can fit
essentially over so some some cool
animations going on there as they fade
out as well
probably not saying we'll get to in this
tutorial but we'll see how it goes so my
thinking so far as I will create a
custom component that we're going to put
in the header area of a page and then
we're going to listen for scroll events
on the content area so we want to get
those scroll events into that custom
component and then either expand or
shrink a shrink it based on where the
scroll currently is and I'm thinking
there will be some kind of inverse
relationship between how tool the
expanded header is versus the distance
that the scroll is currently from the
top of the scrollable area so I've got
the documentation for the content for
the content API on screen now so this is
the ion content tag that you have in
just about every single one of your and
pages in ionic two and so if you take a
look at this is there's a lot of stuff
that we can use in here there's values
like scroll top which is someone here
that scroll to top which is a function
stress searching we've got scroll top
pop I think that might be a typo I'm not
actually sure but anyway we want the
distance this now we want the distance
from where the scroll currently is
versus where the top of that scrollable
area actually is so we'll get to that
eventually we'll see if this is a typo
or not I don't see why it would be
called that otherwise and then as well
as providing values like that we also
have some events we can listen to how we
the output events here so I on scroll I
have to go end and I on scroll start so
we can listen to these I on scroll
events and then do things as we can hear
the
scrolling so the basic idea I'm working
with now at least is that have the we
grabbing the events from the content
area in our custom component and then
based on whatever the current status of
that content area is we'll change the
height of the expandable header so let's
get a start now by generating the custom
components I've already got an app set
up here to avoid having to set that all
up on screen so all I have to do is run
our nakji components and we'll call it
expandable header so I'll run that now
and then we're going to jump back into
the project here I prepared the project
beforehand but I generated an ionic 1
project which is definitely not what I
want to do so I'll generate a new
project now and then we'll jump back
into it ok so we're running into issues
already but and I've generated entirely
two project now and we are ready to go
so I'll generate that expandable header
component again
and then we should be able to find that
in our components folder here I'm just
going to rename this to expandable
header instead of expandable header
component and we'll get rid of those
comments there and we'll just set it up
in the app module file right away and
put that
and we'll need to set it up in the
declarations array okay so before we do
anything I'll just come in to homepage
which is where we'll set up this this
component and I'm just going to try and
add it to the header here just to see
that we actually have the component
working save that and then I'm just
going to serve that now mistake number
two already I am on a roll today I gave
the wrong file pass in at module file of
course that is in its own folder as well
save that again hopefully we've got it
now so we have something working now we
can see the hello world being shoved
into the top there which is just the
default
components generated if we open this up
you can see we've got interpolation on
text there and then in the typescript
file for this we just have that being
set to hello world we're going to get
rid of that of course but at least we
can see that B component is working got
it all set up properly now so the first
thing I'm going to try and do is see if
we can get scroll events being passed in
from here into our component so what it
might do first actually is it's going to
modify this home page to include a ton
of different junk data I'll get rid of
to that
so I'm just going to put in a bunch of
h2 tags that say low just so we have
some stuff to scroll okay that should be
enough we'll just jump back in here okay
so we can scroll a little bit now so we
should be able to play around with
what's happening in our header so we
want to pass in that content area to our
expandable header and we want to listen
to events on it so I'm going to do is
I'm going to set a reference a local
variable on this content area we'll just
call it let's go a scroll area and then
we're just going to set up an input on
our expandable header I will call this
just call that scroll area as well as
you know I don't like that's really a
bit confusing I want to make these two
things that your remains will call that
just call this one content and call that
one scroll area so if I scroll area
equals content and this is a similar
concept to what you do with the ion nav
setting our menus and things like that
so we're just passing in a reference to
ion content into our component here and
in order to grab that in the component
I'm going to have to set up and input so
I have to import that it's going to get
rid of that for now and I'll get rid of
this as well okay so now we'll go to
grab that and a value through input and
then the name of the input we created
here which is scroll area scroll area
yeah scroll area and if we set up and
after few an it okay we'll just try and
log out whatever that ends up being set
to so we'll just log out
Shaffer got that right to give the name
as well I will call that I will just
call that scroll area it's wrong
so now if I log out scroll and register
scroll area hopefully we can see
something being passed in we want that
content to be passed into this component
so jump into the browser and cross our
fingers okay so that that isn't working
we're getting undefined in the
expandable header now so I will try and
figure out why and that is happening so
perhaps like fun to do will be to look
at ionics code itself as I mentioned the
menu that's like two users if you're
setting up a menu use a similar process
where you set up a variable for what
your content is and you pass that into
the menu so why don't we take a look at
how i on it does that and then maybe we
can emulate that okay so I've got the
ionic repository open now so we're just
going to find the menu component okay
we'll jump into the menu ts file and
we'll try and see how that content is
being passed in to into this file when
did this this component rather so
there's an example of how it works you
set up the content reference on the ion
house and then that's passed into the
ion menu so it's pretty much exactly
what we're trying to do here okay so as
far as it I could show it pretty much we
were doing the exact same thing
I just tried changing the name of the
reference we set up I just ran it to my
content I think your content must re be
being used because if I change that to
my content instead of just content if we
run this in the the browser again now
you can see we are actually getting that
content in there I'm just going to
verify that actually was the problem I
would have changes back to content again
instead of my content and we'll see if
it fails
it doesn't I wasn't the problem what
have I done
is it possible I just forgot to save the
home to HTML file and it probably was
unless I'm having some kind of weird
brain fade right now that looks like I
forgot to save the file and that's why I
wasn't working so we want on that fun
little adventure to find out how to make
it work but it turns out all you have to
do is make sure you save your files so
cool let's move on from that now so we
have our content being injected in so
now we will be able to listen for event
from that content so if I just jump into
here now so we've got content in setup
at the scroll area so what I want to do
now is listen for those iron scroll
events so I should be able to subscribe
to this event and then I will be able to
handle that however we want so I'm going
to do the inside of this after view and
Mitch hook here so what we'll do is this
scroll area add the ion scroll got
subscribe and which passing event in
here
and log it out to make sure that we
actually get something okay the stairs
on the side here it looks like it may
have been an issue that is called
content instead of my content so just
ran into issues with it again so I'm
just going to leave it as my content
acts like you can see that works there
but if I change it back which I swear I
just did but I'm probably not thinking
straight on video I'm not sure thing
weird is going on maybe it's a timing
thing but ran into issues weird not
being able to access it this again so
we'll leave it as that for now actually
if it pops up again we'll deal with it
then yeah not sure what's happening
there if you can spot what was happening
and I'm just being weird let me know
better I'm going to jump back into
attempting to do this now so I set up
that scroll event there and we can get
all these scroll events as as we scroll
and so that's coming from my expandable
header so we can now listen to those
events in are expandable header which is
really cool because now we can actually
do something with it so inside of this
event we'll have a few things one of
those is scroll so as you can see how to
scroll down to the bottom now scroll top
is 548 if you scroll up a little bit as
scroll top is 408 and then if I just
scroll all the way to the top then
that's going to go back to 0 again so
that's the value that we're going to
make use of in order to make our a
header expand and shrink so what I want
to do is set it to be full height by
default and then as that scroll top
increases we'll just essentially
subtract that value from the current
flight of the header so I'm going to set
up a value in here we'll call this I
just had a high I guess makes sense and
we'll probably add the ability to
configure that in some way and future
depends again depends how long this
video goes as to whether we'll set up
some extra things in this video or not
it looks at this so far we probably
won't I think it's really dragging but I
just been able to set this to a static
value so we set it seriously I will go
with 150 so we're going to make this 150
pixels in height for the header and to
set up that high initially we're going
to use the renderer and element ref
which will give us a reference to the
native element for for this component
and the render will allow us to set some
styles on it so I've imported that and
I'll set both of those up now sorts the
elements up add element and set the
renderer up as renderer so what we want
to do then is go this renderer set
element style and we want to set the
style of the
the native element of this component so
we did this element but native element
and then we just supply the value that
we want to set so we're going to set the
height and then the value that we want
to set that to so we want to do 150
pixels so do this at a height plus PX so
if we say this now hopefully our
expandable header should be 150 pixels
high and looks like we are running into
some error again I'm not sure what is
causing this again I think it's relating
to not being able to get that reference
I changed it to my content it seems like
it worked again and if I change that
back it works I don't know there must be
some weird time industry going on here
so if you know let me know in the
comments the other people know so they
can say I want to implement this disc
themselves and so now I'm just going to
roll with it okay so I had a should be
set 250 pixels now it doesn't seem to be
so we have a look at that that's inside
the header we have this height here
being set 150 pixels so it's set 250
pixels there but we also need to set
that to display:block and to get that
rendering as a block level element now
so I'll just set up that style in the
FASS file here so it's not fine that
we're going to allow the user to
configure anything like that so we can
just set that there and it's refresh
just to make sure that applied properly
okay cool so we have a 150 pixel tool
header here now currently it looks a
little weird because it's a different
color to be into navbar here there's
probably a better way to do this
platform
configurable but for now we're just
going to use the light color which I
believe is the same as the nav so we can
get that from the from the variables
file here we've got some colors defined
so it's grabbing the light one so I'll
save that again and we'll see if that's
using our gray and that seems to be so
we're making progress here we've got the
header now set 250 pixels and then we've
got our scroll and then setup we can
listen to the scroll and figure out the
scroll top so now what we want to do is
make that scroll of in effect the height
of this header section here this
expandable header section so what we're
going to do is access the scroll top
value as I'll jump back in here and only
crest like a function here and we'll
call this some resize header and based
on the event and we want to handle this
event inside of the Dom right handler
I've talked about this a few times in
the past I have an article on it which
I'll link to but essentially it allows
us to get a onic to handle updating the
Dom for us as with events like scroll
events that fire off a lot we don't want
to be making heaps of updates to the Dom
it's going to cause sort of janky
listeners it's not going to perform very
well so we let ionic handle that for us
and it schedules the update you know in
a more efficient manner so I have more
information that if you're interested
but basically we want to just run these
Dom updates like changing things as
Styles inside of the Dom right function
so we should be able to access that
through the event directly by accessing
Dom right and then whatever code we want
to run we can do so inside of this
handle here and so now I just want to
logout the event the scroll top from the
event to make sure everything is working
as expected and looks like I might be
running into that issue again with the
content area
and deed I am let's try our trick of
receiving this file with a different
name
it is so weird I feel like I knew things
like so obvious but I can't sit alive
when we figure it out right now so again
just going to roll with it okay so let's
scroll this now I have too much stuff
and you move down now actually it's jump
back in here get rid of that in here and
we actually want to trigger that resize
header event as well which we weren't
doing and we want to pass through that
event from the scroll through that
function so let's try that again
okay so I'll scroll it now and cool
we're getting the scroll top and that's
looking really good it looks like those
are the values that we would want to use
so what I'm going to do now is jump into
here and then we're just going to set
the header height actually will probably
take a step another value here we have
the initials of the header height and
then create a new head height as well
and then we'll set the new header height
to the original header height minus
whatever the current scroll fault is and
this is a quick check to make sure that
is actually greater than zero or at
least equal greater than zero I'll just
do if this stop and you hit a high it is
as a lesson zero we'll just set they had
a high it back to zero
okay so that's the calculation for that
done and then once we've done that we
also want to then set a height to that
value so I'll just copy and paste this
down here as well and it's answer thing
to hit a height will set it to new
header height save that and then
hopefully our header area should change
its fun okay so try scrolling I'll cross
my fingers so nothing crazy happens and
as I scroll we do have that header
expanding and shrinking which is cool
that's exactly what we want to happen
and now as you see the only sort of
weird thing that is going on here is as
this sort of looks like the content is
being cut off at the full height of of
the header area so that's if you can see
where that sort of is getting cut off at
hello there that's the height of the
header plus the nav bar and that's where
it's currently being set as sort of the
point where the the content sort of ends
i might just solve this in a chibi way
for now just have a quick look yeah so
you can see our fixed content is taking
up 194 pixels and so on except that
style and I'm so that content isn't
going behind a header area but since
we're dynamically changing how large our
header area is just ionic is getting
confused and it's cutting it off at that
point
so just to solve this for now what I
might do is add the fullscreen attribute
and what that does is it will allow
content to go behind be the header area
so if I scroll now you can see that it
follows the it follows the header up as
it moves and so now if I scroll this
this content is going climb the nav bar
that will actually be visible behind the
nav bar then rather than stopping just
below the nav
so that's useful for things like
transparent headers so you can still see
the content behind in that phone I
prefer not resolve it in this way and
eventually in a proper version but again
this video is running a bit long I think
I'm not sure how long I've been doing
this one so far but I feel like this is
going to be a good a good place to end
the video I will do a follow-up blog
post at least with the additional
features of having fueled pop up in here
based on how high how high the
expandable header area is the basic idea
should just be to have fields defined in
the expandable header we need some wait
for the user to provide them to the
header rather than hard coding them in
here but then you just have some kind of
check some kind of ng-if to see what the
current height of the header is and then
if it would if it fits display it if it
wouldn't if it wouldn't fit and don't
display it so if you want to go ahead
and try and implement this yourself it
might be a good good little challenge to
try and figure out but I will try and
get this all sort of for the blog post
hopefully these this video on the blog
post will be released around the same
time anyway but yeah I'm really happy
with how this is turned out looks really
smooth and it seems to work just as we
intended it and it didn't take too much
messing around to to build either we ran
into some weird issues with that content
I'm still not sure what's happening
there I'll try to get that out for the
blog post as well happy overall it's
really well really happy with it and I
hope you enjoyed the video so
and keep a lookout for that blog post
and will this video which hasn't come
first and I'll see you in the next
tutorial</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>