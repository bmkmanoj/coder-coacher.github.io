<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Mocking Plugins with Ionic Native | Coder Coacher - Coaching Coders</title><meta content="Mocking Plugins with Ionic Native - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Joshua-Morony/">Joshua Morony</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Mocking Plugins with Ionic Native</b></h2><h5 class="post__date">2017-03-27</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/SENbR9g7ExQ" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">in this video we're going to talk about
ionic native three-point X and the
ability to now amok plugins that we use
in our applications so as you may
already be aware and it made it allows
us to use Cordova plugins and it
basically serves the role of wrapping
those plugins and providing us a more
kind of angular way to interact with
those through things like observables
and it supplies types for us rather than
using the sort of traditional Cordova
way that include things where things are
kind of available as these global
objects most of the time so I'm not
gonna talk about that I guess the
benefits of a ionic native in this video
I'll link to another one for that if
you're a little bit unsure about what
it's all about but recently there was an
update to ionic native now which kind of
changes structure of it a little bit but
also gives us two major benefits and
that's that we now only need to include
plugins and application that we're
actually using as part of ionic native
and we can also now mock plugins and now
if you followed my testing series of
tutorials and you're probably familiar
with the concept of a mock but basically
it's just a fake thing so if we have a
like the camera class for example if we
create a camera mock it's just a class
that we've created that pretends to be
the camera so if we wanted to actually
use the camera of course we need access
to the we need access to the camera
that's you know natively on the device
it's a physical piece of hardware that
takes a photo and returns a picture and
now if that makes it hard to test
through the browser because we can't
access that but we could mock it and we
could make our own little fake camera
that just returns us a string or photo
or whatever we want to return we can
just cut up a simple little function
that we'll just kind of ignore
everything else and just return us a
simple little value
so I'm gonna walk through an example of
that how exactly to do that in this
video and I'm gonna just follow along
with this example that's here for the
camera plugin so as you'll see here now
we import the camera as we have in the
past although the the path verb is
slightly different but what is different
now is that we add plugins from my ionic
native to the providers around and our
since we're adding them as providers
that's what gives us the ability to then
you know mock those to fake them and the
other different series that we also now
need to inject those into our
constructor so if I just scroll down
here I think there's an example so here
we have an example of mocking the camera
and so there's this class called camera
mock and this is just like replacing the
functionality of the normal get picture
function so rather than get picture
triggering is the activation of the
camera and then the user taking photo
and returning that photo or get picture
will do now is just return this promise
which resolves with some fake data and
then to use that mock class all you have
to do is use this use class property
here to supply your mock so when you're
adding the plug-in to the providers are
running rather than using the plug-in
itself using your mock and so I think
this the wording here is actually quite
easy to follow when you think about it
because you're saying hard to provide
camera but instead of using the camera
or to use this class instead so it's
going to provide camera throughout your
project but it's going to use this so
let's go through working through this
example in an application of our own so
if I want to set up the camera I'm just
going to copy that into first to the app
dot module file and put module on TS
we're going to set up that provider in
the providers array down here and then
we'll just jump into our home page and
we'll import that as well here and we'll
set up or inject it set that up as just
camera and then I'm just going to add an
eye on view did load function and we're
going to call the get picture function
on the camera so this type of camera
don't get picture and then that was
going to return a promise so we do then
the result whatever that is and we log
it out and if we were actually using
this plug-in for real we would also need
to run the command to install the camera
plugin for Cordova as well we're not
actually going to be running this on a
device I just want to go through how to
mock something so we'll serve this now
and we'll see we'll see what happens I
already was serving it I don't know why
just cancel that
okay so we're running into a problem
here because it can't find a camera and
now previously with our native we
wouldn't have to worry about this to do
it or be there by default which is kind
of handy because we don't have to worry
about installing anything but with the
new ionic native we're only including
the plugins are actually using so we
will need to install that that camera
plug-in from ionic native as well as the
actual Cordova plug-in itself so for
coming here you can see this is how you
install the the core the core
functionality of a honey native we can
also just use that same thing to install
the camera of course we displace replace
core there with a camera so I'll run
that now so we can get that installed
and we serve that okay so we run into
this new era now that is caught over not
available and that's because we're
trying to access this native
functionality that's it needs to run on
a device to work
now we're triggering this as soon as the
page loads we're trying to call the get
picture function the camera that we're
trying to run through the browser we
don't have the application built with
Cordova we don't have access to that
camera API so we're getting this error
and so that makes it a bit awkward to
test because we could of course just
like it's ignore this functionality
until we're ready to test on a device
but it is nice to be able to test
through the browser that's one of the
great things about using ionic is that
we can quickly test through the browser
before moving to testing on on a real
device and that's where that this
mocking functionality comes in really
handy because we can just fake our
plugins whilst we're developing and then
when we're ready to test on a real
device we can go back to using the real
plugins so August will mock the camera
so in providing the camera here we're
going to provide a mock for so we'll
just use the one that within that was in
the documentation here so this is the
mock class which extends the camera so I
think we we don't even really need to
worry about extending the camera I don't
believe we can just make a simple class
here with just one function and all this
does is it provides a get picture
function just like the normal plug-in
does and all of those has just returned
this this spring here and we could put
some like real base64 data in there so
we get a real image back that we could
use in our application as well rather
rather than is having this sort of fake
data here we could have something that
were actually actually able to use in
the application so when we triggered a
trigger the camera in the browser it
would still return us a photo and that's
gonna obviously just be some static test
photo but it's more useful than just I
guess not doing anything so now that we
have this fake class this mock that
we've set up
just need to say well we want to use
that instead of the normal camera class
they're from ionic native so we need to
do is that use class and then we just
supply the name of whatever the class
was that we created so we'll save that
and we'll see if it works now I'm just
did we forget a comma yes put that back
in there okay so you can see we're
getting that result there base64 encoded
data goes here because we have this mock
that's returning a promise that resolves
with a 64 encoded data goes here and
then in here we're calling the get
picture function which is now using this
instead of the actual or trying to
access the native plugin and then we
just log that result out and so we can
we can create as many of these mocks as
we want for any plug-in and we can even
add additional functions to these marks
as well so if we had something like the
geolocation plug-in I'll set up for my
head I think they'll see the get current
position function there's a watch
position so you can just create you know
mock functions for each of those
functions are trying to access or none
of those or one of those depends you
know what you're actually using in your
application and then you could have that
return some kind of a useful data that
you can use to I guess test and work
within the browser or you could just use
it so that so that the application
doesn't complain whilst it's running in
the browser if you now that we've got
this mock set up with the camera
whenever we try to access the get
picture function on the camera it's not
going to complain and throw an error
saying we'll call dog Cordova's not
available you know what are you trying
to do
it'll just just you know fail silently
kind of thing do nothing or it can you
know return some useful data okay so I
just wanted to create a quick video on
this too it's highlight this new
functionality that's available now I
think it's a really cool addition
and it's gonna help a lot with
developing faster and testing in the
browser which I am a big fan of so I
hope you enjoyed the video and I'll see
you on the next one</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>