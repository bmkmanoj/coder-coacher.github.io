<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>&quot;Live&quot; Coding a Speed Reading Application in Ionic - Part 2 | Coder Coacher - Coaching Coders</title><meta content="&quot;Live&quot; Coding a Speed Reading Application in Ionic - Part 2 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Joshua-Morony/">Joshua Morony</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>&quot;Live&quot; Coding a Speed Reading Application in Ionic - Part 2</b></h2><h5 class="post__date">2017-04-17</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/owIdIBv42kE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">in this video we're going to keep
building the speed reading application
we started in the other video so I've
given my computer arrest now the fan has
stopped complaining so much and I'm
ready to try some more things so
basically in the last video we got to
this point where the kind of general
idea of the functionality works we go we
have a were able to supply a list of my
guests of the chunk of text and split
that up into an array of words and then
have those words loops are on the screen
at I think it was he's currently like
1200 words a minute or something like
that so in this video we're going to
focus on making this a little bit nicer
so you look a little bit better and
we're going to add in controls to start
and stop the playing of the text and
also to perhaps change the speed at
which the text is cycling through as
well so we'll start off by making it
this look a little bit nicer I think so
i'm going to get rid of that button
first because we don't need that anymore
since we're going to control everything
through sweet apps we're going to start
and stop with a tapping then we don't
need this to trigger that start reading
function so i'm going to delete that and
I guess we'll add just a basic I guess
there's some basic functionality for now
we'll make the will trigger the start
reading function with a touch start
event so I'm just going to add a host
property to this component here which
will allow us to listen to events on the
host component and we're going to listen
for and is fixed having there we're
going to listen for the touch start
event and when we detect that we're
going to trigger I will trigger the
start reading function
so we'll save that and we'll see if that
works it doesn't seem to be working on a
tough economy check that this is
actually emulating touches actually that
might be happening because I component
is probably not yeah it's a I currently
at zero by zero pixels so that's not
going to show where there's nowhere for
us to click obviously so what I might do
we're going to have this taking up the
whole content area I think so probably
further to width and height 100% so if
we come into the speed reader a CSS file
here we'll add some styles for and I've
mentioned this in videos in the past I
usually just surround everything with an
iOS and empty selector to make the rules
more specific which means that these
rules are more likely to beat out ionix
own CSS styling if there's sort of
clashing rules there so we'll just add a
whipped hundred percent and a high
hundred percent and then we'll just
check that that's all good is that still
as zero by zero there if we check there
and the computer properties here if you
just look at the display ABCD so as
kindly set to display inline so we're
either going to want to set this to we
could set a block which should and that
makes it take a whole area I'm actually
going to use a flex to Slayer and I'll
show you why in a minute I'm going to
use that to align our counter into the
center of the screen it's easier to do
that with a flex layout so we'll go with
that you can see now that it's occupying
most of the screen here and I'm also
going to I'll make sure I include this
display flex in here and I'm also just
going to remove the padding as well on
that content area so we try that again
now so double check our speed reader
component in it up there okay i occupy
the whole space now so hopefully if we
click
or cat rather that touch that event
triggered the text to start scrolling
through so what I might do nails style
this a little bit so that we can have it
displaying absolute bit bigger and also
in the center of the screen so we should
be able to just entry using this flex
layout if I just do justify content
center you'll see that puts that in the
center of the screen there horizontally
and then we can also use a line items
center and that's going to put it in the
center vertically and then that's a bit
small so we'll probably also i want to
bump up the font size a bit 1.5 even 2.5
yeah that's probably good and i might
remove the header i don't think we'll
need to use that yeah not sure we'll
just remove it for now and then if we
need it later we'll put back in and dump
those styles into a CSS file for the
component here so a black there we go
Johannes rattles going to remove the
header okay so the nice empty white
screen right now which won't be best for
in terms of usability but we can do
something about that later but basically
if we just tap on the screen now touch
start event will trigger our texted
start display and I'm going to turn that
down a bit I'd set the speed really high
just to see what it looked like we'll
set that back to what was it that was
300 words per minute I'll calculate it
again as I've only this latter 300 words
per minute I have to do 60 50 seconds
about of a 300 00 milliseconds so we use
that again and whilst right pickle given
nice color to the background rather than
the white we have now so let's go weird
oh it's easy on the eyes please thank
darker maybe let's go this turquoise
we're going to grab that and put that in
themed variables we can just set the
background color variable to our
turquoise color and then we'll probably
want to change in this and make the text
for that white which I think will be a
bit easier to see cause I think I think
that works pretty well as though there's
a bug which I just axin I discovered
every time I am click it's starting a
new interval which is kind of having
this effect of speeding up the text and
that's kind of messing everything up so
let's do with that now before we forget
about it so basically when we don't want
to start reading a function to trigger
again if it's already been triggered so
we're just going to keep track of a
playing flag so set that to false and
then when we start reading we'll just
set that to true so we'll check that if
is stop playing we r bar equal road if
it's not playing we want to run this
function so if it's not playing we start
playing it and we also want to set this
playing flag to add true so so now if we
click it once and click it again that
function won't run twice or at least
hopefully one so now if I click and I in
a quick again again and again and again
and it's not going any faster so it
looks like that sort of now and why
don't we also now put in this stop
reading function so what I want to do is
on a touch end event when these stop
touching the screen
I want to stop so set up a listen up a
touch end and then will trigger the stop
reading function and when that happens
we want to clear that interval so first
we'll set this stop all clear the
interval first so we'll be clear
interval this dot takes interval so
that's going to stop the detection flame
and then we'll just set this stop
playing back to Fox which will allow us
to start it again if we want to so let's
jump into the browser now give that
another go so basically what I want to
happen here is when I hold down on the
screen it's going to play the text i'm
going to let go it is going to stop so i
will try that now it's going to be a bit
hard for you to tell what i'm doing but
i'm clicking now and i'm still holding
which is why that silly thing pops up
but if I let go and she that's gonna
cause problems when the browser here
they're holding down triggers that
pop-up menu which is missing the up here
but if I just do it quickly let it go
and touching letting go you can see that
it's starting and stopping as I do that
if I hold down for too long then this
pops up and then we miss that on touch
Endermen I don't know if there's a way
that I can turn that off or not alone I
think if I do it here yeah I'm not in
the emulator then it's not technically a
touch event anymore it's a click event
so and when you're not in the emulator
doesn't trigger that thing so just a
test I might just change these two um I
could change them to mouse down and
mouse up I'll do that just to just a
test and then we'll change those back at
the end it so now if I hold down with
the mouse is starts playing and now
we've got to let go now and it stops
playing so for as long as I hold down
the text will start scrolling through I
wonder for the mail stand event watch TV
emulator so I'm just going to change
these back now and we'll try and work
around that issue with the pop-up I
don't know if I know in a few
turn that off on it so I couldn't find
how to turn that off I did come across a
post where this function here which
prevents that context menu from
launching in the application so we're
just going to dump this in here now
that'll stop the menu from popping up
when we're testing and then it can just
be removed later so you can see now I
can hold down without a menu popping up
and I can start and stop the text so
that's pretty good already as I
mentioned before I do want to add
controls to speed up and slow down the
text and also go backwards and forwards
through the text and to do this I think
I'm going to use some pan events and if
I remember correctly the teeth of a
vertical or horizontal pans are disabled
by default I'm I can't remember which
but I did a tutorial recently on a
component of views and events and we'll
try to use the same sort of concept here
so with a sliding drawer component
tutorial created and we had to use
hammer chase directly to get those
panama's working which iron accusers
behind the scenes but the some reason
theoretical painting is disabled by
default so this is a bit of code that I
used to handle that so rather than
adding in a listener here we're going to
add the events that I'm handling here in
the ng after view init function and so
what this allows us to do is get a
reference to hammer which again is the
sort of gesture listener that ionic is
using behind the scenes and we want to
set up a listener for this current
element and to do that we're using a
reference to the element risk which will
need to add here so I have to import
that from the core library and then
inject it as element
and then we can set up a listener for
this component and you see we're setting
up our own pan event here we're enabling
that a vertical direction and actually
completely change to two are probably
many changes to direction all I think it
is and then when we could take the pan
event will pass it to the handle pants
function and that's going to allow us to
do whatever we want so let's just create
that now and we'll have a look at the
event and see if we can figure out
something useful to use in there so if
I've set this up correctly we should be
able to get pan events for both the
vertical and horizontal directions I'm
going to not log out the text in the
concert when we're doing it here so get
rid of that so it doesn't make things
too messy ok so if I hand to the right
now we're getting a bunch of events
popping out there and let me just check
also that it works fine for the vertical
pans it looks looks like it is yeah so
if we look at this we can see direction
1 the number indicates whether that's up
right down or let the current remember
which is which I think there might be a
so there was a string version as that
our might it was just bringing up the
hammer documentation so we can check
what those values actually mean so put
that up here we got to find the pan
recognizer yeah so there's a different
analyst pan right pan up and down and
I'm pretty sure you can actually see
those in here somewhere I forget where
there is though these are the events I
was looking for so there's an additional
event and it says pan up so we can use
those to see what events were compared
to the left to the right or down or up
so I'm sure if we go pants down if we
take a look at these I think not all of
these are recognized as a
hand down event but this one is so we
should be able to use those to detect
when we get it up and down pan left and
right for pan up so what I might do
inside of this handle hand event I'll
have four cases for those so we're doing
if so prevent additional event so if
that equals hand down we'll do something
and we'll do one for this copy in case
they used to make it easier do one for
pan up as well and for pan left and for
pan right so for now I am just going to
log out down up left and right just so
we can verify that it seems to be
working ok ok so I've got those a the
console that log statements it up now so
we'll jump back into here and we'll see
how it goes up and down yeah up left
right yes sir that seems to be working
very well so now we need to do is use
each of those to do something and so
perhaps we'll set up the speed first so
maybe we'll make it so panning up and
turning down will control how fast the
word FEMEN it should be so what i will
do is replace this 200 milliseconds he
will replace that with a custom rather a
dynamic variable there that we can
change and then we're just going to have
to restart this interval as well once we
change that so we'll create a new member
variable call that text speed and we'll
set that to 205 default so that seemed
like a pretty nice deep fold to have so
that's a 0.2 seconds and we'll give that
a type of number as well so down here
we'll changes to this dot txt speed and
then in the pan up event here i guess
we'll just perhaps will just increase it
by 1 because a lot of events get fired
off so that's going to increase pretty
quickly as you scroll so we'll just
increment that by one and then we're
going to call the start reading function
again and now what we're going to do is
we're gonna have to just modify this so
do that so we're going to have to modify
this so that we can still use this even
if it is playing because we're panning
it's going to be the texas can be
playing because obviously if we're
panning then we are touching the screen
but we also don't want to be creating
heaps of intervals that are allowing
each other so we're going to modify this
sort of that it instead clears the
interval and then create a new one so i
don't think we really even need to use
the plane a de playing flag at all now
this one forgetting something but i'll
try will just comment it out for now
just in case we do need to bring it back
but you're going to get rid of all of
this and add to start whenever this is
called will just always clear the
interval first and then we'll create a
new interval so it is cool clear clear
into a risk text interval and that's
probably going to complain if further
originally we're going to be passing in
undefined our to see if that does
complain or not but we might first have
to check if this is undefined before
trying to clear so we'll just refresh
this and then see if our normal
functionality works so if i click now it
looks like it does do it anyway so now
let's try to pan up and we'll see if it
increases the speed or if it just breaks
everything so it looks like the 10 when
we can things just seem to stop and it
looks like it looks like it's frozen
where it is now so something's going
wrong there let's see if we can figure
it out so I'm not really sure what's
happening so what I might do is when
these events are being treated I'm going
to see when these are being triggered
quickly it might be to touch ender then
is getting triggered when we can perhaps
so I'm just going to log out start
reading here and stop reading here and
then if we need we can dive into more
details about what specific events are
getting are triggering them but the only
thing that can trigger this stop reading
event is at the touch end of it so i'm
going to hold down again and then scroll
up hmm I'm not seeing what is happening
here oh this is obviously an issue
setting sending back to the tech 08 year
I will have to set this to the index so
if i do set this the index originally 20
and then we use this stock index for
that and so we should be able to i think
is get rid of that actually let me just
 because we don't every time we
restart this we don't want to set it
back to the first word again so let's
see what happens now so as we scroll up
yes as we're panning it seems to pause
but then once we stop everything seems
to go back to normal and keep scrolling
through so excuse me to see if that hand
speed is increasing actually decreasing
the speed as we scroll up i think
creasing the time in the interval which
means it's going slower so i might
switch them actually so i think it makes
more sense to scroll up to go faster so
we'll just change that to decrement by
one and then we'll make the pen down
increment by 1 so as we're panning down
this value increases which slows down
the speed of what of which that function
is running so
has the effect of decreasing the words a
minute so we'll save that and give it
another go and we might need to change
how quickly that speed changes but I
feel like it's probably about right
though because you don't want drastic
changes in speed I don't think so we'll
play it as they're about to and how is
that 200 words for a minute or whatever
it was that we set it to 300 having and
then I'll scroll up and that should make
it faster but if it causes it as we do
that yeah so it's certainly way fast and
we go back to her in the middle again
should be more or less where we started
and if I scroll down it should get much
slower it seems like that is working now
ideally what I want to happen here is as
we can i'd love for it to keep playing
but the problem is that every time we
get para then we were clearing the
interval and then resetting it so sort
of ugly effect of causing it because if
interval is constantly being weird now
don't know if that's necessarily a bad
thing to pause the text as you're
adjusting the scrolling speed will leave
it as that for now and if we have time
later perhaps we'll come back and come
up with a solution for that but it does
seem to be working ok so I'm going to
leave it like that for now and now the
only other I guess main challenge we
have less left is giving the ability to
go backwards through the text so we
probably don't need the pen right event
because the tanks goes forward by
default anyway but if we pan to the left
perhaps we do want to give the ability
to reverse and so perhaps for that we
can just decrease the index by one and
then also trigger that start reading
again so i guess the opposing effect
will probably come in handy here because
it will allow us to better go back and
pause on things to get back to the bit
we actually wanted to view
and actually I'm probably get rid of
that because we weren't using it i don't
think so we'll see how that behaves so
if i hold down now the text is playing
and the pan to the left we don't get to
see i think we've gone into negative
indexes i think is the problem here let
me go check in here to make sure that
the index is above zero before a
decreasing okay so let's try that again
I'll hold down and I'll wait for a
little bit I'll pan to the left and so
it does as I scroll that does cycle back
through to the start so first words what
so if I turn to the left gets back to
that eventually let's try scroll it a
little bit I think it might be an issue
where is there's too many tournaments so
it's kind of going back to quickly and
it is also hard to see because you don't
actually see what you've scrolled back
to until you stop handing and then it
just skips back to that word so yeah I
guess I whole pulling problem or facing
isn't really good here after all so what
I might be able to do instead is I'll do
the same thing we'll still do it like
that but as well as just setting the
index I'll also set the the word so
we'll change this dot word to the new
index do this don't text this stock
index and so that's going to change that
word sort of manually for us for other
than waiting to do it in this interval
so save that and give it another shot ok
so I'll hold down on the screen again
we'll let it go for a little bit and now
pan to the left and we can see the words
as we scroll back now
but yeah you can see that it does go
quite fast it's very sensitive so let's
take a look at the event again the pan
events or the pan left a bit and i'll
see if this laying in there that i can
use to not run that function so
frequently if there's some kind of any
distance like amount that we want to pan
before triggering that and if we can use
that that could be an option so we'll
take a look at these so we do have a
distance property here don't know if
that distance since the last event was
emitted let me do really some really
small hands here actually there isn't
overall off the other no i didn't see
that that might be a better option to
you so we're moving like a negative
direction here but you can see that is
very low so in that case we might not
want to trigger it but if I sort of pan
left really fast here let's check so
overall velocity there's point 19.1 8.18
again and let me do some small ones
again see what that's like Oh point 01
so maybe if the overall velocity is
above Oh point one perhaps might be good
so add a another if statement in here
we'll just add a another steaming into
that same one or another condition
rather and so will do if math.abs which
is absolute value of the overall
velocity so basically we're just
ignoring the fact that it's negative
what is treating this is some 0.01 so if
that is greater than 0.1 will run it
otherwise we will not okay so get this
play again and we'll scroll back yeah
don't think that solution to add the
solution towards me
so if expand slow which is probably how
we want to do it nothing happens because
it's not above that velocity then if we
get to the speed that we need it just
Scrolls back really fast anyway so don't
think that's the solution to it I think
what the solution may be as perhaps
keeping track of where we last triggered
the function and maybe we use this
distance value to see where the last
event was and where the new event was
it's too close perhaps we don't do that
I'm not really sure without having to
think about it what they're the best
approach would be to give a sort of nice
slow and smooth scroll backwards through
the text but we do have it working
obviously we got our speed increases and
decreases by scrolling up and down and
we can also scroll to the left to go
back through the other text I might just
get rid of this actually so I will do
like I usually do with these sort of
impromptu videos where I don't really
have any plan and i will do a blog post
afterwards and once I've had a bit of
time to think it through a little bit
rather than just diving into things and
doing the first thing that comes into my
head so I'll think about those
particular issues that are kind of left
over in this application and I'll write
about that in the blog post if I come up
with anything but yeah overall and we've
pretty much achieved what we wanted to
do we've got a bunch of text that can be
pulled in we can scroll through it at
different speeds and we can also move
back through that text so I'm happy
where we're with where we've got to in
this video and yeah if you are
interested in I get the final product
keep a lookout for the blog post and
other that comes out but otherwise i'll
see you in the next video</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>