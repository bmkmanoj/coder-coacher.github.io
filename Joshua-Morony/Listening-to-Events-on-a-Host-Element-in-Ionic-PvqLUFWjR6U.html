<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Listening to Events on a Host Element in Ionic | Coder Coacher - Coaching Coders</title><meta content="Listening to Events on a Host Element in Ionic - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Joshua-Morony/">Joshua Morony</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Listening to Events on a Host Element in Ionic</b></h2><h5 class="post__date">2017-03-03</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/PvqLUFWjR6U" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">in this video tutorial I'm just going to
quickly show you how you can listen to
events in a host element when using a
directive so we can create directives in
ionic 2 and in angular 2 do something
with an element so we can attach it to a
specific element and then our directive
can do something so obviously that's
pretty vague but what you can do
directives is very broad but to give you
an example I created a tutorial for
creating a parallax header effect in
ionic 2 so that's basically when you
when you scroll the content area you
have this sort of header image and it
has this kind of effect that makes it
look it gives a bit of depth to the
application so the way in which it
shrinks gives that effect of creating
this sort of perspective so I'll link to
that tutorial if you want to check that
out
but to do that I created a custom
directive and I attached it to the ion
content of the application and so by
doing that I can perform some functions
inside of that directive that are going
to affect the content area that it's
attached to so this video isn't really
intended to be an introduction to
directives in general I'll link to
another tutorial where I talk about that
at a more basic level what I want to do
in this tutorial is talk about how you
can listen to events on that host
element so in the case of my parallax
directive I needed to listen to the
scroll event in the content area and I
need access to that event from my
directive which is attached to I own
content so I'm going to show you how you
can use the host property to listen to
events on a host element so I'm just
going to create a custom directive here
so we're going to do that by running
ionic G directive
and then we've got to give that a name
let's say I don't know it's not actually
gonna do anything so let's just call it
nothing that can be our directive so
generate that and then if we jump over
into the code here you will see this
adds a a components folder and then we
have our nothing directive in here and
so you can see it's been created with a
selector of nothing so that means if we
add nothing to a to some component and
that's going to attach this directive to
that so just to demonstrate that if I
was to go into the home template now and
I wanted to attach that nothing
directive to the content area I just
write nothing and now this that dragged
before we attach that element so also
just our delete that for now and we're
also going to make sure to set this up
in the module file and again how the
point of the module file is something
I've covered before so again I'll link
to that if you're interested in about
why we need to add things to this module
file so I'm just going to import that
direct if we just created and I'm going
to add it to the declarations okay so
that will make the directive available
in the application let's just run this
in the browser now to make sure I
haven't broken anything yet
okay so we're there running through the
browser now and you can see there's no
errors and we have our hello nothing
directive being locked out which
suggests that that's all working fine so
what we're going to do now is jump back
into the code and we are going to the
goal here is to have something in here
react to an event that happens and let
me soak that up again that happens on
the content area here so we've attached
it to that we want to listen to an event
that ion content creates and then we
want to do something with it here so I'm
gonna create that function I'm gonna
literally call it do something and
we'll do is we'll just log out the event
that it is being passed so the content
area emits an event called
Island scroll when the content area is
scrolled so to listen to that in in here
directly we could say I on scroll and
then we could set up a handler for that
say some function and we could pass in
the event data which is going to
describe the the scroll velocity and
things like that
but in this case that is going to go to
a function out in our home dog TS file
but that's not where we want to handle
that event we want to handle the event
in our directive and that's not going to
send this event in there
so instead what we need to do is add the
host property to the directive decorator
here and we can supply that with an
object which is going to list the events
we are listening for and the functions
we want to use to handle those so if I
want to listen to the I on scroll event
I can just write I on scroll here and
then I just need to specify the function
that I want to use to handle that event
so I will just use the do something
function and we also want to pass
through that event the event data that
is created when when the user Scrolls so
now when we scroll we should have this
being triggered and the event should be
passed in from the the content area the
event that's coming from the content
area should get picked up here the event
ID will get sent through to this
function and then we can do what and
then we can do whatever we want with
that data so let's check that that works
and also just gonna throw a bunch of
content in here just so that we can
scroll around a little bit so it is
duplicating that a few times Oh
let's get crazy now let's take a look in
the browser yeah it's a good Allah loves
being rendered on the screen there and
so let's try scrolling and you can see
now we're getting spammed with all these
objects are being logged out to the
browser which means the directive is
getting that event passed to it and it
is triggering that do something function
which gives us the scroll data so that's
basically how you use the host event to
grab an event from the host element that
your directive is attached to you can
also do other things like if I were to
someone to listen for the resize event I
can listen for an event on the window
object in the host so if I say window
and I think the event is resized let me
try that
so window resize and we'll just cool
what is cool the same dosomething event
function rather save that and we'll give
the window resize and see if anything
happens I'm I just turn me in malaria
off to make a little bit easier okay so
if I drag this now you can see that
we're getting that event pass-through as
the window resizes so all that function
is doing is just logging out the event
data so in this case we get the data for
the window resize so if we open that up
we can see all the data for that and
then if we scroll we're going to go back
to getting those events for the scrolled
out of the scroll event so this is just
a really nice clean and simple way to
handle events that are coming from a
host element that a directive is
attached to so I hope you enjoyed this
tutorial and I'll see you in the next
one</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>