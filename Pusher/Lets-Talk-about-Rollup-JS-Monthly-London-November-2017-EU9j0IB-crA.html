<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Let's Talk about Rollup - JS Monthly London - November 2017 | Coder Coacher - Coaching Coders</title><meta content="Let's Talk about Rollup - JS Monthly London - November 2017 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Pusher/">Pusher</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Let's Talk about Rollup - JS Monthly London - November 2017</b></h2><h5 class="post__date">2018-04-16</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/EU9j0IB-crA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so my name is Johannes and I'm gonna be
talking about roll up today so I'm on
Twitter and so I bought way too many
Christmas jumpers this year and I'm I'm
like a way for half of December so I
didn't know what to do and so I asked
the question on Twitter should I wear
this today and apparently some people
wanted that so I guess Here I am eight
votes zero right so yeah I'm gonna be
talking about roll up and roll up says
that it's the next generation es6 module
bundle so before we go more into what
the roll up actually does
I kind of want to give like it for a
refresher on modules and like es6 es2015
modules specifically so you probably may
already know this but I just want to
quickly go through this so that we're
all on the same page so we have default
exports so let's say we have a module
like power of two and then this is a
function so if we export this we use the
keywords expert default and then to
import this function and to use it we
will then say import power of two you
from where we where the file is and then
we can call this with whatever
parameters we like so there's another
thing called named exports they work
similarly but not quite so you would
instead say you have different different
things that you export out of it like
let's say this is like a mass library
and you have a add a multiply or divide
or many more other functions as well so
you would go out and then declare them
as export and then constant for example
so to use that somewhere else you would
then say I'm importing this and I'm kind
of like distracting this out of the file
so I'm just need to add in this case so
I would say take add and
and use this from the math library and
then do whatever you want with it in
this case well add two numbers
another option is oh I forgot the slide
is to actually use the namespace so you
could use the star and then say import
everything as maths and then use it as
an object in this case it would be mass
dot add for example so and now this is
really exciting feature I really like
this feature which is called expert text
extensions so this is stage one
currently so I would not experimental
but I still use it everywhere so what it
does is lets say you have like an
aggregator index file which I always
have so most of my react projects I have
something like oh yeah I've got like in
button like an icon or whatever element
and then I could get that into an
index.js file so usually I would say
well import this thing and then export
this again as something else so this
gets kind of like hard to write after a
while and obviously it's a bit
error-prone because you would say oh
well a new thing comes in I need to
first import it and then add this to
this object and so on and so forth so
this is a huge source of errors so with
expert extensions you could instead
write export something directly and so
this will build up this object directly
and similar to with the import
namespacing with this expert extensions
we also have export something as
something else for example all right so
let's get more into a rollup know that
we know kind of what es2015 modular so
the first thing that we need to do
obviously install a roll-up you can
install it globally I usually have it as
a def dependency in my projects so
I don't have or so that anyone else in
my team doesn't need to install it
globally so and then how you would use
it is well you can use it by command
line and say well this is my module put
this in as an input and then the output
should beat this J ass and the format it
should output would become in J s so
let's take like this I kind of have like
some contrived I have some contract
examples unfortunately so this is an
example where I would like import a
function from lo - and then I have some
words and then I'm taking like the first
word and then console logging this and
then exporting this as a module so if I
run this through roll-up I get this so
as you see like all of the all of the
module imports and module exports are
now coming j/s but everything else stays
at as it is so there's no transformation
anywhere so we saw that we can use roll
up through the command line but
obviously after awhile like this gets
longer and longer and many more
parameters so we kind of rather want to
use a configuration so what we can do is
we can just create a roll up that config
yes and then we would put in well still
my module and output into format is
still the same but now we have it as
JavaScript so it's easier to know well
easier to configure when it gets
complicated all right so one of the
things that I want to talk about or like
now I'm kind of getting into like the
features that rollout has and makes
roll-up special one of the things is
reshaping so let's say we have this
example that I had before where I have
like a utility library or like a big
kind of
like module that exports a few functions
so here in this case I have like this
this mass library it has an add and
multiply and now I kind of just need to
add right I don't need anything else but
depending on your bundler you would
still get like the whole of mass library
but with roll-up it would this is the
actual output and I'm not making this up
and you would then just have like the
add and how it's being called and just
the add function in there alright so the
next thing that makes roll-up special is
scope wasting so if you have like you
another bundler so this example is
browserify for example so if I use
Procera five with a few modules then I
always have like the kind of like I call
it module bubble but it's definitely not
the right word which has a require model
and in exports and it wraps it around so
as you've seen by the previous examples
already is that roll-up doesn't do this
like everything is still on the on the
kind of on on the root level in terms of
crop so this obviously means that your
bundles are much smaller than when you
have like a module wrapper around
alright so what makes run-up really
great is that they have like an online
repple and so for the first example I
just kind of want to write up what I had
on a previous slide so we have this
module called mass and then we got
export Const and it's a function takes
in a B
it turns a plus B export consummate
apply also a function same parameters
but multiplies both of those alright so
now I want to import ad from math and
now I want to add two numbers and I kind
of want to console.log this as well and
now we got the exact same output that we
had on the slide before we import ad and
since we're calling ad it takes the add
function and just puts it into the
resulting bundle so obviously this is
for coming J s so this is meant to run
on note specifically we could change
this to run the browser if we have like
and I can immediately invoked function
execution then it would wrap it with a
function and now this gets ready to be
consumed in the browser all right I got
a few more replica samples most of those
have all like actually all of the
upcoming ones they have been done by
Lucas Taggart who is like a core member
of roll-up and recently does all of
their releases of roll-up so the first
one is and you might have already seen
this in the previous repla example that
I did is that roll-up doesn't actually
include functions that are unused so
here you see we have like a Lib Jas
which has a function that actually
doesn't do anything and then we have
something that's mutating the window and
so if we import this it
bundles this but it doesn't Mandal the
other function but if we were to change
this around and actually do something
with the function like return something
and then we use the unused function then
it gets into the bundle so unless we
actually use a function it's not part of
the bundle all right next example all
right so this is a fun one so we have a
v8 engine which we define it like a
constructor and then we have like a
prototype to string which we say we ate
and then we console.log v8 engine to
string as we see in the bangle we have
stood the cone we have so the
constructor we have the to string and
then console lock this now we also have
this v6 engine here so if we put this
back then now it takes a prototype from
v8 engine and is now part of the bundle
but if we remove this it's not part of
the bundle even though we have a
constructor function assigned and even
though we have the product to string
from the v6 engine so the next one is
that if we have a library right in this
case let's say s so they're like two
objects that it exports out of we have
something that has an effect like if I
call this it says hello meetup a
function it doesn't have an effect and
we have a second object that doesn't
actually have an effect so
now we are important both of those and
in our main file and recalling the first
effect obviously it will then say hello
Meetup and then we calling the second
one what a fact and I was recalling the
second object with their no effect and
then recalling the first object with no
effect so if you look at the bundle the
second object is not part of the a
resulting bundle anymore but the first
object is and all of the the message
that calls are part of this as well okay
so the last example that I have alright
okay so let's say we have a library it
has a function that invokes itself but
it actually doesn't do anything then we
import this thing and luckily enough
there's no resulting bundle because
nothing gets done but again as soon as I
have any side effects in here so let's
say I want to document get query
selector something then it becomes part
of the bundle alright so as we've seen
that roll-up just does the Mojo
transformation nothing else so if you
want to use something like babel
typescript jason whatever we need to use
plugins so a more complex roll-up
configuration what kind of look like
this I'm sorry it's a bit small but
there's like just literally a plugin for
everything there's a plugin for babel
just plug in for typescript for Jason -
there's also a plug-in that kind of
tries to import commonjs modules as best
as it can obviously there is a whole
difference here
because since yes 2015 modules are
statically analyzable but commonjs ones
are not it just tries the best it cannot
three shaking but obviously it's not as
as good as with years 2015 modules so I
think like the question is kind of why
should I use roll-up like especially if
I have backpacks whom are already so the
thing is that both of them have like
different philosophies so webpack is
more in the sense of so its creation was
more around code splitting and making
sure like if I have an application that
it produces different smaller bundles
plus could also integrate static assets
into it while the philosophy with
roll-up is more that it has like flat
distributable bundles and rich hair is
like the author of roll-up he had a
great post on medium so if you haven't
read this you should definitely check
this out and the tagline of this which
you mean and the point that he makes is
that you should use webpack for wraps
and roll up for libraries alright that's
about it
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>