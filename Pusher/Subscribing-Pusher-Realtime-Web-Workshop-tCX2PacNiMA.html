<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Subscribing - Pusher Realtime Web Workshop | Coder Coacher - Coaching Coders</title><meta content="Subscribing - Pusher Realtime Web Workshop - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Pusher/">Pusher</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Subscribing - Pusher Realtime Web Workshop</b></h2><h5 class="post__date">2012-10-24</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/tCX2PacNiMA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">this is phil liggett er I'm a developer
evangelist of pusher in this video we're
going to look at subscribing to data
within pusher so first we covered
connecting in an earlier video and now
we're going to cover subscribing so
here's an overview push again we're
hosted service we deal with scaling and
real-time infrastructure for you our
focus is making it as easy as possible
to to build for full developers to add
real time functionality to their web and
mobile applications live content
activity streams interactive
functionality like chat gaming
collaborative apps ok so we're for this
tutorial we use in the real time web
workshop which is available at github
com / push up / real-time hyphen web
pyfrom workshop it's a jQuery framework
based application that we're building
for the moment we're just going to do
simple messaging so if we jump into the
code this was the connection solution so
we're going to close this and we're
going to jump into subscribe that well
let's have a quick look at the code as
it stands so as I said it's a jquery
mobile app so we're including jQuery
jQuery Mobile we've got various things
like data roll which is part of the
jQuery Mobile framework including the
push your script tag we're logging
internal JavaScript library events we're
connecting to push up we need to supply
a nap key so I've got them a clipboard
I'll show you where we got that from
again it's in here api access there's
our key and we're binding to connection
state change events and then we're
updating a connection status element by
adding and removing classes based on so
we remove the previous state connection
and we add a class with a name of the
current state so when it's connected it
has a background color of green and I'll
show you what it looks like so we jump
into
start I haven't saved up to aging right
so if i say that jump background we're
not connecting because we haven't gone
it a nap key so there we go and we're
green because we're connected okay so
that's the starting point so what we
want to do now is subscribe so to
receive data from pusher you need to
subscribe to a channel then you need to
bind to events on that channel so it's
as simple as we've gotta push your
object Warner we want to subscribe to
your channel so do push it up subscribe
and will subscribe to we're going to
like a status messages app so we'll say
messages then we want to bind to an
event on that channel and we want to be
informed whenever there's a new message
about and we'll create a function or
handle message and it receives data
which is obviously a message whenever
new date is available the other thing we
want is a something to display so some
of you I so what I'll do is operate
these two messages yep and I'm actually
going to cheat a little bit here I'm
going to paste in and an unordered list
it's got an ID of messages it's got a
date world of list view and a class you
wireless fuse their jquery mobile
classes and data attributes so in our
handle message function we want to
create a new list item element
and we want to set the text on it to the
message value another text about you
sorry of our of the event data that we
receive and then we want to append acts
the book prepend to appear at the top
the new list item to the messages
element so it's really simple it well
not very nice at the minute because we
haven't got jquery UI attributes on this
list item so um apparently that's that
functionality implemented and so if we
really like this you'll see in the debug
console or actually getting a subscribe
event so we are subscribing to messages
and Pusha was responding with a
subscription succeeded fendt for the
channel messages so we are subscribing
but how do we test whether that
functionality is working so again if you
remember from connecting we've got a
debug console with integer which is
drinking and things like that so if if I
reload you'll see the various events
occurring as the page connects we
connect a pusher and we subscribe but
we've also got an event creator now in
the event creator we can trigger events
which is really handy for well when
you're building an application so we
know we've got a messages channel we
know we've got a new message event that
we're binding to and we know we've got
we know that the event handler for that
wants an object to be sent to it with
the property of text and obviously a
value
so over here oh you can't see it we've
got a send button if i could click send
you'll see now over in the application
we got a hello from the event creator
the channel messages and we also added
that DUI if we go over here i'll type in
a game I send the event you'll see that
what appears over in their left hand
side so that's a really good way of
testing the functionality one thing we
want to do here is I'm going to cheat a
little bit and I'm going to take the
code update the code that we've written
to add the UI just so it looks a little
bit nicer I'll walk through the code
that added so what we've got here is we
create the list item when we add a
various attributes class attributes and
classes sorry for jquery UI we add the
text again we hide it hide the list item
we append it and then we make it slide
down and appearing so it just seems it
looks a little bit nicer so if we really
read that we load that page and then we
try and send the event it just looks a
little bit nicer it's not a massive
improvement but it'll make a bit of
difference okay so we know that that
functionality is working another handy
tip is also you can within the
JavaScript console you can access
instances of pusher that have been
created so that well I know this is the
first instance okay and then I can
access the channel because I know it's
called messages there we go that channel
exists and I can actually admit the
vents on it now I know we've got a new
message event and then I can specify
data to send it's not actually sending
data it's just calling JavaScript
functions and this isn't from the event
creator
since the console there we go and that's
appeared as well so that's actually a
really handy way of debugging or
application so that's how to subscribe
to data we've shown that you subscribe
to a channel you bind to an event and
then you write the code that handles
that event being triggered you'll notice
here as well I've also done I've made
the handle message global for me I
actually like to be able to call the
functions here as well just as another
way of testing so there we go ok so that
was subscribing in the next tutorial
I'll show publishing from the server</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>