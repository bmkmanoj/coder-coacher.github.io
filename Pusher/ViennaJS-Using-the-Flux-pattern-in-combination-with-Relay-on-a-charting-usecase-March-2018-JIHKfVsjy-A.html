<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>ViennaJS, Using the Flux pattern in combination with Relay on a charting use-case, March 2018 | Coder Coacher - Coaching Coders</title><meta content="ViennaJS, Using the Flux pattern in combination with Relay on a charting use-case, March 2018 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Pusher/">Pusher</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>ViennaJS, Using the Flux pattern in combination with Relay on a charting use-case, March 2018</b></h2><h5 class="post__date">2018-04-09</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/JIHKfVsjy-A" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello yeah first the title of my talk
it's about the flux pattern in
combination with relay and only in the
end of the small talk it's on charting
use-case why it is important for
charting yeah to my person my name is
Daniel Steiner
I work as a front-end engineer at Quebec
but it's only part of my job I also work
at the University of Vienna as an
theoretical astrophysicist I'm doing my
PhD thesis there yeah and I came to
programming doing it in my free time and
was interested in solving problems
basically which is the same thing I do
at the University so I I don't know to
say ended up but I'm working now at car
back and yeah I like the diversity of
doing different things in research and
programming stuff so yeah that's for me
yeah to Calva quenchers very briefly
it's yeah we do software development
mainly with the focus on tailor-made
application solutions for businesses
businesses with the UX with great UX
tailor made by by us for them and on the
backend we do our stack is the top net
cord framework and on the front end we
use front end we use typescript react
relay craft well yeah that's very new
set up and yeah we really enjoy to work
with that so far at least yeah and also
interest industrial IOT is a very big
thing coming up every business wants to
have it wants to have it on the
platforms FinTech yeah you can we can
talk afterwards about that so directly
to talk very briefly what is relay and
why should we use it
relay modern modern especially because
it's the new version of relay
is a graphical client for JavaScript but
specifically specifically made for react
components so it's very tightly coupled
to react and it's very well suited for
data-driven applications for big data
analysis charting tables for many
entries whatever and and if a very
interesting thing about that is that is
decorative and it's co-located the data
requirements for for a component a
co-located co-located with the component
itself meaning what what you can see
here is at a component here which
contains arbitrary content and then you
see the data requirements here
afterwards just in the same file for
example which does wraps the data
requirements around the component and
there in there's just stands the graph
quelle query or fragment in this case
which explains and declarative estates
which data we need in this component and
another thing which is advantage over
Apollo in my opinion is that it's very
optimized for mobile first applications
which which becomes more and more
important in the future yeah that's just
for relay I don't want to talk about
relay it don't want to talk about a very
special feature of that of relay so
since relay 1.5 which is really really
new it's four weeks old there is a new
interesting feature was coming up in the
new release and it's direct store
manipulation of relay by handler
functions most of you have heard Redux
or Apollo or both and there you know
that the flux pattern is all about
having data stores distributed fluxes
many data stores Rita
reduced it to one datastore which is a
good idea and works well and also relate
us that but relay didn't give you the
possibility to change that store
directly but only relay itself could
change it this changed with relay 1 byte
5 and now we can do that so we have the
same power as redux or a polo and or a
polo has or have and we can directly
manipulate it which can be used to
define better re-rendering or updating
mechanisms for react component trees and
another feature from not really a relay
now not really
yeah it's it's a relay feature but it's
a craft quelle feature and the first
hand is type safety from the data
requirements so craft well most of you
know is a type safe way of getting data
from the data graph well server which is
connected to various data sources and
with relay 1.5 you can define a client
schemer
so saying it's a schema which only the
client knows and the server doesn't know
that and then you have handler
mechanisms or and client handlers which
can populate these fields on the client
and this can be used to or this can be
exploited in a very powerful manner so
what you can see here sorry is this is
the way you do that it's very very
easily done it's you set up and relay
environment or labor environment and
there normally you don't have to do this
here this red box thing here but if you
provide it you can plug in addition of
the connection and the fire handler
which are real a related things
additional ones so I did here and this
very easily easy example which I'll show
you afterwards I had just yeah
implemented a to do Angela which is
the very very thing which manipulates
the store and yeah here you can see in
the fragment this is a field
it's called seduce and if we annotated
with this underscore underscore client
field and provide a handle which is
basically this year then it takes the to
do handler here in this case for
metaphor handling the field updating or
the store updating mechanism for this
field so how does that look like show
yeah yeah I just came up with this very
very small example it's basically the
relay example for the to do app built
with relay and it just manipulated it a
little bit I also got help from
colleague which did this pink blue thing
here and what you can see here is in
this box the normal the server provided
or yeah server provided to do items and
in are in there it's the normal way of
using relay and here I just did another
box which is which contains no to-do
item from the server but it's processed
by my own Handler and this gives you the
power of processing first the data items
of the server discard them if you don't
need them and just use the processed
ones and like and you can do everything
you want you have you would do with
normal field in a normal component with
this ones and I did here the back output
which just gives you a little idea what
what's going on here
so if I'm for example adding you to do
the
what what I want to did here is when I
enter when I press enter now it gets
populated on the on the phone it's it's
in you to do but it's also getting
updated automatically and pushed to the
client field to do so and you can see
that the text of the to do was
manipulated also by the handler it's a
very very powerful feature I can show
you after what's why so you can see here
without doing any state change in Iraq
component notice no state changes at all
I modified and updated automatically
only by using relay those to do items
and you can see here that you do list
sudden update event and the to do list
client current update the wind which is
of course clear because a yeah I changed
the to-do list and the to-do list for
the client or with the client items but
now I can also do things here for
example I just press are checked and
unchecked this to do add them from the
client and here I did in a way that the
server will not get any idea that I did
that it's only for the client fields and
you can see here the to-do list the do
list of the original items doesn't get
touched at all because here you see here
that the Toulouse client is updated but
only the Tallulah start a client is
updated so getting this idea of how to
do it just very close in this how this
works in the just in the code here you
just get this client field here and this
get gets processed but it's to do
handler which is showing a second and
here are those fragments which get those
data a pass down to the components where
they are needed in the Technorati way
and then I have here this to-do list
somewhere yeah here and
also the to-do list client and both of
them have fragments inside for example
if a to-do list client here has this
client to this client to deuce is not
defined on the server doesn't exist
there
it's only a field existing on the on the
client and it's using those things to to
populate it to the out this item list
and you can do it in the same way as you
would do it with the normal animal list
so very easily done here so back to the
slides
why do we need that stuff or what can we
exploit that and here comes the charting
use case in mind we add a copic we
currently build a charting component a
very sophisticated one and advanced one
and we had this problem that if you have
really big data sets where one of those
the x-axis especially is a date and time
series we have first we have to pass we
have to parse the data from the server
make a moment chess object or a date of
check or whatever out of it and then we
have to build up the chart with it and
every time we manipulate something for
example to a slider change a slider or
something and change the range of the of
the chart everything gets rear-ended
that's because we have to hold the data
on a wrapper component to spread it over
all components which need something from
it from data and every time there's the
went fired they up the wrapper which
contains the parsed data for example for
the date will introduce change as they
change and this date change will fall
down the whole component tree and
trigger rerender for every component
this is the normal way you can
circumvent that a little bit by
exploring this chute component up that
feature of react but it's a very happy
way and it does scale at all so why not
coming up with another idea and the
first idea which comes in mind is Redux
why not using Redux and disconnect
syntax and map state to prop thing or
Apollo oops sorry
and there you can do it if you have a
tooltip and this or I have a mouse event
which for example changes this tooltip
thing here in this example the Redux
story is updated the store update
function connects this state this local
state change in the store to props of
the very specific component and only
triggers re-render in this tooltip
component which is obviously a
performance boost for the whole
component thing and you have if you if
you do that consistently you can do that
with the Polo you can do that with redux
but now you can only do it also do it
with relay and I think there's an
advantage in doing it with relay now
because it's much more it's easier much
easier to to work with because it's
basically no basically no boilerplate
anymore you don't have to do anything
just declaring this client field thing
and update the handler or write the
handler yourself and everything else is
taken care of by relay itself and and it
really works as you could see in this
very easy example before yeah and yeah
this is the demo I showed you before and
yeah I have to show you another thing
very shortly
very very very want to end up is here
this is a current chart of one of our
products and there you have exactly this
thing you have a slider which you can
move and now there's several components
which have to update it's the head
the headline here and if you do this it
has it is this component which reflects
the last points here it's the it's the
range here it's the graph itself it has
to recalibrate it's because it's always
starts at zero percent so the first
value is always at zero percent so the
whole crevice are recalibrated every
time and if you have such things a
complete rear end of everything which
doesn't change is a it's it's not very
performant and there this feature this
brand new feature really comes in handy
and yeah we had this prototyping phase
now and it works so we implement it and
yeah it's very interesting to work with
that stuff it's it's undocumented so far
which is a good sign that it's a cool
thing at least for Facebook yeah that's
for that and yeah I hand over to Daniel
he also wants to say some things</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>