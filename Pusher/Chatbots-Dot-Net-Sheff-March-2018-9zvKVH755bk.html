<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Chatbots - Dot Net Sheff - March 2018 | Coder Coacher - Coaching Coders</title><meta content="Chatbots - Dot Net Sheff - March 2018 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Pusher/">Pusher</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Chatbots - Dot Net Sheff - March 2018</b></h2><h5 class="post__date">2018-03-29</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/9zvKVH755bk" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">I'm gonna be talking about chatbots
specifically about slack chatbots if you
want to play along I'm gonna do some
filler or you go to that bitly link it's
a quick signup similar to all the
various bits and bobs you've seen where
you can kind of join the slack group and
you can have a bit of a place so alright
I'm gonna make it a little bit
interactive and who here uses slack
either in private or at work or an
equivalent HipChat okay cool so quite a
lot of people all right who uses like a
little bit too much there we go okay
alright so one of the things I want to
kind of show you a little bit is how you
could possibly make a life a little bit
easier and also justify to your boss why
you need to pay for slack this also
applies if you use HipChat
there's there's all sorts of equivalents
with that I know that some people like
being tied to Atlassian a little bit too
much and if that's what you do
fair play to you alright so I'm gonna
try and do this this is very
disorientating so you have to bear with
me mm-hmm
cool right okay so that's the signup
page if you Anna wants to have a quick
look and what we're going to be talking
about a little bit today is a chap
called Hugh bot so who here has some
form of bot associated with their slack
okay a couple of you who here uses it
for work-related so deployment one cool
right so this is how I found out about
this at work we use this for all of our
deployment we have this tied into a
specific channel and then we ask it to
do various things such as kind of
whether or not you want to deploy it
onto AWS or if you want to spin up a new
test box or etcetera etcetera that sort
of thing it's quite in-depth none of
which I'm going to cover today I'm going
to do lots of silly things instead which
is far far more important good so first
step is all of these links will be a
part of the slides that I send out
there's loads and loads of documentation
on this I'm also going to write in
CoffeeScript
which I appreciate is neither my domain
nor your domain so it's gonna be fun
if you've got NPM installed for some MAV
reason you can pretty much get straight
sites
away by using a generator and once
you've done that you can then start
cracking so we're gonna add a
configuration and I've been told the a
really popular person in Sheffield is
Jeff Jessica and if he'll apparently
that means something to someone a quick
google on a train meant something so
we're gonna call our bot Jessica Jeff's
car and we're gonna activate it cool and
this is where my 4G tether wears okay
well that's going to do is it's going to
give us an API token which is super
important so the bot that we're gonna be
running is going to be running locally
on my machine but likewise this could be
sat on AWS it could be set on
digitalocean any form of VPN that you've
got set up depending on how redundant or
how important it is to you so we're
gonna go and grab that API key kill all
the tests that I've doing great
not use the okay can someone we want to
get to be equals go I'm gonna try that
cool right so what we've done is I've
done that NPM generator locally and I
have a CoffeeScript setup in my local
directory and what that's done is it's
passed through in an environment
variable the API key associated with
Jessica and hopefully what that means is
that in this tub up here we can now
start speaking to Jessica so let's add
just get into the channel cool so she's
now gonna be in general which can never
end badly and at the minute if I go and
say hello to Jessica along with everyone
else that's gonna spam this now she's
not gonna do anything right which is
fair enough you know we've not told us
there anything say you know why should
she be nice to me say we've got a module
that exports and we've passed in a robot
object and the first thing we're gonna
do is going to talk about badges so when
Jessica hears badger she's gonna return
saying badges badges we don't need no
stinking badges which is highly
important right cool so if we go into
here oh no not me it's like to do that
and if we now refresh the bots no go
away
and it now responds badges badges we
don't need no stinking badges good this
is working right that's it that's the
end of the talk thank you very much for
listening know what we can do is said is
that you can do some really cool things
so firstly you can see that's listening
out for badges if we now say instead
Jessica badgers it won't I don't know it
does we go do that anyway so it's listen
that for that keyword go away right so
instead we lose some input so prizes for
knowing what this quote comes from so
we're gonna say openly something doors
again you refresh the bots Jessica open
the car doors opening the car doors if
we now to open the pod bay doors I'm
afraid I can't let you do that so again
I know this is CoffeeScript I know it's
JavaScript and everyone hates it but
hopefully everyone can kind of at least
read that if it's not in tiny tiny
writing we can switch on the input that
you've got and then do some really
clever things to say given this input
did this sort of thing but that's pretty
boring and let's do something a little
bit more topical right so football fans
oh if there any football runs in here
which never goes down particularly well
it take me to it we've got one good I'm
not alone fantastic right are you a
local football fan
Liverpool right so not too good so I was
hoping that this very slightly typical
so what we can do instead is that we're
going to ask who won the football
between chef Wednesday and chef United
or whether or not it's a draw now when I
did this United lost every single time
that's progress I was going to say that
sounds about right
so instead right Jessica who won the
football
Wednesday told you again we will try and
make sure that looks like it's a at
least a little bit random United good so
again you can kind of see that switching
we're doing some randomness into it and
again not all that interesting what's
probably far more appropriate to this
crowd is I'm assuming everyone seen IT
Crowd and the usual response when
talking about football to my colleagues
ends up in this Jessica talked to me
about football you spell properly
now the balls over there there we go
good so we can do text back we can do
images we can do URLs we can do pretty
much anything that you can try to send
back through which is pretty cool but
what about things when people change the
topic
so in general we've got what's a very
very corporate slack here
it's company-wide announcements and work
based matters if anyone who uses slack
in a large company knows that general is
definitely not a safe place so this is
definitely not for work based matters
it's for those people who decide to
actually venture into general so general
is not safe that's all we're gonna set
the topic and Jessica asks general is
not safe
that's a paddlin so you can pick up
things like that which is pretty cool
but again what about things like people
entering or removing from rooms so this
can be quite difficult with just me as
the admin I can't leave general but the
idea being is that you can start picking
up to say when things have come in and
when people go so if you're on the slack
Channel I know a couple of you are if
you want to join in a room or create a
room then leave it and you can kind of
see the public version of that and go
Mass but we're all good developers right
so as a result what we need to do is we
need to think about error handling you
know all those testers have come back to
us and think this is very very important
say what we're going to do instead is
we're going to handle Samaras so when we
find an error so in this case we're
gonna go and ask just get to fall over
if you as an athlete is far more topical
than I realized is we're going to try
and attempt to go to http kaboom so
let's go see what happens when we go
there as we know that's not a valid URL
and as result we gonna get an error back
so
Jessica fall over we picked up the fact
that there's an exception we can then
report that directly back to the person
who asked it so in this case does not
compute and we can also do a log out to
say hey had problems with the midnight
train but again that's not all that
topical Rapti everyone loves tea and
I've also changed this to say Yorkshire
tea because we're in Yorkshire and as a
result everyone loves to have a cup of
tea and so we're going to go ask Jessica
your cheer team please and that's great
but what about if we have too much tea I
mean ask again two cups of tea that's
that's completely understandable three
cups of tea we're getting we're getting
pretty high four cups of tea that's
enough at that time now the way that
this works is there is a concept within
Hugh bot of a robot brain which is a
little bit of a way of storing
persistence so in this little bit of
code here we're going to go and fetch
from the brain the value called total
cups we're then going to go and just
switch on that so that just unwrapped to
make sure something exists or not if the
number of tea had is greater than two
we're gonna say nope that's enough
bedtime now if not why not
we're gonna then increment the number of
cups of tea we've had to reset it we're
gonna go say not just good bedtime
it goes to sleep and now if we go and
say hey your cheer tea please we've gone
to sleep and we're more than happy to
have another cup of tea because I'm the
last one speaking and I know what
happens after every form of Meetup
we're gonna tell Jessica that we're
going to the pub
hmm
and that's it that's jack-bots</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>