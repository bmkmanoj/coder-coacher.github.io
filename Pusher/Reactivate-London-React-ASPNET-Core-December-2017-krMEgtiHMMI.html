<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Reactivate London, React + ASP.NET Core, December 2017 | Coder Coacher - Coaching Coders</title><meta content="Reactivate London, React + ASP.NET Core, December 2017 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Pusher/">Pusher</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Reactivate London, React + ASP.NET Core, December 2017</b></h2><h5 class="post__date">2018-02-14</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/krMEgtiHMMI" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">does MVC it does webpages it does API is
yeah does loads of different things so
first of all it's free because you know
Microsoft not necessarily free but it's
free like every other web framework it's
open source it's you know but it's not
you know open sources different meanings
so it's not open source as in here's the
source code but please don't talk to us
it's open sources in you know please
come in please simple request it's a
community project so you know it really
is the same as every other web framework
it's not no different about as a list of
features its cross-platform
traditionally dotnet was Windows only
but this is Windows Mac Linux choice of
IDE you can use command line
talling as well fully open sources I've
covered and really on my performance so
the benchmarks are brilliant it's a
compiled language and there's been a lot
of optimizations from a community so
much let go it's compiled you get static
type safety you can take that compiled
binary and run it on lots of different
architectures very easy to publish you
can put it in a docker container and you
can make a self-contained binary so you
don't need to install the framework on
the machine you're going to run it on it
just puts it all together and something
very exciting that's coming is the
native tool chain so that's going to do
something very similar to go it will
give you one single binary everything is
compiled and you can compile it ahead of
time to native machine code if you know
the target architecture and you can do
some optimizations there and it just
give you one executable you just drop on
your machine it runs but this isn't
about dotnet core this is about react
and donek core so why would you want to
use donna core or rather asp.net core
which is the web side of things we've
react there's a few different reasons
you might want to do this first of all
you might want a server-side render your
react app so run it on the server and
generate some HTML to send to the client
so it has something to look at before we
also get uploads and you can do this at
build time but then you just have a
static app and it must have placeholders
for any dynamic data whereas if you
render it on the request you can render
exactly what data you want and you
wouldn't even need JavaScript in it
which
latest data don't do this if you're
building a progressive web app but it's
meant to be installed offline there's a
world of pain you'll have horrible
issues of debugging and caching so just
don't do it you might also want to use
asp.net core to write API backends are
you talking to your database and
ascending your JSON responses to the
application also providing
authentication user login that sort of
thing or something I'm going to talk
about today is you might on a proxy an
API not a API is a suitable for using in
a front-end web application if he hasn't
got cause headers you won't be able to
make cross-origin requests per browser
for a security exception and just won't
talk to it okay so on different domain
and unfortunately a lot of api's don't
add these you might trim down the
payload if it's a really large response
megabytes of XML maybe you might not
want to send that to a browser over a
mobile data connection a lot of API
still have static IP authentication
that's a real problem particularly in
railway api is is like but we're in the
cloud we don't have static IP addresses
it's like well that's how we open today
you want to protect the tokens you might
not want to put your API key in code
that the user has access to because they
might pretend to be you it also makes
demos and testing a lot easier you don't
have to wait for a certain response in
the API if you don't have the ability to
mark things also a few other reasons you
know redundancy monologue for requests
and trend over time I'll add caching you
know you think oh surely it's
distributed but if you're writing an
internal web application that's used on
an intranet all those requests are
getting funneled out for your connection
you might get rate limited there so you
might want to proxy them and finally you
might have to do with a soap API which
is just yeah I feel sorry for you so and
yeah these are very popular in there in
the railway world as well right so I'm
just gonna get all of a demo this isn't
a deeply technical talk but first a bit
of background what I'm gonna build and
why you would want to build it this way
so a bit of spot the difference I took
this picture at Blackfriars everybody
can you see well two days actually
anyone I might give you a bit of a help
yeah
so it's a touchscreen as well so you can
highlight stuff which is really handy
but yeah the the tube status here is
just an iframe and something's gone
wrong and it's not found so it would be
better to do this in JavaScript on the
front end and you know not put a big
error page up if something goes wrong
here's some more examples of what might
not go so well as a dotnet framework
exception on the left something's gone
wrong with your eg connection on the
right or if you're using Windows there's
always been a problem with blue screens
this is at London Bridge they haven't
finished building it and it's already
going wrong so what about like a better
example oh by the way you can follow
like these on twitter at shit signage
they i've got loads so here's a better
example but one of the left clearly
sites gone wrong with the news api there
shouldn't be a big blank space where
there should be some news but it's still
working there's the weather there's the
train information there and it's
gracefully failed it's being
progressively enhanced and you could
argue with a state and use these days
that's actually better but one i'm
arrived i was shutting down for over a
month that's that's a bad idea
don't yeah you want to recover quite
easily and i don't know why you'd put
your you know your company name of
wallpaper the only time people are going
to see that is when science gone wrong
so you really don't to be promoting that
it's a bit more background my hallo
world of web applications is tube space
aboard this is what i use for you know
just testing any sort of technology
stack i've been doing this for quite a
while this one's you can probably tell
from the that what the iphones look like
how old this is there's a date on where
if you can read it as well so if it
pulls the api and this was actually
before TfL we even had an api it was
like screen scraping of I referred
partly service using PHP and XSLT and
XML transforms and yeah upgraded it over
the years to do different technology
stacks and yeah taking an XML feed which
is now an official one and transforming
around on the backend and more recently
using the unified API which is caused in
abled and as a static react app I've got
a reactor wreck the react tube comm that
pulls back in and just updates a static
page and there's there's extra so you
can expand these that you don't have to
wait for Christmas Day which I did here
for
you actually test but it all works so
you can expand these and get the detail
now
which isn't a slight enhancement but
what I'm gonna do in the demo today is
gonna step beyond this so this is just a
static web application that's pulling it
over if you load this and don't have
JavaScript running it just says loading
it has like a template there with all
the lines but it doesn't know what's
tazers so we can probably improve on
that it's time for a demo alright so
this is what we've currently got and
this isn't actually real stasis this is
an API that I've mocked up you know it's
not that bad a moment I'll show you in a
minute what it really looks like so as a
button to reload it and this is why
proxying an API or faking an API makes
it demos a lot easier but if we have a
look at the source code applause well
actually see this isn't rendered
entirely with JavaScript there's
actually all the information in the HTML
here and then you have your initial
state as a JavaScript object at that
point so let's have a look at what it
looks like so it's a pretty standard
react appears run in typescript it's
using Redux and route 2 and things so in
the store here we have this API can
everyone see you wanna make it a bigger
is that good is that too big that's do
you think so this is my API here and
I've written his API and on it so Donna
has an MVC approach so this is I API
control and I've got some classes
embedded here but mimic what the real
TfL API does and these are also mimicked
in typescript and then I just have some
random sort of things that get returned
every time you query it and there's a
home controller which rather than
returning the API returns a view result
of the webpage and here we're just
returning this view which isn't
particularly interesting the in the view
itself we have some helpers so there's
this ASP pre-render module and this
little tag that you add on here will run
node in the background and generate your
app and inject it at that point
we look back in here we can see that all
this badly formatted code is for that
the application and the rest of it comes
from a view or rather the layout because
this is embedded within this layout here
and renders the body at this point so
it's fairly standard from a react point
of view apart from there are two entry
points we have this boot client which is
what runs in my browser and then we have
a separate server and this is the only
difference the rest of the app is
entirely the same front end of Mac end
but this runs it on your web server and
generates your output and puts that into
your web page and you may have noticed
here you can also add caching so you can
uncomment this and that tells it catch
it for a minute I don't want to
regenerate - every time and you can use
the proxy in front of our Lea there's a
middleware you can use as well so let's
try and switch this from my fake API
which doesn't really have anything any
interesting things to the real one so
it's just loads of my store have if we
look in the eat oh yeah if we can
comment out my fake one and load the
real one save and we'll try and reload
this so it supports hot reload but
because I'm recompiling the backend as
well I don't want it to get two
different conflicting states of things
which is why I'm reloading it go back to
this
and one this loads it should be for real
cheap status assuming my internet
connection is working that doesn't look
promising doesn't unless things really
are that bad
no I think the internet connections died
self signed certificate I think the
internet connection here has hijacked I
did this earlier
I signed in earlier and it's also that's
good BBC news who still don't use TLS so
I can oh I've got an HTTP everywhere
thing on here that's what problem yeah
I'll do that here except because I
didn't think why I accepted it earlier
and yeah I maybe I should buy some
tickets no ok let's reload this there we
go
so that is now the real status now the
interesting thing about this you can
extend it so I have a cheat sheet here
so maybe I want some more exotic modes
of transport because I really want to
know what a cable cars doing and women
because that wasn't a big white elephant
so let's reload this so maybe you want
to take the cable car later it's not
really a cable cars motor gondola
there's between the Millennium Dome
sorry Oh two and North Greenwich and but
end up to excel I'm surprised you don't
know about it's really useful it's not
such a great link so if I extend that we
now have what you can see already but we
have the Emirates hairline and also all
the national rail stay it is so let's
see in here yeah national rail are not
very good they don't give you
information they just like go to a
website to find out what's wrong and
boats as well so brilliant so as an open
source project I've built which proxies
the National
live departure boards which is an awful
SOAP API and turns it into a cross
origin JSON but you can use from your
web apps so you can just talk to this
directly and it also has the nice
function which protects your API key you
can put that on the server and so you
don't have to put power on your webpage
and people start using up your allowance
so one of the web apps I built uses this
it's called insta bail it's a
progressive web app you can get
installed at UK and you can install it
on your phone so install it's just a web
page but it runs offline users app cache
and service workers and their interfaces
to their live departure boards to
generate realistic excuses about train
delays so if you want to bail on
something though sorry it was delayed
and also uses a CFL API to say if
there's problems on the tube and he
generates a load most of Mendes lets you
easily send it so that's an example you
might want to yeah an example
application for these or things yeah so
if you're interested in SEO I've got a
book out you can buy that it's just not
about it's not just about Donna course
abouts or web application performance in
general and a lot of service workers
JavaScript compression networking that
sort of thing so check that out if
you're interested that's the end so
thank you very much and any questions</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>