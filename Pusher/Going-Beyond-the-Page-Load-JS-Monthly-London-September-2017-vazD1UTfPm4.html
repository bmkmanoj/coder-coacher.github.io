<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Going Beyond the Page Load - JS Monthly London - September 2017 | Coder Coacher - Coaching Coders</title><meta content="Going Beyond the Page Load - JS Monthly London - September 2017 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Pusher/">Pusher</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>Going Beyond the Page Load - JS Monthly London - September 2017</b></h2><h5 class="post__date">2018-04-16</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/vazD1UTfPm4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hi folks today I'm going to be talking
about going beyond the page load and
basically how to utilize New Relic
browser to extend the instrumentation
that you have available to you before I
dive into that a little bit about me my
name is Richard Moore I'm a Technical
Account Manager at New Relic so I'm very
lucky to be able to work with companies
all over the globe on basically getting
up and running with New Relic
if you want to you can join you can
connect with me on LinkedIn or you can
go and find me on Twitter
I don't really tweet that much and got a
fairly boring life on Twitter I'm also
joined today by killing an O'Shea and
Chris Wayne fourth who also from New
Relic
and after this talk and at the end of
the night we'll be available to answer
any questions that you may have as well
so jumping in just a matter of how many
people here actually are aware of New
Relic or hernán cool okay that's pretty
good okay good to hear so today I'm not
going to be giving you a sales pitch I'm
actually going to show you some some
cool stuff that we can do in New Relic
and specifically we're going to focus on
two key things I'm going to focus
basically on looking at our browser
products and how we can use that to in
line with insights to basically gain
more than just the page load and Dom
content loaded metrics so first of all
it's probably important to have a good
understanding of what we currently do
and why we do that and actually why is
that important so what we we actually do
when we're working with our browser
product at the moment is we connect into
the performance of navigation API we
happen to also use the resource timing
API and various things under the hood of
the browser agent and what we're
actually doing is we're actually timing
all of the segments that are going to
the delivery of your web pages so
specifically we're looking at for
example the ability to give you the Dom
processing time the time you spent in
page rendering and at the end of each of
these events you're going to typically
have Dom content loaded have
interviewed on processing and you're
also going to have the page load event
firing after your page especially loaded
these are two pretty much industry
standard metrics that you will probably
be aware of in the delivery of web pages
however obviously there is a lot of
other metrics out there that you can can
go after so I don't want to give you the
idea that obviously these aren't
important metrics because these
certainly are important when it comes to
your applications going out into
production and utilizing those your if
you're working with a large organization
where you have an Operations team or
maybe you're in a DevOps culture you'll
be responsible for your application so
when you see the Dom processing phase D
increasing within your applications this
is a good indicator to be able to track
how long the Dom processing is taking on
your web pages and also the ability to
track that Dom content loaded so
immediately after that you've got Dom
interactive where users are actually
able to scroll and interact with your
application
next we've also got the the page
rendering so after the document object
models being rendered on your page
you're going to have all of the assets
that are loading after the Dom content
loaded event and you'll also be able to
look into the performance of those so
obviously these are two key events so
you know they are very useful to us you
know we can take action when we we see a
deviation on the performance of these
you can find out obviously where you're
spending the time on your applications
based off these they're industry
standard you know we Google Analytics
provide these New Relic provides these
all of our competitors provide these two
types of events and also when you're
actually looking at these you'll
actually be able to analyze where you're
actually spending the time and what's
deviated within your application if you
suddenly see an increase in your Dom
processing time etc so let's actually
have a look at the performance of
navigation API actually in the real
world so I'm not actually going to dive
into New Relic yet I'm gonna dive into
New Relic and show you that at the end
of this segment of slides what I want to
show you is typically what we're seeing
here so I happen to have a sample site
here that we use at New Relic to
demonstrate our software and this is our
Acme telco site so what I did was I
opened up a
the profiler the developer tools
unfortunately for Google Alex has left
unfortunately so I won't offend him with
the most similar side of things
so what we're able to see in a in my
tool is this fairly fast site it's the
Dom content loaded occurred at seven
hundred and fifty nine milliseconds the
page load occurred at one point eight
seven seconds and we actually look at
the developer tools here this is
actually what that journey looked like
so I can see in this case that my Dom
content loaded occurred here you can see
that occurred around seven hundred fifty
nine milliseconds and then we've got our
page load event there occurring here
around whatever it was one point eight
seven seconds I'll see those useful
information but what if we wanted to
actually go further than this so what we
can actually do is we can look for
events that may be more relevant to us I
don't know if you have maybe a business
team that saw behind your applications
in your projects they're asking you of
c4 KPIs that you need to deliver for
your applications or always on your back
to try and improve performance etc
there's a lot of different metrics that
we can actually get typically obviously
there's the page load something we saw
in the timeline back there was actually
that the actual page had pretty much
rendered before the Dom content loaded
event had actually fired and we'd also
seen that the page load the content was
pretty much there on the screen so this
comes back to really that the event that
we should really be going after is
actually something called perceived load
time not actually the page load time as
a metric so if we look at that time loan
here as well what I can actually see is
that technically are perceived load time
where our user actually believed that
web page was actually interactive or
deliverable irrespective of it being
actually interactive because after Dom
interactive is fired then there be able
to interact the page we can actually see
that this page is very fast in the
rendering of this and we're seeing
actually that content was being shown at
this point obviously when you're trying
to come up with
perceived load time metric to be able to
give back to the business or those are
interesting we're just trying to improve
your site you know these are not a
one-size-fits-all for every single
website they're all problematic metrics
before I jump into this there is a
metric that synthetically people always
go after I get asked loads of times and
it's the first meaningful paint
candidate I've looked I get to work with
customers all around the world and I get
to see certain accounts where this is
relevant certain counts where this is
not relevant happens to be on this telco
site first meaningful paint candidate is
not relevant so it fired at this point
there's nothing on the page it's not not
actually meaningful so obviously this
will vary depend on different websites
and obviously if you're working upon
multiple websites but as I said before
these are problematic metrics and there
there is no one way to do this so what
we can do with New Relic is obviously
out of the box you're going to get the
Dom content loaded you're going to get
the Dom processing time you're gonna get
the page load you can get loads of rich
features that are available just in the
standard product but if we want to take
this a step further what we can actually
do is we can utilize the user timing API
alongside the new relic browser API to
actually extend the performance of your
site so the new relic browser API if you
head over to this site Doc's new relic
calm what you're going to be presented
with is obviously all of our
documentation for the vast variety of
products that we have but specifically
if you choose browser you'll be able to
find our browser agent and s.p.a api and
this is going to basically provide you a
whole host of different things you can
do so there is tons of use cases as what
you could do with this as an example you
can use a page action to send data into
our insights product which will allow
you to query that you might want to do
that if you have a ecommerce application
and you want to store the basket data
into insights to query in a dashboard or
do interesting things today I'm only
going to focus actually on two items
here we're going to look at adding to a
trace and we're also going to look at
the set Custer
attribute-value to basically augment the
data that we have so what we have here
is a sample application that a guy
called clay Smith who's a developer
advocate at New Relic has generated and
with this we're basically tying in to
that user timing API and what we have is
a customized JavaScript snippet here
that gets appended to the existing
snippet that is injected into the site
what we're doing here is that we're
tying in and listening for the
window.performance events to occur and
with that we're then calling out to our
API points or API methods to augment the
data that's being collected so in this
case we're confirming whether the
browser that has that JavaScript snippet
in it actually supports the Finke
functionality otherwise we'll just
return with not supported and then in
this case we'll go and add and extend
the trace here using this we'll also
start adding extra timing points so
let's see with this instrumentation that
is fairly minimal considering what what
we've got there we can actually add on a
whole load of features so given this as
our site what would be some interesting
measurement points that we could go
after well firstly we could look at
perhaps this logo maybe we care about
when this logo appears we could look at
the navigation items maybe that
navigation bar we'd want to know when
that navigational bar appears one key
metric that I mentioned is hero images
there seems to be a very good indicator
for when perceived load time is is there
for your users we can tie in to get that
metric you can also be looking at time
to text so how will it take this text to
appear another metric this cut off
slightly here is Dom interactive fairly
quite simplistic metric to get this as I
mentioned before some of these metrics
they're not going to be perfect for
every single site sites the difference
certain sites you'll have to have a
customized approach and you'll want to
analyze obviously what is that best
approach for each site so Netflix
actually use this as their the
measurement and obviously the idea here
is test it first we could look at
key resources on the page whether
they're being blocked by JavaScript and
so on you could measure those another
key metric that I see is people are very
interested in above the fold one of the
issues with above the fold is it's got
to be defined by a developer another one
that Facebook use is also time to first
interact so when did your user start
clicking or scrolling etc in that
application time for a plug so if you
want to trial any of these features or
so on or want access to these and you
can head over to New Relic comm and you
can download and utilize this product
for two weeks free of charge and also
you gain full access to everything what
you've been through today and that
concludes my short presentation</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>