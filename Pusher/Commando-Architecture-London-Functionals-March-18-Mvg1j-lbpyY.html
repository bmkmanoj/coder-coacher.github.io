<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Commando Architecture - London Functionals - March 18 | Coder Coacher - Coaching Coders</title><meta content="Commando Architecture - London Functionals - March 18 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Pusher/">Pusher</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Commando Architecture - London Functionals - March 18</b></h2><h5 class="post__date">2018-03-29</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Mvg1j-lbpyY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hi guys my name's Ben I came to software
from a kind of a roundabout route I
actually learn to program on board a
warship in 2003 when I looked a bit more
like that than I do now started with
Python and then I got into Haskell
probably about 2010 ish and now I'm all
I'm working at Standard Chartered now a
few of you in this room will have seen a
talk that I gave that has the same front
page I promise it's not the same talk
one of the bits of feedback I got was
that the talk covered a bit too much
material so I'm going to drill down into
the area of software architecture but
I'm hardly going to talk about software
architecture so let's see how this goes
so not going well start off with I use
these so first of all I'll give a quick
sort of overview as to how I came to be
talking about this kind of thing I think
the the the combination and military
experience and tech is not a very common
one so I think there's some hopefully
useful lessons to learn you can come and
tell me afterwards if that's the case
I'll come to that in a minute so this is
a section of the talk is quite important
then I will talk a little bit about
architecture but not so much in a
reading list of things that I've been
looking at to to get to where I am with
all these ideas and then we'll I'll try
and leave as much time as I can for a
Q&amp;amp;A so genesis of the talk will yeah so
obviously as I said you know military
experience and an IT not terribly common
and I have worked for startups I've
worked for big companies and I've had a
few kind of not so great experiences
working in tech in terms of you know
working for failed projects or you know
companies that had a bad culture all
these kinds of things so you know a few
years ago I started to get some Inklings
that maybe I'd learn things in my
previous life sort of a decade and a
half ago that actually still apply so
this is where the ideas of the talk kind
of comes from and now I'm committing an
absolutely cardinal sin here I'm an
ex-marine and I'm about to talk about an
Air Force guy now this you know it's
being filmed as well so it could be in
real trouble here
so Colonel Boyd started life as a
fighter pilot in in career in the 1950s
and this guy has cut an absolute swath
through military theory through business
through you know he's had been hugely
influential even though he only got two
colonel and the reason for this is that
he dives into some real kind of
fundamentals that are applicable across
multiple different domains and I'm gonna
argue that they're quite applicable to
software as well so can I just have a
quick show of hands anyone who's heard
of that other loop yeah everyone from
Standard Chartered yeah we've heard so
you dilute stands for observe orient
decide act now I've come I put this as
the first slide when I'm talking about
boy but actually this is kind of the
culmination of all of his work all of
his kind of you know he's a voracious
reader he's read up on you know long
Clausewitz everyone in military history
Musashi and this is his kind of his
thing right it's their boy doodle-loop
now it seems you know fairly simple it's
just the basic feedback loop you know
you see what's happening in the world
you kind of relate that to the context
of what you're in you decide what to do
about it and then you carry out some
sort of action however as with all
things simple it's a little bit more
complicated and boyd's
so it's often it's often presented like
this but Boyd's formulation in his in
his actual writings which I'll come on
to a little bit later he's a little bit
more in-depth so this was on my previous
talk so I promise I wasn't lying earlier
this is not the same talk so in in
Boyd's formulation actually the most
important the most important part is
this area here which is basically how
how you integrate and
how you integrate new knowledge and new
information into how you kind of process
the world and the aim of the aim of
doing that in here is that once once you
have this kind of broad kind of level of
experience and and then all of the
things that go go through this loop you
can actually often bypass the decision
point and go straight to intuition so
I'm sure as an experienced software
developer you've had the experience of
looking at a piece of code and just
feeling like don't like that I mean
maybe it's something to do with you know
when I was a Python developer you always
used to see code that was like indenting
so you guys are that way indenting like
that and that would give you a bad
feeling right well that's basically all
of the time you spent going through this
loop and refining your mental model in
here gives you the ability to have some
intuition about what you're seeing and
you don't have to kind of make a weighty
decision another example is that this is
in the martial arts so I trained in
Brazilian jiu-jitsu or have used to and
you know when when you roll with
somebody in Brazilian jiu-jitsu they
skip this bit entirely when you're
deciding where to put your arms and legs
they already know and you know only
takes a couple more loops around the
round the loop and you're in some sort
of inescapable chokehold
so John Boyd's of seminal work is
patterns of conflict which is a I think
something like a three-hour briefing now
Boyd used to travel around Washington
giving this briefing to generals and
government ministers and you know if
these kinds of people can put aside
three hours to listen to a colonel
talking about stuff there's some there's
some meat in there I believe it's
available on YouTube the slides are
available one of Boyd's things was he
never really wrote much down so his body
of kind of knowledge is passed on
largely through sort of secondhand
people that used to work with him so the
kind of the driving kind of force behind
this patterns of conflict is you know
what do we want if we're you know
running a company or weird you know
having our own business or we want the
freedom to be able to shape and adapt to
changing circumstances so that we can
survive on our own terms and improve our
capacity for independent action I like
that so that's that's something to aim
for right it's you know if you're
running a company if you're a startup
you're you're looking to get to a point
of profitability where you are surviving
on your own terms and then you can
choose where to go
that's the one example so and the
implication comes out of this huge slide
deck is that these ideas of variety
rapidity harmony initiative and the
interaction between them are the key
qualities that go into being able to
reach your goal so when you look at
these sort of four ideas you know
variety and harmony and they're quite
difficult to harmonize you know if you
have you know harmony tend to think of
harmony is something that's you know
everything's very similar and variety is
something that's sort of a bit chaotic
so this is why the interaction between
these ideas is quite important so
another another avoid some papers is
it's a tiny little paper it's seven
pages long but it's absolutely
brilliantly written so what we obviously
trying to do when we're going through
that other loop is we're developing our
mental model of the world around us and
we do that by taking taking in new
observations compacting them all down
and sort of generating new kind of
representations of the world and
likewise these new things are then
broken down and and the cycle goes again
and again and that's why the papers
called destruction and creation and we
really can't avoid challenging yourself
you can't avoid
challenging your ideas you can't avoid
learning new things I mean nobody
probably would be sitting in this room
as a Haskell program and if they hadn't
kind of I mean certainly for me
Haskell wasn't my first programming
language I'm guessing for most people
know in this room it's not the case
either and for me I came to ask because
I thought it would make me a better
program and teach me new things and you
know to do so I had to break down some
of the things that I thought I knew
about programming as well so and then
then there's this idea of you know
harmony and variety you know you have to
have a little bit of chaos in there you
can't you can't be in a flat kind of
neutral environment you have to have a
little bit of chaos to kind of perturb
it's like machine learning you know you
need to you need to have a little bit of
noise in there to be able to move around
you're kind of problem space and you
know this happens both internally and
also in the external environment that
you see changing so destruction and
creation 7 pages long quite big type
well worth a read so another kind of
thing that I came across that I really
liked there's a book by Robert cringe
Lee called accidental empires about the
rise of startups in Silicon Valley but
the formulation I prefer obviously is
its idea of commandos infantry and
police so so you've got different sort
of timescales of operation right
commandos are the first people in the
most uncertain environment the quickest
change is most important missions most
chaos damage is a surprise and less
process alright and then you move and
then you move into the second wave that
comes in so this is you know you've
you've you've perturbed your environment
you've created a lot of chaos load of
noise and then you need guys to come in
and you know the guys that have done all
that they're not really interested in
kind of process and they want to go and
do the next chaotic mission and blow
stuff up
so then you get the infantry who come in
who and you know a little bit more
established obviously still kind of very
much on the sharp end but you know this
would be your kind of you've got your
MVP down if you're in a startup you've
got your MVP done and now you actually
need to you know systemize it
productionize it package it and this is
where you know you stopped process comes
in and you need to start having systems
in place and then following all that you
move into an even slower kind of
operational cycle so imagine is OODA
loop going around you know these guys
are very very quick very decentralized
these guys a little bit less quick less
decentralized more process and then
you've got the bureaucracy that comes in
which if anyone works in a big company
will be very familiar with so this is
about kind of consolidation and I would
argue in this phase your ability to kind
of generate chaos and therefore new
ideas is mitigated slightly and and
maybe tempered so that's the book I
mentioned accidental Empire so I think
face book got it wrong right like move
fast and break things versus move fast
on stable infrastructure actually you
break things then you carry on moving
fast and then you get to stable
infrastructure so if I ever see Mark
Holthe and I mentioned that to him and
you know this is a very good if you
can't be bothered to read the whole book
and I actually haven't really hope
hooking up must admit this is a quite a
good overview of over the ideas there
all right so architecture it says that
says architecture right so anyone who's
worked in a big company will be familiar
with this view of software architecture
what you do is you take a big pile of
money you put it in the middle of the
floor
and then you burn it and then every
couple of months when the kind of the
cycle comes around and you need more
funding you get more money and you throw
it on the pile and then you just end up
looking like that dude there and oh yes
that's true yeah this is well I mean er
some fairly large cracks in it you know
so software architecture yeah not really
that fond of this view of architecture
so but you know important question
right why do why do we bother with
software architecture at all I remember
when I was a sort of you know junior
junior and development terms but maybe
not quite junior in years because I
started software quite late I went into
a company and I don't really appreciate
the need for you know why do we have to
use this library versus that library why
can't I just take whatever I want and I
think the important question about why
we bother with software architecture is
because you know if you do achieve
success you do have to go from that
commando infantry police model right not
everyone in your company will be in one
box your whole company won't move from
one box to another you know if you've
got a stable bureaucracy strong and
stable you'll still need people at the
sharp end generating new ideas or if you
don't you'll be in serious trouble so I
think when you decide why you need to
bother with software architecture you
need to know what phase you're in and if
your team if your multiple teams you
might that answer might be different
depending on which team you speak to so
one of the one of my other interests
besides trying to conflate military
learning with with software is
psychology so there's this concept
called chunking not from Wikipedia from
the field of cognitive psychology so
this is where you you take individual
knowledge you integrate it through your
you know the orient bit and your you de
loop and you were able to then compose
things together right so an example from
you know my earlier example of martial
arts you know I'm still trying to put
the basic building blocks of where my
arms and legs go where is the guy who's
better than me he's been doing it for a
few years has integrated that into I'm
gonna go and do this move and I'm trying
to do all of those things at once and
he's doing one thing at one time and
it's all kind of chunk together and I
think you know as Haskell errs I think
that this is one of the things that
really attracts people to ask oh you
know people get the Haskell bug and I
think it's because because of this this
is an inherently pleasing process to go
through so you know if you
equate chunking to the kind of the type
system hierarchy now for you looking at
a functor you know if you've been doing
haskell long enough you know what it can
do you know what it's for
you know the rough meaning behind it and
you're able to kind of take that chunk
and you're not then looking at the
imperative code underneath it and to say
what steps is its thing going to you're
going from what's it doing to what is it
and exactly this is from the same
Wikipedia page so you're creating higher
order cognitive representations right
mental models and it's a paper from the
60s I think I think this you know the
idea that people have seven plus or
minus two has been slightly do punk
debunked now but the underlying theory
that you know you want to be able to
lump things together so that you can
operate a higher kind of a mental level
it's still a valid thing to take away
from this and then mental mental
representations are the kind of
longer-term
idea behind chunking so you know when
you start something you've got this you
know the four phases of competence were
it's called you've got unconscious
incompetence conscious incompetence
conscious competence and unconscious
competence so you go through this kind
of process of not knowing what you don't
know knowing I think there's a US
Secretary of State that talked about
this at some point
and the way that we go from not knowing
what we don't know to unconsciously just
being able to do stuff is that we build
our mental representations of what we're
doing so you know in in Haskell
obviously we we learn our basic kind of
fundamentals we put those into practice
and then we get some experience and then
eventually we generate a bit of
intuition like oh yeah I see this
particular type of problem I might need
this monad stack or I might use this MTL
constraint and that idea of building up
this experience so they have this kind
of general base upon which to build
intuition enables you to choose the
right abstractions and I think we're
very lucky as Haskell is
because you know the right abstractions
are mathematics and you know these are
being rigorously studied and and and
smacked around and you know we're
building much closer to what the
fundamentals are you know I think
abstraction should be as deconstructed
as possible so I would much rather think
in terms of functors than say an
observer pattern that you have to you
know visually look through a whole line
of a whole page of code before you
figure out are I get what they're trying
to do now right if you see this as a
functor of a functor instance you know
exactly what you're looking at
straightaway so so this is where you
know the destruction and creation paper
kind of feeds back into kind of software
architecture right you want to be able
to do as much as you need to do to
achieve success but you want to do that
in a way that remains harmonious you
want don't want to be achieving success
on the short-term and creating loads of
technical debt so you want to be able to
apply the larger kind of chunks to what
you end up with and then and that
enables you to move quickly without
breaking things or causing yourself
problems that will make yourself not be
able to move quickly in the future and
so here we go this first bit of code
this to me is the the core kind of
abstraction that we all care about right
when when you look at the odor loop
right we have things happening we decide
what to do with those things and from
that we generate a new thing not
knowledge or State in case of a left
fold so everyone's familiar with you
know left fold I mean you know pushes in
a subscription API so you subscribe to
new things you do something with them
you know WebSocket I should have put
pusher in there sorry well but this is
you know this is a very very common
pattern right you you can do this with
you can apply this chunk to multiple
different things that you see in the
real world destruct
you break down the old state and the
event that comes in the new thing that
you see and creation of a new state so
you know I think odor is a hugely hugely
applicable paradigm to think about it's
you know it's simple its ever-present
its fractal in that you know you have
large-scale outer loops of a company say
operating over months or years you have
your very very low level development
tool setup where you want quick feedback
and you want your you know flightcheck
warnings in your Emacs buffer yeah those
are all other loops and they all compose
and you know the smaller faster ones are
all that sorry the longer slower ones
are built upon multiple layers of
smaller faster ones so events state fold
commands so events obviously observation
state is you're kind of all that giant
load of stuff in the orientation bit
this is your understanding of the world
your context what you understand of the
problem domain you're in and then
obviously you decide what your new event
comes in that comes in is that's your
fold command you take your event and
your old state and you generate a new
state from it and then you act and in
you know in a startup that I worked out
before we actually called these commands
so an intention to do something from the
outside world in the web interface or
something was a command the command
comes in and and generates potentially
many events and then that is then folded
into the database and that's basically
event sourcing event sourcing CQRS
but and honestly I think unless I had
some real constraint if I'm building
anything nowadays I would usually go for
a some kind of event sourcing idea
because it enables you to ask the right
questions so you you store your granular
data you never kind of throw anything
away
you know if you're doing some sort of
traditional web app where you have a
lack of crud app and you know a post
comes in from your
Webbe thing and you do an update in the
database well you basically thrown away
a bit of information that you have the
new state but you don't you don't have
what happened you don't have the
semantic kind of what did we do here
what what was the occurrence and the
other thing that event sourcing gives
you is the ability to go back and answer
different questions ask different
questions of your data so you can go
back and say right if I check if I
change my folds given that this is what
the concrete things that we've observed
if I change my fold and my state what
does the world look like now and it also
gives you the ability to you know
accounting systems are all essentially
event sourcing things you know they they
give you the ability you know what I
work in a bank and one of the very
important things that you have to do is
to be able to say what's the view of the
world as we see it now but also what's
the view of the world before this event
came in so we might have an event that
comes in and so from a point of time a
you might have an event that comes in
and is relevant to a point in time
before that but you need to know what
does the world look like at time a or
what does the world look like now when
we understand that something else has
happened so that's quite a useful
superpower to have I mean and then in
the front end you can use the same ideas
for the the Elm architecture so you have
events come in you have a pure function
that updates your state and then your
state is declaratively expressed into
the HTML you know I personally prefer
halogen and pure script but you know the
idea is very similar so you know this is
all the same as it's a fold it's the
same as the cqs and an event sourcing
idea on the backend and the best thing
is you get to reuse your mental chunks
in processing both of those things so
you know it folds all the way down for
me it's you know you you read any papers
eventually you're going to come across
all these kind of but all these terms F
algebra is free man ads cattle morphisms
highly morphisms interpreters semigroups
mono its function composition these are
all things where you're taking you're
taking
things that you in reasoning about
individually you're smashing them
together and then you're wanting to
reason about them in the same way this
special shout-out to metamorphism
because metamorphism is like an animal
no wrong way around a high/low morphism
is an Animorph ism followed by a cattle
morphism so you you generate something
and then you contract it and then you
and then you break it down used in I
know where it's used I guess mmm como
Nance maybe I'm sure I've seen a
high/low morphism in the wild I've never
seen a metamorphism in the wild so
that's the other way around
that's destruction and creation which I
was talking about earlier so you have
your cattle morphism and then you have
your animal fizzing so you you break
down a chunk of stuff and from that
stuff is born something else which then
probably goes on into another cycle of
of being broken down and that's a
funnily enough the only space I ever
came across there so tonight I was
reading destruction and creation and I
thought sounds very much like a high
limb orphism but the wrong way around
and a metamorphism I don't think I've
ever seen one in the wild but the one
paper that I did find basically equates
this to stream processing so that's
basically what we do day by day when
we're walking around we are a stream
processor and this is the state it's not
quite like that
yeah fold L so yeah that's that's my
learning from unfortunately not the raw
Marines but mostly the airforce about
software architecture it's all
destruction and creation reading list
Boyd's autobiography fantastic but
really well-written
Robert coram was one of his kind of
acolytes very close associate of his so
really understands the genesis of it
Boyd as I said you know for somebody who
basically wrote the book on military
military kind of theory if you like you
know he this guy is so revered that the
US Marines actually had him help write
their war fighting manual now as I said
before
right for a marine to even acknowledge
the existence of an airforce weenie is
something quite amazing so for somebody
who had such a you know incredible
output he didn't write much down
patterns of patterns of conflict is
slide deck destruction and creation is
his little seven seven page long gem
there are a few others dotted around but
honestly I'd start with his
autobiography to answer Pepe's question
about why doesn't this work in big
companies team of teams this is about
the experience of general McChrystal in
Iraq chronic combat al Qaeda if you want
to understand about this kind of idea of
mental models and this tree of kind of
knowledge and and how that works Josh
Waitzkin is a chess prodigy Brazilian
jiu-jitsu blackbelt world kung-fu
champion and has a very very good
understanding of the kind of the meta
stuff that goes on when you learn
accidental empires you could skip that
one to be honest go read the the blog
post that I had earlier and then you
know if you actually do want something
about software and I apologize for
talking about stuff that's not really
about software building evolutionary
architectures that is actually quite
good by thought works and then a little
shout-out to Graham Hall geezer X Row
Marines intelligence officer he's
written a very good book about how you
build this kind of culture into
companies about asking the right
questions and enabling you will need a
loop and unsticking things so yeah I
think that's that's me done</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>