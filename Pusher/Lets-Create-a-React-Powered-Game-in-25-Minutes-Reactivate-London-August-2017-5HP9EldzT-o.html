<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Let's Create a React Powered Game in 25 Minutes - Reactivate London - August 2017 | Coder Coacher - Coaching Coders</title><meta content="Let's Create a React Powered Game in 25 Minutes - Reactivate London - August 2017 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Pusher/">Pusher</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Let's Create a React Powered Game in 25 Minutes - Reactivate London - August 2017</b></h2><h5 class="post__date">2018-03-29</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/5HP9EldzT-o" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">my name is Johannes as it was already
mentioned or Joe feel free to call me
Joe I have other nicknames as well but
talk to me about them after so what I'm
gonna be talking about today is creating
a game in react so people usually
usually ask me so why do you create a
game in react why don't we use like
something else it's probably better
suited for the job and I'm mostly like
well I know react and so I'm just trying
to either find some saying some use case
for reacted it's usually not being used
at or it's also easier for me it's like
this it's kind of saying like use the
tools that you're most familiar with and
so I am really into game development I
haven't done as much recently as I want
to but every now and again I kind of
participate in some game jams and then I
want to or usually I use react because
it's the thing I use every day at work
and I just find it easy enough for me so
yeah long story short he lets just get
started so what I kind of prepared is
I'm just gonna walk just going to write
some code and then at the end it's
hopefully gonna be a game or not
alright then it
so yeah so we got like a background
which is like water and then now we got
like a ship and that's great another
ship well obviously they're like the
same position so we need to update the
first one so let's put that 200 pixels
in all right let's move those it around
oh by the way that's actually not gonna
be any treasure
unfortunately so it's just gonna be
chips and stuff and no treasure yeah all
right so now we've got two ships on the
screen but we kind of want one of them
to be like the pirate ship so for that
we just put in another component and now
that kind of turns turns to the one ship
into a pirate ship well it's pretty much
done so how this works under the hood is
kind of when I say it's a game component
then under the hood it has like a game
group at that stage it has a world and
then it puts everything in so it's just
abstract away some of the game specific
mechanics for us and it will go into
what what a loop does for us in just a
moment but first we kind of want to move
the ship around instead so obviously on
a key press we wanted to move a bit so
for that to happen we just say keep
typing shop for some reason we just put
an a key event right
and then we have a prop called on P down
so this one takes a function so and in
this function it gives me keys and the
previous state so if I now say I want
keys inside of these keys I'm checking
for let's do ask you and then hold on I
keyboard layout this a bit weird right
now sorry about that
there we go found it and then we just
define a new state that we want to be
returned so we know already that the
ship has like an ax and a y position so
what we want to do is just update that
depending on the previous state so spent
y equals previous state wine and then
just minus four there we go
and that it should potentially work but
it doesn't let's let's just I loved
debugging life so it's not even giving
me an alert what is going on oh I'm
sorry
so it's actually there we go I kind of
had an issue with the problem but now if
I press the W key it's actually going up
so let's just copy-paste this a couple
of times
right so now it can go up and down this
is very nice and then just do the same
for left and right
yay it works alright so this is good and
it also moves diagonally if I press both
keys at the same time yay okay so kind
of I just kind of want to explain or
take a moment to explain how it this
actually works because obviously key
event is not an actual rare component it
doesn't render anything so how this
works is that I just defined this as a
component but it renders null or like
something that gives like a faulty value
and then inside of the chip
I'm sorry inside of the ship I check for
the for the component and if it can't
find a component I just do something
once I see that the on downs proper prop
has been defined like in this case if if
it's pressed then it will actually move
the ship all right so the next kind of
thing that I want to talk about is a
sprite sheets so the official definition
and I think I got this one off of
Wikipedia or somewhere else is it's an
image that contains several small
graphics an entire crude arrangement and
this kind of how it looks like so you
have like a big image that you that uses
smaller images you've probably seen this
before like if you've done any kind of
CSS for example and you have like a big
icon set and you just need to display
like smaller icons of it so obviously
this can be used for animations but I'm
not going to use this for animations so
what I'm gonna do is depending on where
I want to move my ship I want a specific
position authorship being displayed so
obviously if I move down I want the ship
facing downwards if I move up I want the
ship moving upwards so starting with the
code from previously we just have to
define a direction index that I made up
so this is the wrong one and now this is
going to be fun just figuring out which
one is the correct one there we go
one one down four to go I'm sorry
actually it's seven more to go right so
we got that Asarco reckon I don't think
it is there we go and one more
right this is looking good so now
obviously for the diagonal ones it don't
it doesn't display them so we need to
find a way to show them so we're kind of
checking for base keys at the same time
so let's say in this case if we want to
show like the ship facing diagonally we
have to check if it's like the W key and
the a key at the same time then pull in
the correct image and then show it
under this one
all right a singer should be one here
right yes got it thank you
so yeah hold on just toggling through
the correct ones there we go
right so and then I just need to copy
paste this over and then we got it so we
got W and D perfect and then we got s
and any right
wasn't correct one there we go
and one more
all right there we go so now we got the
ship moving and depending on where we're
moving it's displaying the shippers PI
think in the direction oh thank you all
right so now we got the movement of our
ship out of the way what we kind of want
to do is like the black pirate ship
that's just right now standing there we
kind of want to move that around on its
own so we're going to start with the
same code that I pretty much brought
previously and then there is a thing
called on update and this is where the
game loop kicks in that I referenced
earlier but let's just show what it does
so it takes in the previous state as
well and then it returns an object with
the new state you can see the ship
moving one attack which is great and
it's a part that I haven't fixed
right so what it does the the on update
it is it it's a function that runs on
sorry it's a function that runs on any
prey and then it just takes in what's
being there and then just executed
executes sits every friend that's why
the game loop isn't so this the game
loop enables us to have components do an
action every frame so what we want to do
here is obviously we don't just want to
move it away we kind of instead we want
to try to set like kind of like a patrol
like if it hits like a specific point on
the left then toggle to the right and
then if it is a specific point on the
right toggle back and forth so let's see
if we can do this so we want to do like
if sorry previous state X something a
lot on the lines of 100 pixel then we
want this state to switch and
so by default and this component already
has the state of moving to the right so
we just defined that so if right which
is defined on the state or on the
previous state a big site
alright let's just hope this works
actually we need to switch those around
I almost forgot that we need to toggle
the other value
right
moment of truth and in just a second
alright alright so we got the ship
moving around so pretty much the the
next step that I'm gonna do and this is
going to be actually the last step for
this presentation is that I want to
shoot cannonballs with my
so obviously the the ship is still on
patrol and now we want to put in a
cannonball which is another component
and then it just hangs right there and
then oh oh no I know I almost went too
far right so cannonball let's put back
in the canoe so as you can see the
components they are relatively
positioned so the position of the
cannonball takes the position of the
ship so if I put in another X and the y
value this will now be positioned inside
of the ship
so what I want to do then is similar to
how we hand the key event for the ship
we can define a key event inside of the
Cannonball and this time I'm gonna put
in the correct prop so that it actually
works hopefully and then put in the keys
and it takes the previous state again
and needs to return a new state right so
we can also toggle the visibility
obviously we don't want the Cannonball
to business but we at the beginning we
only want it to be displayed once we
actually shoot it so we switch the
visibility off and now we check for key
and because I'm lazy I'm just burning
this to the Q key also it might mess up
my slides effect but it in an idea and
the other keys so right so now what we
are doing with nan just to just to show
you that it works I'm just gonna toggle
the visibility but obviously not just
shooting yet um so let's define the
state that I want returned state visible
and then just put it through return the
new state and then once I press Q we see
the Cannonball well obviously that's
that's not the whole story we kind of
want that actually to to move around so
the next thing we just kind of combined
it with what we have in the previous
example when we moved around the ship so
we define the update here
taking in the previous state as again
and so once we now had some previous
state so once we know it's visible
actually we then kind of just want to
shoot it up for a bit we just want to
move it move it
move the Cannonball like just a couple
of pixels up like just maybe 40 pixels
so that it's not in the ship anymore all
right same procedure defining the stage
or can I understand
and then just say why position should be
should be the previous state - maybe
like two pixels so now if we press it
let's just push it up it down now we
have a plastic you it goes all all the
way all the screen this is not kind of
what we want but it's it's better so we
just need to define like a condition
where it says well if it moves like a
certain pixels or Dan just hide it so if
previous state Y is I don't know let's
say lower than zero let's see if that
works
and then just switch activate the party
all right
all right this is almost good but I
think we can do a bit better
let's do minus 40 and just check this
again right this looks good so obviously
we don't want it to shoot like always to
the top but that's something that we can
then check it but there for example if
we were to take this further we can then
have like the direction index check
which direction it's currently at and
then decide in which direction we want
to shoot a cannonball but this might be
a bit out of scope for this slide and
identity code is getting messy already
so yeah this is just the example again
just in case I wouldn't have been able
to actually reproduce this is just as
the same thing so and this kind of lets
me to like my last few slides obviously
this is what's just kind of like an idea
of if you want to do game development
with react this is like the kind of like
first stepping points that you would
need to do you could do like keyboard
input really easily and obviously
because of reactive component structures
it's kind of lends itself to being quite
easy to drag-and-drop in specific things
like specific things that actually don't
render but modify the component in a way
so that makes it very easy to read and
to maintain and if you would want to
take this specific example for like the
next step would be to have like some
physics in there to actually have some
collision and then maybe like some hit
points so that it wouldn't if like they
cannonbolt hit it wouldn't destroy the
ship quite at first but like just remove
a few hit points and needs like a few
shots to actually be destroyed so what I
used to do this is actually react game
kit it has physics in there by default
this has like a lot of things that that
help you with that
but what I saying actually this is an
implementation
detail if you have like a structure a
self-defense structure how you develop
your game then it doesn't matter doesn't
matter if you use three again kit or
like react primitives or anything else
one if you have your components defined
in a way I think it's kind of real
visible very quickly right and that's it</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>