<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Angular Vienna, Use React tools for better Angular apps, April 2018 | Coder Coacher - Coaching Coders</title><meta content="Angular Vienna, Use React tools for better Angular apps, April 2018 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Pusher/">Pusher</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>Angular Vienna, Use React tools for better Angular apps, April 2018</b></h2><h5 class="post__date">2018-04-13</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/oZEmFfgSjeg" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey everyone my name is marcin ho-ho
I work as principal software engineer
for a company called embed IT in Prague
Czech Republic and besides that I'm also
Google / expert for web you can find me
on twitter my twitter handler is marcin
underscore hotel double-l and you can
follow me also on github
besides daily job i'm running the
biggest JavaScript meetup in prague it's
called ng party by the way the ng stands
for next generation you see what I did
what I did there
I'm also author of ng metadata the best
angularjs yet and i'm core member of
sched s a reactive library for writing
web components and well when I'm not
geeking out you can find me outside
surfing snowboarding skateboarding or
wakeboarding alright enough about me
so this is angular meetup and are you
prepared to have a good fight against
reacting angular yes no I have to
disappoint you because fight early it's
to the trick around some frame Wars so
we won't we won't fight there is during
this talk instead we can be friends we
can leverage the knowledge of other
ecosystems and use it for our own
benefit and better apps question is how
to do this right how to do this well we
need to take particular look at three
categories that we are dealing with bio
daily jobs and those categories are
tools what tools are we using for
achieving your goals second category is
architecture how we built or apps with
those tools and last but not least we
need to take very close look at
libraries that we are using that we can
leverage from other ecosystems as a
baseline for describing all those
categories will be using angular CLI
which is a it's an industry standard for
booting up new angular apps and you can
install it by MPX
I'm not using NPM install global because
global things are bad for your system
and maybe for your life as well so you
can use MPX and don't pollute your
system so let's take a look what
CLI brings us by default in the terms of
those three categories right
so from library's perspective well
nothing surprising there is angular and
rxjs from architecture perspective we
can build our apps how we want we can go
fully with the componentry in
development or your service-oriented
architecture or some other state
management principles but that's it and
from the tooling perspective she like
comes with web pack mojo bundler then we
get protractor with selenium for engine
tests and Carmen Jasmine for unit
testing and last but not least we get
the best thing that ever happened to
JavaScript typescript with tools for
static analysis like TS lint and code
wiser so far so good before continuing
with this talk I have to apologize
because I'll be introducing a lot of
tombstones just to give a favor to
angular a team what they did on ng
Europe in 2015 I don't know how they
tombstone all angularjs features oh so
sorry about that but I just had to do it
all right let's take a look about tools
what we got let's start pretty pretty
easy with this and it's briefly talk
about task runners and package managers
that we are using with angular and other
apps so probably most of you are using
NPM right who's using NPM hands up yes
like 99% of audience
but we can do better we can use kit I'm
an iron which is also a package manager
and task runner which is much faster
than NPM more reliable just why why
should you use yarn right I have a few
questions for you
how would you execute locally installed
MPM package from the terminal with NPM
or whatever suggestions
yeah that's the one way but if you don't
want to introduce NPM script you need to
write this gibberish right with the yarn
you can just execute yarn and the binary
and it will find the binary file in the
old packages no modules and it will
execute which is super convenient next
question how would you execute custom
NPM script yeah exactly
ambien run it into it for instance
custom script right would yarn we can
skip the run to be more lazy eyes right
exactly
okay and lasting how would you pass
custom arguments to existing NPM script
yes
need to terminate the script to tell it
okay this is it and now accept these
arguments this is super own convenient
especially if you are writing wrong
scripts in your package Jason so again
with yarn you just run it without
terminating
good questions here's t-shirt so yeah
it's it's more convenient to use like
for daily tasks and executing your
scripts just playing around and that's
but at least it is great
CLI tool for upgrading your packages so
I can execute I have this beautiful
command-line tool for checking the
packages that can be upgraded and yeah I
don't have to do it manually or I don't
know how you upgrade packages okay that
was just some intro
what about formatting so again angular
CLI gives us the excellent with code
wiser so you can execute length with fix
and then you'll reef kinda reformat and
fix your linking errors in your code
base
so these linters have two rules to
formatting rules and code quality rules
but if you think this is okay to get
backed by missing some spaces or
semicolons in your editor you're
fundamentally wrong and because of that
TS lint is not the right tool for the
right job in terms of formatting so we
need to introduce our first gemstone so
what should we use for formatting well
we can use prettier library from
Facebook and open source community and
you can install it pretty easily just by
adding as a development dependency and
by executing prettier with the globe
pattern and write all your code base
will be reformatted and it's blazingly
fast and did I mention the whole
Facebook is using prettier on to cover
their codebase
you don't have to ever argue with your
colleague during code review like hey
main this base
this is not the end of the story because
as I said there are some formatting
rules in TS length so how to mitigate
those do not have prettier in clash with
linter thanks to the open source we have
some package for that in particular TS
length config prettier so you will just
extend your TS link configuration rules
with this package and then we can
execute the binary which will expose
those rules that are in conflict with
with the treat here and still you have
to manually delete those so I see great
PR opportunity to automate this thing to
appear all right I don't know about you
but I really hate doing things manually
and all the time I grind for matters and
stuff instead we can automate things and
let's robust do the work again we can
use two particular packages outside the
angular ecosystem lint stage and husky
so in stage need some configuration and
then we can create new NPM script with
this particular word pre-commit which is
a kid hook kinda right so husky
registers these scripts to real get
hooks and then when we all start
executing a commit it will be executed
and husky will run lint stage binary and
in stage binary we'll find or can flick
and execute those two tasks so we will
be running linter and formatter and also
will add those formatted files to the
git so we don't have to do it manually
and everything will be formatted and
properly styled in that particular
commit which is awesome ok let's switch
to some more serious topic unit testing
who writes unit tests hands up all right
those who didn't raise their hand there
are doors I'm just kidding but seriously
unit tests are important so again CLI
comes with Karma the test Runner and
Jasmine the assertion library and spy
library but I know what to experience
with those tools I don't really like
those I need to do a lot of
configuration to make colonel run and it
used to it's sometimes very flaky it's
slow debugging is not very convenient
and there are other reasons but we
introduce another tombstone for jasmine
and karma with angular sorry
instead you can use something much much
better and more reliable just just its
complete testing solution from Facebook
and open-source community it's super
easy to set up it's super fast it has
very nice to link ecosystem and it
introduces new type of testing it's
called snapshot testing again to add it
to existing CLI you just have to install
just and just preset angular which
handles all that angular setup for test
bed and zones and stuff you know talking
about the speed what see some numbers
shall we so let's say we will use
traditional karma which is run against
the real browser Chrome at particular
tests and it took 15 seconds which is
great you may be we could be much better
we can use some headless browser phantom
which is dead now but whatever so it's
only 30 seconds so fast right awesome or
can you suggest which takes 5 seconds
how is that possible well just runs
against note and against J's dome which
is a virtual representation of browser
within note and it runs in parallel and
it has very efficient caching mechanisms
what about the snapshots so this is
traditional test like we are used to
right by the way the syntax with just is
the same or very similar like with
jasmine
so nothing new to learn on your side and
we have to use this particular matcher
to match snapshot you know test and what
this will do is your physical is you
physically save a file snapshot file on
the disk with the particular state of a
component in that moment and then when
someone changes the component some logic
changes we are getting this beautiful
diff when I can exactly see what
happened what changed this is really
awesome I don't know I don't know about
you but I really hate to write manually
query selectors to check some node or
classes it doesn't make any sense so we
just in snapshots this is easy peasy
sorry okay so you just execute this
assertion the picture is your component
and you use too much snapshot and that's
it and you're safe physical deception
you need you need to add the snapshot to
the version control system and so it's
physical there in your in your gate and
then it it compares the outputs with
this test initially at the logic of
justice if it finds the their snapshot
if your compare and if there is no
snapshot it will initially save the
initial snapshot that's how but we all
have time for questions after sorry
and last but not least just comes with
interactive silly mode so I can read the
test in a watch mode and I can filter
just to run some subset of the test
let's say some pizzas related test and
it'll execute and let's say we want to
run some tests just some components and
execute all tests from components and we
can go back to the initial screen and
run just the whole suite by pressing a
simple as that and just cover as much
more topics not just those it is very
powerful walking features you can even
work es6 modules which I don't recommend
walking module is kind of con smell use
dependency injection of course it has
zero setup for code coverage it just
works it's highly pluggable you can use
a bit puppeteer for executing and to
intestacy view please and it has it has
large ecosystems with a lot of plugins
ok we will stick with the testing for a
while let's talk about engine testing
again the same question who writes
end-to-end tests ok like 20% of the
audience and who enjoys writing in
Turing tests one guy yeah exactly
exactly so CLI comes with protractor
which uses under the hood selenium when
I heard selenium I want to fight someone
just because it's kind of old technology
it's again very reliable flaky the
selectors are not matched properly and
many many other reasons why I really
don't like it and let's face it it's
2018 and even much better tools so need
to introduce another tombstone and I
have good news for you
there is ultimate cure for your entrant
a sickness
and it's called test cafe it's a pure
node.js tool which is super reliable and
super fast
we are you thinking for the last nine
months and really it joined a lot like I
want to be again developer in tests know
so how to add it to angular CLI you just
install test cafe and discover live
which is a watch mode let's say and
that's it no configuration you can just
execute this cafe against Chrome or any
other browser that you want and it just
works and let's see how it works in a
real life so here is some Pizza app for
creating managing pizzas right so let's
run the test right it was super fast Wow
okay let's slow down the test we can do
that okay and I'm pressing save and
automatically and we ran the test with
so including pizza
I'm putting their name create a pizza
I'm going back to the details I'm going
back to the pizza and I delete it delete
the pizza to just clean after myself
the test right okay we can add some
toppings for sure because pizza without
toppings boring again I hit save and the
test is are gonna be run so there's a
name this time with some toppings
bacon bacon
yep bacon we create the pizza go back
again to the created pizza detail we
delete and that's it and just comment
out this speed limitation to see the
test in the real life of fast it is
again I press save and that s is we run
oops
yep that's it it's super fast and
writing test like this it's just it's
amazing
so as a recap entering testing with this
cafe it's really really reliable it's
just pure nodejs
no plugins new browsers know Java and
stuff it's cross-platform
I'm Mac user but I also use Windows and
this cafe even works on subsystem Linux
on Windows amazing it's cross browser it
works with continues integration and did
I mention it's a process typescript yep
it does okay next topic
how do you develop components in
isolation or how do you do complementary
development or maybe another question
how do you create style guides of your
component catalog with angular
no one character app ok waste of time
I'm just kidding you can use storybook
storybook was initially pure react
solution but as of today it's a
framework agnostic so you can use it
react with angular you web components
any other framework that may come I hope
there we all know they there is no other
framework coming around so it generates
the whole UI of your stories and you can
just browse your components in
particular States it even renders the
whole app because at the root tab is
just under component and we can play
live with the rendering of component
let's say I change the name to my real
name yup that's my name I get the
feedback and I said the real H I'm sold
and we even supports not really non
primitive data like objects so we have
some fluids with Selleck box will change
the banana and change some date so this
is really revolution revolutionary tool
for writing your components and to
showcase this because you can deploy
this and is awesome documentation for a
consumers right and again how to add it
to existing angular CLI
you just execute mph storybooks Eli how
it works in real life just like this
you'll take for a while soon can start
making a coffee early in the morning so
they'll fetch some packages dependencies
come on come on
then it discovers that we are using
angular app and everything is set up for
us magic right this is developer
experience at its best I don't have to
do anything I just run the CLI it's
there
and I can immediately start writing my
stories amazing what is a story it looks
very similar to unit tests so you need
to define the story for a component it's
kind of like the scribe block in the
test and then we are just adding those
particular states of your component that
you want to render on the page so it's
like it block in your unit test and
you're using traditional templates with
all the familiar angular logic and
syntax and last but not least you can
provide the data to those components
simple as that
so as the endgame your components folder
looks like this it has encapsulated
styles tests stories implementation and
snapshots if you are using snapshots we
just of course okay that was about
tooling what about architecture let's
take a quick look at the components
architecture in both react and angular
all right so basic building blocks of
both react and angular is component just
the syntax is different also we can
enhance the components the new behaviors
react this is more function approach
with higher components or let's say
factory functions and angular has
directives but the principle is again
the same
a realist is render so in line rendering
with j6 we can use the same with angular
with inline templates which I prefer by
the way what about CSS up to you you can
use both inline or external both
technologies support the same options
and last but not least which is in I
hope you were important in designing our
components are immutable props so react
as immutable product props by default so
if you don't change the referent
reference of the prop the component
won't be rendered and we can turn this
on in angular as well with on push so
when we took a look we're just using
different syntax but the principles are
the same
so you learn things bonds and use with
anything which is great I also want to
mention our stateful stateless component
architecture but I'm going to go into
details there are billions of articles
in Internet I highly recommend the one
from 10 abramoff what about state of
applications again let's take a look at
both reactor angler well with react we
have this state which is a local stable
component we have the same kind of the
same with angular we have the state of
the instance of component or directive
this is great for managing some local UI
but not for the whole application state
for that we can use dependency injection
which is hierarchical both in react and
in angular we have contacts API or
services in angular or even better we
can use flux architecture for in our
case Redux and let's be let's let's
honest let's be honest this is the only
type of architecture that really
decouples the state from the real
framework and literally we can write the
same code and we use it with any
framework because with flux Redux your
framework is just a renderer
and tool for hydrating the data so there
was state what about libraries
speaking about state previously you're
probably familiar with ngrick store
right
but ngrick stories again tightly coupled
to angular you cannot use it with
anything else which is kind of sad but
you can use standard redux with angular
redux bindings and leverage the whole
ecosystem of middlewares
that exists react angular you name it
also for writing efficient selectors and
a capsule eating your state structure
you can use we select for leveraging
efficient selectors again all of this is
encapsulated by engineering store but
it's tightly Gobbo to angular which is
which depends on your use case but we
are using react and angular and we
cannot allow to use this one thing so we
are using this kind of type of tools to
leverage and reuse what about handling
side effects again there is indirect
slash effects which uses this effects
type of thingy but we can use rejects
observable which is just a middleware
it's agnostic so I can use it with with
pure Redux and it uses rxjs under the
hood and what is that epic so here is
traditional one-way dataflow right I
have a component item is action action
goes to reducer with this theorem is new
state and component vendors so then
there is epic and after all reducers are
done the stream of actions flows to the
epic and epic hooks particular types of
actions and execute some side effect in
our case it's most of the time API call
to our server and when we get response
or reject or with with error we just
emit a new type of action
to a pipeline and again the action
traverses travels to all the reducers
and then we are again back to or one way
data flow with redux so epochs is just
actions in actions out-powered by Eric's
yes last type of libraries that we can
use this is kinda controversial okay you
can use Axios which is dollar HTTP
service taken from angularjs and
rewritten to be able to reuse with any
particulate any particular technology so
you can use excuse with you react or
angular and its promise based I don't
know about you but I don't really need
the power of observables when I'm using
redirects observable or ngx effect for
managing the state because that Eric's
power is back there so I'm using just
Axios for fetching the data or writing
interceptors and if you're using excuse
and promise base api's even your effects
or epics they'll be simpler so you don't
have to pipe you just do traditional
damn catch with promises so we are at
the end what did we learn today we
introduce some tombstones for existing
standards ship with angular and we
learned that we don't have to be afraid
and we can look outside of our
particular environment in our case
angular and learn from other ecosystems
even leverage those ecosystems for all
for all or benefit we introduce better
CLI defaults from libraries perspective
good VDX
with legs observable Axios for api calls
from the architecture reactive on the
data flow with reacts and from the
tooling prettier just for an interesting
story book for writing or catalogs and
components test cafe for reliable and
fast engine testing and that's it
I've also written blog post about this
in greater detail you can check it out
on my minion blog I prepared also
starter with all these tools and an
example app so you can really see that I
wasn't just talking but it really works
and last but not least I prepare a
custom schematics for CLI it's under my
NPM scope name margin is Co Hotel
schematics and you can put new app with
my schematics like this ingénue my app I
will use my custom collection of
schematics I tab so slowly
and if you'll create the standard
angular app with DOS better tools that
I'd showcase today so now if we check it
out
I will introduce more schematics like to
introduce Jess to existing code base
with refactoring because Jasmin uses
some different spies than just so this
is in pipeline after angular CLI 6 will
be released definitely take a closer
look at this if you're interested and in
the end as I said we don't have to fight
and hate on other communities or on
other technologies instead we can learn
and become profit with that said thanks
for invitin thank you very much for
attention</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>