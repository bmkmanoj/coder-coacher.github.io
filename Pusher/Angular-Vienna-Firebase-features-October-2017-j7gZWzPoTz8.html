<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Angular Vienna, Firebase features, October 2017 | Coder Coacher - Coaching Coders</title><meta content="Angular Vienna, Firebase features, October 2017 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Pusher/">Pusher</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Angular Vienna, Firebase features, October 2017</b></h2><h5 class="post__date">2018-01-24</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/j7gZWzPoTz8" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">okay so hi I'm very excited to be here
I'm Shamala although which and I'm going
to show you some witchcraft with
firebase oh I don't know I don't have
the time here I'm gonna have it it's set
of my okay fine
cool so we're gonna do some witch
crafting with firebase meaning that have
about half an hour right to show you
spells and magic with with angular and
firebase right
alright so let me get rid of this really
really weird wig and give you some
witchcraft right away yeah yeah so that
wasn't really mmm and going far bit
that's just keynote but we're going on
all right a little bit about myself so
I'm a front-end developer I'm a
consultant and trainer and I focus
mainly on angular and I really really
love it I love it so much that in my
free time I do a lot of angular I'm I'm
the founder of ng girls and we do
workshops for free workshops for women
and this Thursday we're going to have
one in Freiburg in Germany and then
we're going to have an angular connect
and we have all over the world even in
as far as Colombia Medine is so if you
want to help and join us and we need
mentors boys and girls so come talk to
me another thing that I'm doing in my
free time is I organize the angular
Knights meetup which is also about
working learning angular a after after
work at night right so witchcraft so at
night we as witches go and
and make spells for angular so instead
of like showing slides and showing you
the which book and everything we're just
going to do some live coding all right
all right so I've prepared here that was
oh no wait a minute recorded recording
stopped wait a minute
for some reason okay that's gonna be I
hope it works okay so what did I want to
say that we're going to connect this
very nice application to firebase of
course I'm going to open the dev tools
because whenever we develop an
application we're working with the dev
tools open right what's that slow
Network is detected oh no I hope it
works okay so we probably don't see a
lot okay and this application is going
to be deployed today now in half an hour
so you're going to show your tips for me
for Vienna I'm going to be here until
tomorrow afternoon so the more tips
you're gonna put here the crazier it's
going to be for me tomorrow all right
yeah okay
so let's see what we have here we can
sign in with Google so right now if
we're clicking it nothing happens only a
console log and you can share your
recommendations like nothing happens
just again console.log and you can also
edit your own recommendations your own
tips only your own tips but again
nothing happens at the moment it isn't
saved and so I opened a firebase project
for that and the first thing that we
need to do is to add firebase to
webapp okay so we have here this
configuration which gives us everything
that we need to connect our web our
application to firebase alright I
already copied it I will paste it in a
moment I hope it will work also one
thing that you need to do actually
before you get this configuration is
going to sign-in method and choose what
I'm sign-in method you want to have
so I enabled Google and we're going to
use that you can use you can use email
and password even phone of
authentication a Facebook Twitter github
and anonymous anonymous means that a
user can start using your application
without being signed in and they the
data will still be saved
and when this user decides to sign up
somehow then their data will be copied
to the new user that is created now
another smart thing that you have with
firebase is that if a user signs in with
several different methods like Google
Facebook email and password but it's
always with the same email then then if
I base recognizes but it's the same user
and we'll give them the same data but
you can also turn off this feature if
you want so you can have multiple
accounts for different signing methods
whoever's yeah yes so you can also use
cont accustomed providers using Google
Cloud functions connecting them it's
through there you can add this a little
bit more complicated but just a little
bit very easy
overall ok Google is like the easiest
way because I don't have to now go to
Google and add my application there it's
already firebase is part of Google I was
using firebase already just so I know ok
cool who's using angular Wow ok so I'm
in the right place just checking ok so
I'm going to environment
and here I'm just pasting this is the
environment a file and we have two
different files one for production and
one this is for development one for
production and you can add more
environments so I'll also add this too
to the production one so when we build
the application and deploy it it will
take the configuration from here but
good practice have several different a
firebase projects for each environment
okay because if you're developing you
don't want to mess with the production
data right so you can actually put here
something else okay and first thing that
we need to know oh I also wanted to show
you before I'm starting to connect
everything I wanted to show you what
happens when a user is signed in so if
if they're not signed in then you have
this a button sign-in with Google and if
they are then let's put here a user and
you will get something like that that
[Laughter]
okay cool so how do we do that so first
of all we're using here a not only
firebase but also angular fire which is
a library that helps us connect a
angular with firebase or the other way
around and there is an firebase SDK that
you can use for for all your
applications but that's the cool thing
in angular fire is that it uses
observables which we already have and a
like in angular with our XJS so it
leverages their strengths so we're gonna
use that also okay so to start working
with that we need to first import the
angular fire module
into our application module so angular
can you see this is it big enough okay
angularfire module and we init it with
our configuration so environment just
what the default environment firebase
config that's it we have we have now
connected a firebase to angular fire
into our application now another thing
that we're going to need now we're going
to start with the authentication so
let's add a angular fire and a fire
authentication module earth model and
now we can start working with that so in
the user component component we're
expecting a user but actually we can
also have with firebase a continuous
status of the user okay a real-time
status so if you're signing or signed
out so let's see how we do this in the
user service first of all now a lot of
tutorials and examples on the web will
show you how to do this directly in the
component which is great for just demo
for for showing you how to work with it
but it's not good practice so do this in
the service okay so just like I do now
so so you see that right now signing in
and signing out just the console logs so
we inject the Oh what do we need to do
before we inject the service into some
other service to provide it yeah thank
you okay so we provide here angular fire
off alright awesome
so private AF off only half an hour to
do lots of witchcraft
and what do you think I'm gonna make it
yeah
okay so angularfire also gives us
signing methods and sign out methods so
let's implement them so this F auth it's
okay we're signing in with a provider so
we're going to do a is where is my hot
thing okay I have my which book here
auth sign in with pop-up and then we
have to give it a provider so we do new
firebase so that's actually going
straight to firebase yes I want to
import firebase of not provided Google
Google Google auth provider yeah so I'm
creating a new instance of that and of
course you have the instances for all
the other providers and that's it now
this function returns a promise and you
can deal with it of course you can do
then and catch and whatever you want but
I'm not going to deal with it right now
and to sign out a if off look how great
webstorm is giving me that this awesome
and guess what sign out that's it that's
it
again promise okay so you can do return
and so on and now let's see we still
haven't connected the user we still
don't get the user data in the in our
component okay so angular fire has
really something really really great
called
earth state which is not which is which
is an observable and it like I said
before it gives us the status of the
user all the time ok so we're going to
actually pass it to our user observable
and the dollar sign here is a convention
for observables so that we know that we
have to subscribe to it and so on right
so now we have the user observable which
is public and we can use it in our
component so let's go back to our user
component now I can't just pass it as a
user now it's going to be a user
observable so let's first of all take
this a grab this again here ok so we
have the user and we're already
injecting the user service and we'll
just do this user will get it from the
user service just getting it user ok we
could have done it also like more
straightforward but it's like better to
separate these things
okay so observables what do we need to
get the data from observables yeah we
need to subscribe to it right but what
does angular give us okay you're awesome
you're really also ok so we're just
going to subscribe to it here in the ng
if so user observable a a sink and a
really cool trick that you have so that
you don't need to do this for every part
in the component that needs data from
the user observable or the user data
actually is if you if you're using ng if
then you can take the value and put it
as something else so as user okay so now
user will
all the data from the observable and we
can use it wherever we want in our
application for example in our user
avatar and user display name and so on
ok you want to see it in action alright
so recompiling and no yeah all right I'm
sign-in with the Google yeah so we have
we have my name here we have my avatar
that's the one of the one of my many
accounts avatar this is I don't know if
you can see it very well this is my cat
you so my dog before this is my cat and
what's great about
about this about a firebase and the user
status is that if now I just like
duplicate this this tab and maybe even
just take it away as another wait a
minute
let's rearrange them okay so they're
side by side there's one with without
the dev tools one with the dev tools
okay so different tabs so if I'm signing
out in one then I'm signed out also in
the other one if I'm signing in and this
is hell signing with Google works it
opens a new tab and then you have to
select one of your many accounts and
then you're signed in okay and this is
another account that I have and with the
same name no what can I do and you're
also signed in in the different tab Hey
look at that I have different hats here
yeah alright so let's go on with that we
have the user we can sign in we can sign
out now we need data right that's it
okay so let's close this because I need
my
webstorm clothes yep all right so we
have in the vienna tips component okay
so we have the input where you insert
your recommendations and it will submit
the tip and you have the list where you
view the recommendations now I want to
everybody to be able to see all the
recommendations all the tips but only
but you can edit only those that you
have written by yourself so we'll do
that with a little bit of server
functions so firebase cloud functions in
a firebase which is a really cool
features that really gives us DeeDee
missing a part of the server let's say a
platform and it was announced on March
so it's pretty new ok so right now I
just have like the tips here and submit
tip does console.log and edit so ok so
again we'll go to the service and
connect it to the database and again
we'll have an observable of all the list
of tips and we'll use the updating
methods and put methods of firebase so
let's go to the service here we are ok
so again to do that you inject the
service we first need to provide it here
so it's a different service angular fire
database ok we actually also need to
have the module here angular fire a
database module why do we need to put
this like why can't our base just come
or angular if I come with all these
things by default what do you say yeah
the bad news getting bitten let's write
that for tree shaking so ever you want
to use only authentication you don't
have to import
the code of the module of the database
right so you all only import whatever
you need okay so now we can inject it
here FDB angularfire
database okay
and what are we going to do we want to
get the tip list right
we actually I don't have it yet in the
in the database at all if you want to
see the database is has like nothing
okay let's do even get started we should
do get started before yeah good thing
that I checked that nothing nothing here
yeah just the you know basic Oh an able
to what no yeah I knew there should be
something okay that's what should be
here now we're gonna meet up now okay
okay so it's called Vienna meetup good
thing to know this tips list tip list
will be FDB list right yeah I'm getting
a reference to the list and it's called
where am I now
yeah Vienna no Vienna meetup right it
was Vienna Meetup okay cool
and let's also add like a child to it
so like tips okay um alright red because
we need to add it here okay yeah okay
angularfire yeah sure why not what
cannot fight whatever later later
okay now this is not enough to get the
data again this is well this is almost
in
what's going to be an observable is when
we do this so we take tip list or tips
list I'm not really I don't know how the
grammar works and we we can we have two
options here we can take like the value
of each one of the items on the list
like only the bare value or we can take
a snapshot which also holds more
information for example the key of each
item and we're going to need this key to
be able to to update the right item
later on okay so I'm going to do instead
of we have here valued value changes but
I'm going to use instead of that
snapshot changes of snap shot changes
okay so this is something new in in the
new version of angularfire so if you're
already using it then pay attention
that's in angularfire the the library is
called angularfire 2 and it's version 5
now ok ok so tips ok
so we can already connect it even though
we don't have any data there so let's
see our tip component ok so again we
don't need all these tips now we just
need an observable of tips and we need
to get it private what was it
Vienna tips service tips service Vienna
tips
tips service all right here we have it
on ng on in it this tips observer are
tips observable is going to get it from
there okay no oops tips and we're going
to use it of course here in the list
okay so again not just tips tips of
observable I think all right so I'm
already doing the repeat for loop on tip
so I don't have to change anything
inside so tip has title where do we see
this title here
okay I'm using another nice thing that
we have in ng if so you all know that if
the what directive no like what you
passed you the directive the condition
if the condition is true then it will
render this element or component and
what you can do is if the condition is
false then you can pass it a name of a
template that you that you've written
okay and that's here in come on that's
here in ng template you're using ng
template and that template will not be
rendered but you give it this name so
it's the same name but here you put a
hash tag of course and so if the
condition is false then what's rendered
is what's inside the template okay
isn't that cool okay so another thing
that we're using here is also the
question mark that's okay what you see
here actually is when you click on the
list item then it becomes
an input and but if you haven't clicked
on it if it's not in editing mode then
it's just the title just the tip that
title okay so we also have another ng-if
here and we're not sure that we even
have editing or if it's now so I don't
want it to check for key inside because
it will give me an error if we don't
have editing so we put the question mark
so this syntax is only only if you have
editing then grab the key and if you
don't have it then just ignore it it
works not only in ng if any binding and
any interpolation that you have here in
angular ok so a little bit about let's
see if it works okay recompiling I
should have let it compile before that
we're not supposed to see anything
because we don't have anything in the
list right and I haven't connected this
input to the list yet okay so let's do
it really really quickly
we already have the submit tip and the
update tip in the Edit here so let's do
this via native service like save or
submit tip like this okay and we get the
event target value okay we don't need
this okay submit tip let's go to the
service that's a writer of Asia
okay submit tip a title so the value
will be the tips title and what we do
now is just we have already the
reference to the tip list and we do like
just push oh I forgot to do something
though
wait a minute just say let's push right
yeah
title just care giving the title right
now what I forgot to do is the snapshot
changes gives us a lot of data and we
want to map it to get the right data
that we want okay so we get a tips list
and we want to do return tips map for
each tip on the list we return an object
of what we have in the tip is snapshot
snapshot yeah
value so that's the inner value that we
have which is right now just the title
and we want to add the key okay
so key will be the tip snapshot key do
we have it
yeah all right so we're supposed to get
it now when we turn that went and that
and we can submit tips okay let's see if
this works what what does it what Hey
yeah okay well how much time do I have
I don't have time okay so what's our
first rate for commendations angular
meetup in Vienna oh no oh no cannot read
property valve undefined okay
I'm mapping tips what's that only if
there's a tip snapshot oh sorry sorry
it's not snapshot it's payload that's my
sorry that's the thing okay sorry sorry
about that
yeah okay so I already submitted it so
we have angular meetup all right what
else do we have here Mozart okay what so
that's actually in here okay
so we have the key in the title now
let's add oh my god can I can I take a
few more minutes a out of the half hour
yeah okay five ten okay okay so we want
to submit a tip update a tip okay update
so this Vienna tip service update tip
and again we're sending it the value the
new value and the key okay because we
have it in the in the tip okay update it
so title and a key okay now again we
already have a reference to the tip list
but now we want the object a is that
right am I doing this right
no I'm gonna do it like the whole the
whole way okay we're going to reference
the object right from the start
if DB object that's right okay why is it
red object okay Vienna let's take this
from here okay and then we pass it the
key all right so we have a reference to
the item with this key and then what we
do is update is this update right we
update it with the new value okay just
making sure that it's right yeah title
okay that's it that's how easy it is
let's see if it works okay so I want to
update the angular Meetup
okay so it's not anger its angular vni
meetup right all right so it's updated
let's see
and we'll have a meet-up that's really
cool all right so what else do I have to
do
so update edit ah okay that's okay and
it is just changing into edit mode okay
so we've covered that all right so now
what do I have to do yes the update just
updates whatever I gave it to update
yeah so it's a patching if I'm only if
it had more than just the title then it
would just go to the title and update it
but if I if I want to replace the whole
object then I'm going to use a set I
think okay but right now we don't have
anything else but a title but we're
going to actually add some stuff okay so
what we're going to add to it we're
going to connect it to firebase so
firebase in it so I'm going to actually
put this whole a this whole project I'm
going to add here firebase configuration
so database hosting and even rules so
they just asked me for a bunch of
questions where I am are we going to
have the rules Oh
installing dependencies with NPM okay I
hope this works
okay and in the meantime let's see if I
have something to work with
okay database rules okay so I want
everybody to be able to read so I'm just
going to do here true and to write
actually I want oh I want my director to
be dist and don't know yes I never know
but it okay
just override it okay so what I want to
do with the rules I want to have a own
like I said to restrict only if it's
your tip that you can write it edit it
okay so what I'm going to do here okay
so we're going to have something like
that okay
Vienna tips tips how did I call it
tips Vienna meetup tips okay Vienna me
top I can open a whole object for that
tips tips let's open another object and
we'll say now we have a specific tip
okay but we don't know how it's called
so dollar tip will get read permission
true for everyone and right and that's
going to be a bit complicated okay only
if you're authenticated of oh not equals
now and off provider that I don't care
about the other provider and either data
exists that it doesn't exist because
it's new one or if it exists then a it's
user ID UID its value of the UID Val
equals to off UID I hope that's alright
okay I really hope that's alright so
what I'm doing here is checking whether
the tips you ID equals to the 1/2
strength to now edit it okay but we
don't have the user ID right so how do
we do that we have now the functions
here for firebase so we're going to add
a function that takes the whenever you
create a user ID then sorry a tip then
it will add your user ID here alright so
now I need the other page ok function
you know X well let's start with export
export a export export save tip you just
give a name for your function and it
will be triggered functions database ref
we're referencing whatever we want
okay so Vienna meetup it was right
slash tips /id
okay so this is the parameter tricky
news but we don't really need to use
this and then we say on right on
why does it okay when you write to it
when you get an event then what do you
do with this event if the event or if
it's something that was initiated by the
admin then return oh I always forget the
brackets in if a return a otherwise
return a function that we're going to
- right add you ad with the event okay
so function add you ID which gets an
event will be we're taking the data okay
the original value e data well okay and
then we're going to yell to add to it
the UID e of a variable what variable it
has the UID there and then we're going
to update ok this also returns a promise
you actually can do even console logs
here and see see it in the in the
firebase console and then you update
just like we updated and that just like
we updated before so it doesn't set the
whole valley well we do set the whole
value here but never mind okay exports
is that okay
it's supposed to be okay I hope okay all
right
hopefully it's gonna work really
hopefully so what we're going to do now
is well first of all I can check if it
still work no I didn't deployed so let's
just build and deploy the whole thing
and hope that it works alright Angie
what do I have what okay let's see if it
fits
first of all okay let's see if it builds
now this is gonna take a little bit of
time so
sorry for taking a bit more of your time
now yeah okay now firebase deploy
hopefully hopefully with the rules that
I wrote were are okay all I'm coding
without copy paste or is no using
something else the functions that uh
that I wrote are okay really really hope
that everything is gonna be okay
and then we'll get a URL that you can
actually go into and add tips and if
it's not going to work the URL URL will
be the same and we'll go to the break
and during the break fix it but I'm sure
it will be ok I'm really sure really
sure ok it's creating a function now and
yeah so so you can do the whole thing
from here you can also write your own
functions in in in another project know
this functions project can be a whole
project that you can even write with
typescript or whatever you want and just
have everything compile to index J s so
and then deploy it to firebase alright
so this is the URL okay it's Vienna -
Meetup
. firebase app comm sign in with it
already has my okay Vienna - meet up
that fire base app calm you have to sign
in with a Google sorry I'm I'm signing
in ok ok so share your tip for Vienna ok
so if I'm trying to now edit the I am
first so it will not edit it and it will
actually have
an arrow here showing that I don't have
permissions and like I said before
please reusing promises so please deal
with it do a catcherror stuff and you
know great it's a muttered ball that's a
really good one yeah okay so what kind
of a head did you get when you signed in
alright so hopefully I showed you how
much magic there is in a angola with
firebase and with angular fire and that
it's really really easy to connect your
application to firebase and it's really
easy to manage your server or server
list server a database and so on another
small tip that I have about firebase
there now how have in in beta they have
a new version of the database which will
be built with documents and collections
and better querying so there are reduced
cases most of the use cases you'd like
to try this out but the old database the
current one that I was using is really
really great for when you're young when
you want to really have real time with
several users like Google Docs or
something like that that you can see all
the users collaborate together so I'm
gonna follow all your suggestions where
is my last slide
ah and oh I'm clicking on the wrong
thing okay ha okay my email my Twitter
you can write to me I ask questions
invite me to meetups and so on so again
sorry for the time thank you very much
for having me I enjoyed it a lot
thank you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>