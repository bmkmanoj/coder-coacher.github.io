<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Publishing - Pusher Realtime Web Workshop | Coder Coacher - Coaching Coders</title><meta content="Publishing - Pusher Realtime Web Workshop - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Pusher/">Pusher</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Publishing - Pusher Realtime Web Workshop</b></h2><h5 class="post__date">2012-10-25</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Ex-0AlfeLjA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hi there this is Phil megator I'm a
developer evangelist at butcher this is
the third video in a short series
covering some basic usage of pusher in
this video we're going to cover
publishing information from the server
we're gonna use PHP because it's very
accessible to a lot of people we do have
libraries available in a number of other
technologies we're going to serve a
library then the docs here's a whole
bunch of libraries there that you can
use from anything Maji ultimately we're
gonna call our rest endpoint so you can
access that from any technology to make
nice to be requesting just Prabhat
information about pusher again we're a
hosted service we handle scaling and
real-time infrastructure as a service
for you our focus is to make it as quick
and easy as possible to add real time
interactive functionality to your web
apps that could be live content it could
be live blogging and could be activity
streams or interactive experiences like
chat or collaborative apps or html5
gaming or second-screen experiences
again no configuring for you simply use
our service to drive this motion idea to
your web or mobile app for this video
we're going to be using the real time
web workshop which is available on
github
Keep Calm slash pusher slash real-time
web workshop with hyphens okay so let's
look at the code where we are right now
we'll jump into the start of okay so
here's the JavaScript library we're
adding some logging so we know what's
going on within the JavaScript library
we're connecting to pusher we're binding
to state change events we're updating
the UI to show a traffic light indicator
whether or not the connected
we're subscribing to a messages channel
by then binding to new message events on
that channel and then when we get a new
message we we add it we create a list
item we have the text property from the
event data we hide it we append it to
week prepend it we do now anyway we
prevent it to a messages unordered list
and then we slide it down so let's
quickly see that up and running I'll
reload this ok we're connected
let's jump into the event creator
and every sending those messages and
that's a new message you know there's a
an event with a text property and if we
send that you see instantly pairs there
and the same again so that's the that's
where we are all right now so what we
obviously want to do is we want people
to publish that information from the app
itself so in order did that we obviously
need some UI so we're gonna gonna have
that buff and I'm gonna cheat a little
bit I'm gonna just take this code and
I'm gonna end it here
so we've got a label which says message
is actually hide but it's it's more of
an accessibility thing and we then got a
text area with the user message ID and a
button so we can jump across and they
can reload that and that's what it look
like looks like and we can see what it
looks like in normal desktop app there
we go so it doesn't look too fancy when
it's nice and functional so obviously it
doesn't do anything at the moment rather
than reload the page when you click it
probably jQuery handles that click and
does something clever okay so what we
need to do is want to add some
functionality to handle the click to
take the contents of this message out
and then to send it down to the server
so that server can authenticate
potentially or verify contents that
message and sanitize it before then
publishing it to pusher to distribute to
other connected clients again I'm gonna
just cheat and I'm gonna take some code
there's what we're doing this with just
making an AJAX call down to the server
so place this in here and then I'll walk
through it okay so what we're doing is
one jQuery is ready we're gonna bind to
the send button and handle click events
so there's our send button there in
handle click we're gonna take the
contents of the user message element
which is a text area we're going to trim
it and make sure that there is actually
some content and then we're gonna make
an AJAX call to new message PHP sending
the message that we've extracted and if
that agents call the successful will
then clear the text area so what we can
do is if we jump in here I reload the
page to get them your content and we
look at the network tab if I then click
send nothing happens because there's no
content if I put in some content in the
text area click send we can see there's
a there's a call that's being made now
that's great that's fine and you'll see
the comdata are sending text off hello
and the response is 500 server error
because we don't support operation okay
so what we do need is a new message dot
PHP file ok so we've got a new message
file we also need the push of PHP
library so if we we can ask access by
going to the server libraries within
push your Doc's click on PHP generic go
here within Lib you look at the push PHP
library roll content and I can copy that
and I can just create a new file then
here I'll paste that save it as pusher
HP and in here we want to include it we
also need our application credentials so
we're going to trigger some information
from the server using our restful api in
order to do that you need a bunch of
information so here we've got an
application ID an application key and
application secret and when you publish
from the server the contents of the
information that you send is signed
using the secret key now the only only
places that know about the secret key
are your application server and pusher
so that when we receive the information
that's been signed using your secret key
we can then look at the information and
look at the this signed authentication
signature we can sign the raw
information using the secret key that we
have and make sure that the to
authentication cygnus signatures match
so this makes sure that the information
is coming from you so we take this
information here
so what I'm going to do is I'm going to
find an app II know that was enough idea
wasn't necessary
and definitely not super now this should
probably be in conflict I shouldn't be
exposing this to you but I can delete
this application afterwards okay now the
next thing we need to do is create a
pusher object and passing on a secret ID
and then all we need to do is trigger
information so for now we're just going
to hard code this so we know it's
messages we know it's a new message and
we know there's a payload we can use an
associative alright text and serve as
the value okay so what we want to do now
is test that that functionality is
working so we can do that
you'll also notice I I've changed URL
here this is so that the server
understands PHP I was using a Python
back-end previously so I can jump over
here and I change this URL to call the
new message to actually call this file
new message dot PHP
you'll see over here we get an API
message call I'm within their this text
hello from the server if i refresh this
page again practice plan up on it but
yeah I get another API my suitable first
page again I get another write a kind
message pause so we can see that that
that is actually triggering the
information so the only thing we need to
do now is extract the information from
the call that we make the post call
we're making to the server we want to
verify that we're happy with that data
so again the server is your authority
you know you need to be checking to make
sure you're happy with that I'm going to
be very naughty and just say I'm happy
that obviously in there you probably
check if you just signed in you check
whether or not you have of the contents
of the message before you actually allow
it and then I can take this text and
actually trigger that so if we jump back
to the the app and if I create a new
instance in the browser window instance
yeah since we already posting there yeah
hello from left okay great we're seeing
that delivered to both and we can also
try the the
so far out
so let's connect it all right there we
go - offensive so that's showing we've
created a really simple status message
update it could be a chat it could be as
I say it could be and what are you doing
now could be anything else so we've
shown jump above the code we've shown
some Ajax functionality you know we've
handled the click event of the send
button we've got the message we've
posted information down to new message
dot PHP we've actually triggered
information in just a few lines of code
publishing through pusher and
distributing instantly to any other
connected devices so that's publishing
information from the server</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>