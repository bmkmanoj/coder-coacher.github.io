<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>The Fundamentals of Flow in 10-ish Minutes | Coder Coacher - Coaching Coders</title><meta content="The Fundamentals of Flow in 10-ish Minutes - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Pusher/">Pusher</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>The Fundamentals of Flow in 10-ish Minutes</b></h2><h5 class="post__date">2016-11-22</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/xWMuAUbXcdQ" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello everybody my name is Alex Booker
and I'm a developer advocate - pusher
pusher for those of you don't know it's
a hosted platform that makes it really
easy to build real-time features into
your application I could probably talk
for hours about push if I'm not here
today to talk about pusher I'm here to
talk about never technology I'm excited
about called flow type now if you look
into the flow type at all one of the
first things you'll read is that flow is
a static type checker for JavaScript and
once this is totally true in my mind and
the way I like to explain flow is as a
Productivity tool for JavaScript
developers like you and I you see flow
is a tool view download locally and run
on your new or existing code bases it
develops a wealth of information about
your code using static analysis and
detects areas or potential areas before
you run your code now I think one of the
best ways to get started with flow in to
get to speed is to look at a little bits
of code using flow so why have there is
a function called area that can
calculate the area of a circle given its
radius and here I'm going to call it
with the number 10 and bear in mind
we're passing a string here not an
actual number
now you might expect but in this case
JavaScript will convert the type to a
number automatically however and that is
true by the way however in this
particular case and being a little bit
tricky because that's not a zero it's a
capital letter O and therefore when you
run this code it's probably not going to
behave how you expect and the reason why
I'm tricky like this is because it's
essentially showing how implicit type
conversions usually leads to bugs now
usually if you run this code you get an
error runtime depending on how you use
the results I think it returns none
actually birds if you install flow and
you very simply add a header comment to
your code file where you specify that
you want flow to process it you'll get
an error writing your editor that tells
you that the type you're providing is
incompatible of the area function and
the way float knows this so it was only
simply adding that flow header comment
is because it analyzes the coordinate
and now now has analyzes it and builds a
context about it so in this case flow
knows that math or pi is a constant and
but it's a number and but it makes no
sense to multiply a string with a number
although some people might say it
doesn't make sense in JavaScript it's
generally not advised what you do so
let's look at another example so there
is a function called length that simply
returns the length of the given value
I'm going to be a bit tricky again and
just past no obviously this code is
going to blow up because you can't
access a property or no but why should
you wait until runtime to see this area
when with flow you can see that error
rights new editor
rights away so in this case as well if I
just got back one slide you can see the
error and you can fix it very quickly
the reason why I put this slide is
because I want to show the flow and it
essentially enables you to be more
productive by simply providing you the
area and you editor you can then very
quickly go in and fix it in this case I
fixed it by checking for nullity before
accessing the value but of course there
are other kinds of fixes now these
examples are completely contrived you
could probably figure out that they're
going to blow up just by looking at the
code however I'm using contrived
examples just to illustrate flow very
simply I'm sure you can all relate your
experience as JavaScript developers
where you've had some kind of bug but
it's stand from implicit type
conversions or nullity so in the
previous example right past null it was
just to be clear you can imagine with
this null value came from a function
call maybe in a third-party module or
chord event your own codebase maybe ten
file esteem so in big code bases flow
really proves it's worth it becomes more
valuable as it helps you find bugs
easier and avoid writing them all in the
first place right so flow gets more
interesting yet when you try and export
a module or a function so in this case I
have the same Len function and I'm
exporting it at the bottom there and in
JavaScript in general when you export
something you're essentially making it
public now when you export something
using flow you have to explicitly define
the types of the arguments as well as
the return type and using flow you can
do that very simply using a colon and
then the type so what we're specifying
here is with the Len function will only
take a string and we're also specifying
which it returns a number now when you
import that file or that function in
your own projects
if you pass anything but astraying flow
will complain and if you try and return
anything but a number flow will also
complain providing this additional
information can also power auto
completion and other good tooling so the
thing is people tend to like JavaScript
because it's very nimble and therefore
great for prototyping projects and in
the short term adding type annotations
actually slows you down in my opinion
however in the long term it powers
really powerful also completion in your
favorite editors because whilst flow has
a CLI there are also extensions for all
of your favorite editor ranging from
Ben's Adam what's more when use type
annotations it makes your code more
readable because you're being very clear
about your intent someone scaping for
your code file can look at the name as
well as the type annotations and very
quickly figure out what the function
takes what it returns and what its main
purposes you can also use flow type
annotations to generate documentation in
some cases it won't be the best
documentation but it's great for API
dogs but you can go in
filling additional context later and in
my experience with types and flow in
general is that your code is more likely
to work they compile so if your code has
no flow areas it's not guaranteed to run
successfully there are still runtime
errors of course but it's more likely
for your code will work so what about
third-party modules like Express because
when you're writing this code in your
own projects it's easy to add type
annotations to everything but you have
no control of the third-party modules if
you look at the Express source code
there's no notion of flow annotations
let alone flow so how is it the flow can
for example provide auto completion for
Express or insect areas when you provide
invalid values well despite this being
my first talk I'm going to attempt some
live coding you will see how that goes
if you want to use flow in your
applications the first thing you
probably want to do is install the flow
binary which you can do using your
favorite package manager recently
Facebook released a new package manager
called yarn which you might've seen the
previous speaker using it's very very
similar so if you seem using yarn it's
essentially the same as using NPM so if
I want to install flow globally I can
type your and add and then flow bin and
what this is going to do very simply is
it's going to enable me to access flow
from my command line so I pump up funds
up a little bit as well for you guys now
that will enable me to run flow in my
project it also allows me to run flow in
nodes which very simply creates a dot
flow config file that's all it does and
if you look at the contents of flow
config it's essentially empty however
it's important to note that in order to
use flow based op flow config file has
to exist now what I kind of want to do
just to illustrate flow in action is I
want to drop in to add some and creates
a new file
I'll call this gate indexed ojs and I'll
zoom in quite a bit as well and say I'm
building an expressly s server I might
come here and I'll write constic sprats
equals require Express now in this
particular case I haven't yet installed
Express abisco is erroneous files to run
it I will certainly get a runtime error
if I simply add the flow header comment
now you can see the flow is kicked in
within my editor is detected the Express
has not been installed so in addition
you and me earlier saying the flow is
not just about types it's just generally
about productivity it can detect other
kinds of common errors as well which you
might find if you for example installer
and move module vist comes in really
really handy so to fix the error and by
the way you can also run flow from the
command line it just so happens that my
editor plugin is kicking in because it's
generally better to see those errors in
your editor I can run yard Express it's
just the same as writing NPM install
Express and now
flow again the era is no longer there
now the thing is right if I and the era
does still appear in the answer until I
save the file so there is no longer an
error now say I move along and I for
example create the Express application I
want to create a routes handler for
particular routes and just say I'm going
to be notes and they put way too many
T's there clearly that member doesn't
exist it's not valid JavaScript and yet
flow isn't complaining that is simply
because flow does not yet have enough
information about Express to tell us
what members are available and what
members are not and that's where these
definition files come in really really
handy so essentially what the community
do is when they find an open source
library like Express that is lacking
types they create these separate
definition files that don't contain any
application logic they just describe the
public interface of the npm module and
so there is one for express and by the
way what the community tends to do is
contribute all these to a centralized
repository called flow type and then
there is a tool built around float slab
that makes them really easy to install I
need to install flow type first Ethos
invincibly on global ID flow type which
is again is the same as winning npm
install' floats I should have just used
NPM right but Yohn supports offline mode
so if the internet did give out I could
have utilized yarn for that reason given
look into yarn you might want to is
quite poor by the way in any case in
addition to installing float saved you
also need to install flow bin locally as
a dab dependency rather yarn add flow
bin as a dab dependency this is so the
flow type can check what version of flow
you're using locally for obvious reasons
so now what I can do is I can write yarn
or other flow type installed so Barry
might have just installed flow type I
can print flow type install and what
this will do is it will look at your
local packages and it will try and pull
in definition files for them so I sold
flow been locally so it's brewing down
that definition file even though I don't
need it I'm also using Express for which
is both lib definitions by outbound for
so now having done that if I save the
file in autumn the errors should kick in
what's more if I run the code in flow
the area kicks in because now this
definition file exists it's possible for
flow to look at what members are
available get is not available so I
could go in there now and fix life I
want to but things get a little more
powerful yet because say for example I
want to add in low - I can just write
yarn at low - and then I simply write
flow type and store it's a really nice
workflow whereby you bring down your npm
modules and then the types it's not
inconceivable that you could set up some
kind of hope to do this automatically in
fact I would encourage it so I could
come here and I could say Const and the
score equals with quite a low - and
what's really nice is that when I bring
in low - and I type underscore mint dots
you can see I've got a list of all of
the possible functions here which is
great for API discoverability despite I
think George laughing if nobody here
using Darnay I come from a dotnet
background so I really appreciate types
and one of my favorite things about
languages like Dante and Java is the
ability to discover an API within your
editor and now I have that back in flow
which is awesome so for example if I
want to call the main function which is
you probably can infer returns the
minimum value in array I can pass an
array and this will return the minimum
value in the array now the reason why I
do this is because there's something
about flow that kind of blows my mind I
find to be so powerful which is that if
I type this variable to be a number it's
going to work right because men is
obviously going to return number if you
provide an array of numbers flow type or
rather Men is going to return a number
because that's all they can return yeah
if I pass an array of strings yeah it's
a number inside of a string it doesn't
matter flows immediately going to kick
in and complain bay cannot take the
value but many returns and store it as a
number because it's clearly going to be
a string the way the flow kind of
analyzes your code builds up this
context and dynamically provides new
areas without you having to really
change much about your code in my
opinion is very powerful and whilst I
previously touched on the fact that with
flow type and types and generalize you
have to add these annotations it becomes
a bit more cumbersome than simply
writing JavaScript dynamically it's
actually possible for flow to infer the
type of an argument based on its
right-hand side or the right-hand side
of the assignment I should say so in
this case fight type result invent dots
you can see I get a bunch of
auto-completion options the members on
these string type because results
whether we specified it explicitly or
not is considered by flow to be a string
if I then change this to for example
again return a number simply through
virtue of passing in an array of numbers
and I type result dot it's going to give
us also completion based not being a
number we didn't have to come here and
save it as a number but flow has managed
to figure out the one last thing I want
to mention about flow is that for
example if you look at this code is
completely valid flow is not complaining
if I drop into the terminal area and
flow there are no errors however if we
try and run this code inside of node is
going to error out which is ironic
because flow is meant to prevent runtime
error
but the trouble here is that whilst Flo
understands this syntax oh you have a
colon and when the type of annoyed grunt
sigh and the v8 engine simply does not
understand this because it's not part of
the JavaScript spec there are a couple
of ways around this the first of which
is that you could surround the type on
rotation in the comments now as far as
flow is concerned it recognizes that to
be a type still and will therefore give
you type errors depending on the type
that you specify however when you burn
your code inside of node or any other
environment for that matter it's going
to interpret it like a comment so it's
going to run fine however this is a
little bit icky what's more I should
mention that I'm being incredibly
superficial in this talk my goal is to
get people excited about floats I plan
to show what they can do I don't know a
huge amount about it what's more I'm not
touching on many of the advanced
features which means that there are some
more advanced features I'm not showing
you here that simply would not work with
comments so the other solution which I'm
going to drop into my slides for because
it'd be a bit cumbersome to demo live is
that you can take your annotated flow
code you can pass that in to Babel which
for those of you don't know is a
transformation tool for JavaScript it
takes one input and outputs in a
different format you input that original
flow code into Babel with a special
plug-in designed to strip the types from
flow but after running your code through
babel you get the sort of vanilla
JavaScript output but you can then feed
into nodejs or any runtime and that will
work just fine
that's been my short introduction to
float slide thank you very much for your
time
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>