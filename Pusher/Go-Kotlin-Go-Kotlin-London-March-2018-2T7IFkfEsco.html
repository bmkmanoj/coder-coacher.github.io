<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Go, Kotlin, Go! - Kotlin London - March 2018 | Coder Coacher - Coaching Coders</title><meta content="Go, Kotlin, Go! - Kotlin London - March 2018 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Pusher/">Pusher</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Go, Kotlin, Go! - Kotlin London - March 2018</b></h2><h5 class="post__date">2018-04-09</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/2T7IFkfEsco" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">I will present a some worker that I did
on courtroom as I said I actually heard
about cutting the first time three years
ago but I just started work in a world
on cotton basically end of the last year
and so let's let's talk about the goal I
don't know how many of you have had the
game of go okay so on and so this talk
will be my talk talk about how to do a
computer program play go and okay this
has some information if you want to know
and in the innocence well let's talk
about go became very famous suddenly I
mean on the general public last year
because it was at the last game where
the computer was not able to beat the
human and it was predicted that was you
will take at least another 20 years to
computer to beat a human but the last
year Google with the deep learning
managed to beat the world world champion
and this was a quite big news that at
the beginning nobody was really ready to
accept that and you may wonder why since
chess are basically computer orbiting
the world chess champion since so many
years but row is completely different
and this is that the world the champion
the go world champion that when you
realized that being beaten and this is
how they go keep me the debord
go ban is called the smallest looks like
in a new play and so just a very quick
introduction so Google dis made this
product with this software
alphago and alphago was the first time
basically it was using deep learning to
develop a strategy on on go and then
they apply us in several other games and
you can see krzyston is the strongest
commercial go software and the mahdis in
this area the bit above 3000 is the
level of the go world champion this
number has a modest a kind of rating is
time and then go did I mean Google did
the first version that play with a
strong professional player but not
exceptional and then he again with the
lee which was like number three or four
of the world and then he wanted for the
for the top and and then on top of that
they did another version alphago see how
that was still stronger than the
previous one and it was also interesting
because the old version of alphago were
basically learning the deep learning
path on played I mean using all the
human played before but I forgot you
know we started from scratch so
basically they trained at the metal
itself but we took in another bit about
the planning at the end of the talk now
we'll go a bit more technical on the
details and why go is such a good game
and maybe I play go not where I'm not
strong at all but is a few years that
apply go so just a very quick
introduction the rules of the go I mean
compiled with any other game really
really simple you have the board someone
other white stones and the other guy
has the black stones each Turner you put
the stones on the board and that's it
and when you have your stone completely
surrounded by the other color of stones
the stones got to remove and okay now
you you know the who's of God okay there
is another whose you cannot really have
you cannot play the same position that
before so there are some cases where
basically you eat one stone and then the
other can eat the back of the stone and
go back to the previous position that is
forbidden so you cannot do that but
apart from that I mean these tools there
are no other rules but the implication
are incredible and so this is the first
just to give you so basically if we have
a disposition and someone put the black
stone here the black stone a kill all
the white stones but if we have a
disposition
now this position you cannot put the
black the white stone here because it
will be automatically dead and there you
cannot even put it here but for the same
reason so any shape with that they are
called a technically I any shaper with
the two eyes is a unkillable two or more
than two eyes so it's alive
it's called any shape that has only one
eye is scalable and sometimes they have
those are called false highs like this
one because it seems like an eye but if
a white place on CMB then you can place
on a and the kill we will kill this tree
so this will be only one eye and
Achilles or the other one so all the
strategy of God is a to manage to have a
group with two or more eyes
and this but is not actually whole is
something that the merger from their
holes and just for your reference this I
mean maybe you want to see later but a
bit of program that did they go past the
first one is a client a so it has no
logic but you can use it to play with
other guys or a play against an engine
patchy is the strongest open source game
Lillith dijah is the new one which is
basically based on deep learning but is
open source so it's kind of a he doing
what Google did and I is really not like
I think at the beginning of this year
was still weaker than party but probably
it will be stronger in the future and
the core system is a commercial program
in the district West and also consistent
now is switching to deep learning and we
tried to explain why and instead the new
go it was at the old program so the only
actually there was something that I
didn't tell you yet in the go basically
programmed aha the older generation
which is a new go that is based on set
of rules more less like the chess player
then all the others like patchy or
resistance are using a strategy which is
called Monte Carlo tree search and we
will see later some code about that and
that was that the current ability nature
until Google came and now there is also
the deep learning strategy but the deep
learning is something that goes on top
of Monte Carlo tree search so it's not
that now there is a dis Bukka in a map
from Manning that basically explained is
quite a nice book
how to do a kind of alphago yourself and
I when I see you there was all this
example in Python and I thought well
come on Python we can do better we can
do cotton so what they did basically is
taking the code of this book translated
in Cortland that was version one and
then improving on the cotton part and
this is a one I think quite interesting
point so left is Python right is cotton
and is almost identical it is quite
impressive
I mean it's not some trivial code that
the code is one of the most complicated
piece of code and he has a lot of ifs
and it's really really and I mean so far
I was considering Python the easiest and
cleanest computer language but I think
Khatri now is still better because it's
a source types so you can really help
you with with Python sometimes really
difficult to understand which type is
expected or something like that and just
to give you an idea this is the
algorithm when you place a stone so
basically well first there are some
guards that we are in the grid and that
the point is actually free because
otherwise of course you cannot place a
stone then basically it creates some
sector that we wanted to know understand
that we put which are the stones of a
same color on the opposite color and the
liberties the liberties the basically
the free place around when when you have
a shaping go basically each on the
border there could be another stones or
can be empty the empty are called
liberties because one year you got an
ollie but is basically your
you died usually so basically for each
neighbor point assuming okay this is a
bit older version of code and now it's
bit more because this is when I did that
the combustion then if you look at the
coding get now it's a bit more not
complicated but as a more optimization
aside basically it check the color and
they put in one of the three set
liberties same color opposite color then
equate a ghost ringa basically I will
look at the ghost wing is a set of
stones of God that are on the same
basically they are touching each other
not in diagonal but directly and then if
the stone is touching at the same color
stones of the same color basically happy
to merge the string in keeping one or if
you are put in stone with three strings
almost touching basically you have to
merge three strings and then once you do
this you have a to remove the liberties
to the other strings that around because
now you are putting so that is not a
liberty anymore and if some of the
opposite color has no liberties left
that means that you completely
surrounded the a string and then you can
put those toes away so this is one of
the most complicated piece of code and
it's raining pressure is very linear and
it's Python and cotton are really really
similar okay a bit of a lesson learned
so far about the types the the question
mark types sometimes at least for me at
the beginning of Sabae cuz I had some
experience with groovy well using the
question mark is not such a good idea it
was a bit scary to use of the question
mark in
but then a completely change idea I
think a question mark is really I mean
nullable types are really good things so
far the types are really new labor I
mean if there is a reason why the the
response can be Nullah I mean a domain
reason that's completely fine that's
great if there is no reason the only
reason that you put the question mark is
because you have a lazy initialization
stuff like that that's not good but
instead the double exclamation mark is
very bad so you I think know or maybe
very few in some case because every time
you put a double exclamation mark you
are saying okay this topic it can be
nullable but not here
and why not here that means either there
is a some instruction that is missing
that you wanted to remove all there is a
kind of not so good coding de because
actually it can be not in that point and
you can have a problem but we don't want
to have a null pointer exception so
really we should avoid the double
question mark immutably
immutability is very nice is fantastic
but there are also some performance
issue so if you are in the very very I
performance called maybe you wanted to
verify because sometimes is help at the
performance sometimes is not so it's
something we can maybe look at some code
algebraic data types which are the
shield class where you have a several
instance are great great things and that
they can really help about performance
and simplify the code and the premature
optimization is the root over area so
you have to think I mean it's very good
to optimize at the algorithm but before
20 automates the code you really have a
to measure for example at the beginning
I try to put some in lines around but in
in lime sub absolutely zero in
back down performers unless they have
some a specific sample like lambda
parameter and stuff aware the inline
sectorally help you or it verified types
but otherwise in lines have absolutely
no impact on performance ok back ok
maybe this life's work I tell you before
anyway these are the explanation how to
capture so if you are going let's say if
you are in the if you have the black one
and you put a stone in well is called a
you can you can eat the white if you are
white I put the dust on here you can eat
the black so it's there is a lot of like
a problem and yeah these are a bit of
definition each one is a stone a set of
stones is called a string and the
liberties at the end so for example this
black block has truly batiste this was a
lotta so you don't even have to call
Conte this has only to this altitude and
a lot of strategies based on the number
of liberties and then there is a group
for the paul the black stones here will
do a group which is more very important
when you study go I mean as human but
for the computer there is no equivalent
is very very hard to define what is a
copper form on the computer point of
view so we just avoid we just talk about
strings and strings are touching
basically Cooper connected the minato
touching each other now a strange
problem with go is when to decide who
win because I mean on chess the laughter
one win is very easy
instead the English absolutely not easy
to understand who win I mean for
human player what do they do basically
the counter D territory that you are
surrounding so for example if this was a
play the black one and we have a da
parte de statue in the sea and also the
this tougher of those D white they are
actually dead because from this position
there is no way that white can save
those stones I don't know if it because
basically whatever died white can do
here if a black put one here and then
one here die will kill two and then
black put another why kill and then
black all of them because it's not that
the two eyes instead these are two eyes
and this is alive but when you have a
player human player basically they can
decide this is life this is not alive if
there is a some difference of opinion
you can skip keep playing until it's
clear but it's very very hard to do an
argument to be able to this to do this
so what computer does is a keep plane
over and over again I mean keep playing
play until all the left place only one
side I mean one single empty space
because then is easy because you never
play where you have an empty space of
your stones I mean black I cannot if the
X is black black will never play here
and white cannot play here because it
will be suicide
there is no waited and so when there is
no place that you can play you just quit
then that computer can just calculator
and calculate adjust the number of
stones and the point that are so random
stones
so but this 20 because yeah you have it
to keep a plane much more than a human
will do so I will do very quickly and so
alphago is the black and the white is
the human and this is how a professional
game and there is a lot of strategy
involved and basically the strategy BISM
a lesson that is much easier to surround
the territory on the corners so firstly
they play the corners and then they
played the lateral area and finally the
center but on the other side if someone
get for example here black pitch taking
basically the territory here but the
white is getting the territorial center
so there is always a bit of a giver
taking baby
of course I don't even pretend to
understand exactly I mean there is a lot
of but it's very cool at this point I
mean for even for a human player that is
not professional it's very hard at this
point to understand who is a head but
the in this pointedly what the champion
basically resigned because it was a
immediately behind maybe something that
for example this those three stones are
actually dead because you can see that
there is no way that they can format
your eyes so they are already counted as
white and this is that alive because
here white as enough space to do two
eyes so this is a lot of stuff that a
stronger player do automatically not
even think about and in this version for
distance are actually connected because
of these shapes I mean if a white play
here black play here so he can connect
us so there is a lot of
stuff going on and so but this is that
the profession I mean professionally the
full board when you play with with
someone else' basically you can okay I
don't know are you bit interested on the
stuff oh let's see the code just just
another bit basically this is one of its
quality suji's this kind of a strange
combination basically here the black
stones seems completely alive because
you think okay this had the white the
white of only one eye the black here and
there are not far from here so what is
in a bad situation but actually these
stones can be there is a a sequence
basically where white puta distancia and
then black basically wanted to eat this
one he cannot place here because of the
white white it destroys of black plays
yeah then white extend at this point
black I cannot put here because
otherwise you will be eaten so black
boot here and white put here and put at
the top and then black it doesn't
realize that there is a trap so it the
white white play again black it again
and now black white this at this point
that these three are on parent so black
habit to put here and black does hit
this one and basically now black is
completely dead whatever it does
basically white can play here black can
do idea it's completed
this is a huh but basically you you
develop your strategy it's a lot and the
roots are so easy but just for the
beginners basically what you want is to
play on something seem simpler and you
play online the full board is 19 by 19
instead the you play with a small one
nine by nine it's easier and they'd be
much much shorter so just that to show
you basically this is my software so
this is a regulator one move for ten
seconds so basically one black here the
white will be the software and with one
move for one ten second I can always
beat em beat it quite regularly but with
the one move away twenty thirty second
it it bit me so it's kind of I got a
polygon that is stronger than me that's
already and so basically this is smaller
so it looks like it's not a great move
but it's not completely random it's a
and if I give him a like thirty seconds
from over they they move started to be
quite good and okay we don't have time
but it's quite easy okay let's do this
how algorithmic to play games works the
easiest is at the minimum so it's
basically a take the current situation
we do some evaluation who is ahead well
not at the beginning at the beginning
there is no evaluation so it take all
the possible moves and then it take the
possible move of possible moves
create a tree over all the moves then at
the end it valuate the moves and then it
choose according to the two who is the
player so here we'll take the lowest one
because of course is your opponent so
we'll choose the best for him and then
he took at the IIST of the possibility
of this level and then you took at the
lowest so each level you took I ate at
the highest on the lowest score and at
the end of you you have because you
assumed that your opponent is playing
the best for himself and you're the best
hope for yourself and this is the the
first possible algorithm and there is a
problem that you have to expand all the
moves and enjoyable but even tested out
too many moves so possible I mean and
the best
a better solution is I have trying to
look at the moves at the better moves
first and if you already have a move
that is better you basically pull that
way that is so basically if you already
established that there is a move it can
kill you
it's pointless to look at all the
possible responds because you already
know that he has a better move than this
so in this way you can cut a lot of
moves in the evaluation but this is
still not enough effort go and basically
the go program is this Monte Carlo tree
search algorithm because the problem
with go is that at some point you wanted
to evaluate and for example in chess or
in other games it's quite easy to
evaluate I mean you have a summary stick
so you can counter the number of pieces
and stuff like that but Ingo is
absolutely not easy especially I mean
not even professional can say at the
beginning who is ahead so what the
program is doing this doing some roll
out so a completely random game
so it just put in a piecing in the
handle place only legal moves of course
and the idea is that the from a given
configuration playing on DOMA
statistically the best position will win
I mean the player with the best position
so if you do ten times it doesn't really
matter but if you do ten thousand or one
hundred times call out you you
understand who is actually winning that
position so one and this is how the
basically you take you select the mover
you try to select the move on optimizing
and then you do evaluation and then you
have to balance between discovering new
moves or get the or getting better
evaluation for the most that kind of
winning because maybe they are just
winning
it seems they win but just because of
statistical fluke so you have a two
handling on again and so when we you've
write a software to play go the most
important part is how fast they can
valuated is allowed and this is my
laptop so nothing particularly fancy and
the the first line was basically when I
just take at the Python code and copy
paste it and post laitanan country it
was a in let's just look at the first
oil just to the second just one column
the first column means on the nine by
nine the second column 19 by 19 the in
timing millisecond to do a single hole
out and you have to think that you need
at least 10,000 allowed to make
something what and the so the beginning
was the taking 10 millisecond on on the
small border so that will be like 100
second to have a I mean more than one
minute just to have a decent play and
then basically I keep improving
improving proving and the de Quinta's
the last situation is basically 20 times
faster or less model and well most of a
lesson learner on this performance stuff
is that what is really important is the
algorithm so trying to avoid the for
example using immutable ago strings
instead of immutable ones really help a
lot of performance using a neighbor of
map so instead of just have a mapper
with everything that it can be pre
calculated in this case it was all the
neighbor from each point instead of a
calculator with timer you put in a map
so it really hurts to understand this
position is high okay improve the
algorithm and this was a quite so
Philippe at the beginning every the
handlebars are the one that do this one
was calculating all the possible moves
valid moves and then just pick up one
handle instead now basically it pick up
a random Danny check if a is valid and
if it's not valid pick up another random
but this is much faster than calculated
all the valid and then pick up one arm
and then okay instead of shuffle all the
possible moves that just do the singles
were opened and do the random are one by
one
basically oh if you could you can look
at the code every finishing Ghita so the
last one is also quite a nice basically
sometimes we are using map like a hash
map but we actually froze up I had the
map pair with player 1 and player 2 so
there was a mapper with the key player 1
and some stuff key player 2 and some
other stuff but secondly using an array
is much easier faster
because I if the map is completely
filled because we completely put all the
stuff and we know exactly where to go
using an average much more network and I
mean coming from a java world away are
kind of bad you know because our low
level and we want map but technically
with also with cotton it's much easier
to use a array than with Java and for
SAP one advantage that if you go on an
away you don't have to put the double
exclamation mark because our way always
return is that the map always written in
new laborda and this I was also happen a
lot and I know I can show you some code
or well let's talk about the next step
so at the moment ID the algorithm is
pretty good it's already able to connect
with the client so you can play with it
with a kind of dysentery traffic but
okay there is something the number that
we saw was a for a single call for a
single thread now I'm working on taking
advantage of the full credit that is bit
difficult but also coordinates with
co-routines an inductor it's really nice
decoder and once I finish this basically
the next step is using deep learning and
the point of deep learning in mango yeah
is it - basically when we do this Monte
Carlo calculation we have to to trial
the possible position so in the middle
and end game that's quite good
but at the beginning squat hopeless
because you cannot really try totally
all the possible 400 for the position on
the beginning
and instead what deep learning help you
is a doing us a lot of analyzing a lot
of games it is this kind of a
convolution so basically he has a bigger
net that to take all the possible and
then split in small gradient small and
small liquid and at the end basically it
gives you the full basically a list of
output which is the same number of the
possible position on the board with
their position with the probability for
each one so it can tell you which is
kind of intuition analyze on this shape
is understand the most good shaper can
be this this and this I mean the
position where I could maybe play and so
you have a small number of a position
which are interesting and there you can
fit those to the multicolored research
at the beginning so Monte Carlo tree
search got a lot of improvement from
this because it doesn't have a - I mean
it started with a very good
approximation and then of course it to
have the final number you have actually
to verify that it works but is
incredibly boost of performance so this
is I think after second half of this
year I will concentrate on this part of</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>