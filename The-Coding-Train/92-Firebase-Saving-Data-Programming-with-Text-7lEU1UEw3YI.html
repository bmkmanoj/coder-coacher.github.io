<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>9.2: Firebase: Saving Data - Programming with Text | Coder Coacher - Coaching Coders</title><meta content="9.2: Firebase: Saving Data - Programming with Text - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/The-Coding-Train/">The Coding Train</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>9.2: Firebase: Saving Data - Programming with Text</b></h2><h5 class="post__date">2016-12-09</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/7lEU1UEw3YI" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello welcome to a video about how to
use this thing called firebase which is
a database as service
I made a previous video sort of
introducing the idea of what database of
service is and why that's a meaningful
thing that you might want to use you can
go back and watch that if you have it or
you could just be right here and get
started so the simple basic
demonstration that I'm going to show you
is let's say you've made a game that
runs in the browser client-side
JavaScript only no fancy node
server-side program but you want to have
that game be able to save high score and
that's what I'm going to do in this
particular video so let me show you this
is firebase by the way so I'll come back
to this in a second firebase Google com
but this is my game so I code to this
game will be available as part of the
video I also have a link to show you the
video of the part of the video where I
actually coded this game and but you'll
show it's a very simple game the goal of
the game is to click this button as many
times as you possibly can and the more I
click it the higher my score so if you
guys don't mind I'm just going to click
it to like it to like I don't know four
or five thousand no just kidding okay
I'm gonna stop and move on 43 is my high
score see if you can beat it and I know
you fancy people on the internet will
figure out all sorts of ways to auto
click that button of to infinity or
whatever and break and win the whole
universe etc but I don't care about that
I need to add I need to be able to save
that score with my name or to the
database so let's go to firebase so that
what you need to do is go to this URL
firebase google.com firebase is a Google
product so you also will need to have a
Google account I'm already signed in to
some Google account that I made for this
purpose and now I'm ready to go to
console because what the console is
where I can manage my database on the
firebase website itself so before I can
start adding code to put stuff in the
database I need to go to this console so
I'm going to click on go to console and
here I am welcome to firebase I don't
know how well you can see these but the
first thing I need to do is create a new
project so I'm going to do that right
now create a new project project name my
awesome project thanks Google for that
suggestion I think it's really awesome
too but I'm going to call it my not so
my mind
awesome project and then I'm going to
say create project and I'm I'm accepting
all sorts of terms and conditions right
now and I'm watching the things spin do
I don't have anything to say well it
spins but I hope this would take much
longer this is very awkward I'm totally
getting far awkward what's happening
Internet okay there we go ah okay so um
I don't know if I clicked on something
or I just got here
but now I'm in my not my not awesome
project and I'm looking at this and I
have some options so firebase has you
can use it's just a generic service on
the server where I could say hey save
this and later if I ask for it please
give it back to me and what I'm doing
here is I want to add firebase to my web
app so this is a good place where I can
click to get started of course for using
iOS or Android you can do that as well
and so the key thing that's happening
here is that I am getting all this
information about how to authenticate
into firebase so first what I need to do
is make sure I have a reference to the
firebase library itself so I'm going to
copy this and I'm going to go back to my
code and I'm going to go back to my
index.html file where I have a reference
to all the JavaScript libraries that I'm
using I'm currently just using p5.js p5
Dom KS and my code that I'm writing is
in sketch KS so I'm going to add this
script tag which now links to the
firebase library it was different
versions of firebase I guess the current
one is three point six point three and
then I'm going to go back to here and
I'm going to grab this so this code if i
zoom in on this this is the stuff that I
actually want to put in my code itself
config equals all this stuff my API key
my auth domain my database URL is
storage bucket my messaging Center ID
and then I want to say firebase
initialize so this makes that connection
to firebase itself so I'm going to take
this I'm going to I'm going to just put
this in setup um setup is my is p5.js is
kind of like page loaded function so
that's the event where everything is
ready if you're using jQuery or any
other framework you just want to do this
stuff at the beginning once your page
has loaded and then I'm just going to
say console.log
our base just to sort of see that I
don't have any errors so I'm gonna go
back to my game and I'm gonna hit
refresh and this looks good looks like
you know there's all sorts of stuff
there are no errors so I am now
connected to firebase excellent now I
have to pause for a second because I
gotta do something a little bit more you
might have noticed like oh look at that
in my code is all of my like secret
stuff like my API key and the URL in
this messenger sender ID so there's a
there's an issue here which is that what
I'm doing has no security to it
whatsoever so yeah I've been a
publisher's for the web anybody go to
view source could see this stuff and in
fact I'm not I don't want to have to
authenticate for this quick
demonstration into firebase I don't kind
of add that sort of security code so I
have to go back to a firebase and I the
next thing I need to do is come over
here to the left and click on database
this is actually the main link that I'm
going to need which is going to have all
the information about my database click
on that and I need to go over to rules
and these rules are now who is allowed
to read and write to the database
some people might be allowed to read
some people might be allowed to write
and I'm going to do something which is
generally a bad idea but for the kind of
quick and dirty experiments I'm doing no
big deal and I'll talk about at the end
of this video I'll talk about ways that
you can add authentication and security
to what you're doing but I want to focus
on just how firebase works and get the
code up and running so on my website
where I have a tutorial I actually have
the the configuration the JavaScript
configuration that I need which I just
want true for read and true for right
for anybody in the world I'm going to
copy that I'm going to go back to my
firebase console I'm going to paste that
in here and I'm going to hit publish and
now it's giving me this warning your
security rules are defined as public
anyone can read or write to your
database again of course if you if
you're having people submit private data
or you know there's some sort of
anything that you know privacy or
security is a concern you wouldn't want
to do this but for a quick example the
high score list big deal I don't care if
anybody all of you are welcome to no
you're not what please vote but you'll
very easily be able to hack this high
score list anytime you want okay so
let me go back to now now where were we
so what I want to do now that I've done
that is I need to start actually
connecting to the database so I don't
really remember this stuff off the top
of my head so I'm going to go to my
notes here and the first thing I'm going
to do is just grab this line of code and
I kind of remembered that and I'm going
to say var database equals firebase
database so this firebase is the main
object that is now connected to my
online database on firebase so now I
have that database in a variable so how
is data organized in firebase so the
data in firebase is organized in a tree
like structure just like a JavaScript
object and the way that you access that
tree like structure is with a reference
or our e F for short so basically what I
have a very simple structure here where
I want to have a scores reference and in
that score I want to have multiple
entries each entry I want to have an ID
which is the kind of thing that
databases often have so each entry has a
unique ID because you know I might have
multiple scores that have the same value
or multiple school high scores that have
the same name in the same value so if I
really want to like have a unique key
for every single entry in the database
that's something that firebase is going
to generate for me and then each one of
these is going to have an ID and as part
of that ID each one will have a score
and a name a score and a name so this is
just like a JSON file or an XML file so
sort of a tree of data there the root is
scores scores has a bunch of children
which is all these IDs an array of IDs
and each ID has children which is a
score on a name score in a name so you
could imagine a much more elaborate and
complex way of structuring your data and
I'm sure you'll enjoy doing that in your
own things that you do but I'm going to
keep it simple with this so how do I
access feed the reference and and data
as a path in firebase so the way that I
do that it's actually quite simple I
just say var I'm going to say ref equals
database dot ref scores so this is
saying hey I want to access the scores
node in that tree of data and by the way
if I had multiple games like I had a
snake game I could say score slash snake
and then I could have another node which
is like you know score slash Space
Invaders or I could have a node that's
snake slash scores and so I can use
slashes to kind of like auto traverse
that tree by and point directly to a
specific point now what I want to do is
I want to store some data in there so if
I just say var you know data equals name
DTS which are my initials oho
apparently my initial my initials auto
convert into database in atom editor
comma uh I need to be a string and score
my high score was 43 right and then I
can just say reference push data that is
it's as simple as that I just I need to
KITT authenticate to the database I need
to make a reference to the database to
just get the database in a variable I
need to make a ref I need to access a
part of the database like the scores no
to the scores reference I make a
JavaScript object and I could just push
it in there so let's do that
and let's run this code right over here
I'm gonna hit refresh and we can see now
if I go to the console and I hit Oaks I
need to go oops I'm in the wrong place
to do I'm going to click over now under
data in the firebase console I can look
at my data and I can see look at that
this is the tree my not awesome project
there's a scores and there's this ID
which has in it named ETS score 43 there
it is guess what would happen by the way
oops if I run this program again one
more time look at this now it's in there
twice and you know what's great about
firebase is I can actually manage and
manipulate the data through this web
interface as well so if I'm just testing
out and like you know what those were
just my tests so now I want to make sure
I delete this stuff so I can just delete
these entries as well
and now if i refresh I don't think I
need to refresh I think the page were
probably refresh for me that data is
gone so I can start over so of course I
don't want to just submit the data I
don't want to just submit the score what
am I saying
like hard-coded in the code I want to
actually submit the score dynamically
based on the variables and things that
are happening in my program so let's
look at how I would do that now so what
I need to add to this program is I want
to add a initial minute I'm going to say
initial initial input so I'm going to
say initial input equals create input I
could add this into the HTML file but
but if I do that on my program will now
see I have a place for you to put your
initials and doing a terrible job of
like formatting this and then I'm going
to add another button which is going to
be the submit button and I'm going to
say submit button equals create button
submit and now I have also this submit
button the idea meaning that I can put
DTS here and then I can click Submit and
I can submit whatever my score is here
okay so we're doing pretty well so far
I'm looking at the chat now what I want
to do is bind an event when I click the
button submit score so I need to write a
function now that says submit score so I
need to now create that data which is
the initials I'm going to say yeah we'll
do initials to spell that right initials
and then what did I call the input
initial input initial input value and
the score which is just the actual score
I'm going to take out this and then I
need to say get all of this
and you know I think it might be nice
just to have the database thing be a
global variable so I don't have to keep
like re making that so I'm going to put
that in setup right after I initialize
it database equals firebase database I
don't need this console log anymore but
I do want to do this console log data
and then I don't need this anymore
right so the idea is whenever it's time
to submit the score I make a JavaScript
object it has the data I want in it I
access the reference in the database
that I want and I push add the data to
scores so let's do this now if i refresh
this program oops I got an error on line
31 initials oh I have a semicolon there
that should be a comma JavaScript
objects syntax here we go so now I'm
going to put my initials in DTS I'm
gonna try to get my beat my high score
43 god I can't believe you're watching a
video of me click this I'm just going to
go to 44 okay I got 245 now I'm gonna
hit submit looks like it's submitted
that I'm gonna get a little bit higher
and got a new high score and then I'm
going to get a little bit higher and I
got a new high score alright high scores
so now what's going to happen here is I
should be able to look back in firebase
and I should be able to look at all
these high scores they're they're all
submitted to the database wonderful so
now we have a basic program which allows
you to send data to the database so in
the next video what I'm going to do is
show you how to retrieve the data from
the database so I can display a list of
high scores and whenever there's a new
high score I can actually have the page
dynamically regenerate without having to
reload or have a set interval running
firebase is just always going to ping me
whenever there's new data so that'll be
exciting to see in the next video</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>