<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>8.2: HTTP Server with Express - Programming with Text | Coder Coacher - Coaching Coders</title><meta content="8.2: HTTP Server with Express - Programming with Text - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/The-Coding-Train/">The Coding Train</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>8.2: HTTP Server with Express - Programming with Text</b></h2><h5 class="post__date">2016-11-05</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/6oiabY1xpBo" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">okay welcome to a first video in a
little series about building an API with
notes the question was asked in the live
chat this is by the way you probably
watching this as a recorded archive than
the live chat why would you want to make
an API and so you know I mostly write in
the comments I'd love to hear why what
your idea for an API and why you would
like to make an IP API is but there's
there's a couple reasons that I think I
could kind of start with here number one
is you have data and you want to allow
other people to use that data so this is
a way of you kind of making a
transaction a sort of handshake and
saying like hey there is this means for
you to access this data and I intend for
you to be able to do so an API stands
for application programming interface
it's a way for - it's a way for two
different applications to talk to each
other so there's the applicant we're
going to build an application a node
application that has data or something
associated with it and it's other people
other applications will be able to talk
to it so that's kind of the main reason
now there is sort of this scenario which
I also am going to show you with you
might be making an API for one person in
the world
one wonderful singular person and who is
that person it's you right so there are
lots of projects where you're writing a
front-end a client-side JavaScript thing
you're making pretty pictures and
drawing text and all sorts of
interaction stuff on the page but you
need some server-side stuff to connect
to download images to run long
complicated processes to use other node
packages so you might make an API just
for your own project itself and actually
that's what we might see in some of the
examples I have to show you so that's
kind of number one you might just want
to you know you you have something and
you want to allow other applications to
connect or you might actually want other
things being namely yourself okay so
hopefully that made someone to why you
might make an API but really you know
what the answer to that is let's try to
make an API talk about it get to the end
and hopefully some creative ideas will
emerge in your head as you're watching
these videos okay so first I want to
point you to this web page which is part
of the course the things that you will
that need before you're watching this
video is what is node
yes and what is NPM so you're going to
need to have both of those things
downloaded and in this video I'm going
to start with adding Express so I want
to use this Express package which is a
fast unknown opinionated minimalist web
framework for nodejs so first of all I
just love anything as bit list because
programming gets like really complicated
and looking through documentation the
API is just like live so this nice that
what a lot of the things that I want to
do in this application that I'm going to
build is like oh host some files or Oh
receive a query from a user and know an
express is going to have a simple
function for each of those as opposed to
kind of writing all the code for that in
raw node so to speak so I'm going to
look at my directory where I'm have the
project and all I have is two things I
have server a s file which is actually
that's where I'm going to put my
JavaScript code which is empty and then
I have this package that JSON file which
you can make with NPM in it but I
already have one there that's your
configuration file for the project and
there's lots of important details about
that if you go to publisher thing as a
node package or an open source project
but for now we can mostly ignore the
contents of package JSON I'll come back
to it maybe another time so you can see
what's in it it's just like a little bit
of stuff saying like hey this is the
name of my project and this is the
version but what I want to do is go and
grab this and now install Express with
this project so I'm going to say and I'm
you can see I'm in that directory and
I'm going to say NPM install I'm
actually I'm just going to paste it in
there NPM install Express - - save ah oh
I have an error in parse so I I messed
up I have an error here
I wrote that package that so by the way
if you get if that happens to you let
that happen a trailing comma I got an
error in my package JSON file so that
should fix it I'm going to say clear and
try this again oh yeah that looks much
better so you can see it should and now
I should have a new directory called
node modules and you can see oh there's
all this stuff installed in there I'm
just going to have to trust that Express
installed correctly so let's make sure
everything's working I'm going to go
into my server and I'm just going to
say console dot log server is starting
and I'm going to say node server server
is starting great so a node program is
just like a program that's written in
JavaScript it just runs on your computer
and it runs without graphics without a
window and actually there's a lot of
stuff you can do with node I mean you
know I should probably really learn
Python one of these days but I use node
a lot to do a lot of batch processes on
my computer like oh I do just write a
little note program to rename a whole
directory of files or I can do you know
make a request to some other API and
download a whole bunch of things so you
know notice something that you could
just forget about web servers and api is
you can just use as a little programming
tool to do a bunch of things for
yourself on your computer through code
but what I want to do the first thing I
want to do is create a web server and by
web server I mean something that opens
up a port and allows browsers to connect
to it and this is very easy with Express
now I have most of this documented on
this page so I'm kind of going to go and
kind of copy/paste some of the like
pieces of code the first thing I need is
I need to say var Express require
Express this is like an import statement
import the package Express I want to be
able to use Express now the funny thing
about this is I get require Express I
get this into a variable this whole
package is actually a function express
is a reference to a function and I can
execute that function and that's what
I'm going to do here in this next line
of code I'm going to say app equals
Express so I execute Express and
suddenly I get this web application this
is what I mean about how great it is to
use Express it's doing all this stuff
behind the scenes and that the first
thing I can do is I say hey listen for
incoming connections so I'm going to say
server equals app dot listen port 3000
now there are various default ports that
servers will use but since I'm just
doing all of my testing you know this
diagram that I have over here this idea
of a server and a client right now all
of this is happening on one computer the
server's on the computer the client is
that computer itself and that might
actually for a lot of projects be all
you need but at some point you
also might want to deploy your server
somewhere else so that other people
could connect to it and I'll have to
make some videos about that as well okay
so now that I'm listening at port 3000 I
can do I could do a few different things
so one thing let's just run this server
is starting and you know it would be
nice it would be nice to like add a
little callback here so I'm just going
to write I'm going to add something
called function listening and I'm going
to say console.log listening so I'm just
wrote a little callback so that and
actually they're the reason I'm adding
this into the code is there are a lot of
things you can do here you can get the
host address and the port and various
things but most of this stuff is
unnecessary for we want to do but I want
at least sort of see this callback that
it's working so I'm going to I'm going
to run this again server is starting
listening okay here we go
now so let's go to localhost 3000 this
is where my server is I'm going to look
at the web page I'm a Oh cannot get
anything so there's nothing there but
you can see that this is working because
at least I got the message I'm listening
but I don't have anything to give you
right the me the web browser right now
made a get request to this to the server
and this is kind of an important concept
so one of the first things I might do
although this is a little bit Ness
unnecessary for this idea of an API but
it's kind of worth exploring right now
that we're going through this express
stuff is I can use an aspect of express
to host static files meaning I can make
and this this idea of this word public
in there is something I could make up so
I could call this website instead of
public public being a kind of standard
thing this is saying use out of the
Express package its ability to host
static files HTML files image files
movie files all that sort of stuff so
what I can do now if I go into here
right into my project what I want to do
is create a folder I'm going to call
that folder website just sort of a silly
name and I'm going to put in that folder
a file called index.html and then I'm
going to say
hmm so in that file it says who
okay and then I know I'm speaking in
that voice uh and then I mean I do know
why I am but I don't know why why I am
why I am anyway now if I hit refresh now
first of all I've got to restart the
server so here's the thing there's
actually a really nice tool notice how I
have to like stop the server restart it
stop the server restart it every single
time I change my code there's a nice
little node module sure this is um which
called node Mon and node Mon like node
monitor I think monitors your code and
restarts the server for you every time
you change the code now this can be
problematic and you don't always want to
use it but in this case would be a lot
more convenient and - G means I want
this package this isn't a package
associated with this project
I want this that's just a global tool
that I'm using on my computer and this
probably is going to fail oh but maybe
it's not I'm feeling hopeful now that
actually this is going to work yeah so I
got some error permission denied this is
because I when I'm installing a global
package it's got to go into like user of
our local bin some secret place on my
computer where I need special permission
so I'm going to say sudo for super super
super do NPM install node Mon - G now
I'm going to type in the password here
and hopefully this works
there that seemed to work or I getting
some warnings I'm getting some things
that look scary oh it's doing more stuff
yeah I think that worked so I'm now
going to say node Mon Server AAS and
this is working so you can see that it
is the surfer is starting listening and
watch what happens if I go back and I
say go to my server and I say you know I
make up just do a carriage return and
hit save you can see here look how many
times it restarted the server so now I
can kind of ignore terminal for a little
while and just go from I can just go
from my code to when I make a change
refreshing in the browser so look at
that by the way I now see the files that
are in that directory website so this is
this is step one we have now written a
web server with like barely any code at
all look this is like all the code for
the web server and incidentally if
you've ever seen me or do something like
this like often I'll run a web server on
my computer by just saying Python - M
simple HTTP server that's running a web
server there are lots of other tools
there's an ode HTTP server there are
lots of tools that just make a web
server that hosts files this is what we
have now done in this exact program so
step one is completed we have written a
web server that hosts files in the next
video I'm going to add something to this
called routes so in addition to hosting
files I'm going to allow the user to
send information or request information
through something called a route a rest
en route but rusty and I mean you're
gonna want to take a rest after watching
the video probably okay so I'll see you
in the next video thanks for watching
this one on setting up a basic web
server with Express</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>