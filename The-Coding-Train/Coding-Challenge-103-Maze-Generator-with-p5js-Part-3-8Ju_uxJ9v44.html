<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Coding Challenge #10.3: Maze Generator with p5.js - Part 3 | Coder Coacher - Coaching Coders</title><meta content="Coding Challenge #10.3: Maze Generator with p5.js - Part 3 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/The-Coding-Train/">The Coding Train</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Coding Challenge #10.3: Maze Generator with p5.js - Part 3</b></h2><h5 class="post__date">2016-05-02</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/8Ju_uxJ9v44" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">welcome to part three of my depth first
search recursive backtracking magic maze
generating algorithm in the browser
using p5.js project so this is what i'm
trying to make and where i am so far is
kind of along the way there you can see
this something similar is happening here
where I'm starting with a cell and a
grid and I move to a cell next to it and
I move to a cell next to it I move to a
cell next to it and I never go back and
move to a cell that has already been
visited the visited cells being
highlighted in purple so what are the
next steps let's go to our Wikipedia
page that had the algorithm very nicely
laid out for us and we could kind of see
what we've done so far so by the way
there were on part one right now part
one if the current cell has any
neighbors which have not been visited we
did that already
what choose randomly one of the
unvisited neighbors we've done that
already
skip step two skip step three step four
make the chosen cell the current cell
and market is visited so all I've done
so far in building this is step one and
four so I'm just moving from cell to
cell to cell to cell not revisiting any
cells now part step to push the current
cell to the stack this is something I'm
going to visit in the next video what is
the stack why do I have to keep track of
the stack what does that all mean I'm
gonna get to that this video I'm gonna
work on part three remove the wall
between the current cell and the chosen
cell the chosen cell who is the chosen
cell okay let's figure out how we're
going to do that I kind of like figure
out in the code where that is or what
we're even talking about so there's we
already have the pieces of this
somewhere so here we are this is the
thing running here is our code let's go
down to the cell object and we can see
here's one thing so each cell object has
an array called walls with four true
variables in it true Oh top right bottom
left top right bottom left so let's say
the two cells are next to each other one
is to the left and one is to the right
one of them needs to remove its right
wall so that would become false and the
other one needs to remove its left wall
for and that would become false I got to
draw a diagram here to understand this
let me come over this this is tricky and
I think we can just get rid of this
larger grid now we
kind of understand that so this is what
I mean there's really four scenarios
right this is this is the cell and this
is the neighbor this is the cell and
this is the neighbor right so this is
the wall that needs to be removed the
cell needs its right wall removed the
neighbor needs its left wall remove here
the cell needs its bottom wall removed
the neighbor needs its top wall removed
how do we know which is which well if
this is I and this is I plus one right
the difference between you know one
cells you know like cell index I -
neighbor index I right that'll tell us
if it's to the right or the left because
if this is I is 45 and this I is 46 and
we take 45 minus 46 we are going to have
what negative 1 so if we get negative 1
that means we have a neighbor to the
right so let's let's sort of what I'm
tripping over lights and things let's
start looking at that in our code so
what I'm going to do now is I'm going to
write a new let's look in the program
where are we we're right here in the
algorithm right this is this is a step 1
and this is step 4
according to that Wikipedia page right
step 1 is market is visited and step 4
is set it to be the next one actually
step 1 is really here pick a random
neighbor pick a random neighbor market
is visited and in step 4 is current
equals the next one so what I need to do
is implement step 2 which if you recall
is not step two step three which is
remove the wall between the current cell
and the chosen cell so I want to do is
Fe and you know what I'm going to make
that in a separate function I'm gonna
it's already knows what I'm going to
type doesn't that insane remove walls
and between what current and next right
we need to figure out current and next I
want to remove the wall in between them
so now I just sort of thought of a
function that's good I could say a
current dot remove walls next but I'm
just going to put it in a function and a
passed them
two cells figure out how they are in
relation to each other and remove their
walls so I can just go all the way to
the bottom of my code now and work on
this somewhere else so I'm going to say
function remove walls a B so I just have
to
whoops come on let's save it wants to
get rid of all my white space on the
bottom but I want white space on the
bottom white space because I want to
type it in here okay so I want a generic
function that takes two cells and
removes the wall between them sell a and
sell B so what do I need to do the first
thing I need to do I'm going to call X
be a dot I minus B I so this is exactly
what I'm doing the value X is the
difference between this cell and that
cell so let's think about this scenario
where this is cell 46 and this is cell
column 45 this is a index i B index I a
index I minus B index I is 1 so if X is
greater equal 1 that means a dot walls
what okay okay come back over here I
want the left wall to be removed top
right bottom left 0 1 2 3 so I want a
wall index 3 to be false and now B
should have its right wall moved removed
top right bottom left 0 1 a B dot walls
index 1 equals false else if x equals
negative 1 then I want to say then there
the inverse of that right if it's
negative 1 then I want the right of a
and the left of B to be removed that's
pretty good right this makes sense and
I'm going to use triple equals to be
kind of more serious about I'm very
serious about my equals IR believe and
as many equal signs as possible to be
sure we know what's going on so that's
your work now I need to do the same
thing with Y and so Y is what AJ - BJ
and I'm going to do exactly the same
thing and say now if Y is 1 or Y is
negative 1 and now okay so let's think
about this let's say I think we can
figure this out without a diagram but
I'm going to do it anyway
so let's say this is y and it is row 30
and this is a and this is B and it is
row 29 so a dot J minus B dot J is 1 so
if that's the case if a dot Jayma then a
needs it top removed and B needs its
bottom removed ok coming back over here
I need its top B needs its bottom 0 1 2
so a needs its top B needs its bottom
here a needs its bottom and B needs its
top removed I think we've got this right
there's only one way to find out
and we are going to now call did I
already call remove walls in the right
spot right here yeah so here we go let's
just try it it should when those go
false we shouldn't see the lines anymore
let's just see how it goes ooh huh so I
don't seem to be seeing anything
happening here so what's going on what
did I miss
still kind of marching along but I'm
still seeing the walls being drawn so
what did I what did I miss here so first
of all let's just make sure this is
happening and so ok so that function is
being called all right so what am I
missing in that function let's look at
what X is whoops console.log let's look
at what this value of x is negative 1 0
1 negative 1 0 1 so that should be it
seems to be giving me
numbers that are the right idea so let's
just see let's just log the object here
ah okay yep yep yep so now I'm going to
look at one of these and look at the
walls array ah so zero and three got
turned to false so this is working like
stuff is happening here right you can
see by the way this is like a nice way
of debugging I can look at each object I
can see its walls array so what did I
miss
probably maybe something in the actual
cell object oh you know what I bet you
is happening oh I bet you what a silly
little problem that I forgot to say no
stroke here so the rectangle that I'm
drawing to highlight the ones that have
been visited always has its stroke so it
makes it draws the full rectangle no
matter what so I think that should be
there we go so we can see now as it's
moving the walls are being removed Oh
beautiful oh come on give me a longer
give me a longer sequence here now one
thing I would like to do also just like
keep the highlighting stuff going is
let's just go back to - to the main
program and I'm going to call at the end
here a current highlight so I also want
to be able to step see which one is
current this is just a little I'm really
done with this part but I just want to
visually add something that I think will
help us so in the object I'm going to
add a function called this highlight and
what do I want to do I want to draw a
yet another rectangle no stroke and I
will color it a some green color with
some alpha and draw a rectangle XY with
the same size I just wanted to add that
really quickly and refresh this now so
now we can see also which one's the
current cell okay great so here's the
thing this is actually working out and
it's making our maze well I just love it
look we can see our maze the problem is
it gets to a certain part it's like
trying to figure out this maze and it's
done it needs to go all the way back and
break out somewhere else like it needs
to go back track now
maybe once it gets to here actually all
you need to do is go here and then start
going this way because that turned out
to be a dead end so it can start going
this way so this is where the
backtracking comes in right this is
where in the algorithm part two comes in
push the cell to the current stack and
then if the stack is not empty pop a
cell make it the current cell so I need
to discuss that need to unpack that
figure out that's a confusing piece this
will involve a lot of additional
concepts I'm going to do that in the
next video so right now if you're
following along and building this you
should at least though have this much
done and just for fun before I end this
video let's make this like 10 and let's
like make it go fast now and hit refresh
and just so we can see like we can see
this is really doing something now like
it's actually like just carving out this
maze and in with a finer degree of
detail it's going to be a while longer
before it finally gets stuck but okay so
you see that we're almost there and
we're going to go to the backtracking in
the next video okay see you there</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>