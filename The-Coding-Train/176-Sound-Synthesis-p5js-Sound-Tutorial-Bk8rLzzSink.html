<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>17.6: Sound Synthesis - p5.js Sound Tutorial | Coder Coacher - Coaching Coders</title><meta content="17.6: Sound Synthesis - p5.js Sound Tutorial - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/The-Coding-Train/">The Coding Train</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>17.6: Sound Synthesis - p5.js Sound Tutorial</b></h2><h5 class="post__date">2016-06-18</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Bk8rLzzSink" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello welcome to a video tutorial about
sound synthesis in the browser using
JavaScript using the P 5g s-sounds
library now this is a one part of a
continuing series about programming with
sound and what I'm going to do in this
particular video which is quite
different from my previous four videos
is instead of loading us down from a
file like some music or perhaps playing
a sound effect like what I'm going to do
is instead create in a way sound from
nothing sound synthesis now of course I
could do sound synthesis myself
mimimi okay I can't sing it's terrible
but this is the idea my vocal cords are
vibrating and they're creating a
vibration that vibration is traveling
through the air and it's actually going
into a microphone the microphone reads
that vibration records it and it's
coming out of you the speaker of your
computer which is vibrating and then
traveling again through the air and
eventually into your ear so this idea of
a sound wave is something we need to
talk about this wave that travels
through the air how can we encode
synthesize that wave create a sound and
then control that wave to essentially
play a melody play a tune allow create
an interactive piano all these types of
things are possible with what I'm going
to show you how to do so the first idea
is really to think about a sound wave so
let me let me come over here and there
are a couple key concepts which I think
are quite important so what I'm gonna
draw for you here is something called a
sine wave now I'm sure I am NOT drawing
this exactly correctly but if you take
the sine function the sine function
being a function from trigonometry where
is if you have a triangle and you take
sine of theta it equals the opposite the
length of the opposite side of the
triangle divided by the hypotenuse of
the triangle so you can go look at all
my trigonometry and triangle tutorials
and stuff somewhere else that's not
really relevant for here what's
interesting is if you if you think of
this angle as a value that's changing
over time and were to graph that you're
gonna see a wave pattern like this so
it's a perfectly symmetrical repeating
waveform a sine wave and if that sine
wave travels through the air you're
going to hear a tone now a wave has
certain properties one property is
amplitude so if we can
this is like the top of the wave and
this is like the bottom of the wave and
you can think of that height as
something called amplitude so the height
of the wave and now the height of the
wave is actually is actually a volume so
the higher the wave the louder the sound
the amplitude I mean I'm sure there's
like a very fine nuanced scientific
distinction between those terms but we
could think of it for right now some
people yell at me in the confidence of
the chat I'll feel very embarrassed and
sad and that I got everything wrong but
anyway so amplitude that's the height of
the wave now another key part of the
wave is something called period so
period and I'm gonna like this is the
amount of time or the length between the
length of a full cycle of the wave so
you can see from here this top of the
wave all the way to here is one full
cycle that just repeats over and over
again how long it took for that cycle is
the period and in the case of sound
we're really thinking about time in
seconds how many that wave like how long
did it take that wave for him to to wait
so to speak now one divided by period
one over period is a term called
frequency meaning not how long for one
cycle but how many cycles per second and
this is actually a measurement you've
probably heard Hertz so if something is
60 Hertz that's a frequency of 60 cycles
per second and this is key because what
we're going to do is set we're going to
create a wave with code we're gonna set
its amplitude we're gonna set its
frequency as a value in Hertz and then
listen to it so these are the concepts
what I want to do now is look at how do
I in JavaScript create this waveform and
control its amplitude and frequency okay
let's go and do that now so coming over
here I think I'm back over here and here
here you are Here I am
I'm gonna place the music for a second
just to get my mind oh okay that's good
enough and I'm gonna minimize this I'm
gonna open my browser open over here and
I'm gonna go to this is an example I
have ready so I have a completely empty
blank canvas I don't actually need a
canvas for this example I'm just doing
stuff with sound I'm gonna go back to
the code and I'm actually just for the
sake of argument gonna make the canvas a
little bit smaller so it takes up less
space
on the page okay so what do I need to do
first I need to create a sound wave so
what I'm going to do is I'm going to
create a variable I'm gonna call it wave
and technically the term for a wave in
p5.js Town library's oscillator a wave
being something that oscillates much
like plucking a string right you pluck a
string it oscillates like a wave in it
vibrates through and pushes that wave
through the air up to your ear you hear
a sound okay so what I need to do is say
wave equals new p5 oscillator so this is
a new object you might not be familiar
with P v dot oscillator this now I've
created an oscillator object so this
object exists it's up to me to turn it
on and turn it off to set its frequency
to sets amplitude to configure that
oscillator so to speak one thing that I
think is important for me to mention is
that here in index of HTML you know I I
have a reference to the p5 just sound
live hurt you can't really see it all
the way there there we go so you need to
for this to work you need to make sure
you have the p5 sound AS file loaded as
part of your project so now I'm back to
here the other thing I think is worth
showing you and I have it here is the
reference page for p5 oscillator so this
is something you might want to look at
on your own time and review there's
actually a nice little example on this
page but I just want to show you here
are a bunch of the functions that I'm
gonna start to demonstrate to you
start/stop amplitude frequency set type
connect/disconnect so there's a little a
lot of pay all those things I showed you
about manipulating a song file a mp3
file that you load and play there's
similar things going on here so one
thing that's really important though is
this idea of set type so look at this I
talked about sine waves but you could
also have a triangle wave a sawtooth
wave or a square wave and I actually
have an image here I'm just gonna draw
these those diagrams but I'll just use
this image instead so what the waveform
actually looks like is going to
determine what the sound sounds like and
and of course the world is your oyster
in terms of possible ways that you might
be able to do sound synthesis but p5 by
default allows you to create oscillators
of these four forms sine wave square
wave triangle wave and sawtooth waves
and this image comes from Wikipedia and
I believe this is a Creative Commons
image I better check that but hopefully
I'm but I'm pretty sure that's available
to be used in this video and you could
also use it as well anyway okay so I'll
post a link to it in the description
ok so we'll try a bunch of different
forms but let's just start with a sine
wave so the first thing I want to do in
my code is say wave dot set type and I
believe I need to pass in a string
meaning a word in between quotes sign
being sine wave the other thing I could
do is set the amplitude oh by just
saying amplitude I'm gonna set it to 1
and then I could say wave frequency I'm
gonna set some frequency let's try 300
whatever that might sound like and then
whoo I'm going to play it I think I need
to say a play play or start I'm not sure
let's look at the reference page it
looks like start starts the obsolete er
and there's a there's a there's a nuance
to this function which I think will be
interesting to say so I'm gonna say
start so let's refresh this sketch can
you hear that a nice tone let's go back
it's very hard for me to hear it the way
I have a sound configured for the let me
make this 400 that sounds very similar
what did I do wrong so maybe that
frequency function isn't correct let's
look let's look back frequency
time out back again there was an issue
with the order of these operations so
setting the amplitude and setting the
frequency will not work unless you call
those after start and it actually says
that in the documentation I just didn't
read that properly so what I'm going to
do now is go back to the page and I'm
gonna refresh it you can hear that 400
and I'll mention that 400 for 40 the
frequency of 440 is actually the musical
note a can tune your violin to it now
can you hear that that's the musical
note a if I'm right and I'll just
mention that if I make that a little bit
higher if I say 1,000 you should be able
to hear that that's quite a bit higher
so let me go back to this and actually
let me just turn the amplitude down to
zero and there you go now you'll notice
in this program I guess I don't
hopefully I'm not blowing anyone's ears
out that that there's I have a
play/pause button so while I was taking
a break there for a second to figure out
what was wrong I added that button let's
just look at the code so very briefly
there's just a button that says play and
pause there's a function called toggle
associated with whatever that button is
pressed and then in that function I have
a boolean variable that's set to either
true or false based on whether this
boolean variable playing and then in
draw I'm either coloring the background
pink or gray depending on whether that
believe variable is true or not so if I
if I go back here and run this again you
can see playing that button toggles the
background so one of the things that I
wanted to show you is that I can
actually just take this code right here
and I can put that here in in the toggle
function and then I could actually say
wave dot stop here it in in the else so
right now what I want to do is toggle
this bat oscillator on and off so I'm
going to run this
do you hear it I think you do look look
I don't hear it I don't know why I can't
hear it anymore
oh the amplitudes at zero so let me turn
it back to 0.5
okay now you can hear it right on and
off oh I think there's like a low hum
anyway hopefully the sound is fine so
okay so I can toggle that sound on it up
now there's a couple things one I should
mention is you don't actually have to I
don't actually have to start and stop it
what I couldn't really just do is you
know start it right here in setup and I
could immediately set the amplitude to
zero and then what I could do here is
just and I could also set the frequency
here in setup and then what I could do
is just set the amplitude so I don't
need start I just want to set the
amplitude to 0.5 or set the amplitude to
zero so I'm gonna run that again I'm
turning it off now one thing I'll
mention is do you hear that little like
clipping each time I start and stop it
there's a quick clip of the sound that's
because this oscillator comes in at full
amplitude immediately so often with the
sound like this it's a little bit
advantageous to kind of fade it in very
slowly and there's actually the
amplitude function and I believe start
and stop there is an optional second
argument so if I put in like one as a
second argument it's gonna take one
second to fade in that sound or fade out
that sound I could put in point one or
something much shorter if I want but
let's take a listen to that
did you hear that fade in very hard for
me to hear it because it's very quiet a
lot of my speakers but hopefully it's
piping through that sort of YouTube
recording system and you can actually
hear it okay so hopefully you heard that
distance now let's talk a little bit
about let's do one more thing I think
which would be worth doing what I think
would be worth doing is let me create a
slider and I'm gonna say slider equals
create slider and now I need a range so
the audible I believe it ought a
reasonable sort of audible range of
frequencies is between like twenty and
twenty thousand perhaps but I don't want
to blow out your ears I'm afraid of
doing anything too crazy so I'm gonna
have a range a frequency range between
like let's just say one hundred and
twelve hundred which I think will be
somewhat reasonable and I'm going to
start at the musical note a 440 so I
want to create a slider and in in draw
what I'm gonna do is I'm gonna say wave
ice somebody is usually wins in the chat
if someone's blasting with emojis I know
that something's wrong but I don't know
what that is so wave dot frequency I
should frequency F slider dot value so
what I want to do is now at least I the
frequency to a slider and so first I
need to play it
you can hear that so you can see as I
can change that frequency on-the-fly so
this is the basic idea
I can synthesize a sound as a waveform I
can fade it in I can fade it out I can
change its frequency to change its
amplitude and I would actually let's
just briefly maybe I'll we'll add like
trying a wave or sawtooth wave or square
wave just to hear what some of those
sound like but mainly what I want to do
in the next video is talk about
something called an envelope and an
envelope is a way of kind of crafting
around that oscillator sort of musical
attack a fade in a fade out and that's
going to a make allow us to configure
the oscillator in a way that might sound
more like an electric piano or a
particular kind of musical instrument
I'm not we're not going all the way
there to that and then I want to talk
about what are the specific frequencies
of specific musical notes
how do those relate to a concept called
MIDI and how might you create a program
that should have generates a tune or
allows a user to interactively play
piano okay so so what I'm going to do
here is let's so I think I'm done but
let's just let's just look before I go
let's look here at the oscillator object
oh I mean frequency a oscillator object
what I want to look at is this so the
options for set type sine triangle
sawtooth or square so let's just try a
triangle wave and hear what that sounds
like see if you can hear the difference
those are kind of different quality to
it and so what I recommend that you do
it one thing you might think about as an
exercise is can you create a whole
interface an interface for changing the
waveform for changing the frequency for
changing the amplitude what happens if
you have multiple oscillators can you
harmonize so this you know there's a lot
of punch of things you could try here
and I also want to remember to make sure
I do something where we visualize that
wave itself so where the wave is drawn
on screen so I should I should make that
happen at some point - okay thanks for
watching this sound synthesis video I
look forward to hearing your feedback in
the comments and the chat and all that
sort of stuff there's no widow chatting
it's actually
so bye hello video epilogue I realized I
forgot actually to remove wave dot stop
in here when I was showing you that you
didn't need stop that you could just
fade the amplitude down to zero so I'm
gonna actually take that out and I'm
gonna go back and run this again hit
play it pop-up pause and pause is
probably the wrong word its fade in fade
out and I could make the text of the
button change all sort of stuff I could
make this better but at least that was a
brief correction okay thanks for
watching this video</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>