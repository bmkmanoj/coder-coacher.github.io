<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>5.11: Applying forces in Box2D - The Nature of Code | Coder Coacher - Coaching Coders</title><meta content="5.11: Applying forces in Box2D - The Nature of Code - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/The-Coding-Train/">The Coding Train</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>5.11: Applying forces in Box2D - The Nature of Code</b></h2><h5 class="post__date">2015-08-06</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/bJJbQIoJeFc" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">do you remember a time oh not so long
ago when we were writing code that
looked like this mover M and then set up
M is a new mover and then in draw we
would say things like m dot apply force
wind and we would make a P vector called
wind we would calculate it somehow we
would send it in we would say
acceleration add force and force divided
by mass and all this stuff we learned it
was a nice time back then so here's the
interesting thing we said that aha
let's let's try box2d as a way of
replacing our physics engine instead of
keeping track of our object's location
the loss in acceleration on our own
let's let Bach City do it through a
box2d body but when what thing that's
interesting about doing this is now that
we've done all that we can circle back
and say okay well once we figured out
our own physics engine with location
velocity acceleration we were able to
apply forces to those objects and move
them around the screen according to
forces like wind and traction whatever
we came up with the interesting thing is
in box 2d even though Bach city is
handling our physics we can still make
up our own forces and apply them to
those objects we can apply forces to
bodies so let's think about this we're
writing a box class that instead of
location velocity and acceleration it
has a body object what if we want to
write a function called apply force now
one thing we should note when we
previously had an apply force function
we passed in a P vector a force is a
vector that causes an object with mass
to accelerate so the argument to the
apply force method is a P vector here
however in box2d we still want to apply
a force as a vector but we want it to be
a Veck to object
Veck to force and what do we do with
that well we can say body which is B dot
apply force it so happens that the body
method has an apply force function so
just like we were writing our own apply
force function for our what we're doing
is we're saying are apply fire function
will receive a vector and pass it along
to that body and we can pass it on but
the funny thing is box2d is more
sophisticated it's not only do we need
to apply a force but we need to say
where on that box to the body do we want
to apply the force right it's gonna be
quite different if we apply the force on
this corner which might cause it to spin
around vs. right in the center so for
simplicity one thing we can do right now
is just say you know what no matter what
we're going to always apply our forces
to the center of that body and we can
say Veck two paws equals body dot get
world center so we can ask for that body
center then we could say apply that
force to that body center so this is
very simple we're actually this probably
hopefully the shortest video ever this
is all we're adding to our examples if
we just add just this one function
suddenly we can start applying forces to
the objects but key thing that we're
adding here is in addition to applying
the force vector we need to apply the
force to a specific location in this
case we're gonna simplify things that
say always add it to the object center
exercise to yourself try adding forces
to other parts of the object so try
creating a scenario where you apply
forces to the corner of an object and
see if it spins that sort of thing
another thing we should mention about
this is this the assumption here is that
this is a world vector right the unit
remember the unit is meters not pixels
so when we start making up our forces or
calculating them we have to remember are
we in pixel land or box2d world land so
let's take a look at how this actually
works in a code example oh come on
switch there we go hello okay so let's
just run this simple example which this
looks like lots of the examples we've
made in box 2d I'm just going to move
the window over here for a second it's
got a bunch of boxes being made fall and
there's some boundary objects there
static now watch what happens when I
click the mouse we're going to apply a
wind force to all these objects click
the mouse and you can see suddenly the
wind is pushing them all to the right
they're piling up it's a very strong
wind I let go the wind is gone
they all start to fall down how does
this happen well one thing we should
look at is in the main program here this
is just like what we did we could go
back to the chapter two examples and
this looks exactly the same the
difference is that vector seems kind of
extreme 200 comma zero remember we need
a world vector not a pixel vector so I'm
kind of making up numbers just to try
stuff you know if I said 5 comma 0 and
ran this we can see the wind isn't very
strong I'm clicking the mouse as hard as
I want but a number 200 is gonna give us
kind of a value that makes more sense
you know obviously that could be a
variable but why all I ever could think
of is Perlin noise but you could you
could have the wind shift from right to
left it could be a sine wave if there's
so many ways you could kind of augment
what this force is the point is just in
the same way we used step makeup forces
we can make up vectors and apply them to
the objects and again the only thing
that changed from our box class is just
adding this method just adding this
method receive the force find the object
center apply that force vector to the
object center it's all we've done just
this little bit of code is the only
thing that's added and this little bit
of code from our previous examples it's
that simple to start applying forces and
one of the things that's exciting about
this is if I minimize this we can go
back and here is example 2.7 from
chapter 2 you can see here is a bunch of
things being attracted to the center
this was the attraction example this is
without box2d these objects are
experiencing a force and we're updating
the physics ourselves through location
velocity acceleration now let's look
what happens when we take that exact
same scenario oh this really bothers me
that it's not the same size oh it's so
sad that I didn't do this in advance
edit this out somebody would I have my
magical editing machine ok look at this
so there's a lot more objects there's a
couple things they're inconsistent but
you can see the they're actually now we
have attraction but we have it with
collisions and you can see what's
interesting here as
things are attracted in the center there
also colliding with each other and
piling up and kind of getting stuck
based on how the behavior has worked out
so this is pretty interesting and if we
look at the code these two examples both
look at this attraction function and
this attraction function I'm going to
step to the side here this is how weird
we used to do it with P vector now we're
doing it with Veck to the func is
exactly the same look we a force with
which is between the location and the
other object's location now we're saying
hey this force is between one position
and the other object's position we're
just using the vector syntax now the
strength the same Bowl local instead of
multiply you could go and compare look
at exercise 5.10 look at example 2.7 and
you'll see that the exact same functions
are in there just one over here uses the
vet to syntax and over here uses the P
vector syntax so this takes a little
getting used to but we can do this stuff
really easily with box 2d so one thing
you might think about doing is go back
to stuff you used to do what did you
what kind of forces did you make up how
do you control the motion of object with
forces can you bring some of those
forces over into a box 2d sketch what if
you tried adding a friction force what
if you tried making a purlin noise wind
and there's so many ideas that you can
think about okay great I think this
covers this topic and there's only one
more box 2d video left to go we're gonna
look at how to determine when two
objects collide and cause an event to
happen when they've actually collided
okay</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>