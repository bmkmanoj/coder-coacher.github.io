<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>7.4: Mouse Interaction with Objects - p5.js Tutorial | Coder Coacher - Coaching Coders</title><meta content="7.4: Mouse Interaction with Objects - p5.js Tutorial - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/The-Coding-Train/">The Coding Train</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>7.4: Mouse Interaction with Objects - p5.js Tutorial</b></h2><h5 class="post__date">2017-10-16</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/TaN5At5RWH8" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">it's me back for another video about
objects and classes and stuff using
javascript and p5 GS so one of the
things that I get asked all the time
I think you know I'm wider around the
street people with like hey you there if
I made a bunch of bubble objects in a
canvas in the browser you imagine if
this actually happened to be on the
street and I want to like interact with
them with the mouse individually like
how would I know if the mouse is
hovering over one versus the other how
would I deal with that well it's just a
little bit of an aside first before so
this is what I want to implement in this
video how can you as how can you have
the user interact with individual
objects how do I set the code to make
that happen how's this work so here's
the thing what eventually if you're
watching all of these videos in the
order that they are there's going to be
a time in the future I actually recorded
these videos in the past but for you it
will be the future where I will add
things below the canvas like there'll be
a button here or like a box with text in
it and the canvas is actually one of
those things too on this page is a
canvas I could put other things on this
page everything on a web web page can
register events it can register this
event of like a click on that's not
really an event or a mouse-over
right I and and there's all sorts of
fancy ways in JavaScript that in p5.js
to handle all these different types of
events to know how users are interacting
with things but this thing here this
thing here is one thing the canvas the
only thing that p5 just knows is if
you're clicking on the canvas or not and
actually to be honest even if you click
off the canvas it's gonna make one kind
of like in its mind off the canvas that
might wander on we should just saw
happen because I'm using this global
mousepressed event I have an event it's
just press the mouse anywhere but what
if I want to have an event that's like
only when I click on this circle so
because these aren't separate the
circles are my own invention they're
pixels that I've drawn in their space
it's up to me as the programmer the the
person who designed this sketch to
figure out how to handle that and so
that's what I'm gonna do in this video
so let me think about what would make
sense I think what I'm gonna do is I'm
going to rewrite this sketch a little
bit I'm gonna get rid of this mouse
press
function I mean I'm gonna come back to
it but in in setup I'm going to say like
let X equal random with let y equal
random height let R equal random 10
comma 50 and then I'm going to say I'm
gonna just make this new bubble I'm
going to take this exact code from the
bottom you're over there never know
where to look
one of these days I'll figure it out
take this exact code from the bottom and
I'm gonna make a new bubble alright so
actually let's do this first let's just
pretend we only have one let's go let's
peel away from the array for a second
and let's simplify our lives and let's
I'm just gonna make a single bubble
object and that's gonna be it and forget
about this array just for a little bit
and so I'll come back to the array
eventually now notice that this I'm not
changing this bubble class at all it's
still the same thing what I where is it
ah but I do need to say that individual
bubble move bubble dots show so you
might like so what I want to do is I
want to have something to happen when I
click on that bubble so your first
instinct might be a ha well there's this
mousepressed function that i can write
out here oh wow look at this I wrote
this nice mouse press function right out
here yeah so why not why not there's
this bubble class that I've been
learning all about for it I just don't
let's just do this console.log clicked
on bubble right won't that work that'll
work oh I'm so excited
whoo this is gonna work nothing's
happening nothing's happening so I've
sent you in the completely wrong
direction
although the instinct is kind of right
yeah I this is like a function that's
just out in the wild it's global so it's
for any mousepressed this is a function
that's inside of the bubble so
it's fine but here's the thing this this
function mousepressed is a special
function that p5 recognizes just like
set up a draw or special functions of p5
recognises p5 is not going to go inside
of these new classes that you write and
somehow recognize that you can have a
mouse press function know where the
object is figure out it this is not part
of its capability wouldn't I don't even
know how it could even be capable of
that but there isn't any reason why I
couldn't write a function and you know
is it a little bit problematic for me to
call it Mouse pressed so maybe I'm just
gonna call it like let's just call it
like clicked for right now there's no
reason why I couldn't inside of the
mouse pressed function say hey whenever
the user clicks the mouse I know that
globally why don't I just call another
of function inside any of my objects
that need to handle that click so I'm
gonna say bubble clicked so now look at
this it's gonna work let's get a bigger
one it's gonna work okay I'm gonna click
on it okay look I clicked on the bubble
let me do it again
oh okay three times I'm gonna stick out
over here now six times seven times
eight so here's the thing remember this
is a global mousepressed so I can call
my function on this bubble object but
it's just gonna do this every single
time it's up to me to write some code to
figure out where wherever I click the
mouse I know where the bubble is and I
know how big it is this dot note and if
you know the X the Y and the R we can
write some code so I could say something
like hmm if okay well how do you so
here's here's here's a little bit of a
moment here let's say what I one of the
things I need to figure out and I've
probably done this in other videos but
this seems like a nice time to to talk
it through is if I have a circle how do
I know if a point is inside the circle
or is outside the circle because what
I'm trying to do is figure out is the
mouse that's the mouse arrow did it did
it click inside or outside or inside the
circle I could ask the same question for
a square I could ask that question for a
triangle I could ask that question for
some arbitrary strangely shaped polygon
and all of these are going to get
progressively more complex the square in
the circle are pretty rectangle and a
circle are pretty easy too
this is much harder but all of this is
possible the point is I need to write
some code to figure that out that code
needs to go here did
wherever that Mouse is is it actually
related to where this Dex that's not why
this town are are so how do I do that
so one of the nice things that on p5 and
both processing if you were using that
instead have is a function called dist
which stands for distance and I can give
that function two points arbitrarily x1
y1 x2 y2 so if I make one of those point
to the center of the circle maybe I'll
call that CX CY and then the other point
over here for example is the mouse where
the mouse clicked we'll call that MX my
I could pass these values into that
distance function and get the length of
this line call that D something that I
happened to know from my code oops wrong
button is R the radius of the circle now
I'm actually using it as the radius I am
because remember the ellipse function
itself wants the diameter so R really
means the radius which is half of the
diameter what do I mean by that so I
happen to know this dot R is this
distance or another way of looking at it
it's this distance right here so guess
what this is probably popping into your
head just about now if the distance
between the center and the mouse is
greater than the radius then that point
is outside the circle if it's less than
the radius then that point is inside the
circle ok so now we can come over here
and I could start to add that code I can
say let me find the distance between
Mouse X Mouse Y and Vista X and this dot
Y and I can now say if D now this is not
this dot D because this is a local
variable that I'm using just to
calculate for at this moment the
distance is less than this dot R then
console.log clicked on bubble
now we're really getting somewhere
okay so this is a moment of success and
that was really loud that's gonna ruin
this video so what I've now successfully
done is I'm able to determine and only
print out this statement so what's the
full story here this is where I know
that the mouse has been pressed anywhere
so it's up to me to now to say like well
if the mouse is pressed anywhere let's
check if the mouse is pressed for this
bubble and guess what let's go back to
the array now let's put this array back
let's make this a single bubble let's
put that into the array and now this
loop here just like in draw what I want
to move and show everything there's no
reason why I couldn't when I click the
mouse use that same exact loop and just
call clicked on all the bubbles that are
in that array so let's see if this works
whoops okay I have some air bubble is
not too fine a draw so I forgot that I
still have this old individual bubble
that I don't need anymore so I can click
on it it worked
I can click outside I don't see anything
let's let's actually add now let's do
this five times in setup so I'm going to
add five bubbles and now in theory it's
we're getting that message if I click on
any of them but here's the thing I
really want something to happen so I
could change its color let's let's
actually here's the thing what if I what
if I were to just hover over these
bubbles and I wanted to change their
color if I were to hover over the
bubbles and then have something on it so
well actually you know what there's
another important point that I want to
make I don't there's something about
this function that I don't really like
and yes I'm gonna do this from time to
time and you will too and it's okay but
right there I don't love the fact that
I'm using mouse X and mouse Y those are
global variables in theory I want my
bubble class to only know about itself
it doesn't really need to know about the
outside world is it to know it's on a
canvas that there's a mouse and in
theory what I want to be able to do is
right
a generic bubble class that I could say
hey is the mouse cooking on you or is
this other sensor overtop of this other
object at the same location as you or
you know I switch it to using like a
Kinect to track my hand is my hand
location near this bubble so really what
would make more sense is for me to
actually put arguments into the clicked
function and again I'm doing this sort
of awful thing where I'm giving them the
same name as arguments in as SRS
properties of the class itself I'm
giving these parameters X and y the same
name is this dot X this that Y but
javascript is very good at
distinguishing because these this x and
y are the ones that are coming in
through the parameters and these here
are the properties this dot of the
object itself but maybe if I want it to
be like a little less confusing about it
I might say like px py for like pixel X
or pixel Y or something like that and so
now what makes more sense is what I
really want to do is pass in Mouse X
Mouse Y because what I want to do when
the mouse is pressed is ask does this
point and really I might do something
like contains or inside or it includes
likes I could name that function in some
other way because really what I'm asking
is is that is that is that point inside
that object so interestingly enough what
I could do is let's let's give the
bubbles a color I'm gonna give it like a
brightness and make it zero and I'm
going to say fill this dot brightness
and I'll give it some alpha and then
what I'm gonna do is when I've clicked
on them I am going to say this dot
brightness equals 255 so the idea here
is that now
bubbles each have a new property a color
it starts at zero and anytime I click on
one of them I turn that one a different
color so what's really nice about this
is I have one function one function
that's part of the class
and I could use that function in any way
that I want though it just all that
function does is test if any generic
point is inside a given object and if it
is if it is inside that if it sorry
inside and I'm inside that shape the
geometry of that object if it is I
change its color and the way I happen to
be using it is by saying hey whenever
the user clicks the mouse anywhere let's
go check all the objects in our array
and see if the mouse is inside them so
all right I think this ends this
particular video I need to do something
where I one thing I would really
actually like to do oh so what you
should usually do an exercise here so if
you're watching this I'm trying to make
it hit do something different if you
hover over the the bubble change the
bubble to a rectangle see if you can
make the same thing work with a
rectangle allow yourself to click on it
twice turn it on and off that's
something you could try and have a
different behavior for when you click on
it versus when you just mouse over at
those types of things but what I want to
do something that I want to do and may
be able to in the next video is when I
click on each one of these I remove them
from from the world so I can I can add
bubbles and delete them somehow so we
have to look at how to delete things
from an array okay see you in the next
video perhaps maybe okay bye
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>