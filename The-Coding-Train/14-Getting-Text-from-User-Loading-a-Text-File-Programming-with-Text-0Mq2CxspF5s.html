<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>1.4: Getting Text from User: Loading a Text File - Programming with Text | Coder Coacher - Coaching Coders</title><meta content="1.4: Getting Text from User: Loading a Text File - Programming with Text - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/The-Coding-Train/">The Coding Train</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>1.4: Getting Text from User: Loading a Text File - Programming with Text</b></h2><h5 class="post__date">2016-09-11</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/0Mq2CxspF5s" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello welcome to another programming
from A to Z video tutorial and in this
video tutorial I'm going to show you how
to load text from a file into your web
page and I'm going to use that for a lot
of other examples and things that I'm
going to do in later videos
so again I'm using the p5.js framework
so first of all let me just show you
something that I have here I have a text
file as part of my folder along with the
index.html and the sketchiest file
obviously I could have sub directories
and do various things like that and this
text file simply has a bunch of
paragraphs of text from the Wikipedia
page on rainbow the rainbow Wikipedia
page so the very first thing I can do
that really makes it easy to load text
is that I can write a function called
preload and the preload function is
actually an event that happens before
setup is called so one of the goofy
things about JavaScript is everything
happens in this quote/unquote
asynchronous manner meaning you start
loading a file then you start doing
something else and you start doing
something else and you try to do
something that uses the file but maybe
it's not loaded yet and in a moment I'm
going to show you how to sequence this
sort of stuff and maybe later I'll even
show you more sophisticated ways to
sequence this stuff but right now the
easiest way is p5.js says hey if you
don't want to worry about about all of
that you can simply say load strings
rainbow txt into a global variable
called txt that i've made up as long as
I put that in preload by the time I get
to set up and I could do stuff to the
Dom of the page I know that that text
will be loaded and so what I'm going to
do here is just add in here console.log
txt so we can see what is it that's
coming out of the file which might be
something that you don't expect so I'm
going to do this and you can see here it
is now weirdly enough you can see like I
why is there this bracket there before
there's a quote there seems to be some
sort of and then there's like this year
then there's a comma and another quote
there seems to be some sort of array
here so let me do something to this file
I'm going to go to rainbow dot txt and
I'm going to say rainbow unicorn
blueberry you know what's good two is
mango
who doesn't love mangoes okay so I'm
going to change the text file to just
have four lines in it and I'm going to
refresh this page and now you can see
more clearly what's happening so one of
the things that load strings does for
you which is often very convenient but
not always so convenient is that it
gives you a body of text as an array
each element being the array being each
line of text in the file so you know if
you have some sort of like this can be
very convenient if you have a text file
of words like you might have a text file
of words you're searching for and
suddenly you have them all in an array
when you load that text file that can be
very convenient in our case here maybe
what I want to do and I'm going to undo
all this so I have my rainbow text back
maybe what I want to do is just put all
this text on to the webpage and so I
might want to say in my code create P
like make a paragraph with that text now
let's see what happens
weirdly enough I love sometimes you just
got to love JavaScript in libraries like
p5 yes it like figured out something to
do it took the array and it just like
made a paragraph out of the entire all
the things in the array and I think it
actually got everything but another
thing that I could do is I could use a
function called join which takes all the
elements of the array and joins them
together and I could actually join them
with a br tag in between them so you can
see now if I say join everything in that
array and put a br tag and I think I'm
probably supposed to type it like this
as a self closing tag then what you'll
see here if i refresh it is now I
actually am maintaining the line breaks
from that file in terms of rendering the
stuff in that text file on the webpage
so this is a very quick and easy way to
pull in a text file and display that on
the page so I'm going to use this in
later examples you can think of things
you might want to do like chop up the
text file count all the words in it
analyze it that sort of thing load
multiple text files you could call load
strings multiple time but there's two
more things I need to show you in this
video number one is you don't always
just want to like load the file in
preload
you might want to only load the file
when the user clicks a button or
something like that and number two is
you might want the user to be able to
submit an actual text file and I'm going
to show you how to do that as well ok so
I'm in the chat actually by the way
asked how does one do CSV files so you
could actually load a CSV which is a
comma separated values file which is
like a spreadsheet so to speak and then
parse it you split and chop it up via
commas and I might show you how to do
that in another video but there is
actually a p5.js function called load
table which knows how to load a CSV file
into something called a table object
that you can traverse and iterate over
as if it's with spreadsheet like
functionality but that's so for another
time okay so now let me get rid of
preload and what I'm going to do is I'm
going to go to my HTML file and I'm
going to add a button and I'm going to
call this button give it an ID called
load file and load a rainbow text and
now we can see if I go to the web page
we should see I have a button called
load rainbow text and if I go to the
sketch what I want to do now is first I
want to access that button via its ID so
I select it from the page now I have a
variable that knows about that button
and then I could say button dot
mousepressed and I can reference a
function I can say load I can write a
function called load file so now I can
write that function here so now I've
written a function called load file and
what I want to do in that function is
call load strings on that file name
here's the issue though now that I'm not
using preload I can no longer just set
the result of load strings to a variable
what I need to have now is a callback so
I'm going to say load this text file and
then I'm going to make a function called
file loaded file loaded and that
function I'm going to up so I'm just
going to write it up here is going to be
the function
that is triggered when the text file is
ready so there's a whole sequence
happening here I press the button on the
mouse load file happens I call load
strings when the text is ready I call
file loaded and what comes in their data
I give this function an argument I'm
going to call it data I could call it
text I could call it anything and what I
can do now is I can say text oops
ooh text equals data so what I'm doing
is I'm saying when the file is loaded
the argument to this function is filled
with the stuff that's in that file I can
set it equal to my global variable but I
actually don't really even need the
global variable anymore it sort of
depends what I'm doing here but what I'm
going to do is instead whoops I'm going
to get rid of this global variable and
what I'm going to do is I'm going to
take this and I'm just going to put it
in here and I'm going to say data so I'm
going to create that paragraph when the
text is ready so I'm setting up now a
sketch when I run the sketch nothing
happens but as soon as I say this I load
that text and it appears on the page so
this is how you can sequence the loading
of data from a file and obviously again
what can you do that's more interesting
than just display that exact text back
to you or might you have different
buttons for different text like choose
your own source text for this web
application that you're making that type
of thing okay so we've seen almost
everything now I have one more piece of
this what if instead of loading text
from a file I want the user to be able
to I want the user to be able to select
a file themselves so here's how I can do
that I can add to set up I can say
create file input I'm just going to put
that there with nothing else just to see
that this does something and I'm going
to do this and you can see look at this
I now by default this just that create
file input has created this whole choose
file no file chosen button thing on the
page so I'm getting a lot of
functionality from the web browser for
free and of course I could style this
differently I could change probably what
it says there instead of choose file I
could do a lot of custom stuff but I'm
using the
basic raw default behavior so when I
press choose file it opens up a file
menu for me and I could you know go here
and I could actually go in browse and
find you know my rainbow txt file and
select it and you can see there it is
now nothing happened so what I need to
do is I need to set up a callback for
when the user selects a file and there's
some complications here because what if
the user selects an image file
what if they select a text file what if
they select a you know a some other kind
of file but I can't think of right now
so I might have to handle different
kinds of files differently or do some
error checking and that type of thing
but basically I know that I need a
callback so let's go and add a callback
create file input and I'm going to say
I'm going to say file selected so I'm
going to write a function now called
file selected and I assume that file is
going to get some argument that function
is going to get some an argument and I
don't know what's going to be there I
could look up the documentation so I'm
just going to write console dot log file
now I'm going to run this I'm going to
go back and I'm going to select that
rainbow file and you can see ah look at
this what did I get I get a p5 file
object so there are lots of things here
that I get I have what kind of file is
it it has a type and a subtype what's
the name how big is it so what that sort
of thing so remember one thing that I
can do here is I can just say whoops
thing I could say something like create
P you know file name plus file dot size
plus file dot type so right now I'm
going to create a I could create a
paragraph element with stuff stuff about
that particular file so if i refresh the
page I select that file you can see ah I
got rainbow txt let me make this a
little bit bigger so you can see it it's
got twelve thousand some bytes in it
that's way too big
and it's a text file I could you know
select my HTML file it's still a text
file I could look at the subtype I could
try to get I feel like there must be an
image file somewhere on this computer
but I'm not going to bother to look for
it I'll let you experiment with that
yourself so you can see I can have the
browser I can have my code know about
the file that the user selected and even
better I can get access to the contents
of that file and the way that I do that
whoops what did I just what did I click
here
no stop there sorry um I can oops I mean
lost I want to show you other stuff
about the developer tools later but I
got lost in there so what I want to do
now is reproduce the contents of that
file and I'm going to say right here
create P a file dot and I think it's
file dot data
I believe the actual contents of the
file is in file dot data so I'm going to
do choose file I'm going to pick this
and you can see there it is here's all
the contents there now I not it's not
coming in as an array so I don't have
the line breaks I could do a replace to
put BR tags in it I'm not going to worry
about all that right now ultimately now
have the user able to select a text file
that I can process and return something
back to the user the other thing that I
will mention here is that I might want
to protect and say hey only if file dot
type equals text then create that
paragraph otherwise say I I need a text
file so here with a little bit if
statement I can add some error check in
here so if I run this again and I say
choose file and I go somewhere on this
computer under applications and I hate I
don't know I try to get this chest
application and I select that it could
say look here's this giant application
but I need a text file so you can you
can do some sort of error checking in
that sort of thing
we
if with within your code as well now
there's two more things about this
probably more than two there if you look
in the documentation there is a way to
allow and I'm going to look this up for
you right now create file input p5.js
hopefully this is going to bring me to
that page it did not so I'm going to
find it myself I'm going to go to a
p5.js org I'm going to go to libraries
I'm going to go to p5 Dom and I'm going
to look for create file input there is a
second argument which if you add allows
the user select multiple files and you
have to handle those a little bit
differently maybe I'll you'll see this
in some of my examples or maybe I'll
come back to this in a future video so
if you want the user BL select multiple
files take a look at this that's there
for you and the other thing that I'll
show you is that you can have a user you
can instead of having the user have to
select a file you can actually also have
a user able to just take a text file and
drag it into the browser drop it in the
browser and have your program process
that file and earth geez why is my phone
ringing incessantly turned up up well
I'm turning on airplane mode uh okay um
so if you want to learn how to do that
I'm going to publish examples that go
along with the A to Z course that have
that in it but I've already made a video
tutorial about drag and dropping a file
into the browser so I'm just going to
Google drag and drop Schiffman YouTube
and I'm sure this video is going to come
up right now so I'm going to reference
you you'll find a link to this video in
this video's description and probably
some kind of pop-up thing happening
right now if you want to take a look at
that you can go ahead and watch the drag
and drop a file video tutorial to see
how that works alright thanks very much
for watching this concludes the sequence
of videos about how to get text from the
user
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>