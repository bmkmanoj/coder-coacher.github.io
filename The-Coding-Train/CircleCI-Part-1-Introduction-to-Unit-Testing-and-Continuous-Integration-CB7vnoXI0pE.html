<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>CircleCI Part 1: Introduction to Unit Testing and Continuous Integration | Coder Coacher - Coaching Coders</title><meta content="CircleCI Part 1: Introduction to Unit Testing and Continuous Integration - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/The-Coding-Train/">The Coding Train</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>CircleCI Part 1: Introduction to Unit Testing and Continuous Integration</b></h2><h5 class="post__date">2018-02-08</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/CB7vnoXI0pE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">oh hello welcome to a special coding
train episode this episode is the first
in a series of some number of videos
that I don't know right now because I
haven't made them yet
all about unit testing and continuous
integration and this really fits into my
playlists and topics about open source
development so you know if you've never
used git or github before watching this
before you're here I might suggest going
or watching my git hub introduction to
github videos if you've never even never
used node you might even watch my like
what is node video I'll link to both
those in the description but other than
that this is for the total beginner who
has never done any unit testing or
continuous integration and you know why
I know that this video is for that
person I am that person before last week
I barely I mean I've done a little bit
of unit testing and I've dabbled I've
read I've seen other people do it mostly
I'm afraid of it I think like others
just gonna make it so I can never get
anything done any more people sorry no
it's gonna make it so you can get
everything done anymore so I'm here to
investigate that and I should have
mentioned this at the out rate this
video series is sponsored by circle CI
which is a company that provides as a
service continuous integration now what
that is I will get to eventually
unfortunately you're gonna have to watch
me could you talk to get to that but
let's so let's start so I'm gonna come
over to the whiteboard for really no
reason other than to write the word here
unit test it so continuous integration
could be used for a variety of different
things but probably one of the more
common things it's used for from what I
understand is TDD or test-driven
development so let's think about this I
was saying another video series you
could watch which is very useful about
unit testing and with circle CI it's
from MGP a fun fun function I will link
to those videos in the description as
well and npj says that you can think of
software a software project p5 sketch
you think of my snakes and ladders game
from last week as a big project divided
into lots of little parts there's the
player part there's the snake part the
latter part all these are units and what
if I change something about the player
to fix a bug but don't realize it's
also going to break whatever the LAT
ladder functionality or the snake
functionality is in this case if I have
tests that run for each unit to say this
little test code runs and says the
ladder is working this little test code
runs it says the snake is working this
little test code runs says the player is
working if I change just one I can run
all the tests and know that my code is
fine and the benefit of this is not just
for your own personal sanity but for
collaboration and open source projects
because this can be automated you can
have whenever somebody submits a pull
request to your project that tests are
run and it doesn't just give you
confidence about merging it gives the
contributor a good feeling and
confidence that the tests have run and
if they have it run then you can help
them figure out how to fix it so that
they do run so all this is good good
good good good good I'm going to learn
how to do it and try to adopt it more in
my work now where have I encountered
this before the place where I have
encountered this before is with the open
source project p5.js so p5.js you might
be aware of is a library it's a
JavaScript library that I use for a lot
of my tutorials learning about the
basics of coding and graphics and
creative coding and data stuff and all
this sort of stuff so all of the source
code for p5.js as a project is here you
might have encountered p5.js
as just this file and here I have my
snakes and ladders game in which you can
see like that's the p5 just library and
if I click on it it's like oh my god
this is all the p5.js code but if you're
working on developing the library scroll
Scroll scroll Scroll if you're working
on developing the library it's likely
that you're not you don't want to work
with that file so it's divided into lots
of little units and those units you can
find in the github repository in this
folder called source so in source you
can see there's all the code for all the
color stuff core stuff is like the core
drawing functionality data events and so
if and then there's a build process so
once you've finished doing your little
change or whatever then the process the
build process runs and finishes off with
this you know smooshed together p5.js
file that is all of the bits all the
units together in one files
be used more easily so during that build
process tests run so this is the source
fold these are the source folders for
example I'm gonna go here one of one of
the aspects that I worked on a while ago
is the random functionality so there's a
there's a file called random dot J S and
if I click on that we can kind of look
down and see like oh look here's like
look this is the actual random number
generator code that's inside the p5.js
library this is what actually runs and
it's kind of really interesting I should
do a video about this linear
congruential generator stuff but and how
random seeding works but that's another
topic so we can see this is the code now
where was that we have to remember that
was in p5.js source math.random so now
let's take a look and say there is also
but there is also test there's a folder
called test folder called source folder
called test I'm gonna go into test and
look at this oh and then I'm gonna go
into unit and all of a sudden look at
this
don't these directories look very
familiar to you for every single unit
piece of a puzzle of the p5.js library
there is a corresponding test and so
let's go right into math and let's go
right into random now this is not the
source code for the library remember
legally you could cut back and forth
between the video and look the same but
if I go here you're going to see this is
a test now you might be wondering like
whoo what is sweet mean and what is what
does I'm gonna look like test and assert
and type of what is all this code so
this is where you most likely want to
involve yourself with it's a weird way
to say it but might want to select and
use a testing framework or a testing
library if I write about this p5 uses a
testing framework called mocha which is
a very popular one I'm gonna as I get a
little further into this tutorial use
something called jest and I'll talk
about the differences or what that is
and I'll get to that in a little bit but
we can start to either without knowing
anything about it we can see some code
here because look at this alright this
is how we test the function random the
first thing we do is we set the random
seed and then we pick five random
numbers then we set the random seed
again and
five more random numbers what should
that do what makes it correct if when
you send a random seed if you get the
same sequence of random numbers so first
of all though before we even do that
like does random even produce a number
so we should check to make sure all ten
of those things are numbers and that's
what this assert type of blah blah blah
as a number is checking then we should
check to make sure well random supposed
to give us a number between 0 &amp;amp; 1 so we
should check to make sure all those
numbers are between that range and then
we should test to make sure random seed
work are they all is it the same
sequence of random numbers wake also
test if when you pass in the argument 5
if you get a number between 0 &amp;amp; 5 when
you pass in the arguments 1 and 10 do
you get the same you get a random number
between 1 and 10 so this is what testing
is that way if I'm contributing to p5
and I change something somewhere else
how what if I like don't realize it's
something I'm doing somewhere else in
the library actually breaks the way
random works this will tell me that so
this is why unit testing can be valuable
in a large or even a small software
project that is a collaborative project
or even one that you're just doing it to
test yourself as you go ok so that's the
basic idea of testing now let's think
about what are all the pieces you need
so number one is so I'm gonna so there's
so many possibilities you could do
testing and Python whatever language
you're doing you could do it so many on
I'm gonna zero down and live in the
JavaScript world you could be doing a
server-side web app just like a
client-side JavaScript things some open
source library that's meant to be used
by there's so many complicated scenarios
but let's pick a simple one I just have
a single JavaScript file called sketch
KS and this is my p5 creative assignment
bla bla bla bla bla bla bla and what I
want to do is I want to run a test on
the code that's in that file I need some
mechanism to do that the thing the tools
that I'm going to use to do that so just
is just for the testing is I'm going to
use node and I'm not using no no dot yes
because I'm creating a web server
although I might be doing that at some
point in another project I'm using no
just essentially is like a command-line
utility to run the test because there
are node package
collections of code and libraries to
allow you to do testing through node and
the one that I want to use is something
called jest and I'll be perfectly honest
the reason why I'm using just is because
I asked a whole bunch of people who seem
to know about this stuff
what should I use and they said yes now
I believe p5 uses MOCA you know type in
the comments your favorite testing
framework go nuts but just as a pro is
an open source project from Facebook
open source that I believe is generally
paired with react now again I'm not
doing react I don't even I know less
about react and I know about continuous
integration but I'm going to use jest
because it's pretty simple and I liked
it I looked at it it's fine but you so
that's what I need so what I'm gonna
need to do is somehow configure my node
project so that I can write NPM tests I
want to run this command it's going to
do a whole bunch of stuff and it's
either gonna say something like success
or failure and hopefully if it's failure
it's going to give me a report so this
is the idea of testing now while I'm
here in the kind of overall landscape of
this let's let me make a little map here
I can erase this let's think about where
everything lives because how to github
how does github play a role in this and
how does circle CI or continuous
integration play a role in this so
number one I have my on my laptop which
is my local client computer where I'm
doing the development I have sketched
j/s I also have my whole node project
which is really just by the way a
package.json file and some other stuff
what I could do is I could push this
repository I'll use the idea of a cloud
even though it's really just an
underground bunker of course as we know
I could use this I could push this
repository to github so I could have it
saved on github and the nice thing about
that is lots of other people could start
to pull it
then make changes or propose changes
through pull requests so where do I run
the tests on the one hand so these are
lots of other little client computers on
the weather had one hand I could change
my code and run my tests locally and
then I know like my test run great I'm
gonna push to github other people could
clone the repository make changes run
the tests themselves and feel confident
and push to the repository but wouldn't
it be nice if github could run the tests
for me any time that I try to push code
there it's gonna say like let me test
that first I'll tell you if it's ok it
can't get up does not have that as a
server you can't execute code on github
you can host your projects there you can
even web host you know client-side
JavaScript programs there but you need
something else you need a continuous
integration service and that is where
something like circle CI comes in so I
don't know what I'm drawing here but
circle CI is another thing that lives in
the cloud shaped underground bunker and
what Circle CI does is it can be and it
can be a service it can be linked as a
service to your particular github
account so you sign up for a circle CI
account in the same way that you sign
for a github account Circle CI a-- has a
good free tier which you can do just
about everything that i've shown you in
this video for small projects and small
teams you can absolutely use it and so
what you can do is you could say hey
anytime i push or anytime i commit or do
a pull request please go and run open a
little instance of an server on circle
CI to run a bunch of node stuff to check
the tests and report back so this is the
process and so what i'm going to show
you as i in the next video i'm gonna
actually just make an entirely simple
basic example of one little javascript
program with one test and continuous
integration i'm gonna make it so that if
you the viewer watching right now you
cannot you could you cannot submit a
pool room at a pull request but i as the
administrator of the repository will not
be allowed to merge it unless the test
that I have written for that project
pass so that's the basic gist of it I'm
sure there are going to be some
questions
things and I will return in a moment in
the next video to start writing what I
needed package that JSON what I need and
sketched is what did I need in a test
file and all the other things that I'm
forgetting to mention right now</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>