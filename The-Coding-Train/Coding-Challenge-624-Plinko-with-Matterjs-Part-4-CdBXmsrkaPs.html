<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Coding Challenge #62.4: Plinko with Matter.js Part 4 | Coder Coacher - Coaching Coders</title><meta content="Coding Challenge #62.4: Plinko with Matter.js Part 4 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/The-Coding-Train/">The Coding Train</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Coding Challenge #62.4: Plinko with Matter.js Part 4</b></h2><h5 class="post__date">2017-03-13</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/CdBXmsrkaPs" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello welcome to the fourth part of this
coding challenge now this fourth part of
the coding challenge is just going to
start in a sort of middle place and it's
actually a fourth part that I recorded
last week where I add sound the reason
why I'm here is the beginning of this
video just to let you know about this is
because I made some improvements in the
third part of the coding challenge where
I increased the peg size and and fixed
some of the physics setting so if you if
you're curious about that you can go and
you have a watch the third part go back
watch the third part otherwise stay here
watch the fourth part where I add sound
and then I check the code on github make
your own version of this the code on
github will have all the pieces from all
the parts combined together so thanks
enjoy watching me as sound which will
actually be some digging she'll be very
annoying so if you don't like allows a
lot of dinging please go go find some
other video some cute kittens not going
or something on YouTube there's lots of
those they have many more views than me
which is fine there's no competition
with the cute kittens I think a lost
topic enjoy the coding challenge goodbye
so now I have in the the directory here
I did this stir when I took a little
break if I go to the Plinko example I
have an mp3 file ding call ting which
makes a little ding I have a feeling
this is going to be somewhat annoying
that it's going to make a ding sound but
let's let's give it a try anyway and see
what happened I think would be much more
exciting to have them be musical notes
and maybe in a certain key or something
and it plays a little song I hope you
create that so you can use sound
synthesis so I'm just going to add a
function preload which is a easy way to
load some media assets before the sketch
starts without a callback although I
externally could use a callback and I'm
going to make a variable called ding
i'ma say ding equals load sound ding mp3
now one thing I need to make sure is in
index dot HTML I don't say oh I do have
a reference to p5 dot sounds ah yeah so
you need to also load the sounds library
and now what I'm going to do is go back
to here and I just want to play the
sound so what I want to do is I'm just
going to add function
mouse press
and I'm just to say ding dot play so
let's just see what this does
oh I are you so that's basically all I
need is that really laughs I hope that's
okay
I think I have the volume kind of turned
down as it goes in so now here's the
thing I thought oh this will be an easy
problem all I have to do is play the
sound every time of particle it hits a
Plinko or a peg I'm going to have to
look at the matter documentation because
the problem is I'm not in control of the
physics remember I just set up the
worlds that put these things in it in
these locations and let it go about to
sing a copyrighted song which I stopped
myself to do okay okay you really don't
want me to so how do I know if I'm not
in control the physics engine when a
particle hits a peg you know I could
start to look at their distance against
each other but that's then I'm like
don't play this I'm not somos so I'm not
the one I don't want to do that because
then I'm rewriting with his engine the
physics engine is doing this so most
physics engines come with some type of
event listener a way that I can get a
callback function that's triggered
whenever two bodies collide so actually
this might be kind of cute this I
haven't tried to do this yet with matter
KS I've done it with box 2d and other
foods engines so let me come over here
and I guess we're just going to have to
start looking in the matter J s
documentation so I'm going to look in
documentation what am I looking for is
then that sounds right
events off the vents on a callback
function to a given event so this might
be right trigger no events on I'm a
feeling that's it subscribe now what are
my possible event names and what is the
object I need some more information here
matter J s documentation so let me think
about this maybe there's an example is
there an example matter J s example
collision
so this looks like exactly what I want
to do I want to know when it when a
collision has started and I want to know
which things have collided so let's grab
this code and put it in right here so
and okay some matters dot it so what I'm
going to do I'm going I'm going to keep
with our way of doing things and I'm
going to say events equals matter dot
events just to keep that in my list of
aliases and I'm going to say event on
and I should I need to do this in setup
so as after I've made the engine I can
create I want to assign a collision
start event and I'm going to take this
out here and say collision so I'm going
to I think it'll be a little easier to
read here if I have my own function
called a collision that receives an
argument called event so the idea here
and I apologize for this not being let
me see if I can move this over a little
bit so the idea here is that I'm going
to say I want to assign a collision
start event with this particular engine
to this function called collision and
then this function collision will
automatically receive an argument called
event which is going to have information
about what's collided so I'm just going
to say console dot log event I just want
to see what those events look like so
let's see if this works okay okay stop
stop there's too many there's too many
of you I just want to look at one so
what I see is collisions start a pair
the pair has an object it has a body a
and a body B I have a feeling that these
are the two things that have collided
body a and body B so that's good I need
that there's probably other information
about the collision with all sorts of
pairs it's all sort of stuff in there
but I think it's enough for me to look
at the event pairs index zero why could
there be multiply guess there could be
multiple pairs in the same a time that
come in to one event but I'm going to so
I want to look at the pairs are
event pairs and then the collision is
the I'm going to do a little I'll do a
loop that's fine there could be multiple
pairs so this is an array probably
unnecessary it looks like there's just
one pair each time but I'm going to say
bah da equals pairs index I body a and
body B equals pairs index I body B now
bodies can have labels and names and
ID's which could allow you to and I
think I'm going to need to do this
actually we need to assign them a label
so let's just look at this for a second
so let's look at what I'm getting and
let's just look at console dot log body
a and body B well maybe I need to do -
look at those separately let's just look
at one of them let's just look at body a
so here we go refresh
I hold on why is that stupid X thing
there okay refresh so okay now I'm
getting I'm getting a body I'll look it
even said circle body it has a label and
it has an ID so this one has a label it
has a different ID so this is good so
the thing that I want to know though is
all these things can collide with each
other I want to know only when a
particle has collided with a Plinko I
mean I might want to know when particles
collide with each other or particles
collide with the ground body or the wall
these bucket things but just for right
now I want to know when so so the way
that I'm going to do this is there's
probably a mechanism in matter j/s that
might handle this for me but here's the
thing
this is my thing particle my particle
has a body in it and what I want to do
is I'm going to say this dot body dot
I'm going to this is what box B D does
actually box2d allows you to sign user
data so I'm just going to kind of I'm
trying to think of what's the best way
you know I'm actually have to take that
particle oh no no I'm going to say type
yeah I'm just going to type equals I'm
going to use a string so I'm adding my
own property to
Nader's SAS body called type and I could
use the lathe maybe I should have use
its label I'm going to overwrite its
label how about that and I'll call it
particle as I'm not using the label for
anything else
I don't think internally particle digest
is using the label so I need to get
particle a label and then in the Plinko
thing I'm going to say I'm going to give
it a label as Plinko so now what I want
to do is in that listener right where I
have this collision
I want to console.log body dot a dot
label let's look at this particle
particle particle particle putco
particle particle so let me look at body
a label and body b label so now we're
seeing particle template go particle no
point go particle is linked oh click on
the particle to go to particle click on
a particle particle in a rectangle body
right that's the bottom so I only want
to play the sound if it's a particle and
a Plinko so what I can say now is if
body a is a particle and body be a label
so hold on
let's just call label a equals body a's
label and ylabel b is body b label at
this whole extra collision listening
thing in this video tutorial all of a
sudden so now let's say if label a is a
particle and label B is a Plinko what is
what was it called ding dots Lang and
then this is a very silly way that I'm
going to write this because there's all
sorts of major ways I can write this but
also you know if the first one was a
point go in the second one is a particle
also play the sound so let's give this a
try and see what happens
oh my god okay okay stop stop please
nobody ever run this program again you
get the idea though so I encourage you
to face be more thoughtful about this
let's comment this out right now God let
that out to think about how could you
you know have a different label or a
different type for each row how could
you have a bunch of different sounds did
that really hurt everybody's ears I'm so
sorry I said there needs to be a warning
um is that going to be like do I need to
do that again so hopefully this isn't
ruining everybody's ears but I'm
actually done with this
this is Plinko I'm going to let it run
for a little while
thank you for watching this was I could
have recorded my train whistle thing so
this is the Plinko coding challenge in
matter yes I hope that you make a better
version of this maybe you think a Kree I
mean you uh you think about the visual
design of it you think about the sound
aspect of it you think about why you're
using it in the first place perhaps you
can use it as a part of the game or
something else or a poetry generator I'm
sure there are like lots of inaccuracies
in terms of like an actual perfect
Plinko board that creates a nice
normalized distribution you should see a
nice bell curve so maybe you can make a
variation of it where you really see
that bell curve
perfectly so share those with me share
share the versions you make and I'll see
you in another coding challenge Monday
thanks for watching</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>