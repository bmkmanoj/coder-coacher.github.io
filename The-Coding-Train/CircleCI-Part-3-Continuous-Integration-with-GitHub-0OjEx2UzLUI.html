<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>CircleCI Part 3: Continuous Integration with GitHub | Coder Coacher - Coaching Coders</title><meta content="CircleCI Part 3: Continuous Integration with GitHub - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/The-Coding-Train/">The Coding Train</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>CircleCI Part 3: Continuous Integration with GitHub</b></h2><h5 class="post__date">2018-02-10</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/0OjEx2UzLUI" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello again hi back in my previous video
in this series about unit testing and
continuous integration I got all the way
up to the point where I wrote the test
and I ran the test through NPM tests and
then the tests passed now this video
series is sponsored by Circle C I link
to find out more about circle CI right
here because the goal that I have with
this series is to show that once all
I've done so far is this piece once I've
written my test locally using node for
some JavaScript thing that I'm working
on I want to plug that code up on github
and integrate it with circle CI so that
the test that I could run locally will
run automatically here now I still might
want to it's still a good practice to
run the test locally like why push
something to github that I know isn't
gonna work I might as well test it but
the point is if I'm collaborating with
lots of other people
somebody might forget to run the test
not know how to run the test and this is
going to make the hopefully the open
source contribution process a bit
friendlier and instill confidence and
happiness in the open source contributor
I hope it does that that's what I let's
all I would like in life okay happiness
and confidence you go you know maybe 30
percent of one of those anyway so here
we are
so let's how am I gonna do this now you
might not be aware of this but I can't I
don't I don't need github at all if I
just want to use a version control and
get I could just use version Cohen would
get right here with terminal on my
computer and just like I said
NPM in it to create a node project
package that JSON JSON file I'm gonna
say get in it I think that's right you
know ah initialized empty github
repository in testing test tests I
should get now one thing that I won't
definitely want to do here is I want to
create a new file called dot git ignore
now this is a bit of an aside but it is
sort of important get ignore file is a
file where I can put names of things
that I don't want to be part of the
repository when I push it up to get up
like I need might need those files
locally so something that passwords in
it or secret API keys those would be
things and I don't want to push up to
github but in this case I actually
don't want to send up the node modules
like whoops modules like I have in
package dot JSON I'm using this dev
dependency just to run the tests and if
I go into node modules it's like a huge
amount of folders and files those things
are not my code it's not even right they
also get installed separately whenever I
put it somewhere else on the server so I
really don't want those things to be
committed I also might as well say
because I'm on this ridiculous Macintosh
machine which makes these dot d S store
files which by the way are my initials D
S which kind of freaks me out like is
this all these computers all about like
the my store in some weird way anyway I
don't know little freaked out and then I
don't know I don't know what this but I
forgot what this package dot lock file
is I'm gonna I'm just gonna ignore that
too so I don't want these files and now
I can say get status to sort of see
what's going on and we can see aha
these are the untracked files these are
the files that are part of my github
repository so I am now going to say git
add dot because I want to add everything
then I'm gonna say git commit starting a
new project about testing with tests and
also more tests ok so I commit that and
then I say git push origin master right
boom boom boom Wow of course I can't say
git push origin master I just made this
nice git repository on my computer it
doesn't know where master is origin any
of this stuff so in order for me to do
that I need to create the repository on
github so I'm gonna go I'm on github I'm
logged in to my daniel sheath mon
account and but i'm gonna create a new
repository and this repositories gonna
call testing test test it is all about
testing with tests also tests then i'm
not gonna do this initialize repository
the readme I don't need the get ignore
cuz I did that myself and I want to
owner I want to put this now this
doesn't really matter so much to you but
I'm gonna put this in the coding train
organization to make it easier for you
to find
rather than in my own account and then
I'm going to say create repository and
the nice thing about this is it's giving
me this command I kind of did this stuff
already like I created the repository
locally on my computer usually by the
way my other videos I just make the
repository on github and then it's empty
and I clone it to my computer to add
stuff I'm just showing you a different
way of doing this like I made it already
now I'm gonna link it up with github so
I can just grab this command right here
and I'll paste it into here so you can
see it so the idea here is that I'm
saying hey remote I want to add a remote
repository for this repository on my
computer remote location for this
repository I'm gonna call it origin and
this is its URL get at github comm
calling coding train testing test test
test now I'm I have my this computer
already set up with like special keys to
be logged in and all that sort of thing
that's a whole separate topic but if you
have that I can make a video about that
I suppose if I need to but so this this
might you might have some permissions
issues if you haven't set that up yet
okay here we go
so that looks like it did that and now I
should be able say git push origin
master okay that was fast didn't finish
break in and get the waiting music on so
there it is now it's there I can go back
to github
I can hit refresh and we can see all the
code is there now you know what it's
really a good idea to have a readme and
I I agree so I'm gonna use this nice
little button that says add a readme and
I should put more on the readme which I
will do later but I'm just going to
commit directly to the master branch
every project but apparently there are
other ways of working so I'm actually
going to make it the next step is I'm
not gonna be allowed to do that anymore
I can't just commit stuff directly to
the master branch these sort of
published finished version without
running those tests first so the review
is there now so where are we if I look
back at my diagram we have now checked
off this much we have now pushed it to
github so we've checked off this much
and anybody watching this this is you
most of you probably watching this as a
corded video tutorial but I'm actually
doing this live at the moment so not yet
a moment you can start submitting your
pull requests to this repository because
I'm gonna and no to please be nice be
nice about it and be on your best
behavior and I am going to I prolly
Shinto said that I am going to your pull
across will test will be run on them all
right so I need to link this now - why
why I'm here in the first place
Circle C I so Circle CI is a company
that provides as a service continuous
integration and how do I get that I'm
gonna go to go to app I mean so I'm at
Circle City I calm you can start by
going to this URL and I'm going to go to
that now I'm already logged in so let me
actually log out because I think this
will be useful so you probably want to
do sign up let's just click that for a
second and sign up with github that's
what I did I think I could probably just
login so they already have an account
but so I'm gonna go to log in and I'm
gonna just click log in with github so
both should work just fine I log in and
now I am in my circle CI dashboard
interestingly enough I have no projects
I'm gonna go over here to projects and
it says coding trainers know projects
building my circle CI because I don't
actually know anything about this or do
this I just try to learn it this week
and make a video tutorial about it but
I'm going to more in the future I'm very
excited about it so what I want to do is
I want to add a project I'm going to add
a project and then mmm no no this is oh
there it is testing test test huh that's
what I want to add now I should show I
should go back over to oh it figured out
already so I could have gone to other
like I'm a member of the ITP NYU
organization which is where I teach the
processing foundation there's me so but
luckily I didn't realize this it's
already defaulting to the coding train
so if you don't see the project that
you're looking for here the github
repository it could be because you're
actually not in the correct organization
or account but I am so I'm gonna go to
testing test
to hit the setup project now I want to
use the 2.0 version of circle CI because
it's new it says new there and it's I
hear it's great oh it's something called
docker so this is another little piece
that I got to put into this puzzle
what is this docker thing talk about
that in a second come back over here
alright and I'm gonna pick my language I
am using node Oh beautiful Wow
does it just like know that already
because the code that's in there it
probably did and then it's gonna give me
some instructions create a folder named
circle CI and add the file config dot
yml so this is what you need to do
Circle C I can see your github
repository because you've integrated
them but it doesn't know what to do like
what you might suppose were in a test
like what does it you want me to do so
in order to tell it I'm gonna go back to
my repository I'm gonna create it's not
a new file shoot I'm going to create a
new folder this folder has to be called
dot circle CI and it inside that folder
I need a file called config dot yml so
that why I'm out is a format much like
XML or JSON and it is I believe called
it yellow so now what I could do
actually is just like there's a sample
so circle CIA is nice enough to provide
you with a sample I'm just gonna use
that sample but I'm actually going to
simplify it after I use it so I'm going
to copy it to clipboard and I'm gonna
paste it in here and I am going to I'm
gonna delete a bunch of stuff
okay I do this okay
I think I've got what I want so I made
you know I'll try to return back to that
file at some point to look at some of
the other pieces there okay so this is
the y Amal format that is giving the
much like package JSON has all the
configuration information for for my
node project config dot yml has all the
configuration information for circle CI
and these are the things that I want to
do the jobs that I want to do is I want
to build my project and I want to build
it using this image with docker what is
that image so this is what's exciting
docker is not something that I've used
at all in any tutorial before but docker
is and somebody correct me if I'm wrong
here but docker provides a way of having
this like self-contained environment
that has no nothing external setup yet
right so I can say like hey this is this
clean new environment it's going to
install node install the packages run
the code from scratch so I couldn't so
in other words if by accident a package
is installed but I don't have it in my
configuration file and I wasn't using
something like docker I could not
realize that my codes actually broken
but it kind of runs by accident over
here for some arbitrary reason so docker
is a way of saying like let me start
with this docker image this environment
stand-alone environment and the one that
I'm using is I want any node and I may
know what I should do probably is if I
go onto my back to terminal if I say no
- easy I'm using 8 point 9.0 so maybe I
would say like hey why don't you give me
eight point nine point was it zero or is
a ten yeah zero so I think they'll be
fine but you know you might want to
that's another thing you do which
version node are using and then in order
to know that my code works I just need
to run npm install because i need to get
all those packages and I need to run NPM
test and this by the way is going to
make it run slow because NPM install
takes a while to install lots of
packages
after install fresh every single time
Circulo CI runs it and there's ways of
cashing it and it's probably a lot of
that has to do with what I delete it out
of there we come back to that later but
I want you to just see this is the very
very basic idea I should also point out
that this working directory i think is
actually unnecessary for a very basic
example but if you need to because it's
gonna probably just default to my root
project directory but if i need to be
specific about directories I could use
that potentially okay so let's leave
that there and now what I'm going to do
is I'm going to say git status oh and by
the way Sofia the chat told me that it's
actually probably a good idea to have
the package lock file because it has
some important metadata in it so if we
put that back while I'm doing this and
I'm going to say a git status and I'm
gonna I'm gonna say git add everything
git commit adding circle CI and package
lock JSON for no good reason I'm gonna
do that okay now I'm gonna say git push
origin
I rejected oh oh well why did that
happen so this actually happened I was
excited for things to get rejected later
but the reason why this happened now is
I forgot that I added this readme file
on github so my local repository doesn't
have that change yet so I better pull
that readme file and now and it put me
into some texture I just said : return
like instinctively and I'm going to now
say git push origin master all right so
now I have sent everything up to github
so what do I have now I've done this
I've sent it up again up and in theory
I'm like linked somehow with circle CI
huh let's see what else do I need to do
there's a bunch of steps I want to do
but I'm just curious what else do I need
to do actually technically speaking so
if I go back here oh well I want to say
start building so I might be ready now
did I follow all these steps I updated
the llamó file
I pushed the change to github and now I
can click start building so I'm gonna do
that hope you can just huh it's running
it ran npm install' ran test okay so I
missed the reason why why it fails I
missed a really important step here in
my trying to make that file simpler I
missed a very important step which is
that I need to check out so what the
first thing I need to do is check out
the current code from the repository
before I run npm install an NPM test so
it ran those things because that's
what's written here but didn't actually
grab the repository from github so now
let's try this one more time so what I
should be able to do is I should be able
say git status just to check okay the
only thing I did was modify my config
file get add git commit forgot the check
out step and get push origin master and
now if we go here now it should if I go
back to here it's actually running
already so it's automatically anytime I
push something to get up it's already
linked and it's running this so I can go
in here and wait yeah you can see now
it's whoo it did it so look at that adds
one plus two equals three passed in four
milliseconds test suite one pass test
one pass total time ran all test suites
oh that's the wrong stuff whatever kind
of works all right so this works one of
their four wonderful now just for the
sake of argument let me oh no no that's
so let's now go and protect ourselves
let's do this last step so I do have the
test running on circle CI
but what I want to do now is I want on
github I want to say protect master I
want to make it so that you cannot push
any code to master at all and you cannot
merge any code to master without the
tests having run and passed first so
let's go do that so that is something I
have to do through the github interface
so I go back to the project and I'm
gonna go to settings
I'm gonna go to branches and right here
what I want to do is under protect
protected branches I want to protect
master and I'm gonna do a bunch of
things i'm gonna click protect this
branch I'm gonna say I'm not gonna
require pull request reviews right now
that could be interesting
but I'm gonna require status checks and
I want to make sure look at this right
down here that my circle CI status
checks run and then I also want to do
include administrators so even me as the
administrator of this project cannot do
anything without those tests running so
I'm gonna hit Save Changes I am going to
put in my password and now what I'm
going to do is I'm going to make a
change in my code I'm now going to work
on my code doo doo doo doo doo Oh a plus
B plus 42 that's definitely going to be
a good change to my code yay
and now what I'm gonna do is get add git
commit I know a better way to add two
numbers and I'm gonna say git push
origin master aha yes good okay so it
says protected it did not let me do that
protected branch update failed required
status check so we did not do that so
now what I'm going to do is I'm gonna
say okay I'm gonna say git push origin
master : so I mean I could do is I could
branch here on my computer and then
create a new branch and move that do the
change there and push it but this is a
nice easy way of doing it
git push origin master : live coding
train so this is a new branch that I'm
calling live coding train I want that to
be the branch on github and I'm going to
take my master branch from my local lean
self and push it up to get up and I'm
gonna do this and so that had no problem
having me do then I'm gonna go here look
at this already less than a minute
it says hot you recently pushed branches
live coding train less than a minute ago
let me compare and pull requests so I
know a better way to add two numbers
seriously I really do it involves the
number 42 so you know obviously good
practice in writing thoughtful messages
and everything your pull request I'm
being silly here I'm gonna hit create
pull requests and now look at this our
dear and it already ran the test I took
so long talking and like blah blah blah
it actually probably ran the test even
before I did the pull request so look at
this he required the test failed and so
this is disabled I cannot merge this
pull request I can press this button as
much as I want but the test has failed
and I can even go under here under
details I can probably I can do this
it's going to take me directly to circle
CI and I can look that it expected the
number 3 but received the number 45 so I
don't think that if you click on that
under more details you would be able to
get here but because me as the
administrator and the owner of this
circle CI account I can see well what
actually caused this pull request to
fail so now I can now I realize it was
the number 42 I can say git add git
commit fixing the adding numbers thing
and then I can say git push origin
master what do I call it live coding
train so I'm going to push this change
that I made locally on my master to
coding train and we should see now live
in the page ah come on get there quick
shoot where is it
no it's running the checks again
come on Brutus so one pending check one
pending check i added some new commits
you can see my new commit here it's
there so now all the checks have passed
this branch has no conflicts I can show
all checks I can see it there I could
click on the details but now I can
simply merge this pull request and it is
now done all right there was a little
edit point there while I waited to let
you meet people from the community or
watching this live you except for the
this moment in time right now are not
watching this live and there are some
pull requests here so we can see here by
the way some of this yellow means the
status of the test is waiting to be
reported and this means the test ran and
tests passed so let's look at this me I
am so me let's look at what's been
changed so this first of all
interestingly enough there is this is
some nice things we can learn about
better programming that I do here that a
product function was added to return the
product of a and B and then module dot
exports was made into an object so you
could get the sum which is the sum
function or the product which is the
product function and then look at this
constant sum comma product equals
require sketch so this is a nice way of
importing multiple functions and we have
here then a test of that so let's
actually let's run this pull request I
mean we don't need to run this pull
request let's merge it looks great so
I'm gonna say all checks have passed
looks great so I'm gonna comment and I'm
gonna merge and then I can go back to my
pull request page and we could see evil
pull requests so I'm not going to keep
going through all these I'd be
interesting to see I you know it's very
slow to run all of them because so many
pull requests came at all once which is
probably unlikely in a real scenario but
I also and
I think it has to run npm install every
single time and there is a way that that
can be cashed if you look at the sort of
full sample config dot yml file alright
so i will review all these later and
merge them so what's left to do I think
I've shown you the full picture I'm
gonna do one other video where I set
Duke I almost you know we do this again
but I'm gonna set this up for a real
open source project that I'm developing
and I'm gonna just add maybe one test to
it and then I'm gonna ask the community
to contribute more tests to it so I'll
do that in the next video because as it
relates to the neural network machine
learning project that I'm working on
okay took another break and boy have the
pull requests been coming in it's kind
of amazing
but you'll notice every single one of
these is waiting waiting waiting
strangely I just showed you how I merged
me I am so me as well I forgot that me I
am so me is a member of the coding train
organization so me I am so me was able
to make a branch within the coding
within testing test test itself rather
than a fork of testing test test that's
a little bit of a subtle distinction
here but all of you watching all of
these have made your own fork and then
submitted the pull request from there
and there's actually a setting inside if
so if I'm on the coop my testing test
test project and I go here to settings
and I go to advanced settings build
forked pull requests this is what I need
to click to on so in this sense if
you're only working if you're working in
a private repo or repo where only people
with some sort of permissions are making
changes but if you're accepting
contributions from the community at
large you're going to want to have this
be on so I'm gonna collect the click
this is on
I think it'll dynamically save let's see
let's see if i refresh here if it starts
running some of these status checks okay
we can see that these tests are now
running we see evil pull request somehow
passed the test I think some of them
probably won't run until well let's see
required let's I think so and we can go
we can go and look
Circle CI and we could see here's a
queue of all the different tests that
are running this one's running now pull
request number 22 failed rebuild they
could rebuild that one so we can see now
I should be able to look through all of
my pull requests and we could see uh
yeah it's just running them in some
order it's gonna take a while to run all
them okay great so I think I finished
this video I think I already finished it
earlier and then I came back and kept
going but hopefully all you've seen all
the basics now right you've seen how it
is you can write some JavaScript code
how it is you can make a node project
that can run some tests for you using
gest you can push all your code to
github integrate it with circle CI so
that anytime somebody makes a pull
request to your project which is
protected you run the test and you can
see where those tests passed before you
merge the code alright so I want to try
to into another video where I look at a
slightly more real-world scenario where
I'm going to push my matrix math library
to github and put all this together and
then solicit contributions for tests and
the like from the community ok thanks
for watching</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>