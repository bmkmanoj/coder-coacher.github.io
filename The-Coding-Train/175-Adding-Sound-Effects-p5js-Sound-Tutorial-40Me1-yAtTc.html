<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>17.5: Adding Sound Effects - p5.js Sound Tutorial | Coder Coacher - Coaching Coders</title><meta content="17.5: Adding Sound Effects - p5.js Sound Tutorial - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/The-Coding-Train/">The Coding Train</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>17.5: Adding Sound Effects - p5.js Sound Tutorial</b></h2><h5 class="post__date">2016-06-17</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/40Me1-yAtTc" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello and welcome to part 5 of my p5.js
sound tutorial series now in this
particular video I'm going to look at
adding sound effects to p5 sketch we
looked at playing like a song in a p5
just sketch and starting and stopping it
and manipulating it but what happens if
you have something like a snake game so
this is a an example I made in a
previous video where you can play a
snake game meaning the whoops you move
about the screen as this snake and you
try to gather up food and as you gather
up food your snake becomes longer and
now so what would it mean to add sound
effects to this particular sketch so I
have a few ideas I made a list over here
the first thing I want to do is just add
two sound effects so a sound effect for
each time you eat the food and a sound
effect for each time you have to start
over when you run into yourself I also
want to add some background music and I
want to look at see what happens could
we manipulate the background music
having it speed up or slow down based on
like how far you're getting in the game
and then also there's an issue that
comes up with working with sound effects
if you have a sound effect that you
triggering many times over and over
again and so I want to look at that I'm
able add a sound for changing directions
I'm going to do all of that in this
particular video now where am I going to
get my sounds from so there's lots of
places on the internet which you could
find sounds this is a particular sound
effects package I will link to this
particular sound effects package it has
a Creative Commons license it's
available on github I've already
downloaded it as wonderful sounds in it
that were made for this for the coding
rainbow channel specifically so you can
see here this nice page I can just test
out with some of these sounds sounds
like for example this is cookie
frightened boy with me ok so I already
have all these sounds downloaded and so
what I'm going to do is go to the finder
right here and this is my this is my
p5.js sketch I have a libraries folder
and I have two JavaScript files and an
index of HTML file what I want to do I
think is to is make a folder in here
whoops I'm in the wrong place I want to
make a folder called sounds and then I'm
actually just going to take all
all of the sounds from that sound
effects package and copy them into here
I'm not going to use all of them so now
you can see it with my project I have my
JavaScript files my HTML files and now
also this folder of sounds and you can
see like if I'm going to start with one
of these alerts you can see how they're
named alert - oh for mp3 so this is
going to be really important because I'm
going to need to reference the file name
specifically when loading the sound so
let's just make sure first I can do that
so I'm using the a variety of different
sound formats you can use which are
supported by different browsers and I'm
not going to get into that in this video
I'm just going to use mp3 files which
will hopefully work in most scenarios so
let's say I want to try this let's try
alert number 6 so the first thing I want
to do is go to my code and I want to
create let's make this the sound effect
where you eat the food each sound and
I'm going to add the preload function I
think what I might like to do in a
separate video is show you how if you
have a lot of sounds show you how to
create a loading animation right now
that the this it's just going to take a
minute I'm not a minute but take a few
seconds for the sketch to load and I'm
going to say eat sound equals load sound
and then now this is the name of the
sound file but but I also need the path
right if that was just in the root
directory this would be enough but I
think as it sounds and then alerts I
think that's right let's go back and
look sounds and then alert and it's with
a capital A and with no s so this type
of stuff is typically case sensitive and
you've got to get the spelling exactly
right so just to see if this works I'm
going to go back to the sketch and I
should be able to just say right here
eat sound play so that that's working so
in the console I have it as a global
variable I can just play that sound so
this is actually really easy stuff here
I've loaded the sound all I need to do
is now find the place in the code where
I eat the food so that actually happens
right here in draw there's a function
the snake' function checks to see if
it's eating the food and then it calls
this pick location which picks a new
location for the food
and so I could just add here and say eat
sound play so now when I run this sketch
whoops whoops I have to click in it too
you can see there we go it's working all
right so that's the basic idea here so
now we need another sound effect let's
let's add a second sound effect effect
and let's pick one let's for when you
for when you die how about this one so
I'm going to this is under voice so I'm
going to say start over sound and I'm
going to load that one as well and this
one is in where was it sounds voice and
then cartoon laugh and now I should be
able to say okay well we're in the code
this function s death
that's what checks to see if the snake
dies and here this is where this is
where all the reset of the snake happens
you see I'm logging to the console so I
can say here what did I say start over
sound play so now I should be able to
eat food and eventually I'm gonna make
myself hear one the trick I'm doing - ah
this is a very I'm not very good at
playing this game okay so you can see
that work so this is the basic idea all
you need to do is load sound and call
play at the opportune time now actually
right now what I'm going to do is I'm
going to add another sound for change
direction so let's go back and pick
which sound we want to do let's use I
want a shorter sound
these are all pretty and let's say we
want to use this hello sound for every
time I change direction so I want to
just emphasize a point here so I'm going
to in the sketch I'm going to say hello
and I'm going to say whoops hello equals
load sound and I forget this one is in
voice hello oh one and I'm going to say
it there and so a sound slash voice now
I should I should say that you know
generally speaking I would probably try
to avoid spaces in your sound file names
it's all working just fine here but
sometimes file paths on different
machines and different servers spaces
can confuse things but it's going to
work just fine but I if I you know I
might rename some of these files just to
like this to make it easier to work with
but for right now it's working so I'm
not going to worry about it so let's say
what what I'm going to do now is any
time I press a key I'm going to say
hello dot play so you know I could have
a different sound for each direction
there's all sorts of but I just want to
like show you something that comes up a
lot with sound effects so I'm going to
run this
so I can see with the way this is
working when I call play it always
restarts the sound immediately but does
and doesn't let it finish playing which
might be what you want but if I wanted
to make sure it's not of it doesn't play
the song the sound until until it
finishes playing if it always finishes
playing the sound I can say I could say
if hello is play is not playing so
there's a function in the p5.js library
called is playing which returns true or
false based on whether the sound is
playing so if i say if it isn't already
playing then play the sound whoops I
missed something here whoops now what
you can see is it's actually kind of a
long sound so so I can hit the keyboard
as many times as I want but it won't
actually start the sound over again
until it completely finishes and there's
a lot of silence there because the sound
file itself has a nice long sort of fade
out in it god I wanted to mention
something that I'm pretty sure is the
case and I'm going to look in the sound
reference for a second and I think what
I want to look for is there's something
part-time out back I was looking for
what I found what I was looking for
which is the play mode function so
actually I didn't realize it let's go
back to the example I want you to listen
very carefully I'm gonna press the key
multiple times it's a very short sound
so it's hard to hear but it's actually
always finishing playing hello and
layering a sound over itself multiple
times this is actually what's known as
the play mode sustained so sustain is
the default play mode meaning if you
trigger sound multiple times it's going
to layer over itself many times but if
you didn't want that you could actually
you could actually change the play mode
to restart and
I'll you'll be able to hear the
difference now refresh this page so you
can hear cousin every time I press the
key it doesn't finish the previous sound
which is no perhaps not what I want you
it's a little bit awkward and perhaps
that's not the best sound so I'm going
to take that out but I wanted to
demonstrate that this comes up a lot you
know in my flower invaders code example
there's a thing where you hit the
spacebar and you launch water so if you
were hitting the spacebar a lot you
might want to think about how you layer
that sound okay so I'm going to comment
out this hello dot play and let's look
at what we have right now so we have the
game here and a sound is played every
time you eat a piece of food and then by
the way I think I have a hack in here
where I can just make it longer so now
also when you go into yourself it laughs
at you so I can click the mouse actually
I want to make that the spacebar I just
have a hack in here so that I for
testing which just like increases so I'm
going to just say if key equals spacebar
I think that'll be easier for me to do
the testing so so I can just really
quickly like make a long snake I hear
that sound okay so now what I want to do
now is add some background music so I
have some nice there is a some music
here so music music oh one mp3 so let's
also load that bar music and I'm going
to say music equals load just copy this
music equals load sound sounds music and
then music - oh one and then what I want
to do is say music dot play as soon as
the game starts so now
we've got our snake game I'm going to
now play I forgot that I was making good
you turtle video just well I could watch
it over here too okay so the point is
now you see that I have background music
playing
and you could I could put a button here
to toggle the background music but I
want to try something which is just to
see could I make the game faster with
each piece of food you eat and then also
have the music speed up so so whatever I
forgot that that okay so I'm gonna mute
this tab for a second
I should add a play/pause button but
I'll I'll do that later okay so now what
I want to do is that now the speed of
this game I've done it in kind of a
tricky way which is that I've just
actually controlled typically this is a
bad idea the speed of this game is tied
precisely to the frame rate because so
nothing could happen faster in the
animation because the whole frame rate
is but so I probably if I needed to have
other animations and things would want
to not mess with the frame rate but this
will work just fine and I'll demonstrate
the idea so one thing I want to do is
make that a variable so I'm going to
make that a variable called frame rate
I'm going to start it pretty slow I'm
gonna start it at 3 and I'm going to I'm
going to also put in draw the frame rate
function I'm actually you know what I
don't need to put it in draw I'll put it
in I'll do this more properly I'll put
it in setup and then I'm going to adjust
the frame rate every time the food is
eaten
so I will call frame rate again in here
and I'll also say something like frame
rate plus plus so it's going to go and
just to be sure it's working I'm going
to change this by like 10 frames per
second each for each piece of food right
now so it's slow and then you can see
it's really fast so I don't want it to
change that extreme so I'm just going to
change it by 2 and then now that I need
to see that that's working let's also
say music dot rate or was it what was it
I forgot what the I forgot what the
function is let's go
in the reference so I want the p5
reference a page for sound file and you
can see that the function is rate sets
the playback rate of the sound file will
change the speed in the pitch values
less than zero reverse the audio buffer
so I'm assuming for example if I say
rate of two it's going to play it twice
as fast so what I think what I want to
do is I want to say
music rate map the frame rate which has
a range from three it started at three
to like maybe it's going to go up to
twenty I don't know - between one and
three times as fast so then I'm going to
change the music rate to that music rate
so let's see how that works right now
I'm going to go back to the game and oh
I need to unmute the tab oh and by the
way when I start over something I needs
are correct when I start over Oh crazy
I can't viewed it really easily I wish I
could like you know I can do it I can
least refresh the page when I start over
somewhere in here I also need to say
music rate one so that the music goes
back to one and the other thing is that
rate really picked up fast so I'm going
to make the mapping much much more less
extreme and probably I don't need to do
this as a mapping maybe what I should
just do is make a variable called music
rate this might make more sense and have
that equal to one and then
forget about doing a mapping just set
the music rate and then just increase it
by like a little bit like one percent
faster for each time a piece of food is
let's play this again ready can you hear
it getting faster okay I'm terrible at
this big if anybody is actually just
watched and watching YouTube make be
bobbing my head
awkwardly like playing this game that's
really impressed okay you get the idea
that's that point zero one was like very
little so you know I should probably
make it at least like point zero five
for anything it shouldn't happen really
what my life has become
rainbows sneaking with music speeding up
okay you guys get the idea okay so this
is the end of this video I showed you
how to load a bunch of sound effects how
to put music in the game how to dance
with the music how to make it speed up I
think I think I've got two everything on
my list I feel like I need to like fade
this out I don't know how to fade the
audio I need to like build that into the
code I'm just going to use the tab and
say goodbye and I will be making more
sound the next set of sound rolls I'm
going to make are actually about sound
synthesis I won't be loading any files
at all and then I also want to make one
at some point remind me if I haven't
done this if it's not on the channel
maybe one that shows if you have a ton
of sounds how to have like a loading bar
something like that as your program
starts up okay thanks for watching and
I'll see you soon</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>