<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>3.4: Pendulum Simulation - The Nature of Code | Coder Coacher - Coaching Coders</title><meta content="3.4: Pendulum Simulation - The Nature of Code - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/The-Coding-Train/">The Coding Train</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>3.4: Pendulum Simulation - The Nature of Code</b></h2><h5 class="post__date">2015-08-01</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/9iaEqGOh5WM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">oh hi okay in this video we're going to
talk about pendulums now pendulums is
really just this perfect perfect thing
to look at right now because it combines
everything we've looked at really from
the beginning of chapter 2 all the way
up until now there are forces at play
there's the force of gravity on the
pendulum that's what causes it to swing
but we need in order to deal in order to
solve that simulate the pendulum we're
going to need to look at trigonometry
sine and cosine again polar card polar
coordinates and then we're also going to
deal with angular motion the angle of
the pendulum what's angular velocity
what's its angular acceleration so all
these things are going to come into play
and so it's a really nice it's a nice
nice place to be for us right now now
you know the question is what are you
gonna do with this on the one hand you
might want to make a processing sketch
with lots of pendulums if that's what
you want to do perfect you're in exactly
the right place but really what I'm
hoping for this is if you can understand
the pendulum scenario figure out how all
the math works and apply it to a
simulation then when you come across
some scenario in your idea in your
sketch with similar qualities you're
going to be able to figure out the
trigonometry problems the angular motion
problems the forces problems okay so
let's get started I want to draw the
pendulum I'm going to start by drawing a
pendulum in two different ways this is a
drawing a diagram of a pendulum at rest
right there is this thing called an arm
this is the arm and this thing called
the Bob and this is the Bob so this is
our pendulum it's at rest now if we were
to lift this up over here and let go
would swing back and forth like that so
let's draw the diagram that way here's
the pendulum now at an angle so at the
angle of the pendulum is a key property
that we're going to need to look at and
what do we mean by angle we mean the
angle relative to the axis of at being
at rest so that angle theta is
relatively axis of where it would be
hanging for at rest now what are what's
let's let's start okay before we even
figure out how to swing the pendulum
sometimes this is a good thing to do
when you're creating processing sketches
like you know you want a swinging
pendulum well can you even get the sort
of static pendulum
peirong on the screen in the one hand
it's easy a line from here to there and
a circle that's what we're going to do
but let's look at what do we need in
order to have this we need to know this
location which we'll call the origin the
origin X Y we need to know the Bob's X Y
and this is going to be an important
value as well this is the length of the
arm so what's the length of the arm this
and of course we're going to deal with
the angle theta so let's actually just
take a look I have a kind of a
processing sketch that's already built
that dude is doing just this part just
to do with the static what we're going
to do in this video is we're going to
piece by piece add all the simulation
parts and happen eventually have this
pendulum swinging okay so if we look
over here we have a really simple sketch
which just has to be vectors one for the
origin the top point one for the Bob's
location and the length of that arm and
we can see here that the Bob's location
is just the same x-value as the origin
but the y-value is the length of that
arm so that's all we're doing is Kimmel
Juana is drawing a line from the origin
to the Bob and a circle or the bob is so
that's what we've got but that's only
going to work if the pendulum is at rest
what if the pendulum has an angle what
if we lift that up to the side how do we
do that okay that is part you know to of
this video and however many parts okay
so back over here let's take a look at
that so let's say we know what the angle
is we know the angle is say 45 degrees
or PI divided by 4 okay so we're going
to say the angle or theta has some value
in this case we're going to say is PI
divided by 4 how do we get this location
well let's take a look at something
let's draw a right triangle here let's
make this into a right triangle this is
y and this is X origin from the origin
we have to go down this much Y and over
this X to find the Bob location assuming
that angle so let's do a little
trigonometry sohcahtoa all we need is
Sokka s and Comm so sine of theta equals
opposite
it over hypotenuse X divided by length
opposite is X hypotenuse is the length
of the pendulum in this case that is
really important in our scenario and our
right triangle the length is the
hypotenuse hypotenuse of that triangle
is the length sano sorry cosine of theta
is adjacent over hypotenuse or Y divided
by length and this means that if we know
the oh if we know the length and we know
the angle we're going to be able to find
the x and the y because we can say x
equals length times sine of theta and y
equals length times cosine of theta this
is exactly what we did in the polar to
Cartesian coordinate transformation
video if you want you could go back and
watch that one again we're doing exactly
the same thing here I should say that
things are a little bit flipped usually
we look at an angle relative to the
x-axis now we're looking at an angle
relative to the y-axis so you can see X
has got sine in the equation and Y has
got cosine in the equation but if we can
draw that right triangle and we could
remember sine opposite hypotenuse cosine
adjacent hypotenuse then we can always
derive these formulas and figure it out
so we've got that let's go back to our
processing sketch and put these formulas
right in there okay come with me over
here I should like pick up I have a
sweater but anyway okay here we go uh
now where it let's okay we got this
sketch okay first thing we need to do is
add an angle variable to it so at the
top I'm going to say hey float angle and
then angle is just going to be 0 for
right now and now what we want to do is
say okay based on what that angle is
I need to compute the Bob's location so
what was the formula it's over here X
length sine Y length cosine so if I come
back here I can say Bob dot X equals
length times sine of the angle and Bob y
equals length times cosine of the angle
now what did we miss there's one thing
we missed in this equation here
come back over here for a second is that
this Y and X is relative to the origin
right we want to go this much Y from the
origin and this much X from the origin
so we need to add we need to add the Y
and the X to the origins location so
when we come back over here we're going
to say okay that Bob's X location is
origin X plus that and the Bob's y
locations origin y plus that in truth of
course we could have done this with you
could have used P vector and the P
vectors add function but just to kind of
look at the formula in a sort of
simplest way I think this is useful so
let's run this now whoops I have an
error can't find anything named length
okay in my in this particular sketch I
named it l en rather than the full word
length so I'm just going to correct that
right now I'm going to run this and we
can see up there is the same place it
used to be but now we should be able to
go and change that angle what if I made
that angle PI divided by 4 right there
we go now we have the pendulum at 45
degrees and I could do something like
say I can start to increment the angle
by some small amount and you can see the
pendulum is starting to rotate and
eventually it will come back I guess I
should have subtracted that right it's
moving but now we're not not so so this
is what we did essentially in some of
our earlier videos we just have this
thing moving with polar Cartesian
coordinates around and around now we
need to actually look at why how do we
what is the force of the pendulum and
how does that force get applied to
acceleration so let's go take a look at
that and guess what we're going to use
sine again sine and cosine again okay so
we'll let this keep spinning around kind
of weirdly like it is and now so okay so
let's come back to our pendulum we
figured out how to draw the pendulum in
the right place now what we need to do
is figure out what is the angular
acceleration of the pendulum okay well
so what are we talking about here here's
the pendulum now the pendulum has a
force of gravity on it that's the force
of gravity it's pulling it down now the
reason why the Bob doesn't just fall
straight down is because you know
there's a force of tension there's this
rod here there's this metal it's not
metal whatever this whatever it is
whatever it might be there's this arm
here that's keeping it so we know the
pendulum is going to move actually this
direction right this is a right angle
here so what we're actually looking for
I'm going to draw another right triangle
is this particular force that particular
force is what we would call the force of
the pendulum and interestingly enough we
have a right triangle here and if I
extend this diagram a little bit and
draw the axis for the pendulum at rest
this is our angle theta this is also our
angle theta so what we've actually done
here this is kind of a little bit this
is a big moment because this is kind of
an important concept that's going to
come up again and again in some future
examples we've separated the out a
particular vector into components along
an arbitrary axis so we know that
vectors have components this vector has
an x and a y component and we do this
all the time
because we have a P vector V equals new
P vector X comma Y right we think about
the vector in terms of we know its
magnitude and direction but really you
know in the vector there's an X and a Y
but we always do that relative to the x
axis here what we've done is separated
this vector out in terms of components
relative to the axis of the pendulum and
we need this particular component to be
the force of the pendulum
okay so what how do we get that well
look at this what is if we call this FP
I don't like the way I drew that let's
just remedy that if this sign is FP and
this side is f of G notice something
sine of theta equals the force of the
pendulum divided by the force of gravity
well wait a second that's right right
yeah sine of theta is opposite over
hypotenuse that's the opposite that's
the hypotenuse
so what is the force of the pendulum
it's just the force of gravity times
sine of theta now in truth there are
some some missing pieces here and I'm
not going to get first of all I'm not
qualified to go through every little
detail of everything that's happening in
a pendulum in terms of torque and
tension and their resistance and you
know you could get into a really really
elaborate simulation if you want to but
this even just this much is going to do
us a whole lot of good we could add
something to this which I'll do it which
I'll show you in a little bit later but
this is this just being able to realize
that the force how strong that forces is
sine of the angle if you think about
that right when the pendulums at rest
what's the angle it's zero what's sine
of the angle zero so there's no force
there's no out for some pendulum because
the pendulums at rest
I'm sitting down so so sitting down like
in its resting spot I could really use
the script to write about the phone
wants to write one okay so what do we
need to do with this remember something
force equals mass times acceleration you
know what is the force of gravity G F
times M divided by distance squared all
the stuff for us we can think of the
force of gravity as a constant scaled by
mass and the acceleration is equal to
the force of the pendulum divided by
mass so what we've really got in the end
is accelerate the angular acceleration
of the pendulum is equal to the force of
graph
kind of watch this times sine of theta
edit edit I'm not going to edit you
something edit these let me go back and
try that again okay
for our purposes in this particular
example we're going to consider the
force of gravity to be a constant it is
the equivalent of some constant times
mass right because the more mass of an
object is the stronger the force of
gravity so we're going to say some
constant G times mass is the force of
gravity times sine divided by theta
that's the force of the planet pendulum
a constant gravitational force times the
object the Bob's mass times sine of
theta so what does that mean the
acceleration is the angular acceleration
of the pendulum is equal to the force
divided by mass take G times mass times
sine of theta and divide it by mass and
we have the pendulums acceleration is
equal to some constant times sine of
theta if that seems overly simple to you
then great because in the end it's
actually quite simple we're just scaling
the acceleration is is essentially some
constant times sine of the angle so
that's why that you know if you think
like what the sine oscillates the
pendulum oscillates it's all related
it's all this magical soup of
oscillation and trigonometry so but this
is the formula we've now got this
formula
let's go stick this formula into our
code and you didn't understand this
formula I don't know make me watch the
video and it'll make sense the second
time or you don't know send me an email
and I'm going to try to help do this
explanation again in the book baby it's
like it's edited so it's less cockamamie
okay so here we are back again and now
we're going to add this so first of all
what's going on here this by the way
point zero zero point zero one is the
angular velocity the change in the angle
is angular velocity so I'm going to go
back and I'm going to add some more
variables angular velocity and make that
zero and I make angular acceleration and
I'm going to make that zero as well so
our motion algorithm right is angle
angle changes by velocity and velocity
changes by acceleration and if we've got
this we can see it's not moving why we
haven't calculated the angular
acceleration but we have this formula
over here to calculate that angular
acceleration G times sine of theta G is
a constant so we can just come over here
and we can say angular acceleration
equals some constant
I don't know 0.01 times sine of that
angle now a couple things are going to
go wrong here but let's let's let this
go okay first of all it's kind of
swinging but it's swinging upside down
somewhere somehow we got our wires
crossed and we you know we were doing
this physics simulation and not this
diagrams and we were probably thinking
of why going up and in a processing
window why goes down so we could
investigate this but sometimes when
three goes in the wrong direction you
know what we're processing programmers
we can just kind of read we know we
don't have to understand at all we just
know multiply it by negative one we'll
go in the other direction so I'm going
to just say negative 0.01 where we're
we're flipped we got to flip our world
back upside you know processing points
down we don't want to point up we're
going to flip ourselves negative one
okay now what's the other thing going on
here I think it'd probably be useful to
add a little bit of damping to make it
feel a little realistic right a pendulum
there's going to be a lot lost in the
kind of in the in the movement of the
arm and in air resistance so one thing
I'm just going to do to like make it
look a little nicer is multiply the
velocity by like 99 each time point 99
so the velocity reduces by one percent
so a pendulum doesn't swing forever it's
going to kind of slow down and
eventually come to rest and now if we
run this hey that's pretty good it's
swinging so we have our swinging
pendulum wow this is easy as that right
if we know where the origin is and we
know the angle we know the length we can
calculate where the Bob is and if we
understand that the angular acceleration
of the pendulum is equal to the force of
gravity times sine of that angle and we
would derive that form of the diagram
then we can just put that right here in
our code and we're good to go now so
this was a little example of just kind
of like whipping it together and drawn I
guess actually I want to make a point
here which is that this is certainly how
I work although there's lots of
different ways of working heart beat for
me to suggest that this is the best by
any means but as you can see we didn't
get ourselves kind of lost in
object-oriented programming right now we
just kind of have this main sketch and
this main program we kind of set up and
drawn we knew we need a bunch of
variables we're kind of working out we
have the pendulum working now I'm not
going to in this video take the next ten
minutes to move everything into an
object and build that object I kind of
have that preset for you but this is you
know this is often a good way to work
kind of work out your to work out
everything and just kind of a raw and
messy way in the main tab and then once
you've got the function
refactor and build it into a class and
so what I'm just going to show you now
so if you're following along there is an
example in oh I don't want to I don't
want the App Store right now there is
this particular example which we can see
has a pendulum object the pendulum
object and the constructor takes two
things it's where is the origin and how
long is the arm and then you can see in
draw all we're doing is saying P go run
all your simulation stuff we've actually
added a few features in this example you
can click on the pendulum and move it so
this is kind of a you know this is just
the object-oriented version but you can
see that everything that we worked out
is all right here in the update function
so in the update function we have a
constant for gravity we have the formula
for angular acceleration angular
acceleration goes into the velocity the
velocity is dampened then velocity then
angle changes by the velocity so
everything worked out is here now in the
pendulums update function the one thing
I should say is there's one extra thing
which is that we divided by R the
angular acceleration is affected by how
long that arm is and this makes the the
pendulum feel a bit more realistic I'll
include some links to other physics
discussions of pendulums but you can see
that now if I make the pendulum arm
really short it kind of swings much
faster than if I made the pendulum arm
really long and if I grab it you can see
ice let it swing there's a much sort of
slower acceleration there because the
shorter the if we're the acceleration is
inversely proportional to the length of
the arm so that's one little addition to
this example that makes the pendulum
feel a bit more realistic so um I'll
give you a couple I have a couple
exercise ideas which literally just
occurred to me down well one of them
occurred to me now the other I guess I'd
already thought of but hold on I just I
don't know I feel the need to put this
back to where it was 175 um but there's
a couple things so one thing you might
try to do is if you remember I think in
the first oscillation video we looked at
this other video there was a video in a
video and it was very what's that movie
of what has lead her to Khafre honey
that's nothing to do with anything edit
cut okay and we're back
I didn't just talk about that but I did
because no one's editing this you know
where there's levels of Dreams oh my god
just stop going to the next video okay
the exercise here's an exercise try to
create a whole bunch of pendulums in a
row all across the top of the sketch
perhaps start them all at slightly
different offsets from each other I
don't know
give them all slightly different arm
lengths give them all slightly different
starting angles there's lots of ways you
could create some type of really
interesting kind of multiple oscillation
pattern by doing that another thing you
could do is put two pendulums together
right what if the end of one pendulum is
the beginning of another and so on and
so forth now here's the thing this is
what's called a double pendulum and
simulating a double pendulum involves
all sorts of uncomfortable and math that
I don't even I don't even I am gonna
pull up that web page and I'm gonna have
to go sit down for a while and drink
that on some orange juice or something
so I get a little woozy but so you could
look into sort of real double pendulum
simulation and you'll find pages on
Wikipedia and wolfram mathworld and all
that sort of stuff but one thing you can
do just as kind of a little experiment
to see what happens if just you use the
fact that this pendulum has a bobbed P
vector and this pendulum has an Origin P
vector what if you make those values
always the same so at least they're sort
of connected not there won't be
connected in the physics way but they
will be connected just the fact that the
code always sets those locations equal
what types of effects could you get
through that so those are some some
ideas that you might try with this
pendulum stuff and someday I'm going to
go and make answers to all these
exercises that I keep saying and if you
really want one if you send me an email
it'll sort of push me to do that at
least for this one and I'll put them in
some open source repository for everyone
to see okay so that I think this wasn't
so bad I was a little anxious about this
pendulum stuff but I think we did okay
there's some improvements here but in
the next video we're going to look at
Springs which is just another case study
right we're going to hae pendulums hey
Springs these are two examples you know
we don't need pendulums of Springs in
all of our sketches but these are two
examples were kind of working out a
physics system understanding the math
behind
and making it go okay you need to find a
button to shut this off now</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>