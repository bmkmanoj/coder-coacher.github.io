<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>9.5: Genetic Algorithm: Fitness, Genotype vs Phenotype - The Nature of Code | Coder Coacher - Coaching Coders</title><meta content="9.5: Genetic Algorithm: Fitness, Genotype vs Phenotype - The Nature of Code - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/The-Coding-Train/">The Coding Train</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>9.5: Genetic Algorithm: Fitness, Genotype vs Phenotype - The Nature of Code</b></h2><h5 class="post__date">2016-08-01</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/_of6UVV4HGo" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">okay you're back that's nice of you to
come back I'm now in the fifth video
here and in this video what I want to
talk about is okay so we have this idea
of a genetic algorithm right I have the
algorithm itself we talked about that at
great length I talked about how you can
implement that algorithm in code I
looked at this or a DNA object and
population object but the example was
still just this kind of trivial example
that just demonstrates that the
algorithm works by having a known result
starting with randomness and arriving at
that known result what you want to do is
have something more interesting where
you might want to evolve a particular
design or a particular animation
behavior or something else that I have a
piece of music something that I can't
even think of right now that's
creatively in your head so what I want
to do in this particular video is talk
about what are the pieces of that
genetic algorithm that you could just
copy from my code exactly every single
time you use it and what are the places
where you need to sort of interject and
come up with your own creative solution
to the particular aspect of the code so
let's look at a few examples of
different scenarios I showed you this
boxcar 2d example this is in a way like
evaluating the design of a physics
element in a system through an
evolutionary process and you can see
here this is perhaps not the car that
you would design manually but it seems
to be driving itself quite quickly
through the genetic algorithm so what
are the pieces of this what's the
fitness function here and how do you
take this car and encode its design in
DNA those are the two essential
questions by the way
another example that I that I found here
is by Roger Johansen I don't know if I'm
pronouncing that correctly but somebody
correct me on the internet if I'm not
this is very similar that the DES be or
not to be example but instead of
starting with kind of like random
polygons instead of arriving at a target
phrase this is starting to arrive at a
target image through polygons and you
can see after a whole bunch of
generations what is that target image
but the milk the painting of the Mona
Lisa so you might think about okay well
this actually is almost identical to my
to be or not to be example but instead
there's like pieces of the DNA or colors
and polygons and positions vector
information what is that how do you make
that work then
I'll show you oh there's an FAQ there's
some other links here you can look at
yourself and then I'll show you one of
my examples which I have running here in
the background this is actually a
pathfinding example so what you can see
here is there are something like a
thousand little agents moving around the
screen if you've watched my videos on
steering behaviors these agents are
actually following a flow field I
believe if I press this button I can
sort of make that flow field visible
this is the sort of this is the DNA of
each object this is what it's in its
brain a grid of vectors around the
screen and ultimately they're evolving
what is the fastest path from the
left-hand side of the screen to the
right-hand side of the screen but this
is an examples a bit more sophisticated
I can actually draw some obstacles here
and these elements will actually start
to evolve a path around the obstacle and
so I'll come back to this later and and
see where it's gotten to how far it's
gotten how good the evolution sort of is
but what I want to do is kind of stop
I've shown you these three examples
maybe you have an idea in your head what
are the things you really really need to
think about so looking back at the
actual genetic algorithm here I want to
talk about two key places two key places
where you really need to interject your
own creative spin on this algorithm
everything else can largely remain
exactly the same in any example in any
project that you're doing with the
genetic algorithm so let me come over
here and kind of write these out so
number one is the fitness function the
fitness function that I had in the to be
or not to be example was counting the
number of correct characters that's not
going to work for the Boxcar 2d example
that's not going to work for that
Monalisa example it's not going to work
for my evolving a path with a flow field
example right you need to think about
your particular project
what is the fitness function is the
music in tune or out of tune does the
steering agent make it to the target
quickly or slowly does the thing run
into an obstacle yes or no does the
image look like the Mona Lisa yes or no
so you need to come up with your own way
of scoring each
the population you need to write your
own Fitness function that's really key
the other key thing is I'm going to say
how do you encode your DN a this is
really really key and what this brings
up is this idea of genotype versus
phenotype right this is a key concept
from genetics that we can kind of have a
very sort of simplistic view of here in
the genetic algorithm that we're working
with so the genotype being the data
itself or the encoding the phenotype
being the expression of that data the
manifestation of it the visualization
the actual animation of it and we were
sort of spoiled by our example the to be
or not to be example right here is the
encoding of my random phrase you know
unicorn oh really it is an array of
characters you and I cor n that's the
encoding here's the expression of it
unicorn right that's the expression it's
the same thing but in any of these other
examples if I go back to this Monalisa
example you know the encoding might be a
series of an array of polygon objects
each polygon object having an array of
vertices it could be a giant array of of
RGB a values for pixel colors and then
the expression is drawing it or
animating it on the screen same thing
here with box with box car 2d like how
do you design that car oh my goodness
you have to have some type of node based
map to talk about how the different
pieces of the car like fit together
that's the encoding the expression is
the thing actually moving and in this
particular example you can see by the
way how far it's come the objects have
kind of evolved this flow field around
those around these obstacles I could
make it harder for them by adding some
more obstacles but
the encoding the the met the phenotype
is the expression the movement of these
objects through the flow field but
what's the actual encoding it's an array
of vectors so the first example that I
want to actually look at and see how
this applied applies an actual code is
an example called smart Rockets um this
is actually based on an example made by
Jer Thorp many years ago if a flash
example on the web I don't know if I can
dig it up right now but I'll include a
link to it in the business video's
description but and it's simpler this
one is running and processing I'm going
to I'll leave this open actually let's
make it really hard let's draw some like
more obstacles see if it can see if it
can solve it anyway that's going to be
hard I'm going to go back to the browser
close this you can see this is a version
of this example working it's quite a bit
simpler you can see that these objects
boy they're not doing very well are
trying to find a path to make it from
the bottom of the window to the top and
you know it hasn't been running for very
long so they haven't done a very good
job of it yet so this is the same sort
of problem as to be or not to be the
question think of the number of possible
paths there are from the bottom of the
window to the top
another fathomable amount there's a lot
of pixels a lot of ways they could move
it's so we're trying to search for the
optimized fastest path and not running
into that obstacle so what's interesting
about looking at the code for this right
so let's think about this let me come
back to my let me come back to the white
board for a second so the fitness
function let's first think about the
fitness function my fitness function
this is the target this is where they
start the fitness of each one of these
rockets is the inverse distance so to
the target that it has that it gets to
at the end of its life so the closer it
gets to the target the higher the
fitness so we calculate the distance
between the target and the object and
then I say one divided by that distance
that's a way of calculating a fitness
function so that's a specific thing I
had to invent for this again there's
lots of ways I could improve that
fitness function which I'd like to
discuss but that's a basic idea
so that's one
then this idea of genotype versus
phenotype so if I come back over here
one thing that's really interesting to
see if I go to the code right look at
this here's a DNA object it is exactly
the same look at this crossover function
it's exactly the same as the Shakespeare
example look at this mutate function
it's basically exactly the same as the
as the Shakespeare example there's this
idea of a genes array which is exactly
the same everything is the same
here's the one thing that's different
what goes in the genes array instead of
picking a random character I'm picking a
random vector so what each one of those
Rockets has is an array of vectors
that's like an array of forces that
cause it to move around the screen you
can essentially think of it as like if
the driver of the rocket has like this
control panel where they can like press
thrusters with a certain amount of force
in a certain direction that's what
they're doing over and over again and
they're the encoding of that rocket is
the sequence of those thrusters those
forces to drive it around the screen so
what's interesting about this is this
DNA object if you look at the code
between this it's entirely the same the
difference is the genotype itself is no
longer characters its vectors so it
might be floating-point numbers it might
be characters it might be vectors it
might be pixels it might be polygons
it's up to you to think of what is that
encoding the thing you're trying to
express in this case it simply is
vectors now the expression of that
happens in population because the
population actually sorry it happens in
the rocket object so this is what was
missing right in the in the in the UM in
my Shakespeare Monkey example there was
simply a DNA object that DNA object had
both the genotype the encoding of unit
corn and the phenotype the expression
buta corn in it I didn't need a separate
object but in this example the encoding
the DNA is vectors and the expression is
the rocket object and the rocket object
if I come over here is a physics object
it's an object that has acceleration
velocity and position
and guess what it has the DNA built into
it and when I when I run it look at this
this is the expression there's a lot
going on in this example but the
expression is go and look at its DNA and
apply something from its DNA the next
sequence gene as a force so that's the
expression take the vector and turn it
into a force in the physics engine so I
would encourage you to go back and
review my forces and vectors tutorial as
well as my steering behaviour tutorials
because this example this is essentially
a vehicle object that has a physics
engine built into it but it's how it
moves is according to its genetic
information and then you'll also notice
that Fitness function is right here in
the rocket itself so instead of and I
want to just make this wider so we can
sort of see this for full fitness
function for a second now I did say that
distance the function the fitness
function is 1 divided by distance but
I'm doing a bunch of things in this in
the fitness function I'm also checking
to see if it hit an obstacle I'm going
to do a separate video about improving
fitness functions but I'm adding some
extra math to the fitness function to
make it a little bit stronger and I'm
gonna I'm going to cover that actually I
think just separately in the next video
I'm gonna make a note of that to do that
so you can come back and I'll talk to
them you can see here there's lots of
stuff there is a fitness value that's
being calculated okay and we can go back
and see it running I don't know if
they've reached the target yet I'm gonna
have to look at like refining and
optimizing this example by the time you
click on the link of this description
hopefully it'll work a little better on
it if I just got kind of unlucky I think
this one thing might be is the sort of
like maximum speed is very low they seem
to be going kind of slowly so they're
not this one's obviously has the highest
fitness of that generation but that's
this is basically the idea so you what
you want to do is think about use that
core genetic algorithm again if I look
at the code last thing I'll just sort of
point out here is that you can see here
in in the draw loop there are the same
sort of set of functions calculate the
Fitness perform selection perform
reproduction there's a little bit of a
different thing going on here where
there's also time like in the
Shakespeare monkey example just like
every frame it did a new generation now
it's sort of counting down
letting these objects live for a little
while then calculate their fitness and
then and then my brain is like shutting
down to be here and then and then like
go and then reproduce for the next
generation let's check on our the flow
field which is with running very slow
probably cuz it's got the browser
because I'm kind of going as well oh
because I have the debug on oh I left
that on it's probably been right let's
see how well they doing here they made
it around all these know they're getting
stuck at this obstacle I'm gonna let
this run for a little longer and maybe
I'll later I'll update you somehow
through another video of how these
obstacles are doing so I've given you a
lot of stuff here so what I think what I
what you should really do is think about
what again try to build your own
scenario try to think about what is this
idea how do your going to encode the
stuff that's the parameters of your
system how do you express those
parameters visually through through
designer animation and then how do you
calculate a fitness to evolve those
parameters over time and I'm going to do
a few more videos to show you a couple
more scenarios a scenario known as
interactive selection as well as a
scenario known that I'm calling loosely
ecosystem simulation which I'll get to -
okay thanks for watching and I will see
you guys soon in another video I hope
thanks very much</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>