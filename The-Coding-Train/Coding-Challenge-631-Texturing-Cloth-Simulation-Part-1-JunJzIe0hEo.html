<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Coding Challenge #63.1: Texturing Cloth Simulation Part 1 | Coder Coacher - Coaching Coders</title><meta content="Coding Challenge #63.1: Texturing Cloth Simulation Part 1 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/The-Coding-Train/">The Coding Train</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Coding Challenge #63.1: Texturing Cloth Simulation Part 1</b></h2><h5 class="post__date">2017-03-14</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/JunJzIe0hEo" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">memories like the corner of my mind is
that those lyrics I'm not sure
you might resume I remember me from my
name is Dan Shipman you may remember me
from coding challenge number 20 I think
was over 20 a 3d cloth simulation so
this is a coding challenge I did a while
back and I would like to update this
coding challenge and one of the things I
want to do is put an image onto that
cloth that way to make it more of a flag
simulation so I wanted to sort so think
about you to get the flag of your
country and you could texture it onto
this cloth thing and have us waving flag
simulation so that's what I'm gonna do
which really underneath the hood here
here's what this coding challenge is
about it's kind of a tutorial about how
to texture geometry so how you can
create arbitrary geometry arbitrary
polygons in processing and then texture
them and so that's with an image what I
met texture and we take the pixels of an
image and fill the geometry with those
pixels as opposed to just fill with a
color so that's what I'm going to start
with and I'm also going to introduce you
to a new friend of mine named unikitty
but I'll get back to that later go over
to the whiteboard for a second okay Here
I am and okay so what am I talking about
here so you can load an image in
processing by saying load image and that
image could be a file like file JPEG or
file dot PNG if you call load image and
put the results in a variable like IMG
you can draw that image to your canvas
by saying image and then passing in a
reference to that variable and give it
an X and a Y and then your processing
window canvas you will see the wonderful
kitty cat I cannot draw at all actually
what was the worst in the world if
that's a kitty cat right you have to
bear with me m2 to draw it again right
there you go
load the image into a variable draw it
there that's just drawing actual
rectangular pixels of the image exactly
as it is in the file something else you
can do in processing however is you can
use functions like begin shape and edge
these are functions for I want to draw
my own arbitrary polygon or path there's
a lot of things you can do with begin
shape an education that's sort of
possibilities but in the simplest level
what I can do in this function is say
vertex X comma Y and then I can say
vertex again X comma Y only this pen is
terrible I'm back and I don't have a pen
but I will in a future video so I can
set a bunch of vertices this could be a
long long long long list so what does
this do well if these are all XY points
like X Y here XY here XY here XY here X
1 here X Y here what I've now done is
I've created a polygon that in a
connected series of vertices and I could
do that algorithmically to make a kind
of flower pattern I've probably done
this in a lot of other videos but what's
new here is what if I want the kitty the
image to be so I could say Phil right
this whole thing would turn green but
what if I want to say in it what if I
want to texture the image into this
shape so I can do that by calling the
function texture and passing it that
image the problem is it's not really a
problem but the thing that you might not
realize is it in some level it's as
simple as that but it's not because you
could say texture this shape but it
doesn't know which pixels to put where
so what you need to do for every single
vertex is not just give the XY the XY
location of that vertex you need to say
this XY location also corresponds to
some XY location in the image so for
example if I wanted this section of the
image to appear here I would have to
then say this XY on the screen look up
that XY in the image and that's referred
to typically as UV so UV coordinates are
lookup coordinates in an image that
defines the textured pixels and this by
the way it could be X Y Z and I think
what I do is I think I'm
need XYZ cool okay XY oh okay
so let's just make a quick example that
does that so where are we so I am going
to come here to a texturing example I'm
going to write a little bit of code
okay and I am going to I lost my train
of thought here I'm going to say size
six hundred four hundred I'm going to
set a background and then I want to say
begin shape begin shape and shape and
I'm going to say vertex 200 200 let's
just make a bunch of vertices that are
kind of arbitrary I'm going to say
vertex 300 200 I'll just make it a
square right now and say 300 300
and I'm say 200 300 so if I do this and
I say stroke 255 fill 127 let's see what
we get right I get this shape right
because that's exactly I really just
define the vertices of a wreck of the
square now one thing that's missing is
you notice it doesn't actually you can't
really talk to me to see this but that
the outline does not on this part so one
little thing that you can see is I could
say clothes and clothes there will will
actually close the shape without me
having to add that first vertex at the
end again so I could do some things like
move these around but let's actually
leave them like this so I think I have
an idea for making just a somewhat
interesting example so now I need an
image to texture if your speed events
that I'm going to use this is unikitty
it is a drawing drawn by an
eight-year-old it is beautiful it is one
of my favorite characters in the world
right now and let's use unikitty to
texture now one thing I wanted double
check is unikitty is kind of like a
massively high-resolution image right
now which is quite unnecessary so I'm
going to a sample sample unikitty down
and I'm going to do how can I do this in
I'm gonna say tools should have done
this before
this video adjust size just make it so
we can kind of think about it 600 by 600
and so now what I want to do is I want
to say texture Oh first I need to load
the image P image unikitty and then
unikitty equals load image unikitty dot
jpg and then now I'm going to say
texture unikitty and I'm gonna run this
now we don't see so first of all ah we
have an issue texture is not available
with this renderer so prophesying has
different renderers that draw the feed
for you your code stays the same but the
behind-the-scenes renderer does the
drawing and the default renderer is a
software based renderer built on top of
java default renderer but a hardware
accelerated renderer for 2d or 3d
graphics that's built on top of OpenGL
and something called joggle which is
like java open graphics
it's called P 2d something is P 2d here
I could use P 3d but I'm not doing
anything 3d here so now what happened
where's my unikitty look okay so we can
see we can see it's not there it's
because even though now I don't have any
errors I haven't defined those UV
coordinates so what I can do in the
simplest sense is I could just assign
the full image right because top left of
the image right of the image bottom
corner of the image bottom left corner
of the image so if I do that and now run
it boy it takes a long time to start or
it's like odds behind us okay that's it
to work now maybe what I'm missing is
the texture have to go after begin shape
I didn't think so there we go I guess it
does so now you can see there's you two
kidding how wonderful but this is no
different than just drawing the image
but what's interesting about this is I
could
trying to sink I could start to move
these vertices around so like for
example if I just make you know X equal
the just the top left corner x equals
200 y equals 200 and I do this X Y and
then I say you know X X plus equals some
random amount this is like the least
creative thing I could probably do with
this but just to show you that it's
working you can see now the image itself
is going to skew to whatever the
geometry is based on the pixels that I
picked so you sort of get the idea it
doesn't have to be a square I could make
a polygon with ten sides I could assign
them weird parts of the image that are
different than then sort of
corresponding parts and things will get
stretched and skewed there's a ton of
possibilities here but this is the basic
idea now in the chat by the way I see
somebody asking does processing not do
UV coordinates in 0 1 this is a great
question so a lot of programming
environments will not take the raw pixel
values but just use what's cooked like a
sort of normalized range so the image
width always goes between 0 and 1 no
matter what the size of the images and I
believe if I go to processing reference
and I look up texture mode and go to
that page I can change image normal so
this is I think normal is what changes
the range yeah between 0 &amp;amp; 1 so I'm just
thinking in terms of the raw pixels but
I can use a different texture mode to do
that so that was a great question thank
you for that in the chat okay now
so that's but now here's the thing is
it's definitely in two parts so I don't
know of what I'm going to do what I want
to show you is one more thing what's
very common in a scenario like where is
this like this flag simulation is that I
don't actually want to texture no look
at this
are these well these look like they're
quads I'm going to have to change quite
a bit what about how did I actually do
this oh yeah so I've actually drawn this
as looking at this as
so I don't have to redo the geometry of
that and here's a common kind of there's
a lot begin shape and end shape right
I said begin shape and edge shake sets
the emergency to get a polygon but
there's a lot of kinds of things you can
actually put in here that will generate
shapes in a certain way
so I could say begin shape end shank and
give it three points and will give me a
triangle but I could also say begin
shape and shapes and pass it something
called triangle triangle underscore
strip what triangle strip is is if I
give it two rows of points it'll
actually make a whole set of tiled
triangles and this is a very common way
of tiling geometry of I know the actual
right works it's a work for this
specifically yeah and there's different
triangulation algorithms that you can
use to take any arbitrary geometry and
get it to be a mesh of of triangle
strips but I'm not going down that full
road what so what I want to do is just
show you them because my cloth
simulation is a full big space with all
these interconnected particles I want to
tile it with a triangle strip and then
texture the image the unikitty image
onto it so let's just do a couple things
here to explain this a bit further
number one is just to go to begin shape
on the processing reference just to see
there are a bunch of things like this is
what I just did begin shape and shape
clothes but I could do the same thing
but give it points and it's just going
to render those at the point or as lines
and it's going to give lines I can use
triangles because new triangles this is
a triangle strip this is a triangle span
these are quads quads strip and then you
can see another arbiter shape so there's
a lot of possibilities here and this is
what I'm going to focus on triangle
strip so let's take a quick look at that
where am I here I need to go sketch
texturing so let me come back to here so
what I want to do now is I want to show
you how triangle strip works so I'm
going to comment out that I'm going to
I'm going to comment out this texture
looks I guess I'm going to leave this in
the code because when I published this
code
maybe I'll just make this one example
but but I'm going to comment this whole
part out leave it at the bottom so I'm
going to start over so now what I want
to do is I want to say let me get a row
of let me just have a row across so I'm
gonna start with X I may use float x
equals let start is 10 X is going to go
all the way to you know 400 just doing
this arbitrarily let's do 100 to 500 I
don't know what I'm doing X plus equals
10 and then I'm going to say let me also
do have a Y actually do we not have a
white so what I'm going to do now is I
want to say so one thing I could just
say begin shape and shape and what I
want to do is I want to say vertex X
comma sum Y which is going to be 200
sorry I'm trying to figure what I'm
doing here so I'm showing you that I
could write a for loop and let me so you
can see it change the color to be white
stroke and just make it a little bit
thicker so you can see it as well so
this just gives me a line because what
I've done is I said begin shape end
shape and I've set all these points
across on the line but notice if I were
to say begin shape points it's going to
render it like this all of those points
those are quite close together so let me
make them further apart and we can see
it like this okay now what I want to do
is I want to make a triangle strip so I
need to also have a set of points below
so I'm going to say X comma 200 and I'm
going to say why I'm sorry X comma 250
so now you can see these are all these
points and so I can like point to it
better first one second one third one
fourth one fifth one six one and that
order is quite important okay the order
is quite important because I want to
connect I want to create a triangle and
then another
triangle was going to do so if I were to
now just say get rid of the points what
you're going to see it's making is this
and it's weird because it's like
connecting the end to the back and with
a fill so I'm also going to say no fill
and you can see here is now what I've
actually done I've got this zigzag
pattern and now the magic is I'm sorry
you can't see my code I'm doing a
terrible job of the the magic is I am
going to add triangle strip here and now
once I do that you can see there we go
now I have a triangle strip so if I want
to texture this triangle strip all I'm
going to do is and let's use texture
mode normal just really interesting here
I'm going to say texture mode normal
texture unikitty and then let's just say
I am going to epitope the the top is
going to be 0 and the bottom is going to
be 1 for that strip I'm gonna do the
full height of the image in that strip
and then I need to say something like X
well I could I could say what's the so
actually so I should use some math here
you is map X which has arrangement 0 and
500 to between 0 and 1 and then V V I
don't really need to calculate it's
going to be so I'm going to say this is
U and this is V so let's do that and see
what we get and what did I would I would
I did 0 and 1
sorry ok lost leg now text text mode
what did I say text mode texture mode
there is actually something called text
mode which changes the way text is
rendered and this should really be
texture mode so I made a mistake there
ok so then we can see look at this that
whole image is kind of squished into
this triangle strip and it looks like
it's just kind of behind this thing but
it's actually textured and what's
interesting if I start moving all these
vertices around or figure them as
polygons that separates I could keep the
same image geometry
move the other geometry around and
create all sorts of interesting effects
so this is where I want to stop this is
kind of a just a texturing tutorial that
I'm doing is part of taking this into a
coding challenge and so I'm going to end
it in another video that will be linked
from this one I'm going to do a coding
challenge where I just apply the
unikitty texture to a flag unikitty flag
i'll see with that video maybe</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>