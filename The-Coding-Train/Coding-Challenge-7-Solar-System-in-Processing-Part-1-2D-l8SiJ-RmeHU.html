<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Coding Challenge #7: Solar System in Processing - Part 1 (2D) | Coder Coacher - Coaching Coders</title><meta content="Coding Challenge #7: Solar System in Processing - Part 1 (2D) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/The-Coding-Train/">The Coding Train</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Coding Challenge #7: Solar System in Processing - Part 1 (2D)</b></h2><h5 class="post__date">2016-04-28</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/l8SiJ-RmeHU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello and welcome to another coding
challenge video in this video I am going
to attempt to program a solar system
generator stimulator system like thing
just like the one you see over there in
3d I'm gonna do it in a bunch of steps
starting with 2d and moving to 3d I'm
going to use the processing development
environment which you see right here
link to download processing will be in
the description of this video now you
might be asking why are you doing this
look you did it already this in fact is
one of my examples it is called
gravitational attraction 3d it's one the
examples that comes with processing this
is actually doing a simulation of a
solar system like thing with the actual
formula of gravitational attraction I
will link to a video from my nature of
code series where how to make this as
explained but I'm going to do it in a
different way which is really ultimately
a lesson about transformations translate
rotate push matrix pop matrix how those
types of things work in object-oriented
programming in processing and so I'm
going to do it in a different way
and hopefully by the end of this
somewhere between 10 and 20 minute video
you're going to see how to use all that
stuff and make yourself a little solar
system and you will be much more
creative and interesting at doing it
then I will be and hopefully you will
share what you do with me then - okay I
gotta get started let's get started so
as always I'm kind of just got a blank
slate here
I should really at least enter this in
beforehand but I'm not I'm going to add
setup and I'm going to add draw and I'm
going to add size 600 600 and space is a
dark black place so I'm going to just do
use background zero I'm gonna run this
code I'm going to move this over here
here we go this is my outer space
simulator do you like it very few lines
of code okay now the first thing I want
to do is create an object I'm going to
call it a planet so I'm gonna make a
planet class and I really think it's
going to be useful here for me to use P
vectors so I'm going to create a P
vector yeah yeah yeah call it position
uh I have to think about this while I'm
doing this on the fly I'm not so sure
about this and I'm going to say I'm
gonna send when I write the constructor
yeah the constructor is going to get an
and a why and that position will be a
vector at that x and a y now I just
think about this for a second oh and
create vector has a function that's in
p5.js just say new P vector here okay I
got to think about this a little bit
more I have a marker here let's think
about this so what I want is I have a
planet object and the planet object
ultimately so let's just think let's
imagine the first planet object I'm
animate is like a Sun or a star then I'm
going to make another planet object and
what are the things I need to keep track
of so I'm not going to do proper orbital
mechanics Kepler's law stuff there's a
great topic for another video encourage
me to do that I would love to look into
that and do that more but it's not going
to be in this particular video but what
I need to keep track of is its distance
I'll call our from the planet and it's
going to rotate around in a circular
orbit so in order to use the rotate
function in processing I need to keep
track of an angle so actually what this
planet really needs is not at XY
location but a radius and angle or
really a pole this is the idea of a
polar coordinate by the way so instead
of an XY a radius and angle and you know
what forget about this P vector stuff I
was really thinking along the lines of
my for space simulation which I do have
other videos that you could look into
and I think what I'm going to do in this
planet is give it a radius and an angle
and so just to start we can fill it with
radius and I'm going to say sorry I lost
my train of thought there the radius
equals R and the angle always let's just
say it always starts at zero or it could
be a random angle that sort of thing so
I definitely need to have a function to
draw this and what I'm going to do to
draw it is just draw an ellipse at 0 0
and I'm going to make oh sorry the the
it should also have a size so I wonder
actually if radius should actually be
the size of the planet and I should also
have a variable called D
which is I'm going to call this a
distance I'm just going to make it
longer winded distance distance up
losing steam it'll been a long day
distance is the distance from the Sun
now what's good whatever what I'm trying
to do by the way is think of a generic
bottle because I might have a bunch of
planets that have a distance from the
Sun but I might have other planets which
are essentially like moons which have a
distance from their parent so I might
have this this like tree like structure
where some planets rotate around the Sun
other planets rotate around the planets
so really this is just like a body this
is like a celestial body object it's not
really a planet object let's call it
planet for simplicity okay
so back to here so I want to draw an
ellipse at 0 0 with it the radius which
is not R whoops radius times 2 so let's
just see sorry I'm anal ear attentively
getting rid of all the extra space
here's my planet object a radius and
angle of distance arrays the distance
and angle and a show function which
draws it so what I want to do is create
a planet and I realize the Sun is not a
planet and I'm going to say Sun equals
new planet its distance from anything
else is just going to be 0 because it's
going to start in the center and then
I'm thinking I'm thinking its size
that's what I need that's going to be
100 and then I'm going to have Sun dot
show let's run this and where is it now
I have a feeling number one is I didn't
give it let's give it a color fill 255
and what am I missing
Oh distance should be zero radius should
be 100 there we go now notice where it
is it's in the top left so I want my son
to be in the middle of the window so I'm
going to start by saying translate with
divided by 2 height divided
- I've got a light that keeps going on
and off up there it's a little
disorienting okay so here we go we're
getting so we're getting somewhere now
we've got the Sun in the middle of the
window as an object so now clearly I
need more data structures to store the
information about these planets where
should those go well I have an idea
you might think that ordinarily the next
step that I would do would be to create
a planet array right because ultimately
I want to have a lot of planets but
really this is my data structure I have
a Sun and the Sun might have three
planets rotating around it and this
planet might have two moons rotating
around it this might have one moon that
might have no moons well each one of
these is a planet object so what are the
properties of a planet object the
properties are Oh dramatic moment ruined
radius angle distance radius the size
angle where is it in its rotation and
distance how far is it away and also
children planets things that are
rotating around it so the Sun has three
this has two this has one this is zero
so each planet Oh should inside of
itself recursively self-referential II
store a reference to an array of planets
now I'm going to be very simple about
this and just say every single planet
get three okay so I got idea I got a oh
that's a lot hold on hold on there's
lots of ways we could approach this but
I think what might be useful right now
is for me to write a function and I'm
going to call it spawn moons and in the
spawn moon's function I'm going to
create that array so maybe I can create
a certain number of moons I can say
planets equals a new planet array with
some number of moons
then for int I equals zero I is less
than planets length I plus plus planets
index I equals a new planet and maybe
each moon should be you know half the
size of the planet
this is totally arbitrary this could all
be random and I figure out different
ways of doing it and then its distance
should be some amount so I'm going to
say I'm also going to say distance I'm
going to say some amount like you know I
think maybe we could actually make this
a an argument here I mean let me let me
try just doing something random right
now I can try doing something random
right now random you know 100 200 I got
to figure out a better way of thinking
about that so they each and I kind of
want to put these as separate lines of
code to make this easier to see okay so
each when a planet gets a bunch of moons
it runs through a loop and creates all
of them with a smaller radius and some
distance away from it so what I want to
do here now is say Sun spawn moons and I
want to have five so I make a Sun and
then immediately say spawn moons and
have five of them we can just run this
there's no errors but I'm not seeing
anything why am I not seeing anything
because when I show the planet I also
need to show show its children moons so
and remember those children moons I
should call them I calling the planets
of calling the moons whatever the
children should also are just planet
objects so when I show this particular
planet I draw it as a circle then I look
through and show it's solve it sub
planets so let's see that and okay so we
have
and a nullpointerexception why do we
have a nullpointerexception let's think
about this
so what's null here let's let's print
line planets and actually let's say
print array and so we got to debug this
here okay so it looks like the array has
OH
so why why did I get no uh 4 that's
weird
I'm hold on 0 1 2 3 4 what's probably
Nast at length o 5 what's know I'm
losing my mind here mm-hmm
this part of my kid edited out later
we're not getting a nullpointerexception
and yet it seems to be working like hold
on
no no pointer exception oh okay hold on
sorry everybody oh the oh I'm sure okay
so that's working planets index I equals
new planet something must be spawn spawn
moon's not happening oh I meant no this
seems right this seems right okay hold
on hold on everyone let's see here let's
make sure this is happening correctly
print line planets index I let's run
this alright five planet objects were
generated so those are not no oh I know
what happens oh my goodness ah so
because of this whole recursive system I
have of course of course there people
watching this lie or probably have
you've all been yelling at me for the
last 30 seconds because of this
recursive system I have I say hey planet
show yourself then show your children
boom boom boom and each of your children
show your children and each of you
children show your children oh you don't
have any children no pointer exception
so at some point one of the planets will
not that array will be no so I need to
make sure that I check that so all I
need to do here is just essentially say
if planets is not equal to no meaning if
this
planet does have some moons if it has
some children only then call show so
that's just a quick little check
everything was right I was creating
things correctly but I'm forgetting that
the new planets I created also have
arrays okay let's go and let's run this
wonderful so you can see hmm I see one
circle and I see a bunch now what am I
missing
so what I'm missing is a crucial key
step which is that if I have the Sun and
I have a planet and it's supposed to be
at a certain distance from the Sun the
orbital distance I need to use a
function in processing called translate
but what translate will do we'll say I
drew the Sun at this location then
translate out this far and then draw the
next planet so I need to add write all
everything is only just being drawn at
zero zero oh I'm in the wrong place
everything is only being drawn at zero
zero so I need to add before this
translate by R comma zero and I also
want to rotate by some angle okay I'm
going to rotate by some angle which is
and not by R by distance okay
so now if we run this we should see here
are the planets and let's do something
to make things a little more visible
here let's give the color some alpha so
we can sort of see what's going on let's
also think about how far these planets
are from the a couple things one is
let's make the this Sun quite a bit
smaller and let's make the planets you
know between 75 and 150 in terms of
distance and you can see how come
there's only two of them there should be
five now let's think about why I'm not
seeing five let's take a look at planets
length five okay I think they're just oh
I'm being silly because they're getting
spawned off the screen so we're not
seeing five so
sorry about that that seems kind of
obvious to me now so let's let's just
you know randomly put them between 75
and 100 am i did i do the distance oh of
course
oh yay the next thing that I need to
teach you guys about in confirming the
important concept is I completely forgot
so translations doesn't matter what I do
translations are cumulative so I draw
the Sun then I translate by 75 and I
draw the next planet
guess what let's say the next one got
picked 85 what I want is to go back to
the center of the planet translate by 85
and draw the next center of the Sun
translate by the next one but actually
what I did was I translate by 75 then I
translated by another 85 which I don't
want to do
so this is where object-oriented
programming and push matrix and pop
matrix come in if in my object if in the
show function
I always put at the beginning of the
show function push matrix which is like
a save and at the end of the function I
put pop matrix which is like a restore
this function becomes sort of its own
thing its own world
whatever translations and rotations
happen inside of here they get undone
the moment I say pop matrix so whatever
translations happen for this object they
don't affect any of the other objects
and you can see now that they're all of
course bunched up right there because I
kept trying to reduce the amount where
really what I want is for this to be
between like like I said 75 and 300 so
now you can see I'm picking some random
planets now notice they're all along the
x-axis why because my angle is always 0
let's change that let's make an angle
between a random angle between 0 and 2pi
so wait wait a second here what is going
on that should not have happened
let's look here a angle float angle
that's crazy
why is it picking one angle for all of
them what did I do to deserve this
strange result translate then rotate by
the angle so let's hold on let's take a
look at this angle we don't need we can
we can get rid of this print line
planets dot length I have a feeling I've
missed something rather obvious so it's
getting different angles for each one
but somehow the same angle is being used
here do I have a no okay hold on just
change the variable name to make sure
I'm not losing my mind what did I miss
here everybody hmm okay hold on tight
this is this is this is certainly
confounding me here I got to have to
figure this one out
Oh translate by this is rotate by the
angle oh no that's right oh wait a sec
no that's right and then come back
translate by the distance and rotate by
the next angle that seems to make sense
hold on let's I'm going to do a couple
things I'm going to say no loop and I'm
going to just make two this is a good
way to figure this out so the loop is
only running once and then I'm going to
take out this print line and I'm going
to oh guess what I did so important all
these mistakes I can I can I always make
these mistakes it's oh my god I'm
rotating
after I translate it which is absolutely
incorrect in this case I mean it could
be doing that but let's think about this
right what I want is here's my Sun I
want to and I'm and I'm right now my
registration point where the world is my
point of view is the centre of the Sun
and the angle is zero so what I did is I
translate it out and then I rotated
which was meaning
and those things were actually appearing
a different angle only because the Sun
also had its own rotation but what I
want to do is not that what I want to do
is the following I first want to rotate
and then I want to translate out and
then I'm going to go back and rotate
again and translate out to get them in
different spots so the order of this
stuff is so unbelievably important and I
made a classic error I want to pretend
that I did it on purpose but I did not
so I'm gonna put that there I can get
rid of all my print lines and it can run
this again we can see there we go and
there's only two so let's go back and
give me five again and let's get rid of
no loop and let's run it and we can see
okay we've got our solar system we've
got five planets and one Sun now we
should also add a function I'm going to
add a function called orbit and in this
function I'm going to say angle equals
angle plus orbit speed right because I
want the angle to change so that they
rotate around and I'm going to replace
theta with angle everywhere to just use
angle and then I also need another
variable orbit speed which I am going to
make random orbit speed equals random
some speed between point one and you
know 0.3 or something like that and now
let's run this okay angle orbit let's
let's use the camel casing oops or
whatever it doesn't matter
just have to be consistent everything is
case-sensitive so now oops
float a float distance okay and now I
also need to add in ooh interesting so
if I say Sun dot orbit
I'm asking the Sun to orbit but what
does it mean for the Sun to orbit well
it needs to do this but also and why is
angle now not knowing what it is oops I
lost angle sorry everybody
angle and now what do I need to do here
whenever the Sun orbits ah oh come on
unlike to my keyboard is going crazy
whenever the Sun
just like when I show the Sun I have to
show all of its children when I orbit a
planet I need to say as long as there
are planets right I need this if planet
does not know then I want Planet Index
I'd orbit I want all the children
planets to orbit as well I don't have a
timer okay we can see this something
crazy is going okay so let's think about
this so first of all they're all kind of
spitting out of control so if something
has got to be wrong here let's look at
I've got push matrix and pop matrix
which would lead me to booth oh so one
issue is that I have the Sun spinning as
well and I don't want the Sun to spin so
I just want the other things to spin so
and I things are spinning kind of
quickly so the issue is I really should
make the Sun probably as this like stay
at static object a completely separate
thing but I can what I'm going to do is
add a argument here which means that I
can I can set the orbit speed and when I
make the Sun I'm going to set the orbit
speed to zero and when I make the other
planets I'm going to pick a random orbit
speed and now that should fix it there
we go so we can see look everything is
rotating and that those speeds are quite
fast so let's let's be let's pick you
know much smaller random numbers and you
can see okay
so now we have a bunch of circles all
spinning around the center circle pretty
good they could have different sizes
they could be more we could do more
variety with the speed but we're getting
somewhere now to really make this
magical right nothing that I've done
here so right now is the two things that
I wanted to make this magical is number
one have planets have planets have
planets and number two make this happen
in 3d so let's see if we can you still
have to pause this video go outside take
a walk I don't know
then come back if you want watch it more
but I'm going to keep going with this
okay here we go so the first thing that
I need to do is say that hmm when I
spawn moons what I want to do is have my
planets also spawn moons so if I were to
write this so if I were to write like
this for example so the Sun gets made
and the Sun spawns a moon then I make
new planets of each of those planets
spawn their own moons and so each object
has an array of other options array of
other objects so while this would work
this would result in an infinite forever
loop because every planet would make 5
more planets which would make 5 more
planets would make 5 more plants which
would make 5 more buds so I need some
way of having an exit strategy here's a
way that I propose which is really
dangerous actually I probably shouldn't
do this is well first thing I'll do is
just I'm trying to think of a good way a
good way if there's a buncha different
ways that could approach this I could
keep track of levels so I could say like
a goal after I've spawned like after I'm
on the fifth orbiting planet forget
about it I could also write now just
like only do like the Sun with some
planets and those planets have moons
like I don't need those moons to have
moons but I also could sort of like
randomly decide if planets get moons are
not and I by chance eventually have this
stop let's do the levels thing so what
I'm going to do is I'm going to add a
second variable spawn moon zero meaning
I'm at level zero so I'm going to add an
argument called level this is going to
be useful too because level is going to
help us determine the size and speed of
these maybe and then I'm going to say
level minus one so when I spawn the
moon's Auto plus one so the Sun will the
Sun will call spawn moon's with 0 and
then it'll make a bunch of planets that
will call spawn moons
one and they'll make a bunch of planets
to be doing this for a half an hour I
guess um they will they will spawn a
bunch of planets with level two and so
on and so forth so I only want to do
this if level is less than 2 so let's
actually only do this if level is less
than 1 see what happens whoa level is
less than zero yeah that's interesting
so why did it even do it oh right
because I'm already spawning one so this
is if level is less than zero I'm
getting these five planets and if level
is less than one whoops whoops level is
less than one all of those planets have
things orbiting it now this is totally
out of control because the distances and
the sizes are all over the place so what
I want to do probably is figure out
number one is figure out the number of
moons they should have and I'll maybe
I'll make that random and it's going to
be between zero and two and and four and
so it's going to have that many so
number one this right now you can see
there's a lot fewer things right and
also the distance like the sub moons
should be much closer to those so I can
use this level variable quite
effectively so a level hmm so I'm
picking random distances and what I
could do is divide by level so first of
all I'm going to make the level one
let's start with one because I don't
ever want to divide by zero and I'm
going to have the distance B divided by
level and also the radius
I'm already multiplying book times 0.5
so I could also UPS I could also say
divided by level and and that way and
that way this should now be 2 and you
can see here now look what's going on
here sort of hard to see because I don't
have like a good sense of sizes so I
guess divided by level I started with 1
so I should say / level times - there we
go so you can kind of see her if i zoom
in what's going on this particular
planet has its own thing orbiting around
it as it orbits by the way they all only
orbit in one direction not the band One
Direction insert One Direction song
right now that orbital speed
I really should pick where do I where do
I pick the orbital speed right here
I should really pick some value also
that could be negative so that they
could rotate the spin the opposite
direction so you can see now and it's
sort of hard to tell what's spinning
around what but you can massage the
values and stuff yourself please because
I got to move to 3d but I at least want
to see that I could have another level
here and can we find it I think I've
shrunk stuff too much so let me at least
see if I can get you let's make things
generally just quite a bit closer and
also let's not have the size be that
radically different so you can see here
the multiple levels of moons I'm going
to try to zoom in here so you can see
the multiple levels of this thing
rotating around that thing with that
thing wrote today around that thing and
I could even add one more level if I
want it to be so crazy like four and
I'll let you enjoy this on your own to
try to see like everything rotating
around everything now
okay so I would encourage you to take
this add some color think about the
distances the values the ratios all of
that much more thoughtfully but this
idea of nesting systems is kind of
interesting to play with let's at least
see if we can move this to 3d</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>