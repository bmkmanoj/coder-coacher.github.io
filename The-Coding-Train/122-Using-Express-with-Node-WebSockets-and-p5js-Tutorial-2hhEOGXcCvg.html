<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>12.2: Using Express with Node - WebSockets and p5.js Tutorial | Coder Coacher - Coaching Coders</title><meta content="12.2: Using Express with Node - WebSockets and p5.js Tutorial - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/The-Coding-Train/">The Coding Train</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>12.2: Using Express with Node - WebSockets and p5.js Tutorial</b></h2><h5 class="post__date">2016-04-13</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/2hhEOGXcCvg" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">welcome to part two of making a shared
collaborative drawing space thing in the
browser with p5.js node in sockets so
what I had before was just a simple node
program the only thing that it does is
spit out my socket server is running but
our job right now is to actually add
code to this program that starts a web
server and makes sockets available for
the p5.js drawing thing to connect to
but here's the thing I missed something
in my previous video where I talked
about the fact we're going to this node
server we're going to have this p5.js
sketch the p5.js sketch is going to
connect to the node server with sockets
but interestingly enough if you could
just forget about sockets for a second
there's another reason why you might
like to write your own node server to
host your actual files as well right
when you do client-side programming the
JavaScript code executes on the browser
but the browser has to get that
JavaScript code from some fare like when
you type in google.com and there's some
JavaScript running on your browser that
Google wrote you know that JavaScript is
sitting on Google's server gets sent to
your browser via an HTTP request
hypertext Transfer Protocol so one thing
that we want the server to actually do
beyond just sockets is host the HTML and
JavaScript files for the sketch itself
so before I even get to the sockets I
want my server to speak come to be a web
server and I could write some node code
to do that but but a way to do that
that's a little bit easier than writing
node code from scratch is to use
something called a node framework a node
package node framework or package I
think are good words something called
Express so the first thing I want to do
is show you how to install express use
Express and write some code Express this
up like as a minimalist web application
framework a lot of things that you want
to do very commonly like host files or
set up you know query a route or all the
kind of stuff that I might get to in
other videos instead of having to write
all the code for them you can call on
some functions and express that hand a
lot of that stuff for you so let's come
back over here and I'm going to
the computers over here I'm going to go
back to terminal and one thing I want to
do first I'm going to attempt to be a
proper citizen in the world of node
programming and I'm going to run you
know my node program work without doing
this but it's often a good idea to - to
write this command called NPM in it
what NPM in it does is it sets up NPM
stands for by the way node package
manager and I'm going to need the node
package manager to install Express and
what NPM in it does is it allows me to
sort of set up a configuration file that
says some stuff about my project and you
know what
this looks good my project is it's going
to be called sockets coding rainbow can
no longer contain capital letters so I
will rewrite that without capital
letters version 1.0 is good description
a sockets example live on YouTube spaces
entry point server KS test command I
don't worry about that worry about that
later
sockets p5.js node author is me and
licence done and I'll figure that out
later yes this seems fine so I went
through this npm init thing and it what
that actually did is it created this new
file called package JSON and what
package dot JSON is is it's a JSON file
with information about my project again
I could probably do this without this
completely look at that how does it know
that the dependencies are expressed in
socket IO whoa some crazy internet thing
just happened did I put that in okay I'm
in the wrong place I opened the wrong I
opened my earlier example okay this was
my earlier example by the way I'm not -
I did this earlier today I'm not just
figuring it out right now
okay close that I should go here this is
the package JSON file it just got
created and you can see here there is
the information that I typed in the
title diversion and you don't see what
you're but you don't see our
dependencies so the first thing that I
need to do in order to be able to add
this thing up dramatic moment
this thing called Express is I need to
put in this package JSON JSON file that
I'm going to use a node package called
Express only I don't actually have to
type it in there because what I'm going
to do is I'm going to just say NPM you
see this going to move this over NPM
install Express now I want to do one
more thing I want to - I want to write -
- save and what this command is going to
do is it's going to say put save Express
as addle that should be associated with
this project I'm going to do this it's
going to blah blah blah blah magic magic
and then if I go back to here you can
see now in this file it has a dependency
on Express so this is just a lot of fun
this is like the least interesting thing
I could probably ever do with my day is
talk about like package dot JSON and
package manager Express blah blah blah
but these are the steps you want to do
to kind of setup your project before you
write code
you'll also notice by the way that
there's this new directory here called
node modules so node modules is where
the all the code and stuff for express
actually got placed by when I typed when
I typed NPM install Express okay so
later I'm going to add the socket module
but right now I'm just going to keep the
Express module okay so I hope that COFF
wasn't too loud into the microphone
what's next everybody so now we can
start - oh that's that's my secret code
now not here so now we can start to
actually write oh we can actually start
to write some code into our server
itself so one thing that I'm going to do
is I'm going to save our Express equals
require Express so this is a ways that
that one wrote over here yeah this is a
way of importing the module that you're
using so the module name is Express and
I want to require that Express is
something that I have access to in my
node program and essentially I want to
import all that is the lie all that is
the framework Express and I want all of
that into a single
variable called Express the reason why I
can do and that variable by the way is a
function call I mean the variable is a
variable but it's it's it's storing a
function a JavaScript function you know
what that javascript function does it
makes an express application so I can
trigger the express function and store
the result of that in a variable called
app and then even better what I can do
is I can say server equals app dot
listen port 3000 so now dare I say if I
run the server my socket server is
running and look at that it didn't go
back to terminal something's happening
something is there on port 3000 and I
can go to my browser and say localhost
write this localhost being the server is
running on my local computer
if this server were running on you know
the New York Times website I would go to
your x comm colon port 3000 but I'm not
the New York Times in case you were
wondering and now I'm going to hit enter
and now it's like I doesn't know what to
do but this is reasonable right because
I haven't told it what to do there's no
files there's no instructions for it to
follow but this is the basic idea the
basic idea is that I want it and and by
the way you could do this without
express but it would be like 10 11 12
lines of code so I'm using Express to
set myself up for the future of life of
less worry Express will give you less
worry in your life so I require the
library I create the app I listen on
port 3000 and now what do I want to do
what I want is when the user goes to my
website I want them to see my p5.js
sketch so the main thing I want to
happen is I want to send my HTML file
along with my JavaScript file and
everything else so they can experience
my sketch well one thing I need to do in
order to do that is I need to go to this
directory right this directory has a lot
of stuff in it right now
it has both the node stuff like server
Jas and packaged out JSON and the node
modules and also has the p5.js stuff an
HTML file sketched out yes and a library
I don't like this everything is mixed
and a mess so I want to make a folder
and I'm going to make that folder called
sketch now truth be told probably if you
see examples most people going to call
that folder public let's call it public
the reason why I'm going to call it
public is this is like going to be where
I put files that I want the public to be
able to see when the public goes to my
web server they get these files and so
what are the things I don't want them to
see my server code but I want them to
see my p5.js sketch so I want the HTML
file the libraries and my JavaScript
file and I want to put that here in
public now what I need to do here is add
another line of code which allows which
says I want to host those files whenever
anybody goes to my website I want them
to see those files so the way that I do
that I'm just going to copy it from over
here and I'm going to put it right here
so this is what the code looks like app
dot use Express dot static public so
what's the word static for so the word
static here is hosting static files so
those are files that aren't dynamic and
changing they're just like here's an
HTML file here's a JavaScript file
here's some images I want to host
everything I want I want the app to use
this to host everything in that public
directory so that when the user goes to
my website they see what's in the public
directory so I'm going to hit save and
now I'm going to ctrl C I'm going to run
the server again my socket server is
running I'm going to hit refresh and
look at that I don't see cannot get
anyone but I don't see anything in there
why don't I see anything in there well
it'll see anything here because there's
no actual sketch so let me go into
public let me go into sketch j/s let me
say create canvas two hundred two
hundred let me say a background 51 let
me say ellipse like Mouse X minus y
sixty sixty and let me refresh again and
you can see there we go so now I
actually am hosting a p5 GS sketch from
node with just with express with Justin
you know for 4/5 lines of code so by the
way I have another video which I would
like to reference somehow with a link
where I looked at how you can run a
local server on your computer using
Python simple server well now here's
another way you can run just
local server on your own computer with
node with Express with four lines of
code so we've got the basic idea now we
know it note is we've installed it
we've got Express we added a little bit
of code we are now seeing our sketch in
the browser the next thing I need to do
is add the socket package
I need this server to be able to make
socket connections to the browser the
client itself to be able to send message
messages back and forth and that's what
I will do in the next video</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>