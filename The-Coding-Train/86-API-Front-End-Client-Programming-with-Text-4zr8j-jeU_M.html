<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>8.6: API Front End Client - Programming with Text | Coder Coacher - Coaching Coders</title><meta content="8.6: API Front End Client - Programming with Text - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/The-Coding-Train/">The Coding Train</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>8.6: API Front End Client - Programming with Text</b></h2><h5 class="post__date">2016-11-19</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/4zr8j-jeU_M" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello okay so now what I would like to
do in this video is actually add a front
and client to this particular API and
now there's there's a there's a kind of
question in my mind just floating around
here which is like why am i doing any of
this and so on the one hand I might be
making it a kind of a build-your-own API
in node just for one person and that's
for myself like I might want to make an
API for the way of storing data and
communicating and doing server-side
stuff for my particular front-end I also
might want to make an API that is open
for other clients to be able to connect
to and that's something that I've got to
get to in this list so at some point
I'll show you it's actually very easy to
open up your API to other servers to
make requests using some node package
called cores but I'll come back to that
for right now I'm almost thinking of
this is just my own little project and
some of my project I need server-side
programming and some of my project I
need client-side programming but I need
those two things to talk to each other
so the first thing that I want if you
recall one of the pieces of this program
that we've written actually uses
expresses ability to host static files
and all the static files are in this
directory called website but I called it
website just to like call it something
but often it's called public or you
could call it whatever you want unicorn
whatever you want to call it you have a
folder with files that you want to
search and I have right in there I have
this index.html file and all it says in
it is blue so if I go back to the
browser and I go to the root page I see
new and so what I want to do now is I'm
going to grab from my desktop a p5 and a
p5 sketch so it has an index.html file
some JavaScript code and the libraries
that I want to use and I'm going to
actually go into this particular API
example that I'm making and I'm going to
put that all in here and I'm going to
replace so now if I hit refresh one
thing is I don't have to restart the
server by the way though server is going
to be able to just serve up those files
as they change and we can see now
anything and I go over here and I can
add some code I can say you know nope
maybe no canvas I don't want to canvas
right now and I can say console.log run
thing is your refrigerator running you
better go and catch it
and I can see ah so that sketch is
working so now how do I do something to
access the data that's part of this API
so one thing is actually never mind that
let me actually add a canvas and what
I'm going to do is I'm going to say I'm
going to say I'm going to say create
canvas and I'm going to say you know 400
, 400 and a background 51 which is my
background color of choice and we can
see I now have a canvas woo it's huge
no no keep state large over there and
small over here okay so now I have this
canvas and what I want to do is I now
want to say load JSON slash all and I
don't even know if I need that slash
look at this if you've ever done
anything with p5 or jQuery where you're
loading something from an API open
weather map org slash API slash city
slash New York what I'm doing here is
I'm querying the API but rather than the
full URL the API is running on the same
server that's hosting this JavaScript
sketch so I could just say slash all or
I can say slash search slash slash
rainbow right I can go to any of the
routes simply from the lo JSON function
so what I want to do is do slash all and
I'm going to then have a callback for
when I've gotten the data called got
data and I'm going to write that
function and the data comes in as an
argument to that function and just to
see that it's working I'm going to say
console log data so let's run this again
and we can see there it is
I now have accessed in my client side
code do all the data from that's running
in the server and one thing that I'll do
here just out of curiosity some get rid
of this slash I think it works with rel
absolute or relative path so you can see
that works either way ok now what could
I do
let's say I want to iterate all over
these there's a kind of a trick this is
an object so there's not an easy way to
iterate over an object as if it's an
array although there are plenty of ways
to do that a way that I like to do it is
I can save our keys equals object keys
data and I'm going to just show you what
that gives you console dot log T's
but you can see is it gives you an array
with just the keys in that object so you
can see this is the full object but now
I have an array with just the keys and
that's an easy thing for me to iterate
over so I can do something like for VAR
I equals zero and I know I could do a
for each or whatever everybody always
complains but I am like I'm just left
like an old-world style of programming
like my for loops like this and I'm
going to say key equals keys index I I
must say word actually and score equals
data index word and then I could say you
know VAR x equals random with and VAR y
equals random height and fill 255 and
text word x and y and let's see what I
get now if we run this we can see and
let's make it bigger text size 64 and
you can see there we go so obviously I
could I'm seeing now all the words that
are in the database kind of visualized
in the canvas and I could of course like
color them I could think about
visualizing thoughtful way I could make
their font size and their color based on
their sentiment score but I'm just
showing you that I can access a
particular route and then visualize that
route visualize the results of the data
that I'm getting through that route in a
canvas but ultimately what I might want
to do here actually even more
importantly is I might want to add input
ID equals word and then input ID equals
score so let's look at what that looks
like and I'm going to I'm going to wrap
that in a paragraph I'm going to say
word and I'm going to put a line break
and I'm going to say score and /p so now
we can see on my webpage and something's
driving me a little bit crazy here which
is this default styling we can see here
oops that I now have this little kind of
basic form it's barely a form but it's
like I'm a
made a little paragraph that has word
and then a text input box score and a
text input box I just put that in the
HTML directly and then I probably also
maybe want to add some sort of button
submit button and I can give that an ID
also ID equals submit so what I'm doing
here is I've made a little interface
that has a place for me to type a word
and a score and I'm able to hit submit
so why am I doing this because what I
want is the moment I click Submit I want
to send what is in those two text fields
to the route ad right I need to go to if
I go right now to add a sunflower
for three we can see that that was added
and now if I go back to here we're going
to see that sunflower shows up there I
don't really like what I've done here
with this visualization because it's
sort of hard to see what's going on
let's make that a little bit smaller and
let's let's just make it oh I'm sorry
I'm going a little crazy here but just
bear with me for a second unnecessarily
there we go
so now I could see like although you
could see that sunflower was added there
but I added it manually only by going to
the route in the address bar but that's
not really how anybody normally
interacts with an API I don't know maybe
I do that quite normally so now what I
need to do is I need to handle that
submit button
so in p5 I can gain access to that
through the Select function so this is
me using a submit sorry this should say
submit this is me selecting the Dom
element with the ID submit and that
button has the ID submit and now I have
it in a variable and I can now attach an
event like whenever the mouse is clicked
on that button - I can say submit word
and now I can write a function
submit word where I get the word from
the word element and I can just say dot
value and I can get the score from the
score elements value
so select looks for the text input box
word school and then score and then the
value function gives me the contents of
what's in there so just to see that this
is doing what I want it to do I'm going
to say console.log word score so let's
go back so I'm not submitting it yet but
let's go back and hit refresh Oh
select is not defined guess what I these
functions are part of the p5 Dom library
so I need to make sure I am referencing
the p5 Dom library in my HTML which now
I mp5 donkey is and so now I can go back
and hit refresh and now I should be able
to type in a cherry blossom too and hit
submit and we can see that that I'm able
to access those two values and now what
do I want to do all I need to do is go
to load JSON what's the route ad slash
plus word plus a slash plus a score so I
can dynamically create this route in my
code based on what the user is it put
into those two text boxes so now I want
to now this is a little bit weird and
I'm going to get into this in a future
video where I talk about get versus post
I'm actually doing something that's sort
of against the traditional conventions
I'm using low JSON which is a get
request to actually send data the word
and the score to the server but I'm
really doing that out of convenience
because it kind of works and it's easy
and it's simple you'll see in a lot of
other scenarios if you want to send data
to the server images large data private
data you're going to need to use
something called a post which cannot be
done through load JSON but I'll get to
that in a future video but so and then
I'm going to just add a function called
finished as the callback whoops and then
I can say from function a finished data
console dot log data so I just want to
see that it came back so I'm going to
I'm going to send that data and see that
it came back and then I'm going to Simon
hit refresh and I'm going to add
blueberry ten and I'm going to hit
submit and we can see that this was sent
to the database now if I hit refresh
again we should see that blueberry is
there
why not though however once it's done
ask the ask the database for all the
words again to like redraw what's in
there so here this is what I did to like
redraw everything I could actually put
this in a function could call this
function like draw data and so when the
program first starts I want to draw the
data and then every time I submit a word
and it's done I also want to draw the
data again so now if I do this I can say
hey let me add the word mango and give
it a score of three and hit submit and
now look at that eye one thing I forgot
in my draw data function was to clear
the background so because it drew it
again over everything so I'm going to
take this background function and put it
right here in the got data function and
I'll hit refresh again we can see
everything's in there mango flower
blueberries sunflower all these things
what's another fruit that is delicious
or raspberry only know how to spell
raspberry now because of the raspberry
pi and it's like that's like the
password or something deep on a type of
get hit all the time score a for and I'm
gonna hit submit and there we go it runs
and we see the result so now I have an
interface where I can sit here and
submit new words to the database and I
also have this sort of goofy front-end
which just shows me a very poor
visualization of all the words that are
currently in this database and if I go
look in the server code I should be able
to see hey look at this this words JSON
file it has everything
so even if I now quit and restart the
server and go here again I'm still going
to see all of those words so now we have
boat we now we have an API with routes
that accept parameters we have a we have
a persistence saving all the data to a
JSON file and now we have an even an
interface that allows us to interact
with the API in one way and so the next
video that I'm going to do is look at
how do I submit data to a server you
a post and why would I need to use a
post versus again what to get what's
supposed so that's what I'm going to
look at in the next video that I'll make
and then by the end I'll wrap it up and
actually make this thing do some sort of
sentiment analysis and give a score back
when you post a large body of text to it
okay thanks for watching and look
forward to hearing what you think in the
comments and all that sort of stuff
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>