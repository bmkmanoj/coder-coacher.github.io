<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>4.3: Deleting objects from ArrayList - The Nature of Code | Coder Coacher - Coaching Coders</title><meta content="4.3: Deleting objects from ArrayList - The Nature of Code - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/The-Coding-Train/">The Coding Train</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>4.3: Deleting objects from ArrayList - The Nature of Code</b></h2><h5 class="post__date">2015-08-02</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/IsdZKG9wyBc" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">this video now is gonna focus on
removing elements from an ArrayList what
happens when an ArrayList gets too large
or there's certain elements that are in
the ArrayList but we don't need them
anymore we want to delete them from that
ArrayList so that our program can run
smoothly so an example of that is right
behind me this is where we left our
sketch off that we have this empty array
list that we initialized and set up and
now what I added to it is every time
through draw a particle is added and
this looks like hey that's the particle
system example we wanted to make work
are done all it is is adding a new
particle every time and draw and then
saying hey all those update and display
them but here's the issue
this ArrayList is getting larger and
larger and larger we're adding and
adding and adding particles to it we're
never deleting them so we need to figure
out how do we delete them so in order to
figure out how to delete them this is
gonna cover the last two methods of
ArrayList that we that we care about so
let's take a look at that list right we
already circled it this is the second
type through I screwed up the first time
around but we are we are looking at
remove and size so what we want to say
right now is hey let's just start with
this simple way of doing it if the
ArrayList gets too big delete some
elements out of the list so how do we
first say if the ArrayList gets too big
well within a regular array we know we
can say that array dot length will give
us the sahte the length of the array
with an ArrayList we call the method the
method is called size so that's sort of
an easy thing to do we can actually just
say something like if a dot size is
greater than 100 right now do something
if the number of elements in that
ArrayList has somehow exceeded 100 this
will happen very quickly if we're adding
a particle every frame what do we do we
need to remove an element from that
ArrayList so the remove function deletes
elements from that list what do we have
to tell we have to tell which one
elements an ArrayList are in an
ArrayList or index just like in a
regular array so if this is kind of a
representation of our ArrayList and we
could sort of think of they're like
these particles floating in each slot
and each slot has an index if I asked if
I say to remove
a dot remove now which one should I
remove I could say let's remove zero or
one or two it doesn't really matter but
in this case what I'm going to actually
do is say remove zero I want to remove
that first element from the ArrayList
why because when you add elements the
ArrayList they get tacked on to the end
so you can see this ArrayList sort of
drawing is expanding with slots for
particles it gets bigger and bigger each
time we add one if we take away the
first one that's the oldest particle so
in this case I'm saying it's gotten very
big find the oldest particle and delete
it so a dot remove 0 so this is a sort
of first little quick example of what of
how we might keep an ArrayList from
getting too big so let's go back to our
example over here and we can say hey ok
let's add that bit of code if particles
dot size is greater then let's just do
something really simple right now
greater than 15 arbitrary number
particles dot remove 0 let's do that now
let's take a look at you can see they're
actually it's like making them but it's
like deleting them very quickly like
because we can only have 15 total and so
you know something more reasonable okay
drop something something more reasonable
might be 100 and we can see okay it's
giving us 100 particles and we I could
kind of see that they're getting deleted
so maybe we want it to be larger this is
not the point of this you can tune your
program to figure out what the right
size and when you want to delete the
point of this is this is a really simple
way basic demonstration of how we can
just keep out an ArrayList size to a
maximum as well and to a maximum and and
remove elements from that list at but
what we want to now and this is not but
this is not the implementation we're
going to use in our first particle
system example that we're building what
we actually wanted to do is something
different we want to say hey when a
particle is finished remove it so it's
not about just saying oh we can only
have a hundred we might say like a only
the particles on the screen let's keep
only the particles whose alpha hasn't
faded away let's keep so we want to make
this a little bit more
advanced we want to figure out when a
particle is finished let's remove it so
we need to talk about this a little bit
and then we're gonna add that code to
this example so over here let's figure
out how we're gonna do that okay so
here's the thing
ah oh this is very very sad big to tell
you we were so happy about that enhanced
loop right that enhanced loop that we
are over here for every particle P and
particles we don't have to have in I and
any of that stuff the problem with this
enhanced loop is we can't modify the
ArrayList while we're in that loop and
what we want to do right now is modify
the ArrayList while we're in that loop
we want to say for every particle in the
ArrayList particles check every one if
one of them is finished delete it from
the ArrayList so we want to delete
things while we're looping through the
ArrayList so we can't use this loop but
hey we know how to write a loop that
counts we could use a loop that count so
let's figure that out we could say in
the case of our ArrayList called a over
here we could say int I equals 0 I is
less than how long is the ArrayList a
dot size a dot size i plus plus now we
can say particle p equals a dot get I so
right this is what the enhanced loop
does for us it just says hey do
something to all the particles we can be
more long-winded about it we can
actually count from zero to the end of
the ArrayList and we can ask for each
particle at its index I individually so
we're good we can do this and then we
can say things like remember we had that
function if particle is dead remember
that function we wrote in the particle
class that said when lifespan is less
than 0 when lifespan has gone all the
way down to 0 we're done with it we can
delete it well now we have that function
we can then say a dot remove I right
this is this is our new algorithm
that we have for looping through an
ArrayList there's going to be a problem
with this we're gonna get to the problem
with this in a second but this is
whenever you want to manipulate an
ArrayList add delete alter the order of
things while you're looping through it
you have to loop through it manually in
truth you might see you might see some
examples in processing that also use
something called an iterator there's an
iterator object in Java and in fact if
you read the nature of code book it goes
through it but I've now decided that I
think it's best and simplest to just
look at two scenarios the Enhanced loop
when we just want to hey let's look at
all the objects for every particle P and
the ArrayList particles boom we're done
if we want to manipulate or do something
more kind of fancy to the ArrayList
during the loop we have to count through
the indices ourselves and access each
particle this is the case of that when
we want to delete particles so let's
actually put this in our code it's kind
of work but don't want to talk about
what's there's something a little goofy
going on here that's that's a bit of a
problem that'll be where we'll kind of
finish this video so okay let's go add
this to our code here we are we can say
all right instead of using the enhanced
loop we need to replace this enhanced
loop with a loop that counts for int I
equals 0 is less than particles dot size
I plus plus particle P equals particles
get I if I run this you can see exactly
the same instead of the enhanced loop
looking at each particle individually
but now down here I can say hey let's
make sure right remember we have this
function is dead we have this function
is dead that says when lifespan is less
than zero give us the value true awesome
that's exactly what we need if P is dead
then particles dot remove I right
because if we're looping through the
ArrayList we're on particle I if
particle I is dead remove particle I and
let's run this and we won't see anything
different
it just works but the reason why we
don't see anything different is we're
removing them kind of surreptitiously
the background when they faded out we
don't see them anymore you know as an
exercise if you would like an exercise
like right now pause do an exercise go
get this example which is 4 point 1 2 or
something in the nature of code book and
change it to instead of when a particle
has faded out when it's off the screen
if it's Y value is greater than height
or its x value is greater than width or
less than 0 try removing a particle in
that case so but we we're so we're kind
of done here except for a rather
important detail that in many ways hey
it works it doesn't even to be going too
slow it's fine who cares why should we
go deeper and worry about things that we
don't not need to worry about but it's
my obligation I have under contract to
show you that there is a kind of subtle
flaw that in the end might not really
matter but in some of the things that
you build could really matter so I'm
obligated to point that out to you right
now let's go take a look at what it is
ok
so let's create a scenario you can get
rid of all this stuff that we've written
up here let's make an ArrayList and I'm
gonna put hello I'm gonna put letters in
this ArrayList so here is my diagram of
an ArrayList and I'm gonna put the
letters a B C D and E in it and we can
consider those particles particle a
particle B particle C particle D and I'm
gonna say to you that particle C is the
one that's dead right now so all the
other ones are alive and particle C is
dead so particle C is the one that we
want to remove and they each have an
index 0 1 2 3 and 4 can you see those
numbers if not you could count from 0 to
4 I bet 0 1 2 3 &amp;amp; 4 so we're going to
for a moment like we're gonna pretend to
be the loop we are the loop I we are I I
am i well that's weird
i am i i i okay is equal to 0 I don't
like that over there I is equal to 0 0
is a is a alive
yup update display we're done I is now
equal to 1 is a is one alive B yes it is
update display
I is now equal to two is two alive no
it's dead
we need to delete it from the ArrayList
so we're gonna say a dot remove two now
what happens to that ArrayList when we
delete that element let's draw that
ArrayList again here is what the
ArrayList looks like now once we've
deleted that element it's a B D E
because we removed C D any slide over to
fit into the spots next to B that's what
the ArrayList looks like now let's look
at its index values 0 1 2 3 1 what are
we on now we just checked too now we
have to check 3 is 3 whoa whoa wait a
second here if you're following along
we're checking E we never check D we
checked C we removed it D slid over so
we we're not checking D we're checking
enix so if you've what's happening here
when because of the way the elements
slide over as we're looping forward
through the array we could be skipping
them by accident now in the end it
doesn't really matter maybe we didn't
check D and we didn't display it will
display it next time big deal you might
see a little blip on the screen but this
could you know in other programs this
could be a disastrous you know
catastrophic catastrophic consequences
so we have to be very careful if you are
looping through a list and manipulating
that list let me just think about it
what if you were looping through a list
and adding things to it while you were
looping you could never get to the end
of it so you'd have this infinite loop
that would never get to the end and your
program could potentially crash there's
so many things that can go wrong when
you're manipulating a list while you're
looping through it so you just have to
be careful and be aware of what's
happening with those elements how are
you adding how are you subtracting where
are you in the loop in this case there's
a very simple solution the simple
solution is if we go backwards through
the list we won't have this problem
right because if we start with E then
with D then with C you know we could
delete stuff and all of these things can
shuffle around B and a aren't unaffected
so going through the list backwards is
the solution in this case in other cases
it might be something different so how
do we go through a list backwards oh
it's no problem I mean you know how to
do this trust
me but let's look at it right here's a
loop where start at I equals zero okay
instead of starting at the beginning
let's start at the end what is the last
element of the array list a dot size
minus 1 right if there were 10 elements
in the ArrayList
the last one is index 9 0 through 9 here
we want to go all the way until we get
to the end of the ArrayList now we want
to go just down until we get to the
beginning
what's the beginning 0 so I is gonna
loop until it gets down to zero instead
of going up by 1 we're gonna say I - -
now UPS oh and it's not called a excuse
me in this example the Ray list is
called particles now if we run this we
can see here we go and now this is our
example we have done it
oops I didn't knock over the laptop ah
dropping things okay the only thing I
could do next is fall but what we've
done it right this is exciting we now
have our particles of basic simple
particle system example and the next
step that we need to take with this is
say we actually now want to encapsulate
the idea of the system into its own
class that's going to allow us to have
multiple particle systems right particle
is an object right now we have an
ArrayList of objects but we want to have
an object that is the ArrayList of
objects right particle is an object the
system is an object and then we could
eventually have a system of systems a
list of particle systems so we could
have a system of system of systems could
go on forever but this is our goal and
that's what we're going to do in the
next video</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>