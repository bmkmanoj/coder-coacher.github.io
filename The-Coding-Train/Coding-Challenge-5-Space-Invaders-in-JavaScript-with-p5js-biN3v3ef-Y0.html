<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Coding Challenge #5: Space Invaders in JavaScript with p5.js | Coder Coacher - Coaching Coders</title><meta content="Coding Challenge #5: Space Invaders in JavaScript with p5.js - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/The-Coding-Train/">The Coding Train</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Coding Challenge #5: Space Invaders in JavaScript with p5.js</b></h2><h5 class="post__date">2016-04-26</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/biN3v3ef-Y0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello welcome to another coding Rainbow
coding challenge this challenge has no
time constraint I've got a stopwatch
going we're to see how long it takes I'm
not gonna I'm gonna go move quickly but
not going to rush and we're going to
feel relaxed and meditate on what we're
going to program here so today what I'm
going to program in JavaScript using p5
GS is the game space invaders classic
Atari game I believe you can see some
images from the original game I'm going
to be using simple shapes to represent
the things in the game and actually I'm
going to create a different version of
it I'm going to call it flour invaders
and instead of aliens there will be
flowers and instead of bullets you will
shoot water to water the flowers because
that's how I feel today in my world of
rainbows and programming okay so I have
to just get started so the first thing
that I need to do is I have a blank
canvas here of code and I'm going to add
whoops I'm going to type it here i'ma
add function setup and I'm going to add
function draw and I'm going to say
create canvas 600 400 and I'm going to
say and I'm going to say background 51
so I'm using the p5.js framework which
has a set up and draw function set up
starts the program draw loops over and
over again for animation and I'm in a
UPS I minimize that I'm going to go back
to the browser here hit refresh and you
can see there's my canvas so let's think
about this let's come over here for a
second and think about how we're going
to organize the code for this so in my
flower Invader program I need to have a
bunch of flowers I need to have one
watering can and I need to have water
things and maybe I need a bunch of those
so I need an array for flowers I need an
array for the water and I need on one
object for the ship we're just gonna
call that a spaceship it's a watering
spaceship what I'm doing today okay so
let's do this spaceship first that's
probably the easiest thing and what I'm
going to do for that and I'm just going
to go right ahead I'm using so the
sublime text editor I'm gonna make a new
file and I'm going to call it shipped
Jas
and I'm going to write a constructor
function which gives an x value and I'm
going to say with divided by two so this
ship is automatically going to start in
the center of the window what does it
need it moves left and right so although
I guess I'm going to move it left and
right with the keyboard so this is
really all I need I just now I also need
a function to show it and why I'm going
to make it a rectangle because I'm lazy
and I'm figuring out how to draw a
triangle to bottom it's gonna cost me
too much of a headache so I'm going to
make a rectangle at this dot X and where
does the rectangle need to be at the
bottom of the window height but maybe
the rectangle is going to be like 20
pixels high so it sits at the bottom but
20 pixels up and then maybe it's 20
pixels wide and 20 pixels high and it's
going to be white and now so this is a
very simple idea of a constructor
function I can make a ship object and
that ship object has a show function if
you're wondering why I'm using a
constructor function rather than making
just like an object literal I just like
constructor functions and I've made a
whole video tutorial about them which I
will hopefully link to somehow if you're
watching this okay so now I need to go
back to my main sketch ooh boy I lost
that oops this is like a irrelevant file
sorry about that I need to go back to my
main sketch and I need to create a
variable I'll call it ship and now I can
make an instance of that object new ship
and then I can say ship show and now I
added that code I should be able hit
refresh we spent about 3 minutes doing
this so far I can hit refresh and boy I
have some sort of error so look ship is
not defined so why is ship not defined
I certainly defined it right here in
this particular JavaScript file well one
thing you can't forget to do is when you
add a new JavaScript file is to also
make sure a reference to that JavaScript
file is included in your HTML file
itself that's what the browser is
actually loading to know what all the
JavaScript it should look at now we can
see there's the ship it's right there at
the bottom and now I need to do is
figure out a way to move it
left and right so a one way to do that
here in if since I'm using p5.js is to
add a function called key pressed and so
in key pressed I can check this is an
event that's triggered anytime a user
presses a key on the keyboard and I can
check if the key code is right arrow I
can say ship dot left else if the key
code is left arrow oh boy so I gotta get
my equal signs right sure so first of
all I how many equal signs should I be
using here a hundred percent not one one
equal sign is for assignment x equals
five vona ask the question does X equal
five I can use two equals I want to be
really really serious about it I would
use three equals that's a little
off-topic here but I'll just point out
what I mean this is true this is not
true
so whoops the first one is true the
second one is not true think about that
for a little bit and come and ask me in
the comments that that doesn't make
sense to you okay so coming back here
I'm going to then now say a ship dot
right
so if amusingly I'm moving the ship left
when I hit the right arrow and right
when I move the left air but actually I
don't like this first of all what it
left and right oh this is some magic
automatic thing that happens on a
computer when you call a function called
left thing moves the left no this is the
idea of something I'm going to make up
that's part of the shift but it would
ship but it would make much more sense
for me to have one single function that
moves the ship and then I could give it
an argument to tell it whether to go
left or right so I'm going to just say
ship dot move one meaning move to the
right ship dot move negative one meeting
move to the left and now I can go into
the ship object and add that function
move equals function I'm going to make a
variable called dir that's the argument
getting the one or the negative one and
I can say this X plus equals dir so when
I press left or right the ship moves
left or right so now if we go back hit
refresh click in here and you can see
it's really moving can I hold the
keyboard down we've got some issues here
interaction wise let's
let's let's at least let it move five
pixels the other thing I want to do is
draw the rectangle via its Center and
then make it a little bit maybe make it
a little bit taller so you can see this
is my watering can thing so I don't know
why it's interestingly enough so I boy
all these little details that you don't
think about when you start these
projects out if you so it's simple but
now actually do I want it to permanently
move to the left and the right how do I
stop it if I want to hope I'm holding
down the key maybe we'll solve those
problems later but I'm going to just
keep moving for right now so I need to
improve the interaction here about
actually when I'm holding it down and
there is a way to do that okay I know
what to do but I'm going to hold that
off till later I'm gonna come back and
fix that because the next thing I want
to do is add the add that add the
flowers so if you recall the flowers are
things that live above and I need an
array of them so I'm going to make a
flower object come back over here I'm
going to make another new file and
whoops I'm going to make another new
file I'm going to call this a flower j/s
and I'm gonna make a function isn't
going to take a long time right it's
seven minutes but you know we'll see how
long it takes I'm going to make a flower
object and the flower object is also
going to have an X I'm going to give it
some arbitrary location know why and it
also is going to have and you know what
I'm going to do I'm just going to
duplicate this because so much about it
is going to be the same and then I'm
just going to rename this to flower and
I'm going to also give it a Y to start
it somewhere and this is good but I want
it to be an ellipse I want it to be
purple because I'm thinking about purple
today I think that's about purple and
this should save this dot Y you know
anybody who hopefully if somebody will
watch this video and make a really nice
pretty flower design or a good download
a flower image I'm going to take out the
move function for right now so we can
see now aha now I have a flower object
basically the same idea and what I want
to do in sketch now is make
to test that this is working make a
single flower object so I'm going to say
new flower and I'm also going to say
flower dot show so now I made that new
flower object I've got this now I'm
going to refresh and we can see our
flowers not too fine boy I cannot
remember this I can never remember
index.html we've got to add a reference
to flower Jas now here we go look I've
got a watering can ship and a flower and
I can move my ship and I have it no but
I but one flower is not enough I want to
have an array of flowers so this is a by
the way with the ship I probably didn't
really need to use a JavaScript
constructor function but I'm going to
make the case that it really makes a lot
of sense to use it with the flower
because what I'm going to do now is say
actually what I want is to have an array
called flowers and instead of having one
flower I'm going to write a loop I
starts at 0 I is less than 5 I plus plus
and I'm going to say flowers index I
equals a new flower and then here I'm
going to take this and I'm going to put
all this in draw and I'm going to say
flowers index I show so now and let me
move this key pressed out of the way
because we can come back to it later so
this is the structure I have a single
ship I have an array of flowers aliens
if you're really programming space
invaders and I'm making five flower
objects and showing them all so let's
run this again it looks like there's
only one flower why because they're all
being drawn in exactly the same place
because here I have hard-coded the
location of the flower so what do I need
to do this is good right I actually need
to use constructor arguments so if I add
an X and a y there those are different
X's and Y's than the disk so this that Y
that are part of the actual flower
object and these temporary variables
that live as arguments to the
constructor that receive a value and
then I can fill say this dot x equals x
and this dot y equals y and now I can go
back to the main program and say make me
a flower at you know
with 20 and if i refresh you can see oh
I got a bunch of flowers at random
locations but maybe I want to space them
out evenly so what I can do a little
math to do that I can say like and where
did I have it I had it like 60 and I can
say I I times I don't know how big are
the flowers the flowers are 60 I times
80 plus 80 I'm making up some math and
that's why they're kind of spaced out
right so the first one I times 80 is 0
and looks like I could fit easily like a
couple more on here so let's like let's
make 6 that one more see whoops oh oh
you know what this is terrible look what
I've done here I made add an extra one
but this here I should never hard code
the value 5 here I needed to hard code
the value 6 here because I'm ray is
empty when it starts but here I really
should be using flowers dot length so
good thing I found that let's hit save
and now i refresh okay so this is a
pretty good start I have a bunch of
flowers I have my watering can
so what I'm going to do now is I need to
oh boy 12 minutes in we're making good
progress here what I need to do now I'm
just checking the chat to see if
everybody have looks the timer's a bit
small oh boy
you can't see that whatever I got to
work on my timer I shouldn't look at the
chat you keep like that okay there's a
live chat I'm doing this live but you'll
be what some most of you watching this
not live sorry to have to say that okay
so now I need to add the water this is
going to be the trickiest part right
because I dynamically need to make
objects that emit from this one and I
don't know how many they're going to be
like I know I have one ship and I know I
have six flowers but I don't know how
many particle water particles I have
water droplets droplets so first let's
just make the drop so once again I'm
basically doing the same thing I'm going
to make a new file and I'm going to call
it a drop j/s whoops and I to rename
that sorry everybody drop j/s and
okay I've got to delete this sorry
everyone and now what I'm going to do is
I'm going to go into the flower which
has a lot of stuff that's useful for me
I'm going to make the water a kind of
bluish color and make it a small circle
and I'm going to call this a drop and
I'm going to remember right now to add
that to the HTML file
oh-hoh not forgetting this time yeah in
your face HTML file that was very rude I
don't want to be B to the HTML file I'm
very sorry you are my friend and I'd
like you and I just was trying to make a
joke but then I said something a little
bit mean and I don't like that guy edit
that out of this video don't actually
edit it out I don't know who I'm talking
to anymore okay um so now I have the
drop so the tricky thing about the drop
is oh for sure we can be a little bit
advanced about this and we can probably
say we know that the drop when it moves
it should the y-value should - one right
- one moves it up right the y-value
should change so i kind of know the drop
has an x and a y it's a small little
circle probably 20 pixels is even too
big it's a small little bluish circle
and it's going to move up so this is my
drop object so let's just get one drop
object here just to test that it's
working so I'm going to make add a drop
object and then I'm going to say drop
show and drop move so I'm just adding
there's a ship that's showing a drop
that's showing and moving and flowers
that are showing so if i refresh this
sketch now I don't see that drop
anywhere why not
so let's think about this we got to
debug this one thing that I would do to
debug this is let's not look at the ship
or the flowers to just see the drop they
want to see a drop anywhere I don't see
a drop anywhere let's go back to the
code and into drop touch s ah okay big
problem I the drop needs values to give
it a starting location well that's
that's something I clearly forgot so I
want to make the drop let's just put it
in the middle right now just so we see
that it works there we go there's the
drop and you know I don't I don't I
don't like how this drop is looking
so I'm going to say a no stroke and make
it a little bit bigger and also a little
bit brighter because it's a bright day
today okay so there's the drop moving
moving kind of slowly probably this kind
of thing would move a lot faster this
should be a variable but you get the
idea that's working now let's put the
ship back in I'm going to show the ship
again now how do we get that drop to
start from where the ship is okay so
first of all what are we doing here the
drop does doesn't exist the drop only
exists maybe if I hit the spacebar so
I've done this before I think I can kind
of skip a few steps here and know that
what I want is an array and in the same
way that I'm going to leave that there
I'm going to comment this out in the
same way that I am have this loop to go
through all of the flowers what I want
to have is a loop to go through all of
the drops and say drops index I show
drops index I move so now I'm saying
however many drops there are if there's
zero drops don't show or move any if
there's five sure move all five if
there's ten show and move all ten
however many they're all are call the
show and move function so when this
program first starts there are none how
do I add them I need to add drops the
moment the user presses the spacebar so
now we're coming back to our key pressed
and I can also say now here if key
equals space is probably another way to
do this but I'm going to just say if the
key equals the space then I'm going to
say VAR drop equals a new drop with
divided by two height divided by two and
drops dot push drop so whenever the user
hits the spacebar make a new drop object
and add it to that drops array and that
drops array will just expand magically
okay so let's run this and now if I hit
the spacebar oh drops is not defined
what happened what did I miss
always with an error
line 37 drops is not defined oh I called
it drop I want to call it drops and this
should say drops and that should say
drops oh I was just being inconsistent
about my typing but I fixed that now
okay here we go ready and spacebar
spacebar spacebar spacebar so you can
see every time I hit the spacebar I get
a new drop but I need to do something
more I need to connect its starting
location where that ship is and you know
what this is going to actually be the
easiest thing in the world to do because
all I need to do is say instead of
hard-coding in width / - height / - all
I need to do is give it the ship's start
that drop at the ship's X location and
you know maybe the bottom of the screen
and now I'm going to run this again and
you're going to see right the water
droplets are always coming from the ship
no matter where the ship is and I really
want to fix the way I'm moving the ship
but right now I'm going to leave that
you can see whew drops and you know I
could there's so much more I can do with
this but this is the basic idea ah we
got to put those flowers back in okay so
let's put the flowers back in and now a
couple things the flowers should really
move I think it's space invaders the
aliens go like this tu-tu-tu-tu-tu-tu
and I'm already almost a 20 so I'm not
sure we're going to add that feature to
this and maybe that'll be like bonus
exercise for you to try to do and I'll
certainly post a solution with that but
let's at least at the very least right
now get the drops to hit the flowers and
make something happen okay and there's a
couple other things I want to talk about
with this drops array like I you know in
theory there are still these drops that
are now thousands and hundreds of pixels
high and I can't by the way my arm it's
very sad how my arms cut off the way I
have this set up but you know what can
you do okay well I lost track of what I
was doing now let's look here we have a
bunch of drops that are showing and
moving we have a bunch of flowers that
are showing well what do we also want to
do for every drop for every drop I want
to look and see if the drop
intersects a flower if the drop and the
flower are overlapping if the drop hits
the flower maybe make the flower bigger
to water it or something like that so it
grows of course I could make it
disappear which would be the space
invaders thing so let's see
so that should indicate to you that I'm
saying if every drop should check to see
if it hit any of the flowers so for
every drop I want to check every flower
which means I need this kind of loop
also inside here now here's a big thing
I don't want to use I in two places if
I'm putting this loop I is for the outer
loop so for every drop I really do want
to check I'm going to use J to check
every flower and I'm going to say
something like if drop hits hits flower
and that's not correct right because
what I want to say is if drop I hits
flower J then and I'm just going to put
a console.log right now so just to see
if this idea works okay I like
programming this as if there's a magical
world where you write a function for a
drop like hits and then you just run the
code and it works obviously if I hit
refresh here right now the first thing
it's going to tell me this is a flower
is not defined yeah flowers that's the
first thing it's going to tell me the
next thing it's going to tell me is
drops index I dot hit is not a function
right because I've got to write that
function so where does this function
hits go it goes in the drop object which
is not this file which is this this is a
long one by the way so I want a function
called hits and what am i checking to
see if the drop hits I'm checking to see
if the drop hits a particular flower and
how do I know if those two things
intersect so what I want to know is
first thing I need to do is I want to
know the distance between this drops x
and y and what the flowers x and y and
how do i know if you know I've
definitely made videos about this before
but really real
quickly just to very very quickly go
over this if I have two circles and I
know the distance between them I can
determine if they are intersecting based
on the relative difference between their
distance and the sum of their two radii
right you can see here if the distance
is longer than the sum of their two
radii they're farther apart if it's
shorter their overlap they're
overlapping so what I want to say is if
and I need a little bit more code space
here if if the distance is less than
this objects radius which I'll call R
plus the flowers radius which I'll also
call are then return true otherwise
return false so I'm writing a function
that's sending back true when the drop
hits the flower sending back false when
it does not are something I made up if I
make something up I've got to actually
add it so this drop is drawn as a 60 a
circle with a diameter of 16 so I want
to make this actually now a radius this
dot R times to this dot R times 2
because this should really be a variable
and this dot R equals 8 so the radius is
8 I draw it as the radius times 2 and
now I can check the radius there and the
drop and I want to do the same exact
thing for the say it with me it sounds
like I would like this dream to be the
Miss mr. Rogers somehow can you say
flower and now that's not how it works
whatever sorry
do I have a dream to be mr. Dyk just say
that that's a little bit weird maybe
it's not weird maybe that's a nice thing
to want to be okay uh 30 this dot R
times to this dot R times 2 okay so now
here we go so now in the drop where's
the drop where's the drop so now I've
got this going let's refresh I'm going
to position my watering thing below the
flower I'm going to hit the spacebar and
look it's water now notice it
console.log watering 15 times why
because this drop started moving up at
the flower it
here it's intersecting then it moved
here it's still intersecting then moved
here it's still intersecting so what I
probably want to do is have a mechanism
for getting rid of the drop once it hits
the flower okay so boy there's a so many
things to add to these pro-kit believe
this could this could just be for an
hour but you know maybe I should just
keep going with this and actually make
every feature happen but let's let's uh
I'm gonna keep going for now okay uh
people I'm blood checking the chat and I
really shouldn't do that in the middle
of these videos okay so okay so what am
I doing here okay so now in the main
sketch okay if the drops hits the
flowers console.log watering so what I
need to do now is what I need to do now
is I know what I'm going to do I'm going
to have the flower grow and I'm going to
remove the drop so you could also seeing
how I remove the drop you could also
make a version where you remove the
flower which would be the more
traditional space invaders thing so I
need to do two couple things I need to
say something like flowers index J grow
because that flower should grow and I
need to say something like drops index i
dot remove because and now anytime
something turns blue have to be a little
bit skeptical of whether or not I should
use that word because it's probably a
key word in JavaScript and on it might
be fine but let's think of something
else drops index evaporate that's a good
name for a water function evaporate so
I'm going to grow the flower and
evacuate evaporate the drop so let's do
these things one at a time to comment
that out and this means now I need to
add a function this dot grow to the
flower object and we say this dot R
equals to this dot R plus two just gets
two pixels bigger so let's look at this
and look at that so this is actually
kind of a nice effect because oh we've
been overtaken by the purple pink flower
of glorious wonderfulness but but you
can see here that the bit without
the drop being removed it's behind that
flower and if the flower is growing and
if the drop is moving while the flowers
growing it never leaves the flower you
have this infinitely growing flower
which is kind of nice but I'm going to
correct that problem so let's add this
other function back in drops that of dot
evaporate which means I need a function
called evaporate now what am I really
doing here what I need to determine
basically I need a drop to have I mean I
could do a couple things one is I could
just set its position like way off
screen I could say this dot X equals
five thousand it would kind of be good
because you wouldn't see it it would be
to the users if it was gone
but it probably better to actually
remove it from the array so what I'm
going to do is set like a flag basically
to know so I'm going to say like this
dot to delete equals false so when and
maybe I'll just I don't need to say to
delete I'll just call it delete Oh bad
idea turns red that's that's got to be
even worse than this cameras going to
show off in like two seconds like I can
like nope because I'm at a half an hour
these cameras stay on only for a half an
hour okay so I'm going to set up a
variable that's going to automatically
start as false and I'm going to set that
variable to true you know this is a
little probably a lot of bunch of extra
steps it may be a little bit redundant
but this is going to set me up for other
possibilities because maybe you know I
need to do other things later so what I
want to do is basically have a variable
in the object that knows whether it's
something that's valid and should
continue to show and move or something
that I should delete because the object
can't delete itself the deleting has to
happen in the main part of the program
where the array is being managed so what
I'm going to do now is show you how to
deal with that and I could say and this
is totally unnecessary but for simple to
make things a little bit clearer and
more simple I'm just going to have a
completely separate loop down here which
is exactly this same loop and I'm just
going to say if drops index I to delete
right if
this particular drop is something that
should be deleted then what do I do I
want to just remove that drop from the
array and the way that you do that in
JavaScript is with the splice function
the splice function splice is something
out of an array and I need to give it
which element out of the array do I want
to splice which is in this case I and
then to give it how many elements do I
want just that I are also the one after
and in this case I want just that I so I
say one so now we should be able to run
this and you'll see right it's just
getting bigger and those drops are being
removed from the right now this totally
worked and didn't have any problems but
I really did something that's a little
bit problematic when you're deleting
things and I have a separate video about
this so maybe I'll refer you to that
somehow in the description but when
you're removing stuff from an array if
you're marching through the array
forward and you delete something and
then the array chunks back contracts and
you move forward again you actually
could skip elements by accident so this
merits probably a longer discussion but
I'm going to save that for another video
but so it's generally a good idea in
this case to walk through the array
backwards and how do you walk through an
array backwards I start at the end
length minus one I go down by one and I
go all the way down to zero so you know
it didn't really matter because if I
missed one I'll catch it the next time
around is happening 60 frames per second
but now you can see here we go
and I could grow these flowers so I'd be
in a way this is kind of like you had 30
minutes this is the basic core idea of
space invaders with some modification
and flowers of water now I sort of would
like to keep going I'm looking at the
chat as people asking questions off to
look at those after I'd like to keep
going to add a few more features but let
me tell you what those features are so
number one is I would like the invaders
to move the flowers excuse me and I
would like to make the interaction of
the ship be a little this is like too
awkward this is not working for me I
want to be able to hold the key
down when I release the key habits stop
moving so I want to fix those two things
however I might suggest to you stop this
video now try to add those things
yourself and then come back and watch to
see how I did it but you know since this
if anyone's still watching this video
thirty minutes in thank you very much
okay so let's add those things because
it's not too much to do first let's move
the flowers so if we look at the flower
constructor function which sort of
represents like a template for that
flower object it has a function called
grow which grows the radius it has a
function called show which draws it but
it has no function to let it move so I
think we should write a function called
move and how should it move it needs to
say this x equals this dot X plus
something and this dot y equals this dot
y plus something now if I'm right if I
think about Space Invaders how it works
these all kind of move together and then
they move down and move together that
way so ultimately I probably don't
really need each object to have its own
like variables for how it moves because
they don't all move separately they all
move together but maybe I'll build that
into the program anyway and then they're
all just moved together anyway boy this
is actually going to be quite tricky
because when one of them hits they all
have to move anyway but it's okay let's
just let's so let's add this dot X I'm
going to call it X dir for like X
direction and this dot Y dir for y
direction yeah this could be done more
simply I think but I'm going to just go
with this right now so I'm going to say
like this dir equals 1 and this dot y
dir equals 0 just to sort of see what
happens and I'm going to go back to
sketch and I'm going to say here in
addition to showing all the flowers have
them move so let's refresh and you can
see the flowers are moving now the issue
is when one of them gets to the right
side they need to all move down and
start moving to the left I could do
something tricky like only check the
right edge one we
I know is the last one in the array it
sort of tempted to do that but let's um
let's let me be methodical about this
and I'm going to say I'm going to save
our write equals flowers index i dot
choke oh this is tricky okay I got I got
an idea
so boy this is really tricky what I want
to do I need I need an algorithm to
check if any of the flowers have hit the
right edge so the first thing I want to
assume is that none of the flowers have
hit the right edge if flowers index I
item I should build this into a function
but I'm just going to do this right here
if flowers index I dot X is greater than
with right equals true so this will
actually works wasn't as tricky as long
as I create that variable up here if any
of them hit the right side I just set
that variable right equals true and now
at the end I can say if right if right
is true then what do I want to do I want
to loop through them all again and set
their ex dir to negative one
you know what I'm going to do this I
should really build in a function like
I'm kind of like doing this thing where
I prefer to not have any stray code out
here want everything to be built into
the object this is going to be too much
so what I want to do is I'm going to
call this function shift down and I'm
just doing my indentation here so
basically if any of them get if any of
the flowers hit the right edge I want
all the flowers to shift down and start
moving to the left so if I go back into
my flower object I actually don't need
this Y Direction variable I'm going to
just get rid of that and I'm going to
I'm going to say this dot shift down
equals function and what do I do here
the two things I want to happen is I
want the Y values to move down
and I want the direction to move in a
different direction so I say this ex dir
x equals negative 1 right because I'm
reversing it 1 will now become negative
1 and I can also say this dot y plus
equals I don't know let's move it down
by R so in this case we should see now
it's the Oh R is not defined the classic
horrible JavaScript error right what is
it here it's this dot R naught R because
it's the objects are so now it's moving
over to the right hits the right it
shifts down and now it's going to move
over to the left so all I need to do is
also have something to the left so I
should really actually now that I think
about it I feel like I'm talking to
myself am i talkin same eye still
watching this video I can't imagine
anybody is okay so now if I go back to
sketch actually what do I want I don't
want just to check if it hits the right
I just want to check if it hits an edge
so what I want to know if is flours X is
greater than width or flours index I dot
X is less than 0 either edge edge is
true if edge shift them all down so now
here we go flowers at the edge flower
dance at the edge there we go now what
are those flowers as they're coming down
at me ok this is too much fun to do the
flower space invaders watering dance
okay I really like those flowers to have
a little bit of alpha it's kind of
bothering me that they don't even though
I don't have any visual design
sensibility to bone in my body okay it's
a little bit nicer
oh they're kind of dark but they'll be
nicer when they overlap I'm gonna make
them brighter there see I just wanted
that and I don't want them to have a
stroke okay I'm off the beaten path here
the last thing I want to do to this is
make the interaction more seamless I
don't I hate this that I have to I can't
hold down the key and have the thing
move so I need to figure out how to do
this so let's look at what's happening
here this here is a singular event
ship move to the right ship oh if
they're sorry I lost my train of thought
let's key press the global function key
pressed NP five is a single event if I
press the key it moves it to the right
pressing the key is a single event
doesn't matter if I'm holding it down so
what I want to do here is basically set
what I want to do is permanently move
the ship to the right which actually
isn't going to be that hard to fix
because all I need to do is essentially
have a ship move function that's always
being called and in here I want to call
this now set direction so the idea is
that the ship is always moving but I
only am setting the direction when I'm
pressing the key so in other words this
is always happening but now I need a new
function this.set dir equals function so
notice what I've done here I've written
a new function that receives a value and
sets this objects X Direction to that
value well that means that that objects
X Direction now needs to be used inside
the move function and what I need a new
variable part of that ship which is X
Direction which I will start at zero so
watch this now when I hit refresh I can
press the key and it's moving now the
problem is when I let go of the key it's
still moving now this might be the
interaction you want for some games some
things but probably not this one I would
I want to do now this is actually quite
easy is I just want to add the key
released event and all I have to do now
is ship set dir zero because when I lift
the key stop moving and I could check
you know which key was released but this
I couldn't say any key that's released
stopped moving and so now we can see
this I can do this and I can now I can
actually play this now there's a problem
whenever I hit this whenever I release
the spacebar it also stops it from
moving so maybe I should at least
correct that so I could say as long as
key is not equal to space my phone is
buzzing like stop this is do the audio
stop now okay um you can see now I can
play this game and I can continue to
move with the spacebar
okay so loads of fun I this is 40
minutes 40 minutes programming space
invaders but with flowers so here's what
I would love for anybody so I got to get
this code online it's going to take a
while but by the time this video is
there hopefully there'll also be a link
to the code and links to other videos
that are relevant what I would love is
there anybody who watch this and learn
how to program this you know add um see
what you can add to this can you add a
score can you make the can you have
different levels can you have two rows
of flowers or invaders or whatever it is
you're making you can see I'm still
missing a lot of pieces but the core
basic game mechanic is here so thanks
very much for watching this space
invaders slash flower invaders coding
challenge</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>