<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>7.7: Object Communication Part 2 - p5.js Tutorial | Coder Coacher - Coaching Coders</title><meta content="7.7: Object Communication Part 2 - p5.js Tutorial - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/The-Coding-Train/">The Coding Train</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>7.7: Object Communication Part 2 - p5.js Tutorial</b></h2><h5 class="post__date">2017-12-14</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/5Q9cA0REztY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello it is a bubble this in my previous
video which you may or may not have
watched I looked at how I could test if
these two circles are overlapping it's
not just about the math to look at if
circles are overlapping well that's
interesting of course the whole point of
this was really to look at an
object-oriented sort of technique for
how I might write code that just checks
if any bubble intersects any other
bubble so I could say a bubble one
intersects bubble two and if I had
bubble four and bubble three or bubble
cat bubble dog the so many possibilities
but what I want to look at in this video
is what if instead of two separate
variables I have an array of bubbles
maybe there are many of them some of
which are overlapping some of which are
not how do I check how do I check if
let's say I call this bubble bubble a b
c d e f g h i j k l i just had to go
through them all this bubble a i have to
check is bubble a intersecting BCD you
have to yeah is bubble B I have to check
info B is intersecting any of them how
do I check if every bubble is
intersecting every other bubble oh okay
let's look at that alright so what I'm
going to do first is I'm just going to
change this program to have an array of
bubbles then what I'm going to do is I'm
going to create maybe just ten bubbles
to start with bubbles index I equals a
new bubble and I'm gonna I'm gonna give
them random locations and maybe a random
size and I'm gonna have them kind of
small ish and then I'm gonna make those
bubble objects I'm gonna comment this
out here and I'm now gonna say I'm gonna
look at oh
I don't know if I should do this in this
video well I got to do this in a
separate video I'm gonna make a separate
video but you could go back and look up
but there is a way a new way so this is
a bad idea but I'm doing going through
it anyway
right normally I would write this code
and I would just say bubbles index I
show bubbles I move so let's run this
right now I'm gonna get rid of this boom
so there we have all of my bubbles
moving showing and moving showing moving
I just want to say and I I will make
another video about this specifically
that I've been using this new loop
that's also part of es6 version of
JavaScript where I could just say 4b of
bubbles b dot show b dot move so these
are exactly the same thing let's just
how to do this ever video but tomorrow
we're here while you're here with me
maybe you don't want to click and watch
it this is this idea that I can I want
to iterate over every element of the
array and every element of the array can
be addressed by its index which is
typically why I might have a counter
like I to count through all the index
values 0 1 2 3 4 5 6 7 8 9 but it's a
common operation to do something to
every element of an array and in fact
there are a lots of other ways to show
you later that you can even do more with
this that I can just make a variable be
called B you know this could be anything
cat of bubbles the point is this is
every single this is saying for every
element in bubbles put that element in
this variable and then do some stuff and
then go do the next one so you can see
it's the same program the reason why I
don't always use this is sometimes I
want to only look at certain parts of
the array I need the index value
sometimes I need to move things around
in the array delete them but in this
case this is gonna make our life a
little bit easier so I'm gonna go with
it I'm going with it going with it whoo
okay where am I still in this video so
let's here we go now
I have all of those bubbles how do I
know to check if each one is
intersecting every other one now here's
the thing let's let's think about this I
got let's pretend for a second that
there's just one one important bubble
which is a separate bubble so I'm gonna
say something like let's call it
kitty no puppy unicorn rainbow unicorn
there is a unicorn bubble and it's I'm
going to put it in I'm gonna put it in
the center of the window and I'm
actually going to do a silly thing where
I allow myself to just control it with
the mouse let's make sure this works
right weird that oh and I've got to also
this is too what am I doing here lost my
mind but I've got a show and move oh
there's a point to what I'm doing it's
going to make sense in a minute
stay with me here so you could see look
at this look at this bubble that I'm
moving around there's one separate
bubble that's outside of the array that
I happen to be giving the mouse location
so what if I want to check if this
bubble is intersecting any other bubble
let's take a look at that so I'm going
to do this if unicorn dot intersects B
this is now saying hey I want this
special bubble unicorn to check if it's
intersecting anything in that array
anything in that array I just
noctus camera okay then if so it by the
way what's convenient here is I have
this I already have this function change
color which I used in a previous video
so I can use repurpose that function
change color so if it's intersecting
that bubble to change its color so let's
change its color to 100 otherwise change
its color back to zero so what I'm doing
is I'm saying if the unicorn intersects
the
it's got a different brightness than if
it does not intersect that particular
bubble and look you can see everybody
cuz I should pick that brightness a
little bit higher so you can see here
right there we go
so you can see this is working but this
is different than me checking all of
these bubbles against each other
mmm how am I going to do that so what I
need to do is right I actually don't
want anything to do with this unicorn
so let's comment this unicorn out but
the unicorn served a purpose because it
shows us right here that this is what I
want to do for every bee and bubbles
show it move it and then check if it
intersects and really a different way to
write this that would have made more
sense is this and what I want to do is
say don't check just that unicorn check
every other B every other bubble so what
if I had another loop in here right
there's another loop just look at this
for a second right for every bubble show
it and move it then go through all the
bubbles again and check if that bubble
is intersecting any of the other ones
ooh it's tricky yeah I feel like I need
to just pause and breathe for a second
but this is new to you this is this idea
of a nested loop and I feel like I want
to go over to the diagram and I want to
try to redo that diagram for a second I
think I've lost which pen was the good
one let's try this again I'm just gonna
have four bubbles a b c and d i want to
check is a intersecting B C or D is be
intersecting a C or D is C intersecting
a B or D
is d intersecting a B or C here's the
thing though even though this is what I
want to check I just sort of intuitively
did something here which is what I said
is that I don't want to check if a as
intersecting a but really what I want to
do code wise is I want to do this I want
to have a check off for then B check off
for then C check off for the D check off
for but I want to make sure I ignore
when it's checking against itself and
then of course we could optimize this
even further which maybe I'll do at the
end of this video right if a is checking
B C and D B doesn't really need to check
a again but that's only for this
particular case there could be other
instances where we want to check a
versus B and B versus a and that means
something different so let's come back
over here and see what I mean here so
first of all I want to make sure that B
does not equal does not equal other so
what I want to do is like okay I want to
check if B is intersecting every other
bubble as long as B isn't checking
itself so that the problem this actually
isn't going to work it's sort of gonna
work but not gonna work now I'll explain
you I think the logic here is quite
sound in terms of the two loops but the
change color is a bit of a problem so
let's run this and see like I'm not
seeing anything change color why not
well let me do something here let me at
least let's comment out this this part
so what I want is I'm only going to
change color I'm never gonna change back
so you can see what's gonna happen now
is any two bubbles that intersect each
other come on bubbles you can do it
there we go
they change color but as they separate
they stay so this is an added layer of
complexity that I probably should have
anticipated what it started making this
video and I no way I could stop here and
you know might be but since we're doing
this I think we've got to solve this
problem I'm here you're here you can go
on do something else if you want to
solve this problem how can I now have
them turn off
when they are when they are not
intersecting so here's the thing what I
want to do is I need to decide I can't
decide whether I want to change the
color to black or white right in here
why is that the reason is let's consider
this case where a and C are overlapping
and that loop what it's doing is it's
saying is a intersecting sorry is a
intersecting a well no don't change the
color because they're equal is a
intersecting B well no don't change the
color because they're not intersecting
is a intersecting C oh yeah
change the color change the color
they're intersecting okay well we're not
finished yet is a intersecting D no no
they're not change it back to black
right because that else doesn't know
that the previous one was intersecting
so this is an issue right so because I'm
looping through with an else here if
unless it's the last one I happen to
check the hole that last one's gonna
change it back to black so what I
actually need to do is do this kind of
trick and I'm sure there's a more
elegant way of doing this but just for
right now I can say I'm gonna just say
let overlapping equals false so I'm
gonna assume it's not overlapping
anything I'm gonna assume it's not
overlapping anything then I'm gonna
check all of them and if it's
overlapping at least one I'm gonna say
true what's fun about this is I could
actually like the more its overlapping I
could add up a number or something I'm
gonna check if it's overlapping at least
one set overlapping equal to true once
I'm done checking everything now
if I'm if I do get overlapping then I
can say B change color 255 otherwise B
change color zero so this is a little
bit of a goofy piece of logic that's
associated just with this particular
scenario but it's still your the core
idea here is that I
have this nested Luke I want to check
this bubble every other bubble okay so
let's run this again and you can see it
let me make the bubbles let me make more
of them
let's make 20 of them and you can see
that if it's intersecting any other one
it is it's lighting up if it's not it's
it's it's the it's not lighting up so
this is complete there are some things
here to change and I'm gonna just talk
them through for a second and then I'll
decide if I'm gonna implement them so
one is is there a way maybe it would
make more sense for me to somehow I
think it would make more sense for me I
kind of want to do this for me to put
this overlapping variable inside the
bubble object itself why can't it keep
track of that and it could keep track of
that and based on it it could just call
the show function with the appropriate
the show function itself could set its
color potentially so that way I get rid
of all this extra gobbledygook code over
here and I'm left still just with the B
dot intersects other so that's one thing
I could do the other thing that would be
interesting to try is is to see if I
could reduce the amount of checks right
by just checking a versus B C D and then
just B versus C and D C just versus D
that's actually all I need and that
could actually be it doesn't really
matter in this case but I really should
finish this video but so okay so those
are two things one of those things
probably what I would really want to do
and need to do is go back to having the
index so as an exercise that you might
like to try is rewrite this code with an
I counter and a J counter but you'll
notice is you can start the J with that
you see if they try this write a lot of
comments I should make another video to
solve this and maybe I will but so that
would be interesting to look at right
you need to go get the counter because
you can start if I is for all of the
bubbles I'm checking I can start J
wherever I left off the other thing
that's kind of an issue here
is the following let's go make let's
make these bubbles really small and
let's let's add 200 of them that looks
like it's working let's add 2,000 of
them okay it cannot even come close
let's it's it's let's add a thousand of
them let's just go back to that so that
was too extreme so you can see how slow
this is now you might be thinking I was
just slow to draw a thousand things
which is true but let me show you
something here what if I take out this
whole thing about intersection it's got
no problem animating a thousand bubbles
the problem is in this algorithm if I
have to check every bubble against every
other bubble if there are three bubbles
that's nine checks if there are ten
bubbles that's 100 cycles 100 checks if
there are 100 bubbles
that's 10000 just doing my math errors
again look this went up by a factor of
10 but this went up by a factor of 100
and with 1000 bubbles suddenly I have to
do 1 million checks so there are there
are ways around this and there are
algorithms for bidding or they have
fancy names and quadtrees and someday
I'll have a link in this video's
description to some tutorials where I go
over how to make this stuff more
efficient but one of the things you
really got to watch out for is this
every object check every other object is
an N squared problem as the number of
bubbles increases the number of
computation cycles increases by the
number of bubbles squared so so this is
something you really do have to watch
out for this can get quite slow and
again someday this description maybe
I'll have a link to something which
more efficiently alright I'm gonna stop
I'm gonna be I'm gonna stop at the end
of this video and if some of these
little tidbits and things are kind of
interesting and important I will do them
in a follow-up video okay this video
they're not over because I have noticed
some pretty fundamental mistake here
worth in both of these loops right for B
of bubbles where B as a variable that
stands in for every bubble in the array
just like if I'm gonna say for let I
equals 0 I is less than bubbles dot
length if I'm doing a loop like this I
really need to declare that variable B
otherwise it could be it could it
mistakes bad things could happen so I
should have let B here and then of
course I'm doing this again here I
should say let let other of bubbles
there so hopefully you didn't spend too
much time screaming at your viewing
device while you were watching the video
and there it is at the end here okay
thanks very much
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>