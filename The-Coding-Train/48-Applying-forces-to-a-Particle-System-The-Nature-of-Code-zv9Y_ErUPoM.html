<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>4.8: Applying forces to a Particle System - The Nature of Code | Coder Coacher - Coaching Coders</title><meta content="4.8: Applying forces to a Particle System - The Nature of Code - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/The-Coding-Train/">The Coding Train</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>4.8: Applying forces to a Particle System - The Nature of Code</b></h2><h5 class="post__date">2015-08-03</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/zv9Y_ErUPoM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">in the way we've wrapped up this section
of videos about particle systems but
there's a two little topics that I want
to tack on to the end here one is kind
of a strange thing happened that I don't
know if I really intended but in our
efforts to really focus on the ArrayList
inheritance organizing the sort of
collection of particles we took a few
steps backwards if you notice in the
particle system class in these examples
the particle has a constant acceleration
there's no apply force method but really
we do want our particle systems to exist
in the world we've built where objects
that are moving around can respond to
forces and this is going to become very
necessary when we get to some future
examples where we build these systems of
objects that that interact with each
other through forces the flocking system
a crowd system those examples are really
going to need particle systems where the
particles can respond to forces from the
environment or forces between each other
so what I wanted this video to do is
just look at adding the apply force
method back in but this is not as simple
as it may seem it's actually quite
simple but it's not as obvious as it
might seem like oh well all we got to do
is just add the apply force method back
in but let's let's think about this
let's map this out for a moment before
we come and put this in our code so we
have a particle class this we know about
this we've written this is the thing
we've been making all along mover
particle it's all the same thing now we
have a particle system class our
particle system class has the ArrayList
it manages the collection of particles
what's in our main program in our main
program we have set up we have draw and
what are we doing we're we're making a
particle system a new particle system
and we're saying hey the particle system
should be displayed and the particle
system should be updated notice here
this sort of main program and if I go
back over here it's the same thing
notice here in this main program we are
not referring to any particles how do we
apply a force to the particle well in
order to apply a force to the particle
we need to say particle system dot apply
force some force that's going to apply
the force to the system which will in
turn apply the force to every single
particle so again this is maybe sort of
a small detail but one thing we need to
realize once we've sort of organized
ourselves in this principle is when we
want to act on individual particles we
have to act on them through the through
the particle system so we apply a force
to the particle system the particle
systems can apply force method which can
apply a force to all the particles so
let's go and add that into this example
and this is gonna be I so it can be less
than five minutes this video I'm very
excited I can turn the timer on so okay
so we know what we want to do is say
something like hey there is a P vector
called gravity it looks something like
this and we want to say apply that force
gravity to the entire particle system
well what did we used to have in our
programs in days of yours right in our
particle class we had a function called
apply Force which took in a P vector and
you know I'm gonna skip mass right now
you can add that back in and we added
that force into acceleration and our
update method we just remember one of
the things we would do is we would clear
out acceleration and clear out
acceleration at V at the end of the
update method because that's something
we worked on before cope I could watch
the video link to it
magic internet machine thing that you
remember so this is what we had before
Newton's law force equals mass times
acceleration we're accumulating the
forces in acceleration we run this okay
so so though now of course we run this
but remember we only put the apply force
method in the particle class we now need
to put that apply for some
that in the particle system class so
here in the particle system class we
need to write a function called apply
force and what does that function do it
receives a force and what happens here
when we apply a force to a particle
system we need to in turn apply that
force to every single particle for every
particle P in particles P dot apply
force force so this may seem sort of
silly and redundant and perhaps it is
but this is our methodology now we send
something into the particle system it
receives it it runs a loop through all
the particles and sends that to the
particle objects itself and now when we
run this we can see this looks pretty
similar to what we had before because
we're applying this gravity force but
notice now I could say hey if
mousepressed make a P vector called wind
which sends stuff off to the right and
apply that force so now we've all that
work we did in Chapter two in all those
examples we now have here I click the
mouse and all of a sudden the particles
are blowing off to the right I let go of
the mouse and the wind has stopped so
this is really important we don't want
to lose all this work we did we now our
particle system can now also receive
forces and pass those along to the
particles and we can see I just want to
point out to you that there's you know
so this is essentially example four
point six if you're following along in
the book but there's also an example for
point seven where and one additional
slightly more advanced example that I
want to show you just in the same way we
might take a vector and pass it through
the particle systems apply force which
will then in turn send it to all the
particles we can do that with anything
if there is a repeller object in our
world in this particular example there's
a repeller object that repelled that net
at that as a force that repels particles
we could we could send that repeller
object through a particle system
function in this case called apply
repeller
which in turn if we go and look at that
method right apply force takes a vector
and
is that to the ply force method apply
repeller whoops fancy computer
what does apply repeller do it goes
through all of the particles calculates
the repelling force and then applies it
so the point of what we're doing here is
is is just to say that we can't accent
we are not accessing the particles
individually anymore in our main program
we're accessing them through the
particle system and you can see an
example our first example just sent
vectors in through an apply force but if
we have other objects that communicate
we can send them through another method
as well so so okay so what I would
suggest to you is go back take have you
been working on that particle system
maybe you've got it with all sorts of
crazy different kinds of particles that
inherit from the main particle class now
trying to make sure your modeling forces
with that go back and make sure you have
that apply force method and one of the
things that's really interesting to
think about that you might try as an
exercise we're going to look at this a
lot more in future videos is could you
make a particle system where the
particles all apply forces to each other
so for every particle apply a force to
every other particle what would that
need to do that's kind of a difficult
problem and I want to say we're about it
but I'm gonna leave it at that and we'll
look at it more we're certainly going to
look at it more once we get to flocking
systems because that's exactly what a
flocking system is okay I think there's
one more video left to make and I'm
gonna do that right now but you don't
need to watch it right now because you
could go do something else like pee or
have a snack whatever people do and they
are not just in a room by themselves
talking to a camera goodbye</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>