<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Coding Challenge #4: Purple Rain in Processing | Coder Coacher - Coaching Coders</title><meta content="Coding Challenge #4: Purple Rain in Processing - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/The-Coding-Train/">The Coding Train</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Coding Challenge #4: Purple Rain in Processing</b></h2><h5 class="post__date">2016-04-25</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/KkyIDI6rQJI" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello and welcome to today's coding
challenge today I'm going to make a
Purple Rain in processing in honor of
prints so only thing I've done to
prepare for this so far is pick two
colors which were suggested by the
Internet thank you very much a purple
color for the rain and on some other
color for the background I am using the
processing programming environment you
can find if you've come to this video
that knowing the processing is check the
description to download processing this
is the code will be written in the Java
programming language I'm also going to
make a JavaScript version using
something called p5.js so if you want to
run this example in the browser on the
web you can find that version of the
code as well in the description of this
video okay let's get started so the
first thing that I need to do is just
write a setup function and write a draw
function and then I'm going to add the
size function my classes are falling
down on my face the size function and
I'm going to take this wonderful color
suggested and say background and I got
an extra parenthesis here and I need a
semicolon and I'm going to run this and
look at that there we go so this is the
start this is the scene this is where I
want my purple rain so to make rain I
think probably a good way to do that
would be to create a single object which
is a raindrop and then from that object
make an array of many of those raindrops
so the first thing to do that I think
what I'll do is I'm going to go ahead
and make a new tab I'm going to call it
drop and then I'm going to say class
drop so a class being a template for
making objects in the java programming
language in the JavaScript version this
will look like a constructor function
you'll see that and I'm going to say
this drop is going to have an X and this
drop is going to have a Y and then I
need a function problem for the raindrop
to fall and a function for the raindrop
I'm going to call it show to be rendered
on the screen so what do I want my drop
to look like let's have to drop be
aligned I think that might look like
rain aligned at x and y to x and what
how about Y plus something right so
about like Y plus 10 and then I want to
have that line be what purple so I'm
going to go get the purple color
right here come back come back and then
in fall I'm going to say y equals y plus
y speed okay
so Y speed doesn't exist so I'm going to
create that as a variable so now now
that I've made this object this is the
core idea of the drop object it has an x
and a y Y speed for falling y equals y
plus y speed it falls and then a line to
draw it now the drop needs to have
initial values for these variables so
I'm just going to by default right now
have a drop that starts in the middle of
the screen have a drop that starts at
the top of the screen and have the speed
be equal to 1 just to make sure things
are working and then here what I'm going
to do is create a variable drop D equals
new drop and then in draw I'm going to
say D fall and dijo so I think that's
enough code to write that I should test
now I have a drop class all the code for
the drop I have to drop object let's run
this and let's see our individual purple
drop there it is purple rain there's the
purple rain falling so it's only one
drop so clearly what I need to do is
have many drops so or have many drops I
want to have an array and the way that
I'm going to do that is by changing this
to be an array now look at this the
array syntax is the kind of thing a drop
with the brackets equals a new drop and
I'm gonna have an array with 100
elements of it so now instead of making
one single drop I loop I think this is
maybe the one millionth time I've typed
that loop in my life I'm gonna loop
through the entire length of the array
and excuse me and I'm going to say drops
index I is a new drop so I'm gonna make
100 new drops in that array and then
that should be more dancing like I'm not
going to be good enough to dancer the
should be bored it's like involved with
this particular example but while I'm
programming this I'm going to then go
down to draw and I'm going to say drops
index hide/show there should be music
playing at least drops index i dot fall
doesn't really matter what order these
are in but I'm going to put fall first
until I which I had it before and now
we're going to
this and there should be a hundred drops
in the window but there's still only one
the reason there's only one is because
all of the drops have been are at the
same exact spot moving at the same exact
speed so I need to do something to make
randomize them a little bit so one thing
I can do is give them all a random
location and we can see what happens
there now we can see look all of my rain
is falling down exactly together another
thing I could do then would be to say
why don't I give them some random Y
locations and why don't I actually have
them start off the screen so their
random location should be between like
negative 200 and negative 100 so they're
kind of way off the screen and now we
can run that and we'll see this should
be a little bit better okay now we see
the rain is sort of the rain in Spain
falls mainly on the plain that things
are spread out a little more I don't
like this the speeds I think it probably
they all should in generally be a lot
faster but I could give them different
speeds and we can see there we go now we
can see we got and we've got a lot more
stuff going on but the rain sort of fell
and then was gone so I think it would
make sense in this case to do something
like say if Y is greater than height
then set Y back equal to somewhere
randomly up high so to each rain drop
should reset back up to the top and here
we go
so you can see here we've got something
that looks a little bit more like rain
now I think there's quite a bit that we
could do to make this better but you
know this is a good start add some music
dance around your room to some print
songs and you know you might feel a
little joy in what is checked I guess I
don't know what I'm talking about but
I'm making Purple Rain which is what I'm
doing here today okay so uh so let's try
to add a few more things to this just to
make it a little bit nicer so what are
some things one thing is boy we should
really have a lot more rain that's good
I like this I like seeing a lot more
rain we should also perhaps think about
we should think about a couple other
things one is this being something
variable like how long is that line so
I'm going to make a variable called
and have that be randomly between 10 and
20 so I'm going to have that you're
going to see now that the rain drops are
a variable length that's pretty good
the other thing that I'll add what else
could we add to make this better one is
that I wonder if actually having the
raindrops fall just look like they're
experiencing a little bit of gravity
right now they're falling at a constant
velocity so I could do something like Y
speed equals y speed plus zero point you
know zero five some amount of gravity so
that speed keeps increasing as they're
falling and then of course a Y speed
needs to get set back to zero when they
get reset this might give it a bit more
of a realistic feel whoops what just
happen you know what's happening what
did why did that oh no no of course of
course because the Y speed yeah I just
good to give them like a little bit of a
random speed so okay so this is given
it's not sorry I've set their Y speed
all back to zero so that's why they all
started falling down in sheets together
because they all started exactly the
same speed so I think a little bit of
variety is good there and I'm going to
actually make the gravity a little bit
stronger just to sort of see if we can
see it more yeah you can see how that
looks a little bit more realistic it's
you know it eventually it'll get um you
know as the stuff gets spaced out it's a
little bit better I think it would
probably be good to give it a much
bigger range for where they can start so
that things are already spread out at
the beginning there we go so you can see
here's the rain kind of falling more in
sheets with some gravity with different
sizes with different lengths now I think
there's one more thing we could add to
this to make it feel a little bit more
like rain in a three dimensional space
right we could create a sign of pseudo
parallax like effect like things that
are closer to you are going to appear if
they're falling faster and things that
are further away are going to appear if
they're falling slower so we could
increase the stroke weight and the size
and the speed with the same the same
variable so what if I gave every
like a Z value which is some random
number between like 0 and 20 and so the
length 0 being far away and 20 being
close so I want to map that Z value
which has a range between 0 and 20 to a
length between 10 and 20 so this would
mean that if it's it's longer if it's
closer and it's shorter if it's further
away okay
so that's good and then the speed also
should be not random but Y speed should
also map Z which goes between 0 and 20
to between what I have at 4 and 10 so
the closer things are faster and then
when I reset the speed I should reset it
the same exact way according to Z and
then also one thing I could do is I
could add stroke weight and I could make
a variable called thick and I'm going to
map Z which goes between as we know 0
and 20 and it should be 1 pixel wide
when it's further when it's far away and
2 pixels wide maybe I'll make it 3
pixels wide when it's closed and then
stroke weight thick so this is what I've
done I have made things that are there's
no actual 3d but I've created a variable
so those things are randomly between 0
and 20 when things are 20 they are
thicker faster and longer when they are
0 they are thinner shorter and slower
okay so here we go let's see how that
looks it's probably not extreme enough
and I wonder if the gravity should also
be matte so let me let's make the speed
much more extreme I'm just curious if
that really makes a bigger difference I
don't know if it's actually oh because
of that let's take the gravity out for a
second yeah so you can see the effect is
much stronger you can see the effect is
much stronger without the gravity so I
don't know I'm
right now like get the two so I think
probably what makes sense is for the
gravity to also map Z between 0 and 20
between like zero point oh one and point
two I connect make it between zero and
point two and so that gravity should
also be mapped according to that Z value
okay here we go so I don't know how well
I made Purple Rain but this is my
version of Purple Rain I clearly AM know
a visual designer genius I hope that you
will take this code make some nicer
Purple Rain and exercise could be to
have little rainbow splashes at the
bottom as the rain hits the bottom I
would little like particles that burst
up I could maybe I'll add that some five
and post a version that has that as well
but here we've made today
Purple Rain in what is about 12 minutes
or so
I think thanks very much for watching if
I knew the lyrics really well I would
recite them right now but I'm afraid of
getting them wrong I certainly don't
want to say Purple Haze as has happened
before
so thank you very much for watching and
see you in the next video</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>