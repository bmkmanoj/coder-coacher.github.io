<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Coding Challenge #31: Flappy Bird | Coder Coacher - Coaching Coders</title><meta content="Coding Challenge #31: Flappy Bird - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/The-Coding-Train/">The Coding Train</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Coding Challenge #31: Flappy Bird</b></h2><h5 class="post__date">2016-08-10</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/cXgA1d_E-jY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello and welcome to a cutting rainbow
coding challenge today's coding
challenge I'm going to attempt to make a
flappy bird clone which I admit is kind
of like a bit of a cliche probably at
this point I don't know how many people
have made flappy bird clone tutorial
whatever's on in the world but it was
requested I think it'll be fun I'm gonna
give it a try I'm gonna do it in
JavaScript I'm gonna try to do it fast
but with time to explain and time to
relax and and just enjoy myself and
hopefully you might enjoy watching this
so um if you're not familiar with flappy
bird then I would say pause this video
go familiarize yourself with it I
actually don't think I've ever actually
played it before but I am somewhat
familiar with the gameplay we'll see how
well I do I've got a live chat going on
and you guys can tell me how I'm doing
if you're watching this as a YouTube
archive you won't be able to follow
along life but that's fine okay so I'm
using p5.js which is a JavaScript
framework as a function setup it has a
function draw and so the only thing I've
got so far in the browser is just a
canvas that's 400 by 600 pixels and a
black background on that canvas so the
first thing that I want to do I actually
have a separate javascript file called
bird Jas and I'm actually going to make
this a constructor function and the bird
all all the bird really needs is a Y
value right the bird moves up and down
and it stays in one spot so I'm going to
give this bird I'm going to start the
bird off in the center of the window and
I'm going to write also a function
called show where I draw the bird and
again I'm going to my design
it's going to be very poor so it's going
to be up to you to take my code which
will be linked in this description and
make something more beautiful and
interesting and ripoff of this so I'm
just going to say let's make a white
circle and you let's give this bird an
exposition as well even though it will
be fixed but let's just try a 25 for
right now and I'm going to never forget
that this is you always need this down
to JavaScript it's done so let's make
this bird a circle and let's say in the
main program now var bird and we're
going to say bird equals new bird
and bird dot show so we should have
something a little bit more interesting
now uh there it is bird with / - you
know it would probably makes more sense
if I want the bird to be in the middle
to be height / - so let's fix that I'm
going to say height / - I think the bird
could be a little bit bigger and the
bird could be a little bit more in on
the screen so there we go this is the
beginning of flappy bird now what
happens to the bird without you doing
anything the bird falls down
so oops oops wrong window so I'm going
to go here and I'm going to say this
update equals function and it would be
good to have some sort of variable
called gravity and gravity being the
force that's pushing that bird down and
let's say that that the gravity here is
going to be one I also need a velocity
right I need a velocity so gravity is
the force that's causing the velocity of
the bird to increase so I'm going to say
this velocity equals zero and now I'm
going to say this dot Y changes by this
dot velocity and this dot velocity
changes by this dot gravity okay so now
we have a function that's going to push
that bird down so I'm going to go over
here and I'm going to say also bird
update there we go bye bird it flew down
now we should probably do something
where the bird stopped so when it gets
to the bottom of the window that makes
sense so I'm gonna go back to the bird
and I'm going to say I'll just do this
in the update function I could write a
separate and I'm going to say if this
dot y is greater than height then then
I'm just going to keep the bird on the
screen I'm going to say this dot y
equals height and I'm also going to set
that velocity to zero so we can see here
that bird stops I don't know if that's
actually what happens in flappy bird but
I just kind of want to do that anyway
and you know what I'm going to do that
also for the top of the window because
ultimately I'm going to be able to push
the bird up so let's do that for less
than zero now of course so okay so now
what how does the game
work I think it's a mobile game right
you could tap your mobile device this is
my mobile device so I'm going to as a
tap I'm going to just use the spacebar
on my keyboard so in p5.js I can write a
function called key pressed and I can
check to see if the key is the spacebar
and let me just make sure this is
working I'm just going to console.log
something right now so I'm going to run
this and you can see each time I press
the spacebar it says here in the console
it prints out space so that worked so
what do I want to do I want to cause a
force to cause that bird to go up so I'm
going to say bird dot up and so what's
going to happen with this bird dot up
function what do I want to do I want
instead of the velocity being pushed
down by gravity I want to say this dot
velocity minus equals I want it to go up
or I could say plus equals but some
minus amount now what if I just said -
this dot gravity let's try that for a
second just to see what happens come on
wait oh you know it's a little bit
annoying I have to oh I took off that
console.log hold on let's say - equals
this dot gravity times 10 so nothing's
working here and I have a kind of a
sneaking suspicion that I've done
something totally wrong a bird dot up
let's make sure this is happening I'm
going to say print line this dot
velocity okay so you can see that's
working so let's try to tune I think
there's sort of an issue here we've got
to sort of tune the numbers so let's
make the gravity just for right now a
lot less strong so it's not going so
fast now you can see though that this
isn't really doing very much let's make
a this dot up force let's call this lift
and we'll say it's negative 10 so I'm
going to say this stop velocity puck
plus equal this dot lift
left not left lift there we go
so you can see there's sort of an
element of tuning those numbers so now
it doesn't really feel like it's falling
fast enough but me pushing the spacebar
is kind of working out just it what
happens if I hold down the space right
so that's good okay so that lift is too
much let's make the gravity 0.6 and
let's keep the lift there but now I'm
going to need to make the lift a little
bit stronger there we go so this so now
I have I sort of have the game going to
lift is a little bit too strong let's
make it less strong so there's you know
something something that I could do is
actually limit the top speed or at allso
or also like give it some something that
I could also do is is add some like air
resistance in general which I could say
something like this dot velocity x
equals 0.9 so that actually like helps
with things quite a bit because it's
just there's some there's sort of like a
limit to what the speed is so now I've
got something that is a bit more kind of
like reasonable to play here so you
could spend your time tuning this even
more but I think just like keeping the
velocity keeping some like air
resistance by always shrinking the
velocity a little bit tuning how much
the lift is versus the gravity those
types of things you can kind of play
around with okay so now we have the
basic game mechanic here which is just a
falling circle and each time I press the
spacebar I can kind of like have it lift
up a little bit now what do we need to
add we need to add those pipe things
that kind of come from the right of the
screen
I've only at eight minutes by the way
which is pretty good the pipes things
that come from the right of the screen
and you have to steer your way through
let's see if we can do this so let's
think about this I'm going to also
create a pipe object with a constructor
function and let's think about what is
the pipe need so a pipe needs I would
say it's going to extend from the top to
somewhere in the middle of the screen
and then somewhere further down to the
bottom so I need I'm going to say like a
value called top which is going to be
some random amount between
top of the screen in the middle of the
screen and let's say this dot bottom is
some random amount also between the
middle of the screen and the bottom of
the screen and that the pipe also needs
an exposition which is always going to
start at the edge of the screen and then
let's let's write a function called show
where I draw the pipe as a white fill
white then I draw a rectangle at this
dot X comma zero all the way with a
width of like let's say the width is 20
and let's actually make that a variable
and this width and also the height then
is this dot top and then I need another
rectangle which starts from the bottom -
how tall it is and let's make a - this
dot bottom and its height is this dot
bottom okay in case this isn't making
sense to you let's actually let's
actually do a quick diagram here what
I'm trying to do is create something
that looks like this so I need two
random numbers this length is what I'm
calling top this length is what I'm
calling bottom and then this length this
this width is what I'm calling W so I
first draw a rectangle from here with
this width with a height of top and then
I draw a rectangle from here which is
height minus bottom which is this point
with this width and then the height of
that rectangle is bottom so this is what
I'm getting if these values are random
I'll sometimes get stuff that looks like
this etc now I could be more thoughtful
like right now the way that I'm doing it
there's this you could never get
something that looks like this so it
probably would make a I could probably
do something different where I pick like
a random empty amount of space and then
I pick a random starting points in that
empty amount of space that might be
interesting to do we can make that as an
improvement later but let's just stick
with what I have right now which i think
is good enough okay I'm back over here
and let's just see now I need a function
like this dot update and all I want to
do in this town update is say this
- equals some speed this dot speed so
let's say this dot speed is always going
to be 5 I'm going to just and so all of
these are always going to move to the
left
so let's look now here in sketch I'm
going to create an array called pipes
and what I'm going to do is say pipes
dot push a new pipe and then in draw I'm
going to say for all of the pipes in the
array yeah I also have a problem with
this somebody to the chat saying where I
could technically have a pipe with no
space in it so all that stuff can be
corrected later and I want to say show
and I want to submit say update so let's
run this now and see there we go well
that's moving quite fast so let's go
back to the pipe and let's just make the
speed one so we could see yeah look we
basically have flappy bird already it's
so easy to play so it's moving kind of
look now but of course I only have one
so let's think about this what couple
things that I want to do one is I want
to I want to say something like if frame
count I want to have a pipe every like
so often modulus for T equals zero which
means every 40 frames the modulus
operator being the remainder of division
so anytime a number is divisible by 40
with a remainder of 0 is 0 40 80 120 160
etc let's add a new pipe let's see how
this looks
oh that's a lot that's a lot of every 40
frames is quite a few look at this oh
I'm pretty good at this did I need some
like music to play along with this ok so
that's no good obviously let's uh let's
make the pipes move a little bit faster
twice as fast and let's let's say every
100 frames so obviously you can see on
how the speed of the pipes how frequent
they are and we can see basically I have
the game right now I've made a very easy
version of the game to play it's not
very hard but one
that I haven't done is figure out when I
need to actually you know this I'm doing
a great job here so let's actually add
something that shows us when the circle
hits the pipe or doesn't hit the pipe so
and also by the way I should be getting
rid of the pipes at some point so one
thing I should do is I should I should
say if pipes index I is finished and I
can actually just say X is less than
zero my you know what I'm going to write
a function I'll write a function called
off-screen so if the pipe is off the
screen I want to say pipes dot splice i1
so splice is a function that deletes an
element from your right so I want to
know if the pipe went off the screen get
rid of it I don't need it anymore now of
course there's a little bit of an issue
here which is one is there's no such
thing as a function called off-screen
that's a function I have to write
there's another issue here which is that
when I'm deleting stuff out of the array
I really should go through the array
backwards and I've covered that in other
videos but basically the array slides
the elements slide back and if I'm going
forwards the elements slide back well
I'm going forward I could end up
skipping things so I'm just going to
switch my loop to saying a greater than
or equal to zero and I - - and then I'm
going to if I run this right no function
named off-screen so I have to go into
the pipe then I have to write a function
called this off-screen is a function and
this is very simple I can just say if
this dot X is less than negative W right
because I want it to be all the way off
so it's with s to be all the way off
return true else return false so now I
know all of you watching this video are
going to complain to me and just say but
couldn't you just say return this dot X
is less than negative W because that
evaluates to true or false yes I could
do that but you know what sometimes I
like to write my conscience way I like
it to be long-winded multiple line I
love the way that curly brackets just
nest themselves so beautifully I love to
say return true return false you can
write your code a different way but yeah
and now I sort of feel like I should
change it but I'm not going to I'll do
it later ok so coming back let's see now
we should see
w is not defined so I have to say always
forget to this guy it stops
okay now we should see now I can't
really tell if this is working it could
only assume this is working but if I do
something I might say like this of pipes
length if I look at the length of that
array it's two and it's always two so
even though I'm adding more and more
they're getting deleted okay so we could
be pretty sure that that's working okay
now let's see now we've got to do the
exciting part here because this whole
thing hopefully is somewhat exciting but
we've really got to get the gameplay
mechanic where you it's going to give
you some visual feedback if you hit one
of those pipes so let's think about how
we might write this ultimately here's
where I'm I have this single bird that
says bird at update bird show and I'm
also looping through all the pipes so
one thing I could do I don't really need
to do it this way but I'm gonna I'm
gonna move this loop first just so the
bird comes after and I'm going to say
here I'm going to say if pipes index I
hits the bird then do something I'm just
going to say console dot log hit so I
need to have a function that determines
if a pipe has hit the bird
so if looking at this bit of code you
can see here what do I need to write I
need to write a function called hits and
that function is going to be part of the
pipe object and it's going to receive a
bird object as an argument so I'm going
to go to the pipe object I'm going to
write I'm just going to write the
function up there here this dot hits I
called it hits equals function bird and
now I just need to check what do I need
to check I need to check if bird dot Y
is less than the top and bird or or bird
dot y is greater than height minus this
dot bottom so if the
bird is ever if I come back here to my
whiteboard if the bird is ever right
less than top or greater than height -
bottom here then it's kind of it's
hitting that it's hitting that pike
so let's come back over here did I get
that right is greater than okay so then
I want to say return true although this
isn't good enough right it's also got to
be within the actual exposition so we
should also say and I could I mean I
could be much better about how I
construct this but I put it inside here
let go so let's just say it's within
that stuff also let's now check if bird
X its exposition is greater than this
dot X and and bird X is less than this
dot X plus this dot W so I'm also just
checking if it's in between the actual
exposition of the pipe so if all of that
is true
I'm gonna return true you know I'm just
working it out we could I could this
double if statement is kind of an awful
way to write this and I get probably
more clever and I could write a separate
function that just tests intersection
between a circle and a rectangle but
right now this will be good enough for
us right now
I look forward to hearing your
improvements and suggestions in the
comments so let's just see here if
whoops right now I'm not seeing anything
hit hit ah so this is basically working
you can see that anytime this is going
to be hard so let's actually give
ourselves some visual feedback if this
is the case let's let's write a variable
called highlight set it equal to false
let's also say this dot highlight equals
true and then under fill under show I'm
going to say if this dot highlight I'm
going to say fill - I'm going to make it
red so let's just see if this gives us
some nice visual feedback look oh you
know what I never said highlight equal
to false
so watch it hits it so you know that's
fine but I might want to actually also
say this dot highlight equals false if
it's not hitting it so now here we go
it hits hits it you can see so now I
could add things like score I could be
more careful about like I'm really only
checking the center go go go go go go go
just it whoa oh this is way too easy to
play up there we go okay so you get the
idea so I think that I've kind of
completed this and there's a lot of
improvements that I would want to make
to this in terms of being more
thoughtful about checking that
intersection to be a bit more precise
good enough though be a bit I could do a
better job of picking the the way that
Oh the here's a difficult one a better
job of how I pick the top and bottom
heights of these rectangles I could add
score right you start with a score maybe
as time goes on your score goes up every
time you hit a pipe the score goes down
all those things I would say ask me your
questions in the comments suggest make
versions of this and tweet me your
exciting does it you know you could make
a nice bird design you can reimagine
this entire game to not be a burden
pipes but to be you know a flower and
rainbows I don't know how that would
work so so um tweet me and share with me
all of your interesting variations on
this and I'll maybe come back and do
some Q&amp;amp;A video where I follow up on some
of your questions and make some
improvements to this flappy bird
challenge okay thanks for watching and I
will see you in a future coding
challenge goodbye</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>