<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Coding Challenge #35.3: Traveling Salesperson with Lexicographic Order | Coder Coacher - Coaching Coders</title><meta content="Coding Challenge #35.3: Traveling Salesperson with Lexicographic Order - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/The-Coding-Train/">The Coding Train</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Coding Challenge #35.3: Traveling Salesperson with Lexicographic Order</b></h2><h5 class="post__date">2016-08-30</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/9Xy-LMAfglE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello and welcome to part three of a
coding challenge and I know their
individual coding challenges that are
part of a sequence of coding challenges
who knows but in this particular one
what I'm going to do is I'm going to
look at this traveling salesperson
problem again a list a random list of
eight cities and right now the program
is just randomly trying possibilities to
see if we can find the best one and I'm
going to look at how we could combine
that with this thing I've worked on in
the previous challenge which is looking
at every permutation of a list of
numbers or letters sorting in lexical
order which is like an alphabetical
order type thing so here you can see
this is running is going to take a very
long time to check every possibility but
I want to take this code and I want to
combine it with the traveling
salesperson problem to check every
possibility in order which I think will
be an interesting thing to do so let's
let's look at that so the first thing
that I want to do and honestly there's
probably I can tell you for sure that
after I finish this I could easily make
another 10 or 15-minute video that's
just kind of like refactoring the code
so organize it nicely and my you know
hyper desire to have like things always
organized but I'm gonna just I'm gonna
let it be loose to this video so I'm
just gonna like copy paste code around
move stuff around and kind of use stuff
together and a bit of a haphazard way
just to demonstrate it working and then
you should remind me when I publish the
code I'll make a nice neat version for
you with some comments and things
organized in a way you can kind of
compare those two but anyway let's just
keep moving and so what I want to do is
I want to basically start taking things
so I want to take this array valves from
the lexa lexical order example and I
want to bring it into the traveling
salesperson example if you haven't
watched the previous two videos you
don't need to but you might want to go
back and see what how worthy how these
pieces of code were developed um and
what I actually don't want to do here is
I don't want to initialize it hard coat
it and I think I'm going to call this
order now because really this is going
to be the thing that's keeping track of
the order for me and I need a number for
every city so all I need to do add here
is right here in this loop is say orders
index I equals I so I just create an
array and I need to initialize it as an
array so in JavaScript I've got this
array and the array
is going to start if they're eight
cities and let's just do it with them
for city's justice or city it's going to
be zero one two three right zero one two
three four cities okay so that's good so
that's the first step now what I want to
do is I'm actually going to take this
entire algorithm and I'm gonna put it in
a separate function I'm just say copy
and I'm going to go into my lexical one
and I'm going to just go to the bottom
and I'm gonna add a lot of line breaks
just paste it down here and I'm just
going to say here like ah this is my
lexical order algorithm and I'm going to
right here I'm going to call this a
function now next order so I'm going to
put all of this in a function called
next order could be just called next or
next ordering and what this is going to
do is it's going to take actually this
is going to be this much easier than I
even imagined and maybe I don't have to
refactor this that much I I called it
order instead of Val so I'm gonna have
to be I could probably do a find and
replace or some I'm just going to kind
of eyeball it for a second and put order
everywhere now so I now have this
algorithm and what I want to do is I
want to make my canvas taller I'm gonna
make it 600 but I'm still going to only
pick points in the top and then what I
want to do is I want to use this quick
little two algorithm to write text to
the screen so I can see I want to put
this at the very end and I know I'm
doing this kind of quickly so I'm kind
of trying to talk to you through what
I'm doing a make more sense once you see
it and this again is order I'm just
combining the Co I'm not actually
logically combining the code I'm just
taking all the code from one example and
putting it in places in a previous
example and then what I want is to have
this be it like the bottom of the window
somewhere down here and if I hit refresh
whoops I mean the wrong example oops
I got to go to localhost and yeah find
that example again a TSP lexical and I
have some errors here so orders is not
defined sketchiest line 15 is called
order thank you and you can say okay so
now so okay so what I have now is the
random selecting and the order being
displayed below
oh and by accident
because I have a stroke in a fill I have
these nice outlined characters that make
me kind of happy um so now all I need to
do in draw is say next order like in
draw I want every time I want to try the
next possibility so Valles is not
defined sketch KS line members 97 that's
a place where I forgot it which would
make sense for me to have done a find
and replace and 109 but this is a
perfectly fine way of finding those
spots 1:19 boy I really did a terrible
job I can see I can see some other spots
now I barely got anything
oops and I don't want this anymore that
was the drawing part so we can see here
now it looks like it's working right
because it looks like it's trying every
possibility here but it's not actually
using this order as the order of things
for the traveling salesperson order of
cities so now I need to instead of
randomly picking an order of cities I
need to try the order based on what's
here I want to try city 3 then 2 then 1
that's 0 ok here we go so now what I
want to do is where so where do I get
the order from the order basically so
this is kind of an interesting thing
that's happening here my what I'm going
to do is change the pro right now I was
actually moving the vectors around in
that cities array but the cities are the
right now is no longer something that I
ever need to touch the thing that I'm
keeping track of is actually the order
array so I'm going to redo this first by
just saying what I want is to go through
every single element in order actually
so here's me just drawing all the cities
so this is actually not the path so this
I can leave I'm just drawing a circle
where every city is and I'm going to
take out the best-ever thing for a
second because I'm going to have to
adjust that but what I want to do here
is not I'm going to go through that
order array and the particular city that
I want to draw city n for lack of a
better word is at order index I so I
want to go through the order array and
set the order as
three than two than10 whatever's in
there so now the indexing that that's
that order array essentially becomes a
lookup so I think this might be I have
this sort of like gut feeling even
though you're just somebody on the
internet watching a video and I'm a
random person in a room talking to
myself that that this is not entirely
clear so let's clarify this these are
the cities Kuala Lumpur Rio no Oslo
trying to think of a diverse set of
cities around the world so those are the
cities but I just call them a B and C
and this is the order which is an array
that has something like 1 to 0 so a b c
what i want to do is start here and say
ok the first city is 1 which means it's
B so I'm here right now then the next
city is 2 which is C which means I
travel to here and then the next city is
0 which is here which means I travel to
here so this never changes this is the
thing that's changing around and what we
use to inform the order we draw here ok
now I've come back and this should
hopefully make a little more sense to
you and I could run this now and we
could see it's doing every possibility
now I'm not getting the best
possibilities I actually fix that
testing yet but you can see that it's
kind of checking every possibility and
drawing in that order and I might be
able to if I reduce the framerate
hopefully we could see that kind of
happen as you see it checking each order
and then going to the next one and
there's some other weird goofiness going
on the way that I'm but because I
haven't gotten to the next step so the
thing that's the best ever now is no
longer actually a copy of the array of
the cities it's a copy of that of a
particular order so best-ever distance
can calc distance has to change because
now when I calculate the distance I need
to calculate the distance between these
cities based on a particular order so
let's go to that calc distance function
it's going to be a particular order and
now as I go through the order I going to
say city a city a is points order index
I woo right because I need to get go
into that array and find the one that's
act to the spot in the order this this
would let's write this in two lines of
code city a index is order index I and
then the actual city and let's just I
know that's right long is the actual
point at that spot right so I need to
use that order to look up what city am I
at and then I want to do that with B
city B index city B City B index and
that's I plus one remember that's the
next one in the order and then I want to
get the distance between City ASX
cities A's why CD BX I feel like I have
to like think about this while I'm doing
it city B why okay that makes it so
we've got to use that order again now to
calculate the distance so it became a
little more complicated of course you
could condense this code and I might
think about it later of a different way
to write it but I'm writing it it the
most number of steps to try to make it
as clear as possible okay so now we have
that distance so that works I have
calculated the distance between these
cities based on this order and if it's
the record distance I want to save not
the cities but the order then I'm
drawing the cities based on based on
sorry the drawing all the cities then
I'm based on it drawing a based on the
order that I'm currently checking and
then now I want to draw them I want this
exact same loop but I want to draw the
best one so instead of getting the order
from the current order array I want to
get it from the best-ever array
and we should see now if I run this and
I've done it correctly whoops length of
undefined sketch Jas 986 what problem
have I done
order is undefined oh I must have I have
a second place where I'm calculating
distance based on the order and swapping
oh don't forget about this swapping get
rid of the swapping huh that's I don't
want to swap I'm not ever swapping that
would have been a big bug if I left that
in there by accident found that luckily
uh am i not going to next order no okay
so what's going on I got a debug this do
I have no loop somewhere I'm back it
actually was working I just was
inpatient my framer was at one but I do
have an error here sketch Jas at line 48
what's happening like cities and ah okay
so n is hmm okay so why did I get an
undefined uh so hold on let's look at
cities has four things in it let's look
at order zero two one three
let's look at best ever ah something's
wrong still for whatever reason I'm not
getting the order the numbers in
best-ever
so let's see where let's see everywhere
I'm doing something with best-ever
they're ordered slice I still had cities
not slice here so this has to be order
and so now we can see here we are
checking every possibility one frame at
a time and you can see the current thing
that I'm checking is drawn in white and
actually that should be after so you can
see it just so you can see it on top I'm
just going to switch the order around
for a second of the drawing stuff and
I'm going to make the framerate 5 just
so you can see that a little better
so you can see it trying every
possibility and essentially it'll get to
the end and when it gets to the end you
know I kind of in a way like I just
drawing the current order I don't have
so this could be a check this is a
much for you guys to sort of visualize
this better and actually I have a I have
an idea I have a better idea so what I'm
going to do now is actually translate 0
height divided by 2 I just want to draw
these in different places so and whoops
for the second one and then the where
I'm drawing the text is actually just a
height divided by 2 minus 50 so what I
what I think is work would work better
here is for you to see and I don't think
actually to be honest like I don't feel
a huge need to draw that permutations
but you can see at the bottom I'm trying
every permutation and the current best
one is at the top and was it really the
last one let's so let's run this with
let me take out let me just run this a
few times I wonder if that's a bug in my
code no okay good that was just a
coincidence
so here the last one is not the best one
and what we can do first of all I want
to take out a console I want to add a
couple things to this I want to take out
I want to get rid of this test to see if
that was working and I want to I want to
sorry I was looking at the chat for a
second I want to make the total cities 8
and let's take the framerate up to as
fast as it'll go and we can see here it
is trying every single possibility and
every time it finds one that's better
it puts it up top so you can see I don't
know maybe that's the best one actually
it might have found it at some point
it's going to stop now I don't know
where it is so one thing I would like to
do is is be able to calculate the
percentage finish now the thing is
but the thing is we might run it so this
is kind of done and you can stop you
could stop watching this video and kind
of take this and think of our creative
way to visualize this or do something
interesting with it but I just want to
have a sense of how far I am to being
done so one thing I want to do is I want
to know I want to know total
permutations I want to calculate that
total permutations equals I have no
doubt this is not a function in
JavaScript math dot factorial total
cities now what's the chance that that
gives me something yeah math dot
factorial is not a function so let's
write our own I'm just going to go to
the bottom here writing a function 4
factorial merits its own video but I'm
going to do it really quickly here and
just say that if N equals 1 return 1
otherwise return n times and minus 1 and
that's a not right n times factorial of
n minus 1 right so factorial is 5 of 5
is 5 times 4 times 3 times 2 times 1
effectively a 4 is 4 times 3 times 2
times 1 so factorial of 5 is 5 5 times 4
factorial which is 5 times 4 times 3
factorial which is 5 times 4 times 3
times 2 factorial which is 5 to the 4
times 3 times 2 times 1 factorial and 1
factorial is equal to 1 and this is a
little recursive function which just
does that so um I think I have another
video or actually go through that in
detail to try to link to that here but
so we can say total here with eight is
factorial of totals so I'm going to say
total permutations I just want to see
what number I get 40,320 so percentage I
can also say now I can have a count
going and I can say where I can say in
draw our next order really I can say
count plus plus and maybe that should go
at the end but I'm feeling lazy right
now and I can say now what I want to
actually do is calculate
which is 100 times the count divided by
the total permutations and I want to see
per scent completed and let's make that
let's make that a little bit smaller
just be there at the bottom and see what
happens
uh-huh and you know it might be nice
here to number format that I think p5 is
a function number format an F or I can
say just give me two decimal places to
look at and we can see now and you know
I could say percent so even with eight
you can see how long this is going to
take doing only one possibility 60
frames per second let's at least make
sure that this is kind of working
correctly by reduced this number to five
and we can see here we're going to get
through 110 by counting is off and where
I'm calculating it no loop but you get
the idea here so now I'm able to see
this is now me checking every single
possibility and getting the fastest one
let's look at six and just out of
curiosity is this program even going to
run if I go up to like 20 cities Oh
something is app so you know why it's
not working is because 20 factorial is a
number too big to store in a variable
and I would need some sort of JavaScript
library I think for big numbers I think
that's particularly correct because I
this I ran into when I was working in my
java example on my java example I needed
to use Long's and I even you know I
might have even needed to use like a big
number Java library but that's only for
the percentage calculation because I
don't actually need to know the total
number of possibilities to check every
possibility I just need to check every
next one so this 8% calculated is
absolutely wildly incorrect but I think
if I do 10 am I going to get something
of 10 I'm still going to get something
about right because that's a reasonable
know several million so you can yeah I
encourage you to run this on your own
for a while see if it comes up with
something that looks right
and but
you know honestly what I would like is
can you make some kind of interactive
system that allows users to place points
can you make a game or simulation where
things are following all the points can
you actually have it act out people
searching for pokemons or sales people
walking to sell things or I know you you
should music playing as you should be
more creative with this okay thanks for
watching I've got one more left to do
which is do exactly this but use a
genetic algorithm to evolve the best
path thanks for watching</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>