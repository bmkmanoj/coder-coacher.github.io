<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>9.8: Genetic Algorithm: Improved Pool Selection - The Nature of Code | Coder Coacher - Coaching Coders</title><meta content="9.8: Genetic Algorithm: Improved Pool Selection - The Nature of Code - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/The-Coding-Train/">The Coding Train</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>9.8: Genetic Algorithm: Improved Pool Selection - The Nature of Code</b></h2><h5 class="post__date">2017-05-03</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/ETphJASzYes" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello I'm back for another genetic
algorithms video although this video
actually that you're watching right now
it's not just a video about something
you could do for genetic algorithms this
video is ultimately about picking from a
list of things randomly but picking some
things more often than other things and
this is a thing that you do have to do
lowers my research over here I'm coming
I'm coming
this is a thing that you have to do a
wig algorithm because we want to we want
to have a population of elements and we
want to pick certain members of that
population that have scored a higher
Fitness score to have their genetic
information more likely passed down in
the next generation
but let's let's look let's erase our
minds of the wonder that is genetic
algorithms and just start with a very
simple scenario I'm going to create a
JavaScript object and it's smart very
interesting smell and it's going to have
a things in it like mango five blueberry
three cherry one and apple one so what I
want to be able to do is I want to be
able to pick one I want to pick a fruit
randomly I want a function that says
pick fruit and I call that function I'm
going to get out of it returned a
particular fruit maybe mango maybe
blueberry maybe cherry maybe Apple and I
am going to get mango five times as
often as I'm going to get Apple I'm
going to get mango and I wrote these
numbers very specifically to add up to
ten because very easy for me to just
sort of do the math here but I'm going
to get may want to get mango 50 percent
of the time
blueberry thirty percent of the time
cherry 10% of the
and Apple 10% of the time this relates
to so many different kinds of scenarios
that you might do in computer
programming if that make sense okay so
how do we do this now you if you've been
watching some my other genetic algorithm
videos or other videos I've done this a
number of different ways one way that
I've done this is I built a separate
array and I what I've done with that
array is I put I just in hey let's put
mango in it five times I'm just going to
write down mangoes in this array five
time and then I'm going to put blueberry
in this array three times and then I'm
going to put a cherry and at once
an Appling at once so if I had a bucket
full of all these letters and there's
five M's in it three B's 1 C 1 a and I
shuffled around and pick one out
randomly I'm going to pick n more 5
times as often as I'm going to take a so
that's one way of doing it now there's a
bit of an issue with this way of doing
it this works really nicely for this but
if I have thousands of elements and
thousands of different products a vast
array of probabilities some of which are
very very very very small probabilities
I did have to build this array to just
so much stuff in it it's not a really
efficient performance good performance
solution and it's actually if you look
at a lot of my examples that's the
solution I'm using doesn't work so great
so I'm gonna propose I'm gonna I'm not
proposing this I didn't invent this I'm
just talking about it I'm going to look
at another solution now there is another
solution to this problem which is a
negative way that you could sort of pick
random numbers twice so what two random
numbers so each one of these 0 1 2 3 so
on the one hand I'm just picking a
random number 0 1 2 or 3 and I could do
that easily by saying it depends on
JavaScript or improvisationally floor
random 4 and this will give me 0 1 2 or
3 so this is one way that I could do
this but if I do that I'm just going to
get each one of these 25% of the time
but if in addition to picking one of
these randomly I picked another random
number just between 0 and 1 so this is
the fruit that I'm picking and this is
kind of my like a test
number if I pick another random number
that random number has to be less than
the probability in order for me to for
this first random thing to qualify so I
might have to do this a bunch of times
like I might pick three than point seven
and then two and point four and then one
in point eight and then zero in point
six and then three and point O one or
you know ah Apple qualifies so you can
see mango is going to be able to qualify
if I pick zero 50% of the time this
second random number is going to be fine
but if I pick Apple only ten percent of
the time is the second random number
going to be fine so that's one way the
problem with this way is you know with
again with a lot of elements and a lot
of probabilities I can be stuck doing
this over I kept me that loop can take
many many many many times before it
finds a qualifying random number so this
video I'm going to program an entirely
different algorithm we've suggested to
use this algorithm in a github issue I
will link to that github issue in this
video's description which is hello
description down there I've got trying
to get used to where things are over
there is something nobody looking there
is like an ad know what you don't know I
don't know click on maybe click on it I
don't know I'm all stressed out okay
never mind all that there's stuff around
me I've got a person in a YouTube video
but um there was a point to all this
wasn't there ah okay so I will also only
bring up that kids have a shoe to look
at it on the computer because I do have
a computer over there which I will get
to eventually okay so what is this other
algorithm well one way you could imagine
is let's say I created I don't know what
this is a tube a pipe a rectangle some
sort of two-dimensional space and I said
ah 50% of that space is mangoes space
and 30% of that space is blueberries
space and 10% ad space is cherry and 10%
of that space is Apple and this down
here is zero and up here is one so what
if I just pick a random number now
between zero and one
and it's almost like throwing a dart I
could be over here and I'm going to
throw a dart let's do it ready 1 2 3
I missed but actually it landed over
here blueberries I'm going to be more
likely there's more space for me to hit
with mango than there is for blueberry
extenders for cherry and apple now I
know I'm not going to build some whole
entire like dart throwing simulation fig
live sketch so I need a mechanism to do
this to pick the random number and
figure out where I am and actually a way
that I could the way that this could
work if I can actually start up here you
can pick a random number then start
subtracting values and find out at what
point toys would exit this space so
hopefully I would have program that
algorithm will look at it will work and
will come back here and see if this
makes more sense to us then okay I'm
going over there now okay here I am back
in this business screen with my computer
so this is the github issue that I was
referencing there's a link to it in the
video's description spectrum thank you
for this original suggestion and then
also sinclair's e81
this is for hole a flick oh I took me a
while to get to this has a very like
fancy crazy look at this unicorn
implementation of it that uses like es6
and all sorts of cool interesting
JavaScript syntax that ooh I don't fully
understand of it I will understand
someday okay so I'm going to do my own
so let me close those and let's let's
write some code okay
so first of all let's quickly I should
have done this in advance okay uh
there's a little pause there where I
decided actually what I want to do is
write the information I want to pick one
of these it's easier for me to put it in
an array because what I want to do is
pick one of these elements from the
array and then I want the probability of
how I pick it to be something relative
to its score so the first thing that I
need to do by the way is I need to
normalize all of these scores to values
between 0 and 1 and so that they all add
up to 1 I want them to be a percentage
and so the first thing that I'm going to
do is I'm going to just loop through
every single fruit
and what I need to do is I need to add
up all the scores I need to find out
what are they all add up to some equals
zero and I'm going to say sum plus equal
fruits index i dot score then the next
thing I'm going to do now here's the
thing I might want to retain that score
value or I might IV could just overwrite
it but ultimately what I want to do I'm
gonna say fruit index score equals
fruits index I and I know I could say
divide equals but I'm just going to
write this all the way up fruits index a
high score divided by some so the idea
is I want to normalize all of those
scores so all I need to do is add up the
total and divide each one by the total
that's exactly what I would have done
here I get 10 5 divided by 10 six
percent three hundred and thirty percent
you know and the math is never going to
work out that's perfectly but who cares
because the computers doing it not us
okay so what I'm going to do here is I
am going to go back to the browser and
I'm going to refresh you know this
canvas is here for no reason I'm just
and I'm going to look at fruits and we
can see here that now the scores are
normalized point five point three and I
could if I want to it might make sense
to say actually I'm going to add a new
property to each one of these objects
I'm going to say like norm score four
like our members call it probability for
probability fruits index I probability
so now I'm hit refresh I'm going to look
at that fruits array and I'm going to
see here now it retained the score and
has the probability of 0.5 and as you
can see if I were to go here and add you
know one other fruit like melon and give
it a score of you know seven point seven
then if I hit refresh and look at fruits
you can see now I've got five and it's
worked it out like it's the math isn't
so clean because it doesn't add at the
10th but mango now has a twenty-nine
percent chance of being picked and melon
has a forty one percent chance of being
picked so this is good so now how do I
pick one of these randomly according to
its probability this now I've now it's
time for
right an algorithm that implements this
particular race encode initials in this
particular idea this particular
algorithm we throw a dart and find a
place in here so the way that I'm going
to do that is first I'm going to write a
function I'm going to call it a pick one
and it's going to receive a list so I'm
going to have a generic function that
could work with any list of things now
it's going to be set up to work in such
a way that the list of things is made up
of objects that have a property called
prob for probability but you know
obviously it could make this more
generic in other ways as well okay so
the first thing that I'm actually going
to do is I'm going to say VAR index
equals zero so I'm going to sort of
assume that the one that I'm going to
pick is the first one then I'm going to
pick a random number between zero and
one point O and I'm going to say as long
as R is less is greater than zero then
I'm going to say R equals R minus that
particular object probability so let's
think about this for a second what I'm
saying is that let's say I have
something with a probability of 0.9 and
I have something with a probability of
0.1 okay I shouldn't draw this right ty
the house I shouldn't draw it right next
to this because I'm going to do
something different now so I'm going to
use but where is I don't have any space
I'm going to come over here since fine
let's just say a simplified arrangement
where I this is my like bar here and I
have something that has a as a
probability of 0.9 and B as a
probability of 0.1 the first thing that
I did is I picked a random number
somewhere between 0 and 1 and then I'm
going to subtract 0.9 from it because
point 9 is first how often am I going to
pick a number between 0 and 1 where I
subtract point 9 and now I have a value
less than 0 90% of the time right
Auri if i pick a number greater than
point nine if i pick point nine five and
I subtract point nine I'm going to have
a value of point zero five so 90% of the
time and when I subtract this I'm going
to be less than zero when I move it when
I'm out when I'm done look out I'm out
you're out when I below zero that's the
thing I'm left with ten percent of the
time I'll pick that number like point
nine five and then I go and subtract
point one and I'm out so ten percent of
the time I'll be left the last place I
was I'm starting up here I pick some
random number somewhere I subtract this
am I already below zero or or should I
keep going if I'm subtract this then
I've got left so this idea just I keep
subtracting these values and it doesn't
matter what order right even if this was
B was first and I'm always subtracting
point one first I'm only going to be
less than zero if I happen to pick a
random number that's less than point one
so hopefully this kind of makes it some
intuitive sense do I feel like there's a
very smart way to diagram this but I'm
not doing but I've said it enough times
I'm hoping it makes sense let's come
back to the code so what do I need to do
let's say so if so what I need to do now
is say index plus plus so I'm going to
just keep doing this I'm going to go
through the list until I have now gone
below zero now there's a little bit and
then I want to say return list index
except of the fact that this isn't
exactly right this isn't exactly right
because I would call this bracket is
highlighted down here but anyway forget
about that this isn't exactly right
because I actually want to i want if i
say index plus plus I'm going to go one
past the one that was actually the one
that I wanted to pick what it says so
I've got to very quickly just say index
minus minus let me talk you through that
right in the scenario where I just have
0.9 is probability the first of index 0
is 0.9 so I pick a random number I pick
point 8 I say R equals point 8 minus
point 9 so that's negative point 1 then
I say index plus plus so I go to 1 and I
go back to move I don't loop again
because I'm now below 0 so I didn't
want to pick one I want to pick zero so
going up is just if I'm continuing but
if I'm not continuing I've got to back
up one so this should work
I hope and so I'm going to hit refresh
here and I'm going to say pick one
fruits and I got mango and I got mango
and I got melon and I got cherry cherry
and I got melon I'm gonna get melon most
of the time right and so what I could do
right now just to sort of verify that
this is working I am going to say I'm
going to write a little loop here for
VAR j equals 0 i don't connect use i
again i equals 0 i is less than 100 i
plus plus and i'ma save our fruit equals
pick one fruits and I'm going to say I'm
going to do var melon counts and if
fruit fruit dot what is it named fruit
dot name equals melon melon count
actually you know what I'm just going to
do that's fine something I could do is I
could actually just create a count fruit
count plus plus so I'm going to give all
these while I'm over here I'm also going
to say fruits index I'm gonna give them
all accounts of zero so I'm going to
count how many times they picked and if
this is correct but doing it 100 is a
small sample size we should see that
they're picked proportionally to their
probability so let's take a look at that
let's run it and let's look at fruits so
fruits the first one is mango which was
picked 30 times at a probability of 29
that makes sense
blueberry was picked 10 times Alex
probability was 17 cherry was picked 7
his probability was 5% melons pictures
47 so this is this to me is working
obviously with just picking it a hundred
times it's not going to map so perfectly
you know I would suspect if I made this
a hundred thousand then those
probabilities are going to over
I'm going to even out and be the
counselor to be much closer to the
probabilities okay so hopefully you have
enjoyed this particular video which is
just about how to pick elements from an
array with different probabilities and
is this might work in ever and it what
the nice thing about this particular
algorithm is two things one is I didn't
have to create a separate array with
lots of duplicate versions of all these
objects in it and they didn't have to do
this thing where I have to pick random
numbers multiple times and hope that one
qualifies and it could get stuck in an
infinite loop this is going to happen
every single time this is going to
always want a pick and return a value
you know sometimes going to have to run
through this loop a few times sometimes
just once but it's going to this is this
is a pretty efficient and fast algorithm
for doing this okay so what did I miss
what questions do you have do you apply
this in something I'm going to apply
this in something just a moment so if we
look at this video's description there's
a link to a video where I program a
solution to the traveling salesperson
problem and have solutions a little bit
strong I don't know if it's really gonna
be a solution it's a solution to the
traveling salesperson problem in
JavaScript with a genetic algorithm so
thanks for watching I will see you in
another video
bye
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>