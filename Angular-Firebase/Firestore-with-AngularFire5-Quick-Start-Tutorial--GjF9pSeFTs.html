<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Firestore with AngularFire5 Quick Start Tutorial | Coder Coacher - Coaching Coders</title><meta content="Firestore with AngularFire5 Quick Start Tutorial - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Angular-Firebase/">Angular Firebase</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Firestore with AngularFire5 Quick Start Tutorial</b></h2><h5 class="post__date">2017-10-04</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/-GjF9pSeFTs" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">just yesterday firebase launched an
exciting new product called fire store
simultaneously angularfire was updated
to version 5 which supports fire store
and brings in a whole bunch of other
important changes in this episode I'm
going to show you how to use the fire
store module and angular as well as talk
about the benefits that fire store
brings to app developers then over the
next couple weeks I'm going to release a
whole bunch of new videos showing you
how to build real world features with
fire store so make sure to subscribe if
you're just finding me for the first
time before we get to the code let's
first distinguish what fire store is and
how it relates to the existing real time
database that's already in firebase the
fire store is a no sequel database that
solves many of the limitations that
developers have found with the real time
database in other words it does pretty
much everything the real time database
does with a few extra features on top
the first advantage is being able to
query nested data in a memory friendly
way in the real time database you'd have
to load all of an object's nested data
which makes it hard to organize data
properly with fire store you can create
a tree of documents that point to other
documents or other collections of
documents this makes it easy to model
data relationships and make queries that
are shallow and memory friendly another
major benefit is its query language
which we'll see later in the code but it
has a where statement that you can use
to filter data by Equality for example
name equals the string of Jeff or with
range operator is where the score is
greater than 23 and it allows you to
build indices where you can efficiently
make these queries firestore will build
an index for each individual property
then you have the option to create your
own based on multiple properties now
that we know that let's actually build
something in the firestore I built a new
feature into our fire starter demo app
that uses fire stored on the back end
which you can check out in a link in the
description if you're brand new to
angular fire you can follow the install
instructions on the github page but I'm
going to assume you have an existing
angular application and show you how to
upgrade it to angular fire 5 so first
you have to uninstall angular fire to
with NPM then reinstall it making sure
that the version is 5.0 or greater then
I should warn you that there are many
breaking changes in version 5 so make
sure to read through the docs carefully
before you update an existing app then
another minor change is you need to have
a project idea listed in your firebase
config the fire store won't work without
it so make sure to include that
in my case it's in the environment TS
file from there you'll need to add it to
your app module so we'll import the
angular firestorm module and then just
add it to the import section then we'll
go into the app component and import
angularfire store as well as the angular
fire document and angular fire
collection and from rxjs will import
observable and map fire story encourages
the use of typescript so we're going to
create an interface called note which
will define our data structure which is
just going to be a Content as a string
and then hearts is a number and we'll
also give it an optional ID property the
first thing I want to show you is how to
work with collections which are just a
list of documents it's the real time
database equivalent to a list so first
we make a reference to a collection and
we do that by typing it as an angular
firestore collection with our note
interface then we'll get our data back
as an observable and a second variable
which we'll type as an array of notes so
that's one of the biggest changes in
angular fire 5 the reference to some
data is decoupled from the actual
observable data itself we can make a
reference to a collection by calling AFS
collection and whatever collection we
want to receive in this case notes so at
this point we just have a reference to
the collection but we can get observable
data back from it by calling value
changes this is roughly the equivalent
to a firebase list observable and
previous versions of angular fire so we
can loop over the data and the HTML by
just calling ng 4 with the async pipe
then we can print it out to the screen
as JSON
then we get data back in the screen as
expected but I want to point out that
the data is not ordered in any specific
way you can see we have strings and
numbers and different orders but
firestore can help us out with that you
can pass a callback to the collection
reference to take advantage of the
firestore query language the first thing
we'll do here is order by the content
which is a string value then we can get
our notes back in alphabetical order
based on the content so now you can see
they're ordered ABCD if we do the same
thing for hearts we'll get the hearts
back in ascending order so we have
hearts 0 6 6 7 if we want to flip this
around we just passed the descending
keyword and we're good to go
doing this kind of stuff was extremely
difficult the real-time database so this
is a huge advantage if
you're doing a lot of sorting and
organizing up data you can also limit
the amount of results you get back by
just calling limit just like you would
in a regular sequel database you also
have a few other operators that will
offset where you start from so you can
do things like pagination and infinite
scroll I'll cover those in more detail
in a future lesson right now I want to
show you what happens if we try to
combine to order by operators on two
different properties initially it's
going to give us an error in the console
but what we'll see here is we have a
link in this console to build an index
for this query if we copy and paste the
link it's going to take us to the
firebase console and give us the option
to create this index it takes a few
minutes but once you have the index back
then you'll be able to make this query
efficiently if we go back to angular
then we see that this query is sorted by
two different properties now the next
thing we're going to look at is the
where statement this allows us to make
queries in a more expressive kind of way
for this query we want notes where
hearts are greater than or equal to five
then you can see on the front end we get
the notes filtered by that rule we can
also filter by equality so we can do
hearts equal to seven and then we should
only get back the notes with that
parameter but I should mention you can't
use the not equal operator attempting to
use it will cause your app to crash so
just be aware of that what you can do is
use the Equality operator to chain
together with multiple where clauses so
we could say where hearts equal six and
content equals Triple A an important
caveat is that this only works with the
Equality operator if you try to do this
with a range operator you're going to
get an error so if we change equality to
greater than and try to run it we're
going to see an error in the front end
so that's how the query language works
now I want to show you a little bit more
about how the observables work in most
cases you should only need to call value
changes which send back the raw data
from the database but if you need
additional metadata you can return the
actual snapshot and angularfire also has
a way to return it in an ng RX redux
friendly way but I'll save that for a
future video you get the snapshot by
calling snapshot changes and then I'll
show you what this looks like in the
console just so you get an idea of
what's actually contained in there
so if we look at the actual array we can
see we have a type which is the type of
event that occurred that could be added
modified or removed and then we also
have the old index new debt index we can
retrieve the ID and some other metadata
as well so at this point we've been
working in the context of collections
but we can also retrieve individual
documents so to do that we're going to
make a reference to a document just like
we did with a collection the only
difference now is it's an angularfire
stored document type and it also has the
value changes method that will return an
observable so just like we did before we
make a reference to the note document by
calling AFS doc and for this example
I'll just go ahead and copy and paste a
random ID from the database then we will
build the observable by calling value
changes then I'll go ahead and update
the HTML to display the data from this
document then as expected that data is
displayed on the front end the next
thing I'll show you is how to perform
write operations on the data this works
basically the same as it did and the
previous versions of angularfire the
only differences we call these methods
on the reference itself rather than on
the observable I'm setting up this new
content variable to represent the form
input of a user when the form is
submitted we call update on the document
reference and pass it the new data you
also have the option to use set or
delete on the document reference then we
can jump back to the HTML and collect
the user's input with ng model and run
the update method on a button click if
we go try it out we can see our data
gets updated in real time just like it
would with the real time database let's
go ahead and pull up the firebase
console side-by-side you can see how
both applications are subscribed to the
same data so we can update the data from
our app or we can update the data from
the firebase console and everything
stays synched up in real time at this
point I only have one last thing to show
you and that's how to set up offline
data which is extremely easy with
angularfire
all we have to do is go back into the
app module and add this enable
persistence method on the import and
amazingly that's all you have to do now
you have offline data capabilities built
into your app so let me show you how
this works we'll go back to our app and
we'll turn off the internet connection
I go into the network and putting it in
offline mode then we'll try to make an
update on the data reference which will
still work in the app front-end so it's
gonna look fine to the user but we get
this internet not connected error in the
console then if we go back to the
firestore console will see that the
actual data is not updated on the
backend angularfire is keeping track of
the updates and when the internet comes
back on its going to send them to
firebase and update the backend this is
an awesome feature for progressive web
apps where you can still have some
interactivity even when app is offline
now that I've turned the internet back
on we can go into the console and we'll
see that it does get the updated data
after the internet comes back online
that's it for my firestore introduction
if this video helped you please like and
subscribe and if you want to learn how
to build more awesome features with
firestore consider becoming a pro member
at angular firebase com
thanks for watching and I'll see you
soon</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>