<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Algolia with Firebase Cloud Functions - Part 2 | Coder Coacher - Coaching Coders</title><meta content="Algolia with Firebase Cloud Functions - Part 2 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Angular-Firebase/">Angular Firebase</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Algolia with Firebase Cloud Functions - Part 2</b></h2><h5 class="post__date">2017-07-18</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Njtbo3YUdH4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">now that we know how to implement algo
Lea's search on the front end we're
going to create a fire based cloud
function to build our own custom index
on the backend in this example we will
create an index of books from the Google
Books API anytime this book data changes
on the database it will automatically
invoke the function telling al Goliad to
update the index the first step is to
create a new index on the algo Lea
dashboard in this case we'll just call
it books currently the index is empty
but when we add new data to the firebase
database we want to see the index
updated with that new data so if we add
a new book to firebase then go back to
al Golia we should see that book in the
index now let's see how we make this
possible with firebase cloud functions
first initialize functions in your
project then CD into the functions
directory and install al kolya by
running NPM install al Golia search then
set your al Golia API keys in the
functions environment you want to make
sure to use the admin API key in the
index.js file we start by importing the
firebase admin and then initialize al
Golia search with the API keys that we
just said the name of the function will
be update index and it will run anytime
data is written to this node in the
database which is books slash book ID we
reference the index by calling and knit
index then pass the name we define in
the AL Golia dashboard then we set a
variable for the data in the firebase
database then we set the AL Golia object
ID to whatever the book ID happens to be
every record in your al Golia index is
required to have a unique object ID in
most cases you'd want to use the
firebase push key you can add new data
to the index by calling index dot save
object and then pass it that data object
then you have a callback from which you
can catch the error or in this case we
just console.log the success of the
update so far the function will only
work when data is created or updated so
we check to see if the data variable is
empty and if so we call the delete
object method instead after you deploy
the function you should see the cloud
function logs being updated each time a
new book is added or removed to the
database back in the angular front-end
the only thing we need to change is the
index name pointing it to the books
index going into the app we can test it
out and make sure that it filters the
books in our index that's it for full
text search with algo Leah if this video
helped you please like and subscribe and
if you want to support the channel
consider becoming a pro member at
angular firebase comm you'll receive
free one on one project consulting as
well as a copy of the angular firebase
Survival Guide thanks for watching and
I'll see you next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>