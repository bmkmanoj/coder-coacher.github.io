<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Stripe Checkout Payments with Angular and Firebase - Part 1 | Coder Coacher - Coaching Coders</title><meta content="Stripe Checkout Payments with Angular and Firebase - Part 1 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Angular-Firebase/">Angular Firebase</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Stripe Checkout Payments with Angular and Firebase - Part 1</b></h2><h5 class="post__date">2017-07-10</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/_lZc2O2oUJk" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">in this episode we're going to integrate
stripe payments into an angular core
project with firebase on the back end
this is the first installment of a
multi-part series on hand-blown payments
and angular in this first part you'll
learn how to trigger the stripe Checkout
modal to collect the customers credit
card and then receive the payment token
back from stripe before we get into the
code let's take a look at how the whole
stripe payment process works
the user will enter their credit card
details through the angular app with
stripe checkout then
stripe will respond with the payment
token which we then want to save in the
firebase database this will
automatically trigger a cloud function
which sends the token back to stripe
stripe will charge the card and then
respond with the charge details firebase
and angular have a real-time connection
so the user will always stay up to date
on the status of their payment
throughout this process let's start by
getting the initial set up out of the
way
first you'll need a stripe API key which
you can get from stripe comm then go to
the check out documentation and we'll be
modifying the custom integration to work
with angular in your app environment
file add the stripe API key and make
sure it's the test key from there we
need to add the stripe check out library
to the index.html file and the final
step is to make typescript aware of the
stripe check out class which you do in
the Taipings DTS file the next step is
to create a feature module to handle all
of our payment components and services
when you're done with this lesson your
payment module should look something
like this from there we can generate the
service specify in the payment module
then import angularfire database and
angularfire aw and first we'll get the
user ID by subscribing to that
angularfire off state the only other
thing our service means to do at this
point is save the stripe token to the
firebase database the payment object
will just be the stripe token as well as
the amount that we want to charge the
customer let's take a look at how this
data is actually structured in the
database
every payment is nested under its
associated user ID the payment object
has an amount which is just a number and
the token and charge properties are
objects that are returned from stripe
they contain all kinds of useful
information that we'll see later in this
lesson now we can start building the
component that will trigger the stripe
checkout window
we'll use the host listener decorator
and we'll also want to inject the
payment service into the component and
we'll need the environment variable with
our stripe API key we set variables for
the handler which is the stripe checkout
object and also the amount which will
just hard code to 500 500 is equal to $5
and stripe everything is counted as
1/100 of the underlying currency the
handlers defined during ng on an it and
we define a few properties in there
including the stripe API key as well as
a default logo image but the most
important part is the token property
which is a function that we can use to
handle the token when it's sent back to
us one stripe in this case we send it
back to the service to update it in the
database the next function is just an
event handler that you can attach to a
button click and this will actually
trigger that stripe window to pop up the
last step is to use host listener to
listen for the window pop state event
this will happen if the route redirects
or if the user clicks the back button so
if you redirect a confirmation page
you'll definitely want to implement this
function let's go back into the app and
make sure it's working using a test
credit card from stripe we can send a
test request to the API once the charge
is complete we should see the database
updated with the token details the most
important part here is the token ID
which will send back to stripe from our
back-end to actually charge the card so
it's important to note at this point
that the card hasn't actually been
charged we just have a token that we can
use to charge it on the backend
in the next part of this series we'll go
over how to actually charge the card
with firebase cloud functions that's it
for part one if this video helps you
please subscribe and if you're serious
about stretch payments I recommend
getting a pro subscription at angular
firebase.com you'll get exclusive
content related to angular stripe and
firebase as well as access to our pro
Cannell on slack or one on one project
in Colton thanks for watching off the
end part 2</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>