<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Firebase Phone Authentication in Angular 4 | Coder Coacher - Coaching Coders</title><meta content="Firebase Phone Authentication in Angular 4 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Angular-Firebase/">Angular Firebase</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Firebase Phone Authentication in Angular 4</b></h2><h5 class="post__date">2017-07-19</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/XIq_VU1Njw0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">fire base recently rolled out a new
phone authentication system it's not
currently supported in angularfire - but
we're going to use the SDK directly to
implement phone off into our angular 4
app it works by having to use a verified
CAPTCHA then sends a text message with a
verification code to their number the
user then enters its gratification code
and they're off state will be updated in
the app it's important to point out that
phone auth is less secure than other
methods primarily because phone numbers
can be transferred between different
people it does however work very well
with two-factor authentication where you
use an additional sign-in method and
link the two accounts before getting
started make sure you have phone
authentication enabled in firebase in
order to use the CAPTCHA we'll need to
interact with the window object in the
browser it's considered a bad practice
to work with global browser objects such
as window directly in the component so
we'll extract it out into its own
injectable service it's just a simple
type script getter that returns the
window object now we can start building
the phone login component first we'll
import the window service as well as the
firebase SDK to make phone number
validation a little easier I'm going to
extract it into its own class and break
it into four different parts when we
send the number to firebase it needs to
be an e 164 format which is just a
string that starts with a plus sign
followed by the country code and then
the full phone number with no spaces or
dashes from there we'll set a variable
to hold the window reference and another
variable to hold the phone number
another one for the verification code
after the user receives the tax and
another for the authenticated user
during ng on init we reference the
window and then we initialized that
captcha on the window itself the
reCAPTCHA container should just be an
empty div with that ID in the template
kollene render will replace that div
with the reCAPTCHA content after the
user passes the CAPTCHA and enters their
phone number we need to send that number
to firebase to send the user a text
message we do this by calling the sign
in with phone number function and pass
it the CAPTCHA verifier as well as the
phone number and you want
sixty-four format this function will
return a promise which has the
confirmation that the verification code
was sent to the user we set this value
on the window reference and then catch
any errors at this point as well if we
get a successful confirmation we want to
show the user another form where they
can enter the verification code and the
final step is to confirm this
verification code is correct
and that will update the off-state and
firebase and we also catch errors at
this point which would usually be due to
an incorrect code being entered in the
HTML we add and empty did for the
reCAPTCHA and if the user is not
authenticated we show a form to enter
the phone number the form has four
different inputs each corresponding to
the attributes and our phone number
class this makes phone number validation
a lot easier for now we'll just validate
the max length of the input and we can
bind each attribute to the ng model
directive from there we add a button
that will allow the user to trigger the
process of firebase sending a text
message to their number and below that
will show a div conditionally only if
that verification code has been set this
div will have another form field for the
user to enter that verification code and
also another button to submit it after
the user submits a valid code it will
update the off state and firebase and
this entire div will be hidden and then
we'll conditionally show this other one
saying you've successfully walked in
what's your phone number if we go back
to the app we should see everything
working as expected
firebase also has an invisible CAPTCHA
which you can use if you don't want your
user to have to go through this tedious
recapture process
that's it for Bona
if this video helped you please like and
subscribe and if you want to support the
channel consider becoming a pro member
at angular firebase comm you'll get
access to exclusive content as well as
free one-on-one project consulting
thanks for watching and I'll see you
next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>