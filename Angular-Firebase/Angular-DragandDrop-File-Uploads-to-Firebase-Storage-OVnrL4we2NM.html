<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Angular Drag-and-Drop File Uploads to Firebase Storage | Coder Coacher - Coaching Coders</title><meta content="Angular Drag-and-Drop File Uploads to Firebase Storage - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Angular-Firebase/">Angular Firebase</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Angular Drag-and-Drop File Uploads to Firebase Storage</b></h2><h5 class="post__date">2017-06-24</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/OVnrL4we2NM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">and this episode we're going to build a
drag-and-drop file upload feature that
uploads the file to firebase storage
there's already several file upload
packages for angular 4 in angular 2 such
as drop zone jas and others but none of
them tie in easily with firebase storage
and it's relatively straightforward to
do the entire thing from scratch which
I'll show you how to do on this lesson
let's get started by building a service
I have another lesson that goes through
firebase fly uploads in more detail so
for now I'm just going to run through
the bare minimum code that's needed to
get angular working with firebase
storage first we define an upload class
that models the data we want to send to
the database in this example we build
the objects by sending in a javascript
file object to the constructor in the
upload service we import this class as
well as the angular fire to package and
we also need to import the entire
firebase SDK because file uploads aren't
supported at this point by the angular
fire to package now we create a function
to handle the upload task it's going to
use the firebase API to create a promise
which we can use to monitor the status
of the upload itself when the upload
task is complete it will save cool
information about the clouds the
real-time database most importantly the
download URL which we can use to access
the file
now we can start building the attribute
directive in this case we go with an
attribute directive over a component
because the functionality itself doesn't
need an actual HTML template inside the
directive we're going to use event
emitter post listener and help but we
use a combination of output and event
emitter to create our own custom events
that we can send to other components in
the app in this case we create a wild
drop event which will send a JavaScript
file list object to a parent component
the file list is just the raw files that
the user had dropped into that element
we can use host listener to tie into
regular JavaScript events in this case
we're interested in listening to the
drop event which will occur any time the
user drops files onto the host element
it's important that we tell the event to
prevent the default behavior because
otherwise it's going to try to redirect
to that local URL of that file the event
has a data transfer attribute that we
can use to obtain the file list once we
have this file in a variable we can just
commit it through our event emitter now
we also want to create a separate custom
event that will tell us whether or not
the user is covering files over the file
upload zone we need this information
because we want to add a different CSS
class whenever the user has files
hovered over the LR
so we'll start by adding two more host
listeners for the drag leave and the
drag enter events and on the drag enter
event you also want to prevent the
default behavior a separate custom event
called file cupboard is created which
will just omit the boolean value true or
false
whenever the user's hovering files over
the element now that we have the
directed committing the files we need to
have the parent component listing for
those events and then handled a file
upload swiftlet service we're using
lodash to help loop over files we'll
block JavaScript our function simply
loops over the file list and for each
file
in that list it will trigger the
uploaded service to send that file to
firebase storage
we also declare a separate variable and
function to keep track of whether or not
files are hovered over the drop zone at
any given point in the template we start
by adding a basic progress bar which was
covered in more detail in my first file
upload video then we add the attribute
directive to a div from there we can
listen to the custom events that we
defined in the directive and when those
events occur we trigger the functions
that were defining the component so in
this case when the user drops files on
to the directive it's going to trigger
that handle upload function and that's
going to sequentially upload this file
firebase storage when the files hovered
event occurs we just toggle that boolean
variable and then we can use the ng
class directive to display a conditional
class whenever the files are hovered and
in this case the div just turns from a
dashed border to a solid bright blue
border that covers the basics of drag
and drop file uploads some other things
you might consider are limiting the file
size for example throwing an error of
user tries to upload a really large file
or limiting the file uploads to only
certain types for example if you only
wanted to have images uploaded to your
app
that's it for this episode if you found
the video helpful please like and
subscribe and if you want to support the
channel consider becoming a pro
subscriber at angular firebase.com for
just a few bucks a month you'll get
access to exclusive content as well as
free one on one project in full team
thanks for watching and I'll see you
next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>