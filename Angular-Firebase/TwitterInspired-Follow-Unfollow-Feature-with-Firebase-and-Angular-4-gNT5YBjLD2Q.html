<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Twitter-Inspired Follow Unfollow Feature with Firebase and Angular 4 | Coder Coacher - Coaching Coders</title><meta content="Twitter-Inspired Follow Unfollow Feature with Firebase and Angular 4 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Angular-Firebase/">Angular Firebase</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Twitter-Inspired Follow Unfollow Feature with Firebase and Angular 4</b></h2><h5 class="post__date">2017-06-27</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/gNT5YBjLD2Q" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">in this episode we're going to build a
follow unfollow feature similar to
Twitter using angular for on the front
end and firebase no sequel on the back
end in order to get started with this
lesson you'll need to have firebase
authentication already wired up in your
angular app if you don't have that done
check out the link in the top right
corner for a lesson completely dedicated
to authentication let's start by
modeling the data in a standard sequel
database you could setup a many-to-many
relationship but since we're dealing
with no sequel we have to do things a
little differently the database needs to
answer two fundamental questions first
is the current user following any other
given user and second what is a user's
follower account the first question can
be answered by saving a user's followers
under their own user ID and the second
question can be answered by doing the
exact opposite saving each followed user
ID under their own user ID let's start
putting this together in a service that
will call the Qualla service first we
import the angularfire to database then
we create a function to get a user's
followers this will be used primarily to
build the follower Cal it simply
requests the database object based on
the user ID that's passed as an argument
next we create a function that will tell
us whether or not user a is following
user being
it gets passed to user IDs its arguments
and will query the database for that
specific key value pair if it returns
true we know that that relationship
exists and if it returns null then we
know that that user is not following the
other user from there we can start
building our follow function which will
update the database with the
relationship when the user decides to
follow another user this will make two
separate database operations for each of
the two collections we've created the
unfollow method follows the same
approach but instead of updating the
database we just removed that key value
pair now let's go ahead and build out
the component it's important to first
point out that we have a firebase list
observable of users that we pull from
the database and we're going to pass
that to the child user profile component
and we're also going to pass in the
current user that's authenticated in our
out in the user profile component we
start by injecting the follow service
and we also import the size function
from row dash which will help us with
the follower count the input decorator
can be used to accept the variables from
the parent component and we also set a
follower count and it's following
variable as well as variables for the
subscriptions themselves that we can
unsubscribe to prevent memory leaks
first I set the current user ID and that
profile user idea constants just to make
the code a little more readable
then we can subscribe to the firebase
object observable we defined an service
to see if the current user is following
user in this profile it'll emit a true
value if the current user is following
this user and if not I'll just omit null
then a second subscription is set up to
get the follower account
I set up a separate function to record
the follower account because there's one
small caveat that you want to be aware
of when a firebase object observable
returns null it still has a value key on
it and so the lodash size function will
return one when the real user account
should actually be zero from there a
function is set up to toggle the
relationship between the current user
and the users profile its following is
true then we trigger the unfollow
function and if it's false we trigger
the wallet function the final step is to
tear down these subscriptions during the
fun destroyed lifecycle hook in the
template we start by building just the
basic user profile and then we can use
the ng-if directive
along with the new if-then-else and tax
and angular core to display a
conditional template when the is Boeing
variable is true we want to display the
unfold button and when it's false we
want to display the opposite follow
button
from there we can create a couple mg
templates each one that has its own
button and will fire the toggle koala
well function when the click event
occurs now if we go back to the app we
can see the follow and unfollow buttons
are updating the database in real time
that's it for this episode if you found
the video helpful please like and
subscribe and if you want to support the
channel consider becoming a pro
subscriber at angular firebase comm for
just a few bucks a month you get access
to you exclusive content as well as free
one on one project in Fulton thanks for
watching and I'll see you next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>