<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Angular 4 Transactional Email with Google Firebase Cloud Functions | Coder Coacher - Coaching Coders</title><meta content="Angular 4 Transactional Email with Google Firebase Cloud Functions - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Angular-Firebase/">Angular Firebase</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Angular 4 Transactional Email with Google Firebase Cloud Functions</b></h2><h5 class="post__date">2017-06-15</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/wCtNjP9gcqk" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">in this episode I'm going to show you
how to send transactional email in
angular 4 is a background task in the
cloud to facilitate this the emails will
be sent with Google Cloud functions for
firebase and email service SendGrid you
can use any email provider you want such
as mail gun or postmark or even Gmail
but I chose SendGrid for this tutorial
because they have a solid helper library
and a detailed node example in their
documentation they also offer a free
trial with no credit card required so
you can get your API key and follow
along without having to pay anything out
of pocket so what is the cloud function
exactly Google cloud function is a
service architecture that allows you to
run isolated code in a node.js runtime
as opposed to deploying your own server
from scratch it's Google's answers to
AWS lambda and it's only been available
to the public for less than a year it's
not some tool for firebase developers
because it allows you to run code in the
background that would otherwise slow
down an angular app and email is
definitely one of those tasks that you
want to delegate to its own background
task or micro service we can trigger
cloud functions in many different ways
but this lesson will demonstrate the use
of cloud functions via HTTP it's also
useful to know that you can trigger
cloud functions on database write
storage upload authentication events and
even analytic you BAM all of which are
common use cases for transactional
emails
some examples include sending a welcome
email to a new user for sending the
email when they've reached a max
capacity on file uploads or some other
application like that
I plan on covering these scenarios and
give your videos
at this point I'm assuming you have an
angular app started with fire based
tools package installed start by running
the firebase emit command and then
scrolling down to functions this will
create a functions directory and give us
an index J s file which is where the
functions are defined the functions
directory is its own isolated node
environment completely separate from
your angular app its logic has no direct
connection to angular whatsoever this is
great because it keeps your front-end
app lightweight and allows you to have a
separate environment where you can
delegate CPU and memory intensive
operations first we need to install the
SendGrid package so we CD into the
functions directory then run npm install
first i require the standard package and
path with the api key
next I define a course body helper to
convert the email parameters into JSON
with Len grids mail helper this is
actually a pretty powerful feature from
send grid when it comes to formatting
emails so check out all the options in
the documentation core attachments and
things like that to create a cloud
function we use the exports keyword
followed by the function name in this
case I'm going to call it HTTP email our
function will return a promise when
triggered via HTTP and it's successful
it will sell the SendGrid API we're
sending email the request must be a type
post and should have query parameters
that define the email addresses subject
content and any other variables in the
email SendGrid will then return its own
response letting us know the email was
successful or if an exception has
occurred before we can wire up the cloud
function with angular we first need to
deploy run the firebase deploy command
flagging only functions it'll take a
couple minutes but when the deployment
is complete the console will point out
the URL used to trigger the function
make note of this URL because we're
going to use angular's HTTP library to
trigger this URL in the next step now
this function is deployed we can call
this function from anywhere within our
angular app here I have a brand new send
email component that will trigger the
function first I import the HTTP module
and create a function that open a post
request to the URL that we just deployed
I'm also going to hard code some query
parameters just to show you how to send
data over HTTP to the function at solve
in this example I'm just going to
console.log the response for debugging
now we can trigger the clock function
with the button click or any other event
for that matter if all went according to
plan you should see an email on your
Inbox
if not make sure to check the console or
the firebase cloud functions logs for
any exception that's it for
transactional email thanks for watching</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>