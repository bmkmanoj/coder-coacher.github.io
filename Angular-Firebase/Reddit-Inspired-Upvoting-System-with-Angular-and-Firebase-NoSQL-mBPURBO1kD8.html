<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Reddit Inspired Upvoting System with Angular and Firebase NoSQL | Coder Coacher - Coaching Coders</title><meta content="Reddit Inspired Upvoting System with Angular and Firebase NoSQL - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Angular-Firebase/">Angular Firebase</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Reddit Inspired Upvoting System with Angular and Firebase NoSQL</b></h2><h5 class="post__date">2017-06-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/mBPURBO1kD8" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">in this episode we're going to build a
reddit style uploading downloading
system using angular foreign firebase
in this example we have a collection of
items already in the database and we
also have firebase authentication setup
in our app if you're new to firebase
authentication I've added a couple links
in the description with more details the
first thing we need to think about is
modeling our data in the firebase no
sequel database our database needs to
answer two klenda mental questions what
is the users vote for a given item and
what's the total count for a given item
we can answer this question by creating
a collection based on that unique idea
of the items for each item ID we save
the user IDs that have voted on that
item
this way we can query an item and see if
users voted on it and we can also tally
up the collection of users under an item
to get the total vote count let's start
by building the service the first thing
we need is the firebase object
observable for a specific item ID
we also need the user to be able to cast
their vote by updating the item object
in the database the Upstate user vote
function will send a new key value pair
to the item in a database with the key
beam users ID and the value being the
value of slow which can be either at
negative 1 0 or 1 now we can build the
hook vote button component our component
will accept a couple of input values
since this is normally going to be a
child component of an item we can go
ahead and pass with the item ID as well
as the user ID in the component type
script we have just a generic component
but we're also going to be using the
home click decorator and we've also
imported lodash as well to help us
facilitate the vote count which we'll
see later on so we have input variables
for the item ID and a user ID and we
have a couple number variables one that
represents the total vote count and one
that represents the current users vote
during the ng on a lifecycle hook we can
subscribe to the firebase object
observable from our service the
observable itself is going to admit the
up close and we can use that to figure
out what the users vote is and also it
the total vote count for an item and we
add a conditional statement when
checking the user vote because it's
possible users not logged in when
viewing an item and added betray my
consider is redirecting the user to a
login page when they click the upload
button and they're not logged in in this
example I'm using the lodash library to
put all the object values into an array
and then get the plumb about array doing
the same thing in JavaScript would
require a lot more code so we're
keep it concise and label so now we can
build two separate functions one for
uploading and one for download in these
functions are identical the only
difference being a positive one for an
upvote and a negative one for a down
boat we also want the user to be able to
cancel their vote by just clicking the
same button again so we do this by
checking to see if the user vote it's
already at enough voter a down vote and
if it is and we set the float value to
zero which will essentially reverse
their vote we can do this in one line
using a JavaScript ternary operator to
replace that multi-line if-else
statement the final step is to end the
subscription once the components
destroyed to avoid energy scene memory
leaks into the app we can do this with
the ondestroy lifecycle hook
in the template we create two arrow
icons that handle uploading and
downloading we simply find the upload
and download function to the click event
on these buttons in order to show the
user whether or not they've uploaded or
downloaded for an item we color the
upload screen and the Downloads read we
can do this with the ng class directive
which will add an active class to the
item if it's code is either greater than
0 or less than 0 now if we go into our
app we can see that we have a fully
functional up close down boat system on
the Left we have the app itself and on
the right we can see it's updating the
firebase database in real time that's it
for this episode if you found the video
helpful please like and subscribe and if
you want to support the channel consider
becoming a pro subscriber at angular
firebase comm for just a few bucks a
month you'll get access to exclusive
content as well as free one on one
project consulting thanks for watching
and I'll see you next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>