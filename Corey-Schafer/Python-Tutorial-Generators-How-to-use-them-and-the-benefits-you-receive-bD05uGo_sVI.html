<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Python Tutorial: Generators - How to use them and the benefits you receive | Coder Coacher - Coaching Coders</title><meta content="Python Tutorial: Generators - How to use them and the benefits you receive - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Corey-Schafer/">Corey Schafer</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Python Tutorial: Generators - How to use them and the benefits you receive</b></h2><h5 class="post__date">2015-08-17</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/bD05uGo_sVI" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey how's it going everybody in this
Python video we're going to be going
over generators and why you'd want to
use them and some of the advantages that
they have over lists so in this example
I have this function up here called
square numbers and what it does is it
takes in a list of numbers and then we
have this result variable which is set
to an empty list and then we loop
through all the numbers and from the
list that we passed in and we append the
square of that number to the result list
and then after we're done looping
through all the numbers then we return
the result and then you can see here I
have this by numbers variable set equal
to square numbers I'm passing in a list
of 1 2 3 4 5 and then I just print down
or then I just print out my numbers down
here so if I run this code then you can
see that our list of 1 2 3 4 5 that was
passed in our result is 1 4 9 16 25 so
currently our square numbers function is
returning a list now how would we
convert this to be a generator well to
do this we won't need this result
variable anymore so we can take that out
we don't need the return statement and
this result dot append we can take this
out and all we have to do is type in
this yield keyword and just yield the
square number here so this yield keyword
is what makes it a generator now if I
save this and run it you can see now
whenever I print my nums I'm no longer
getting the list if you look at the
comment here this is what the result
used to be I'm no longer getting 1 4 9
16 25 the squares of 1 through 5 no
longer getting that result I'm getting
this generator object here now the
reason for this is because generators
don't hold the entire result in memory
it yields one result at a time so really
this is waiting for us to ask for the
next result so hasn't actually computed
anything yet now if I print it out next
my nums which asks for the next result
then you can see that it's one because
we passed in our list of 1 2 3 4 5 and
then we're looping through that list and
so 1 is the first value so it's equal to
I here and we yield it out 1 times 1 and
it gave us that result so now if we copy
this line here and print out next my
numbs a few times here and run that then
you can see that each time that we run
next it goes and gets the next value
that's yielded so now we have 1 squared
2 squared which is 4 3 squared vs. 9 16
25 and so on now 25 is the last value
from our result so what if I was to run
next one more time well if I do that you
can see that I got an error here and the
exception that it through was stop
iteration and that means that the entire
generator has been exhausted and stop
iteration just means that it's out of
values now instead of getting these
values one at a time we still can use a
for loop on these generators and this is
personally how I use generators a lot of
the time so let me comment out this line
and then let me uncomment that one and
save it so now we're saying for numb and
my nums which my nums is our generator
print out numb so I'll run that and you
can see that we get all of our values
and we don't get the stop iteration
exception because the for loop knows
when to stop before that happens
so one immediate advantage over a list
is that I think that this is much more
readable here rather than having the
result set to an empty list and then
appending to that result and then
returning the result this is kind of
more readable we're saying okay I'm
passing in these numbers for each number
and that list of numbers yield the
result now for those of you more
familiar with Python you might have
noticed that this entire process here of
these lines of code would have been much
easier to write as a list comprehension
so let me comment this out and if you
don't know what a list comprehension is
don't worry about it too much I just
want to show the
generator example with this as well now
this is a list comprehension here and
it's going to do exactly what our square
numbers function did so what we're doing
is we're creating a list and we are
taking x times x so the square of x for
x in this list of 1 2 3 4 5 so if i save
this here and run the code you can see
that i still get the same results and i
can also print out this list up here at
the top now you can create a generator
in the same way and it's just as easy as
taking out these brackets and instead
putting in parenthesis so if I take out
those brackets put in parenthesis now if
I run this then you can see that when I
printed my nums here tried to print it
all at once I got that generator object
and then when I ran my for loop it loop
through all the values and gave me that
result ok so what if you wanted to
actually print out all of the values
from the generator well like I said
they're not currently all held in memory
but you can convert it to a list and
it's just as easy as just putting lists
and then wrapping that and then if I run
that you can see that it run it that it
printed it out just as if it was a list
now when you convert this generator to a
list then you do lose the advantages
that you gained in terms of performance
and I haven't talked about performance
yet but I have a better example to show
those advantages so a generator is
better with performance because like I
said it's not holding all the values in
memory which isn't a big deal at all
whenever you have a small list like this
of 1 2 3 4 5 but say that you had tens
of thousands or even millions of items
to loop through then having that many
items in memory will definitely be
noticeable but you don't get that with
generators so whenever you cast a
generator to a list like this if this
generator had a lot of values that
needed to convert to that list then you
lose that performance in terms of it
would put all of those values into
memory
so let me show you a better example here
of this performance difference so I have
a file here where some of this stuff you
don't have to worry about like these
lines here I'm just printing out the
memory and then these names and majors
I'm just these are just going to be used
to make some random values so I have two
different functions here one of these is
going to make a list and one of these is
going to be a generator and they're both
returning the same values so within this
list I have my result here and I'm
looping through a number of people that
I'm going to pass to this function and
for each person I'm just going to make a
person dictionary give it a an ID and a
name that's randomly chosen from the
list of names up a top and a major
that's randomly chosen from the list of
majors and then I'm going to return that
result and for the generator it's the
exact same thing I'm going to loop
through the number of people that I pass
in and then I'm going to yield this
person dictionary that has the same
values as the list function head now
really quick just to make these the same
I'm going to make that an X range
instead so that these are exactly the
same okay so right here don't worry
about these lines here this time clock
and this t2 time clock all I'm going to
do is time how long it takes to run this
function which returns a list now I'm
going to pass in 1 million values to
this function so it should return a list
of 1 million results and then down here
at the bottom I'm printing out the
memory usage and the total time that it
took so if I run this then you can see
up here at the top of the code so this
before here this is before I made
anything so my base memory usage was
around 15 megabytes and this memory
after is after I created that list of 1
million records so you can see here that
it jumped up by nearly 300 megabytes and
it took
one point two seconds now if you're
dealing with large amounts of data you
know that's not out of the ordinary to
have 1 million records like that so
let's see what this looks like if I
instead use the generator example so I'm
going to going to comment out the the
function that returned the list and now
I'm going to uncomment this function
that returns a generator and I'm going
to pass in the same number of values I'm
going to pass in 1 million values here
so if I save that and run it now you can
see here after I ran this that the
memory is almost exactly the same and
that's because the generator hasn't
actually done anything yet it's not
holding those million values in memory
it's waiting for me to grab the next one
or to loop through those and it would
give me those one at a time now this
time that it took here basically it
didn't take any time because as soon as
it gets to the first yield statement it
stops so if I was instead to make this
an integer then it would be nearly zero
seconds now whenever I said earlier that
if you convert this to a list then you
lose that performance then let me show
you what I mean here so I will convert
this result this entire result to a list
and now if I run this then you can see
basically I got pretty much the same
result that I got when I ran the
function that returned the list so if I
take these back off and just do the
generator then you can see that we get
our performance back so that's how you
use a generator you know I think that it
is a little bit more readable and it
also gives you big performance boosts
not only with execution time but with
memory as well and you can still use all
of the comprehensions and this generator
expression here so you don't lose
anything in that area so those are a few
reasons why you would use generators and
also some of the advantages that come
along with that so I hope this video is
useful for you guys if you do have any
questions about this stuff just ask in
the comment section below
be sure to subscribe for future Python
videos and
thank you guys for watching</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>