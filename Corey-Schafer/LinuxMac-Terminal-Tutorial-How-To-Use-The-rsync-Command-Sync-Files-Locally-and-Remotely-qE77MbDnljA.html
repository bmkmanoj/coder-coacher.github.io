<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Linux/Mac Terminal Tutorial: How To Use The rsync Command - Sync Files Locally and Remotely | Coder Coacher - Coaching Coders</title><meta content="Linux/Mac Terminal Tutorial: How To Use The rsync Command - Sync Files Locally and Remotely - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Corey-Schafer/">Corey Schafer</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Linux/Mac Terminal Tutorial: How To Use The rsync Command - Sync Files Locally and Remotely</b></h2><h5 class="post__date">2017-10-10</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/qE77MbDnljA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey everybody how's it going in this
video we're going to be learning how to
use the rsync command
now the rcent command allows you to
transfer and sync files efficiently
across different directories and
machines so if you ever want to set up a
backup for your files or sync files
across different machines then our sync
would be a great way to do this so it's
a lot more efficient than just copying
files because our sync only copies
what's different so for example if you
were backing up thousands of pictures
then copying all of these every time
would be way too inefficient so if you
did this with our sync then it would
only need to sync what's different since
the last backup and also if you were
copying data and lost a network
connection or something like that
then when you reran the Arsene command
it would know where it left off and
wouldn't have to start from scratch so
this is an extremely beneficial command
to know how to use properly so let's go
ahead and get started and look at some
examples
now our sync might already be installed
on your machine if you're on a Mac then
it should already be available to you
and if you're on a debian-based Linux
machine and don't have our sync
installed then you can install that with
apt-get install and install our sync and
if you are on an RPM based Linux machine
then you can install this with yum
install our sync okay so when you have
our sync installed and ready to go let's
go ahead and look at a very simple
example
so I have two directories that I created
here on my desktop and this top
directory here is called original and
the one below is called backup now the
original has some images of my dog and
the backup is currently empty so let's
run an AR sync command to sync these two
directories and copy the images from the
original to the backup folder so in the
terminal I'm just going to navigate to
where these directories are located and
that is on my desktop and now to use the
AR sync command I'll just type in our
sync and here we could add some options
for our sync and we'll look at that in
just a minute but for now we're not
going to give any options so now we just
want to put the source directory that we
want to sync so in this case we want to
sync the files in the original directory
and since we're not using any options we
actually have to specify the files and
not
a directory so we can say original and
then a star to sync all of the files and
now we want the destination so in our
case this is going to be the backup
directory so if we run that then we can
see that it synched all of the files
from our original directory here into
our backup directory now there's no harm
and running this again so it won't do
anything since there's no files
different or any files that need to be
recent so you can just rerun this again
at no harm so we can see that I ran that
again and it didn't recopy the files or
anything like that
now the way this is running right now it
won't actually copy directories and that
is why we needed to add the asterisk to
specify that we wanted all of the files
within the original but a more common
usage for our sync is to sync everything
and a directory so for example if we
were to create a subdirectory within
original so I will just say make the
original and we will create a new
directory called more pics and now if we
reran our previous our sync command then
we can see in our output here that it
said skipping directory of more pics the
one that we just created and when we
look in our directories we can see that
that was created in the original here
but in the backup it was not copied over
so if we want to sync the entire
directory then we can use the - our
option to say that we want to recurse in
two directories and copy the total
contents of the directory and
subdirectories so if we just rerun this
and we give our sync a - our option now
we no longer need this asterisk here so
if we run this then if we come over here
to our directories then we can see that
we have our more pics subdirectory
within the original and also that was
copied over to our backup so that worked
as planned now when you do it this way
notice that I have the trailing slash
here after the original directory now
that's actually important so that means
that we want to sync the contents of the
original directory if we leave it off
then it will sync the directory itself
so really just let me show you the
difference here so I will sync only the
directory and I'll
leave that trailing slash off and now if
I run this then without that trailing
slash if we look at our backup directory
here then we can see that instead of
just sinking the contents of the
original directory
it actually synched the original
directory itself so if we go in here
then all of the contents and the sub
directories are still here but it'll
actually placed that folder within the
backup directory here and these are just
left over from the last sync so if I to
illustrate this a little further let me
delete everything and then rerun that
same command again and now we can see
that it just copied that original folder
over so if you want to sync the actual
directory then you can leave that
trailing slash off but most of the time
my intention is to sync the contents of
these directories so you want that
trailing slash and when you include that
and run it then you can see that it
copies everything and syncs everything
as it should and I'll go ahead and
delete that original directory okay so
this - our option is great for getting
all of the contents but I'd say a more
common option for doing this is the - a
option so the - a option is actually a
combination of many different options so
it stands for archive and not only does
it recurse and two directories but it
also copies symlinks preserves the
permission modification times groups
owners and things like that so I like to
use the - a option most of the time to
copy everything okay so now let's look
at a few more useful options and I'm
going to delete the contents and this
backup directory again now if you are
about to run a large Arsenic job that
syncs a lot of files and folders then
you probably want to do a check on what
files and folders are going to be synced
so that you can make sure that it's what
you expect because checking what's going
to be synced before you actually run the
command is a lot better than realizing
afterward that you spent a lot of time
moving gigabytes of data to the wrong
place so to check what files are going
to be synced without actually syncing
the files we can use the dry run option
so we can specify that we want to
perform the dry run option with - - dry
run or we
use - in for short so just to be more
clear for the video I'll write out the
longer option there so let's say that we
wanted to do a dry run of syncing our
original folder contents with our backup
directory so to do that we could say our
sync and then instead of the - our I
said that I like to use the - a for
archive that includes those permissions
and everything like that and now to do a
dry run we can do - - dry run so now if
we run this then we can see that it
doesn't actually show us anything and if
we look in the backup directory then we
can see that it didn't actually sync
those files or directories so it did do
a dry run but the point of this is for
us to know what files are going to be
synced so that we can make sure that it
looks correct so to display this we need
to pair dry run with the verbose output
and to get the verbose output we can
include the dash V option so let's add
the dash V option to our last run here
and I'll just include that after the a
so now we can see that it displays the
files that it would have copied to the
backup directory but since we had that
dry run option as well it didn't
actually make those changes so this
allows us to make sure that everything
looks correct and if it does look good
then you can run the same command
without the dry run included so now if
we take the dry run away and run that
then we can see that with that verbose
option it told us exactly what it did
and without the dry run it actually did
perform that action of syncing those
files and subdirectories okay so just to
show you why our sync is so much more
beneficial than just copying files over
let me delete a couple of these files
here from my backup directory so I'll
just delete two pictures here and now if
we rerun that command with the dry run
option from earlier and run that then we
can see that it knows that it only needs
to copy these two files and not any of
the others and these two files that it
says that it will copy over are the ones
that we just deleted so you can imagine
that this would save an incredible
amount of time if you had a lot of files
or a lot of images say you had thousands
of pictures then copying all of those
every time you want to do it
would be extremely you know inefficient
and almost impossible to do and the
rcent command makes this a lot easier
okay so what happens if our backup
directory contains some files that are
original directory doesn't have so for
example let me add a simple file to our
backup directory so I'll just do a touch
and backup and I'll just create a file
here called test.txt
and if I create that we can see that it
was created and our backup folder so now
our backup directory contains this test
test dot txt file but our original
directory does not so let's run another
dry run and see if this matters at all
so we can see that it still wants to
sync those two files that we deleted
from earlier but other than that it
doesn't seem to care that there are more
files in the destination now it's just
going to move over the files that exist
in the original directory now if we want
our destination to mirror our source and
get rid of any files that don't exist
from our source directory then we can
add the - - delete option to do this so
we could say before our dry run here I'm
going to add a dash - delete and I'm
going to make my screen a little larger
here so that that all fits so now if we
rerun this with the dry run then we can
see that it still wants to sync the two
files that exists in the source
directory but it also says that it wants
to delete test ext now it also says that
it wants to delete this dot DS store
don't worry about that that's just a
hidden Mac file that gets created
sometimes but apparently that is another
file that exists in the backup directory
that does not exist in the original
directory now you have to be really
careful with this because there are some
horror stories online where people have
accidentally set this delete flag on an
empty directory which resulted in their
entire backup folder being wiped out
because if their source directory is
empty and you say that you want to
delete everything in your backup that
doesn't exist in the source directory
then that would be everything so you do
want to be extremely careful with that
and I don't use it a whole lot now I
could see this being useful if you had a
website or something that you wanted to
keep your lope
and remote files synced perfectly
together so for example if you deleted
in an HTML page on your local machine
and then ran our sync then you would
also want that to be removed from the
remote machine so you definitely have
that option but again just be careful
when using that option okay so now let's
actually see what it looks like to sync
files between a local and a remote
machine now I have a test machine that I
have SSH access to and I have its IP
address now if you'd like to have some
test machines that you have SSH access
to so that you can follow along then I
do have a video on how I set mine up and
I'll put a link to that video in the
description section below so I have a
test website in my projects folder with
some HTML CSS and JavaScript files so if
I CD back to my home folder and do an LS
on this my site directory then you can
see that we just have an HTML file a CSS
file and a JavaScript file so let's say
that I want to push these out to a web
server and we'll pretend that my web
server is the virtual machine that I'm
currently running now if you're
transferring data to a machine over the
network then our sink does have the
option to compress data while
transferring and to do that we can use
the dash Z option and also a useful
option for transferring over the network
is the dash capital P which will show
the progress so to sync this project I
can say our sync and then dash Z to
compress a for archive that we saw
earlier
capital P to show the progress and then
we want to set the projects and my site
as our source now remember what I said
earlier about that trailing slash now in
this case I actually want to transfer
the entire directory and not just the
contents so I'll leave that trailing
slash off for now and now we can put our
destination and the destination is going
to be our remote machine so first I'm
going to put my username and I'm going
to make this a little larger here so
that we can fit all of this in so this
is going to be almost like SSH into the
machine so our username at and then the
IP address the IP address from my test
machine here is 192.168.1 hundred and
then we want a : to specify the location
and I'm going to put this in the home
directory and inside this public folder
and then I'm gonna put a trailing slash
there now I do have key based
authentication setup for my test machine
there so it didn't ask me for a password
now if you don't have that set up then
it might ask you for a password to fill
in and then after you insert that then
you should see output similar to this
here so we can see that it shows us what
it's sent over and what the progress was
so now let's SSH into that machine and
make sure that everything got there
so I'll just say SSH and the username
then the address is 192.168.1 hundred
now let me navigate to the directory
where I synced those files and there was
not a folder in here before and now we
can see that it exists and if I CD into
that directory and list all of the files
and we can see that the files were
synced between our local machine and
this remote machine and again this is
better than just copying the files
because it'll only sync the differences
now we can do this in Reverse also so
let's say that we had a cron job on this
test web server here that created a
database backup or something like that
so let me create a directory within our
website and I'm just going to call this
backups so I'll do a make der and call
this backups let me clear my screen here
so I created that backups directory and
now within that backup directory I'm
just going to create a test file called
backup dot SQL and we can just pretend
that this is a SQL dumped into a backup
file so now that that file exists on our
remote machine I'm going to exit out of
that machine and now we're back on my
local machine so now let's say that we
want to sync that backup from our web
server to our local machine so we can
just use the servers folder for our
source and say so I'll just do an R sync
and I'll do those same options the Z is
for compression a for archive capital P
to show the progress and then a query ms
@ 192.168 5 6 100 and now we want to
specify the location of that
backups directory on our remote machine
so we'll put in a colon and that was
within public my site slash backups and
now we'll put in a space and now we want
our destination and our destination is
going to be on our local machine and I
will just put this within our projects
my site directory now you can put this
anywhere but I'm just going to leave it
within that my site directory so if we
run this then we can see that it looks
like we received our backups directory
and our backup SQL file and if we look
in our projects directory and my site
then we can see that it does have a
backup stirry in there and if we look
within that directory then we can see
that we do have that backup SQL file
that was pulled down from our remote
machine now a very common use case for
our sync is to pair it with cron jobs
now if you don't know what cron jobs are
there a way to schedule commands to run
on regular intervals and I have a
separate video on setting up cron jobs
and I'll leave a link to that in
description section below
so pairing cron jobs and are synced
together allow us to run regular syncs
and make sure that backups and things
like that remain up to date so it's
extremely useful just having that
working in the background without really
needing to think about it so if those
are the kind of things that you've
always done manually as far as you know
backing up a lot of pictures or pulling
down backups from web servers or
managing large projects then you know
pairing up some cron jobs with them some
are sent commands just makes its where
you really don't have to worry about
those things and it just does it all on
its own automatically ok so I think that
is going to do it for this video I hope
that now you have a good understanding
of how our sink works and you have some
ideas for how you can use this within
your workflow but if anyone does have
any questions about what we covered in
this video then feel free to ask in the
comment section below and I'll do my
best to answer those now if you enjoy
these tutorials and would like to
support them then there are several ways
you can do that the easiest way is to
simply like the video and give it a
thumbs up and also it's a huge help to
share these videos with anyone who you
think would find them useful and if you
have the means you can contribute
through patreon and there's a link to
that page in a scription section below
be sure to subscribe for future videos
and thank you all for watching
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>