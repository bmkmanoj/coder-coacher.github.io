<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Windows Command Line Tutorial #5 - Batch Scripts | Coder Coacher - Coaching Coders</title><meta content="Windows Command Line Tutorial #5 - Batch Scripts - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/DrapsTV/">DrapsTV</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Windows Command Line Tutorial #5 - Batch Scripts</b></h2><h5 class="post__date">2015-08-04</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/VYaM6_8WthU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">welcome to windows CMD tutorial number
five batch scripts in this video we'll
be using the basic concepts of batch
scripts this will be a lengthy video
everybody have all the slideshows and
code available in the description batch
scripts allow us to line up command
after command to run in sequential order
however we are given a few extra tools
for repeating commands and making
decisions batch scripts are more of a
nitch skill these days and I suggest
that it not be your first programming or
scripting experience as it gets
convoluted quickly all of our batch
scripts go inside either CMD or dot bat
files they can be run from the command
line or by double-clicking the file
there are many different things that you
can use batch scripts for so for an
example let's go for a backup script so
let's say you want to backup an
important folder to another Drive we can
use a bash script to create a folder in
the destination location set the folders
name to the current date then copy all
the files across this could be a script
that you run when you want or you could
set it up as a scheduled event to run at
a certain time of day like other
programming or scripting languages bash
scripts run in sequential order meaning
that each line in the script file is run
one after the other there is a few
commands that become particularly useful
when writing batch scripts these are
variables a storage box that will hold
information in arithmetic this allows us
to + - divide multiply and a few others
echoing this allows the output
information to the console and then we
have calling which allows us to run
other script files or call functions
which we'll look at a bit later let's
have a quick look at how to use these
commands we use the sack command to
create a new named variable and set its
value we also use it if we wish to
change its value if we want to perform
arithmetic on a variable we must again
use the set command however using the
option slash a to indicate that an
arithmetic expression would be on the
right-hand side of the equals sign to
output something to the screen use echo
and that can output a variable or just a
string you may notice that the variable
is surrounded in percentage signs this
indicates that between these percentage
signs is a variable not a string and if
we wish to call something we use the
call command which takes a file name
from the script or program or a label
which again we'll see a little later
okay finally on to writing a script
let's make a very very simple math
script but we'll try to get the grasp on
variables setting them and performing
arithmetic on them and then echoing out
the results let's call it simple dot bat
okay
so we'll come across to the folder we're
going to be writing our code in so then
we're going to create a new text
document and currently it has the
extension txt so we want to change that
and we're going to rename the whole file
to simple dot bat enter at last are you
sure you want to change this and we say
yes and then it will have the extension
dot bat and it changes the icon to a
Coggs symbol now we can right-click this
and edit it and we'll edit in notepad or
we can open up it in a specific editor
so I'm going to open up in notepad plus
plus I'll zoom in a bit and we can start
writing our batch script so first thing
we want to do is use the @ sign and do
echo space off and what this will do is
it will make sure that all of the
commands that we run one echo it back
out to us unless we specifically asked
for it all right now the first thing
we're going to do is create our first
variable so we're going to use the set
command and we're going to call that our
first variable underscore var one this
is going to be our first variable we're
going to make that equal let's say five
all right now we'll go down to the next
line we're going to create our second
variable now so we'll do set underscore
bar to I will make that equal six
all right now we'll echo a birth of the
mount so to do that we use the echo
command
so echo and we'll do var one is so this
will echo out a string bar one is and
then to call it our variable use percent
underscore var one percent and then we
can echo out our second one so echo var
two is percent underscore bar two
percent
and that will echo out both of our
variables now let's try doing a bit of
arithmetic on it so we're going to set
again however we're going to be used /a
to perform arithmetic and we're going to
create a new variable called result so
under saw underscore result and that's
going to equal cent underscore var one
so the variable var1 percent plus
percent underscore var to set so we're
going to plus both of our variables
together and store the answer of that in
our result okay so now we've added them
together let's echo add our result so
echo underscore result E is percent
underscore result percent all right so
that's our batch script written let's
save that so draw less or file save and
we can close that and now what we can do
is we can open up our command window
here and we can type in our batch script
name so we called it simple so we can
type simple you can put the dot bat on
the end if you want or you can not any
hit enter and it will run our program so
we see var 1 is 5 by 2 is 6 and the
result of placing them together is 11
cool so our first batch script works
successfully all right now let's start
looking at some more interesting things
we can do with batch scripts
selection is the concept of if some link
is true do this else if it's not true do
that instead we can do this with the if
command it follows the structure if test
command else command the commands can be
grouped using parenthesis also allowing
you to spread it over multiple lines we
can see an example of a deletion script
we use the comparison exists which taxi
of a given file name exists if it does
then we're going to output deleting file
and then use the delete command to
delete it if however it doesn't exist
we're going to output that file was not
found' tests can use several differ
comparisons which usually compares
between two variables the different
comparison operators are equal which
checks of two values are the same not
Eagle which checks if two values are not
the same less than which checks if the
left side is less than the right side
less than or equal checks if the left
side is less than or the same as the
right side the greater than which behave
the opposite of less than and finally
not which will run the command if the
test is false
another empowering concept is parameters
parameters of values that can be passed
into our script when it's run meaning we
can make the script much more reusable
parameters are always passed in whether
they are used or not we can access them
similar to variables however with no
trailing percentage symbol parameters
are values we can place after our script
name when running it in the command line
there are possible 255 parameters that
can be passed in however we can only
access from one tonight and easily or if
you need to use more than nine you can
look it up pretty quickly the next
concept is hopefully fairly
straightforward labels and go to
commands labels workers anchor points
that you can jump to at any point in a
script an execution will continue from
that point once we place our label we
can use the go to command to jump to it
it's important to remember that labels
start with a colon character as you can
see in this quick example here we jump
over the line that outputs the string hi
there is a special label that always
exists which is called AOF it stands for
end of file and the end of file means
stop the current script as we've reached
the end of the script file this label
becomes crucial as you move on to more
advanced topics of batch scripting all
right now that we've covered that chunk
of information let's write a simple
multiplication script it will take two
numbers from parameters and multiply
them we will also use two checks to make
sure we receive the two numbers
otherwise we'll go to a Help section and
output how to use the script let's call
it Malta okay so come over to our folder
again I'm going to right-click and
create a new text document and this one
is called mu
tea Malta yes we want to change it then
we open it up in our editor and first
thing we're going to do again is echo
off so @echo off and then we're going to
write our F check so if open quotes
percentage one for the first parameter
close quotes is equal to an empty quote
so double quotes then we're going to go
to :
help so we're going to create a label a
little bit later call to help and that's
where we're going to jump to alright
we're going to do one more if so if open
quotes percentage to sort of the second
parameter is equal to empty quotes then
we're going to go to : help alright now
that we've checked that the two
parameters have come in we're going to
do some arithmetic so we're going to set
forward slash a underscore result to
equal percentage one parameter number
one times percentage to four parameter
to then on the next line we're going to
echo out the result so echo answer is
percentage underscore result percentage
so the variable result alright and then
we're going to go to : yo f4 end-of-file
and the reason we're going to go to the
end of file is because on a couple of
lines down we're going to use the label
help and the help label is going to echo
out how to use the program so echo usage
: mult X space Y for the two parameters
and then in brackets we'll just put what
it does so mul to play X by Y and we'll
close it off alright so that SAS script
written so we can save this
and we can close this down and now we
can come back to our command line and
give it a shot so if we just type mult
it will go usage mult XY and we can type
in Malta three three and we get the
answer is nine or we could do three and
four the answer is 12 and if we leave
one of them off them we get the easy
again cool
so our program works successfully
another important concept is repetition
otherwise known as looping there are two
ways we can repeat lines of code that
can be done in batch scripts first is
using an if check with a go to
backtracks in a script and repeat a
block of command until the condition is
met this method is probably the easiest
to think about when writing it as it
follows the same rules as normal in the
example here we have a variable count
that increases by 1 each time the loop
is run until it reaches 10 it's very
important that your loop can finish
otherwise it will live forever
the second way we can use loops in batch
scripting is the for command normally
the for command is used with files in a
directory however if you want to use it
as an index we can use the slash l
option we then have a variable G that
will start at the start value specified
increased by the step value until it
reaches the end each time it increments
it will do the specified command this
example here will do the same as the
last slide keep in mind that because all
of this for command is on the one line
it is evaluated at once alright back to
some scripting let's write a simple
power script we'll use the for loop in
combination with what we've learned so
far to calculate the number of X to the
power of Y let's call it power bat
alright so we'll come back cross to our
folder right click new text document and
this one is going to be called power
what dot bat and yes we want to change
it and we'll open up in our editor
and once again we're going to go off and
then we're going to do out if so we're
going to do the same as before so if
percentage is one is equal to nothing
then we're going to go to help if
centage two is equal to nothing then
we're going to go to help all right now
we're going to create our variable
result so we're going to set underscore
result to equal percentage one so we
want it to equal X to start with now
that we've set it to equal our starting
value we're going to do our full leap on
the next line
so for /l % % G now this is actually
creating a reference to the variable G
but for now you can just think of it as
a variable in open brackets and we want
to start at two because we've already
got the first value set and result and
we're going to increment by one and we
want to go all the way up to percent -
all the way up to our second parameter
then we're going to do set /a so we're
gonna do it rithmetic open up some
quotes and we're going to underscore
result x equals cent one and we'll close
off our quotes so these quotes are just
encasing our whole statement together
and where x equally percent one okay so
that will keep multiplying it by itself
until we get up to this specified power
now we can echo out on the next line
that percent 1 ^ % - so this is using
our variables passed in from the
parameters
is percent underscore result percent the
result that we got then we're going to
go to the end of file now we can write
our help so help tag our label and then
we can do echo usage : power X Y and
then inside back to the calculate X to
the power Y then we can close it off
cool so that's our script written we can
save this ctrl s or file save close down
our document here I'm going to come over
to our command line here and we can type
it in so it will do power and if we
don't put anything in and will tell us
how to use it go to power and we can do
two to the power of let's do eight you
get 256 so that's working correctly and
we can do some funny things here because
the variables can only hold up to a max
of a 32-bit integer so what we can do
and that's a signed 32-bit integer so
what we can do is we can call our power
command and we give it something like 31
and we hit enter we'll get a negative
number as we get too high and it flips
into the negatives cool so that's
interesting and you can come back to our
slides a useful feature is the ability
to get input from a user of your scripts
this could be a number file name
confirmation etc we have two ways to get
input from the user
the first way is the choice command this
only allows you to get one character
this is usually used for the
conformation Y for yes or n for no the
other method of input is actually using
the set command again and we give it the
option /p and then instead of the value
we want to set our variable to
we place the prompt string that we want
to ask the user then the users answer is
stored in the variable okay now we're
moving on to a more complex topic of
functions looking at the call command in
more detail we can use it to run another
script a command or a function the key
feature or behavior of the call command
is that once the called script command
or function finishes it will return to
the place call was used and continued
running in the script this is what
allows us to create functions the call
command technically creates a copy of
the thing it's calling so you can also
pass in parameters after the call
command now we know how to call
functions let's look at how we can go
about putting them together functions
are slightly faked in batch scripting if
you have ever learned other programming
languages you'll be aware that functions
can return results have their own local
variables and can have parameters passed
in each of these features we can get
working using in tools we've been given
to create a function we start with
creating a label with our function name
set local and n local are very important
for your function if you're working with
any variables these tell the command
line to create a temporary storage of
new space for variables so we can see in
this example we have two variables with
the name num1 however our number one
variable outside the function is
actually a different variable to the one
inside our function and local tells the
command line that we are done with the
temporary storage and that it can be
deleted because n local deletes our
variables it causes a lot of issues if
we want to return values back
luckily using our knowledge that lines
are evaluated once we can chain a
command on to the end local command the
N local will destroy the space that has
been storing the variables however
because on that line there is also a
reference to a variable inside the local
space it's currently being held onto to
be evaluated before being deleted from
there we can create a result variable
and set it to our local variables value
this can be really confusing but I hope
I'm being clear enough all right let's
say these new concepts in action let's
create a simple function script to show
how we can manipulate the path our
execution text through our scripts
let's call it functions dot bat
okay so come over and we'll create a new
file so new text document and we're
going to call it functions dot bat yes
we want to change it open up in our
editor and first thing we're going to do
is we're going to echo off again the
echo off now we're going to get two
numbers from the user so we're going to
use set slash P for prompt underscore
num1 equals number 1 :
so first number that they enter set
slash P and the score num2 equals number
2 so we're going to ask them for number
one and number two now we're going to
come down a few lines and we're going to
create our functions so we're going to
do : plus funk so we're going to call
one of our functions plus so plus funk
and that's going to set local and then
we're going to set slash a so we're
going to do some arithmetic underscore
num1 equals percent one plus percent two
so these are our parameters that we're
going to pass into the our plus function
so we're going to pass in a first number
and the second number 2 plus together
all right now once we've added them
together and we've got our number 1
we're going to end local use the end
character to chain command together
we're going to set underscore result
oops X down write down align set
underscore result to equal percent num
1% oops I meant to put an underscore
there sent underscore num 1%
and once our and local is done we can go
to call an end-of-file so this end of
file will end our function rather than
going to the end of the file and now
that our plus function is done we can
call it so if we come up to the top here
and we do call : plus funk and then our
numbers that we want to pass in so
percent underscore num1 % space %
underscore num2 percent so we're going
to pass in our two variables that we get
from the user into our past function and
then we're going to create another
function that doesn't take in any
parameters and we're going to call it :
output and we use the output the current
state of every variable so output echo
underscore number one is percent
underscore num1 percent echo underscore
num2 is percent and it's got number two
percent and then we'll echo out what
result is so echo function result is
percent underscore results sent and then
we're going to go to end of file and
that's our output function so that's
going to output any of the current
values that we're working with so we're
going to call : output metal output all
that stuff to the command line and we're
going to create a one more function
which we're going to call our sub
function which is going to sub subtract
so : sub func a sub func will set local
and we're going to set local and we're
going to do very similar to our plus set
/ a underscore num1 it's equal
- sent 1 - % - and I think we've made it
to put these in quotes maybe I think
that should work alright so now what
we're going to do end local and chain
our command set and the score result to
equal our percent underscore number one
percent and then we can go to end of
file to end our function right now we
can come back to up to the top here
making call out : sub funk and pass in
our underscore num1 % &amp;amp; % underscore
numb 2% and then we can call our output
again and see what I pay is up then once
we're done without putting everything we
can go to end the file go to go F and
that's how functions written so we can
save that and we've got our main running
execution of the program top here so we
get our two numbers from the user then
we plus them together app with the
result + 2 - them apart and then output
the result alright so we have a look at
our past function
it adds two together and then returns
the result returns the answering result
and sub returns the answer in result as
well and our output just purely apples
everything to screen cool so let's give
it a shot we'll close this down and open
up a command line and making call out of
functions it doesn't take any parameters
so when we run it it will ask us for
number one so let's put it in let's say
a 5 and then we'll put it in 4 so 5 plus
4 is 9 and 5 minus 4 is 1
cool so our execution worked correctly
it went through and plus the two
together in our plus function
then the output function to output what
the values of everything was then it did
a subtract and then output it all the
values again cool
so our functions worked just some final
notes this is barely scraping the
surface of batch programming but as I
mentioned at start it's very niche and
your time could probably be better spent
elsewhere unless you have a specific
need for a more advanced knowledge there
is a really great feature called macros
in which you can assign a whole line of
code to a variable and then you can run
that macro just by using the variable
name then to reiterate be careful when
creating loops you don't want to get
stuck in an infinite loop all right
finally we're done I hope you found this
series useful there is plenty more to
learn in batch programming so I wish you
good luck if you have any questions
leave it in the comments and I'll try to
answer it as best as possible don't
forget to subscribe thanks for watching</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>