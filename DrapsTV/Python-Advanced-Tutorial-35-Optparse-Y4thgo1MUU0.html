<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Python Advanced Tutorial 3.5 - Optparse | Coder Coacher - Coaching Coders</title><meta content="Python Advanced Tutorial 3.5 - Optparse - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/DrapsTV/">DrapsTV</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Python Advanced Tutorial 3.5 - Optparse</b></h2><h5 class="post__date">2014-03-11</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Y4thgo1MUU0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">welcome to Python advance three ops pass
in this video we'll be looking at option
passing what it is how to use it and why
to use it you've ever seen any of my
hacking with Python videos you will
already have a fair understanding of how
a pass works every video have all
slideshows and code available in the
description opt pass is a standard
module that comes with Python it allows
for easy and neat option and argument
handling for our Python programs also by
default that will construct help output
for outputting to the console our pass
works by interfacing with the Python
system module taking the command-line
arguments and assessing whether they are
an option or an argument if it's neither
it is ignored options are usually a -
and then a letter arguments can be just
started from the user and can also be
set up to be only taken after an option
these options and arguments come after
the program in the command line okay so
now I know how it works let's have a
closer look as we build a quick program
to test out the I'll pass module on
let's create a program that outputs the
nth Fibonacci number we will have a
required option for the program to
calculate - and we'll also have an
optional for outputting to a file also
we'll put it in an option to output all
of the Fibonacci's to the enth number
okay
so let's create a file called fib n dot
py ok come here to my Ubuntu here open
up my terminal and use the directory spy
okay now I'm gonna create my file so vim
fib n dot py okay so I'm going to import
our path of course so import popped pass
and gonna define a fib function which
will do our calculating okay so had fine
fib and it's gonna take n for a number
to count to and we're also pass in a
boolean print to determine whether we
want to print it out or not
okay so inside our fib function we're
gonna define two variables a and B and
they're gonna start off as 0 and 1 and
we're going to create a for loop because
we know what number we want to count up
to so for I in range and we're going to
do some addition so we're gonna store
into a and B we're gonna store into a
you can stop B and we're going to store
into B a plus B okay
now we're gonna test our boolean print
so if prune then we're going to prints a
so what the current value is okay now
once it's completed our function our fib
function we're going to return what the
nth number is our a okay so that's our
fib function done now let's create our
main function which will handle or I'll
pass stuff so deaths main and inside our
main we're going to create a parser
object so parser and we're going to make
that equal to opt pass so the OP path
object and it's gonna be an option
passer option
Hasler and we'll create quickly create
it what its usage is so just in case
they stuff it up when they're trying to
use our program so usage and we use the
keyword sent prog so it'll to the name
of our program and then close those
quotes and do a + backslash which allows
the security on to the next line and
will tab in and will open up at courts
again under - n so the number v fib
number closes and then we'll do - or to
be the output file put file and we also
got a - a which is a print oh okay
so we'll close that off and we'll also
add a version argument so version equals
open courts sent perk so the current
program well that's going off-screen
just criticize that ok so we've got our
scent prog and it's version 1.0 at the
moment and we'll close that courts and
the brackets okay so we'll come down to
the next line and we're gonna start
adding some options to our parser so if
parser parser dot add underscore option
so we're gonna add an option and we're
gonna add the - n option which will
place into the destination variable test
and it's going to be called num okay and
now that's gonna be type int so type
equals int
and then we will do a back slash here to
go down to the next line tab in and I'll
help for this so help is equal to
specify the and because we want to use a
comma we just used a double ' and that
it will come up as in a posture single
apostrophe in the string so the nth
Fibonacci number output and we'll close
that off so that's our first option
added now we'll add another option so
our parser had underscore option and
this is going to be our output options
or - oh oops - OH
and similarly our desk is going to be
equal to just call it out and that's
gonna be type string cuz it's a file
name backslash again oops under the next
line tab in our help we'll be specify an
output file and then we'll put in
brackets optional and any quartz and
that option and we'll add our last
option which will be ow ow all so parser
dot had let's go option
and this will be our - a and what we'll
also use is will create another current
so we'll do a - - all so they can use
either - a or they can use - - all and
the action for this one is going to be a
store true so action equals store
underscore true so this will store a
true value into a destination so our
desk is going to be equal to print
because that's the variable we wanna put
it in so print and we'll go back a line
so he's out back slash go down and we're
going to have a default because just in
case they don't you don't put in a value
so they don't they don't specify that
they want to put all of them so our
default is going to equal false and help
is going to equal print all numbers up
to n and then we'll close off those
quotes and we close our option okay on
the next line we're going to retrieve
pass the options now so our options and
Oggs
equal to pasta don't pass underscore ox
okay so no that's retrieved we can start
to checking out checking out what's been
entered okay so if our option num so our
number option is equal to none so it
hasn't been hasn't been entered they
haven't given us a number then what
we're going to do is print out the
parser usage don't think that needs
brackets actually yep print parser usage
and then we're going to exit with system
code 0 okay now if it is there then
we're going to have an else statement
which will set the variable number to
equal option dot num okay now let's
create a variable called result so
result he's going to get a number from
the FIB function which we created
earlier and we're gonna pass it number
and we're also gonna give it the bullion
from option dot prin so that'll give
Betty there are true or false okay so on
the next line we're gonna print out what
the result is so let's make it fancy so
print the quotes plus STR number
those brackets plus open courts th so
the whatever number fib fib number is
close quotes plus a string of the result
okay so now that's done what we're gonna
do is we're going to check if they want
to output it to a file so if options are
out this is not equal none then we're
going to open a file so F equals open
and we're going to pass in options out
and we'll put it in append mode so it
keeps adding to that file and then we're
going to F dot write string of result
plus plus a backslash n for g line
inside that right okay so that's our
main written so let's just write our
finishing if so if I'm just going to a
name and it's got on the school equal to
that's gonna main I'm just going to
school then we're going to run main okay
so let's
right quit this and let's give it a shot
so Python fib n dot P Y and then we give
it a dash n so dash n flip there 10 but
we got an error option number name pops
oh it's an S I'm back back up sorry
so if options num sorry and put that on
train as well yes and on flips ok it's
right quit that again oops
it's probably running it again okay so
the tenth Fibonacci number is 55 let's
try running it with something else like
xx xx fib number is six thousand seven
hundred and sixty-five okay so let's try
app putting it to a file so let's do 10
again but we'll do our to test dot txt
so our program executed now which should
be our to go vim test dot txt and we get
the number 55 has been outputted to our
file here okay so it's this and let's
try running it this time without the
output option but we'll put the I option
on fur to print out all of the numbers
up to that okay so we get 1 1 2 3 5 8 13
21 34 and 55 ok so that worked correctly
as fry it was a higher number maybe so
if we do filter out 20 as I did earlier
and there we go we get all the Fibonacci
numbers up to six thousand seven hundred
and sixty-five okay cool
now so why should we use this module
well op pass is great for streamlining
your program for professional use it's
easy to use and comes standard with
Python so it saves you time by
constructing help and usage with simple
expressions formats the help and usage
for command line output overall it
allows us to make dynamic changes to our
program operation by using simple
options and on execution some extra
things to note about our paths is that
the module can be extended by making a
subclass of our paths and adding your
own actions and inbuilt standard options
creating your own help output and
writing how the module deals with bad
input though extending of paths can be a
little difficult so most of the time it
can be avoided by using a callback
action the callback action allows you to
call a function if the option is
detected if you want to send arguments
to this function it becomes a little
more difficult
I recommend following the instructions
on the Pythons Docs that said a full
written tutorial is available on each of
our passes features and can be found in
the Python Docs a link will be in the
description I hope you now feel
confident enough to add a parser to your
programs and make it more streamline and
hopefully more dynamic next we are going
to cover regular expressions thanks for
watching</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>