<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Python Advanced Tutorial 7 - CGI Programming | Coder Coacher - Coaching Coders</title><meta content="Python Advanced Tutorial 7 - CGI Programming - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/DrapsTV/">DrapsTV</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Python Advanced Tutorial 7 - CGI Programming</b></h2><h5 class="post__date">2014-06-04</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/ELFdP7eEZ5w" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">welcome to Python advanced 7 CGI
programming in this video we'll be
looking at what CGI is and how we can
use to make our webpages talk with
Python every video have will have all
slideshows and code available in the
description
some quick preamble as this tutorial is
all about interfacing with webpages and
dynamically creating them knowing HTML
or at least a basic understanding of
HTML is necessary if you want to follow
along however in this tutorial I'll try
to keep it as basic as possible if
you've done any PHP before who will be
familiar with a lot of the concepts in
this video okay so what is CGI well CGI
stands for common gateway interface more
specifically it's the standard set for
HTTP servers to communicate with
server-side scripts this is things like
Perl or Python or even the output of a C
program this means we can write powerful
programs which interface with our
webpages or create dynamically changing
webpages we can also get data from HTML
form objects via post or get generally
CGI scripts going the web servers CGI
bin directory
with CGI scripts we can write pages to
change based on the users what the user
does or we can make paints pages to
change depending on what's happening on
the server powerful scripts like this
are the driving forces behind sites like
Dropbox Twitter and other big names to
be able to get our CGI to work we need
to have a web server to execute on
something our web browser can talk to if
you have your own web server that you
can tinker with and want to use that go
ahead make sure you have a CGI been
enabled and you should good to go if you
don't have a web server we can quickly
set one up on most Linux distributions
if you want to do this on Windows there
is plenty of guides on setting up a
simple web server ok so let's set up a
simple web server on Ubuntu Apache
should be on almost all Linux
distributions so let's install that ok
so I'll come across to Ubuntu now to
install Apache we need to be a super
user to install something so sudo apt -
yet
and we want to install apache2 now I've
already got it installed so it'll
probably tell me it's already installed
but once it installs the server will
automatically start up and be good to go
okay so now that that's done we can
check that our server is up and running
by opening up the web browser and just
going to the local address so 127.0.0.1
and it works this means that the web
server is up and running and it's
showing the default page that the web
server already has ready okay
so now that we got that up and running
we need to change the permissions so
that we can run a CGI scripts so to edit
the permissions we need to go to the
etc' directory under where apache 2 is
installed and change the default config
so let's sudo vim and we want to go to
etc' Apache 2 which is where Apache 2 is
installed by default and we want to go
to these sites
- available and inside here we want the
default config so it's just default now
if we open that up we should get the
default config and we need to edit this
so we need to search for the directory
VAR w w so this is the root directory of
our webserver now just to save time I'm
going to make it so that we can run CGI
scripts in our root directory but
generally you would add a directory in
here for the CGI bin as we got lower
here and allow that to execute CGI so
let's execute CGI in here so we need to
add the option e XC CGI o capital is
that CGI so execute CGI and then after
the allow from all we need to add the
handler so add Handler and needs to be a
CGI - script handler
and it's going to execute pi files now
we can save this and that will save the
config for our web server and now we
need to quickly restart apache - so it
loads the new config so sudo service
Apache to restart and that will restart
the server for us ok so finally on to
some code let's create a basic script
that just prints out that it worked and
then prints hello world five times we
need to make sure to put at the top of
our file where python is installed on
ubuntu by default it's installed at user
bin - okay so I'll come back over to
Ubuntu now now I'm going to change
directory and I'm going to change
directory to where the web server gets
all its files so by default that's bar
/ww okay so in this folder I'm going to
create a hello pi script so did because
this folder requires root access we need
to do sudo vim hello
pi ok now in this file we need to tell
the web server where Python is installed
so hash exclamation mark /user forward
slash bin or / - ok so now the web
server will know where pythons installed
we can start with that code so we need
to tell the web browser what kind of
content is coming so you need a print
and the content type so content - type
is tag
slash HTML and will do backslash R
backslash n backslash our backslash n
okay now we can start with our HTML so
print and we'll have our HTML tag and
oops and then we'll do another print and
this will be our head tag so head and
inside the head tags we'll do the title
sort of title and we'll make it my lips
my first CGI program and then we'll
close off the title and we'll close off
the head okay now we'll create our body
so print out body and we'll do we print
out of it works so print and we'll do a
paragraph and we'll say it works
exclamation mark and we'll close our
paragraph tags okay now let's add some
Python in here so we'll do for I in
range five simple for loop it will
iterate five times we will print out in
h1 tags so the heading tag hello world
and we'll close that off okay now we
will use the print statement again and
we'll end our body slash body and we'll
do another print statement to end our
HTML sub slash HTML okay so that's our
script complete so we'll save this
so we'll create a web page for us and
I'll print out hello world five times
after saying that it works now now that
we've created our script because this is
a root access directory we need to give
the web server permission to execute the
hello pi script so we need to give it
the execute permission so the sudo chmod
and we're going to give it with the
permission seven five five and that's
for the hello dot pi file and that will
change the permissions on the hello dot
pi file okay so now that we've created
our script we can open up our web
browser and we can call our scripts so
for - hello and we should get it works
and it prints out hello world five times
so cool
that'll work correctly okay so now that
we've built a basic script let's have a
look at the CGI module the CTR module
contains a lot of background
declarations and initializing so never
use the from command with the CGI module
just always use import CGI the CDI
module provides us with some easy to use
methods to get post and get requests
from the server the module also includes
other methods for passing and escaping
web characters so one of the great
things with CGI is getting form data
simply enough this VGA but the Python
CGI module handles both get and post
requests with the same method the CGI
dot fields storage method will turn a
field storage object that holds all of
the post and get data sent in the
request we can use the object like a
Python dictionary using field names as
an index or by using the getvalue method
if someone sneakily or you forget that
multiple fields have two names then the
getvalue method can crash your program
as it returns a list not a single value
alternative met
exists such as get first which will
return the first instance of the field
name and get list which will return a
list of data
okay so let's modify our hello scripts
to take the user's name from a post from
from a post and prints out hello to that
name we'll also add two checkboxes that
will ask if the user is happy or sad or
both okay so we're going to modify our
hello script so we come back over here
and we do sudo vim hello again
and this time we're going to after our
Python declaration we're going to import
cgi okay so now that we've imported CJ
let's let's change up a bit of our code
so what we'll do is we'll change put at
the top of our file a h1 of Hello
program so hello program and we're going
to grab the form data at the top here so
form equals CGI dot field storage and
now we're going to do a Python code to
get the form data
so if form dot get value and then we'll
use the name field so if that name field
has something in it what we're going to
do is we're going to set the variable
name to equal form dot get value of name
okay and then we're going to print out
in h1 tags so it's nice and big hello
plus name plus exclamation mark thanks
oops
thanks for using my script and then
we'll close our h1 tags and we'll add a
line break in there okay now we'll do if
form dot get value of happy because
that'll be what we call our check box
then we are going to print out in a
paragraph yay I am happy to and then
we'll close our paragraph and we'll do
another if statement so if form get
value is sad then we're going to print
out in a paragraph Oh No why are you sad
okay oh we need to end our paragraph tag
there we go and we can remove our for
for loop because we're not going to use
that anymore okay now we need to create
our form that this data is going to come
from so we'll create a print statement
and I'll use single quotes to open this
up and to form and the method
is going to equal post and the action
that it will take is it will call the
hello dot PI script so the current file
okay
I'm creating another print statement and
we're going to do 8p paragraph and there
will be name so for the name to be input
and then we'll do input type equals text
it's going to be a textbox and the name
of the input will be name so this will
be where we get the name from earlier
okay now we'll just quickly close that
and we'll close our P tag now let's
create another print statement and we'll
add our check boxes so in input type
equals check box and we'll take the name
and that equals happy and we'll close
that and next to it we will put happy so
the person knows what the check box
means that will create another now input
check box so input type equals check box
and the name of that check box will be
sad and we'll close that and we'll put
sad next to it
okay now let's close our form oh we have
to put a submit sorry so we need to add
our submit so the user can actually
submit it so input type equals submit
and the value which will be what on the
button is going to be submit and we'll
close that off then out we'll submit our
form now we'll close our form so print
slash form and that's our code done so
let's save this and now that's saved
I'll open up my web browser again and I
will call the hello and we get hello
program it asks for our name and it's
got some checkboxes so I'll put in traps
and I'll say that I'm happy I click
Submit and it runs our script and when
we get hello drops
thanks for using my script it says yeah
I'm happy too and we can enter in other
things so we do Fred and Fred sad we
submit and it gives hello Fred thanks
for using my script it says oh no why
you sad so cool that's all working
correctly we come back yeah some quick
notes to remember as the web server
doesn't know what to do in a program
crashes it can be hard to debug the
errors that might be occurring so
luckily there's a CGI TB module that
exists it stands for a CGI trace back it
simply captures all exceptions and
creates a nicely formatted HTML output
for the web server to display you can
set it up by importing CGI TB and then
using the method CGI TB enable most
people tell you to take it out when you
make your program live and running from
the public because it can give hackers
information on what's running in the
background however you can use the
optional optional arguments display 0
log directory to store all the errors to
a log file so you still see the errors
but the end users don't
and finally the escape method of the CGI
module will escape any of the HTML tag
and option symbols in a string I it's
good to use this when whenever you want
to sanitize user input so that if you
plan to print it back out the screen
they can't take advantage of your
website yeah I hope you now have an
understanding of CGI programming and how
it can be used with a web server to
process input and dynamically change
your web page feel free to leave any
questions in the comments and I'll do my
best to answer them next we're going to
cover database interaction thanks for
watching</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>