<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Hacking With Python #14 - Editing or Removing Meta Data | Coder Coacher - Coaching Coders</title><meta content="Hacking With Python #14 - Editing or Removing Meta Data - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/DrapsTV/">DrapsTV</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Hacking With Python #14 - Editing or Removing Meta Data</b></h2><h5 class="post__date">2015-11-06</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/1C5ZNtWc4_M" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">welcome to hacking with Python 14
editing or removing metadata in this
video we're looking at editing and
removing exif data from images I'll be
assuming you already have the basic
understandings of Python every video of
all slideshows and code available in the
description so what is metadata I went
over this last video but I'll repeal it
in case you missed it metadata is data
about other data in the example we are
looking at today it's information about
an image the metadata and images is
called exif data for exchangeable image
file format it is a standard for how
digital cameras can store image and
sound files exif data is stored in
tagged value pairs it's important to
note that only supported formats is
currently JPEG TIFF and WAV files in
this tutorial we're going to use the PI
exif to library to remove or edit exif
metadata i've been told that this
library is now abandoned for the Python
3 supported G active 2 library because
I'm more comfortable with the PI X of 2
library I'm going to be choosing it over
using the GX of 2 library for this video
they both work almost identically so why
might you edit or remove exif data well
perhaps you have possibly incriminating
information stored in the images
metadata this might be a time and data
photo was taken by you or a GPS location
that traces you to a place you're not
supposed to be or perhaps you want to
remove all exif data so there is no
information that may trace back to you
or you have a web service that stores
images uploaded by customers who may not
be aware that there is metadata in their
images or maybe you want to edit exif
information to be false or different
possibly even hiding more information
inside or purely to correct the exif
data that your camera with the wrong
date talk okay so how's it going to work
with the PI acceptor library we can open
an image file and read in the exif data
then we can modify any of the values and
save it or we can clear all the tags of
the metadata then write it back to a
file either updating the modified date
or even preserving the modified date
alright let's get on to writing our
program my vmware license is expired so
the video will be on Windows today the
script should work on
Windows and Linux using Python 2.7 first
let's install PI X of 2 all right so we
can go to the PI X of 2 website click
download and BB several packages and you
want to grab the ones for Windows grab
the required one for your version so the
latest one is zero point three point two
download it and then follow the
Installer all right I have already got
it installed so I don't need to do that
if you're on Ubuntu or on another
distribution you consider apt-get
install Python - X if - all right let's
get on to the writing now okay so i'll
come over to this empty folder here and
i've got our two images from the
previous tutorial so we've got this one
here of shanghai it's got metadata in it
we've also got the fireworks one that
has metadata in it so let's create our
files so we're going to make a new text
document and let's call it X if edit dot
pi yes we want to change it alright so
we've got our file let's open it with
notepad plus plus or you can use any
other text editor you like let's zoom in
a bit alright so the first thing we're
going to want to do is import arc pass
then we're going to import PI X of 2 and
now we're going to define some functions
so let's define a function that will
clear all of the metadata so go deaf
clear all metadata alright so inside
here we're going to take an image name
so that's gonna be the image name we're
going to remove all the data from and
we're going to take a boolean which is
going to be preserved
so this is will be if we want to
preserve the modified date all right
so inside our function we're going to
create our object that will hold our
metadata so we'll call it metadata
that's going to equal PI X 2 dot image
meta data and then we're going to pass
in the image name alright so now that
we've got our classifier our object
rather we're going to read in the
metadata for metadata dot read and then
to clear all of the metadata this is an
acts like a dictionary so do meta data
dot clear and then we can write our
metadata back out to files so meta data
dot right and we're going to preserve so
this will be our boolean so we're either
going to preserve or we're not going to
preserve all right that's our clear or
metadata function written let's create
our modify mode so we're going to define
modify mode and inside here we're going
to take an image name and preserve again
and this time we're going to write a
little bit of logics so first we'll
create our metadata object against the
metadata equals PI X Eve to dot image
metadata image name and then we're going
to read in our metadata so meta data
read and then we're going to print out
all the keys and values so that we can
see which ones we want to modify so for
key comma value in
data doc it's a items all right
so that'll go through the list we're
going to just easily print them out so
print key comma value dot raw underscore
volume so the raw underscore value is
going to be the value in which it's
stored inside the file so that way we
know how to modify it and put it back in
all right so once that's printed out
we're going to get the key that we want
to modify so we'll call it mud key
that's gonna equal raw underscore input
open brackets and we'll do key to modify
and then in some brackets we'll do
lowercase Q to quit all right so put it
close brackets in there and close off
our raw input I'll put a little colon in
there too so it's easy to read all right
so while our mod key access sorry
well not mod key is equal to lowercase Q
we're going to print out editing editing
and we'll add on the string of Maki so
actually we'll do the value so meta
editing metadata open square brackets
mod key close square brackets dot raw
underscore well you close off the
brackets
and then we want to run a we want to get
the value that we want to modify sorry
so we want this time we want to do mod
value and that's going to equal raw
underscore input and we're going to take
the new value and then we're also going
to do a lowercase Q for to quit all
right so now that we've got the modified
value we're going to do if mod value is
equal to lowercase Q then we want to
break if it doesn't if we don't want to
quit then we're going to set meta data
open brackets mod key and we're going to
make its dot raw underscore values
equal the string of mod value all right
so that will store our new value inside
of the value for our key that we want to
change all right now we can do our mod
key again at the end and get the next
key to modify so raw underscore input
and just the same as before it's our key
to modify in brackets
okay skew to quit right and then once
our while loop is complete and we're
ready to save our data we can do it our
meta data dot right and we're going to
preserve if that's what we pass in all
right so that's our modify mode written
that'll allow us to modify any of the
keys
I've got a spelling mistake up here
right quick okay so let us modify any of
our keys and set new values all right so
let's come back out and let's create our
main function so deaths main and we're
going to need to create our parser all
right so our parser object it's going to
equal our pass dot argument parser then
our parser we're going to add underscore
argument and the first argument is going
to be the image that we want to modify
so we want to always want to take an
image because we need to modify
something and it's help it's going to
equal going to be image file to
manipulate many late yeah all right then
we're going to do a parser dot add
underscore argument and this time we're
going to have a clear parameter and it's
gonna have a shorter version C - C and
its help is going to equal to clear all
meta data from the file from the file
close that string off and then it's
gonna take it's going to make the action
equals store and that's called true so
we do want to clear all of the metadata
all right so let's add our next
Parsa arguments o Partha dot ad and
scott argument and this one is going to
be - - preserve this is gonna be for
preserving the data so that's gonna also
have a shocker - p and its help it's
going to equal preserve image modified
date right and that's also going to
action equals store underscore true all
right so that's our arguments created
let me just bump this down a little bit
the next thing we need to do is pass out
Alex so we'll create a variable called
ogz it's gonna equal parser dot pass
underscore hogs and if hogs
IMG so we have an image and we're going
to continue with that logic but else if
there's no image we're going to print
the parser usage all right and if hogs
dot clear so if we want to clear all of
the metadata then we're going to run our
clear all metadata function and we're
going to pass in the Arg store image and
hogs dot preserve all right but else if
there isn't a hogs clear then we're
going to going to modify mode and then
we're going to pass in the Hogs dot
image
and the args dot preserve all right so
that should be it for our main function
now we just need to write out if so if
underscore underscore name underscore no
score is equal to underscore underscore
main Muskaan let's go then we're going
to run our main function
alright so let's say this and have a
quick look over to melt a little bit
looks like it makes sense alright so
let's open back up our folder you know
hold down shift right click open command
window here and we can give it a go so
let's exit edit pie and we want to open
up the image data to dot JPEG is the
most interesting one from memory open it
up and we get a list of all of the
different tags that are inside of this
image I'm going to scroll up and have a
look so here we can see we have the exif
photo tag and its current value with 0
so let's change that value to 1 to say
that yes the flash did go off in this so
we're going to want to modify the hex AF
dot is photo wasn't it photo dot flash
photo doctor flash and it's currently
editing it's value is 0 its new value is
going to be 1 and there we go so it's
been edited and now we can type Q to
quit and then we can run it again and
this time when we scroll up and have a
look you can see that them now the value
of flash is one cool so that worked
we can also preserve the date so if we
come back and have a look we can see
that data to last modified is today
however our data one hasn't been
modified so let's open that up but let's
preserve the date so let's go EXIF
we just want data dot jpg and we want to
- P reserved all right so now when we
run it you can have a look what do we
want to modify will modify the flash
again or is there a usually comment
there is a user comment now let's just
modify the flash it's easy to remember
so X F dot photo dot flash and set its
new value to one and then we can key to
quit and we open back up the folder and
have a look we can see that the modified
date is still the same as before
still ovary over a year ago or almost a
year ago okay cool
all right we can also clear all metadata
by using our - C command so we can have
our dead a JPEG and we could type C and
we could do - P as well so we want to we
want to clear everything and preserve
the date we can run that we don't get
any output because we're clearing all
the data and now every run it and we
open it up to have a look that will do -
P we can see there's nothing inside of
it then no list gets printed out we can
Q to quit open up our folder and you can
see it hasn't been modified but there
there's no more metadata left in it we
can see there's no author no title no
tags etc cool this concludes our
tutorial on editing and removing
metadata the next topic we'll be looking
at is sniffing pack us with SCAP e if
you have any questions leave it in the
comments and I'll try to answer it as
best as possible don't forget to
subscribe thanks for watching</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>