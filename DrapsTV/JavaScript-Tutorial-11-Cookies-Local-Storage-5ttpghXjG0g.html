<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>JavaScript Tutorial #11 - Cookies &amp; Local Storage | Coder Coacher - Coaching Coders</title><meta content="JavaScript Tutorial #11 - Cookies &amp; Local Storage - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/DrapsTV/">DrapsTV</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>JavaScript Tutorial #11 - Cookies &amp; Local Storage</b></h2><h5 class="post__date">2016-10-02</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/5ttpghXjG0g" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">welcome to JavaScript tutorial number 11
cookies and local storage in this video
be learning about how we can store data
over multiple sessions using both
cookies and local storage every video of
all slideshows and code available in the
description so what is a cookie cookies
are the strings that are stored in the
browser of a user is visiting your
website this is commonly used for
storing the session ID of a logged in
user so that when they return to your
website they are not required to log
back in each cookie is stored as a key
value pair so here I have a key as name
and a value as drops TV why do we use
cookies they hold information across web
pages there are also relatively simple
way to get persistent data between a
server and a browser you may never need
to have access to the data on the server
if all you do is build browser apps but
there may come a day where you need to
use session information on both in
general remembering a user's preferences
or that they are logged in or saved
something will greatly improve their
user experience with your app saving a
cookie is relatively straightforward the
special property called cookie on the
document object allows us to access the
cookie storage I call it a special
property because you can only store one
cookie at a time if you try to save more
than one they get ignored we use a
semicolon to separate cookie information
just expiry or path information if we
don't set an expiry date then the cookie
will be deleted when the browser closes
so you want to set it to sometime in the
future
alternatively if you want to delete a
cookie on purpose alternatively if you
want to delete a cookie on purpose
simply set the expiry to a time in the
past and poof it's gone I should mention
that on Chrome you can not use cookies
in local files so for the examples in
this video you'll need to use something
like Firefox I'm also fairly certain
that expires will be forced to the end
of the session while running as a local
file alright finally but importantly how
do we load cookies back in well it turns
out it's a little more difficult
and saving them when we grab the
contents of the cookie property the
browser gives us every key value pair
that is stored for the website so we
need to split it up with the semicolon
character and then split it again with
the equal sign to get the key and values
so we can grab the values we want out of
it hopefully in the example the code I
used to retrieve cookies will be as
simple to understand and reuse as
possible okay let's jump into it with
some hands-on experience there is plenty
of opportunity for cookies to go wrong
as we're dealing with strings and
pulling data from them let's just make a
test harness for saving two values as
cookies with expire ease and then
retrieve them back let's call it cookie
app dot HTML all right so I'm going to
grab I'll say my which one I'll grab the
add one I'm going to use this to the
template so I will say that as cookie
app all right so now that we've got our
file what I'm going to do is I'll just
remove everything from inside the script
section and I'm going to surround the
script in the head tags so I want to
make sure it's part of the head this
time
move my body down alright so now that
we're in the head I'm going to create
our fields that we want to store stopped
in so I'm going to have an input field
for unnecessary the user so the user and
the ID can be user and then I'll copy
this we're gonna have another field will
do the age and we'll call this um just
call this age it's easy enough then we
were button two gonna have two buttons
actually when I want to save and we're
not one to load so we'll have two
buttons
every one is save cookies
and we'll have one as load cookies huh
it might even be better to say save two
cookies and load from cookies because
we're actually setting fields as well
all right and I can remove the heading
there and I'll leave the output from I
doesn't use the tag to help all right so
we've got our harness here our template
we're ready to start writing our cookie
code so what I'd like to do is to make
it work like an associative array for
each of my cookies so bar my cookies and
this is going to be an associative array
that I just store my cookies in alright
so now that we've got this global array
that I can use to save my cookies I'm
going to create a function to save
cookies and a function to load cookies
so function I'll call it save cookies
and this is what our saved the cookies
button is going to call and the first
thing I want to do is say my cookies
open brackets and I'll do an underscore
user so this is going to be the key that
I used to save my username and that's
going to equal the document dot get
element by ID and we want to grab the
user element and we want to grab the
value out of it all right and I'm going
to copy that line I'm going to also grab
out my age and I might call it day you
age so my user age and we're going to
grab that out of the age field or the
hid all right so we've grabbed our two
things put them into the associative or
associative array and now what I'm going
to do is I'm going to the start this
section of reusable code
all right so inside this sort of section
here what I'm going to do is set the
document dot cookie so whatever is
already inside the cookie I'm just going
to get rid of at least like a key string
and what I'm going to do is set up my
expiry so bar expire code expires date
I'll call it action so it's my expires
attribute and that's going to equal a
new date and we're going to use the date
of now plus 60 times 1000 so I'm going
to save it for 60 seconds on top of now
dot two string all right so now that
we've got that all set up we've got our
expires now we're going to set up our
cookie string so this is going to be
what we're going to use to store each
cookie so call it cookie string equals
an empty string and now I'm going to
write a for loop so for and I'm going to
loop over the VAR key in my cookies so
this way it doesn't matter what how many
things I've got inside my cookies I'm
going to store all of them and inside of
app for loop scroll down a bit I am
going to set my cookie string to equal
key plus open quotes equals so the equal
sign plus my cookies open brackets the
key to pass in so it's going to grab the
value out of my associative array and
store it with the key and then I'm going
to add on to the end open quotes
semicolon close quotes plus the expires
attribute
Plus and I'll add a semicolon on there
but it shouldn't matter whether it's
there or not all right so we've got our
cookie string now we need to save it to
the our cookies so document dot cookie
equals our cookie string and that will
save that cookie and that'll loop over
each one of our values inside my cookies
and save it out and then we'll slash
slash and that's the end of the reusable
code all right so now what we're going
to do is I'm just going to set our
document dot get element by ID and our
app - it's in HTML and it's going to be
equal to document dot cookie so we can
see that it's working all right so
that's our saved cookies function done
let's write our load cookies so now
we're going to write another function
that's going to be our load cookies and
inside here we're going to a similar
thing except we're going to be pulling
it out so we're doing a start reusable
code and what I'm going to do is I'm
going to create the my cookies
associative array or empty it if there's
something already in there and then I'm
going to set the kv-4 key value so this
is going to be our key value pairs it's
going to equal document dot cookie so
I'm going to get the cookie string and
then I'm going to split it so split
function on the string and I split up by
the semicolon all right so now we've got
our key value pairs that'll be our say
underscore user equals whatever I
username was that was inputted right
user what we're going to do is we're
going to iterate through each of those
so for bar in
bought bar ID sorry so the ID is just
going to be our key in our kV so you
know inside of our key value pairs what
we're going to do is we're going to set
and bar cookie equals the key value pair
open and the ID and then we're going to
split that with the equal sign all right
so that I split it out so now we've got
a cookie which has a zero element which
is the key and the one element which is
the actual value so now what we're going
to do is want to set my cookies so our
associative array we're going to pass in
the cookie with 0 so that's our key trim
because we want to trim off any white
space that might be in it because we
can't have that announcer in our key
otherwise it will just won't won't work
how are we expected to and then we're
going to make that value make that key
equal out cookie one so the sex second
half on the right hand side of our equal
sign so we're going to pull that out and
we're going to set it back inside of our
my cookies associative array all right
so now we can end our reusable section
of thread there so what we're doing is
we're pretty much rebuilding all of our
cookies in our associative array so now
what we can do is our document what we
can do is just come up here and grab our
how valued and instead of making our
cookies equal to it what we're going to
do is do it in the reverse order so our
user value equals the my cookies user
and our document value of age equals my
cookies you age all right so we're just
reloading everything back in all right
so
I said let's save that and let's give it
a shot and see if it works and see if we
hit any errors which is quite likely
cookie app let's drag it into our
browser
got our user and our age so I'll type in
drops and how old am i I guess 25 saved
cookies OOP looks like we may have an
error because it's meant to print out
what our cookie string is so if we right
click inspect element have a fare
console or we've got we haven't set up
our functions we'll come back here we go
so save two cookies we want to run our
save two cookies function and for our
load cookies we want to load cookies all
right so let's save that and it's come
back and refresh all right so if we
saved cookies we get our cookies that
are saved so user equals drops and our
you age is 25 now we reload the page and
everything disappears and we clear out
the values the browser just kept that if
we load from cookies we get our values
back so if we keep refreshing we remove
our values we refresh local cookies it's
still there
awesome so we managed to get a working
cookie example without too many errors
awesome all right now what is local
storage local storage was introduced in
HTML 5 as the replacement for cookies
for client-side applications it works
just like a JavaScript object or
associative array however it persists
over multiple sessions the downside is
that servers have no access to them
meaning we can't use them to remember
users who are logged in an important
feature to remember is that local
storage lasts forever unless the user
manually removes them or the browser is
uninstalled so how we use local storage
is as simple as a JavaScript object the
local storage object is a persistent
object and is always available some
older browsers won't support it though
that shouldn't bother us there are three
functions that we can interact with set
item get item and remove item though
it's usually easier to access the
properties directly
if you want to remove everything you
have stored
you can either iterate over each key and
remove it or you can use the associative
array function clear okay let's give it
a go this time we're going to modify our
original cookie code to use the local
storage instead let's call it local app
HTML all right so what I'm going to do
over here is I'm going to come back to
our cookie app and I'm going to save it
as and I'm going to call it our local
app all right so I've got a new copy of
it called local app now what we're going
to do is we're going to redo our script
section but this time using local
storage so I'll remove the my cookies
associative array we don't need anymore
and I'll rename our save function to
save values all right so instead of
grabbing out putting it into our
associative array what we're going to do
is put straight into our local storage
so local storage so our local storage
with a capital S dot and I'll save it as
underscore user as can i grab our user
value and I'll do a local storage dot
underscore u age to save our user H all
right and then we don't need any of our
our cookie code we just need our local
storage so let's just cut that down to
two lines there and I'm going to remove
all of our cookie code from load cookies
and have it as load values instead and
instead of grabbing it out of an
associative array we're just going to
grab it straight out so what we can do
is copy and paste this line go back just
like a JavaScript objects we can save
that and I'm just going to rename our
function it down here make sure it calls
them correctly and we're going to save
to local storage and load from local
storage state that
all right so that's already cut out a
whole page down a whole bunch so we'll
save it come over and we'll drag our
local app inside of our web browser it
looks very similar and put you type in
our local storage some perhaps age Sam
22 this time we'll save to local storage
and we can clear it out
and load from local storage and we grab
our values back out refresh the page
River values refresh the page load from
storage and we get our values back
awesome super simple session storage is
almost identical to local storage
however it only lasts until the tab or
browser is closed
this can be useful if you're storing
large amounts of data that you only need
to cache while the app is in use this
concludes our look at cookies and local
storage in JavaScript next we'll be
looking at creating and using anonymous
functions and callbacks if you have any
questions leave it in the comments and
I'll try to answer it as best as
possible don't forget to subscribe
thanks for watching</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>