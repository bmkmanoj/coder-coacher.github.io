<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Python Advanced Tutorial 4 - Regular Expressions | Coder Coacher - Coaching Coders</title><meta content="Python Advanced Tutorial 4 - Regular Expressions - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/DrapsTV/">DrapsTV</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Python Advanced Tutorial 4 - Regular Expressions</b></h2><h5 class="post__date">2014-03-14</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/hiDg2TFYL9E" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">welcome to Python advanced for regular
expressions in this video we'll be
looking at what regular expressions are
how to construct simple patterns and how
to use those patterns in our Python
programs every video have all slideshows
and code available in the description so
what is a regular expression regular
expressions or regex for short is a
pattern matching language formalized by
Stephen Kleene in 1950s with this
description of regular language these
expressions are used to search text to
find single words or words that follow a
set of rules today most programming
languages support regular expressions
and those that don't usually have a
library that can be used to implement
them an expression is built with a
string of characters they are built
using two types of characters meta
characters which have a special meaning
and regular characters that have their
literal meaning the special meaning
characters are things like square
brackets and the regular characters are
things like the letters a B or C it can
be pretty simple to pick up basically
regular expressions however some more
advanced expressions can be very hard to
understand and construct now I won't go
into too much detail on how regular
expressions work because the algorithms
are going out of the scope of this
series there's a few different
algorithms around three that are used
for regular expression evaluation
however the most common and fastest is
the DFA or deterministic finite automata
or automaton algorithm if you like maths
feel free to look into the mathematics
behind this concept if you're going for
efficiency in your program then it may
be handy to know that the DFL DFA
algorithm takes Oh 2 to the M time to
construct the expression where m is the
length of the pattern but then it takes
o n time to search where n is the length
of the string being searched here we can
see a few of the basic media characters
that we can use in our regular
expressions the dot or period symbol is
used to match any single character so
for example the expression dot eighty
would match strings like cat hat and Sat
the square brackets represents single
character that is inside square brackets
so the expression open square bracket CH
close square bracket 80 would match the
strings cat and hat but knots at the
square brackets with a caret the little
up arrow thing will be any single
character that's not inside the square
brackets
so the expression open square brackets
caret C close square brackets would
match things like hat and Sat but not
the word cat the caret character by
itself will only match if the matches at
the start of the string similar to the
dollar sign which will only match if the
matches at the end of the string the
parentheses or Circle brackets will
allow for sub expressions to be used
inside an expression and the star symbol
will match the preceding character zero
or more times so for example the
expression C dot star will match any
string starting with C so cat coat or
clasp okay so we have two basic methods
to our regular expressions in Python
these are match and search match will
check to see if the expression matches
the entire string that it's handed
whereas search will check to see there's
any match anywhere in the string it's
important to keep this in mind when
you're choosing which one to use
okay so let's write a small program to
test that we can get regular expressions
working using match and search when we
create a pattern to avoid confusion will
tell Python it's a braw string by giving
it a string and our prefix so our open
quotes the pattern then close quotes
okay so let's create our Reg test pi
file so I'll come over to you on to you
um film reg test but PI
okay so we'll just write a simple test
program so it'll just be a string and we
just check for a word in that string
okay so we're going to import our
regular expressions so import re and
that's stands for regular expressions
now we'll define our main function to
the DEF main and inside our main we're
going to create a string variable called
line and we'll make that equal to I
think I understand
regula yep
regular expressions and now let's create
our regular expression
okay so we'll create a match result so a
match result so this will be the result
from our regular expression I'll make
that equal to a regular expression got
match and we're going to look for the
expression are open so it's a raw raw
string and we're going to look for the
word think so we're going to look for
any match of distinct and then we're
going to look for it in the string Line
which is the string we just created
before and we'll give it two flags which
I'll talk about a little bit later so
we'll give it REM and then the big bar
line so that stands for piping and the
re dot I flag and that's our match
regular expression done now what we're
going to do is going to go if match
result so if it was successful then
we're going to print out
that there was a match found capitalized
matched found and will add on what the
result resulting match was so our match
result dot group so that we'll get the
first group match which will be if there
was a match found for a match function
now else so if it didn't find a match
then we'll print out no match was found
okay now we'll try our search results so
we'll try a search so search result
equals re search this time so using the
search method and we'll pass it a raw
string again and our expression will be
think so it'll search for the word think
and we're going to look for it in string
line and we'll give it the same flags as
before so REM bar re dot I close and
we'll create our if statement again so
if search result then we're going to
print out that we found it so found oops
search found and I'm going to add on
search result is so search results dot
group okay and then we're gonna have an
else so if it didn't find it in the
search they were going to print nothing
found in search
and now we'll write out if mein so if
I'm just going to underscore name scan
school is equal to underscore underscore
main then we're going to run main okay
so let's let's save this alright quit
and now let's give it a try so python
reg test dot pi and we get no match was
found and such found think now this is
because if you remember our match will
only match if it if the thing is
matching the whole string that it's
given
whereas search will search for think
anywhere inside the string which it did
find the think the second word in the
expression writing the screen okay so
i'll put this and we'll come back to the
slideshow okay okay so now that we've
tested and we have our regular
expressions working let's make a more
useful program to use our new knowledge
will create a command line program that
will look up a word in a text file and
print out the line it was in it will
take two arguments one the word we're
searching for and the text file to
search through so let's create a a
program called lookup pi so i've come
back over to ubuntu now and i'm going to
create a new program should we called
look up dot pi okay so what we're going
to do is we're going to import opt pass
as well so we're going to import regular
expressions so re and we're going to
import opt pass and we'll define our
main function
def mean
and we'll create a parser for a help
pass so parser equals opt pass dot
option parser get parser and then our
usage usage sent program hmm
and then we go now run a dash W for the
word and we want a dash F for the file
to search close that up now let's add
some options so our parser dot ad
underscore option and got our W option
and our destination for that will be a
variable called word and type of that
word is string so type string and the
help will be specify a word to search
specify a word to search for okay
and our second option so parser add a
score option and this will take dash F
is the option and the destination will
be F name for the file name so the F
name and then the type is also a string
the file name and the help would be oops
help will be specify a file to search
okay
so added our options set them up options
and hogs is equal to parser dot path and
let's go args
okay so if our options dot word is equal
to none so they didn't give us a word or
our options dot F name so the file name
equal to none so they didn't give us a
file name then we're going to print out
the usage so print parser dot usage and
then we're going to exit with system
code 0 but if they did give us so else
we're going to set a variable called
word to equal to options word and we're
going to set F name to equal options dot
F name ok so now in our program we're
going to create a our search file so
search file equals open and we're going
to open FM so the file that they want to
open and we'll create a variable called
line num and we'll set that equal to 0
so it starts at line 0 and we'll create
our 4 so for line in search file
such file dot read lines we are going to
line dot line equals line strip and
we're going to strip the backslash n
character as well as the backslash R
character so it works but on
cross-platform and we're going to
increase the line um so line num is a
plus equal to one so it increments by 1
and we're going to get our search result
now so search result equal to regular
expression search and we're going to
search for the word in line with the
flags REM bar re I okay now we'll check
if our search is successful so if search
result so there was there was that word
located in that line then we're going to
print a string of line num so the line
that it was on plus I'll do a colon
there close quotes and then plus the
line that it was in and that's our
program complete so now we'll just write
out if main so if I'm just going to a
name - gonna stall is equal to I'm just
gonna scope main then run main okay so
that's our program written so we save
this and we run it so Python look up dot
pi
- word so I haven't got anything
prepared so what I'll do is I would look
through our code files so the word we'll
look for would be domain so we'll look
for the word main so that should appear
three times in a standard Python code
file and the file will search through
will search through reg test which is
the one we just created earlier so two
reg tests PI and research we get line
three
we've got def main line 18 we've got if
name is equal to the main and on line 19
where we call main so as you can see
it's worked correctly we've searched
through a file and found the word that
we're looking for and you use any word
and yeah so cool so hopefully that will
work fine and now we have a program
within such files with okay so you may
have noticed that at the end of our
matching search methods we had a field
with something like REM line re dot i
these are called flags we can use flags
to alter how that regular expression is
run this is useful to make our
expressions smaller and easier to use
you may not always want to use them
however especially if you're especially
designed to be really strict the flags
we use used earlier was insensitive case
search so even if the words had capitals
it would still find it and the new line
separator which allows the carrot and
dollar sign to match the end and start
of a new line rather than the start and
end of the string search and replace is
also a handy feature to use sometimes
Python implements this with the sub
method short for substitute the sub
method takes a pattern the replacement
text and the string to replace in there
is also an optional parameter to set the
max amount of replacements to make by a
default it's set to all instances found
of the matching text do you think you
could alter the lookup program to
support replacing
okay so why should we use regular
expressions
well because sometime in your
programming career you'll have to search
through texts or strings and there's no
point reinventing the wheel regular
expressions run quite efficiently and
are about as good as it gets in the
amount it gets at the moment for
searching strings the most programming
languages use the same standard regular
language so understanding what patterns
do and how they are constructed will
prove useful for reading expressions as
well an extra thing to note about
regular expressions is at the time to
evaluate the pattern so the back end bit
before it can search takes longer than a
longer time the more characters in the
pattern so if you're planning on using
the same expression more than once
I suggest compiling the pattern first
and then using that object to match and
search so for example my red equals re
compile and then a pattern then we can
use that to match and search with so my
reg match and then the string we want to
search and that will give us back our
result I hope you now feel confident
with how to go about adding regular
expressions to your Python programs next
we're going to be covering threading
thanks for watching</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>