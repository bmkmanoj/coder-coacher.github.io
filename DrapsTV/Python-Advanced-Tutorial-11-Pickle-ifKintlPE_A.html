<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Python Advanced Tutorial 11 - Pickle | Coder Coacher - Coaching Coders</title><meta content="Python Advanced Tutorial 11 - Pickle - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/DrapsTV/">DrapsTV</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Python Advanced Tutorial 11 - Pickle</b></h2><h5 class="post__date">2014-07-18</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/ifKintlPE_A" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">welcome to Python advanced 11
serialization with pickle in this video
we'll be looking at using pickle to dump
objects to a file every video will have
all slide shows anchored available in
the description what is pickle pickle is
the standard package that comes with
Python it gives the functionality of
pickling and I'm pickling objects in
Python pickling is the process of
converting a Python object hierarchy
into a byte stream to be written to file
or even a socket this is more commonly
known as serialization however to avoid
confusion the process is called pickling
I'm pickling is the reverse process of
turning a byte stream back into a Python
object of the same state it was saved in
the standard library also comes with a C
counterpart called C pickle and can be
up to 1,000 times faster so what can
pickle do pickle is able to store and
reproduce dictionaries and lists as well
as lists that have references to other
objects pickle can also store object
attributes and restore them back to the
state they are in before
what can't pickle do it's important to
realize that pickle doesn't store any
code from an object it will only save
the attributes values pickle also cannot
store attributes that are file handles
or sockets anything that is an open
handle but there's a way to work around
this which I'll talk about a little bit
later also it should be understood that
C people cannot be used if you want a
subclass Pickler or unpick Allah let's
quickly have a look at two methods we'll
be using the method dump will save the
object it is given into a file stream
you provide it there is also an optional
algorithm argument for the protocol most
of the time you can leave this empty
however used negative one if you want to
use the highest protocol to save any
objects or lists that have references to
other objects or lists there is also the
load method which takes a file stream to
load from it will then create an object
and return it so let's create a program
called pickling pie we'll use this just
to simply see how pickle can dump and
load dictionaries and lists so we'll
create a dictionary
the list and then dump them to a file
will then load them back into new
objects and see if they're the same so
I'll come across to Ubuntu and we'll
create our our pickling dot pie so then
pickling dot pie and we're going to need
to import pickle okay
so once I've imported pickle we're going
to create our dictionary so call it
dipped one and we'll make that equal to
dictionary that has a and that
dictionary you can have value 100 and
then we'll do be B and then I can have
200 and then we'll have C which you can
have 300 and then we close that off and
we'll create our list so we'll call that
list 1 I will make that equal to 400 500
and 600 and then we'll close that off
and print them out so we can see them
come out the screen so print dipped 1
and we'll print out list 1 now we need
to create our our file stream so output
equals open so we're going to open up a
file and we'll call it save one dot PKL
for pickle just so we know what type of
file it is and we're going to open up in
write binary I have to make sure you
open up and write binary otherwise it
won't work and now we're going to dump
out our two objects our dict 1 and our
list 1 so pickle dot dump and we're
going to dump dict 1 into the file
stream output and we'll call pickle
again dot dump
and we're going to dump list 1 into
output output and that'll dump them out
to file now if we close our output
stream so output close have to make sure
we close it so that it saves the file
and then we'll print out a little dash
dash dash dash dash so we split the two
halves of our program and we'll create
an input file and that will equal open
and we'll open up our save one again so
we save one got pkl and this needs to be
in read binary and we'll create object
dict 206 2 and that's going to equal
pickle load and we're going to load from
the input file and then our list 2 is
going to equal pickle dot load input
file so our input stream okay and now we
need to close our input file so input
file close and we'll print out our dicta
2 in our list 2 so print dipped to and
print list to and that's our example
program written so we'll save this and
we'll give it a run so python pickling
dot pi and as we run it you'll see up
i've got miss a spelling mistake but
you'll see it printed out our first
dictionary and our list i'll go back in
there and fix that up so we're about to
have that heart we go I need to fix this
up so list one and I'll just save this
again
and run it again and as we get we get
our list our dictionary and our list out
and then we split our program and then
we load it back in and we get our
dictionary again and we get our list ok
so that worked that worked successfully
we'll come back over to SlideShare we
can also save objects of our own custom
classes we can then load saved objects
of that class into any of our programs
so long as people can access that class
file so make sure that the class for
that object is in the same directory as
your program or installed to the Python
Lib directory so let's get back to some
more code let's create a custom class
called player in that class we'll sort
an ID name health and list of items that
the player has will then save that
object of the class player using pickle
and load it back in into a separate
object so let's call the player class
file player PI and we'll call our
program savedata pi so I'll come back
over to Ubuntu and them and player dot
pi and I'll go it with capital P and
inside our player class file we're going
to define our class player and in our
player class we're going to have an
initialization method so def and it's
got underscore in it underscore
underscore and it'll take itself ID the
name help and a list of items ok now we
need to set up our attributes so self
dot ID equals ID self dot name equals
name self dot health
equals help and self dot items equals
items okay
and now just so we can see that our
players been loaded in and it's all
successful we'll create a two string
function so def underscore underscore
STR for string and it's got underscore
and that will take itself and we will
return and we'll just print out each of
its values so my ID plus string of self
ID plus I'll put a backslash and move it
down to the line and then we'll put a
space but don't really need a space
which is a backslash n my name and then
we'll output the name so plus self name
plus backslash come around the next line
backslash n my but I didn't put a space
that's my name let kept sewed my health
and we'll put plus the string of self
dot health plus one more backslash and
on the next line I have our backslash n
again and it'll be my items and we'll
print out our items a plus string of
self items oops
items and then we'll plus a little full
stop on to the end just so we know it's
done okay now that's our player class
written we can save this and we'll be
able to import it and now we'll create
our save data pay so BIM save data dot
pay and we're going to need to import
pickle so import
pickle and then from player we're going
to import player now we'll create our
list of items so items equals we'll just
say I know axe and sword and maybe a gun
so these are the items that our player
has and then we'll create our objects so
my object is equal to each player and it
will give it the ID one the name Jeff
and we'll give it health 100 and we'll
make it a double and we'll give it the
list of items okay now we can print out
our object because we created a string
function so print my object and then
what we're going to do is we'll use the
width command now and with open and
we'll open up save to pgl this time
because we've already got a save one and
we need to open that up in write binary
as out file and we're going to use
pickle dot dump and we're going to dump
my object and into out file okay and
we'll print out our little dashes again
so we know that we're split the program
and what we're going to do is we're
going to set our new object so we'll
just create an object we'll set it to
none you don't even have to set it to
none you can just create it when we load
it in but I'll just create it here and
then with open and we're going to open
up save to dot pko in read binary
as in file and we're going to set our
new object to equal pickle load and
we're going to load from the in file and
that will load our object in and now we
can print it out so print new object and
that will call the string function of
that object which we created earlier and
we'll see that all works so I'll say
this hopefully I made any mistakes and
we'll Python how save data dot pay and
we created our player class with ID 1
named Jeff health 100 and the items axe
sword and gun and then we save it to a
file and then we load it into a new
object and we get my ID 1 name's Jeff
health is 100 and the list of items and
it's all worked correctly cool so when
we look in the directory we've got our
pickling files so let's open up our
player pickling file and we'll see
what's going on so this is in it's very
basic protocol so you can see that it's
an instance of player so we'll try and
load in a player class if we can access
it if it can't access a player then
it'll error and then it has its list
first and it has the list of items and
then it has its health which is saved as
100 it's ID which is saved as 1 its name
which is saved as Jeff and that's all
that it could had to save and that's how
it knows how to load it in and if we
look at our saved one that we created
you see that we have our output 1 which
is ABC and that's got its values and
then we got our list of the second one
and it's got its values 400 500 600 cool
so that's all done
some extra notes our pickle is
cross-platform so you can save an object
on Linux and load it up in Windows but
pickle her is known to have issues with
different versions of Python so try to
keep the same Python versions if you use
the dump function more than once on a
file stream you must use the load
function just as many times to pull the
data out and finally never trust pickled
data from an untrusted source malicious
objects can be pun pickled using the
standard library as a weapon against you
I've created a video on how to use
pickle to save the state of an open file
handle we will create a program that
searches the contents of files in a
directory and its sub directories for a
word or regular expression I'll cover
how to use the get state and set state
methods of a class to save file handles
I hope you now have an understanding of
how to save Python objects to fail feel
free to leave any comments in the cotton
the comments section and I'll do my best
to answer them if we're going to have an
overview look at pi win32 next as
suggested by G cookie thanks for
watching</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>