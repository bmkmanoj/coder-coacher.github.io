<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>XSS Tutorial #3 - Persistent Scripts | Coder Coacher - Coaching Coders</title><meta content="XSS Tutorial #3 - Persistent Scripts - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/DrapsTV/">DrapsTV</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>XSS Tutorial #3 - Persistent Scripts</b></h2><h5 class="post__date">2015-01-26</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/F3e1zGh3sro" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">welcome to XSS tutorial number three
persistent scripts in this video we'll
be looking at what persistent scripts
are and what happens when our scripts
are permanently on a website every video
will have all slideshows and code
available in the description as you can
probably guess by now a persistent
script is one that persists on a website
usually this is by having the malicious
code stored in the website's database
having your code permanently on the
target website would be your ultimate
goal when working with cross-site
scripting I feel like it's worth talking
about now that you can store your code
at another web location this is good for
input fields where the number of
characters is limited the script tag
allows you to link to a javascript file
using the source attribute alright
finding inject locations finding inject
locations is something that you pick up
over time and when you start to
understand more about web back-end so
try to think about if the website will
ever have to put your text that you
entered back out onto the screen chances
are that the text will be stored in a
database or perhaps less likely a file
so think about things like comments
submission forms contact forms posts
uploads etc just imagine if you were
conducting a pen test and you managed to
inject the script into a ticket system
that didn't sanitize input you may have
a cookie stealer that gets you the
session key for the employee or admin
account that checks ticket all right so
let's give it a shot this will be very
similar to the previous tutorial except
our script will get stored in the
database we'll try our normal alert
access and then we'll try a redirect
attack the new index dot PHP file will
be available in the slides and files
folder alright let's come over to the
web browser where I've got my tutorial 3
and we've got a leave a comment box so
try my new comment website so you can
leave a comment we can submit the
comment and at the moment it has no
comments and we got a little debug
button down here to clear the table if
we want to start over again so let's
leave a simple comment like wow this is
a cool website and we hit comment and
you'll notice that you now get a comment
down the
and we can if we go to the website again
we can see that the comment stop is it
persists ok let's try our simple alert
so we're going to put in the script tag
and we'll do alert XSS and we'll close
up the script tag and we'll put it at
the start we'll put in like a cool side
and when we hit comment you'll notice we
get the pop-up saying xs/s okay okay and
you see we've got only the cool side
shows up the code that should be here is
invisible to the user alright cool so
we've got a comment and we've got a
second comment that has cool side
let's try leaving a third comment this
time we'll do a redirect so we'll go
your site has a problem and then we'll
put in our script tag and you'll know in
JavaScript we can use the window
location variable to redirect the
current page that we're on so we go
window dot location equals and English
in quotes so I'm going to use single
quotes here we type in our web location
we want to redirect the person to so
let's do HTTP four slash forward slash
and we'll do WWL comm and how about we
send them to a search so search question
mark Q equals so you know this is the
search query for Google and we can type
in what we wanted to search for them so
we'll do what plus is plus XSS and then
we'll close off our quotes all right so
that's how redirect done let's close our
script tag so we didn't break the
website close off our script tag and we
can hit comment and you'll notice we get
the pop
as the JavaScript is executed from top
down in the code so you can see that
it's only loaded the first two and we've
already got our JavaScript pop-up and we
hit OK we get the redirect and it
redirects us to Google search and we've
got the what is XSS and you'll notice
that the the top view are like some
pretty popular cross-site scripting
websites cool so the only way to fix
this is to go back and this will take us
back to the previous state as you can
see we haven't actually entered in the
script yet but it is still there so if
we were to get rid of our index dot PHP
and hit go at the top you'll notice that
we get the XSS pop up and we get the
redirect happens cool so we want to go
back and we're going to hit the Clear
table button and this is the only way we
can get rid of the code that we entered
cool so you can have a muck around with
this and it will store all of the
commands that you put in into the
database cool yeah so let's move on now
let's quickly talk about responsible
disclosure some companies allow you to
pentest their website slash applications
providing you follow the terms they
provide usually this is through
responsible disclosure responsible
disclosure is a computer security term
describing a vulnerability disclosure
model all people and companies involved
agree to allow a period of time for the
vulnerability to be patched before
publicly publishing it some companies
provide what's called bug bounties in
which they reward you for your
responsible disclosure of a bug exploit
or vulnerability cool the next thing
we'll be looking at is making our
attacks more useful with some malicious
attacks you have any questions leave it
in the comments and I'll try to answer
it as best as possible don't forget to
subscribe thanks for watching</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>