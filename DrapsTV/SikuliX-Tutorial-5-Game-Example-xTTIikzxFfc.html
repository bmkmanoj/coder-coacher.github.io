<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>SikuliX Tutorial #5 - Game Example | Coder Coacher - Coaching Coders</title><meta content="SikuliX Tutorial #5 - Game Example - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/DrapsTV/">DrapsTV</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>SikuliX Tutorial #5 - Game Example</b></h2><h5 class="post__date">2015-11-24</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/xTTIikzxFfc" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">welcome to the coolie axe tutorial
number five game example in this video
we'll create a simple automation script
that will play the game clicker heroes
I picked this game because it's smaller
download on Steam or you can play it in
a browser it's also fairly simple to
understand the basics
everybody have all slideshows and code
available in the description before we
start it's important to talk about the
low level interaction functions physical
the X this is important because we need
to click faster than the click function
can but we may as well look at what
other low level functions are available
Mouse down which will click down the
specified button mouse up whichever
button is specified will unclick the
button or if no button is specified
we'll unclick all buttons mouse move
will move the mouse to a specified place
in a pattern or a location or
alternatively a specific place from its
current position specified as an x and y
offset wheel will scroll the mouse wheel
at a specified pattern or location
either up or down and takes the number
of steps on the mouse wheel to scroll
key down works just like Mouse down
however you can also put a list of
buttons to press down at a time key up
optionally takes a key or list of keys
if none are specified all keys are
released it's important to keep in mind
the automation is a very iterative
process you'll often have to tweak and
pull your script in different directions
to combat unforeseen issues such as a
tooltip that appears after the mouse has
been hovering over a button may throw
your image recognition off the key thing
to remember is don't get too annoyed if
your script doesn't work first try or
even on the tenth try all right let's
get into the example we won't be
spending hours on this script so we'll
only automate three aspects of the game
clicking the monsters upgrading heroes
and moving on to the next zone all right
so let's come over to clickers and have
a look at how it works so this is the
basic game that starts when you create a
new game of clicker heroes over on the
right here we have the little monsters
that we can click and do damage to and
you click them and their health goes
down and when they die you pick up gold
you can spend that gold on upgrades
which is your heroes over here on the
left which will more will spawn and you
pretty much just continue clicking over
and over collecting
Gold and then spending that on your
heroes
so I'll kill five here and we can see
that an upgrade becomes available over
here and you can click on that and it
will upgrade and then you start doing
more damage so now I'm going to damage
per click and this continues until all
of the monsters in the zone have been
killed so here we have 8 out of 10 9 8
out of 10 10 our town area complete so
you can continue killing things here if
you want or you can move on to the next
zone the next is owned provides stronger
enemies and more gold drops so you
continue collecting gold and leveling up
your heroes this continues on over and
over and as you can see it's quite a
repetitive task thought up continue
until all of the enemies in the zone are
killed alright and then we can move on
to the next zone so you notice that when
there's enemies in a zone that need to
be killed there's this little skull icon
here with a 0 to 10 which will come in
handy for knowing one way we can move on
to the next zone so in a zone where
we've completed there is no skull and
when we can upgrade the icons are this
light blue over this dark blue alright
so now that we know how it works
let's give it a reset and we'll start
running our script for it all right cool
come over to see coolie okay the first
thing I want to do is I want to make it
so the mouse has no move delay so we're
going to go settings dot move mouse
delay it's equal to zero point zero so
there's no delay and I'm going to create
a running variable which I'm going to
tie to a hotkey again just going to be
for when our script is running so it's
going to be running equals true with the
capital T and I'm going to create some
variables to keep track of things that
are happening in game so let's have a
II should click for so this is going to
be the number of clicks to do before we
check if there needs to be any upgrades
done let's have a should should upgrade
so this is going to be equal to true
when we want to upgrade so by default
that will start off as false because
there isn't anything to upgrade when the
game starts and we'll have a variable
called time to dead which will keep
track of how many upgrades that we can
do before we can't do any upgrades so
this will keep track of
Loosli keep track of how fast we're
killing things and whether we should
move up to the next area okay and we'll
start that off with zero all right so
now let's define our hotkey callback
function so def run hotkey and we pass
in the event and we want our we want how
global running and we want to set
running to equal false the capital F
okay now we've created our callback
let's add a edit to our hotkey
environment so E and V dot add hotkey
and we're going to the key dot f1 again
same as last time and our key modifier
it's going to be control again it's easy
to use and then our function so run
hotkey ok so now that we added that
let's get our clicker heroes window so
to do this we're going to use a new
function called switch app so that
returns the window so I'm going to call
it CH is going to be a click a hero
window it's going to equal switch
Capital a P P so switch app and that
will change color inside the IDE and
we're going to search for the app
clicker heroes I believe it's called so
the name of the window so it's called
clicker heroes with a capital C and age
and has a space in between
alright so clicker space heroes close
quotes alright so now that we've
switched to the app we can do a while
so while our CH click layout clicker
heroes dot has window so while there's a
window visible for clicker heroes and
we're running then we're going to repeat
our code alright so the first thing we
want to do is we want to click because
the game revolves heavily around
clicking that's the first thing we want
to do so we'll do if should click for so
our variable four is greater than zero
so if there's clicks that we still need
to do then we're going to hover actually
what we'll do is we'll just click the
hover button so you can click this hover
button here and we want to hover over
something that we can use to click on so
we want to click on these enemies here
but this ground changes and if you
remember when we're clicking for between
three before the ground changes to
different patterns so we can't really
pick anything on this ground here and we
could try the health bar but the health
bar also changes so what's something
that doesn't change in this area well
we've got the mute button down here so
if we have it as unmuted or muted we can
keep it muted and select this area here
is unchanging throughout the whole
entirety of the game so we'll click this
area and then we'll offset it from there
and click here on the screen and we'll
we'll see how that goes now so we want
to hover once there's a select an image
so let's drag it over our mute button
there we go now what we want to do is we
want to check its similarity and set its
target offset so open it up go to our
matching preview and we can see it's
matching twice down here so we want to
bump up our similarity is make sure
that's only being shown once yep there
we go
so I've got to add a value of 86 percent
similarity hit apply I'm going to go to
my target offset and as you can see
we're zoomed in in high detail down here
at the button we'll just zoom out with
the scroll wheel and we want to click on
the enemy so we want to click around
here so a massive offset from our button
but we know that this button never going
to move or anything like that so it'll
always click on the enemy hit play okay
so now that we've got that set up we're
hovering over the top of our enemy so
now that our mouse is hovering over the
top of the enemy we can start clicking
so while should click for is greater
than zero and and running so we're going
to use outrunning the bailout if we're
mid clicks we are going to Mouse down
with a capital D the capital B button
dot capital L EFT so we're going to
click down the left mouse button and
close off our brackets then we're going
to mouse up our left button so button
dot left and left is all in capitals all
right so now that we've clicked the
mouse down once and lifted the mouse
button up we can say that we've clicked
once so should click for can now - equal
one so we're going to remove one from
the total amount of clicks and that will
allow our while loop to end all right so
outside of that
while now we're going to go all the way
back to our first if line and this time
we're going to do our time to dead check
and whether we should move on to the
next area so if time to dead is greater
than or equal to two so if we're able to
upgrade twice without missing an upgrade
in a click cycle and not exists and the
thing that we want to check if it
doesn't exist we'll take a screen shot
off I'll close open up those brackets
and close them and yeah thing we want to
check for is that skull so we're going
to take a screen shot we're going to
pick the skull and because the
backgrounds can change we're going to
try and stay inside the confines of the
skull and get enough detail that we can
pick it out later on so now I've got
this little image of the skull here we
want to make sure that we definitely
have the skull so we're going to check
its similarity matching preview and we
can see it's showing up a couple other
times Steven getting picked up here
against a coin so we want to boost up
that similarity to maybe something
around 88 percent play okay and we don't
need to do anything about its offset
because we just need to know that it
exists all right so now that we've got
that if statement we can do our colon go
down to the next line and now we want to
click the next next area so we're going
to click and the next area appears next
to the center of our current area so
something that doesn't change is this
our over here on the right so you can
pick this and come into our arrow here
make sure we check its matching similar
similarity and it's picking up the other
direction as well so it's through setup
so it's only getting the one side heard
about 85% play
offset and we'll zoom out again with our
scroll wheel and we want to pick the
next zone along from our current one so
we want to click in this empty space
here apply ok so now we've got our click
setup so this will click and move this
on to the next area
when we move on to the next area we want
to make sure we set our time to dead
back to zero equals zero and that'll
move this up to the next area when when
there's no enemies left to kill in this
area alright so we'll come back to our
first F line again put a little bit of
white space in there make it a little
bit easier to read if and we're going to
do our exists for an upgrade now so
before our upgrades we had a check that
had just had to be a highlighted blue so
we're going to need to play our game a
little video we'll click on it a few
times get our first upgrade available
all right so there we go we've got our
upgrade available we can now try and
match that so if exists in our little
screenshot here and we want to select
our capture a bit of this and we don't
want to get the coins because the coins
will change so let's get this edge here
we got our little blue section here and
we if it does exist we want to make sure
our sim similar similarity is alright we
open that up up we've got a few matches
going on so let's boost it up a bit to
let's say 80 88% play ok so if that
exists then we want to set should
upgrade to equal true so we're now
setting our should upgrade to show and
once we know that we should upgrade
we're going to click so I'll hit the
click button going to click up oh bugger
that up by hovering my mouse over that
and delete that out if you want to click
the Upgrade button so we want to select
the same image in probably copy pasted
that actually I might do that in fact Oh
copy paste how image from up here paste
that in so we save up on space make sure
it matches correctly yep and we want to
set a target offset somewhere in the
middle button make sure that we were
hitting it all right so we're clicking
our upgrade so that'll upgrade and we
want to set our time to dead 2 plus
equals 1 so we were able to upgrade
successfully and there wasn't any missed
upgrades so we plus that up 1 then we
want to set our else clause for this if
statement so else :
if the pattern was to not exist for the
upgrade then we want to tell it to
either set the time to time to dead
equals 0 if there was no upgrade if
there upgrade does exist at some point
then we want to set our clicks back up
and set our upgrade to false
alright so if not should upgrade so if
it didn't exist after doing a spout of
50 clicks then we want to set our time
to dead 2 equals 0 so we failed to
achieve an upgrade in the amount of time
while clicking and we'll set our should
upgrade to equal false after that so
there wasn't any upgrades existing so
you want to set it to false then we want
to set our should click for to equal 50
again so back up to clicking 50 times
all right so this should be enough for
us to
seeing how things are working so let's
save this I'll call it click click click
save so we're going to click on the
enemies until there's none left in the
zone or until there's upgrades available
and let's give it a shot so it's all
saved let's run it and we'll start
clicking will do it's fifty clicks and
it might lose a few clicks here and
there I just purely because of its
interaction with the game and then we
upgrade hope looks like we've got a
similarity issue and it's trying to
upgrade things that aren't upgradeable
so let's control f1 and have a look at
what it might be
okay so the issue was that the image
that I was trying to find was too
similar to the unselected image so let's
save this I just freaked recapture the
image using a little bit more of the
background so let's give this a shot
instead
so every run should click and once it's
done it's clicking we should upgrade
should upgrade again as it's still one
available nope decided to go back to
clicking must have missed it when it was
doing its calculations then it's
clicking the area is complete doing
upgrades upgrades are all done should
move us to the next area which it
already has done and starts clicking
again cool so we've got a kind of
working now it's clicking and it's doing
its upgrading and going back to clicking
once there's no upgrades to do and
moving on to the next zone there's still
one problem with our bot currently that
it will probably fall on its head in the
next area or possibly on the next on the
level 10 zone and this is because every
five levels in click here is there's a
boss which is a timed clicking event
which means our bot needs to be able to
kill it quick enough to be able to move
on to the next zone and if it doesn't
the real kit would keep repeating the
same thing over and over again which
will get us stuck in a loop where we
can't win so we're gonna have to build
that into our system so as you can see
there the timer going down now in the
middle of the game and we're not doing
enough damage actually we might actually
be doing enough damage to beat it this
time however as you can see the time is
going down and we're running out of time
and if we don't get to kill it in time
which
he probably won't help times up it keeps
repeating over and over again I'm going
to get stuck in a loop so we need to
combat this so when there's a boss
visible we need to make sure that we can
go back to the previous level if we
haven't upgraded enough all right so
let's end our script here there we go
and we need to put in a boss check so
I'm going to come up to the top here and
create another another variable called
boss and boss is going to start off
equaling false and down the very bottom
when we're checking up the after no
upgrades exist and we're checking if we
should click again we're going to put a
check in to make sure there's no boss or
there is a boss we should click for
longer or go back to a previous level if
we're not able to kill it quick enough
all right so if exists actually will use
the exist but again so we want exists
screenshot and then we want to capture
this clock here so we want to try and
stay inside the the the edges of the
clock and keep enough detail that we can
match to it so I've got our clock so if
the clock exists it does now matching
preview it's pretty similar I'll just
buff it up just just to make sure put it
around 90 percent play okay so if it
exists and it's not currently boss then
we want to set a should click for for to
equal 150 clicks so three times the
normal amount which should be enough to
take out a boss in terms of ratio and
then we're going to set our boss
variable to equal true with a capital T
alright then we want an L if so else if
exists how
boss timer so we're going to get our
boss timer and it's similarity so else
that exists then we want to do our I'll
go back a level so if we're unable to
kill the boss and we've run out of
clicks then we want to go back to the
previous level to get stronger so we're
going to click and we want to copy our
click from before where we're clicking
on the next zone so we can copy this
whole line actually come down to where
we're clicking and this time we want to
just change where the target offset is
so instead of clicking on the right hand
side we want to click back on the left
to go back a level hit play okay so once
we've clicked then we want to set boss
to equal false so we're no longer on the
boss level we're in the previous zone
all right so this should keep going over
until we get strong after defeat a boss
so let's save this and we'll come back
to clicker heroes and we'll go back to
the previous zone then we'll run our
script so we'll hit run this should
start clicking
and once it's it should upgrade and then
we should move this up to the next level
she'll be a boss level it should at
least obvious are its upgrades won't be
stored enough so we need to get two
upgrades in a row of clicking before we
can go up to the next zone so that'll
upgrade and it should take us up to the
next zone because we didn't fail yep and
we're on a boss zone it should be
processing that hour on a boss we want
to click 150 times so it'll start
clicking
and we defeat the boss this time we
continue fighting it on the next turn
get all our gold it will try upgrading
and should move us on to the next zone
should we have failed it however it
would have moved us back to the previous
zone up how does it move this up to the
next zone because we haven't gotten to
upwards in a row so this may pose a
possible issue depending on hope we're
going back a zone so the things that
we're not fit enough to move on hope
we've got an achievement getting
stronger move back up to the boss
anyway you start to get the point and it
should continue to repeat this process
until you move through the game cool so
I ended here and that's our script
completed awesome okay that's it for
this series I encourage you to explore
the documentation if there's a specific
task you wish to complete mystically x
and you're not sure if the feature
exists I wish you well with your
newfound automation power if you have
any questions leave it in the comments
and I'll try to answer it as best as
possible don't forget to subscribe
thanks for watching</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>