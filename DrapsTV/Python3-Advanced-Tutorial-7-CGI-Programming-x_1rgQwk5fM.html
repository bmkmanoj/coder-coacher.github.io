<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Python3 Advanced Tutorial 7 - CGI Programming | Coder Coacher - Coaching Coders</title><meta content="Python3 Advanced Tutorial 7 - CGI Programming - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/DrapsTV/">DrapsTV</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Python3 Advanced Tutorial 7 - CGI Programming</b></h2><h5 class="post__date">2015-06-25</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/x_1rgQwk5fM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">welcome to Python 3 advanced 7 CGI
programming in this video we'll be
looking at what CGI is and how we can
use it to make our webpages talk with
Python every video have all slideshows
and code available in the description
some quick preamble as this tutorial is
all about interfacing with a web page
and dynamically creating them knowing
HTML or at least a basic understanding
of HTML is necessary if you want to
follow along however in this tutorial
I'll try to keep it as basic as possible
if you have done any PHP before you'll
be familiar with a lot of the concepts
in this video ok so what is cgi well CGI
stands for common gateway interface more
specifically it's the standard set for
HTTP servers to communicate with
server-side scripts this is things like
Perl or Python or even the output of a C
program this means we can write powerful
programs which interface with our
webpages or create dynamically changing
web pages we can also get data from HTML
form objects via post or get generally
CGI scripts go in the web servers CGI
bin directory with CGI scripts we can
write pages that change based on what
the user does or we can make pages that
change depending on what is happening on
the server powerful scripts like this
are the driving forces behind sites like
Dropbox Twitter and other big web names
to be able to get our CGI to work we
need to have a web server to execute on
something our web browser can talk to if
you have your own web server that you
can tinker with and want to use that go
ahead make sure you have CGI been
enabled and you should be good to go if
you don't have a web server we can
quickly set one up on most Linux
distributions if you want to do this on
Windows there's plenty of guides and
setting up a simple web server ok let's
set up a simple default web server on
Ubuntu Apache 2 should be in almost all
Linux distributions so let's install
that first we're going to need to
install Apache 2 so I'll come over to
Dante and we need to install a patch too
so do that we do sudo apt that - get
install app at look patchy - hit enter
it'll ask if you want to install it yes
and this will install apache2 to the
default directory of /e TC 4 / apache2
once this is installed it will
automatically start up and be rollin we
can test out the server and make sure
that's running by visiting it in our web
browser so now that that's done I'll
come over to the web browser
and we can visit our web server by
typing in 127.0.0.1 for the loopback
address and we hit enter we should get a
default page so there we go we've got
the default Apache to Ubuntu default
page cool so our servers running but now
we need to setup the permissions so our
server can execute CGI scripts for
simplicity I'm going to set it up so we
can execute scripts in the root
directory usually you would set up a
separate directory for just CGI scripts
okay so to edit the default permissions
we need to change the config so we need
to use our super user because it's in a
restricted folder we're going to souter
them to edit with and it's located
inside the Apache folder so etc' /h e -
and inside the apache 2 folder we're
going to a subdirectory called site
those sites sorry
- - a bailable and we're going to use
the 0 0 0 - default dot Kampf and when
we open up that we'll see we get this
big conflict valve is full of hashes and
ignored lines now we want to come to the
line where we've got the document root
as VAR /w for slash HTML what we're
going to do is we're going to remove
that HTML and we're just going to use
the document root as var /ww and now we
need to set up a directory permissions
so for this we're going to use the less
than simple direct three and inside
directory we're going to set up /var /ww
4 - that's our directory and when you do
a closing greater than sign you'll
notice that it turns a different color
cool now we need to a closing tag with
this so open up brackets forward slash
directory and close it off ok now on the
inside on the inside we need to set up
the options so the options we're going
to allow it to execute CGI we're going
to allow it to run indexes we're going
all-out to follow sim links and we're
going to allow multi views all right set
up options now we need to allow set up
our overrides so allow override and
we're going to allow none alright now
we'll set up our allow denies so our
order is allow deny and we're going to
allow from all alright and one final
line we're going to add our handle for
CGI scripts so add handler CGI
- script and we're going to enable dot
PI files Python
alright so that's a config edited we're
going to write quit and now we need to
quickly restart the web server so to do
that we'll do sudo service
Pachi to restart we enter it'll say it's
restarting the web server and then once
that's restarted we're ready to go
cool it'll give that a clear and we
should be good to go okay finally under
some code let's create a basic script
that just prints out that it worked and
it prints out hello world five times we
need to make sure to put at the top of
the file where python is installed on
ubuntu by default it's located at /user
/bin for such python alright and let's
create our file so to vim and we'll call
it a hello dot pi alright now what we're
going to do is we want to tell it where
python is so we'll do a hash hook do a
hash and then an exclamation mark and
then we do /user /bin fold slash python
and i'll put up three on the end there
just to make sure that it uses three all
right now to get things to output on a
throw CGI script we need to print them
out to the standard output which is then
sent to the web page so it's print and
we need to tell it what kind of content
that it's expecting so we're going to be
writing an HTML so the content we're
going to provide content - type : text
forward slash HTML and then we'll just
add a couple of back slash backs our
backslash n backslash our access end
just to make sure that it's at the top
of the page and spread out alright so
once we print that out we can start
right now HTML so let's do another print
and we'll do the HTML tag and we'll do
the body tag and we'll just keep that in
turn print there and then we'll print
out that it worked so we'll use a h1 tag
h1 it works
exclamation mark and then we'll do a
closing h1 and then we'll do our for
loop so we'll do for I in range 5 and
then we're going to print out hello
world so print out in h2 hello world
cool now we can also add in our normal
variables here like we would in a normal
Python program
so let's output the current iteration in
for loop so we'll do string of I add it
on to the end and then we need to
remember to put our closing tags so
closing h2 and then we'll close off the
print and then we'll do one last print
statement which will be closing our body
so slash body and slash HTML cool and
that's our program written so let's
write quit and save this and now we need
to make it so that we can execute it so
we need to change its permissions so do
that we're going to a sudo chmod and
we're going to set permissions to 7 5 5
4 execute read and write and it's 4
hello hello dot pie
now that was set its permissions we can
copy it into a web directory ready to go
so we're going to do CP to copy we're
going to copy hello pie into our web
directory which was forward session bar
forward slash www forward slash and once
that's copy
we need to do one last thing and that is
to enable CGI on our server so to do
that we're going to do sudo a to N and
that's en so a 2e n mod CGI and that's
going to run and it's going to set up
our CGI on a server make sure that it
will execute cgi files and then we need
to restart our service so sudo so this
sudo service
Pachi to restart and once that's
restarted we should be good to go so
we'll clear this and come over to our
web browser and we're going to do out
127.0.0.1
/hello dot pi i run that there we go
it works hello world 0 our hello world 1
hello world to etc cool so we've got our
cgi working and we've got a basic script
executing and writing elsa running out
of a CH tml file awesome
now that we've built a basic script
let's have a look at the CGI module the
CGA module contains a lot of background
declarations and initializing so never
use the from command with CGI always
just import CGI the CGI module provides
us with some easy to use methods to get
and use post and get requests from the
server the module also includes other
methods for passing and escaping web
characters so one of the great things
with CGI is getting form data simply
enough the Python CDI module handles
both get and post requests with the same
method the CGI dot fields storage method
will return a field storage object that
holds all of the post and get data sent
in the request we can use the object
like a Python dictionary using field
names as an index or by using the get
value method if someone sneaky or you
forget that you name two fields the same
name get value can crash your program as
it returns a list not a single value
alternative methods exist such as set
first which will return the first
instance of the field name and get list
which will return a list of data
okay let's modify a Hello script to take
the user's name from post and then we'll
print out hello to that name
we'll also add two checkboxes that will
ask if the user is happy or sad or both
okay
so we'll come back over to Bunty okay so
you want to open up our hello dot pi and
the first thing we want to do is after
our first line where we tell the web
server where python is we want to import
cgi okay note we've imported cgi let's
start editing the inner workings of our
script so we'll change our heading for
the page to hello program and then we'll
remove our for loop so we get rid of
everything inside of our for loop okay
so you've got a bit of space here now we
want to create our form object so to
form equals cgi
dot filled storage with capital F in a
capital capital S alright so once we got
the field storage we can start doing we
can start using the data inside so we're
going to do if form dot get value and
we're going to get the value of name and
we're going to print out actually we're
going to set a value a variable called
name and that name is going to equal
form dot get value and we're going to
get value the name so if it does exist
then we're going to grab it from post so
once we've got it we can print it out so
we'll print and will do it in H 2h to
actually do H one keep everything nice
and large and easy to see h1 hello space
close off our quotes add in the name
open quotes exclamation mark space
thanks for using my script and then
we'll close up our h1 tag and then we'll
line break for a bit of extra space so
BR all right I mean close off that print
now we'll do another if statement so if
form dot get value and this time we'll
use the value happy for the happy chap
checkbox and let's print out we'll print
out in a paragraph that yay
I'm happy to do and let's also do
another line we'll do an if form get
value and we'll do it for the sad
checkbox now we'll call it sad I'll do
print another P Oh No why you sad and
then we'll close off that print cool now
that we've set up all of our form
handling let's create our form so we'll
come down and we'll do a print and we
need to open up our form tags so open up
our form tag we're going to set its
attribute method to equal post and it's
action is going to equal hello dot pi
all right and we'll close up our form
opening tag and close up our print I'll
do another print line and we'll do a
paragraph to name colon space and then
we're going to put an input field in so
input and the type is going to equal a
text and we're going to set the name of
the field to name so we can use it later
right I'll do a forward slash and
closing a closing tag and then we'll do
a closing paragraph as well alright it
will close up this print and we'll do
another print and this one is going to
be our check box this time
so our check box is going to be an input
open tag input
the type attribute is going to be equal
to check check box and we're going to
set the name to equal happy as that's
what we're using a CGI script and then
we'll do a closing tag and we'll set the
text next to it to be happy so the user
can see all right the next print
statement and this one will be our sad
check box so same as the line before
it's check box and the name this time is
going to equal sad look sad and the text
next to it is going to be sad all right
and then we're going to do one last
print actually the printer my prints to
make it look nice and we're going to do
our clothes sorry our submit button so
input type equals submit the value
equals submit all right we can close
close that off
and our final print we close up at form
so we'll do a closing formed all right
so that's our script written so we
create our form down here so if there's
no if there's no field data they'll just
be a blank lines above the form but if
we do submit a form and there's data
it'll print out the name and whether
they were happy or sad ok let's save
this so right quit and we'll copy it
across so copy it to our directory
however come back over to our script and
we refresh so you see we get our hello
program we can type in our name so we
could all do drops
and let's say I'm happy I hit submit we
get hello drops thanks for using my
script and it's J I'm happy too and you
can use this as many times as you want
though so my name is Josh I'm sad submit
hello Josh thanks for using my script I
know why you said cool some quick notes
as the webserver doesn't know what to do
when the program crashes
it can be hard to debug errors that
might be occurring luckily the CGI TB
module exists
this stands for CGI trace back it simply
catches exceptions and creates a nicely
formatted HTML output for the web server
to display you can set it up by
importing CGI TB and then using the
method CGI TB enable most people tell
you to take it out when your program is
live and running for the public because
it can give hackers information on what
is running in the background however you
can use the optional arguments display
equals zero and log der to store the
errors in a log file so you still see
the errors but the end users don't and
finally the escape method of the CGI
module will escape many of the tag and
option symbols in a string it's good to
use this to sanitize user input that you
plan to print back out to the web server
otherwise some crafty people might
insert their own nasty things into your
scripts I hope you now have an
understanding of CGI programming and how
it can be used with a web server to
process input and dynamically change web
page feel free to leave any questions in
the comments and I'll do my best to
answer them next we're going to cover
database interaction don't forget to
subscribe thanks for watching</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>