<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Python3 Advanced Tutorial 11 - Serialization with Pickle | Coder Coacher - Coaching Coders</title><meta content="Python3 Advanced Tutorial 11 - Serialization with Pickle - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/DrapsTV/">DrapsTV</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Python3 Advanced Tutorial 11 - Serialization with Pickle</b></h2><h5 class="post__date">2015-07-25</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/BbRY9gsKA7Q" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">welcome to Python 3 advanced 11
serialization with pickle in this video
we'll be looking at using pickle to dumb
objects to a file every video up all
slideshows and code available in the
description what is pickle pickle is a
standard package that comes with Python
it gives the functionality of pickling
and unpicking objects in Python pickling
is the process of converting a Python
object hierarchy into a byte stream to
be written to a file or even a socket
this is more commonly known as
serialization however to avoid confusion
the process is called pickling unpicking
is the reverse process of turning a byte
stream back into a pipe an object of the
same state it was saved in the standard
library also comes with the transparency
counterpart that will be used if
possible and can be up to a thousand
times faster so what can people do
pickle is able to store and reproduce
dictionaries and lists as well as lists
that have references to other objects
pickle can also store object attributes
and restore them back to the state that
were in before
what can't pickle do it's important to
realize that pickle doesn't save any
courage from an object it will only save
the attributes values pickle also cannot
store attributes that are file handles
or sockets anything that's an open
handle let's quickly have a look at two
methods we'll be using the method dump
will save the object it is given into a
file stream you provided there is also
an optional argument for the protocol
most of the time you can leave this
empty however you must use the highest
protocol to save any objects or lists
that have references to other objects or
lists there is also the load method
which takes a file stream to load from
it will then create the object and
return it all right
let's create a program called pickling
GUI will use this to just simply see our
pickle canned dump and load dictionaries
and lists so we'll create a dictionary
and a list and then dump them to a file
then we'll load them back in into two
new objects to see if they are the same
okay
so we'll come across to Ubuntu here
right so then pickling dot ty first
thing we're going to do is import pickle
then we'll create our dictionary so
dicked one look tipped one equals open
curly braces do a and I can have a value
of 100 and we can do B I can have a
value of 200 and then we'll do C with a
value of 300 and then we'll close that
dictionary off now let's create a list
the list one equals and then we'll put
400 500 and 600 I'll close that off all
right so we got two lists we can print
them out instead of print dipped one
print list one and then we need to open
up a file handle so we're going to
output equals open and we can do say
save dot P kale or a pickle file the
save one save one for pickle and it
needs to be in write binary I'm going to
close that off now we can just use
pickle dump so pickle got dumped dict
one into output and we'll use pickle dot
highest underscore protocol all right
now we can do it again pickle talk dump
and we can dump the list one output
I missed easy on the line before as well
and we're going to use the highest
protocol again so pickle dot highest in
the school protocol coop and we'll print
out a
Dashie line so you can see where we're
separating and then we'll get our input
file so input file equals open oh I
forgot to close our output file output
dot close okay now opening up our input
file where you saved it in to save dot
pkl and we're going to open it in read
binary and then our dicks too so our
second dictionary an equal pickle got
load input fun and then our list two can
equal pickle dot load input file all
right so now that they're loaded back in
let's print them out so to print dicks
to print lists - all right so that
they'll file written let's write quit
and save and we can quickly open up our
save about what actually one second
we'll just run it so Python 3 pickling
dot pie we run it up we've got an error
oh because they named it safe one didn't
I I scroll down yeah save one I quit
we'll give it another shot and there we
go we get the same methods back out okay
now we can even them and open up our
save hopes save one dot pko and as you
can see it's stored in gobbledygook and
pulled back out
cool right we can also save objects of
our own custom classes we can then load
saved objects of that class into any of
our programs so long as pickle can
access that class file so make sure that
the class for that object is in the same
directory as your
or install it into the Python Lib
directory all right back to some code
let's create a custom class called
player who will store an ID a name
health and a list of item that the
player has then we'll save that object
of class player using pickle and load it
back in into another separate object all
right let's call the class file player
dot PI and the program saved out of pie
all right so we'll come back over to
going to you and vim and we're gonna
call our player PI capital P and this is
going to have a class player and we'll
define its underscore in it underscores
law which will take self ID name health
and the items all right our self dot ID
equals ID self dot name equals name self
dot help he goes health and self dot
items equals items all right and I'll
just make its capital ID all right so
we've created our initializer the
function will define our two string now
so that we can easily print it out so
string it's going to store self and it's
going to return my ID
plus the string of ID self ID plus
backslash to go down next line on mid
string backslash n my name plus the
string of self name plus this backslash
and another line and you want backslash
n again and we'll do my help and we'll
just go through an output each of the
values and finally the items so then my
items plus string of self items and then
we'll add a full stop on to the end okay
that's our class ridden we can save that
right clip and now let's create our
saved data file so save data dot pi and
then the first thing we want to do is
import pickle and then from player
import player all right now let's set up
our items list so items equals and we'll
do an axe and a sword and eight gun
alright now we'll do we'll create my
object so my object is going to be a
type player so play
player and we'll give it the ID one the
name Jeff and health 100 to zero with
items all right so we created my object
and we can print it out so print my
object and now we can save it so what
we'll do is this time we use the with
command open it up so with open save to
dot pko in write binary has app file
we're going to pickle dot dump my object
so our player object into out file and
we're going to use pickle dot highest
underscore protocol all right then we'll
do a print line - II think so we can see
a separation and let's load it back in
so we'll call our new object and we'll
make it start off as a nun type then
then with open save - dot P kale in read
binary as in file we're going to set new
object to equal pickle load in file so
we're going to load our player from our
in file and now we can print out our new
object and see how it goes so it's right
click and save this
let's give it a shot so Python 3 save
data dot pi hope we got an error
Oh PI foot to put a plus in there what's
wrong about a plus in here there we go
all right quit let's give it another
shot save data what loads not up didn't
put a dot again oops
oh come on file and click setup and
hopefully this should work fighting 3
save data we say that our player 1
called Jeff with 100 HP and he has an ax
a sword and a gun then we load in our
new object and we get all of our
character data into our player cool so
that all worked some extra notes pickle
is cross-platform so you can save an
object on Linux and load it up in
Windows but pickle is known to have
issues with different versions of Python
so try and keep the versions the same if
you use the dump function more than once
on a file stream you must use the load
function just as many times to pull all
of the data out and finally never trust
pickle data from an untrusted source
malicious objects can be unpick 'old
using the standard Python libraries as a
weapon against you I hope you now have
an understanding of how to save Python
objects to file feel free to leave any
questions in the comments and I'll do my
best to answer them this brings the core
section of the advanced series to an end
more topics may be added at a later date
don't forget to subscribe thanks for
watching</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>