<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Alternate Data Streams on Windows (NTFS) | Coder Coacher - Coaching Coders</title><meta content="Alternate Data Streams on Windows (NTFS) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/DrapsTV/">DrapsTV</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Alternate Data Streams on Windows (NTFS)</b></h2><h5 class="post__date">2016-01-07</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/qBrFW3gpjpM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">welcome to a discussion video on
alternate data streams in this video
we'll be talking about what alternate
data streams are why you should know
about them and how they work if you'd
rather just jump straight into our
hands-on example click the annotation on
screen or click the link in the
description for my alternate data stream
tutorial a slideshow will be available
in the description why do you need to
know about alternate data streams
perhaps you want to hide files from
anyone who might have access to your
computer
incriminating information or just
information you don't want others
reading or possibly you're a computer
forensic scientist and you are searching
for hidden or incriminating files on an
obtained hard drive or maybe you just
want to expand your knowledge and are
interested in the kinds of things you
could do with your computer so what are
alternate data streams or ATS for short
an alternate data stream is a
substructure of the Microsoft NTFS file
structure introduced when Windows NT was
released alternate data streams were
originally intended to store Macintosh
files Windows NT was designed as a
server managed operating system meaning
the server would allow people to log in
and have access to their own drive and
network drives but Microsoft knew that
companies would also have Macintosh
computers and also wanted to be able to
store Macintosh files on the server
because Macintosh files were separated
into two parts a data part and a
resource part which would contain
information about the file due to
Windows remaining friendly to interact
with the file system these extra data
streams are hidden from almost all
Windows applications so what can we do
with them inside an alternate data
stream you can store any type of file
that could be stored in a default host
data stream for example text image video
or even malicious code you can also
store files inside a folders data itself
normally a folder is just an icon to
take you into the next directory however
a folder is actually a file on an NTFS
data structure however the default data
stream contains a bit of data that tells
Windows this is a folder - this
directory location which means you can
store data in its alternate data streams
if this is a little confusing that's
okay because thinking about alternate
data streams is something that you may
only be learning about for the first
time in the example video that goes with
this video we will store some data in a
folder you can also modify our
files metadata or summary data as
Microsoft calls it such as author title
etc finally you can use it for denial of
service attacks you may ask well how
does that work
I thought denial of service for the
server thing where a server can't handle
your requests
it's well understood that a full
harddrive can't store any more data so
it tells you sorry can't say that here
I'm full hard drives can sometimes begin
to perform terribly when they are full
especially if they're large there is no
limit to how much data can be stored in
an alternate data stream so you can fill
up an entire hard drive with data in an
alternate data stream in the next slide
we'll see why this is so devastating the
interesting thing about alternate data
streams is that their file size is not
included in the file size shown by
windows that's correct
our denial of service will fill the hard
drive and the usual have no idea where
the large file taking up their hard
drive is you may have a one kilobyte
text document but hidden in an alternate
data stream is a 12 gigabyte 4k video
another very interesting trait of
alternate data streams is that does not
change their files checksum a checksum
is usually an md5 or sha-1 hash of the
files bytes but checksum tools
ignore alternate data streams so you
could place malicious code in an
alternate data stream and not have the
original checksum be changed something
to keep in mind when working with
alternate data streams is many formats
and tools will ignore alternate data
streams compressing your file with a zip
raw or arch will only compress the hosts
file
other encouraging Slyke base64 used in
things like email will lose the
alternate data stream upon sending also
keep in mind the other hard drive
formats like fat32 will lose alternate
data streams all right on to the
exciting part how does one access them
on a standard Windows machine it only
comes with two ways to access alternate
data streams notepad and type in
addition you must know where the
alternate data stream is stored to
access it windows by default cannot
detect or delete alternate data streams
that you can create the only way to get
more power over the alternate data
streams is to use a third party
application windows provides two system
functions for programmers to access data
streams which can be used to search for
stream
but for now let's just look at how we
can access them right now if we only
want to write text we can use notepad to
access the data streams you use the
command line pattern notepad the Hearst
file name : the stream name if you want
to move an image or a video or
executable into an alternate data stream
we use the command type like so type
input file name greater than the host
file name colon and then the stream name
in order to get it back out you just
reverse the order of the input file and
the alternate data streams so here's a
more clear example of us accessing an
alternate data stream called hello dot
txt stored on the host file called
readme.txt if you give this a shot
notepad will ask you if you want to
create this file you want to answer yes
then you can save anything you type like
you would a normal nor pet file you can
then access the file again by repeating
the above command let's create a
scenario here to talk about a possible
use okay let's say I'm an employee of a
movie production company let's call it
Sani I'm a little disgruntled and I
didn't get that promotion after I
dragged the project over the finish line
and saved the day
lucky for me I know a little bit about
alternate data streams and I want a leak
at a new movie before it's released one
day I bring a USB in to work empty and
formatted as an NTFS Drive I asked my
boss hey is it okay if I put my work
schedule onto my USB to take home I
really want to go through it and put it
all on my calendar at home sure the boss
says and gives me to go ahead I copy the
movie into my calendars alternate data
stream and take it home on my USB I get
home wait a couple of days and release
the movie onto the internet for anyone
to download send out press tips delete
the legal file off my USB and wait for
the panic to set in get to work on the
Monday and chaos their new movie which
hasn't even hit cinemas yet is available
online the tech department quickly runs
through the tracking logs for that file
and sees that it hasn't been copied
anywhere that is suspicious success
granted this fictional scenario would
work for small companies a big company
with money would be able to hire a
computer forensic specialist
to do a proper search and you would
eventually be discovered maybe so on
that note let's talk about the drawbacks
unfortunately alternate data streams are
quite known about in the computer
security field thus many guru programs
by forensic specialists can scan for any
possible alternate data streams also
they can scan deleted data on hard
drives so a simple delete or format
won't save you if you try to hide it
another drawback is that alternate data
streams cannot be deleted without
deleting the hosts file unless E is a
third party application also if you have
to manage a lot of alternate data
streams it could become quite chaotic
it's like trying to fiddle with
something you can't see or easily count
this brings the video to an end I hope
you learned something new or got a
different perspective on alternate data
streams I've made a partner video to
this one where we use Python to write to
alternate data streams and also to
retrieve hidden streams you can click on
the annotation on screen or find the
link in the description if you wish to
read more about ABS I'll put a link in
the description to a paper by Ryan L
means done in 2003 if you have any
questions leave it in the comments and
I'll try to answer it as best as
possible don't forget to subscribe
thanks for watching</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>