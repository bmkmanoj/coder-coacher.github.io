<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Hacking With Python #8 - Basic SSH botNet | Coder Coacher - Coaching Coders</title><meta content="Hacking With Python #8 - Basic SSH botNet - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/DrapsTV/">DrapsTV</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Hacking With Python #8 - Basic SSH botNet</b></h2><h5 class="post__date">2013-12-19</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Xb9kjoW1Gas" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">welcome to hacking with Python eight
basic botnet every video of all
slideshows and code available in the
description will be using
object-oriented concepts in this video
so if you have never used classes or
objects in Python you may struggle to
follow along the first few videos in my
Python intermediate series should get
you up to speed so quickly
what is SSH SSH stands for secure shell
this is because it allows for a remote
shell or command-line operation there
secure because it is encrypted unlike
its predecessor telnet SSH is an
interesting topic to read about and if
you get the time reading about it may
interest you
we're going to need to set up an SSH
server to test our botnet on so I'll go
through how to install one on our Ubuntu
build if you're using a different system
it may be easier to Google a guide to
setup an SSH server on your operating
system so how is that bot not going to
work we're going to use the P expect
library with the px SSH module to
connect to the SSH server once we
connect we store the connection and have
it wait for a command we can then call a
function to send a command to all of the
servers in our list the current version
of px has SSH module has an annoying bug
in it it works on some machines and
doesn't on others so I've uploaded a
fixed version of the module for us to
use in the slides folder you can find it
in the description download the px SSH 4
PI file and make sure you put it in the
same folder as your code file our
program is going to use a class called
client to manage our connection to the
SSH server then we're going to store
each of those clients in a list remember
to make sure that you have the PX sshi
file in the same folder as our code file
ok so let's begin I want to come over to
Ubuntu and start writing so as you can
see I've got my px SSH to PI file in my
folder and I'm going to start writing my
botnet ok so we're going to call the
file botnet dot pi so I'll start it up
so botnet PI
okay so we're going to import the px SSH
module so import px SSH okay so this
will allow us to connect to an SSH
server using the P expect library okay
so now I'm going to create a class which
is going to be our client class so we're
going to call use the keyword class
think call it client okay so now we're
going to create our initializer so def
I'm just going to score in it underscore
underscore and that's going to take self
the host the user and the password okay
now in our initializer I'm going to set
self host to equal to host up our sin
and self dot user it's going to equal
the user that we pass in and self dot
password just going to be the password
we pass in and I notice I'm on the last
line ID instead of F that we get fixed
setup and we're also going to store one
more thing which is going to be self
session so this is going to be our SSH
session and that's going to be equal to
oops equal to self dot connect and
connect is going to be a function that
we write next okay now we're going to
write now next method for our client
which is going to be our connect method
so def Connect
and that's going to take so okay
now inside here we're going to try just
in case our connect fails so we're going
to try s equals P X SSH for the module
dot P X s SH for the initializer okay
and now we're going to do is going to
try and log in so s dot log in and we're
going to pass it self dot host self dot
user and self dot password and that's
all we need to pass in and once it's
done logging in we're going to return
the house session so read turn yes now
if it fails we're going to accept and
we're going to use the exception class
so except except the exception and it's
going to be a comma E so we're going to
get the output of the exception as E and
inside our except we'll print out what
II was so we can see what the error is
print P and also print out that there
was an error connecting so print error
connecting
okay so that's our connect function done
role method okay so we're going to do
one more one more method so that's going
to be our send command method so death
send underscore command the command and
it's going to take self and CMD for
command okay inside our send command
function we are going to use self dot
session so I'll just say check
connection and we're going to send send
line I'm going to send the command
through okay and now we're going to use
self dot session dot prompt which is
going to return back it's going to well
it's going to press ENTER on our command
so our command is run and then what
we're going to do is we know return the
results so self dot session dot before
so everything before the current prompt
so everything that we just got that
commander output and that's our self
send command done and our client class
completed so now let's write a couple of
global functions so def bot net command
so this is going to be our function that
sends the command so all of our bots so
passing a parameter called command
okay so what we're going to do is we're
going to do for each client client in
botnet we're going to output equals
client dot send underscore command and
then the command that where you want to
send them so this way we get back all
that output that we want to put out from
the command and then we're going to
print that to the screen so print staff
make it look nice little black cords and
blue output from and then we'll put in
the current client host so plus client
dot host so that way we know the outputs
coming from the host that will sent the
command and then we'll print the output
so put a plus it look nice and we're
going to plus the output and that'll be
the output of the command that was run
on that client and that's our botnet
function done well I've commanded and we
have one more function called F add
client so this will add a client to our
botnet and that's going to take a host
user and password
okay so inside our ad client I'm going
to have two lines we can have client
equals client with a capital C this time
because that's a class and that's going
to take the host user and the password
now we're going to add it to our botnet
so bot net dot append how am I going to
pass in the client so that'll add our
client session to our botnet and now
after we've created our two functions
we're going to write our botnet so
pretty much all it is is we create our
list so botnet is our list that equals
an empty list and now we're going to add
client and we're going to use the
loopback address which means the address
of our computer so that's always
127.0.0.1 so that always means our
computer and the user is going to be for
me it's going to be Ubuntu because
that's the name of my login and then the
password for my login so that's also
Ubuntu okay so we've added a client to
our botnet you can keep adding more so I
could copy that line and if I had more
accounts on this virtual machine I could
add them and I connect to each one of
them and then we can send commands to
them all by typing botnet command and
then we pass in the command when I say
send so I'll send in a list everything
in list form in the directory
so this is going to list everything in
the home directory I believe because
that'll be where we connect into okay so
that's our botnet created in our basic
botnet so you can add as many clients as
you want in there just use the add
client function and then your botnet
command which will send commands okay so
I'll save this and will now install a
basic SSH server to test this on ok so
if you're on your bun - it's really easy
to setup a basic SSH server all we do is
we use a sudo command for super user apt
- get you want to install SSH have we
run that it'll ask for our password and
then it starts reading the package lists
and it will install it for us and done
ok so now we can test our program it's
going to try and connect to the SSH
server we have now running and installed
so python botnet dot pi now we run that
rule connect there we go and it's listed
the directory so it's run the command on
the botnet and as you can see it's come
up with the listing of the directory so
it's actually looks like it's the home
directory think yep
this is our home directory has all the
hidden files and if we scroll up you can
see output from 127.0.0.1 and the
command was executed was LS - LA and
this is the output from it so it's
worked correctly awesome
it oops wrong one there we go okay so
this concludes our basic botnet
framework
don't fear if you don't remember all of
this you can easily come back and review
the video to consolidate all the
information you have any questions feel
free to leave them in the comments I'll
try and answer as best as possible and
if you have any problems be sure to
leave it in the comments because I
should be able to fix it fully next
we'll be writing an SSH brute-force
program thanks for watching</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>