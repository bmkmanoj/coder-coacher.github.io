<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Introduction to Web Scraping with Node and X-Ray | Coder Coacher - Coaching Coders</title><meta content="Introduction to Web Scraping with Node and X-Ray - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Paul-Halliday/">Paul Halliday</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Introduction to Web Scraping with Node and X-Ray</b></h2><h5 class="post__date">2017-03-29</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/-lEEEi-0Fqc" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey there it's for holiday and we're
going to look at web scraping with Norda
jazz and x-ray I've created a simple
Express application
Mamta super awesome trees which has some
basic HTML that we can scrap quickly and
easily so we have stuff like a h1 which
is super awesome trees the title of the
site we also have some divs with the
class of trees inside the trees dev is
another div with the class of title and
only other edge to inside of that then
we have things like images paragraphs
and so on to make this even more
interest and our second div doesn't have
the dev that routes the edge to but it
has all the other information to get
started simply run NPM Annette - why to
make a new package JSON and then we can
make our index dot JSP so touch index GS
we will need a couple of packages to get
started so run NPM install X - read
we'll also need to request because we're
going to be serving these images to the
filesystem so NPM install request and
then I'm going to open up in vs chords
so the first thing that I'm going to do
is head over to package JSON and I'm
going to add a new script so let's make
it start script that simply runs Nords
index dot GS that means every time we
type NPM starts in the terminal l starts
our a scraper can then head over to
index or Jess and we can start importing
the projects that we'll be using so we
can use cons to x-ray and require x-ray
we can then use Const request and
require request we'll also need access
to the filesystem so let's do cons to FS
and require FS
and now we can make a new x-ray so we
can use that to scrape the local horse
side that we've created so we use Const
x-ray is a new x-ray what we can then do
is use that x-ray object and pass it in
a particular source resource will be
HTTP localhost 3000 this won't work for
you unless you've got a current project
open at localhost 3000 you'll have to
use a site of your choosing or simply
replicate what I've done here then we
need to concern air scope so I'm simply
going to say h1 so now we can access the
super-awesome trees h1 tag inside of our
body we're going to be mapping this up
to a JSON file so I'm then going to add
it to an array and we're simply going to
say it title is equal to the response of
this H once IKEA's this will make sense
in a second and then we can write this
to the file so results JSON will write
that too we can then run NPM start in
the terminal and we see we get a result
Jerusalem if we open this to the side we
can see that we actually got the title
super awesome trees let's say we want to
use it div as the selector and now if we
run it again
NPM starts we see we get a variety of
different information we get both the
title of the tree and then we get the
paragraph tag within the divs obviously
this is not what we want so we need to
essentially put title to be equal to h2
as we can see and then we want to make
content equal to P and that's our
paragraph tag so if we run this again we
see we'll get title is tree one tree two
three and then we also get content which
is the paragraph tags with NB dev you'll
notice multiple of title 1 and title 3
but this is replicated this was done on
purpose to show you that hitch to the
tree to is not wrapped in a div so it
doesn't pick up that particular title
twice but it does because we're asking
for every one of the divs and then we're
simply put in the edge to zone to this
title column if we wanted to get a
little bit more specific we could simply
say div title and that would find the
title class within a div so if we run
this we see we get 3 1 because inside of
the div we are getting the title class
for the edge 2 4 3 2 there is no div
with the class of title and for 3 3 we
actually have an ID so we can do the
same for an ID so if we run again
we get 3 3 alternatively we could use
the selector dot trees so the trees
class and you find that we get 3 1 3 2 &amp;amp;
3 3 that's because it treats each one of
these equally and every one of them have
a h2 and a P tag we can return images as
well so we can set image and then to get
the source we could use image and user
select the source if we run this again
you see we get the HTTP pixels chrome /
the nature file for each single one of
our trees x-ray also gives a callback
function with this data so we can use
this data to perform particular options
like download these images or do
something else with the data so we can
use the callback here function and that
we have error and results so now we'll
simply log out be results
and you see inside our terminal we can
see three one contact image and so on we
can download the images by using the
request library by doing a for each on
the results by seeing results dot for
each and then we want to bake a function
with the results at the index then we
can simply use request now we need to
pass in the URI so this would be the
result or image and then we can use the
dot paint methods and BFS to create
write stream so we want to write this to
the file and then we want to put the
index so that's the current index of in
the array so it'll be 0 1 2 + dot jpg so
we call 0 jpg 1 dot jpg and 2 dot jpg if
we run this it should work we can then
see in our file system that we got 0 dot
jpg 1 jpg and to go jpg if we open them
we can see it's the first tree the
second tree and the third tree if we
wanted to we can filter the results for
one particular tree and we could do that
by running results is equal to results
filter and then we want to return only
when at the result title includes 3 2 so
that will essentially only return when
tree 2 is in the title and we can hug
into our for each function like so and
only download the picture 4 3 2
to prove this works we can delete the
current trees and then run our file
again we can then see that we have the
zero jpg and when we open the file it is
tree too so hope you found this video
useful and getting started web scraping
using Nords
and x-ray if you did hit that subscribe
button because there's many more videos
on the way and until then I'll see you
in the next video</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>