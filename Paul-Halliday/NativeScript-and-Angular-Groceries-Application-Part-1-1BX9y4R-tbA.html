<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>NativeScript and Angular: Groceries Application (Part 1) | Coder Coacher - Coaching Coders</title><meta content="NativeScript and Angular: Groceries Application (Part 1) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Paul-Halliday/">Paul Halliday</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>NativeScript and Angular: Groceries Application (Part 1)</b></h2><h5 class="post__date">2018-02-20</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/1BX9y4R-tbA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hi there my name is Paul Haledon in this
video we'll be looking at how to get up
and running with native script and
angular we'll be learning this together
by going over to the native script don't
org website hitting Docs and then
heading native script with angular so
what we're going to do is follow this
tutorial together we're going to
investigate all the different moving
parts and of course by the end of its
which should have the groceries
application which is the example app
that we'll be building inside of this
article so if you haven't already
downloaded and installed native script
on your machine I would definitely check
out the installation article first this
essentially looks at how you can install
node.js the native script CLI and then
of course you run at the setup script on
both Mac and Windows
so before following this tutorial go
ahead and do that and just before we get
into the meat of this tutorial I do want
to say that I now have a subscription
plan over at Paul Halliday don't I or if
you select the Academy subscription
you'll see that you gain access to all
of my courses and upcoming future
courses for one easy payment so a back
up here at the native script Docs and we
want to get started with typescript and
angular we start with than thinking
about what native script is and what
angular is well native script Nashik c
is a free open source framework and we
can build native ios and android
applications using javascript and CSS so
this is really important because when we
consider frameworks that use a webview
such as ionic well maybe with native
script you'll find that in some
circumstances or even most circumstances
you may find better performance
this does give you somewhat layout and
styling limitations when compared to
html5 but at the end of the day you do
find that you have a native Android or
iOS application built with JavaScript
and angular so angular of course is a
popular open source a JavaScript
framework and we write that with
typescript
and it lends itself more to an
enterprise level team but of course you
can use angular with smaller projects
and if you don't like angular you can
still run near the script with standard
JavaScript typescript and even view at
the moment so let's continue to chapter
1 getting up and running the first thing
that we need to do at this point is
create a new application to create a new
native script up after installing the
native script CLI we can run TNS create
we can then that subsequently pass eight
templates which will be using the native
script templates ng tutorial let's copy
that if we then paste best and side of
the terminal and hit enter we should
find that it goes and downloads the
native script templates and creates a
new application
we can learn CD into hello world
and this of course this changes our
command line directory to be that new
folder
next we want to run an application on
our computer because this allows us to
emulate the application we can either do
this on Android or iOS to run this on
Android we can run TNS run Android from
that folder now at this moment in time
you will need to have the Android SDK
and some avds
some virtual devices installed so let's
run TNS run Android and what this will
go ahead and do it will add the Android
platform to the project it will then
start the project up with an emulator if
you run that command and you have a
device connected to your machine it will
also automatically run that on the
device rather than an emulator as always
you may find that it does take some time
to boot up the emulator for the first
time but as we continue to change our
application this will be much quicker
our emulator has started and if we look
back at our terminal you can see it's
installing the TNS Android platform so
this may take some time still go make a
coffee come back and it should all be
ready
so after a short period of time we
finally get the application loading up
and then we see my up on screen just
simply has a title with this action bar
here and nothing else it's exactly what
we expect a blank need a script
application but perhaps sorts more
important is that this whole thing is
native this isn't simply just a div with
a grey background and some Bach shadow
this is a native action bar so I suppose
the next thing to look at is of course
running this on an iOS device so you can
only do this if you have a Mac computer
so we can then run Tina's run iOS
you will need Xcode installed and of
course you'll see that in the setup
guide that we initially lock down at the
start of the video so as I have no
current iOS devices connected to my
machine it should initially search but
then open up an emulator
so similar to our experience with
Android we'll have to win for the
emulator to start up we'll see inside of
the term and although it's installing
the TNS iOS platform and after a while
which should then be able to load the
application on the iOS emulator but
what's more important is that any
changes will automatically be deployed
to the device without having to wear all
this time so it's literally just the
first time that we've run this on a
particular platform then it takes a
little while so because we've rebuilt
the application for iOS what happens is
the Android application will also
restart there should be no changes to
the Android application at the moment
but as you can see on the emulator the
application is reloaded overall as
probably's talked about five to seven
seconds and you'll find that any changes
that we make in the future are only that
long
so we finally get a message that the
project has been successfully built and
is installing on the iOS device it then
opens up as we expect but with a
different user interface so we say here
on the Left we have the iOS style and on
the right we have the Android style
underneath this is all the same code for
us we just simply use what's known as an
action bar and the action bar then of
course changes depending on the platform
we'll look at this very soon but for now
let's move on to the next step of the
tutorial so we've run the app on our
computer and of course we've opened this
up inside of the emulator the next thing
we'd like to do is of course luck at
adding some contents to our app so I'm
going to open this up inside of Visual
Studio chords
if we look at our directory structure
we'll see that we have a folders such as
app hooks Nord modules and platforms you
may see some extra files that I
currently dot let's go into our
preferences inside of vs chords and we
can then add the files don't exclude
what this allows us to do is exclude
particular files from the file explorer
I've said that I want to hide get files
SVN files and so on but most importantly
for native script development is this
dot JS file so we want to hide any dot
JS file when there is a subsequent don't
TS file so this means we don't want to
see the JavaScript minified versions of
our files instead we only want to see
the TS file providing that there is both
the TS and GS file available
another thing I'd like to do also when
using native script projects is going
down here and excluding node modules
from the search as well as platforms
from the search you can also do the same
for Bower components if you want
so let's head over to our up dog
component TS you'll see the template for
our file is currently just an action bar
and inside of here we have your UI
components go here let's add the image
with the source of the images directory
slash Apple JPEG
so if we then check our emulator we can
see that we have both an apple on screen
here on the androids and on the iOS
device
the next thing that we look at inside of
the tutorial is of course adding this
spin keyframe so this is what's known as
a CSS animation so what this does is it
does spin the Apple round in this circle
over 3 seconds so let's add this to our
component we can add the Styles like so
and as you can see it targets the image
so we don't have to add any class or ID
to this instead if we look at our
application we can see that we have this
smooth 60fps animation and our Apple is
spinning round in a circle so already
you should see something quite profound
we're able to animate and indeed style
our applications here on iOS and Android
with CSS so not only are we using
JavaScript angular but we're able to use
CSS to really change the way our
applications work
so as a front-end developer this should
be really important to you because you
can take advantage of native development
concepts with angular so the next thing
we have to do is add this native script
theme we can add a variety of different
themes and sky just happens to be one of
many let's add that to our app dot CSS
file so we can import instead of
importing the call light theme will
import the CSS sky theme notice how our
action bar now goes this blue color
instead of the previous gray our
challenge at this point is to make a
different color scheme as you can see if
we select this full list and open up in
a new tab
so as you can see here we can use the
call light theme we can use the code
dark theme or we have access to these
other themes so as an example here we
could take the forest don't CSS and
instead of using sky we use a forest and
we find that we have this greener theme
at this moment in time though we do
notice now that our status bar is black
when in reality it probably should be
white to match the contrast it's
something we'll look at in the future
and it's definitely something to
consider as we start playing around with
different themes in our application the
same goes for Android here we don't have
a status bar color at all it's just gray
it should probably match our theme
next up we start talking about debugging
how do we do bug our applications inside
of native script so we can start off of
course by simply adding a console dot
log statement let's add that from the
constructor inside of our app component
es and then the application will restart
and inside of our terminal you can see
we have that hello world message but if
you've used JavaScript before you'll
notice that if you come to logout an
object we actually get object objects
and not the contents of the object so I
use the example here if we then try to
log out and we'll use a Redux inspired
object such as type of log to console
and a payload of hello world if we then
check out of the terminal we should see
object object like so so what we need to
do now is actually find out the contents
of that object it's quite a few ways
which we can do this but one of the
easiest ways to do this is use console
dot dir so let's instead of using log
use that
well ideally what should have happened
at this point is we should have had the
correct object display on screen and if
we check github we can see that the
console don't dir is not working as
expected
compared to console dot dump
this issue still seems to persist in
later versions of Neda scripts and one
way around this is to simply use
console.log and we'll punch json
stringify and of course we'll stringify
that object at this point we can see our
object here which has a type of log to
console and a payload of hello world
I've added an X on here for good measure
and we can then move forward to the next
stage of the tutorial so the tutorial
talks about step by step debugging and
one of the benefits of that means that
we can go through and see the values of
each one of our variables line by line
and add things like break points and
step through if we go through into this
link you can see that we can download
the extension and also check out the
overview video in which you can see this
step by step
it's not something we'll be locking out
right now on this video but it's
something that I'll probably stream
making in the future up next we have an
exercise in error handling so we have
find the chord that declares an action
bar which is on line six of our app
component remove that lines final
bracket so that the line looks like this
so let's go ahead and do that and if we
look inside of the console we can see
that we have template pass errors so
I've seen here in the texture example we
have that unexpected character which we
need to add back but another thing
because I'm using the angular language
service and that happens to be a visual
studio code plug-in we get that aura
inside of our editor so we can add that
tag back and we no longer have the aura
and inside of our console that are no
longer exists so let's move on to
chapter 2 if you want you can also
continue down here into our appendix ear
and look at why you should most likely
use Visual Studio cords but there are
quite a few other options available
inside of chapter 2 we're going to learn
how we can build native scripts user
interfaces
we can scroll down and see what will be
building inside of this video and the
first thing to do at this point is to
download the new template based on this
groceries application so we can stop
this currently running project with ctrl
C we can see the back one directory and
of course creates a new app named
groceries this will use the templates of
native script template ng groceries and
once again this may take some time to
download and install all the
dependencies we can then CD into
groceries at this point we can open up
visual studio called once again inside
of this directory and this time if we
look at our directory structure we have
something a little bit larger we have
things like the app resources which
gives us all of the variety of different
backgrounds icons and much more
these exist for both Android and iOS we
have pages which represent the different
pages inside of our application at the
moment all of these files are blank we
then have a shared directory which is
going to contain our grocery service and
our user service as well as a
configuration class which is simply used
to display the API URL we also have a
utilities folder which gives us the
ability to change the status bar colors
and outside of that we have a standard
app component at the module as well as
routing the routing file is currently
blank but we'll be adding to this and so
we continue the video so we can scroll
down it's a 2.3 starting up as we can
see starting up a native script
application looks very similar to a
standard angular application we have a
main TS and inside of the Mendo TS we're
bootstrapping the app module like so and
we're using the platform at native
script dynamic which comes from the
native script to angular slash platform
to bootstrap native script and angular
itself
so this is quite similar to angular's
platform browser dynamic module just a
specific version for native scraps if we
then go on lock it our app module don TS
we can see that we're importing the
native script module we're declaring the
app components and we're bootstrapping
the app component so effectively all
that's happening when our application
loads up is that we're loading the app
component the app component simply just
has a label which says hello world the
native script module is giving us access
to native script specific components
such as label action bar and a variety
of other things we'll scroll down to our
exercise in two-point form this allows
us to add new UI elements to the app
component so if we copy this and we head
over to the app components don TS we can
change the template from using speech
marks to using bite X inside of the by
tics we can paste the text fields and
buttons so now the more we have some red
lines and that's normal because the
angular language service is saying hey
this text field is no unknown element
and that's because as far as angular is
concerned it doesn't know what this text
field is so we need to add the nor
errors schema to our app module so
inside of our module dot es we can add
schemas and we'll add Nora's schema
comes from angular core so we can simply
add that as well as our ng module import
and you'll notice not the red line then
disappears I'm then going to run at the
application on iOS only this assembly
just to save some system resources while
I'm recording this video but you could
boot this up on both iOS and Android for
now
if we then look at our application
you'll see that we have this button
called sign-up for groceries
but if you remember we also heard other
buttons such as sign in and then two
text fields why are these not appearing
well we'll look at that again in a
second but for now I want to bring your
attention to some attributes that we can
add to our buttons text fields and a
variety of other elements so our text
field for example has a hint attribute
and that shows a placeholder text that's
similar to the placeholder inside of a
standard input box with HTML we have
keyboard types which is similar to type
autocorrect Auto capitalization type and
much more if you look at the
documentation for each elements you'll
find that the different attributes
available so back to why we only see
this one big button it's because we
currently aren't using any layout
elements if we look at what we're
essentially telling native script to do
at this point is that we only want to
display this last element you could
think of this inside of HTML terms if
that what we need to actually do is add
this inside of a div so our content
would look similar to that so as you can
see we'd have a div which wraps these
elements but inside of native script
it's called something different
depending on what type of wrapper you
want to use so let's scroll down further
and like at these layouts we have things
like the absolute layout the dock layout
the flexbox layout grids stack and of
wrap so I'll let you read all of these
elements yourself and of course I'd
recommend playing around with different
ones inside of your application we'll
currently be using this stack layout and
that's because the stack layout allows
us to stack items on top of one another
notice how the example also states that
this can be stacked either vertically or
horizontally on top of one another and
for forms this is especially useful so
let's replace our example code of saying
div to instead say stack layout
we can then like at our iOS simulator
and you'll see that we have this email
address
there's passwords and the two buttons as
we expect all of the content is stacked
on top of one another but at this moment
in time doesn't really look that pretty
and it's all kind of bunched together
here's an example of what may look like
on an Android device and if we scroll
down you can see that we can add a
variety of different CSS terms we can
have a look at the full list of CSS
properties and if you want to you can
look at all of the different elements
and maybe look at what is supported
what isn't supported and so on so let's
go to our app dot CSS file inside about
dot CSS let's paste in the page which
gives a background color of white a font
size of 15 the text feels padding of 10
and the font size of 13 inside of that
text field
this certainly looks a little better we
now have some padding in between these
elements and as the tutorial states here
it should feel quite familiar to you if
you've ever done any sort of web
development - in the past these are tag
names as we can see in our app
components here we are referencing this
text field but we can also add a class
or an ID to the text field if we wanted
to
and here's where things get a bit
interesting we can then add
platform-specific CSS to either target
something on iOS or Android and style it
differently so let's import this URL of
the slash platform dot CSS let's add the
inside of our app dot CSS at the top and
what this allows us to do from here on
out is add both an iOS and Android
specific CSS file so inside of our
platform
don't I owe s don't CSS let's add a text
field and that selector will have a
border width of 1 and a border color of
black on iOS we now have this border
around all of our text fields if we
opened up Android at this point it
wouldn't have that styling and that's
because it's specific to iOS as you can
see here in the picture examples it only
likes at the Iowas styling but once
again we aren't specifically limited to
only using platform CSS so we can
actually come down to the component
specific CSS and at the same time we can
change the platform for that specific
component as well as any common styles
so let's add the style URLs like so
inside of our app component
and this is using the CSS files inside
of the pages login and then we using log
in common and we have this login to
Android and login dot iOS notice go
inside of the style URLs were saying
pages login login common and then we're
using pages login login we don't have a
CSS file called login don't CSS what
near the script is doing here is it
saying hey any file that matches login
to Android on the Android platform that
becomes login don't CSS and the same
happens for the iOS dot CSS file so
let's paste in the common styling into
the login common don't see s us and if
we now look at our application it looks
much better we can then inside of our
components add the class of submit
button to the sign-in button this gives
our button here a different styling in
comparison to the standard button you
can see that this also is reflected on
Android like so so we initially looked
at how we can add images to our native
script applications well we find out
that we could use the images from source
like so but we also have the ability to
get images from a web URL finally we can
also get images from our resources so
these are platform specific resources
and these are sized appropriately at
least it should be so we should have an
image inside of the drawable mdpi the
hdpi the xhdpi for android and for iOS
we should have things like the standard
definition then we should have the 2x
and 3x respectively these allow us to
appropriately show the correct image
across a variety of different devices
so let's add this image we'll take it
and add it as a child of the stock
layout notice how we're applying the
stretch non attribute to this image and
we're aligning this image in the center
of the stack layout we now have a form
we now have some images and review
styling to change the way in our
application locks let's say chapter 3
and location logic will start off inside
of this chapter by adding a tap event
handler to a button so here inside of
our app component let's add a tap and
that will be pointed at the function
submit and inside of our our component
we can then add the submit function and
simply log out hello before we looked in
the console whenever we wanted to see a
console log we could do the same here if
we hit sign in multiple times we then
say hello multiple times inside of the
console so this is how we can start
wiring together some business logic and
react to user click events or indeed tap
events from within the application we're
now going to look at data binding and
alerts for the first time let's add an
email to our application instead of
using console dot log we'll add an alert
with bar text and say you're using and
we'll pass in this don't email what this
should then D is alert you're using
native script rocks Telecom on the
screen whenever we hit that submit
button let's go ahead and hit sign in as
you can see we're given an alert like so
next we want to like and data binding so
inside of our text field we want to set
the text of our text field here so the
email failed and if we wrap it in these
square brackets this allows us to bind
to the email attributes so here the
email property inside of our app
components is equal to the native script
rocks email and then we're binding this
text attributes to the email property
like so so if we look at our application
we then see our email inside of the
email box if we add something to this
you'll notice that we do want to get
that two-way data binding this is
because at this moment in time were only
using a one-way binding let's take
advantage if two-way data binding inside
of angular that can be done by replacing
the text with ng model so the ng model
will automatically bind the value of
text to the email but you'll notice if
we save the file and we've reopened the
application this doesn't work and this
is because we need to import the native
script forms module let's go over to our
module don TS and we'll import from
native script - angular slash forms and
we'll take the near the script forms
module will then add this to the list of
imports like so
we then refresh the application we
should see the email inside of the box
and if we make any changes to the email
and hit sign in we gets a different
email inside of the alerts this is known
as two-way data-binding
and as accomplished with ngmodel a good
example of using one-way and two-way
data-binding
is when we come to changing the values
of our buttons depending on whether the
user is logging in so let's copy these
two buttons here and replace it inside
of our app components and we'll also
copy the app component like so
to run through what exactly is happening
at this point we now have this is
logging in boolean initially we set this
to true and whenever we click this
button which is either sign up or back
to log in it toggles the button from
being true to false and false to true so
we're then using what's known as a
ternary operator to display either sign
in or sign up depending on the value of
logging in so let's take a look at less
if we hit sign up you'll see that we get
sign up as the primary button or back to
log in here which then toggles the value
of is logging in like so and so we don't
need to wear data binding for this we're
using the text property like so we can
then start thinking about how we can
implement the login functionality and
start routing the user between different
pages we'll start off by heading over to
the shed use our user dot es file and
we'll add the user class this gives us
the ability to have a user with an email
and a password and we can capture that
inside of the form we can then import
from our shared user slash user and that
gives us access to that user class that
we just created
can then create a new property on the
class called user of type user and when
we start our up component we can create
a new version of that class so that's a
new instance of that class which we can
then bind these elements of user into
this text field so instead of having the
entry model equal to email we can set
that to use it on email we can also copy
this and add that for the second text
field but instead use it on passwords
and at this point we can capture both
the user and the password is an example
to this let's set the user dot email
equal to hello that's Paul Halliday
don't I or and the user dot passwords to
one two three four five and when we
refresh the application you can see that
we then have the username and password
filled out on the form this is the
advantage of using two-way data-binding
and ng model with that user class so
anytime we add something or remove
something for in this form that user
object is then updated let's remove that
for now and another thing at this point
we do find that the template is getting
quite large in these circumstances it's
always a good idea to abstract this out
to another file so it makes this
component much smaller let's take the
entire template and cut the contents
can then add this into login door HTML
and inside of the amp component we can
set the template URL to be pages login
login to HTML
if we save that and our application
restarts you should see that everything
looks exactly the same as a dead before
the next thing we'd like to do is start
authenticating a user with a back-end so
we're gonna head over to our user some
of us don TS and we're going to create
that new user service let's paste in at
the service and we'll explain exactly
what is happening at this point so every
service that wants to use a constructor
and inject dependencies inside of
angular needs this injectable decorator
add that to your service at the top then
we're importing the user class because
we'll be using this throughout the
service within exporting a new class
called the user service and exposing a
method here called register it takes in
a user and we say we can also just refer
to this at this point and say user name
user dot to email and passwords user
passwords obviously in production
applications it may not be a good idea
to at least alert passwords on-screen
but for our example it shan't be fine we
can then head over to the app component
or the app module don TS we need to
inject this provider and tell angular
that we want to use this service across
the application it perhaps seems that
this tutorial is only using the user
service inside of the app component so
let's add it providers to our components
and from here on out we can inject the
user service and that comes from shared
user user dot service we can add that to
all providers like so and if we want to
use this service across the application
you may want to add this to the app
module instead of the app component we
can then inject this into the
constructor by saying private users
service have type user service and what
angular does at this point is it creates
a new version of the service and handles
the dependencies for us based on the
type of the service
we can then take the submit function we
can paste over with the new function as
well as using login and sign up so let's
lock it exactly what is happening at
this point were able to now either login
the user or signup the user depending on
the context of whether the user is
logging in or not so we're using that
one function to handle both of those
events
if the user hits the sign-up button we
are going to call out that user service
and the register methods passing in the
user here as a parameter
we can then add an email address here
such as EAD calm and the password of one
two three and hit sign up like so you
can see that we have alerted that user
object such as the years name and
passwords on-screen now at this point we
want to start thinking about how we can
authenticate that user based on the fact
that they want to sign up so let's copy
the next phase of the tutorial right
here
that's a copy and we'll head back over
to our user service dot TS we'll paste
over the previous code and in a moment's
time we'll take a look at exactly what
is happening first I want to take the
sign up function right here and we'll
paste it inside of the app component so
instead of using the register method
like this we'll paste this in and it
will go step by step and see what
exactly is happening here so start off
at our user service don TS as you can
see here we're using the HTTP module
we're importing HTTP headers and
response this he is the old HTTP client
if you want to use the newer HTTP
clients you may want to like it angular
common HTTP and the subsequent
documentation with that next we're
importing the rxjs observable as well as
the do and map operators also then at
this point importing our user object and
the conflict that we looked at earlier
on in this lecture now contains things
like the API URL and inside of the user
service were then instantiating in new
versions or injecting this HTTP module
then inside of the register method we're
creating some new headers and we're
appending the content type of
application JSON so essentially we're
using the content type application JSON
for this request within making a new
HTTP request that happens to be of type
post to our config the API URL and we
can make this use back takes to make it
read a little bit better
so we want to simply use the API URL and
then we'll add users after that we can
then stringify the content so that it
can be appropriately posted we want to
use the username email and passwords and
pass along any headers in this
circumstance these the headers that we
created earlier on we then want to catch
any errors and the cache function at
this point simply we'll just log out the
error and throw an observable of error
so if we look at our application we then
have no provider for HTTP so if we
scroll further down inside of the
tutorial you'll see that this is
remedied by importing the native script
HTTP module let's go ahead and do that
inside of our module don TS and we can
add this to the imports
and then our application starts up
without ARRA but we haven't looked at
the app component don TS so let's see
what this does so we then have an
observable that is returned from our
HTTP post within a subscribing to this
observable and we can think if these as
the next event and here as the event we
aren't passing any parameters down so
this is simply just thinking of it of
how an observable works and observable
does the three things and it gives us
the ability to either have a next event
and that's when it something has
successfully been created and we push
the next value inside of the observable
so we have your account was successfully
created
we have an era event which happens if we
catch any errors it's passed down here
and we get the unfortunately we're not
able to create your account and finally
we'd also have a complete event that
happens when the observable has
completed so inside of our application
let's now take a look will make in your
account and we'll just use a random
account for now and we'll hit sign up
like so and you'll notice that we get
this error we get unfortunately we were
unable to create your account so what I
want to do is then look inside of our
console we get the message here which is
a user with that name already exists so
let's change the name to be something a
bit better and hit sign up once again
and it looks like we got the same R Us
or the username already exists so surely
this one can't exist if we hit sign up
once more it looks like it does so let's
maybe try something different
perhaps if we tried test123 at test123
calm apparently still exists so I'm
gonna add some cues on the end and
surely that can't exist and we finally
got there your account was successfully
created
so we now have an account albeit it's
quite long test one two three and four
queues at test one two three calm but
what's more important is that now we've
made a HTTP POST request and of course
at this point we're not really concerned
about this complete event now it's just
simply for demonstration purposes but
you'll see that when we do have an error
we do a lot unfortunately we weren't
able to create your accounts but because
we were successful we do then get your
account was successfully created so we
now need to think about logging into our
back-end let's make it easier on
ourselves and we'll hardcore des so
don't forget our credentials so ours is
test123 qqqq
at test123 comm and the password was one
two three four five six at least that's
what I think it is and we'll continue
down and start investigating different
things as such as routing so routing
allows us to send the user to a
different page depending on a particular
event so maybe we won't have logged in
from this login page we want to send
them to the list page that's done with
routing and we're gonna look at that in
3.5 and honor so we want to take
everything inside of the app components
and we want to copy that instead to be
the login component so let's take
everything here and command X and paste
it in the login component don TS let's
rename this to be the login component
and inside of the app component for now
we will simply put a template that
contains the page router outlet and the
selector of min well like a mess in more
detail as we continue 33.5 but
essentially what this is going to
allow us to do is part the content of
any page that we've navigated the user
to inside of this element so this means
we then have this single page which is
injecting these different pages
depending on where we route the user
but let's not jump ahead too much so
let's go and copy the login component
routes into the app routing dot es what
we're doing here is importing the login
component we're exposing some routes so
saying the default route here should be
this component of the login component
and then we're also exposing a constant
to be used later called the navigatable
components and we're passing through the
login component we then need to head
over to our app module don TS we want to
import from a native script angular
slash router we want the native script
router module
we need to give our application some
default routes let's not the native
script runs a module dot four routes and
we want to pass through the routes that
we just created so let's import both of
these things from our browsing the
routes and the navigatable components
let's add routes and we now have these
navigatable components so anytime we
have any declarations what we want to do
is use the spread operator and spread
over the navigatable components and what
this will allow us to do is take each
one of those components inside of the
navigatable components array and added
to the declarations so anytime we want
to add a new component to the
declarations we simply just add it to
this navigatable components next up
let's add ourselves a list component so
let's head to the list component don't
TS and paste in a very standard
component inside of list door HTML we
can give this a label of hello world
just so we know we've navigated to this
component in the future and at this
point we can go back to our app browsing
and to add a new component to this all
we need to do is effectively add a new
path and at the same time expose that
component inside of this array so let's
do that by updating the routing file
like I said we're simply just pointing
the path of less this time and giving it
the components of list component so
we've made a lot of progress but now we
want to allow people to navigate and
login to our application so let's head
to use a service or TS and at this point
we have a register file or register
function and what we'll do is just close
that down a little bit now and we'll add
a login function this is very similar to
the register function
and we can simply put this using back
ticks like so
so what exactly is happening at this
point is we are then of course setting
the content type to be JSON once again
we're making a post request this time to
a different URL passing the username
passwords and the grant type we're then
mapping over the response and returning
the JSON elements of that response if we
use the HTTP client instead of the
standard HTTP module here we wouldn't
need to do that but after that we're
using V don't do and what do does it
just goes over this once and what I'll
do is said the config talking to the
result of our access token from that
response so if you remember this is a
static property so it'll be the same
across any instance of config and by
instance I just mean this class finally
once again if there are any errors then
we'll handle any errors and return an
observable response like sauce or just
simply through all the observable so
this now gives us the ability to log a
user in providing the provide us a
username and passwords so nearly done
what we need to do now is import router
inside of the log in component so let's
head over to the log in component es we
also need to update our paths because we
have changed our component so add dot
dot slash dot dot slash is shared and we
want to inject a private router of type
router like so and then for our login
function as we're still waiting to
define out we can paste this in and
exactly what's happening here as we are
going to the user service we are logging
in we're passing the user object we're
then subscribing to the response if we
successfully log in then of course we
want to navigate that user to the list
and if there are any errors then we want
to log out that era I'd want to fix our
register function at this point because
by saying next we are sort of implying
that there is a return here when there's
actually nothing so let's take a look a
Bess if we then hit sign in we then of
course a navigate
to that list component so at this point
we are actually authenticating a user at
the same time we are signing up a new
user if we click that sign up button and
then once we're sure that we have the
correct user we're then navigating that
user to the correct component so on to
chapter 4 near the script and modules
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>