<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Facebook Authentication with Ionic 2 and Ionic Cloud | Coder Coacher - Coaching Coders</title><meta content="Facebook Authentication with Ionic 2 and Ionic Cloud - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Paul-Halliday/">Paul Halliday</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Facebook Authentication with Ionic 2 and Ionic Cloud</b></h2><h5 class="post__date">2017-03-31</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/jbq_MIdnlVQ" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey Ron it's Paul holiday and today
we're going to look at implementing
Facebook authentication with the ionic
cloud to get started simply make a new
ionic app or use your current ionic up
I'm going to run ionic start Facebook
blank - - v2 and now we can CD into that
directory source CD Facebook then we can
make a login page so let's use the ionic
CLI to generate a login page
ionic G page login we can open up in vs
code and we can start off by going to
the source up at module then we can
import our login page that we just
created from pages login login we then
need to add it to our declarations and
our entry component after that we can
head over to app component CS and we can
change our route page to be the login
page so we need to import the login page
once again and change the route page to
login page
inside of our login page we can add a
button inside of our login page we need
a button and the button can simply say
login with Facebook and to set up some
workflow I'm simply going to click the
login button and it's going to navigate
us to the home page so we'll make a
function that named login and this login
function when clicked can simply take us
to the home page so ensure that we have
the home page imported and then we can
run this don't have control set routes
home page we can see if we click login
with Facebook it takes us to the home
page so I'm going to quickly edit the
template to see home page and for now
we'll simply say welcome to the home
page so we click login and we see the
home page to add Facebook authentication
to our application we'll need to install
the ionic cloud client to do that in our
terminal run npm install at ionic slash
cloud - angular and then we want to save
it to the project we then need to head
over to app modular TS and import the
cloud module and the cloud settings so
import clouds module cloud settings from
at ionic slash cloud - and you're to
make use of the cloud settings we need
to make a const cloud settings of type
cloud settings and this object needs to
hold our app ID so the core sentence is
simply going to hold app underscore ID
and to get this ID we need to upload our
project to the ionic cloud so back in
our terminal now we need to run ionic I
or in it now if you haven't got an ionic
die or account you need to head over to
ionic Nile and create that account then
come back to your command line and you
should be able to log in and do a
I think that we need to do so run ionic
I or in it and you should see that we
save the up ID and the API key to our
ion at config dot JSON so our app ID
here we can copy/paste into our app
module and add it under the app ID
within the cloud settings once we've
done that we can import the cloud module
into our project and we can use the for
root to provide the settings that were
created up here that's all we need to do
to add the cloud client to our project
to implement phase pop off inside of our
application we then need to head over to
apps dot IO nectar you'll find the
application that we made and then head
over to settings use it off and then you
should see a variety of social providers
if we select Facebook and then setup we
need an app ID and an app secret we can
get these from the Facebook app
developer console so now we need to
create an app over at Facebook to do
this head to developers facebook.com/
and select my apps underneath we need to
select add a new app we'll need a name
for this app for the name I'm simply
going to add my login inside of the
developer console we should have a
facebook login under the list of
products we can click get started then
we need to enable embedded browser or
login press yes and we need to add a
valid or redirect URI for this you can
simply add HTTP API dot ionic aisle
slash auth slash integrations slash
Facebook
when you've done that simply click Save
and then head over to settings inside
here we can find our application ID and
our app secrets we can take the
application ID and add it back inside of
our ionic console we can take the app
secrets and add that inside if our ionic
console then click enable you should
then see that Facebook is active within
the ionic dashboards there's a couple of
other things we need to do and that is
to add platforms that people can log in
from so if we add platform and then
select Android we need to add what you
call a key hash we can generate the key
hash on a Mac by using this command I'll
add this to the description once you
have that copier and add it to your key
hashes within the Facebook developer
dashboard now this is for debugging
you'll have to do a similar process for
production but keep in mind that you'll
have to add a key hash for each then we
need to add the Google Play package name
you can find that by navigating back to
our project and logging inside of our
config dot XML under widget ID the condo
ionic framework door face bug ID we can
copy/paste that and add it to the
Facebook dashboards now for production I
would definitely recommend that you
create your own widget ID but for now
we'll keep it at this once both your
package name and key hash have been
added we can simply save changes and use
this package name
we can do a similar thing your for iOS
so let's add the iOS platform and for
iOS it's much simpler we simply need the
bundle ID so we can copy-paste the
bundle ID here into our iOS ID then when
we're done that click Save and use this
package name again
now we can head back over to our
application and visit our module ATS we
can tell the cloud settings that were
using Facebook to authenticate we can
add the Alt key to this object as well
as Facebook and within Facebook we can
declare a scope scope essentially means
what permissions that we're going to
request from the user I'm going to leave
this blank at the moment but you could
add things like user birthday and so on
you can find that all on the Facebook
API by default this will request both
the email and the public profile so we
can hit save on that we're nearly done
the next thing we need to do is to add
the code over plug in facebook for so
head over to your terminal and run
cordova plugin adds cordova - plug in -
face bug for this will install the
facebook for plug into the project we
can save and we'll also need to add
these following variables so we can use
bash - variable app underscore ID is
equal to and then sure to put this in
quotes the app ID v / b facebook
dashboard and then we need our app name
so we can add variable again up
underscore name is equal to the name of
the app that you created over at
Facebook when you've done that hit enter
and save it to the project I'm going to
be testing this on my Android device so
I'm going to run ionic platform add
Android and then we can head over to our
login page within the login page we can
rewrite this login function so firstly
authenticate with Facebook so let's
import the facebook off and user
from the ionic / cloud angular package
we can also take the off login results
and we can create an async function
named login remember that these async
will have to go over to TS config JSON
and change our target to es6 and then so
now we can delete this enough control
then inject our facebook off so private
Facebook Facebook earth inside of our
constructor so we can now use this still
Facebook don't login and you can see it
returns an author log and result so
let's make a variable up top here named
login details of type or login result
and then we can say this dot login
details is equal to the result from us
of desktop face bug got login let's log
this out to the console after we're done
and update our function to be a promise
of type void if we head over to our
login dot HTML we can see our button is
hooked up to that login event so when we
click at the login with Facebook
it should attempt to authenticate with
face bug we can surround this with the
try catch to catch any errors that might
happen during the login process and then
we can do a console era e if there's any
errors and then run this on the device
if we now click login
I get a Facebook dialog on my screen and
if I press Continue we can see that we
get sign up for true and our log n
talkin as well as that we can head back
over to our ionic dashboards and click
off then you can see that I've or thent
ik ated with face bug on the device we
can also look at the user object by
injecting user private user user then we
can get the data by using console to log
this user dot social dot Facebook so
let's try that again
if we click login with Facebook you can
see we get the talking once again and
signup is false because we're not
signing up we're logging in we then have
the user ID which we're logging on here
and we can see the UID as well as the
particular data so you can see form
their profile picture as well as the raw
data including email address pictures
URLs gloss you may wish to save this to
the device we can then use the width
this stuff is like dot store talking and
then we can hand across be talking by
using this dot login details
talking to prove this works will
retrieve the token by using constant
talkin is equal to this obvious bike get
talking and will ensure to resolve that
promise by using await and then will log
I'll be talking to the console so if we
click login with Facebook once again we
can see we get our token and the fact
that the signup was false our object
that includes our user data and finally
the talkin that we stored to local
storage and then retrieved from local
storage for a basic login implementation
we may want to check to see whether the
talkin exists so you can use Const token
is equal to the resolved promise of this
based like get token if talking exists
and we can simply set the root of the
nav control to homepage else if there
was no talking we can simply login and
then if we have the login details
talking we can then set root again to
the homepage as well as storing it be
talking on the device obviously this
implementation is very bare-bones and
you can change it as much as you want
so if we run this again on the device
and then click the login with Facebook
we get to welcome to the home page and
that's because we already had that
talkin here on the device inside of our
home page we could make a logout button
so inside of the navbar here we can make
ion buttons and this one would be to the
right and it would simply be a button
and we could make it clear and add the
ion button I reviewed then we can say
logout and add a click event to a logout
have to once again imports Facebook or
from ionic / cloud angular we can also
import the user object then injector and
side of our constructor and then we can
create the air sink logout method and
all I need to do here is simply awared
on this top Facebook don't logout this
would also remove the talkin from the
storage and if we ensure that we have a
nav controller inside of our home dot es
we could simply use this Don nav control
dot set route back to the login page so
if we import that we can set the route
back to the login page
when somebody logs out let's run this on
the device and then if we collect login
we can see it takes us to the home page
as expected and then if we click logout
it takes us back to the login screen
after logging out so if we log in again
you'll see that it doesn't instantly go
to the homepage and that assembly
because it's go or fence care
once again with Facebook the final thing
that I'm going to do is simply display
it a little bit of information about the
user on the home page so let's remove
user from our login dot CF and instead
add user to our form ts also have to
remove it from the constructor inside
login and inside home we can then inject
private user user and perhaps on the I
on view we lured lifecycle so this is
one of you is about toward we can get
the user data so remember the either
dead or as inside this thought user both
social top face bike and then we have
access to these data and then for mam
profile picture raw data username and so
on so let's make it be form in and we'll
make some a class-wide variable CS or
simply part form in its going to be a
string profile picture it's going to be
a string and we can use this the form
name is equal to the sort user social
Facebook but Theodore dot form M and
this profile picture is equal to this
that user of social don't feels like dot
beta dot profile underscore picture
inside of our home to an HTML we can get
rid of this welcome to the home page and
we can add an eye on cards inside the
card we can make an image with the
source of the profile picture I'm going
to give it a height of about three
hundred and then slide the eye on card
content I'm simply going to display
deform in if we run this on the device
when we see the authenticated user we
should now have a cards with the profile
picture and before ma'am with the
ability to also log out so if we click
log in with Facebook
we can see that it gives us it's very
pixely at least profile picture and to
the name of Paul Halliday if we click
logout that will log us out and probably
click login again you'll notice it takes
a little bit of a while that's because
it's got to authenticate with the server
so if you found this video useful and
you think or you have implemented this
in your ionic 2 up then hit that
subscribe button because that supports
me a lot and of course check out learn
ionic 2 coms for more information my
name is Paul Halliday and I'll see you
in the next video</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>