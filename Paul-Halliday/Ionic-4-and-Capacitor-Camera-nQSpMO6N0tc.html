<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Ionic 4 and Capacitor - Camera | Coder Coacher - Coaching Coders</title><meta content="Ionic 4 and Capacitor - Camera - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Paul-Halliday/">Paul Halliday</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Ionic 4 and Capacitor - Camera</b></h2><h5 class="post__date">2018-03-28</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/nQSpMO6N0tc" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">the ionic framework team of building
ionic fought this moment and he may have
seen my videos on ionic four and view
but also the building a project called
capacitor this makes dealing with net of
air P is much easier on the device and
mobile web at the moment capacitor is
currently in alpha so I would expect
everything to change throughout this
video or at least be potentially
changing but one of the great things
about capacitor is the fact that I can
be used without ionic so you can simply
use whatever UI framework you want and
you can build and use these plugins so
what we're going to do is make a new
ionic application integrate capacitor
and get that so we can take a for tour
with the camera on the device so first
up we want to be inside of the terminal
so we want to say ionic start and the
name of our application will be called
cap camera and we'll use the blank
template to do that it's gonna ask me to
upgrade the ionic CLI but at this moment
I'm gonna say no but I would suggest
that you keep yours updated and next up
it's gonna ask whether we want to
integrate Cordova with the project
usually we would say yes at this point
but as we want to use capacitor I'm
going to select no this will then that
run and install our project on our
computer it will take some time to
download and install the dependencies so
give this a couple of minutes go make a
copy and come back once that has
finished we can see the intercamp camera
and i'm just going to run npm run built
and this will create a WWWF uh this will
be required for the next few steps so i
just let that build up next we want to
install the capacitor CLI and capacitor
core go ahead and do that inside of your
project and because capacitor comes
along with its own splash screen we need
to uninstall the Cordova plug-in splash
screen if we don't do that we would have
a conflict so by doing this our
application will work correctly next up
we want to initialize capacitor so we're
going to use
px or MPX does is it similar to NPM but
NP X allows us to run a command once so
instead of having to install this
globally on our machine which is
continually runner and it doesn't
actually exist on the machine so we want
to say NP x cap and net and this will
initialize a new capacitive project the
app name will be capacitor camera and
the app ID will be com dot and then
whatever you want to call yours so I'll
just have the call it pH dot camera as
you can see our capacitor project is now
ready to go and we need to add some
platforms I'll be adding iOS in this
instance so let's go ahead and do that
with NP X cap add iOS this will go ahead
and install the iOS dependencies and as
you can see and needed those web assets
from the www folder that was why it is
important that we build the project
earlier on
so we've now integrated capacitor with
ionic so let's open up our project
inside of Visual steal your cords the
first thing that we want to do when we
want to add the camera to an iOS project
is head over to Iowa's up inside of app
we then want to add the info.plist and
when we're using the camera it's
required by iOS that we must have this
NS camera usage description so by
default it exists and you see that is to
take photos and video so we don't have
to worry about this at the moment but
there may be some plugins in the future
that you need to add extra things to
this list for Android it's a similar
thing we need to add the permissions for
the camera and reading to writing to
external storage to our Android manifest
we're gonna head over to the home the
HTML and we'll change this to ionic
capacitor inside of ion content we want
an image and a button the button can
have the text of take picture and we'll
set the ion button attributes to this
button one thing is that collects the
button we want to fire a particular
function and that function will start
off the camera so that we can take a
photo so we'll add a click event and
we'll call this take photo so the user
will now be able to select the button
and we want the image to then appear
inside of this image so to do that we
want to set the source of the image
equal to the image we get back from
taking that photo let's go and make
these two things inside of the home
component to start off with we'll need a
tick for door function and inside of
here we want to take the photo and set
the image that we get back from the user
equal to the image that we want to
display so let's make an image and that
needs to be if types if a resource a URL
what exactly does this mean but we need
to import that from angular platform
browser to start with but you may have
seen a video on my youtube channel and
the past about dynamic URLs we looked at
this with YouTube and importing YouTube
videos and what essentially we need to
do is tell angular that this image here
should be trusted next up we need to
import capacitor and the plugin so we'll
import from at capacitor slash core and
we'll need plugins camera result-type
and camera source we can D structure the
plugins to take the camera so this will
give us access to the get for all
methods and we can then make a result
and that will be equal to camera dot
gets a for all you'll notice that we hit
a dot at the end of this that we do get
back F promise so we can take advantage
of a sink and a width let's make this an
async function and a weight on the
result this means that the value of
guessing that photo will be assigned to
this result a variable we need to pass
in an object and that object will allow
us to configure the camera or sadly
quality equal to 75
we'll allow the user to edit the photo
will sad the source of the for all equal
to camera source dot camera but if you
wanted to you could also set this to be
something like camera source dot for
doors and we also want to set the result
type let's make that the camera of a
result type dot and as you can see we
can either have a URI to the file path
or the base64 result will sound like the
base64 for now but DV careful with this
because you will get back in massive
string and that's not great for
production and performance so we have
this base64 result we need to tell
angular now that we want to set the
image by saying this not image is equal
to results but we need to ensure that
this is sanitized and that's done with
the Domus sanitizer
so from angular platform browser let's
add the Dom sanitizer we'll also need to
inject this using private's dormice
sanitizer of type Domo sanitizer and we
can say that the results of this image
is this doma sanitizer dot bypass
security trust resource URL and we want
to do this for the results and the
result don't basics default data
hopefully now we've done everything
correctly how do we then boot this up on
our device and at the same time take a
photo well now we're back over to our
terminal and I want to build our project
again because we're currently not
serving the project so we need to
rebuild that with NPM run a build once
this is completed we need to run npx cap
copy and this will copy over our ionics
www folder over to the capacitor project
so we need to open this now inside of
Xcode or Android studio if you want to
run this on an Android device so let's
run an NP x cap open iOS
in side-effects court we want to make
sure that we have up selected and we
want to run this on our iPhone device if
you run this on a simulator you'll find
that the camera most likely won't work
so that's at the play button so here we
are we have our application we can then
head take photo and by doing so we can
then take a photo with the device's
camera we can select to use photo and
when we do that our photo appears here
on screen so that's how we can use a
capacitor with ionic to take photos on
our device thanks for watching if you
found this useful
hear that subscribe button to stay
updated with more content and check out
my ionic courses and Buck over it at
Paul Halliday dot IO
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>