<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>State Management with Angular @ngrx/store | Coder Coacher - Coaching Coders</title><meta content="State Management with Angular @ngrx/store - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Paul-Halliday/">Paul Halliday</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>State Management with Angular @ngrx/store</b></h2><h5 class="post__date">2017-05-15</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/gIS8O8MB99U" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">welcome to lead lest our client has
requested that we make a lead storing
application so that they can access
their leads quickly and easily the
application consists of two major
components the lead to form control
components and at the lead component by
the end of this lecture we will have
implemented ng rx store we will have
tested and created in new a reducer
function and will have hooked up all of
the functionality on screen writing very
little codes so let's first make a
reducer so that we can test the addition
of items from our lead list let's make a
new folder named reducers and inside of
our reducers folder we'll make a lead
reducer es our reducer is expecting some
actions so let's define the actions that
we can expect within our application we
can expect to add elite and remove elite
we can then export a function from our
reducer named lead reducer and this can
expect to take its stead and our states
will be a type lead array so let's
import our lead model our lead model
contains everything we saw on the form
and an ID we can set the initial state
to simply be an empty array and whenever
we're changing our state's via the
reducer we'll also need to pass in an
action we'll need to import action from
ng RX / store and whenever we pass an
action to our reducer our reducer will
switch on the action it will say what
action am I expecting and we have the
following two actions such as a delete
and remove lead so let's switch on the
action type in the case that the option
is add lead
return the current speeds concatenated
with the pair Lords be tailored in this
circumstance is the lead that we add
from our form in the case that it is
remove lead will want to return a new
version of the steps filtered for
wherever the lead dot ID does not match
the action payload dot ID in the events
that we don't pass an unction type at
all we can use default and then that
circumstance that we can return these
steps now that we have a basic producer
I can either add or remove leads let's
write a test to ensure that the add
function works as expected make a new
file named lead doraji so spec OTS
adding the dot spec PS ensures that
karma picks this up as a test file we
can start off by describing what it is
that we're going to test so the describe
function is essentially the overarching
scope for example our lead reducer so
let's add the description lead reducer
inside of our describe function we will
give it some spec definitions and the
definitions at this point will simply be
its should add a lead to the list I'm
using the word list interchangeably with
state at this point and within our spec
we can add an assertion function the
first thing that we'll do inside of our
assertion function is set up some
initial spit we can say Const initial
steps shan't be of type leader in and
simply equal to an empty array because
this matches our producer as you can see
our state is initialized as an empty
array you'll have to import our lead and
then we need to find a lead action and
that lead action will have a type of add
lead when our reducer sees this ad lead
type it will return in new space with
the addition of the
dear Lord we can add a payload and some
test data to pass along to our stats all
we need to do now is dispatch this
action to our reducer and compare the
length of both the initial speeds and
the changed steps so to capture the
action we'll save the change step should
be a type leader air and equal to I will
leave reducer which we'll have to import
and this expects instead so the initial
state will be passed and the action will
be the lead action our certian at this
point would be that the initial state
dot length so the length of the initial
state array is zero should be less than
our changed state length so this is the
length of the array after we've added
our action if we run our tests by saying
ng test this will use the comma test
runner to run the reducer spike that
we've just created we can see that it
was executed and the assertion of our
test was indeed successful if we were to
instead change this to say that the
initial speed shall be greater than that
be changed it's dead
we should find that our test does now
fill and this is because it expects zero
to be greater than one now that our
assertion is correct and our reducer
works as we expect we can add this
functionality to our component inside of
our root module we can then provide this
store
through our our location by using the
store module and from within here we
have a provider store method this takes
a reducer and a potential initial spit
for now we're just going to add the
reducer that we created earlier
so ensure we import that and remove the
initial space to add the ability to add
a lead to the form all we need to do is
dispatch the event that we logged out
inside of our test
this is now as simple as writing a
function named a delete to push an
action to the store we'd have to get an
instance of that store this requires us
injecting store and also creating an
interface named upstairs from within the
interface we can export the lead array
and if we wrote any other reducers
inside of our application this is where
we'd add them we can then dispatch the
same action as our lead reducer spike
but this time the input is reflected
inside of our ng model and we have the
ID inside of the class we can then add
the add lead click event to our button
and finally because our speed isn't
observable we now just need to subscribe
to that event we can capture this by
injecting our state into our route
component and then subscribing to our
leads from within the store if we then
add a lead from within our browser our
application is updated via our state</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>