<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Using ViewContainerRef and TemplateRef to Create an 'NgIf' Inspired Directive in Angular 4 | Coder Coacher - Coaching Coders</title><meta content="Using ViewContainerRef and TemplateRef to Create an 'NgIf' Inspired Directive in Angular 4 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Paul-Halliday/">Paul Halliday</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Using ViewContainerRef and TemplateRef to Create an 'NgIf' Inspired Directive in Angular 4</b></h2><h5 class="post__date">2017-04-21</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/XEOf5e-E_9k" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey it's Paul so so far we've like to
ngf with luck to ngf else and today
we're gonna like a creating our own ngf
and this is gonna be simplified in
comparison to the actual ng-if
implementation but it's close enough
it uses something called the view
container reference and the template
reference let's first off have a quick
recap on ng-if so I have a paragraph tag
here and if I type asterisk ng if and
then based on a particular value which
I'm going to add to my component
I'm going to say value is equal to true
so this means a short Paul Halliday if
value is equal to true and as we
expected we do get our value let's make
the value false and the value is no
longer being shown because we've set the
value to false so let's investigate this
a little more what's happening here is
we have this asterisk and the asterisk
is effectively shorthand for this ng
templates and inside of the template we
have a paragraph tag with some text
inside of it and on the template we are
using the ng if structural directive and
we're saying ng if value and a comment
this out for a second Ben sure this
paragraph tag
as you can see the value is false so we
don't get our text let's make it true by
making the value true we get our text
back again so then how would we write
our own ngf let's make a directive so
we'll use ng g d so ng generate
directive and we'll call it my ng F
we can see that the directive was
created and was also updated inside of
our module don TS we can head over to
our directive and for simplicity sake
I'm gonna simply call it my ng-if and
we'll need to import a few things so
we'll first off import the view
container reference and the template
reference we'll inject the view
container as private view container and
then the template reference so privates
template reference and we can also
implement on in it
now the actual ngf implements on changes
but let's have a look at on in this for
now so ng on in it and when this
directive is initialized we've got a
check for a particular value if that
value is true or false like was then
inside of the components we are going to
show the contents inside with the
directive if not we're simply going to
clear the view like so
make a billion so we'll just have Const
condition is equal to true and we'll say
if condition then we want to say this
stuff you container doc creates embedded
view this allows us to essentially
inject the templates using Vista
templates inside of what will be our ng
templates so if this was true we would
see our pool Halliday because we'd be
creating the paragraph tag with the
templates like so
else if the condition is true
so this w container clear so I'm gonna
destroy all the views inside of the
container like I said this is a super
simple implementation we're just looking
at how these things work and how we can
potentially use them in our applications
so right now if we comment this out and
we make a paragraph tag and say Paul
holiday once again and this time we add
asterisk because remember we want this
to be inside the ng templates my ng F
and we saver we find that we get Paul
Holliday if I then make this condition
equal to false and so ever once more we
no longer get the text inside the
paragraph so you can see we're
effectively doing the same as ng F but
ng F would probably slug for change
events and if there's any change events
to that a variable and we would also
need an input but at the heart of it
we're looking at a view container and a
template reference to prove that the
asterisk is making the ng template we
can do a similar thing as before so we
can make an ng template and inside of
the template we can say something
different this time
like subscribe for more videos and
inside of the template we can add our my
ng if and if we save the file you can
see we don't see the text but if we make
the condition equal to true we see
subscribe for more videos so hope this
allows you to have an idea of how the
view container reference and the
template reference works at a high level
within angular 4
my name is Paul and if you want to see
more angular 4 videos let me know in the
comments section below and of course
subscribe for more videos if you want to
stay updated until then I'll see you
very soon in the next video</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>