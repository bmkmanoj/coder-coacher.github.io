<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>How to take a Screenshot with Node and Puppeteer | Coder Coacher - Coaching Coders</title><meta content="How to take a Screenshot with Node and Puppeteer - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Paul-Halliday/">Paul Halliday</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>How to take a Screenshot with Node and Puppeteer</b></h2><h5 class="post__date">2018-05-03</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/x3YCqPuAln4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hi there in this video we'll be looking
at using puppeteer which is in naud best
library that comes from the Google
Chrome team to take a screenshot of our
web page now this is quite easy because
the puppeteer library is effectively a
high level API that allows us to control
a headless version of Google Chrome so
as you can imagine with Google Chrome we
have things like keyboard Impa we have
things like form submission screenshots
PDFs of pages and much more so in this
video we'll be installing the library
inside of our project we'll be taking a
screenshot of the page and in general
we'll be exposed to the power of a
puppeteer so if you haven't already make
sure you have nor dgs installed you can
find it nor to hurt nor Jess the org or
alternatively install it with homebrew
we then are going to run NPM and it's -
why inside of a new folder and as you
can see this just makes us a
package.json with all of the default
values like so next we'll install Papa
Thiam I'm using NPM 6 so I don't need to
run - s to save this to our packaged or
JSON it happens automatically as you can
see when we do this it does need to
download a version of chromium and there
should be the latest version of chromium
and if you have a chromium installation
that you'd rather use instead of this
one you can actually point puppeteer
towards that but we're happy with using
this version so just let this download
depending on the speed of your internet
connection it's around seventy six
megabytes at this moment so it may take
some time or it may be very fast awesome
we've now installed the library so we
can require this by saying Const
puppeteer and user require of the
library puppeteer next up we might want
to make a function and that function
will be called take screenshot and this
will be an async function inside
we need to establish a browser and that
can be done by using a weights puppeteer
don't launch this now launches a browser
instance and if we want we can pass some
arguments at this point but for now
we'll just simply launch this this thing
gives us access to an instance of our
browser or we can use that to of course
perform a variety of actions so will now
create a page and that can be done by a
waiting on browser dot and as you can
see we can scroll down until we get a
new page this gives us access to a new
page which we can then control so as you
may imagine the page has a variety of
different elements we have everything
from click to close to content
forgetting be full HTML content of a
page but while looking for go to go to
allows us to navigate to your URL so
let's go to my site and we also now have
a handy page dot screenshot and as you
can see the screenshot method at this
point captures a screenshot of the page
we can optionally provide some
screenshot options into this page don't
screenshot if we look at the chords and
we look at these screenshot options you
can see that the interface allows us to
optionally add a path that's of course
the file path that we want to save the
image to we can if we want define it
type this defaults to a PNG but we can
also use a jpg if we want we can add a
quality to the image and what their
stars is will determine the file size so
if we want a really big or really high
quality image of course with user
hundreds and if we wanted a lower
quality image we'd use a number it may
be like 50 75 or even smaller than that
around 30 we can optionally take a
screenshot of default page now we'll be
good if you wanted to take the
Tyus crawlable body of a pitch we can
draw a bounding box with the clip
attribute here and this allows us to
certain X or Y and a width and a height
to determine a sort of clipping area of
the pitch and finally we have the option
to hide the default white background
which allows us to of course capture
screenshots with transparency so as you
can see we can do quite a bit here to
change the way that that screenshot
likes the main thing that we need at
this point is a path because if we don't
specify a path then we can see that the
image will not be saved to the desk and
that's what we want at this point we
want the image to be saved so provide a
path so let's provide some options and
the path will be slash images let's make
sure we have a directory called images
and that's done by using the make
directory command we won't need the
quality because that's of course a PNG
by default and we'll keep it lower we'll
set an MIT background equal to true
we'll also use the full page because we
want the entire scrollable body of the
page and I think we're happy with that
because both of these page elements
return a promise we'll also need to
await on these elements so that's a whit
on the page go to and the page
screenshot and we'll pass in at the
options after this is done we can await
on the browser clause because this will
then as we can see here close the
browser with all the pages and we can no
longer use that browser method from here
on out so this object rather is gone and
it should be considered to be disposed
of we then may want to put this inside
of some library that we have and we
would then of course use take
screenshots to take a screenshot and
hopefully we should see that we end up
with an image inside of our images
folder the only one thing we need to fix
now is a slight error with a path
instead
we want to see images and then the
screen shot name so for now we'll just
call this website dot PNG and at this
moment in time it's considered to be the
current working directory so this is the
route path at this point slash images
slash website dot PNG so if we open up
our terminal and we say node OGS or
whatever you've called your project it
should then go to Paul Halliday Doyle or
the link that you want because it's made
a new Chrome browser it's made a new
page its navigated to that page and then
taking a screenshot with the options
we've provided it should then close the
browser so it's out of memory and we
should be able to navigate to that file
here we are we can see the full body of
the web page on screen we can zoom in if
we want like so and we can do whatever
we want with this library to create
screenshots on the fly I mean I can
think it's tons of uses for this there's
already libraries built around the whole
sort of snapshot testing of websites but
I'd like to know what you think of this
video and what you think of puppeteer do
you want to see more poverty or content
if you do let me know inside of the
comment section blue until then hit that
subscribe button and I'll see you very
soon in my next video
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>