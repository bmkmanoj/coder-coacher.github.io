<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>(#7)  Ionic 3 and AngularFire v5 - Adding Shopping Items | Coder Coacher - Coaching Coders</title><meta content="(#7)  Ionic 3 and AngularFire v5 - Adding Shopping Items - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Paul-Halliday/">Paul Halliday</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>(#7)  Ionic 3 and AngularFire v5 - Adding Shopping Items</b></h2><h5 class="post__date">2017-10-21</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/vdCs9SxRoKc" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so what I want to do is create a service
so let's make a new folder named
services and inside of here we can
create a new folder once again called
shopping list and inside of the shopping
list folder we can make it shopping -
lists not service don TS so you may want
to add these things inside of your
owning application as part of its own
module but for this point in time we're
simply gonna add it in at this folder so
let's create a new class by using export
class this class is going to be the
shopping list a service as will be using
the constructor up to inject angularfire
database we will need to add the
injectable decorator and we can import
injectable from angular core so the
first thing I'd like to do is create a
reference to our database this is
telling angularfire which part of fibers
were interested in so let's make a
private shopping list reference and
that's going to be equal to shopping
list but ideally we need to have a
reference to the shopping list list
inside a 5 s so what we need to do is
say private database and that is going
to be a reference to the angularfire
database so that is imported from
angularfire to slash database and
because we now have a reference to the
database we can say that the shopping
list reference shall be equal to this
dont DB don't list then we want a list
equal to this shopping list but even
still we can type this by saying that
it's a type of shopping list items by
importing our item model and setting it
as the type using the left and right
brackets
so let's now get a reference to this
list so we can expose a method called
get a shopping list by saying return
this dot shopping list reference and
I'll return us the shopping list so we
can then display that inside of the
browser and I'd also like to make a
function called add item this will take
in an item of type item and we can
return this not shopping list reference
don't push
we'll push the item it to the database
and therefore would be able to view this
item by using the get a shopping list
function awesome so let's head back over
to our app module now and inside of the
app module we can add to the providers
the shopping list a service a shopping
list service comes from our services
folder and the inside of our services
folder we then have the shopping list
and the shopping list a service so we
now have the ability to add items to the
shopping list so let's go back to our
add shopping item don TS and inside of
here we can make a function called add
item if you wanted to make this more
testable you certainly could add an item
as an argument here and that we could
then take a reference to our shopping so
let's say private shopping it's going to
be a shopping list a service so we need
to import the shopping list service into
this page and then by using add item we
can say this don't shopping don't add
item and pass through the item we should
then get a reference back
so let's I said dot then pass through
the reference and I've got a consult log
the ref dot key and what this will be is
will be the key to the item that we've
added so let's open up our JavaScript
console go back to our ad shopping item
page and the final thing we need to do
before this will work is that a click
event to our ad button which will be set
to add item and pass through the item
I'm also going to remove the item JSON
for now and when we save this file we
can type in iPad pro a quantity of 1 and
a price of 700 so let's click Add and
notice how we get this key back
it looks quite jumbled but essentially
what it's doing is it's telling us that
we've added this item to our shopping
list and here is the key so that's
exactly what we wanted to do so what I'm
going to do now is navigate the user
back to the home page after that has
completed so that will be done by saying
distant nav controlled dot set route and
it will set the route to the home page
and if we really wanted to we could pass
through the ref key so potentially we
could set this here is enough parameter
by saying key is equal to ref key and
that's just in case we wanted to capture
this item again maybe on the home page
so if we selected add once more but we
could change this to be iPad pro and
maybe 9-inch price of which would be
like 500 and if we hit add it should
never get asked back it to that home
page so what we've done here is add an
item to the list
we can't currently view the items in the
list unless we look at the firebase
dashboards but in the next lecture we're
going to be displaying it here inside of
our home page so that's all coming up in
the next lecture</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>