<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Push Notifications with Firebase Cloud Messaging and Cordova FCM on Android | Coder Coacher - Coaching Coders</title><meta content="Push Notifications with Firebase Cloud Messaging and Cordova FCM on Android - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Paul-Halliday/">Paul Halliday</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Push Notifications with Firebase Cloud Messaging and Cordova FCM on Android</b></h2><h5 class="post__date">2017-05-20</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/IF09XbGfOu8" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">let's add push notifications with fibers
to our ionic application so I have if
Blanca ionic opera here called the FCM -
ionic and I'm going to add the firebase
Cloud messaging plugin this is an
unofficial Cordova plug-in but it seems
to interface with fibers cloud messaging
so let's add it to the project we can do
that by saying ionic Cordova plug-in
adds and then let's paste the end of the
Cordova - plug-in - fcm we'll save that
to the project as well with - it - a
save now with this you don't actually
need to have the fibers SDK within your
application but you will need a 5 s
account on your application inside of
the five s platform so we've installed
that let's now open up inside of Visual
Studio chords now at the moment if we
try and run this on the device as of
this bit the 18th of May 2017 it's not
actually going to work and that's
because the dependencies of the plugin
updated and don't seem to run on my
machine it might work for you but it
doesn't work for me so I'm going to show
you how we can fix that and then we're
going to move on with the tutorial so
hopefully this will work the second time
around but what we need to do is head
over to plugins then inside of this
Cordova plugin FCM if we head to source
Android and then inside of our SCM
plug-in McGriddle we have this class
path of Google comm GMS which is the
Google Cloud messaging service what we
need to do is instead of this + outside
of 3.00 you could try without changing
the dependencies but for me this doesn't
work unless I do this so once you've
done that we can then add our Android
platform by saying ionic Cordova
platform add Android and this will add
the Android platform with the changes to
those dependency so you won't have the
era that I was getting when we were
creating the project so now you can head
over to firebase and create a new 5 s
application and from within the
dashboards we can hit the notifications
tab and we can either add an
iOS or an Android application to get
started let's add an Android app and
it's now asking for an Android package
name so we need to supply a package name
here which we can find inside of all
config.xml so let's head back over to
the application and inside of here if we
head to our config dot XML and this is
in the root folder we can change the
name of our package from the starter ID
to something like calm doc pdh plush and
this is a unique identifier for your
application so make it whatever you want
and then inside a5s if we then say calm
philippi do eh push
and then nickname for the application is
going to be push notifications video and
we can leave this blank but if you do
want to add things like dynamic links
Google sign-in or phone number support
you will actually have to add the debug
signing certificate you can see how to
generate this hash inside of the
Facebook authentication video I do have
within ionic cloud
but for now we can click it register app
so we've done that we've registered the
app inside of firebase we now need to
download the Google services JSON file
so let's do that download the file then
we can click continue
here's an example here of the changes we
have to make to that plugin but for now
we can click finish because we've
already done and we have to take this
Google services JSON and put it in the
root of our project so the file that we
just downloaded let's drag that into our
project so in the roof folder we have
the Google services JSON it next to the
config.xml and the other things like
package JSON so keeper just in the root
now that we've registered our app we can
send our first message so what I'm going
to do is now run this on the device
because we're set up everything we need
at the moment as long as we start a
library Lord server we can continuing
pushing code to the device let's now run
ionic cordova run Android - L and that -
L will make it so if we change anything
on the PC here it's automatically
updated on the device
so here we have our application and
inside of the console we can see that
the five s Cloud messaging plug-in is
ready we have it talking here and it
received it talk and refresh so we
actually have give this clients here
talking and now we can push messages out
to this clients let's now do something
when we do push a message to this user
to back inside of our project and what
we need to do is head over to
declarations BTS and this is because
we'll be addressing our plug-in with the
FCM plug-in dot something and typescript
doesn't recognize this so we have to
declare a variable named SCM plug-in of
type any so the first thing I'm going to
do is inside of the home page I'm
essentially going to add the platform
and the platform is going to make sure
that the platform is ready before we try
and do anything with this plug-in and of
course you could put this logic wherever
you want but I'm simply playing it in
the home page for now and we'll get rid
of enough control because we're not
using that and we'll see a private
platform platform and we'll make an
async function named on notification and
this is going to determine the behavior
when we actually receive a notification
so if I was going to wait for the
platform to be ready or surround this in
a try-catch but when that happens we
will say FCM plug-in dots on
notification and on a notification we
can get access to the data callback and
for the moment we'll simply console.log
the data if there are any errors we will
look at that to Google console dot RDR
and we can add this this door
notification to our constructor of the
home page
you could put this inside of a different
life cycle but at the moment if we then
send a push notification to this client
or all clients we should see that
notification so let's see if we've done
everything correctly so back on about 5s
console let's say that send your first
message button and the message text will
simply be test and the application we
want to send it to is that comm dot PW
hey Josh if we could send we should see
the results of which inside of the
console and let's try by hitting send
message so we send that message and if
we take a look it inside of the console
we see this object come back here and
home the PS would be was tapped equal to
false now although you can't see
anything on the left here and that's
just a UI bug that is actually the push
notification coming through I'm not
entirely sure where that's coming
through is an error but at the moment we
can see that we do actually have that
push notification coming through from 5s
cloud messaging into our application
let's take this to the next level and
make an alert here on screen with some
payload data from firebase Cloud
messaging so back over on our console
let's send a new message again and I'm
going to say test is the message text
but we can add some advanced options of
the bomb here and the advanced options
that we can send for example add a title
and this is shown to the end users as
the notification title so if we said
push notification test as well as this
we can also add some custom data so if
we potentially have a message and that
message was hello world we then get that
message as an object over on our
application we can also send some sound
so let's enable sound
we have to select the app once again and
if we click send message and hit Send we
have the message coming through now as
well as was Tab 2 equal to false and the
result of our message key the value is
hello world so we could do something
like display an alert let's add the
alert controller to the project by
saying private alert alert controller
and importing that we could then say
this alert creates and the message would
be the theater dot message because
that's the notification message and then
we could present that to the user so
quite simply use case once again
and if we go through and fire a message
back over you can see on our device we
then get that hello world we no longer
gather logged out to the console because
we are not logging that out as instead
we are showing an event but we keep
getting this error in the console thing
or case I'll have to imagine that we're
doing something wrong with that error
message so instead of the console era
let's simply change that to console
don't log and I'm going to change that
to result so now we have the ability to
receive 5s Cloud messaging notifications
on our Android device with regards to
the or care I actually think it's more
so we are looking to see whether this
has been registered correctly because
we've not done anything and we're
getting this result logged up to the
screen and we have never sent anything
so after imagine it's bad ID live or
what you'd want to do is use the push
notification plug-in to then display a
push notification when we receive a
notification from firebase so to wrap
this video up what we can do is send
that push notification from firebase
Cloud messaging to our application our
application can then display that
information on screen and in the future
we'll look at how we can use the push
plugin to combine these two things and
display a push notification on screen to
the user in future videos will also like
it setting this up for iOS and the
differences involved in that as well as
some other personal
implementations this is one of many and
there are other things on the market
such as the ionic push one signal and a
few others</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>