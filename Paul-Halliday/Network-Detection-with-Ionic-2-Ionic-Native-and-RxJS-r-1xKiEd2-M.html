<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Network Detection with Ionic 2, Ionic Native and RxJS | Coder Coacher - Coaching Coders</title><meta content="Network Detection with Ionic 2, Ionic Native and RxJS - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Paul-Halliday/">Paul Halliday</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Network Detection with Ionic 2, Ionic Native and RxJS</b></h2><h5 class="post__date">2017-04-01</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/r-1xKiEd2-M" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello my name is Paul Halliday and today
I'm going to be discussing ionic to
network connections so in this video I
will be creating a simple application
that will show it toast whenever we
connect or disconnect from the internet
it's also going to show whether we're
connected via Wi-Fi 4G 3G and so on
we'll also look at observables and
subscriptions with in this video we'll
see how we can subscribe to a data
stream and how we can unsubscribe when
we no longer want that data let's get
started
run ionic starts network blank - - V -
and then we need to install the Cordova
plugin so let's run ionic so again adds
Cordova plug-in network information as
will be interacting with the plug in via
ionic native let's install the ionic
native module so npm install at ionic
native slash network and we can save
that to the project i'm going to be
running this on my android device so i'm
going to add the android platform with
ionic platform adds android and now we
can open up vs code so the first thing
that i'll be doing is going to source
app app module and i'll be importing the
network provider from ionic native we
can see we're doing this as status bar
and splash screen we just need to do it
for network so imports from that's ionic
- native / network will use a network
provider you can import this and our
providers here by adding network once
we've imported at the top then we can
head over to pages call home TS and we
can import network within home so we can
use import network from ionic native
network we can then inject the inside of
our constructor so private network
Network lots of networks and we can then
start using it so ionic 2 has many
lifecycle hooks this means a particular
events in the application for example
when you're leaving a page or entering a
page we can hook in to them events and
run specific functions so I'm going to
hook you into the ion view did enter
hook and this allows me to run code when
the view has entered so when somebody's
gone on to the page so within the ion
view did enter I'll be checking to see
whether we've connected or disconnected
and to perform a check we'll be using
something called a subscription so we
can subscribe it's about event to do
this we'll run this got Network dot on
connect and like I said we'll be using
dot subscribe now if you've used
promises before subscriptions are kind
of like promises but instead of using
dot then and only getting the result
once when it's finished
instead we subscribe to the data stream
so if anything happens we consistently
get those results so we can subscribe
here and we can take the data and for
right now will log out to the console
and if there's an error we'll simply use
console the error and we'll sure babara
we can do the same for disconnect so
this don't network dot on disconnect we
can subscribe to that data stream we can
log out B data when we do connect and we
can log out the error if there's narrow
right now if we test this on a device
that we should get a console log when we
connect or disconnect from the internet
let's give this a try all right so it's
running on a device and we've currently
connected via Wi-Fi I'm going to
disconnect and you see we get this event
here in the console and we can say type
offline a means we've gone offline if I
reconnect
we get in other events but this time
type is online and the awesome thing
with observables is that we can
consistently subscribe to this event
so if I go offline again we're not
limited to only receiving the data once
this happens no matter what for as long
as we keep it subscribing to the event
so to make things a little more
interesting I'm going to show it toast
at the bottom of the screen when we
connect or disconnect and we'll tell the
user what type of connection that they
have so you're connected to the Internet
via 4G or via Wi-Fi or you're offline
and so on
so to do this let's import the toast
controller from ionic angular and let's
inject the inside of our constructor so
private tours took toast controller we
can make a function and that function we
can call display network update and we
can pass in the connection state so
whether we're online or offline we know
that that's going to be a string so we
can classify it as is string so in here
we can create it toast and simply say is
this toast doc creates and the message
is you are now connections there so
that's effectively you are now online or
offline if you've never seen this way of
concatenating strings before it's
identical to you are now plus
connections there then we can present
the toast another thing that we may want
to do is tell the user what type of
connection we have so I mentioned like
Wi-Fi 4G and so on and we can access
this data by running this network type
anytime we ask for this it's simply
going to return your strength with
whatever type of connection we have the
good thing about this property is that
it's automatically updated every time
the on connect or on disconnect event
happens without us having to do anything
so we can simply say let network type is
equal to this don't network type and we
can modify our message
to see you are now connection step ie
online offline via network type we can
enter our message as about three seconds
duration the final thing that we have to
do is modify our subscription statement
so I'm going to pass and firstly going
to log the data out to the console
because we're still debugging and then
I'm going to run this dot Display
Network update data don't type so we're
passing at the connection speed here get
a dot type for example online or offline
into our function which simply says you
are now online offline by the type which
is updated here when we either go online
or offline let's do the same on our on
it disconnect so we can log I'll be data
and say this dot display network update
data type if we run this on the device
we should see we're now greeted with a
message every time we go online or
offline so we are currently offline when
we go online via Wi-Fi we get you are
now online via Wi-Fi if we go offline we
get you are now offline via nan and if
we connect to mobile data we get you're
now online via forge a great that's
everything what we expected with our
current architecture if we make another
page or we navigate away from this page
the event on connect and on disconnect
will still be subscribed to so this
means if we go to a settings page and we
disconnect we're still going to get this
toast that appears here we could
abstract this to a provider and I would
recommend you do so but for now we're
simply going to like it unsubscribing
from the event so to unsubscribe from an
event let's import subscription from
rxjs slash subscription we can then make
class white variables that we can assign
to our subscriptions we can then
unsubscribe by hooking into that
variable unsubscribe this will make
sense in a second
so we can create a connected a type
subscription remember we just import
subscription here at the top and
disconnected if type of subscription -
we can update our on connect and on des
connect to reflect this so this stock
connected is equal to this but network -
on connect and the subscription and do
the same for disconnect so this got
disconnected is equal to this but
network - Inc disconnect and so on we
can then hook into the I on view will
leave lifecycle hook and before the view
leaves to go to a different page we can
unsubscribe from these events so we can
run this dot connected dot unsubscribe
and this dock disconnected don't
unsubscribe I'm going to quickly edit
home dot HTML to reflect these templates
so homepage and inside the home page
will have a button which I'm either
getting us to the settings page sort
button and the click event will be
navigates to settings and we'll simply
search settings then in our command line
we can run ionic G page settings and
that will generate a settings page will
then have to add the settings page to
the project so in app module OTS we can
import from pages settings settings you
can import the settings page and then we
have to add it in both our declarations
and our entry components the final thing
to do is to write the navigate to
settings function and this will simply
run this - enough control dot push and
then the settings page you'll notice
that it's red and that's because we must
import so imports from settings settings
we need to import the settings page so
now on our button it will navigate to
these settings but as we're leaving here
view it will
also unsubscribe from both the on
connect and on disconnect subscriptions
so firstly let's check to see whether it
recognizes us AG or offline so I'm going
to disconnect from mobile data and there
we go we got we are now offline by an on
and if we go back online we get you are
now online via Wi-Fi which is what we
expected and if we go to the settings
page and now I'm going to disconnect
from the internet we do not get the
notification saying you are now
disconnected from the internet if we
remove the unsubscribe events inside our
eye on view we'll leave and try it again
let's firstly try reconnecting and as
expected we get the toast but now if we
head over to the settings page and we
disconnect you'll notice we still get
the toast that says we're offline and
that's because we deleted the
unsubscribe event when we left the view
so I'm going to add those lines back and
will no longer get the message when we
change pages and advise but you take
this chords to ear provider and then you
can simply call on connect and
disconnect to your service as well as
run the toaster from there I hope this
video has helped in understanding online
and offline detection for ionic 2
applications if it did then hit that
subscribe button to stay updated with
more ionic content and of course I'll
see you in the next video</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>