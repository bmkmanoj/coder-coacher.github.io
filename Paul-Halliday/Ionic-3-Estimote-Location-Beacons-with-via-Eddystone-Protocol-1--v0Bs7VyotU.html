<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Ionic 3 - Estimote Location Beacons with via Eddystone Protocol (#1) | Coder Coacher - Coaching Coders</title><meta content="Ionic 3 - Estimote Location Beacons with via Eddystone Protocol (#1) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Paul-Halliday/">Paul Halliday</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Ionic 3 - Estimote Location Beacons with via Eddystone Protocol (#1)</b></h2><h5 class="post__date">2017-04-20</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/-v0Bs7VyotU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey my name is Paul Halliday and today
we're going to like it using ionic three
and the estimate location beacons to
connect to our beacons we're going to be
using the Eddystone Bluetooth protocol
this is an open protocol that supported
both on iOS and on Android
i beacon is another communication
protocol that the beacons can talk to
but that is officially only supported on
iOS we're going to be creating it cross
a platform a mobile application using
the ionic framework this is primarily
using angular and Cordova to get started
with ionic I have a video on that
already and we install all of the
dependencies I've got a link to that in
the description so if you want to get
started using cross-platform mobile
technologies follow that video first and
then come back to this one
we can then run ionic start by running
ionic starts we can create a new ionic
project we're greeted with this webpage
that allows us to create an app name a
directory name as well as an app ID in
this section of the estimate location
beacon series will simply be connecting
to our beacons so we won't need anything
complex I'm going to call the up my
Eskimos and for the app ID I'm going to
add comm dot pw h dot my app now you can
call this whatever you want and
obviously has to be a unique bundle
identifier if you were to put this on a
deist or at this moment in time we're
not looking at producing our app for the
store we're simply looking and
connecting the app to the beacons so the
next thing we'll want to do is select a
template I'm going to select the blank
template as I don't think we'll need a
side menu at this point and we certainly
won't need any tabs then I'm going to
press continue this will create the
application and we can check the
terminal and you can see within the
terminal that it's installing the
packages and creating a new app at the
location of users pull Bev my estimate
this is going to be different for you
obviously and I'll be based on the blank
template it don't say let's create an
ionic to point X up but that actually is
creating an ionic 3 out we can then
either launch our app from the user
interface or run ionic Club from within
the command line this opens up our
application in a mobile view you'll
notice that we have the iOS Android and
Windows options if you don't have these
already you'll have to take the
platforms at the top right of the screen
so I've got iPhone Android and Windows
taked for now let's just take Android so
we have one app in the middle and then
we'll go on to the estimate cloud inside
of the estimate cloud we can enable any
storm for our estimate location beacons
so over at cloud to estimate comm you
should have a list of beacons I'm going
to select the beetroot beacon
and from within at this beacon I've
enabled Eddystone UID Eddystone URL I've
also given an air URL I've enabled TLM
and I've also enabled telemetry as well
as been able to edit this from the
website you can also edit from the
mobile application on the app store to
edit the information about your beacon
inside of the estimate cloud ensure to
scroll back to the top and click Edit
settings from here you can change
everything from the name of your beacon
to enable and stuff like Eddystone UID
URL and so on like I said I've got all
the Eddystone stuff enabled and I
suggest that you enable it to as we'll
be using the Eddystone protocol within
this series
now that we've set up our beacons you
can test them on a mobile device using
the app and if everything works as
expected for example you can see the
beacons on the app and you can connect
to them let's now make an app that
connects tables beacons
so at this stage in the process we're
going to keep the implementation quite
basic and then in future videos we'll
expand on this topic more and more as we
get more comfortable using the eddy
storm protocol I like to use Visual
Studio code for this so ensure that you
open the project up I'm going to use
code dot once you've done that you
should have your project open in your
editor from here we can head to our home
page under source pages home dot HTML
this is the view for our home page so
we'll change this to Eddie storm extra
malt beacons let's save the file and
instead of the text inside of the iron
content let's simply add a div with the
paragraph tag of place order
if we look back inside of our
application we can see the new title for
the home page as well as some content
inside of our app if we wanted to we
could change the color of the navbar by
same color primary and that would make
the navbar blue
the next thing that we have to do is
install the cordova plugin for eddie
storm so if you head over to your
command line you can run cordova plug-in
ads then it's cordova bash plugin
- Eddie storm
by using - - save that will also commit
the plugin information - config die XML
and we can take a look at that if we
click config the XML here we can see
that the Cordova plug-in Eddystone has
been added to our project in future
implementations of this will transfer
this logic to its service but for now
let's simply do inside of our home page
so inside of the div inside of our ion
content we can make an ion card now the
iron cards will have an ion cards header
and inside the header will have start
scan
so this is the point in the application
where we won't be user to manually start
the scan by doing it this way it allows
us to test our application and we can
basically go from a point where we're
not scanning at all to scanning for
beacons inside of the ion cards content
perhaps you can add a little paragraph
tag which simply says something like
click the start scan bun to scan the
beacons you can be as creative as you
want at this point
underneath ol paragraph will have a
button and we'll add the ion - button
art review that I'll give us styling as
far as iOS Windows Phone and androids
and the button can have a click event by
point in the brackets here we can attach
it to an event within angular so the
click event will be start scanning for
beacons
feel free t-shirt in this method if you
want but at this point in time I want to
be as ex planetory as possible so inside
of a button will simply have the text
scan and we can save that file if we
take a look inside of all of you now we
have a start scan click the Scan button
to scan for beacons so the ID rays of
these are clicks this button we should
of course starts gunning for beacons if
we click it right now we find out that
it's not a function so let's write that
function
inside of our homes OTS we can write
start scanning for beacons
and it's usually a good idea to ensure
that the platform is ready before we
start making any net of calls to the
device so this means we need to import
the platform from ionic angular and we
also need to inject it inside of our
constructor so let's do private platform
and then let's say a platform this
allows us to then say this the platform
got ready and this returns a promise so
let's see then so when a platform is
ready we can start scanning for beacons
now because there isn't at this moment
end time in April of 20th 2017
there's no ionic native wrapper for Eddy
storm so we have to use Cordova
so in order to use cordova without
having any typescript errors we can add
to our declarations dont DDS we can add
declare var cordova f-type any
we save that file we can then use code
or run here without any issues
after we've ensured that the device can
actually make some mid of course we then
need to scan for beacons now to scan for
beacons
we need to use something called the evil
things Cordova plugin now to use the
evil things plug-in inside of our home
to TS we'll have to add it to our
declarations DPS if we didn't otherwise
would get some type issues with
typescript and we wouldn't be able to
build our project so let's say declare
var evil things of type any
now it's not usually a good idea to
declare things as any but as we don't
have an ionic native wrapper for this
plug-in at the moment or any typescript
wrapper we have to deal with it by using
declare var evil things Eddie and you'll
see why in a second
so ensuring that the platform is ready
we can then say evil things got
Eddystone don't start scan'
and this is going to return us back some
beacon data and then after that we can
simply log on the beacon better to the
console
so this will start scanning for beacons
and if it finds any beacons it will
logger out to the console so it's fairly
self-explanatory at this point we are
then going to check to see whether there
are any errors and if there are any
errors we're going to simply say console
error and passing the error message
so right now waiting for the platform to
be ready then we're using the Cordova
plugin but we installed two starts
coming for beacons
we're then taking the Beacon Theater and
logging out to the console if there are
any errors we're going to log the errors
to the console as well we're not going
to do anything with them at this point
but we will in the future so let's take
a look at this on the device so the
first run this on the device and sure
that you've got the Android SDK
installed if you want to run this on
Android and ensure that you have the iOS
SDK installed by using Xcode and you're
on a Mac if you want to run this on iOS
I'm going to run this on Android so I'm
going to add this to eye on explan form
ads Android that will add the Android
platform to the project
as you can see them stalls all the
plugins on the platform
so then we can run ionic run Androids
and I'm going to use bash L - L start
their library Lord server similar to the
lab on the device itself if we change
any of the cords here on of our project
will find that it instantly updates on
the device we get an error at the moment
that our address is in use which means
we this made see quickly terminate the
ionic lab commands by using control C
and then if we start the library Lord
server again on the device will see it
on the device
so everything is loaded on my device but
you can't currently see it on the screen
let's rectify that by using Chrome colon
slash slash inspect we can pull up the
developer tools for B device you can
then see what I'm seeing on my screen
it's not an emulator but you simply see
more I see on the screen so if we click
scan we find out that nothing happens
and that's because we have to give the
device the location so for a solo we
then start to see these addresses coming
in now these addresses are being pulled
and each time to being pulled we're
getting the results for them addresses
if we click one of these addresses you
can see that we get the address for the
beacon we also get the URL stuff like
the temperature the RSSI and much more
this allows us to get stuff like the
metadata from the beacon as well as the
data that can push out with the URL here
now we don't simply have to send people
to a particular address we can also push
sensor data and health data and a
variety of other stuff that you can
think that would be good for contextual
usage now the sky is the limit as far as
actually displaying things inside of
this URL here one thing I did actually
notice is that there's a limit to how
much bites you can send a cross from the
beacon itself so you can't put a massive
address in there which is why it's a
really good idea to shrink the address
using bits don't ly anyway we're sort of
getting ahead of ourselves a lot over
here but you can see that we're getting
the results from the beacons if we head
back inside of all home to HTML we no
longer want to display this information
about starting the scan because the scan
has already started so now we can use a
structural directive from angular for
using NGS else
so that's other let's add the asterisk
NGS is equal to and for that we'll need
to say if the beacon data does not exist
we'll display this card
but if the beacon debtor does exist will
instead sure be beacon debtor
so let's now add air beacon data and for
now we're going to be horrible and put
this Annie you should probably make it
tight for this in production and we will
make a tape as time goes on but for now
we'll simply leave it as and any I'm
going to refactor the beacon data from
here and I'm simply going to call it
data so we can understand a little bit
more and don't get confused as to where
things are actually being pups we can
now say this top beacon data is equal to
the data that we receive back from this
gun then then side of all home to HTML
we can see ng F and if there's more
beacon Vader will sure this cards we can
add XM e call on at the end of that and
then we can see else so the else is
going to be a different template so we
can add a template using ng - templates
and inside of the template we want to
instead display the beacon data it would
be really good idea to put this in deter
its own components and we should and
will in future videos analysis for
implementation so let's have an eye on
cards and inside of the card we'll have
the iron card header once again but this
time will be some information and
metadata about the beacons themselves
inside of the iron card contents we'll
also have some data about the beacons
Finnell will simply just say a beacon
found and let's have a paragraph tag and
inside the paragraph tag will say yay
because we found a beacon let's check
that everything works so what we need to
do at this point is then give our ng
template what is known as a template
variable we can see what the hashtag
beacon found so what we're essentially
saying now is
not be container we are going to short
this card but if there is beak endeavor
we can sure be can count let's now run
our scan again so a quick scan and
before we do that I'm actually going to
console that log B beak and data so now
we're logging out the results to the
console as we click the scan button you
can see scanning is already in progress
because I click that twice but you can
now see the results of the scan so we're
getting this data back but your notice
was still displaying the old template
now if you know anything about angular
then you know we've got the beacon data
we're logging out the beak and ear
itself so there definitely is something
in the beacon data and inside of our NGS
we've got a pretty sound filter at this
point we're saying if there's nobody can
data we show this else sure the other
template so why is this happening this
is happening because the change
detection is not actually being picked
up within angular so instead we have to
import change detector ref from angular
call we have to inject this so the
privates change change detector ref
inside of all constructor
and instead we want to update the UI at
a particular interval so let's for
example every we'll call it one second
we will instead see this not change dot
detect changes and we'll put that in a
timeout of one second so every one
second will detect for any changes so
let's have a like in the application
once again now that we've implemented
that change detector reference so if we
start again from scratch we're going to
click scan and now we see we have it be
confirmed and that's been updated
because my beacon data is now being
shown within angular so inside of our
humble HTML like I said we can refactor
this but at this stage in time let's
simply make an ion list and inside of
the ion list will have an ion item
this eye on item will be bound to beacon
data dot and then let's take some stuff
that we might want to bind to the UI
some examples could be the address
splurt said beacon data to address you
can add another thing
so using eye on item once again we could
perhaps add the temperature we can add
other things such is the beacon data dot
our SSI we can go down the list and we
can add a variety of other things from
the plugin but for now I also want to
add a button so the button is yet again
going to add the eye on button
attributes and when we click the button
it's going to take us to that URL you
can add as much speaking media as you
want I'm going to add the URL now
so we can make an anchor tag and for the
head truss we can bind to the beacon
devil URL and for now I'll simply add
URL to the text of the undertake so when
the user clicks this URL it should if
everything is worked correctly open up
my youtube channel at
youtube.com/geekandsundry
the Scan button so clicking the Scan
button right now and then we get a list
of addresses so at the moment our UI is
not the prettiest but we're displaying
the address of the beacon we're
displaying the temperature and the
signal strength if I move my phone
closer to the beacon the signal strength
gets better and if I move it further
away you can see that we start the drop
to the 70s we could have dead the UI
slower or quicker than this depending on
how much we want to pull the beacons we
could simply find a beacon get the data
then stop the scan but for now let's
check to see whether our bit 2ly and did
our URL is working
that's click the URL so you'll not be
able to see on my screen but you can see
that the tab has gone inactive and we
have the link to my channel so we've
demonstrated that we can connect to the
estimate location beacons using the
Eddystone
protocol we've also looked at how we can
implement that inside of our angular and
ionic applications at the moment our
chord is fairly simple and that's
intentional we have a simple scan
function we're ensuring that the
platform is ready so that we don't have
any errors and break our application
we're then starting the scan for the
beacons for assigning the beacon data to
a variable
checking for any changes
in the next video in this series let's
refactor this chord put an NS service
and of course start building a little
bit more complex implementation around
in actual use case within the
application so if you're looking to
connect your estimate location becomes
using the eddy storm protocol I hope
that this has helped you in
understanding that and until the next
video and the series my name is Paul
Halliday and I'll see you very very soon</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>