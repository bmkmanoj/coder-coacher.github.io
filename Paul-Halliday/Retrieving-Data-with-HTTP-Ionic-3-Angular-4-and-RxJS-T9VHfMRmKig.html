<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Retrieving Data with HTTP - Ionic 3, Angular 4 and RxJS | Coder Coacher - Coaching Coders</title><meta content="Retrieving Data with HTTP - Ionic 3, Angular 4 and RxJS - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Paul-Halliday/">Paul Halliday</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Retrieving Data with HTTP - Ionic 3, Angular 4 and RxJS</b></h2><h5 class="post__date">2017-04-08</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/T9VHfMRmKig" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">either it's Paul today we're going to
look at getting data from HTTP server
I've created a standard Express
application that has two messages one
with an ID of one and the message of
hello ionic the second that says and
this is another message with an ID of
two we can take a look at the response
in chrome and we can see we have the two
messages inside of our web page as
expected returned as JSON objects now to
look at this inside of our ionic 3
application we need to make a new up to
start with so ionic start HTTP blank - -
v2 when you've done that we can create a
new provider so usually if you're going
to do any sort of HTTP calls you would
put it to your own service so the
service within the ionic 2 application
so to do this and make our own provider
we can run ionic key provider and then
the name of our provider so my service
is going to be called message service so
inside of our ionic 2 project under the
source folder we now have a provider
named message service to use this inside
of our application we need to add it to
the list of providers so let's import
from providers / message - service we
want to import the message service we
can then add this to the list of
providers and when it comes to lazy
loading our providers you don't have to
add on a module basis if you want it to
be on the global app module so we're
simply going to add message service here
regardless of whether we're using lazy
loading or not we'll also need to
implement the HTTP module from angular
so we can import from at angular / HTTP
we can enforce the HTTP module we then
have to add it to our imports within our
application if we take a look at the
HTTP module we can see that it includes
HTTP providers so that we don't have to
implement a
of manual stuff when we want to use HTTP
within our project so back over to our
message service we can change the public
HTTP inside of our constructor to be
private because we only want to access
the HTTP variable inside of this service
we can then make it function named get
messages and then inside of our get
messages function we can say this HTTP
and then we have a variety of HTTP
options such as gets post cuts and so on
we're going to be using guests because
we will be getting the data from the
server and we have to pass in a URL here
the URL is a type string so we are going
to make a variable at the top just going
to be private URL if type string and
that's going to be equal to HTTP
localhost 3,000 we value localhost 3,000
is where my API resides this is of
course can be different for you so put
in the web address that you're looking
to get the data from we can then pass
the URL inside of all this HTTP GET so
this gig URL and we can return this to
our component now we'll come thing to do
at this stage rather than doing it
inside your component is to map the data
to a new object or a rare
before we do that let's add the do
operator so let's import rxjs add
operator do and that allows us to have a
look at the data before we do anything
to it so we can say don't do and then
basically have the response and console
dot log B response so I'm going to head
over to my app pages and inside home TF
I'm going to import the provider so it
can import from providers the message
service and we can inject the message
service inside of our constructor and we
can make a get messages function so get
messages and let's use this don't
message service don't get messages and
we can subscribe to that event and we
can log out the response object then
inside of our constructor we can run
this get messages and when this home
page loads it will get the messages from
the message service let's run this in
the browser by running ionic serve so
the first thing that we see when we open
up our application in the browser is to
response objects one that comes from me
dot do so we're logging out the response
and two comes from the SUBSCRIBE data
that we log out here so we don't do is
essentially at the moment giving us the
same @ response as we expect it to we're
simply looking at what the data looks
like at that time but now we want to
master the data to only return at the
body because we don't really care about
this URL status text we might care about
the status later on but at the moment we
only care about the body so inside of
the message service we can pull in at
the response from angular HTTP and we
can tell I would do function that the
response object is of type response and
we can do the same for the map function
that we're about to adds to the HTTP GET
this means is that we're going to map
the response to a new object or array
based on the transformations that we
make to the object
so we saw inside of the response that it
has a response body so would be good if
we could simply only return the body of
the response because we don't want all
this extra information we just want to
return an array which contains both of
the messages so instead we can map this
response so you only return the response
JSON
if we save this and instead we run again
our objects that come back are only the
response body of id-1 hello ionic and ID
2 this is another message you'll notice
that we still again saying be response
do and that's because we're logging out
the initial response that is unchanged
by any of the map and then after we
login out we're mapping the data to the
new response object now this stage our
HTTP GET function is getting a little
long so let's change this and refactor
out two different functions so we'll
make a private log response and now it's
going to have a parameter of response F
type response and we're simply going to
log out the response and we can change
our dew function to this got log
response next we can have the map
function which extracts the data from
the response so extract data responsive
type response and then we can return the
response to JSON one of the other things
that we can do when returning HTTP data
from a server is catch an error because
it could be a variety of errors that
could happen so we can use the dot catch
function now this comes as part of our x
GS so we have the importer from our x GS
/ add / operator
/ catch we can then write a function
named catch error and it returns an
error of type response but if there's no
error of curve response maybe it returns
an any at the moment we're simply going
to console dot log the error so logout
any errors that might happen and if
there is no error we're going to return
the observable dot thrall method which
throws an exception within the observe
wall so if you use observable doctor'll
we can import observable from rxjs /
observable and then we can throw the
error dot JSON because it's a response
object dot error
or if there's Nora we can simply say
server all right the final thing to do
is to hook this up to our catch method
so we can add this dot catch error if we
see this and run it back on our
application we can now see that we have
the expected response of ID 1 and
message hole or ionic ID 2 and message
this is another message let's weigh this
up to our view inside home dot HTML I'm
going to change the title to messages
and the color of our navbar to primary
inside of our ion content I'm going to
have an ion list and each item in the
list is going to be a message so at the
ion list element we can use ng for
message of message list and the item can
have a message ID and then a message dot
message because that reflects our data
model we also need to add let before our
message here to say that we're making nu
variable
so inside of all home BES we can make a
message list and it's going to be a new
array so we can take the response object
that we get from our subscription to get
messages and instead of logging it out
we consider this dot message list is
equal to the data
if we now take a look at this inside of
our application we can see the ID of one
and hello ionic ID of two this is
another message
if we take a look inside of our console
we can see that we're still logging out
our response object and that's because
we're doing it inside the do block
inside of our gets messages it might be
a good idea to only log out the body so
we can quickly see the results of our
gets call to our API I'm going to go
back to the message service and I'm
going to put the due underneath the dot
map so it Maps the data first and then
we can log out the response if we take a
look at this inside of the browser we
can see we get the results after mapping
the object now we can use we don't do
multiple times and we can do things
without actually changing the observable
but is returned so if we initially
inside of all-first do log the response
and then after the data is mapped we log
the response again we can see two
different outcomes so the first outcome
is the initial response prior to any
mapping and the second log is the
response object after has been mapped to
only returned at the GS on the body so
the awesome thing about using do to log
is that it doesn't change the return
response to the subscription observable
at all using this if we then changed our
API to add a third message
for example ID 3 message final message
and then we refresh our application we
can see the third message
this third message is reflected inside
of our initial response as well as our
marked response I hope this video helped
in understanding HTTP within angular as
well as some rxjs observable functions
to stay updated with more videos hit
that subscribe button and until next
time I'll see you in the next video</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>