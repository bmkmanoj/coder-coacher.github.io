<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Python unit testing - pytest introduction | Coder Coacher - Coaching Coders</title><meta content="Python unit testing - pytest introduction - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/codebasics/">codebasics</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Python unit testing - pytest introduction</b></h2><h5 class="post__date">2016-12-04</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/l32bsaIDoWk" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">you certainly don't want to be like this
guy when it comes to testing your code a
good programmer will always test his
score before moving it out to production
a very good programmer will always write
automated tests in order to perform the
testing Python offers three basic
frameworks for writing automated test
unit tests news and py test among three
py tests is the best we are not going to
cover why it is the best you can simply
google it but if you are interested in
learning how to write your first py test
based unit test in Python then keep
watching I have this Python code which
has two methods and these are two pretty
basic method one function is doing the
sum of two numbers and the other one is
doing a multiplication and I would like
to write the unit test for these two
functions so the first thing I'm going
to do is install py test so for this go
to your command prompt and install py
test using p IP you can just run p IP
install py test I'm having some problem
in installing this this will happen if
your Python installation folder doesn't
have a write write permissions so you
can easily fix that by going to your
Python installation so you should know
where your Python is installed so in my
case it is C program files and if I look
for Python this is a directory where it
is installed and here I will go to
properties security go to all users edit
the permission
and in the edit permission again go to
users and give all users a write
permission
so once you give the write permission is
modifying the permission on all these
directories and files and after that my
installation is going to work so it now
installed py tests correctly now what I
will do is I will go to the directory
where my Python code is so here my
python code is in C code py so let me go
to that directory so C code py unit is
you can see it here I am in that
directory and now I am going to create a
file for my unit test now always
remember that ok so let me create that
file from here now always remember that
you have to have a prefix of prefix of
taste underscore for your unit test file
so I'll just call it test underscore
math lip okay and here I'm going to now
write the unit test for these two
functions okay so let me first import
the matte lip and then my first unit
this will be test underscore calculate
total so I am tasting this method
calculate total so I am just calling it
taste underscore now py test is using
some discovery rules to find out these
test cases and at the discovery one of
the discovery rule is to look for a
prefix which has taste underscore so I
always our give taste underscore prefix
to all my test function and taste under
course underscore prefix to my test file
as well okay so here
I'll say math lab dot calc total that's
the name of my method so you see this
Madlib file calc total so calc total is
this function which takes two arguments
so I'm passing four and five okay you
can pass any numbers here this is your
unit test so it could be any number and
you will capture the output in total and
then to verify total you will use a
assert statement so you'll say assert
total should be nine
okay now you will write your second test
for multiply and the result here is
matte lip dot calc multiply and you
expect your result to be 30 because 10
into 3 is 30 so now I have written my
unit test now I'm going to execute these
tests so go to your directory here so I
am in my Python directory here and all
right let me go there first
and then there are two ways you can
execute your unit test using P Y test
number one is Python -
mpy test if you just run this command
what it is going to do is it is going to
recursively go into all the files and
subdirectories and it is going to look
for any file which has taste underscore
prefix and that in that file it is going
to execute all the tests which has taste
underscore prefix in front of the the
name of that method okay so let's just
execute this cool so here it is saying
math live has no attribute multiply okay
so maybe I did okay calc multi okay I
misspelled that function name here so
I'm going to fix it and if I run it
again see it is saying that my two tests
passed
okay second way of running this test is
simply simply type in py dot test so
when you say okay let me scroll this
here okay so P Y dot test when you do
that it's going to say to two tests
passed in 0.01 second okay if you want
to see a detailed output there is minus
V command which means verbose when you
do that it will actually list down your
test name and whether it passed or fail
okay now let's say due to some reason
some stupid programmer came here and he
modified your code and he screwed it up
like this so where you are saying
calculate total instead of doing
summation let's say he put this - okay
so what's going to now happen is when
you run your test the taste is going to
fail so it will say taste calc total
fail because of whatever reason and you
will go there and debug it okay so here
your actual result came out to be minus
1 because 4 minus 5 is minus 1 and your
expected result was 9 so
then you will go and fix this coal okay
so you now see the benefit of writing
this unit test so again to just go over
test discovery rule it will look for all
the files and method which has test
underscore prefix let's say you don't
have taste underscore prefix here and
and let's see what happens so I remove
taste from here when you run your tests
now see it's not discovering anything
here because it just goes by the prefix
if you don't have that prefix it's not
going to find it now taste underscore is
not the only rule there are some other
rules also I am not aware of all those
rules you can just google py taste taste
discovery rules and it will list all the
rules there are certain other I think
suffixes or file extensions that you can
use you don't need to use only taste
underscore but I find this very
convenient that's why I'm using it okay
another thing is your file name should
also have taste underscore so let's see
what if it doesn't have taste underscore
so I am just going to remove so now it's
not taste in the school and see what
will happen
so whenever near my taste again again
it's not discovering it because I remove
that taste prefix from my file name okay
once I have taste here is gonna work
okay
all right so this was a short
introduction on py test there are many
other interesting aspects that we would
like to cover but we will do that in the
future video until then thank you and
goodbye</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>