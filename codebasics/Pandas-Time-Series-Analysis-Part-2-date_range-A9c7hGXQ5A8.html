<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Pandas Time Series Analysis Part 2: date_range | Coder Coacher - Coaching Coders</title><meta content="Pandas Time Series Analysis Part 2: date_range - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/codebasics/">codebasics</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Pandas Time Series Analysis Part 2: date_range</b></h2><h5 class="post__date">2017-07-22</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/A9c7hGXQ5A8" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">his friends we are going to discuss date
range in pendous to continue over time
series analysis talk if you have not
seen my last tutorial on date time index
then I would highly recommend watching
that first before you continue on this
for this tutorial I am on Google Finance
and I am going to download Apple stock
prices you click on historical prices
here it allows you to specify the date
range here so you specify that date
range and click on this link to download
the prices in this kind of CSV I have
the prices from the month of June 2017
now let's say due to whatever reason the
data that you're processing doesn't have
this date column ok so your CSV file
looks like this so you can see that
let's just compare these two files this
has made this doesn't have dates ok and
not having day it is pretty bad because
to process time series information you
need those dates
ok so date range function will allow you
to generate these dates now one thing
you would notice is it's not straight 1
to 30 as a sequence you have things like
weekends so for example third and for
June where weekend so you see that
missing here and date range will allow
you to handle all of this ok so as usual
I have launched my Jupiter not booked
here by running Jupiter not booked
command and created this new not booked
and I am importing that CSV file into my
data frame so let me execute this to see
how my data frame looks ok so my data
frame right now looks pretty boring
because it has only open high low close
etcetera it doesn't have dates and it
has this integer index and I want to
generate dates and insert into this data
frame in order to do that you have to
call
all pandas date range function now date
range function takes couple of argument
the first argument is start so the start
date of your range so my start date here
is first June 2017 and my end date is
30th June so 6 30 2017 and then the
third argument is your frequency
okay so frequency I'm going to supply as
B because b means business days which
will exclude the weekends
ok and then execute this you can see
that I have first second and third and
fourth is missing i straight have fifth
so if you notice the calendar here you
will see third and fourth where weekends
and it successfully excluded it so
awesome wonderful I have all these days
now now all I need to do is set these
days as an index in my data frame okay
now how do I do that so if you remember
our data frame has a function called
set index where you can specify your
index and you can just say in place
equal to true remember this argument is
important if you don't say in place is
equal to true then it will not modify
this original data frame instead it will
return a new data frame all right
so when I run this now my data frame
looks much better
it has date as an index all right now
just to recap the benefits of date/time
index with date/time index you can do
amazing things for example you want to
plot a chart of let's say closing stock
price okay you can easily do that by
first specifying the mat plot
in line logic the line magic logic okay
and then saying D F dot close dot plot
okay when you do that it will specify
nice plot with dates so here you have
dates and here you have prices now if
you didn't have this then the chart will
put only index here versus here it is
putting the dates all right now you can
do partial or this selection and you can
specify your days for example I'm
interested in for 10 days of closing
stock prices okay so you can specify
your date range like this and it would
return you or partial data frame also
how about getting an average of closing
price in first 10 days you can do that
as well so you can see you can do
amazing things with this day time in
that okay now let's say due to whatever
reason you want your data frame to have
prices on weekends also so you can see
that you are missing the weekend prices
now on weekends really stocks did not
trade so you don't have the price but
you can assume that whatever was the
price on Friday was the price on
Saturday and Sunday you can do this
thing using pandas as frequency method
so I'm going to insert a new cell in my
notebook here and call D F dot s
frequency function so s frequency will
allow you to regenerate your beta frame
according to that new frequency so my
new frequency I want is days okay so
there is include the beacons and the
method that you want to use to carry
over the
price is padding all right so let's
execute it and see what happens all
right so when I do as frequency based
what happened right here is previously
my data frame were missing the prices on
3rd and 4th because 3rd and 4th as you
know where the weekends you can see
touring for at the weekend so now I
generated these prices here using
padding method and what padding will do
is it will just carry forward the dates
on 3rd the sorry the prices on 3rd to
4th and fit so you can see the prices
are same here you can pretty much
generate frequency to anything you can
say okay I want weekly all right
so weekly will show you only weekly
prices you can also do hourly and it
will show you
hourly prices this is pretty amazing
stuff actually whenever you have holes
in your data and you want to have you
want to carry over data from a previous
date or previous hour you can always use
as frequency now to figure out the list
of available frequencies you can always
go to pandas documentation so if I go to
pandas documentation here and I seen
date range ah it will show me the link
where I can have all all the available
frequency so here I will just use days
and business days and hourly frequency
but you can specify like secondly
frequency or your and whatever is your
business use case ok now back to our
date range function you notice that here
Ike a start date and end date and
frequency now let's say I only know
about
date and I don't know what end it but I
know how many periods I want to generate
like how many days time index elements I
want to have in my range or you can do
this by doing right so I created a new
self here and my new range is let's say
this so on does date range my start date
is let's say first January 2017 okay
and I don't know about my ended but I
have number of figures so you can say my
periods is equal to let's say 72 okay
and then specify your frequency and I
execute this ah I get 72 days starting
from 1st January ok
and these days are business days so they
exclude weekends so for example for
January was weekend so I excluded that
ok you can pretty much generate any
frequency so you can say hourly
frequency give me 72 piers ok now this
could be useful when you are generating
taste data so let's say you are writing
some unit tests or integration tests and
you want to generate some fake data all
right for that it could be useful and I
will show you how so what you can do is
you can generate some Rambert random
number so I am going to import numpy and
call numbers random dot R and int so
this function allows you to generate
random numbers ok now I can specify my
range here so let's say I want to
generate random numbers between 1 and 10
ok
and how many numbers I want to generate
well I want to generate let's say
whatever is the length of my range when
you do that it gives you basically 72
are 72 numbers okay random numbers
between 1 and 10 ok now I can generate
panda series out of this okay so I can
say my time series is pandas series okay
which has these numbers and my index is
equal to range okay and when I print
this time series you will see that I
have random numbers between 1 to 10 for
all these dates or frequency you see
that I have hourly frequency this is
pretty useful if you are generating some
samples you know some random samples to
conduct your unit test or integration
test or for any other reason all right
cool now one thing that date range will
not handle is holidays specific to any
calendar for example we had like force
of July as a holiday in u.s. because it
is an Independence Day so that's
something that be frequency will not
handle we will only handle weekends and
for that we will have to use holiday
calendar and that is its own topic so we
are going to cover that in future
tutorial I have this Jupiter not Pope in
a video description below so I would
recommend that you download it you play
with it remember learning coding is like
learning swimming if you see someone
swim then you are not going to learn how
to swim you have to jump in the pool and
get yourself that
similarly for coding whenever I am
teaching on this tutorials please
download these code in advance and then
try to play with it as you are following
me on these videos alright so that is a
one great tip I can give you alright
so thank you very much for watching and
we'll continue over time series analysis
in next tutorial</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>