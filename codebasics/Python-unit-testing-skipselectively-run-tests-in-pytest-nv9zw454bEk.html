<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Python unit testing - skip/selectively run tests in pytest | Coder Coacher - Coaching Coders</title><meta content="Python unit testing - skip/selectively run tests in pytest - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/codebasics/">codebasics</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Python unit testing - skip/selectively run tests in pytest</b></h2><h5 class="post__date">2016-12-10</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/nv9zw454bEk" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello everybody welcome to another
tutorial on unit testing in Python if
you have not seen my py taste
introduction tutorial then I would say
pause right now and go watch that
tutorial before continuing on this one
in this tutorial we are going to cover
how to skip tests from a running also
how to selectively
run your tests using the name as an
expression and the third thing we are
going to look at is custom markers okay
I have this simple Python file here
which has two function one is doing
addition and the another one is doing
multiplication and then I have this test
file which tries to do unit testing on
those two functions you can see here I
have two tests return one is trying to
verify functionality in calc total and
the another one is trying to verify the
other function okay and when I run these
two tests here they work okay you can
see that it says that both the tests
passed
okay now due to some reason let's say I
want to skip this particular test from
running how can I do that
in order to do that you need to import
py taste module first and then you need
to use a spatial decorator as I am going
to just show you so you say @py test dot
mark dot skip and in skip you can
provide an optional reason I don't want
to run this test at the moment okay now
this is not a very good reason but you
would specify some legitimate reason for
not running this test okay when I do
that let's see what happens
you can see that it skipped the first
test if you want to see a reason on why
it skipped the test you can specify -
our X s come on okay that's that's an
option that you give in the command line
when you do that here it will say I
skipped taste meth slip dot P by 3 or
test number 3 because I don't want to
run this the test at the moment so
that's the reason why it skipped the
test ok and here it says is this one is
skipped and this one is passed
ok so skipping test in bi test is fairly
simple you need to just add this one
line alright
now sometimes you want to skip a test if
it meets certain condition okay so in
that case you will do skip if okay so in
skip if the first parameter will be will
be your condition so let's say I want to
skip this test if it is a specific
python version ok now how do you check
python version so you know that it is
the python version is stored in 6.1 info
okay so sis dot version info will be
giving you your current python version
ok so let's say I want to skip this test
if the version is greater than 3.5 ok
now my python version as you can see
here is python 3.5 point - so guess
what's going to happen it's going to
meet this condition and it should skip
this particular test okay so let's run
this cool so see it skipped that test
and here also you can say say skip so
the summary is one day's pass one day
skip let's flick this condition just to
make sure it is working as expected so
if the version is less than 3.5 then
skip it so
now my version is obviously three point
five point two so it is not going to
skip the test but run it instead so
let's do it again so as you can see now
it did not skip any test and passed all
of them okay so use skip or skip if if
you want to skip certain tests from
running now how do you run certain tests
based on their name okay
so let's say I don't want to use this
skip marker because in that case I have
to put skip marker in all the tests that
I want to skip or run right so I don't
know you I don't want to use it hence
I'm removing right now and let's say I
want to run tests based on their name so
for example I want to run all the tests
which has multiplied in their taste name
so here I want to find a substring
multiply and whichever test contains
multiply in their name I want to run
those in order to do that you have to
run minus K come on
so here I can just say py test minus K
multiplied this means run all the tests
which has multiplied in that taste name
when I do that it says one test Pass one
test be selected if you want more
summary you can use verbose option minus
V and here it is saying that multiply
test pass so it ran only the test which
had multiplied it skipped the other test
so it's saying that one test deselected
okay now are both of these tests named
have calc in it okay so let's say now I
want to run all the tests which has calc
name calc in it okay so let me just add
some dummy tests here taste
dummy this is doing nothing as true just
to kind of show you now I want to run
only these two days how do I run it both
have calc in it okay so I am going to
supply calc in - kay option to py test -
Kay Cal - V when I do that
you can see that it ran those two tests
which had calculate and it D selected
the thought third test if you don't do -
kcal then it's going to run all three
tests use you see three tests passed
versus two days passed okay so this is
another powerful option that py test
offers where you can run the test using
their name all right now let's say I
even don't want to go by their name and
I want to tag a certain taste using a
specific name or category and I want to
run the test based on that category
one good example would be lets say your
software or application is running on
Windows and Mac OS and you want to grow
your taste
based on the OS these two voices that
they are running on in order to do that
you will use custom markers so the way
custom marker works is first you need to
import py tests okay and just to keep
things simple I will okay let me remove
these tests and just create some dummy
tests well say okay Windows let's say
this is the test which which will test
the functionality on Windows OS okay so
let's say for Windows OS I have
to test cases and similarly I have to
test cases for Mac OS okay oh and when I
run it without any options
it will run all the tests now I am doing
less in my testing on Windows machine
and I can only run Windows tests I
cannot run Mac tests so I want to skip
them so how do I skip them so one option
is you use name but let's say I don't
want to use name option because you
might sometimes you might have like
thousand or more tests and you don't
want to go and name your taste as Mac
okay I mean death just a restriction
that no programmer or a QA person likes
so you will use custom markers in that
case so here you will say py test dot
mark dot Windows so Windows is a custom
tag that you created so this could be
anything this could be XYZ and any any
string that you want okay I'm just using
Windows as my tag so I'm saying okay tag
this test as Windows and tag these tests
as Mac okay so now they are having these
categories so these two belong to Mac
category versus these two belong to
Windows category now I can tell pivot is
to run either of them and how do i do
them do that so in order to do that we
have to use minus m option so you'll
same py test minus M Mac when I did that
it ran only math test
isn't that wonderful okay how about
Windows so you can say Windows and it
will run only Windows test okay you can
see that the two tests that it trained
where Windows and the other two tests
where deselect it now you
you can also do reverse and let's say
I'm saying from Windows - but I want to
run all the taste
other than Windows okay so accept those
tests which are which are marked as
Windows run all of those tests so if you
want to do it it's pretty simple you say
not Windows in double quote so you can
see it ran only math test
okay so that was all about skipping and
selectively running your tests in py
tests tutorial thank you for watching</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>