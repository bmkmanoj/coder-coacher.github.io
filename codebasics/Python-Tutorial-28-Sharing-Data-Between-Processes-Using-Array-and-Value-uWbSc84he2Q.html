<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Python Tutorial - 28. Sharing Data Between Processes Using Array and Value | Coder Coacher - Coaching Coders</title><meta content="Python Tutorial - 28. Sharing Data Between Processes Using Array and Value - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/codebasics/">codebasics</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Python Tutorial - 28. Sharing Data Between Processes Using Array and Value</b></h2><h5 class="post__date">2016-09-17</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/uWbSc84he2Q" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">dear friends welcome to core basics
coding tutorial in this tutorial we are
going to learn how to share data between
two processes in Python now if you have
gone through my multiprocessing
introduction tutorial or you have
already seen a problem when you try to
share a global variable between two
processes I am going to revisit the same
problem here once again
so in this program I have a list of
numbers and I am creating a new process
here which is just calculating the
square of all those numbers and it is
putting the result back into this result
global variable so you can see here I
have a global result and it is referring
to this variable okay and once I am done
with my processing I am printing the
value of that variable inside my process
and also outside the process okay now
when I run my program what happens is
inside the process values look ok so I
have 2 3 5 their Square number is 4 9 25
pretty good but outside the process when
I try to print the same exit variable I
see blank now why is that so if you
remember from our introduction tutorial
whenever you create a new process the
new process will get its own address
space at a space meaning the space where
it stores all the variables etc so what
happens is as you can see in the diagram
on the left hand side I have a parent
process which has a result global
variable but when you create a child
process which is shown on the right hand
side the memory for this global variable
will be copied so now I have a separate
copy of result variable hence when you
up when you run your calculated square
function it is only updating the copy in
the child process okay so this is the
problem now how to solve this issue how
to solve this issue of share
in data between two processes well there
is a way the way is to use shared memory
so as you can see in the diagram or when
you use shared memory the memory lives
outside the processes hands you can
access it and it will print the result
for you so let's use that memory here in
our program now there are two ways of
using shared memory one is value another
is array so in this program I am going
to use array first and then I will show
you how to use value so first let's
create a shared memory variable now
share memory variable is different than
your regular variable so you have to use
multi-processing dot all right here now
here the first thing is you specify your
data type so my data type here is
integer ok and then you specify your
size
so my size is 3 because I have three
numbers here so my result is going to
have three and then I will pass down
this shared memory into my process okay
so my process has one more variable
called result so let me remove this
global variable because it's anyway not
working now shared memory has different
set of methods so a pen is not part of
the method list so a pen is not gonna
work okay so we have to use a simple
index now to use simple index what you
do is or ID X n in the numerator so when
you use this function you will always
get the index and the value both okay
so here
I'm just saying result is equal to and
cross an okay and I'm removing this here
after that I am just printing the result
here all right let's run this okay here
I is not printing it okay so we have to
use a different method so we'll just say
okay so here I'm going to say result
like this this is a way to print all the
elements in an array okay excellent so
now you can see that we are printing it
outside the process and it still print
out the result fine so you can use array
this way to share data between two
processes so it's solve our problem now
these two processes can exchange data
using this sad memory variable called
result okay all right let's go over
value now so for value so very similar
to array but it's just a single value
okay so you can create value like this
I'm going to create a double variable on
shared memory and assign a value 0.0 and
when I pass this to my child process
here I am going to receive it as an
argument in this function and here I
will say value dot value maybe we can
just change this variable name to be V
I'm going to just assign some arbitrary
value okay and here you can print that
value we dot value so as you can see
that in our child in our parent process
we are creating a value variable on
shared memory we are passing that to a
different process here which is setting
the value and then back to our parent
process it is printing the value here
now when you run this see it's working
basically the child process is updating
the value and still the parent process
is able to access the same value okay so
this was all about values and array
there are in fact other ways of sharing
data which is queue and pipe but we will
cover those in the future tutorials ok
thank you for watching</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>