<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Pandas Time Series Analysis 6: Timezone Handling | Coder Coacher - Coaching Coders</title><meta content="Pandas Time Series Analysis 6: Timezone Handling - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/codebasics/">codebasics</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Pandas Time Series Analysis 6: Timezone Handling</b></h2><h5 class="post__date">2017-08-27</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/9IW2GIJajLs" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hi friends we live in a world with
different time zones if you are having a
morning coffee in New York at 9 a.m. it
might be time for dinner
in Mumbai India because it is 6:30 p.m.
whereas in Berlin one might be getting
ready for an afternoon nap time zone is
something that we need to handle while
doing time series analysis in pandas for
the purpose of this tutorial I went to
Google Finance and I have downloaded
Microsoft stock prices by clicking on
historical prices here supplying your
date range and then clicking on this
link you can download it to this CSV
file
I have prices for only few days and I am
concerned with only the closing price as
usual I am going to run Jupiter not book
in my command prompt to launch in not
book environment and here I have created
a new notebook I imported pandas and
then use read CSV call to read the CSV
file into this data frame you can notice
that I have a date time index which I
got by supplying this index column
argument
okay now let's examine the index here so
the index has a data type of date/time
now this date/time object is naive or
daytime because it is not timezone aware
there are two kind of daytime objects in
Python in general 9u date/time which
doesn't have any information of timezone
and time zone or where daytime which
contains information about specific time
zone so how can you convert this naive
date time index into time zone or where
day time index for that you can use data
frames TZ localized command
and supply the timezone as an argument I
know that these stock prices are coming
from New York Nasdaq Stock Exchange so
I'm going to use us Eastern time zone
and then what I will do is I will type
in D F index here it is still showing
the original date time because I did not
assign that it FM back so I have what I
have to do is the F equal to DF 30 C
lockers are localized because TZ
localize will not modify the original
data frame so you have to just assign it
to itself and when I run it now you can
see that I have a u.s. Eastern time zone
not only that here you will just seeing
nine o'clock versus here you are saying
nine o'clock - for now this - four means
u.s. eastern time zone is four hours
behind the UTC or universal coordinated
universal time zone basically so we are
like four hour behind it and that's why
it is so is showing - for UTC is similar
to GMT which is also known as Greenwich
Mean Time
okay now let's convert this time zone
into Berlin time zone okay so when it
was nine o'clock in u.s. Eastern zone it
was a three o'clock in the afternoon in
Berlin Germany
so how can you convert this index into
Berlin time zone index okay so for that
you can use TZ convert function and in
the argument you would supply the time
zone so here the time zone is Europe
balling and when you do that you will
notice that here
you got three o'clock so for the nine
o'clock here you got a three o'clock and
+2 in day indicates that in Berlin
it is UTC +2 hours okay now how do you
know the string that you have to supply
for a corresponding time zone
well these time zones are coming from p
YT z module so if you import from p YT z
all time zones this has information on
all time zones okay so if I just simply
print these it will just show me a list
of all the time zones which are
available that I can use okay so now I'm
going to convert the same data frame
into a Mumbai time zone
okay so Mumbai India for that I will
again use TZ convert function and supply
the timezone corresponding to Mumbai now
I don't remember the string that I had
to supply for Mumbai so I will search
here now I know that it is somewhere in
Asia so they show all the Ischia time
zones and if I scroll down it has dilly
to buy everything and I had to go to
Mumbai but it looks like it doesn't have
Mumbai here okay so somehow Mumbai is
not present here but I know that the
time zone in Mumbai is same as time zone
in Calcutta which is another city in
India so I will just use that so let's
go and copy Calcutta's timezone string
here and when you do conversion you can
see that it converted it okay 9:00
o'clock in New York is 6:30 in India and
it is 5 over 30 minutes ahead of our
universe
corine at a time zone now you can use TZ
convert on data frames index also so if
instead of doing DF 30-second what you
can also do DF dot index dot T second
world in which case you will assign it
to DF tour index and that will also have
the same effect now let's look at how
you can use time zones in date range
function now from our previous tutorial
we know that you can use pandas date
range function to create a date time
index so let's say I am using 1 1 2017
as my start date and the period I'm
giving 10 periods and my frequency is
let's say hourly ok and when you create
a range like this what happens is it is
creating a naive date/time objects in
your date/time index you can create time
zone aware date/time objects by
supplying TZ argument where you will
supply the time zone so let's say I am
giving London time zone here and when
you execute it you can see that the data
type of your day time index is timezone
Europe London now date range will accept
two kind of timezone this one is using p
y TZ timezone so we previously printed
all the time zone Pope from py t Z is
the list that is available the other
kind of time zone that you can use is
called date util so all you have to do
is supply date you tell ahead and that
will also create Europe's London time
zone but you can see it looks a little
different here and main difference
between py TZ
and date you tell is that pivot easy has
all these predefined time zones
available in all underscore time zones
versus date util will use all the time
zones in available on your operating
system for the common time zones there
same as the ones available in py t Z is
the main difference between date Yuto
and P right easy to use pivot easy more
but it is really your choice now let's
look at some automatic between two
different time zones I'm going to create
a time series here using these periods
okay now I have this time series
available which is s and it has these
numbers starting from 0 to 9 and the
frequency of my time series is 30 minute
now I'm going to create so I'm going to
just convert this time series into
boiling time zone okay so you're okay
Berlin okay I got this error because
this guy doesn't have any time zone if
you look at s this is an IV date time so
instead of using TC convert I need to
use DZ localized and now I got a ball in
time zone okay you can verify that this
is a bowling time zone now let's create
a mumbai time zone series so again same
use original time series and call TZ
localized function on it to convert the
time zone into Mumbai time now Mumbai
doesn't have its own time zone string so
I'm using
calcutta and here you can see UTC + 530
so this is an indian timezone now i got
the ball in timezone series and Mumbai
timezone series what will happen if I do
B plus M so you can see that here I got
any n values for couple of these numbers
but then there are these three numbers
for which I got some values okay so what
it did is it converted both of the
individual time series is to universal
coordinated time zone basically UTC and
then it performed the mat okay and it
tried to align the data points so this
is a very good feature in pandas if you
are having two different time zones and
if you want to do a thematic between
them you can just do it and internal it
will convert everything to UTC and it
should align the dates accurately okay
that's all I have for this tutorial I
have a link of this Jupiter not book
below in the video description I highly
recommend that you download it play with
it
coding is something that you will learn
by doing it and not just by watching the
video so I I would suggest a more
hands-on approach where you do coding as
you are watching this tutorial and when
needed you can press a pause button and
then you can try things on in on its own
and then you can continue to the next
tab in the tutorial okay thank you very
much for watching and I will see you in
the next tutorial</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>