<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Python Pandas Tutorial 5: Handle Missing Data: fillna, dropna, interpolate | Coder Coacher - Coaching Coders</title><meta content="Python Pandas Tutorial 5: Handle Missing Data: fillna, dropna, interpolate - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/codebasics/">codebasics</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Python Pandas Tutorial 5: Handle Missing Data: fillna, dropna, interpolate</b></h2><h5 class="post__date">2017-02-17</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/EaGbS7eWSs0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">difference in this tutorial we are going
to look at how to handle missing data in
pandas now often when you are
downloading data from internet or let's
say getting it from any other source it
might have missing values as shown in
this CSV file this file contains New
York City's weather data and you can see
that some of these cells are not having
any value in it also it is missing the
data for 2nd and 3rd January ok so when
you're processing this kind of
information in pandas we'll see how you
can deal with these missing values using
a fill na interpolate and drop any
methods I have more tutorials on how to
handle missing data but this is just to
start and we have only covering these
three methods ok so as usual I am going
to start my Jupiter not book now if you
don't know what is your big notebook I
have a separate tutorial on it but you
can also use any IDE of your choice such
as py charm or not by plus plus whatever
you prefer I like to put a notebook
because it is great with data
visualization ok so I'm going to click
on new and start a new Python notebook
and the first thing we do as usual is
import Fonda's SPD and then I will read
the CSV file that I just showed you ok
and print the data same the star that
you are saying here means it was
processing it clicked
read this CSV file successfully into a
data frame now for the purpose of this
tutorial I want to make my day a date
column so let me show you what I mean by
that so when I
then you normally read CSU like this was
it what it going to do is it's going to
read day as a string column you can see
it is a string so whatever you're seeing
here this is nothing but a string it's
not an excel file
okay so CSV files so I want to first
convert that column into a date column
and for doing that you have to use pass
date argument and in that you can say
that pass day column as a date type okay
and when you do that so let's first
print it you can see that it converted
now by looking at it you cannot probably
figure out the types so what I do
usually is just so you can see that now
the type is time stamp okay so we're
good all right so I got day as a day
time column now I want to make this an
index for my data frame and in order to
do that you can just say DF dot set
index day as your index and in place
equal to true remember you have to do in
place equal to true otherwise it's not
going to modify the original data frame
but instead it will return a new data
frame okay and when you do that you got
day as your in now if you have any
values and if you are processing this
information then you have to do special
handling you have to check like if value
equal to na then do the special thing
okay
often it makes sense to replace these
any values with some meaningful value or
a gasps okay so in this case let's say I
want to replace all NN values with some
other value okay so the first method
that we are going to cover
is fill any okay so what you can do is D
F dot fill na okay and in bracket you
can pass the value that you want any to
replace it
okay and I'm not going to modify my
original data frame but instead I get
this back into a new data frame and when
I run it you can see that all these any
n values that it had it replaced them
with zero value you can see that
everything is everything that was na is
zero now okay so this is good now
sometimes having 0 is not probably the
best guess so you want to come up with a
better guess okay
for example here in the case of event
what does zero mean right so maybe you
want to use fill any but you don't want
to fill entire data frame with this
value maybe you want to specify
different values for different columns
okay so pandas supports that also so the
way you do it is again I am going to
receive it a new data frame and inside
fill and a method now you can pass a
dictionary okay now what does this
dictionary contain so dictionary
contains name of the column okay now in
temperature column let's say I want to
replace all n/a values with zero and in
my day not day but wind speed column I
want to replace it with again zero but
my event I want to say no event okay
and then print new data frame now as you
can see here the temperature and wind
speed is replaced with zero as you can
see here but the event now I have no
event ok so you can just use this
dictionary to fill specific values for a
specific column but still I am not happy
with how I handle missing values here
because see if you are calculating a
mean or something for this temperature
the mean is going to come really
horrible and if someone looks at data
helping ok on 1st gen Ewell it works me
to a third to temperature and the second
January it was zero Fahrenheit right
some someone might think this the
temperature went down by so much but in
reality we actually don't know what was
the temperature and all we are trying to
do is come up with some estimate ok so
then the other way of getting better
estimate would be just to carry forward
the temperature on 4 January here ok so
whatever was the temperature on the
previous day you carry forward and you
do it in a similar way for other two
data types
ok so for that you can use again your
fill and a matter ok but here what you
will do is use a method equal to forward
fill forward fill you can specify by
typing X fill up fill means if I have
any value then just carry forward
previous day's value ok so lets spring
that ok cool now you can see that it
just Carrie forwarded the value from the
previous piece of 4th January had any
value but now it's scary forwarded 4th
January's value here so this looks
little better
then just having video value okay same
thing on 9th January I I didn't have any
event to look at 9 January now it is
sunny because you get it forwarded
previous days tell you you can also use
backward field meaning carry forward
next day's value it's not clear really
care for her but you're copying instead
of copying previous day's value you're
hopping next day's values so if you do
that what's going to happen is now for
January has a value from 5th January so
now I copied value from 5th to 4th
ok so you can use be fill method also
now if you go to pandas documentation
you can just Google and pandas of fill
na it's going to show the documentation
for fill any and you can see that we use
back fill be fill and SL you can also
use pad or blackboard back fill okay so
you can use all of that
oh you also have this other argument
called axis so let's see what axis can
do for us so here if I say XS ok X is
equal to columns
when you do axis is equal to column what
it is doing now is let me open this csv
file here so here previously when we
were using backfill it was a copying
values vertically like it will go
vertically and copy value from here to
here but now with X is equal to columns
it's copying values horizontally so it
going row by row and copying value from
previous cells so here look at here it
it was 9l and it copied that 9 into
temperature so you can see this - copper
here then the snow was up here so you
can see this was snow and this is also
snow now so you can based on what kind
of data you are dealing with you can
copy it either horizontally or
vertically okay now if you check the
documentation of Phil na it has another
interesting property or argument called
limit so let me show you what limit can
do for you so here I am going to replace
this with forward fill and just kind of
show you so when you have forward so
let's say in the case of 7 January I had
32 and it will just copy 32 to both of
these missing data points okay now let's
say due to some reason I want to carry
forward this value only once okay so I
want to copy it only here but not here
in that case you can specify limit and
you can say my limit is 1 as far as
copying my valid value to missing value
is concerned okay
so when you run this you can see that
now 7 January value was 32 it copied
that to 8 but 9 still has any because my
limit is 1 I can copy it only once
ok same thing here 6 January wind speed
was 7 miles per hour
and it copies it to seventh so you can
see that 7 January now also has that
value but 8 &amp;amp; 9 January has na ok if you
can limit to be 2 you will notice that
this 7 is copied here 2 times right 7 &amp;amp;
7 but my 9th January is still any ok so
this is how you can use your limit
parameter okay now I'm still not happy
with the guests that I'm making because
it's the temperature on 1st January was
32 and on first it was 28
it is likely bad temperature on 4th was
in between ok I mean it's not always
guaranteed but that something you would
consider a better guess ok so we have a
method called interpolate in pandas so
let me just create a new cell and by the
way I am using the shortcuts you can you
can you access all the shortcuts here so
when you say insert cell below the
shortcut is B so that's what I'm using
from here I'm placing B is creating a
new cell for me okay
so here D F dot interpolate okay so then
you do DX dot interpolate it's gonna
interpolate the values so if you do get
your new data from here you will notice
that now for the for January it came up
with a better guess which is a linear
interpolation so if you have studied
linear interpolation or you basically
you will come up with this value 30 okay
so it was 32
28 and you're gradually transitioning
and and having this intermediate data
point okay so this is probably a better
guess okay and it did the same thing for
these two cells also you can see that 30
to 34 and here is 32 point 66 33 point
three so it's somehow coming up with
this re2 33 point of the tray so it's
using interpolation or linear
interpolation and coming up with this
values okay
so again I'm going to go ahead and check
the documentation for interpolate so in
search bar you can type in interpolate
and look at data framed or interpolate
documentation and you will notice that
in a method if you don't specify
anything it is by default linear but you
can use so many other methods you can
use quadratic cubic and piecewise
polynomial there are so many methods to
specify as far as your interpolation is
concerned okay so I'm going to use time
now so let's see what time can do for us
so here before we do that you will see
that using linear interpolation it came
up with the middle value okay 32 and 28
the middle that is 30 but look at the
date
okay date is not in the middle okay date
is more near towards sis genu airy okay
so I'm missing second and third January
so 30 still doesn't look like a better
gauge it should be relatively near to
this value 28 so when you use method
equal to time you can see that now it
came up with value 29 because now it is
considering this time this date also or
in coming up with this value it is
realizing that for January is near 2/5
hence the value should not be excellent
middle but it should be more near to
this value okay so this feature I found
to be pretty powerful whenever you are
making a guess or estimate for missing
values okay so far so good sometimes
based on situation
I just want to let's say drop all the
rows with anywhere
in that case you can use this method
called drop any so you can say DF drop
any okay and I'm just printing the new
data frame so you can see that in my
associate
whichever row had any any value okay it
dropped all of them so now I got only
three rows which has a valid contained
in all of the columns okay sometimes you
want to drop the row if it has at least
one any okay so here what it is doing is
activities doing that so here if you
have at least one any it is dropping it
but let's say I want to drop only if it
has all n X so for example I want to
drop this row but I still want to
preserve these rows because it has at
least some data okay so for that you can
use how parameter and you can say how is
equal to all so now you don't see 9th
January here in this data frame because
it had all the values to be any it has
this date but this date is a index so it
is not considering it is not considering
that in the process of dropping okay and
these values these rows has some NS s
but not everything is answer it's not
dropping that okay now what if I want to
go by non any value so let's say I want
to say that if I have at least one non
any value then keep that row and stop
any other rows so for that you can use a
threshold parameter so you can say soul
equal to one threshold equal to 1 means
if I have at least one non any value
then keep the rope okay so when you run
that see what happens is again the same
result 9 January got dropped because it
doesn't have any valid value ever
okay now let's so it kept districts
January value because it has at least
one valid value so if I change threshold
to be one what it means is correct so
let's run this okay nine when I
successfully go to do it dropped this
particular you can see it dropped that
particular row because two means I need
two valid values in order to keep the
row but I don't have two valid values I
have only one value the date is not
counted because it is indexed okay so if
I have one value I am going to drop it
okay so you can use threshold to drive
you're dropping process by number of
valid values that you have okay last
thing that we want to cover is how do
you go about inserting the missing dates
so I don't have second and third January
here and I want to let's say insert all
those dates so for that you will do
something like this so here you will
create a date range and using the date
range let's say I have a date range from
1st January to 11 January so for January
to 11 January I created a date range so
this is your date range and you pass
that to date time index and create a
date time index and then you do V
indexing in your data frame so I am
saying D F dot R index using that index
and then you print your data frame again
so you have to do in place equal to true
okay I'm getting some errors here
because it index what unexpected keyword
arguments okay so this is unexpected
so let's see what's going on here
okay so looks like real X is not
accepting in place as a valid arguments
what I have to do is DF equal to DF dot
array index and then execute it you'll
see that I got 2nd and 3rd January rows
now I have any values but again you can
use one of the field and a method to
fill them with some estimated values
okay so that's all we had for this
tutorial or in the next tutorial or we
will continue on how to handle missing
data using some other techniques okay
until then ah thank you very much for
watching and if you liked this tutorial
please don't forget to give it a thumbs
up below
ok bye</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>