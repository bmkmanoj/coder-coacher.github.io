<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>A Practical Guide to Docker and Service Deployments | Coder Coacher - Coaching Coders</title><meta content="A Practical Guide to Docker and Service Deployments - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Developers/">Oracle Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>A Practical Guide to Docker and Service Deployments</b></h2><h5 class="post__date">2017-08-07</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/tR7jnmXymVQ" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">but you don't know don't worry talk so
during this presentation we will see
something about docker I will explain
some of the probability I ran out when
working with docker some of my
experience all three I will manage to
pass you all the knowledge that I got
during this the time as I'm using docker
and avoiding you some errors are also
giving you sun-hee and hopefully it will
also had some fun for for all of us so
sorry
so actually the first time that I start
working with docker I went through
sanitize so docker actually was I was
working on a project that had the aim to
the course to deliver something to the
customers in a good way but actually we
were far away from giving something to
the customer I didn't know docker tour
so at that time I just need to I looked
at that project but before this sorry
yes I'm sure it's not working
okay so the first time that I actually
would have enjoyed daughter was when I
was working for project for United
Nation and World Bank actually we were
delivering we are delivering a project
for rural countries where they had to do
some reporting to get some money and
also to prove that they're spending the
money in the right way
without wasting or filling money and the
issue was that the computer where we
would run the application were not that
powerful if you may think to any rural
country usually they don't tell such
powerful laptops as we had so the issue
is to have something that was married
more but also easy to deploy and
distribute to those countries because
often they don't have a lot of internet
connection those in this scenario we I
will have loved to have docker but that
time rocket didn't exist actually I
could have done in another way but I'm
not that guy so I'm not building docker
I'm just using it and enjoying so
actually that was one of the problem and
is still one a problem we could say we
could face and speak using docker let's
blech further when first time I met I
was I saw docker
I was working on a project for DNA
resequencing so actually we were trying
to be it a lot of information coming
from a lot of agencies so huge amount of
data
nowadays we would say that was a big
data project I don't really like that
that word but actually a male it's
useful for others so that's fine
we were working on that project it was
based on docker and everything looked
fine so actually the instruction was
build the docker image there were there
were script to build that one around
that script and I was so lucky that the
scripts didn't run so there wasn't a
rogue error was actually with docker I
know not nothing about docker so let's
start looking a look I studying
something a management the script it was
awesome
because then it was working not just the
project but the architecture so before
that time I always use the virtual
machine even for the rural project I
mentioned before
using a different machine because it was
something close to what I saw and what I
can deliver to a customer without
avoiding all the problems that we you
have so it's working it's not working
you have this configuration or you have
another configuration with little
machine we more or less fix those
problems but still we all know that
those projects those the virtual machine
are not the best options
so actually quite probably you are here
today and probably all of you are
working in an agile environment it's
really agile your environment to be
honest I saw some companies some
environments where they were using agile
but actually it was so amazing Monday
the project they were working in a way
that it it wasn't creating the
complexity of the project and even to
change the small thing could take ages
that in my opinion is not really agile
but the rewards are we are trying to
improve to improve our working
experience what probably you saw and
actually is what we are talking today
it's about working on with the monolith
so actually we had that large project
that nobody knows where it where we know
we're in more or less parts we know
where to do some things but nobody knows
where these ends nobody's know how to
make change and be 100% sure safe that
it will work so we are just changing
something crossing fingers and see if it
works often we don't have a lot of tests
for this application so in a work we are
lucky if it doesn't work
probably the customer will call us and
say oh what you did if you're not that
lucky if you managed to find it earlier
that's fine so why we okay I will tell
you another thing about the demolish
it's actually when you are deploying in
the morning you have another ratio
because usually monitor as the word says
laughs and using a lot of CPU lots of
this space probably a lot of network
connectivity and I don't know if your
company is storage to provide you a mess
that has thousand CPUs and thousands
Giga RAM and unlimited space if you are
let me know I will - I'm looking for a
new job and but if you are not in that
company you have to compromise on the
resources that you have so what do you
want more you want more CPU or more
these days or more database you are
trying to get the best but you don't get
it every time all the time unfortunately
so it's not a bad thing but that's what
we have what we can do it's a usually
companies many companies interpret coma
or approaches to have one server one
configuration that will be used for all
the application or all the instances
offering to all the groups or the
company with slight differences but we
all know that one size does not fit all
actually I won't say if I need to
download something I want more space
more network connectivity but I even
need to process data then I need more
CPU and more RAM but if I have much
understanding so that's why usually we
are moving toward micro services I want
to say something we also get back to
that approach later Maurice are not bad
at all
don't mistake me I don't want I don't
say or go the aboard micro services and
develop my own models but if you are the
beginning or project probably starting
with a moderate idea is a good thing
just because you don't know your your
analysts don't know indeed all the
details or the system when it will be
ready so you can start that the model is
and will find probably will work on your
machine without an issue and then from
time to time you can start building your
micro services I show I read about a lot
of projects such as micro services as
first instance and they failed because
they were getting too complicated or
without any real plan vacation and that
was bad other projects starting with
mouse even nowadays then it starts
freaking of course that means that when
you write your code you have to be clear
clean
use a lot of tests so when it starts the
moment that you want to split some
functionalities in a micro-services
that's fine you can do it and very
easily of course it's not just moving
code somewhere else you also need to
have a plan you also have need to have
an architecture and design it's all this
stuff but money is not bad at all if
they say small so what was the as I told
you before when we were using
visualization at the beginning so
probably this scenario is known to
everybody but I want to explain that
again I will be quite quick because then
we will see the differences with docker
and that's important so when we are
building a visualization virtual server
actually we start with the hardware that
it's commenting and on top the tab where
somebody in source an operating system
whatever is the operating system with at
this stage we don't care and on top of
that operating system we have a
virtualization software you know that
there are at least three different
software with benefits of
functionalities with we actually don't
care about them because we just want to
do something so that's fine on top of
that visualization what we do we
actually saw another operating system so
if you see something that I don't really
like we do we usually should be the
right people so should not call things
or duplicate things
it's just with voice of space waste or
resources we don't want that actually we
want to optimize our things sorry
on top of that operating systems then we
are starting building our applications
if you are running in a clean
environment actually that would be quite
nice because we we know we can move the
virtual machine somewhere so we need
more dismissed face risk space we move
another virtual machine has another
machine that has more space that's fine
with more and more RAM we move another
machine that has more memory that's fine
but you know we are moving a lot of
information actually twice the operating
system that we don't really need
probably what we are doing this
thing and we need moving is like whining
is doing shopping you are not if you are
just buying the toothpaste you don't
want to exit with the bag that big you
don't need it actually that's but that's
the issue with the vehicle objection so
when we want to improve that approach we
go via docker
so let's talk arise our environment how
is our environment actually we have our
workhorse because that's a common thing
we still have software operating system
because we need it but then we have
docker rocket actually is an application
that is using two feature of the Linux
kernels actually we must run it at this
stage on the linux linux server and that
provides some it's not a proper word but
make you to make it clear it's something
like a visualization actually we managed
to use some resources which we can call
directly the kernel that is running on
the relative system to do some things
some things we are sharing the resources
subtly there is no other load on what we
have on our machine and what we need to
run our stuff in container
what are those stuff in the container
actually we call them images so would be
something that is a like virtual machine
is not a virtual machine doesn't have
software the operating system as just
the things that we know and those images
once built stays the same so when we
want to ship something to a customer or
to a country of whether is the end user
we just shoot them an image if you see
images are not monolith actually we can
build an image on top on another image
and then we can build another image on
top of the other image so if for example
we have a stack of 14 images and
actually it means that we have we see
little later in better details these
things but if you have things that can
be built on top of others again we will
only sheet the smallest piece of the
application that means that we can
change that smallest piece with very
little overall overload and if we work
one thing that we will see during this
presentation is that
you will never find a scenario when your
colleague may say oh it's working on my
machine because we dog if it's working
on his machine is working on my machine
too and it is not working on my machine
is not working on this machine so
actually we know then with this scenario
we can deliver something and having no
worries about the image itself actually
what can happen otherwise may break or
connectivity may go out so those are
other problems but we know that not it's
not our soft ratio but what we can argue
is if you are running in image then of
course you are changing the data on that
image so how that can stay the same
actually with the orchid image is
something that won't change once build
as I said before so when we are running
an image actually we call that rupees
container so the container is actually
whatever is running our application is
doing what we programmed to do the
container has access to the docker host
so we can use some of the resources
everything is customizable we can decide
what we can access what we can't and so
the user will come every is run in
container is running that is in a kind
of sandbox is a safe environment he
can't break things but there are some
things that actually happened so once
you build image you have your
application that's fine running fine and
then your sis ID min or whomever says oh
you know what I also want to access to
the image actually he's referring to the
container but doesn't know I want to
access the image via SSH that means that
he won't service running on the image on
the container as a stage one of the best
rule for the containers for the images
is that one image that exactly one
single thing no more than one and that's
also one way that we can say oh it's
working it's one thing working if it's
working so it's running
it's up and it's working fine as we
planned if you're earning more stuff
actually we are you're adding complexity
and you are going more towards a digital
machine so you're adding complicated
complexity and probably more things we
break you have much much more things to
look at and it becomes more complicated
for you as a developer that will get a
lot of benefits for the system you
special administrator because actually
we docker you can have access to the
container so you can see whatever is Chi
is working setting not via SSH maybe
they are saying oh you know my
application is also sending emails so I
want an email server on image user my
approach is why because most people just
ask for something but they don't really
have an answer for your sorry for your
fourth day question so actually they
want to just send an email not in that
image we can have another image that
just sends yes that's fine will be very
small it's actually less than 100 under
the kilobyte so it's fine you won't want
mid server you find one you want hundred
you fire on it that's absolutely fine
actually you may be scared about the
numbers because one is fine then more or
less hundreds I don't know if you have a
run manual application and your computer
all at some time but probably if you're
running on Windows you are still waiting
for the second to run but that's another
issue so what is actually the
differences between visual machines and
Dockers are very similar but they are
also very different if you see on a
virtual machine we have two operating
systems with docker instead we have only
one operating system and then be exactly
the tools the packages and software that
we need to run our application nothing
more nothing less
so that means that an application and we
receive which application can be ok
nowadays no more nobody has more but we
put the live an application on dog's
application on a floppy disk it won't
work because nobody has redone nowadays
but that's the thing you can run an
enterprise application that is supposed
to run on glass fish or steam
floppy disk or you can run a
customization for the customer just on
there is more bit so you can email them
it's fine before I won't suggest you to
do that actually we will see how to do
this but that's the possibility let's
say that customer is a firewall that
allows them to do nothing just get
emails so that could be something
probably improved a network but it's
AIT's fine so let's back to the monitors
we are building those models from the
Scrat from scratch small pieces but it's
still building is still growing so it's
time to split our models how we do it we
look at components we look what can be
split maybe we will need to refactor our
code that happens but it's absolutely
fine actually I try to perfect on my
code almost every day or any time I get
back to the code because you can always
find something good if you don't that's
awesome you may write some more tests
that's fine so starting from our male so
we can just start pulling out some
pieces at the end of our journey we will
find the same functionalities working
probably better but in a better way also
because if something some piece just
break we don't worry because we can
replace it when you see how to replace
me see these things how we can get some
mails from somebody else because
actually I say that I'm a lazy person
because I don't want to do a lot of
stuff so I started to do to learn more
and to do less so the more actually
computer should do that I don't want to
do some repetitive tasks it's just
computer tasks
I want to program them I want to set all
the stuff and then let it go and you
know what I really love is when I give
somebody some some piece of software or
container image they just run it and
also what I saw is they use to a
different approach let's start a bit
skeptical that it's working out of the
box with almost nothing work sucks box
so when they run there aren't a yeah and
now now what you've got what you want
we see reason actually we are it's
working we know because maybe I can
spend I will show you an example I
misspent man who had something working
but then from that time on if we were we
would work no matter which computer you
are using no matter if you're using a
Mac or Windows or lines or reddit or
Ubuntu I don't care actually as long as
you can run docker it will run so let's
see in detail how an image is built
actually we start from an operating
system up wait it's not same thing of
the virtual image actually this
operative system is often a very small
piece that relates to something else so
it's just your joint between the token
environment and the awesome environment
often those operating systems are but
let them be between 12 mega 200 mega it
depends which one you decide you choose
so actually if you see it's a very small
piece of software on top of that then we
all need some customization so I may
need curve do something or DNS tools to
do other stuff that's fine so I will
just put those small packages that I
really need on my layer because the
images are built as layers as I said you
before actually we have some stack each
stack is a layer so layer are mutable we
know that we can reuse them actually
that's one of the other benefit so we
see better but let's see in the same
business example if we have starting
from an operating system then we want to
build another catalyst customization for
anything else that is a bit different we
will be that small piece but we don't
have to to layers because the
customer or the server already has one
layer so that's savings for
customization that's what I usually do
there are tools that are always using
all my images images so all of them are
in this customized customized layer on
top of that as I'm working with Java I
have
Java image that Johnny made actually use
video Java eight or nine whatever I need
and then I can reduce that one for any
project that I want still the Java is
quite big but because Java is being
itself so I just need to ship that one
then we'll this is our microservice
actually we have quick net handles
micro-services run all on the same
internals or poor that job application
java image and we will always know that
the customer and environment will always
run with the same same Java where from I
know if they'll ever happen to you that
system admin is building a new machine
fine following destruction so it's
stalling usually the latest things so
it's doing an update of the system
everything runs and then come something
is not running I don't know what so you
say I'll commit some plication I didn't
change the year file or dwarf file
whatever you delivered but now it's not
working maybe Java is changed maybe then
say instead of we are running we test on
JDK Oracle JDK and they instead are
using the open JDK that's fine
but we didn't test it so maybe something
this is different we don't know so it's
an even bug that it's hard on the same
bank picking with them you find out that
oh yeah yeah you sold another version
maybe we need to either upgrade all our
system or we need you need to downgrade
that's fine but something that we don't
want when we go in production we want to
be sure that everything is working right
wave out box so any microt service is
running on same configuration the only
thing that is changing is actually just
the micro service nothing more nothing
less but of course we are probably
working you are probably working with
application server so let's say
GlassFish para or whatever you're
running is fine so we can build that
application server on our job image so
still we have the same environment we
are using the simulator so we are saving
space when we want to deliver the new
application server we just deliver that
layer that's fine if we work so we can
save space then we have our evos our
Maurice let's say that we spray
in ten microservice but actually there
are ten web application or enterprise
application so we have all those pcs
running on different application servers
if we decide to do so that's fine we
just build another image with that
probably only has death deer file or go
file that's fine
so that file may be ten mega it means
how big is your small part or your
project let's push absolutely fine so
let's see a real scenario work we'll see
even later we are building an image so
building image we start telling the
docker this file that's called docker
file where we write all the instructions
you may see and that's what I realized
when I first saw docker that it may look
like bash script where you do some some
things actually when I was working with
digital machines what ahead was a sad
file with all destruction and I just
copy and paste that file and running all
the things that an ad for that neutral
machine so to have the same things built
always the same time now there is a bit
different but it's even better so we
start saying to the order okay what is
our starting point in this case I want
to run on Ubuntu 16 time so this is our
first pace piece this is our operating
system actually what I'm running it's a
different operating system I could lead
the stano's just because it's a bit some
customization as I showed you before
because there are some symptoms things
that I always need so no matter to use
your boot or anything else the benefit
of these things is that my colleagues
when they want to use the new version if
analyze that for example Ubuntu 16 is no
more fitting what we need maybe you want
to act in or read at whatever then I had
to change only my image and then they
can keep going without knowing what is
under underneath nothing actually what
we need to know about docker is that the
first step we are other after from we
have
the name of the image can be everything
actually usually that name is larger
because it's also has other pieces of
information that is cause where you
store that image so when you have to use
you want to use that image you may
download or heading dorker downloading
it automatically so you don't have to
pass guy in a document can do it pull it
and we see how and use it then there is
the version number so actually - tsunami
you are free to use whatever schema you
want I'm using assembler schema and find
one of the benefits that you can use is
instead of placing a virtual number
using the keywords latest so that means
that whatever is the latest version and
I that I'm building the micro-service
can do solid image decide which is the
latest so they can always run the latest
whatever it is and I will manage
everything that is behind that thing so
they don't care about what's what's
changing what has changed
I'm responsible for these things so what
are some types of customization so I'm
running some comments so actually with
poker in the docker file I just use the
run it's a wound which basically boom -
so I want to install curl and then I do
this as I told you before that's it
with doing running this comment daughter
just installed those comments what I
usually do in my daughter fire use these
schemas using lots of space in the file
but then it's more maintainable for me
so I suggest you to do the same because
then when you want to change something
you don't have to go reading all the
line that you can touch the changes
quickly but one point is the apt get
cleaner
that's because usually on your computer
if you're using Ubuntu you don't run it
because then if you want to reuse a
package
you just run apt-get install if we run
but actually one of the featured okay is
that in each image as I told you is
immutable but every changes does not
change so that any change does not
change whatever was behind on the knees
but we'll just put another layer so we
don't want to keep some packages some
cache files on our image that's because
those will all increase the image
within space we probably won't need them
anymore for sure we don't need that dead
cash in production that's why I'm just
cleaning the cash saving some space
then I want to run java you may think
left yeah we can run just that common
and we can show Java the Oracle Jolla
actually that's not true
because when you try to install Oracle
Java you have to accept to the license
but the license you must accept it
so actually Java in solar is asking you
to accept that plugin it's an easy task
but you can all run on docker because
when you are running a docker file
actually it's running another process
it's not interactive you plant every you
should have planted everything if you
didn't dog we just fail or we stop it
you don't get why so there is a
workaround we'll have this running
actually I'm sorry for the length of
these er the instruction but that is
what you will need so it's like a
workaround so if you see on the fourth
line actually we are setting the
environment to say yes I accept the
license there is a problem with these
things because I can run that that
project that's fine I accept the license
but I cannot share that project with you
all because you must accept the license
as well
so actually you should build your images
on your own but if you use we open JDK
you don't have that issue but that's
fine you can build your image using
these accepting the license that all
most systems you may also want to set a
variable for your system because maybe
you are using it it's fine you can check
it you see it's just run another comment
so it's quite easy let me go to the
point the most important things for us
we want to copy our jar our micro
service in our system how you do just
copy somewhere and then from that
someplace we will use it so let's see we
want to use docker actually so I want to
start using Ubuntu and I'm cooling
ubuntu so you see the comment just
rocket pool
and then docker is downloading the image
from whatever is the registry and we
save on our disk
so that's same thing that we will ask to
our may ask to our colleagues to do when
they want to use our latest image then
you see we dr. images we can see all the
images running on the system in this
case which is just one but that that's
absolutely fine then we want to run the
registry because actually it's where we
are storing our images how do it is what
there are many options actually I'm just
showing you one so you just run that
comment let's dock and run let's forget
other stuff but then at the end of the
delay space is registry colon to that
because we want to run an image called
produces version 2 and we will also give
that a name called registry so we didn't
have that major we saw before docker is
pulling that image then it's running and
if you see the latest large number is
the ID of our container not image
because we are running an image and then
it becomes a container so let's talk
about more about docker and one example
so actually the application that we will
see now that's a micro service is built
on top of spring boot maybe you're no
spring boot or spring actually it's a
good way to build your micro service
it's very easy so I'm lazy I don't want
to build stuff and using something that
is already working and I want it just
working so I'm using some components
from the springboard for this example
I'm using Gradle to build image the
micro service so if you're not familiar
with Gradle don't worry because I will
show you some details then you can read
more but it's absolutely fine you will
also find all the source code for this
application on the tab and then I will
give you details right so you can run it
on your own and then move on our image
our my system my mimic micro service is
also needs of course a login system I
prefer to use log back you can use
whatever you want
so in our
my Gradle script I just thought
dependencies for Lord marks I don't want
to care about a lot of stuff as we we
were working with JSON and XML files I'm
using Jackson to have some output and we
will see what is our up to using Jackson
is just studying another dependency it's
very ill wrote all the information just
because they are so easy so simple it
doesn't matter but then what we want to
do is our service that is a meta data
extractor so actually we are building a
service there is a library that is doing
it so I'm lazy and not running from
scratch and just using that dependency
but how the funnel so I need to define
group name and mushroom so that's same
thing that I have done with spring
logback Jackson with Griffin videos
course and then I can use that
application that framework to extract
our information how I will define the
controller
everybody knows controllers is just a
good design decision and my controller
heads with spring boot it can be
variable reg what you see so I just
define class called controller and then
mark it with as controller and the end
point is metadata that's very easy
what is doing my class so what is the
method that I'm running its get metadata
that is triggered when you pass variable
with the parameter with your L what is
actually doing that some more subjective
happens that metal but we don't they are
not important this stage and just using
that framework so just running that
comment I can extract metadata from an
image whatever images is is it I don't
need to have that major on my computer
actually the application is just
downloading the image parsing the
metadata and showing return this
metadata
either as a Jackson or sorry as JSON or
XML you decide
so let's do the pet application I'm
using for this scenario Gradle W that's
just a piece of software provided by
Grado to let you run grader so you may
have using an ant or
miron you have told me a gradle you
don't want to worry about that
so just run that common and grade or
will install it itself so oh that's
great
just download everything that it needs
in this case this example is using
Gradle 215 so it's not loading from
somewhere grade or then it's a
configuring Gradle itself and then it's
as I the commanded radio W jar it's
building just file that's what we
usually need our micro service is
running as a jar file so let's grade or
run is taking a while usually when you
are working on a project whatever
project do you know the Gradle is using
some plugins through some features
plugins may change between the versions
so you want to have something that is
predictable doesn't change at all so you
don't have to sell your to your
colleague or look you need Gradle 215
you just tell them run Gradle W whatever
it is so if you are using it to manage
your sources then when you change it to
a new version of Gradle you test it it's
working you just approve commit your
change then when they will put your
change they will be able to able to run
new the newer version of Gradle in
working they don't need to care about
which version you're running but you
know we are still obstructing things so
people may work without lots of problems
this case is taking a lot some some time
but you just need to do once from each
machine once greater finish to the load
itself it will need some dependencies
actually we are using maiden
dependencies because we are still a Z we
don't want to rebuild everything from
scratch greater allows us to use it so
we can use maven dependencies simply
just a dependency the metadata structure
that you saw is a maven dependency so I
didn't build it on Gradle
just use something that already exists
so if you see it's downloading some
dependencies from maven dot org that's
absolutely fine and the good thing is
that those dependencies are saving on
your a dot m24 directory in your
computer so if you already have those
dependencies because you are using
Mahlon you don't have to download them
again and need to build something as we
are building the project we can build
maven problem in dependency putting on
that installing on that folder the
directory and then we can use it from
another project so if we have a
repository that shared among the company
we don't have to worry about building
another thing or telling people all you
should use something we can use Gradle
we work that's fine it's when I started
using git that all the company were
using its version I was the only one
using it but I cannot force everybody to
switch into gate but then I was using
the bridge against subversion so I was
happy using git branches everything was
a branch for me everybody else was
scared when I talked all you can build
another branch again not not my problem
actually so we build image this time it
took two minutes but as you can see we
can we could use the Gradle demo that
actually is caching some fit some
information it's improving our build
process and it's taking much less time
usually the same application of the
single instruction run again will take
four seconds or or less what depends on
the project as well so now we want to
run our project how we do it so we I'm
rebuilding it just because I'm clean
person then I'm using the docker image
with the scripts that we saw that the
second line I'm tagging the images
metadata 1.0
zero and then and then I'm running the
image itself if you see there is a
parameter - P 8080 : annuity that's
because my application my service is set
to run on port 80 essentially what we
are usually doing but on my computer I'm
running an application on port 80 so I'm
just mapping my computer or port 8080 on
my computer on to port 80 for the image
and that magics Blethyn so let's build
docker just run a comment I just
pipeline then because it's easy to show
them so greater is building now it will
take less time
it is him I'm also running some tests we
see those best we can get finished with
this stuff so I'm a final test actually
I start an application on few weeks ago
that moment is not yet usable but I'm
already running the handle tests because
the more tests I do then more
comfortable I am that the application
will run even if I'm using docker I know
that is something that you will always
say but we are not always keen to write
a lot of tests I will show you how to
run hundred tests in a very easy way and
when a customer just say or colleague
just say oh look that these things has
been worked because or whatever problem
we can really start with the tests and
using that information to let our tests
fail and then fix steps then we can keep
that information that we run it will be
very very easy so now our application is
running our micro service is already
running its life so let's try it I want
to get a meta data from the Oracle code
so it's the image in the middle
live for code so what I'm doing just
copying the URL and passing to my
application using JSON if you can see
the URL I'm using metadata /url question
mark and then beam the URL of the image
I didn't sleep anything that's not just
copy and paste URL I'm getting JSON file
and the clip it's working its life but I
won't XML so what I'm doing I'm just
changing a mile I don't know if you can
read properly but actually really is
metadata dot XML if I want maximum
output if I was a judge on output it's
just metadata dot J's on all these staff
comes for free with spring boots so
actually I wrote something like 50 lines
of codes who have everything working
with speed boost it's just working I
don't need to clear latter or lot of the
other stuff and also image is not flash
so let's get the leg back to test how to
do hundred tests without going I'm using
spoke that is test framework I found
it's also made it's also worked so let's
say well i'm also using groovy
actually i forgot to mention this
yeah I'm also using Ruby so Spock is
using you groovy you can use it with
Java so don't worry at all you just need
to add some colons and semicolons and
give me some this one so actually we
define what we want to do from our text
if you see there is being after unroll
that is a special keyword we are
actually using some variables the self
that you say so extract tags meta data
actually it's getting some information
some input data from the code that it
will follow and we'll show in our output
so we can see which test is failing from
which output or for salt which input so
what we know what we want is get in
image exacting the meta data and then
checking that the metadata that we are
getting from that image are exactly the
one that we expect because we know those
ones the bad ok of course that is about
the metadata but it work on everything
you can have as many inputs as you want
or check against on as many output data
that you want it will work so the work
we test the I think that our application
is is working so we have that type that
is testing that we majored we downloaded
has some tax I just drink the the URL
but actually this is the the code that
we need otherwise you know you can
so actually I'm getting a few CDs
address and two pipes then tags whatever
is before on the left of you to use two
pipe are the input data and on the right
are the out today in this case is a
simple scenario so I just have one input
data and one output so for logo J JPEG
I'm expecting 69 tax either
I have 69 tags that's fine it's working
otherwise something got broken I have I
can add hundred or these things the
instructional decks if you see just like
a table I don't have to write a lot
other stuff and Sparkie just pulling
those information and putting where I
use those variables as in the title
let's see the dockerfile in more details
so actually I'm using an image that
comes from my registry I'm setting a
maintainer I also suggest you to use all
with the maintenance or your colleagues
knows who build image and to won't go if
you have any problems so just using your
enemy I'm exposing port 80 as use
whistle so that's it also information
because people know which part they have
to connect they don't have to guess or
them tech don't have to get a lot of go
to a lot of places to understand what
you did they just can read that then
there is the endpoint so when you're
when are running that micro service what
daughter should actually run that is
common is Java jar my micro service it's
all done
the from the party application by spring
boots that's fine it will run then of
course we need to give Stoker our jar
file that we did with Gradle and that's
common
I'm putting somewhere and I'm using that
place for the entry point so when I
build in the first image it was ready to
go was a test server so everything was
set everything was working it was
working on my machine I said on the QA
machine and it was not working okay come
on actually just say that work doctor is
either working everywhere or nowhere so
why was not working I try try try
nothing was wrong on my from my point of
view so then some Engineer loop some
system engineer looked a bit and after a
couple days say oh look we forgot to
connect that much dead server to the
network so say ok come on it's you know
I'm working on internet stuff I need to
connect to it custom I need to map where
the client is I just wanna work why you
didn't connect the cables are united
everything was ready it was not working
but then we found out that we they said
the network using VLANs that at that
time was not ready for Doggett's
actually and I had to use an
experimental Fisher daughter actually
water will say you is too
don't be scared about using to
experiment you may say actually that's
that's fine but then you will learn
something you know you know the leaning
power is still there it's like looks
like an experiment but this is there
actually you can experiment you can fail
you probably will fail a lot of time but
then it will done it's much worse to be
feared about or thinking what would have
happened if I have done something or but
I didn't fail don't worry you are in a
safe environment and then you can move
on
once you learn in docker if you want to
use para mental features nowadays you
just need to set that text in your file
your environment and doctor will enable
those experimental features for you so
far I saw that none of them broke my
system so I'm using them happily you I
suggest you to do it but actually they
aware that something may fail until they
move them in the mainstream but when you
are running hundred or containers under
those micro services actually don't want
to do everything by hand so actually we
are using an orchestration orchestration
is nothing else that a system that is
manageable yourself or your services
that means that if for example something
some micro-service just died your
castration cells will fire up a new
container and with information
configuration that you set and will keep
running it so that's fine but admire
there are three options the Dockers warm
that is an orchestration provided by
doctor itself that is very good because
then you know that the any new feature
that they had to docker
it's almost immediately available on
this wall so you can use everything any
new feature with docker right away there
is okay the differences the true
orchestration the three orchestration
are using different name slightly
different names but actually they're
doing the same things so there is one
master or manager has called in lockers
warm and then some workers the manager
is managing the old nodes or the
the clients like sale I call them but
actually a code they actually are called
workers they are doing you're running
your containers after Baca is warm
actually was before there is also
another orchestration metal that is
called a magic Apache mrs. Basham Medusa
is not only cannot only run containers
local containers can run more stuff so
it may be a good tool for your cloud
system it's not widely used it's more
used by rather than it's warm but it's
still a good thing so I suggest you to
look at Duty 3 actually the latest tool
that I want to mention is kubernetes
kubernetes will speed from Google it's
doing exactly the same things in a
different slightly way so you can group
your containers your images you have
it's very nice way to do your work
actually kubernetes is the more
complicated to set up meters is the
middle and roll is the easiest one
actually you can run swarm in few
seconds but that you will have you may
face other problems later so a recent
research found out that 43% of the
company using docker if using kubernetes
so that can be your hint what to use but
I suggest you to look at them because it
will take more time and also that
information research found out the 30 to
2 percent of the companies they
interviewed this year is planning to
spend half million dollars on docker
components last year there were less
than 20% but they aren't creating
companies are actually understanding
what is changing with the containers
what I would suggest you is to depart
before manage to hadoken used
environmental data manage to use I had
to provoke propose it three times I
worked on that on my spare time during
the evening with making the client
coming over me but then I managed to
build image when I show it to a person
that could approve it usually they were
running they project
used to to start in more or less 15
minutes I know it's used by it there
were somethings that I had to do when I
showed him the first time the container
Iran in less than 50 seconds he was
amazed they didn't believe it so you can
do the same things with your colleagues
if they don't want yet to use docker
just study try it and then show them
that it will it actually works we may
have less few times but if you have any
question I will be happy to answer them
there's a guy with a mic that can take
your question was it that clear
so just care that AB ah yes I say I told
you to be a pirate but I'm not killing
anybody so looking at question okay
that's fine in fact thank you very much
to join these this this torque and also
what I want to say that this is actually
not the end of our journey keep sucking
keep trying docker and keep looking at
new feature because new things are
actually changing almost every week
thank you very much for your time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>