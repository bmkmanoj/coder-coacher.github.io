<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>CON2133   Nodyn and Vert.x: Running Distributed Node js Apps in JVM Environments | Coder Coacher - Coaching Coders</title><meta content="CON2133   Nodyn and Vert.x: Running Distributed Node js Apps in JVM Environments - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Developers/">Oracle Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>CON2133   Nodyn and Vert.x: Running Distributed Node js Apps in JVM Environments</b></h2><h5 class="post__date">2015-12-11</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/BM3iBJJjw4Q" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">welcome to the last slot before L can
chomp and I promise you we will right on
time so that you will catch a shuttle
buses I already dropped some slides so
no problem i will be talking about
running distributed noches applications
in Java Virtual Machine environments so
who a few doesn't know no chairs that's
pretty good I can skip the marketing
slides and I think most of you will ask
me why javascript you all know this
undefined is not a function message when
working with JavaScript and yeah
I given this talk also in JavaScript
user groups and they've asking me why
Java
okay this is a right slide with Java
today or this year we have 20 years of
technology of innovation of experience
whatever proven infrastructure operating
tools administrating tools or whatever
and now I'm coming and saying hey this
is a brave new noches world there are
pretty much statements from various
people out there in the wild but I think
the most funniest is this one from chef
Edward the founder of stack overflow
Edwards law and implication that can be
written in JavaScript will eventually
written in JavaScript yeah
just let them let the standing there
when I'm talking about no Jess and Chava
I'm talking about integration that's my
part most of the times you get this one
you have a html5 application not
necessarily a mobile app may be any
html5 client talking to a noches
application which acts as a proxy
application in front of our enterprise
environment and however there's no chase
application has to communicate with our
enterprise environment with the data
with function blocks whatever but this
is not the best architecture there are
some hops between between servers
between systems and different protocols
whatever different databases different
access to the same database different
access to the same data and it's much
error-prone it's not thus what we want
to achieve and perhaps this will be a
better solution integrating no chairs
into our enterprise environment and
reusing existing libraries existing data
access methods whatever and if you think
another step forward think of
distributed environments of this
integrated
no chairs and this is the thing I will
talk today about
and
not on is the basis of all this that
this is being possible and
you know all this yellow Nelson and you
also know the statement Java and
JavaScript or similar Lynde Karen carpet
are but indeed it's possible to access
JavaScript from within chava programs
and vice versa invoking Java from
javascript and with this we can go ahead
to Nodine Nodine is a project founded by
a project art from redhead it's a kind
of our department at Red Hat and they
took the note jsapi ported to the JVM
and added some other libraries stas
digest as similar to nass on but it's
developed by redhead so redhead use
their own scripting engine of course but
it's less performance than an asshole
not the best way there is an ass on
branch in the Nodine repository
but the ball the first development steps
were done with dine chairs and they're
using a neti for high-performance
network I oh and a synchronous i/o and
we offer and when we have a look at the
noche es architecture this is the
original very abstracted noches
architecture we have on top of the noche
es api and for process bindings there
are several c++ developments lip QB is
used for a synchronous i/o an event loop
management and underneath you have the
google v8 JavaScript interpreter that's
anoche s architecture and when we go to
the Nodine architecture it looks pretty
similar but we have instead of the
google v8 engine we have any JVM
scripting engine like dangerous like
NASA on whatever and they used Nettie
for as in Chrome's I all as mentioned
before instead of lip you Eve and they
have a process for the process bindings
between Nettie and the no jsapi they
have some software in Java and
JavaScript glue code and they're using
the original no jsapi as noches itself
does so they don't reinvent the wheel
and they don't reimplement the API in
Java or JavaScript code they're just
taking the API porting in
to the node I'm project and because of
these process bindings written in Java
and JavaScript especially in JavaScript
they say we have no JavaScript anoche
stars yeah and additionally Nodine
integrates vertex vertex is pretty
similar the same programming model as no
chest as in kronos and non-blocking and
additionally word excuses and
distributed event pass so you can send
events data between multiple vertex
verticals and you can distribute your
data data processing
and I brought a
example and this is BS a service I think
sounds familiar yes a service okay then
let's have a look into the code and the
running example
so this is a noches program written in
the notes ASAP I at the top we have some
requires of different note modules NPM
modules we use in the program and the
last module is the vertex 2 core module
which provides access from no chairs in
Nodine to the vertex event bus so we can
send events through this vertex event
bus from within noches programs this
program uses express the most popular
web framework for no chairs and yeah
express the setup and this paragraph is
quite interesting we are registering a
callback function on the vertex event
bus with the subject bar and every time
there's a message on the event bus on
the subject bar this callback function
will be executed and we take the name
and the amount from the message which is
incoming and simply lock a message on
the consoler and reply a message for the
wait time which for the time which has
the customer to wait for his ordered
Spears
at this path / order the orders are
being sent to the application so we have
why we have retro spring the callback
function we have given post Rochester
and now we have event bus sent so we can
send a message to the event bus or
vertex and we just sending the body or
which was posting from our web
application to the callback message and
additionally we are registering a
callback message at this point for the
reply of our calculating service and the
rest of the application is just some
clue code to get it work in Nodine for
some static files and now if I run this
application simply no dying and my
VSS service javascript file Nodine is
powered up and if
so the beer service listening on port
9000 and if I go to a local host
thousand i have maybe as a service
application
and it can place the order and
I want to have two beers my PA Tobias
will be ready in three and a half
minutes as we saw before one beer takes
about one point 75 minutes to create the
bartender is kind of locking and single
threaded and if you have mechanic and
weave if you look now on the consoler we
see the message for the bartender Nico
ordered two beers
and
Oh
at this time I'm posting my order
the message
here is sent to event pass and the
callback function registered at the
event bus will be listening to this
message take the message processes it
and will reply the answer of the wait
time and the application will get the
answer and displaying the result so
with this program with all in in one
program there is nothing distributed
we're using event bus but we do not
really eat this event pass me just one
instance of program running and to stop
this okay what about if we divide this
into multiple programs we're just taking
the web part it's pretty the same it's
not pretty same is exactly the same as
in the first example but not these
registered a callback function for
calculating the wait time the rest of
the code is exactly the same for the web
server and then we can create another
vertical for vertex to calculate the
wait time now i'm using the vertex api
for creating the callback handler it's
similarly up to a noche API but this is
the vertex API instead of the noche es
api I used in the first example but it
does exactly the same and because we are
now having a word xyx a vertical in our
environment we have to power up the
system in vertex of course not no Dean
but our vertex
and how we do we do it do we do this I
have to look up here that's quite a long
command
you say vertex
run with a module a special module for
from Nodine for running Nodine programs
with the noches API within vertex and we
say use the configuration file via conf
and power upper class down because we
want to we want to run multiple
instances of vertex once this be account
this is a just a simple configuration
file which says there's a main a main
file which is to load it's called POF KS
that's exactly our web server so if you
power this up
thanks to the automatic of vertex using
multicast a cluster is started with
first of all one note you can see and at
this point here this one member at Port
5701 this is our instance of vertex and
our beer server is now listening also on
port 9000 * before that's great but we
also need our bars other to calculate
the wait time and we also
power upper decks instance but because
our bar garage code is written in the
vertex API we just have to run vertex
without any module so we can run beer
bar chairs also on the cluster and you
see
the cluster was recognized by vertex and
additional note was added so we have
this the first member at the port 5701
and with the second member on 5702 it
just started up and the bars open and if
we switch back to our first instance you
see where X also recognizes there's
another cluster member in the network
and added this remember this node to the
cluster and if we now go back to the
application and reload it of course it
looks so pretty in pretty the same and
now i'm ordering some more view it's
getting later I'm also getting an answer
back to the consoling we see in our web
server there's no message of course web
service just delivering
the data for the browser and if we can
now switch to the bars of the bark
cluster node we see a bar Nico ordered
five years so the bartender knows how
many peers he has to create
so I'm stopping both instances again and
now I've powered up a JavaScript
instance
that's not what we want to do in
distribute environments for using
libraries reusing existing programs
whatever I also can create an chava
vertical or whatever language is
supported by vertex of course and that's
really the same function functionality
in this Java vertical of course it's
more code more clue code javascript is a
bit shorter and using code but it's
exactly the same functionality and if I
now start again my first cluster just
waiting until let's start it
okay and then we can say over text run
our Java cluster I don't have the tour
to compile my java code this vertex
installation its vertex command line
does the compilation for me when I run
vertex instance and so I simply start my
beer bar again the cluster is set up and
started notes are added my bar is open
again I reload the application and I can
or very thirsty just ten here okay in 75
minutes bits a bit long for some beer
but it's working pretty the same we have
on the bar vertical again the message
that i ordered 10 beers
you
sorry once again
yeah yes
it's all running on the champion yeah
also no Dino is running on the JVM yeah
this is a Jawa
it's a standard Oracle Java JVM eight
yep
any other questions sorry
yes but it's one instance of JVM but
there it's powered up in to threats to
or to operating system threats
nope
this is this is just a network network
communication using hazel cast yeah
I think asters responsible for
distributing the caches upon multiple
nodes you of course you can you can also
integrate classes char files you have to
put them in the classpath and yeah and
start the world verticals
yes yes there are libraries which makes
use of socket i/o and
and what X can expose the the event
posts as a non a WebSocket connection so
you can communicate from the browser
with the eventbus film vertex
um it it's it's possible
it depends on the use case if it's
really needed to to hold open socket
connections to a free client
any other questions
ok
so she saw this um
unfortunately a few weeks ago there was
a notice on the nine repository that no
dying also the development of Nadine
will be paused similar to the
development of avatar last year on Chavo
one I still gave a talk about avatar
from Oracle was pretty the same approach
and now few weeks ago also redhead
announced that the development yeah is
no longer actively maintained that's not
the best thing but I think if there's
enough enough interest in the community
perhaps they will power it on again and
last week there was a new a new
announcement which gives me hope in this
way at redhead chance the noches
foundation I don't know exactly what it
means just for providing noches
instances in the cloud and the Red Cloud
or perhaps also again some API of
development for no chairs
I think we have to see what the futures
is bringing
and so if there are no more questions
I want to say thank you for your
attendance and yes so
25 minutes the fastest the fastest
presentation i gave and there in the
last month enjoy back and elton john and
go out and catch your shuttle bus to
Treasure Island thank you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>