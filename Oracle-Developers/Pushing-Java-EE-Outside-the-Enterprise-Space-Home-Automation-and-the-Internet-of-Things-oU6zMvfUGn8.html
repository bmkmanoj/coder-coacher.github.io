<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Pushing Java EE Outside the Enterprise Space: Home Automation and the Internet of Things | Coder Coacher - Coaching Coders</title><meta content="Pushing Java EE Outside the Enterprise Space: Home Automation and the Internet of Things - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Developers/">Oracle Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Pushing Java EE Outside the Enterprise Space: Home Automation and the Internet of Things</b></h2><h5 class="post__date">2015-06-02</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/oU6zMvfUGn8" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so welcome to this session which is
titled pushing java ee outside of the
enterprise so it's not the typical java
recession basically i will talk about
java in a different context than with
traditional vice context so my name is
david david alaba say i work at oracle
in the java team since i work at oracle
i have to show you the slide I guess
it's not the first time that you have
this slide and to make sure you read it
I have introduced a typo in the first
person find the typo will win an iPhone
6 2 right sorry so the agenda for today
i will first spend some time on on
automation at least give you my views on
what automation is all about i will
spend then the rest of the time on java
ee so basically algebra ii can be used
in a home automation set up and at the
end before the wrap up i have a live
demo which is a bit tricky but we'll see
so first a motivation so what are what
are the typical feature features of an
automation set up a motivation is on
automation is basically about device I
think the way so when I say device it's
different type of device so it could be
light could be windows so I'm kudi
motors to drive the blinders could be
audio and so on so different type of
device that you want to control from
different type of device by device in
that case it could be a switch on the
wall or it could be your mobile phone so
so home automation is basically about
controlling any kind of device in your
own from any device in your own so once
we have that we also have the ability to
add some kind of monitoring and
dashboard capability so for example in
some case we have the ability to measure
the power consumption of different date
device we can have some sensors that
would provide us information about the
weather and
on and once we have that we have the
ability to combine everything together
so for example we have a weather sensors
it runs outside we automatically want to
close the windows we have a motion
sensor so as soon as someone is getting
in a room automatically we want to
switch the light on those kind of things
then in a motivation we're talking also
about scenario and scene it's basically
combining those different device
together to form some kind some kind of
advanced scenario we could also have
some scheduling so typically at 8pm I
want the light to automatically switch
off switch on sorry in the hallway and I
want that lie to be automatically switch
off at 11pm or whenever there is no
movement in the house I want to have
some light to be automatically and
randomly light on switch on and off
those kind of things and that's but not
least we also want to have some kind of
flexible configuration so for example I
have a switch on the wall I want to
control those lights but it's not enough
i also want to control the lights there
so i need to have the ability to change
that in a easy way so that is basically
what the most oh my commission is all
about the benefits so we have an easier
and better controls of Ravus everything
which is in the house it improves the
day-to-day life for example for disabled
person on automation is really important
so they have the ability to control all
the surrounding device from their
wheelchair it improves accuracy as well
so if you have motion sensor in your
home you can easily detect that someone
is in your home and there shouldn't be
that person or if it's raining
automatically close the roof windows to
avoid to have a fluid inside those kind
of things it also more eco-friendly in
the sense that since you have the
ability to measure the power consumption
and so on you can have an idea of what
you are consuming but also you can set
up scenario in such a way that if there
is nobody in the in
a specific room you automatically switch
off the light those kind of things so
it's more eco-friendly now I haven't
said that you will make savings because
yeah at the end of the day you will make
settings on your electricity bills but
you also have to factor in the cost of
setting up a new motor missions
installation and that's something to
keep in mind and last but not least
having an automation setup is also kind
of fun and geeky I didn't put that on
the slide because I just not very you so
if we look at the market it's clearly a
crowded space I mean every week there is
a new player on the on that market I
think last week or maybe it was this
with deling delink as said that they
would have no motivation offering Apple
working on on kit is also starting to
tackle at Marquette and so on until it's
really just the beginning so now you can
easily buy for a relatively cheap bulbs
which you can control in a wireless way
through bluetooth for example so all
those Internet of Things or connected
object craze will really explode and 0
motivation is one of the market that
would benefit from that it's a crowded
market in terms of vendors but also in
terms of technology so these are just a
few of the technologies that we can use
for on automation some of them are quite
known and quite hold such as the first
one x 10 but if you go towards the end
of the slide so there is a Apple home
kit Google and Samsung are working on
thread so clearly there is a lot of
technology in that market most of the
those technologies are proprietary and
the fact that you have that many
technology to choose from is on one hand
beneficial but on the other hand it's
also a bit tricky because as soon as you
choose a vendor you are a kind of luck
with that typical with that particular
vendor or solution so that's something
to keep in mind whenever you choose a
solution
how does it works well it's very easy we
have input device so different type of
sensors switch motion sensors
temperature sensors humidity sensors and
so on and we have output device which
are called actuators so it could be
light motors to drive Linder's or
windows or doors and so on and basically
the input device so the sensors will be
connected to the actuators to trigger
something between them you need some
kind of network some kind of bus to
connect the sensors so the input and the
output doctors you can use wired
solution or wireless solution and next
to that you have now most of the times
some kind of TCP IP connectivity but
Kelly most of the time you are not using
tcp/ip to connect your input device to
your output device and finally this is
kind of optional but in most of the case
this is important we also need to have
some kind of herb sometimes it's called
box or gateway or controller whatever
you want to call it and basically that
that thing that box will provide the
habit value to your own mathematicians
set up so that's for example that box
that will provide you the dashboard the
ability to control from your mobile
phone or from the internet you're on
those kind of things and that's Kelly
what I've been doing so i've been using
java ee basically to provide those kind
of added value on top of existing on
automation infrastructure so maybe I
first I need to explain first why I did
that so a few months ago I had the
opportunity so I have a house and next
to my house there was a whole building
so I basically connected the two
building together I not thought it would
be a nice ID to put and to install an
automation system in the two buildings
so I had two buildings and one which
basically were we were starting from
scratch and another one which was when
you renew 10 years ago
so I had to chose solutions and I pick
two based on my needs the first one is
called z-wave so you see their
definition it's an interoperable
wireless radio frequency based
communication technology designed for
control monitoring and Status reading
application in residential and light
commercial environment so it's like
something that has been designed for the
rigid registries identity but typically
I fit in that category they call
themselves the interpol stand up
actually it's a proprietary solution so
there is one company behind that
solution and run that there is an
alliance made of different vendors but
at the end of the day it's still a
proprietary solution so it's a meshed
wireless network technology most of the
device you will use indeed wave are a
battery-powered so that means that most
of the time the device will be in deep
sleep mode and from time to time they
will wake up to see if there is anything
any message for for themselves the range
is quite short a hundred feet open side
so as soon as you have a wall the range
will decrease but since it's a mesh
network the pot within the protocol the
protocol is smart enough to for example
I need to send from the controller
message to devise be but from the
controller I cannot reach the device be
so the the protocol will try to root
through different nodes on the network
the message to make sure that it can
reach the device I want to reach so you
can have to have to 232 modules /
controller which is enough for a house
and one of the benefit of z12 its is
that it's cheap and simple so the
connectivity you need up to have as you
did acid web transmitter in my case I'm
using a raspberry pi with a specific
dollar board
but you could use a USB stick a specific
USB stick and so on I haven't found any
a distant java api to talk to those it
web stack so i use a specific middleware
for that this is how it works i will not
go into the details because most of the
complexity is really hidden by the
protocol itself and by the middleware
but since the device on the left is most
of the time slipping the protocol need
to endure the fact that if we want to
send a message to it it might not be
available so the message need to be
stuck to need to be cute in putting your
cue somewhere and at its at each step we
need to send in both direction
acknowledgement whenever we send
something so this is a real-life set up
so it's a Raspberry Pi with the daughter
board we have on the right an input
sensor this guy so its motion sensor it
has a light sensor it has a temperature
sensor and yeah and motion sensor it run
on the battery so there is a battery
inside well there should be a battery
inside and it run over more more than a
year on a single battery so the protocol
and the seed web stack is nicely
optimized for that I'll come to the cost
then we have an output device so this is
basically a dual relay or so it's not
exactly the same but it is this kind of
device so it's typically device that you
will put in a wall to control a light so
you see there is a small antenna and so
on it's it's quite small in terms of
cost if you include the raspberry PI's
for that complete solution 200 euro
which is quite cheap
so I choose it with butters also decide
to use another solution so that was for
the new building I use Kennex so
connects the worldwide standard for own
building control it's actually an iso
standard so it's really a standard yep
history from successes and can avoid
something like raucous protocols and
integrated it is possible to adapt those
protocol
this is what this tender is about so
canings it's so so so you will see well
maybe we should discuss offline but let
me talk about Kennex so it's a specific
sorry to stand out there is a bunch of
vendors behind that standard so that
means that you can really pick any
solution from any vendors and mix it
with other vendors in terms of media it
work on twisted pair it works on
powerline over radio frequency and IP in
mind in my case I'm using twisted pair
so I have a specific bus in my house
connecting all the clinics device when
it comes to clinics you need to work
with a tool which is called engineering
tool software ETS you need that tool to
set up your clinics system there is no
way around that it's a very expensive
software I think it's the most expensive
software I've about it's one around 1000
1000 euro it only works on window and
just by the name engineering tool
software you can tell that it's not an
easy-to-use software I mean it's really
a software that has been designed by
engineer for engineer and in the for me
maybe it's just me but it's it's it's
really the showcase of everything you
should avoid when you design a user
interface I think they spend some time
to try to make it complex anyway you
need that so in terms of connectivity
you need some way to connect to the
clinic's birth so you can use USB Rooter
and most of the time we are using
clinics I p router so that's the white
box we are there now there are also a
specific daughter bar for Raspberry Pi
in my case I'm using the other router
which costs around just the router 300
euro so already when you would compare
our connects to sit wave we already see
no difference the nice thing about k
mechanics is that you don't necessarily
to understand all the clinic standard
because it's a quite complex stand out
there is a very nice java api for that
which is called calimero
it's open source and calimero we'll
really I most of the complexity of
Kennex you still need to understand how
connects works but calimero will chill
you from the dirty details of trying to
compose datagrams and so on and the API
is so nice that it's even use by non
java project so this is typically how it
works so in green we have okay next
verse we need a power supply to power
all the device on the bus we need at
least one input device at the top I've
we need at least one output device at
the bottom right and then we we need the
gateway we do ets2 the configuration
once the current configuration is done
you can get rid of the gateway and each
yes and then you might want to have a
controller a gateway have something to
add some some services based on that
just for that setup it's more than 2,000
euros so it's factor of 10 in term of
course z-wave vs phoenix yep it yes
that's the software in the engineering
tool software the thing you have to use
but you don't want to use this is my
setup at home first you can see that its
work in progress to give you an idea the
rack is about one meter high and it's
not a super complex organics deployment
what we don't really see is the
kilometers of cables that are going to
the track on the top so if we have to
compare the two zdf is proprietary
Kennex either standard did we have had a
little bit more than 20 root device
which should be okay for most of the
house on canning set up you can go up to
58 thousand so it gives you an ID z-wave
is clearly region residential while
Kennex is more industrial so you can for
example and the autumn own automation of
hotel
campus and so on did way very cheap
simple k NEX complex intrusive and
expensive so how does java if it in
there so we have launched july seven
last year and really when i did my setup
i wanted to use Java EE and see if it
would make sense to use Java in that set
up so what could be the benefit of using
Java in that setup so really the idea
here is to use Java EE as the hub of the
home automation system first Java we
have been using Java ensures to handle
connectivity to different back-end
system database message queue erp rester
ici services and so on so Kelly Java in
that scenario connectivity is key there
is the connectivity obviously from the
server the Java server to the client but
also connectivity from Hawaii to clinics
and z-wave so there are two kind of
connectivity that we need to handle and
then even on automation is basically
about even that are generated by your
house so you need to have an easy way to
handle those kind of event so i will
basically go back and forth between
connectivity and event handling and
hawaii so first one of the API I've been
using in my setup is Jason P which has
been insured introduced in july seven so
it's about swimming and parsing of JSON
so whenever possible I'll try to use it
on super lightweight whenever it's
whenever I can decide I use design but
typically some of the solution are not
just unaware so in that case I have to
stick to what they have so the API is
very easy to use this is for example one
of the object i'm using a lot it's a
notification so basically have a sensor
or a device it could be kind of device
or is it wave device that is sending an
even so i want to track that within my
application so using the design object
builder I just get a JSON object I
describe my
my my notification my isn't using the
Builder pattern and at the end i invoked
a bit metal and I'm done so it's already
two very easy to use API next an obvious
API is the GSR 356 the Java API for web
socket which has also been introduced in
july seven so it provides us
bi-directional for duplex communication
protocol so it's full duplex meaning
that the both side can talk at the same
time so it doesn't have to wait that the
other side is done to start talking and
in my case I've been using a web socket
from the server to the client so since
it's full duplex the server can push
information at any time to the connected
client so whenever there is for example
in an event a light switch off the event
is automatically and transparently push
to the client and the nice thing about
design that about with web socket is
that it's a standart it's an IDF stand
out and it's also part of html5 so if
you take any html5 browser you will have
a JavaScript API to use the WebSocket
support of the browser so there are two
ways to use the API well first they are
true API in fact in GSR 356 there is a
client API and server API and they are
two way to use the API a traditional
programmatic approach or an annotation
based approach and this is what i have
done so this is basically my web sockets
endpoint that is pushing notification to
the client so i'm just using an ad
server endpoint annotation to specify
that this bozo when it will be deployed
in my web container should be exposed as
a WebSocket endpoint and then i have a
method open connection which which is
decorated with the ad on open annotation
so that method will be invoked whenever
there is a new client connecting to my
server endpoint and what I'm doing there
I'm just taking the session object which
represent the connection between the
server and that new endpoints and I'm
having hit two a queue at the bottom you
see that there is an on event method
that has nothing to do with web socket
but in that method i'm doing a sin of
all endpoints let's look at what that
method does basically what that method
does I'm taking the older session which
are connected and I'm just taking the
remote end point for each of them and
I'm sending a basically the payload so
the notification that has been sent and
I'm sending that are you using a JSON
payload on the client side it's very
easy so this is running within your
browser so I'm using the JavaScript API
of the browser to open the WebSocket
connection and to register down message
method that will be invoked whenever
there is a new incoming message coming
so that was for the connectivity from
the server to the client that was the
easy part now let's talk a little bit
about something else and then I will
come back to connectivity again CDI
context and dependency injection so CDI
has been introduced in Java 6 and it got
a little bit of update in java ee 7 so
enjoy i 7 we had CDI 11 so it's all I
mean in term of Easter eat so relatively
new API but nevertheless CDI is really
becoming the core component model of
Hawaii so it's really a very important
API so in CA 11 we have had it for
example well first there's an increased
use of CDI across the platform we have
added a CDI interceptors and so on but
what I've been using in my application
is CGI event so this is present since ed
I wonder zeros since the beginning so
it's basically an implementation of the
observer design patterns so it gives us
a lost coupling between even producer
and even consumer so there is no ad
coded listener and so on you see that
it's very easy to use so this is an
example of CDI so first I need to
produce event so for that i'm using a
injecting an
event of type some event so this is an
event I'm defining and then at some
point in time in my application I will
fire an event and to that event I will
attach some payload and somewhere else
in my application I will have at least
one observer method so the observer
method is basically just annotated with
the observed annotation and whenever the
first guy will fire an event the second
guy will be invoked and not only that it
will also get the payload so this gives
me an easy way to really trigger event
and observe event from within my
application so this is an example so f
an MDB that is getting an event and
whenever I have an event which is coming
to the MDB the MDB fire an event for
another part of the application so in
that case there is a given coming on the
next bus on the MDB while it's received
by the MDB and it shoot another event
this is the the method we had earlier so
in my web socket endpoint so I we had
the uneven method so that method is also
listening to different type two
different event so whenever there there
is in my application an ohm event which
which is fired that method will be
invoked and it basically it will
basically update all the connected
endpoint with the new event so I'm
switching a light somewhere there is a
fire event that is sent that that guy on
event is called and it updates all the
connected endpoints so let's go back to
connectivity jax-rs to so jax-rs to is
part of java 7 so it's a quite deep
revamp of the ja da jax-rs specification
so we evaluate filters interceptors a
synchronous processing I / media
validation and so on and Klein what I've
been using a lot in my in my application
is the client api which has been
producing jax-rs too so in the past so
if you can check the rest is basically
on api which is
easy to use to develop a rest endpoint
but when it comes to the client side so
the client that concern consume those
endpoints you hater add to write
low-level code so HTTP URL connection
manipulation those kind of things or use
a provider solution that has been solved
in jax-rs to we have a standard API and
the API is very easy to use so you see
how it works so in that case i'm using
jax-rs the client-side api to connect to
my z-wave middleware because there is
some misconception sometimes some people
think that it's a client api so it's a
client that can be used only on the
client side well it could be that the
the server is a client of another
application so it can obviously also be
used on the on the server side so how it
works I just need to have an instance of
Jack souris client that I get through
that factory class then I configure
basically my target on my end point I
want rich so using the specific URL as
specify the request which HTTP verbs I
want to use which type I expect and I'm
done now something to keep in mind when
you are looking at a motivation product
is that some of them called condoms call
themself a rest enabled but someone most
of the time it's not really rest
basically you do everything to get so
they are not really following all the
rest principal but nevertheless using
that API you can most of the time use it
use them sorry obviously i'm also using
jax-rs to expose as rest restful
resources all the device i have on my
networks so does it wave device the
Kanak device if it's an input device or
if it's not put device they are all
exposed through rest using jax-rs we see
in this case for example that i'm using
a template so in my path i specify ID
and val and then i can use that
information in my
in the body of my method so I basically
get the idea in the val that has been
passed those kind of features are also
available on the client api um and you
see also here that idea i'm still using
a CDI event to notify other parts of the
application that the that z-wave device
need to change so basically we need to
switch it on or off depending of the
value of val so moving on GCA so i have
to say that using jax-rs is kind of
abuse whenever you you have a jax-rs
enabled services it's easy to connect it
to a java ee back end but sometimes
that's a receipt or that that solution
you want to use is not jacked a
resonable so how can we do that from
Java this is what GTA is about Java
connector actually architecture so the
current version is 17 but it's a quite
old API I think the dc-10 has been
producing a cunt remember if it's I
think it was G 313 so 13 years ago and
she's since then it has not evolved a
lot so GCA providers a component models
to connect to a is enterprise
information systems and that component
model so the company they are called
resource adapter we also sometimes
called call them connectors so the
resource adapter will basically do the
communication between your Java
components or your servlet ed GBC di
beans and so on and talk to the backend
systems and obviously you will have to
follow some contracts when you when you
will write and use that resource adapter
so by E is we mean package application
ELP kicks mainframe and so on I tend to
say that he is tanned for exotic
information systems because whenever
there is a black box that we need to
connect to we are using GC as the
this as the way to do that so GCA so we
have that specific component the
resource adapter the component itself
and it has a way of working I'll bond an
inbound so it's always the java is side
of the it's always the device ID that
initiate the connection but in an
outbound model it's basically java ee
the java application was driving the
communication so it's really a risk
request response so there is a request
coming from java ee that goes to the AE
is and the resource response coming back
to the java application through the
resource adapter then we have the
inbound model which is different so it's
still the java application and the
resource adapter does that set up the
connection and then it the eis will send
at any time in an asynchronous way
information to the application and the
application will obviously have some
kind of mechanism to listen to that
those event and that yeah sorry so I
will only talk about inbound how it
works and that mechanism that logically
the MGB the message driven bin so we use
an MDB to listen to incoming message
from EIS systems so I guess that most of
you have used or known GMS so this is a
GM smdb so we use the add message driven
annotation to specify that is this is an
MDB we are using a directive the
activation spec to configure the MDB
well note sorry we use the activation
spec to configure in the MDB the
resource adapter so the resource adapter
will get that information and finally we
define the method the callback using a
listener so we have a message listener
and we need to implement on message
method so this is typically how you do
GMS connection inbound
connection so if you look at the M the
agb specification I've looked and tried
to find them to be a definition so an
MDB is an a synchronous message consumer
MDB is invoked by the container as a
result of GRE value of a message at the
destination or end point that is
serviced by dat md b and d be listened
to inbound resource adapter and so on
there is nothing in the specification
that says that M DVR for GMS only most
of the time we are using MDB with GMS
but clearly they are not tight
exclusively to GMS so we can have those
kind that kind of things Kennex MDB so
i'm still using the add mr. driven
annotation to specify that first season
an MDB and so gone i'm using the
activation spec to specify what
information needs to be passed to the
resource adapter in that case it's just
the IP address of the kanak-kanak
gateway then I'm I need to implement a
listener and it done in that case I need
also to implement on message method but
we can go further same message driven
bin the difference is that the listener
well in this case the listener is
different we have different method that
can get inbound payload and for that we
are using a specific annotation specify
basically out the routing should be done
between one and the other so that's the
client side of the sins now let's see
how to write a resource adapter so we
need to implement a few files first we
need a listener interface it's very easy
it's basically an empty file then we
need to write the resource adapter
itself it's basically an implementation
of resource adapter one of the thing and
one of the limitation that resource
adapter doesn't have is that for example
they can
have a different thread there is a
specific work manager they can start
open socket connection and so on so
typically the kind of limitation that we
didn't had in that we don't have in
other Java component even though this is
changing so for example with GSR 236 now
you can start a thread within a java
java component what we also need we need
an implementation of the activation
specs so that will basically be used by
the MDB to specify the configuration of
the resource adapter so the endpoint
activation method will be invoked by the
container when the resource adapter is
deployed it's a bit verbose but there
are few important method here the the
second one fine commands in the MDB I
will explain what it is and the last one
shall work it's basically where we are
doing the real work and this is done
this can be done using a different
thread so if we look at the fun command
in md b so this this class sorry this
method being class get made so no sorry
this method is getting a the class of
the MDB and basically what we are doing
we are scanning the class so the MDB
class to see which method have been
annotated and that's basically we will
use that information to route the
incoming payload the resource adapter
will use that to route the incoming
payload to the specific method what we
also need to do in the resource adapter
is obviously the connectivity to the
actual back end so in this case this is
well this is a snippet of the
connectivity of the connectivity to the
clinic's bus so this is using the
kalanoro api so basically you you see
that i'm getting some information i'm
doing a switch on that so this is a pure
calimero then
so this is so so G address you see on
the top 074 is a humidity sensor and
then i'm using the message type so i
know that it's a sensor i'm using that
message type to see if there is in my
mdv a method that can handle that if so
i will call that method from from my md
b and i will also pass passive the
payload so then not if not the
notification object obviously we also
need to define the annotation that will
be using the MDB but that is a trivial
to do so once we have that no 3 so the
colon DB method will be invoked by the
resource adapter by a container genet
generated proxy so that's part of the
spec you don't really have to know all
the all the details of that well one one
should understand the flow it's solid
real to implement it in my case I've
done at done that against Kennex but
could have been used against another
type of networks and once I've I have my
mgv and my resource adapter I can have
that kind of code in my application so
whenever there is in this case an event
which is sent on the clinic's birth my
java application will get that event and
if it's a sensor the end all connections
or will be invoked and if it's a switch
the switch connects method will be
invoked so that's the inbound part i
will not really explain the outbound
part because i have to admit that this
part of the specification hasn't really
evolved so it's a bit rusty and dusty I
mean clearly the unbound part is not
well I think it was the most difficult
part to to write in my in my application
but nevertheless once you understand
that model so in terms of connectivity
you use jax-rs whenever you can if you
can't use Jack's arrest you have GCA
that allows you to easily well easily
for inbound for outbound it's a little
bit more it's a little bit more work but
you have just yet i can that you can use
to write connectivity to any kind of
systems so that's basically where i am i
will show you well up food a fully alive
demo so clearly the connectivity to me
was the most difficult well i think that
the connectivity was the most important
part of the application but now that i
have that running i can start to get
benefit of other java api for example i
quit' I could use CGI interceptor and do
funny things so whenever for example I
switch light on using CGI interceptors I
can intercept that method call and for
some light I can automatically switch
them off after let's say 30 minutes I
can use the GV the scanning capabilities
and so on so I have the base is done I
have the connectivity to the back end
sorry to the motivation networks done
it's working now I can really enhance
the application so i will show you a
real live demo this is basically what i
will try to show you so i have a client
the client is controlling my own office
so I can control basically any any
device that is in my home office for
that I have would obviously a java ee 7
back end you're running on glassfish for
that is controlling clinics device and
z-wave device Kennex is done through GCA
and did we're using rest inbound and
outbound in both case if we look at the
set up something like that
so I have in green mechanics bus on my
bus i have many input device and money
output device I have my z-wave
middleware that is basically handling
all does it with protocol I have a few
z-wave device I have java ee in the
middle that is controlling that is
talking to way to clinics using GC GC a
and Java that is talking to a to z wave
using rest and now the tricky part
that's that is a live demo so I will
connect to through VPN to my home office
which is a 9,000 kilometers away so it
was working in one hour ago so let's see
so first so i live in belgium so right
now in belgium it's three in the more
maybe you should see so right now it's
three in the morning in belgium so
that's also why i'm not only using my my
home office because i don't want to
disturb my wife well my my daughter
wouldn't know well yeah but my daughter
is sleeping like a baby so she wouldn't
notice but my wife will so let's see so
let's connect so first VPN to the M so
if that doesn't work because it's a bit
tricky I have a back-up plan but let's
try let's try to do it live so I'm
connected so SSH mean so I'm connecting
now to my java java so i hope you can
read it yeah it's a back it's a mac mini
basically ok now the password
it's not that one yeah okay I mean so
start domain domain one yeah was a test
to see if you feel so my glass fish is
starting yeah something else I need to
do and that's where i'm using a plate
obviously if you want to see something
you need to have ok we don't well don't
want that i need to connect to a webcam
in my house in my office sorry and
that's so this is my office you can see
so it's a it's a well it's a webcam that
is doing infrared so if it's too dark it
will use infrared nir in here i need to
yeah that's that's the beauty of of
applet it will be the applet we will
make my demo shit well I'm before the
backup plan i have another bucket plan
so let's connect to the two glass fish
yeah that guy resolving host
children me that so 10 1069 this yeah I
think I think it's because I'm so my
client is using a is trying to getting
some javascript file to the outside yeah
okay okay it's it's enough so let's see
I will take that guy copy link address
and let's see that works no not that one
so again this is done over vpm so
doesn't look good let's try with this
one DG video that DG now
don't say anything it so yeah the
refresh is a bit ugly it because I'm not
going through the applied so but let's
hope it will stay alive so let's first
lie a switch on a light so again so this
is a I will basically send a rest
command to my java ee backend will send
in this case it's a well you don't see
it here but when you have those kind of
address it's a clinic device so let's
switch that one on well you see that
there is some kind of light so let's
continue so light wholesome text for
that demo add to put name in the
different light so this one is behind
the camera so maybe you will not notice
maybe it's a bit brighter but it's not
that abuse also you can notice here that
some of the sensor are being updated so
those are awakening sensors so from time
to time this an update on the next bus d
java application received at through GCA
MGB and then I pass that to the rest of
the application using CDI event so let's
continue so light will know i will like
use that one at the end plug stairs so
this is again a caning device it's a
plug on the wall and this should turn on
the yeah that little we see the light on
the on the on the right yeah so let's
continue guru liked that the light which
is on the left it's a z-wave light well
it's not as it with light it's a stander
it's a standard light and I'm using that
kind of plugs directly to control it so
it works so I still have one it's this
one so light wall desk so that's
basically the one which is on the back
and you see that there is kind of stand
just behind and I've done that because
just behind the light I've put one of
those sensors so it's a motion
so that it's also a light sensor so if
everything goes well so this is a z-wave
sense or if everything goes well this
one this guy here should be updated yeah
and if everything goes well if it
reaches a certain ratio it will turn off
the backlight so I'm switching a cannock
slide thru zeid wave there is an event
that is passed on on my java into my
java application that generate a rule to
switch off another device in this case
it's a seed web device but obviously you
can mix and match so let's it's the wall
desk and also maybe so it's a jewel
camera so maybe it will have enough
light and it will go in color so i send
the event yeah ok so we see that that
light ok yeah we see that the light as a
astronaut the camera is now in a day
mode and we see that the blue lake so
that that like here is switched off and
the only thing that is yeah no yeah we
also see that the this guy here so that
basically the the intensity just behind
the light of on the back so if i switch
off that light wall desk ok it's dark
and we should so it goes in night mode
so we see that now the intensity as go
down and if I now do it again so I will
I'm lighting the blue backlight it's on
and let's try again light wall desk it's
on and the locks should go down and yeah
ok so before I close my demo I knee
yeah exactly I need to turn off the
light so plug stairs and the okay it's
it's good son so I can kill that guy I
can also place tonight okay so that
worked so wrap up so Java e4 with all
motivation does it make sense well you
see that we basically have all the hooks
to connect to any kind of back end
obviously we can use that for all
motivation but we could also use that
for order type of system the nice thing
about Java is that we have even driven
capabilities message driven bean CDI
event and so on so it gives us a nice
way of handling event which is something
important for that type of scenario and
we have bunch of other capabilities that
the provide plus the platform provides
by default non-blocking i/o a
synchronous capability scheduling and so
on so once we have the base is done we
can build and add the extra capability
and let's not forget that everything is
running within a java application server
so it provides the java application
server provides extra capability so we
have a well-known component model we
know the life cycle we can use the
monitoring capabilities of the
application server and so on so what's
next currently my application support
Kennex z-wave and outbound infrared so I
can control an infrared device I will
add another type of connectors basically
to control RF 333 device I will enhance
the type system of the application
because right now it's quite basic i
will also had some kind of state
management so basically when the
application will start it will in it
will ping the network to know what is
what is what is the status of the
different device on the network I will
that's something I will do the first
thing was to have something running for
java one now with trends I will I will
think about it something I need to do
know something I need to do is to have
some kind of decent interface yeah what
I didn't show in my demo is that
everything which I have done I could do
it directly using rest because the
client is talking to to the backend
using rest and back-end is talking to
the client using web socket to just to
send notification so Java EE and IOT in
general IOT is basically about connected
device once you have connected device
those device will produce data so it
makes sense to use Java EE to aggregate
and work on those data also it makes
sense to maybe put Java a little bit
deeper in the network so we'll talk
about Java in the back end but now with
the footprint that we have with current
job I container maybe we should put
think about putting it a little bit more
deeper in the network also I just want
to briefly talk about Java yet because
we have we are started to think about
Java 8 and clearly in Java yet there
will be technologies that will simplify
what I've done today CDI they want to
completely revamped the event model so
that something well the CDI even model
is very simple very basic but it's very
efficient but they plan to enhance to
head capabilities so that that will be
nice in GMS to they will try to have a
lighter model to replace them DB model
so I'm very curious to see how it goes
and so on so in Java 8 I think it would
be still simpler to write us an
application and also in Java 8 maybe
we'll improve the current GCS
specification I saw that maybe it will
evolve so we'll see resources so
everything was running on that fish for
it should work on any java application
server and if you want to learn about
any of the API which has which I've used
today including GCA just look at the
Java tutorial it covers all the Java API
so yep so we have a few minute left and
I will gladly take any questions yes so
for cainnic so the question was about
out to that device on the platform so
for Kennex you have to go through it yes
so that's a yes oh so you first need to
configure the network so either the
Kanak networks or the z-wave network and
then you just need to describe the
device on the Java side are the four
clinics because well Kennex I have the
meta data about all the device in an XML
file so I could use that file to direct
import that with my application but it's
a bit overkill
you use what smart engine no no big oh
no so I didn't tried that specific
technology because my device are not
exposing themselves to the network so
that that's what I want to do next I
want to the opposite I want to basically
inspect the network to see what device
are there and hopefully I should be able
to understand what type of device it is
and import that within my application
and also I can once i have that i can
also ask the state of the device so if
its sensors i want to get its value if
it's a light I want to know if it's
turned off or on those kind of things
yes yep
so what yeah yeah yeah no that's that's
that's not yet that that's something
that so so one of the specification that
will come to java 80 Jason be so binding
between JSON object and Java object once
will have that I have the ability to
just work with Java object within the
java application and as soon as the lead
they need to lead your java application
jason b will be no yeah doesn't be sorry
we be used to do that and obviously
outbound that also inbound whenever
there is a job json object coming i will
use json before that yes sir
so something I didn't mention is that so
first I didn't want to buy any solution
because for canings they are specific
solution they are expensive they are
nice they are also open source solution
for z-wave I think they are more or less
more or less tied to z-wave I have to
say that for java there is also open hub
which is an open source java based
project and i know that for sure it
handle Kennex and I i would assume that
it also handles it well so either I had
the option to learn hope and hub or do
it by myself and in that case I thought
it would be interesting too because I
wanted to understand really our clinics
and zdf works so i decided to do it from
scratch open remote yeah open remote is
one of them and yeah yeah daddy yeah
yeah oh yeah that they are existing
solution and open source and free
solution here I just wanted to learn I
would work so that's why I did it from
scratch yeah but also its it was really
easy i mean the GCA out bond was them
was the most tricky part because well
it's an old API and we are not used to
yeah well GCA well so I saw only Linda
slide that GCM might be revised so let's
hope that it gets revised because in
those days we are used to simple API so
so the question is what time I spend on
the project I spent a lot of time in
trying to understand Kennex itself for
the rest I don't know but as you see my
canning set up it's so it's it's not
even close so it's a work in progress I
mean the dollar is work in progress but
also the software yeah I think we are
done yeah okay so we have to leave but I
can take more questions</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>