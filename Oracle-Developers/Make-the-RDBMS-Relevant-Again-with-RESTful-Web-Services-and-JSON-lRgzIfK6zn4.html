<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Make the RDBMS Relevant Again with RESTful Web Services and JSON | Coder Coacher - Coaching Coders</title><meta content="Make the RDBMS Relevant Again with RESTful Web Services and JSON - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Developers/">Oracle Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Make the RDBMS Relevant Again with RESTful Web Services and JSON</b></h2><h5 class="post__date">2018-04-10</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/lRgzIfK6zn4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">my name is Tim I come from the UK I've
been working with Oracle technology for
about 23 years I originally did a PhD in
genetic engineering and accidently got a
job in IT back in the day when you could
accidentally get a job in IT so for the
last 23 years I've been doing Oracle
stuff and for the last 18 years I've had
a website called Oracle based com which
looks like that so if you've googled for
something to do with Oracle and you've
come across this website that's what I
do in my spare time when I leave work so
sitting for hours in my back bedroom
typing away because of the website I got
invited to a thing called the Oracle ace
program which is a community program at
Oracle which is basically a pat on the
back to say well done for contributing
to the community as a result I've got to
travel all around the world including
India a few times so this is my second
time here and my third time in India so
subject of today's talk is about making
the database relevant again so I'm a
database guy I work predominantly as a
DBA in a pl/sql developer although I do
lots of other things as well so why do I
care about Jason and web services well
the point of this is that for some
people now relational databases are
considered legacy so if you're a new kid
coming out of school relational
databases don't necessarily attract you
because there's lots of new and cool
fancy things that you might want to use
instead also as a result of that for a
lot of people pl/sql is considered
legacy so my two main skillsets
databases generally
DBA work and pl/sql development some
would consider legacy now so what can I
do to make myself look relevant in this
new world well a very easy thing like
do is to get involved in the technology
for representing all of my pl/sql as web
services directly from the database
Jason is really popular for data
transfers and we'll see why so what is
it probably the best quote I've seen
about Jason is this one the lots of
other quotes but this one works for me
so it says Jason is a syntax for
serializing objects arrays numbers
strings boolean's and no it's based upon
JavaScript syntax but it's distinct from
it some JavaScript is not Jason and some
Jason is not JavaScript so I really like
that why does that matter so sorry
what's the set up of Jason what's in it
well really we can divide this into
three main things the key value pair is
important what we've got is in this case
an employee name as my key and my value
is Clark and that sort of key value pair
will represent a number of different
data types the next thing we have is a
JSON object and a JSON object can have
one or more key value pairs comma
separated surrounded by curly braces
importantly the elements of a JSON
object don't have to be of the same type
so we can have number strings billions
that's all good
the third thing we've got is a JSON
array and that's going to be a comma
separated list of objects or scalars
even surrounded by square brackets so
with those three things we can represent
pretty much all of the data we normally
see in a relational database once again
what's kind of interesting about the
array is the array doesn't have to have
the same object types in it we can have
a variety of different JSON objects or
key value pairs in there they don't have
to match so every element of the array
could be completely different which is
kind of unusual when you deal with
databases which is why I've made them
all the same in this example
the reason why Jason is really neat if
you're a JavaScript developer is because
it kind of just works with JavaScript
what did your script developer can do is
take some JSON text called JSON duck
Pass and that is now a JavaScript object
that they can work with and likewise if
they want to serialize a javascript
objects they can just do string if i and
it turns that javascript object into
JSON
so that means when you send someone data
as JSON you're actually sending pretty
much a native object to JavaScript and
of course Jason is popular with other
people as well even if you don't care
about JavaScript it's still interesting
to us because we can think of it as
skinny xml now it doesn't matter if you
can't read this the message is the
important thing if we look on the Left
we've got a single Department in a
department list with all of the
employees for that department
represented as tag based XML and on the
right we've got the JSON equivalent they
look pretty similar but if we were to
minify these so get rid of the new lines
and white spaces that are unnecessary
we'd find that we've got 768 characters
when we use the tag based XML compared
to 470 with the jason so it's
significantly smaller to represent the
same data you might think I'm cheating
because I've used tag based XML so I
could use attribute based XML where each
tag has its attributes for the data
rather than separate tags and that is
smaller it's 537 but it's still not as
good as the JSON in terms of the size
and so that's pretty important because
when we're dealing with any sort of data
transfer size is a really important
thing if it's smaller it should transfer
faster
so what's rest that is very similar to
me for the last few days
it stands for representational state
transfer I have to read that I can never
remember it the main thing about this is
really the URLs you're interacting with
all the you our eyes what we would have
typical
is a URI that points to a specific item
a specific resource but we don't know
from that URI what we're going to do
with that resource if we had a URI that
said something like delete employee
that's wrong that's not rest
that's our PC remote procedure call type
URL there's nothing wrong with our PC
but over HTTP but it's not rest how do
we identify what we're going to do with
this
URI well we do that using the HTTP
methods there's a few of them but the
ones we really care about a get post put
and delete so get is retrieving some
data post is creating a new object a new
resource put is amending a new resource
or creating it if it's not already there
and delete is removing a resource not
surprising you could map them onto
simple SQL statements like insert update
delete but I'm not really a fan of that
because I like to present real world
units of work so when you create a new
employee that's not really just
inserting into a single table is it it's
inserting into many tables and doing
lots of work so I would present the
whole of that as something to the
outside world so rest doesn't dictate
outputs and it actually doesn't dictate
protocols either you can do proper rest
using FTP if you wanted to I wouldn't
but you could but it doesn't dictate
input and output formats so it's up to
you to decide but there are lots on the
net you can look at things like the
Google documentation for what they think
good rest content is so very important
tool for Oracle databases in terms of
rest enabling them is ODS and that's
Oracle rest data services this is just a
war file that can run in standalone mode
or on Tomcat GlassFish WebLogic it used
to be called the apex listener because
all it did was front apex application
Express does anyone use application
Express
okay a few people is anyone too scared
to put the hand up yeah okay is anyone
too scared to admit they're too scared
to put the hand up okay so but then what
happened in later releases is it became
more functionally rich so this is what
you typically see in Apex architecture
look like we would have the database
with metadata in it and the apex engine
fronted by a gateway in the past that
was mod pl/sql on apache then it became
the embedded pl/sql gateway in the
database for demos but now we typically
use odds to do this but that's not all
the odds can do if you're on a database
from 10g onwards you can use odds to
rest enable the database and we'll see
some examples of that in a moment
it also allows you to present the oracle
database as a caller sorry a document
store so it looks like CouchDB or
MongoDB it can also front Oracle's no
SQL and database but I've not tried that
so I'm not gonna lie and make out that I
understand that it can still front web
toolkit applications like apex so you
can still use it for that but it's
capable of a lot more now so how does
odds do this well it's pretty simple
what happens at least in concept what
happens is you pass in a URI and
potentially a payload as well and what
will happen is odds will look at that
and it will try to see if that's mapped
to a call in the database and if it is
it will actually run the SQL or pl/sql
in the database and it will bind in any
values you pass in the payload into that
call when the results come out one of
two things will happen
if it's just a result set data and then
it will get converted to JSON or CSV
depending on what you've asked for if
it's a web toolkit application then
order doesn't do anything it just passes
out the data that you've asked it to so
you can take full control or you can let
odds do the hard work for you let's have
a look at some odds functionality OOP
sorry before I do that we'll see an
example of this in a moment if I've got
odds in store
how do I enable a schemer to use it well
it's pretty simple I do
odds that enable schemer and in this
case the example I've said that schemer
test user 1 is going to be enabled and I
want the URL pattern to look like test
user 1 that's pretty ugly we wouldn't
normally do that and you'll see in the
example I show in a minute that's not
what I've done so let's just flip across
to an example to talk about Auto rest I
hope you can see this okay and I
destroyed this demo this morning so I
hope it's working what I've got is our
cool database running in a docker
container and ODS running under Tomcat
in another docker container and they're
talking to each other so I'm just
connecting to the database now and the
first thing I'm going to do is create a
new test user called test user 2 and
just granted the ability to connect and
create a table I'm going to create the
table now just the amp table that should
look familiar if you've ever done
anything in Oracle or read any of my
articles and then insert a bunch of data
into that so just the normal empty Atta
14 rows what I'm going to do now is use
a feature called Auto rest so I do order
enable schema and that thing we just saw
on the slide but notice now test user 2
here has got a URL mapping of HR so in
my URL rather than seeing test user 2
I'll see HR I then turn on auto rest for
this table so what I've said is enable
auto rest for the object test user 2 dot
M effectively I'm telling all that it's
our table and I've said I don't want to
see M pin the URL I want to see
employees ok and we'll see that in a
moment
so what I can do now with odds I'm doing
all these tests using curl so I'm just
jumping out of SQL plus to call a host
command for curl when I do these but
what I'm going to do is ask for the odds
location HR is my schema alias and then
I'm asking for the metadata catalog and
odds will tell me what objects are
enabled
what rest services I've got in there if
I do that call notice I've got a host
call so I'm jumping out of SQL plus onto
the the underlying host and then doing
curl minus s means silent the URI that i
mentioned above metadata catalog and
then i'm just typing that to this
utility to make it look pretty because
otherwise it will just be one big block
that you won't be able to read and what
we can see is i've got a count of one so
one rest enabled service and then a
bunch of links including the uri for the
actual object the metadata catalog
description of that object in the open
api description of that object so by
just turning on this functionality
against that table i've been able to get
the metadata catalog for this the open
api catalog has got swagger annotations
OPI
AP sorry open api 2.0 annotations so
let's try using it oh sorry
first of all what i'll do is show you
the open api catalog for m so i'm doing
a call to that URL open api catalog and
you can see there's a big description of
the table showing all of the columns
with open api - annotations on them so
big big description that doesn't really
show up too well on the screen so let's
actually use this interface that i've
created by just doing one pl/sql call so
the first thing I'm going to do is use
this URI with a HTTP GET so just saying
hey char employees and that map's to the
test user 1 amp table and what this is
going to do is produce all of the data
in the amp table for me and you can see
just a whole bunch of rows of data
including the link of how I got there if
I want to see the individual row rather
than the big list you can also do paging
with this using offsets and limits but I
haven't got an example of that here the
next thing I'm going to do is say I just
want to look at one individual employee
so I do that very easily by just doing
a call with a slash employee number the
primary key on that and I get the
individual row data out for that how do
I insert update and delete well this is
a file I've got on the file system it's
just got a adjacent document in there a
payload and what I'm going to do is post
that payload up to the database well up
towards so what I've got here is I've
done a - ex post which is using the HTTP
method post passing in the contents of
that file set the content type to
application JSON and then use the URI
and it's returned me the data that's
inserted into the database in JSON
format if I select from the amp table
you can now see that that Rose appeared
and it's got my name Hall and my
department 10 what do I do if I want to
update it well I do the same thing again
but just use the post when I'm doing the
interaction with the web service so here
is a JSON document in a file again
called update payload notice M know 9999
and Department is 20 so I'm going to
update the row I just inserted like this
so here what we've got is the curl
command notice - ex put so put is an
amendment or a creation if the object
isn't there the object is there so it's
returned the data as it looks now in the
database and if I query that I can see
that it's no longer me with ID 9999 it's
someone called wood and they're in
Department 20 and not surprisingly I can
do a delete what I can do is a delete by
just using the endpoint and a query
string against it and notice - ex delete
and it's told me that one rose deleted
this looks a bit messy because on the
command line the Linux command line I
can't use those characters so I have to
use the character codes but essentially
it's just
it's told me one Rose been deleted if I
query the table
there's no row anymore four nine nine
nine nine so that's how easy odds can be
you don't have to really know anything
about Jason and about web services or
Java or anything if you've got pl/sql
and SQL as a skill set you can actually
get involved in web services straight
away using AWS
there's also a feature called also Auto
pl/sql so I'll just rip through these
slides really quickly because you've
seen most of this so this is the stuff I
said about enabling and how I post to
them remember though that when you use
Auto Pierre lip sorry auto rest against
the table that's not a logical unit of
work because it's insert update delete
of a single table I don't like to
represent that out to the outside world
I prefer to present the whole units of
work so I've discussed that already so
you can go back and see these in the
slides and that gives you an idea about
how you'd interact with those how do I
get JSON out of the database in a manner
that I'm happier with so not using Auto
rest okay so what I can do is in a
single definition define a service and
map it to a piece of SQL or pl/sql that
of my choice so what I've got here is a
defined service and I'm specifying the
module name so that's just associated
with a path that looks nice in the URL a
pattern or template a module can have
many patterns many templates so this one
is just slash em and then a method the
HTTP method associated with this
endpoint in this case I've done
something really simple I've just said
this is a source type query and I'm
using an SQL statement so select star
from M what that means is we have this
type of format if this were my URL that
I was using to get to my base of ords
I've got the schema alias in this case
the schema alias matches I've got the
module
which is the module name whatever I've
put in as its alias and then the
template name to form my full uri to the
resource and then I determine what I'm
doing with that resource based on the
handler for the HTTP method if I were to
call that you've seen sort of an example
of this type of thing already in the
demo but if you pretty it it's just
going to look like the data I showed you
coming out of the amp table so that's if
I did it in one call but I don't think
that's particularly realistic because
typically we'd have more complicated
services so we'd actually typically
define them in three separate stages we
define the module and then define the
template the pattern and then define the
actual handler associated with that
pattern in this case I've got some bind
variables in there
so what Oracle will do is if I put some
parameters on the URL it will bind them
in so what I've allowed myself to do
with this is that sort of thing so on
the URL I can specify the parameter
names but even so I still don't think
this is so realistic because put an SQL
statement in there I don't really like
that myself what I'd normally do is
create a stored procedure or a package
procedure and do that so here's a very
very silly example just to show you that
I'm creating a procedure and it accepts
M no as a parameter I'm defining a ref
cursor and then opening that ref cursor
for a select statement and what I'm
going to do now is generate the apex
myself and there are a number of ways of
doing this depending on the database
version what I've picked is Apex Jason
that's a package installed when you
install apex because you can use that on
just about every version of Oracle on
twelve one twelve two and eighteen C we
get different functionality that I might
use in place of Apex Jason but this is
common to all of those if you install
apex so what I've done is opened a JSON
object converted the results of that
result set to jason using the apex jason
right call and then close the object
and because apex Jason by default pushes
everything over the gateway odds will
see that and just push it out to the
outside world so now I need to create a
handler for that and I do that in a
similar way to the way I did before so I
define the template in handler but
notice now the handler is source type
pl/sql and i do a begin call the stored
procedure end with no parameter but
notice the pattern there is just empty
if I change that and do a second handler
but sorry a second template for M : M no
and put the pattern in and another get
handler for pl/sql and this time use
that parameter what I've done is created
a web service that allows me to access
it in two different ways I can now
access that using slash m p-- as my
endpoint or slash m p-- slash and then
the primary key ID to get an individual
record so all records or just one record
so kind of like we saw with the auto
rest example but done with pl/sql this
is a silly little example so using
pl/sql for it doesn't make sense but it
shows you how easy it is to map pl/sql
in your database so you our eyes so
getting jason into the database if we're
not using something like the auto rest
functionality what I can do is define a
handler of a post type that means it's
looking for a HTTP POST and make that
call of stored procedure if the stored
procedures got simple parameters like
this then I can list them individually
if it's complex a really big JSON
document I can accept a single blob
called body and then internally shred
that in my pl/sql so if I were doing say
an oops sorry if I was doing a insert
I'd use post and call create employee if
I was doing an update effectively I'd
call put
and do amend employee in this case and
if I was doing a delete I would call
delete as the method and associate that
with a store procedure that does
something like removes the employee so
exposing real units of work potentially
through pl/sql so how do I call those
well when we do a get we can just put
that URL into a browser and it's
probably going to work okay because a
get is what browsers understand but when
I'm using anything to do with inserts
updates deletes that's typically going
to be post put or a delete and browsers
don't do that well unless you create a
form or unless you do something like
have a tool a utility to do that so in
order to call this post we need a method
of post a content type of application
jason and then a raw payload of all the
parameters which we saw in the demo so
what i can either use a rest clients or
curl what i would typically do is use
curl and i specify the content type the
URI I'm interested in and upload a file
similar to the way I did with the rest
demo there's a new feature that came to
us in order seventeen point four which
is rest enabled SQL and what that allows
us to do is actually turn on rest
functionality in the database and just
send SQL statements I don't think this
is what you should be doing for your
normal rest interaction against the
database but it's really good for a few
things because what it does is it
actually exposes the SQL engine that is
in SQL Developer and SQL CL so you can
just do things like run scripts or run
DML or DDL directly against the database
for this so it's really good for as an
admin tool perspective for doing things
like automation that's available from
17.4 onwards the latest release came out
a couple of days ago which is what I was
running here which is eighteen point one
point one so supporting the database
who's running Oracle 12c in production
now
and even any release of 12c okay so I
assume everyone else is running
something like 11g or 10g or 9i or 8i
I'd know of one company that's still
doing seven in the UK I won't embarrass
them by saying hey but it's not who I
work for
okay honest so in 12c release one
we got the ability to look at JSON data
and effectively exploded into relational
so we got things like is Jason
constrained acai condition Jason exists
Jason contains we also got the ability
to use JSON value Jason query and Jason
table to exposed JSON data in a
relational format and we got this thing
called soda which allows us to use
Oracle databases like their couchdb
let's have a look at some of those
things so I can create a table with a
blob a club and varchar' to end varchar'
to something like that and I can store
JSON data in it and just use this check
constraint data is Jason or if I want it
to check for strict Jason Jason data is
Jason strict where data is the column
name holding the JSON data and now
whenever I try and insert data into that
oracle checks that it's valid jason and
if it isn't it gives an error with that
check constraint in place I can I can do
some extra things like dot notation but
it's not necessary to have that for some
of the operations notice the Select list
I've done table alias dot column name
dot and actually the Jason content so
I've traversed into the Jason documents
using m dot notation that's only
possible if the check constraint is
present so Oracle knows it's JSON data
but what I can do is use something like
jason exists to say does this element
exist in the document because the weird
thing about jason by default in the
database is if i select for example
looking for a phone number if the
elements not
it will show null if the elements
present but set to null it will show
null so what does no really mean does it
mean it's not in the document or is it
in the document well that's what Jason
exists does so what I've done here is
I've said give me rows where the contact
detail phone element actually exists but
the value is null so I know that that's
in the document but set to normal
Jason value not surprisingly allows me
to get individual values out of the
Jason so I'm saying in the data column
give me the first name in the data
column give me the last name and it's
gone and got that out of the Jason for
me but it's only values I can't do
anything complex there if I want to do
something complex more complex I can use
Jason query and this allows me to pull
back fragments of Jason so not just
values I can actually pull back more
complex objects so for example rather
than pulling back a phone number or a
Twitter handle or whatever I'm pulling
back all the contact details and
presenting it as an array using JSON
query and then Jason table is really
cool as anyone used XML table before
yeah okay so this is the same thing what
we're doing is projecting columns onto
the JSON data so it looks like a
relational table so I'm saying first
name will be that path JSON path
expression first name last name is last
name date of birth is that and then I
can select that so it looks like a
Cartesian product between JSON table and
the documents table that contains our
JSON and I can get the data route and
this is even simpler in 18c because i
can just list these names and it will do
all the hard work for me
Jason contains is a special kind of
condition that allows us to use a full
text index to search for things so you
have to have the index presence and that
gives us lots of other nice
functionality as well like JSON data
guides but that's all I'll say about
that for the moment
so 12-2 was more it felt like about
consuming Jason 12
so 12:1 was more about consuming Jason
12:2 is more about generating Jason sort
up so what we got in 12:2 was SQL Jason
syntax as anyone used SQL XML to produce
XML from SQL directly ok so this is kind
of the same thing but with Jason now the
Jason conditions I showed in the first
section are actually all available
natively from pl/sql now and then the
new pl/sql objects for jason were
created so you don't have to use apex
jason to pass and to create jason
anymore you can actually do it with
native objects in the database there's
also a thing called JSON data guide
which is pretty neat because it means
you can let Oracle do all the heavy
lifting of understanding your your JSON
content in your tables I've got an
example of that on my website it's
pretty neat so let's have a look at the
new functionality in 12 - well JSON
object allows me to have a list of key
values and it creates a JSON object from
them so for every name value pair listed
I get a row coming out for each row in
the database so pretty simple JSON
object aggghhhhh does an aggregation of
a name value pair so but notice that's a
JSON object because it's got a curly
brace
we've got JSON array which not
surprisingly turns a comma-separated
list of scalars or key value pairs into
adjacent objects even into an array and
we've got JSON array OGG which
aggregates whatever you put into it to
form an array so individually they look
really simple and they are and possibly
don't look very useful if you've used
SQL XML before and you show view the
individual items it looks fairly similar
but the power comes from when you
combine them so for example that idea of
having a department list with each
department having its list of employees
well that's how I could write that in a
single
SQL statements what I've said is I've
got a Department Department list called
departments inside that it holds an
array of JSON objects each object is
called department for each department it
has a value of a JSON object
with a few key value pairs in it but
also an array called employees and
within that in a done by jason array hag
I've got a bunch of JSON objects that
relate to the employee so what I've got
is list of departments for each
department internally a list of objects
the same sort of thing we saw before
so the SQL jason is really handy for
allowing us to generate jason directly
from a SQL without having to do any
programming like sort of longhand but we
do have these new object types in 12-2
which allow us to do some coding don't
worry if you can't see this you'll see
it on the slide if you download them but
we've got a bunch of new objects and
what I've done here is I've created a
new object based on some data coming in
that was a club I pulled out the
department's list as an array I'm
looping through the array getting the
values of each department and then
looping through its array of employees
getting the values from each employee
record so I can do that with Apex Jason
package but or what is it PL Jason from
the Alexandria library but it's native
to do it with these objects in 12-2 so
that's pretty handy 18c has got a bunch
of new features as well for Jason I'm in
the process of writing about those on my
website so you'll see those articles
starting to appear which is why I
haven't put them in here so quick
mentions and prior to 12 - you should
really be installing apex into all your
databases even if you're not using apex
because it gives you access to some
really cool stuff like the apex Jason
package a
Peck's web service is a way of calling
out for restful and non restful web
services using JSON and XML also rest on
tables and views is really easy to get
you started but it doesn't present
logical units of work so I would kind of
avoid it if you can I've not mentioned
authentication here at all but actually
ODS is pretty good for authentication we
have basic authentication using two
methods we can either use a file based
repository which is not supported or the
user repository of your application
server like say Tomcat users or WebLogic
users we can also in 18-point 1.1 that's
just been released use database
authentication although they're trying
to discourage people from using that
because we shouldn't be doing that in
this day and age but what we can do is
use OAuth 2 so odd supports three
different flows for OAuth 2 including
two legs three legs and three legs
implicit so really easy to use
definitely have a look at that make your
web services a lot more secure and the
cool thing as well is if you use SQL
Developer as your development tool it's
got a bunch of functionality built in
for odds as well so you can actually
define your web services in SQL
Developer so what I would say to you is
consider using JSON or you're gonna be
in trouble I think in the near future
because I don't really have any requests
for any new web services that use
anything other than Jason we have a lot
of old XML services back in my company
that are working at the moment but
anything new we tend to use JSON for and
the great thing about this is if you
package your inputs and outputs as Jason
all of a sudden all of those cool kids
that want to do JavaScript and stuff
like that can use what you've developed
directly if you are a problem if you
don't allow people to get into your
database easily using a technology that
they want to then we make ourselves a
legacy if we promote everything we do
and projected out to the world in a way
that they're happy with then there's no
reason you can't do a whole bunch of
your web service development in pl/sql
using a skill set you've already got so
I've spent the last few years advocating
this about ten years ago I was talking
about XML web services from the database
now I'm talking about JSON web services
from the database then one day people
will listen to me okay so realistically
you can go and learn a new skill set and
I'm not saying this is the best thing to
do or the worst thing to do I'm just
saying it's possible with the skill set
I've got and I can make myself look
relevant to all of the other cool people
that are doing things much cooler than
me I have this website Oracle based com
let's just go on to that and I'll give
you some info about what we've got there
so that's my website there's a very
plain page on that you might not be able
to read that that says Oracle based comm
slash workshops this is an indexed on
Google allegedly but in there you'll see
this presentation it goes by two
different names so Oracle based comm
slash workshops you can get the PDF of
the slides the slides themselves there's
articles and there's a couple of bits on
YouTube as well the article really does
talk about everything I've said today so
you don't have to scribble notes or
worry about even looking at the slides
if you just look onto the main website
which is not that which is not that
where are we okay I'll show you in a
minute
I've got no Wi-Fi so ah okay so notice
ODS articles Jason articles on the front
page those Quick Links will take you
there the article introduction to Jason
supporting the database talks about a
lot of the stuff I talked about today
there's all of those JSON articles some
XML ones and all of the odds articles
and if you look in the JSON articles
you'll notice a few things that say 18c
because on the front page of the website
now I've just started to write some of
the ATTC content some of that was
written in India
you know some of that was written here
in fact so if anyone's got any questions
I'm happy to you'll notice it says work
in progress because I haven't finished
all of the 18 C J's and stuff yet if
anyone's got any questions you can ask
me now or catch me the rest of the day I
love talking about this stuff so really
don't be shy does anyone have a question
we've got four minutes so odds itself
supports OAuth 2 what you do is you get
your web service that you've defined and
you define a role in ODS and you
associate it to that and then you can
define if I had Wi-Fi I could show you
the article on it because there is an
article on this and you can associate a
role to it in privileges of Web Services
of template's
to that particular role and then you can
assign those roles or authentication so
you can say I want a wolf to two legs on
this and what that will do is you will
make a call passing half of your
credentials it will give you back a
token you'll then send the other half of
your credentials with that token back to
the service and then it will then
authenticate you and allow you once so
that's a typical two-legged OAuth 2
service so anything that you've got that
supports OAuth 2 should just talk
seamlessly towards if you define it it's
super easy to define if you look at the
article on my website you know it's very
simple okay
any more questions yes
now so you can have odds and the
database on the same server personally I
don't what I do is I have my database
server I have another server running
Ords and I typically run it onto Tomcat
although it can be run in standalone
mode under web logic or GlassFish but I
run it under Tomcat and then I have my
load balancer sitting in front of that
so what I'll do is my SSL termination
will actually happen at the load
balancer then I'll reenact into my ODS
installation and then ODS talks to the
database on a different server using
native network encryption okay so
everything's encrypted the whole way
along but my SSL termination I always do
at the load balancer because it's just
it's better that way in my opinion okay
any more questions Oh incidentally
Oracle database D bus service has all
its installed on it but it actually
installs it on the same machine you can
use that if you want or you can have a
different machine to to run your own
auds applications it's up to you but
it's on there anyway for some of the
maintenance stuff they do any more
questions
yes stage-dive sorry so as far as Jason
is as far as rest is concerned rest
doesn't care what the data is so what I
would typically do for images is I would
base64 encode them so they become
strings and just post that and
internally in the database convert it to
it will get implicitly converted to an
image because you know it's all good
it's just stored in a blob yeah so if
you i've got articles on my website
about uploading and downloading images i
don't know if i've got an example of
ords i think i've got an example with
mod pl/sql doing it but I'll do an
example of Ord so you'll find one on
there in a few days
so yeah you can you're typically
anything binary you'll just convert to
text and include it in the document and
the same on the way out you'll just give
it a mime type base64 encode it to come
out from say raw or from a blob and what
will happen is when your browser or
whatever it is cz it'll go oh that's a
JPEG happy days or that's a tiff happy
days because it will know that that
base64 encoded text is really a JPEG so
that's how I would do that and you can
pass it all in as a single blob item as
a parameter and then do whatever you
want with it inside the database for the
related right I don't know much about
the new features of 18 C yet because
I've only had it for a minute yeah so I
wrote a blog post about this saying if
anyone claims to be an expert on 18 C
they're a liar because it's only out on
the cloud and it's only been out for a
few weeks so I'm still a baby at that so
please don't ask me questions about 18 C
yet next year maybe or maybe in about
three years time when I really
understand it okay anything else yes
sorry
I can go for all ramps which supporters
in transaction handling transaction
handling right so when you do rest rest
is totes should be totally stateless
okay so you'll be doing a call and the
whole transaction is just that call you
could write something yourself that does
partial bits of a transaction but you'd
have to code all of that and then that
wouldn't be rest because the whole point
of rest is that should be stateless so I
make a call that call is gone it's over
yeah I never call half a job so this is
one of the reasons why I don't like
presenting tables as rest because a
transaction against twenty tables is
twenty stateless actions in rest which
doesn't make sense
wrap it up in a stored procedure as a
single call that does all of that work
present it as a stateless object so good
question really important that's why I
don't like rest enabling individual
tables but some developers will never
write pl/sql and they will say to you
I'm a JavaScript person give me the
tables I want to do it all myself
and I think that's a mistake but if
that's what they need I can do that okay
a synchronous asynchronous or
synchronous synchronous they're all
synchronous it's all synchronous just
synchronous yeah I make the call it does
the work it comes back you can do a lot
of different things to make it appear
quicker so you could cache elements like
pre build data and send it out which is
something that I've done for years with
XML using the XML DB repository as a
file system you can do whatever you want
on that or you can actually call this
from a caching layer call it once a day
to get the data into a caching layer and
present it out you can do that as well
so there are lots of variations if you
want to talk about that catch me at the
end because next person is waiting to
come on these shaking that time mat
thing get me Tara okay thank you very
much for coming thank you love being
here
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>