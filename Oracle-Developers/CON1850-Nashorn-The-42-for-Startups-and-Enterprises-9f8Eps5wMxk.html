<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>CON1850   Nashorn: The &quot;42&quot; for Startups and Enterprises | Coder Coacher - Coaching Coders</title><meta content="CON1850   Nashorn: The &quot;42&quot; for Startups and Enterprises - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Developers/">Oracle Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>CON1850   Nashorn: The &quot;42&quot; for Startups and Enterprises</b></h2><h5 class="post__date">2015-12-10</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/9f8Eps5wMxk" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">ok I've working with Chavez since 1995
and really liked it and I started at the
beginning also with JavaScript I am
because I had to but right now i use
nice one because it's there ok Tim the
main idea is what what I always say in
java ee projects are try to to minimize
external dependencies for speed it's a
nice story NASA NASA one is part of Java
8 and this is a huge deal in my project
I don't have to ask whether i'm able to
use it or no in all enterprise companies
if there is java 8 i can just use nice
one if i would like to introduce scholar
groovy whatever i would have to ask any
tax or I don't know whom you know may I
use the library and that's what is just
there before you last one I use similar
stuff with rhino it was in JDK 16 some
features were not available and rhino
was a lot slower I don't know how how
much slower but are lots of slow I don't
know orders of magnitude slower right
orders of magnitude I don't know tens x
20 x or whatever so i have two slides
with contents everything else is
marketing so some worries a hex TV just
i can answer all questions with many
questions there if you like come to
munich in december and this is online
course and this are actually the use
cases so um before we probably who who
uses already descriptive engine jsr 223
anyone used that in java okay okay then
i should start with the basic probably
but before i start with the boring
basics i start i will try to implement
something completely different so what I
can do this is
it's getting better in a second hello
and what I will do the problem is yeah I
thought this is the problem so if in
full mode I get here I will have to quit
that we had the same
I thought in JavaScript session there
are younger developers so I can go with
18 18 font but it's the same as in Java
so I would have to go back to 24 20 24
let's see so hopefully it gets a little
bit better files and no favourites so
and what I would like to do this is the
folder I would like this is just a
version new javascript file hello hello
already exists yeah echo so and what I
did in netbeans it it will be able to
run NASA one in script mode so there is
a this is the only thing I did to the
stock netbeans and you can set script
mode and the recent script mode what
script mode does i can use nice ones as
shell replacement and this is for me a
very good thing I lost already several
hours if not days you know to find out
arrays escapes or whatever and in
javascript is it at least defined so I'm
how it would work for instance I could
say here hello world of course so this
is not not very excited run so I had
world a little bit more interesting I
can do stuff like this and say of course
42 now you see this is the purpose of
the talk actually I can go here and for
instance to England replacement this is
only available in the script mode but
very useful so it can just read run the
script I can just use this one you see
it's always the same it's now should
work this is already very useful you
know what we use this for you can
imagine dhaka application server
installation or replacement local laws
replacement port replacement ok so for
loop in a doc oh you can spin off five
containers with different parts and
different IP addresses period it's a
great story is you can say we can do the
same with shell but what i can do i can
say here break a break punk Toby
toggle break point and debug this and
this is impossible shell or at least not
to my knowledge so we can say debug and
we stop here and i can evaluate here the
value of the variable and this is
already incredible useful so how we work
with that we implemented the script that
way it was almost test-driven I by the
way I also read blog post some sometimes
we even have unit tests so you can use
stock unit tests from chai or whatever
assets you like from from from your
favorite JavaScript framework to test
builds and an ultimate Assassin's Creed
scripts in last one so um what it
actually means is in our docker
container this is a mix of Java EE and a
nice one and on a very top level here
this is the base image we link to the j
GS this is the interpreter and now NASA
one becomes available NASA NASA on
scripting become becomes available in
all images okay you got the first use
case the nice story is my current
project the developers working with
windows and working with meg and the
server runs on linux wretched
enterprise-d look seven mask on runs
everywhere prior to this we have to
deliver batch and shell at the same time
ok questions no questions is this useful
it is right very good so what an ass one
can also come come with is the following
what you can do you can say here exec
this is like built-in function and say
LS and then out this is the output this
is built-in variables and this is
extension of JavaScript so it's not a
part of JavaScript but this is not so an
extension and then can say print of
course and out by the way the national
engineers always tell me use the bags
back sticks to to run the commands I
don't have to use the exact the problem
list it will mess up the formatting of
most I des de Becque ticks with the exit
works as a function so this is the
reason why i always use X second out and
never d-bag tix because the formatting
doesn't work so and so if i run it in
our now now it's debugging on so i can
step and this is as you can see i just
go to the java code but it it printed
all the folders okay now you might ask
for what this is into what what
difference does it make and i show you
one installation script this is actually
a slightly modified script from my
current project what it does it setups
fully automatically pyara server and
domain of your choice the domain name is
here javaone and these are the ports and
its edits stop set domains deletes
creates a new one starts the domain
creates JVM jvm options create a jdbc
pool with different name and and then it
prints it out and the interesting part
is this script runs on in their own
development machines as well as some
Jenkins so we have the same script
everywhere okay and this is very simple
so if you would get for instance
additional JMS queue or topic or
whatever do we additional line and we
can debug this this is actually
incredible so I we did this prior to
this a few years ago I show you
something similar with shell scripts
which always are painful to implement
something like this for me at least any
questions little installation in one
commercial projects we use NASA one to
install you I Java Vic's clients for
instance it was it is not via the my
client used this this was my advice they
asked me what is a cross-platform
installation they had to download stuff
and unzip staff and they had to provide
choice screws bitch tries at the same
time and that's one run every everywhere
so of course if you have Java it so I
think we covered the installation use
case right so you can imagine so if you
can script you can use our operating
system commands you can do whatever like
okay how to know what's available on
what's not available this is actually a
great Vicky this is what I look all the
time and search for new things
and this is nice one extension so what
it means for instance here we will find
the stuff with xik and with without
doesn't the additional additional
features of nice one massillon
implements a comma script five and
hopefully I know GD caved nine or ten
akmal script six so but five is already
there and it's very compatible to my
knowledge questions no questions ok then
you wanted to ask questions in my
private sessions and now you can ask
questions and you don't want anymore so
I'm automation so this was actually this
is another thing that we are small heck
I'm working now with dr. registry so we
are pushing stuff to the doctor registry
in Dhaka registry for unknown reasons as
really ugly rest interface dr. is nice
the doctor registry is not nice the rest
interface so and the first thing i did I
copy and pasted theory from the doctor
registry doc v2 and create an ass one
script and this is typical what I do
here I use here curl you could use W get
instead of using jax-rs in Java it's a
thinner I could use Jack's res library
but then I had to set a plus part and
package this I'd like to do this so no
curl is there and this is almost like
magic because what I get here I get the
command it is executed and i parse this
drink and what I get back is JavaScript
Jason and this is extremely convenient
in Dhaka because you get Jason back so
you can extract image statistics that we
created actually with this a small
monitoring systems of you scripts and
the same scripts can be used in Jenkins
to watch docker again ok so dr. is
popular so i'll show you this but we use
our own a salon to monitor enterprise
apps the same way so each app implements
a small like synthetic transactions so
amid some JSON and we use nice one to
monitor this ok
what I have to do who cares is a
command-line script you know I think the
registry could even work run this isn't
I don't even know yeah block TB is the
registry there's there is one one image
in the registry so now it connected to
registry I go to the feedback in 0
seconds so it's very fast 0 seconds okay
so um another thing my block the problem
with my block is the following it runs
on for historical reasons on HS ql this
is a java database and this was just a
fun I don't know 2006 i started my block
and so what happens it was just java
technologies and then it become popular
and still a SQL and what i would like to
do is not to back up my block as a i
would like to to take the file put it to
the docker container and and use it as
backup or for trying new things the
interesting part is H SQL comes with
jdbc driver so what I can do very easily
I can connect to the database and where
jdbc script us and redirect the output
whatever I like and I show you a more
elaborated more complex example in a
second does the simplest possible thing
so it was i just created kommandantur
its eyes go here used you can secret and
this is the H SQL command it's it says
22 22 h SQL you know back up it writes
the file and then i can pick the files
later so it's very simple script and it
actually doesn't run from command from
command line it is it runs from an ejb a
time aeg be so a misusing gb's has krone
it's simple eyes one class was on
annotation okay so NASA on Team happens
to be very responsive last night at
Jim's session I had a question and the
question was is it possible to have this
feature scripting mode using the
scripting engine manager the defaults
API
and it is possible i got / twitter a
nice nice answer and what i did i
implement a unit test to demonstrate you
this I will block about this later at no
time so far it was just a short night
between so what I did so far i use this
nice home scripting engine manager
actually from the technical point of
view and does not make any difference
except nice one script men have got NASA
one script engine factory probably is
little bit faster than script engine
manager because it doesn't have to look
up all the engines but if you use
another script engine manager like Ruby
Scala or whatever you won't get the
script functionality but what I don't
like be depending on this because what
will happen one time we get strange soul
a cube rule or whatever and the Quai
department will will find out that you
use internal jdk api's and you're always
in trouble so what I was interested is
to use stock script engine manager API
and what you only have to do and there
is a setter system propane that's 1 arcs
scripting if you do this you can run
like shell scripts written in ass 1 so
this how to call it nice one in
scripting mode from Java not from
command line and this is not this is
very good for I don't know if you are
for instance right now I'm working with
hazel cast so what I would like to
happen also some of the cron jobs and
monitoring jobs which run periodically
back up on stuff like this so i can just
packages in a war store an asshole in a
database for instance loaded on demand
execute this and store it very
convenient view lines of code i won't
skip the ejb because of trivial a show
in million times one class was a
stateless and schedule agreed so what do
you do you can do this route or or this
route and what you do can do in java
then it's a xls print out so this is a
very short script as a string and it
will the script is going to be executed
will see the same output in in the shell
so and you will see the same output
questions even more usable yeah
yeah this is what I did previously this
is this is the default this is actually
somehow knew this is this so what
netbeans did at it today I can go to
command line then what I will have to do
yeah yeah terminal is a terminal right
so what I only have to do is the
following I know largest larger funds so
what I only have to do is the following
I have to tell to tell linux or mac use
this kgs as the interpreter so and make
it executable and then run it and you
see only this because it is started with
with minus V if you skip this minus V
there will be no output dirt this is the
default mode so it runs in one point of
time on my linux like this or my linux
box on already projects on Jenkins and
and the net beads are just used for
development and where I usually do to
show you I'm yesterday i think i use
gulp so another heck what god is it
watches the directories on at each
change of the script and instead the
script automatic automatic german
automatic automatically in a directory
with which which is in the path ok now
next use case
and hydrator it's an open source project
but it started as a commercial project I
was hired by a company typical java ee
projects and they wanted to me to use j
batch for for data transformations and I
ask why you want J bed so what is the
problem actually they produce the
following the implemented like IOT
product and it was shipped worldwide and
the the some master data was maintained
in Excel and this was a requirement
because it was like it is there was
output Excel there was no way around and
it was slightly different per customer
but internally we had something like a
unified object model JP a model and we
had to map the Excel sheets to our to
our data and the problem is is this
product what product means is that the
customer should not recompile the Java
classes so all you had to do is to to
separate the core product from the
extensions and that's all okay Jay bitch
java 7 or i like it but it doesn't solve
the problem at all in jabba jabba i
would be able to know to to start 10
extra sheets in parallel and process
them in parallel but it actually does
not matter so what we did instead is
okay what we could do is just use Java 8
and there was the following idea and
before I do this I will have to because
I probably you don't saw the API yet so
I will will have to hack a little let
the Java project to show you how it
works and i will call it basics and go
with a unit test and say us javaone
basics test
so and how it works on the server is
actually very nice with the concurrency
stuff because what we always do I've
read a unit test but imagine it were a
managed bean or session bean so um we
have before in unit tests on the server
we have post construct so the nice story
is if you use for instance ejbs they are
pulled and they are created on demand so
if you get five parallel transactions
you get five instances of ejbs so what
it means the scripting engine manager
the nass one with the whole script gets
evaluated only once and even a start-up
which makes is crazy performant so there
is no need to restart the engine all the
time you can keep it in associated with
the instance ok so how it looks like we
do something like this new script engine
manager
manager and engine by name you can use
JavaScript or even last one or you could
use is to instantiate or you could
instantiate the the the NASA on the
engine with NASA one factory and I would
like to use hear the engine
and then so this is the initialization
phase on the server so this is a units
unit about it works the same way it yeah
and the test what I can do right now say
here eval I could say this engine eval
print hello
and throw the exception
so hello it seems to work so this is a
prototype of our ejb or CDI component
which would run on the server so we keep
the engine here so Egypt bees are
thread-safe those red safe there is no
way that two threads will access the
same instance at the same time so we get
a paralyzing for free they're over our
overhead is of course we get multiple
engines at the same time I don't know
how bad it is for usually five engines
it's bad how expensive is it because in
the Indy stress test what we did it was
perfectly fine so we never had a problem
with memory whatever so it was like if
you hit the database once it seems like
this doesn't matter anymore okay yeah
but it happens at the stand up time
where I can configure the application
server mean pool size 5 and then all the
G biscuit getting started and if the
server boots are never again this is
what we do ok what you can also do of
course it gets bit more interested
interesting you can say here this engine
get bindings know how it's get set what
is it I know get put exactly dislike
hashmap put hero and Duke so and what I
can do right now is to have something
like hero and run it
hello Duke so what you can do we can
pass any Java object you like that do
not have to be primitives to nass 1 and
X is that so what we did is not on the
slides validation you can pass JP
objects and and right validation scripts
in a swan and you have full access to
the whole domain object model what we
also did like optimization algorithms
which were flexible they could actually
modify the JPA objects and hence since
NASA one runs in the same transaction as
the eg bees afterwards they were
modified but at commit time they will
flash to database got a point you can
pass all the anti entity nasum can
modify depending on algorithm the state
and after the call the modified state is
God get automatic automatically flush to
a database ok so this is actually this
was very useful questions about that so
this is um the bindings this is basics
what's a little bit more interesting is
this what we can do yeah run able for
instance
i can say i think it's invoke able
I think that's one is always in vocal
and this in vocal has a method get'
interface and here I can say this engine
eval and say function run print in
runnable and Randall is actually nice
but it comes with jdk this is one method
functional interface no no no exception
so you can miss uses misused them as a
command pattern 4444 not some functions
so I'm what I did right now and
instantiate that is runnable on the fly
so what it means is in my projects no
one knew that we used actually nice one
it was in one component it was packaged
made injectable and what we got
injectable interface and it was type
safe if this fails you get not back so
what we did or null we gotta fall back
fall back was Java lambda so if you get
now here you can say then i create my
own runnable in java so there's no risk
that it won't work so you you should
have a default algorithm for this or
default instance default implementation
for this agreed hopefully it works now i
want to say unit test
command search not null command and then
say command one
is runnable seems to work so we never
brought such a script these scripts were
always taught in relational database so
we could easily maintain them on version
them so those always sound like a table
with three three columns name of the
script version and NT content and and we
provided us on small rest interface to
manage that questions about this please
ask question if not i'll show you a
little bit more crazy exercise in a
second so what what is the deal with the
n hydrator the envy data's was the
following following idea we get input we
transform the input and write the output
and we use functional interfaces from
Java 8 just a function and now we um
there-there the customer wanted to have
something like a DSL so you wanted to
say from EXO modify type and whatever
and there were data transformations and
there was simple output and yeah that's
the project n hydrator is on my github
account it is basically used already in
some hospitals in USA which is a little
bit scary because but there was no no
news so far and it's just unit test it
would look like this engine flawless nuh
from source to to query built start and
you done and there is some conventions
and the conventions we are all the Java
code so all the inputs here are
basically lambdas and then can be
replaced by a nice one functions so it
is your choice whether you put here
lambda in Java or a string if you put
here string it will try to find in the
local folder and file with the ending
j/s will read the last one file
instantiate as a java function you saw
how this is no difference to run able
and run it and the funny story is
because this is a functional pipeline we
can even run it in parallel so stream
is actually stream of NASA on functions
the problem was it was so fast so there
was no need for optimization which is a
little bit boring I hoped I could
explain a little bit more the client I
said okay I'm happy go away so I'm
laughs I'm now i'm waiting for the next
contract so i'm probably next year will
show you what at it and these are
actually the d functions this is just
now doesn't need two functions these are
here are the functions so there are
column transformations so you can write
a nice one script like here there's
executed was not run and you can do
whatever like so you can you could
transform the entry to whatever you like
and the entry is a java object with the
name column and there's method like
convert string too long long to float
whatever you like rename or there are
some functions what they need it and the
funny story is there is a i was actually
hired to to implement a java 7 batch on
what i did there is a small library as a
no holidays without any external
dependency it's just java 8 and lambdas
which is very very very very important
in products because we don't like to do
to ship you know 50 jars and then hope
that it works and is actually cool IOT
project with I don't know several
thousand devices and yeah and one
glassfish questions about that
the main purpose and this happens in all
products which I was involved in so i'm
ninety percent of my project I just
projects but sometimes I helped to build
products and if you build products they
have always the requirement that core
has to be sealed and some does it even
sealed the jars are sealed and what they
on the extensions from the from clients
extension has to be separated and NASA
is just perfect because in the core you
are relying on interfaces and if you
load the extension from the outside
clean air separation you won't get even
not with OJ or whatever it's just
perfect there can be in Jared outside
there is a script loader you can
customize this as the one guy which
created the hospital software I'm
waiting for for the interview he will
also give me the soon the interview how
it uses the N hydrator have no idea i
don't know him just thanks for this and
it works well hehe aggregating data from
different hospitals with that this is
this is what i know so far ok you hear
ya
to my knowledge because the engines are
here is very secure because it is not
interpreted this is in translated to
bytecode and there is one options I
could actually activate hit is called no
java and then you are not able to invoke
system.exit and you can also a no
system.exit is just if you install a
security manager then it's as safe as
the application server so there should
be NASA Lazar save us as the application
right so what you shouldn't do you know
except input we script from the from the
UI this will be also saved when you get
other troubles you know you can someone
can implement our endless loop for
instance yeah
yeah almost forgot about this another
use case what we wanted to have as we
have been validation but we wanted to to
use the same script while using the
front end so we reuse the angular
validation scripts in the back end using
last one the same this is the same story
and we use bean validation which is
flexible and we use that and we also
used input validation jax-rs injector as
you can you can you can put the
validation annotations on the parameters
use a pin validator and then yeah two
works in Java 7 so absolutely you can do
this
yeah this is what I show you in a second
this even this gets even cooler with the
lambdas this and there was another use
case you remember to this was actually
good question because I got to two other
use cases to now forgot it but there I
have to look at the slides okay
headlands then I will have to draw a
little bit so what headlands is you know
Jay cash Jake is a simple caching API
the default implementation of je cache
is hazel is as a coherent hazel cast and
in finished pen I use hazel cast because
it was the easiest implementation to
configure you said yes very good okay so
what what it's possible to do right now
I could fire it up but I want this is a
talk about NASA not about caching but I
can run in Dhaka this is actually pyara
with headlands i can fire up multiple
instances and they use consistent
hashing so what I get with this is in
memory grid and via je cache API I show
you source code in a second and what I
you what I what I use it for to store
and statistics to move of my block and
evaluate these statistics so what I
would like to have is to query the cash
so what I did previously i implemented
fully in java so i have to redeploy the
whole cluster so i had rolling update
but it was not really exciting with NASA
on if you think about this you get the
ultimate agents what I do right now I
write unit tests which is local I load
nice one it instantiates under in a test
the interface if the taste test passes i
push the string to the grid because it
is a grid the curry gets replicated to
the whole system one on each node my
system instantiates instantiates the
script and i can execute the script so
what I get is something like stored
procedures with NASA on without any risk
of salvation or versioning
and this also crazy fast is really fast
okay so with NASA on this is incredibly
easy to implement distributed lambdas
without any civilization I use it all
the time in several projects there was
the only problem is you have to be
consequent was testing and I started
with the test you saw what I did right I
implemented runnable it was loaded and
if this passes after the tests after all
a search passing we are pushing to the
grid or fully fully automatically so
there is actually the same type safety
as in Java so but we don't have to
realize this and this is tiny okay and
the the source code is checked in this
project headlands you can clone it and
you have it at the flight I pushed it to
the repo I forgot it actually I just
using my projects but the first time
ever I had power during the flight so it
was incredible this was a hyper hyper
productivity you know 12 hours with two
projects completed so um headlands
protesters boundary there was no
performance test because they were just
12 hours I will test it at home how how
how fast it is so what I get in this is
even crazier what happens here this is
the query what this is that cash is has
so-called entry processors so you can
push to the cash a lambda and infinite
span or hazel cast will automatically
distribute this it could gather the
results so what I implemented is the
nass one implements all the niceness and
entry protesters from j cash so i have a
rest interface i push nasa on script to
the grid and and the results are
gathered so i get something like in real
time real time real time queries in data
processing it may produce in hazel cast
and the whole project is about ten
classes that's all this is incredibly
this is that's all so i have here view
classes and this is the mass one engine
with post construct it means paris
threat there is one engine and i'm using
ejb so what it means i will have in
power
well to start really true multiple
parallel transactions is really hard
without without the stress tests then I
with parallel engines usually just one
and this is this Eva script what you saw
here at what I am doing is it evolves
here interface to something so i use
just generics and i'm able to
instantiate whatever I like so there is
one nice one engine and this component
is able to instantiate no all interfaces
on earth and i use all interfaces from
JK API ok questions I think this is
really powerful right this is like
agents what you wanted to have always so
you have a moving quote yes this is not
sophisticated this is crazy simple if
you think about this what's here that
the only complicated thing is the
interface a little bit complicated the
end to processor but is from Jay cash
yeah
permgen thinking in nice one is
configurable right how many classes you
can think 50 is whatever is that these
are settings how many classes are are
precast right you can add no this is
running for 200 days or something on my
server and no issue so far okay in Java
8 you cannot get permission you get
another exception then okay we have 20
minutes is it true okay then SPG this is
what I show last year and this is also
cool and also popular for unknown
reasons the following this is actually
one script as open source so and this is
an ass one script which is executable
with conventions there's an input folder
and output folder and I use Java I oh
and what I do i load mustache and I
think this is what the what you saw last
year here in the course and they're
using for cogeneration something similar
right now and robots one is your session
tomorrow 230 so you could deserve
speaker he will you present this or not
five minutes at the beginning you can
show it and then say okay okay so I'm
what happens here is the following you
know what mustache is it something like
GSP html5 so you can you can place all
those four loops if and whatever is a
templating for HTML has nothing to do
with java so i just downloaded the
library i can download the leg show you
the library so just from from github
mustache and it's this just templating
engine there are masters and handlebars
are two libraries and if you used ever
angular or knockout.js or whatever
there's placeholders which are replaced
so and what i can do with that and
generate this a static page generator
SPG so what it means for static pages
also in
press projects pages which do not change
frequently we do not have jsf we do not
have just peace we have plain HTML pages
and because we know when the database
changes we have like a hook well any
database changes we fire up SPG and it
generates all the static pages so and
they are offloaded to Apache so there is
actually nothing to on my server and
actually all my registration pages on my
block are also this way it is just there
on apache server or not on glassfish
because there's no reason to run it in
glassfish it never changes they change
exactly three times a year so no y tu to
dynamically generate the code over and
over again you know we can save power
was nice one even right now right so um
so I can show you it the my block and
this is this SPG and if I say he had gin
so it would generate all direction of
the static page and why have to generate
because the date here it varies it is
once here then at the forum is on
different places and I always mess up
the dates this was actually if you is
always redundant and what I have to do
instead right now is the following there
is a peer Jason HTML this HTML is the
template and Jason is the on put the
input could also come from Java it
doesn't matter so if I open these and so
you see this is the input and you will
find here somewhere the templates and
the nice stories the templates they are
well documented the Masters framework
there's nothing to do is nuts on it just
works out of the box and what is also
nice in windward projects we were able
to use closely with designers because T
designers were well aware of the syntax
anyway because code it comes from html5
and what I got a feedback this project
is used a lot to generate configuration
of application servers in the cloud
because what they do they uses SPG and
have placeholders in know
I don't know jdbc names whatever and
then feed the Jason and it generates a
white lie for instance I know they used
for white retina generator on the floor
on the fly and the feed bag feed bag is
of course is great nothing to install is
Java 8 and Wi-Fi need Java age there's
no additional library no risk involved
someone said crazy crazy use case I
think they are not that crazy it is very
stable questions about this so we can
leave SPG right so um TP Kemp probably
there's a start-up and I can talk about
because I'm still interesting story if
you would like to hear the story behind
this ask me this is a start-up running
on pure java ee without any dependencies
and one day what they are selling is
like Kim brought Matt Kemp ground
management everything as a service with
even with raspberry PI's was completely
crazy project and runs on aura owner's
on a white flag without any dependencies
but what what he had had a problem
occupation management he wanted to have
price different or occupation different
prices the more fool it gets the more
expensive it gets and the problem is is
not one Klein is a product he sells it
all allowed the world all around the
world and he asked me okay what to do
any implement in something which was in
numbers based and command based on
whatever say look push the context to
nass one store the now Sonia database
and you are set and we were able to
remove I think I don't know 500 lines of
code and remove it to a simple script
and the great story is there was one
table for the tenants and it just worked
okay I don't show you the source code
because obvious right now so we have
script is the algorithm is the context
we get the occupation name or whatever
and each tenant can implement own
algorithm
yeah it was a little bit nicer because
what we did you know there was we just
provided the function body and in the
end and the middle was just implemented
so just the plane algorithm was actually
created and even it was company with
Excel so what you could do you can use
Excel to implement psycho if you--if why
not the judge is just the algorithm and
this is also an use cases before you
create your own parser use nice one
there's also a swing oh this is what I
wanted to mention a boring swing
application default table model there
were cells cells were big numbers know
how it's called big integer pick what
what is the class with big big decimal
yea big decibel we say okay each cell is
the big decimal and what we could do we
named the cells like in Excel and then
we pass this to nasa one if you say be
one plus when a son did it converted the
big decimal and invoked the plus and you
find out you find out right that it did
actually because of outer boxing yeah
but what it could do you could invoke
plus but anyway it was like excel okay
so this was the typical story and the
last thing was an email which was in
interesting this was a comment on on
google+ and all my google plus comments
are in spam from google so they are not
accepted which is I don't know why and
he said something and he is actually
right I didn't recognize this for
performance reason I only show you the
five recent entries because otherwise my
server will break no my server the
connection would break and he wanted to
see see everything like okay he's
actually right what I did I change and
head writer and SPG together so the any
greater connects to a database pulls
everything as Jason and these SPG gets
the jays never simple HTML template and
it creates everything this is actually
what I this is a true use case of we
also use this similar things in projects
and I would like to show you how it
looks like so first there is a script
and what the script does it uses n
hydrator and it just gets it gets more
or less for each cell in jdbc for the
results that gets converted to a to a
row of columns and this gets passed here
and they can manipulate the columns and
I say okay and i would like to write the
file index or jason and this is actually
a huge file so if i go here if we would
run this
so now 1473 articles from a blocked the
whole block was exported processed by
NASA on and written out in how FAR's was
the one second and this is actually a
lot of content if you go to my blog this
is the entire history from the whole of
the whole block and what what what
happened here behind the scenes actually
nothing because it didn't write as a
JSON file so what I could do I can fire
up the real application now I have it
ready yeah it's big so and what it
creates then it just extracts the title
and the link title link title link and
it's fully customizable and this is the
input for SPG and what it creates is a
simple page so what I what I did this
was also the flight so hopefully have a
power again in the flight this is the
best thing on earth so
so and now it's created those with the
full cycle fetch everything from
database Jason Jason reread and create
the page on the fly so performance
incredible and the database runs on
docker I just cloned from my server to
my notebook they did the database and
then if you go here in one yeah it even
works okay so do you see there's a very
and this I would push it after the Java
one you will see that page so mission
completed but usually in a stone is so
fast in my project is never a problem so
in all this stress test if you have
database or whatever it doesn't matter
if this would be real time processing
this would be a but if you are in
contact if you put it you if you compare
it with I oh no sequel or oracle
database transactions whatever then it
doesn't matter whether it executes in 10
milliseconds or or 50 if you have to
wait no 10 seconds for database okay we
have five minutes to go so any questions
also from from Oracle engines whatever
yeah what I am putting in the database
in my in my case it's a flat file the
script in all my enterprise project is a
database for a reason so what we always
need this kind of management interface
and if it's a relational database is
very easy to implement your fire up you
know create jpa entries from tabled
creatures f pages from entities and you
have very very nice management console
and the problem is if you put it on on
disk and the under server is far away
you will have to redeploy anyway so you
don't have always access to the server
so I think it's a good trick to store
the nos on scripts in enterprise project
in a database we always did it
yeah this is what I ascend several
emails to gym already and had that chat
with Attila and I look at the code and
the code looks already is multi-threaded
I don't know whether it is a back or not
so yesterday night I look at the process
code which implementation of the xik and
it uses threats to reach the DD output
but what happens is if something takes a
long time we have to wait until exec
execute and then we see all the output
at once which is annoying what we can do
yeah you send me the code but your code
was almost identical to the code which
is already a nice one I didn't gardens
are okay you send me the code and I went
to an to the last one is almost the same
code yeah
but do with that hard for you to do to
implement it in I would see every line
immediately in the console not wait
until exit completes
yeah could you do this for me and now we
vote for this and everyone else as well
please well the problem is what you said
is really annoying so it works so if you
something docker container can take
creation 20 seconds front front of the
base image that we have to wait 20
seconds and you see all the outputted
ones this is what is saying yeah yeah of
course but she will fight the
Eurofighter issue and Jim will implement
this them who asked question yeah
to automate netbeans ID yeah yeah you
could absolutely do this so um another
project was also extensions what we did
we've wrapped our API of the server in a
simple accessible class which used jndi
look up an injection inside and we pass
the class to nice one so basically in
the script the script had full access to
our public API what you could do the
NetBeans the same you pass whatever like
netbeans to the two dinaswyn environment
and in script the the environment yeah
of course very simple very simple what I
would I plan to do as well but do is dr.
is a less interesting is you could do
the same with glassfish so you can pass
the ACE admin a Pierrot pyara to an ass
one and but now is dr. I don't care
because I rebuild the doc and this new
image it's less important monitoring
will come again so we all use a nice one
for monitoring so I can create an ass
one script push it to glassfish and then
we'll return things which I'm interested
in okay other question yeah that's one
nice one German word
Oh native API we can you can a native
API whatever is in javascript is in
JavaScript the NASA not is full
JavaScript compatibility and what you
can always do we can instantiate java
objects in this one there's what I did
was file you can instantiate a local
time job from Java 8 whatever you like
then you get java object back and
there's a way to convert or in the to
convert-- to convert-- drink javascript
string in Java and vice versa and if you
have a Java you are actually invoking a
Java object annotated you could in you
you could instantiate Java class with
annotated classes and usually access the
annotation via reflection but there is
no way to put annotations on function
that's one right but because there is no
annotations in JavaScript so you cannot
write annotated functions
no it is I mean if you get the Java
object back I can say now so an object
get method get a notation and have it
very simple so that this works or
there's nothing to do with nuts one so a
little bit confusing at the beginning
what is java or notice javascript but
all the complex classes are always java
right so whatever your scripting bandits
are just plain java class no tricks you
can the only thing what what what is
nice in this one if you have something
like get name you can do an ass 1 dot
name or array and name the two yeah and
this is really nice i did it here in the
for this it was really nice because it's
the method chaining and it looked very
very concise and you have full lambda
support other so it's already here yeah
and someone asked me is it possible to
use nice one into using GSP's even
cooler this MVC java 8 specification 10
comes out of the box with nuts on
support so you can use nice one in all
the views already and of course with
this template so you can use SPG with
html5 templating on the server and is it
executed as java and as fast as java why
should care because server-side
rendering is better for SEO way better
any questions for what
stresses
okay I didn't didn't created a stress
stress from the entry processor but if
you hit my block that there is a
pipeline of filters written in
JavaScript on each request and this is
fast enough so that there I have to
measure but it was a measure the
performance difference it was almost no
difference so I'm nice one gets gets how
it's called compiled into bytecode so in
one point of time it should be as fast
as lambda right so there should be no
difference if it runs often enough yeah
when it runs since 200 days so at least
should be often enough any questions
left yeah sorry then thank you see you
next year fuse more use cases if you
like take a take a sticker they are
crazy heavy so stickers would be nice if
you could take one</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>