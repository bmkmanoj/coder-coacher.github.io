<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>JSR 353: JSON Processing API in Action | Coder Coacher - Coaching Coders</title><meta content="JSR 353: JSON Processing API in Action - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Developers/">Oracle Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>JSR 353: JSON Processing API in Action</b></h2><h5 class="post__date">2015-06-05</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/7AhyY8fuJtU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello welcome to Jason Jason processing
presentation I am jeetendra cotton
resume i work at work out and the
specification lead for this Jase are so
briefly we will go over the overview of
JSON and Jace are 353 then we will go
over the object model API and we have a
small demo using a Twitter search
results and that is being processed for
using object model ap then we will deep
dive into streaming API and if time
permits will have a small demo using
facebook search results and we will
process those search results using the
streaming API and jax-rs also provides
so native support for this particular
jsr so we will spend some time in the
demo looking at the jax-rs resources and
how they use JSON and then we will just
conclude the presentation so we released
the java ee 7 few months back it has
broadly like three themes one is like
developer productivity we continued
whatever we have been doing like the
ease of development and using more
annotated pojos and less boilerplate so
that's one of the themes so we continue
doing that and the other thing is like
meeting the enterprise needs like for
example like we did the couple of new
jss one is the badge acer other is a
concurrency api for the java ee and we
updated the JMS to 2 dot o with more
annotated pojos and less boilerplate
code then the third theme is which is a
key theme that is the html5 so we added
quite a bit of support for the html5
applications in the e platform so we
added two new jss one is the web sockets
and other is the JSON and we also
updated the solid throughout one
implementation and jax-rs 22 dot 0 so
primarily the web sockets and Jason
Beghe
quite a bit of support for developing
the html5 applications so html5 allows
you to build rich client of client us so
this also makes it available like you
can build thin server architectures so
that means so the UAE is downloaded to
the browsers maybe once or twice but
from that point onwards the browser code
the client primarily talks with the
services using probably the rest HTTP
protocol or WebSocket protocol or maybe
the server sent events but predominantly
all of them use primarily the Jason at
the red exchange format so from that
point onwards basically client and
server are just exchanging the primary
the data and the UI is basically
transitioned into the next screen and
stuff like that so for that as you could
see that Jason is very very important so
in which we added some support for java
ee 7 so most of you must be familiar
with Jason but I quickly just quickly go
or Jason so Jason is primarily a textual
lightweight data exchange format which
is easy for machines and humans to read
and write it's minimal and and it's
heavily used in a restful web services
because Jason is primarily the subset of
JavaScript notation so most of the
browser supports javascript and java
script so the browser clients to the
services they can talk easily and the
data exchange format predominantly has
been no Jason so but it's not really
limited only for the restful web
services but it has many other use cases
outside of the restful web services for
example we can see like some of the
databases have been using JSON or or the
configuration of certain applications
they are started using JSON so Jason
primarily consists of two structures one
is the object structure which is name
value pairs other is the edit structure
a restructure is just a sequence of
values so here
a small example which represents a
person's representation in JSON so it's
a object structure with the three name
value pairs so the name being the one
the name and its value is a string value
that's a bob and other other thing is it
has a age as the name and the value as a
number which is 20 and phone is here in
an array structure with two string
values that's pretty pretty much it so
it has primarily two structures object
structure and array structure and it has
a few values like string number true
false null and once again the value
itself could be a restructure or object
structure so other day was taking a look
at different popular web services
offered by many of these websites most
of them like support the restful web
services and the data representation is
Jason and in fact some of the popular
web services they have been like Twitter
for example they have been discontinuing
XML like Twitter streaming API trending
a pair doesn't support XML anymore so
that way as you could see that Jason is
getting more and more popular so once i
choose cases I think this is Twitter's 1
dot 0 API so here for example someone is
searching for the JSON in the tweets so
you could see like the person's tweet as
well as the user's name or user ID for
example and when the street is created
so that is being represented in Jason so
while we are at restful web services by
this popular website so the plot jax-rs
has been the primary technology to build
is restful web services in java ee
platform and if you look at the support
vijaya support of xml in jax-rs that's
that's been very good like because for
example let's take a look at here like
there is a resource method get' book so
which is written book representation as
just a source object and jax-rs runtime
knows how to convert this
goes to xml because so this is part of
the jdk APA which is part of that I mean
it's a JAX PAP which is part of JDK so
jax-rs has a very good support when you
give completely the source object and it
knows how to convert this so our source
objected XML representation on the wire
similarly let us say here we have a
similar kind of example where someone is
threatening the book representation as a
book object which is a java object and
once again there is a strong at once
again jack service knows how to convert
this book object into XML because that
can be used unbiased VAP which is part
of the platform again so we have a very
good support for xml and jax-rs also
supports something called content
negotiation so let's say here I have a
resource method called get book which is
returning the book representation and
that book representation could be
converted into either XML or JSON based
on the content type I mean the accept
header in the request HTTP request
message the HTTP request message says
that I need representation in XML Jack
service on-time dynamically can convert
the book to xml similarly it could
convert to Jason so as we see that
jax-rs has very good support for doing
xml xml representation using Jack's pa
pa or Jax PAP the similar kind of
support we want to provide in the
platform for JSON so we came up with
primarily to API so similar to what we
have in XML one is the jacks pa pa that
has done processing and passing in for
XML similar to that we want to do for
JSON or one particular jsr so that's
what we delivered in java ee 7 so the
other part is basically data binding you
have a job ject something like a book
you want to represent it in Jason or
vice versa that that would be similar to
what Jax we has done for XML so that we
are expecting that it would come in the
future versions of Java EE
we know that this is a very important
use case the binding so but it didn't
make the cut for Java is 7 so hopefully
it will come in future versions of Java
EE so with that being said like I will
deep dive into this Jason processing.js
or API so it primarily has to a ps1 is
the object model I pay some people call
this as also tree API it's a bit high
level API so it's something similar to
what XML has that's basically the Dom AP
you build the objects inside the memory
you can navigate those objects so anyway
you want to go it's just like what Dom
API has offered for XML the similar
thing which we are doing for JSON on the
other hand we have a one more APA that
is a streaming API that is bit low-level
API that also can be used to produce and
consume Jason but it's very efficient
because it doesn't show anything in the
memory if you have a huge amount of data
huge amount of Jason you want to consume
it you can just use the streaming API
and pass and produce that on the wire
now it's much similar to the stacks APA
if you compare with the XML so so brief
architecture about the APA so you could
write the applications in whatever API
you want either in the object model EPA
or the streaming API both ApS can search
for a provider the provider is basically
the implementation of this aps so if you
have some favorite provider rather than
default provider so you could plug in
that provider or that jar file in the
classpath they so the applications will
be using the provider and it will be
functioning so but we provide anyway the
default default provider okay so let's
deep dive into the object model a pain
so as I said that in some people also
call this as a tree APA because you are
building the objects of JSON in some
kind of a tree form so as I said that
like there are primarily two structures
which is Jason
the object structure and other is the
array structure so we have abstractions
for both those structures or that is an
object represents the object structure
the Jason area represents so Jason edit
structure and we have a rapper rapper
value types primarily for all the values
like JSON string which is basically this
represents a string value number is
being represented using Jason number
similarly for true false and NL and and
we also have builders to build this or
build these objects I will get to like
why we require the builders then we have
two other abstractions like Jason reader
Jason reader is primarily read something
from the input source and create
suggests an object or Jason array
similarly jason writer takes this JSON
object and Jason array and rights to a
output source and we have some factories
to create these objects also but the
primary abstraction says you could see
that we have a JSON object and Jason a
way to represent the object and array
structures and then we have the reader
and writer how to write these things or
to input source and basically read from
input source and write to the output
source so let us take a look at the JSON
object so JSON object is primarily the
object structure so it's it's basically
a map in implementation so the map
contains so the name value pairs hear
the name is basically the string type
and the value is adjacent value so it's
basically a rapper type for like for
example string number true false or null
so so it is primarily to hold name value
pairs so and it's also like the Arctic
cells or decided that this object is
primarily the immutable way of
representation like for example lot of
other languages primarily provide
immutable data structures like
Corrections like if you see Scala or
closure or any of us so similar to that
also like we started building creating
the JSON object complete object model is
primarily the immutable so that has many
added advantages because you could
access these data structures in very
thread safe manner so multiple threads
can access them concurrently without
having any side effects and copying and
cloning also much easier of course it
doesn't have all the use cases like in
place so if you want to change certain
things you cannot really do it but you
can still do using you know sharing some
of the structures some other trees like
if you want to share it you can always
share it so the but basically I it's
immutable so it has all the immutable
immutable benefits when you are
accessing these objects so let us take a
look at some of the things so since it
is a map so if you want to access for
example all the name names in this
particular object so you could use just
the key set you can use any of the
standard map API so for example in this
case the key set is used to get all the
list of names in this particular object
or are we also added some of the some of
the additional accessor methods to
directly get the unwrapped value because
as I said that we have for the string
values we have something called JSON
string which is a rapid rapid value for
the string so but if you want to
directly get the string representation
let us say you could say like get string
and you can pass the name name is here
being foo oh you directly want to the
value of foo name so that can be got
using the get string similarly let us
say there is a name bar and its values
integer you could directly use object
get integer and you will get that
particular number integer number or you
could also pass a default value let's
say due to some reason it couldn't
convert to integer or there is no such
mapping for the bar then you could
whatever the default value
that would be written as as the number
for this so we have quite a bit good
collection of accessor methods and if
you want you can always use the default
default methods which are there in a map
similarly like JSON array is immutable
imprison tation using the list because
the list provides the sequence of values
here the sequence is important in the in
case of a map the order of name value
pairs is not that important but in case
of JSON array basically the earth it is
a sequence of values so the order is
very important so that is being modeled
using the list representation here also
we have gone with the immutable of a way
to represent this sequence of values so
you could use all the accessor methods
from the list but we also added some
additional access or methods to directly
get the unwrapped eval use for example
of at index 0 if you want to get what is
the value you could directly use passing
the index like using the list method
least get that pass the index so you
will get the value at that particular
index so which is which returns adjacent
value and let's say you know that at
index 0 it is already a string you know
how to access it so you could directly
use get string and pass the index it
will automatically give the string
string value basically it basically it
knows there is adjacent string it gets
the corresponding string value from the
rapid adjacent string and just gives the
string value similarly you could also
pass you could also get the integer
value in this case at the index index
too similar to the map we have also have
the default or default mapping like slay
the index too for some reason it
couldn't convert the integer it will
just give whatever the default value you
pass to this particular method
since these these objects are primarily
using collections like map and list so
they can also use lambda goodness when
JDK 8 comes so directly from the JSON
array you could have the stream the
stream of values because the the list
already exposes the stream method if you
are familiar with jdk 8 so you could
directly use all the streaming
operations which you could do with the
collections you could directly use it on
array or object so I have a small
example here here basically we have one
more accessor method get values as like
apparently its most of the time here
they would come contain the same kind of
same type of values like probably like
Eric could contain all of them are
string values for example so in such
cases we have accessor method get values
as and you can pass that particular type
so in this case for example we pass JSON
object class so which gives basically
the list of objects reached up Jason
objects because the array contains of
the same type array contains same type
of objects so from there I could create
for example a stream which is part of
JDK 8 so you basically get you have
basically a stream of JSON objects now
at this stage then what I am doing is
like I am mapping this for each JSON
object I am getting a value for a
particular name that is a text so here I
am mapping basically a stream of object
to stream of strings as you as you seen
that get string primarily returns a
string so the map method basically takes
converts basically JSON object to string
so you are at that time you are dealing
with a stream of strings and then you
can print or whatever you want to do
with that string so in this case we are
just printing that stream so you do not
have to follow the code but the basic
thing is like when JDK 8 comes we have
all the support of lambdas basically so
we will see like if anything needs to be
added but at present it looks very good
to directly use with lambdas
so as I said that the JSON object and
Jason array the object model is
immutable like how do you build these
objects so we need to have some kind of
additional mechanisms to build this one
because you cannot directly mutate the
JSON object in JSON array so that is
where the builders come into picture so
use these builders to build these
objects you can build them from scratch
so while building them you can also use
method chaining like the fluent fluent
style of APA so we will see an example
so but if you already have let suggest
an object and JSON array those
structures you can structurally you can
share when you are building an even
bigger object so let us say you have
already a small JSON object and Jason
array you want to build them part of the
bigger Jason object you can just
directly use those structures so for
example a simple JSON object could be
created well for example you create the
object builder and you call the build
method you have a JSON object but if you
want to create life slightly bigger data
bigger structure so for example on the
right hand side I have a Jason that I
want to build a corresponding
representation so as you could see on
the right hand side it is primarily a
JSON array it starts with the square
bracket and it contains two object
structures for example the phone phone
number as one object structure and
second one is a FX phone as a second
object structure so the way you create
this you create array builder which is
basically the outer object structure and
then we are creating two arrays 11 for
the home phone number and other for the
object but if you don't want to chain
you could of course obviously you could
write you could create let us say home
phone number separately fax phone number
separately and once again you can
assemble it so it has all kinds of ways
to change these things but but the thing
is like the code is kind of reflects the
syntax of what what we are constructing
on the right hand side as you could see
so this is the way you primarily
construct a JSON object and Jason airing
so that's fine but that is like building
JSON object in JSON array from scratch
but what if I have json object
representation or the
actual representation in a file how do
you how do you build it so for that we
created typically the similar kind of
structures we have in jdk so that is the
Jason reader so Jason reader reads the
textual representation from the input
source the input source could be a I
worry a character stream so that could
be like a reader interface for example
or it could be a byte stream like input
stream so optionally if you if you are
passing a byte stream optional you could
pass encoding for that byte stream or if
it is not passed it will try to detect
it if you want to pass it you can always
pass the encoding also the readers could
be configured with the features so this
is the extensibility mechanism in the
APA so right now for the readers we
don't have any standard features but let
us say if someone wants to deal with the
name value pairs and the net are are are
basically the strings with a single
quoted typically jason allows only the
double coated strings but someone some
implementation wants to implement elates
a single coated strings and they want to
pass that feature to their
implementation they could always do that
by passing the features and configuring
the parser which will handle the single
coated strings so the way you create the
JSON object is primarily you create the
reader we have a top-level Jason
structure adjacent factory you can
create a reader you can pass let us say
the input stream here and you got the
Jason reader from the Jason reader you
can say read object which will give you
the JSON object it reads everything
passes and creates a complete object
model or if you know that if it is a
array you can just call create array you
will get a JSON array or if you don't
know whether it's a object or array you
can just call there is a method called
read which will just give you the super
type of JSON object and Jason array that
is adjacent structure so and also the
API supports the aam blocks so that
means you can wrap it into type try
catch blocks which is a jdk 7 feature so
the Jason reader will be automatically
closed at the end of this block so all
the API primarily supports so the aam
blocks so you can take advantage of jdk
7
language change similar to Jason reader
we have Jason writer which writes JSON
object to an Jason array to output
source you could pass character stream
while creating the jason writer so that
that would be like writer writer any
writer implementation or you could pass
just the output stream in that case it
just writes in utf-8 or if you want to
pass basically the byte stream with the
encoding you could always pass the
encoding so here also you can while
creating the writer objects you could
also configure with certain kind of
features for example the spec defense
one particular feature that is a pretty
printing like when you writing this JSON
object or JSON array you want to write
it prettily so you could pass this
pretty printing feature so while writing
it it writes with the proper tabs and
indentation primarily so similar to
Jason reader here we are creating a
Jason writer by passing a output stream
and it creates a jason writer from the
writer you can call basically right
object you can pass that the particular
Jason object or you can pass any array
orita it also has a right method which
you can pass either roll either the JSON
object or Jason area you can just pass
it so once again here this also supports
the aam blocks so the writer will be
closed at the end of this or try block
so i will just briefly go or a small
demo so that rather than going over
complete complete needs next set of aps
i will just go over the small demo so i
have this is a small example using a
twitter search results i am searching
that twitter about some tweets and
trying to process those streets for
example twitter when you search for it
so it gives in this kind of format as
you could see it's it's a object
structure which has some status state
statuses which
the name and which once again it's an
error structure and and and and the
array contains each tweet as one object
for example here there is a user and
that itself is the object structure with
the name and what is the corresponding
tweet that is this particular one so
like that you have multiple Thwaites so
my my my aim of this small sample is I
want to print the user name and the
corresponding tweet just the Justice
feet so I want to get X xx and YY and I
want to just print them so that is that
same of this exercise so I'm I am
primarily creating a search stream I
will show you how to create a set stream
but it is basically it is calling or
Twitter search results APA Twitter API
and getting the complete Dacian for some
particular hashtag then we are creating
a Jason reader by passing that
particular input stream as I as
explained so it creates a Jason reader
from the Jason reader i am creating a
reader object i am just calling a read
object which gives me the json object so
at this point of time I have all the
complete Twitter search results as one
JSON object so which I could you know
navigate I could do whatever means of
crossing I want to do I can do that so
what I am doing is there is a method
called get JSON array and as I showed
that the interesting thing which we are
looking for is the statuses name value
pair statuses is primarily a Jason array
so as you could see on the top statuses
is primarily a value it is a ray so I
got the array okay I got the array and
as I said that this array primarily
contains only the JSON objects as you
could see each for each tweet is
basically a JSON object as each line
basically you could see is it it is a
JSON object so I am getting a JSON
object here i am passing basically json
object i want and i am looping over each
of the json object so basically on each
tweet i am basically just looping over
and trying to get the username and the
corresponding to it so as we see that
the user the top if you see the user
itself is a object structure so I am
getting the user and from there I am
getting the name so that that is what it
is doing primarily I am getting a JSON
object with which gets the user subject
then I am getting the name if there is
no name I am just passing it as
anonymous someone who tweeted but on the
tweet we have a simple name value pair
which is the text that is the tweet so
for example here the text is the name
and the corresponding value is the the
tweet tweeted by this particular user so
that is all it is trying to do so all
this code is part of the part of the
repository so you do not really required
to do anything but you can take a look
later point of time so so using the API
basically that is a processing I am
doing so let us run this particular case
so as you could see that as you could
see that this this particular thing is
primarily searching for job on a hashtag
so we see some of the tweets the latest
streets whatever the Twitter search api
is giving so the search stream is
nothing but just it accesses Twitter
search api it has a little bit elaborate
procedure to do authentication so that
solid is doing so which is not really
related to what we are talking but all
it is doing is basically giving the
stream here that is pretty much it and
the such thing which you are searching
here is the Java bond so but the main
thing is here we are using the object
model API and processing the Twitter
search results
ok so let us go to the next APA which is
a streaming API so there are two primary
abstractions in the streaming API one is
the parser and the other is the
generator the parser is bit of low
parser and generator both of them are
bit a low-level API is so the parser is
something similar to what we have for
XML that is XML streamreader in the
stacks APA so this parser is basically a
pool passer so the so what happens is
like the parser you advance the parser
to next state what we call is basically
fast-forwarding and it is a basically
cursor based of APA so the application
is in control so it advances the passer
to certain state and it will try to get
certain information at that particular
state then once again it advances the
parser to certain state and try to get
the information at that state it's
something similar what XML streamreader
does exactly it is a similar so the way
to create the passes once again Jason
dot create passer or you can use a
factory to create the parser so it has
bunch of states I'll so at the sort of a
rate gives an event at that point of
time if you want to get any value or any
in anything any information you can get
that so we have bunch of passive state
events so let's take a look at a small
example so that so that you will you
will understand how the parser is going
to work but the important thing is here
is not storing anything in the memory
it's very efficient it doesn't is not
creating any intermediate objects only
when you ask ok I want a string at this
particular state at that time it is
basically creating the string object
it's not creating anything in the memory
so if you are dealing with very large
data and if you want to pass parts of
that one you could use this particular
API so let us take a small example here
for example I have a simple example
first name last name basically it's some
kind of persons representation in Jason
so let us say we create a parser for
this one so at the start of the curly
brace it gives a start object so that I
even it gives but there is no
interesting thing to do at the start of
the object typically basically you do
not
saini information so so it gave the
start of the object then afterwards
after the first name it gives the key
name event and if you want to get the
value of what is the key that is a first
name you could you can access it at that
particular event then if you advance the
cursor once again it gives basically a
value string so and at that point of
time if you want to access the value
John you could call a method and you can
get access the method so as I was saying
basically it's not creating any
intermediate objects so the movement you
call like at the value string I want to
actually access john at that time it
goes to the buffers parser buffers and
it basically constructs a John so until
that it didn't create any intermediate
objects so like that if you advance the
passer let us say you pass a multiple
times let us say you came to a number so
it gives a value number event and if you
want to access the this particular
number 25 you could call a method and
you can get that so that is the way
passer works so it's bit low level but
lot of frameworks which build on top of
it they all they can use this one we I
know that in XML when we are writing the
jacks double stack pretty much whole
stack is written on top of the cursor
kind of a pay that is XML streamreader
AP and the stacks AP so so the
frameworks which build on top of JSON so
they could be using a certain kind of
framework a certain kind of a peeing so
in this example let us say if you want
to access john ok so you do first I t
dot next that is a parser you get a
traitor of the events then which gives
the start object then the next ID dot
next basically gives you the key name
event sorry kin mne event then the next
idea door next gives you value string so
we are at present the cursor is at you
know at the end of John so at that point
if you say parsad get string you get the
value John okay so that that that is
primarily the parser so
so you just adjust that it is a bit low
level I paid but it is very efficient
similar two parcels extra abstraction we
have also have a low-level API which is
a generator you could write basically
the values for the JSON array or you
could write the name value pairs in a
small small chunks so Jason creates
Jason in a streaming way so let us say
if you want to create a huge a son you
don't have to create in the complete
object structure in the main memory but
you could write each individual values
one at a time so that is what the Jason
generator does it is much similar to
what we have in XML the stacks APA XML
streamwriter so other things I think so
yeah and here we provide a one standard
feature which is a pretty printing so
when you are creating a Jason generator
you could also pass this pretty printing
so that the generated Jason basically is
properly indented and properly prettily
printed so here also we allow method
chaining so let us let us take example
basically let us say if you are
generating some JSON which is there on
the right hand side and we could let us
say we created a Jason generator so you
just follow the syntax of the what about
the Jason is it is much similar to what
XML streamwriter is doing so for example
to start an array we write the start
again to start an update it writes for
example the curly brace it we do the
right start object then you writing the
name value pairs like the home num home
type type as home and the number home
number so it just follows the same kind
of structure just because it is allowing
all kinds of things it doesn't allow you
to write any malformed of the JSON so it
each point it keeps make sure that you
know you are not generating any
incorrect Jason so that Jason generator
implementation guarantees that you do
not generate any malformed Jason so if
you if you write if you call anything
wrong then it will throw an exception
immediately so it is in a sense it is
not thread-safe but the implementation
guarantees that you do not create any
more formal to Jason but this is very
useful like when the bigger frameworks
which build on top of this one like the
binding when they are creating a jason
they know how to write it
so they can use this kind of a APA and
write the things so we also have
factories we are we have factories even
for for example even in the object model
APA but even for the streaming API we
have factories so so what the advantage
of factory is like one thing is when you
are creating like Jason dot create
reader it is doing a service look up
primarily to find all the providers in
your you know in your classpath and
trying to find the provider and use that
provider to create the reader object so
that kind of service lookup can be
avoided so you create a factory once and
the factory is thread-safe you could use
in multiple threats to from that point
onwards you can just keep creating as
many number of objects you want for
example here I create one generator
factory so once i create the factory i
am calling create generator multiple
times so i am creating one generator one
instance generator to instance i use
that generate instance whenever I want
and so the advantage is the service
lookup happens only at this point of
time Jason or create generator factory
so from that point onwards there is no
service look up just creating a objects
basically of that particular type so
that is the advantage of factory and a
factory also holds some configuration so
you could configure the factory saying
that okay this factory needs to have
certain features and those features will
be used while creating the corresponding
objects so in this case the factory is
basically configured with pretty
printing so the configuration at present
is being passed as map the map is
basically string and object kind of map
so that could be possible to the factory
so let's briefly yes the eye is GF sorry
it's so yeah that is a type phone is not
WF okay so what are we doing so let us
briefly go the facebook demo
so here I am trying to use a streaming
API to set some of the facebook posts ok
so the facebook search results would
something look like this it is basically
an object structure ok and it gives a
data name value pair with the array and
in the array we have each facebook post
as one of the objects like for example
the frame gives what is the users
information and the message gives what
the users post so like that you have a
bunch of posts for that particular
search so these are the search results
so here once again I am interested in
only what is the user's name who posted
this post and what is the corresponding
facebook post so that is all I am trying
to get using this particular API so the
way to do is and I am printing basically
the user's name and the post and here in
this structure I do not see any of the
repetition like from is not part of
inside some nested structure and also so
the way to do is here is like the from
is whenever the key name from is there I
know like or whenever the name basically
we get an event that there is a key name
right so at that time we will check what
is the what is the name what is the type
of the what is the type of the key which
we have done so let us see so similar to
that we are getting a seiche stream ok
so don't worry how we got the how we are
opening up the facebook search results
APA but primarily all we got is
basically a input stream that input
stream is being passed to the parser and
we got a json parser ok so and the
parser we are keep on advancing using
has next and the next so if the parser
has more states we are advancing the
parser to the next state next state next
state so if the event is key name then
we are looking for is it named as the
key or easy the message as a key ok so
we are we are interested only in the
name and key basically we are
is interested only in the name and
message so okay when it is a name I am
advancing the parser to the next stage
and getting some information so that is
basically the value of the name so when
we are here what we are doing is we are
going to the next state and trying to
get this XXX value let us say when when
the name is message we are advancing the
parser and getting the value by why that
solid is doing nothing beyond that so it
is basically it is when it is named it
is advancing the parser getting the
value and when it is a message it is
advancing the parser to the next pass of
state and getting the value and it's
just printing that so that is all it is
doing so here the advantage as I said
that it is not creating any intermediate
objects let us say the facebook is
giving let us say one gig of for data
such post results just keep on getting
those things and just putting things out
there so it is not fading any
intermediate objects is very efficient
in that in that sense the system is
pretty straightforward but you don't
really require to worry basically it is
using a Facebook Graph API and passing a
access token which is required nowadays
to access facebook search results and
just opening that URL connections stream
so that is all it is doing so let us run
this one
yes of the facebook post sometimes could
be very big so i hear i think i am
searching for some keyword called tamil
because I wanted to see different
language I don't know whether it for
example this is in a different language
I just want to show like you could the
past UDF character utf-8 characters
etcetera so okay so let us go back to
the presentation I have few more minutes
so we support JSON in jax-rs natively I
actually many previously even before
that many of the jax-rs implementations
they suppose ason using some proprietary
libraries and even now I think for
binding you still need to use
proprietary reveries but for certain use
cases you can use the standard library
and now Jack's our studio supports
natively this one so in this case let us
say if the book representation is
retaining a JSON object so you can have
JSON object JSON array or the supertype
of those two that is Jason structure
that could be used as a written for any
any of the resource methods so that is
possible so you can take advantage of
that and and let us say if the request
primarily contains a Jason and if you
want to map it to JSON object you could
use that so in this case basically it is
consuming Jason and so those resource
methods can take JSON object and Jason
array as parameters and pass it to the
resource methods and the important thing
is to note that is like here jax-rs
runtime understands because JSON object
and Jason array are part of the standard
ap you do not require to bundle any of
the proprietary libraries the access
runtime knows how to convert this JSON
object and Jason array to the stream or
basically read from the stream or write
to the stream so that 10 doll is taken
care by the jax-rs runtime so you will
spend some time because most of the
restful webservices you develop you
could take advantage of this so i will
just spend around five minutes on this
one
ok
the resolution is
okay Jackson if you are not familiar
with Jack service program model that is
fine so but if you are familiar i think
it makes very easy to follow this one so
i have a small jax-rs application so
which is extending jax-rs application
class so it has bunch of resources like
the generator resources which wants to
demos which demonstrates Jason generator
the object resource primarily
demonstrates so Jason object so I have a
bunch of four or five or resource
classes and I am also configuring to
jax-rs the pre depending so whenever we
are emitting Jason it will be prettily
printed so that kind of this thing we
are passing to our our report our
basically when we are creating the JSON
objects so let us take a look at some of
the cases which I was talking so the
object resource so here we are just
basically using the object builder we
are creating a JSON object and returning
it so when there is a HTTP GET method is
happening it is producing a jason and
our our application is just doing
retaining a json object it is creating a
json object you could trade es an object
some other means like for example you
read from somewhere else some other
input stream but in this case it is
pretty simple we are using a the Builder
API to build the JSON object from
scratch and we are just returning that
and jax-rs runtime knows how to convert
this JSON object to the stream okay
basically yeah so since it is producing
right when when there is HTTP GET method
terms in the response you it will
basically send Jason and similarly let
us say if there is a post request comes
to this particular particular resource
that one will be mapper to JSON object
and at present we are just printing we
are not doing anything as such
so let us try to access for example so
so we we send we just send a get request
and we received some kind of the data
which we created similarly we could also
post it I have a curl basically so I am
posting a small this is airway actually
but I can show that yeah so so here I
posted a small HTTP request with some
kind of data so that we our resource
must have got and we are just printing
it out so it would just go into a server
log fell as you could see the our server
has received it so so the the thing is
like jax-rs runtime is basically
handling Jason and converting to the
objects and calling the resource methods
appropriately the same thing if you want
to call the get method on the curl I
just sure from the browser but if you
want to call from for example I do not
require all this probably if I just want
to pass
okay so for example if I just want to
call get method what I have shown in the
browser's from the curl so so and it
also is prettily printed as you could
see that it is properly indented and
stuff like that so similar to that we
have some other resource which is a
error resource it does exactly similar
what the object resource was doing just
creating a small object and returning
the JSON array and this particular
resource is hosted / sharing similarly
if there is a post request happens that
would be mapped to JSON array and you
can take advantage of that Jason array
in your implementation in your
application so we haven't provide any
support for the parser and generator
because those are too low level and for
generator it's also it is not really
possible but if you want you can take
advantage of you could do yourself
basically for example I have a simple I
will just let me show the generator
resource so jax-rs also has something
called a streaming output so you could
implement the streaming output yourself
and you could write to the whatever the
output stream they are passing to us you
could basically right to that output
stream whatever you want to generate it
so that is what is happening here jax-rs
is passing the output stream when there
is a request happens and in to the
output stream we are directly generating
the data basically we are just keep on
writing the Jason to that particular
output stream so we are not storing
anything inside the memory but we eject
Lee storing all this sending all this
data directly to that particular output
stream so that is also efficient if you
want to if you do not want to store
anything inside the memory I was some
other simple example for the parser also
we don't have any native support but if
you want you could always create your
own parser and do whatever processing
here you want to do I have a small
example basically it access flickr APA
all the recent photos from the flickr
APA
and it creates a pastor out of it and
the flicker APA primarily gives this
kind of format for each photo basically
it has a IDC credit cetera so i am just
accessing those exactly similar to what
i was doing in the facebook post for
every p name ID i am getting that
particular value for the secret i am
getting the particular value as you
could see here so when there is a key
name if it is ID i am getting the I'm
advancing the parser to the next state I
am getting the value for the form i am
getting the value because this is
required to access the actual image so
the image typically flickr gives as some
kind of this format form form will be
appended to the form that static got
flickr.com what is the server so that
all that information is coming from the
flickr say PA as you could so but as far
as the Jason processing is concerned it
is pretty straightforward whenever there
is ID we are getting the particular ID
and we are creating basically the image
tax so let's see if you access this for
example these are the latest photos so
right I am accessing around 20 photos so
if you see what we have sent it is
nothing but like this value for this all
these values are primarily grading from
the Jason and all I created is just the
image tag in the jax-rs application
okay so we have few minutes so some of
the frameworks also started supporting
JSON object and Jason arianne their
binding frameworks like there are few
popular projects like jackson jensen
moxie they all support binding which we
do not have a standard as of it but they
support they started supporting this
JSON object and Jason area so for
example if you have a pojo let's say or
the person class has something you could
use like in this case the first name and
say last name is string but address you
just want to access like a JSON object
rather than actual Java object you want
to access this just like a JSON object
for example for some reason whether if
you don't want to model that part of the
thing and if you want to access like a
JSON object you could create something
like this this person object and pass it
to their framework because they
understand how to you know actual the
representation to the JSON object they
could basically populate the person
object similarly if you have a person
object he could deserialize and write it
to the JSON so some of the frameworks
already supporting the standard types in
their frameworks so when we have the
full fledged binding then it will be
even better but right now yeah so this
is the kind of support we have for the
binding from from the other frameworks
so in summary basically the API provides
so once you have the input streams it
can give you the event streams like for
example we saw that JSON parser gives
the event streams for the Jason stream
or if you have a event stream you could
write them to the output source and and
and there is a way to create immutable
objects and you can navigate whatever
way you want so that is advantage
between the object model appear and
streaming a page streaming API you will
be navigating only in one direction if
you want to go back something you have
to do the bookkeeping and you have to
keep track of that where you are but in
the object model API you have a complete
tree in your memory so if you want to
navigate in any way you want to navigate
you can do that so we provide that using
the APA
and we also provide a way to build these
objects from scratch if you want to
using builders so what we think that
this particular API becomes a building
block to build other kind of features
like for example if tomorrow adjacent
path or Jason pointer there are few
specifications which are evolving so if
you if some of those implementations can
be built on top of this base APA
especially the binding varying if
anything comes up yeah so those this
this particular API will become
primarily the building block to build
those things so so I think that's all I
have for this I have of the reference
implementation is pushed it to maven and
it's available at Jason P java.net and
specification is part of Jason
processing got spec java.net so we have
complete mailing lists for the
specification and all the issues which
we dealt during the creating the
specification that is all there and it's
integrated into glassfish so if you
building any jax-rs applications they
will directly work on glassfish you do
not require to do anything or you do not
required to bundle any of the libraries
so you can directly your application can
be directly indirectly work on top of
glassfish or any other java ee 7
implementation JC supports yeah yes JC
so that is how we integrate into
glassfish yeah I think that's all I have
yeah we have I think two or three
minutes if you have any questions so
yeah either here are outside you can
catch me</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>