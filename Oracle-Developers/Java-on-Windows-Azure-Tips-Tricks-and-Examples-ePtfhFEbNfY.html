<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Java on Windows Azure: Tips, Tricks, and Examples | Coder Coacher - Coaching Coders</title><meta content="Java on Windows Azure: Tips, Tricks, and Examples - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Developers/">Oracle Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Java on Windows Azure: Tips, Tricks, and Examples</b></h2><h5 class="post__date">2015-06-05</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/ePtfhFEbNfY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so originally today this session was
supposed to be done by my colleague
Brian bands who unfortunately had a
medical emergency so we pitched in that
last minute hopefully with some nice
content with you guys and I am Jenna
grab Alena and the senior director of
open source communities at Microsoft
Oakland technologies and I'm joined by
Martin Starkey who is going who is
actually the author of a lot of the code
that we are going to see today and he
will be showing up a lot of ways to
develop Java Java applications for the
Azure platform so I will start by doing
a small introduction before I just hand
it over to to Martin and I want to tell
you about the options I want to tell you
what azure is about I want to tell you
about our vision for the cloud and as I
was saying attendees yesterday in a
previous session the one issue with
cloud is that it tends to be buzzword
heavy right so any discussion on the
cloud it's about tell us this is a
flexibility choice etc etc well we want
to try to keep it technical give it real
in a bit to avoid all this clutter
we start with nose lights all right so
today what we're going to see our
websites portals management tools and
IDs right this is about the banker so we
want to expect right the Microsoft that
is bringing you Java that is bringing
your Linux that will bring you
presentations without PowerPoint so
let's start talking about our cloud and
how we see things first of all well let
me tell you that I have a very personal
connection with a cloud when I think of
cloud I cannot have by being reminded of
my previous life as a system engineer in
a fledgling data center in Italy back
when data centers were not that much of
a fashionable things and we were on the
brink of not being big enough to have a
whole 24 by 7 support team right but
still having those enterprise customers
that require them and here can
the pager or in our case a mobile phone
right and we would wear it we would take
turns and you know I had my weeks in
during my weeks they usually it usually
was a cold winter night in Milano the
sting will ring and someone's hard drive
would have fail
someone's network car would have failed
and Here I am getting in the car driving
to the data center etcetera etcetera
well to date I can tell you this I've
gone back to a Nokia phone by the way
this is an awesome one of our Windows
Phone Nokia 920 devices but I haven't
been using Nokia's for a long time and
when they came back with this I just got
one you know they don't care to that was
the tone of the phone that we would get
when we were on 24 by 7 take the phone
out of the box first thing I do I try to
receive a phone call this phone goes off
and my wife goes berserk it was like oh
my god that's the tune that would wake
us up in the winter right so the first
thing I had to do was change it tuned to
me this is cloud this is one of the
aspects of cloud the idea of not having
to worry right the idea that a lot of
aspects of your applications are taking
care off by someone else and ideally we
want to get to a point where as much as
possible of that is taken care of and if
you think about it well you know I still
remember if only I had hair that would
be gray you know 20 years ago we were
fighting literally about the bias on our
machine so I had an my bias and my
friend would have a Phoenix bias and
would have religious word on which bias
was better right and then he came to the
particular brand of your hard drive oh I
have my Western Digital or no no no no
no what's the digital is crap etc etc
well you can see how over the years all
the discussion have become elevated
right we just don't care anymore this
super colonization process is moving
along right and that means that we are
free to focus on our business
that's usually an argument that
resonates well with startups is an
example so the idea that hey idea to
execution the only thing blocking you
from going to idea to execution is a
credit card right and yeah making do
without your daily latte for a little
while but that's also true in the
enterprise we're seeing as a matter of
fact a lot of enterprises where you see
groups that that were blocked before
they had ideas they wanting to
experiment but hey guess what you need
to procure hardware you need to procure
resources you need to go through your
procurement system you need to wait six
to nine months and then the hardware
shows up and well the idea of course is
by then org on what cloud changes all
that again and to me when I look at a
sure I see these two aspects on the one
hand less things that I have to do and
on the other hands opportunities there
open up for me but in order to do that
what you need ultimately is choice and
flexibility and a cloud what we call
cloud on your terms so a cloud that can
work with you a cloud that doesn't
require you to you know learn a bunch of
new stuff learn a bunch of new partings
and this is what we are we have been
trying to do with Azure and when I look
at a sure and I think of what's around
in terms of cloud providers well I see
two things that are peculiar in
Microsoft because when you look out
there you see some big players there are
very good at building internet scale
services right so it makes a lot of
sense they have the data center they
have the expertise now what they're
doing is they're taking their spare
capacity and turn it into something that
came monetize which is fantastic and by
the way this is what Microsoft is doing
if you think about it Microsoft
may not be immediate an immediate
association when it comes to online
service because you know the windows
franchise the office franchise is so big
that it doesn't make you want to think
that way but well if you think about it
and if you really think about it being
xbox live Skype even Windows Update well
that's a lot of network servers that's a
lot of data centers that have been built
over the years that's a lot of expertise
that has come on and on the other hand
however Microsoft is something unique
and that's the experience in working
with the enterprise the experience of
working with developers we are not a
retail company we're not an Internet
service company we know how to do that
and hopefully this shows in the services
that we provide so let's go through what
we have on on Windows Azure let's go
through one by one the services that we
provide and how they can help you first
of all let me start by saying that this
is the Windows Azure management portal
and this is the whole choice of services
that you can use I said that a lot of it
is really about not having a lot of
surprises working on your own terms
working with what you know and this is
why we have this concept of virtual
images the so-called infrastructure is a
service I won't bore you with what it is
but basically you can think of
infrastructure as a service as well it's
your machine it's in the cloud it's just
in a way the devil you know you just
don't have to deal with a failing hard
drive you paid by the minute you pay as
you go it's elastic etc etc etc etc so
there's a lot of goodness to it and the
interesting part again going back to
choice is that first of all we want to
make it very easy and very immediate to
spin up a machine because hey it's a cow
that's the whole point you need to be
able to provision very rapidly so but
it's also about giving you the choice
that you require so let's talk about
choice
this is what you can do today well this
is actually a selection on what you can
do today well this being microscope you
know you're probably not surprised to
see that there are quite a few images of
Windows Server you can choose between
Windows Server 2008 Windows Server 2012
r2 etc etc you can install sequel server
install you stock up but look at that
this was announced yesterday these are
the platform images that we are built to
gain together with our partnership with
Oracle and this allows you to install
Oracle software right out of the box be
the database server of the application
servers or WebLogic or just Java a plane
this is the plane Windows virtual
machine that comes with Java
pre-installed literally as easy as that
now however the the surprise may come in
a little bit because if I manage to
clear the selection well yes you can run
Linux on windows azure that's true as a
matter of fact Ubuntu workloads your
Centaurus workloads your suzer workloads
they will just work you get here install
your VM choose the size choose where you
want it to be and it's running
that's literally as easy as that now and
if the choice wasn't enough I have
something else to show you
and this is something that I actually
pretty proud of because it's what our
group has been doing this is not my
computer and not this fast sorry but we
decided since Martin was going to dig
deep into demos so this is vm depot and
this is the place where the community
can come and build and share images for
our infrastructure as a service alright
so what you're seeing here is only a
small selection as a matter of fact when
we get down to the pager you will see
what I mean you have 60 more
Queens right which basically means that
we are well north of 500 images right
500 images that contain but pretty much
everything under the Sun pretty much
everything that you may need if you want
to start from something that is packaged
so you find you can find Tomcat servers
you can go all the way to alfresco or
WordPress you find some esoteric stuff
like c-can if you're in the world of
open data and you find also some
interesting other distribution so if
you're a Debian person if you're in our
clinics if you're into magelia you can
find all that in VM Depot and again
couple of clicks and you're ready to go
by the way I should have mentioned that
nothing of this requires you to use
Windows to run your workloads in a cloud
as a matter of fact all you need to do
is either go to the portal with whatever
browser whatever modern browser or use
common line tools those common line
tools are actually written in node so in
nodejs
and there are open source they're
available on github together with all
the rest of our goodness in terms of
SDKs so all the SDKs everything that we
do is actually open source not only its
open source it's based on a REST API
layer that you are free to re-implement
if you want to do so it's fully
documented so the way you interact with
Azure is either by doing yourself some
rest calls which you don't really have
to because you have investigated does
that for you but you know there may be
the case where you really want to try
and implement a new language or just do
the workflow in a different manner
so those SDK is implementing the CPI's
are open source not only they're open
source we are actively accepting
contributions to them so there is a
community behind them right and again
they're written in old so they are
completely cross-platform
there are you know a testimony to our
commitment to open technologies and
openness in general
so we saw the virtual machines something
else that I wanted to show you and I
closed the wrong page are some basic
services because there will be the
building blocks on which Martin will
drill when we get to his part when it's
going to actually show you how to build
the stuff that can truly leverage the
cloud so so far what we have seen is
infrastructure as a service again there
are no surprises here is the software
you know much like you're deploying on
top of tomcat jetty JBoss GlassFish on
your your virtual machine or WebLogic or
websphere you can do it just as easily
on Windows Azure the part that becomes
interesting is when we go into the other
services that we provide so I want just
to give you an overview first of all
well cloud is usually computing storage
right that's the nice part so you get
someplace where you offload your
calculation and your neck they get
someplace where you store your data let
me tell you a little bit about the
storage because I think there could be
an interesting one so storage in Azure
means that your data are safe and
distributed every single time so when
you create storage accounts what you
really get is the option to first of all
choose what you want it to be so where
are your data where are your customers
all right once you do that you can start
working and the interesting bit is that
every single time you write one byte on
Azure on the honor on Azure storage it
gets replicated three times in the same
data center so we keep three copies of
your data but that's not enough those
three copies are completely synchronous
so you know you're the read/write are
the the right is lock is blocking
etcetera etcetera on top of that we do
three more copies on another day
the center alright you saw that enable
geo replication doesn't come with an
additional cost right so the idea is
that we are effectively with something
as simple as storage while giving you
what is a disaster recovery strategy and
implementation right so you know that in
agile your data are safe right now if
you are somewhat conversant on cloud
storage you know that it's never as easy
as a hard drive that you mount we can do
that right but usually you get some
added value when you use the native
storage API so for the cloud and we
offer you three api's right and what you
can see here is that those API are truly
truly truly truly based on rest HTTP and
open product goals right
look at the service endpoints here right
so we're giving you a blob store so a
blob store is what you probably know
what it is it's a key and value the idea
that the value can be arbitrarily big
just like Amazon s3 you have buckets you
put data there and I persisted the
interesting bit a blob storage however
is that not only your data are
persistent can be big as much as you
want but we can also throw in a content
delivery network for you that basically
means that your object in the cloud will
have a unique identifier a URL if you
want right and that identifier will be
resolved based on where your user is
coming from so you start a service here
you're deploying it in West US and then
you realize that a lot of users are
coming from Europe you just come here do
a couple of clicks and say hey I want
this container of my blob objects to be
served by the content distribution
network right so that's about what the
cloud can give you in terms of ad
services right the cloud is about going
beyond a cloud that is only about let's
run our workloads the way we used to
although now they are only in the cloud
so the only difference is that we pay by
the hour it's fine it's part of a
migration process but it's not exactly
where we really want to be to be allow
our applications so back to storage what
we give you our blobs tables and queues
again blob key value tables tabular
storage pretty good for doing some very
simple persistence of Java object is an
example the api's will do some
reflection for you so that you don't
have to do a lot of manual coding etc
tailoring cues are just why you can't
imagine you throw stuff in you decided
strategy in which it comes out think of
them as a poor messaging system Poorman
messaging system except that if you want
a messaging system
we actually have one and it's right here
so this is service bus a service bus to
a Java developer doesn't look like
anything new again found in your terms
nothing to learn what you have here is
JMS you don't need to learn anything new
by the way you can use your EMS you can
use AMQP if you like to go under
standard from a standard standpoint one
project that we worked on is Apache
Cupid as an example which is fully
interoperable and again that gives you
the idea that this is something that
you're really not worrying about you
need to use messaging in your
application because you know the
synchronous style of messaging helps you
scale and it's a functionality that you
want to add well you don't have to run
your own service bus with all that it
entails you come here and you use this
as a service what you get as a result is
an endpoint is the endpoint that you put
in your client JMS apps and you know
that the
we are highly available always on 99.95%
SLA back by the way the vessel is
monthly it's not early that's a subtle
but important difference because it
requires you to be much more on your
toes and that helps you in that well
you're up and running in minutes and
that's the story with pretty much every
other service that we can walk through
be the seat yup sure I have a question I
don't think there's a limitation to that
are the limits well you pay for uh let
me let me get you see the beautiful
thing I can tell you that in a second
let's check it out together shall we
so no surprises that's what you pay you
pay by message all right
okay babe a message every message is a
limit of 64k if it's more than 64 K
concert 2 messages all right but I mean
one sent 10,000 messages that's
depending on your application but I
think it's a good price point and again
keep in mind that that means that you're
taking away so many headaches that you
cannot even imagine so the same goes for
SQL the same goes for the ability of
building as an example well Hadoop
services all right I don't know if any
of you is into big data right the one
things that people with a dupe
experience have in common if they ever
built an a dupe cluster is that they
don't want to build a second one Hadoop
is so fantastic it's it's great it's
incredible for the business but keeping
an Adu cluster alive and well it's
really a full-time job for a good sized
thing here again you just go to Windows
Azure you choose an add-on and you pay
for use so you're ready to send your
MapReduce job and your data all the way
and the same goes for stuff like I love
this one mobile services right so mobile
services well pretty much every one of
us is a developer knows that what we
have to do is to work both on the cloud
side and the dry side and a lot of times
those devices are mobile right when you
deal with mobile devices the integration
with the cloud well it goes usually
through the same issues over and over
again user management storage
notifications right not necessarily in
disorders but doors are their priorities
wouldn't it be cool if you know I could
focus on my mobile app and not worry
about the server side because I'm just
you know paying it as it goes and using
it through an API well you can do that
you can do that you gonna hear today
start mobile services and go download
yes
kay to integrate with mobile services
from Windows Phone well surprise iOS Wow
now that's interesting and Android right
so that's basically again another way on
for us to make sure that you can do what
you want every what matters to your
business the list goes on and on I mean
media services right why if you need it
you need it badly this is a typical
example about the cloud as commoditize
dramatically I was in 2003 in voting I'm
sorry not 2003 2009 so it wasn't a lot a
long time ago involved in a big project
about the Web TV well I can tell you
that when I looked at the business plan
for the encoding farm and building an
encoding and decoding pipeline so that
we could serve content well you know
from idea to execution there was a big
fat check there was an eight figures
Jack right here we give you encoding and
decoding and streaming services and a
pay-as-you-go fashion right so again
integrating your stuff it it makes it
easy right an example that I'll leave
that to Martin because I think is super
cool but I'll just leave it to the fact
that as you know Microsoft has a very
strong product when it comes to
directory and authentication right so
you can have your Active Directory in
the cloud alright so you can have your
user user management in the cloud but on
top of that what we are giving you it's
also a way to integrate to federate
authentication right which is a pretty
pompous way to tell you that your app
with a few lines of code and Martin will
show you exactly a few can integrate
with authentication from your wall know
off providers so you can tell you use a
wall login with your Gmail address right
and again this is something that you
don't need to
okay and if all the goodness from
Microsoft wasn't enough we also have a
whole bunch of partners the cards are
coming in so if you want to as an
example monitor your application well
chances are you or you like your relic
quite a bit
well uronic is available in our store so
you can go in the store and just choose
buy a service you want to use no SQL
MongoDB is available in the store so you
just need to go there there's no even a
free tier for you to try it out and
again wireless headache you get one
endpoint and that's all you need to
start storing data in MongoDB you want
to use engine yard that that has been in
quite a popular choice in in the Ruby
feel the Ruby on Rails fee as well and
Ginyard is a partner you're not sure so
you know we can use Linux you can use
Java you can use PHP you can use node
you can use dotnet engine your new relic
mongolab the risk goes on and on and on
and on and on but the point is that all
what all that those have in common is
that they have been built to be easy for
you to integrate and that brings me to
the very last point that I wanted to
make and that's an introduction to what
Martin is going to display so martin is
going to be way more serious than me I
got much deeper into code but we talked
about virtual machines let's talk for a
minute about cloud services cloud
services for us is what goes by the name
of platform as a service alright the
idea platform as a service is that well
in in the infrastructure as a service
world you start worrying at the
operating system level someone takes
care of the hardware someone takes care
of the virtualization someone takes care
of that it working it said it said there
but you're still responsible you're your
kernel crashes it's your responsibility
you need to update and put a security
patches your responsibility you need to
scale it it's a responsibility to figure
out how to do it with cloud services we
take care of all of that right so the
idea is that you start
I putting your application in the cloud
and we take it from there
all right taking it from there means
that all the underlying part is taken
care of it's fully upgraded it's fully
patched it's fully secured it's
constantly kept to the latest right and
it also means that it's automatically
scalable it's taken care of you even on
that aspect right so you see that your
application is successful you just come
here
and you say well you know what I need to
increase this stuff because I'm getting
some capacity and so I want to make sure
that I move it from you know 10 cores to
20 course just as easy as that now well
that comes at a price or actually there
are two prices to pay right the first
one is that in order to be scalable your
application must not rely on any kind of
local state right well that's not a
surprise that's just a good pattern for
building enterprise application since
that scale if you don't write stuff to
the local file system why because
someone may come in and just reboot the
machine right so you cannot rely exactly
on that someone can wipe it and
reinstall it right the other part is
that you end up packaging your app
exactly as an installer so what you're
doing to use a cloud service once you
developed your app and again using your
tools using your approach is that you
just say hey I need to deploy this and
as you will do it for you
using a repeatable process that can be
repeated ad nauseam all right now that
part may seem complex the good news is
that we have tooling for that so the
good news is that we have an eclipse
plug-in that does it for you
and now Martine it's really your turn
the one thing that I want to say before
you start is that we just released some
exciting news and what marty is going to
show you is the very latest
first of all and I think this is a very
very important announcement today
together with our partners on system
right we are now ready to give you open
JDK on Windows
ah so today just announced ulu which is
an open JDK build for Windows server on
Windows Azure effectively that means
that today starting today you are able
to either go to the Azul website and
unload your copy or even better just use
your tool that will deploy it for you
and as a matter of fact the second
announcement that we are doing today is
that further to this technology that
we've been waiting so much for we have
an updated plugin for Eclipse that will
help you install and deploy your apps
using Azul Zulu so using open JDK and
using the application servers that you
know and love today support is for jerry
tomcat GlassFish and JBoss more than the
line and you're free to choose so I
think you're in for a pretty nice demo
got 30 minutes
so yes ah Martin turns out I'm the
engineer on the Microsoft delegation to
Java 1 as a turned out yesterday which
probably explains why I have the very
last 30 minutes of Microsoft's presence
at JavaOne I guess everybody just wanted
to leave before they see present I'm not
a professional presenter not a marketing
guy not an evangelist I like looking at
a code and showing code I'm a designer
software design they're also write some
code so most of the things that I'm
going to show you actually sort of my
baby so to speak so now one of the
challenges the biggest I was staffing
the booth actually did earlier today our
little booth and Java one the exhibit
hall a bunch of people came up and Ike
wanted the struggles that I that I know
is like I was one of the struggles I was
having just trying to answering people's
questions or like I'm just hearing about
it's like what do we do it - like I
don't there are so many different entry
points where you can start explaining
Azure where do you start you got to
start somewhere you know you could stop
it and over you that's gonna take me two
hours or I could start with one specific
thing and kind of take you through like
the process and
fully then X you know that will you'll
be able to extrapolate and say okay now
I can do authentication maybe I can do
other things with Azure as well so I'm
going to choose this this gladder
approach and I'm gonna start with a
specific thing very specific scenario
and then hopefully uh you can see and
kind of we can expand girl from that and
talk about other things in Windows Azure
just to just to set the context here so
we have eclipse what we have here is a
very basic program and I see lamp I'm
gonna learn this control one trick I
definitely Jenny Willis installed this
app on my computer which zooms in zero
all it is there's really nothing address
specific about it this is just a plain
Java web app it's just the plain
application and just to show you I can I
can run it in just to show you what it
does or how little it does I'll just run
it in in Eclipse and Tomcat and you know
all there is to it really is just a
little just something right it's it's a
nap um now so let's say you have enough
like that on-premises or whatever in
some other somebody else's cloud for
that matter I don't really care
let's say that you want to start taking
advantage of some of the services that
are available in Windows Azure and I
thought one of the coolest things that
that you can actually use is to take
advantage of Windows Azure ability to
authenticate users on your behalf so
instead of you implementing your
authentication service keeping track of
passwords keeping track of credentials
forget it forget that just just leverage
Google's authentication live I de
Yahoo's authentication I mean why do you
want to write code to do that if you can
if you can do that so Windows Azure
provides a service that basically it's
an identity Federation service which
allows you to basically work through
Windows Azure and Windows Azure will do
the authentication on your behalf on all
that you will get from into your
application or the the credentials the
information about the user basically the
idea identifying if
nation so wouldn't it be cool if I could
use that service you should start
authenticating the users for my for my
application here so I'm not even going
to deploy this to Windows Azure I'm
really talking about an application that
might run on my desktop
anywhere I don't really care where it
runs and by the way if I if I'm going
too fast scream or throw something at me
there are plastic cups I notice in the
back because I once I get into it I
might go a little bit too fast okay
and also I'm kind of stressed out about
the time because I have so much to show
you you get ready you're right you
should you're the closest you have best
aim okay so first of all I downloaded
I've already installed our toolkit for
eclipse windows actually toolkit for
Eclipse I'll just show you where I got
it from so it's basically if you go to
DL and it's open tag comm clips one
click yeah whoops so that's where we
distribute this thing and you will
notice that there is uh there's this
toolkit and I already have it installed
of course but it's actually a whole
bunch of plugins it's not just one and
there are different pieces that help you
with different parts of Windows address
just super quickly go through it Windows
Azure sequel database Cupid because that
helps you work with AMQP being AMQP
messaging service on Windows or Java
this is basically all the Java API is
exposed by the blob service storage
service service bus all the all the
services that Windows Azure exposes the
azure Java SDK and that's also installed
of the library in Eclipse control
services that's what I'm going to show
you next which helps you develop which
helps you publish your application into
Windows Azure I will get to that later
as well but for now the only thing
that's gonna matter is really the piece
that's called the Windows Azure access
control services filter so I already
have it installed so the way I start
using it within my java application is
basically by adding a
reference to it bill Taff reference I'm
gonna go to the ad library UI and you
will see all these things sort of that
we've added listed here can enlarge I'm
just gonna start with that and this is
what all the logic is so well I have
this dialog open let me open that me
also open Windows Azure I kind of have
them side by side because the what I'm
going to go through next is setting up
configuring this filter so that the
filters job is basically to redirect
requests that are coming in to your
application server to Windows Azure if
they're not authenticated already and if
they haven't have been authenticated
then the filter passes them on to your
to your application server and that
could be Tomcat jelly GlassFish whatever
so so that's basically what it does so
it configures the that filter and there
are three things basically three
questions that you need to answer for
the filters work show you where to get
the azure service is going to do the
authentication for you party realm
that's that's that's something that I
can already put in here because that's
basically for now as my local host
because I'm going to be testing this
application on my only on my computer
initially later when I deploy it to the
cloud I need to update that with
whatever the the cloud address is going
to be and then I also need a certificate
for this is all secure all encrypted so
I need to provide some certificates here
and I can choose either a certificate
that I already have for my company some
sort of all three Authority issued
certificate or I could generate the self
signed certificate on my own and you can
do it basically on the spot here just
click new and generate that and by the
way this whole demo is completely live
which is basically a session presenters
equivalent of skydiving without a
parachute I think because you know
everything could go wrong even I could
misspell something and find out about it
half an hour from now so let's see so
this lets me saved a certificate into
two files both of which are gonna be
needed one if one of them is the public
certificate file that contains only the
public key and the other one is going to
be the the pfx file which contains both
the public and the private key i and
windows azure needs bow or windows azure
needs the the private key so that's why
we're going to save that one and you're
going to need the public key for let's
make sure I get the right location here
so this is kind of shows you already one
useful utility that you get out of the
plugin that you can generate self-signed
certificates are easy and that just will
generate two files for you and there are
my desktop we'll look at them in a
second but it automatically also puts
that certificate that I generated into
my into my configuration so that we've
already took care of it while we're at
it actually it's also sort of like this
little checkbox this will embed the
certificate into my world file so that I
don't have to worry about deploying it
separately and for demo simplicity I
will turn off the HTTPS connection
requirements of course with the big
warning that you should not do it but
for dev tests you know that's that's
fine so the last question that I have
not yet answered is really the most
important one and that's the one that
tells me okay so where's the ACS servers
where's the azure servers that's going
to do my authentication for you where is
that input so now I need to switch over
to Azure and configure that in the azure
portal so you're gonna have your
subscription you can go to your portal
and basically in your portal you're
going to find you're going to go down to
find a bunch of services here you need
to scroll down now scrolling at this
resolution is a little bit tricky but
let me make sure you can see this active
directory is and within the active
directory what we need is the X access
control namespaces there's a bunch of
other options I won't get into but
access control namespaces the simple
scenario that that we're going to do so
by creating a new access control
namespace what I'm basically creating is
a service within is the service within
Windows Azure that will be servicing my
application that will be servicing the
requests the authentication requests
from my application so actually the
creation of it is a little bit it's
actual a while to create a new ones so
instead of that let me just configure
one that I already have this is one
that's already the empty but at least at
least I can sort of it takes a few
for for for some reason for the service
to be provisioned so here is toriel for
how to provision it it's it's right in
the provisioning UI and the first thing
you're going to do is provision the
identity identity providers so this is
where you'll get a chance to add you
know who are the providers that you want
to support for your application and in
this particular scenario you could add
in addition to Windows Live ID which is
sort of their by default you could add
Google and I'm also going to add Yahoo
and so that's those I just configured my
identity providers next thing I need to
configure my my application so basically
I need to tell the service here's the
application that's going to be consuming
your services so I'm gonna add a new
application just put in a name of any
sort well that's not
enter settings arm the realm so this is
basically distance to match the the
server URL that I put in to the other
dialog so it's as the localhost 8080 and
you do want to make sure that all these
things match word for word character for
character I'm about to enter better put
that slash in there and and I'll zoom in
in a second let me just finish the
typing here and then I'll zoom in so you
can review the whole thing I returned
URL actually maybe I might as well zoom
in Rio so imagine this this the whole
flow what's gonna happen is the request
is coming in the the filter is gonna
catch it and it's going to redirect it
to a sure I was gonna do its thing with
authentication eventually it's going to
come back to you to your application so
this is basically where you say where is
this request coming back to once it's
authenticated so you get to specify
which which application exactly which
web page exactly supposed to be the
landing page for that for that so I'm
going to basically say that it's that is
that application is the application that
I'm that I'm working on here so it's
gonna be localhost 8080 hello you have
one that's where it's gonna be deployed
and it's gonna be the index.jsp file you
can also specify an error URL in case if
something doesn't work but that's that's
optional all the other defaults I would
keep the same sam'l - I mean you get
other options sam'l 2.0 and saml 1.1 is
what we're supporting through the
plug-in or at least what we've tested
all the other options you can basically
leave as is and then so for certificates
I created that certificate remember that
one so I'm gonna use a dedicated
certificate rather than using some
default that Azure gives me so this
basically is the
well how did that happen okay
that's interesting stead of drunk um
okay
so so this is where I get to choose the
certificate that I've created
so again zoom out so this is just a file
selection I'm going to point out that
certificate file that I created and oops
that's what's supposed to be this pfx
file that CR
provide that original password that I
had when I created it and this is almost
almost almost everything so I've just
configured my application that I still
need to configure a couple of other
things Roo groups
so this basically I'm just going to edit
the default rule group what this is I
think you understand what this is once
you see what happens when I click
generate so when I click generate and
yeah I'm using all these all these
identity providers what this basically
says is okay what kinds of information
that is provided by these identity
providers do you wants in your
authentication of in your in your
example token that's going to come with
so these are just things that we know
are exposed by these services and I
would just take all of them and then
deal with whatever whatever but this is
basically how you can identify your
users so presumably somewhere else in
your application you're gonna have your
implementation of your authorization
mechanic not authentication just
authorization which is going to be based
on something some some identifying
properties that you're gonna determine
based on these based on these tokens
based on these claims so um so and this
is all gonna come as an XML blob which
I'm gonna show you in a second once I
get it to work so let's get out of this
save this and we're almost there now one
last thing you know we still haven't
filled out that that that thing here the
endpoint so let me just make sure that I
remembered everything here I believe I
did so if you go to application
integration login pages this is what you
want and this is the application that
I've configured and now is my finally my
login page this is how the filter knows
where to redirect on a phone and
unauthenticated traffic and I think I'm
done
so now let's kill this application kill
Tomcat again just just in case there's
some weird session stuff happening um so
now let me restart this again
and see what happens if I got everything
right so this time if everything worked
I should not be directed to my
application but instead I get directed
through the authentication UI from
Windows Azure this is exactly that thing
and in action right now so now I can
basically log in using any of the
credentials that you know from other
providers for example Yahoo so I'm gonna
log in as a Yahoo user
but
and if this works then I should be
eventually seeing my application yeah so
so here's basically I thought it took me
like I don't know maybe ten minutes a
little bit probably three minutes longer
than it should take you eventually once
you get a hang of it now tell me tell me
how many lines of code did you count me
writing to get authentication
implemented in my application exactly
and that's the point right that's the
point why should you bother now I'm not
saying that I took care of your
authorization logic you still have to
write that you still have to sort of say
okay it's great that your user flew from
Yahoo but what permissions do I give you
that's still your job to do that but all
I get you is basically at least you know
who this person is right now you may be
asking if you're thinking about it
because sort of if you're following this
and you're going to be asking the
question okay so how do I know exactly
how do I get these credentials where's
the code that shows me how I get this
information how do I know what this user
is I mean it's great that Windows Azure
managed to authenticate me how do I know
who this user is so let me show you that
piece of code but actually before I do
that it's also a good time for me to
introduce sort of trying to deploy this
into Windows Azure and the reason I want
to do that is because Eclipse has a bit
of an issue dealing with XML for some
reasons I need to do it a little bit
differently so let me kill this so I'll
show you the piece of code that that
gets the the credentials in a second but
let's first start wrapping this into a
Windows Azure deployment project because
eventually I kind of I'm thinking let me
deploy this Windows Azure I don't have
to I could leave it at this stage and
then just just deploy it on premises or
wherever but I kind of want to start
showing you the next step if you wanted
to deploy the application to Windows
Azure
what would that look like so so far
we've done nothing specific to you as
far as the deployment goes up for
Windows Azure all we did is basically
consume a servers one of the main
services from Windows Azure so now now
I'm gonna start creating a deployment
project that allows me to deploy this
application into Windows Azure
so there's a little button here this
comes from the toolkit creating a new
Windows Azure deployment project this
projects job is to serve as the end
the lobe that will take my package
whatever it is and send it to Azure and
it will have all the configuration
information all the stuff that needs to
be that needs to be taken care of so
I'll just give it some sort of test some
sort of name and it's this next screen
that's that's super interesting so
obviously what you're deploying as a
java application now what we give you an
option to do is specify some sort of JDK
that you want to use and you have a
choice so you can you can use whatever
J's UK's you you want so the way I work
with that is well first of all there are
two scenarios here one is that when I'm
testing on my local machine I'm gonna be
using the Windows Azure emulator the
emulators job is to basically kind of
mostly simulate the conditions that are
gonna exist in the cloud when you deploy
it into Windows Azure it's not a perfect
kind of thing but but it's it's kind of
close enough it's especially good for
validating your deployment logic just
seeing if things work the way the way
you expect them to
so for emulator purposes JDK is on my
machine it does a little bit of auto
described the other auto-discovery this
one is a little bit too old so let me
just pick a new one one that I have and
this is just the Oracle JDK 7 now when
it comes to cloud deployment I have some
options using on my machine just package
it up for me send it to the cloud keep
it in some nice place it will happen
only once it's not like you're gonna be
uploading it every time that you deploy
this application and actually thanks to
our partnership with Oracle that's
supported that's that Oracle will
support that that's it that's a totally
legitimate scenario because of our
partnership with Oracle but as of
literally you know a couple of minutes
or hours ago we also have this other
option that we've announced where you
can deploy that's already available on
Windows Azure kind of saves you time and
it's also relized somebody else is
maintaining that package you don't have
to worry about
you know uploading stuff from your
desktop or from your from your own
computer and the first package that we
have available is from our partner as
all systems it's an implementation of
the open JDK for Windows which didn't
really exist before I mean it was it's
obviously it works on Windows we know
that but but nobody was really
maintaining it
so as all system is basically becoming
the the DES steward of that of that
build and for Windows Azure and we have
a partnership so this is the very first
jdk package of that offering oops
I went a little bit too far we do that
cool
so let me just go back to where I was I
pressed so many escape keys and there's
also the more advanced option if you
already have a JDK that you want to use
you can put it in a storage account but
that's that's a more advanced option so
that's my JDK configuration and yeah I
need to accept the license and then the
next one is the server the application
server the container so I can use all so
first of all if you look at the
drop-down these are the types of
application servers that we actually
test against and we understand their
application deployment logic so that's
why they show up in a drop-down we know
how to recognize them it doesn't mean
that you can't use something else it's
just that I can't help you with that
something else because I don't know how
to deploy into it but these the Eclipse
plug-in has built-in knowledge of how to
deploy applications to these servers how
to package them and all that so I'm
gonna choose well first of all I need to
pick an installation because it's going
to be I need to provide the the
installation of that of that server so I
might as well choose the I got a few
questions about this I might as well
show you how that works
GlassFish so I'm just picking the
installation directory of GlassFish on
my machine the plugin automatically
recognizes that is blast fish so that
means it's the chances are is going to
work just fine
and I'm my server to the storage so that
it's gonna be next time you deploy it
it's going to be deployed directly from
their storage not funeral not from your
local desktop uh and and last I am
finally going to specify the
applications that I'm going to deploy in
this Azure deployment by default which
is actually kind of a useful utility
I'll show you in a second I won't remove
it just to show you what it does but
this is where I want to add my own
application that I've been working on
this this hello Java one application I
can either do it by basically pointing
at a specific war file if I have I build
processes or whatnot or I can just
select it by referencing that prod
specifically so and then the plug-in
will take care of building the right
thing for me so that's the option that
I'm going to be choosing and then it's
going to be sort of rebuilding itself
automatically
and that's basically I also have some
other options in the last screen but for
now I'll I won't talk about it because
it's a little bit more advanced topic
sure so I've done that so the next thing
is really as you can see we created the
deployment project and if you're it's
got a lot of service if you if you're
new to Windows Azure is going to look
like a lot of goo to you just one thing
to look at is if inside of the worker
old folder you're going to see this app
root thingy and eventually you're going
to see your your applications there and
once we start building this project
you're also going to see some some other
things showing up there but that's
basically the bulk this is basically the
payload everything else is the envelope
is everything else is that project that
pushes your thing into Windows Azure and
enables Windows Azure to understand what
to do with it Windows Azure is very
language agnostic actually even though
you know you would feel when those
letters dotnet it's not I mean it's it's
just it's just a virtual machine where
you at the end of the day so arm all
this work just to show you how it works
in the emulator so there is a emulator
button they're running an emulator and
if I haven't made any mistakes this
should start working in a few seconds so
it's kind of building things putting
things together
starting some there's a number of
actually there isn't a single emulator
it's like a couple of emulators that do
different things so you're gonna be
seeing consoles popping up things kind
of getting created this is the best
screen because it shows me that glass
was just gonna work hopefully yeah that
should be okay and this is another piece
of the emulator which shows you sort of
our what's happening so this this when
you see this message that's a pretty
reassuring message especially if you see
it twice in a row it's a little
heartbeat just making sure that things
are properly sort of our functioning let
me make sure a couple of more seconds
that to make sure that it's running cuz
sometimes it it should it will already
all because I'm in control one oh I see
what you mean
okay got it okay so it looks like it's
very my deployment is stable so I'm kind
of happy it just means I haven't made a
mistake
sorry exactly exactly exactly that's the
whole point that if you have multi if
you have a team of developers instead of
each one of them thinking about Oh what
am i deploying they can just focus on
their applications their contributions
and the JDK you can store sort of
globally for everybody for your team and
their server whatever it could be
pre-configured whatever way we want all
we take whatever way you want all you
take is the folder zip it up and push it
push it into a hyzer and put it in a
place from which we can deploy it that's
all we do really so anyway so just to
make sure it sounds like GlassFish is
working so let me make sure and just
just so I don't mess with sessions let
me kill IIE for now because I just don't
know what session is okay so this will
probably last the final then Oh
localhost well first of all just to show
that it's GlassFish here here we go and
my Java hello Java Java one and we're
going through the same process so it
looks like it worked right so um so
that's some data basically shows you
another cool thing in the last in the
last minute even though I decided
GlassFish at the beginning I can change
it later
very
you can go to Windows a few properties
on my on my role it's a role based
deployment and go to the server
configuration and there you will see
that we've got the wrong tab one second
go to the server tab and you will see
that actually I can choose it after the
fact
I can change it after the fact so I can
go to Tomcat for example and you just
switched from GlassFish to Tomcat just
like that okay so yeah</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>