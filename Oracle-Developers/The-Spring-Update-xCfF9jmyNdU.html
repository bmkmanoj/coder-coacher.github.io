<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>The Spring Update | Coder Coacher - Coaching Coders</title><meta content="The Spring Update - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Developers/">Oracle Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>The Spring Update</b></h2><h5 class="post__date">2015-06-08</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/xCfF9jmyNdU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so this is a a Java configuration class
the idea is that this is the same as an
XML file because remember if you think
about it all spring needs when it runs
is to understand what beans you have in
your application what their
relationships to each other are and what
dependencies they have that's all it
doesn't matter how you tell that that
information you can use annotations and
let's bring infer that relationship at
runtime you can use an explicit
configuration class where you have
digital beans described by different
factory methods so each factor method
creates of bean definition the result is
stored in the context and then that's
made available for injection later on of
course you can inject by the ID which in
this case is provided by default by the
method name or you could explicitly
specify the bean ID in the annotation
and so on and actually this is very nice
because you get a nice typed way of
working with these dependencies you can
test that things are going to work out
at compile time as opposed to run time
you can see there's analogues here for a
lot of things you might have done in the
XML so at enable at components can turns
on component scanning relative to the
current class and then below so any
deeper packages will be picked up if
they have ADD controller or at component
or at service we have at in port so you
can import XML documents you can import
the bean definitions from at you know
from XML or from other configuration
classes so this is this tends to be how
I do my demos I just want people to be
familiar with the style before we move
on java 8 is around the corner and i
think it looks well i have you guys
played with it yet the Developer Preview
it's awesome it is really really really
good i'm a i'm excited you know we're
going to finally have java 8 that'll be
around next year what does I mean I
don't know I last I heard it was gonna
be quarter one next year is that's so
true something happened to this project
at this conference where that's not true
the Developer Preview is already out you
can get it now we're going to have
lambdas guys sweet baby Jesus we're
going to have lamb does I've been
waiting so long c++ has lambdas it has
taken a long long time c++ a language
where the committee meets once every
five years to talk and they had lambdas
first you know it's a little
embarrassing cobol has land us just so
we're know there's actually a version of
Kobol with lambdas so it is a long time
coming I'm very happy about that
obviously Java 8 is
new so the IDE support for java 8 at the
moment is a well it's a little
asymmetrical let's play that way the
Java aids support and IntelliJ is
decades ahead of the Eclipse tough at
the moment give it a give it give it a
little bit there's a rumor to support
for java 8 and basic clips next year
june which is to say after the support
has been released that's good obviously
to the spring tool suite which we
provide is a nice open source eclipse
distribution has a beta sort of
preliminary cut of some support then you
can try it in lieu of the new of waiting
for the base stuff in eclipse we're
going to be releasing spring for this
year right so they by the end of this
year you should have a lips I get so
confused about the year sometimes you
guys say 2014 I say 13 who knows wrong
year
there we are so if you're in released by
the end of this year which is good right
it'll be very so it'll be about a year
after the last release 3.2 the
four-point-oh release of course has a
lot of nice features will look at some
of those in this talk and as well as the
hope is to look at some of the other
projects that will leverage spring core
4 and you know move on so I wanted to
mention some of the Java aid stuff first
of all though java features the ability
to do lambdas and method references the
method references i think is a very nice
use case so here I've got a method
private customer map which takes a
result set and an integer and I want to
specify that I want to pass that method
reference in place of the role mapper
that I would normally expect right so
there's normally in this case i would
use query for object and then pass in a
row mapper object but row mapper in the
spring framework is just an interface
with one method this is a so called
functional interface you can with java 8
substitute that interface that anonymous
that that interface for that one method
you can substitute an instance of that
for lambda whose arguments and return
value match the interface method you
understand so this lambda is the same
for java 8 as actually having an
instance of that of that interface which
is great convenient it'll know that this
map method serves the same role as the
map method in the interface it's also
very convenient to be able to just use
Lando's directly so here I've got the
same thing I'm calling the JDBC template
and I'm calling a query for object I
pass in the sequel string and then I've
got an anonymous inline lambda method
right so I'm here saying and by the way
we have type inference in Java 8 as well
so I don't need to specify a result set
resulted or interim rownum java java 8
just knows that that is a substitution
for the interface from this for the
method from this interface and that the
types are inferred right so you get auto
completion everything out of that that's
a really really big deal it's not just
big deal for for the conciseness of our
codes on far more importantly it makes a
java twitty ball right this is very
important I have not been able to do
this before you can actually show useful
code in a tweet but now we can it is
2013 after all
so good stuff and do you see that look
at all those people they were just as
impressed as I was that bad that that
worked you know it's so cool okay we
have good support in Java we have a good
support for a lot of stuff coming in
Java 8 you know the libraries as usual I
won't dwell too much on this but of
course continue our theme of supporting
alternative ways of conveying data or
declaratively binding to data we are
supporting the the new that basically
the Jota daytime specification based on
stephen colbert's Jota time we already
have support in the framework just like
this that mirrors this support for Jota
time itself and for Java util that date
so if you want to declaratively format
dates and declaratively do bean
validation and validation in forms we've
already got support for that that works
you can use Jota time now but we already
have Jace r310 support as well so as
soon as you get this Java 8 and spring
for you have a first-class ride no
matter what you're doing right you can
use these nice standard annotations
standard annotations these kind of
annotations are there going to be placed
at the heart of your code right that's
an important thing to remember spring is
all about keeping itself out of your
code or if we if we do require something
invasive let it be something that is
standard and you expect to be able to
you know identify anywhere right so the
jpa stuff is a great example the j's are
three what is it 301 whatever the bean
validation spec all this stuff is stuff
that you want to have a nice standard
annotation set for so it's very nice to
have this stuff baked into the framework
i baked into the Java language itself
another nice feature in Java 8 the
ability to specify multiple versions of
an annotation which means you can
actually have one to end configurations
for that for that one a little type
which is very convenient I can also do a
version of this where you have at
scheduled and they have an array of
scheduled inside of that I just think
this one's slightly nicer spring for at
a minimum minimum requires java 6 how
many of you guys by show of hands around
java 6 okay right on how many of you are
in java 7 me too and 8 by the way how
many of you guys going to move
immediately to have eight just because I
said so good
really that is so awkward that is so
awkward um of course and actually I
would just move to job eight now it's so
much better it's actually this is the
big one if you have one thing you can
upgrade to dub eight is awesome it's the
biggest JVM improvement since I guess
five and then before that the first one
right it's developer preview right now
but if you can start developing against
it so if you have something that's
supposed to be production ready by a q1
next year you should be in good place
although that's not I shouldn't say that
I should i should offer that with the
qualification that oracle has never
actually delivered it on time ever we
are now two years is already late for
the delivery of this project for reasons
i understand it but it's just you know
taking programs take it with a grain of
salt spring form will continue as always
have a very good backwards compatibility
story we support w/e five and up with
the jpa to feature pack as well up to
optionally so we can support jpa one but
if you have w5 and you want to use jpa
to which is a speck from a later later
release you can do that as well and of
course we have good support for java ee
7 and that support is actually myriad
right so we have the date-time api we
saw JTA 1.2 you know that'll be hooked
into our platform transactionmanager
strategy JMS to finally after 10-plus
years gets a revision and we have good
support for that in spring for bean
validation again that's something we
were there from the beginning right bean
validation is one of the things where
it's at the heart of your code so we
want to be the first to support it we
also support for example jsr 250 the
java extent resource dead resource
annotations and JS r 3 30 the comics
that inject inject annotations so again
if onto dependency injection those
annotations are analogous to the auto
wire and so on this time around we've
actually helped there's a few jrs that
were too important to let sort of to
ignore so the WebSocket Jace are we
actually had a voice in there and the
batch JS r which i think is one of the
best Jace Jace ours ever looks very very
similar to spring batch so if you if you
know how to use bring back you're in a
good place with the the bat shades are I
think it's going to be very nice
this story is not just iv7 and has never
been just ja ve spring is very portable
portable application framework so we
expect a lot of people are going to be
deploying to different environments of
course that works well I have a I find
myself in the weirdest of positions this
week if you guys tried the websphere
liberty profile it's awesome it's
actually really really small and it's
really fast and we actually have the
ability to deploy that on cloud foundry
which is an open-source platform as a
service and I find myself making that
work early this this weekend going yes
like if we could do that anything is
possible you know like that's awesome so
portability is a big deal do you want to
run in websphere weblogic or tom cat or
jboss or whatever that's fine if you
want to run on those containers on the
cloud that's fine if you just want to
run public static void main that's fine
let's see I don't know if you have you
guys tried Cloud Foundry just a sort of
a just curious you get if you get his
get a second it's a great place to run
cloud applications some nice monitoring
and what I was really enamored of was
all the stuff that's built in to support
your application once it's in production
including an easy-to-use new relic
integration this is a great app github
com fort / Cloud Foundry hyphen samples
called spring music if you get a chance
do check that out it demonstrates how to
build apps that work both locally as
well as in production with you know
different environments right and in
particular cloud foundry that project
that demo also uses something called the
spring cloud library which we just
announced ok so the spring cloud API is
a way to ask the environment in which
your application is running for
information about that environment
including what data sources or rabbit it
you know message queues or jameis
brokers or whatever what services are
available to me and I want to be because
I want to be able to get access to that
right again my spring applications is I
needed javac stats equal the data source
it doesn't care if it gets it from a
context like Jane di or if it gets hurt
from the environment like in a cloud
platform if it's just public static void
main and stood up by itself you know
whatever right so this library makes it
easy to consume those services in a
unified way across different clouds I
should say that right now different
clouds at the moment just means cloud
foundry and Heroku but as it's a brand
new project you'll see more support
being folded in eventually right
so let's see where that guy go huh well
quite you let's see I'm sorry okay we
are going to be running very fast today
way too many things to do in very little
time okay so here's I just want to show
you guys this this use case here let's
see cloud config so the idea is we have
a feature in spring called profiles
profiles let you separate the
configuration of different types of
beans for different types of
environments you tag a set of you tag a
configuration class or in XML you can
you can tag a whole stands of beans in
the XML for example and say these beans
should only exist when the profile
described in this at profile annotation
is active yeah so if you're running in
Cloud Foundry by default the cloud
profiles active if you have your own Q&amp;amp;A
profile you have you know josh's you
know sunday morning profile where i'm
trying things a little more aggressively
without worrying about the hangover you
know there's a different offer for that
you can do whatever you want right great
arbitrary profiles to move one
application from dev QA production and
so on it's a very good way to decouple
your application from the infrastructure
it works with right so from exit for
example in this one I can say give me a
reference to the cloud foundry cloud of
the cloud the cloud spring cloud api's
cloud object and then there for example
I can actually configure certain beans
for example here I want to also enable
MongoDB if the MongoDB profiles active
so here I'm saying build a MongoDB
factory using spring data Mongo and
build among with template and so on
right so we can actually conditionally
build all these beans yeah you can
programmatically set it with a dash D
argument or you can just call you can
pass the environment object that you
could you get from the application
context so you can say application
context get environment that set active
profile ok but that environment object
is an instance of configurable
environment so cast it but that's the
way to do it right so you can do it
programmatically before you register the
application context or you can just do
it with dash dr game
or whatever else you want right for web
that XML it scenarios if you are in a
web that except if you're in a struggle
environment in your using web directs ml
there's a web application initializer
call back it's a parameter you can put
in the web that XML for dispatcher
servlet and it'll be invoked when the
applications started and you get a
programmatic hook to insert yourself
into the creation of the application
context before all the beans have been
created but after the dispatcher servlet
has been started up so then you can set
the profile for the web app that way and
you can do it programmatically you can
say hey I detect that i'm running a
websphere go ahead and activate this
profile i detect that i'm running in
cloud fan to activate that profile etc
right so you have a hawk there okay
that's one new project that that was
pretty interesting just want to share it
with you how many guys I've played with
spring data right spring data i think is
a very fascinating option there's a
technology called we have different
bindings we have different API
integrations for different types of no
sequel no sequel n sequel data stores in
practice this means we have
out-of-the-box support for Renison
MongoDB and neo4j and so on there's a
lot of third-party community contributed
to support including for things like
solar and and so on well there's like 20
others I just don't remember them all
these bindings provide for these
different data stores what jdbctemplate
and so on and our support for jdbc
provides for jdbc it's not the same API
across all of course these are different
unique data stores they do they have
their own api's these are optimized for
those AP is the idea is we remove the
boilerplate whenever possible let's see
have you guys seen spring dated
repositories in particular we have a
product called spring technology called
spring data jpa spring dated spring data
in general offers this idea of a of a
repository so here we are this is a
generic repository it's an interface
yeah and the idea is I want to you know
if you if you think about most of what
we do with JP or MongoDB or jump higher
and new 4j or whatever a lot of it is
just mapping back and forth between our
domain model and this back in
persistence here as often as not we you
know move that stuff to a repository
object and we ended up writing all this
boilerplate code stuff you don't really
care about stuff that
as people who have lot lives and
families and things to do we probably
shouldn't be writing think about your
typical you know repository this is a
brain dead simple example suppose I have
a user repository that manages user
objects in my JP a domain model I need
to be able to create read update delete
all that stuff right so of course this
interface that we're extending here has
methods for iterating over all those
different types of entities you know
it's typed to the entity type that you
have and we have methods right these
interface methods are by convention so
here I'm saying find me a user by user
name and then the parameters called user
name or close your eyes guys imagine
what the code for that looks like I'm
sure all of you just have already
figured out oh okay Energy Manager like
you know Craig query and then it's like
select all from users where username
equals username right it's the same
boilerplate brain-dead code that we've
all written a thousand and five times
well there's no need if we can close
your eyes and see what the
implementation looks like probably
something the machine should be doing so
let it this interface gets synthesized
at runtime into an implement
implementation so that method based on
convention will actually work you can
actually inject an instance of user
repository without actually providing
the interface over there without
providing the implementation so that's
pretty cool right so i can say you know
fine bye fine users by first name or
last name or whatever and behind the
scenes it'll translate to the underlying
thing if its sequel it'll do that if
it's MongoDB it'll do that obviously
some things are not the same across all
of them but it's a very powerful way to
get work done right and of course if you
have custom repository methods that you
absolutely cannot do by convention you
have no reason not to insert that there
we even have the spring data rest
project the at rest resource sanitation
transparently exports this repository as
a restful endpoint okay so I have
service methods here let's see I'm gonna
go ahead and launch this guy I have
methods here that I can use to move you
know read update delete query my user
entities well that's stuff that you do
in rest right we're talk about an entity
a noun my user object and I need to be
able to mini played all that stuff
quickly and I'm going to be talking to
JP a well again there's no reason for us
to be writing that code let's let
somebody else do it here we go
whoops run 10 know what you guys can't
see is that my up time is like 20 and
that is running
sorry port 8080 already taken gonna have
a failure there so I'm launching a web
application here you guys can follow
along at home if you like it's at github
com forward slash Josh long ford / these
spring rest stack with hyphens in the
middle the code is just part of this
talk that I gave it as a webinar couple
months ago it has like eight thousand
views if you go to youtube youtube.com
forward slash spring source dev we
introduce basic rest and then how to
introduce hypermedia into that rest
interface and then how to do security
using o off and then you know how to
actually consume that from a client
using spring social and so on so go to
youtube com and look for building
restful services with with spring by
Josh long you'll get all this code and
all that stuff as well but let's take a
look at this now in terms of the JD
swing data jpa stuff so that's my
profile photo for my account right
that's my that's the spring dog he
sleeps on the spring source beanbag he's
a very busy dog you can see if i go to
the restful endpoint here you know that
one's closed off of course because
they're secured but if I got it might go
to user five i can get the information
for five and what you see down there is
i've actually got hypermedia in place as
well hypermedia is this idea that i can
provide in the response metadata about
the navigations possible relative to
this resource so for example i'm looking
at a user data i might want to navigate
customer relation you know that i have
users and they have one to end customers
underneath it it's just a simple one to
NJ PA kind of domain model well here
that customers relationship is modeled
correctly as a sub resource which you
have to Walla so I can actually get
access to all that all the stuff is
being done by spring day today PA and
that interface i have written no code
for this there's no restful resource to
handle all this the only thing that
spring dated jpa did not provide for me
is again the most important part that
that profile photo right you guys can't
see the dog then what's the point the
nice thing about this is because it's
all based on spring data and we've got
those repository in methods as well
let's see wonder if that works
so I can go nothing found right but then
I can do just long and I can find the
guy nothing whatever I forget his name
but the point is this finder method in
my repository is now made available as a
restful endpoint as well this is
actually not a very restful in point at
all so I wouldn't expose that particular
finder method to your clients but can be
useful it can be very useful if you want
to drive html5 screens with iteration
and paging and all that oh when you get
paging to see so I can go to users i can
say five customers page equals one and
size equals whatever one may be oops i
got the secret i got the command I got
the syntax wrong but the point is that
all that is possible and the more you
get that one tool interface it's very
powerful ok any questions on that while
we blaze right through to the next stuff
no what yeah sure sure where I specify
what oh well so I don't ok I remember
the parameter of syntax this in this
interface is provided by spring data it
has support for finding things using a
page full object right so if you inject
this object dynamically in your code in
your spring code you can actually just
call the method directly but from the
rest perspective it also translates into
having the ability to support pages and
paid off sets okay so you get all that
stuff as well as the ability to do crud
stuff and your finder methods all for
free again the best code you the best
code is the code you'll have to write
another project we've got these days is
a we've got a lot of interest in playing
called spring for Hadoop and spring XD
how many of you are using Hadoop out
there Oh guys see this is a dupe is a
new ejb it is absolutely terrible
terrible you know it's a terrifying way
to run a railroad it just works though
unlike that other thing I just mentioned
so people a lot of people are using it
you know and it's kind of a wild wild
west it you guys remember like 10 years
ago me i remember when i first started
more than 10 years ago but ten years in
particular around 2004 2003 if you could
get courts and hibernate and struts or
maybe even spring ABC at that time all
running in the same web application you
were a rock star you know that was hard
that was very hard because either
projects were developed
isolation in absence of other groups so
courts had its own idea of a transaction
ja ve has his own idea of a transaction
Spring has a simplified but again not as
well known idea of a transaction at that
point so who's going to tie this stuff
together well spring came along and it
provided the glue to connect all these
different frameworks in a common
abstraction that's why it's so easy to
plug these things into one app now right
you want hibernating courts and solar
and August of running and saying web
application with spring a problem it's
been done a thousand times you know a
zillion times well Hadoop is like that
again right we have an ecosystem
projects developed by different
companies who have different use cases
that they need to serve and they're
developed without an eye towards
coordination without an eye towards a
common api's or idioms which is okay
it's the best way to iterate but spring
has a very nice story there so we have
our Hadoop distribution piffle Hadoop it
we also support cloud Aaron hortonworks
in all these other all these other great
distributions as well as Apache Hadoop
one point 0 &amp;amp; 2 so you have a very good
abstraction there I would still argue
that this is a little too low level you
know I mean you need to use something
higher so spring heads for example of
support for pig the language the
scripting language that runs on top of a
dupe called pig as well as cascading and
so on we have the pig template which i
think is the funniest spring object
we've got it works at the pig scripting
language just like just like you would
with jdbc template and so on and then
we've also got a new use case right this
is a this is a use case that's been
happening enough three years I think
it's very important stream processing or
data integration is the other way I've
heard it said might minimarket CEO
Michael Driscoll said stream processing
is the most innovative milk of big data
today and of course he didn't know about
what I'm about to introduce because he
hasn't heard about it yet that's okay
it's brand new we have something called
spring xt which we just we've been date
with you know we blogged about it couple
months ago but it's very much early days
the idea is that this is a an int and
offering in that space the ideas we want
to handle there a common use case of
I've got a large data warehouse I've got
a lot of data lot of large data Lake
possibly data living in Hadoop that's a
great story for in or living in HDFS
that's a great story for people who want
to do a batch analytics offline but it
doesn't work for online you know it
doesn't it doesn't work for on-the-fly
online transaction processing so what
you need is
thing that can stand at the edge of the
data lake receive data essex coming in
imagine the Twitter firehose that's a
very common example it's easy to relate
to imagine what it is to react real-time
to every stock ticker change on the
Nasdaq every second every for every
index for every ticker symbol right
imagine what it is to react in real time
to every tweet ever you know that
requires a different kind of story it's
not something you want to just throw
into spring integration although that is
a good start and it's not something that
you're to throw into spring batch I'll
go again it's a good start but you need
something higher something meant to
scale towards your new new levels right
so spring XD builds on both spring
integration in spring batch it provides
support for these kinds of things it
provides us this idea of of a source so
you can read from whatever spring
integration can read from do processing
transformations real time and then it
gets dumped out into what's called a
sink that might be HDFS or might be you
know some message broker or whatever
right so any questions on that when i
get to a demo here my handy dandy hadoop
cluster in a box you guys have yours too
right doesn't everybody maybe let's see
here so the idea is I've got a very
concise little dsl see this here see so
this dsl this is a console to shell you
can log into and you say okay Stream
create a stream called tweets and the
definition is take the sweetest Twitter
search component oopsies Wow
that is the most awesome thing ever how
do you get smaller size I just did the
other way right trying nope whatever you
can the point is he said you can pipe
things together so what you're saying is
I've got a Twitter search component
whenever something comes in pipe to
something else so the actual syntax
might be like so so Twitter search
search pipe HDFS that's the simplest
possible thing ever that's a source and
a sink you could pipe it to other things
as well in the middle it's very much
like we do in the command line right so
these reference these IDs here reference
components described using spring
negation running in spring XTL and the
modules directory so hold on whoops
anyway are so here you go here's the
spring XD distribution which I've just
lost again I've got a modules directory
that contains all the deployed stuff and
for example I've got sources here the
Twitter search source is just a spring
integration in band adapter then looks
up data from you know using Twitter
right in the spring social the support
for that and the spring social template
it all we're saying is when data comes
in from Twitter pass it into spring XD
which will then change it and pass along
to the next next component in this case
we had a listing for HDFS that's a sink
that's where something is written out to
so for example HDFS is right here you
know so here we're saying right out the
data to the hood to HDFS Hadoop cluster
the Hadoop file system and make it
available for analysis so this thing has
been running for a while now whoops go
back sorry I can actually go here Hadoop
FS LS XD
remember this is going over a lot of
data and then go to tweets so I've got
tweed said I've been running for last
you know whatever it's just act crewing
all this stuff for me it's all been
ingested into into a Hadoop it's all
that all those tweets i can now process
i can batch process i can orient i can
do whatever i want but the data i got
from twitter itself right and this is
the way to handle that kind of title
deluge of data um okay yes I actually
searched for so if i do Hadoop FS XD
tweets9 900g and then there's this fancy
command called cat right so I'm actually
going the Jason structures there I can
process at however I'd like it can do
transformations and so on we don't have
time for a lot more but that's just a
very nice technology I thought I
introduced to you guys okay moving on so
Springs rest support and hypermedia
support and security support has gotten
to the point where you know I'm
literally giddy just talking about it
I'm briefly related earlier to this
project that I talked that I built in
for demo couple of months ago it's
called the spring restack in it we
choose how to build basic rest which is
exactly what you get fused jax-rs for
example or spring MVC core and then how
to introduce the design pattern
hypermedia also known as ha d OS which
is something you can't really do that
other guy and then how did introduce
good security with OAuth right so all
off is one of those things where if you
want to do security for restful services
you need you're probably going to use
OAuth it's the most obliquity security
protocol for open web api calls how many
of you have had the dubious pleasure of
using facebook me there's this amazing
thing it's called farmville it's a it's
a engine as I understand it I mean I the
kids play with it I don't know but it's
an engine as I understand that it's it's
it's it's the finest engineering people
the finest engineering we have to offer
for spamming your friends families and
loved ones mercilessly and endlessly
it's a very good spanning machine I've
never seen anything like it it's very
effective so the idea is you go to
Facebook and you say hey I would like to
spam all my friends and family and loved
ones and mercilessly and endlessly
please sign me up farmville please and
what happens is they you're going to the
farm bow
server they then redirect you back to
facebook where facebook asks you hey do
you want give farmville the privilege
and permission to spam your friends
family and loved ones mercilessly and
endlessly and you have to say yes so
you're guilty by the way you're at fault
but but the point is you say that you
then say yes and then it does it it's
amazing that's the power of the open web
you can spam everyone not just the
people you know and love but also your
friends and people around you everyone
farmville guys it's the future that that
flow that dance you do we say hey I want
to let my farm bill API talk to
Facebook's REST API on my behalf and in
order to do so it has to ask me for
permission that's called off and you'll
find that Oh auth is used by the very
large majority of the open web says
service providers out there so for
example spring social provides a client
library for consuming these restful api
s that have all off protection there are
a few of them that you might have heard
of like Twitter Facebook github linkedin
go all of bitbucket flickr you know
Yammer I mean everything you could think
of it's all rest kpi's and Oh off I
remember a long time ago I was promised
that I could just drag and drool these
little egb components onto a pallet and
I somehow get some sort of reusable
marketplace experience of these offline
things I could build it never actually
happened but now it's here we have rest
we have the ability to compose services
from all around yeah so let's see how we
doing all right Gary let's see if I go
to this application the same one is
looking at earlier the application I
have running right now the one that we
looked at with all that we know all this
information is also secured by all so
you saw me enter my username password to
get into the challenge screen but I can
also consume that same application from
an android client which is also in the
github repository there or an iOS client
right so let me sign out here might have
to refresh so here's an iOS client and
again this is a there's my profile
information right the same profile photo
but I'm it's an iOS client it's using
OAuth it's secure right so what you
don't see behind the scenes i'm actually
going to be sort of i can be redirected
this is using a direct user name
password sort of scenario which kind of
negates some of the benefit of auth
the Android one is using more of the
actual flow let me launch that here as
well dooby-doo here we go this is this
by the way is the reason I'm running a
intelligent right now because the end
clip support for Android at the moment
is not the best in the whole world but
it's getting there you know and google
just announced all support for the
android stuff and IntelliJ not terrible
okay so there's my this is this grey bit
here that's an artifact of a the
rendering engine inside the phone
obviously on an actual device you would
never see that gray patch for some
reason it's an emulator and artifact so
here I'm gonna actually login it's going
to approve it's gonna ask me hey do you
want to spam everyone yes right that
very important button I say yes spend
them all spend them all so there's my
dog again you know say map same kind of
flow just android/ios all using rest and
off and this codes all there right we
have a project called spring for Android
which makes this kind of communication
the same as you would do in regular Java
it's just the rest template that you get
from spring core that you can use an
android right so there's a lot of power
there it's a very very good story for
the open web and html5 of course right
any questions on that while we move on I
know there's a lot here guys I'm just
make sure you have make sure you ask
your questions an hour you know hold it
anything Wow even I have questions I was
here I was paying attention okay well
another big thing and I think actually
if you if if I were to call this
anything I you might even say it's like
spring for plus plus or something at
spring for dot next I don't know what
the right way to describe this is this
is the most exciting thing for me this
is the spring boot project we announced
this recently how many of you have heard
of spring boot okay so spring boot is a
brand new frameworks to brand new
technology the idea is that we're going
to take convention over configuration as
far as we can right it's time to get as
dynamic and flexible and adaptive as
possible spring boot embraces the driver
configuration model inside of spring
core and it extends it as far as it can
to simplify development wherever
possible okay so we have two different
sides to it there's the build time stuff
the actuator which is a bunch of
different libraries different maven
maven parent palm archetypes that have
groupings of different kinds of
dependencies are likely to be used
together like spring MVC in spring
security known to work well together so
if want like a full stack they want to
get them all the dependencies all lined
up and everything all that just inherit
from one of these you can override of
course you can extend and exclude we
have tools for example in the groovy
side there's actually a command-line
tool called the spring command line
tools just called spring and it's like
it's a it's a way to run your
applications very conveniently we have a
whole slew of samples you can bootstrap
your productivity with in the runtime we
have these starters right so these
samples and starters are a little
different the samples are just examples
of how to use it the starters are like I
say I'm also is it's like the actuator
stuff with extra libraries to support
development right for for example if I
want Tomcat if I want to run embedded
tomcat for testing I can use a starter
this is all so eminently treatable now
thanks to the world of spring boot this
is actually a groovy class supporting a
controller and it will run you just say
spring and then pass it that class and
it will create the spring MVC endpoint
it will run spring MVC to install the
dispatcher servlet it'll detect the
servlet libraries and the classpath
it'll see that you have not deployed it
inside of tom cat or jelly or whatever
and it'll start up embedded tomcat and
jetty for you so you can develop very
quickly right there's you you focus only
other thing that matters which is the
code from the Java side of course we
have also very very very very very good
support we'll see that now any questions
as we're going yeah hi
no no it's it's it's just bringing four
and better so anything you can do in to
bring it right yep it it can simplify
things for you it actually provides
extra development tools and a
development time as well you can use it
with existing projects so long as you're
on spring for and it'll be Eric right so
let me show you an example here so you
can kind of see what we're doing here I
have a public static void main class
right public static void main we have a
new class called spring application and
we're going to it's going to call a
static method called run it's going to
take a look at this configuration class
which has the at naval auto
configuration this is a version of the
Act configuration annotation but it's
like you know conventional I don't know
it's auto what what this tells spring
boot to do is to look at this code
including that beam for a servlet
context listener and kind of figure out
what I'm trying to do here I've got a
configuration class I've got components
can components can will pick up these
other components including my spring MVC
controller and the controller of course
injects a service nothing special here I
can go down to this method hit run oops
I should disable the other one here
springing to the core stop this guy here
sample Tomcat so this is just public
static void main I'm not doing anything
special here right I don't even have a
server configured right so the ideas
I've got a spring boot running here in
the background it's detecting things on
my environment it sees that I've got JSP
in the classpath so it involves it sets
up JSP support for view is a review
resolution if i have time leaf it'll set
up time leaf templates automatically for
me if I have if I have if I want to do a
data source if I have a place where I'm
injecting a data source in my code but I
haven't actually defined a data source
it'll set up and I have h2 or h2o on the
classpath it'll set up an embedded
database for me to test with and I'm
saying if you do have a data source on
the classpath on the spring context it
won't do that right it's adaptive it
doesn't get your way unless you want it
to so if you have a data source fine
it'll just use that but if you want a
data source and you haven't provided one
you've got h2 why not use be embedded
one
automatically create that instance and
make it available so this code is now
running and one of these very far flung
browsers right so this is a very basic
restful service the main application
again we're just registering a bean the
main controller is this guy right here
just says hello world by delegating to
that service nothing particularly
special but you notice that we're
already up and running right we've
already got all this good stuff that we
can actually work with so let's see here
where's my resources trans upset
awkward sorry i forgot the port of the
other thing um anyway I'll find that
later the point is it also sets up
administration endpoints you can look at
and get dumps of the environment
variables that get dumb to the
performance of the application again
stuff you would want in the admin server
while doing development but you don't
you can only have to have in production
by default it will do things for you
based on convention so if you have a
file called application that properties
it will consult that first commonly
needed configuration items like database
connections and you know JMS queue
connections all that stuff so that's
that by the way the feature the thing
it's doing to support all this is
actually another feature that's in
spring for it's called at at conditional
right so I'm saying look at this and
then go to this guy here and then this
well it's the right way to do here
conditional at conditional is an
annotation it's a it's an annotation
that is not inside of wow I didn't know
Java odd had a conditional why does even
have it what it with really feel
betrayed it's disgusting conditional
apparently were not the only ones that
thought of this so there you go the
annotation you put on a beam definition
just like you would at beam and it's a
specialization of that mechanism i
showed you before it's actually it's a
i'm sorry to general generalization we
showed you at profile which says this
beam lives or dies entirely based on
whether this profiles active well take
it take it a bit further this beam lives
or dies entirely based on whether this
condition rings true okay whether it's
true or not so we provide a condition
class and you can use that to say hey if
there are no data sources already
defined define a data source so i can
define a data source but only if there
are no other data sources defined in my
context or i can define a data source
but only if it's only at the nasdaq is
over 1500 i'm saying whatever right you
can you can plug into anything you want
and that's why that's what we're doing
to support all the status is and we're
saying start up the application startup
tomcat start up a database start up all
these things if they need it you know if
you're running public static void main
and you want to run you're running a
servlet spring MVC application startup
tomcat if you're already running inside
of a sort of the container don't bother
it's already there you know you can
deploy to jboss and jetty and all that
stuff just as easily as before notice
that this is all java configuration
Cindric so we don't have web that xml we
don't have beans xml a persistent on xml
or or I'm dead XML or I need that
nonsense from w/e we certainly don't
have you know you haven't needed the
Java dude you haven't needed the XML
configuration stuff from spring for four
or five years now most projects have a
great Java configuration centric binding
so this is definitely an embracing job
as far as we can there are examples for
supporting spring batch spring negation
we have examples supporting spring MVC
rest stuff we have web development
templates etc lots of out-of-the-box
easy to use scenarios questions on this
guy's anybody yeah hi
Java is including the GBM visual control
yeah spring mechanism so spring the
question is will will spring fall back
to javi's IOC support and answers we
already do we are we natively support
dates are 3 30 which is a dependency
injection abstraction provide javac stop
injected inject javax that injector
named javax tight inject provider etc
this is a very very simple api for doing
java you know for doing the independent
dependency injection it works with the
juice with spring and even CDI right you
know no i mean well you if you want to
run spring the container yeah but if you
want to run out of goon do so whatever
you can if you want yeah i mean you
gotta do you gotta set up the beam
somewhere if you're still using spring
obviously if you're not using spring
then the questions mood right we're not
to fall back exactly batteries included
baby so lots of good stuff okay sorry oh
yeah so there's a korean currency
support will support the new the new
executor api in java 8 we have always
had a very good story there we have the
executor the java that we have the
spring task executor api this is a
generic abstraction that lets you model
thread pools we've had this since before
top of five introduced java dot util
that concurrent executor and executor
service weary based it on top of those
api's when those of a pea has became
available but because we have the right
easy-to-use unified hierarchy you can go
to websphere web you know weblogic or j
box and use their managers to their
pools you can use the new jsr which
supports manage their pulls inside of in
java environment so if you want to use a
work managed api is from like seven
years ago which from another JCP jsr
that never got anywhere you we support a
consistent hierarchy that works across
these different containers we support
the java java SE
executor strategies and we support the
new j's are the Jumbo that you till that
concurrent that manages executor or
whatever yeah sure we support it we like
we have this way you have one API and it
bridges all these different otherwise
completely incompatible api's so you can
use our abstraction the task executor
and you can take advantage of any of
these thread pulls it whether it's on a
ja vu container whether it's public
static void main stand alone using low
level primitives whether it's using if
using grid gain for example that's they
have a test correct implementation but
it's a little different we support a lot
two different things right so yeah we
have a it's really powerful I mean yes
actually thanks for i didn't pay her so
moving on we had a hurry i'm sorry was
just so much to talk about WebSockets is
a very important part of the story we
think it's very important um we of
course will support jsr 356 the web
socket API we already have support for
that if you guys want to wait for Tomcat
8 and whether the jetty 9i guess and you
know glassfish five or four that we you
can use that that's fine it's already
supported in spring for development
previews however our position is that we
want people to get to get be able to do
this you know now as opposed in a couple
years so this stuff is you know it's got
to be production ready now right so one
other thing we've added is a support for
socket fjs which makes it very easy to
fall back for clients that don't support
web sockets IE you know so just terrible
technology that thing so I e is a is the
culprit for all interesting things on
the internet all the inspiration has to
come out of likes fighting IE and making
it work despite it sochta jayus is a
librarian said flavor gets it's a
technology that was actually developed
by a guy at a vmware it's become very
popular since it's two parts it's a
client-side JavaScript library that does
WebSockets on the client if it's
available otherwise it does a long-lived
pulling right let it falls back to it
and another API but it achieves the same
effect and on the server we have a shock
to Jay a server so you can use springs
WebSocket support and set up a sock the
JS endpoint which is a superset of web
socket so you get web sockets + + right
it it also supports his fallback mode
that's nice
part about it so we can transparently
already set it up right now using
proprietary api's that we've abstracted
way of course specific to the Tomcat
implementation which has been there for
years independent of ajs are specific to
the jetty implementation which has been
there for years independent of the jsr
so you get a common a API and that
you're using our API but it works across
all the existing providers that already
support WebSockets albeit not through
the jsr API so you get both right and
because web sockets and even even with
some stock today's web socket is just
just barely slightly better than raw TCP
right you're not really getting a very
convenient way to work so a lot of
people use something called stomp stomp
is a messaging protocol it's like it's
like aim QP but you know for its more
open it's more friendly for html5
environments so we've support for stomp
doing messaging on top of stomp on top
of web sockets okay so i'm going to show
you an example here yeah but you know
you can already get i'm already using
stable milestone three right now and
spring for will be released by the end
of this year so you have the ability to
use that so I I don't know the official
date for a release but it's a I guess i
guess here again said it was a
novemberish so that will be soon sorry
yeah thanks let's see main activity boy
oh boy spring boot sample WebSocket no
that's not the right one but that's good
enough no it's not good enough guys you
deserve better hold on spring WebSocket
portfolio a guy named Ross &amp;amp; Stein chef
who is the coolest cat ever did a blog
on spring denio a few weeks ago that
just blew my mind he has this all really
really well thought out saudia WebSocket
support a there's that funnily guy let's
see women are there's a WebSocket
webinars check out hold on wait for it
wait for it wait for it to tire
gee whiz ah no tsubasa
hey aren't redirect please thank you
check out this blog this is the old blog
but there's a new one as well this
actually introduce all this code that
I'm about to show you it's on github it
has a very deep introduction to the
WebSocket stomp support is an example
the client right so I'm using loops
here's our next to the JavaScript client
you can use if you want using stock
today so this is a this will work with
WebSocket html5 supporting browsers but
it also work with ie which is important
we are taking the types from core spring
integration right and we're actually
making them available inside this we're
looking at we're making them available
inside of spring core so the message
message type and so on the message
channel the message type itself are now
in spring core and we use that as the
interface for web sockets so our
messaging technology is spring
integration it's a great story for doing
messaging that now has been folded back
into the core so it can expect other
parts of the framework like spring data
Redis and spring Jim fire and spring
amqp will probably at one point also
implement those AP is so here's an
example of a WebSocket application
happening in the background right just
lots of stuff happening in background if
I had I EA would show it to you as well
but that works and then here is the code
so that we've introduced a couple things
we've got a regular spring MVC
controller yeah and I'm saying subscribe
to an event whenever somebody makes a
WebSocket request against the forward
slash positions endpoint go ahead and
give me the spring security context so I
can get the principal and authenticate
and just do it you know do whatever you
got to do send back a response if you
want the response in this case is a list
of portfolio positions ok same thing if
all I can say whenever somebody goes to
trade you know call this method right so
you can actually execute at Raymond
somebody posts to that so it's actually
these are all been introduced inside of
the core spring MVC stuff this will be
inside of spring for which is again like
I said available by the end of the year
it's a very nice messaging centric way
of thinking about the stuff you don't
really have to think about the
underlying semantics if you don't want
to and it happens to work very nicely
across different browsers which is far
more than the jsr buys you right now or
even in two years so
all of it absolutely so github.com for
Josh long also get up com fort / spring
hyphen projects and you'll find there
there's a whole bunch of different
samples guys out but if you're
collecting if you're if you're finally
out that's fine there's stickers and
badges and also to great stuff that
tomorrow has promised for people who are
leaving is that true the one and only to
Mao thank you I will take questions
thank you so much guys</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>