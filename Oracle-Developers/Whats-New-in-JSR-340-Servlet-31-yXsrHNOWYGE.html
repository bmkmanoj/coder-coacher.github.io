<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>What’s New in JSR 340, Servlet 3.1? | Coder Coacher - Coaching Coders</title><meta content="What’s New in JSR 340, Servlet 3.1? - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Developers/">Oracle Developers</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>What’s New in JSR 340, Servlet 3.1?</b></h2><h5 class="post__date">2015-06-08</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/yXsrHNOWYGE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">good afternoon everybody my name is
Rajiv more Donnie and I have seen white
Sonia with me and we both worked on the
sublet specification for java ee 7 and
we're going to talk about what's new in
solitary got one and with us we also
have an honorary member of our team yan
Louie who used to work in our team he's
also here he's no longer works at the
Oracle but he's been a key contributor
to a lot of stuff we've done I'm going
to skip over that I'm sure you'll have
seen that more than enough times so
we'll start off with a quick overview of
what we have done on what we focused on
for inside the three dot one and what
the status and other things are so
sublet it out one is final it went final
as part of java ee 7 it's part of the
platform and it is basically an upgrade
from what we did in the subway 320 work
in three rato we focused on big changes
because it was one of our big release
after a long time where the container
had no web container had not moved and
since then in 30 at one time frame what
we've done is we focused on some of the
key areas of excuse me scalability and
ability to support newer technologies in
keeping up with the theme of java ee 7
which is around html5 and web sockets so
we added support in servlet 3 dot one
for the capability of upgrading to a two
protocols such as web socket now the
changes that we made in the framework
are more generic and supports the
genetic upgrade mechanism the WebSocket
implementation that we have leverages
the mechanism and that's the only known
well-known protocol today that leverages
the upgrade mechanism that's specified
in HTTP we also added some security
enhancements and basically focused on
adding support for
things like my defining multiple roles
and things like that which thing I will
cover in more detail so without further
ado we'll start going into the
technology areas and seeing i will do a
an overview of all the areas i will be
here to answer questions i've just been
recovering so i can't really speak a lot
and so shing will be actually doing most
of the talking for for the for the talk
here today okay thank you for Rajiv now
I'm going to go into the detail of the
three King key technology non-blocking
i/o port or upgrade and security
enhancement and then i will go to some
into details of some miscellaneous
feature now first of all take a first
take a look on the non-blocking i/o now
let's take a look on a traditional
example a traditional example for
surfing is you have a two posts and then
you try to read the data using a get
input stream and once you have a get
input stream you can consume the data
from there using the input rip method
now most of the time d is working fine
but in the case that when the i/o is
blocking then your program will be
proctored here and then basically you
were hanging hanging there and then you
away for the further information so we
would like to address this issue in
order to solve this issue we are going
to use the listener approach so we will
add two interfaces 14 read the other of
all right so you have read listener and
also the right listener and then we also
add the corresponding API for the server
input stream and a circular output
stream so that you will work better with
this listen I approach and i will also
like to emphasize that the non-blocking
i/o will only work for to mold one is
acing a synchronized mode which is
defined at you serve a free throw the
other one is upgrade which I'm going to
talk more about
in the second part of the presentation
now let's try to take a look on the rig
listener now the rig listener have three
callback method the first one is on data
available now basically it says say ok
when the data is available I will call
back the listener and then at that time
you can construct it by array and then
you try to read all the data and the
second method is on all data read it
basically notify you ok when all the
data has been read the carpet will be
involved and in this case you can try to
clean up any resources you have a low-k
if necessary and we also have an error
is in case of error this callback will
be involved and you also give you a
chance to do some logging and or some
resources clean up if necessary now this
for the writ listener and similarly
there is a right listener and the right
listener is very similar to the read you
have on right possible and on error so
you have the car back whenever you want
you want to check whether you can write
the data without blocking then you are
the own why possible will be called and
similarly in case of error we'll call it
our own error now haven't is define the
writ listener and the right listener we
also need to add some helper API so that
you can work smoothly in the in the case
of servlet and those helper API is at
the in the surfer input stream and a
server output stream let's take a look
what they are now in the server
inputstream we have the API called is
finish in this case allows you to check
whether the data has been consumed
everything or not so if all the data
have been consumed then this finish is
true otherwise is finished is false now
we also have an API to check whether you
can read the data with our without
blocking and that is what that is
readies is checking so if it's ready
it's true then you can do the normal
reading without blocking now having this
finish and is ready there is one more
ABI
let us associate a server inputstream
with a rig listener and d is the set
listener now notice that it with this
API what it means is forgiven server
inputstream you can only associate at
most one rig listener so you cannot
associate more than one and that's why
we have a setter here and similarly for
the server output stream we have a get
ready method in that case we can let up
to check whether the you can write it up
data without blocking and we can also
associate SAT right listener with the
correspondence of your elbow stream so
you can see this are very similar now
having defined the rewrite listener and
also the corresponding ABI for the
social input stream and the service
output stream we would like to take a
look how is supposed to work now we have
two cases one year's a synchronized the
other one is upgrade so let's talk about
the a single knifers now you have a
tester play and then you would like to
start the acing using request start
async method then you get a acing
contacts and then you will have a server
input stream and then you create your
own read listener and after this you
will associate the input server input
stream with the corresponding great
listener now this the set up user is
very easy now the real stuff is in the
listener so let's take a look how it how
we implement this now before I go into
the details let's try to take a look on
a quiz now you have a writ listener impo
you have three method you are going to
implement so you're on data available on
all data read on an on error now you see
correct how many of you say that is
working rays of your hand so everyone
say that is not working good then why is
not working
hmm get getting close is actually in the
re now if you do i if you right here now
what happened the first time the on data
where Bo is called input is ready right
so you can consume the data but you have
a while loop here so you go back and
read again the second time you read is
the data available or not we don't know
you may already consumed all the data so
in that case this line will be broken
maybe barking the second time so in
order to fix this we have to use a
corresponding API that we defined it in
the server inputstream named it as a
vehicle is ready and this is what we
supposed to do here so you have yes yeah
you can do that but but sometime you may
have more data coming then you like to
have a look to finish all the data but
if you okay now let me let me finish
this now there is a tricky part here now
this on data available will be involved
when you involve under to condition the
copper here the first condition is that
when the first time you associate input
with a writ listener the first time you
associated to it if the data is
available then it would be called on
data available this is the first time
now the second time it will call this
whenever you have input is ready which
is use change from force to true then
this will be call again so it means that
whenever is ready is becomes false to
true and then you should consume all the
data as much as possible the container
will not keep polling you for reading
the data that's why you have a volume
here while loop here okay now having
talked about the writ listener we have a
similar stuff for the right listener
so you have a you have another test
servlet and then you have a start icing
and then you have a server output stream
and then you have a right listener again
you associate the central album stream
with the corresponding right listener
now given what we see in the recent
example it's not surprising that the
right listen example we have the output
is ready check here so again this is a
where the read/write is really similar
in both of these cases now so far we
have talked about the first important
feature is non-blocking i/o the second
important feature is about the protocol
upgrade now let's try to take a look
what it is now protocol upgrade is not
something new it is something in fact
defined it in HTTP 1.1 in the RFC 2616
now the upgrade is connection based what
it means is like this if you have a
connection come in and if you decide to
upgrade it to a different protocol all
the subsequent requests coming from this
connection will be in the new protocol
so this is the particular feature above
the upgrade now there are Vantage's of
having upgrade years you can go start
with HTTP and then you can go into a
different protocol like for example
WebSocket RFC and etc now since
WebSocket is a very popular public oh so
let's try to take a look what they are
now the WebSocket is originally part of
the html5 and yes I ETF standard there
is an RFC 1655 and it consists of two
part the handshake and the data transfer
and for the purpose of our discussion we
are more interested in the handshake
part because they start the handshake
with the HTTP now the power of the web
socket is they have a standard of the
JavaScript API is which is already
implement in
most of the popular Bowser browser and
the websocket by yourself is also
bidirectional and fully do packs so you
can send the data back and for like this
now let's try to take a look on the
example how the handshake look like now
an example will be like this so you will
start with a get request and then you
have a host header and then you have an
upgrade Hatter saying that I want to
upgrade the web socket and then I will
specify a carnation upgrade and then you
have other bunch of web socket specific
header now once you can send a request
to the server now the server can make a
decision to say okay whether I want to
upgrade or not if they desire not to
upgrade then they do not respond in this
way namely they do not respond with a
101 if they say okay I decide to upgrade
it then I would return a header with a
status code 101 switching a protocol and
I would specify upgrade the web socket
and the condition is upgrade so you can
and then you also require other web
socket related hatter now once this HTTP
polo a hand she is start all the
subsequent communication will be in a
different protocol and that is why we
are interested in this in here now
having to see example how the political
upgrade work we would like to see how we
would like to address this in a surface
I ok first we will i will add some api
in the surf at HT survey request and
they will add 2 in the face one is HTTP
upgrade handler the other one is a web
connection and now as i mentioned before
the non broking io can be used with the
upgrade so i'm going to show you how
this to feature are used together now
let's try to take a look on the HTTP up
a handler and a web connection
now it turns out that the HTTP upgrade
handler is is very simple you only have
two methods one years you need the in
need is you pass a web connection object
in and let you to initialize the handler
object and then when the communication
is done then there will be a call back
to give you a chance to clean up the
data then we have to destroy and then
further in need we have a web connection
the web connection is only have to ABI
one you scan input stream the other one
is get output stream now this input
stream and Albert stream allow us to do
the i/o so that they can communicate and
especially the get input stream it
allows us to do the non-blocking read
and D is going to be very important I'm
going to show your example now having
defined upgrade handler and web
connection we need a way to associate
ooh the corresponding server server API
so the way that we do is in the
httpservletrequest we add a api called
upgrade and the upgrade will pass in a
corresponding classes for the handler
and then the container will create a
corresponding HTTP upright handle
instant for you now the advantages of
doing this is you let the container
create the object for you so in that
case the container will do the
appropriate apply CGI injection and etc
so this will help you to write a code
more easily now so far we have defined
the API we have a HTTP upgrade handler
we have a web connection and then we
also have the HD upgrade method in the
HTTP server request now let's take a
look how is supposed to work now you
have HTTP requests come in and then it
will arrive to a servlet or filter and
then they decide to say ok I'm going to
do upgrade then once they do upgrade
they will create HTTP upper air handler
object and then after this they will not
start okay they will let all the filter
is unwind all the H normal HDD process
is done then okay then they will call
the init method at that point the in it
will call only after the all the
standard HTTP processing is done now
once you call the indeed you initialize
the object then you can start to talk in
the upgrade protocol and then when the
upgrade political is done then the
destroy method will be involved in the
handler now let's try to take a look an
example how it work now you have a
servlet and then you have a do get
method and then you have some logic to
say okay I decide to upgrade now if I
decide to upgrade then what you have to
do is to code upgrade method you call
the upgrade method here in passing the
class as a argument then you get an
instant and once you get the instant you
can do some customization if necessary
now let's take a look on how that
handler implement and this is the point
where we have the non-blocking I oh now
you have a echo protocol handler and
then you have an init method and then
and then you have a destroy and for the
init method we have to set up the
corresponding input stream and the
output stream first and then you create
listener and once you create listener
you associate the writ listener in with
the server input stream and it is where
in here we set up the non-blocking io
because it is important to do it this
way because once you let the
corresponding HTTP request done is
already complete and then the upgrade
start now in this case you have to use a
non-blocking i/o if you use rocking io
here then you can only consume the data
once and you
you kind of finish all the the polo you
cannot support a bidirectional protocol
you have to use a non-blocking i/o here
now this is the example number one now
we would like to take a look on a second
example the second example is the
WebSocket implementation and web socket
is a new jsr 356 and the roughly
implementation if you take a look on
this they are using a filter and inside
the filter they're going to upgrade to
it to create the Tyrus HTTP upgrade
handler and then they also will continue
to call it in need and then you will
start the WebSocket protocol and then we
destroy and now having talked about this
i'm going to show you an example how it
looked like it in the real world ok now
now first I'm going to create a protocol
for the experimental purpose I'm going
to have a client the client is going to
send out a ISBN number which I'm going
to verify or they will send a keyword
exceed which means I want to quit the
program and the server is going to we
get the corresponding print out the
corresponding I spin number did they
just send out and then they will print
our true or false if it is true it means
that the number here is valid if it's
for it is not so this is a very simple
public all that iron man two yet astray
the upgrade now let's take a look how it
work now first I will have a test
servlet and then i have a new post
method and then i would ok i'll just say
ok I checked a hatter and then I will
see what is the corresponding upgrade
header if the upgrade header is ISBN ok
then i'm going to set
the census code to be 101 and then I'm
going to add other head the light
upgrade and connection header and then
next step yes i'm going to construct
area ISBN HTTP upgrade handle instant so
I call the request the upgrade API with
the corresponding classes as argument
now once you create a handler you can
actually customize the attribute in the
handler so in this case I have a debug
threat in in the handle i just set the
debug for equal to true now once you set
up this in the to post the next thing we
will take a look is on the handler let's
take a look on the handle now the
handler is have two methods one is
indeed the other one is that destroy
okay and then you can see I have the
debunk Medford here now let's take a
look on this a handler now first of all
as I mentioned before if you have you
let the container to create a
corresponding object so the container is
going to help you populate all the CDI
stuff and in this case the HTTP upgrade
handler i will use a CDI to inject a
validator here and this will be done
about the container and then now and
then we'll have the init method the init
method i will pass in a web connection
and then inside the and then inside any
method i found the actually okay we can
actually do in the jndi look up and this
is just for testing purpose and here you
can i can create software inputstream
create a get a surfer input stream and
then i will create read listener and
then i will associate a real listener
with with the server input stream now
having defined the upgrade handler we
are going to take a look how the writ
listener is actually look like
and it turns out that the route listener
is something actually look very similar
to the cross morning normal non-blocking
i/o code so you have a constructor and
you have a on data available method you
have a while loop and then you have an
input is ready and this is you have the
check before you try to consume the data
and then these the rats is just the
normal code for reading the data so I'm
not going into the detail how they pass
the protocol and finally I have an ISBN
valid data object which is an
application scope and there is a CDI
object and I have implement to matter
what it is to validate this one is the
in I spend 10 and the other one time as
me and 13 so I'm not going to in the
detail about this too now let's try to
go back to our Peter presentation
now so far we have talked about two
important feature one is non-blocking
i/o the other one is what paducah
upgrade now what is the third one
security good now let's try to take a
look on the security now the first issue
that we were like we have we solved is
about the session fixation attack the
attack is like this someone a hacker
will send you an email and the email
will contain a URL of a bang say for
example and then do you are actually
they have a section ID hittin there you
can see here they put a second ID here
now what is so special about this now if
a people send you an email with like a
URL like this you click and then they
tried to trick you to to click on the
URL and then you log in the
corresponding a bang and then you try to
try to verify something then at the same
time since he sent you the URL it means
that he also had this it means that at
the same time while he is locking in the
hacker at the same time can log in the
same page and since you already login he
keep the whole of your section he can
actually it browse your brain bank
account or you can do a transfer if
necessary so this type of security
attack is called section physician
attack now p for sofa 31 different
vendor tried to solve this problem using
proprietary API the way that they try to
solve it is the change assessing ID on
authentication so what it means is even
the you the hacker send you the
corresponding URL here but one is a lot
in the corresponding section ID will be
changed then in that case he will not be
able to keep a whole of your section
right now now the question is like this
we do not have a popper ap either change
the section ID in South Africa oh so
what people meant that try to do is they
will have their own API to achieve this
purpose now this is good in most cases
but if you want to implement an odd
module like a 196 module you want to
provide a portable way to achieve this
then one way to do it is you have to get
the corresponding section object and
then you get all the content out and
then you expire the section and then you
create a new one and then you repopulate
this and this look t-this and sometimes
they will generate undesirable effect
because you may have corresponding HTTP
a section attribute listener if you we
populate the attribute back then the
listener will divide the given again so
in order to solve this problem we are
going to provide a popper API to do the
change section ID and the API is in the
HD DVD software request so you just now
call the change section ID then you can
get changed section ID in the given
section now having to change section ID
we also add one more thing is a HTTP
section ID listener now in this case we
allowed you to register a listener in
the system so that when the section ID
is changed you will be notified now
thing is important because in case you
are trying to implement a system they
have a che then if the the ID most
hopper will corresponding to the key in
the in the system now if you change the
primary key of the storage then you
better let your system know so that you
would do a probably adjustment and
that's why we need the HTT DV section ID
listener here and they have one method
concession ID change and as before you
have a HTTP section event and then you
have also passed in the old section ID
now this is a first security enhancement
for the section fixation attack now the
second
the enhancement is about of
authorization now let's take a look what
hap what we have here suppose web
through user LS Bob and Carol and then
they are in the group manager staff and
contractor and then the manager is
mapped to the row and mean and the staff
is mapped to the road staff and then you
have to URL one is food the other one is
bar and for full your associate security
constraint with the row names star and
then the other one is you have a slash
bar you associate with a security row
name there is a mean now in case of
errors no doubt can ESS foo yes Kenny SS
bar yes how about Bob can you assess foo
yes can you assess bar no good so far so
good how about Carol can you assess bar
no it's not a mean can you assess fool
yes maybe okay it turns out these a
tricky question here now because what is
the meaning of star here hmm anything
zero or more character we are not
talking about regular expression here it
turns out that it cannot SS the fool
Carol cannot access the full why because
it star mean any defined role it's not a
perjury now you go back to this type at
Abel here thus Cairo has any defined a
row no so Carol that is that at the
shoes that despite the star canoeing
here no so the answer is denied
but then how can we set our security
constraints so that it will work for any
authenticated user even though without a
row assign it turns out we need to add
something new and this is what we do we
will have another special role called
double star and the double star mean any
authenticated user now then if you want
to achieve what we try to do is ok you
want the / food is actually let any
authenticated user to get in the way
that you do is you have to use a surface
security and notation and then your HTTP
constraining and then you put a row
allow double star here and if you like
you can of course use XML but again you
need to put a double star here okay so
so far so good now this is a second
security feature now the third one is
hmm Dean I uncover HTTP method now if
you look at the name most popular you
already know what it means it basically
say that okay if you haven't covered the
HTTP method you with this ailment you're
going to be nine now let's take a look
how this is going to help us now we have
example so you have a web dot XML your
corresponding security con string and
then you set up the URL pattern / start
and then you have a cap method and then
you specify okay the second string is
for ruining manager now this is secure
how many of you is a secure race of your
hand so everyone see it's not secure
good why why it's not secure good
because the security constraints they
were only forget you do not protect the
post and you do not put any other method
in fair how many HTTP method can we have
46 it should be now if you look after
normal HTTP I think you only have a
bunch of it but if you look at the web
tell how many method there are there
they are much more so in this case if
you better not try to list them every
one by one you're going to miss it so
there are two way to do it one way is
you use a something go HTTP method
omission Edmund you define security
constraint with an omission Edmund
basically say that for all the method
except this method you're going to do
this now this is ok now but in imagine
the situation if you are in the case of
a servlet freethought Oh application you
have read fragment and for niche-y
fragment you're going to have one ref
ramen dot XML and they're going to have
a security constraint so in this case
you are going to go through all the
referent minh and the web.xml and you
try to investigate all the security
constraint and then you have to define
all the HTTP method omission security
constraint and that is a lot so in 73
dot 1 we provide easier way to do it is
you can just put a denied and comfort
HTTP method here now once you put a
method here
admin here what did this mean it means
that all the method that you do not
define a security on string is going to
deny and this is going to save you a lot
of work you don't need to go through all
the security con string and find out
which one you haven't covered just put
an element in the top in the web that
XML then it's done so this is the third
security feature that we have had and
then the next security feature that we
add is a actually is the cavitation is
about the run nest now the run s is I
think it's defined be folders of the 30
so i think it's 225 i remember i saw i
saw it before now the runners will be
basically say that if you space either
certified the run s row manager and if
you try to start from the server you try
to invoke ejb then you will become a
manager role now the Specht specify how
we work for the normal HTTP request but
respect do not say how about you need
and destroy method now it turns out that
it is important for the server to have
the run as well also apply to the in it
and destroy because the servlet most of
the cases or in some cases you may like
to do some administration function so in
this case in the method you actually you
need to create some and beam and the
destroy method you are going to destroy
some ambien and in that case you do need
the special role in order to achieve
this and that's why we have the we are
careful okay the runners will also akan
the Indian the destroy now so far we
have so many security feature I'm going
to add one more now this one is very
interesting this one first of all is in
the java ee 7 but it is not in the
surface we thought one so this is
defined in the strategy seven so that
will cover the whole platform now
is it is now this is actually like this
you have turn on the security manager
then you have to allow the permission
you have the chair now in the past you
will have a server and the server will
have a server policy you're going to
define all the policies there and you
have to hang craft the policy explicitly
what to do in a central high praise now
in the java ee 7 we defined a new way to
do it is per application now is in the
metal in you have a permission dot XML
and and then you put the corresponding
permission you need in the permission
XML and then you bundle it inside jar or
the wall and then you can deploy it and
then the corresponding permission will
be up high for the corresponding
application now since this is in a java
ee 7 i'm going to let you to read the
detail in the java year span now so far
we have talked about non-blocking i/o
political upgrade and security now i'm
going to talk about the miscellaneous
topic now in server 320 we have to ABI
one is called reset and basically it
allows you to clear all the data in the
buffer and also clear all the status quo
and the header just reset everything and
then there's another API called set
character encoding so you allow you to
set the character encoding you use but
no remember you once you set the
character encoding actually there is
also a hatter in the HTTP now with this
understanding i would like to give you a
quiz what wiII happen here now you have
a test server you have HTTP and then you
do get and then you try to say setec on
the type to it has HTML and then you set
the character encoding to the iso a fine
i won and then ok i'm going to get a
writer and then i'm going to do
something
and then after a while I say okay I
found something wrong I decide to reset
once I've reset i clear the header so I
created a hot content type I'm going to
set the content type to be taxed plane
and then i'm going to set the camera
including bisous carica including it's
also part of the HTTP header I said to
be big five and then okay at the end I
say okay I decide to get output stream
and then I try to print done now you see
will be done why mmm not with is related
to the hatter yes it's related to the
happen yes good you get the writer here
you cannot get the output stream that is
problem number two but there is one more
problem here okay it turns out the SEC
character encoding we have no affair at
this point why because if you look at a
javadoc in the 730 you will notice that
once you get the writer if you try to
set the character encoding it will have
no effect so you can only set the
character and coding before you try to
get the writer you once you get it it's
too late you cannot change it and of
course there's a bigger problem as
mentioned by one of you is you get the
writer you cannot get the output stream
again you get a illegal stay exception
so in order to solve this problem we
have terrified this insert of three dot
one now the clarification basically is
to say that the recent method not only
create the HT
DB Heather's status code and the data in
the buffer it also clear the stay of the
GATT server output stream and the get
writer so terrified this so in this case
you can you can reset and do everything
again now given the information here
let's try to take a look on the example
again now with this with the server 301
the example is actually working you have
a sec character encoding to big five now
is working because once you call the
reset you already clear the stay whether
you get the writer or not so you can set
the character and coding again and since
you create this state you can actually
get the output string and then you print
them Oh in that case then is too late if
they only the fresh you can at that
point you cannot can people you at that
point you cannot call reset yeah yes
you yeah I believe you get an exception
when you try to reset when you've
already Flash content the behavior is
undefined if in this case if you have a
get writer and then you call wrist you
call reset and then you get an output
stream and then you try to reduce both
of them then the behavior is undefined
if you do not call the cable stream I
think once you call the reset the specs
say that the behavior of using a
previous object is undefined
okay now having said this i'm going to
into other details of the miscellaneous
feature is about the same redirect now
for the cemetery most of us may have
must have used it before you have you
can redirect or a tsp or you can retire
with relative to contact route or you
can redirect with absolute URL now in
survey three dot one we add a fee which
feature you can redirect to something
called where the typical URL what it
means is like this you have a double
slash and then you have basically the
remaining of the URL now in this case in
what does this mean it means that if the
request is come with HTTP then this one
will be HTTP if your request originally
is HTTPS then this one will be HTTPS so
that's why they call it what a typical
URL and if you look at the corresponding
RFC they actually have a net and then
the name they call it network path
reference now another clarification we
that we have is for the multi-part so
you you have a bi-week arif I that if
you don't have a multi-part
configuration set and you try to get the
part and get parts then you throw the
lyrical stay exception and also we add
another epi in the inner part is to
allow you to get the submitted file name
so if you try to have a form you try to
upload a file when you send the because
we cross across the file name is
actually in the header now we have the
API you can actually get a header from
there
and then we also have a carer vacation
about the server container initializer
now first of all we care Phi that these
independent of the metadata complete
because that metadata complete is for
the deployment descriptor information
and the subject container initializer is
it's not about that and the second is
this servlet container initial object is
going to be / instant for each
application so you are not going to have
a steady instance serving around the
whole server and then other current
vacation is ok you we add the generic
further its wrapper method and also the
value for the handles type and then
finally we add three more method the
first one is get virtual server name in
the server context these requests from
the from the mo for the GSR 196 I think
that they when they try to register
security provider they would like to
have an API in a circle content so that
they can get the corresponding virtues
of a name and the other two method that
we edges a gas setter for the content
length which is a long and finally i'm
going to show you the resources slide
and if you are interested in the spec
and a java talk you can go to the gcp
website or you can go to the server
cache specter java.net and if you're
more interested in the actual
implementation you can try out then you
can go to the cast fish touch off a
dotnet and then you can send email to us
through the web tier at carthage
touching photo net and from time to time
i will try to rise on Brock to talk
about the surface stuff and if your
interest you can also try to read this
Brock there ok
so any questions
yes is there a race condition in the
asynchronous read between calling is
ready and exiting out of the callback
and then getting I'd have to sit and
think about it and draw diagrams but it
seems like there might be a race
condition in there
the on data available is in work is
invoked first time without is ready
being called but subsequently on data
available is only called after you call
is ready so you call is ready then it
effectively sets the handler back and
then invokes it when the data becomes
available at that point yes yes and that
is ready and it's true I consume some
bites there's no longer true yes and
then it gets set again and then I write
crappy code and I read some more bites
and then I return you return from yeah
whether you haven't read all your data
then at that point and it's really okay
then then you're fine yeah you've
already call it is ready sir on Dale
available was called back and then you
got going and if you do run into
something let us know it may recur if it
requires more clarification in the spec
would be excuse me more than happy to
address it in either a maintenance or or
you know in the subsequent releases that
happen and it could be just be a problem
with the implementation it may be
clearly enough in the spec and not later
and not okay any questions
I think we're done then thank you thank
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>