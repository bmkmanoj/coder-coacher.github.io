<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Introduction to Apache jclouds | Coder Coacher - Coaching Coders</title><meta content="Introduction to Apache jclouds - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Developers/">Oracle Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Introduction to Apache jclouds</b></h2><h5 class="post__date">2015-06-02</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/lyWURqcz8sU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">thank you so much for sharing your
dinner hour with me I hope you're not
too hungry and race off for a bite to
eat and also I would like to point out
that I've grown a tail I'm actually
wired to this thing i'm bound to trip
over it at some point or another so
please laugh along with me when I do yes
thank you hi there my name is Everett
taves I'm a developer advocate at
Rackspace in our developer experience
team and I get the question so often you
know what the heck does a developer
advocate do like every time I say oh I'm
a developer advocate that I I gotta you
know I see the critical look I'm like
yes I you don't know what I do so I do
like to spend a minute or two kind of
just mentioning what it is I do at the
start of the presentation so first and
foremost I am a developer I write code
and it kind of varies from week to week
month to month sometimes I'm writing
code for twenty percent of my time
sometimes it's eighty percent of the
time and I'm a project management
committee member and committer on
project known as Apache Jay clouds and
we're going to dive really deep into
this during the presentation the
advocate peace so this is the guy you
see here before you today doing the song
and dance he's the guy who goes out to
conferences and user groups meetups
wherever developers are to reach out to
people and advocate for our technologies
but not only do our do I advocate for
our technologies like you know Jay
clouds and Rackspace and OpenStack and
all of this stuff I also advocate for
you our users and our people who are
considering being our users if there are
problems with our technologies with our
platforms I really do want to hear about
them no matter how you term it you can
just say oh it sucks I might ask you
some questions about it but the point is
that I want our stuff to be better for
you I want you to have a better
developer experience on our platforms
and this is me giving a presentation
queue right now in this room
this is what the advocate person does
okay and in my time at a previous job in
a previous life I did a fair amount of
operations I actually helped build the
first openstack cloud in Canada with one
regional in Alberta and one region in
Quebec they were connected via
high-speed research network and I
actually recently learned that this was
not only the the first openstack cloud
in Canada this was the first openstack
cloud outside of NASA told to me by that
team who built the Nova code at NASA so
to that and I helped author the
OpenStack operations guide this kind of
a neat story here this was a book that
we wrote in actually five days during a
book sprint and we edited it down and
O'Reilly took notice and they edited it
down some more so hopefully it makes
some sort of sense and they produced a
dead tree version of it which you can I
certainly encourage you to go and buy I
don't see a dime of it or anything like
that but you can also download it from
this URL that you can barely see at the
bottom here these slides will be
available later on on the site okay so
for the purposes of this presentation
you know what flavor of cloud are we
talking about there's there's so many
different flavors there's a lot of
different definitions to what the cloud
is so let's just be clear on exactly
what it is we're talking about we're
talking about infrastructure as a
service when it comes to j clouds it's a
multi cloud toolkit for
infrastructure-as-a-service clouds or
cloud providers sometimes I'll just see
providers whether it's public private
clouds or public clouds whether it's a
private cloud you're running in your own
data center or perhaps in somebody
else's data center or it's a great big
public cloud what have you it's still
infrastructure as a service
and here's just kind of a the standard
graph showing you when it comes to
adopting cloud what exactly it is you're
responsible for and what we're talking
about here the infrastructure as a
service is over on the left-hand side
these two left-hand columns the private
cloud is really kind of you're managing
everything but you have complete and
full control the infrastructure as a
service column here that's more like
public cloud where you have a heck of a
lot of control but you don't have to
worry about the bare metal and you know
where your organization where your
company belongs in the cloud on this
thing it kind of varies and you know
whether you want to move to the right or
move to the left is highly dependent on
your use case and the cost can vary but
the bottom line is that we're dealing
with infrastructure with an API with an
application programming interface so I'm
able to work with cloud resources by
making an HTTP request out to some
service provider some cloud provider and
I get a response back telling me that
it's creating or deleting or updating
some resource whether it's a virtual
machine also known as a server or
instance or node it goes by many names
many synonyms or it's block storage or
it's a network interface or it's an IP
address all these kinds of different
little resources that you can work with
that I'm really at this point I'm
considering this stuff the fundamental
building blocks of computing we seem to
have kind of moved up an abstraction
layer we're no longer talking about CPUs
and RAM and so much we're talking about
VMs and block storage and objects and
how we stitch these things together to
build distributed systems so multi-cloud
as I mentioned before Jay clouds is a
multi cloud toolkit so what is that what
does that really mean it's this notion
that your application should have some
kind of portability to it that you
should be able to
pick it up and move from one provider to
another that you can actually take your
entire application stack and move it
over to another provider it's not an
easy thing to do and really what would
you even want to consider doing it what
would be what would be the point what
would be the purpose so one really great
use case is disaster recovery a cloud
provider that you're hosted with that
you have you're running your entire
business own suffers some sort of
disaster whether it's in just one region
or across their entire cloud you may
need to pick up your application and
move it to a different cloud privacy
implications this has come to the
forefront and a lot of cases since
certain revelations shall I say and this
is the kind of case where you know if if
certain companies or organizations are
in a public cloud they may actually want
to they meant no longer be comfortable
with with the privacy policies in a
particular cloud they want to maybe
bring it back in home into their own
data center and create their own private
cloud within their data center and so
they'll need to be able to pick up their
application and move it into their
private cloud costs this is a really
complicated one there's a lot of good
reasons to move to a public cloud in
terms of cost especially if you're
starting out I mean if you're starting
out public cloud is is definitely the
way to go it's it's such a low barrier
to entry and it's so cheap to get
started but as you grow to a certain
point and you know considering a whole
lot of different factors it might
actually start to make more sense to
have your own private cloud and then
move stuff back in-house it's it's a
complicated set of things performance if
the provider you're working with doesn't
meet your performance specifications you
might have to pick your application up
and move it somewhere else that meets
your performance requirements if you're
not getting the the support you need
from a particular cloud provider you've
grown to a certain point your business
has grown to a certain point where you
need more from your cloud provider you
need help with actually grow
doing your application you need an
operation support team from your cloud
provider to actually help you grow your
application you might need to move to a
different provider pick your application
up and move to a provider who can
provide this kind of support then
there's this notion of hybrid cloud that
gets thrown around an awful lot to me it
means that balance between or using both
private and public clouds this notion
that you can own your base level of
compute say you have a certain amount of
compute that you need you can keep ten
virtual machines or let's scale it up a
bit let's say you can keep a thousand
virtual machines busy all the time so it
might make a lot more sense to actually
own that in a private cloud but if you
need to do analytics once a day or once
a week you might want to burst out into
a public cloud and use those resources
just to do your analytics and then shut
it down and bring the data back into
your private cloud you certainly don't
want all your eggs in one basket as
never a good idea because if you know
any one of those things that I mentioned
before kind of goes too far in one
direction a direction that you don't
care for well then you're you're tied
too closely to your cloud provider and
and certainly is there's the case that
one-size-fits-all does not fit all I
should say when it comes to cloud
providers you know a lot of the cloud
providers do look very similar in some
terms but you may have certain
requirements for your use case for your
infrastructure where it makes more sense
to choose one provider over another and
this is really kind of the end point
here the whole point of considering a
multi cloud strategy for your company or
organization and it's the kind of thing
we've had beaten into us you know right
from comp sci 101 or business 101
wherever it is you're coming from you
want to avoid lock in so you're not tied
down to one particular provider
hence Jay clouds and I'll introduce our
lovely friend and open source project
apache Jay clouds so here's a whole
bunch of words and I would actually ask
you to take a moment and read these
words because I helped write them and
they actually mean something so this is
the J clouds mission statement and as I
mentioned I helped write it we kind of
refreshed it not so long ago when we
redesigned our website and our
documentation and let's kind of tease it
apart and actually have it mean
something because if your mission
statement doesn't mean something then
what's the point open source so it's
pretty easy to open source something you
open up the source you put it on github
you put it on bitbucket you put it on
wherever and oh the source is now open
doesn't really make a big deal Jay
clouds wasn't always at Apache it was
just on github before and then you know
we decided as a group and the founder
decided that oh you know it's time to
kind of let's let's really open this up
to a much broader audience and so let's
really open source it in that we now
have a very open community we have open
discussions everything happens on a
development mailing list it's not
directed by any one company and it's
going to be around for a very very very
long time because we're under the Apache
umbrella it is multi-cloud I kind of
listed off quite a bit of that before
toolkit so why toolkit why not just
library or language binding or rapper or
what have you so it actually includes
more than just a language binding for
working with infrastructures of service
ap is there's a handful of other things
in there as well it includes closure
bindings so it includes another
programming language binding right
within J clouds it includes a
command-line interface
it includes for working with osgi stuff
via patchy krapf I believe and so
there's there's these handful of other
things that come along with J clouds you
can even work with chef quite easily
with J clouds there's a way for you to
bootstrap your instances and immediately
install chef onto them and start working
with chef so it's really more of a tool
kit that you can use to start working in
the cloud to get you going a bit quicker
and more efficiently of course it runs
on the Java platform it's on the JVM so
it's working with all the GBM based
languages closure I mentioned already it
has language bindings for that and it
works with groovy and skala as well we
have a number of users who use it with
the Play Framework portable okay so
what's this portability bit well this
kind of ties into the multi-cloud nature
of j clouds that you can write portable
code to j clouds and it's going to work
the same across all of the supported
cloud providers and i'm going to dig a
lot deeper into that later on when i
talk about some of the concepts behind
Jay clouds but then you get full control
so if your portable what do you need
with full control what does that even
really mean well when it comes to cloud
providers not all cloud providers are
created equal there's a lot of common
things across a lot of cloud providers
being able to spin up virtual machines
for instance practically every cloud
provider supports that being able to
store objects so many cloud providers
support that but then there's stuff that
isn't quite so common DNS not every
cloud provider does DNS not every cloud
provider does block storage so when
you're working with J clouds you don't
necessarily have to adhere strictly to
only using those common features those
common
portable features across all clouds if
there's something specific that you need
to use in a particular cloud you can use
it take advantage of some particular
feature on a particular cloud so it's
really about giving you the freedom to
do whatever it is you need to do in the
cloud in your job applications or
closure groovy Scala what have you and
not tying you down to only using you
know a specific set of features in the
cloud it really boils down to being able
to work for your use case we don't want
to dictate how you use the cloud if it
works for you in this portable nature
which I'll get into great but if you
need to dive deep on a particular cloud
and take advantage of some features your
code mutt might not be as portable at
that point but that's okay you might you
know have to do a rewrite to using
another provider code and Jay clouds
later on but it's still you're still in
Jay crowds and that transition is a
whole lot easier let's take a quick look
at a user application somebody who's
actually using Jay clouds rather
effectively there's another Apache
project known as Stratus and blah you
know here's their they're layered
architecture diagram we're not going to
worry about all of it we're going to
worry about this piece at the bottom so
at this layer here is Jay clouds and
this is what enables Stratus which is
actually a platform as a service it's
this kind of service that allows you to
write your code just application code
strip the application code no kind of
infrastructure bits and pieces strictly
application code and deploy it across a
lot of different infrastructure as a
service providers a lot of different
cloud providers and it's j clouds that
enables them to be able to run across
many different infrastructure as a
service providers so they've layered
platform as a service on top of j clouds
are able to leverage many different
clouds
okay so I don't want to get too far
before I start discussing some code and
I don't want to discuss code without
tying it to some kind of deeper concepts
in j cloud j clouds i find it really
useful to show the kind of deeper design
thinking behind the creation of j clouds
and and how you work with it because
it's so easy to just dive directly into
the code and not really understand
what's going on behind the scenes and
the thinking that's gone into it true
opens car we found ray on OpenStack mix
of workmanship how this is going
okay so you're you're on openshift right
now and it sounds like you want to move
to a different path is that what I'm
hearing okay so okay you're moving to
OpenStack you're on openshift and you're
moving to OpenStack those are those are
all good things those are all good
technologies yay OpenStack certainly
that that's more on the platform as a
service arena and what Jay clouds works
with here is infrastructure as a service
now estratto happens to be another
example of a platform as a service and
I'm sorry but I can go into I can't
answer that question and I can go deep
on it but it's kind of taking us off
topic at the moment so maybe if you want
to stop by afterwards we can discuss it
Thanks okay so tying concepts to code so
the first concept I want to get to is
that of an API an application
programming interface so this is
something that Jay clouds talks to it is
a HTTP API so it's the kinda it's a web
service you call over the internet and
you're making an HTTP called you're
using that protocol to talk to this API
and it's really made up of resources the
the domain objects that you're actually
working with whether it's a server
virtual machine or an object an object
storage there's the actual web service
call you'll make the actual web service
call to an API and then there is a set
of defaults around you know talking to a
particular API so there's you know open
source api's there's proprietary api's
and they need to be configured sometimes
with kind of a sane set of defaults so
some code
okay so here we're talking to the Nova
API which is the virtual machine API in
OpenStack first I want to point out this
context thing so every time you go
basically where every piece of Jay
clouds code starts is with a context
because you need to pass in a handful of
things that you're going to need to talk
to every single API to make every single
call and you carry this context around
with you wherever you go just so you
don't have to repeat yourself time and
time again when you're actually making a
call now in Jay clouds we have this
notion of top level API and then there's
some second level api's resource api's
because a lot of these api's are
actually really really big the Nova API
and OpenStack is huge there's maybe even
almost a hundred calls that you can make
to the Nova API in OpenStack and having
that in one single class file and one
single interface I should say it would
be bananas you wouldn't know what this
thing does what it looks like what it
can do for you would just be a nightmare
to work with so we have this top level
API for example the Nova API and we
split it out into these resource AP is
so you're working with servers or you're
working with floating eye peas or you're
working with volumes etc etc etc just to
make the interface signatures saying and
here's how you specify the defaults you
just pass in a string and J clouds is
going to go look up the defaults for
working with the OpenStack Nova API then
you need to pass in your credentials
your username and password you're
authenticating yourself you have to
specify an endpoint because we're just
working with vanilla OpenStack here this
could be deployed in your data center
this can be deployed and somebody else's
data center it could be anywhere really
you have to say this is where this thing
lives and so this is its endpoint this
is where all of your calls start
and this is the thing you're going to
authenticate to and then you go ahead
and build that API so this is actually
the Builder pattern in Java and we go
ahead and we get our API so now here's
that resource API that I'm talking about
on line 5 we're going to start working
with servers because we want to create a
virtual machine and we're going to get
the server API which will give us all
the operations we can do with servers in
a particular region so these are
actually physical regions you know like
for example you could have regions in
Sydney and Hong Kong and London and in
the States finally we're going to get
something done yes now now we can
actually get down to business and create
something that we can use so here we're
creating a resource and this is the
actual call that's creating the resource
on line 6 here so this is the web
service call server API dot create this
is what's ultimately going to put the
bites on the wire and send out the
request and we pass it some information
that we need in order to create a
specific server that we want yeah we're
creating a virtual machine right now
that's right yep and this is actually an
example on line 6 of a cloud specific
call we're using the Nova API in
particular we're new using this create
call specifically for no of API so file
this one away in your head because we're
going to come back to it in a few slides
when we talk about the portable API the
next concept is that of a provider so
OpenStack is an open source project for
creating infrastructure as a service
clouds your own infrastructure as a
service clouds but anybody can implement
it and in fact the Amazon api's people
have copied those and people have
implemented their own infrastructure as
a service open source
projects mimicking the Amazon ap is so
you kind of need to split out the
concepts of an API versus someone who
has actually implemented that API so an
API it's like you know a provider's
instantiation of an API you can consider
it that way and so it includes the API
that we're instantiated and it already
includes a specific endpoint a known
endpoint because it's a public cloud
provider then there's some overrides for
the for the defaults because you know
all the defaults might not be the same
as working with the regular API and then
there's some additional configuration
along with it so what does this look
like again we start with our context and
now because we're working with a
specific provider like Rackspace with
our cloud servers product which is just
OpenStack Nova here's how we specify our
provider we just pass in a string and J
clouds looks up the endpoint because
it's a known endpoint it's not changing
there's only one of them and there's
some overrides in there for some of the
default and then there's some additional
configuration as well and then boom
everything else is pretty much the same
notice here in the credentials on line
two that I'm actually I'm not passing in
my username and password i'm passing in
my username and api key that's one of
the things that we changed over here
when we specify that we're working with
rackspace Rackspace's uses API keys
instead of using usernames so in this
case we pass in our username and API key
and we go ahead and build it and note
that we didn't specify an endpoint
that's part of the configuration that
came along with specifying that we're
using this provider shoot
in different regions or do you have to
make if you've got five regions you know
he's right earlier whatever you have to
make five different so the quit yeah the
question is can can you clone these
resources to different regions and kind
of the shorter answers with Jay clouds
you would use you could quite simply use
a for loop you know what I mean if you
want to create X number of servers in
each region you would simply specify
those regions in an array or list or
what have you and you could loop over
them and and create them or you could
you know get a little trickier because
it doesn't have to be sequential you
could thread it and have it do it all
that stuff at the same time it's kind of
one of those embarrassingly parallel
parallel parallel Eliza bowl instead of
word problems it is Thank You region is
what sorry correct yeah yeah so and I'll
show you some documentation later where
I actually specify I kind of map the
terminology between well in particular
Rackspace and the J clouds terminology
this is kind of one of the hurdles you
need to get over because J clouds uses a
slightly more generic terminology
because we're talking about many
different cloud providers and then we go
ahead and we create our server just like
before making this cloud specific call
moving on oh shoot
synchronously so you only get this to
turn back to your life I've led
great yes great question that's an
excellent question so the answer is yes
it is being done synchronously now this
particular call create will return
pretty quickly for for OpenStack and for
rackspace because that infrastructure as
a service provider says okay you know
I'm booting and then it immediately
returns the response and it's up to you
to go back and start pulling to find out
when it's actually active and I'll touch
on that a bit later but that's that's a
really good question just follow our
vaunted trick what if I one of the
reasons I asked about cloning is what if
i create region the United States today
but you know Australia doesn't pick up
for two weeks maybe within those two
weeks I mean it could be possible for me
to change my configuration right and I
might really want to clone rather than
rebuild I see what you mean yeah so in
in certain cases you know you might want
to use chef or puppet or ansible or a
tool like that to manage those resources
in order to keep things in sync and and
you wind up putting your configuration
for those resources into recipe chef
recipes or the as will play books and
such things and allow that to manage
your infrastructure you can you you can
bootstrap the thing with Jay clouds
because you need to have somewhere to
start running these things but then you
let chef or puffer puppet or whatever
take over so we're we're halfway through
time here I think I'm going to have to
ask people to hold their their questions
until the end just so I can make sure i
get get through everything here if you
wouldn't mind please okay so yes so now
we have our server going back to the
portable abstraction or view within Jay
clouds this is this concept where you
can and I'm going to purposefully say
not write once run anywhere it's I mean
that that's just on a silver bullet you
know there
our subtleties and differences between
the different providers a lot of cases
you you actually can kind of write once
run it anywhere for some code but you
really need to test it across all of the
different providers so a portable
abstraction or view is made up of api's
or providers it's really just an
interface literally just an interface
and J clouds and these are the
implementations of that interface for
example we have our compute service
interface which works with many
different the compute features of many
different cloud providers and once again
we're building up a context I had to
shorten the provider name at the end
there because this is Java so at this
point on line 4 here we get our actual
portable abstraction our compute service
and this is just an interface and
there's many different providers that
implement this interface most of the
compute providers and J clouds implement
this interface so you can use all of
these providers with J clouds with this
code with this compute service interface
that you get back from making this call
so now if we actually want to create
something with the compute service
interface it has some nifty features
you're able to specify a template of the
instance of the server that you actually
want to create its kind of this little
dsl this domain specific language where
you can declare the kind of instance
that you want you say you want it to be
in this location and to have a you know
have it be an ubuntu server with a
minimum two gig of ram and you can even
specify stuff like I want these ports to
be opened when I create that server
because so often you know you're
creating a web head or something and you
want port 80 or 443 to be open when it
actually comes up and then once again
this is the Builder
pattern so we build it now finally here
on line seven we're calling the portable
web service call so compute service
create nodes and group we pass it some
information and the template that we
need so we're creating three of these
things and we're giving them a group
name because we're creating a handful of
them so this is the portable call now if
you remember back from a few slides ago
we had that cloud specific call because
we're working with rackspace here in
this particular case that this call
ultimately calls out to that cloud
specific call under the hood this is
really a very simple interface pattern
it's there's a lot of fair amount of
implementation details how we plug how
we actually connect all these things but
ultimately create nodes and group calls
that you know server API dot create so
that is what implements this interface
simple interface pattern okay so that
was a lot of concepts that was a lot of
code let's take a break for a bad slide
this is a terrible slide I'd like to
draw your attention to the comic sans at
the top we've got out of date memes
blinking text to small text bad clipart
videos with sound you can barely hear
this is me in Austin where I'm living
and working right now me and my family
went to a Mini Maker Faire a Mini Maker
Faire you know we're going there
expecting to toy around with raspberry
PI's or maybe 3d printers or build Lego
or something I don't know what the first
thing that's there when we get in is
this like 60-foot scaffold and people
are jumping off it because it's like
stunt camp or something you know and you
know god bless them my entire family
jumps off this thing too so I had my
six-year-old jump off it my
eight-year-old jump off it my
wife year old jump off it and then this
is me too it was a bizarre way to start
out a maker faire with this crazy spike
of adrenaline and I quite enjoy living
and working in Austin okay so now that
we've had a little break we're ready to
get back into it and to move from coding
concepts on to community which is I
think I feel a real strength of Jay
clouds so what clouds do we actually
support who's our cloud community a
great a great many clouds this is
actually a subset of the clouds we
support a small subset of the clouds we
support of literally lost count of how
many clouds we support I'm fully aware
that talker is not a cloud but we've got
docker to it works with docker because
it's you know it's containers it's kind
of like instances servers it's a it's a
computing resource and and everybody's
got to support docker right doctor
doctor docker so we we sprinkled some
darker on it and it's just that much
more magical right now yes so you know
these are kind of some of the more
preeminent clouds that we support some
of our users again a very small subset
of some of our users a lot of great
companies in here doing a lot of really
interesting things with Jay clouds it's
been used in production and a lot of
places and it's had the heck kicked out
of it so it's it's in pretty good shape
naturally we do still have issues and we
work hard to fix those of course we're
always looking for new users and we'd be
happy to have you on board let me know
if you're interested when it comes to
actually who's contributing to Jay
clouds there's a lot of great people
from a lot of great companies regularly
contributing to Jay clouds this is again
a very short list of some of the top
contributors we have a lot of people
coming along and contributing you know a
small interface here or a fix their
a new feature here it's it's really
pretty great to see and I would like to
note that Jay clouds was founded by a
fellow named Adrian Cole about I think
over four years ago now and it's really
kind of a neat story he was wanted to
create an open source project and he had
had finished a contract and London any
backpack across Europe talking to cloud
providers and creating this project and
just getting feedback as he basically
toured around Europe writing code our
code is all in github this is how we
accept contributions to Jay clouds this
is where we live this is our main repo
on github we have other repos under the
J clouds org we have over 8,500 commits
over 100 users and a ton of releases
this is our commits per week from from a
period this year I have no idea what
happened this week and it's like it's an
april some week in the middle of april
everybody just took a nap i guess i
don't know this is weird here's where
our since we've moved to apache we're
able to track our actual download
statistics now which is really great so
we joined we became a top-level project
when did we become a top of a project
somewhere in this time frame here I
don't think this is for real I know for
a fact that there are problems
collecting statistics with repository
dot Apache org but at the end of the day
the line goes up into the right and as
we all know that's good quickly
I'm also good fun of it last night for
it's also very well suited to people who
want to use those vendors in those
clouds whether they're open source or
not so if you were listening earlier
there's that that portable interface
yeah the portability that's a huge part
and if you know you write your code to
some cloud specific feature on one cloud
and you want to shift to a cloud
specific feature on another cloud you
can stay within J clouds in order to
write that so sir I'm going to have to
ask you to if you would please hold your
comments and questions until the end of
the presentation just so everybody so we
can all get through this together and
then we'll continue on if you would
please thank you okay so if you want to
read more bit about our community and
perhaps join us you know you're welcome
on our user mailing list we're on IRC
Twitter you know etc etc etc another
user application who can tell me what
this is Jenkins what Jenkins Jacobs
plugin thank you sir yes we're playing
pictionary at this point okay so yes
there's Jenkins J clouds plugin and what
this plugin allows you to do is
dynamically create drinkin slaves to run
jobs on as Jenkins is working and doing
your continuous delivery your continuous
integration however you have it set up
to do what you need it to do you can run
jobs and spawn instances to run those
jobs okay so where does j clouds
actually live when it comes to your code
you know just in case you're not
familiar with these sorts of tools it
really is it is a tool kit but you know
ultimately it's a jar dependency
and where does it live what's its home
so you know if you were to write
directly to an API if you were in your
system to code directly to an HTTP I it
would look something like this I don't
really recommend this whatsoever that's
it's not a good idea because there's a
whole lot of problems you can run to
when you do that I'm going to talk about
them in a moment instead you use
something like Jay clouds and it's a
dependency of your system kind of lives
towards the edge because it's talking to
a cloud API via a series of tubes and if
your system happens to live in the cloud
it's really very much the same it's
still talking to the API and you can
still work with whatever resources you
need to in the cloud okay so what can j
clouds do for you why would you want to
use j clouds it takes care a lot of the
plumbing for you a lot of the HTTP
plumbing in particular so there's a
whole lot of stuff you need to do when
you want to talk to a web service API to
create the request to properly form the
request to send out to an infrastructure
as a service provider API and to consume
the response so Jay clouds takes care of
all of that for you and you can just
call a method as you should be able to
do it handles authentication for you
very easily just have to specify your
identity and your credential and pass
those off and it handles all the bits
and pieces authentication can be a real
Bugaboo sometimes when it comes to this
stuff and in some cases it also handles
real indication for those systems where
it's token-based and those tokens
timeout it handles pagination for you if
you've got you know tens of thousands
hundreds of thousands millions of
objects just bringing back a list of all
those objects in some storage system is
going to be a lot of data so you're
going to bring it back a hundred at a
time or what have you and Jay clouds
makes it easier to actually work with
those pages of results stay pulling like
we were talking about before it's you
know when you're working with resources
in the cloud it's not the case that
they're always ready when you ask for
them some
it can take seconds or tens of seconds
or even minutes for something to be
ready so you need to be able to pull
four states say are you ready are you
ready are you ready are you ready are
you ready are you ready are you ready so
this is what Jake loves does exponential
back-off okay and kind of hand in hand
with State polling is rate-limiting this
is something many infrastructure as a
service providers do in order to prevent
abuse whether it's intentional abuse or
unintentional abuse you know somebody
could accidentally code up some call in
a very tight for loop and be you know
making so many very very so many
requests to a particular API where the
infrastructure provider looks at it and
says oh this looks like abuse we're
going to shut you off they're going to
suspend your account because it looks
like you're abusing their API so Jay
clouds makes it easy to configure the
rate at which requests are made when it
comes to automatically pulling for state
if there are network errors or you know
other maybe transient errors you can
configure Jake clouds to retry X number
of times this is one of my favorite ones
because I've felt the pain smoothing the
rough edges on some of those api's a lot
of the api's i should say i worked with
a lot of AP eyes and some of them are
great and easy to work with and some of
them are not so great and not so easy to
work with and and these things have a
shape these AP is and and you're feeling
around them as you're working with them
and experimenting with them and you're
feeling around them and at ice ones are
smooth and spherical and and they're
just wonderful to work with but then
there's these ones that have all these
rough edges on them and you you wind up
cutting your hands and and you know
slashing up your fingers and you've
bloodied your hands and it's quite
painful to work with these things so
please let me have experience that pain
for you and don't you know write code
against these horrible api's and
experience this pain yourself I like to
rate api's on the effect they've had a
by marriage because when an
api is horrible and it's painful to code
too i wind up spending a lot of late
nights the next day I have a lot of
short tempers and it can be kind of
rough on everybody and it's not not a
great experience let the people who have
written Jay clouds which could be you if
you wanted to contribute feel that pain
instead of everybody feeling that pain
it is packaged it's in maven so it's
easy for you to consume the idea is that
it's all in one that it's going to cover
all the api's for all the cloud
providers the reality is that's an awful
lot of work that's an awful lot of AP is
you know where we're trying very hard to
cover everything in OpenStack and
Rackspace and and some other people are
trying very hard to cover the api's and
some of the other infrastructure as a
service providers we're getting there it
takes time and of course pull requests
are accepted like I was saying before
it's been around for over four years it
is production code lots of people use it
in production and rely on head very
heavily there's lots of sample and
example code out there to help get you
start an example can be worth a thousand
lines of documentation just that that
one thing that unlocks you and gets you
moving that much faster we actually do
documentation no kidding this is one of
my kind of personal passions if you will
we rebooted our website in our
documentation and so not only do we have
reasonably good documentation to get you
started we also have lots of Java doctah
for when you want to get deep into
things and then if you do go to Jay
clouds Apache org notice at the bottom
of each and every single page in the
footer there's a link that says fix this
page so if you notice something is wrong
with that page if there's an example out
of whack or there's a spelling mistake
even click on that link it's going to
drop you into the github editor for that
page you're literally right at the point
where you can edit that problem you
scroll to the point make the edit click
Submit
quest there might be a couple clicks in
between there but you get the idea so
you can very easily work with our
documentation the barriers are very low
to contributing to our documentation so
that's kind of one of the strategies we
use to keep it fresh and alive and
healthy our final user application that
we're going to take a look at so there's
a company called mathematics they're
actually here in town and what they do
is that thing that you would actually
kind of think that everyone would do
with object storage services out there
and they've created a file system on top
of object storage services on top of a
lot of object storage services and the
way they had achieved that a lot of
object storage services is by using the
portable abstraction in j clouds for the
object storage systems and this is just
a sample of some of the ones that they
support ok so demo Tom I do want to do a
quick demo and demo a short for
demolition right because that's usually
how these things go so hopefully Wi-Fi
is good and while it's late in the day
so you know reasonably confident will be
but if it works great if it doesn't work
great we'll we'll move on and not feel
too bad so let's start by going to j
clouds apache org this is it here so
this is our website and our
documentation and kind of the best place
to start interacting with us the
community there's lots of good links
here yada yada yada
so if you were to go on the website and
click on install there and get started
that way you would wind up downloading
all the jars associated with Jay clouds
your dependency the the dependency
example we have for installing Jay
clouds as Jay clouds dash all and it is
literally every single jar we have so
that's every single feature of every
single cloud we support and there are
dozens of them and there is nobody who
is working with that many clouds you
would have to be insane to try to work
with that many clouds typically people
are going to be working with one or two
or maybe three it's you know mathematics
is kind of the rare case where they're
very literally working with you know ten
to twenty clouds so instead we're going
to download a subset of the jars
naturally we're going to go to the
Rackspace documentation guide and we're
going to do our demo on there because
well oddly enough I have a free account
on rackspace okay
so we're going to go to our user guides
and you know we have this is all the
user guide documentation for some of the
clouds some of the clouds aren't
documented it's not perfect so there's
an introduction on about you know who we
are and what we do what we provide then
we need to get a username and a API key
which i already have we also have this
program known as developer plus and this
is an infrastructure-as-a-service credit
that you can use to kind of kick the
tires on our cloud you can spin up a
load balancer and you know a couple of
web servers and have a database and
maybe have some room left over for some
object storage what it amounts to is a
fifty dollar per month credit for 12
months so it's enough time to build an
application of some substance so let's
go ahead and get Jay clouds let's
actually download everything that we're
going to need to do this demo so we're
going to start by making a derp for us
to work in and then we're going to copy
this pom.xml file on github in our
examples and this is going to download
that subset of jars this is actually
because I'm only working with rackspace
cloud files we really would really only
need to download one jar but instead
we're just going to download all the
Rackspace stuff just so i don't have to
edit that file down so I'm just copying
it in here saving it that's super duper
tiny it doesn't look so bad okay and
then I'm going to make this run this
maven command and copy all of our
dependencies to a lib directory of
course I have everything cached on the
laptop already so boom it happens like
that normally we would have downloaded
half the internet in a boat you know
like five minutes or something
ridiculous okay so now we have these
things here and going back to the
terminology that we were talking about
before J clouds uses some more generic
terminology because it works across many
different clouds
and here's some of the specific
OpenStack and Rackspace terminology just
to kind of keep things straight in your
head this was a personal challenge I had
when I was first introduced to Jay
clouds so I went ahead and actually
documented it we're going to be doing a
cloud files demo here this talks a
little intro boat as a little
information about the EP is and in the
actual example and we're not going to
run the exact example in this one we're
going to run something just a bit
different so we're going to create some
directories for our example code and
instead of the cloud files publish
example we're going to do a slightly
different one so it's pretty close it's
in the same package as this cloud files
publish example but instead we're going
to use the upload directory to content
distribution network example so I'm
going to need to create a source file
for that and what this example does is
take an entire directory of files and
upload it to cloud files and enable the
content distribution network on it that
means we put it out on our CDN and make
it available to the public so you can
actually host a website directly from
our object storage service
so let's cut that was terrifying okay so
we've got that file and we just need one
other constants file
okay now we're going to go ahead and
compile the whole kit and caboodle and
if I didn't fat finger anything we
should be okay now we're going to go
ahead and run that example with our
upload directory to CDN class and we
need to pass in a handful of variables
here my Rackspace username my Rackspace
API key the directory that we want to
upload I've got a bootstrap living in
the directory above that I'm in here I'm
going to upload it to a container in
cloud files called Java one so this
example it's an example of doing a
multi-threaded upload with j clouds and
so it sends files up into cloud files
with 10 threads so what happens pretty
quick really and this is just the the
result of printing out everything that
we've uploaded then it says go to this
URL so this is the public URL of what we
just uploaded to cloud files running on
our content distribution network super
basic like it's the the bootstrap
example right and i just added you know
java one in there so really basic you
know this is the kind of thing you can
do yourself this is an example from our
website code so very accessible to
everyone anyone can do this okay let's
wrap things up here what's new what's
next setting stuff okay so we just
released j clouds 180 like i said this
was actually the release for be added
docker to it we had support for amazon
glacier added via the google summer of
code project which was pretty cool we
kind of we had support for OpenStack
Neutron before this is the networking
piece of OpenStack and we refactored it
to be a bit better a bit cleaner so that
was one of our developers actually I
love who did that very very cool bit of
work
minor release every six weeks now for
what's next Jay clouds 200 will be
coming out in early next year excuse me
and we're going to actually be dropping
support for java 6 yes we're finally
putting java 6 to bed and j clouds and
it's going to be like a month before
java 8 is end of life so yeah we're like
we're yeah yeah so we're when when Jake
loves 20 gets released that's when we're
finally saying okay we've moved on to
Java 7 like literally a month later is
the official end of life for Java 80
java 6 the end of life for java 6 was
long ago like it it should have been you
know to the curb a long time ago it's
been quite painful for most people
involved and and java 7 its end of life
is is pretty seoni maybe I've confused
it I have confused haven't I I apologize
yes it's the confusion is up here on
stage okay so yes yes it's it's so we're
getting support for java 7 a month
before but Java 7 end of life that makes
more sense thank you yes thank you we'll
be adding support for Google Cloud
storage for OpenStack heat this is our
orchestration tool in OpenStack allows
you to create you know entire
application templates and spit it out to
the cloud and create your entire
application for you kind of in one
request from a configuration file and we
do major releases every six months so
that brings us to a close thank you very
much for spending your dinner hour with
me invite you to check out J closet
Apache org and learn a little bit more
about our project thank you
so we are out of time but I'm happy to
take questions support for using chef
for a sort of like when I forget to do
your thing on that with the integration
between Jake labs and chef is that not
really in the office space or liquid
they both shirt like you're right code
to create infrastructure and those like
there's a lot of tools around yep yeah
so so the question is what kind of
support is there for for chef and J
clouds and it's a project known as J
cloud chef j clouds dash chef and
there's what's likely relationship could
be nothing oh yeah so I mean there's no
like specific relationship ultimately
what it does and I haven't I confess I
haven't actually used it myself what I
understand from the other developers who
do use it who have developed with it is
that it's kind of a bootstrapping
mechanism so you need a vm a server
instance or whatever in order to have
somewhere to put shift for in order for
something to run chef on right exactly
so it's used J clouds to start up that
server it provides that initial create
and then you let chef take over it looks
like we're getting booted out here I'll
have to wrap things</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>