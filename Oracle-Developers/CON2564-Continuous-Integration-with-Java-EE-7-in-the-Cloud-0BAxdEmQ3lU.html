<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>CON2564   Continuous Integration with Java EE 7 in the Cloud | Coder Coacher - Coaching Coders</title><meta content="CON2564   Continuous Integration with Java EE 7 in the Cloud - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Developers/">Oracle Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>CON2564   Continuous Integration with Java EE 7 in the Cloud</b></h2><h5 class="post__date">2015-12-11</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/0BAxdEmQ3lU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">okay grace I'd like to welcome everybody
to developing in the cloud I know this
is one of the last session standing
between you and dinner so this
presentation tonight in today's
presentation will be looking at
developing at 30,000 feet versus 5,000
feet you know which which is the best
altitude so that your boss can't get
ahold of you since there's no cell phone
service up there and how to handle
writing software with turbulence and the
rest of it so it's supposed to be funny
so anyway so I thought it so the
presentation today I'm going to be going
over cloud development tooling testing
and using that with java ee up in the
cloud and we'll touch a little bit up on
continuous deployment but this is only
one hour two hour session not a
four-hour session so we'll do the first
two hours will be that just kidding so
as part of the topics that will be
covering with us i'll be talking about
version control up in the cloud issue
tracking continuous integration and
integration testing and i'll be talking
about top i'll be bringing in things
like selenium headless web browser
testing using docker up in the clouds
doing load balancing testing so those
topics that I'm going to be covering
throughout this presentation and how you
can basically simulate an environment up
there so where did this the idea for
this president presentation came to me
because I work in a software from us we
sell soft will form of the group that I
work for we make chemical formulation
software so we're highly regulated we
have to go through good manufacturing
process training all of our code changes
have to be tracked so I can't just check
in a piece of code and not tie it to a
defect number every line of code has to
be accounted for against attract issue
so we've got you know rigorous life
cycle for defects dashboards for
tracking development progress and every
time I check in code there's like two
VMs there's a check in when I check in
on the get branch actually goes out
there and builds my code and there's
also integration tests that run when it
finally gets merged into the main code
line and so I've grown used to this
automated environment that I have at
work and I want it for home but I don't
want to have to spend you know I don't
want to go out and buy hardware and try
to configure that at home so it's really
idea for this presentation
came came from so I want all of this
type of process for home so I could
eventually create you know my own
startup company hopefully so some of the
challenges with trying to do continuous
integration at home or if you're trying
to start up a small company one is you
need Hardware if you're if you've rented
office space for a small company you
know I think the minimum costs were
putting on server closets like fifty
thousand dollars with the air
conditioner up on top you've got to
handle maintenance and security yourself
you know you have to constantly patch
your web servers patch everything and
make sure that hackers I mean hackers
are sitting there twenty-four/seven
trying to break into companies so if you
didn't get around to that patch today
they might have found it for you already
you have to deal with configuring
networking which is not simple I mean if
you're starting off with a small
business or trying to do anything
sophisticated configuring and
programming cisco routers is complicated
then there is you know software
maintaining software configuring it and
then finally the total cost of doing
this because hardware's hardware is not
cheap I actually have one of those
little kilowatt-hour things at home i
tracked my ups and computer and it comes
to around fifteen dollars a month for
electricity so if i want to start
running a couple of servers there it's
going to cost a lot of money if i leave
them on twenty-four/seven and that's
what's so nice about the cloud so
constructing our births development
environment is expensive hard and also
time consuming and by the time you get
through creating your continuous and
development environment and maintaining
it you'll have maybe five minutes to
write code before you fall asleep so so
that they're easy to set up relatively
cheap and low maintenance so the future
is already here in fact there's quite a
few companies that are now found that
have now started up heard about one
recently where they don't even their
networking closet is just a router and
it goes to Amazon and that's it they
have laptops for the developers and
there's no other servers on premise so
there's already companies running this
way and the cool thing is that this is
the networking clauses of the future so
I think this is from somebody's home so
this this this is the future so the
benefits of doing it up in the cloud is
you mean to minimize the time spent
configuring and managing tools you
can scale projects as necessary so if
you want to test scaling your
application out see how it behaves you
can easily do that you can easily
support distributed environment you have
a pre-configured integrated tool stack
that you didn't have to figure out first
and maintain and then you can build and
test for the other tools so as a part of
this you'll see we're at towards the end
where I go over how you can use Amazon
for instance for testing mobile phones
you can build for windows phone even if
you don't have a windows phone and get
an executable that you could then
provide to Microsoft to put in their
store you can do scalability testing and
you can easily break down and rebuild up
environments again so you're always
testing against something clean and you
don't have to hard to have the hardware
to do that so you can be you know you
can easily test like four different
branches of code out there on the cloud
and not have to buy physical machines to
actually do that so there's several
different cloud models that you have to
choose from one is self hosted cloud
where you create VMs so you get the
Amazon account you create the VMS up
there you install the developer tools
you purchase at last in you install the
elastin tools up there you manage all
aspects of configuration and cost but
you're only paying for you know the use
of the Amazon servers and then the
initial light cost of purchasing a
license then there is a vendor hosted so
this is basically where the you you
purchase basically completely cloud
solution and this is the one that I'm
going to be covering today so there's
very little maintenance or configuration
you're not actually having to you know
do upgrades those are being handled for
you everything is pre-configured and
you're just going through wizards to get
your stuff up and running and the costs
generally our monthly monthly fees
storage and usage fees which are pretty
you know minimal i think i spent more
this morning on breakfast than I have on
storage and usage feeds for the year and
then you also have the hybrid model if
you're in a company or a corporate
environment where you want to let's say
the source code go outside of the
company want to have your version
control system locally but then you want
to use the tools up in the cloud for
your continuous integration so you have
those types of models now in terms of
service providers so we're all familiar
with probably I think github is now
considered the new resume for developers
but so you've got several different
choice
if I github bitbucket java.net and
there's different prices so fergit hub
it's either free if you're using opens
if you're creating an open source
project or like me you spend seven
dollars and you get you know X number of
private projects that are nobody else
can see and you can have other
developers help you out with those
projects but it's not exposed to the
world right so it's only you have to
have credentials in order to get in and
so it all depends upon you know what you
know how you want to scale and what you
want to use amazon came out with I think
the summer their own code their own
github hosting service as well so those
are the leading providers right now for
doing that in terms of continuous
integration once again you've got
there's tons of them out there the
constant there's new ones popping up as
probably I think there were data there's
probably probably a couple over at the
exhibition hall we've got a bunch of
them and depending upon your prices and
the features that you want you've got
many different choices for doing this
some of them support different platforms
so there's it's a fairly complex mix and
then for issue trackers I mean you've
got jerra which is kind of the leader
right now or the one that a lot a lot of
people prefer you track bug host so
there's lots of them out there not
including open-source ones that you
could download and configure yourself I
think practically every every you know
every town has a got a developer that
has written a bug tracker at some point
so there's lots of them out there to
choose from so and then I mentioned a
source of origin job and that those are
the old standbys you know from the Java
worlder that we've seen traditionally so
the features for those they basically
have wiki's blogging and issue tracking
but they don't have continuous
integration have limited tooling support
so there's kind of like the first jet I
would kind of term these as the first
generation you know source code up in
the cloud or hosted solutions and now
we're on to you know it solutions where
you have full integration up in the
cloud where you can do continuous
integration up there so consideration
when when picking vendors you know are
you going to be open source or private
do you want to eventually go from
private open source like for instance
you know that are you starting a project
and i'll put a project that you want to
have on
source but you don't want the world to
be able to see all of your initial code
as you try to figure out what exactly
you're writing right so there's you know
can you flip a bit do you want a paid or
free to count is the integration is the
issue system integrated or separate
what's the tool chain integration like
in terms of you re doing continuous
deployment you know how is it
customizable in terms of operating
system operating systems that you can
choose from data migrations workflows
etc you know can you you know if you
have if you're running a small company
can you replicate a workflow so that you
know you have new features or handles a
certain way for instance if it's if it's
a defect that's being a defect workflow
where you know has to go through several
different states where you say you know
I've reviewed it I'm working on it and
then have a code review stage where
somebody has to sign off on it you know
can it handle things like that so many
of the like the 01 that i'll show you
can actually configure and design your
workflows I've got a graphical workflow
editor that allows you to configure
whatever workflows you want and can
create different states so that not all
you know there's difference between a
new feature and a defect there's
different workflows between the two of
them and so really what you want to do
is see you know how do all of those
integrate how easy it is because if you
have worked in a situation where you
have to log into one system to do
something then you have to remember to
log into another system to do something
else you know that becomes kind of a
pain and then in terms of my
requirements because I this initially
started out as my own projects that I
was doing at home I wanted the ability
to switch from public to private the
version control system i want to get and
some of them that are out there only
support subversion or mercurial so I
want to get I wanted to do continuous
integration up on Amazon because that's
what I'm familiar with as opposed to a
jewel or the Oracle cloud stuff the
projects I wanted to do I wanted to do
may even in Gradle builds on the latest
version of Java I wanted to be able to
do unit testing I wanted to be able to
use netbeans as my IDEs as well as the
other IDEs down there so I wanted to be
able to check in and build projects that
you know for iOS and have you know kind
of like a full full suite of things so
the services I true or chose one was
github for hosting no surprise there so
I pay seven dollars a month to so I can
have private repositories for my killer
ID that I hope hopefully next year I'll
be you know competing against layering
the boat race and then you know I went
with bamboo for the continuous
integration as well as your for issue
tracking bamboo requires JIRA so that's
how that decision was made so a grand
total I spend twenty seven dollars per
month for environment up in the cloud
know this is an environment that
actually builds my code up in there so I
only have this laptop I don't have I
don't have any other hardware I'm not
hosting version control systems I'm not
maintaining them I'm not maintaining
hardware I did not install the agents
that are doing the building I did not
have to do anything all I did was I went
to these websites and clicked a bunch of
buttons entered in a credit card number
and I was good to go within about 20
minutes and then i also used amazon for
databases virtual virtual private cloud
stuff and so the total cost per month is
$27 excluding my AWS usage charges which
generally those are around a couple of
dollars so this is not something you can
have a very sophisticated environment up
there for very little okay so this is
kind of the workflow that i have i have
set up so I've my coat over in github
bamboo pulls it out jared monitors it
monitors it just because i had github
first so i started out with github years
before i was familiar with bitbucket so
yeah 50 starting out today I would
probably go with bitbucket just because
the integration is even better between
big buck but the bit bucket in JIRA
correct yep I mean for instance if
you're using bitbucket and bamboo and
JIRA you can go into jared and say I
want to start working on this issue and
it creates the branch and get for you
automatically lose issue into progress
when you finally do the commit it closes
out the issue so the issue tracking
system and then also does the build so
it's all integrated together so that you
don't have to go there and flip any bits
so it's a little bit more work using
github but it's not much I also use a
phone
gap adobe has a cloud build service so
for the html5 apps they get built up on
phonegap so even though I don't have a
windows mobile phone or android phone
currently I can build for all of those
platforms up there and then submit them
to the app stores so you know I don't
have to have any of that an Amazon Web
Services of course so the sequence in
order to if you if you're trying to get
going with this type of environment and
tonight you want to start your own
company at the hotel you can go through
these steps you know create your github
account if you don't already have one
great your jira bamboo account punching
your credit card and then create an AWS
account and the AWS account is I mean
all of these I mean literally Aztecs all
of like five minutes to go through and
create and then you're you're up and
running in the cloud you don't have to
wait you're not going to have to wait
for like an email for provisioning this
is instant you're up and running so the
amazon stuff this is available to anyone
this isn't like the hosted solutions of
the past the nice thing with Amazon what
they're trying to do is they're trying
to make everything everything is just an
API so you don't think in terms of
machines so everything that you see up
on on the Amazon AWS stuff there's
restful api is for it and there's
toolkits that you can use and download
to deploy stuff so it's very it's very
interesting and like they have and the
stuff is dirt cheap as you'll see them
one of the price listings but they have
like this you can write like web service
end points for their stuff and i think
the first million invocations are free
so you know i would be very hard to to
write that so the list of services that
they have available is always exploding
it's getting harder and harder to keep
up with that for this for this
presentation I you know they were
changing things out from when I worked
on the presentation they were
introducing the features in the couple
of months that I've been working on the
presentation so for this presentation
I'm going to focus on ec2 which is the
elastic compute stuff basically VMs RDS
which is the database and then the
virtual private cloud stuff one of the
things that I was trying to work into
the presentation but there's not enough
time today is the ecs which is docker so
as a part of my build process I could
actually kick out a darker version of my
app and deploy it up on ecs
and it would you know and I don't even
have to worry about the hardware
anything like that everything is taken
care of for some of the other things
there's like s3 for storage so actually
the for the bamboo stuff I could
actually deploy my codes to s3 so when
the build artifact is ready I can push
it out to s3 right now I'm pushing it up
to the website that I run around the
Connecticut Java users group and so is
getting pushed up into a nexus
repository up there so that's the end of
the build processes goes into a nexus
repository but you've got a bunch of
other services there so amazon also
provides its own clouds developer tools
which are tightly integrated so they've
got a code commit which is basically
like github or bitbucket that they
provide you don't have to use that all
of their tools work with it last seen a
bit bucket as well they have code deploy
which automates code deployment ec2 s
now this is meant for situations where
you have say a hundred servers and you
try it you check in a new version of
your code and you want to roll it out to
all hundred servers you want that done
for you and you don't want to have to
write the scripts to do that so that
stuff is all automated and they
monitoring give you excellent feedback
on everything and they integrate with
atlassian cloudbees jenkins and all the
rest of them code pipeline is for
continuous delivery service so this is
where you know continue for automates
building testing and deployment into
production so this is this is very
sophisticated stuff and then they also
have mobile hub which allows you to
build and test on real mobile devices so
you can build and test remote you can
build your Android app and deploy it up
there and run it on a sexual mobile
phone and they'll sing and run automated
tests on on the phone and they'll send
you back screenshots from it so you can
see so you don't have to go out there
and buy 10 different things now they
don't do I they don't do the iphone or
the apple ecosystem but they do do the
Android ecosystem but they've got tons
of phones out there that you can go up
there and give that a try so it allows
you to you know test your app out even
if it's an you no html5 Cordova
application how does it look on the
samsung phone how does it look on you
know on a yes lenovo etc so it gives you
it gives you a lot of flexibility so
it's very nice in terms of that now in
terms of the cost this is the thing that
I like
first of all I like to Clinton thing
only they never raised their prices but
it's dirt cheap so depending upon what
you're doing you might they have a free
tier so it's easy i think the free tier
goes for like the first year or
something with depending upon your usage
but it's only like you know i'm usually
spending like five cents an hour or
seven cents an hour for resources up
there so you fire up a vm and you only
pay for the hours that you use so you
can shut things down and you know you
don't pay for it at that point so if you
want to do a quick build and test
something like say you want to play with
docker so some of their images up there
have doc or installed on them so you can
fire up an instance up there and you can
play around with doc or and test out
your workflow up there so anyway so it's
it's a dirt you know you can it's very
forgiving because you're not paying for
things so if you want to try a windows
box they've got windows of the MS do you
want to try building your thing on on on
Windows Windows 8 or something testing
your javafx app on Windows 8 you can do
that up there and it's not going to be
not going to break the bank now in terms
of the ami is up there that basically am
eyes are virtual machines what you think
of virtual machines and there's a large
community of these virtual machines if
there amazon provides and third parties
provide them so for instance if you want
to play with MongoDB and you're
returning to do a project with Mongo bdb
there's an ami up there with MongoDB all
configured you don't have to download it
configuring machine and install it
somebody has already gone through the
trouble of doing that and provide you
instructions as to how your to use it so
that's one of the nice things of this so
you know and the end the cloud tools the
build agents that's why i said i don't
have to worry about configuring build
agents are dealing with any of it
everything is already configured for me
and so you basically configure
everything you access these machines
using ssh you download the keys you can
figure the keys up there and it's very
complex thing so you can actually work
with a team you can do things like
limiting users access to specific hours
so you can you know do all kinds of very
sophisticated auditing and everything
now one of the things that i use up
there is i use a virtual private cloud
because i don't want to do most of my
stuff out there exposed to the internet
I want to do my testing so it's you know
no but I don't have to worry about some
hacker detecting the fact that i'm
running a regression sweet on my
software and say hey wait a min there's
port 80 80 s and
but you know he's running something up
there so I don't have to worry about
that so I create basically a virtual
private cloud up there which is a
virtual sequence of machines I can
configure all the IP address range
subnets routing tables all of that is
done graphically don't have to be a
network guru at configuring cisco
routers in order to do that and I can
launch my databases and am eyes into the
v pcs and specify whether i want them
inside or outside the network so the
wizard for creating a virtual private
cloud is really easy to go in there and
they say you know start the DPC wizard
and it takes you through the steps of
doing that and you know it has like kind
of like pre-configured they've got like
templates that you can start from so you
can say well I want to create in this
case here I want to create I won't have
a public subnet and a private subnet and
I want to have the end of the nap done
on them on the outside and so they'll
take you through configuring all of this
so you don't have to be an expert in
doing that and there's tons of video and
documentation so you can specify your IP
ranges and specify your zones where you
want it you know do you want one zone to
be in Virginia the other one to be out
on the west coast so you can you know so
in this case right here for the
Connecticut I've users group I'm doing
that and then I've got you know my these
are my VP sees that I had set up at
least last year up there on the network
so I've got two different V pcs that are
all set up and ready to go for doing
development testing and then this is
going through creating subnet so you got
my v pc then i can go out there and
create subnets for them specify the
blocks and so that's creating a virtual
private cloud so crazy you know the
couple of steps are going through and
i've created a virtual private cloud so
I can you know then go up there and fire
up empty machines on that virtual
private cloud now the Amazon RDS service
is a relational database service so you
can get pre-configured instances of my
sequel Oracle sequel server and
postgresql now the difference with this
stuff is that your when you go when
you're in the cloud doing this
development you specify what you want
for performance and that determines your
price you're not trying to optimize the
machines and be an expert in terms of
the database configuration because how
this stuff works is you pay for
performance not you pay for the machine
and then try to optimize optimize the
how it works so they're taking care of
all that that and you attach a database
to a virtual private cloud instance
because it's always hidden you don't put
your database out on the net out on the
internet right you wouldn't fire up
Oracle in a publicly available machine
so you create a db7 that in order to
fire up your database is relatively
straightforward for doing for doing this
you specify you know which so I'm going
to fire it up into the Connecticut drive
users group one and you can create
several different databases so I've got
a database out there when I run my my
app regression test I've got a database
out there with like dirty data that's
all set for the app to run so I've got
you know priests you know pre-loaded
database set I can test data migrations
because you can take snapshots and all
of this is scriptable so you can have
command you can write shell scripts
basically that make web service calls
that like duplicate things so you can do
you know you can you can run regression
test data migration tests what happens
you know when I'm rolling out a new
version of the app I have to make schema
changes to the database you can test all
of that and then in terms of setting of
the database they just you know these
nice little colorful icons you pick
which database you want it goes through
prompts you for a bunch of questions
what do you want is the accounts on the
database you enter in what the user
credentials are how much storage you
want allocated your database options and
by default they're going to try to
prompt you because they're going to say
well you should have your database
replicated in two different zones so
that if their data center on the East
Coast goes down you know your data still
is running on the west coast and they
also take you through the backups so all
of this stuff if you're trying to stand
up a database on your own this would
take you days to do right you'd have to
get the hardware setup and do this with
this type of stuff you can easily stand
up database run the series of tests and
then break it down if you're doing work
for clients you know this makes it this
is trivial this is nam you know not a
penalty then at the end here gives you
your you know the settings on how to
connect to your database and I put the
top you know I usually fire up another
vm install the client software on
because my databases are publicly
available and then I use that vm taxes
the database and just do my own like
sanity checking on it so that's that's
the Amazon side of things getting the
Amazon side of things set up for it now
JIRA
as everybody's probably familiar with
and there's a there's a booth over there
they can do a much better job of
explaining the features this is a very
complex really not complex I'm sorry
feature-rich issue tracking system that
does project management bamboo requires
JIRA in order to get the continuous
integration has got custom workflow as a
visual workflow designer scheduling
issue voting dashboards change logs and
it only costs in the cloud only cost you
ten dollars a month so with ten dollars
a month you can sign up and you're off
and running within your shoe tracking
system you don't have to configure it
set it up and it comes pre-configured so
it's got pre-configured workflows so it
gives you a starting point it's not like
one of those things that okay you've got
a blank slate go enter in all of your
processes it gives you a pre-configured
system so that you can actually get up
and running and you have a certain
number of users that you can actually
invite you can invite your co-workers if
you're trying to start up like a project
or for something like that so it's all
and there's many more things on that it
gives you any login it gives you a
dashboard you can see what's going on
with your builds you can arrange widgets
there's plugins that you can download
other people provide plug-ins for this
you can write plugins as well for this
thing so there's an epi and there's
documentation as to how to do that but
it gives you quite a bit of power and
insight as to what's going on and so
Jerell also works with your IDEs so
you've got plugins available for
netbeans IntelliJ eclipse sourced Rican
taught ties into it and the benefits of
with lagera now as I mentioned before
it'll actually tie into your github
account and when you safe here if you're
using github you give your when you
create a branch you give it the same
name as an issue in JIRA lagera says oh
I notice that it looks like you're
starting working on that so little move
that issue to impress so it'll you know
it'll and then when you close it out
it'll say okay that issue is done for
you and so you can configure all kinds
of things you know transition states
with it so it can actually so in this
case right here I've configured it for
my personal repository
so configuring the integration for
github is fairly simple this takes all
of like 20 minutes to actually set up
you go in there and you link your going
to their thing and say you want to link
the two accounts together and then they
guide you through is this dbcs they
guide you through actually doing the
linking so what you could do is you
could go home and create a free github
account right and then go into atlassian
and create you know get a complete
project up and running for it so then
you go back into github and you say well
I'm going to you know I'm going to
connect up JIRA to this and then github
has a page where you can go through and
enter in all the information for
connecting the accounts together so it's
kind of like one of those things you you
go into Jerry to say okay I want to do
it they tell you how to do you go back
over into github and then they start
setting up with the stuff I start going
over the setup steps there they gave you
a bunch of client IDs and secret keys
that you have to enter into both systems
then you go back into Jerry say add new
account enter in those values that you
got from github and you're off and
running and you can then start creating
projects and every time you commit code
to github jurors going to notice bamboo
is going to notice bamboo is going to
start doing builds out there and then
you can also go into NetBeans and
configure the NetBeans NetBeans for jira
support so there's a plug-in that's
built in so that you can configure it to
talk to it ok so that's that's gia I'm
not going to spend too much time on that
the real bulk of it is for the bamboo so
bamboo is a basically it's got a
centralized it's just a centralized
agent as monitoring your github account
for build so if you purchase the ten
dollars a month that gives you one agent
that can run builds and so that agent
runs out on Amazon so there's a central
thing that's always watching your github
account to see if there's changes and
then the agent that runs out on Amazon
which actually does the builds and the
Atlassian provides Linux image basically
a Windows image as well that can be as a
starting point for building up you know
what you want to run
on Amazon and you can you can configure
you can configure different you can take
and configure different am is with
different capabilities so you can figure
this one has no j/s you can you know do
all kinds of you know custom
customizations of it and then tag
certain builds as having certain
properties and then it will match up so
if you have several different projects
it'll match up you can enter in
properties of both the agent and on the
project and it'll match up the agent
that can actually build that project so
you've got a lot of control over there
it's not just one size fits all and so
the generic work general workflow is
bamboo pulls the you know pulls the code
out from github so it goes to run a job
it's going to run it on the agent on
Amazon it pulls the code out of jet hub
builds it on your ec2 instance and then
at the end of it in my case I'm pushing
it off to a nexus repository which is
not on here now no Jenkins is definitely
be more currently the more popular build
system I mean both of them have a large
repository Jenkins has over 1,000
plugins it is easier and more I mean I
use Jenkins at work but bamboos got a
nice cloud solution so that's pretty
much the reason why I went with it I
mean both of them for my for my for my
usage there's really no difference
between the two of them but depending
upon what you're doing you just have to
realize that you don't have all the
Jenkins plugins aren't all available for
bamboo that doesn't mean you can't do
certain things or work around it so in
terms of bamboo bamboo has got these
different concepts it's got the concept
of a project to plan the stage and a job
so project kind of provides reporting
across all of the plans a plan a plan
basically is tied to specific repository
so in my case for the Connecticut driver
users group I've got a website and all
the code for that reside is resides in a
specific github account that then has a
plan associated with it you can actually
associate multiple repositories with a
plan then and then the stage processes
basically runs jobs in parallel or stage
is made up of jobs the jobs can run them
and the jobs are split down into tasks
so this is a little bit hard to to
visualize but down at the bottom your
tasks are like executing Maeve and
starting a dock or instance you know
pushing code to Nexus running shell
scripts you know doing you know you can
split it up however you want there's a
lot of flexibility in this so this is
kind of an overall diagram just showing
you you know what's possible and these
are running in parallel so you can have
multiple tasks you know you get up
different processes running in parallel
so you could be building your main code
base testing regression on data
migration and end up and be doing it all
in parallel um actually haven't tested
that I don't know how that licensing
works for for the agents I think you
might need more than one asian agent for
doing that and so for navigation through
its over on the left when you log into
JIRA there's like a drop-down so
depending upon what applications you
purchase you can also purchase
confluence and fish eye and all kinds of
things and then for forgetting out for
the first time if you create an account
to get up and running you go in there
you create a new plan so you just go
over you go into the hamburger menu over
on the Left select bamboo then you go to
create a new plan and you go through and
you select your project in this case
this is the book from the three ejb3 in
action book and you know project keys
and set it all up link the repositories
together so that it knows to monitor the
repository which branches is monitoring
the stuff all supports you know building
multiple branches so if you're as you're
branching it will actually build the
other branches as well if you tell it to
or let it know that you want to build
branches and then in terms of task
configuration so this is where you
basically set up the lists of tasks that
are in a job so this one's very simple
it does source code check out and then
it executes some a than building the
maven build is what pushes it up into
Nexus and you'll see there's a couple of
slides and then we specify over you know
what build jdk do we want to use and any
properties that we want to pass in now
they might be wondering how do we pass
configuration properties to
the build right because we're going to
fire up instance up in the cloud how
we're going to tell it what database we
want it to connect to and all of that
well we can provide variables as a part
of the build that will then get
substituted in basically environment
variables that we can then use in our
build process to do that so in this case
right here i'm specifying you know the
day to the test database and user that i
want to use for the build process after
that for the regression tests so those
properties get passed in and as you can
see here I've got basically maven tasks
that will pull those out of the
environment and substitute them into my
persistence of XML files so that you
know my jpa stuff will be able to test
against the database and then for local
testing i just setup my m2m two
properties file with those same
properties so I can run the bill both up
in the cloud and also locally on my
machine you can do all kinds of very
sophisticated things with the Maeve and
stuff for in terms of different profiles
and which profiles are acts are up and
running so you can actually create a
profile for building up in the cloud
versus a profile for building on your
desktop machine and no that is not the
password that I use so the tasks that
they have that you can access you have
several you've got quite a few different
tasks so you've got AWS code deploy so
remember before where I said the AWS had
the code deploy stuff so you can
actually tie atlassian into the AWS code
deploy for deploying it out over a
cluster of machines if you've got that
configured they've got support for
docker so this is support for running
docker instances for creating images and
all the rest of it so you actually got
that you have full support for dr. in
there and i'll get to a little bit later
in the presentation but i've started
using docker for doing some of the
regression tests where we want to create
a test environment and then rip it down
a toss of the way cuz I don't want to
have to pay for for instance right now
I'm using it for the database testing
because I don't want the I don't want
have to pay for a database all the time
when it just is used for regression
testing so I want to throw it away after
i run the russian tests the performance
isn't that important so this is a more
example here where i start up the docker
instance at the beginning Oh have
obvious lydford in a minute so now in
terms of starting the agents bamboo has
basically you can think of them as VM is
pre-configured with their agents on them
that you run on your Amazon account and
they'll launch and start them on the
amazon com provide the credentials so
that they know how to connect them you
don't have to do with any of this you
don't have to deal with setting up the
agents of that they can talk to it they
take care of all of that so you just use
one of their am is that they provide so
you've got a number of different ones
that they provide so usually what I do
is I start off and I pick one of the
bamboo am eyes that I like I want to
start with and then I'm going to
customize it because I don't want it you
know going out and retrieving stuff all
the time so like you know I want to have
no Jas the you know the MPN installed on
pre-configured with stuff run on it
already so what I do is I find their
bamboo instance I use bamboo to launch
the instance I then go over to Amazon
find the address of the Machine
Association to it install the software
that I want on machine maybe upgrade
their version of Java 8 that they have
to the most recent or something like
that so I customize it and then I take a
snapshot so I use the Amazon tools
because at any point you can take a
snapshot of vm say ok you know I'm done
you know take a quick snapshot of this
or take a snapshot of it I go back over
to atlassian and I say I've you know
here's a vm that i want you to be aware
of and so I punched in the the vm the
VMS am i number and now atlassian knows
about the customized vm that i've
created over there and they can launch
it so this is how you know they provide
a stock image i go out i customized it i
tell them about it and then they can
launch that after that so that's very
easy to do now 44 bamboo and testing so
i'm doing a bunch of things up in
testing us is getting more to the java
ee side of things so i'm doing a full
suite of testing up there so i'm
creating environments for testing you
know multiple and things because i can
fire up multiple VMs and have them hit
on my server and i can the one of the
things I've been working on is actually
testing where I deploy the application
to a doc or instance and then i use the
docker tracking tools for monitoring
performance to see how it reacts so i
can capture that information I mean I'm
you know this is this is stuff that is
very easy to set up
so I can fire up multiple instances I
can you know test what what it's like
with a load balancer I can experiment
with that I can actually test JavaScript
code test under X under heavy load and
I'm actually using phantom j/s along
with selenium on our Killian so what I
do is I actually fire up the Java EE
container using our Killian and then I
fire up selenium and phantom jas as the
web browser and I test the JavaScript
the client-side JavaScript code going
against the backend and because i have
i'm using docker instances for the
database i know that i'm starting in a
known state for the database I know what
I know that the app app server is up and
running and I can reconfigure and
testing so I can verify you know what
happens in the account that in the event
that somebody goes in to create an
account that already exists I can test
all of those situations easily with that
so this allows me to easily test you
know restful endpoints web sockets test
security and retrieving resources they
should have access to check JavaScript
code to unit testing on JavaScript code
but also do javascript testing where
it's in the browser with a back-end that
setup without having to spend weeks
writing shell scripts and all kinds of
things with sleeps in it say okay bring
up the server wait five minutes because
it'll warm up and then you know go off
and run my test so i'm actually doing
you know full end-to-end testing you
know you can also testing for failures
what happens if you know the database
gets yanked out from underneath it and
then also bad data so there's a lot of
things that you can do and so with the
Amazon Cloud stuff I can actually create
basically this virtual private cloud and
have different test clients up there
running against different servers
against load balancers and test these
types of deployments to see how they
happen I'm you can even create doctor at
dr. instances and use like the elastic
Beanstalk so that as more users hit your
site they start spending up VMs just
have to be careful that you know you
don't have somebody do a denial of
service attack against you because we'll
still send you the bill so this is one
of those things that this stuff is
extremely powerful but if your script
gets out of hand like you're right a
one of those you're using the web
services API and you've accidentally
loop over and say start me 32,000 vm so
we'll start you 32,000 dm's so so
there's there's extreme power here
because you have instant access to it so
for the the application i'm going to
demonstrate with all of this is the
connecticut java users connecticut java
users group web application so it's the
java ee 7 application running on
glassfish 4.1 postgresql it's a maven
based build although I have a branch
where I've been working on getting
Gradle up and running and doing
everything over in great pain pain pain
pain points have been our killian
support in the selenium testing stuff
that I've been doing so it's a module
our eyes architecture we have there's a
separate data model Dao is there's a
mobile web application that I've been
working on as a part of this and so this
is the overall code structure so we've
got basically the core data model up
there CT web migrate module which
migrates it from the old website over
connecticut an admin application for
administering it and then the mobile
application which is a Cordova html5
application and if you go up there right
now the application isn't running I
finally got the ssl certificates
configured correctly so now that gets
now I can deploy the app so the first
thing is with testing with the dao is
because dao layer is separate so
integration in the testing i want to be
able to test this so this is where CDI
comes in so i can test the dao layer
this is all done being done up in the up
in the cloud so i have i create in a
because this is in java SE because the
the core part does not have as does not
run in a container when you run it when
you run the unit tests so i use i start
up a weld container to initialize it to
get that up and running and then i
provide basically ultimate alternates
implementation of the dao to provide an
entity manager in there so i can then
write test to test the daos creating you
know meet
and verifying that all the database code
works correctly at the core level before
I even get to the ejb level now moving
on and this is the the maven pom file
where I pull in the post you know the
database setting the database drivers
and everything else but all this stuff
gets provided by the containers that's
why it's all marked under test now are
killing this is where the fun really
starts our Killian allows you to
basically do embedded testing and
dynamically build up jar files
containing all of your Java EE code on
the fly so it uses something called
shrink wrap which allows you to dine a
maclee create war files so in the past
and if you're writing stuff say ten
years ago you had to you know right you
know write scripts to build up war file
so then test them deploy them you had to
write all kinds of really nasty code
very often in shell scripts for doing
testing so this is this ties in is
basically a test runner and allows you
to boot up glassfish in a container I
sorry boot up run your code run your
unit tests in a container against the
back end it allows you to control what
services actually get started so you
know I don't want to have you know the
you know the startup screen you know the
ejbs that are marked startup Singleton's
I don't want those to execute so I don't
include those with the war file so it
only runs the subset of the application
so i can test specific subsets of the
application i don't have the whole thing
firing off as when i do the deployment
and as a part of that most recently I've
started using docker as I mentioned so
that during the integration testing I
can fire paddock or instance for the
database and popular bruns the you know
the liquid base scripts for
instantiating the database initially for
populating the schema into it and then
at the end once once it finishes up on
that build agent the doc or instances
destroyed and it goes away so I don't
have to worry about maintaining a
database that I then you have to worry
about scripts having failed bleeding
database tables around which then screws
up the next run of the integration
testing so this this I get all for free
I didn't have to write any scripts or do
anything in order to do this all I had
to do was go into the bamboo say I want
a doctor task punch in my docker image
postgres and because that's that's
coming from the docker hub I didn't have
to provide any register apposite or e
information because it assumes that
which is postgres there that is pulling
it from the main docker hub repository
so it goes out there grabs postgres for
me and then starts it up and then I map
the ports down below so it's on the
default ports on the host that's where
and it attaches the containers that the
container can run in the background
while my integration tests are running
so by the time it gets to actually
running the integration testing I've got
a full database that's been stood up ok
so the testing of the infrastructure
when I test using this type of setup you
can test the EJ bees web service
endpoints everything is running in our
killian so I actually stand up and test
you know the full container to full app
in the container and then I use our
killian plus selenium and phantom Jas
and Jasmine to test the JavaScript code
with the ejb so I'm standing up with
full thing where I'm running each where
you I've got the e jb's running about
web services running and I'm making
calls from the JavaScript code into the
back end and verifying that my
JavaScript my JavaScript code actually
works correctly and then using the AWS
command line stuff I can set up doc or
instances out there and deploy stuff and
run tests out there so I can provide a
complete image and test it out there now
with our Killian writing a unit test
where you're actually running code
inside a glass which is really easy i
use a run with our Killian I inject my
ejbs I also have this test support beam
which is also only in that class by
there which will create and clear out
we'll set up basically set an initial
state in the database because I want
certain records to exist in the database
certain accounts to exist I'm etc at
least when i'm running the integration
testing and then i build up my archive
using shrink-wrap basically build up the
war file on the fly so basically I'm
just adding and it pulls in everything
from each one of the packages at those
classes or so it only pulls in the
classes that I tell it to so that you
know I don't end up with services that
are going to actually go out and try
talking to other systems so I say well
you know I want to run this very
specific test with this very
set a class files and I want to test how
that behaves I don't want to pull in
something that's going to start talking
to you know the eventbrite you know or
any of the other services that i use i
don't want the thing to start you know
phoning home two different things so
anyway so that that so that's extremely
powerful and then my configuration file
and I can actually use this I can
provide different configuration files
for wildfly for Tommy e+ for weblogic
and that can actually up there on the
cloud run regression testing against all
the different java ee containers if I
wanted to yes yep oh yes it's the jboss
projects with our Killian so they've got
very good support for it
yeah yeah yeah I mean you won't get the
dependent so the question was whether
you can use our killing with ejb tues I
mean as long as it's a modern container
I mean like the current version of
weblogic that if you're running an old
ejb to application yes what our killing
does is it fires up the app container
for you because all the current starting
with EE 6 you've got that embedded
profile so it starts set up and so it
can start up the container and then you
can actually you could get references to
your ejb 2s and tests with those and
then this is a test right here this is
using the jax-rs the client-side api to
test making web service calls so I'm
actually testing so first what I do is
as part of the bill as part of the
testing process is I first test all of
my web services using Java code on both
ends right the Java code is calling java
code and passing objects and and and
doing the testing that way then after it
passes that then i move on to the tests
using actual javascript where I test the
same API is using javascript to verify
that they work from javascript because
if this doesn't work the chances of the
JavaScript code working or you know this
is much easier to debug than JavaScript
code and then this is just showing
basically some skeleton code for using
it now with this one this is not using
the Phantom j/s driver this is using the
Firefox one and what this will actually
do is you'll actually see the Firefox
window pop up and you'll see it run the
Jasmine tests you'll see the report and
then what you have to do is sadly enough
is used to let you have to screen scrape
but to find out whether it succeeded or
failed but this allows you to this
allows you to run JavaScript soap so
what this is doing is this our Killian
has fired up the container glassfish and
then when this test runs it fires up the
web browser runs my JavaScript code that
it pulls down from the server now i also
have basically tests javascript code you
know basically unit tests written in
JavaScript code that gets loaded into a
page so basically I have specific pages
that pull in specific JavaScript files
to test them so I don't have to like
test you know test specific pages i'm
not doing page based testing I'm writing
up actual unit tests in JavaScript that
then pull in specific files from the
server so it goes out and retrieves you
the registration jas file and uses that
to test and then pulling in selenium is
very straightforward this is actually
much more complicated than that once you
get into selenium sorry the Phantom jf
stuff and with that I'll hop over to a
little bit of code so this is the
registration so this is one of the the
test here so this is actually using the
Phantom Jas for the testing so you can
see this is the headless one so that I
can run it up on Amazon because the
Amazon instances do not have a windowing
system installed so you can't actually
install Firefox on them and use the
Firefox driver you can I mean there are
what there are instructions out there
it's for setting up a virtual frame
buffer and then installing and compiling
firefox on that so in that case you
start off with nami from bamboo
customize it add the virtual frame
buffer in their ad in compile firefox on
it and then you could actually use the
Firefox browser and that would actually
pop up and run the full thing and you
can test things you know you can
interrogate the dell model and do all
kinds of tests that would test that type
of stuff so it gives you full full
testing in between and then down below
we have basically I'm looking for right
now I'm just like a perfect contains
failure anything to say that the unit
test failed
and so this is the full example before
for the protesting the war file open up
that's not that it's not the most recent
code and then I have as a part of this
there are so have you know the spec
runner from Jasmine where I pull in all
of the files the Jasmine files to run
the test and then the actual unit tests
are in here and so this is one of the
tests that test registration so this is
a Jasmine JavaScript test so this is
actually testing because of abstracts
and my JavaScript code so it's nice and
clean the code that talks to the backend
server and this is running a regression
test against it and how I you can
actually capture the output from this to
you know capture the fact that log and
success and we can using if you put
asleep in there if you're debugging it
local you can actually go over into
firefox on fire up the debugger for when
your integration tests fail right so you
can actually you actually do have
control over that and then the release
of source code later but the
configuration for the Phantom Jas is a
bit more complicated for that
um
and then in terms of testing web sockets
because you have a web socket so this is
the WebSocket endpoint right for doing a
basic chat functionality that's in there
and then using the client-side web
socket stuff with your achillion I can
test all of my web socket logic as well
so i can test everything i can test both
ends all the Ajax code web services
everything can be tested this way and
then touch on phonegap in ish a little
bit phonegap is the cloud based phone
system of sorry cloud-based solution for
mammoth from Adobe it's basically a
Cordova so you can create you can go
into NetBeans and create an Apache
Cordova project check it into github and
then you can have you can go into the
adobe site and point to that your github
account like I did for the juror and it
will actually check out and build for
Android for iOS and for windows mobile
and I forget I don't know if they have
any other phones in there there's a free
tier where you get one private project
that will that will check out and build
your coding you basically you provide
your credentials into it so you provide
your the keys that apple provides you
you know the keys that Google provides
you the private keys and everything so
you provide them to them and they build
you an executable that you can then
download if you have if it's an iphone
you can deploy it on to your phone or
you could submit it to the apple store
so that you know that's kind of rounds
out the whole thing so you can do full
tests you know you can build just about
anything as you can see here this is
when i was in the process of setting it
up a while back or setting up the keys
entering in the the keys for iOS and
configuring all of that and so using
these tools they really allow you to
create the next garage startup right
because all of this stuff you know this
is all out there you can download and
play play with it for $27 twenty seven
dollars a month for you know five cents
and however using the computer versus if
you decide not to use it you can just
you know shut things down now the
Alaskan stuff can fire up VMs for you at
specific schedule
you can have it you can have like those
buildings or it's only five cents an
hour you can have it do your continuous
integration builds every night at eleven
o'clock and shut it down after it's done
so you don't have to have this stuff up
and running all the time there are
mobile applications so that you can see
what's going on on your phone with your
Amazon account and also with your bamboo
account so you can see the stuff there's
they're all of that stuff is also
scriptable so anyway this is extremely
powerful that you know if you're looking
at starting up a company you already
have a company this is lowered the bar
quite a bit enabling anybody to start up
a company you don't have to spend fifty
thousand dollars to set up a server
server server closet you don't have to
go out and buy servers for five cents an
hour you can do that and with the amazon
stuff besides just linux VMS there are
and these because for some of the other
providers as well they have like Windows
VMs so you can actually fire up windows
and say run javafx applications up their
desktop applications so this is
extremely extremely powerful in terms of
what you're able to do and so that's the
twitter feed for connecticut drive users
group my email if you need to get ahold
of me in my to book so thank you very
much and if anybody has any questions
not that long no this is all done of my
I mean initially because I mean we have
a completely separate tool chain at work
this is all what I've done on my own and
yeah now this is oops now this doesn't
take you know you could be up and
running within the next hour you could
have hilarious it right now you could
open up your laptop it create an amazon
account and have a linux vm up and
running in probably less than 10 minutes
and then go in there and create the
elastin accounts everything would be
pre-configured for you take you maybe 10
minutes to link it to your github
account because that can be a little
confusing yes
say I'm not DevOps at all at work I'm
just I just do coding I don't really do
anything with dev ops and that's that's
the reason I like this stuff is that I
hate installing software I hate sitting
there configuring nothing that puts me
in a worse mood than trying to upgrade
my operating system because I just want
stuff to work i want to write code and
that's it but i want the benefits of
this so the answer a question I've been
filling with this for about two years
now and it's gotten more and more and
more sophisticated hardest part about
this is just keeping up with all the new
cool services that they're adding like
the the ability to test mobile phones
out on amazon on actual devices and so
forth so know so i don't i'm not a sorry
i'm not a dev op i'm not a full-time
devops person so that's that's why this
this makes all of this accessible to
everybody that's what's so changing
about this is that you can I was talking
with a guy I think last week that was
starting up kind of like a small open
source project and was using all of this
type of stuff for doing that and it you
know I think I can have on my account I
can host upwards of like 20 developers
so you know you can start out small with
just yourself add your friends to it you
maintain complete control over you can
set roles and permissions it's been the
whole day going over how to set up all
that stuff that is very everything is
there everything is well documented
there's videos for how to do all of this
stuff this is real this is I can't
stress how easy this stuff is and how
fun it is to like to do this
yep you have nothing elastic beanstalk I
think more of like a production type
thing where you're you're trying to roll
your you're hosting the Olympics website
and this week you have zero traffic but
when the Olympics comes around your
traffic is going to go up to millions of
people hitting at the same time that's
with elastic Beanstalk is that more men
for right because it just keeps banging
out instances and then when the traffic
drops down it begins removing those
instances and going back down so that's
that's where elastic Beanstalk comes and
you create that runs off of docker
images and I think uses chef if i
remember right it's been a while since i
haven't had a case you haven't had a use
case for myself where I could even
generate the traffic necessary for doing
that you have the questions everybody
excited going to go home and start your
garage company is that there's actually
I think there's a conference over at
Pier 27 which is how to start your own
company this week it's going that's
going on right now actually yeah I'll
get it up there onto the web I'll get it
up onto the yep onto the site thank you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>