<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Securing Rich Clients and RESTFul Services | Coder Coacher - Coaching Coders</title><meta content="Securing Rich Clients and RESTFul Services - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Developers/">Oracle Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Securing Rich Clients and RESTFul Services</b></h2><h5 class="post__date">2015-06-05</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/cmzld_0mkIA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so we'll be talking about securing rich
clients and by rich clients we mean
clients written in JavaScript and other
clients who have lots and lots of money
and then we'll talk about restful
services presented by submit sorry Ani I
am so make a software engineer at
verisign and my soul because sharik i'm
a senior engineer at verisign okay
agenda so talk about web development
trends of over years the paradigm has
been shifting from writing code on the
you know server side to blindside so we
have been we are using more and more
client-side processing power then we'll
talk about wa architecture client site
security assumptions assumptions which
we have been making for source for so
long and then we will talk about client
web client threats and then their
countermeasures and correspondingly we
will talk about recipe threats and their
countermeasures search engine web
developer right so looking at this slide
right up so basically these are the web
sites google com your facebook yahoo the
listed by popularity by unique visitors
so if you look at their front end mostly
they are using javascript right or at
least some part of javascript in some
part of their applications so if you see
if you look at that column you see
everyone is using javascript so back
inside they have Java C C++ and you know
python and all that kind of programming
languages so and the AP protocol between
your front end that means JavaScript
side and on the back hand side is mostly
rest and and then you have soap to write
so rest is gaining popularity and hence
the purpose of this talk so with that
I'll turn it over to swimming he's going
to talk about you I stuff javascript and
then I'll come back for the rest hi
everyone so as you saw from the previous
slide more and more code is written on
the client-side nowadays using
javascript but let's compare some of the
differences between the two options
let's say you have the first option
you're riding all the code on the server
side web developer would typically write
all the code in frameworks like jsf GWT
Ruby on Rails and that would generate
all the HTML and JavaScript for you and
give it to the browser and the browser
would just render it so in a sense your
browser's typically a dumb client over
here dumb terminal of you the other
option where the trend is going nowadays
is the client-side option where
developers write the entire MVC MVP and
we start framework in JavaScript
libraries and other tools and use REST
API is to fetch the data using gs1 as
the medium of data interchange format in
this architecture you have a simple
decoupled layer between client and
server but at the same time your attack
surface vessel vector is now widened so
you make sure you protect your client
side as well as your wrist ap is whereas
if you're using so side libraries lot of
the security features are in built and
they give it to you for example output
escaping input validation session and
state management not just because
suicide libraries have matured so long
enough that it's all in built and given
to you for free and Jason by the way is
now now runs natively on a browsers as
of december two thousand nine it
supported by xmas trip xmas version 5
has added it so it's now natively
supported in all modern browsers so you
don't need to use any third-party
processing javascript library to parse
in EG so on so let's take a look at the
client site security assumptions one is
the the browser gives you two security
features one is the browser sandbox this
is done by the browser vendor at the
developer you don't need to worry about
it this basically prevents any malicious
code from leaving your browser entering
and affecting your operating system the
other the most important thing is the
same origin policy which simply states
that any document loading from one
origin cannot set or get properties
loaded from another origin but that
assumption is not honest we all know
that there are so many different flavors
to the same origin policy image tag
skips tags cookies
and there are several third-party
plugins like flash Java civil light they
all use own custom policies for cross
domain communication so because of this
there are so many ways to circumvent
circumvent the same origin policies for
example messing around with the document
or domain properties installing a proxy
server or dynamically injecting script
tags with a callback which is nothing
but Jason P so the wc3 community and the
html5 spec guys in like all the hacks
that were going on and they wanted to
standardize the way cross domain
requested on so when html5 is a entry
something new a new standard call course
cross-origin resource sharing what that
does it essentially it's upgraded the
xhr object in your browser to a level 2
and that allows you sent cross-domain
requests and at the same time the server
now responds with an additional header
to match the origin if it came from the
right domain or not well I'll talk more
about the cross origin is so sharing
more but we'll take a look at a quick
demo on how these two xhr level 1 and
exits are level two objects refer so I
have a demo for this so let's say over
here I have a simple Ajax request I'm
sending this request to a different
origin port number ninety 90 my web
server is running at local host port
8080 so if this request goes through it
will print out a log message it went
through others in through an exception
or or alert on the log so let's see here
I have an old browser Firefox version
3.2 which is before course scheming and
if I send this request you notice that
the browser threw an exception saying
that you violated the same origin policy
and if also if you look at the access
log on my remote so I port 1990 you
notice that the request did not come
through so i'm going to send the same
request in a most modern browser now
let's say chrome and even the latest
version of firefox if i run this request
in chrome you notice that chrome also
complaints that the request in code
through you're violating the same origin
policy but if i look at the access logs
in the store if i refresh
 you'll notice that the request did
coming through from the Chrome browser
so it's very important to understand
this new etc object has been introduced
because most of the modern hacks
nowadays are making advantage of this
new feature alright so these are the top
10 web security threats for 2013 it's
maintained by open web application
security project this list is maintained
by them it's a nonprofit organization
and the publishes this every year and
all of those hand-picked some of these
attack vectors and we're going to focus
on some of them the ones highlighted in
green our clients fire and the one
highlighted in red are the server side
and so you notice the injection has been
moved at the top it's been in the top
for the last three or four years that's
because now particularly because of dom
and json injection because now more and
more of your code is now exposed on the
client side so let's take a look at the
first injection the dom and JSON
injection and for this I will straight
away go to the demo because these slides
are going to be available online then
was a more interesting so let's say I
have this dorm injection attack where
the evil user wants to bypass the
accepting the end-user license agreement
on your websites we it does invalid
capture and hits I accept and obviously
your website is not going to allow a
tactical continue it's going to say
about the continue button so the first
thing attacker would do is want to say
okay how do i hack this he's going to be
the source and notice that there's an
ajax validation being done so when the
response comes back it's going to run an
email statement where with the response
so the attacker could basically use a
tool like Fiddler on a fiddler is a
popular tool to intercept any request or
response going into our leading a
browser and tank over the data so in
this case he pauses he sets a filter
fiddler to pause each and every request
so and then when the request is posited
Larry noticed that the button is
disabled is a smaller change to
attribute disabled attribute to false
for the continue button and resume
the browser so that now when the request
goes back to the browser a training with
the continue button so this is just a
fancy way of doing it but you could just
run JavaScript code on the browser and
do it but it was just to demonstrate use
of tools like swindler and and how you
can do complicated method on with mob
complicated validations on a plant site
but whatever this is our data
application that we built using
backbone.js jquery html5 WebSockets for
chatting and then we have a news widget
has done using html5 web messaging the
next attack is for example json
injection and this let's say the evil
user wants to post a message from
unauthorized room for example had been
room he doesn't have privileges to it so
let's say he'll do the same thing he'll
send the message you Spindler to pass
the response going to the server and
he's going to change the room hiding
from room one to say Edmund room if he
knows it in advance so changed Redmond
room and receive the request and once
the request goes through so so let's and
he received the browser now the
difference is gone through and let's say
the admin user reading logs in and goes
and checks on that Edmund room once he
logs in that mean user he he had access
to admin when he noticed that this
message came in from here we go even
though he didn't have authority to post
into this room so that's typically how
JSON injection is on you talk about the
JSON data going out so the
countermeasures are definitely don't use
eval to the validations on a client side
and never trust inputs of all this over
always validate the inputs never trust a
client that's pretty much basic over
there the next attacker so these are the
most common types of attacks for broken
authentication in the client side so
what
session hijacking in this what happens
the attacker sniffs an unsecured network
traffic and can initiate the session as
the as a victim so in 2010 a tool called
firesheep an extension to Firefox got
very popular and any user sitting in a
cafe could install this plug-in along
with Firefox and use a packet capture
tool and monitor anyone's a network
traffic and initiate their session as a
Facebook user or Twitter so this to
lowes firesheep was pretty much targeted
to social networks and the reason why
that attack was possible because
Facebook initially only encrypted the
ssl the session ID during the initial
login and every subsequent recurrence
weren't encrypted so they went ahead
then the fixture and made the entire
site encrypted are with ssl the other
day would attack a session fixation in
this what happens to attacker can be in
a different network and he prefixes of a
session ID from the server and injects
it to the victim gives the message in an
email message or a phishing email and
the victim uses that link if he clicks
on it the session with your injected so
let's take a quick look at a demo for
that so let's say the evil user comes in
and first thing he wants to do is just
get a valid session ID from the server
and the evil user doesn't even have to
login all he has to get is a session ID
so he's using let's say he's in Chrome
browser here and he inspects the
response coming in to the server he
notices that there's a bookkeeping set
jsessionid so he's going to get this
session ID and construct a malicious
link simply slow used to swing to log on
and on click is going to inject this
jsessionid using the proper javascript
properly documented cookie is equal to
what are the jsessionid equal to so this
can be fished in an email message for
example y you might think it's a banking
website asking login so or in a blog
message so let's say the victim goes in
and clicks on the length and link is
available and so now what happens the
session is now injected in the victims
browser
victim is on a different easier on
different browser a different place so
just to make sure he's on a Firefox
browser or a different browser now so
now the jsessionid is not injected onto
the victims browser and Tim doesn't know
about it he's going to continue surfing
the web site and all the attacker has to
do is just wait for the victim to log in
once the victim dogs and he's a now he's
unaware than using the attackers session
ID so in the meanwhile the evil user is
just going to go and change the URL he
just changes URL to my off / home and he
is able to just log in as the user one
without even getting authenticated again
so again this this attack is also very
popular skull session side Jackie let's
see how to prevent it always use secure
HTTP Ivana cookies don't accept session
identifiers song get a post variables
again these two can be configured in
your weblog XML under session conflict
the other prevention you can do is
always change the session ID login if
using tomcat you have this valve or
under basic Authenticator to set this
property called change session ID on
authentication equal to true that would
invalidate the whole session and
generating session and so that you are
using the same section of long way and
always you can do additional checks for
example checking the IP address of the
user agent matches the USA co-star these
additional to accept that you can do but
i think that depends on requirements how
to handle say
your user is in public cafes so Internet
do you want to lock them out if it I be
changes so those are additional checks
that you can look for in the next track
cross-site scripting this is one of the
most popular tags out there this is the
basis of most of that acts the two types
basically reflected and stored I'm going
to straight away show a demo on what the
differences are between Eastern what
they mean so reflected attract is
possible is whenever you have an input
feeling a web page that gets reflected
in the response so let's say I enter the
search term test and the test message is
reflected on a web page and also in the
URL the input is reflected there so
let's say a victim can construct a
malicious URL to stay in the victims who
he slits in this case and posted a blog
mass any website so first thing he let's
say he does this he's going to take
advantage the URL he's going to say s
equal to script location as i equal to
pookie street or not calm and forward
this cookie into this cookie sealer
website so all the attacker could get
more creative and he's going to hexen
code this URL so the if you have any
cross-site scripting filters it's going
to he would hope that is gonna bypass
that so he can hex encoded and construct
this URL and if the victim posted into a
blogging website let's say and the
victim happens to click on it you notice
that the victim gets forwarded to this D
so this request gets forwarded to cookie
stealer website again the creative the
attacker can be more creative and read
it the user back to the login page so
he's not suspicious anymore I mean there
are variety of process within the tax
that you can do so basically the cookie
is now sent to the cookie Sheila Webb
said and it's logged over there the
other type of attack is stored in store
cross-site scripting this what happens
the injected code gets permanently
stored on your seller
sample in a chat message or message logs
so anything that's getting personally
store is going to get reflected and on
your own your victim so this is a
cross-site scripting attack this with
the symbol other statement that we saw
so let's see how to prevent it always
validate all your inputs headers cookies
very strings hidden form means
everything should be valid in your own
server side you can use a jquery and
kohler to encode on your user-supplied
outputs you always you say for API
methods you can use several filters that
are available on the server side like es
api's library and always prefer white
listing to blacklisting and the result
flights are tools those available so
don't try to do everything by hand there
are so many different types of
cross-site scripting attack vectors that
it's always better to use the third
party tool that handles it all right the
next type of attack is cross-site
request forgery so this kind of attack
basically is possible when it's it tells
a victim's browser to make an unwanted
HTTP request without the users constant
so let's say this example we're going to
see in attacker posts of malicious link
to a blogging website and then the
attacker will tell the victim to add him
as a friend so if you're you know about
the sÃ¡mi worm that happened in my space
it was combination of cross-site
scripting and CSRF let's take a look at
our demo for this here lets a user one
logs into the web application and he's
searching for friends to add he notices
that that there is evil user but he's
not going to invite him as a friend he's
just gonna ignore him right so in the
meantime the evil user can construct a
malicious URL on a blogging website now
this is a completely different blogs web
site and and the user 1 and 13 login so
you have so the user has to be logged in
before if before this attack to work so
if you notice the source on this you
notice that is going to call the rest
api call for a friend request from user
one to you to even user and the message
is singing view map it Jones right so
let's say the victim clicks on it the
REST API request will go through and if
the user refreshes the browser you'll
notice that they will even use a got a
girlfriend even though that's not what
he had intended for that should be how
CSRF is done how do you prevent it you
might think that always use a post
tension of a get or check the page
letter but again this all can be forged
the two most popular way to prevent CSRF
is one using unpredictable tokens or
challenging user credentials again
that's what Amazon does with the amazon
one click after you check out and you're
ready to purchase the item it last login
again so but in this case let's talk
about this token signature pattern so
this what happens if they're too popular
approaches one is csr of god this is an
end-to-end solution that in generate the
southside token for you and current in a
request and it has a JavaScript servlet
API using the config web dot XML and
policies and that would dynamically
injured inject the token into a DOM and
it's an end-to-end solution you know you
know you know won't have to touch any
code in your application the other thing
other solution is to use like let's say
for the PS api's enterprise security
area library that generates all the
tokens on the server side with every
request that's going to associate it to
that particular user that gets set in
the cookie and your client has to be
aware
that okay not receive this token a
cookie with every request I want to send
it back to the source of the soul can
validated so let's take a look at the
code this is how it would look on a
plantside or you can use the Ajax set up
before send before every send request
that's done by a browser you would get
the csrf token from the cookie and set
it in the header and then send this
request so whenever the server is since
this is going to verify the scale sort
of token if it was generated by seven or
not and and that that's how you can
prevent esrf in fact this is one of the
most common way of preventing CSRF all
right so html5 is here to add more
richness to verifications there are lot
more features in html5 so you just want
to talk about some of them with new
features they've also we have also won a
tricky for new attack vectors or even
old attacks can be done in New way we
will just take a look at some of them so
let's see the first one new tags and
attributes everyone no html5 has video
tags input tags and form events so
typically if you're using cross-site
scripting filters make sure that you
update them because they were with all
these new browsers this about html5 just
make sure your video of cross-site
scripting filters in place and dividend
Dallas off excess html5 cross-site
scripting jus chillin balloons website
HTML 5 sec tomorrow okay crossorigin is
so sharing so this is what i had talked
about earlier in my first place right
there's a lot of demand for cross-domain
communications between browsers so the
html5 spec guys added a new response
header they wanted to maintain the
security in the server side so they
added a new response header coil access
control of origin and you can set this
origin to the domain said you expecting
the response the request from origin set
up to start so and the course also has
certain rules for exam
any simple request it's a get head post
whose content type is text plain will
send the browser will send the request
straight away and then it will verify
with server bit which happened it has
access to process a response or not but
anyway or your requests have already
gone through in the free friend requests
anything that is not the above so what
happened here the browser will send and
a pre-flight request using the HTTP
options options method in that it will
check the server okay that do I have
permissions if it says yes and then the
browser will come back and then make
that request but even with all these
rules it is possible to do some hacks
over there so you can do the same
cross-site scripting flow Egeria attack
even if you have prevented your website
using CSF tokens with modern browsers if
you have just misconfigured your access
control of origin attribute we've said
in the story that you can be exposed to
CSRF attack so let's say this is how a
malicious script will look if you're
using jquery 1.5 onwards there so as I
said the xhr object has been upgraded
now you can send cross-domain request so
you step cross domain to true
content-type text plane this is going to
fool the browser into sending into not
to send of refried request even though
your data as json you are telling that
ok my content i just explained and you
say xhr door which with credentials
equal to true so this is a new attribute
that's added again in next HR level to
object it's going to replay any cookies
that met your browser has so essentially
if the victim happens to go to this evil
dot-com website and click on the link
even if at CSRs protection that just
because you miss configured this
attribute are your boss you're
susceptible to see a set of attack so
how do you prevent this right always
Mike list your law origins prevent so so
so course is the opt-in policy if your
server doesn't respond to this attribute
your browser will use the default saber
in policy so either if you if you don't
use it you're safe
but if you're using it you don't make
sure you don't set it start and always
verify the headers for example if you
get if you the browser standing i'm
giving a text plain but your data as
json we suspicious about it and through
an error message you see a set of rope
tokens so continue your csrf protection
and you might be also now you can now
all brothers can mix cross-domain
request so you can be serving you you
can be suspected suspect also there de
las attacks so so make sure that you
have some infrastructure to handle
Rodriguez it accidentally all right so
html5 web messaging so again this is a
new feature added in html5 this also
allows two documents to communicate with
each other this is particularly useful
in rich when you're building rich mashup
websites for example and this my
application I have I want to get a set
of a news widget right so it's a mash-up
kind of thing so I have a usurer and I
have my application this is what I will
install my news widget so this makes use
of I fringe instead of xhr object the
iframe object you can use what you do is
first you set up an iframe object can
handle the iframe and then use the
postmessage API of the iframe to post a
message and when the new server receives
it it's going to respond with the news
message and then you can render the data
on your on your application so the
obvious which I hear is what if the new
server is compromised so at a cow could
perform a cross-site scripting attack on
the news message day and that once that
comes back in the payload that cross 615
attack will get rendered on your page so
let's take a look this is how the code
looks like you have your iframe object
you're constructing this message to
fetch news the new server receives it
and response to the
latest news and let's say the cross-site
scripting attack happens here so she
only prevented you make sure you
sanitize once you receive it you
sanitize the data you verify the origin
with that first news calm and then you
sanitize any faucets in a taxi do again
you can use third party tools to cash
cross-site scripting attacks so
prevention as I said always check your
region sanitizer data and to blow and
ddos attacks have a limit on the number
of messages only one area siepermann
because you have no control over this
the new server could send so many
classic decide if you want brandy dogs
niggaas attacks try to configure
infrastructure to acceptance of messages
alright so web sockets and reds workers
in web sockets as everyone knows a new
html5 features enables two-way
communication between the browser and
the server is operated for WebSocket
communication and workers allow scripts
run in the background and they can use
multiple cores in a cpu without me
without interpret the UI so these two
combinations you can really build some
cool applications or even some nasty
homes so there are several scripts that
you can see on the internet that are
available out there so we just want to
take a look at one example it's the
internal network ports kind again this
was taken from this website ND lapse of
continued some research and so we took
some code modifying it let's take a look
at a demo for this so let's say user one
and even use a boat logged into this
chart application now evil user wants to
scan the internal network of the victim
so this script let's say this is all
hard coded right now he wants to scan
the port 80 and starting IP address
range 0 to 10 192 168 20 to 1 to 10 and
post the results to this malicious
website is a different origin sick port
number 666
the psychic so he can minify the script
or even hex encoded and do a cross-site
scripting attack and once the script get
injected it's going to be reflected on
the victim and the victim happens to use
firebug and notice that all these
requests are being done on the
background it's it's looking at the
internal network of the victim and it's
10 after scanning is caught on postage
results to the evil even website in
Reverse parameters let's say the now the
evil user comes in and goes Aviva
website and he noticed that all the
results are posted here and this
actually happened in my local network at
home port 80 was open most of it was my
cell phones and tablets and my Wi-Fi
printer so so yeah this is kind of
something that needs to be taught about
how do you prevent this definitely fix
your cross site scripting issues and
even if you are allowing certain scripts
make sure you don't already from the
server don't allow any web brokers or
any sockets as used as users of that
intervals all right so each table if I
local storage I'll quickly go with this
so just like cookies local storage can
also be manipulated by JavaScript so
make sure you don't store sensitive
information in local storage use the
expression on it and you can use HTTP
only cookies to manage your sessions
geolocation information if you want to
attract the user make sure he respect
the privacy of the user don't rely on
the default browser behavior because the
browser might ask one said okay is
tracking your behavior make sure you
express it doesn't and it doesn't ask
again so make sure explicitly ask the
user every time you're tracking with
your own information so these were just
of the HTML file that we covered for
that I conclude the UI security threats
and
it off with us to go the rest excuse me
so look at last appearance enter
countermeasures to look at direct object
references then sensitive data exposure
and Link exceptions we'll talk everyone
rose up to endure it will talk a little
bit about it talk or session languid
interest the talk about unsecured
China's broken authentication and
missing function level existent so it's
the same chat application which soon it
has been demonstrating us the storm so
this is what happens right so this your
app and all not a lot users are becoming
you're more interested in all these
tools which are easily available on the
entire like firebug and your five sheep
and things like that so you know like
they were just wanna go capture app they
open up a Firebug your page refresh and
this is what they will see right so they
were basically to catch your endpoints
here you see how many endpoints are here
so any sense those are end points on
your server side so they can in such
being booked any one of these endpoints
and then when they invoke it though you
get a call on the server side right and
interesting thing here is that this user
is logged in right so authentication
this user has been vindicated so it
would be that they will attend together
for all these endpoints probably yes
because this user is authenticated and
that's how we are invoking these how
this UI interface
right and other important thing to
remember is that qaq a blood test all
these endpoints right label know it just
up instantaneously they're probably
wouldn't know about it up so that
basically you know causes issues with
your end up in secure direct object
references right because there are
objects from your site so any client can
access those objects not so one of the
example would be something like this
right so if you have any ties like this
right and I said you have a user
interface which is syncing up let's say
PA and strike to get a user with ID 1
then there is an evil user
authenticating non-authentic ater right
i mean if you look at facebook and
twitter i mean like hold more days on
the on those websites tray so if they
look at this idea say oh well this is
number one let me try / to what happens
right and hole it's pretty easy to set
up a loop and try like all the numbers
right and you don't know what's crackin
on yourself aside right you might try a
pig number here and that it might cause
like you know job out of memory
exception on your server if you're using
java on this website you don't know
right so recommendation is there
basically use you should see you can use
GUI DS they are pretty large numbers
easy to it's not easy to guess those
numbers race because they are not
sequences something to think about okay
let's look at our path information so i
just this implementation these two
methods both of their return userinfo
user info if you look at first method
here input parameter is defined as being
an integer from record on the second its
string and from maker right so see what
happens right both of these definitions
are valid right and both of these
definitions converter so we'll see what
happens right so there's a malicious
user ever ever try to do something like
this right the list from one size 3000w
and
and against the list str which means it
was meant for string parameters i named
it so that we can differentiate it and
again that inject injection of every
citizen w right so again this AAA was
probably magnify your internal purpose
like for example if you wanna have a
pagination right google probably come up
something like this and queer will not
just realize it was only just your
imagination right so with that we'll
look at a demo let me see the difference
it's okay so let's invoke a breakaway
number one and then this is an overlay
it says userlist astray up from size is
one the took from is one of the total
size of three thousand works fine nice
user interface book work very well
Nash's user injects RW at the end and
then he invokes your car okay what
happened over it caused exception right
or aspects epsilon juice on your server
side so AB de at least it doesn't look
good right so that means you called it
could this call did go through an event
on the other side right on this slide
here where your endpoint was list that
means that you input parameter was
defined as integer the call actually did
not come through right it actually came
from the sea container and it stopped
right there because it did not find a
matching resource so just by doing that
small thing which is you know if you are
specific very specific of the parameter
types you can reduce the load on your
server because server will not match
that to your head pipe okay let anything
will put caramel item and one on it so
which I send it ten times i will say
time times again it has even become more
important all right because you have
annotations on your client side but
everything is to evaluate around
server-side answer so let's look at
example again about validation how
important it is no right how about this
day again sure user looks at it he says
wow that's a size here use quality for
evaluation how much I a pic you number
right good fast your server to go down
very easy right so let's look at it play
the next video here this is my client
again in looking at all all I'm saying
sizes 30 rank pedophile same user this
is okay instead of that i'm going to try
a big number is authenticated users
right there authenticate they can invoke
those endpoints I mean no one can stop
me okay what happened so probably there
are 300 million records they said go get
give me 30 million records however I
never expected because there was no on
my on my user interface the max size was
under so i tested for only hundred right
not same three hunder million must so on
the server side so what happens ok so
let's go later back play this video game
so that's it is another user right no
he's trying to access your user
interface you see no it's slow because
your server is busy with the other
requests and this he the server has not
served this request yet it's probably
going in a loop fatima those two enemy
laner cuts if there are three and a
million records right he just tried for
the max range so what happens right what
could you do pretty simple thing right
ray limits and rain checks very
important not right other than your
normal logic right so validation how do
you validate these things right deserves
I mean you don't want to have a code
which is you know at your method and
requires you check for makes min and Max
and your things like that you probably
don't want to do that right so frame-up
cyclist easy from DeVos and then justice
to taco so when you build your being
where you define your endpoints so there
are you can you find attributes for your
parameters and say this is mean and this
is max that way you can control your
size as well so you can say max is 300
so even if there is a user is trying to
access 300 million records
will not return back it will fail okay
but well the question arises what
happens if I do have 300 million acres
right well if you do or 30 million
records and you want to send that back
to your client you can still do a few
things something called streaming so the
swimming in just is right even if you
are 300 million records you can stream
that data instead of you know collecting
that it and sending that back you can
stream it so let's try same call exactly
like same will change it to a streaming
call right let's play it's few next year
okay so same call we will go back and
instead of list will say list string
okay there you go you see the difference
between first call in this call is
sending you the data right way laughs
and this is your client number other
time other user pretty fast there too
right so it's still streaming that means
both our requests has been served right
both our service serving both because
there is no load on the server as clear
this let's try something else in call
you can do / oh and send it to a file
right let's say this your client you
wanna you want to put all that stuff to
a file let's see what happens you want
to do it you see the stuff you see the
progress right it's it's streaming so so
another important thing is that if
client cancels right it cleanses give me
30 million I can he said ah I don't want
30 million times it canceled they've
said give me 40 million reckon he
cancels it so what happens on the server
side right so in the first case it will
keep sending request to a server and
server is trying to handle so call those
requests and eventually we'll go to
write in streaming case your client
where when that happens it sends out
client about exception on the server
side and everything will stop so that's
something to turn your mind how do you
do it but it simple in jizz in with all
these tags here right this is very
defining your endpoint all you have to
do is that in your method you say
response you are returning a response
you say streaming output right stream
and then you say new or swimming output
and this is nothing all right this is a
method which you over right here you get
the data remember you are getting it
from the database you are not putting
into any release
because if you put it in the less then
you will have a problem right because
this size will grow and eventually serve
well we go down and then you steady
we're writing it out outright that I
don't get bite so you start writing to
the stream and you're finishing it this
part you can throw how you want to flush
it and how do you want to write it right
and if service to offset it will throw
it such a come out of this method and
then everything will hear will stop so
basically very low memory footprints of
a sensitive data exposure right so again
like we are missing those endpoints are
exposed so how do you so I say protect
sensitive information from being
displayed why right so let's say if you
think about just seized and how you
expose your objects to them quite right
so let's say few a class called user
info and you says that in your web dot
XML you say suppose you're mapping and
all those objects suddenly are available
to the outside world right because all
that stuff gets converted to Jason and
everything is you know sent back to the
client so let's say if you have a
developer right so let's say if you have
a requirement to display I user name and
address so it goes he fills up just like
a Java program when he builds a plain
simple Java object he says its name
address right I'm exposing it has
adjacent and that gets exposed to all
the times right so tomorrow let's a few
have one more you add one more interface
and that's it that's a admin interface
at admin says that he wants to look at
social security numbers as well what do
you do right there is another door when
he goes back he's as one more night
record cup social security number and
he's done why what happens like admin is
happy because he logs in how yeah I can
see q ases follow very good i can see i
login as another year I don't say very
good but they forget that those
endpoints are available to everyone
right so what they can do let's look at
it so so let's say then again malicious
user accesses your endpoint it's logged
in as I say give me your data and then
surely this sucks time there was
engineer he added social security number
as displayed to everyone in the world
pretty simple right I mean he just added
a tribute and short what can we do so
let's change that's this is a
I'll show you the core later but the
surfer to you we add a filter called ssl
I am trying to say here that filter out
SSN from here and let's refresh it to
hear again give it a few seconds and
compile and say 21 okay go right it's
gone so let's look at it okay here is
what you can do right so filter out
columns of your right so important thing
here is you have two options here first
one is so this is coming first one so
you have something as simple filter
provider right you add up fay-ta' so
let's say this with your class like a
user class here you are saying adjacent
filter and then you are saying user
filter you defining the name of that
that in here you are defining the name
of the filter so when you send your
response back where do you send your
response back right that's your API yes
where you have said that this endpoint
will be minus DP so you would hear there
you would say filter on all except name
I like this approach but there is
another point like this also we said
serialize all except SSM so what happens
is that if I do this even if another guy
goes back and he has more attributes
they will not go back they will not go
there because this is quite listening
right he has to come back here and add
more attributes whatever do whatever
attributes even sent back so in this
case if I would have added a poor like
this before even if our developer goes
back and as SSN this will not be
displayed to anyone actually right and
then if you want to display SSN to the
admin he would have a check here you
says if you are it mean then filter at
all except in a name comma system that's
it right so pretty pretty nice cool
feature and the exception I think
everyone knows about it just go over it
quickly okay since I have a demo okay
what happens right just look at one of
the end user okay so he is invoking at
all causes exception okay well yeah it's
exposing some you know parts of my code
not bad but it doesn't look good right
so what do you do right
well first thing is like catch all
exceptions everyone does it but how do
you prefer if you have a team of 100
people right i mean maybe ninety percent
of those people will have correct and
the message hunters right but how do you
control rest of the people right so
there's something called global message
handler this is what you can do you find
something called up injustice a provider
this your provider exception mapper and
this you exception so if right if so now
you will catch exception you do whatever
you want to do with it but let's see if
you don't catch it then this is a global
messin it's going to catch your
exception and it's gonna throw a pretty
nice message to the user right so let's
say after will try the same call after
adding that provider will invoke the
same call here and let's say there you
go so in the code so there was a piece
of code which was not handling it but
somewhere else we added a global message
provider and it basically handled your
exception free for you pretty easy few
lines of code and then talk about
session management in rest sessions are
expensive right because they take memory
on you know on your server so thus
approach not to have sessions at all
well it's good but the Fisher would be
what happens if you have just like we
had a user interface what happens if you
have user interface right so in that
case right if you don't have a session
that would mean that with each call you
need to either send user ID password all
you need to authenticate thank you right
so what can we do for that right let's
look at liquid I just came up with these
options I mean you can think about more
option number one could be something
like this right so let's say if you have
a user interface I can do something like
a jet set up this is again done that you
know a very higher level
right you can say some client and that
says user interface right so far what's
gonna happen for all my ajax college
scored a header which has a string core
user interface right on my server site i
will have a code with check so this is a
custom header I say do you have a header
which say some fly does it says user
interface yes okay i'll maintain a
session you know one of the options you
can try that would mean that clients who
come you from your user interface will I
have a session and clients like I've
been showing from the call they won't
have a session pretty I mean pretty
easily this can be right option number
two you could have different users right
you can say hey well if you are of you
if you are a user of type A then I'm
going to have a session for you if you
are a user of type VI won't have session
for you right but that as introducing
user management no one will like right
option 3 12 tokens you know everyone has
been tokin has been using tokens we're
tokens you can have a finer control as
well so for example the way it would
work is that that's if you applied and
he wants to use your API like a REST API
you would say okay well come through
come to us will issue you a token right
what do you want to do with that when
the token you can have more information
as the light you can decode your token
or s re-encode you took in such a way
that it will have some information
regarding which your positions you can
perform right and you can encrypt it
give it to the client can I sense that
occur with its call you decrypt it and
then say oh well okay you can do read
write or read only you know that kind of
stuff you can check okay let's talk
about unsecured channels since we are
from cairo sign we must talk about ssl i
guess right so one vs SL I think and
everyone knows about it if you have
questions you can come talk to me but
this example if you have a patch a this
is all you do it you define a third file
and a key file pretty simple to way ssl
how many of you know about to SSM nice
okay well the question would be where do
you use it right so let's take an
example right i mean one way is slm your
nose right well let's say if I have
if you look at the rest right let's say
if I have all these servers in my data
center right and I have all these r SJ
pas available but some of those aps are
very critical right critical in the
sense maybe some of them could I could
switch your data center you know who
knows right you can have a big for that
also so that then in that case it has to
be really really scared right no user ID
nosepass verb it has to be really really
scared when only few clients can you do
it right the few clients clients by my
place I mean your machines on the other
side can put it right so what you could
do is then let's say if there is a
computer on in your asia-pacific region
you could install a certain asia-pacific
region and then on your server side you
would say okay well whoever connects to
me must authenticate itself also so you
would say okay so these are you like
authorized price those are the your
boxes right so it's an ssl verify client
required and ssl CA certificate is this
so no whoever has this cert okay can
invoke this call can come to this so
yeah I mean if you look at Apache you
can define your V host can come to this
vivos and in that V course I can say
this V ourselves these calls right so no
only even if someone steals that cert he
will not be able to connect because your
host name your other kind of good stuff
at one match right it has to come from
that machine so this is how you can do
it few more questions I think we have
less time we come to talk to me so issue
with ssl right very slow right
so if it's slow then if you have clients
I think if you look at amazon web
services right i mean they are expecting
in or twitter itself right if they are
expecting that a lot a lot of they will
have lots and lots of clients right so
if do you have assets and throughout the
communication it's going to be really
really slow I mean you probably would
need lots and lots of summer to handle
those kind of liquors because the
encryption decryption takes up i right
so what can you do okay so signing rest
api erica's let us look at this right so
client uses a secure channel so so what
we are i am trying to say here is that
ok let's say in this scenario the first
call will be secure ok so you connect to
your server and then say hey you invoke
endpoint or get api key so you get a
take a key right this is called this how
you do it in curl and this is https this
is secure so you securely get a key
right you control that key you can
expire it you can say this key is only
oblivion for 24 hours and other kind of
good stuff and then client assembles
arrest call for non secure channels ok
this is how you do it this is some Java
code snippet so basically in the sense
what is trying to do so let's say if you
have a rest api called / user / list so
you wanna sign this call right so the
call stays as is but you will calculate
a hash based on this key not only your
client knows this key and your server
knows this key and then you send this
data over unsecured right you would send
this data over non-secure earlier so all
we are trying to do to say here is that
any call you send over a mosque you're
here non-secured layer you calculate a
hash and then you put that hash in data
on the server side server gets it this
is wow I got massage he calculates the
hash again and only client and server
knows that key they can you know pretty
much so basically the data is going over
an unsecured earlier but it's making
sure that it has not been tempered on
the wire right but this has some issues
to write the issues are this request can
you replay right so even if there is a
attacker he can wiretap it since it's
not scared he looks at it is a nice
cannot change it because there is a hash
but you can say i'm not going to read
right right if you under a piece I kind
can say order 10 pieces probably right
so what can you do right if you have non
scripture you can probably use timestamp
so that would mean that so it will only
help to narrow the window so this
narrows the attack window right it will
not eliminate it totally but it'll
narrow so you can say I sent you a call
and this call will have while I span of
five minutes let's say or 30 minutes
whatever time frame you think is
feasible for the call that way even if
attica records it and then looks at it
and if we replace it if you replace it
with in let's say 15 or five minutes he
can do it but he replaces later on you
will not be able to do it okay so broken
authentication something like this right
so what will you use this anomaly we use
this extent occasion for us pretty easy
right no sir so always use HTTPS if you
are using basic authentication always
use HTTPS because you want to send your
credentials securely this is how you do
this your client gets server-side are
busy off is going on the server side you
there is a Hydra dr. ization you get
something like this because base64
encoded you get this your data and then
you decode it this issuer you know
credentials again a simple stuff all
this intercept on us cause right so we
have been talking about all these calls
which have not been tested by Q right so
i would say that intercept everything
which comes to yourself right but well
there could be something which you don't
want to check a thing for example some
public resources right and thats if you
have images i don't know probably don't
wanna check user to think addition for
the image is right and most of times you
have a you know modern architecture
where you have a application server and
that you have a web server you would put
your images on the web server you're
fine there but if you have some
resources i would say use a white list
instead of blackness so that is what
exponent is that intercept all the calls
and then in your filter you say every
anything which is going here public
resources I will not check at
integration so in so what this will buy
me let's say tomorrow if a developer
goes back and adds one more endpoint
this is secure because I'm saying start
here is gonna intercept the call you can
either use intercept interceptor and
then filter or you can use something
called container request filter
injustice it gives you some more
features but either way you can have
your thing done could use SSO to I think
we need another day to talk about it
let's talk about missing from cyril evil
exes let's look at these two things
right this is also very important so
let's say there is a centigrade tip line
he has access to a resource 1234
injection could be six seven eight nine
night so he's trying to access I source
or I count to which it does not belong
so when the call comes on our side you
want to make sure that the user who has
who is logged in he has access to
resource this right so whatever you're
storing in the database now is the
resource know so any user will try to
access it you want to make sure that
that data you know that user has access
to that data another thing is something
like this here user can if user looks at
your end point here and even trying to
change this some string here like I mean
like or if you know that there are some
cause made to slash everything he will
try to mimic this so you want to make
sure that user you have your 10 ticket
the user against this call right so if
you look at justice to dot oh right i
mean you can if you have a method right
so let's say there is a method called
get admin user list you can define that
only admin has excess and then admin
would be a role in your normal g2e you
know web app whatever rules we have been
using so forth you can define a role and
then you can make sure that I think
there was another talk about that so at
the method level you can say this method
is only available to that mean with that
we conclude our presentation if you have
any questions we are here
yes I did I believe this has been
recorded and it's going to be available
on point of all this drama yes so yeah
it's already a welcome it's an odd the
yeah slides right thank you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>