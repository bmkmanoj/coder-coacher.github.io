<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Nashorn: JavaScript for the JVM | Coder Coacher - Coaching Coders</title><meta content="Nashorn: JavaScript for the JVM - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Developers/">Oracle Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Nashorn: JavaScript for the JVM</b></h2><h5 class="post__date">2015-06-02</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/TjrCPLdvUns" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">welcome to the NASCAR session my name is
Jim Lasky I'm the lead on the project
it's been a project that's been on the
go since 2010 and we finally got
released with JD Kane at eight here in
the spring I'm not really going to be
talking about anything particular that's
secret everything is in the open source
but I have to have the legal slide just
get through I wanted to also talk about
some of the other talks that that will
be discussing that's Warren during the
conference there's 29 sessions on
JavaScript there's 18 on s horn there's
nine on Avatar jas which is the note jjs
implementation of on that on s horn
these are two that you if you're
interested in a sore and you should
should probably attend the one in four
o'clock in the same room here is is
basically discussing the performance
improvements that been made on a thorn
in last year in a bit and then there's a
birds of a feather that's this evening I
won't have any Q&amp;amp;A time here today but
if you have any questions about ass horn
and you want to have a discussion come
to the QA this or the birds of a feather
this evening there's specific talks on
Avatar j/s which is again the no Jas
implementation I'm running under the
nass horn there was a user group session
yesterday which is quite good describing
how you would tie it all in together I'm
not sure whether that's recorded but you
should look for it in case it was
there's FX talks which tie in Nassau and
show you how to program effects using
NASA Warren and there's several talks in
the enterprise sessions that discuss
these of NASA horn in the various
projects
and finally there's a couple of sessions
on typescript and I believe both of
these versions of typescript or at
running on top of NASCAR if you want to
contact us the first line is basically
our mailing address if you have any
questions please mail to the group
either member of the group will answer
and as we've gone on what you'll find
members of the community will also
answer questions there's usually
activity on Twitter discussing NASCAR
neither either of these tags more likely
the second tag because the fact that
it's it's for more commonly recognized
but that you also get conflicts with
World of Tanks if you use that because
that's one is a type of tank in the game
or any of these members of the team you
can contact directly with Twitter and
it's important to get involved in what's
going on there are quite a few projects
out there that are using Ness horn right
now if you have any projects I'd like
for you to contact us so that we know
what you're doing and find out which
direction is you're going and we'd also
like to help out and make sure that you
get going if you want to use this logo
in your project please feel free and you
can you email me to get a copy of it
that's presentable in your project ok so
the agenda is basically I want to do a
quick overview of what Ness horn is the
boat I'm going to show you some
debugging capabilities built into to I
NetBeans I'll talk a little bit about
some of the features some of the
noteworthy things that questions that
people have asked and you wanted some
information on how to do certain things
a little bit about performance I'm going
to push a lot of that off to a Marcus
and his discussion this afternoon and
then a couple of demos just to show you
the sorts of things you can use nashorn
for
so NASA iron was officially released in
the spring with jdk 8 it had been a
project that started as I said started
in 2010 and gradually build up to a
reasonably sized reasonable size team
and we've focused on primarily making
sure that nests horan was xmas script
compliant and is one of the few
javascripts out there that is actually
fully a script compliant we follow the
five one aspect to the letter one of the
main goals of ness horn was to put a
layer of scripting on top of Java so
we're a lot of the other Java scripts
were in were isolated work in browsers
and didn't have any tie into anything
else we wanted to be able to exploit all
of the ability that that we have in Java
all the huge libraries that are sitting
out there so I tend to think of NASCAR
as being a scripting layer on top of
Java that allows you to tie in things
together but but that said it's also
full implementation of JavaScript so if
you want to program entirely in
JavaScript you can use nasrin for that
there's lots of documentation available
either through the the project wiki also
in the project wiki there's a list of
all the articles and documents and
videos that I've been able to discover
on this horn this complete list like
this keep on adding to the list as I is
a run across things there's also a blog
although the blog is a bit a little slow
lately hopefully after the conference
i'll be able to update it a little bit
and put a few things on it but there's
some really interesting examples on the
blog that you can take a look at so how
do you use ness horn well if you're a
Java user you can use the Java X Script
API to to use nasir on all you have to
do is get an engine to work with and
then once you have that engine then you
can evaluate
javascript expressions you can assign
properties within within that script and
you can retrieve values from that script
so it's really easy to use a lot of
these examples are available from the
online documentation you can also use
the dance or indirect engine directly or
create an astringent directly and I'm
showing you this because later on we'll
be talking about how to pass options and
filters through to the engine and in
order to do that you need to be able to
to create an ass or an engine directly
so this is the API for doing so if you
install Java you can also you also have
access to the jjs command so JD s is
Java JavaScript it's part of the the the
command sweet that's available to you in
the JDK and once it's installed you can
just use it to interactively work with
with NASA iron or you could work from a
script file so you created two gs script
file and then you can execute it
or if you're to it like me you use
javascript to do all your you should
bang scripts so instead of using Perl or
Python or bash or whatever you can use
Nass forum to do all of your shell
scripting as well so there's lots of
ways of doing development in an S horn
you know you see a favorite editor and
create JS files and you're going to
execute them using the jjs command last
year I in my talk I had a little demo
called askari which was a debugger for
NASA horn and I wrote it entirely in
Nassau so to demonstrate that you could
actually do all this debugging since
then the NetBeans team has integrated a
lot of that into internet beans so you
can actually use netbeans to do all of
your Nassau and development so what I'm
going to do here is I'm going to switch
to a demo so what I have here is a net
bean session I've rearranged the windows
a little bit just to highlight various
key things to work with here what I did
was I took the jsu to fire whip sorry I
don't know whether it didn't come up it
did during prac there earlier session
here here we go okay
I have to take it out of power point
mode first I guess okay so this is a
this is too straight NetBeans I've
opened up at jas file you can create JS
files in netbeans or take existing ones
so in this example what I did was I took
the JS beautifier which takes JavaScript
code and and beautify it pretty printed
and i just added a few extra lines to
the to the example in this case assigned
some source to to a local variable
beautify the results and then put the
result so if I want to use this to run
this then all I have to do is say run
and the way it goes and then there's the
result so it's taken that's that string
of code and beautified it and print it
at the result so it's very
straightforward very straightforward to
use so what I'm going to do in this next
session here section here is to actually
put a breakpoint in the code so you take
can take any javascript file insert
breakpoints and then instead of saying
run you say debug and it'll start
running and stop at the break point and
you can look at all the local variables
in detail excuse me here so like you can
look at the the current global it's
filtered out all the the key Global's
but all the Global's is sitting there
that you can work play around with and I
can step
okay and you can see that there was a
result there and I can view the values
and the result you can see that there's
new lines inserted into into the code
and then if I continue on it prints the
result netbeans will also allow you to
walk through the Java code so if you
have JavaScript code that's will walk
calling java code it allow you to walk
in through the Java code and back out
again so you can do stack crawls and see
your java and javascript in your
interleaved so it's a quite a good
environment to play around with nests or
okay oops
I have a little bar here that's
preventing me from clicking well okay
that's okay off to jump ahead here
excuse me get through here okay
okay so next I want to talk a little bit
of put some of the features one of the
things that makes nasser and work well
with java is that it has this api called
Dinah link which allows you to tie in
any of your JavaScript calls or accesses
to properties or construction of new
objects to external libraries such as
the Java libraries or if you have
another language and you want to add the
ability to talk to that language you can
use Dinah linked to connect up
JavaScript to that other language so a
lot of the stuff that you work with in
Java from jeff from Nass warren is trans
totally transparent to you it just it
just happened it just works it's just
straight up so for instance if you
wanted to use say the script engine from
nass warren you can get the script
engine class and then create a new
instance of it or if you wanted to use
the file I the java.io.file class you
want to create a new instance the file
you can do it directly and NASA are in
bold make it look like JavaScript even
though it's connecting to Java if you've
been to a rhino user there was a
particular way of actually accessing
Java from JavaScript using packages but
in s orem we've introduced the Java
object which makes it a little bit more
clear exactly what sorts of things are
going on it's a lot more efficient and
also allows you to create things that
you would normally be able to create in
in rhino so for instance in the last
example here we can actually create a
double array from from nasr on where we
couldn't do this in in rhino
you can work directly with collections
from run from Java in this case we can
work with hash maps so you create a new
hashmap you can put values in the hash
map you can get values from the hashmap
you can iterate through all the keys or
injury through other values this is a
slide from last year and since we are
just before we released we actually
added some glue into dyna link which
allows us to treat hashmap properties
the same hash map entries the same way
as you would treat JavaScript properties
so once I've created the hashmap I can
assign values to that map using
javascript properties or retrieve them
using javascript properties and the for
loops and the for the for loop in the
for each loop will allow you to iterate
through values and keys in a more
intuitive javascript way arrays are
pretty straightforward if you wanted to
create a new inter a in JavaScript a
java enter a javascript you just get an
instance of the type and then create a
new instance of that indicating how many
entries you want in that array and then
you can start assigning or retrieving
values from that int array so once you
have those those java objects you can
pass them to java calls or you can make
you have a calls against them is if it's
also possible as a half way down there
we have this call to java too it's also
possible to convert a JavaScript array
into a java ray with a single call so in
this case we want to create wanted to
convert the JavaScript array 10 10 20 30
we can convert it all into an inter a so
then we can pass it directly to a java
call is expecting an int array
no no and again as we were with hats
maps we can iterate through the keys or
the values of an array Java array if
you've been using JDK 8 you've been
using lambdas probably since I was one
of the the key features javascript has
already had land us for quite a while
and lambdas in JavaScript or the
equivalent of lambdas and JavaScript
work back and forth with with Java so in
this case we can pass a function
directly through to the thread
constructor and in this case it would be
expected to be a runnable and that NASA
one will automatically can convert it
into a runnable call so then when i run
this thread when i start the thread it
will actually call a trendabl directly
as though it was a java java method so
unlike other Java scripts we have the
ability to create threads within the
environment and work with them and there
are various tools out there that allow
you to to interact with threads and I'm
not going to go into it in this session
but there's some some articles that you
can find online that describe how to do
threading in that's where and you can
either leave lambdas and nests or mass
or no JavaScript functions so here's an
example where we have lambdas where
we've taken the list and gone into
parallel streams and then we pass a
filter which a filter and the filter is
a JavaScript filter not a Java filter
over map where we've done a map which is
passing the JavaScript map lambda
equivalent so you can work back and
forth between Java and JavaScript
as I mentioned earlier you have the
ability within NASA want to do scripting
the same ways you would use scripting
and Python or whatever but we've added
some features to the language what makes
it makes it easy to do scripting so for
instance if I want to pass command line
arguments through to my program you have
the ability to access it two ways
actually using the JavaScript arguments
variable or using the dollar sign our
egg variable and either way will like to
take arguments from the command line
we've added features again to make it
easier to do scripting so we had it
templates templates strings so if you're
using an S form from the command line
then you can actually use these this
template style which will insert the
values into the string makes it really
easy to write scripts and we've added
here docks as well so especially if
you're doing server side stuff and you
want to embed HTML documents in your
code you can use the here doc to embed
the embed in your code and template
templating works there as well so you
can insert values inside your template
that you're here doc you have access to
all your environment variables using the
dollar sign env so if you want to find
out what the current working directory
is you can you can get it this way or
find out what the current user is so
again you can use it for writing some
fairly sophisticated system screams
you also have the ability to execute
system commands so using back tix the
same as you would with another another
language you can say get a listing of
the current directory the back tix is
actually short a shortcut for the dollar
sign exact command or function which
will go off and execute the string that
you've you've specified you can also
specify input to that command so in this
case feed feed this to the cat is being
passed through to the cat command and
then you can get the results either
directly from the command call or just
three special variables which keep track
of the output the error output or the
command result so you can always look at
this as a result and there's own this
last example at the bottom here is you
can see that I'm assigning the current
working directory to the top directory
do that programmatically and then when I
execute the PWD command it will switch
automatically to that as your working
directory so that's how you switch your
working directory and to tie this all
together we have a lot of support
commands if we're exiting from your code
printing or echoing reading and lines
with probs read files and so on you also
have the ability to load other scripts
in bed in bed scripts the same as it
used for include and the last one is
primarily used for threading where is it
possible to actually load in the script
and start with a new global environment
so you have a whole new context so this
allows you to have new context per
thread so if you're doing a file server
as an example or starting a file server
but a a web server you can actually
assign a separate thread for each
context at each user and it can go off
and execute with a separate set of goals
just want to talk a little bit about
some things I assume that a lot of
people here are first-timers anybody
been NASA run session before one or two
okay one of the kind of questions that
we we get asked is how do you pass
options through through to Nassau and so
I thought it'd go through examples like
this to indicate how you would deal with
certain things so so for instance if I
wanted to pass the scripting option
through to nass horn normally you would
if you're using jjs I could pass dash
scripting straight through the jjs and
it would get past it to the the engine
but how do you do that when you're
calling a NASA horn from from Java so to
do that you have to construct an engine
using the direct implementation I
mentioned earlier on and you pass an
array of strings and each one would be
one of the options you want to pass in a
lot of people have been asking about how
do i prevent people from using java from
javascript so so they want to either
sandbox their code or they want to use
it as a teaching device but they don't
want the students accessing Java
directly and doing bad things so there
is a command line option called know
Java which prevents you accessing Java
directly from JavaScript but a lot of
rhino users have been asking for class
filters so with the release of 848 you
40 you'll be able to use class filters
as well which allows you to specify
which classes you want filtered out the
example that that we've worked up here
is we create a class filter
we define call my filter we define the
override override function that exposed
to scripts it takes the class that
witness about to loathe and you can
decide whether it should be allowed to
load or not so you can fill the filter
out anything you want to be loaded or
not loaded into the environment or I
have access to the environment so once
you have that class defined with the
filter defined then you can to say get
new script engine or get JavaScript
engine and it will you can specify your
filter a new filter and that filter will
be applied to every every class load and
will decide whether the class can be
loaded and I'm an example here you can
attempt what we've done here is we've
said that we don't want any classes
loaded will return false in all cases so
if we try to access say the vector class
then it will throw a class on found
exception to prevent you from accessing
another question people have asked is
that they have a lot of code that they
brought over to say from v8 and v8 has
used the Const the cons key words to
define variables indicate constants
because we were 51 a 5.1 compliant a
constant defined there so what we did
was we added a command line option
called const of our which basically says
whenever it runs across the const
declaration it treats it as though it's
a var and then lots of good through to
the to the specification through the
specification issues with eight you 40
we've added a language flag which allows
us to to selectively turn on features in
the environment and in this case allows
us to turn on the ability to recognize
the let and const keywords if you
specify language equals es6 then es6
features will start to show up we
haven't fully implemented es6 yet but as
time goes on and we introduce new new
Essex features this will be the flag
that we use to enable that so with a you
40 language equals es6 will give you the
lap and const q word if you're using
const and in 51 format its treated as
though it was a VAR in in es6 format or
environment it will treat const / scope
as it is defined in es6 so there's a
semantic difference between the two of
them and then the light command
basically is a scope based declaration
of variables
also in eight you 40 we're introducing
something called a code cache in the
past if you have a fairly large program
it takes a while to compile the actual
program so the first time it will be a
little bit slower than you would expect
but if you have the cash turned on what
happens is the next time around when you
go to run the program it will actually
run under the code cache and won't it
won't have to compile so it's already
previously compile so as ability to turn
on the code cache by using about
persistent code cache you can say either
equals true or equals false or just
leave it in as if its treated as though
it's true and you can specify the size
you code cache as well so that you can
make it as a bigger a big as you want or
keep it small if you just want to work
with small scripts yes
it's a megabytes yeah
I want to talk a little bit about
performance a bit because not all of you
will be able to get to the other session
but i do want to push you towards going
to our mark session at four o'clock in
this room discussing in great detail
about the performance improvements have
been done in s Lauren but I wanted to
highlight some of the things here just
so that you get a sense of where we're
going the first thing is something
called lazy compilation the first
released an ass horn when it took a
JavaScript it compiled the whole thing
as it was right in and sometimes you
know there are methods or sorry
functions within the JavaScript that
don't don't even get used wire bond in
the compiling so lazy compilation is a
new feature that's kicking in with a you
40 and what what happens is that the
functions that are in the body of your
script do not get compiled until they're
actually used so that speeds up the
performance considerably and it also
allows the opportunity to wait until we
get information about the call to decide
how we compile the function so this is
where we get into optimistic typing so
optimistic typing is a new feature in
1840 where when you make a call to a
function it takes type information that
comes into the call and decide how to
compile that particular function so as
an example let's say if you had a simple
function that added the two input
arguments and say if you have to input
arguments a and B and you added them
together and return the result in
JavaScript you know that plus can mean
concatenate two strings together or it
could be add two doubles together or add
two integers together or double in an
integer so with optimistic typing we can
look at the inputs and say oh I'm
passing into integer values I know that
it's integer plus and the code generated
for that is going to be tremendously
faster
than just handling all cases optimistic
typing also has the ability to to redo a
function so if it's made a determination
that it was an integer at one point and
at some point later on you introduce a
double then what we'll do is recompile
that function and re optimized according
to the new information that's gathered
in an actual fact that will actually
create maybe two different versions of
the function one that handles inputs for
that are both integer and one that
handles in inputs that are one a is an
integer and the others a double so you
get the most efficient implementation
going anyway Marcus will discuss that in
more detail we've improved the
performance in the GBM for invoke
dynamic one of the nice things about
NASCAR has been the bill its ability to
be able to to show up bugs in GSR 292 so
there's been some a tremendous number of
improvements paid in in invoke dynamic
and we've also done a lot of
optimization of the other functions
built in functions specifically in the
array area but that's one of the huge
areas that we've improved on also
strings in some of the math and
renting's and and overall we've done a
lot of work in there are times yes yes
Marcus will talk about that and that's
it and I hit that session I won't be
talking about it here okay so yeah
definitely definitely that session okay
and we've made some other general
improvements in their own time so it's
next release of NASCAR and will be
significantly better in performance then
the for the first release
so that session is that I four o'clock
here in the same room so finally I want
to go over a couple of a couple demos
it's always tricky to come up with a
good demo for NASCAR there's a lot of
huge projects that their avatar Jas is
really good example of Nassau working at
its finest but to go into great detail
about how that's all implemented is
would take a quite a bit of time so I've
done a couple of Sybil examples that
take existing JavaScript programs and
converted them over so that they run in
Nassau and specifically nests Warren and
javafx so the first demo that I've set
up here is there's a library JavaScript
library out there called ckeditor and
what it does is allows you to edit HTML
from a browser that's a fairly cool tool
and it does it all using html5 and it's
it's very slick and I'll show you a demo
of it here in a second you can go to
that site you can get a hold of the code
and that's exactly what I did was I grab
the code and and tried to figure out
what it would take to convert it so that
would run under Nassau so one of the key
things that I did in in this particular
example is use something that's
available to you called j/s adapter and
what jas adapter is a a constructor
which takes set of properties defined as
such to allow you to wrap or box an
object so that all access to that object
goes through through the adapter so it
allows you to create something that
normally wouldn't be treated as though
it was a JavaScript object as though it
was a JavaScript object so we can
override the
you accessed properties using overriding
the get or overriding the put if you
want to set properties before the call
so using jeff's adapter i can i can wrap
objects that are in a browser as an
example so that i can work with them as
though they were javascript objects
inside an S word so for instance in this
example what I've done is just ignore
the first if statement for a bit here
what I've done is if I call something by
name I can take all of its arguments
drop the first argument because that's
the the the actual call of the function
i'm going to call i can convert them to
an object array and then pass them to
the javascript object from from a web
browser or if I want to get the property
from from this web browser object I can
pass in the key value for the get
determine if it's a number and if it's a
number then I need to get the slot from
the web object or if it's not the number
then I can just get a member from that
web project so once I've constructed
these this wrapper it's possible to take
webview say in Jeff FX and get the
document and get the window from Java
effects wrap them in this adapter and
then in my code down below here I can
actually just treat them as though there
were Nasir own objects so I from my
window I can get this ckeditor that's in
the window from the editor i can get the
instance of the editor that i want to
work with I can get the data from that
editor I can set the data in that editor
so that goes back it goes to blank and
then i can make function call back into
the
environment so ok I'm just going to
switch over to i'm going to escape and
switch
I think it's that going to come up so
this is this is actually jjs running a
shebang script which is all pure
JavaScript creating a window with a
webview in it an FX javafx webview and
in here I can actually type in this is
what ck editor allows you to do I can
I can you know type in with highlighting
and so on so forth and in the background
is creating the HTML to tie in with it
and I've set it up so that I've actually
overridden the Save button so that when
I push on it it takes the contents of
the window or of the editor and displays
it in a new HTML window and in the
background if you look through the code
I showed you earlier it set the the code
the text that was there before two blank
so it allows me to restart with a new
session so that was all from that and
that's when there was no jealous
involved there at all that was all pure
pure and a swearing code okay so before
I go to I think I've got this set up
your summers see if I can find it there
pardon okay so so in webview is built up
from the WebKit and WebKit has its own
version of java script running in it ok
so those those objects are Jas objects
okay so in order for NASA learn to work
with those j/s objects it's you would
put a wrap around it and then allow you
to access those Jaya subjects it's also
possible although we haven't published
how to do this it's also possible to
extend a dyna link to recognize those
j/s objects so this was wrapping would
happen uh for you automatically but we
haven't gotten around to that point to
do that but if there's a demand for we
will certainly be prepared to do that
okay okay so this next example I'm going
to run it first in in chrome here so you
can see it this example hopefully it
will come up it takes a while to build
that
this example won't even run in Safari or
opera or Firefox Chrome seems to be the
only one that it will actually run in
what what's going on here is that it
takes image files of each of the letters
of the alphabet and does random samples
of those letters of those images and
creates vectors that crisscross those
letters and once it has those vectors
then we can take those vectors and draw
them in various colors and what i'm
doing here is flashing through that
different colors of the spectrum to come
up with this so this is running running
in chrome okay so I'm going to quit this
and I'm going to go back to whoops go
back to my slides if I can find them
again okay
it's it's actually called the motion
graphic typeface demo you can find it at
open PennDOT I oh and what did it take
to convert this over to work in s farm
and surprisingly very little I pretty
much had it all done within a day or so
a day to convert it in another day to
tweak it to make it nice the first thing
that you run across whenever you're
converting a web-based example over is
is set interval or set timeout because
everything is all driven from from these
timeout timeout things to implement
those in nests horn it's pretty
straightforward and actually there's a
if you go to the blog you can see the
details about actually had to set these
up but this is the code here it's pretty
straightforward you created timer and
then you can schedule java functions on
the on the timer the key here is that
you want to run the functions on the
main loop so there's this call here to
perform that run later so that make sure
that that actually gets performed on the
main loop so that the graphics can be
run there so but other than that that's
very straightforward once you do to find
those it's it just works the only
exception that ran across was when
you're doing animation and you want to
sync up to the animation timer in FX so
again it's pretty straightforward you
just take a animation timer override it
with your own handler and in this case
my handler was checking a timer to see
if I should vibrate the letters a little
bit otherwise update and draw the
letters so that so that was the how I
handled the timing
the other thing the rain across was in
if you're working a web browser you can
assign colors directly to stroke to do
drawing you can't do that directly in FX
unless you create a wrapper for the for
the context and then you could actually
override the setting of the color color
to do the conversion for you so you have
to convert the string color string over
to a color or the other way to do it is
actually to create an instance of color
and set the stroke also in the this is
this sort of a subtlety but it's it's
it's something that's slacking in Java
and I didn't realize it and I'm going to
see we can get a change on this is that
there's a there's no protocol for data
in Java in Java environment so there's
no way to embed files within your
JavaScript so the way I dealt with that
was basically just create separate files
for each of the images that we're fine
so okay so as I said in this demo you
take the images of of each of the
letters do random samples creates the
vectors a list of vectors for each of
the letters this is the code that did it
in the HTML code the original HTML code
it's quite complex what it did does it
actually creates some off-screen
canvases and writes them into the
off-screen canvases and whatever it's a
lot more complex than you need because
of thing this is all the code I needed
from from a sworn I just reading all the
images into FX is this thing called a
gift pixel reader and allows you to
sample the pixels to see if it was a
black or a white pixel and that's all
you needed so that was pretty
straightforward and that was it it just
you know everything else has worked so
all the kid all the context for drawing
that was all the same I can do line to
move to the same as you would from any
browser and it just works so
I'll see if we can get this up and see
the other way okay and here we go
whoops yeah that's your right let's see
if again ah look at that oh yes here
yeah
yeah okay let me scape from there now
let's go back okay so there is they're
just running you can barely see the jks
up in the upper corner there so that's
Nats are actually doing the same thing
and you can see the performance is
pretty much the same as chrome so so
this quite a quite a bit of drawing
going on there's there's basically about
30,000 vectors per frame so it's it's
drying it a pretty good speed okay so
that's it that's it for my for my demos
and actually I do have some time so I
could actually take a few questions here
if anybody had some questions yes you
mentioned that cloud 11 complied in that
six in the works one of the things as I
started to do some 40 baths to
javascript is I realize that there's
really no consistent way to do a couple
fundamental things that we take for
granted other program one which you
showed organs from the command line and
then the other file really invited so we
have JavaScript you can write a note or
you can run browser what is file me like
how do you read five how do I code yeah
there's really no there's really no but
been no standard for that sort of thing
and it's been sort of environment
environment related it seems and I think
that for the most part you know we tend
to think of things in terms of resources
that you provided a URL or you are I to
that to that resource and then the
environment figures out you know where
it's it goes comes from so I you know I
would tend to think in those terms
basically create you know create a
package that which allows you to take
that that's that's the way everybody
seems to be going in general I think
next question yes
yes right nets are basically the in
Nassau and the strings are Java strings
so an S wearin doubles our Java doubles
and integers are integers so the only
the only thing the time that you'll run
across sort of inconsistency there is
that that internally there is a
something called a con string in s oran
which basically speeds up the
concatenation of strings by postponing
it to the last minute if you're passing
a string argument to or something to a
string expecting a string argument in
Java it gets converted for you
automatically but if you're passing it
to something expecting an object it
doesn't convert and sometimes you'll run
across that so it's always best to say
string parenthesis your string value
close parenthesis and they will
guarantee that it will always be a java
string so yes
there's a we have a include file called
Mozilla compat jas which you can load
using the load command and it will do
most of the compatibility issues between
rhino it's it's not perfect thing about
rhino is that Rhino was was the sort of
experimental ground for a lot of new
features and some people expected those
features to be there even though they
weren't part of the specification so we
can't guarantee everything but there's a
good percentage that's available to you
so I had no hand here yes yes deal so
there's some method names
yes so it uses the JavaScript version
first and if it's not compatible with
that then it goes and uses the java
version so yeah yes it's it's is yeah
it's very thin it is very the layer
between JavaScript and Java nass horn
it's like it's the same as almost the
same as it straight java call you just
not a lot of overhead involved at all so
okay I'll let take one more question and
then we'll call it a wrap yes well dot
the dumb question is something that I
always ask and I'm really relying on the
community to come up with an answer for
that there there are several people been
working with ian Vijay s and trying to
flush flush it up and putting FX in
behind but I like to see some
coordinated effort but I think it has to
be driven by the community because it's
it really doesn't the Oracle has no real
interest in it per se but I think the
community as a whole does so if if
people want I'll be willing to spend
time and helping getting it organized
but if the community wants to take that
one on I'd love to see it happen so ok
thank you very much</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>