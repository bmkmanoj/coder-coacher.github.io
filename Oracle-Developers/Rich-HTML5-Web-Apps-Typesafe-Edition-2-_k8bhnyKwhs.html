<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Rich HTML5 Web Apps: Typesafe Edition 2 | Coder Coacher - Coaching Coders</title><meta content="Rich HTML5 Web Apps: Typesafe Edition 2 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Developers/">Oracle Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Rich HTML5 Web Apps: Typesafe Edition 2</b></h2><h5 class="post__date">2015-06-02</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/_k8bhnyKwhs" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">okay hello everyone thanks for joining
us and welcome to our talk rich html5
web apps types of addition to this is a
continuation of our talk from last year
but don't worry we'll revisit all
important details you're not going to
miss anything my name is Christian solid
like I work for tables by Red Hat hi I'm
Jonathan Firth I work with Christian at
Davos and today we're going to talk
about how you can use Java type-safe
language to develop html5 based web
applications using a framework that we
developed which is called a ride right
so at this point we usually get this
reaction 2014 and this guy is showing us
another chava that same park what's
going on so we thought it might be a
good idea to do this presentation a
little bit differently and actually look
into why we need frameworks in the first
place and what problems they can solve
and being the first question is is there
even a problem left to solve in 2014
yeah I think I think there's a few and
let's start with this one that I think a
lot of us have run into it's the problem
of collaborating between web designers
and web developers so we've got over
here on the left our web designer who's
familiar with a set of tools that we're
not so familiar with they like things
like indesign and photoshop if you're
lucky you'll have a designer is also
comfortable producing HTML and CSS files
but they're not comfortable with
procedural programming logic and all of
the stuff that we like to do to add
behavior to their designs they just give
us static designs so there's us over
here with our set of tools that we get
to use to add behavior to things we use
IDEs compilers we're comfortable in text
editors we like version control systems
and build tools as well and these are
all things that are sort of out of the
realm of our designer so the question is
where is the overlap what what's the
right medium of communication between
these two worlds how can we be effective
yeah I know I mean that that's a solve
problem isn't it like look at this so
did what is that and for those who can't
or don't want to remember this is a java
server page
and it mixes UI layout and logic as a
feature and as you can see even in that
small example it already looks quite
nasty if you were to merge in design
changes let's say you get updates for
your HTML templates and you have to
merge that in it's hard it's not easy
right so does this does this solve our
designer developer dilemma is this a
good way to communicate with hands who
would like this I feel a lot of shaking
heads services no I don't think I work
but you know that's the past right yeah
now it's 2014 we've learned from
previous mistakes and we've come up with
shiny new things like angularjs is an
exciting one and if you wait a minute
hang on if you squint ah no there's that
still mixing logic with layout and this
is not a very effective way to
collaborate with somebody who's doing
our visual designs that's a lot of work
emergen changes right so that didn't
really solve the problem either double
buzz double bus there's only got one
more chance left ok so in RI one of our
missions was to set out and fix this
admittedly not that complicated problem
once and for all so what we do is we use
plain html5 standard confirmation el lo
custom elements no custom attributes as
templates so you can take this right
from your designer right from your brand
team and use it in your application it
renders just finances we don't put any
code in there so whenever you get this
sign up this you just override that
template so if we don't put any code in
there where does it go Jonathan oh
there's a language that a lot of us in
this room know and like to use it's part
of the name of the conference that we're
at so i think java is is probably a
great way to add behavior to this HTML
so here's what a companion java class
looks like in RI UI and so there's a few
questions you might have about how do
you use java to attach behavior to a
plain HTML template so first of all you
have to tell the framework that this
class
with an HTML file and to do that we used
the templated annotation which is up at
the top so you're declaring the class
level that this class is attached to an
HTML file then getting further down you
want to link up the individual elements
in the template the ones that you care
about with fields in the Java class so
that you can do stuff with them like
check their state or change their state
or observe events on them and to do that
we're using the data field annotation
and there's really it's pretty simple
and that the top example is how it works
most of the time you'll say inject data
field choose a widget type in this case
text box is the Java class that
represents the input element and then
you give it a name and if the name of
the field lines up with the ID of the
element in the template then those two
things get linked together if you can't
or don't want to use the same name for
the field as you do the element you can
pass in an alternative name like pass if
we go back one slide you can see that we
have input ID equals passed there but we
wanted to call a password in our Java
file so we just provided the name to the
data field annotation thirdly you don't
have to have the framework inject the
instance for you you can make your own
instance and in this case we've chosen
to create our own instance of button for
whatever reason in real life you'd
probably do this when you want to pass
some sort of constructor parameter to
the object that you're creating so we've
done all that we've got text fields
password field button but how do we
react to events that happen inside the
UI to do that we have one more
annotation called event handler and to
use this you pass the name of the Java
field to the annotation and that
indicates which of the widgets you want
to get events from and then there's one
other piece of information you need
which is what kind of event you're
interested in where they just generate
all kinds of events and we care about
click events in the case of the button
here so you can see the argument to the
on login method is a click event and
then the framework will now invoke this
method and
I'm the submit button generates a click
event okay and to see what this is
actually buying us or what we get from
this I'm going to quickly switch to
eclipse and we're going to look at a
simple demo if I find my mouse cursor or
there it is invisible boy to disappear
yeah oh that's going to make it easy we
lost the mouse pointer hmm great okay
keyboard it is so you see here we have
an HTML file in Eclipse the most punters
back if we click on this we see that
this is really just HTML and CSS no
javascript not java of course no coding
there no template bindings and to prove
that we can open that HTML file in a web
browser view to see that it renders just
fine as is it doesn't have to go through
a templating engine it's just HTML and
now and in this case it's a form to file
a complaint so very simple name email
and a complaint and just submit it and
so we want to decorate this with
behavior and we do this using the
companion java class i'm going to swim
in here again so by default java class
is the same name as the HTML template so
we open this we see what Jonathan just
explained we have a page annotation and
that basically says that class belongs
to that template and then we have our
data fields name email and text those
line up with fields in the template name
email on text
and we attach an event handler to button
so it's pretty much the same as junk
just explained and the big benefit is
now that if I were to change something
here let's say I call this submit to and
safe then I immediately get an error in
in this IDE telling me there is no
submit to in test template so what are
you doing and this is typesafe this is a
nice setup so it fails while you're
doing it and doesn't fail at runtime or
a two o'clock in the morning so but how
do we do it is what's going on here this
is Java on a client and this is type
sake how does this work right great
question how do we get our Java code to
execute in the browser I guess one
possibility could be that we're using
the Java plug-in and everything's in an
applet but that's not the case instead
we're going to compile our source files
twice using two different compilers the
bottom branch here on this little
diagram is the sort of regular thing
that we always do we have the java
source code flowing into the java c
compiler which then outputs by code in
class files we do that all the time
nothing new there but also we can take
the same source file and run it through
the quit compiler and that's going to
spit out some JavaScript instead that
can run natively in the browser so one
source file can turn into class files
for the server and JavaScript for the
browser okay joven just mentioned the
quid compiler formerly known as to
Google web toolkit who here is familiar
with grid and you quick show of hands
that's about half okay I'll just quickly
briefly mention what it is at its heart
is really a Java to JavaScript compiler
as Jonathan just said which will take
care of cross browser support it will
actually compile different permutations
for different browsers you don't have to
deal with that it will apply a lot of
heavy upfront optimizations to the
JavaScript so that in almost all cases
going to be faster than any handwritten
told you could come up with oh I could
come up with this
it also provides development mode and
super death mode now which gives us that
code and refresh development experience
so we just change code and refresh the
browser to load our changes and we can
debug client and server side code in our
ID so this is really what a grid
provides us and we're mainly leveraging
the compiler in test mode so how does it
know what to translate the JavaScript
and work to translate to Java that's
based on the package name by convention
but it's also over rideable configurable
so by default everything it's in a
client and shared package will go will
be available and in JavaScript and get
compiled to JavaScript and everything
that's available in a server or shared
package will be compiled to bytecode and
that goes to your server and the rest is
religious that a standard in this case
is a maven a Java project layout there's
nothing to explain here the only thing
that we add is an arai a properties file
which is in almost all cases empty we
just leverage it to do class puff
scanning more efficiently so we get
faster refresh times okay so that's
great and how this works in theory but
awry it's a lot of features to this yes
so what do we get from arai beyond what
we've just gone over that's already
available in quit well first of all we
have this constellation of features from
Java EE so things that are already there
on your server and that you're taking
advantage of in the server side of your
web application we are now implementing
these things on top of quit so that when
you compile code that takes advantage of
api's like jax-rs for restful web
services CDI for your dependency
injection and event based programming
jpa for persistence you can actually use
jpa entities and they'll store
themselves through the familiar
entitymanager api into the browser's
local storage and you can query for them
later also a tab local storage and bean
validations another great example of
something that you really want to share
between the client and server but
there's more there's a few things beyond
the
e six standard ap is that we've sort of
invented ourselves there's the html5
templating that we've already looked at
that gives you a nice decorative way to
create you is a two-way data-binding
feature that lets you declare to the
framework how to link up the fields in
your UI with the properties of your
business model without actually writing
a lot of boilerplate code page
navigation framework that helps your
users keep their browser powers that
they expect to have like the back button
and forward button should work and you
should be able to bookmark things and
get back to them later so that's what
page navigation is and finally mobile
support we make it easy we give you some
help packaging arai apps as cordova or
also known as phonegap applications so
you can have a native packaged
application for the android or iOS App
Store okay I mean it's great so we've
heard that we can now use Java on a
client-server we can even use to Chava
ee 6 AP ice on and share them between
the server and the client and that
really helps us with this problem
collaboration within large teams we
often especially as projects crow we
have different teams the clients a team
and a service i team and a common
example is that and the server-side team
would develop a data model and
validation logic and the client-side
team would do the same and we try to
address this with this for example so
this is a jpa entity as you most of you
are familiar with all of you probably
you would use it on the server to
persist it into your relational database
using RM and now you can also use it on
the client to even persist into the
browser's local storage if you wanted to
and keep it in sync but more importantly
to represent a data model and to
actually use it in your UI so you're
using the same type which avoids code
duplication and makes it easier to
maintain going forward and we can even
press this entity into even further
service on the client by as we mentioned
data binding another feature we can now
the bottom you can see inject model user
complaint so that's that same jpa entity
that we were just looking at that we
already had for our server now it's
available as a client site type and
using just these new orange annotations
that's the new stuff relative to the
last time we saw this you're saying this
user complaint object is my model its
modeling whatever the form is showing
and then you just tell the framework
which of your fields relate to the model
in this case it was all three so we
annotated each of the email username and
text fields with bound and that's not
declared that all three of those fields
should get linked up to the model
without us having to do any further work
and it will be kept in sync both ways so
if if the user complaint object gets
changed for some reason the fields will
update themselves and vice versa of
course yeah sure so the question is if
you have a couple of models how can you
bind them into one template and the
answer is two ways you trade so you
can't do in checked mode lay in a czech
model bees will either create a super
type as a model that has the two types
nested inside of it so you can do nested
bindings so you could bind to customer
address street name right so customer
being an entity it has an entity address
so you can do nested bindings that
that's one solution and the other thing
is you have to create a super template
that has two nested templates so that's
the two ways but one template of class
one model but you can nest it both ways
either on the UI level or on a data
model level I'm going to try to switch
back to eclipse and see if i can find my
moss point at the time there we go and
look at this again in the IDE because
they will make it easier so first of all
the user complaint we're back to this
jpa entity and you can see it's of
course in a shared package because we
want it on the server to persist it and
we want it on the client as well
and then in our complaint form we inject
it as a model user complaint and then we
bind name email and text using the
boundary notation and name email and
text not by coincidence line up with the
fields in the JPA entity now as we
mentioned earlier we want this type safe
setup that's why we're using child were
in the first place so if somebody
decided to do a refactoring here because
your architect said text is too generic
let's call it I don't know complaint
text recruiters for factoring and now
right there the client-side code breaks
and it will tell you will say well I
can't bind to text in your in your data
model because there is no text anymore
so in this case we could seem to say
property equals complaint text and yo
goes away so it feels right away it
doesn't feel the next time you deploy
and your clients that developers figure
out that something has changed yeah we
don't we don't like those 3 a.m. calls
or some panicked person is saying every
complaint we get is blank and we don't
know why alright so we've seen how we
tackle on to problems so far I'm depth
collaboration with designers and
developers and collaboration large teams
basically the types of setup makes it a
lot easier but i believe down more
problems always more always more
problems so how about this one this is
something we're all familiar with is the
problem of repetition in our code base
and in this case where this picture in
the background is pretty but it's also
an analogy so say up here you've got the
mountains and the trees over the top
think of that as our server with our JVM
and all of our java stuff running
happily on the server and then below the
horizon there's a reflection of that and
it looks very similar and this was
representing our client side code which
necessarily ends up having a lot of the
same structures as what we implemented
on our server and if we write that again
we're violating that adriel principle of
don't repeat yourself and we're also
putting ourselves in a situation where
the client and server can the code bases
can get out of sync with each other and
we need to do a lot more work to update
anything because now there's two places
to change potentially even in two
different languages right and the reason
for this that we see this a lot more
than in the past is that historically
most of our logic was in a server but
even rendered the pages on so it just
really feed it the browser HTML but you
used to treat it as a dumb client with
limited resources they would just
display content and over the last decade
we move more and more logic into the
browser and while we're doing that we of
course also ended up having a lot more
codes on both sides of my code on both
sides we duplicate it a lot of the stuff
we had to because we're using different
languages right a good example for that
is coming back to the chi PA entity data
model a good example for that is
validation on the server you need
validation so you don't you can throw an
exception you don't want to persist
invalidate on your database but of
course for the user experience you need
the same validation on the client so
that you could su type validation you
can tell the user right away well you
know that's not a valid email address
and in arrive we solve this for using
the bean validation standard so we
simply edit these three annotations um
this is javi standard and this case we
said not null for the ID this is not
relevant to the user but arbitrary to a
size limitation on the name and a valid
email address and now we can use the
same division logics generated for you
so use the same on the server and other
crimes if the validation rule changes it
all updates automatically both on a
client and the server right so we get to
validate the form on every keystroke now
and give the user immediate feedback
that would have been not feasible before
right right that's just one example of
solving the duplication problem but
there's more we have a question okay
yes yes oh sorry the question was will
the custom error messages be shared on
the so inclined as well yes the will ok
so what duplication it we could address
right well we can have a look at CDI
does anybody here use CD I already in a
web application but yeah we've got some
okay great so this is a this is a part
of the Java EE 6 standard and newer and
its really become central to the whole
programming model in Java EE glues
everything together probably it's best
known feature is dependency injection
using the at inject annotation but
there's also another part of CDI that we
think is really interesting and that's
its event system and this is an
illustration of that system so if you
want to fire an event to some observers
you don't know who they are if you're
building a loosely coupled system in CDI
you can just inject an event the type is
called event it takes a parameter which
is usually one of your own types from
your own application in this case we
said document and once you've injected
that you can now fire a document an
instance of document to anybody who's
interested in observing one so the
second code snippet down here we've said
maybe when a button gets clicked we will
fire the updated doc event and now the
observers will see it so I guess that
leads the question how do you observe an
event right and it's just a simple
single annotation you annotate a method
parameter with EDD observes the updated
here is optional that's a qualifier so
you can further differentiate events and
you simply add that to a method you have
public void on updated document and you
say the event is the parameter of that
method so that method will get invoked
anytime an event is fired so that's CI
but with or I we actually get more we
get this mechanism with on the client
and on the server and we can even send
events across the wire so if you fire a
cgi and event on the server you can
simply observe it on the client and vice
versa which brings us back to this
unifor
programming model that we're trying to
create with variety using the same code
and excitement so we share as much code
as possible yes so that's a few of the
ways we can help with the vertical
repetition but there's another dimension
to the repetition problem that I think
we've also experienced so this time
instead of thinking about things being
duplicated between the server tier and
the client tier what about the problem
of duplication within one tier so a
great example in a web application would
be you have more than one page in your
web application and there's going to be
a certain amount of structure and
boilerplate and copying you need to do
to create a new page and add a new one
to your application which of course
means there's a lot of boilerplate you
need to update when you change your mind
of of something in a page another
example might be communication with the
server we're doing a lot of RPC in one
form or another where the client wants
to contact the server and give it
information or ask for information and
that's another really repetitive
cross-cutting concern and I think of why
can help us with that yes so there are
multiple ways of communicating with the
servant all right right now we're going
to focus on the classic invoking an HTTP
endpoint just doing a rest call to the
server that you'll probably have in
every single page and you have to do the
request logic just here at the station
law agency juice all over again and in
or I one way to do it is to use Chuck's
RS and we can use Chuck's arrest
annotations on an interface there's
actually a standard Chuck's RS feature
so here we map with a customer service
and we simply map the methods of it to
HTTP verbs to expose them using rest
endpoints and the twist now is that we
can use to shared interface on the
server we implemented interface which
exposes that rest endpoints exposes this
met this methods over HTTP and you use
the same interface on the client to
simply invoke methods java methods that
do all the reverse logic all the
serialization logic root server so you
get the standard HTTP us communication
but by simply invoking a java method and
i believe we have a demo of brigands as
well so we can see I'm the advantages
closing the old ones so yeah so far our
user complaints this is a shared
interface in the shared package that
carries Chuck service annotations where
we have the standard create update and
delete methods and the post put and
delete HTTP works so under you click on
the server package now look inside we
have an implementation of that interface
this also happens to be an e gb but
that's optional you don't have to use it
to be it's just yeah because we want to
transactions at some point so we have
the implementation of great update and
delete so that's what happens if an HTTP
POST request comes in it will
consequently map it to that create
method and we'll simply process that
user complaint so same interface is used
on the client this is back our form the
same form you've seen in the previous
two examples we can now inject a caller
to that interface and we do this so we
can simply say enfant call and then it
autocompletes although this is a
server-side method that we're really
invoking here from the client it
autocompletes since they create update
and delete your simply invoking the java
method and I will do all the standard
HTTP our communications server and even
besides autocompletion you get all your
other refactoring tools so if you wanted
to rename that method of course your ID
will be happy to do that for you kim
just seeing pft app running to a belief
so this is the form you can fill it out
it's not my email address
and if I submit this that this goes to
the seven transition so is it that's
simple but what this is really um by us
so if we go back to the interface we
should actually now be able to change
this and say our architect decided that
no more plural URL so we move to yes
safe then those means server-side guys
with commenters we start to serve up if
they're not new rest in point i'll do
that here for now then what happened to
our clients now that we've restarted the
server with new URL scheme right that's
the question that we go back here need
to find Firebug open that
let's try this active I hope so if I try
this again now with the restarted server
we should actually see a failure there
we go so of course the client is program
because the rest endpoint change we
restarted the server so what we do now
is go through all our JavaScript in
traditional web app development search
for all places where we contact the
server and change the URL right put it
in our case all we should need to do if
the demo gods are good to us is refresh
the browser reload the app and should
actually start working again if we are
lucky so of course there was all kinds
of CSS downloaded so sku all scroll all
the way to the bottom and this time i'm
going to use Charton
if I submit this now there they went
again and it used a new URL
automatically because we don't encode a
request logic in our code this is
actually generated for us by or I by our
framework so this is actually quite nice
I think yes much safer so the question
is can you debug the generated code so
generated code is actually also Java
that happens before you translate a
JavaScript and yes you can debug day or
you can do both right in that spot
against on that old development mode you
would debug Java and now in super death
mode you be debugging JavaScript and
using source maps that will be an
overlay so you can see the Java code
that cost that JavaScript code so you
can see both if you want to yeah we
could sync up after with anyone who's
interested and go into detail about
exactly how that works because it's
interesting but probably too much to get
into you right now so by now we've seen
how we address the collaboration problem
with the sinus how we could address the
collaboration within large teams and
also how we address code duplication but
I'm sure Jonathan knows more problems
there's always another problem so you
know projects get big it happens to all
of us we don't really want them to get
big but business requirements keep
layering on and when we've got a
programming language like Java and the
type safety and dual ability that that
affords it's something we can kind of
keep up with we can refactor as we go we
can eliminate dead code because our ID
he can prove to us that it's never being
called and we can sort of stay on top of
things before they get out of control
but if we're writing a large-scale web
application in JavaScript the tooling is
not as strong and it really can't be
because you can't prove that a
particular bit of JavaScript isn't being
called the the type information isn't
there so
I guess we like to not have a lot of
JavaScript but on the other hand
everybody else is doing it and this has
really done wonders for user experience
on the web applications so what do we do
yeah so did the opposite for develop
experience though because we're all used
to our IDEs to our type checking early
error detection I mean I wasn't likely
to reference a variable that's not in
scope there's not a good use case for
this all right you don't do this on
purpose so that can fail right away but
we don't get this if you're just do
javascript so we want our IDs so what
can we do what can we do which yeah
we've prepared a little demo to to see
what happens a little bit of role
playing yeah with these mics work as
well the runs on the desk
alright so we've got an angularjs
application here right so that's
actually quite popular and demoed to do
demo from angularjs and yeah simply add
to deuce and what we're trying to do now
is to simply follow an architectural
guideline again okay that's us from the
past I'm confused gene oh my goodness
okay so so before hang this
architectural guidelines Jonathan yes
and our architect said please in the to
do demo can you just rename this method
is a method of thing that's called ed to
do something it should be new to do i
don't know let's just do this he wants
that so yep ok so I'm uh I'm a
JavaScript developer I don't really
believe IDs provide any values so I'm
going to do this in Emacs because it's
more awesome so let's see we've got the
add to do method yeah as you can you to
do that's what he said there it is ok so
let's just change it ok place lets the
add to do we want new to do that's what
the architect said yeah little n new to
do ok no problem right just takes two
minutes ways ok refactored all right
we're golden ok before you blow it just
tested this who works ok never know fri
oh my goodness whoa so that looks like a
function definition your text box value
how can that happen that's not what we
were expecting we usually when we
refactor stuff in our IDE it just does
the same thing after you know I'm
getting nervous says want to get out
here for dinner so this just undo it
isn't deployed again ok ok undo ok we
just invert the operation right so yeah
ok put it back start with new to do I
need you to add to do
okay replace all good yeah okay okay so
back in business yep deploy awesome okay
I'll deploy that to production yeah
what's for dinner by the way then you
taco place is really good eyes hurt
sounds good oh I hang on it okay yeah we
don't normally take phone calls during
sessions but I guess this is an
important one okay yeah but so the boss
just called and apparently our app is
broken what no that's fine no I compiled
it I told you this wouldn't happened
with Java what the hell are you doing
like i'm shaking here okay okay so
that's that's our cautionary tale I
guess does anybody here nobody way what
just happened here oh we can talk out
there's actually super yeah you know
exactly very good yeah there was a that
was actually a field called new to do
and of course we couldn't know because
it did a search replace and then we
actually assigned yeah a function to a
field and the field was displayed so
yeah that doesn't happen with Java ok so
that showed another issue that we could
address maintaining large code bases
using types of languages um but Jonathan
you have another problem we should look
at well it's not a problem so much as a
as an opportunity okay sat down this
weekend you came up with the totally a
wheel design and I think it's going to
give everybody a great ride all we have
to do first is change all the roads
everywhere all right okay I don't think
we will get budget for this especially
after that disaster just said yeah
that's true okay so yeah usually we
can't do this right so we end up reusing
somebody else's library in open source
library we can contribute to or we rely
on open standards Java EE or you might
use spring and the reason is exactly
that we will don't want to reinvent the
wheel we don't have the time for it and
this is exactly what we've done in terms
of security cuz security is a very
common every web app needs it and it
takes a lot of time and you have to
basically update it every week
new security promise and arrive is
simply integrated with existing security
solutions right and as an example of how
sort of simple and lightweight that
integration is here is back to a
templated page again something we've
seen a lot of times so far in the
presentation and now we have the new
restricted access annotation on this
particular page because we don't want
people who haven't logged in to get to
this page so by sticking the restricted
access annotation on top of the class
we're declaring to the framework if
somebody tries to come here and they're
not signed in just give them the login
page instead now using that same
annotation we can go finer-grained and
we could say on a particular data field
that we have some security constraint it
could be restricted access so it only
shows up for logged in person or you
could go further and give it a list of
roles in this case we said admin so now
the anchor the admittin link will be
hidden from anybody who's not logged in
and is not in the administration could
do even more right we can apply the same
annotation on a remote endpoints back to
a previous example of that shared Chuck
crs interface we could just also use it
annotation restricted access on the type
or methods specifically to avoid that
methods being invoked from the client if
you're not authenticated and authorized
so we see the same example here of
course if you imitate the type it means
it's valid for all methods and a method
you can override it our specific roles
if you want to write and I guess is
another example a login page that's the
other thing you're going to need if if
you can log in you need a login page so
what does that look like ok so it's all
concepts that we've already seen we have
a templated page this is our login page
it's got name and password data fields
that are bound to a model user object
and then it has an event handler for the
login button and when somebody clicks on
it we're using collar just like we saw
with jax-rs collar demo and we're
calling login it's that last line of
code down at the bottom passing in the
name
password from the user object that was
bound to the data fields and then
finally on the response from the log in
when the server responds if we got a
user call back rather than an error call
back now we have that user object that's
an authenticated user we're logged in on
the server and the client can now
correspondingly treat us as a logged in
person right so that's about the feature
who wanted to show you and we definitely
have future work plan we're currently in
a rise in version free and for the near
future we're trying to work on features
related to web components in web workers
to increase further just client-side
performance and I'm client-side
developing models and we also plan to
use or provide more JavaScript API ice
so that when you as a Java developer
work with a lot of JavaScript developers
in your company you can actually
interact in a nice way so you can
actually use the same API its form
JavaScript if they want to and that
brings us to the end of our presentation
and please don't hesitate to get in
touch with us and thanks everyone for
coming
thank you know of course you'll be here
for questions please ask away yes
yep
sure so the question was if you've got a
piece of your UI that's marked as
restricted access and you and the
framework hides it how do you tell your
graphic designer what's going to happen
when that occurs and it's just it
actually is done with CSS is just a
toggle of the CSS visibility of the
element so the designer can toggle that
on and off in whatever design tool
they're using because presumably they're
working with HTML and CSS already yeah
yes please so is it yeah so actually I
would I would I would say that most of
our users extra field huge single page
applications and as at least
historically before we even had on the
UI feature so you but for that
navigation feature you can actually
navigate from page to page that's used
in let's go okay I can switch to the IDE
and show that if you hold a mic for sure
so for everybody else that the question
is single page applications and how can
we support us basically multiple page
layouts and or and what does the right
do for for either right so for the
multiple page layout to actually have a
navigation module and you saw it in
action only briefly when we sent at rest
request to the server and it came back
with a response it went to another page
and we do this but here we say in check
too we have this transition to and
that's another page this complaint
submitted is the same templated thing it
also has a netpage annotation and what
this will do is when you navigate
navigating using basically that in check
the transition saying go this will
actually create a bookmark up a URL in
the browser and go to that page so you
can use the back and forward partner in
a browser they will just work fine so
your history stack is with any other
multiple page app out there so that's
the feature that would you that you
would have to use if you want a multiple
page layout and for single page layout
you don't have that particular problem
anyway is that answer the question or
okay thank you
a riot self doesn't actually tie to any
IDE so you can use whatever you want we
have right those were annotation
processors so they will also work in
well with various degrees of
comfortability but it will work they
should theoretically work in all ids
they do the same thing and nepean send
idea as that's what you saw here yes
sure oh so this is the code here fail
oh yeah so you could either use our
response call back click here and check
for the error code here we check for
HTTP 200 200 one actually in this case
where we say the response status code
Rick impact is it 201 if we create the
resource if yeah there was a success
otherwise you'd been a narrow front
server deal with that but of course you
don't have to use a response call back
that call actually takes alternatively a
remote call back and an error call back
so it's like just two different ways of
dealing with it the response callback is
used if you where to post something and
you just expect a status code back but
you don't have to demolish all their
response then the response call back is
fine you just to check the response code
if you actually get an object back you
want a remote call back that actually
gives you access to that object that
came back and then you also want an
error call back there will be invoked
when the status code was not as expected
yeah
oh yeah so we could yeah basically the
remote callback will take a type
parameter for the object you expect back
so i can try to do this just erase this
so you could say remote call back and
let's say that we get a complaint back
again so this would be the way you do it
and then the callback method would get a
user complaint and if our large if you
get the up the response back from the
server our marshaling system would be
marshall it into that type and if you
can't it will fail but yes this is a
this is of course a runtime failure then
generic type parameters and caller there
it's that it's creative method actually
returns
right so the question is there is there
is no validation that that endpoint that
we just defined to return a user
complaint actually returns a user
complainant that's correct and the
compiler can't do that because at
runtime the server could always return a
change in structure in XML that
represents something completely
different and it could basically violate
whatever you define in that interface
theoretically but you get indirect
validation because you're not using the
interface only on the client which you
could do it's perfectly if I just use it
on the client to communicate with any
rest point and end point out there but
you're also using that interface on the
server in that endpoint implementation
where you actually this method he would
then return a user complaint and that's
types if therefore because the server
you can only return a user complaints
there so that's why it becomes type safe
in the end but yeah good question yeah
be aware of working with victory plugins
themselves you I owns an issue eyes
yeah that is something we've played with
and there is a little bit of interplay
with the client side templating that you
have to worry about because the way that
actually works when the template gets
instantiated in the client is that
there's a big resource bundled it's the
strings of all the HTML templates that
you care about and they get downloaded
to the client when the app loads and
then we use the browser to parse them as
little dumb snippets and then attach
them back into the live Dom so you would
have to be careful with your jQuery to
make sure that you're listening for Dom
attach events and then going through and
enhancing the Dom after the little
snippet gets attached you could kick
that off from your template because
there's there's a life cycle on the
templated components so you could do it
from Java code and call in to jQuery to
tell it to enhance or you could listen
for the Dom events and do it that way
whichever you up
okay I think we have no more questions
thanks everybody for coming out</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>