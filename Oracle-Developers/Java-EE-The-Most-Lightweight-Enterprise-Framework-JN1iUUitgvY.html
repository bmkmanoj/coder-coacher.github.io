<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Java EE  The Most Lightweight Enterprise Framework | Coder Coacher - Coaching Coders</title><meta content="Java EE  The Most Lightweight Enterprise Framework - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Developers/">Oracle Developers</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>Java EE  The Most Lightweight Enterprise Framework</b></h2><h5 class="post__date">2016-09-20</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/JN1iUUitgvY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">all right welcome to my session my name
is Sebastian Sebastian - now I'm a
freelancer consultant developer
architect whatever we call it based in
Munich Germany I'm doing Java obviously
so I'm a so-called Java champion you can
google that whatever that means and I'm
also in the JCP and in the jax-rs expert
group for the java ee 8 for jsr 370 and
yeah I'm a regular conference speaker
every now and then more slides to myself
I'm organizing workshops and trainings
both in Munich and in the beautiful city
of Oslo
so these workshops from for the first
round are about jax-rs with hypermedia
hypermedia rest with java ee and
furthermore continuous integration and
continuous delivery pipelines about
testing and all that stuff and these two
and Munich and Oslo can check out my
website and if you want to and this can
also be done virtually on demand and
just feel free to contact me yeah and
actually these are all my slides because
slides are boring and we do when I have
like interesting stuff right so
lightweight Java EE right it is today so
who a few things Java EE is somewhat
heavyweight hands up oh wow that's a lot
ok just to get an impression tell me
some things which you think are too
bloated or too heavy weight when using
Java EE just shout it out what are these
what sorry beans like in general all
kind of beans ok beans what else
the runtime like application service
okay application service what else
stuff like XML something like that yeah
alright so let's see what we do with
that we're with that if that's true
and in general if you have any questions
during my talk just feel free to ask and
just be rude and interrupt me and ask
questions that's good I don't have any
stickers or give giveaways to you
unfortunately but still questions are
welcome so what will I do now I will
implement a Java EE application using
maven and Java EE 7 plus Java 8 as a
runtime and all kind of runtimes as
application servers and so on and so
forth and during I will develop that you
can ask questions and I will explain why
I'm doing things like I'm doing then and
so let's create a project and draw B 7
maven project let's call it Java one as
we're here obviously and this is just
the script to create a project before in
the past I used maiden archetypes but
actually maven archetype so kind of slow
sometimes so let's show you this is just
what I created from a bash script it
creates a poem with beans XML of a
couple of folders and that's actually it
because for ya the simplest possible
maybe Java EE project you don't need
much more and this is actually faster
otherwise it good here connect to
network and all that stuff using MAME we
don't want that and I use IntelliJ to
open and access it so simple so I can
type it right away all the things I'm
showing you I'm really doing from
scratch so there's no magic and pre pair
to anything here if you have any
questions just ask so this is who a few
has been using maven hands up ok so you
know what I'm talking about that's good
and this is my maiden prompt file
and that's the interesting part here
that's all you need I claim at least on
the runtime site so not for tests you
need a little bit more but that's all
that should be shipped or actually not
shipped at it as it is provided to your
application and you don't need much more
or actually you don't need more if you
use Java EE 7 and I'll tell you why
during my talk and that's actually it
and you don't need more for maven
configuration because it comes with
convention over configuration if you do
much more like a couple of plugins and
stuff I would ask why and I claim it
mostly you don't need them and can
delete them and you can delete all kind
of XML so please do so if you use simply
as something like project URL developers
ABC just get rid of that you nobody
wants wants to know that um anyway I
created just a jax-rs configuration here
to bootstrap it but that's actually
boring so I will close it right away and
that's it that's really empty project
just the default maven structure and if
you use maiden you know what I'm talking
about so um if you attended the keynote
and especially when I was walking around
I heard even something about the Oracle
OpenWorld keynote from Larry
you probably heard the broad cloud right
so let's do cloud as this is a thing
apparently
let's yeah do some clouds here although
the very weather is quite nice in San
Francisco but apparently it's quite
cloudy and let's do a clouds resource so
what I'm showing you is a Java EE
application which does some cloud stuff
and whoever au has used jax-rs for
restful Web Services okay not everybody
and if you have any questions what I'm
doing please feel free to ask I mean the
eg so I probably should know and this is
an at path this annotation tells you
that this is a Jack's arrest resource
and this means it will expose stuff
over HTTP so all the methods which I'm
now writing like etiquette will be
unavailable under that resource under
that URL something like here and your
service URL slash resources that's how
it works
slash clouds here because that's the
resource and they can have sub resources
and this will be a get method so when
you call HTTP GET then this will be
available and now we can return our
clouds here so what I'm showing you is
kind of basic you might argue and this
is on purpose because and during my talk
I will show you how to connect various
technologies and functionality in a most
easy way without and that's the part
without any configuration so you heard
XML before you don't need XML the only
thing oh I forgot to show you one thing
fair enough that's the only XML which
will be there on the server
that's a beens XML and you actually can
could even get rid of this the only
interesting thing here is you need that
to inject beans which are not annotated
if you want to annotate them and get rid
of this then you could also delete that
file and just annotate all of the beans
and then you have not one single XML
file in your application oh and you
probably saw this you don't also need an
XML file yes questions very good yeah
that's just what I'm saying you don't
need a diploma descriptor anymore
because what you're doing here the
jax-rs configuration oops
bootstrap class and internally
registered a servlet so this was what
you in the past that in the web.xml like
right deploy em register servlet so on
and so forth but with this here it's
done and implicitly so you don't have to
do that the JAXA and the jax-rs
implementation will know how to what to
do and then you don't need an XML file
you would need more stuff if you add
like a more sophisticated UI
like JSF and all kind of pages and sure
then you need some some kind of
configuration but for just rest you
don't need this very good more questions
on that right so nothing to configure
for now um yeah let's go on with a
really basic example so now we have um
actually that's wrong because I want to
show you something else we want to
expose Jason via rest and actually I
want to show you a nice feature a nice
jsr which comes with Java EE 7 which is
called JSONP Jason API for Java API for
Jason processing and with this API you
can create JSON objects programmatically
JSON objects in JSON erase which is
quite nice because then you don't need
third-party dependencies doing this it
comes automatically shipped with your
application server and you can use it
just right away and of course this is a
Java EE project so we probably have some
kind of EJB around we have a lot of
clouds right so let's call this Oracle
of course and this will be we had pins
before beans are very evil apparently so
M you could either do this an EJB by
adding at stateless and that's it or you
could even leave this out then it's
implicitly and managed dependent scoped
CDI managed bean so either you manage
this buyer EJB or CDI what kind of
implication does that have while EJB
comes with some stuff already provided
like transactions management and
interceptors all that kind of stuff you
want to use M CDI is leaner for now CDI
doesn't have some features EJB has yet
that might be aligned in future
specifications anyway what is of
interest for you almost nothing there's
almost no difference for the programming
model so no matter which annotation you
are using here you could at
inject what I did here both like right
away and actually I will show you
further on in the later example it
doesn't matter if you use ejbs or CD is
for these examples here so let's use
ejbs this time if you don't agree we can
also use CDI exactly exactly if we don't
have the beans XML then you have to like
at scope here dependent scope and yeah
whatever my IDE fights me yeah
stated has pooling and some other stuff
and and that's the reason so if you want
to use this or exactly if you want to
use it then that's handy if you would
want to use that with CDI you have to
add further stuff on the same is true
from transactions and all that kind of
thing so if you use like JPA
this automatically it starts a
transaction and you can rely on them
which is nice for EJ B's here and but
anyway let's just do a simple method
here which will be then called from
Jack's arrest this will return some
clouds oh and let's define the cloud it
has cloud has a cloud name and also a
cloud has a hype right so there's it
currently hype going on some clouds are
more hyped than others and getters and
setters and just to be convenient some
constructors and to string methods just
a POJO that's boring so and normally you
would you know we're with the database
to whatever you like here ask some other
service some micro service or whatever
you want to wanna have just for the sake
of example I will just return new
objects and new cloud we have let's say
a database cloud which is not that much
hyped and we have a artificial
intelligence cloud which is very hyped
all right this is just a race s list
okay help me you sorry uh yeah thanks
that's good for having an audience
everybody has to pay attention because
it's live coding and everything can go
wrong all right cool get clouds so what
are we doing here that's quite boring
for now but now we can use as I said
Java 8 features right and now we'll use
the JSONP logic to map our pojos which
could be from like entity beans from the
database to JSON objects so if you want
to use Jason in whatever structure and
you might want to use you can use JSONP
to have the full control over how this
jason looks like right this is very nice
I can show you and Jason create object
builder who of you has used JSONP before
okay not quite a few so this is how you
create the objects you have a builder
pattern like M API here create object
builder creates a well object builder
and you can add stuff to your JSON
object so this is empty by our default
and then you can add a name right get
name and a hype and some other stuff and
by calling dot built you get a JSON
object out of it and obviously we want
to have a JSON array for several objects
so I am called doc map here to map the
stream of pojos to a stream of JSON
object which I just created inside here
in the lambda and now of course we want
to have a JSON array out of it so we
have to call a collector right Java 8
and there is no to JSON array collector
and not as far as I know so we have to
call the other method which takes a
supplier and to consumers and we can use
of course fancy method handles Jason : :
create array Builder and Jason array
builder : :
Jason array builder : : @ and this gives
us a JSON array builder and by calling
dot built this gives us a JSON array and
then we can just return the whole thing
and that's it
questions yes you were first yes you
could use the yeah I know what you mean
and the question was coming just used
the at produces annotation and then
obviously return just the object yes for
this example you can because obviously
it's the same name and hype these are
the two properties which are also in my
pojo but I will show you later on if
you're wondering if I want to modify
that JSON output then you can't because
then you have to you know control your
your output here buyer jay-z Jason B
which is not there yet or by what was
Jack's P in the past or any other
third-party dependency and if you use
even hypermedia together with rest then
you probably want to have more control
over how you Jason looks like in terms
of links and in terms of other stuff for
hypermedia
and then actually if you're interested
in the topic on Thursday I have another
talk about hypermedia rest with jax-rs
and then you probably want to have more
control like in a programmatic way
rather than in a declarative approach
and this is for why i would consider for
now that for most of the examples and
you are better off using JSONP or in
fact in programmatic approach to create
him very good question
yes yeah
with Jackson and no not out of the box
so Jackson that's exactly the part at
the point why there is a Jason be
specification currently developed for
Java e8 which wasn't there impaired in
the past so Jason B is basically Jack's
p4 Jason so it's the same thing you can
declaratively create the adjacent
mappings from pojos and then um yeah map
them back and forth what you could do in
the past for all um Jason binding
implementations accept the new Johnson
you could use Jack's B annotations and
they will be taking into account
although it's XML this looks like the
following XML element and then you have
name like something else and this would
work in most of the examples that you
would have to test that for your and
application server of course that's not
a standard because this is meant to be
only used well for XML but most of the
implementations do consider this and
this can be used until Jason B is out so
this is also what what I'm doing it
depends a little bit on your on your
project thanks for your question very
good question others on this I was I
would just carry on so here well we
created the output from our from our
clouds here and the interesting thing is
the integration so this is a new
specification JSONP since Java EE 7 it
wasn't there before in Jack's arrest but
now you can just use it right away and
the cool thing is jax-rs has to know it
so if when I returned my JSON array
object then jax-rs
knows how to handle it and you don't
need to specify well JSON array was what
is that and if you use a third-party
dependency whatever it looks like then
obviously and jax-rs wouldn't know about
this so this is nice that everything is
like integrated um all right and if
there are no questions I will just carry
on with more stuff and more
specifications let's create
a new cloud right and create cloud with
and now I will do another approach just
to show you now I will actually and use
a proto here so I will have oh let's do
that in the second step now I will have
a cloud here this ayah jax-rs this means
that is the request body so use post
something in that case it will be Jason
I can specify that by a sorry consumes
jason and nicely there is already a
media-type this is application jason and
now um required a client to post a json
object to this resource to that resource
here and well it has to be a cloud so it
has to have a name and the hype and per
default and if you don't change anything
then it will take name and type as a
name if you have more complex examples
and don't want to map them into pojos
you could also use jason or object or
JSON array here and then read it and
programmatically so the same way just
the other way around like this but just
to have several examples I will show you
this approach here if you would what I
want to see it we can also do the other
stuff and now I want to show another
integration bean validation you probably
know about this I of course want to
validate the object which comes here so
let's say there is a certain logic what
type is for example so let's say hi
person number between 1 and 10 right and
this has to be validated and name will
also be validated later on so when the
client sends this then well you want to
automatically validate it and you don't
want to write a lot of boilerplate code
right
like validate and what happens if it
doesn't then please rest return bad
requests or whatever no just do this and
that's sufficient if it's not validated
and this at valid annotation actually
chair and tells Jack's arrest them
please validate this please call bean
validation and if it isn't valid valid
well then return 400 bad request and
actually actually that's it and that's a
nice thing that you don't have any
plumbing here for Jack's arrest the are
only plumbing is post that's the method
and you don't specify well which state
is code which whatever you specify Jason
but that's it and if it's not valid then
it will return 400 if it's created then
white tells us implicitly this is shown
in this back to 2 or 4 no content that
is the status code so actually there's
more than 200 okay and this is done
automatically so there are some kinds of
conventions to which you can rely on and
well now let's carry on Oracle create
cloud from the cloud right let's create
this method this is also void and
creates a cloud and of course prints
oops
prints it nicely so new cloud has been
created and you could do some kind of
business logic whatever but the
interesting thing is that it's
automatically validated and the
validation is take is handled here um
well if the validation has more than
just place hype be between 1 and 10
rather than you want to have a database
lookup or you want to have more
sophisticated stuff then you could do
into your annotations here right so
probably you want to validate in your
business logic then you have well to
have more here so for example clouds not
their cloud doesn't exist or let's let's
call it cloud not take
this is bean validation you can create
your own constraint validation
annotations let's do that
clout not taken this is a nice already
there example from IntelliJ so what it
is it's a new annotation here this is
part of the bean validation
specification funny words and you can
specify a validator here for example
Klout not-taken
validator and this validator class is
then called and there you can do more
sophisticated stuff you can show you and
this is then called automatically
because with the at valid annotation we
specify that we want to have a validator
validating all that stuff and this add
cloud not taken constraint validation
tells us well which functionality to
call to do to do so and now you could do
some logic here but wait you want to
have a database access you want to have
some other business logic write some
more sophisticated and you don't want to
include this in you validate err so the
nice stuff here is the nice story that
you can use CDI to add inject whatever
you like and this was the talk from the
beginning doesn't even matter if you
have an EJB or a CDI here so our Oracle
is in that case and EJB
you could inject everything which is CDI
injectable and that is really nice
because bean validation knows about CDI
or in fact in the specification it says
well if the runtime our application
server supports bean validation and CDI
then please also make CDI managed beans
injectable in being validation and that
in general is the really nice idea of
Java EE that you have several
specifications for their own
self-contained but you have the umbrella
specification Java EE umbrella
specification telling you these
specifications have to work together
with each other nicely
and that is exactly the reason why we
don't need to configure anything here so
probably for any other framework take
spring for example you would have to do
some more logic you would have to have
at least one class bootstrapping that
process because obviously bean
validation doesn't know about spring at
autopilot for example which is the same
thing as here with Java EE but the nice
thing at EE is that the specifications
can work together and this is really
good for developers because you don't
need to write everything you just say
well I want to have Oracle and call
Oracle here if the username is take
sorry the what do we have cloud name is
taken is cloud taken from the name and
then we have our nice separation of
concern so we don't have business logic
in our validator rather than in the real
business verse 8 we want to call um me
is taking yes we don't want to have it
taken so negate it is cloud name taken
and now well Java equals let's say Java
is taken of course you could do a
database lookup here as well and that's
it and this is our validator here quite
simple and let's yeah let's run the
example actually so everything I showed
you was a mating project so we use maven
clean install oops wrong folder maiden
clean install to build all that project
and the nice thing and actually I will
talk about that more in a second M is
that it's really fast and while I'll
explain later
so actually faster than I could talk the
waffle is built and I will deploy it on
may on white fly here you could do
whatever application 7 Java EE 7
application servers out there and this
was just a simple script which takes the
war file form the target deploys it into
white fly and starts why
fly before that I always did it manually
but I'm lazy and yeah that's it and now
we have a running wire fly actually I
can show you in any rest client of a Joe
of your choice and how that works and I
will use the command line actually
doesn't matter you can use postman
whatever you like but that's simple here
localhost:8080 job one resources right
this is the base path and we had clouds
so that's it let's pretty print this so
we have two clouds the database cloud
with a low hype and an artificial
intelligence cloud with a high hype well
boring the only interesting thing is how
the JSON was created I will show you
more about that in a second and now
let's also create a new cloud with
content type Jason and our Jason here so
we have a name right cloudy close call
database we have a jobbing new cloud
which is not really much hyped right
because it's just boring Java EE and
that's it there was a new cloud let's
show the Heather what I told you two one
no content this is the default if you
return void from your Jack stress method
yeah and that's it if we don't have Java
EE but only Java then this is now
rejected that request why because of our
validator because I said if it's not
taken then it works but if it is taken
in this case Java then please reject it
quite simple any questions for the yes
yes uh-huh
really good you can good thanks for that
question the question was if we want to
show our client more information here
maybe in the header and that's actually
a very very good way we did that in past
as well to include just for debug Persis
purposes some information in the header
so that you have something like this
comes from wildfly actually but you have
more sophisticated stuff like arrow
well java is already taken so that a
developer knows why it's rejected you
can use this here and either now it
depends what your what your logic is you
specify something in the annotation like
this has a default method message you
could also use message and messaging
templates this is part of bean
validation spec it's called viola sorry
validation dot messages or something
please correct me there is a default
name which is then taking and you can
specify message names in that properties
file and if that is not sufficient if
you want to have more programmatic and
dynamic stuff you can use the context
object which I simply ignored here and
say build constraint violation and now
and you have a builder here at develop a
violation at the property so actually if
you have an object then you'd say which
property caused the error here name in
that case and you can do more
sophisticated stuff and that's all done
in the bean validation specification so
that actually works pretty well and the
other and that is the first part how to
specify the message the second part is
if you want to of course include that as
a HTTP header then you can either catch
an exception here like the M or actually
not here you can't catch an exception
because you're not even in that method
but you can register a register and
accept
handle for jax-rs forest and then catch
the constraint validation exception and
then you can get all constraint
validation exception think the name is
no violation exception yeah constraint
violation exception and then you can get
all this information here with your to
specify it and tell the user okay what
actually was the problem and that is
nice way that it integrates integrates
well with each other and then you can
say okay please add this as a custom
HTTP error field very good question we
had that in the past as well and this is
how you solve them any other questions
for this example okay then let's yes
the request context are you can yeah
very good question for for jax-rs
can we have the request content context
actually Clinton at in a not at inject
but with at context you can inject from
Jack's arrest several jacks OS managed
objects for example and the request even
you can inject the session and you can
inject other parameters for example
there are request parameters request
Perrin come on
no sorry there called query parameters
query param isn't you know the question
mark param
there are header parameters they are I
think a session or they called no sorry
I should know but you you can inject
them s in that way if that doesn't help
if you want to really a more low-level
stuff you can also inject
httpservletrequest in your resource
class that's what that was the question
right yeah and there are also more
sophisticated things and like message
body readers and interceptors for jax-rs
where I can really intercept the whole
process and program and process it
further so if you want to and add
headers for all requests for example
than an interceptor would be a nice way
of to so thanks for the question any
other questions
otherwise I will show you more
integrations once we are at at the
jax-rs site let's continue with this I
mentioned hypermedia before and that I
think you had the question why I'm not
using the default POJO mapping so if we
want to add more information for our
Jason for example links hypermedia
we want to link to some resource right
and with underscore itself this is just
now our content type I just made up
there are actually some hypermedia
content types I will talk about that on
Wednesday
and for example you want to include the
euro right to this resource right of
course you don't want to repeat yourself
all over again and you know concatenate
the URI like it like I did here
localhost Java one resources clouds
because this is already on the server
and the jack service knows about this so
Jack's arrest comes with a nice
functionality can be injected with at
context as a context managed object
called URI info and the you Ryan foe can
in fact be asked to create a urine with
the information which is already there
which is nice we take the get base URI
builder which gives us well a year I
builder already containing the Yura base
you're right of your application that
comes from the application server and
now we can build our you rise with
information from jax-rs
for example clouds resource and what
does this do here this takes the value
of the annotation clouds from the
annotated class in this case so actually
we building a URI with the information
that is already there and the same is
true with if you enter Tait a method for
example if I would have a method I will
write that in a second to give me a
single cloud then I can also create a
your I for this let me show you I can
actually let's write it real fast
this is just you know we have clouds
slash and then a single cloud this is
just a soap resource to give us a single
object of the array we have before right
and we have adjacent object in this case
not an array and we have a parameter
here so we want to have clouds slash
database for example and this is how
jax-rs handles that get single cloud by
at path param so you can also inject a
parameter which is part of your URI
which changed for example name here and
this will be then injected
our method this will be the cloud name
or any name you like and you're right
you're right looks as follows so this is
part of clouds slash than name and I
created this to showcase that how do you
rise create it and the nice thing is you
saw the curly braket name before and we
can substitute that variable using any m
parameter we provide here so actually we
can use the cloud name to substitute
this dot build method builds the URI
from the uriah builder and all the
values you provide will be taken to
substitute all the available parameters
and now we have to build and actually
JSONP doesn't support your eyes natively
so we have to call dot to string to get
a string out of that and that's it and
this is the new logic how our JSON
object is created and actually we can
just refactor this and reuse it so we
don't have to copy paste down here
because that uses the same logic to map
approaches to JSON objects all right do
you have any other questions by the way
just feel free to ask why I'm
refactoring nope good
so we call the crates clout Jason but
actually in another way this would not
be a function but called as a method
handle so we create a Jason of the cloud
and that's it so we factor this and the
same logic is taken here not get clouds
but get a single cloud for a name so
this will you know call the database
give us the cloud for that specific name
and then return the create cloud jason
any questions yes authentication and
authorization that's a very good
question
what we have is actually for the updated
schedule for Java EE 8 there will be a
security new security J's are and also
the roadmap right now is to include that
in jax-rs so the annotation you know
with add rules allowed will be then
usable in Jack's arrest that's the nice
part until then you could use all kind
of default authentications available for
servlets because chucks RS is nothing
else than a servlet when you looked at
further down and then you could use for
example web.xml to configure that
further either this or actually the
simple and the simple answer for that is
don't use any other m authorization on
that side if you don't need it do it in
your proxy server up front of course if
you want to access some information like
username then you would need this you
could then what we sometimes did at edit
open and pass that as an HTTP header and
read it then like an encrypted token or
an encrypted ID what and so on and so
forth so for this you would have to
program it yourself for now but actually
that's also quite quite simple you could
do like an interceptor which also hooks
up by a CDI into their database lookup
and then inject the user or make it
injectable as a principal is also doable
by CDI producers that's also doable so I
mean all the stuff I just said is one
class probably you know like an
interceptor one class which reads then
the HTTP header and
it's something out of it we had another
question in the back or was that
answered okay yep for unit testing and I
wouldn't unit test this class because
there is no business logic to unit test
what I would test definitely test here
like in general and is having a whatever
you call it either systems or acceptance
tests which means you deploy that thing
here in an environment which is as close
to production as possible and do then
fully fledged I call them system tests
and which means an external restclient
or whatever client which uses your
application in the same way as the
production client and then assert that
the application behaves as it should be
and everything else in the outside which
you don't want to test is mock the way
so for example any external system
you're calling and then you have a mock
a mock server for for example for an
external system which behaves in the
same way and you can then test your
application but the interesting thing
then is that your application runs in
the exact same way as it runs in
production but that's a totally other
topic for testing but that's the answer
for this one here because there's no
point in unit testing them what you
could do because we have a little bit of
logic here how the Jason is created that
you say well you call you then unit test
it and that is actually true for each
abs and all kind of many managed means
as well by unit test you just in your
test say new clouds resource or new
Oracle without any CDI stuff that's the
easy answer so forget achillion actually
that's another talk I won't give a Java
one but for these unit tests you don't
need any achillion or embedded stuff you
just would create that example if you
would want that call get clouds this is
mocked away and then you make sure that
the JSON array contains all this
information from the poachers you you
mocked that would be the answer for unit
tests but I wouldn't do that
I would use acceptance tests but you
because you should use acceptance tests
anyway and then you would easily find
the typo here would you want to test
that's that's the answer you're happy
with the answer
hey I'm very good we can continue a
discussion but if you would want to unit
tests I just created and well test it so
create the instance there was another
question over there nope okay what was I
was it finished with that one oh yeah I
want to yeah create a new cloud for the
name new new cloud name and a random
hype right so this would do a database
lookup questions for this let's rerun
the example even clean install and
whitefly deploy and in a second I will
talk more about deployment and all kind
of deployments we have yep bad requests
for Java level one no content Oh
actually what I wanted to show you it's
the other things let's go here that's
what I wanted to show the get part sorry
my command lines ah
that's what I wanted to show that the
links are now included and now you can
see that the links contain the fully
links of database and artificial
intelligence in that case here with
everything I provided there without
configuration or without needing to
repeat yourself because if I now change
clouds to something else then it still
works because it just references the
class which is annotated right and that
is the nice part of chucks res he's
slowly running out of time even I could
show you more about yeah let's do that
events for example so CDI comes with
nice stuff to create events you can use
asynchronous things here if a new cloud
was created let's do that in the Oracle
so create cloud or actually we could
also do that Annie in the Jack stress
resource however you want to do your
your logic there and you know about CDI
events that is just an asynchronous way
of of communication without let's call
new cloud notifier with without tightly
a coupling not to fire which then as
again no annotation needed not
necessarily on new cloud which observes
write a new cloud and if somebody has
used the Oracle cloud before then you
know that this may take some time so
let's wait here
log support Park Naina's and is the same
thing as threat sleep without the
interrupted exception and creating a new
cloud oracle takes at least two seconds
and now
is created why I'm showing this because
here you can decouple your beans and
this of course would block for two
seconds unless you're asynchronous and
this is one of the parts which does not
work that nicely yet because this
doesn't work for CDI managed beans yet
it only works for very JB's so you would
have to have more one annotation more
specifically the singleton annotation
with the asynchronous because the
asynchronous is just there in the EJB
package yet this is something we want to
resolve for Java EE 8 but again there's
no big deal you know you just use this -
annotations and then it works as well
any more questions on that actually I
want to tackle more the deployment and
war file against standalone JA things so
I stopped the live coding for this for
now and that was to create example and
cloud create it you know yeah yeah you
saw it the day delay first you say you
see the default task and then this is
the EJB task which is called
asynchronous which is there for
asynchronous events actually I could
show you more with other nice stuff from
CDI but there's a lot of stuff in CDI
the interesting thing here just to
summarize all that is that you can use
several specifications without needing
to configure anything and that is really
nice for developers because you don't
want to write XML right like we did in
the past you just want to write business
code and that's it
so more for deployment here so what I
did the whole time I did a main clean
install for for Wafaa and I can show you
that the war file here only contains our
business logic and I don't know if that
surprises you but for most of the you
know so-called lightweight and
the price project this is not the case
because you're shipping in a second
you're shipping the runtime mostly which
is not needed because we are writing
business code right and that is all the
classes I just wrote right and you don't
want to ship anything because you're
shipping it all over the time you occur
you're currently working on a project
and you're probably rebuilding it
several times a day and every time
you're shipping a new people need the
same runtime right which doesn't make
sense and the wall files are up to 100
megabytes no kidding I've seen that in
my own project with you know spring or
any other framework there and that gets
then either in the old way deployed to a
tomcat or a jetty or in a new way having
spring boot or any other standalone jar
but the point is it's slow which I will
show you in a second because you always
have to build these megabytes and it's
not needed and this is a 9k for now
because the thing is you probably use a
CI server right
that's the iced-over builds your
deployment artifact your war file or jar
file that gets published to a nexus that
gets published to maybe any other
staging or integration environment and
always copied back and forth if you're
using containers like docker you have to
build your docker I can actually let's
do docker in a second and which adds up
quite a bit each and every time because
every time you're shipping your run time
which is not needed and that's the cool
thing of having only the Java EE 7 API
which is provided oops
and not edit to your deployment artifact
and that's everything you need on your
on your production site and yeah let's
let's do how much time do you have left
yeah let's do docker shortly let's talk
about our project which is really nice
with Java EE as I just said with small
deployment artifacts I will use a base
image from myself which is of course why
fly
so this uses just the whitefly and
copies the waffle Java one here to where
the Wi-Fi is installed is usually why
fly stand loan deployments right and
that's it I can show you the base image
actually if you're interested which uses
another base image it only takes the
white fly installs it's does another
fancy stuff to have a background threat
and starts to our fly and this comes
from another base image which is just
the airplane Linux why am I doing this
and darker comes with a nice copy and
write of array copy and hide filesystem
which only adds up the changes you make
like and get which is really nice for
our case because the changes are only a
small wall file you don't change the
application server you don't change the
runtime the operating system or java
itself and that makes it really really
fast no matter if you're building it or
shipping it because when you dock or
push the whole thing to the docker hub
it knows about these layers and only
pushes the diff which is in every case
very fast and well I can show you this
so there's nothing running here so let's
build it Java one for the current build
and that was well also quite fast like
the maven build so actually I can do
both together maven build it and then
docker build it which is well the maven
build takes 2.5 seconds but that thing
here is five and a half years old so for
now probably would be faster while is it
so fast because you don't add anything
you're just sipping your wall file with
the classes you already have and they're
just a few you're not sipping any Java
files and any megabyte of data right and
the same thing is true for docker so
let's let's run the example docker run
Java one
yes yep and that's the same thing I just
showed you for for darker and yeah I
mean that's boring questions on this yes
yeah
you
well the whitefly is a Certified
Application Server in that case
you mean with your project your your
behind the specification or because they
are available and application servers
for Java is seven now and they
internally make use of OCI and metric to
you know only include what they needed
for your application which you currently
deploy and that's why they start up so
fast and well what you saw here in well
very old machine seven seconds and this
wasn't true in the past and but this is
a fully fledged application server so
this is nothing like a lightweight
version this is Java EE 7 as is and the
new and you are totally true true for
the past but the new M application
service and no matter if you take PI or
if you take Y fly WebSphere Liberty
profile not the old one you're really
fast and they all start up in seconds
which is really nice so might be true
but then update to a recent one take any
Java EE 7 compliant application server
ideally with Java 8 as a runtime and
then you're happy with fast deployments
if you do like wall files without a lot
of stuff there yeah that's that's true
the certification takes some time at
least for now um all major vendors have
Java 7 application servers fair enough
and but at least the reference
implementation like last wish for Java
EE 7 was very fast so you could use Java
7 like right away when it was released
right and just to show you another
example let's do something fun and
create 100 megabyte of junk just to show
you how slow it is if you would you know
built the docker with 50 or 100
megabytes each and every time number one
war and let's create one hundred
megabyte of random stuff and put it into
a waffle and then docker built it again
and now you see how long a docker built
takes more if you have like a standalone
jar if you have a you know lightweight
and
application framework which ships the
whole runtime and now finally it's done
and yeah that's the story for docker and
actually that's that's true for all
steps in your deployment and in your
development pipeline no matter if you
build it if you copy it if you ship it
together with docker if you copy it to
any external server you're always
carrying you know all the runtime there
which doesn't make sense to me so
actually that's why I'm saying not only
for the development program for the
development model what I showed you
before with all the specifications
working together nicely but also for the
deployment process and for the process
of building and shipping an application
Java EE is well one of the most
lightweight solutions for enterprise
applications and this the story here
yeah one take on the standalone drawers
so in the past there has been quite a
hype with also for Java EE all the
standalone runtimes like Tommy and Tommy
embedded wildfly swarm and all these
kind of things shipping a jar file which
includes a somewhat application server
already there plus your application the
same like spring boot approach this is
quite nice that we have this in Java EE
just to have a choice if we need it but
as I said I wouldn't go with that
approach per default
that approach is really nice if you have
some well political problems in your
project that you say the ops team can't
update like you said sir in the back the
application server because it's too old
we have to have while our company
compliant IBM whatever certified
application server which is too old we
can't use this for other reasons we are
using this cloud vendor which doesn't
provide that and so on and so forth that
is a workaround I wouldn't say this is
an ideal solution for that solutions you
can add something like white plus one
can show you what flies swarm actually
that's the plugin
logins while fly swarm plug-in and for
that you also have have to have a nice
dependency management so this is the why
fly swarm plug-in here and what it does
if you now build it
it also creates a well standalone java
file and that is the reason why the
builds you see it takes now much longer
because it ships the whole or actually a
small why fly into a java file which
then eventually comes out and it's there
as a swarm jar which obviously can be
run with java - charm well and that's
basically the same thing as before but
now you're shipping it in your java as i
said nice approach that we can choose
and mix and match but i wouldn't go with
that per default and i would consider a
war file itself as the most lightweight
solution here any questions or comments
on that yes
debugging um yeah what you could do so
actually what I find really well is the
integration with IntelliJ with the
application service so if you're like
make how do you call it configure the
application server into IntelliJ that
you say IntelliJ run or in any other IDE
you know run in the application server
in the same way as I say debug on the
application server that often comes with
nice for example in IntelliJ reload and
redeploy classes this works quite nice
and not all of the cases and actually
that's the reason why I would go for a
fast build and that you kind of what I
did
rebuild it from scratch all the time so
what I did when I when I made the
changes you know I always did the maven
clean install and that's not even the
fastest solution because you don't need
maiden clean you would only need maybe
packaged and that also can be improved
if you use several threats like - T and
then a lot of threats but you know also
just the standalone version on that old
machine was quite fast right and this is
actually the reason why I would go with
that approach that you try to make it as
fast as possible from scratch and with
small walls this is actually possible to
be that fast though you're always doing
everything from scratch and then you
don't have that problem and all that
stuff like J rebel is a nice I would
call it workaround if you have a really
slow deployment because of all
application service or whatever but
ideally you wouldn't need this you know
and if we go with a fast approach like
built from scratch every time either
with that or integrate your application
server in the IDE that it's does some
kind of magic for you but then you just
have to pay attention sometimes you get
weird problems like the reread loading
of classes didn't work and there's a
class you know
yeah yeah so this is why I would go with
such an approach but if you need further
deer debugging really in your
application if you don't want to debug
it in a unit test because most you know
problems you would probably see in a
unit test and then and we'll go go with
that approach any other questions yes
the future of Java yeah okay a two
answers the future of Java EE in general
I just yesterday after well all these
keynotes and updates and published a
blog post on my thoughts about this
update you can read it there my comments
on the last half a year with the
progress or lack of progress is I
wouldn't say it's that such a big
problem why because Java EE 7 as you saw
is usable together with Java e 8 a Java
Java 8 already so it's not like we are
desperately waiting for Java EE 8 you
know it is usable right now of course it
is a problem that there was elect is or
was a lack of progress in the last well
year but I would say personally all the
discussions about the lack of progress
are probably worse than electric
progress itself because that makes
companies like being nervous being
cautious well should we still use Java
EE will it go away and all that kind of
talk that is actually worse than the
problem itself because hopefully now
after Java 1 it all will resolve and
carry on again and I totally know what
you're talking about I'm also in in an
expert group of Jack service which kind
of stalled and yeah of course that is a
problem and I'm also is quite a bit but
for you as developers I would say this
isn't or wasn't a big such a big problem
as it was advertised as a problem so
actually did it is discussions and all
the uncertainty like if nothing moves is
the worst situation we have rather than
if it moves or not because then you know
Oracle moves forward or if Oracle
doesn't move forward then another vendor
or the community will take over and
uncertain they will you know but no
progress of course is the boost because
of the uncertainty that is my taken that
puts I wouldn't say it's a big problem
um
okay actually I would also want to talk
about third-party dependencies short
answer is please don't use them you
don't need any other logging framework
just because to make you know fancy
Logging's you probably don't need stuff
like Apache Commons because you know
reinventing the wheel and that's where
unfortunately we don't have time that's
actually a nice story in just my latest
project was well please resolve all the
hundreds of maiden dependencies we have
and that's actually a really big problem
because not even the maven dependencies
but the transitive dependencies you have
if you add dependencies which then add
some well own logging framework or which
then adds an own jason mapping
implementation in another version as the
one you have any application server and
then you have collisions and then
another version gets taken which is
incompatible and all that kind of talk
my point is you have to be reasonable
when choosing or if choosing third-party
dependencies for most cases you don't
need them you know and because you know
of you don't want to reinvent your wheel
but if you use Apache Commons just to do
a user Church and you find string utils
that is blank once and for that you add
you know megabyte of dependencies and
transitive dependencies even which then
collide with other stuff on your server
which you don't want then you have a
problem and then you save a few lines of
code but what you get is a few days of
configuring your maven pom file and
doing collisions and actually there was
just in my latest program project that
you do then exclusions in your maven pom
file just to make it work again and
actually just in the latest project I
have we we had all kinds of logging
frameworks I know in the deployment
artifact log4j locked for J to sell for
J is locked back what else is there I
think in that's it you know because of
all kind of transitive dependencies and
you don't want that and sometimes it
makes sense
for example I have an own pet project
which uses ask your doctor and get so of
course I don't want to write sq dr.
parser and compiler and I don't want to
write a git integration with everything
that is then your business use case then
it makes sense to add such dependencies
but if you don't do well professional
logging or professional string utils is
blank checking as your business use case
then you don't need these dependencies
then just write one class or a bunch of
lines of codes and then you save a lot
of pain in managing dependencies all
right now I really have to stop I know I
know and please do me two favors before
you leave and first of all please stop
calling Java EE heavyweight and second
if when you leave the room please you to
use the voting machine to tell me
whether you like my session or not so
thank you very much for your attention</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>