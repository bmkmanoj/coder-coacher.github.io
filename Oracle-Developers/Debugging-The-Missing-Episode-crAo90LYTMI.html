<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Debugging: The Missing Episode | Coder Coacher - Coaching Coders</title><meta content="Debugging: The Missing Episode - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Developers/">Oracle Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Debugging: The Missing Episode</b></h2><h5 class="post__date">2015-06-02</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/crAo90LYTMI" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">thank you guys for coming out I am Abdel
Rahman II my twitter handle is polymath
encoder with 2 c's and my email is
polymath akoto to seize again at gmail
com this is a debugging session the
debugging the missing episode and just
to make sure that I said everybody's
expectation I try to make it as
interesting as they could get right I'm
sure you guys are not here to see me
basically step into methods or step out
of usual functions and you know and
teach you the tools whatever it is that
everybody in this room and one hundred
percent have used in the past and
actually know how to use whether you're
an eclipse guy or some other form of
like I de so this session is not about
that there is a little bit a few
exercises that are going to go through
these tools that are Java tools that
work across all platforms and ship with
the JDK and that's about it so everyone
everybody is going to have their
preference preferences one way over one
way or another the expectation was this
session it was going to be a lab and
that they're going to be a computer in
front of everyone it's not the case so
what I'm going to do is basically delay
all the exercises that are about I think
a half hour in total there are like five
of them until the very end of the
session and then I'll do them in front
of you and you can go and clone github
repo when you get a chance at home if
you wish to go through them again and
you think they're interested in a all
right I don't have it about me slide
I've been speaking in different
conferences I think this is probably my
could be fourth or fifth javaone and
then Jack's 30 30 30 degrees and
different conferences and they enjoy
doing it very much since this is a
debugging talk this slide is a mess of
must have is the first one we have
called in bugs bugs because of this
incident my tear that
that happened to Howard Aiken or icon in
1947 he was using this thing called
Harvard mark two it's basically just
like a real a calculator I think stopped
working he checks his code he verifies
you know the power and spend a lot of
time trying to figure things out and
then he couldn't and turns out that a
mod or you know like a bug was actually
stuck on on the shield on one of the
sheets and basically cause the computer
to malfunction so as a joke every time
something goes wrong with the computer
everybody says well it's a bug that's
how we got the word that you started
using the word bug so a very important
question before we talk about debugging
is why do we end up with them how do
they happen and it's mainly because of
two things either requirements that I'm
not really when defining them basically
like ambiguous right they don't really
tell you you know what you do in certain
like edge cases and whatnot or whether
they are like too complex and one way or
another what kind of fail to create the
right abstractions to kind of model that
complexity and then and and and and to
understand it the second one is there
would be a problem of implementation
when actually the requirements are
actually clear and we'll define but we
just don't have enough times and
resources to actually do things and we
end up cutting corners and doing these
quick little dirty things and they
basically pile up this technical debt
would pile up and it would cause
problems or basically just bad
engineering we just kept this bad
programmer that doesn't know does not
know what he's doing and then you end up
with them but whose fault is it in terms
of the requirements for example us as
engineers we tend to turn around and
point at business where you didn't tell
us exactly you know what what what the
software is supposed to do you didn't do
this oh you didn't do that the
implementation piece is on us one
hundred percent oh we don't have enough
times we delete it and give us like
enough resources the reality is that we
are on the hook for that code that we're
producing and it's our responsibility as
software engineers to make sure that
these requirements are actually clear
enough and help these people and
communicate you know don't you or to us
and be very much actively involved in
defining it now this is the bugs let's
talk a little bit about the debugging
process the process of removing them
who's familiar with Dale elf right so
you need them like you know you would
say that the process is broken because
there is this randomness you know we
don't really it's just basically like a
random approach with which we get higher
and you're like oh fix the bugs and we
just go all over the place trying to
kind of copy code and paste it here you
know move things around and all of a
sudden it works and then we're good so
and that's what you would call Shotgun
debugging you know out there you just
try to do things that's not good right
the other one is basically the debugger
itself not whose you've got you know um
this randomness of the approach and then
you've got the debugger itself which is
us like the engineer so before I walk
you guys to a scenario that you would
very very much like identify with who's
here knows what derp is how dare you go
some right so I looked it up for you
guys for the one of you that didn't from
the urban dictionary she's basically
just like a simple identified reply when
an ignorant comment all action is made
you know this is was creative abroad for
everyone because of the South Park
series if you go to this link you see
that little mr. dirt from like from like
at South Park so mr. derp is mr. don't
know you don't know what you're doing
basically right this being said this is
how it works
you've got derpina one the peanut the
derp one the peanut chew they're all
working they hire this new guy to help
out there's a lot of work over there
trying to ship software they hired a new
guy drops me and like hey you're the new
guy go fix the bugs the dirty work that
nobody wants to do all right you know
the guy who does not have any chance
it's like his first two weeks he's
trying so hard to prove himself he goes
he looked at that code looks to spend
our dicks looking at it same miss he
breaks it all down holy he's like he
gets to a point where it's like he
doesn't really know how to put it back
together where there's gotta be some
documentation somewhere right dirt 3
wishes he goes looks around is like jira
ticket so like confluence and it makes
it even worse because the documentation
is all outdated all right so it's like
oh my god I hate my life let me try it
again he keeps doing it over and over
again all right so basically he gets to
a point where he can't take it anymore
he wants to quit that job so bad and go
somewhere with his clean code which buys
away by the way does not exist you kind
of realized that in your third job you
know you get hired with this like
fantasy that you know that you go
somewhere and it's just beautiful and
everything this is nice but your third
job you don't realize that that place
does not exist he can't quit he's got a
mortgage then Depina for gets hired all
right here's what they're pf4 is the new
new guy go fix the bug all right then we
go the cycle goes on over and over and
over again right and this is why bugs
are creating this is why bugs actually
persist nor go through that in little
moral more details so you'll end up with
a situation like this walk them all
right you fix one bug you create like 10
more and did the new guy in you
assign him those bugs and then it keeps
going over and over and over again
and what basically we have been doing
it's been dynamos all right sorry they
keep me on a short leash years it's
actually longer than you weigh that
thing so we do stuff like this just like
just throw a bunch of feces on the
computer and some of them stake some of
them don't I really looked for a picture
that would actually like describe it so
this is the last few slides in one
picture here's a quote from a very smart
man Einstein which is basically we
cannot solve problems by using the same
kind of thinking we used to we use we
used when we created them alright great
so let's get going the first section is
basically know that it will die enemy
because this presentation is very much
about the very much about the war on
bugs the art of war the work of the
general Sun Tzu has this really
interesting quote that goes if you know
your enemies and you know yourself you
will not be imperiled in a hundred
battles and if you do not know your
enemies nor yourself you will be
imperiled in every single battle so what
we mean by that is that there is a lot
of time that these words are being these
gr tickets are being logged now it's
even worse where you can just basically
send an email and the jira ticket is
created magically created for you and
it's right there waiting for somebody to
pick it up in the in the backlog and it
says it doesn't work or like things like
that right so it's extremely important
that basically we know what we are
dealing with whether this thing is a bug
or not define things in a way that is
like very detailed this is like the
first the first first thing that we
should do before we even get going
enough information not for you the
person who found the bug to reproduce it
or the person who have been working on
it always familiar with that particular
work on that particular of the
that type of functionality but somebody
who's never seen it again in way of
explicitly spinning out the
preconditions the event sequence you do
this you do this in as much detail as
possible then the post conditions and
disposed conditions usually the symptom
of that particular bug and it's also
important to kind of identify the impact
because this is what's going to
basically tell you which ones you want
to start with this is how you get a
prioritized thing so basically make the
decision whether it's something that you
can live with and not care about so what
if when you click this button everything
turns pink doesn't bother you you know
actually some other people think it's
cute hence their quote my software never
has bugs it just develops vendor
features I think it's from somewhere
another important thing that we end up
doing is basically instead of studying
the system studying how the system is
supposed to work especially that you are
the new person and usually the new
person is the one who is least familiar
with the systems architecture with the
functionality and how things are
supposed to work and this person is the
one assigned those bugs and by the way
we cannot change that and I think it's
too much to ask I'm if I have somebody
if i'm assigned bugs and somebody got
hired you know the next day i will
assign him those things because it's not
fun I they will happen but what we could
do is basically teach ourselves to
actually study the features and study
the system instead of actually trying to
study the bug another quote of sewers if
you know the enemy and you know yourself
your victory would stand in doubt if you
know heaven and no earth you may make
you a victory are complete and by heaven
and earth he means the environment
alright so what this means is that when
you try to study the system you go
through two different types of
activities one is one of analysis which
is basically the identification of all
the components within this particular
system that are involved in delivering
that defected view that the defected
because system you could be like huge
you know and what you do is want it you
don't want to study in all I want
hundred percent you want to basically
just go and look identify all the
components that basically are involved
in the execution path of that feature
that you're trying to fix once you go
through this activity of analysis you
basically do what you would call
synthesis which is actually identifying
how these different components basically
integrate with one another to deliver
this defected feature to deliver this
feature right there that is like broken
so all we're talking about is the
individual trees you know by themselves
and then the collective of those trees
which you would call you would call the
forest of something of that of that of
that of that of that sort so once you
get there what you want to do is
basically narrow things down and by what
we mean by narrowing things down is that
isolate the sub component because now
you've identified them you know how they
integrate with one another you want to
basically narrow it down as much as
possible and find that tree or like
those like five six or six different
tree trees where they're basically that
that defect that defect exists and this
is like a acquire we're sinking you
might mean you hear music and you hear
people singing but some people are
actually doing the singing some of just
lip syncing and some I'm not they're not
singular as I'm not singing singing at
all right and the way you do that is
that you tell everybody to go quite
except one person and then you'll find
out it's cheating all right so um first
thing you do is something that is very
popular and other engineering discipline
pretty straightforward a fault fault
basically tree analysis and it goes this
way you split things in half it's either
on this side on that side and you're
right tests basically to function to to
test that you know that sub
functionality or like the functionality
of the right and functionality to the
left and let's assume that you know
the right side checks out then the bug
must be right here in one of these three
we kind of do the same thing we split it
in two groups we've got one and we've
got two and now it's on this side it's
on them on the on the left side then we
kind of do it again you know log in and
we say ah it is basically this
particular sub component that is broken
and if I fix this particular sub
component then a fix that fix that
particular bug now this is awesome right
now it doesn't happen like that all the
time because we got to remember that you
know you've got two days to basically
like take care of this you've got two
weeks to prove yourself remember you're
like the noodle guy right here so you
really gotta be very careful of how much
time you actually spend and invest in
actually doing your investigation and
who's familiar with the Monty Hall
problem here I got like a few people so
let's assume that you want another
person i'm working on these bugs and
you've got like three different
components in front of you then then you
basically cut make a guess maybe and
hopefully it's an educated one and then
he said you say alright i think the bug
is going to be on c which is this tree
all the way to the right and then he
says well i'm gonna go ahead and
basically um you know investigate a and
he goes and does he stink all right so
he comes back and he gives you a tip hey
by the way a chick's out I went through
all that code or like you know wrote
that code or vote old tests for that
code and it checks out now what you
should what should you do does that
affect you you haven't even started
working on C does that affect you I mean
does that should you stick to see and
just basically investigate it the but
might not be there a bug actually might
be in B or should you swap to be and
then do that first or it doesn't make
any difference right the con Monty Hall
problem is a very interesting one is one
of probability and what it basically
says that you should always swap because
by swapping you will increase your
chance or the probability of you finding
the bug or fighting the
affected feature right by 33-percent not
swapping if you did not swap you are
like a 33-percent of finding the bug and
by swapping you are at sixty-six percent
right so I'm going to move on be quick
but there is like a YouTube video right
there that really explains it like in a
lot of details and then play that for
you at the end of at the end of of this
talk for for the sake the sake of time
and I promise you be much clearer by
then let's assume that we found the
actual particular trio of the bug exists
now it's about you basically determine
the cause of it like the narrow it down
even like further you know to so so we
can we basically can can fix it and do
we want to do that it's not like through
some lasso coding you know just like
trying to figure things out you know
throwing a bunch of numbers here you
know and add like maybe comment out like
some line or whatever it is that caused
some components that you don't know what
what you know that you're not familiar
with all of a sudden you know oh yeah it
works I fixed it No so we want to do is
be very systematic and use basically the
scientific method to kind of figure it
out and what the scientific a science is
in general it's basically making a bunch
of predictions to explain some kind of
you know phenomenon which is the better
which is the bud and then you validate
that through experimentation you
basically have like three different
steps you formulate a theory and you do
an experiment and then you interpret the
results now I'm going to wear that all
of you guys probably like went through
all of the stuff at science camp
whatever you know you did in high school
and and all that but um I promise you
get like a little bit more interested in
the next slide but just
as a quick reminder what a theory
actually is so what formulating a theory
entire entails is basically to define
you know like a series of hypotheses in
very specific terms to basically
identify all of these things that we
call variables and a variable is the
variable is any value that is relevant
and that that and that is changeable and
what we do is we kind of break him down
into three different groups we have
these variables that we would like to
call control controlled ones which is
the ones that for the sake of that of a
particular experiment we were going to
make sure to basically not change them
not change him to can fix him to rule
out that they affect they affect the
outcome of the experiment and there is
another one which is the independent
variable which is the ones that you
would actually change the knobs that you
would turn yourself and there is the
dependent one which is basically every
time you turn those knobs something else
changes and it's the ones that you
actually observe right a theory of our
hypothesis would be something like this
that if the single independent very of
the independent variable will go back
and talk about single in a little bit
changes as such then the single the
dependent variable will change as such
given that all the control variable the
variables have changed so you sit there
and you say alright it is it's gotta be
this cashing component I have never seen
in my life code like that it was so
dirty it's so buggy or like I hate this
particular framework it's not when
maintained whatever it is that's not
enough that's not something that you
would basically you know go about you
need to sit down and say well if I do
this right then I'm going to observe
this particular change that a particular
change change given certain other
variables are basically constant then
I'm going to use that to prove that it's
actually
that is actually the cash prove the cash
theory now to take this to a probably
one the most probably important paper
written in the 20th century in
philosophy and talk about this guy calls
popper and cause popper and defined what
he called the demarcation criterion
which is basically what tells you what
sets apart science and pseudoscience
right because there are a lot of
theories out there that resemble science
but they simply are not scientific so he
came out and basically the road this
paper and defied is criteria me and
basically what cars popper says or
preachers is that for a theory to be
scientific it needs to be falsifiable
right what does that mean meaning that
when we have a particular theory instead
of us trying to kind of come up with
these different hypotheses to prove it
you know we should do the other way do
it the other way around we should try to
basically come up with these hypotheses
to try to disapprove it and say if this
happens then the theory is false because
it's so much easier to falsify things
that actually correlate them more kind
of prove them and that also takes care
of confirmation biases that we'll talk
about you know at the end of the lecture
and it would be very simple if the
hypothesis is wrong than the theory is
wrong or like falsified and all you have
to find is one right let's take an
example right there Karl Marx's theory
of history basically says that societies
usually would start you start from like
a system of capitalism that would
converge to a socialist system and then
after you know after a while it would
eventually be a communist it will turn
into a communist society right this is
like Karl Marx's theory of history and
it's much much more elaborate much much
much more interesting than
there are any Marxist in the audience
right now what do they want to admit it
or not no they probably hate me after
this slide but this is just as simple as
you could make it so when this does not
happen right when this does not happen
what do Marxist say they basically have
a way out they would say things like you
know with these like ad hoc explanations
things like well the welfare state
slowed the process by weakening the
revolutionary zeal of the proletariat
you're like well look at these societies
they've been is a socialist for I don't
know how many years like a hundred years
and nothing happened well the welfare
stemi them then find a way to kind of
stick to it right now the scar popper
think this is scientific no a scientific
theory right is one it's actually the
example that he cites on his paper like
the Einsteins the theory of gravitation
the likelihood of physical people that
do physics here is much higher than
people that do history so I apologize in
advance if I butcher this alright so
basically to prove his theory all right
Oh like in support for his theory
Einstein basically said to everyone well
if light rails from the stars were not
deflected by the Sun during the upcoming
the upcoming if the upcoming eclipse
then my theory is wrong now all you
gotta do is basically sit there and you
make this observation and then you can
throw a throw the entire the entire
theory theory around there are no other
explanations there is no way that you
could basically you know get around this
if it doesn't happen the theory is wrong
and that's car Papa of poppers and
science versus pseudoscience demarcation
right to tie this to our area of
computer science you can have things
like if it is not a cash problem the bug
would persist when caching is disabled
it you disabled the cash you can still
observe the bug then it's just not the
cash right then you roll it up sources
what if it is the cash blah blah blah
this thing is going to happen whatever
it is what may be there is this out of
environment you could come up with you
know you'd be all over the place right
so this is really important when you
observe a particular bug you try to sit
down and then kind of come up with as
many theories as possible and then you
go through them like one by one and all
of these theories basically would deal
with one variable one independent
variable one independent variable that
you would change and not and you observe
the change of the effect of that of the
effect of that on the dependent ones one
by one trying to roll out all the other
cases but theories are kind of their
very much very they're very in terms of
complexity they're very all in terms of
variability I can't even say that word
so this is straight from on med school
you know when you go over there and they
teach you are chewing then diagnosed
people you know a patient comes in what
statins law says it's basically always
do to diagnose diagnostics for the most
common illnesses somebody walks in he's
got a fever you don't go and check for
the Ebola virus no you sit down and see
what these people have like the common
flow of the flu and he kind of
formulated a theory that would basically
disapprove that and then you go on down
down you go on down down down the list
it's much more you know effective that
way the second one is Occam's razor
which is what has to do with with with
with with favoring the simplest
explanation is possible always disabled
when you've got your theories you know
we're ranked from the ones that you
would try first or like you know a
designed experiments to approve or
disapprove always favor the simplest
experience and explain
for this phenomenon which is basically
the moral the one that is likely to be
accurate right they're more likely to be
accurate other than the ones that are
like very complex well the integration
of the system and that system and then
this one is you and now stay away from
that leave those until until until the
very end because because the clock is
ticking another thing is a zebra
medicine she's basically not every bug
is a fashion omen when a fashion Omo
fussing oma is basically a doctor houses
episode all right so when you hear you
know who've beats think of horses not
zebras okay something is broken don't
say well there is Java 1.7 update this
is that has this bug and no just always
go for the things that are more likely
and this very much has to do not only
with the technology that you're using
but with your current system which
actually makes assigning bugs to people
that are new and a very bad idea because
what you need to do is that as you gain
experience you basically find out which
parts of the system are not written
properly which which one is the source
of like more bugs and you kind of
clicked you know through this experience
dislike what'll subscribe to this like
tribal tribal you know wisdom and you
say well there's something there is a
memory issue right here we know that
component a mite very much be
responsible right now this being said
there's this thing called and he comes
victim that says patients can have as
many diseases as they damn oil please
alright it's not always the simple the
simplest one the cyclists try to find
the simplest explanation it might be a
combo book might be three bugs or like
two completely different bugs displaying
the same the same symptom and I'm sure
every one of you have like whore a war
stories or horror stories a lot longer
along the line conducting experiments is
basically a slide this is very
straightforward you know follow a very
detailed script and be very disciplined
try to automate that as much as possible
as much as possible spend time doing
that as well prepare a data table make
sure that you don't only observe the
effect of the deep end of the
independent variable on the dependent
one but also note that the ones that are
supposed to remain or stay constant are
constant and make sure that it's a fair
test that means we're dealing with a
single variable at a time repeat it just
in case and hopefully hand it over to
somebody else to do that for you be very
consistent into a result interpretation
is very simple yes or no right and what
we're trying to basically infer is does
the independent variable cause the
dependent variable to change somehow
alright brings up a very interesting
concept and a very important one one of
causality causality and correlation are
completely different things right a
happening before B does not necessarily
mean that a causes B at all they just
happen to happen they happen to happen
one after the other maybe because X
causes a to happen first or like b2 to
happen first or for some reason you know
they always happen in that particular
order so it's extremely important to
kind of keep that in the back of our
head right so the next thing is that now
it's time to fix it you know exactly
what it is you know what's broken you
know you validated all of these things
scientifically how could you basically
affects the fa a-- fix these things no
basically dealing with like two
different things give out these bugs
that are that you were them kind of
reason through deductively deductively
and what we mean by deductive reasoning
is that you've got you know two
different you know things that like all
humans are mortal Socrates is mortal din
so curious
you've got like three different
statements right there if both the first
and the second ones are true then the
last one is true if one of them is false
then it's not you know it's pretty
straightforward and simple but what this
basically means is that drawing
conclusions conclusions about things
that we we examined we examine whether
the first statement is really the first
premise is true and the second premise
is true and then we kind of move on oh
this only works for bugs that are and
you know algorithmic right you can
actually go and step through the
execution of the code you know through
your control flow statements there is f
here oh well instead of doing F and this
number is larger than this other number
then it was like this done this is the
bug then you just basically go and you
change the code you fix it all right you
should go through that code deductively
there's the first exercise and i'm just
going to delay them until the very end
then they kind of do that um you know in
front of you which basically just kind
of walk you through step in over the
code using jdb who's used here jdb
before like familiar with it right G GCC
one hundred percent so jdb is java JCC
and you're going to ask me why the hell
would you ever use that why we have like
eclipse why should I care right so one
very important feature of JDP is that it
would allow you to basically connect to
any JVM remotely and sometimes you've
got all of this code running on the
server life and then you basically want
to sit like different like break points
you know from like your machine and the
only thing that is available for you
maybe it's like a vm the only thing is
available for you is this little
debugger right here so it is really
worth a worth worth worth worth your
time and it's not that that much so an
extremely important thing when you're
trying to basically fix the bugs right
it's basically to know
kinda to basically before before you go
through those execution paths it's
basically going look for patterns look
for certain things that other people
miss look for example for like overflow
and underflow on you every time you see
like a division whatever it is check for
the division by zero you know just like
that and go through them like one by one
infinite loops without even reading the
code you look for these four loops or is
it does it ever finish or is it like why
to you know things of this sort syntax
bugs ganglion Elson's for example if
you're dealing with code that is not
properly indented well this person has
the habit of not using basically the
curly braces for his f or like else
statements then go and check for
d'Enghien else's like right there a lot
of times you look at it you're like oh
there it is and you basically fix it and
things basically just like start start
working without having to go through the
pain of going through all of that
complexity of business logic resource
bugs I mean no program java we don't
deal so in a lot of no pointer but
memory leaks and things like that api
misuses you know there was a kind of a
little tricky if you have like a certain
sequence of calls that you need to kind
of follow make sure why using like a
particular API authenticate for example
on like this person does not
authenticate before he makes so she
makes like a particular code performance
bugs concurrency bugs are really really
hard to kind of find and debug and also
team working bugs that are like very
important incorrect comments I'll give
you a very interesting example right so
who uses a hibernate here like an ORM
for example and saw a bunch of you yes
right so one things that you do when you
have like a numerator and you can say
for example that you know and you have
and you persist that particular
enumerator in hibernate you persist it
as the ordinal order of that particular
enumerator you have like male and female
so on the database main will be 0 and
female would be one right and you've got
that and then you have somebody
basically forgetting not to comment to
say don't ever change this particular
order
ever right this other person gets hired
he's not aware that that's the way that
things are in the database and in he
adds like another gender which is like
third gender called identified and
instead of adding identified at the end
it just like puts I did identified at
the very front so guess what you just
turned all the males to females and the
females to identify and you've made all
this you may basically this huge you
know mess out there there is no way no
way to avoid this except making sure
that you commented you know like a
really way and say do not ever change
this or just do the right thing and then
persist those a lot as as strings we
will go back to this one this is just a
little intro for one for the next
exercise which is the best his one was
voted the best animal why the animal
photo of 2008 that's a frog right there
and that's the snake the snake was
trying to basically eat the frog you
know and then miss the head and he ended
up biting the lower jaw of that
particular fog and the frog was trying
to basically get the snake off and it
just couldn't say it was kind of a
deadlock situation right so uh the guy
waited for like three hours the
photographer that did this from like
midnight until like three a.m. and it
was he said they would I would love to
have seen them go their separate ways
but I was exhausted she just couldn't
wait for them anymore so that was the
biggest the best in photo for men I
think was lucky that's a national
geographic photo exercise to talking
about detecting deadlocks about Jay
stack and there's like a little cute you
know a threat called snake another third
called called called frogs we go over
that code in a little bit so another
type of reasoning which is actually what
a lot of science is based
is inductive reasoning right deductive
reasoning works perfect for code works
perfect for math but most of the science
this is a huge debate within the
philosophy of science or like
philosophers like in general because
like how could you have science without
inductive reasoning right you couldn't I
mean not everything is as pure as math
and physics and want to inductive
reasoning basically is is when a driver
turns the steering wheel you're driving
your car you turn it to the right the
car turns to the right so you can't even
use that all right turning the steering
wheel to the right return the car to the
right and it happens you know you kind
of make that assumption and then you
assume they will always happen all right
um so basically what you're doing is
you're making predictions future
predictions you're saying tomorrow if I
turn the steering wheel to the right
then the car is going to follow and it's
going to turn to the right right not
necessarily right so what we talking
about here is runtime bugs you expect
your software to behave a certain way
and you put it up on the server and then
everything is perfect and the 100 users
thing has been running for like three
hours everything is good and you would
assume that it would continue to run you
know the same way for like the next five
hours or six hours or like forever right
not a bad assumption right there what is
extremely important is that to never
never actually rule of discount that
rare or unobserved things are going to
happen in the future right you could say
a statement like all swans are white
because all you've ever observed is
white swans right now does it mean that
all swans are white not necessarily
because you have not checked every
single one that actually ever existed
you can only say that if you have done
that you know deductively but you didn't
you're only based on a few observations
from the past and because you've never
seen a black one you basically can make
that statement right inductive you but
do not discount that you the next
morning um you know I'll Black Swan
would basically just like you know kind
of stroll around you know right in front
of you and there he goes your assumption
down the drain there is another exercise
along these lines and it's about
detecting memory leaks with with a.j map
vini jmatt fans here no Jay met friends
you will be hopefully exercise for is
about using be trace and we'll talk
about them I will delay them until the
very end as well you just go through the
slides now this is good right we talked
about formulating theories how narrowing
down bugs and finding the defected areas
we talked about you know how we can go
about fixing them and use it like
different types of reasonings to to fix
it and then because of you would think
that it's all nice and and and nice and
pink and whatever you know but sometimes
you really find yourself facing this
really interesting nasty bugs right and
these are words by the way didn't make
up these are words that are straight out
of the literature out there I did not
make up any of these so you can go and
look for them online and then you find
them you know popping up like here here
and there in the different papers in
this type of really nasty bugs one
that's called like the Heisenberg any
Heisenberg people yeah Rico so what the
Heisenberg is is that one that seems to
disappear or alter its behavior when one
attempts to attempts to study it's like
what the hell so the Act for example of
slowing down the execution of your
program would actually affect it it
won't show because you slowed it down or
for example you basically add in a print
statement we change the memory location
of that particular the next instruction
to execute and would completely just
disappear and go away so every time you
try or like literally sitting like a
break points and I can't get this why is
it not working you know for example
those are called Heisenberg's all right
there is Dave Mendel bug which is
something that's so nasty and complex
and it just causes this behavior that
looks like chaos and non deterministic
like what there is going on I mean I
can't even figure this out but the truth
is that you just have not observed or
don't have enough information or
visibility of all the things that change
then you fail to actually look for that
pattern you might spend days trying to
figure out that pattern you know it
might be very specific to like a
particular environment so and that's a
mental right there and the pictures
behind is beautiful fractal um you know
algebra or algebraic equations back then
I mean they look like chaos the
beautiful another one is the desorden
bug which is a bug as code that should
never have worked in the first place
everybody's laughing cuz like you go
through like how's this thing work be
working it's been there for three years
on prod doesn't work but nobody
complained this might very much be some
Ditko don't like some execution path
that you never crossed by chance so
maybe was just not observed just went
and are like the radar all right you'd
call those and by again they may remind
you that I did not try to be cute and
then made up make up all of those names
look him up Google is your friend the
last one is the Hindenburg which is a
bug that causes catastrophic behavior
hey you work in the financial system
got this book that transfers millions of
dollars you know to like pirates
somewhere but everything just all right
I applied for mortgages randomly right
this is basically about it the topic is
very straightforward and in terms of
actually following certain techniques
and being very disciplined you know and
being very systematic and not just like
going like all over the place you know
studying your systems that knowing
exactly what you're supposed to is
supposed to be doing defining things and
then be very you know rigorous in trying
to I'm trying to fix him because doing
science and doing engineering are
completely different things and that's
actually our problem our problems are
engineers is that we've got with wired
to basically go on find solutions and
then we kind of rush it but scientific
scientists are completely different it's
a completely different mindset that has
to do with discovery and collecting
informations and validating facts
whether they are like not making any
assumption figuring out whether it are
like to or false and whatever it is now
we rely on those people as engineers we
rely on all of that math and all of
these theorems that are supposed to be
true and then we apply them to basically
find solutions to problems now when we
face problems that we created ourselves
we don't we skip that scientific part
not because we have a logical people but
we can't wait to kind of solve that
problem so and that's very much what
that quote by Einstein it means this
section is a very important one because
this one has to do with them with the
debugger itself dealing and being very
much aware of these biases that we have
confirmation bias which is basically you
know that let's assume that you work
with another partner and you've got this
component or that you owned and you know
that you wrote see what I mean and then
you've got this other component both of
you guys trying to basically find the
bug so every single one of you every
single one of you at
has nothing to do with there you are you
know a dishonest person without you have
integrity or not it's going to basically
look for information that's going to
confirm that the bug is not his that the
bug is on the other person's come right
and you see all of this data coming at
you but you don't deal with them
objectively and you want to be very much
like aware of that because nobody wants
to have the cooties so the next one is
that narrow framing a lot of times
especially when you formulate these like
theories we kind of get locked into this
duality that well it's a either a or
either be and then you go and you spend
so much time you know hours on like day
is trying to basically seance a or b do
not remind yourself that it might be a
and be contributing to these symptoms
they're just symptoms of not one bugs
their symptoms of two bugs so maybe even
see or something else and it's very easy
to lose yourself I'm doing doing that
all right now I'm going to tell you
about van Halen any van Halen trans here
ah not enough of you not enough all
right all done maybe you got a here you
know some some more play on this point
me
yeah you jump no no sweat yeah
Oh something else was playing the
background I was like this does not
sound like that ain't sorry about that
I'm gonna start over all right my
apologies to the van Halen fence yeah
there you go that's your height no no
there you go so when I tell you a little
bit about these guys right so what these
people did is that they insisted they
would go and the band's make most of
their money by doing these different
shows and they basically insisting going
to these small towns and make sure that
these people have like the full
experience of like a rock concert and
all of these vents would usually bring
like one trader or like two of these
people like show up with like for like
five of them because they don't I mean
if that's your fault that you know that
you have high school classes like 10
people so they want to you know just if
that passionate about their music it's
not important to them but it says like
implications because these people are
constantly on the road so they have to
basically rely on these contractors to
set up the stage for them right and
sitting up the stage turned out to be a
very complex thing to do because these
Verdi's like contracts are very
prescriptive that would specify that
there must be so many inches between you
know a power outlet and the other and so
forth and you end up with this really
huge thick document right there that
they would hand over to the contractors
or contracts and you would comply and a
lot of these things have safety
implications Michael Jackson you know
had his hair you know catch fire know at
once and that's very much not on him no
maybe but that's fun on the people that
did not sit you know the stage right but
what these people had they didn't have
the standard count what they had the
standard contract like everyone else but
they had one clause bury it inside of it
that says something like this that this
should have a bowl of Eminem's in the
green room
poor of eminence it must be there if you
don't have it you're violating the
contract Nick technically they have
ground grounds to basically not pay you
or sue you and this should not be brown
eminem's in that bowl all right you
should you go over there and then you
have a bunch of M&amp;amp;M all colors but brown
and now you think these stupid you know
rock star prima donnas you know trying
thinking that the word you know revolves
around them trying to make these peoples
living you know get hard just for the
sake of it all you might take it the
other way like I mean what's wrong with
the brown eminem's maybe these bastards
are racist or something so we turned out
to be a lot more much more interested in
that because what these people do is
they would walk in two hours before
their concert go straight to the m to
the room take that bowl of eminence pour
it on the table and look for the brown
ones if they find one brown one they
call a recheck of the entire contract
which very much take like two to three
hours to check every single one you know
whether for like safety and everything
else but if they don't find any brown
ones they assume that everything is okay
and that the person that actually takes
the time and to actually sit down and
make sure that there are no brown
eminem's that means that they went
through the contract you know and
they're really and everything else
should be fine so very smart guys those
are like that's van Halen and the brown
eminence and what I meant to say about
this one is that as your debugging code
that as you're doing your different like
investigations you're trying to figure
out let you know where the problems are
you want to set these like trip wires be
very careful and sit in these trip wires
or somebody is following conventions for
example something as minor as that or
somebody you know these code is like or
her code is like really
indented everything looks like perfect
you would know that you don't have to
spend as much time investigating or like
looking at that code because everything
else was probably it's probably probably
probably okay so you kind of try to kind
of assess you look at the other caching
component needs a mess the code is not
indented that's all you need to know
then you call a recheck of everything
else you know whether these people the
person that cares about the indentations
baba does not have any memory leaks on
his code or her code but the person who
is all all missing all over the place
that's what you want to go through the
entire list you know the different bugs
that we went through and chicken one by
once not only sitting trip wires for
other people sitting trip wires for
yourself the extremely disciplined and
stopped accepting the extra space before
the colon your code will compile at one
hundred percent but what you're doing by
actually have really obsessing over that
little thing that everything everything
that is beyond that everything that is
bigger that small thing you will take
care of as much because that's your trip
wire right there that's like your your
your your your base now I don't you guys
take a few minutes and try to read this
I'm assuming the people on the back and
see okay awesome
if you're done just raise your hand then
enough you Clark done really isn't that
amazing all right then that pretty cool
this is straight bite away from
Wikipedia comm set paragraph popular
like every single word over there is
misspelled yet your brain had absolutely
no problem reading it this is what you
would call typo um Lisa Mia and what I
mean mean by this is that you'd have
these maps that use these strings for
example as keys in two different classes
you have just like cute like long words
and you add you know underscores in the
middle of them and it gets like even
worse and you look at it and looks
exactly the same but it's just not
because your brain never actually goes
and reads them letter by letter your
brains make shortcuts Envy it's the
first word and the last word was like oh
this is good it's not good it's cool you
are and whatever it is so you'll really
want to pay attention to that the way I
did with it ctrl v control c control v
let's see whether it changes on that
avoid that and please use enumerators or
something else but be very much very
much like aware aware of this with some
and it's very much it depends of course
of of the language where most languages
that have that are like latin base are
that i'm not lift based are very much
like this because your brain try two
tries to shortcut it the last thing
because time is extremely important
who's familiar with the Pomodoro
Technique right there for time
management we've got a few people so at
the Pomodoro Technique actually have one
of those I forgot to bring it with me
it's basically a kitchen timer and then
you sit there and then you turn the
kitchen timer you can acidic the kitchen
timer to 25 minutes you start working on
a task until dick until it goes off 25
minutes right there you take three to
five minutes break and basically you go
when you do it again every four
Polidori's Pomodoro is just
80 in Italian you take 15 to 30 minutes
breaks now this is extremely important
on two dimensions all right time boxing
if you guys if you got like 10 different
theories that you have to basically go
through you really want to check
yourself and make sure that you know
that you're not spending like a day just
trying to figure like one out you really
need that first of all that's on and on
one on one thing another thing is that
it would force you to basically like
step back and have your brain basically
like rest for a little bit it would give
you a sense of time it's good in and in
every aspect I think there is a book on
the Pomodoro Technique I have no idea
how they managed to fill like I had
within 70 pages but this is it there is
nothing but this alright so on time box
you're debugging activities just that
you know how much time you spend in on
each one of of your theories you and
other people there's a pomodoro version
app is everywhere something them a lot
of them are free reality check all right
now I vote this M this abstract you know
basically trying to lure you guys in you
know tell you guys that they might be
your favorite activity you know you
never know I lied all right it never
gets better all right this is what the
abstract said right it justs it just
sucks
so much better to work on new features
and work on code that you wrote so you
don't have to learn it and we just can't
help it a lot of times you're itching to
kind of just rewrite the damn thing all
right and which is a really really
really important thing that you should
not shy away and you should very much
like consider every single time somebody
hands you over a bug you want to assess
whether we're right in this thing
whatever you can be right in this thing
is the time it would take to rewrite it
is shorter than the time to basically
like it would take to debug it and check
your confirmation bias because all we
all think that we're you know super
codons or reality hits hard so just to
kind of make sure that you pet it and
don't tell anyone because you tell your
manager UV right he's gonna freak out
right you're not going to last there and
all that long right so these are
basically the slides and I will
basically go and start going through the
exercises one by one in one second no I
just gotta find him right here the first
one um this is the repo it's basically
you can you guys see the URL or maybe I
should just you put up the URL like on
the slides for like a little bit so you
can go there and then clone things if
you want and then go over him when you
when you need to right there let's get
help calm / polymath akoto at your seat
/ debug that's java one right so
basically what the structure of the repo
is very simple you've got this readme
file which is just the abstract right
there in a link to the session and you
go to this debug she's a simple source
project and there is like a sub package
or exercise the first exercise is this
one which basically goes over the Java
debugger there is basically what exactly
all the commands that you need to type
you know one by one and they would do
them right now in
one of you guys all right and there is
like it comes with a little like small
sample class so without further ado
let's talk about it a little bit the
code is extremely simple this is just a
main class called main one on this main
class just creates random numbers you
say no and you have all these random
numbers you do some and it will print
out the sum or would we turn to some and
you do pretty print it would like
basically pretty print them all you
would sort them it would sort them and
you do pretty print and it would print
them sorted all right the class is very
straightforward it's called like random
numbers you've got a constructor right
here you've got the some simple loop
here is the sorting and there is
basically just like bubble sort here
just to make things you know a little
little fun so I'm just simply going to
go and then walk you guys through
jadeybug and hopefully that would
convince you to basically go home and
mess around with it hopefully you will
have to mean I'm going to tell you this
right away I'm not advocating that you
use this instead of your IDE please use
your ID instead sometimes you just have
to connect somewhere else so it's a I'm
just going to pull out right now the
terminal window right I am on exercise
1m i am i'm on the source so i'm just
going to go and compile code but one
thing that can you guys seated so should
they make it bigger I should make it
bigger huh how do I make it bigger
that's the big question all right so I'm
any like terminal people here no I
terminal people you guys don't want to
help me all right pearance
thank you shift command + + thanks all
right I owe you so minus G is very
important be very much aware of this if
you do not do minus G the compiler is
not going to generate enough information
for you guys to use jadeybug some of
this information is necessary is
basically the line numbers all right so
just simple compilation I'm hoping that
this thing compiles right why it
compiles I'm just going to go and grab
the next statement which is calling jdb
that comes with every single JB jvm out
there when i'm passing through jdb is
basically the class name I mean I was
like Java and I start a session right
sit in a a break point it would be
something like this to basically just
say stop in and you say stop in the main
method and you would sit it it's
basically it now we can start and say
run execution this thing is gonna run
and right now we are stopping basically
at that break point now how do I know
how can I prove that if I do list
basically prints everything there is
this little arrow right here that tells
you you are at the very first statement
right there in line now this it's
perfect because I can step and the
minute I step where do I go i need to
actually do a list and they end up in
actually the first statement in a
constructor alright this is not so bad
let me step again a lot of time and see
what happens my expectation is that
another thing that sucks by the way is
that you don't have history it's on the
very first one right there so I'm going
to skip up out of this all right set up
the step up sorry about that step out of
it you know I expect if I list that
that basically I did not go into inside
that I'm back in my main that and I
stepped I stepped out of it so next
right now if you use it only if you use
it in a function if you use it on a
function it would basically like step in
that function if you do next you would
basically step in right let me right now
just for to verify and say go for
example and say just give me all the
methods that are available on that are
available for the random numbers and it
prints out like a huge desk right now
you've got your constructor your some
your sort and then you're pretty print
right so I'm just going to tell it all
right this time just please stop at the
very first statement on the sum and it
simply say stop in random numbers and
they specify the sum it tells me that
that break point is set so what do i do
I say just continue I list to verify I'm
on the first statement right there what
if I want to do this by lion number if I
want to do it by line number I basically
would say stop and instead of specifying
the name of the method i would use a
column and say 25 all right so i'm going
to list 25 is basically right here in
the middle of the loop alright i will
continue list again n am right there at
25 now there is like other commands
right there which is locals just prints
out print out all the locals it tells me
that the sum the ones variables within
scope is 0 and the neb end is like 51
right next number of their own that
particular list now this is cool let me
continue again go through another loop
now I list and then back at 25 because
it's because it's a loop and they say
locals again and they can see the change
of those local variables now this is
pretty straightforward what if I want to
clear one I'm tired of this I don't want
to do forever right all i have to do is
clear the break point on 25 it says
removed and then
and before I do that what I want to do
is basically sit one at the very last
statement which is 27 all right so i
take this one I copy it throw it right
there and break point is there I
continue I list and I'm at the very last
statement I could certainly do locals
and it would print out all the values of
the local variables within scope but it
also could do print some and then
actually named that particular variable
and we tell me that the sum is 498 she
do locals right here there you go same
thing if you need help all you gotta do
is ask for it and say help and it would
give you a bunch of options right
they're the ones that you would expect
to find on your IDE but it will not do
that I'm just going to exit now notice
that jdb right now is an old code that
actually compiled what if this thing
exists somewhere else so um what you
want to do is something different this
time it's assume that this code lives on
the server let me try to diss code like
alone I can I kind of messed it up a
little bit some alright so this code
lives on the server when you start it
you need to start it with the debugging
option turned on and you need to
basically define JD that literally like
start like a.j like a run J DWP server
at port like 4000 if you want to write
your own debugger all you gotta do is
write a server that implements they
implements that binary protocol so I'm
just going to do that and this time I am
I gonna start a session differently this
is an application that's all of it
you're running I can verify that by
doing JPS and they have by doing JPS and
I something happened there to do it
anyways so I'm not going to hang on this
I will make sure that it works next time
well I'll do it one more time give it
one more chance and then we move on
because there's a lot more interesting
stuff than this to be doing but anyways
you would you know what I will try it
one more time sorry guys I have to let's
do that again see what happens I do JPS
is there's something there so it's not
so all you have to do is basically go
and you attach it you know for that
fourth the port that is open and you can
literally have like requests like coming
to your server and you have that
literally that breaking point right
there sitting on like staging or
something that you can afford to
basically step the 22 to stall and you
can go through it like one by one you
know the same way the exact same way
that the exact same way that we just we
just did now that was exercise one I
really think that jdb it's very
straightforward I mean it's like JCC but
sometimes you have no other choice by
using it for your daily development time
don't make it difficult for yourself
tissues that you clip so IntelliJ or
whatever the next interesting thing is
the next one is Jace tag all right Jay
stack is one of the me go over the coach
real quick for exercise too all right so
exercise 2 is basically the Frog is it
shift command + no shift ctrl + shift
now let's work here huh read that this
is broke my coat so um this is basically
very simple if you want to simulate a
deadlock all you have to do is have two
different threads right and I've got one
right there called lock snake jaw and
frog job all you have to do is have two
different threads going off at the same
time and lock them in different out of
order so the first one which is the
snake thread basis simply just sleeps
for a little bit lots um the snake jaw
and then you know locks d the Frog John
and locks again it's like a box unlocks
the jaw and then unlocks the snake
John so if i do the exact same thing on
a different thread right here which is d
frog thread I just do it out of order
then I have a deadlock one hundred
percent of the time and this is for the
sake of demonstration right so it's one
of the things that you might want to
look out look for the you know the
pattern is you might want to look for if
you have one of these right so the Frog
is different the Frog actually starts
with it it opens its mouth first and
then kind of bites dia them like holds
on to do today it's next month but no
whatever yeah so on would prove that in
a little bit so I kind of tried to be a
little cute and I'd like some print
statements that would kind of describe
it's like a little bit versus lock and
unlock because it can be a little bit
confusing and the way it is is that the
snake sees the Frog the snake opens wide
and strikes the Frog then the snake
misses the frogs head and bites its
lower lower jaw snake is trying to
swallow the floor of the fog the snake
swallows the frog and the snake hates it
and he's that's awesome all right now on
the other side on the Frog side it's
different I've got the fog seeing the
snake the fog oaklands why trying to
fend it off like get away from me snake
I don't like you I am afraid of you then
at some point you know the Frog grabs
the snake with its right Manus which is
like frog hand all right and it tries to
basically pull it off tries to pull it
off and then given that it that it
succeeded at doing that it would
basically escape so let's see how that
let me prove first that this is an
actual an actual deadlock and
I'm going to go and basically compile
that code yes is boring stuff remember
no no G option right there code is
compiled and I'm just going to run it
this is just 3 direction to Devon all
right there so what do we expect to
expect a deadlock and they're like this
right now right we've got fog seized the
snake snake sees the Frog it opens white
stripes it frog opens the snake mrs. the
snake is trying to swallow it for grabs
by the hand with the right Manus and the
frog is trying to pull it off and they
would stay this way until the end of
history on the end of this computer so
I'm going to kill this all right because
and I'm just basically a run this thing
as a background process and then so
we're not annoyed by that text just
leave it in the background the beautiful
JP has come you know command that
basically it will tell you just the bits
of the Java processes that are running
on the JVM you can see main two right
there running so now it just it's been
taking too long how do I know whether
this is a deadlock or not the way you
would basically do that is you use this
really cute tool called J stack this is
just some code a bunch of piping nothing
too scary that just basically
automatically get me this ID right there
so if I echo this you know just runs JPS
and it grabs for Maine to you know I
will get the exact same Pitt ID so
nothing scary all right there now they
wanted to make sure that this works on
everyone's computer and that you don't
have to do all things if I do this it
would print a whole lot of information
right there control- I'm assuming no hey
what was that was it like control
command ctrl shift
command shift all right command shift
minus the x-men shift- does not work
anyways um that's okay oh good so it
prints this whole different things a
bunch of information right there that
you can sift through but the most
important thing is this one right here
all right is it tells you whether you
have a deadlock or not right out the bat
and gives you a bunch of details and it
says that it found like one and there's
you've got it tells you that you know
parking waiting for this one this thread
is waiting for this one and this one is
waiting for the other so they're like
waiting for each other basically for
that lock they're waiting for that for
that for that walk to to be released so
you can go through that stuff on your
self since this is going to be there
forever i'm just going to kill it and
jps and moving on to the next things to
some better and pretty tools by the next
exercise the next one is j map now
memory leaks right memory leaks are very
interesting a lot of times it's settled
it is not a memory leak what do you
intentionally create like a bunch of
objects like so many objects you just
create them for the sake of creating
them the jvm is gotten really really
really good I preventing those types of
leaks I remember back in whatever 1.4
1.5 all you have to do is create these
giant strings and say in turn in turn in
turn in turn in turn and you'll end up
with a memory leak I just run out of
heap space because we keep saying like
in turn in turn right now the hotspot
sees that stuff and just prevents it
right a lot of things and just basically
prevents it so a memory leak is
something that is to be very strict it's
something that you didn't foresee the
buffer for example doesn't you know
flush properly or you use some kind of
Jay and I and
then you end up you know allocating
memory native memory space that you
couldn't like the allocate and things
that way all right so J map is this
really cute to a tool that's gonna you
know help you out with it now let me
just take you guys to wear the coat is
which is the third exercise and third
exercise is very simple it takes
advantage of this bug that has been on
the jdk forever here it is and it just
tells you there is the workaround what a
disappointment our fix that link so and
the pug is very straightforward they
even actually have a variation of this
code and I've got this method right
there that is called leak memory you
basically open a file you know and you
just keep reading this like huge like
characters or huge numbers you know and
try to basically like serialize them to
a file in the file system you just go
through this loop you create like some
you know a huge test text or like a
naren you try to kind of write them to
the file now you would assume that every
time you call flush right here every
time you write the object me do flush
that everything would be flushed and
everything would be good but it's it's
not the case this is a problem in Java
right now the workaround is providing
another method called reset that you
could add actually after the flood a
flush which are going to prevent that
memory leak from from happening it has
not been Benkei it been fixed since one
point whatever three or four but this is
probably the best way of doing it I
tried creating objects I tried a lot of
things but the JVM was just so good we
don't even need object pooling because
it does it on its own these days so
let's check out that tool again regular
compilation nothing too crazy right here
you know main three this time now we're
running it is a little different right
now I'm gonna put it up right there so
you guys can see it so I'm running it
with this JVM option in this J
option is dash X plus heap dump on out
of memory error all this does is
basically when you run out of memory you
should have this turned on by default if
you're running within a particular
container you know jboss or glassfish
whatever it is they do that like anyways
is that before you kind of detached the
JVM and I ran out of heap space please
just you know dump the stuff in a file
that it could look at later and analyze
how would using different tools and
whatnot now you would know this right
here that the memory is going to be
decreasing their what I'm going to do is
basically do the exact same thing grab
that kid with that little thing and what
I'm going to do is run this on J map
this is just a watch this basically it
would like kind of run J map like over
and over again you know every one second
and then it's just like a Linux thing
and then you have jmatt history we want
a histogram live and they pass it the
pit and let's see what happens and then
you've got this right and it basically
tells you that the numbers of the number
of instances that's a character by
character and it just tells you how much
of those like we're creating I mean I go
out of the loop a lot of these things
are supposed to be dereferenced but they
don't they just like stay there and you
can sit there and you kind of watch it
you know whatever its kind of reminds me
of those traders they are like the best
and nicest you know screens out there
like five of them there are all these
charts on them like there is nothing you
could be like following on you know all
of these stocks at the same time you
know you just if engineers can't do it
the traders cannot do it by default so
they're not they're not smarter so the
last thing is basically something
different it's basically just dash heap
this is just going to give you a
snapshot and this is going to keep
refreshing it over and over again
oh it's too short so actually the bit
that ends up refreshing you can't really
see but that's all right you can't
really see it you know the watch kind of
well you know what I'll run it without
the watch my money got the wash so you
can get you know what type of
information that you should be getting
there right there see you got like the
capacity used free now soldier like
basically the hip usage and it's you
know multi-generational jvm you know
just all that stuff right there you've
noticed right here that I'm losing
memory like crazy right so I better shut
this down like very soon so I do it like
JPS again and I'm just gonna kill that
night in this thing all right last night
and the power is mine look at that
memory being freed up like in a little
bit you would hope and we're cool these
are the basic the absolute bare minimum
tools that one should have under his
belt or under her belt at least some
kind of familiarity with these things
you'll find yourself in certain
environments that that's all you've
basically have going on now forget that
it's too much text let's look at nice
GUI tools all right I'm gonna run main
you chew and main to basically is the
snake and the frog right there and it's
running and this time and I'm sure you
came across its jay console how many
people came across Jay counselor did
with it in one way or another a lot of
people in the room right I'm going to
grab the bid and basically do jake onson
Jake also exposes a lot of these things
by jmx basically no um it's pretty cool
horn just going to bring it up come on
dude all right jake onson is pretty
straightforward
go on it's kinda yeah yeah yeah and
secure brings up a bunch of stuff if you
go to threads right here you kind of
know that you've got basically am that
the light number of life threads like
don't don't change and there is this
button here called detect lock it
basically passes through Jace back it
just calls J stack and it tells you that
these two are basically locked and it
gives you like the the stack trace if
you go and you look for you're talking
about like line 54 right there with that
one is stuck and then the other one is
very simple memory when did with it you
know later and there was like a bunch of
stuff right here that you could
basically look at but it's no J console
is cool but it was better who uses J
console you know it's not like Java
three so forget GJ console I'm gonna
kill this guy snake and the other ones
that were tired of let's look at a
better way to kind of look at memory
leaks now I'm going to run main three
which is the one that grabs you know
memory like crazy HSP and see whether
that's the case because it's really
important that we visualize it the way
to do it is the awesomest tool t
absolute awesomest tool which is the
visual vm i think started out as an
independent projects now it ships with
Java what are you going to do is
basically go to this pain and find
basically your main class see there is
eclipse all right they're running double
click on it right there and you've got
all types of stuff now i am going to
monitor there's a bunch of things being
monitored right there i am going to
monitor memory only right now because i
do not want to be distracted with that
information and then we watch it for a
little bit you could kind of see the
allocation of the heap space these dips
all right here that you see these are
the the the garbage
collection no basically being picking up
stuff you could actually force it by
basically saying perform GC right here
at any time you know you don't want to
find yourself in a situation when you
have to do that but what we were going
to look for just going to let it like
run for like a little bit and see what a
leak looks like see a lot of these
things happen really really slowly and
you don't even notice them really really
slowly especially if you're running on
like a server that has like so many gigs
out there you don't even see them but
what you end up mean it's a crazy amount
of memory that we're trying to allocate
right here to trying to basically do
this simulation but you see it like
sometimes really Siddle you'd have like
your heap like increasing little by
little little by little until you find
yourself one day with with in and out of
memory and you know exception problem
and you see it come on I swear the graph
that I ran before looks so much better
than this one you know where my computer
always insists in embarrassing me in
front of people so let it let's leave it
run for like a little bit you know and
then let's go and explore different
things all right then right you could
certainly see threads you could go right
here and you look at look at life
threads only there is like the main
thread right here or you can see the
finish threads I mean it's it's really
you could have him you know by table and
it will tell you basically you know how
much time and in terms if you have like
different like basically priorities if
you're like you know you're working for
like a bank and you know whatever it is
sin in servers a server must always sell
stuff you know the customer service
service that's like a lower priority
already got those you already got their
money you know so you kind of have these
like matrix all right there that you
could go go off of sampler is very
interesting sampling you could simply
time sample at any time the CPU sample
any time sample at any time like the
memory so let's basically just do both
and it basically will tell you right now
that right now at this second the
allocation basically of bytes the
percentage of byte allocations you can
see them are getting tons of characters
right there you know on the tons of
array objects shorris a perm Jim
histogram this is like kind of the you
could get like a heap dump right there
there are even better tools by the way
these ones of the standards you could
get like a delta CP you dump a bunch of
things profiler it's very interesting
profiling is a lot more than what we saw
now on the monitor you can see this guy
kind of you can stick on it the trend
all right the GC is leaving things
behind approximately like this much
little by little you know and it just
like adds up and adds up and adds up and
adds up I think I have four gigs right
there of memory allocated to the JVM it
will crash what happened there buddy oh
that was from the other i hate's wink to
meet you another chapter yeah whatever
it messed it up for me but you could
kind of we could change actually the
max-heap said if you want using like a
JVM parameter and you see this thing
crash when this thing crash because we
run it with that particular JVM option
you could actually go back and then do
some kind of analysis using a bunch of
tools on that on that particular dump
there is a JVM option to specify exactly
where that file is going to be and how
it should be named in named named as
well and you can see this thing kind of
picking up where it left it maybe this
is just like a gooey thing right there a
profiler is different it's a profiler
CPU
and poor family what so a profiler is
concerned with like an extended period
of time you know like your state of your
heap for example over like an extended
like period of time you know how much
light bites per like class whatever it
is or like method or I mean there's like
a bunch of different things the bunch of
different like ways of looking looking
looking looking at fisting now the java
the DM on the advantage of the visual vm
or j console is that you get all of this
load of information for free but do you
actually care about the classes of every
single library or every single
dependency that get ended up being
loaded to the JVM do you care no it's
just a lot of information that will just
distract you so for that there are more
interesting tools I think we should just
kill this thing because I have 15 mins
left if you see this all right I have 15
minutes left a better kill this guy all
right all right ma'am JPS again there
you go man let me kill this guy before
it kills me see always kill last night I
went watch it for gigs cleaned all that
back all right so the last exercise
which is exercise for is about basically
tracing you could not talk about tracing
without talking about dtrace because
what you really care about is only that
code only that business logic you know
that euro get your service that you were
you were basically establishing all
these like connections to like the
database of different resources or these
external services and like you've doing
some kind of really controversial data
structure you know within or like some
controversial algorithm or whether you
trying to kind of quanta
whether that was an improvement or you
just made things like worse because you
could only say that if you actually have
instrumentation you have actually matrix
right there to prove it if you don't you
basically you would you're better off
assume that you have not improved
improved anything and beat race is
really really cool if you're running on
the Mac you'd have some problems but
what beat race is think about it like a
Opie for example right you specify these
point cuts and I'm going to borrow dear
the aop terminal here right here and you
say this is a trace of a beat race and
on methods thread on this method fed on
classf in every time method start um
it's called I need you to basically
execute this statement about to start a
thread all right that's basically I'm
you know as simple as that and you get
this it's called son that betrayed said
annotations that be traced you basically
say things like that every time an
exception is thrown I need you to log
something you know like and it's very
extremely because everything is kind of
baked in it's extremely extremely low
low low overhead a very low overhead way
of doing these things because if you're
doing opie sometimes it depends you
using spring its load time weaving
you're basically proxy in all of these
classes right there for you to basically
go and then say every time an exception
is thrown you added all these objects
you're really changing the structure of
your code or even if it's compiled time
weaving you might or might not depending
you know lose some serious compiler
optimizations you when you do that and
you're going to have to add another
compilation step but we'd be trace
defining things this way you're good now
the code for this one is very simple you
are the code and touched other people's
out of code on the server
touch this is completely independent so
if you go to exercise for right here you
have your main class and it just goes
and creates a bunch of threads and stand
and sleep and the expectation is that
Beatrice is basically going to log or
like print that line every single time
you know something you know I new thread
it's created every time start is created
as we specified as we spray a specified
them now I use the word expectation for
you for a reason before I move there if
I go back to a tracer right there this
is not Prince sits out print this is
basically like a you tell that would
basically just you know log things or
like print them to the console whatever
it is the reason why is that it really
avoids to kind of create an object you
know like a system out object and kind
of be mixed in with with Lewis you're
like how would you like you know input
output buffers is the JVM basically you
know betrays keeps these things like
really really kind of separated from one
another so so that's basically what it
takes I am going to go here there's I
read me file it tells you you know how
to download it or to download it how to
compile it very simple just simple
compilation and stuff I mean I'm just
adding right here the classpath because
i'm using those annotations and i'm
running in my program in a way that is
very simple I get the pit and they call
be trace which is that utility and I
give the tracer which is the script of
sometimes we call the script which is
that Java file that says every time you
start a thread go ahead and then a pass
it like basically the pit you could very
much do this thing remotely you'll have
like server running on a JVM that is
somewhere else and you basically specify
the house specify the port you know
given that you've got be traced Asians
right there like waiting or likely
seen on that particular port and then
you get basically all that information
right there if you're really trying to
spending some time trying to figure out
what causes those particular problems
I'll give you a very good example to
concretize this something that we went
through that I mean a bug that we went
through and including really could not
fix and we had to resolve resort to
something like that we had this mobile
app you've got all these people
basically heading like our API and we
have these like random are exceptions
literally dislike nastya random
exceptions we did a lot of login we had
a lot of users maywood union with a lot
of users thing goes like in hundreds of
thousands so that really impacted our
performance will run on AWS we had to
spend like other instances where the big
problem when this problem was is that
you know we didn't have session affinity
so like you literally half of your
requests saw here and the other half in
some other server we didn't we didn't
make sure that for the safe to be able
to scale and then we didn't know what
the hell was going on so we ended up put
in all of these treasures and what it
turned out to be is that there's a piece
of the code of this independent library
this third-party library that actually
every time you give it an IP address
they will try to resolve it or makes the
assumption they would be resolved to a
dns name and this works on my phone with
AT&amp;amp;T whatever it is because they would
assign every single client a dns name
your IP whatever it is at AT&amp;amp;T but in
some other areas or all the towers it's
just does not work so now we've tested
it on different networks at home we do
over Wi-Fi different connections and we
could never hit that particular problem
so we D traced and we started found out
exactly where the problem is and started
logging those particular IP addresses
and can I realized that the exact same
client moving around from one tower to
talk to another sometimes he's in the
garage where the towers that really suck
the old ones that the
I get like a DNS and it stops working
sometimes he is like downtown San
Francisco or everything the
infrastructure is a little bit newer so
I can't tell you how much time was spent
going through over this code and it
looks fine and we tested it and we had
unit tests could you test for every
single IP address in the universe no you
couldn't so we had to use things like
that now this is being said all of these
tools are free they're available for you
to use and available for you to play
with there are much more and much better
offerings right there that are superior
to this there is no relic for example
all of these oil column APM's think
application performance monitor their
some of them offer tracing I know New
Relic just like edit it out there they
have a major spring insights as well
they have amazing amazing amazing
visibility but a lot of times this is
what you're stuck with and you could
also be like the cool kid that you know
knows a few commands of like jdb and
kind of you know shows them off before
everybody kind of realizes that it's
just a couple of command so I tech shop
but then this is basically what this
session is please go to the repo if you
have questions please let me know and if
there is any way this conference said
the format of this presentation can be
improved I would very much appreciate
that feedback that one and good one like
the bad ones just going to make me
make me a you know improve it and would
love for you guys to impact it in a in a
positive way that's it any questions
second remotely yes yes that's actually
most of yeah so I just didn't beat race
has some problems with the back to it so
there is i put together there's this
really nice blog post for me friend of
mine just get like a workaround right
there published you could follow that
and it will think make things like a
little bitter oh come on by yeah so um
yeah I mean that Sam that's an that's
basically it anything else thank you
guys for coming out thank you guys for
sitting through a debugging talk I try
to make it as interesting as I could you
know I hope I succeed a little bit at
that you know if not you know sorry to
disappoint thank you guys</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>