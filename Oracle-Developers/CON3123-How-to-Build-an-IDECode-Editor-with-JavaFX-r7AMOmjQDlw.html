<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>CON3123 - How to Build an IDE/Code Editor with JavaFX | Coder Coacher - Coaching Coders</title><meta content="CON3123 - How to Build an IDE/Code Editor with JavaFX - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Developers/">Oracle Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>CON3123 - How to Build an IDE/Code Editor with JavaFX</b></h2><h5 class="post__date">2015-12-14</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/r7AMOmjQDlw" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">welcome to smart code editors with
JavaFX my name is Tom channel CTO or
co-founder of a small company located in
Austria Western Europe
okay the Innsbruck I'm Eclipse committee
at various projects Eclipse Eclipse for
which was incubated at the Eclipse for
application platform was built on I was
the guy who did was part of the initial
implementation and initial prototype was
written by me
committee at the platform EMF that keeps
modeling framework and I'm project lead
of a project called FX clips which does
all the Chava acts tooling and Eclipse
and beside that he provides you a
runtime platform that allows you to
write Java effects application on top of
OSGi and eclipse for application
framework what this talk is about this
talk about is not about IDE so I don't
care what which idea are using better
use Eclipse NetBeans IntelliJ I really
don't care what really matters to me is
that you use our runtime platform
because this is where I make my money
from I sell consulting services that you
can be offered to you and you can buy a
best solution that's the important thing
and for you it should matter that you
build your application on a stable
production ready open source IP
governance framework and this is what we
have the framework and all the stuff
that I'm showing that they are hosted at
the clips on the EPL own part eclipse
foundation in the end so if I have one
they say I don't want to want to do
anything anymore with this project the
sources are available at the clips
that's important so typically when we
talk about job of X application most
actual of X application fall into two
areas a data centric database front-end
or a data visualization application for
example the application that you saw the
NASA demos for example if you've been
there so we have written a small demo
applications for customers so this
application shows Eclipse for running
Java effects so you can have 3d models
you have a look flat look or a model
that can feel you can do picking in the
3d space you can do animations with it
you can rotate it we can position the
camera you can flip between stuff this
is what Java effects application typical
are written for so it shows you some
features of the Eclipse application
platform for example when you switch
between perspectives we see that in a
second then you can do fade animations
all this stuff is part of the core
platform that we are building our IDE or
our smart editor in the next 40 or 50
minutes ok so this is what we want to
build we want to build a smart code
editor which can be embedded anywhere it
doesn't necessarily have to run on the
Eclipse always try platform it could be
your your own application with plain
Java it should run anywhere it should
not depend on any framework and all this
stuff should not be necessary but if you
want you can embed it in a bigger
framework like the Eclipse for
application platform it should be female
you should be able to switch themes
seamlessly this is not a mystery in Java
effects is simply exchange exchange to
CSS stylesheet and you get a completely
different look and feel so this is what
we going what I'm going to tell you how
you can go and implement that and the
components we have for you to do it
yourself so let me do this stuff we
fairly have first have to think about
what api's are available in Java have ax
to do texts to deal with texts first you
have the text node text node allows you
to define font size of
name a fill color of your fund it can
play display multiple lines but it can
only have one color and one size for one
text note in your scene graph you can't
say the first two letters are in black
and the second two letters or the third
and the fourth letter are in green
that's not possible with this API so if
you use that API it the result is a
simple text note next element that you
have in Java of X is text flow text flow
is more is more flexible it allows you
to have multiple text nodes each text
node has a style but it has one big
problem in all ways renders all text
notes that you put in there which means
if you have a source code file with
100,000 lines of code you are rendering
whether you see them or not you're
rendering 100 or 100,000 lines of code
each line of code is made up of text
components so you have four hundred five
hundred thousand text notes that you're
rendering that doesn't make any sense
so text flow doesn't do the job that we
need to find an editor in Java effects
and on top of that it doesn't allow you
to edit stuff
that's only for display text flow looks
like this from the API point of view
what you get out of that we get a text
that each node has its own properties so
you can mix between colors and font
sizes and all the stuff next API that
you have you have to label in Java
effects to display text once more has
the capability of displaying well-formed
a fill color it can have multiple lines
it can show a graphics at the beginning
at the end or a top but it has an
editing support and it has one font size
one fill color for my PI point of view
it looks like this
next control we have is text field text
fit is for a single line of editable
text but it has one font size one color
for the whole text field so result of
the API call is a text field until now
we haven't found any node in chav
effects that really we can really use to
write a text editor
the next option natural choice people
are targeting when they display text in
java facts is text area and that's one
of the dumpers decision that you can do
when you have to display multiple lines
of text
i'd say text area no more than ten lines
of tank ten lines otherwise don't do
that because text area is backed by one
big text node whenever you add it it has
to modify this one text node once more
if it's 100 lines of text in this text
node you are rendering this complete
text node where you have the scroll bar
on the right positioned at the top or
upon it doesn't matter so don't use text
area for example to write lock output
into it that makes no sense that this is
the control is not made for that but it
allows you to display multiple lines of
text so we are a little bit in trouble
now because all the default JavaFX api's
don't allow you don't allow us to
implement the text editor which has
multiple ranges of styles so there is no
remade control so what we did at the
epic scripts project we first started
implementing those native controls that
you need have a range that has color red
and the range that has color blue and a
different font size so we started
implementing those notes in the JavaFX
scene graph world the first thing is a
style string it's something like an
annotated string it implements car
sequence and many of the api's that you
have in ethics Clips allow you to pass a
cause or charge sequence
that of a string so we can pass a style
string everywhere and then make out of
that scene graph note that really has
different style ranges with different
colors on what let me see what I can get
then so the last point is to API that we
have and you have a style string but as
you see in the next slide how you build
a third string then out of that you need
some at some point you have to create a
scene graph node but you discipline the
chav effects scene graph and util dot
node creates such a scene graph element
for you so the next slide shows you this
in API calls so you create a styled
string and then you want display this
start string in the center so you see
you have a style string where a pen the
segment styled with the CSS selector h1
and you append a segment string if h1
and colorful I love that you get with
this use s you would get and UI element
that looks like this so it is attack it
feels like a text node which can have
multiple style ranges in it well this is
for displaying text the next API that
they have is styled label it has the
same API as the Java of X label but once
more works with a stout string so it
allows you allows me to display style
label informations once more only
displaying and this is now the really
important note that we provide it's
called style text area it allows to edit
multiple lines of text
it allows anticipate different colors
different fonts and the most important
thing it is virtual so it only displays
the lines that you turn to see on screen
when you scroll it we
samples all the stuff so if you only
show trend lines in your screen but your
file has 100,000 lines we only create
the scene graph nodes for the 20 lines
that you see on screen that's the
important thing that's the key thing and
they keep the content in a specialized
class called startx content usage is
very simple it follows the scheme that
we saw with the styled string so you
have style ranges very defined in which
area of the string that we have as a
Content how what is the style range that
order CSS selectors that we applied to
so out of that we get the control if
this CSS class that is editable shows us
line numbers and is virtual and can be
display text large large large amounts
of text so how does that work
and amazingly it's that simple it's only
a trick that we're using the control
you're seeing here is a JavaFX ListView
for each line that you see there is each
list line is one line in the in the
scene graph so we have not written our
own virtual flow container or something
that we are reusing ListView from java
effects this is a ListView nothing more
than the list stream then we have a
specialized text layout container class
which is able to display for example
selection ranges and the final note that
is at the low level is a style text note
that does really the text layout was
filled that the text itself that's the
trick our control is
too many clicks on the slides so many of
you might ask yourself but I read about
there is another control planet Earth
that is available to do that because
there is a free control from Thomas
Nikola who is named rich text area so
are you guys at the clip suffering from
the not invented here syndrome and yes
partially at least but the important
thing is we want to have a text node
that works has 90% the same api then the
style text control that you have it has
to be t because at the very moment we
have a control that has the same api we
can use all the eclipse text
infrastructure which does the parsing
tokenizing without picketed for free we
don't have to re-implement that because
our api is 100 percent or 90 percent the
same 99% the same we can use all this
code that we have with eclipse which
underpins the eclipse ide your Eclipse
editor we want to have IP clean code the
project from Thomas is at github I don't
know that he is tracking all the
contributions he has a service layer has
a CLA the face with his contributors I
don't know
and when in my commercial applications I
want to add stuff I want to have it IP
clean I don't want to run in the IP
problems this is an eclipse we have a
pee clearance all this stuff is IP clean
and the most important thing is editing
performance and I now give you some
numbers first and most important both
controls a virtual both have excellent
rendering speed both frameworks have a
blocker good pass infrastructure and
provide default and summer parses and
is where the real change happens eclipse
style text or our style text control can
use the Eclipse text infrastructure for
parsing and tokenizing and Thomas has a
sample of rack X for medium-sized
controls the difference is not really
big on in it it takes 300 milliseconds
for 10,000 lines of Java code for style
text and 400 milliseconds with rag X
with 150 thousand lines of code the
difference gets bigger it's one second
compared to three seconds this is in it
and it is not really a problem but the
problem comes when we do editing and
this is where the real difference
happens for ten thousand lines of code
each keystroke for us in Eclipse text
it's 30 milliseconds from typing the key
damaging all the pro check or audio
source code and rendering it for Thomas
it takes 100 10 milliseconds and the
difference really gets bigger at the
moment we have 150 thousand lines of
code we have still 550 milliseconds on
each keystroke whereas the nave records
implementation that which text area has
takes two seconds each keystroke it
waits it holds the scene graph the
rendering for two seconds this is an
adjustable or transitive unjustifiable
this is not how you can write an IDE so
50 milliseconds is okay and even one of
those faster but but I think 50
milliseconds is okay for 150 thousand
lines of code well the numbers from
Thomas could probably be divided by dude
Bobby there's a buck in his in his
framework where he does the parsing
twice but still for its would be 900
milliseconds which is too long
so just to give you an example that I'm
not this is opening 10,000 lines of code
and beside opening that I run the chi DT
parser to get an AST for 10,000 lines of
code let's do that for long which is 150
thousand lines of code you so it took a
little bit longer but in the end it
worked and editing performance I can
type in here and it you always see the
UI is reacting if you do that with rich
text area you wait for each key pressed
for two minutes at for two seconds this
is not how you edit you can edit Java
files or edit in your IDE that's
impossible
okay back to the slides so just to give
you an impression how you would set up
such a style text control that's rich
text area that's style text well I'm
cheating a little bit because if a
specialized builder that does really the
heavy lifting which is not as flexible
as the as the reg X stuff from Thomas
but this is only the public API the the
convenience API that you can use and it
does the deal for most Java like
languages at guests so you have multi
definition how multi-line comment looks
like how multi document looks like a
single line comment looks like a string
is started and you have the possibility
to add keywords that is sufficient for
yet
now we don't have line dropping at the
moment so as our control we don't
support line dropping at the moment a
question was do you support line
dropping no but that's a feature that we
have to add to the style text control to
the visual control this what we see here
is about the parsing of texts but no
that's a feature we don't yet have so
let me look back at editors or smarter
teachers the first thing that we want to
have is syntax highlighting that's
probably the most important feature that
I want to have if I open a file in my
IDE I at least want to have syntax
highlighting well I'm not sure that I
want out the completion all the stuff
but syntax highlighting is the most
important feature to me at least
so first I'm most important for me is
syntax highlighting the second features
that we have is monitors is error
markers so if there is a problem we need
to show an error and the last though the
next feature then the hover somewhere we
want to have contextual information
about the Javadoc for example that's
defined on the hive and the last feature
that's most important or very important
is how to complete I'd say centers are I
think are the complete error marking is
the order of importance when we talk
about editors so let's first take a
really deep look into how does the
syntax highlighting work well you saw
that when we typed we've have been
extremely fast in recognizing or change
your text changes so how could we make
it that that we didn't have to parse
150,000 nines of code whenever you do a
keystroke and the trick that eclipses
text is using it partitions your
document in certain regions so we've
been editing in the Java Docs region so
it only had
take a look at the 10 or 15 lines of
code that made up this region it after
this 15 lines of code it said nothing
has changed there I don't have I don't
have to to reparse all the stuff in
there so the first step when you look at
the clips text is we are partitioning
our document and that's done the fan
interface called I document partitioner
in the second step and we have all the
partitions we have to tokenize or create
tokens out of this partition for example
we have to identify keywords and other
informations annotations that's a second
step but you only have to do this step
on a partition that currently has
changed all other partitions we don't
have to rerun all the tokenizing so
that's the trick how we get to a
performance of 50 milliseconds for 150
thousand lines of code let me look at
our Java file we can identify the
following partitions so the first is the
Javadoc partition next is a single line
comment partition or multi-line comment
partition as during partition and all
that is not covered by these partitions
is a so-called default position in our
case this is where all the Java code
resides so how do we identify those
partitions well it looks like there are
very simple rules to do that so a dart
dock we can find out if starts with
slash Astrix Asterix and ends with
asterisks of slash comment single line
comment starts with slash slash
multi-line slash Asterix Asterix a
string and a character we have extremely
simple rules to identify the partitions
in our source code
to express those rules we have an
interface called I rule and it has two
basic implementations single line rule
and the multi line rule so in our case
for example a single line rule looks
like this so it says a single edge rule
it whatever is something starts with
slash slash then at the end it is a dart
SL comment partition if it is a
multi-line rule it starts with a slash
Astrix Asterix and ends with the Asterix
slash then it's at our dock partition
I'm using dart as an example here not
because I've never written any dart
program in my in my life but dart
provides us a headless server that we
can use to do outer completions in the
rest of the talk so now you know some I
have to get from the rules to the
perdition which is that clips text it's
sounds extremely complex but you will
see in three slides how easy it gets for
us
you need a document petitioner
thankfully eclipse text prior to default
implementation called fast petitioner a
petitioner takes a token scanner but
happy we are there is a rule base
partition scanner which is provided by
default the rule based petitions cannot
take can't take our rules so when we set
up such a scanner it's nothing more than
sub classing a base class from eclipse
and using it so we always subclass the
base class so this was a lot of Java
code and a lot of API is that we need to
remember and we write text editors with
the framework we don't want to remember
all the stuff in fact all we did we did
create configuration code and instead of
writing configuration code we could
invent the DSL that really expresses
what we want to have expressed in our
Java configuration code so what we
defined was a small DSL
that allows us to define how a
partitioning of your document works so
it starts with a package keyword and
then the language definition and then in
the section partitioning we are defining
what partitions do we have and how they
look like we don't have to remember all
the low-level Java code that's not
needed we can use this DSL and how have
these tiers LD can generate all the
configuration code for you so now that
we have partitioned our document the
start of the tokenization so the Javadoc
is only one big token and the token the
important information our token is it
has information from where to where the
token is displayed more interesting of
course is the source code partition
which is in this case made up of
multiple key word tokens and for example
a default token that's those days in
black e tokenizing works the same way
than partitioning there's the rules API
the one that they used for partitioning
we can reuse for tokenizing but there we
need some more cleverer rules for
example for key words we need a
specialized rule and for characters we
need a specialized rule but in the end
it's the same pattern that we apply a
rule defines how how we tokenize the
partition once more we have many many
base classes so the partitioning works
by defining a I presentation rican solid
there is a default implementation which
once more takes some other classes like
called I presentation temperature and
high presentation repairer eclipse text
provides one more default implementation
for them and at the low lab we have a
rule-based Canada takes all our rules
and makes out of that the tokenizing of
it exportation so this is how you set up
tokenizing for our Java example so you
create tokens for all the attributes
this is the combined word rule that we
defined that you can define your
keywords and then you need the
presentation reconciler
this is one more holy lot of shitty code
for configuring our text parsing
infrastructure so well the first section
of our DSL dealt with partitioning the
second part defines the lexical
highlighting rules that we have so we
have our partitions and there we define
in our petitions that we have a keyword
rule for keywords or a single line rule
for example in Java talk or in dart dock
so instead of remembering all these
low-level api c once more i only have to
define how the tokenizing happens in our
to yourself and we will generate the
java code out of this DSL
so last step is the visual
representation so we have tokenized
this guy and the important thing that we
see up here is that we have dart dart
default and dart dart keyword this can
be translated in this Java code or is
translated in this Java code and finally
all you do is in your CSS file you use
them as class selectors to define a
token for example the keyword token is
now colored in purple and bold well
using direct colors is not a good idea
because when you want to switch theme we
would have to define a color for a dark
theme and the call
for a purple fame so but JavaFX has it
can reference colors from other CSS
files so what we did we predefined
colors that you can use so for example
this one would get to start text editor
source editor keyword in a light theme
Eclipse Fame we have purple in a dark
theme we would have a really different
color so let's do a live demo on this
stuff
lexical highlighting so here we have our
our DSL file chat last bit let me just
first open the dart editor
this is the editor so you already see a
basic highlighting but we also want to
have this guys those are built-in types
in in in in dart we want to have them
colored as well so when you want to do
that we have to go to our dart
definition file here we go and here we
have to add a rule that called dart
built-in types which in dart contains
keywords of for example step one so we
added the rules to our CSS file second
step is we go to our CSS file and add
the CSS rule so in this case we need a
CSS rule dart and then we go dart
built-in types which has an styled text
color of - source
type and FX font weight forward so let
me now launch once more and I have not
made any typos then the editor will get
up at least I expected it to get up I
had made built-in built-in type will
have built in I have have type window
and default CSS definition so
and now we have the keywords colored in
green when they switch theme to dark
then we have them in yellow this is only
because we're using references we
predefined all the colors for you and
this in this area okay so that's the
trick about or that's all we need to
know about the syntax highlighting this
is really the key the key is you don't
have to remember all those api's that
lead to the configuration of the clap
Eclipse text framework
just use the DSL that we have and allows
you to really express how your
tokenizing and partitioning has to look
like you so next we're gonna look at the
auto completion and the application that
we are seeing here is build on top of a
framework called eclipse 4 which
underpins the clips for IDE in the end
which leverages OSGi service has a
custom dependency injection container
and is backed by an application model if
it slips provides specialized rendering
by default from eclipse you get a
renderer that takes this application and
renders it using ste T but this is only
a service to the complete framework so
if you want to render at Java vex
application you exchange to rendering
framework from a strategic Chavo of X
and that what the FX scripts product is
providing to you so there is no mixture
between activity and swim hexing
happening here this is pure Java of X
and it has advanced api's like later
dialogues perspective transitions all
this stuff is available as part of the
framework so from a reflector point of
view Eclipse for works like this we have
two VM on top of that we have always GI
on top of that you have the Eclipse for
application platform this is all toolkit
agnostic no UI toolkit and then is the
lair of the toolkit which by default is
a stability the festivity and J phase
for the viewer framework
and on top of that is your application
code and what we are doing or what we
have done and this was designed from day
one like this that you can throw out a
suti and replace that with java fax
natural your application code also have
the program against the Cho of x AP is
but you can use the complete eclipse for
framework which is industrial proven
it's used on a daily base but millions
of developers and build on top of that
your application on your project and for
special reasons here we added in here
for code editing our own ethics clips
code framework which does the style text
control and all the stuff on top of it
nope
how can we adjust your all this
information in the eclipse system I
don't know how many of you have ever
used OSGi but OCR has a service registry
and Debbie can register service
providers or services in our case we
have to register so-called type
providers that provides the type that we
are using for partitioning and
tokenizing or recon solid so in code it
looks like this it's nothing more than
having the service getting read just in
the OS chat service registry the
registration is done by adding add
component up here if you have a certain
plugin installed in your IDE then this
will generate the OSGi service
registration XML code file for you you
see here there's a test method and then
we look at the input input is the
internal representation of for example a
source file we check whether it ends you
start and then the petitioner that has
to be used at the part dot petitioner
the same is done for the reconciler so
this is how it register all those
providers in the service veg
so generally speaking what makes up the
text Tudor is a class called ethics text
editor and the important thing about
this class is it is only configured
through dependency injection so this
class can be easily used outside of the
clips framework in your normal java
application all it does it has some
adding checked annotations where the
dependency injection container can fill
it with information but this stuff can
be used in any ordinary Java code I show
you example at the end of the of the top
for air opening editors there is a
specialist service called editor opener
which you can pass over to so opening
such editor is nothing more than getting
access to the editor opener service and
then provided the UL of the file you
want to open that's all if you are an
eclipse for free our world it's only
those two Java classes that you need to
write to get a petitioner and tokenize a
registered in the eclipse framework next
step is autocomplete so there's an
observation I made so lately all
languages that I looked at this will
have been taught typescript and others
like rust or go they all provider had
the server so you as an icon as an IDE
developer don't necessarily have to deal
with all the error reporting out the
completion stuff this is delegated to a
headless server and your IDE or your
editor only have to interface with this
headless server to get out the
completion of working for that there's
the dark analysis server which comes
with the dart SDK and for typescript
there's a service called language
service which is in the so called TS
server and you're communicating with
this headless servers so it's
fairly easy for you to connect the
language to any editor on the world that
it's bi
Eclipse IntelliJ it doesn't matter all
you need is a really good editor that
allows to do syntax highlighting and the
rest is delegated to this headless
server application for Java directives
project Eclipse flux and Eclipse J who
have such a such a support and we have
our intro research project called cold
serve where we can deal with many
languages like Java typescript and so on
so now take a look at the dart server
and that's why I've chosen tart because
this is something you can download so
all the code that I have is published in
and github repo so you can fetch it and
try it out yourself on your IDE whether
its IntelliJ NetBeans doesn't matter so
two interaction types of the dart server
but generally you communicate with this
guy through the standard in and standard
output string that's the communication
with this dart server so there are two
times there's a request type you send a
request and you get the response and
there is a a thing called notifications
so that the server proactively
tells your informations for example that
an error is reported in some source code
file there's nothing you make a request
but this is the server is proactively
sending you informations that's the
so-called notification on the system so
when we look at how they communicate
with dart the dart server sending
JavaScript object notation packages
between us and the server the first
thing you need to tell the server there
is the source code for this file and you
get a response of okay or not okay
second step when you want to do out the
completion there's nothing more than
sending the server you
have other completions for the file that
start at offset and that's exactly the
offset view here and the server will not
directly respond with the result but it
could take some time for the calculation
so it asynchronously sends me a
notification or event about completion
results until you see the completion
results so then I'm in my IDE and - a
control space I sent this to the server
and have to wait for the server to
respond with informations of how to
complete so this is how the real
communication happens what we have
written on top of that is a Java API so
the cause that we saw in the previous
slides are in Java code like this you
create a server the factory you get the
services service analysis service and
the completion service and if you want
to have set the routes where the
analyzation is happening and when you
want to do the completion the first you
register yourself as a completion
Handler and at some point in time after
this request has sent you are getting
here to hand the results and get the
results from the dart server and can
display those results to the customer
for other complete so how does our style
text or our editor deal with
autocomplete so it sees outer complete
as a optional service so if it's not
there the editor still works it just
doesn't has out the complete so outer
completion is done by optional service
called proposal computer and the
personal computer is once more
registered in the OHS service registry
specialist service and this would look
then like this there's a DA proposal
computer which uses the chat lines of
Java code that we just saw so
it sends the server the information that
it needs out the complete at the given
location and then it creates a future
because the response is not immediate we
need to wait for a response we return a
future and in the future is completed we
can show the information to the
constituted to the user that initialized
out the completing so then we do out the
completion so once more in code we go to
the outer completion computer so first
thing we need to register this guy and
service registry nothing more and adding
the annotation delete this then we need
to write the code for the outer
completion copying this code so it's
nothing more than this lines of code
delete that line and then we start once
more no then our editor magically has
Auto completion so we can go here our
dot space and get out the completion
results this is the background what
we're doing it's really fairly simple so
this is what this is how new languages
are working so they provide units had
the server okay good next problem soft
how the completion the last step is
error markers the dart server can inform
us we can subscribe to error
notifications whenever something is
wrong in your dart code they get a
notification about the position where
it's wrong and then they can display an
error marker at this position okay in
Java code it looks like this so we get
there the service and that the service
then we reduce ourselves as an error
handler
and this is to get the initial list of
errors when we open the file but while
we are running this is the important
subscription whenever there is an error
the dot server will send us error
informations internally this is once
more done through two services an
annotation model which holds all the
annotations or markers and a service
that represents them in UI for example
Joe and I can somewhere underlining text
with purple color
this is thamba annotation presenter and
once more it's always the same we are
having two services that we were just in
the oyster service registry who do the
providing of this annotation for these
services so in code this is nothing more
than the register this annotation
service provider the register the
annotation for Center and then we now
start our application no and we make an
error in our file then the server
responds with error information and we
get a marker in our app so it's always
it's always the same pattern so now you
might argue oh he did all in OSGi and
all bla bla bla bla bla bla and eclipse
for I don't want to do that so the
completely same code so the outer stuff
is a little bit different but the rest
is the same this is pure Java
this is configured
as a maven module so this is this
application I only have a maven pump
which defines my dependencies this is
not pure Java no Eclipse for noise GI
this works because our architecture is
so clean that we never ever reference
any always GI stuff or something like
that all the stuff that we have is done
through dependency injection so we all
we have to have is a dependency
injection container who is able to
create our editor control and provides
or injects all the services like the
Lexi the highlighting service the out
the completion service the error marker
service into this control so this is key
point now you don't have to invent or
write the highlighting stuff for all
languages so we have already done that
for some of them as Keita talked
Salem tart Ruby Java JavaScript code
lean Lua pipe a PHP Python rust but in
the end it's so easy for you to define
that for your own language so if a
language you're using is missing it's
nothing more than firing up the IDE
anything this DSL file and and make a
push or a file a part in our against
eclipse of his clips and provide us this
file and we will add it to our code base
so then anybody on the world doesn't
have to repeat those steps but can make
use of this guy it's from us we have out
the completion for dart as open source
we have internal research for Java
JavaScript and typescript which are the
most important languages to us as Java
Java and typescript the most important
languages for us are Java and typescript
internally in our company and when we
look at the outline we currently have
open source support for
art and internal for JavaScript and Java
okay so what are the possible future of
all these components well we want to
have lexical highlighting for much more
languages but we already have some of
them so if you want to contribute please
do we want to have code folding I don't
know whether you know what code folding
is but I guess most of you do code
folding is this
so our editor current it does not
support code folding but that's a major
task so it's not yet there in the editor
we want to have error markers on text
content that's that's already in the
work anyone have semantic highlighting
at the moment the only two lexical
highlighting semantically thing we need
to fire up for example get the ast and
the first step into lexical highlighting
and then the augment the result once we
have an ast with ast information for
example color a field in blue now in the
current lexical highlighting it's simply
dark so and for code anything we want to
have refactor and rename which is not
yet there possible improvements for
eclipse framework i'm the troupe some of
them might stay a pipe dream but i want
to have eclipse for applications running
on Felix so currently the only support
Equinox so but this is something that I
have to get to the Eclipse project at
eclipse so it's nothing that I can do
myself so I need to change the clips
code base for that it's not that the
Eclipse IDE is running on Felix it's
just that Eclipse for applications which
eclipse RCP applications can run on
other OSGi containers and this is really
interesting I think we could make for
eclipse full application always joy and
opt-in model currently you
and run Eclipse for applications only on
OSGi I think with Chickasaw they can get
a wave of that and run with Aldo is chai
but this needs some serious refactorings
in the internals of the low level
Eclipse for packages because the only
thing Eclipse for the framework depends
only on the OS chess service registry
you don't need all the other stuff from
moisture it's only the registry and if
we can get that right we could run
eclipse our CP applications once more
not the IDE or without those chai
but as I said it might stay a pipe dream
so I think technical it would be
possible but who knows so that's it if
you have any questions then I'm P at
Eclipse poof tomorrow from 11:15 to 1300
these are the us the slides are up at
the talk and I'm open for questions
do your multiple do support multiple
curtain you both Moodle carries yeah
nope we don't at the moment editor does
not support it yep
for well simply selecting shouldn't be
the problem for Scala out the completion
I don't know how Scott well Scala is I
think they have a core plug-in that does
all the heavy lifting so this is how we
do it refer for Java for example we take
GTD core which is the core
infrastructure which does all the auto
completion reconciling stuff for us so
if Scala is structured in the same rate
it would be possible and not that a big
task
frankly I have no idea how a Clips
textures working internally well for me
it's well I know a little bit about it
but it for me in the end it's more of a
black box so it has this document
interface where I call replace text
refers with the length and the text that
I wanna insert and all the rest is up to
the framework so it works the it it
works completely the same way than it
does in the clips at today that's all I
know in the end but I think 50
milliseconds is okay as a speed it's a
50 milliseconds I know I wanna get
faster but still it is acceptable like
compared to when you do the rich text
with the which always runs the complete
wreck X on your 150,000 lines of code so
for me that at the moment it's the
trade-off so well in the end even here
start X doesn't care about who is doing
the hard thing so if your framework I
can I can use your implementation I
could simply connect my style text
control to your to your framework you
intellij framework so this is all
everything is a service to the system so
replace it with another implementation
of document or something like that the
system wouldn't any even even find out
that that's happening so I think the
strength of this all is that the FEMA
bility for CSS which is really really
nice compared to other and I think I
don't know how that is done in
intelligible and eclipse its nightmare
so but I have no knowledge about other
IDs
I can only rant about what Eclipse is
doing or doing wrong probably right
okay so thanks for coming and if you
have more questions I want to try out
this stuff see you at the booth or if
I'm looking around somewhere just drop
by and ask questions Thanks</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>