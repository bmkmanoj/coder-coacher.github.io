<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>CON2236   Spring Boot for the Java EE Developer | Coder Coacher - Coaching Coders</title><meta content="CON2236   Spring Boot for the Java EE Developer - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Developers/">Oracle Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>CON2236   Spring Boot for the Java EE Developer</b></h2><h5 class="post__date">2015-12-11</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/BhnAcAaBaYA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">first off I've got a given apology
because I wanted to do this talk wearing
a Tommy drive t-shirt or a java ee t
shirt of some sort but um I went to the
booth yesterday only have medium ones
and I decided not to inflict me in a
medium t-shirt on you so for those low
name my name is pearl web I work for
chemical pivotal I work on spring boo
pretty much full time and this talk is
spring boot for the java ee developer so
i guess before we get started who here
currently deploys applications using an
application server full java ee spec ok
and who uses something lighter like tom
cat or jetty some sort similar split
anyone deploying self-contained jar
files like with embedded servlet
containers like drop wizard styles me
like that ok so like the majority people
are either using app servers or like a
tomcat style deployment so first off
I've got to address the elephant in the
room which I've decided to illustrate
with this picture of a cat and dog quite
aware that a lot of vocal minority in
both communities tend to be a little bit
spring versus Java EE and a little bit
aggressive in their marketing I just
want to say that if you are here for
that kind of talk I'm afraid you're in
the wrong place so you might as well go
find something else to watch because
this is this is all about love I'm not
really interested in trying to pick one
thing against another I'm just trying to
show you some technologies that we've
got that you can use in your projects so
we're going to talk about is a little
bit what is spring boot for people that
don't don't know it that'll be fairly
quick we'll show you how you can deploy
a spring boot application in a Java EE
application server and then we'll look
at how you can use Java EE technologies
inside a spring boot self-contained jar
file happy
this talk is going to contain bits of
spring boot 13 which is going to be out
soon very soon hopefully so just be
aware that if you're trying to try this
stuff out you might want to make sure
you're using the latest version
otherwise stuff might not work the way
that I'm describing it ok so as anyone
tried spring boot yet it's using it ok
so about half three so spring boot is an
attempt to be convention over
configuration for spring framework so
you can kind of think of the spring
framework is giving you a bunch of
ingredients and spring boot is kind of
giving you a cake it's the recipe to
build those things together it's 0 xml
so other than if you're using an even
build there's no need to have spring XML
files and it also offers an embedded
servlet container so you can deploy an
application as a self-contained kind of
jar file that contains everything you
need so Josh long if you've seen speak
he often says that spring boot is like
pair programming with a spring team
which I kind of like but I think it's
more genuine to say spring boots like if
we search Stack Overflow for you so we
provide the conventions the
configurations we've done the hard work
of like searching and finding out how do
I get this data source configured how do
I get this caching layer sorted and we
try to provide the kind of standard ways
that we think you're most likely to want
to use it all right let's have a quick
demo of spring boot in five minutes so
the easiest way to get started with
spring boot is with the spring
initializer so this is a little project
that you can hit you can either hit it
on a web page it's quite nice because
you can curl it as well so if you're in
a command line you can curl start doc
spring do and it gives you like a little
text version so if you don't leave the
command line you can just get going
quickly and there's also plugins will
sts and IntelliJ so if I wanted to
create a demo app I use 127 for this I'm
just going to create a web application
and then this will generate me a quick
sort of skeleton application and spring
boot is not a code generation tool so
the initializer is a way to get started
but we don't have like continual code
generation or anything like that once
once you've done this you're in
so this little zip file is just a
standard maven project my default so I'm
just going to pull that into eclipse
this is it I don't know if you ever see
this little trick but if you've got a
Mac this is a great little way of
getting your current directory stick it
in the clipboard and then when you go to
jump into your IDE you can do import and
you can just paste the the location it's
a really handy technique okay so here's
a typical spring big application start
off by looking at the pom file so and
see who uses his maven user Gradle
anyone using ants oh oh someone by this
person a coffee there is a nun plug-in
by the way someone from the community or
contributed a spring boot and plug-in so
you're not alone although you should be
so if you're like look at the basic
spring boot project normally they
inherit from this spring boot starter
which provides a whole bunch of default
maven configuration for you and then
it's normally just a case of declaring
the things the kind of facets that
you're interested in for your
application and because we've inherited
from this starter parent thing we don't
have to declare version numbers for
these things so here I've got a
dependency on web which just relates
back to this thing that I selected over
here if we switch the full version
you'll see there's like a whole bunch of
things that you can you can check to
pick various features I'm going to get
rid of the tests because also I don't
want tests
rid of that okay and then if you look at
the actual code itself what we've got so
far is just a main class with this
spring boot application annotation and
this thing is actually a kind of
aggregation of some other annotations
we've got a configuration which is
brings way of saying this beam provides
other beans we have auto configuration
which is spring boots way of saying let
me try and do what I can for you and we
have components cam which is just like
find other beans down below this package
so I want to add a controller so I'm
doing an MVC application spring
everything rest controller
I can't tie this morning it's too early
it's too cold as well so so this will be
this rest controller is a spring MVC
annotation saying I'm type of spring
beam that exposes something over the web
this request mapping is going to say I
want to map the slash path to something
that returns a string and because it's a
rest control of this string will just
get rendered because we have that
component scamming this beam will just
get found so hopefully if I run this
thing so jumping back over here this is
so that's like the five-minute quick
introduction to just like a simple
spring boot application there any
questions on this stuff I've forgot to
say if you want to I this talk has got
like a whole bunch of pre-prepared
things that we could look at demos and
stuff that if we don't get through it's
on github so you can you can look at it
yourself so if you want if there's
questions just interrupt me yes question
ok so the question is I really haven't
said what spring boot exactly is yeah I
made some cake analogies that probably
weren't very technically accurate so
spring boot itself is trying to give you
a kind of self-contained way of writing
applications that reduce the need for
spring configuration so it's a way of
offering all the spring projects that
are out there so spring NBC's bring data
and give you a way of using them without
needing to worry quite so much about the
configuration that you're you need to do
so you'll notice in this example I i if
you've ever done a classic spring out
you may have had to find a web XML and
then put in some dispatcher filter
something so they look thing that then
initializes spring and then
at bean xml and then say i want spring
MVC and then i want component scanning
and with spring boo you don't need to do
any of that it's just trying to make
sensible decisions on your behalf so
answer any other oh so spring
initializer is just a really small web
service that we host on start lot spring
de I oh it's it's open source written
spring boot and it's just a quick way of
getting you a skeleton project so I mean
you can you could obviously do all this
stuff manually create a pom file and
remember to type it it's just a way of
getting you going
yeah so the questions do we have context
files that define beans and generally
not know if you want to define beans we
generally recommend Java config these
days but yeah you don't need web.xml and
you don't need spring XML files yeah so
the question is like what if we've made
a like stupid decision what if we've
decided to configure something and you
want it configured in a different way
and there are there are two ways to kind
of change what spring does the first is
we offer a lot of properties so a lot of
things can be configured through
properties so for instance if I look
here I could say I want a different port
and like a and a lot of spring boot can
be configured this way it's just a
property file that you just change
things if you find that we're doing
something that you really don't like
then you can just define your own and
beans and the way spring but boot works
is as it starts up it looks through
things that you've defined and if it
finds things that along the classpath
like a say its finds tomcat and it sees
you haven't defined your own a
dispatcher servlet then it will create
one for you so if you want to take
control it's normally just a case of
defining your own beans so yeah and then
spring Google back away ok so there's
also a little plugin for maven that's
included that lets you build these fat
jars so if i run this outside of the ide
if we look at the target directory
you'll see that there are two jar files
in here so the original one is the thing
that I actually wrote the code myself
this is like 3k so not next to nothing
and the the jar file that actually gets
spat out my spring boot is about 12 Meg
so if you look inside this file you'll
see it looks kind of like a waffle there
is the code that I wrote that's there
then there's this lib directory that
contains a whole bunch of libraries that
were included by the fact that i had
that starter so you can see here I've
got Tomcat embedded is it is in the
nested inside I've got hibernate
validator and the spring libraries and
then this stuff at the bottom is some
extra magic that we do that enables you
to run the application by just typing
java dust jar so if I do that that's the
same app running they're like nested
inside the jar so this is like quite a
nice way of deploying applications
especially if you're moving to kind of
cloud-based deployments you don't need
to worry about you know what what server
is running on the cloud because it's all
self-contained it means that as long as
you've got a JVM that's kind of
compatible you can just job at that jar
and it works so I mean there there are
plus and minus points to that but yeah
so the question is the application
properties file that I spoke about where
does that live and the answer is it
lives that you can have more than one
and it basically follows like a process
when it starts up so the first thing it
does is it loads the one that's inside
the jar so you can provide like a whole
bunch of defaults inside your jar
package it up ship it then it looks for
one that's outside your jar next to it
and then finally I think it looks for
like command-line arguments and
environment variables as well so you can
you can say
by default I 1-port 1990 and then
someone who's running the app could
start with dash dash server port you
know 100 and changed the default it so
the question is if is that is it a good
idea to use that I think it's I guess it
depends on your environment a lot of
people don't have a problem with it and
it's quite simple if you do there's
there's various options you can say you
can set environment variables so that's
possible that the person who's managing
that machine could could do that if
you're deploying into a full-blown
application server you can still use
journey to declare those things and
there's also spring clouds got this
config server project which i won't go
into now but that offers a way of having
centralized configuration and supports
encryption as well all right so what I
want to show you next is hopefully
that's given you a quick wave a quick
feel for what spring boots actually
about but when I ask the questions start
there was a lot of people that still
deploy to application servers probably
quite happy doing that so what happens
if you want to take a spring boot
application and deploy it into an
application server so we spoke briefly
about this this is a typical spring boot
application the way that it probably
would like to run so this has your code
in it you've got some kind of spring
libraries in there you've got some
Joffrey libraries in there normally and
then the servlet container is embedded
inside the jar as well so tom cat or
jetty or undertow now if you look at
no that's pretty good as that someone at
work taught me how to do that is just a
little switch and it makes it will magic
if you look at an app server then
Germany the process is slightly
different you've got your code you
generally have the spring libraries and
maybe any third-party libraries you've
got like inside your war file and then
the app servers providing a whole bunch
of goodness so it's got the servlet
container it's got the Java EE libraries
and like if you look at the bottom java
dash gr to start a fad jar and then
whatever it is to start your application
server and deploy it into it so saying
there's this kind of good and bad points
to both of these things and I don't
really want to get into what you should
use which certainly if you've got like a
lot of applications deployed into the
same app server then the absolute of a
model you know works quite well because
you're reducing the memory footprint
because you're sharing all those
libraries across all your apps so
actually that's an interesting question
who here when they deploy to an app
server deploys to an app server that
only contains one app okay and and the
rest of you I assume have like a whole
suite of apps that are in the same
server okay so if you want to convert
spring boot app to run in a Java EE
application server you have to kind of
work around some of the defaults that
we've provided you have to say i don't
want embedded tomcat because it's
provided by the app server and i don't
want the validation tools because that's
normally included by the app server as
well and then because you've taken away
tomcat and all the server api libraries
that you probably depend on you've then
got to put those back and say actually I
do want those but they're provided by
the app server so you have to add
another dependency and that can either
be like the full jari set of
dependencies or it might be just a sir
um API and then finally you need to say
I I you need a way of telling the
servlet initializer so the way that the
app so that works is it starts you are
and it looks for things to actually run
with inside it and obviously it won't
find that main method that we've written
so you need to change your application
to say i am a spring boot servlet
initialized application rather than a
main application all these slides will
be on SlideShare by the way if you need
them afterwards okay so what I want to
do is show how you can use the same
application and get it running on I've
chosen a pay error which is a glassfish
fork it's supported it's quite nice
actually so first thing I want to do is
kick off glassfish so that's loading and
then I'll go and change the code that
we've written
okay so the the starter ponds are
pulling in these dependencies that it
thinks you need transitively so what we
need to do is tell it not to include a
couple of them
so the first one is tom cat which we
don't want and the second one is
validator so you may notice as well the
the naming of those starter seems a
little bit weird sometimes you think
like spring boot is kind of a tomcat
starter not a starter Tomcat so it's a
bit why did they choose that the reason
we pick that kind of direction is so
that if you're using an ID that supports
like code completion inside your pom
file you can type starter and then
control space and get a whole list of
everything that we support so it's
actually like it's kind of a bit reverse
but sensible okay so get rid of that and
then I want to include another
dependency on the servlet API and then
I'm going to change the packaging to war
i also want to get rid of this maven
plugin because i'm not going to create a
fully executable application so i don't
want it getting in my way we do support
the idea i've used jenkins where it
ships with a while and you can run it
with java char and the name of the wah
so this plugin will work and create you
a fully executable war as well if you
want it to the last thing that I need to
do is get with this and change this to
extend spring group servlet initializer
okay see everything so looks like my app
servers up so my 8080 ports now take it
by the app server and I want to jump
over to the admin console to deploy this
thing I better we build it
okay so now if we look in target we just
have the one file its kind of sensible
looking wha and you can see our code is
now in where is it whatever there is the
classes thing webbing classes and the
libs are in women's lib the kind of
classic packaging so hopefully i deploy
this thing
okay so there we go localhost 8080 I now
need the context route so unlike when it
was kind of running on its own thing
obviously if you've got lots of apps you
need a different context route so that's
why i chose demo so there you go so it's
pretty straightforward to take a boot
app and convert it to run in an
application server the only thing i've
also is with glassfish if you using one
of the earlier versions there was a bug
that caused them problems that has been
fixed in the later versions so you just
need to if you find you've got scamming
problems make sure you use the later
version
alright so I kind of mentioned it
briefly earlier but we have additional
support for if you're deploying spring
boot apps into an application server we
you can declare a lot of a lot of things
like data sources that you'd maybe
declare URLs for if you deploy to an
application server you can use Jan di to
look up specific things so we support
that for data sources for JMS JTA and
javamail you can also declare all the
properties the application properties in
jan di there's specific websphere
support in spring boot that just works
around some and unusual things in
websphere and we have an integration
tests that part the build for wild fly
and Tommy E and i want to add them
glassfish as soon as i can so we're kind
of keen to provide support for app
servers and you know it's definitely not
it's definitely something that we really
want to support so if you find problems
or bugs please do report any questions
aren't ya but I generally the latest one
is like that if you're I don't know I
mean you may get lucky with early ones I
don't know yeah generally spring boots
kind of aggressive in trying to trying
to pick the latest versions of
everything so try an early one but if
it's really designed to work with the
latest stuff ?
yeah so the question the question is can
you do both and the answer is yeah if I
hadn't deleted that main method and then
I could just run in the ideas as usual
so yeah you can do both the only I guess
the only caveat there is that things may
work slightly differently when you run
like locally from a main method versus
when it's deployed so you may need to
have an extra layer of tests to make
sure that stuff actually works but yeah
that that main method way of working i
find really it's really quick for four
kinds like chains i mean where you run
it um so it's kind of helpful question
at night
I so I can eat you speak up a bit yeah
yeah no no okay so the question is what
if you need to do both don't you need to
keep modifying your pond or XML no you
don't I mean you can just run the
application from your ide like directly
so you don't need to keep flipping those
things around because from the ideas
point of view if you look at like the
classpath that's that's on eclipse it
still got servlet API you may actually
you may need to add tomcat embedded in a
provided scope as well but there's
definitely ways of doing it there's some
documentation about it if you the docs
for spring boot are on if you go to
spring door I oh and then projects
spring boot the reference docs there's a
whole section on like how to get started
but there's also like a whole how to
section in here that that kind of tries
to pick common questions I think there's
a section in there about how to run like
both the same time so the question is
can I show hot swapping of code while
I'm working in the ID I can but I
probably wouldn't have time to do most
of the other demos so I can show you
afterwards if you want its we've added
something new in 13 that's going to
hopefully make that a lot easier hey any
other questions
oh yeah okay so I just meant that as
part of our spring build system so in if
you look at our project page we just
have a bunch of integration tests that
run not there I Raleigh why was that
yeah thank you so we just have a oh we
have got glass official look at that for
hours ago there you go that's what
happens when you have an international
team someone someone does it while I'm
asleep yeah so we have a bunch of these
tests that run just as part of our build
process and they don't do a lot but they
just at least make sure that a standard
spring boo out will at least deploy okay
so the last part of this talk I we've
got about half an hour and I've
basically got a whole bunch of
pre-prepared demos that we can look at
that talk about how you can consume
certain jari technologies inside a boot
app if it was a standard jar phone and
in fact if it's in an app server so I
mentioned that we have this kind of
convention over configuration I did that
most of the time when you want to
consume some type of technology it's a
case of adding a start upon then
injecting or making use of some beans
that are provided for you maybe
customizing the application properties
and then if it's not enough you can
start to define your own configuration
and your own beans you may have noticed
as well that there wasn't a web XML file
and that means that to declare things
like filters and servlets directly you
need a different way to do it the way
that it works with spring boot is
they're actually just standard spring
beans so if you want to register your
own filter or your own servlet we
provide these things called registration
beans so you can either just drop a
filter or servlet as a as a beam in and
like choose the defaults or if you want
to customize things there is a filter
registration being in a servlet
registration being that you can use to
customize things there's also this
servlet context initializer which looks
a lot like the one that's provided by
the servlet spec but we have a slightly
different flavor to it because we
basically need to initialize things
differently when they're running inside
the jar versus when they're in an app
server so I've got a demo of the filter
so this demo again is using the start of
web and this time I've got an
application and I've got some additional
configuration here so I've got my
controller I'm saying anything on any
path basically I'm going to return hello
world and I'm going to randomly sleep
for a bit just to make it a bit more
interesting then I've written a filter
here so this is a standard Java rec
servlet filter same as any other this
one's just putting in like the URL that
went in recording how long it took and
then just saying this request to this
launcher to do and the the interesting
thing from spring boots spective is how
do you register that so i said this
spring boot application is a
configuration class and that means any
and methods annotated with bean will get
picked up and declare the spring beans
so in this case it's going to find this
filter registration being this
registration billing is just saying I
want a registration for the filter and
in this case I'm going to put some
patterns around it so I'm going to say
anything in / home is going to get the
filter anything outside of / home is not
so that again starts up pretty quick so
if i go over here and like hit localhost
8080 refresh I get the hello world as
expected nothing coming out if I hit the
like slash home test I get the same song
but this time you can see the kind of
filters been hit and it's doing it stuff
so the question is is there a way to do
this with an annotation on the filter
itself yes I need to double check the
dogs that you can certainly I think
we've added something in 13 that lets
you do that but I off top my head I
can't remember the exact syntax for it I
you can also register filters directly
so you could just if the defaults are
working for you can just add at
components of them and if they were
scammed they'd get registered but if you
want to do this kind of particular
patterns or something I think there is a
I think there is a an annotation you can
use but off the top my head I can't
remember what it's called
yeah so the question is is that is that
the best pattern for doing this thing I
guess it depends on on what your filters
doing I mean generally speaking I
haven't met many applications that need
to do this because most of the time the
filters that people want to use are
things like spring security filters and
for those we kind of do it for you so as
long as our defaults are working you
know you generally don't need to do it
any other questions on Phillip ism all
right
the next one that I think is probably
the most popular one of the most popular
Joffrey technologies is jpa so who's
doing jpa applications ok so about half
anyone using Duke or something different
anyone using a spring SQL template type
technology one or two ok Leslie just not
talking to a database it's probably
sensible so with jpa there are some
conventions that get applied so we don't
need to have a persistence.xml we we
will scan from the class that's
annotated with spring boot application
downwards and we will find any entity
beans that you've defined if you've got
a in memory database on your classpath
then that gets configured by default and
if you want to talk to a real database
then it's a case of adding normally
these three properties in your
application properties so the URL the
username and password and then as long
as the database technology is fairly
well-known we will look at the URL and
from that workout which particular
driver class to instantiate so normally
these are the only way that the only
thing you need to actually get going
with them with jpa I have a demo
so there's definitely a going to be a
pattern with all these the pom file in
this case i'm not actually developing a
web application here i'm just going to
use some command line app i've got a
couple of dependencies i've got the
starter for data jpa which is going to
give me spring data and and all
hibernate libraries and then i'm using
an in-memory h2 database to to get going
we'll come back to this bit later but
the application is you can see the same
spring move application I have one
entity which will get found by virtue of
the fact that it's annotated with
identity i'm using spring data's
repository has anyone using spring data
here yeah okay almost as many as using
jpa which is cool so spring data will
let you do these kind of nice little
finders like fine by first name and this
will when it starts up it will look at
this the name of this method and work
out what query to actually run to
fulfill it it's got built-in paging
supports well which is nice I wanted to
show you as well that you don't have to
use spring data so here's an example
where I'm working with the entity
manager directly to do the same kind of
thing so this query here is the same as
this one liner here except I don't have
paging and so you can see select see
from customer where the first name is
first name I've got a little component
here that's going to print out the
results so this command line runner
interface is something that when spring
boot starts it will call the run method
on so I'm just using this to kind of
print it out something you know what's
the result of this repository and what's
the result from calling the service and
then back over here I'm using an
initializing being here to say I want to
insert some test data
so than that there we go so so that
started up configured hibernate
foundered jpa entities sorted out spring
data initialized some test data in the
in-memory database ran that printer that
shoved out the results and then because
because I've not got a web dependency on
here this application is just going to
end because there's nothing there's no
threat to keep going so any questions on
jpa I realize these these samples are
kind of light and kind of quick but I
want you to get a flavor for the types
of technologies that we support and how
easy it is to use them and how
consistent the kind of setup is there
are more detailed examples on the spring
website ok who's doing a JMS oh ok so
all those that weren't doing a database
are doing Joe ms that makes us anyone
using a rabbit mq or a few but dermis by
far the most popular ok so for JMS you
can obviously deploy your application in
a an app server and get whatever JMS
provider is embedded in that all we
support activemq hornet Q or R temas
Artemis which is we provided hornetq and
activemq support for quite a little on
out and then this this is a new project
that came about Artemis that I think is
when horny key was donated to the Apache
foundation they kind of merged it with
activemq so I think that's probably the
one you should go with if you want to if
you want to do JMS support in spring
boob so here's an example with springs
JMS messaging template so this thing you
can just inject and then send the
message for receiving we have an
annotation that you can put on your
beans so this gem is listener we're
all receive messages so oh I should have
before I go away I should have also
pointed out this is the the
configuration file for actually
connecting to a real database if you
want one and this dash prefix means that
you can have profile specific
application files so if you've got like
a production and a staging environment
you can easily define different
application property files for those
environments and just enable a profile
to to switch them on
so Jameis again like standard pattern I
have a the starter which is going to
give me the support and in this case I'm
going to use an embedded JMS serve as
well so I want the app to actually
contain a full JMS server those are the
only two started dependencies that I
need in my application properties I need
to configure a few things I need to tell
spring which mode is working in and then
I'm going to define some tests cues that
that the embedded server will great when
it starts up if you're using IntelliJ or
sts these properties actually provided
with hints so you can easily kind of
find them and if you want to jump into
what they actually do there's control
clicking on them as well which will jump
into the source code that actually
defines them so you can you can find
documentation about what they do so this
is going to start up we have spring boot
application I've added this enables
scheduling annotation which just means
that scheduling support is switched on
and then I have a sender component and
when this starts up it's going to get
injected with this JMS template which is
something that spring boot created for
me then every second it's going to use
that template to send hello it's now a
particular time and then on the other
side we have a receiver again just a JMS
compared a spring component JMS listener
the cue that we defined where things get
sent to and this is just going to print
out the result
and so there you go this is like the
probably the most simple JMS example
that you could you could come up with
okay any questions on JMS on
we're doing web sockets one guy anyway
few more like okay so how are you using
a JSR 356 to do that yeah not anyone
using spring support okay well spring
offers quite nice web socket support
with some fallback options as well so
one of the problems with WebSockets is
sometimes not mmm the traffic doesn't
always get through and there's a nice
fallback called sock jas which is a
javascript library that like tends to be
WebSockets so if you're using spring
support you get that for free if you
want to do WebSockets you need to add a
couple of things you need an annotation
to say I want to enable it and then you
need to implement this web socket
configure a class to kind of set things
up initially and we also support jazz
are 356 directly if you want to do that
you can declare this server endpoint
exporter which will just say find me any
server endpoint beans and export them
and then you can use the standard jsr
annotations for dealing with messages I
have a example
so the starter that you need here is
spring to start a web socket then my my
application class has become a little
bit more complicated so I've got this
annotations as they switch you on I've
got this configure that's going to say I
want to register this particular handler
at this particular ending point so right
here i'm doing the echo handler to the
echo URL and then I'm giving it soft
chairs fall back I have another
configuration here that's going to
enable jsr 356 support and then in terms
of the handlers the springs support is
using this interface this web socket
handler interface and there's a text
version that's a class that you can use
so here's just a simple method that gets
overwritten with the jsr 365 support we
have this reverse end point here which
is declared using the standard
habitations and the you know on message
they so
this is on tomcat jetty or undertow yeah
all of the work fine yeah by default we
give you tom cat but it's really easy to
switch them out a lot of people are
liking undertow at moment seems to be
quite popular this little demo also
shows you a kind of convention that we
have so in source main resources
anything under the static fold i will
get served up directly so here I've got
to HTML files that just trigger the
those examples so here's reverse
please write forward and here is echo
so yeah I think that's one of the
quickest ways to get started with
WebSockets there's not a lot of messing
around with it's quite nice could you
repeat the question please I don't know
is that so the question is does it use
protocol extensions to do the web
sockets the answer is I don't know I I
think there is like server specific
extensions that it has to kind of get
the negotiation going but I don't know
the details of the insides of that
afraid any other questions on web
sockets we've got about 10 minutes and
probably not enough time to do all the
demos I would probably fly through being
validation and show you the demo for
caching instead which i think is more
interesting so being validation I think
it's a really nice spec it's a bunch of
annotations that you can put on both
spring-mvc data classes and also those
configuration property things that we've
got we support one point 0 and 11 for
being validation so here's an example
where I have a configuration property
which is something that I've defined for
my own code that lets me put something
in application properties and I can use
the bean validation annotations to say
it's imperative that certain properties
follow the rules so in this case I'm
saying my password property cannot be
less than eight characters um i will
show you this very quickly it's quite a
nice um
so so here's my being that saying i am a
configuration property for my app here's
my application properties and you may
notice as well that we actually get code
completion even for properties that you
define yourself which is quite helpful
so here i've got short something that's
too short if i start this application so
you can see that the app doesn't even
start because the the properties are not
defined correctly so this can be like a
really helpful way of just making sure
that your app is in the same state and
like failing fast if something's not
correct all right we have to demo is
left and about eight minutes so caching
we support Jess are 107 we have auto
configuration for that and we also have
auto configuration for various other
technologies like if you want to use
guavas cash that's also configured
Springs have this act cashable
annotation for quite a long time so in
order to do caching it's just a case of
adding a certain provider and then using
this caching caching ball annotation to
declare that a method is cashable so
here we have some sort setup as before
I'm going to start to cash in this case
I'm going to use hazel cast which is a
compliant provider here I have one
service which is defining a method
called lengthy and it takes an ID and
then just sleeps for a little while and
returns to the date and then in my
application i'm just going to run that
thing and call it a few times with
different arguments
okay so you may have notice that the
first time it got called it was slow
because it's a knot in the cash the
second time it gets called with the same
arguments so here we've got arguments 1
&amp;amp; 2 it's going to be slow the second
time its cash that result and it's seen
that it's got the same argument so
you'll see that the same value is
returned here in here for the second
calls so here and here that's the first
call that's the second cool so it's like
it's pretty straightforward if you've
got something that's like simple like
that that is time consuming and you want
to just throw cash around it to make it
quicker okay
so the last thing that I want to show
you is javamail anyone using java mount
directly one person anyone using like
sendgrid or anything like that okay so
we have support for saddle gray down
javamail i want to show you alpha male
because it's the java resounded it's
pretty straightforward again like an
auto configuration and starter we have
some properties that you need to define
like where's my mail server and then
there is a abstraction and mail sender
interface by spring that just wraps up
the actual underlying guts of sending a
mail so here we have the mail example so
in this example I've got i'm actually
using like a little simple um smtp
server that i found just to save you
having to configure one so I just
started up when the app starts and kill
it at the end and then my my application
is just going to send a mail hello world
and at the end we going to print what
Matt simple server received in terms of
the properties it's just a case of
declaring these two and in terms of the
starter we just have this spring boot
starter mail
so again that yeah pretty quick all
right
ok so just described to wrap things up
we've got about maybe five minutes for
questions I think like spring spring
boot is a great way to consume java ee
technologies and there's a lot of really
really good java ee technologies you can
use it inside or outside of your app
server so there's no there's no problem
in either running as a fat jar or
keeping into a sort of traditional
deployment situation it's really clairol
friendly so if you want to work with you
know amazon or Clara foundry or Heroku
then these kind of fully embedded apps
just work so much easier and if you want
more information you can head over to to
spring the i/o i'll put the links there
for this this talk will be on speaker
deck and those sample applications are
all available on my github account so
just feel free to run them and there's
also a blog that Josh wrote that's at
the bottom right and that that covers
some of the details of using Java EE
support in spring boot is for 12 but
we've really made it better in 130 we've
got about five minutes for questions and
you won't get any questions
quick question carry with you how do you
so the question is how do you order
filters there's an annotation that you
can use so filter registration being has
gone underwater method that you can just
say I want this number one and that
number two or if you are working
directly with a filter be you can do at
ordered which is a spring annotation and
it will respect that okay noise yeah
sure
yes yes so this this starter here this
this wall actually pulls in a whole
bunch of stuff you probably can't see
that but it's got the spring JMS
libraries in there as well you can use
spring integration as well but they they
moved a lot of the integration code into
the core spring framework around 40 so
yeah you can use either yeah there is if
i take the web example there's this
module called the actuator which i
didn't have time to cover
and this thing will expose lots of
information by default it will expose it
over the web but you can also you can
also use it through jmx if you want to
get it that way but if you look at / its
beans this will tell you like everything
that's in your context and if you look
at auto config this will tell you what
spring boot tried to do on your behalf
and which one's worked and which ones
didn't work as well yeah this this
there's a whole bunch of extra stuff in
there that I unfortunately didn't have
time to cover but and it's not really
specifically this actuator module comes
in really helpful if you're doing you
like like if you start to run your own
apps and you deploy them in jars then
you suddenly lose a lot of the tools
that the app server may be provided for
you so this is kind of helpful for the
kind of filling in the gaps there like
monetary you have like health checks and
stuff as well which is which is helpful
if you've got like monitoring tools you
can just like point them at that end
point so you know pink this every five
minutes and send me a pager if it goes
down yeah
uh so there is some debate in the team
about whether smacker is a good thing or
not there is a good talk that Andy
Wilkinson did on rest which is like well
worth checking out and he's written this
thing called rest Docs which is named
it's spring were not this thing is like
really cool it basically is you having
used ask your doctor okay so ask your
doctor is like markup plus plus 4 it's
like mark down but it's great and you
can basically write little snippets of
documentation and then use some Springs
test framework MVC test framework to
trigger your rest endpoints and rather
than well as well as running the tests
it also generates a little fragment of
documentation and then the net result of
that is that you can like build like
github style documentation where you can
have proper documentation and like what
you know calling this method resulted in
this response and that's part of your
test suite as well so like spitting out
the docs that you know are accurate
works yeah there's um yeah there's a
video yeah that watch this video it's
really good and I wish there was an
earth as a sample somewhere maybe
there's something in the reference dots
oh yeah there is a sample so yeah there
you go you can see the kind of results
that it spits out so it's really nice
you can actually write proper
documentation the bond with I think with
swagger is that it's kind of like half
there's but you actually really need to
turn that spend time to write
documentation I think it'd be around
okay I think I'm a one more question
in terms of spring room is I guess I'm a
little bit yeah they are coexisting
spring Roo is now run by a different
company so pivotal no longer actively
developed spring area it's being
developed by another company I can't
remember the name of that off the top my
head and they're actually I think the
next version is going to start generate
spring boot applications the primary
difference between those two projects is
cogeneration like spring Roo really
works by generating like code on your
behalf and spring boot is very much
against cogeneration and it's like
design so I think it depends which way
you like to go I personally I'm not a
particularly big fan of cogeneration so
I try to avoid it ok cool thanks very
much</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>