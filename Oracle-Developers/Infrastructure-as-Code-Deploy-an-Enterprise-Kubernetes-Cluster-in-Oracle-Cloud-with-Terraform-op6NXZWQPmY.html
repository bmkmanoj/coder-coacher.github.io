<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Infrastructure as Code: Deploy an Enterprise Kubernetes Cluster in Oracle Cloud with Terraform | Coder Coacher - Coaching Coders</title><meta content="Infrastructure as Code: Deploy an Enterprise Kubernetes Cluster in Oracle Cloud with Terraform - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Developers/">Oracle Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Infrastructure as Code: Deploy an Enterprise Kubernetes Cluster in Oracle Cloud with Terraform</b></h2><h5 class="post__date">2018-04-17</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/op6NXZWQPmY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">all right thanks everybody for coming I
know it's a record for lunch but we do
have a booth out there small booth near
where the food is being served we are
giving out our books today and so I only
brought a tea from Dallas that's all I
could carry and so make sure that you
after the session go out to our booth
it says viscosity on it and you know you
all have to fill out you know three or
four questions about your name and stuff
like that but we'll give all of you guys
a free book okay also this book is
updated at least twice a year we're
doing an update for the IO ug
Collaborate conference which is next
week and we're doing a Kindle update so
this book is available on Kindle format
as well as hard hardback as well and and
if you ask for the Kindle copy you'll
get the updates automatically and so
we'll do another update at open world
which is going to be at the end of
October and there's a lot of new
features and functionality being put
into the book itself so wanted to share
that with you before we started awesome
so we're live here okay so this is
infrastructures code so we're gonna
today will deploy a micro service
cluster on the Oracle cloud
infrastructure using terraform
kubernetes and docker how many of you
guys have used docker alright most of
you what about kubernetes phew and
terraform couple all right so I'm Gerry
Ward and this is Charles Kim and we're
with viscosity and these are our two
superheroes that I thought were most
relevant here these were designed by a
guy that ran or the guy that did
imagination station on PBS for years so
he had
inspired these you know it created these
forests and this is motherboard and
she's a humanoid evolved into virtual
being and she can create cloud
infrastructure with holographic compute
networking and storage so and we'll be
talking about that today
so we'll do a brief intro promise to be
brief there we'll talk about docker
kubernetes in terraform from a
high-level and then we'll go ahead and
we'll deploy a kubernetes cluster on the
oracle cloud infrastructure what we'll
be deploying is going to be a web store
that has a lot of micro services it's a
micro service reference architecture and
then we'll Charles will talk about the
Oracle cloud infrastructure and why you
might consider it for your next project
and a lot has changed there that's the
secret and then we'll go through the
we'll come back to the demo so I'll kick
the demo off its gonna run for about
10-15 minutes and you can see it running
while Charles talks about the cloud
infrastructure and then we'll come in
and we'll run the app if everything
works right we'll come back and run the
app and then we'll do the book giveaway
afterwards Charles right my name is
Charles Kim I am an Oracle ace director
and I'm also a VMware B expert basically
those are designations at both Oracle
IBM will give two community evangelists
and experts in this field there's about
a hundred of us in the world and we
basically go all over the world
evangelizing on Oracle technology and so
I've written about ten books and the the
latest one happens to be on Oracle cloud
and we're doing updates as we speak
right now to add relevant content for
the new Oracle cloud and fresh
infrastructure OCI is what you'll hear
it as and also adding things like
exudative cloud service extra data cloud
a customer and rabello cloud services as
well
doing a in-depth discussion on universal
cloud credits of all of you who are here
how many of you guys are like DBA types
developers all right and then dev ops
folks system admins all right a good mix
here today I'm also the president of the
cloud sig for the independent rock
Weiser group and we do a lot of
workshops all over the country on how to
login and on how to work with Oracle
cloud so if you guys are interested let
one of us know we could do one in this
area as well so I'm Gerry ward I'm from
Austin Texas so I've been a developer
since I was probably eight years old
worked a lot with C C++ Java Perl later
Python JavaScript is one of the most
popular languages now I'm co-author of
the book that we're giving away with
Charles and I also am a private pilot
and I have a passion for the red grape I
actually have a vineyard that we run
Oracle at and you know so that's some of
my interest hmm so I like to say
viscosity swims in three lanes and mine
is the middle lane apps so that's
anywhere from dev ops to microservices
legacy Java Java cloud service
conversions we do platform for software
as a service and any kinds of
integrations around that Charles does
the data and the infrastructure lanes
I'll let him talk a little bit about
what we provide there yeah and mainly a
main focus when we started out viscosity
was on rack and Exadata and then we soon
added virtualization and now it's a
heavy heavy promotion on Oracle cloud
and so we with teas and we say we bleed
red and when we bleed the red stack but
you know we do have a lot of agnostic
views on things like cloud and systems
in general I'm the app space we do a ton
of open source as well so at viscosity
we've written 18 books charles has
written a lot of those and these are
anything from oracle press to a press
books a lot of these will partner with
the Oracle product managers and will
co-author those and that gives us kind
of a direct line to product management
so the cloud book were given away I
wanted to give you another option to get
this if you if you're on your cell phone
right now text cloud to this number four
four four nine nine nine and you'll also
get the Kindle version of the book which
is great because that keeps it up to
date so we've got the hard copies out
there that you can get one at our booth
but also the Kindle code because we're
going to be updating as Charles said
we'll make updates to this win next next
month or next month next month and what
are we putting in that anywhere from
exadata cloud to Ravello cloud universal
credits and and some development stuff
as well so just a sampling of some of
our clients they range from you know
small companies to very large companies
healthcare public sector a lot of
finance in here and that's really around
our expertise with rack and high
availability so I was kind of inspired
by this latest Falcon Heavy and this is
not even the launch this is the static
fire what's interesting to me about
SpaceX is they do a lot of testing they
put straps on the rocket they test fire
the Rockets they don't use explosives or
pyrotechnics to separate the stages and
the reason for that is they can't test
pyrotechnics right so they like to do a
lot of testing and they do a lot of
simulations a lot of coding around this
and I think that's what makes them so
you know successful and what they're
doing and I see infrastructure is kind
of like that is if what if you had a way
that you could simulate the
infrastructure define it in a
declarative way run it and test it
without ever having to go configure
server install a network card right so
that's kind of just to set the stage so
is there everybody knows what micro
services are so it's just a different
way to have a lot of kind of unique
components that do very specific things
so if we look at micro services today
let's start with nodejs so let's say we
write a program and nodejs and we want
to publish this out so our users can get
to it so we might wrap that with a
docker container and it does a specific
thing we might hook that up to a my
sequel database since we're running my
sequel we need to separate the storage
right so in case we lose the container
so we might have some sort of cloud
storage that we're connecting to it may
of all we might add some additional
micro services that do the same thing so
we have some redundancy we'll stick a
load balancer in front of that to
balance a load between these micro
services so we need to know about the
micro services we need to know about the
the database the storage and the load
balancer needs to kind of understand
different IP addresses both internal
external we might have some rules on
ingress and egress not so complicated
yet we can kind of do this all through
the command line on anybody's cloud
right deploy this out to you know AWS or
Google cloud we can deploy this to you
know OpenStack running in our own data
center on our private cloud we can
employ it to Oracle cloud infrastructure
so the way we do this we define we go
through the processes load balancing is
very different on
I sure as it is from AWS so they're very
different kinds of constructs so you
know as we start to deploy this we start
to incur you know a lot more technical
debt a lot more complexity and then just
for fun let's deploy it to a cluster of
raspberry PI's running in our closet
like I have but right so very different
constructs very different ways that we
define these and methods that we need to
go through then we come along we add
some you know heterogeneous programs
here Python script maybe we connect that
to elasticsearch we build a web app
running Django and Python so now we're
starting to do some no sequel we've got
some service discovery we've got you
know some complicated systems and we got
a multi cloud deployment so that's
really what we're looking at today mmm
so this is the reference application and
you can go to micro services demo github
IO and if you text that number cloud 2
for 4 for $9.99 I'll give you all of our
scripts and this presentation this
presentation will also be on the website
but you can I'll give you the actual
code that I'm going to run the
infrastructures code so take a look at
this one so we've got you know a
front-end web server we may have an
order management system a payment system
that doesn't have a database why because
of PCI compliance we've got a user
database on Mongo we've got a catalog
database on Oracle my sequel we've got
some legacy fulfillment applications in
the background and we're connecting them
to a queue ok so now we're starting to
see a lot more services that need to
know about each other in our production
system but we also want to have a
development system so we need to clone
the same infrastructure to development
and let's say we also want to have a dr
or multiple dr system so so we're
starting to get more complicated we're
needing to utilize automation and we
let's say we have a POC lets you know
the forty-first POC that we've run
this year so this is a release candidate
you know it passes it fails the test
that we run POC number 42
that's our release now we flip all of
our IPs over to the to the new set of
infrastructure we drain all the
connections out of the old set of
infrastructure and we destroy the old
set of infrastructure so we've got zero
downtime requirements so now we've got
enough complication that we really need
some automation especially when we go to
multiple clouds so you know just most of
you guys have used docker so the idea
here is on the Left we've got virtual
machines so we're building up we got a
hypervisor and we're building up a big
ol guest operating system we're putting
all the binaries and libraries we need
specific to that application and we're
putting the app on there when we need
multiple of these we start to clone this
out right so kind of a heavyweight way
of doing it versus what docker gives us
is the ability to you know it's a lot
leaner than than having a hypervisor
virtualization we can have different
versions of the libraries and docker is
going to manage that for us and schlep
those in to the container whichever ones
we need we might have you know Python or
Perl one seven over here in Perl two
nine over here right so that's just kind
of a little bit leaner way of doing
things and so what Cooper Nettie's does
is it it orchestrates this
infrastructure for us so these these
Dockers so we don't we can kind of
abstract ourselves away from it and this
is really getting into that multiple
cloud deployment kubernetes is going to
handle you know service discovery it's
going to kind of self replicate it's
going to
you know have redundancy built in it's
gonna do all the discovery of those
different micro services that need to
talk to each other and it allows us to
really focus on production and
operations of the code and not so much
what's underneath it hmm what's great
about kubernetes is it's got a very
rapid release cadence they're constantly
updating it and it's language
independent now there's other things out
there like mezzos you know docker swarm
but kubernetes is the one that i think
has the most traction right now and
that's why we picked it you know this is
just more on on that idea is you know 71
percent of enterprises having kubernetes
to manage and orchestrate their
containers and 84 percent of those in
enterprises have it in production and so
terraform is really infrastructure is
code so once I provisioned the
infrastructure I'm gonna have kubernetes
orchestrate my containers but terraform
is gonna get me to kubernetes right so
allows you to treat your infrastructures
code just like you do and your CI CD
pipelines continuous integration
continuous development same way you do
code where you can develop test deploy
stage and move to production you can do
that with your infrastructure it's human
readable so you can see everything and a
nice declarative layout and the text
format makes it easy to commit to your
source code repository whether that be
git or anything else and you can break
it up in the module so for our DevOps
guys you can say that this is going to
be what an Oracle database looks like
this is the code you need to you if you
need an Oracle database in your
development project here's the code for
that if you need a MongoDB here's the
code for that if you need a micro
service talkin that it does order
management then here's here's a
container for that so you can give this
you can kind of maintain the
the integrity of each of those modules
and enforce your standards and publish
that out to your developers bless you
hmm so you also have execution plans so
it understands the current state of your
infrastructure so you've already
deployed a container it it knows about
that and it'll only provide the Delta
whether that's to change an existing
component or to destroy an old component
and instantiate a new component so
terraform does that for you where some
other modules you know puppet and chef
are more procedural in nature and have
less of an idea of what your existing
infrastructure is terraform is gonna go
ahead and be very stateful in that
regard and it uses resource graphs and
these are just ways that terraform can
map all the dependencies so it knows
that if I'm gonna put an Oracle database
out there I've got to go first create a
storage container and then allocate that
to the to the container right and then
then put the Oracle database on there
same way as before I create a network
security rule I've got to go create the
network right and it's multi-cloud so
the same code I can deploy on you know
Oracle cloud infrastructure Google AWS
if I'm running OpenStack on my own bare
metal hardware and my own private cloud
and even with it deploys to you know
vmware vsphere so the same code I can
manage all these different deployments
give you an idea of what it looks like
and this is that declarative nature so
here I'm I'm defining a hundred gig
storage volume right and then here I'm
actually defining an Oracle virtual
machine with basically three CPUs and
here is the Oracle Enterprise Linux
length and it's going to basically pull
down the Oracle Enterprise Linux
distribution and instantiate that and
then it's going to hook the storage
volume up to whatever storage volume I
created this is going to come back with
a specific name and this is that
declarative nature that we were talking
about and the
is going to be assigned to this docker
container and the resource graphs are
gonna do it in the right order for us
and also parallel why is it when it can
so with terraform you you run terraform
plan and this is going to show you
what's what's gonna happen and you can
save your plans to guarantee what's
happens also you know it's going to show
the reasons why it's doing certain
things and we'll run a demo of this but
here you can see that after I ran
terraform plan I've got two components
to add zero to change and zero to
destroy terraform apply actually execute
your plan but don't worry it prompts you
for yes or no and you can use terraform
apply on a plan that you have saved
where you can use terraform apply on
just the existing infrastructure and
it'll go out and discover that
infrastructure and run it for you it
paralyzes when possible and it can
handle recover from transient type of
errors sometimes you got to go in and
debug it right terraform destroy it
reverses the apply it just tears down
everything so you can see here that
three resources were destroyed for
example and so this github account will
have the terraform kubernetes installer
which also has a dependency on the you
know the OCI which is the oracle cloud
infrastructure terraform so those two
components plus terraform will give the
ability what we're doing today and if
you text this number I'll send you the
code so you can actually run it
definitely go out and take advantage for
a limited time of the $500 credits
nobody else gets that so you know
definitely configure your account and
we'll show you how to do that so what
we're gonna do is this is the deployment
workflow that we're gonna walk through
and I'll come back to this so you can
see it at different stages but and you
can configure this in a number of ways
you could have all of this as part of
your build process for your code in this
case we're just separated to two
so the first thing we're gonna do is
clone the repository I've already done
that takes a little while we're going to
do an it plan and apply and then we're
gonna go do the demo run and then we're
gonna actually deploy our code the
micro-services are gonna deploy to the
infrastructure and kubernetes is gonna
handle that for us and then we'll go do
the demo but if you were doing this in
production you could easily run your
infrastructure deploy your application
do some tests if it was a good release
candidate you can you know switch over
your DNS connections to the new
infrastructure drain the connections out
of the old infrastructure and destroy
the old infrastructure so you're not
getting charged for it all right so
let's just jump in and deploy the
kubernetes Kuster and here's that code I
was talking about which takes you you
know start to finish and let me just
first thing I'm going to do is make sure
I've provisioned my cloud infrastructure
so let me let me shrink this down a
little bit make this bigger
and they change the interface already
yeah while Jerry is talking about that
we have a really large customer on OCI
they consume about probably about
seventy five thousand dollars worth of
kubernetes and on Oracle cloud today and
with them where it's not about doing a
hundred notes we talk in terms of doing
thousands and thousands of nodes with
these guys and so so we're heavily
invested in kubernetes as a technology
and at the same time leveraging
terraform how many of you guys know that
Oracle has a bare-metal cloud service
offering right and so leveraging
terraform what our guys have done is
look at look at the customers workload
on-premise look at the aw our reports
look at their I ops and throughput and
we figure out where their peak workload
is at and based on that right we can
lift and shift their on-premise database
and applications to Oracle cloud and
leveraging terraform we actually will
spin up and spin down oh CPUs so we will
during peak loads we will increase the
number of o CPUs and and like for
example at night if they're not doing
anything will actually spin down to O
CPUs and so we can drastically cut their
costs in Oracle cloud and in fact on
some of the customers take it down as
far as 70 80 percent of cost and so
we've done that with terraform of
customers and while Jerry is talking
about that I'll talk a little bit more
about OCI
in terms of yeah
so we've been doing Oracle cloud since
at least three years maybe longer
demoing and doing showcasing you know
from OCI classic so when Oracle first
came out with their cloud service
offering it was what I call catch-up
mode so this is Oracle's fiscal year
2018 so about three years ago when they
were heavily into the came out with
infrastructure service and past service
offering right a lot of customers didn't
really take Oracle seriously and and we
you know we labeled it as ketchup
because I was always trying to catch up
with Amazon and with Azure and whatnot
right and then last year fiscal year
2017 right they added a lot of new
features and whatnot and you know we we
basically called it as they found they
added some spice and one but this is
fiscal year 2018 so as you guys are
aware right
Oracle's fiscal year ends in May of 2018
and now a lot of the critics out there
are saying that you know they're really
a competitor now so Forbes New York
Times have now are calling Oracle cloud
a definite threat to companies like AWS
and Azure and so with that one of the
you know there are many different
traders but one of the key
differentiator that I personally like is
what they call off box virtualization
network and so if you look at a
traditional hypervisor and traditional
virtualization environment right the IO
and the virtual virtual networking layer
is actually on the hypervisor itself
right
it's virtualized as part of the stack
right what Oracle has done is take
they've taken the IO management and IO
and also the management of the virtual
network and they stuck it into the
network layer so the actual
hypervisor itself doesn't do any of that
right and because they also move that up
in the stack right they can actually
take bare metal and extra data cloud
service and stick it into part of the
their cloud a cloud without making any
changes so that's one of the big
improvements that they've made and it
really is a differentiator so you guys
have also heard about the autonomous
data warehouse right
last month Larry Ellison did a keynote
on autonomous data warehouse and talking
about how it is self-healing
self-driving steel securing self
patching you know self tuning right and
it really is I mean for us to provision
the autonomous data warehouse which
basically runs on exadata as a pluggable
database with 18c and all the latest and
greatest of Oracle cloud it literally
takes 30 seconds it asks you five
questions and it's really four but the
fifth one is your password right and
with you know within seconds you get a
pluggable database that's highly tuned
for a data warehouse workload and so we
have viscosity we've done the benchmark
between the autonomous data warehouse
and comparing that to Amazon's redshift
and so we've actually loaded billions
and billions of records and and compared
the two environments and so we have a
white paper that's coming out we're
going through actually our fourth or
fifth iteration of the white paper
because we wanted to present a
non-biased technology review of both
platforms and so that white paper should
be coming out in the next couple of
weeks so as you guys also know right
this is my opinion right so hopefully
you guys have seen the movie Highlander
right there can only be one right I
think in the cloud world
you know look there will be three right
even though AWS right now is you know
beating the pants out of everybody but
if you think about you know as you're
thinking about oracle i think about IBM
bluemix right
who are they chipping away at right
they're all chipping away AWS right and
because all three vendors own you know
the hardware the operating system you
know the database the middleware and the
applications right they can dictate
their own rules right so as you may or
may not be aware right if you take an
Oracle database and and you do a lift
and shift to AWS right Oracle will not
honor hyper-threading right so if you
take a typical box right let's say
there's a a server with two sockets and
it's got you know 20 cores on it right
essentially you have 40 cores on the box
however if you install Red Hat on that
box right and you do top you're gonna
see 40 cores times 2 because you have 2
threads per core you'll see 80 threads
on that box right and it'll be perceived
as 80 virtual CPUs right in the Linux
world Oracle AERS 0.5 factoring so in
that world you're gonna have to pay 40
nice 40 licenses afford for the course
for two core licenses right however if
that was on Prem right it would have
been only half that price right so
there's things that and then the thing
is that Oracle is not the only vendor
doing this other vendors are doing it
except that Oracle is they have lot more
publicity around the negative side than
others do from a cloud infrastructure
perspective right the past year Oracle
has really added a lot of new features
and a lot of cool innovations to the
cloud right so if you look at just from
a is even from a storage perspective
right we have four kinds of storage
today right in the Oracle cloud we have
archive which is basically think of it
as tape right you
you put things to tape right we have
object storage which is very synonymous
to s/3 s/3 object storage from Amazon
right you just put files in there it's
basically putting files to disk block
volumes these are volumes where you
actually will put a database on alright
something will have a lot of workload
it will be like a file system that you
mount on your VMs right and then for
bare metal cloud services we have local
nvme right so with the non-volatile
memory right you can actually dry 4.2
million I ops I don't go cloud right how
many applications and databases you have
today that that need that kind of
workload right and just in case if you
need more than that right you have
exited a cloud all right so you have you
know quota rack half rack full rack and
Oracle cloud as well so within within
Oracle right we have many regions Oracle
just announced like you know 12 more
regions in the world that they're gonna
be coming out with right within a given
region you will have multiple what they
call availability domains right and they
you can kind of think of it as like a
data center but and between availability
availability domains they run dark fiber
which means that between connections
between each of the data centers right
you're gonna get sub Microsoft
millisecond response times and so what
Oracle is announcing is is that between
the available domains
you're gonna get 500 microseconds that's
half of a millisecond so when you
typically do issue a ping command right
you're gonna get response times in
milliseconds right within Oracle's data
centers you're gonna get response times
and you sex which is microseconds right
and so if you're inside of an available
domain right you also get I believe it's
like hundred fifty microseconds right
and each of the available domains will
have a million network ports all right
so it's guaranteed that it's not going
to be over subscribed right and it's
it's going to be fast there's one
right so each of the servers on inside
the available domain will have 225
gigabit network cards right and if you
think about you know bonding those
network cards you're talking about
essentially 50 gigabits per each host
which is going to be an enormous amount
of traffic as well right so one last
slide how many of you guys heard of
Trello cloud service right so Oracle a
couple years ago bought a company called
Ravello
and what Ravello specialized in was
taking customers who are on VMware and
or KVM and lifting and shifting the
actual VM itself to Google Cloud and at
that point was AWS cloud right since
then obviously since Oracle bought them
right
they can also lift and shift to Oracle
cloud as well and so with Ravello cloud
services they can they actually do what
they called nested virtualization you're
actually running you know a
virtualization stack on top of another
virtualization stack and and the key
thing is is that from a Ravello
perspective they have this concept of a
blueprint and so for those of you who
run like ebusiness suite or PeopleSoft
or JD Edwards right you know like you
haven't a web server application server
concurrent manager server and a database
server right let's say even have rack
right so you wouldn't create what we
call a blueprint think of it as your
ecosystem for your entire stack right
and then you can actually right click on
the boot on the blueprint and say clone
a blueprint and so as you clone it will
actually clone the entire stack not
independently of the app server or the
web server right and that's one of the
one of the biggest values that Ravello
offers and so right now their biggest
use cases happen to be you know multiple
instances of dev or training and stuff
like that but more and more customers
are realizing what
I can offer and what they announced last
year is that you'll be able to run
Ravello cloud on top of bare metal and
so for those for those customers who
have that heavy workload right now
Ravello can be treated as a hypervisor
and the self so with that
all right cool so the first thing we'll
do here is you know go ahead and set up
the Oracle cloud connection so if you
use your free credits you'll log into
your identity domain and then you'll
create a host you know I like to create
a virtual machine where I could just run
the commands on I've got actually a
problem with this one so I won't be able
to log into it but I do have some of the
code here locally so let's just take a
look and see what that looks like the
other thing that you can do that's it's
pretty helpful is if you go to github
slash viscosity na you can see a lot of
the stuff that we do so the you know one
of the things that we do is a docker
eyes workshop so the first two steps out
of this on our you go to our wiki page
here and this I'll create another link
with the steps specifically to this demo
but you can go and go ahead and you know
create your virtual machine and launce
an instance and then open these two
ports right because you're not going to
be able to get in and out of that stuff
if you don't open those ports but then
once you've done that now you've got a
place in the cloud where you can run
your commands so the first thing we'll
do is we'll download the terraform
provider I'm not going to do that right
now because it's going to take a while
but I will show you
it's not in there okay so I don't have
the code here sorry yeah I having a
little trouble getting to this thing but
hmm let me just kind of walk you through
some of the steps here so the first
thing we'll do is you know download the
latest terraform and then next thing
we'll do is download the latest Kuby CTO
and here's the command to do that you
know go ahead and make those executable
we'll go to the cloud infrastructure
tariffs or terraform provider which is
you know this is the this is the
terraform provider that oracle has to
open source that allows you to download
you know
configure the OCI which is the cloud
infrastructure the next thing we'll do
is move the terraform provider OCI in
this case we'll just move rename that
command next thing we'll do is go ahead
and clone this piece which is the
terraform kubernetes installer will
clone that from get and then that will
automatically have its solutions in
there next thing is go ahead and
generate a key a key pair you'll go
ahead and go into the terraform provider
and configure the the OCI to run this
kubernetes installer you'll go ahead and
edit the TF VARs let me see if I've got
one here
yeah I'm just having trouble getting to
the demo gods have not been well here so
and then we'll just run terraform in it
terraform plan and terraform apply if
you'll remember from the from this
component let me show you that if you'll
remember the first steps in this guide
are going to be these plan apply and
then the next steps are to deploy the
application so you can use these
commands you know you can see how many
nodes you have how many pods you have in
kubernetes you know you can connect to
the kubernetes console you know those
those are the commands you use to do
that and then the next thing we want to
do is clone this micro-services demo
application and so this is you know this
is what we talked about yeah so this
application where we have a front end
running nodejs
order management system payment system
user so all of these micro services are
included in that component and we'll go
ahead and you know in kubernetes we use
a namespace to keep kind of everything
isolated so we'll go ahead and create
the sock shop this is basically a online
sock shop and you configure that with
this yamo file and then we'll deploy it
to the kubernetes cluster and we'll
configure it for external access and
this is just a manual step that we have
to go through to provision the load
balancer which will allow us into the
OCI and after that runs we can you know
do the demo and then after that runs
we'll just tear it all down this way it
takes about five minutes to tear
everything down and let me see how much
it cost us
so
okay I don't have the cosigner it'll
cost you about a dollar and 25 cents to
stand up this 68 component
infrastructure and then to tear it down
so mmm sorry I wasn't able to get to
actually run the live demo here anyway
so some links that are good to follow
here are the kubernetes installer which
Oracle has committed to open source for
and it also has a dependency on OC I and
what oracle has done also and it's gonna
be on limit it's on limited release
right now we're working it with this
product and one of our customers is Dave
actually built a kubernetes a managed
kubernetes platform where the you know
the these services are maintained by
them and then you basically just use the
OCI consume as much of the OCI as you
want and so it was called the container
engine when they launch I think it's
going to be called something like manage
kubernetes engine or something like that
but they're they're about to release
that you know just a few things on it I
won't go into all this but it's you know
cloud and container native it's it's
actual you know real kubernetes and not
a derivative of it you know it's it's
developer friendly it's a streamlined
user interface and you know when you run
it on e OC I some of the things that
Charles talked about is that you get the
full bare metal performance because of
the off box virtualization basically
guarantees your network infrastructure
is not going to be over committed but
anyways that's what we have today if you
want to stop by the booth I'll run that
demo for you once I get this thing fixed
and get you a book and thanks for coming</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>