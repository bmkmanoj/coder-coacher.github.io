<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>What’s New in JavaFX 8 | Coder Coacher - Coaching Coders</title><meta content="What’s New in JavaFX 8 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Developers/">Oracle Developers</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>What’s New in JavaFX 8</b></h2><h5 class="post__date">2015-06-08</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/UmNae1jIK7k" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">okay good morning thanks for coming to
our session I'm Richard bear this is
Jasper Potts
we're architects of Java FEX and we're
going to be talking about what's new in
job effects 8 and so I guess we'll just
get started right into it so I guess the
first thing that's kind of new is well
there's java 8 at the same time that
there's java effects 8 because as you
know job effects of ships with the JDK
and with the JRE so we're Co bundle at
the same time so one of the things that
we wanted to cover was how the different
language
and library features that are going into
java 8 have an impact on job effects
development because it is significant
the lambda is which we talked about
yesterday in the keynote is huge it well
I mean there's my favorite bit yeah you
know our experience so yes so you know
definitely the lambdas it just it takes
away a whole load of that boilerplate
when writing UI code it makes huge
difference for event listeners listening
to Java FX properties and so yeah I've
been learning for IntelliJ the last week
where it says let me convert this to a
lambda for you and it's like after about
8 or 9 you get the hang of it so that
was kind of a quick and easy way of
learning
yeah the syntax really was it was like a
half a day event and then you'd knew
what the syntax was and you were good to
go
there's still some you know some time
for the IDE s to catch up and make it
really great so like I found that when I
was doing code completion it didn't give
me code completion options for lambda so
first I would do an anonymous inner
class and then I would convert it to a
lambda but you know it's not the IDE did
the conversion for me it wasn't that big
of a deal but the the syntax was really
great and instead of having a whole
bunch of lines of code you just have one
so I showed an example similar to this
in the keynote yesterday and this is the
simplest lambda you can do and what I
love about it is that if you have a
single argument method on your lambda
then you don't have to put parentheses
around the parameter list you can just
give a name to your variable have your
little thin arrow and then it's the body
thing that you're going to call and if
what you're gonna do is a one-liner you
don't even need braces on it so it's
simple and clean and as it turns out
because the event handlers in Java FEX
and all the callbacks and everything
else
our single parameter methods not not the
normal listeners but all the event
handlers and the other things are single
arguments you can use this form almost
all the time yeah so here's an example
of adding an invalidation listener so
this is not using an event handler this
is actually doing a listener but as it
turns out in validation listeners also
our single argument so we get to use the
simple form so here's an example where I
have a string property and I'm going to
add a listener to that string property
and then I'm gonna call the set method a
couple times and if you run this program
of course you will watch it print out
hello ring bearer even watching do much
more with the range
yeah I'm really getting ready for it I'm
excited so here's a change listener you
know it's a little bit more Lord of the
Rings right so we start off with Gandalf
the Grey and on my change listener it's
a three argument guy right the change
listeners have the observable object
that you're listening to it has the old
value and a new value and so that's my
parameter list and then I can print out
what the old value was and what the new
value is and I change them began off the
white so when I run this it'll say you
know was Gandalf the gray but is now
Gandalf the White
so the lambdas really reduce a lot of
that sort of vertical space that you
were spending with all the overrides and
the listeners and the new this is and
everything else I've been doing for a
whole pot of old coke cleaning up and
reducing a by sort of 30 40 percent so
yeah it's a heck of a lot easier to read
here's another simple example for our
sort of use cases I've got two objects
I've got the one that I'm going to be
listening the the one that has the
listener and the one I'm going to be
listening to so this is an example of
removing listeners because in these
lambdas right we're just we're just
adding listeners to these things whoops
it took me forward here we go and these
guys we're just adding listeners but the
question is if you want to remove a
listener how do you do that with a
lambda and the thing is is it's exactly
the same as you would have done it with
anonymous inner class usage which is you
have to store a reference to the to your
listener object so that you can pass it
to the remove method later so we start
off by creating our listener our
invalidation listener with a lambda and
again we can do it directly in line
the compiler knows on this line using
what's called target types it can look
it says okay you haven't a lambda that
goes from an object oh and then and then
there's the body of it a system dot out
dot print line and then it knows what
type of lambda is creating because it
can look on the left-hand side the
target and see that it's creating an
invalidation listener so it can do all
the type checking and everything without
us having to write a whole pile of code
and then my bar class has got the actual
string property I'm going to listen to
so here is an example of removing
listeners and I put it in a loop and
then did a set so that if it was not
working right you would see the word
hello printed ten times if it's working
right you will see it not printed at all
because there have been no listeners by
the time it ends this loop and of course
it works so what we do is we create the
guy we're going to listen to the bar and
then in our for loop we create our
object that's got the listener we add a
listener we remove that same listener
object and it all works the way that it
should so I guess the long story short
is that lambdas really are just
producing normal the same thing as an
anonymous inner class same semantics
same sort of rules it's just a lot nicer
so here's an example of a lot nicer okay
if you've if you've used table columns
and Java FEX
then well I'll show you would you prefer
it this way where basically where I'm
going to create a table column and I'm
going to say this table columns text is
for the first name of a person and in
order to get the first name this is what
you do I'm going to give you a cell
you're gonna get the value from it and
then you're gonna give me the first name
of the object right or this is the way
you do it today you could write that so
these jokes yeah you know I mean I do
love code but not that much so these are
exactly equivalent it does exactly the
same thing the underlying runtime
understands it exactly the same way it's
just that instead of having all this
garbage that you have to go through all
you have to look at is just this I'm
going to take a you know my person
object and I'm gonna get the first name
from it so you can probably see from
here we definitely had lambdas in mind
when we're designing the FX api's so
from all the way back when we were
looking at the FX api's we were saying
how nice could it be with lambda so some
of the stuff has been a bit more
boilerplate than necessary so far
but we knew that lambdas were coming and
it would make it all look wonderful
yep so this is the other the other way
of doing this is to use a method
reference so instead of doing the the
lambda in line you can factor that into
a method and then just use a method
reference to set your action listener
the thing that's nice about this is that
it allows you to take logic that was
sort of embedded in this create UI step
break it out into a separate method and
now you can even test it so this method
for example I have a package private so
that when I write my unit tests I can
just create an artificial action event
call this guest method and see if it
does what I expect it to do so that's
one of the nice things about using the
method reference approach is that it's
nice and simple and clean and it also
kind of takes you down the path of
refactoring your code in such a way that
you can make it testable and that's a
really nice feature of it and then I
used that line yesterday to you they
make you think you're actually C++
programmer those double colons take me
back in time so lambdas are really good
they make your code concise yeah they're
a lot easier to read there is it leads
to more testable code encourages you to
factor things into methods in order to
keep those those line counts down it
fits really well into existing methods
and it's really easy to learn yeah my
favorite thing is just also just coming
to somebody else's code yeah the less
code there is the easier it is to pick
up it definitely helps yep so that was
one of the things that's in Java 8 the
other thing that's in Java 8 is nazguard
if you haven't had a chance to play with
nasa Calise you know in previous
versions of the jdk and the JRE we had a
JavaScript engine that's called Rhino
it's really old and Nazrin is a
replacement for Rhino and it's a lot
faster than rhino and it has some really
cool features including direct support
for Java effects which means that not
only can you have a Java program that
calls that has some JavaScript as part
of it but you can actually use
JavaScript entirely to
your code so here's an example of some
of the support that's in Nazrin you have
some JavaScript file you use this job of
that type method that NASA one
introduces into the JavaScript namespace
and it will create basically it's doing
an import and and giving you the the
class objects for it for the rectangle
color stack pain etc and then in the
body of the code you can just write your
code like this so it recognizes the
getter setter patterns and will just let
you call dot width or height and it
invokes the getters and setters
it has all the different job effects
objects available to it you can call the
Constructors just like normal passing
all the normal objects and so forth and
it you know invoke methods and so forth
and anywhere that we would have say
where you could use a lambda or an
anonymous inner class for adding
listeners you can also just put in
normal JavaScript functions as listeners
so it's really quite natural to write
that and then in order to run it and
this is the cool part in the JDK there
is a under bin there's another
executable it's called JJ s which is
Java JavaScript basically and this will
launch Nazz warned as the launcher from
the command line and then you just pass
in the - FX and it knows that the file
that you're going to feed it is an
application essentially and it will
create all the boilerplate start up
launching code and everything to make
sure your app runs with Java FEX and it
going and that's all you have to do and
you know one of the things that's kind
of fun about it is just that like for
example I had a you know my my coworker
was needing some help and how do I do
this in Java effects and he just sends
me this file and I could just run it
without doing a compile or anything it
was kind of fun but um yeah I'm curious
to try playing around with the dynamic
FX where we could you know change the
code on the fly and rerun it'll be fun
and this was our little guy that we had
he's just you know is this nice little
rectangle with black background that's
my favorite the other part about Nasrin
is that of course in java FEX we've got
F F F XML an F XML is using the
scripting engine in the JDK for being
able to run any sort of embedded scripts
that you have and whereas it was now was
using Rhino now its use
Nazz heart so that's another place that
we get to take advantage of that the
speed improvements that come with now
swimming so this is one of my babies
from fx8 so what wonder is a new look
and feel theme for fx8 replacing caspian
so this was a big thing was to try and
move forward with the look of FX so you
know coming from working on the swing
team and getting stuck with metal and
being stuck with metal forever we wanted
to make sure that we set a precedent of
changing the default theme so that
people got used to it and that could be
done in the future and people didn't
count on the default theme being the
same for 15 or 20 years so you know UI
is one of those things where it changes
over time fashion changes people's
opinions changes and so you know to keep
things looking fresh and not today
quickly we need to change our default
themes so this was a nice example one of
my colleagues sent to me when we were
working on the modern ER and this is a
whole example he was using to mock up a
screen from for the scene build a tool
so here's trying out how it would look
and mocking up in seam door itself and
then he tried running it in the new
scene builder which is using modern ER I
was so excited about how it looked the
difference so he sent me the picture to
have a look I think the big thing is
just yet
a lot more subtle a lot cleaner a lot
more polished a bit flatter but not
completely flat so yeah hopefully you
like this or a new look and we also
solved one of the big panes I had with
Caspian which was our default color was
a background color was always white
which net and Caspian was designed to go
on to a grey background and so it always
looked jarring me wrong and you know I'd
hoped people would set the background to
the gray to match and it mostly didn't
happen so we ended up with lots of
applications which I really didn't
like the look often makes me want to cry
but um hopefully with modern we've tried
really hard is if you just use it and
don't think about the UI you'll get
something nice and that's what we're
trying really hard is you can just throw
controls together and you should get
something nice so we've put a lot of
tweaks and customizations and a lot of
combination things so if you put this
control like yeah if you stick a table
inside of a scroll pane or use ticket
you know a table or a toolbar and tie
scroll pane or you stick a table into a
splitter that's particular example so so
a table into a splitter we get rid of
the outside borders for you so it all
matches up so I don't we have you know
over a hundred different combinations of
putting this control into this
controller and we'll clean up all the
borders and make sure everything looks
nice for you so how do you actually
choose themes so basically a theme in FX
is a CSS stylesheet and we added some
new API on application to set the user
agent style sheet so the set user agent
static just takes a URL it can be any
URL so yeah hopefully there'll be a lot
more themes out there as well I know the
effects stuff they've been working on
for a Mac theme and hopefully there'll
be lots of other themes in the future
and you'll just be able to set a URL in
here to your theme class or if you're
just doing a very simple application and
don't want to yo you're only using one
or two controls and you've customized a
look and don't want to have the weight
of a whole theme there you can put your
own private CSS file here that just
seems the one or two buttons or whatever
you're using so you can have a much
lighter weight which is important when
we get to things like embedded with the
raspberry pi so the set user agent
starchy and there's two different
constants we have their stylesheet
Caspian Starfy moderner moderner is now
the default so if you take your
application you've been working on with
Java 7 and FX 2 and run it in eight it
will now look different so that was the
big thing is yeah we're gonna break
people potentially yeah if you're
counting on Caspian look will
potentially break you but if we didn't
do that we can never move four
so for anybody who wants to stick with
using Caspian they'll need to do set
user agent star Sheik Caspian at their
beginning to allow them to run on a and
carry on using Caspian and it was you
know a difficult call of you know do you
break people or deuce you know stick in
the dark ages with the first team we
ever released
so hopefully you agree with my choices
there so here's a little bit more
detailed look at one of the pieces so
one of the sample applications we ship
in fx8 the codes therefore is a app
called moderner which is basically my
tool I built while working on Mozilla so
it has a single page which shows you
every UI control in every possible state
so if you're working your own themes
that's a really helpful thing and it has
a nice reload button so you can hack on
the CSS hit reload and see your results
instantly and has some choices for
playing around with all the different
sizes of text and stuff so the other
thing we do is we scale the whole UI
based on the font size of the platform
so if you're running on Windows with
large fonts the whole UI will scale
proportionately we also added a few nice
little extras in like the pill buttons
so you can now add an extra star T to
create pill buttons with the left right
center joined buttons for IVA toggles or
straight buttons so that was a nice
little extra and or again moderner is
completely Thema ball like FX so you can
set the base color for moderner and
creates blue themes red themes you know
whatever your corporate branded color is
so we've made that easy for you as well
we even went as far as restarting all of
the charts to fit in with that
everything
so the the rest is presentations we're
going to go really fast cuz we have a
lot of code slides that we're going to
go through and we're not covering
everything obviously that's in Java
affects eight but we're covering no I
don't know maybe like a quarter of it so
one of the big new things that's in Java
fix eight are in new and enhanced FX
collections so we have an observable
array we have a filtered list and sorted
list and we're taking advantage of
another language feature that's in Java
eight which is the default method
language feature which allows you to put
new methods on interfaces because as you
know observable list was an interface
and we wanted to add some new methods to
that for convenience and so we're able
to use that with the default method
support so here is a very simple example
of creating a filtered list and this is
a list that will remain filtered even
when the source list is modified okay
it'll reacts accute the predicate in
order to make sure that the filtered
list is up-to-date
so here we've got some strings chips
apples taters and archery those are all
in Lord of the Rings and then we're
going to filter out everything that so
so that we're only left with the things
that start with an A and the way that we
do this is strings being an observable
list has a new method on it called
filtered and so I can just say give me
that strings list and then give me a
filtered list based on it which uses
this predicate as its filter and at this
point I can make any modification to the
strings the original strings observable
list and my starts with a list will be
automatically kept in sync appropriately
so here's a practical example that's not
based on Lord of the Rings and what we
have here is just a collection of people
or person objects that we're going to be
putting into a table view and then what
I want to do is sort those things by
their first name and then I'm going to
I'm going to filter them so the first
thing I do is I create my comparator
which is a sorter and I have my lambda
here that says I have my two objects and
I'm going to compare their two first
names
and then what I'm going to do is create
my filtered lists based on the
observable list that was my data I'm
going to sort it with this order and
then I'm going to filter it and you see
that the filter I'm using will always
pass right now any object that comes in
will be in the final result so by
default at the start it's just going to
be sorted but but there won't actually
be anything filtered however what I'm
going to do now is I'm going to create a
text field and the when the text when
you type into that text field I'm going
to change what the predicate is on my
filtered list and this way it will
reacts acute the filter on all the items
and it will trim down my list to just
those items that pass the filter so in
this case I'm going to take the the text
that you gave me I'm going to uppercase
it and and just so I can basically do
case insensitive matching is all I'm
doing and I get the first name of each
person that's passed to me and this
filtered list predicate and then you
know just check to see if it matches or
not and you will end up with well a very
washed out table view that has only the
people whose first names begin with
whatever letters you're typing in so
it's really nice right in very little
code using lambdas and the filtered and
sorted list we're able to make a dynamic
table view that's hooked up to data
that's changing you know based on user
input or any other criteria that you
might have
so both filtered list and sorted list
extend from class called transformation
list and transformation list you can you
can do your own extensions from it and
do your own different types of
transformation lists they're all
unmodifiable so if you want to add or
remove items you have to do it to the
source at the top of your chain by each
one of the different transformation
lists have methods on it to map an items
index back to the source index so you
can imagine in a filtered list you might
be looking at item index 3 on the
filtered list and it's actually at you
know it's an item at index 100 in the
end filtered list and so forth so
there's methods on there so that you can
transform indices back
now another one of the ones that we
created was this observable array and
the observable array is sort of the
analog to an observable list but for
arrays and observable arrays are meant
to be fast so we have the same sort of
problems with I mean you know in UI
you're always wanting to be able to
observe changes in data and update the
UI accordingly and so sometimes you need
to use observable or sometimes you need
to use an array as your data type
because you want to avoid boxing for
example of huge amounts of data and so
we needed to have an observable array
for this case and in particular we use
it for 3d so here's an example I can
create an observable float array the
same way that I would create an
observable list by using the FX
collections Factory
to create an instance and then there's
various methods that are on there in
order to make dealing with arrays very
efficient so for example I can use the
ensure capacity method to make sure that
I have at least four elements in my
array and a lot of this API by the way
was based on the ArrayList API that has
similar things for being able to manage
the underlying array in order to try to
make it efficient and we wanted our API
to be very similar to what you're used
to so the ensure capacity make sure that
I have at least four elements in this
array as I plug data into it so it
doesn't have to grow the array but as
I'm going I can use this add all method
like we do on observable lists in order
to add multiple data items I can get a
specific one with I get I can set a
specific value with a set and the to
string method on it is implemented so I
can just do a system dot out it'll print
out a nice little output of what's in my
array yeah yeah
I don't know if it's that smart to be
honest with you yeah I'd have to look at
the implementation what I was like I
hope so yeah the copy values is so-so
it's a copying copy out so if you hand
us an array we're gonna make a copy of
your data so that if you munge that
array later it's not modifying the list
itself or the observable array itself
and there's other ways to create copies
so in this case for example I've got a
buffer and I'm gonna fill the buffer so
I call the copy to method which will
copy a range of data out of my
observable float array into this buffer
and I can also create a copy of the
entire thing by using a different
factory method in FX collections now
here's an example of I want to populate
this array of some unknown our you know
arbitrary arbitrarily large sized thing
so the first thing I do is I just make
it insure capacity to be some large
number that's probably bigger than what
I'm going to encounter it's of course
best if you can do it precisely if you
can't do it precisely do it a little bit
bigger but not too much bigger but you
know it just depends on your use case
how close to ideal you can get and then
I've just got some buffer that I'm going
to populate and that's because you'll
see it down here on very big dot at all
I don't want to call that method a
zillion times I would like to just call
it you know a few number of times so how
big should my buffer be well it depends
on you know what type of pipe you're
using to populate the thing you could
fill a float array completely up and
then set it or you could just you know
do it in chunks if you're reading it off
of an input stream or whatever so in
this case I'm just doing a loop and over
the over the course of the loop I'm just
going to keep adding whatever it is I've
read into my buffer into this very big
array and then at the end I call this
trim to size method so I may have
reserved a million elements in my array
but maybe I only used I don't know 50
trim to size will throw away the other
stuff and save me some space so it's one
of those things that you would call if
you were just if you're in the situation
of populating this observable array but
not changing it that frequently you trim
to size or at least if you're not
changing its size trim the size is good
for you
and then you can observe changes to
individual elements so and here's adding
a listener you just pass in the I mean
the the lambda that you have is given
the array that it's observing a boolean
to indicate whether the arrays length
has changed and then a range of what
elements have been altered inside of
that array and then you can read and
write the values there there so here's
an example of just you know setting some
range of values on the observable array
so that's interesting right but you know
mostly we don't actually use those sort
of observable arrays so much but we use
them for 3d so when you're using the 3d
api's you will encounter them for all of
the points and vertices and other that
sort of information that we are storing
is also stored as floats because it's
the most efficient way to get things
from that level down to the card so
that's why we've got it we've got it
there all that you do binding I've
talked too much oh well see how it is
let's go um which I don't have any idea
about rich so the there's a whole bunch
of stuff that we've added to binding
high-level binding api's have been added
for observable set observable lists
observable map string binding and other
stuff so if you're using the high-level
binding api's there are more convenient
to use than they were before so here's
an example where you can bind one
observable list to another another
observable list so I create one and it's
got my string array again of chips and
apples and taters and archery and then I
have another observable list which is
going to be just some coffee and I can
use bind content which is a static
method on the binding this class in
order to keep you know you know in order
to make sure that the copy is always
up-to-date with the source now if I make
a change to the to the source it'll
obviously get printed out in the copy so
there's there's a whole bunch of related
stuff
in the high-level binding api's and in
bindings that you can go look at if
you're using those api's so we've also
made some enhancements to tasks and
service and in particular we added a
scheduled service so if you're doing
some kind of a polling like API you're
needed to go check something on disk got
a periodic time or you're going to go
ping a server at a periodic time the
scheduled service is really useful for
that and also we've added two tasks the
ability to do partial incremental
updates from the worker thread so you're
computing some value and you want to
update what the most recent value is
that's available to the your UI to use
we have a nice convenient API for you
for doing that so here's an example of
scheduled service and some of the
different methods that are available on
it so in this particular case this was
actually some code from the Duke pad
where well I think I modified it a bit
but anyway we had we had this network
interfaces thing where I was going and I
was checking to see what network
interfaces were up on your heart on your
device you know if you plugged into the
Ethernet cable or if you turn off your
Wi-Fi all that sort stuff I wanted to
get a periodic update of that so I read
a schedule service and you can spit set
what the back off strategy is so this is
just like a networking where if there's
a failure do you go back and try again
at the regular polling interval or do
you sort of back off and say well I'll
wait twice as long and then I'll ask
again well I'll wait ten times as long
and wait again and it's all this this
strategy is is just a method so you can
you can implement your own using lambdas
or whatever and set it but we have a
couple of them built in in the
logarithmic backup strategy is one of
them an exponential one is another and
so forth so you know you can set here
here's my backup strategy and you can
also set a maximum of failure count if
it fails to do what it's supposed to do
more than X number of times then just
quit just stop you can also specify
restart on failure which is just you
know well do you want to restart this
thing when it fails or do you just want
it to stop the period is the amount of
time between the two iterations and the
maximum cumulative period is the maximum
amount of time that you should ever
allow between successive periods so
anyway there's a bunch of little
twiddles and bits that you can specify
on the thing
which is why it makes it useful for
polling type tasks now for intermediate
tasks results here is an example where
I'm doing some iteration and I'm just
updating this string over some period of
time and so what I'm going to do is I'm
going to just iterate and in each
iteration I have asleep just to simulate
some long-running activity that's going
on and and and then the important thing
is what's in orange there which is this
update value so this is a new protected
method that was added to tasks so from
the background thread you can call
update value and pass in whatever you
want and that will end up setting the
value on the task so if you have some UI
bound to the value it'll get notified of
that changed value each time it changes
so here is an example of my mind-reading
algorithm telling you that you are
getting very sleepy at this point
presentation okay so that gets us
through this stuff that was in sort of
our base module now we're going to talk
a little bit about graphics which
includes the scene graph prism and glass
so we have some fullscreen improvements
a lot of people were asked in fact this
was high on that list of things that
people had voted for in JIRA was the
ability to customize the fullscreen
exclusive mode so you can take any stage
and you can put it into fullscreen but
what you couldn't do was prevent the
user from exiting fullscreen and you
couldn't change the message that we
would display so kiosk mode is a classic
example of this or full-screen games and
we use this yesterday for the chess demo
on stage that we wanted the 3d chess to
just come up fullscreen not show you the
messages press escape to exit yeah I'm
sure you didn't care about that bit and
so we could hide that and just bring it
up straight fullscreen so there's a
couple things that you can do you can
call this set full-screen exit key
combination so you can feed it any old
key combination that you want as the one
that the user should hit in order to
exit from full screen and you can also
set it to null and you can also set it
to a special key combination that's
called no match which means nothing that
the user types will ever exit from this
thing if you set it to null we'll just
go to our default exit
whatever's right for the platform and
for desktop platforms that's escape but
if you set it to no match then we just
won't ever exit based on keystrokes and
of course that requires a that you are
not running in a sandbox or that you
have signed the application with a
proper certificate because it would be
very bad if some random application was
able to do that to you the set full
screen exit hint was the one that Jasper
was talking about where you can just put
whatever you want there so in this case
you know I set some key combinations but
I'm not actually going to tell you what
the key combination is and just let you
try to figure it out and then you have
to make sure that you call the set full
screen method after you've set these
things because once it's in full-screen
mode if you modify these properties
we're not gonna pick it up again until
the next time you enter full screen mode
so here was a here was a case where I
didn't want you to be able to where I
use the no match there's no way for you
to get out of this thing using keys but
I did provide some way in the
application for you to get out and
because I'm a good guy I told you what
it is you have to do to get out of this
thing so in this case I'm going to put
some rectangle into the user interface
and if somebody does a mouse click on
that rectangle then it will exit so this
is a little you know cheesy but it kind
of simulates what you would do in a game
scenario for example where you might go
into full-screen and the only way you're
getting out of that thing is if you hit
the exit button or if you're in some
kiosk mode and you're switching apps or
whatever you keep your use case might be
so here's another another thing that was
added to stage is a new stage style type
which is called unified so both Windows
and Mac and I think a bun too to have a
special UI style where for example your
toolbars and things like that look like
they're part of the window itself as
opposed to being a separate area and
that's what the unified stage style is
so in order to do it you just anit the
style to be the stage style unified just
like you would do before now there was a
few other things that I had to do which
are kind of nasty but you know that's
what you got to do the toolbars by
default have their own background on so
I got to make that toolbars background
hide so it would see through
the window itself and that's all this
code is doing is basically just finding
the toolbars and turning off all those
backgrounds but you could you could have
done it a bunch of different ways okay
you talked about this one on stage sure
so yeah this is something we were
talking about yesterday and the keynote
getting the most asked for I'm sure
there's a bunch of people here using
swing so it was how do you embed swing
in your FX app so this is really comes
down to the migration story of how do
you move a swing from a swing app to an
FX app and the history in the past we
allowed you to embed FX into your swing
so if you wanted to add a nice FX chart
into your swing app you could do that
but if you got further on from that and
got to the point where well I want to be
predominantly FX with only a little bit
of Swing we didn't have a solution for
you that and so in eight we're allowing
you to embed your swing control so you
can keep your expensive custom controls
the dokkan yet afford to replace drop
those into your FX app and have FX for
everything else so that that was almost
ask for feature on JIRA and yeah that's
a good hint that yeah we are paying
attention to the voting on JIRA so you
know if there's something you really
after that's really causing you problems
you know make sure there's a feature
request in the Douro database and and
you know get all your friends to vote
for it it shouldn't take that many there
are
so the other thing is we are adding
experimental support for combining the
swing thread and the effects right so
the other thing that made the
integration of swing and FX painful was
your endless II had to do run laters so
because you have one thread doing all
the effects stuff one-third doing the
swing and every time you wanted to
communicate across that barrier you had
to do a run later jump and that just
made a hot yeah lambdas it'll be a
little bit nicer but it was still a
whole lot of extra code and work and
things to remember
so with this basically both are running
on the same thread so questions about
yeah the reason for being experimental
we just haven't got far enough on it to
know right yeah I wouldn't use it in a
product unless I tested it thoroughly
and was confident that it worked in my
prime yeah yeah if it works for you
great but yeah
we don't have you know a product level
of testing on it yet so here's a quick
example of being how you would embed a
swing J button inside of the FX UI so
it's pretty simple just to swing node
sing graph objects that actually wrap
any sort any swing content and drop it
into the FX scene graph and you can lay
it out there's an example you see the
inside the lambda we've got this
platform run later with another lambda
so this is an example of that whole
multi thread having to do run lighters
to talk from one side to the other so
yeah it'd be nice to get rid of that
pain so and here's what it would look
like if you did yeah so you can see
right now we've got to do this run later
label set text but if you set this flag
JavaFX not in bed dot single thread
equals true then you can just modify the
label directly from song and we wouldn't
mean enough to show you what it would
look like without lambdas so rich text
we talked about it last year in the
what's new talk saying that it was
coming I was very excited about it and
now it's here
there's a whole session on the rich text
support so we're not going to take up a
lot of time in this to talk about it but
basically here's an example of rich text
so we just create our text node and we
and wait for hello for the word hello
including the space and we give it its
font and we give it the I said it's font
twice never mind about that we said its
stroke it stroke width we give it an
image pattern for its fill you know just
set it up however you want it's a text
note do whatever you want with it and
then we set up another text node which
is the world and then we just create a
text flow
and we pass it these two children and of
course in a text flow you can specify
not just text notes but any scene graph
node can go in there and it will align
it based on the baseline depending on
where the baseline is at on the node
that's put into the text flow and so
forth so anyway simple example and you
know it looked like that now the other
thing is that we added printing and
printing right now only works on the
desktops because our first
implementation requires Java 2d one of
the things that we are working towards
in Java 9 is to be able to have a
printing a printing implementation that
doesn't require java TV at all so that
you can also use it from embedded
devices and any node can be printed so
basically the way that the printing API
is work is that you can go query what
printers are available to you what the
print settings are you can modify the
print settings whatever and once you've
got your print settings for the page
that you're going to do you know what
the width and height is so the idea is
that you will create a scene graph that
represents the UI that you want printed
on that thing you'll send it to the
printing you'll tell it to print and
then we'll turn that into all the
appropriate calls so that being the case
I just took our rich text text flow that
we did in the previous example and sent
it to the printer and this is how I did
it and I of course I put some extra
fluff in here just to show you the
different methods that you can call
there's a lot more methods that are
available to you but in this case I
asked for the default printer I get I
create a new page layout for the printer
I tell it I want it to be in landscape
mode I can specify what types of margins
to use and everything else what type of
paper is going to be in there
I create a new printer job and the
printer job is the guy who's actually
going to obviously do the the job of
printing I tell it what printer to use
and then I set the page layout on it I
can set the print quality I can set
where which which of the different what
do you call them drawers or whatever on
the printer you want the different
sources for pulling the paper out of in
this case I said manual there's an auto
mode there's an envelope there's a bunch
of different options there I sent some
collation and then I told it to print so
the important thing you know besides all
that set
was that I've got print page and the
some rich text is that rich text node
that we created in the previous example
and in this other parts of important to
which is if it succeeded then I end the
job the thing is is that when you call
print page that doesn't do the print and
send it to the printer and close the job
because you might want to print a
hundred pages and they might be of
different sizes and different layouts
and different margins
who knows what so you're responsible for
calling n job on the printer job when
you're done but that's it basically we
do it like that and the print page isn't
going to throw an exception on you it's
just going to return a boolean so that
you can you can read it and see and
again there's another session on
printing if you want more details so 3d
anybody came to keynote yesterday you
know this is one of my favorite new toys
in fx8 the birds create 3d stuff and we
had lots of fun with the duke chess so
yeah here's our most basic so we really
have two things in 3d we have some
simple primitives like a cube and the
cylinder and a sphere and then we have
the ability to create your own arbitrary
meshes or load them from files
so here's the most simple of a 3d
application so I'm creating my new
primitive box pretty simple no different
to a rectangle really you could also set
here I'm just using the default material
which is the you know white light gray
you could set a foam material in here to
make it any color you like give it a
texture make it look like brick or
whatever so prospective camera so what
another big change is we now have
moveable cameras so in FX before the
camera was always fixed so even though
you could translate to these things in
create tweet in 3d space so I could
create a sphere out of six six sides of
a rectangle that's alright cube out of
six rectangles and then rotate that I
couldn't move the camera around it to
see it from different sides so he always
had to move the content around the
camera so you can see didn't see
different views so the big thing here is
you can now
move the camera and the cameras or no in
the scene graph so you add it just like
any other node and you can use all of
the JavaFX animation features and
transforms to move it around oh I see
fit so I'm setting a bunch of transforms
just to give us a nice look at view onto
it
I create my scene and then there's two
extra boolean's at the end of scene in
the constructor the first one is for
depth testing so if you don't have depth
testing if you have two intersecting
planes then you don't or you have
something behind something but it's
actually drawn first you'll get weird
effects so basically for each pixel we
look at what's what is the first thing
you'll see you know this hand is in
front of this hand doesn't matter which
order I draw them in it's always in
front because it's between you and the
camera so that that's an important one
for 3d the second one is msaa so one of
the annoying things we have 3d for ever
if it looks all pixelated round the
outside so you could now turn on multi
sampling anti-aliasing which is a GPU
technique for smoothing all of those
edges out so and then we just add off us
we set the camera on scene so you can
have multiple cameras and switch between
them just by doing scene set camera see
you can do all kinds of cinematography
that way and we add our scene and we
show to our stage and show it as normal
so this is just a really basic 3d app so
we have a new sample sorry oh so there's
there's two different ways that you can
use the camera the camera that is set on
the scene is the camera that will be
used for the main window scene view but
you can have other cameras that are
actually part of the scene graph and
they can get translated because they
were part of a group that got translated
or whatever else now in order to see
what that camera is outputting you have
to set it up to render into some texture
which you then can put somewhere else in
the you
yeah so if you're doing the whole race
car game and you got the rearview mirror
you have a camera facing this way and
it's hooked up to some image view
basically that's up here so you can also
use cameras with snapshot so we have the
whole snapshot ability to to take create
an image from the scene so you can set
the camera on that so you can use
additional cameras for that I think what
happens if the camera isn't attached to
isn't in the scene is you just get the
local transform you don't get any parent
transforms based on the camera know of a
dope you could probably do it with snap
shot I don't know what your frame rate
would be like I don't think we have a
fast answer for that one yet so another
one of the new samples we added into FX
8 and all the source code for these are
available and open GFX you can go and
check out is a 3d viewer so this is
something we put together quickly so you
could load 3d objects and have a look
around them play with a bunch the
different 3d features and we'd have a
bunch of importers so we know one of the
big questions came up was what 3d file
formats do you support and our decision
was with the time frame we had with 8 we
didn't want to bake any importers into
the platform yet so one of the things
with 3d was decision of what do we add
in sweetie 3d the world is vast so we
for 8 we basically have the core minimal
set of features to start doing stuff an
awful lot of the things you want on top
can be added on on top of the API so we
focused on the stuff that you couldn't
add on top so 3d importers is one of
those things you can add on top and we
have some examples of other things so
three important contains a bunch of
different importers that myself and my
colleagues have written and some
external contributions and they're you
know varying policies some cover most of
the spec again a lot of these 3d file
format specs are absolutely vast so we
have some sort of
upset but obj is probably the most
common form out there you can find all
kinds of things in that we have the Maya
ASCII which is probably the most
complete which has port for all the
animation and stuff you see Emma Duke we
have a max one Claddagh from MD and FBX
and both of those are coming soon we
have contributions they're yet to be
integrated we also have two exporters so
once you have your 3d file in there you
can save it out as a F XML file for
reloading or you you can save as a Java
file and that's something I did for the
embedded use case they're loading AF XML
file or loading the original 3d file
format was taking several minutes on a
raspberry pi and by converting it into a
sub compressed Java file we were getting
that down to a couple seconds for a big
file so here one of the other things is
in FX we only support triangles in 3d
viewer we sort of have a bill on top of
that ability to have polygons so you
have four-sided or more sided polygons
so here we're loading up the Duke in
polygon mode and you can see that we
actually have rectangles so one of the
nice features we sort of added in is
something called subdivision which is
where you take each of those rectangles
in the mesh and subdivide it and smooth
everything out and you can do that
various levels and so you can then get
animation so what we're doing here is
we're loading up the 3d file and we are
subdividing it so for a story for each
frame we're applying the skeleton
transformations then we subdivide it
then we upload it to the GPU and then
it's being rendered yeah so one of the
things that we're looking at doing in
nine is to be able to do the
subdivisions on the hardware level
Pixar's open sourced their subdivision
algorithms and they're trying to get
adoption on it so it's one of the things
we want to look at if we can get the
subdivisions on the on the card then
you'll be able to do these same sort of
things on much lower class devices yeah
the other thing you saw in the videos
you can also play around with lights and
it isn't all plague run so we have you
could have up to three lights in FX
affecting any
an object and they're movable
dynamically and there's several good 3d
talks as well to go more detail okay so
we've got just a couple more things UI
controls so we finally have a date
picker and you know as one of my
personal goals when I was first hired at
Sun in 2004 I was like we're gonna have
a date picker and now we've got one
sorry take in a couple years so yeah you
know we're working hard so the the date
picker is designed and it uses the new
calendaring API is that are in Java 8 so
all the I don't remember what the jsr
was but anyway it's all in the Java time
package she's now so here's an example
we'll just create your date picker you
you have this option of showing the week
numbers or not stick the date picker
into my user interface and that's it so
actually almost everything you see here
is boilerplate all I did was create a
date picker and say set show week
numbers and you get this UI which is
really quite nice and yeah so that's
good it doesn't do you know everything
in the world there's other date pickers
out there like the mid calendar wand and
so forth that have like way more
functionality but just like with many of
the things in FX our goal was let's
provide something that is generally
useful and we will grow it over time as
the needs are made clear to us how to do
that upfront it's like well let's just
make sure that we can pick a date or a
time or a date and time and let's have a
nice UI for it be able to cycle through
stuff and you know the show week numbers
is kind of extra fun but if there's
specific use cases that you have that we
need to be able to support then of
course please follow those in JIRA and
then we can you know look at adding and
extending the API that we have so so the
last thing here was you know we've gone
through a whole bunch of not everything
eight but you know a lot of the key
features in eight so we picked out a few
sessions to sort of give you pointers if
you want to learn more about some of the
things we talked about so there's you
know we didn't really talk much about
embedded in this session but because
basically you just take Java effects and
run
uninvented but there's a lot of other
sessions that are going to talk about
invented especially raspberry pies also
the the freescale stuff that's coming as
you heard about in the strategy keynote
anyway so there so there's a lot of a
lot of good stuff there controls talks
there's lots of controls talks and lots
of CSS talks yeah you know really
exciting there's an amazing amount of FX
talks this year so you know last year we
managed to fit everything on the slide
those go the really key things this year
didn't even get close so these were just
you
most of these were like two out of ten
on each of these subjects so there's
plenty of other good content as well
yeah lots of good graphics talks and
then just a couple fun ones there's you
know there's the the some games and
things like that they're just kind of
fun to go and enjoy so that's it</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>