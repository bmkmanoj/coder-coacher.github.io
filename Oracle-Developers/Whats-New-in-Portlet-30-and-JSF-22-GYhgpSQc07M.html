<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>What’s New in Portlet 3.0 and JSF 2.2 | Coder Coacher - Coaching Coders</title><meta content="What’s New in Portlet 3.0 and JSF 2.2 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Developers/">Oracle Developers</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>What’s New in Portlet 3.0 and JSF 2.2</b></h2><h5 class="post__date">2015-06-05</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/GYhgpSQc07M" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">my name is neil griffin and i'm here
with Ed Burns today's talk is called
what's new in portlet 3 and JSF 22 again
my name is Neil and I'm with liferay I'm
a software architect for life may head
up the liferay faces project right here
I'm a member of the portlet three-point
o expert group and I was also a member
of the JSF 22 expert group which we just
finished with java ee 7 represent
liferay on both of those committees and
i'm contributing author to the JSF to
complete reference which the primary
author is it I'll let him introduce
himself now good morning everyone thanks
for coming and especially so early today
hope everyone's still having a good show
and I have been involved with JSF for a
long time since 2002 and I've been in
spec lead since 2003 or Coast beckley
and the most fun part of the job as
being expect lead is the ability to
cleanly integrate other people's great
ideas like all the good with Neal's had
Jacob hukum and alexander smirnov all
the great people in the JSF community
and the expert group over the years
integrating them into the platform in a
clean way and hopefully improving on
them in the process but I after so much
depth of experience on jsf I have want
to say that you guys the practitioners
are the experts in applying it so it's
very good to talk to you in the
conference halls between sessions tier
your stories about what worked and what
did not so if you see me please approach
me and these are some books I've offered
author to redraw hill the new one on the
right there is a Hudson continuous
integration in practice that was in the
bookstore now and hope everyone is using
some kind of continuous integration is
who is not using continuous integration
anyone all right time that you got the
book right there all right thank you
okay and this is hard speak to this one
this applies to what I say not to what
Neal says Paul does it apply for me too
okay so here's the overview of what
we're going to discuss today I'll be
talking about several of the topics and
then ed will be talking about the other
topics first we're going to discuss
portlet technology if I could get a show
of hands has anyone ever developed a
portlet before okay great anyone used
liferay portal before okay today we're
going to be demoing portlets jsf
portlets in particular in liferay portal
anyone ever developed a jsf portlet
before okay well for those of you who
have developed a jsf web application but
never developed a portlet you actually
have developed a portlet okay because
you can take your jsf web application
and in most cases slide it into a portal
like liferay and it'll just work thanks
to some bridge technology so what we're
going to talk about that a little bit
later so first we're going to discuss
the portlet standard what it is we're
going to see just some screenshots we'll
talk about the portlet lifecycle and how
it's a little bit different from
servlets we're going to do we're going
to discuss the inter portlet
communication use case a very popular
feature of portlets then we're going to
talk about what the portlet three expert
group is focusing on CDI is one of the
main features that were thinking about
adding how do we share resources between
portlets have an example of what that's
about we're we're going to be
simplifying the API for handling
parameters that would be parameters that
that would be as part of the URL or
parameters that are in push back a web
socket mobile device support these are
some of the big ticket items that were
covering in portlet three there are two
types of bridges we're going to
disqus one is a jsf portlet bridge so
that if you have a jsf web application
and you want to slide it into a portal
you need a bridge for that but then
there's also the idea of a CDI portlet
bridge which is necessary for using CDI
in a portlet now today well maybe you
know a week or two you'll be able to use
jsf 2.2 in a portal and we're going to
demo some things CDI integration some of
the nice features of jsf too friendly
markup support faces flows to have a
demo and faces flows resource library
contracts stateless views some of these
topics have been discussed and other
presentations but this is all within the
context of a portal will discuss some of
the component suites jsf components week
so you can use and then we've got a use
case for Ajax push enter portlet
communication so let's discuss portlet
technology first this is just kind of
basic ideas so anyone could show hands
who's never used a portal before a
java-based portal okay so most people
most people have so for those of you who
haven't there have been three versions
of the portlet standard the first one
portlet one point o second one portlet
two point O and now we're at three point
o portlet three is really exciting
because it's been quite a while since
portlet two point oh I think that was
2007-2008 I think is when it came out
and so there's been a lot of innovation
done by the different vendors who make
portal products and so we're able to
harvest a lot of those great ideas and
take the ideas with the technology we
know that works and as it is said and
some other presentations what the job of
the expert group is is to take the ideas
that have been the innovation that has
been done out there either an open
source or in vendor specific technology
gather those those ideas that work the
best ideas as Best of Breed ideas and
then standardized them so that's what
we're trying to do with portlet 3 so
this is a screenshot of liferay portal
and there are three apps that are on
this this page right here this would be
a portal page and each red rectangular
highlighted box there is an individual
portlet a portlet manifests itself as
HTML is just a div layer and it's the
job of the portlet container or the
portal server to aggregate these these
divs into a single portal page and it
would be the job of the portal server to
provide theming and and you know
whatever CSS mechanisms are there in
order to aggregate them and rows and
columns however you'd like them to be
displayed now who's ever written a a
plain old servlet before okay lots lots
of folks so this should be very very
familiar to you if you're writing a
servlet there's just a single entry
point called service now we can use the
the do get or the do post right which is
a nice convenience mechanism and
servlets but in truth there's really
just as one method which is called
service that will handle HTTP GET put
post or delete operations now if you're
using if you're going to develop a
portlet portlets have a lightly
different life cycle and there's
actually four entry points the first one
would be processed action that would be
for a full page post back process event
that's for loosely coupled events that
can go between portlets we're going to
show you a demo that render that would
be for an HTTP GET and also serve
resource that would be for Ajax or if I
needed to dynamically serve up a PDF or
something like that so this is a little
outline of what happens in the portlet
lifecycle when an HTTP GET comes in from
the browser when a get request comes in
that's either going to request an entire
portal page or it might be doing some
Ajax or like I said serving up a PDF or
a spreadsheet that would be in the
resource phase if it's a post if it's a
full page post back it would invoke the
action phase then potentially the event
phase
and the event phase can go on for a
while events can go back and forth and
back and forth and then when that
completes then the render phase is
called if it's eight and Ajax post back
then it would just execute the resource
face so the portlet lifecycle is a
little bit different from the servlet
lifecycle and you need to be aware of of
this idea as you're developing portlets
so one of the common use cases we have
for portlets is inter portlet
communication anyone ever done IPC
before not inter process but inter
portlet communication okay there are two
mechanisms to standards-based mechanisms
for this that that we're given to us in
portlet too when it's called the event
the other is public render parameters
have a demo so let's head on over to the
browser and i'll login so this is
liferay 6.1 library 612 just came out
august second okay and we head on over
to bridge demos events so here we have
these are both jsf portlets we have one
on the left which is a list of costumers
one on the right in these this would be
the travel bookings so this would be
this would be a portal application that
would be used by a travel agent who has
many different customers and so if I
were to click on one of the customers
over here that would invoke a jsf
navigation rule over here and then
display the individual customer details
so I'll go ahead and do that and it's
bi-directional so if I wanted to change
the name of the customer then the name
is the name change is reflected right
there okay so we have events we also
have another technique which is called
public render parameter so that's that's
the use case for inter portlet
communication but one of the drawbacks
of this is it requires a full page post
back in order to work so we're going to
have a demo of Ajax push a little bit
later and show how to
make that a little bit more rich so
moving on to portlet three these are
some of the the big-ticket ideas that we
discussed before against CDI the
client-side API Ed's going to talk about
the client-side API and some of the
ideas that we're thinking about putting
in the API sharing resources between
portlets parameters web socket mobile
well let's talk about the the expert
group the expert group convened in March
of this year so we've been we've been
moving along and you know some of the
first things you do when when the
committee first means is you look at the
previous version and you you know you do
some cleanup you look at the errata
items and so we took care of that the
one main proposal that we've been
working on is portlet parameters and
there's there's actually here are some
links for you here if if you go to the
project page at java.net report that
spec 3 you can sign up for the mailing
list and you can you can see what the
the experts are saying back and forth
the meeting minutes are posted we have a
weekly phone call and the meeting
minutes are posted there every week and
I'm very happy to say that the the API
as it's being developed is it's being
done at github so you can you know you
can you can clone it and you can you can
fork it and then and then clone it to
your to your local and take a look at it
and so we're sending pull requests and
things like that in order to get this
work done one of the things one of the
main big-ticket items is CD I CD is and
technology that was introduced in java
ee 6 portlet 3 is going to focus on java
ee 7 okay so it's going to be java ee 7
as its base and so CDI 1.1 is available
in java ee 7 and so we're think about
aying 22 annotations to the portlet api
one will be portlet lifecycle scoped one
would be poorly
redisplay scope now I have a demo here
that shows the problem that this is
trying to solve so let's head on over
here to my life rate page I've got a
page here which is called no redisplay
and another one that is called redisplay
so I have two portlets here on the page
this is this is this is part of the
liferay faces project these are standard
reference portlets that we use for for
testing the different components wheats
this is just using plain jsf and a
little bit of life Ray faces alloy I'll
talk about that later and what I'm going
to do here is I'm going to submit
partially submit this form right here
and then this one here these are two
separate portlets right and i'm going to
show you the usability problem that
exists so if I punch in a zip code here
maybe I'll put in one for orlando
florida right there then i hit submit
right you can see that it gives me some
validation back that you know i failed
validation well let's that come over to
this portlet and I'll punch in another
zip code wilmington delaware now when i
hit submit here what I'd like you to do
is please focus your eyes right here ok
on it on this form so I'm submitting the
form on the right but please look at the
form on the left you see how it lost its
context right there this is the way the
portlet API portlet to is currently
designed there's no way to scope that to
recover that ok you know built in so the
JSF portlet bridge spect jsr 329 which
is head by mike friedman of oracle that
defined a solution for that so it's
actually a solution that's in the JSF
portlet bridge spec that would find its
way into portlet 3 using an annotation
so what happens is if I were to do that
same use case here 3280 119 806 and if i
were to submit here on the left
19 806 here and then do that again
submit then the portlet on the left
doesn't lose its lose its brains it
remembers the form so that that would
going back to the slides that would be
portlet redisplay scoped ok so going
back to this diagram real quick so
portlet lifecycle scoped the first
annotation would would be for this you
know it would start in the action phase
and then survived all the way through to
the render phase portlet read the loops
rapport the redisplay scope is actually
action to action so what happens is you
you hit submit right and that scope
lives until you hit the next submit okay
so it's actually action to action
portlet redisplay scope so those are the
two annotations that were we're looking
about doing imported this is talking
about the client-side API so we did one
of the do-or-die features was Ajax and
in there we built a resource framework
and once we were able to built the
resource framework that was serving up
CSS and images and such we were able to
define okay now we can have a jsf jsf
script file and this allowed us to
define a little protocol for doing
partial updates between what's in the
page and what's on the server and so
what Neal was showing there when the
post is being sent of course in a
regular jsf system you would have you
know value expressions that are for
those fields right the reason the via
was getting obliterated was the portlet
was repainting the whole thing there
wasn't a way to do just a you know send
it from one side and only repaint that
one side so we're looking at adding a
portlet at jas that will have this kind
of functionality and also and we'll be
able to use the partial update syntax
that we defined on the XML format
between the client and the server
fitting into jsf because we
added into dotto when we did the Ajax we
had a left room for expansion right so
there was an extension element that
could potentially be used for conveying
this additional information there's no
cargo that the Portland needs to deal
with so this would give us the ability
for the resource phase to send these
inner portlet communication events and
share the public render parameters using
the combination of a new portlet ojs
file and some additional markup because
it is just XML markup between the I
think it's called partial response
extension or something there's some kind
of extension in the XML element we
haven't used it to date so this would be
the first case of them of anyone having
to use that that I know of yeah this is
going to be a nice feature because we've
we've never had any client-side API and
the portlet spec before so it's been an
entirely server-side architecture so is
the same thing going to be with with
Portland you know with JSF when we added
Ajax and JavaScript to jsf we were
acknowledging the fact that there's only
two kinds of people in the world those
that can't stand JavaScript and those
that don't mind it at the very least so
is that going to be the same kind of
thing for boil it where you know you
don't have to look at the j s but you
can we will there be a JavaScript
exposed format yeah that is so the the
discussion is still out on that one on
whether or not you actually have to
write JavaScript in order to take
advantage of some of the features in the
client-side API my suspicions you'll
have to write a little bit you know in
order to do certain things and of course
since it's an API right if you do write
JavaScript you'll be able to to leverage
the features that are there so that was
the pattern we didn't do that oh there's
tags for all the stuff so you don't have
to write any JavaScript at all but
underneath all the tags there is a
JavaScript API that you could use quite
climb
okay so these are some additional topics
that we're going to discuss sharing
resources between portlets i discussed
earlier the handling parameters if you
want to take a look at that I I would
encourage you to visit the project page
again and look at I believe its variant
seven right as what we were currently I
variants that is that what it was Barry
bearing at seven and it's it's nice it
uses a nice composition model for for
changing now the way the way we're
approaching this is if if we introduce a
new idea that breaks backwards
compatibility okay then the portal
vendors will be required to do it the
new way but there will be a way to
disable it so that it works the old way
okay so that way you'll be able to take
your your legacy portlets and put them
into a portlet three container and and
have them run okay so we're very
concerned about doing things that might
break old applications and trying to
make sure that we provide a way for you
to be able to use portlet three release
transition your older projects okay I do
have an example of this problem of
sharing resources and what that means
exactly so let me head on over to see
bridge issues i believe it's 1635 it's
actually over in this other browser
bridge issues 35 right here so here i
have to these are both jsf portlets the
one on the left is the one we saw
earlier which is just plain jsf the one
on the right is primefaces it's a
primefaces version of it so you can see
the plane jsf it doesn't hey this is
just a text box for the date this would
be a prime faces date selector and so
the one thing that these portlets have
in common is a resource called jsf j/s
which is what ed was talking about
before
so when you're in the the portlet
environment right you have to portlets
that need the same JavaScript resource
and that JavaScript resource needs to go
in the head section of the portal page
so right now there is no standard
mechanism for detecting duplicates like
that so but we do have a feature in
liferay phases bridge that detects that
so if you were to look at the the raw
HTML page source of that and if you were
to look for jsf jas there it is right
there it's coming from who won let's see
it's coming from the JSF to Portland ok
so if I hit enter here to try and you
know find next I don't find in ecstasy
there's only one occurrence of it ok
because that feature is enabled but like
I said portlet to doesn't provide a way
for us to detect duplicates so this is
very important you know because we're
very worried about network bandwidth and
sometimes like if you have two copies of
jQuery coming down on the same page
sometimes there's me JavaScript issues
and so this is an important thing for us
to get right so that's an example of the
problem the expert group hasn't actually
taken up this topic yet for formal
discussion but just trying to explain
the problem we're trying to solve ok and
so some of these are some of the other
big-ticket items need to discuss portlet
bridge technology and then afterwards
I'm going to hand over to add and he's
going to talk about how JSF 22 fits into
into the picture first we'll talk about
jsf portlet bridges so if you want to if
you have a jsf web application and you
again you want to put it inside of a
portlet then you're going to need a
bridge there are three bridge
technologies available one is is from
liferay liferay faces bridge also a
JBoss portlet bridge which is done by my
friend Ken Finnegan at jboss and can
actually has already implemented those
those two annotations we talked about
before Portland life life cycle scoped
and portlet redisplay scope he's
actually implemented those annotations
and CDI so we'll be able to to leverage
that in Portland three the research he's
done there's also the Apache my face is
portly bridge this is the reference
implementation for a JSR 329 329 was for
an older version of jsf it was for jsf
1.2 and we haven't imported me we
haven't formulated a JSR for for doing
any of the JSF to stuff but we've just
been doing it an open source the
different different product vendors the
my face is portlet bridge one is
currently alpha status but the the other
two are production status now if you
want to use CDI in a portlet you're
going to need to see what what i would
call CDI portlet bridge liferay provides
one the liferay CDI portlet bridge and
also jboss has one called the J the
jboss CDI portlet integration library
and here are the dependencies for the
seas are both in maven central and this
is so these are the dependencies that
you would need to add to your to your
war in order to utilize CDI in your
portlet and I have a demo I would
encourage you if you're interested in
this I would encourage you to read this
wiki article right here you can just
Google developing jsf portlets with CDI
and it should be one of the you know one
of the first set of results that comes
back because there there's a portlet
filter that you need to to add and some
things you need to add web.xml in order
to get well to work properly especially
for using tomcat because CDI is not
built into tom cat so anyway we it worse
we've done lots of testing and the
reason why the portlet bridge is
required for CDI is because when the CD
i spec was formulated it was targeted
mainly at the servlet AP
and and and the servlet use case and so
this is one of the things that we are
going to be working on a portlet 3 is
how do we work with the CDI 2.0 expert
group in order to make sure that we're
able to do this with portlets and maybe
we'll be able to eliminate the portlet
filter and things like that ok so these
are topics that edits going to discuss
starting with the CDI integration we
have with JSF 22 ok so jeiza has had
some kind of diversion control and
managed bean functionalities one that
owes 2004 so right around the time that
spring was first becoming popular with
Jess I've had its own and manage beans
thing when jazz up to dot ok now we were
part of John 86 which was the first key
release that had CDI but jeff has always
had the tradition of not making any hard
dependencies on the versions of other
things that are in the same he level
that it goes to so there wasn't anything
in jazz into the tightest type need a
CDI you could use all the features that
we offer now seven has come out we have
the ability to depend on CD I wound up
so there are a few new features and as
up put it are entirely and then TV I
cannot use the feature unless you're on
a CD I capable
container first is not the only problem
you're not missing a container if you
still have no there's javac space is
being you scope there you go and we will
replace that with job x86 you exact same
functionality this is this one on top is
the proper CD ice cream in the next
release of GSF we did to that too for
whatever number we picked for the next
one we will be deprecating all the javac
space is being packages like to observe
a moment of silence okay the other
feature found that penalty is blow
spaces for talk more about this later
but as enough as it applies CDI
specifically is this possible sanitation
so if you're using cgi conversation
scoped you have to mess with when to
begin and end in a conversation
programming that's a very nice thing if
you want to have conversation scopes and
all the different web frameworks that
are possibly out there but if you don't
want to mess with family starting
then basically the flow scope down
patient you do the same thing but it
will automatically begin n as you enter
and exit flows and the flows of course
can be nested arbitrary p they're
maintained in a stack data structure
just like you would invoke methods so
that's a very handy way to annotate and
store your model objects as they relate
to the butte here another big feature in
jsf see that too was what we call html5
friendly markup support now you know we
don't want to call it okay JSF 22 now
supports html5 because the truth is we
already have before html5 existed and
that's because jsf is an abstraction it
is a component library so the question
of you know what markup is being
rendered is really a front of library
concern so if you would like to build a
html5 component library on top of jsf 12
there's nothing stopping you from doing
that one libraries clear what we try to
do with this is make it easier to write
html5 capable applications demo yep let
the next one well yeah so you thought
for this I would like this is a handy
slide we should I talk to the snare yeah
maybe talk to the slide to talk this
syntax yeah so with the past one thing's
be data doesn't pass the elements here
basically we took advantage of the fact
that the previous versions of jsf we had
tags each column tags
no basic hundred hit for all the things
that were in HTML 4 and 4 things that
don't map directly from for there's no
analog and five then basically let the
rendering passed straight through so
what this does is you have some markup
here and the fact that this has there's
an xml namespace this afternoon value
and if an accent from that specific
namespace is located on and the elements
sorry anything attributes that is that
element is discovered to be a property
as that component enough in the UI
component tree and this really is
matched to each column input text but
the fact that we say in your title date
that's an Occupational five basically
this gives us the ability to html5 stuff
without having to invent a whole bunch
of new tags and the additional freedom
of dealing with elements of don't exist
at all like progress or field centers up
step okay so we have a demo
so my up dude screen oh there we go I
think that was open office okay so we
have a demo and we head on back over to
the bridge demo site so our standard
reference portlet we have here is the
job application and you can see the date
of birth field is as ed was talking
about just an H colon input.text jsf
doesn't have a fancy date picker type of
component out of the box here we have an
html5 version of the same portlet and it
basically uses that same markup that was
here in this slide where it's just an
input type equals date and it gets out
using google chrome and so each web
browser has their own date picker html5
date picker type of thing built into it
I'm right that okay so that's really the
main difference between the two portlets
is one is using all H Cohen input.text
this one is using input type equals text
or input type type equals date you know
for that also another feature that this
is using is a tag decorator moment let
add talk about tag decorators one thing
I want to say that just occur to be real
quick when we were showing this one in
the demo go over to the demo oops can
you give me the curl shirt
here we go yep so if you are depending
on the browser to give you you know
you're using the html5 native date
picker thing then you're essentially
giving control of how this thing looks
over to the browser now I don't know if
they allow you to style these things are
not yet yeah I kind so you know you're
giving stuff up if you are using a pure
proper jsf component I mean these are
all property has a component that's that
was my point but if you're using a fully
jsf rendered component then you would
have the control of rendering this thing
how we liked so if you're the shop that
has very scripted style guidelines for
how things should look and when you go
into chrome it's going to look chroma Sh
so when you go into safari it's going to
look Safari ish so yeah alright so could
you go back to Florence sorry
thank you and the way this works is
built on top of a feature that's been
faceless forever all tag decorator and
the old 3gs f-22 facelets tag decorative
thing still works so what you'll have to
do for this because demoing fieldset you
can't reduce an additional functionality
for that it was able to use the JSF 20
facelets tag decorator thing to add his
own thing here so what we do is we look
first if there's one of these make
Claire and we give this guy a shot at
find a decorated tag and if it doesn't
do anything that we go to this mapping
thing javac spaces you face looks fat
dick rates are the next one I talked
about the face close
and cut lemon earlier it's standardized
mechanism for grouping together
authorizing relay to jsf use mostly
useful they're packaged in a jar file
and special directory where that
wouldn't and we really built it up
published lessons we learnt in your past
clothes spring water flow and apache my
faces cody guard mo alright serious okay
heading back over to chrome and the
flows page there we go so this is a new
demo and all these demos that we're
showing the html5 one and this flow is
one or brand new they'll be committed to
the library faces git repository at
github in about a week or two but all
the other demos besides those two are
already available they're all open
source for you to reference now this is
a brand new demo we're working on again
will be provided to you in a couple of
weeks and you can see here it's using
Mahara 223 and a snapshot release of
life Ray faces version for one and there
are two flows now the the use case for
flows is that i have connected views
okay i have a view one and then I go to
view two and then I go to view 3 may be
back to view one and I'm working within
these different views and and they met
and we're doing navigation between them
well what we need is we need a scope
that will scope data across all those
views for us and then when we're done
with this flow it just automatically
goes out of scope for us so I'm going to
show you some code and Eclipse first so
that we can see under the hood for me
under the hood the different flows that
are there so here is the the jsf two
flows portlet and here's the jaw right
here source main web app
there are two flows here one is the
booking flow and that's we're going to
be booking travel flights hotels
restaurants and things like that there's
another flow which is a survey so after
you have booked your travel you know
sometimes they prove that the travel
agencies or you know the travel websites
will say would you like to take our
survey all right so this is an example
of moving from the booking flow over to
the survey flow and then once the survey
flow is completed then we go back to the
booking flow and everything goes out of
scope automatically for us and the
memories is made available for garbage
collection to the GBM so in the booking
flow we have a little descriptor called
booking flow dot XML it's just a little
faces config file and we'll just take a
look at it right here it has a flow
definition called booking going to grab
that pointer a flow definition called
booking and we specify when we're done
with the flow where we need to return to
and then we also have a flow call so
we're going to go from the booking flow
over to the survey okay and this is a
really nice feature we have a JSF 22
called an outbound parameter so when I'm
when I'm booking some travel I'm a
customer right I'm going to book some
flights and then I'm going to put in my
credit card well we want to know who
that customer was when they conduct the
survey okay so we're going to take that
customer that customer pojo instance and
we're going to pass that from one flow
to another using this outbound parameter
okay we also have the survey flow which
just will you know it also has a flow
definition file it defines itself as the
survey flow and it shows how we return
from the flow this is the inbound
parameter ok so the booking flow has an
outbound parameter the survey flow has
an inbound parameter and it's tied to an
al expression and before anyone tweets a
complaint about why they introducing
more XML syntax we have a builder API
for this as well right that way there is
a builder nice builder API for this
that's right one advantage of doing the
XML approach is that you're able to
package the the flow definition file
right right there you see the flow
definition file along with your views
okay so it's a nice modular approach I
kind of like the XML approach did I say
that can I say that out loud okay all
right I'd also like to show some code
here before we run the demo we have a
booking flow model bean and here's where
the the beauty of the CDI annotations
comes in it's just a simple pojo called
booking flow model bean and we have the
named annotation on there so that we can
use it in e.l
there we go and we annotate it with flow
scoped and we just specify which flow
this is associated with okay so whenever
jsf encounters an al expression with
with booking flow model beam it will
automatically tie in with CDI in this
case it's jboss weld in order to create
this at the instance of this pojo
according to the flow life cycle
similarly there's a survey flow model p
you could take advantage of if you're
going to create a backing bean to handle
some some business logic okay like let's
say 1 i'm going to book a flight and i'm
going to add a flight to my shopping
cart that's some business logic right
there i can use the CD i inject
annotation in order to inject my model
being into my backing bean my backing
bean is in a request scope okay so let's
take a look at the demo how it works so
i click on this button right here and i
enter into the booking flow and i can
select a let's say flight and this is a
list of all the airports in the United
States I came from Orlando so from
Orlando International to san francisco
international airport and well let's
pretend that i'm leaving tomorrow search
flights and look there's liferay
airlines okay liferay airlines has
departures every couple hours from
orlando and the price isn't too bad this
actually is the real distance there's a
little nice little jar out there on the
web that does lat long distance
conversion any weight so i'm going to
add that to the cart so i'm in the
booking flow okay i'm booking flights
hotels whatever it might be now i'm
going to book some additional travel
booked a flight home okay and here i'm
going to go from
and Francisco back to orlando
international the next day search
flights leave a little bit later in the
day now I've got two items in my cart
now I could abandon this right now by
exiting the booking flow okay or I could
book additional travel or I could check
out an important thing are you that's
not the only way to abandon it there's
another way like you would be exiting
the flow if you checked out if you
properly went out through the back door
the exit door right you can also just
abandon the flow entirely so if you're
in a flow however deep and you navigate
to a page that's outside of the flow
then whatever flow state you have
however deep it is nested it is
automatically thrown out an abandoned
yeah so I'm going to click on checkout
now now I have the opportunity to to
enter in my my name and my credit card
and I'm not going to enter my credit
cards I'm just going to hit purchase
okay now i'm still in the booking flow
okay i'm in the very last view of the
booking flow but i'm going to click on
this call survey flow but now in a
real-life application it would be would
you like to take our survey you know
something like that so when i call the
survey flow okay I've now moved from the
booking flow and i'll call the survey
flow there's just two views in this one
my favorite airline is life right
airlines and i like window seats i like
to look out the window and i hit finish
see my name right there okay thank you
neil that is the customer right that
completed the credit card you know you
thought your name and your credit card
that's the customer pojo that was passed
from the booking flow over to the survey
flow okay now just to show nothing up my
sleeves here right i just want to show
you in the code if you look at the
booking flow model bean there is a pre
destroy method
okay where it'll just to do a little log
or system airprint line where the
booking flow model beam is going out of
scope right similarly in the survey flow
model beam there's another pre destroy
right there where it says the survey
flow model beans going out of scope so
when I return from the survey flow I'm
actually not just done with a survey
flow but I'm also done with the booking
I'm done with both okay and so if I
click on that and then I look at my
server log wherever that may be an
eclipse there it is here you can see
that weld properly called my pre destroy
methods simply because i'm done with the
flow okay so this is JSF 22 I think is a
great improvement over conversation
scope you know because it's it's a it's
it's a basically kind of a view centric
way of doing automatic allocation and
de-allocation of us scoped beans all
right
so that's our our flow is demo back to
Eddie ok I'll move for these more
quickly so we have some time for
questions the resource library contracts
feature lets you while justice flows let
you modularize behavior resource library
contracts that you modularize appearance
so basically it's a way to take
templates put them in a reusable module
and they can apply to any page in the
app and they can be aggregated and
bundled in depending on your you know
whatever kind of style constraints you
might want to apply to the whole
application we added for performance the
ability to have stateless views and that
is if you are using components that
don't need to maintain view state which
sometimes can happen then you can just
mark the f colon view transient equals
true and none of the viewstate will be
saved for any of the components inside
that thing the consequences though first
of all and most importantly if you have
components the duty to maintain their
view state like trees panel a tree
controls and tab panels and tables with
sortable columns that are the remainder
remember which sort order you're using
that is you I state and those kinds of
things won't work with this but there
are plenty times you have a page that is
nothing but stateless controls on the
read-only that is and you can set it
that way and save a lot of memory and
processor time another side effect
though is if you have you scoped managed
beans you can't even you can't use that
with this feature they become like
request scoped
okay so if you're going to use jsf in a
portlet environment there are four
component suites that that library
supports with liferay faces bridge one
is our alloy component sweet life Ray
faces alloy icefaces 3.3 already has
compatibility with JSF 22 inside of it
primefaces 3.5 is the current production
release of primefaces and that's
designed for JSA 2.1 but there is a
release candidate of primefaces
four-point-oh its i just checked it's a
couple weeks old for point of release
candidate one and that has full
compatibility with JSF 22 and jboss is
also planning richfaces five-point oh
there is an alpha of that but they
haven't increased the dependency on the
JSF API to JSF 22 yet but it is it is on
the roadmap and just have a quick demo
for the different components wheats that
are available to you so you've seen just
plain jsf already we have we have
examples of this using CDI and other one
using spring so if you want to use
spring for your managed beans we have an
example they're exporting PDF this is
the icefaces version of of that portlet
there's also a prime faces version of
that portlet where you can see the
different components suites and there's
also a rich faces version this is this
is all for jsf 2.1 what I've just showed
you we're liferay is going to be
supporting JSF 22 quite soon in
milestone release format with life or a
6.1 and also our new version which is
live for a 6.2 which is coming out later
this year before the end of the year so
right now you can choose jsf 2.1 with
any one of these components suites and
as the components we start supporting
JSF 22 then we'll provide
ability to use them with Lavery faces as
well we have one final demo which is the
Ajax push use case and so I'll just head
on over to that demo this is uh if you
recall earlier we we did the use case
for inter portlet communication but it
had a little bit of a disruptive you I
in the sense that when I clicked on a
customer over here the URL changed to
this big long URL it was a full page
post back and in order for the portlet
on the right in order to repaint itself
it had to go under go the full portlet
life cycle so it's kind of a very web
one dot well with Ajax push when you
click on an item on the left that will
do normal or forward Ajax 22 liferay
portal using the resource phase which
will then trigger Ajax push over to the
portlet on the right so I'm going to
just click on that right there so you
can see that the URL didn't change right
that that was done with the resource
phase of the portlet life cycle
similarly if I wanted to change my
customer name maybe from grind Brian
Green way to brian crain when I hit tab
please keep your eye right there I'm
just going to hit tab then it does Ajax
push to the portlet on the left so this
is a way to greatly increase the the
user the benefits of the user experience
make more rich experience for inter
portlet communication this can be done
with ice push from I soft and also prime
push we there's there some folks who
don't a contribution we're going to
create a demo portlet for that
okay so in summary we we looked at what
portlet two offers what portlet three is
planning on doing what is available in
JSF 22 today and what you can do today
with JSF 22 in a portlet to environment
so I want to thank you for coming
Giovanni yeah well thank you for coming
and we have about five minutes left for
questions so do we have any questions
about this sure I'll repeat it I'm sorry
could you repeat your question okay the
the question is is if you want to use
JSF 22 with the latest version of life
ray then you would need to use a life
Ray faces version for version of the
product we should have the code ready in
milestone format in a couple of weeks
okay a lot of it still needs to be
committed to get ok so maybe maybe one
or two weeks out simultaneously we're
doing a lot of testing with our new
version of the port which is life for a
6.2 so design is aunt your answer your
question yeah okay yes
yes it is you have to do it in an
application level concern I gave a demo
on Monday we're basically at runtime in
my little approach we had a button it
was an entry to another flow basically
to get into a flow you have a button or
a link or some kind of action type
component and I gave a conditional
rendered so I said rendered equals Annie
L expression was calling a java method
and that java method was passing a
parameter to that java method was
checking is this flow present or not and
you can ask at runtime give me the flow
given the flow ID and that is how i
would do this so the conditional would
be render the button if the flow is
there don't render it if it's not right
so if you at what point in time do you
discover these environment ok well yes
but you'll need to query them well and
the perspective I have even if you
discover them at startup time the
decision of whether they're exposed to
the user to navigate to was something
that i did my demo at runtime runtime
yeah so I don't think it needs to be any
earlier than that I think I'd runtime is
ok because you're going to either the
flows are going to be there or they're
not so you know you can bundle them or
not right it's just a question of
whether you allow the user to get into
them or not yes I've black shirt yeah
like racing for ordering sportsman's or
responsive design
okay so the question is does liferay
portal support responsive design for
layout of portlets on a page so when you
say responsive design mean what is my
devices at an iPad or a yes actually if
you look at our our release candidate of
life for a 6.2 which you can get from
sourceforge you just download like a
tomcat bundle there's there's a very
late edition a feature where you know if
you if you hit it with a web browser
like on your on your laptop your desktop
computer it says preview this page as it
would look on an ipad or preview this
page as it would look on an iphone and
it's right right that you can see in
your browser exactly what it will look
like so yes responsive design is built
into life 4862 you can do it will like
rate 6.1 but it's it's it's much more
integrated in life 362 so did you have a
question blue shirt yes
save my app and then come back later is
there a facility that say not start
flowing begin again started
the question was if you're in the middle
of a flow and you want to suspend and
resume it there's no built and like
framework level support for that but you
could certainly do it by you can declare
a pre destroy of the flow and save the
data that you need to have a side and
then declare a pre enter which would
check that data you've previously saved
and grab it back you can there must be a
start node but the start node could be a
switch statement or a method right so
it's a common pattern for the first note
in the flow to be some kind of logic
type thing that reroutes you to
somewhere else so the start node doesn't
have to be a view no it it can be there
are actually five different node types
view which is the page method method
invocation switch which is a switch
statement you know like you have a flow
call and flow return and so the start
node could be any of those things so in
your case do you want to do that so you
have a pre and post initializer that
saves and possibly restores the state
and the start node would be something
that you know would check if that had
done and then direct you appropriately i
would add see i also has the idea of
passivation and you might want to
investigate passivation I've never
thought about that until just now with
regard to face is flows but any other
questions
so if you're in the flow and the browser
closes right back button you well that's
there's nothing different about that
than any other back button concern
that's still something that you have to
catch and we didn't add a new back
button support to jsf so whatever you're
doing with jsf we're going back button
is still either a problem or it works
with ever so whatever solution you had
so far I'm sorry I don't have a better
answer than that any other questions ok
then well thank you very much for coming</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>