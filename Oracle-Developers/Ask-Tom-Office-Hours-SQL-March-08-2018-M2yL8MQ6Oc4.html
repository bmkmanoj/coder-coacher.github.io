<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Ask Tom Office Hours SQL | March 08, 2018 | Coder Coacher - Coaching Coders</title><meta content="Ask Tom Office Hours SQL | March 08, 2018 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Developers/">Oracle Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Ask Tom Office Hours SQL | March 08, 2018</b></h2><h5 class="post__date">2018-03-17</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/M2yL8MQ6Oc4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">okay so hi there everyone I'm Chris
Saxon I'm part of steam voice teens
Oracle developer advocate team and also
part of the answer team on ask Tom I've
also got with me today
Keith like a key for you there can you
say hi I can see you there but he's a mu
not responding at the moment so thank
you he got it you go girl then here can
you show us your face quickly and say hi
let me see if I can work him okay yeah
we've got you fantastic everyone I so
Keith you're the keeps the PM for
analytics sequel so he's in charge of
making sure a lot the stuff we're going
to talk about works and help bring new
features anything you want to add to
that Keith or that's pretty much what I
do fantastic
okay so to start with what I'm going to
do is look at some examples of pivoting
and sequel before we get into that just
some kind of logistics if you've got
questions please put them in the chat
window we'll be keeping an eye on that
and pick them up as we go along if
they're relevant to what I'm saying or
once I finished we'll address those at
the end please keep your questions
focused on how you want to use the
feature understanding it better well
we're not
and licensing and pricing issues there
we're not going to cover those either
talk to your account manager about that
but we're here to help you understand
and use the technology more effectively
particularly sequel and so that's what
we're here to do today so now let me
just share my screen again and I'll
start by talking about some kind of
questions that come up about pivoting
and of course the basic one is you know
what is pivoting and it's about
converting rows into columns so let's
just start with the basics how do you
you've got data set in rows and you want
to convert it into columns and it's
useful to walk through an example when
doing this so what I'm going to use is I
really like running and I've got my data
set of records of when I've been running
how far I went how long it took me so I
can see you know am i sticking with the
program am i keeping up am I getting
better that kind of thing and what I
want to do is I want to group the data
by week so I've got three weeks worth of
data here and for each week I want to
sum up the total distance I've run so I
want to see how far I went in that
particular week and I don't want to
return those as columns so we can see we
got started off pretty well did 17 miles
in a week and then I'm gradually tailing
off from you know getting less and less
involved as it goes on I probably need
to start getting up running a bit more
so I want the data set I want to take
those three groups and convert them into
columns that look something like this so
we've got seventeen seven and one so
let's kind of go back in back to the
dark ages way back in 10g Oracle
database and before in order to do that
we can construct this manually so let's
think about what we're doing we want
three columns and what we're doing is
summing up the information so we need
three some operations one for each week
this question is what do we stick in
these big gaps in the middle here so we
look at the first week and what we want
to do is I've got the data set starts on
the first of January and it comes the
next three weeks or so
I want to see if a the running date the
date of the run log is in the week that
starts the 1st of January and we can do
that using this trunk function and this
iw format returns the start of the ISO
week which is the Monday of that week so
today's the 8th Thursday the 8th the ISO
week for the current date is the 5th of
March so that's Monday this week and we
can compare that to see if it is the 1st
of January which is Monday of that week
and if it is we return the distance how
far I went if it isn't we return nothing
we get null so we're just summing up the
information that matches that and so
that gives us our first week I then need
to repeat basically the same expression
again for every other week the only
slight difference is each time I'm
changing the date so I'm looking at a
different week each time so this is kind
of easy to say but some of you probably
looking that query in thinking it's a
bit tricky to see what's actually going
on and particularly if I start adding
more and more columns in here say hey I
want to have five or six weeks worth of
data rather than just three and gets
really verbose it's really big and the
only thing that's changing each week is
the date value so it's a lot of typing
for not a lot of benefits which is kind
of thing that as developers as
programmers we kind of learn quite early
on this is a bad idea so an 11g we
introduced pivot calls to help simplify
this process some what I'm going to do
is just work through like a three step
process for how it works and how you use
it
so there's kind of three parts of the
pivot clause and I work through them
from in in the order that you write them
out in your query so the first thing you
need to define is what is going to go in
the new columns so we have three columns
one for each week the values that go in
there is the total distance I've
traveled and so I'm summing up the
distance so that's this sum function
here now note in general you will be
combined
many rows into a single row when using
pivots so this has to be an aggregate
function so some count min max average
that kind of thing even if you know for
whatever reason that you will only be
taking one input row you still have to
use an aggregate so you've always got to
aggregate those values up so that's
what's gonna go in those note columns
next we need to define what these new
columns are and where those values come
from so where do we get the values that
become the new columns so which is the
source and that was that expression I
showed a minute go the trunk of the I so
weak so what we're doing is converting a
date to a Monday and using that value to
say what the new column values are
finally we need to actually specify the
values which values become the new
columns and that's just the three dates
so the mondays are those weeks so those
are three step process let's put that
into a sequel query and that would look
a little bit like this so we got the Sun
the distance for the I so a week and
we've got our dates in here so this all
looks great but there's a problem we're
gonna run it and we're gonna run into a
lovely Ora error why
well you can't actually use an
expression in this second part of the
pivot cause here it has to be an
identifier so it has to be an actual
column so what we need to do is take
this shrunk expression and move it up
into our sub query here so you notice
you see I've got this sub query at the
top this is one of the reasons I like to
use it when have a sub query at the top
with the whiff cause when doing this is
quite often you need to manipulate the
columns or the values that you're going
to be using before you can actually use
them in the pivot so maybe you want to
convert things to up normalized dates to
weeks or months or something like that
we can move that expression into the sub
query give it an alias and then we can
use that in our pivot calls this is nice
and good we've now got a working pivot
query we'll run it
and we'll get any output that looks a
little bit like this and this is the
first thing that tends to catch people
out with pivot they look at this and
just kind of go what on earth is going
on here why have I got all these time in
seconds values down here we got a nice
three columns we wanted but why are they
not summed up why have we got one row
for each of our input still so let's
just look at our query now notice we've
got the time in seconds in our sub query
very important thing to be aware of all
the columns or any column that is in
your input table so if you're just
passing a table itself or you're passing
a sub query like this that don't appear
in the pivot clause so you haven't
aggregated them or they're not a source
for the new values form an implicit
group by in your results and what's
really actually happening with pivots is
Oracle is database is taking this and
converting it into that old-style sum
that we saw in the background and they
say anything any columns that appear in
the source table or in your source sub
query that aren't in the pivot calls
itself become part of the group by which
leads to you getting far more rows than
you really wanted so this is the other
reason I really like having a sub query
when using pivot not only can we help
format you know massage the data into a
format that we're going to use down here
but we can exclude all the columns
except the ones we actually need in our
output and this particularly useful if
you've got a large table with like you
know 30 40 columns on it or something
like that chances are you don't want all
those or you don't Mo's to be part of
your grouping in your output so you can
select exactly the columns you want to
get the output you want so let's just
remove that and it's gone and now we get
the output we want we get one row for
each thing so that's all very well and
good and that's the basics of using
pivot let's move on a bit and start
looking at some of the more advanced
things you can do with it so
once we've got that pivot then a lot of
people kind of ask okay well we pivoted
one set values I pivoted the how far
I've run but what I also want to do is
includes the total time it took me so
for each week I actually want to get two
columns in my output how far I've run
how long it took me so we've got many
output cons now this is pretty
straightforward all you need to do so if
we've got our data set like this we've
got our distance I also want to include
these totals as well as their own column
which gives us an output that looks like
this so we've got the D the date and the
time for each one or the total date
total time and say this is pretty easy
pretty straightforward to do all we need
to do is for each extra and column we
want to aggregate just include that and
step one of your pivot calls so here
we're summing up the time as well now
note I've given them an alias here D and
T this will then be appended to the end
of whatever alias we've given to our
values here so we called it week one
would be D for distance and then the
other column will be T for time but also
note that we need to have an alias for
all except one column except one of
these attributes so I can have more
aggregates here I might also want to say
my average time for the week my minimum
my fastest time my slowest time the max
we have you have to alias all except one
so that's how Oracle can define the name
to the columns correctly however I would
say that pretty much you would want to
alias all them just to make it clear
what's really gone going on so we can do
that and now we get the output we wanted
notice we got the D and the T because
they've come from our Y at least we gave
them and they become part of our output
so that's all very good fairly
straightforward so far next thing we
want to do so we've got our we want to
convert rows to columns but
you want to do it for many input columns
and again this is useful to kind of show
an example talk an example here so what
I want to do now is rather than just
pivoting by week I actually want to say
for each week and distance that I've
traveled you know to the nearest mile
and I want to get the average time it
took me in that week for that distance
so we start off and we can see week one
I've traveled I did two runs which were
one mile long week one I did three miles
which are five miles long me too and so
on so we've actually got five groups in
our output we'll have five columns and
then I'm a virgin the times down here so
how do we do that how do we get these
two columns which are going to form our
input to give us those columns and our
output and so that will give us
something that looked like this so how
do we do this
well in our step two of the pivot calls
we'll see that we you just keep you put
the brackets around it group in
parentheses and put whichever columns
that you want to become part of your
input in it then in the values you need
to have a pair for each pair of values
for each column that you want now we
notice here rather than dates I've got
these values 1 2 2 1 1 2 2 &amp;amp; 3 to mark
which week it is in our output I've done
that using dense rank so dense ranks a
function and you sort the values by
whatever the order by here is all the
rows that have the same value get the
same ranking value so we had several for
week one and week starting the first of
January they all get value one then ones
for the next week all get the value 2
and so on so these are consecutive
values rows but have the same value give
the same get the same rank so I've done
this mostly just to make the same a bit
of typing here and so it all actually
fits on the screen because if I had to
type all these dates out I could have
done that
you can see who be tricky to see what's
going on here but this has another use
which I'll come back to later but
basically we're ranking by week and then
also saying which mile it is so we'll
run that and we get the average time
which gives us the output we want it
like that so so far so fast rate forward
and again you could have many of these
I've done too you could have three four
or five although you know I've seen lots
of people ask questions about pivot I've
not seen an example where they've gone
past more than two or three and they
wanted to pivot by but it's there if you
want it so let's move on to the final
thing I'm going to cover in the slice
today and that's how do you do this
dynamically so so far we've had a static
list of dates we said we want to start
on the first of January and go for the
next three weeks what if instead on one
rolling window I want to a rolling three
week window of dates how do we do that
well first approach you can take is to
kind of normalize the values the values
you're pivoting to a known values so
same values way too much there so if we
look at the query itself and this is
where I mentioned about dense rank
before we can select the subset the data
that we want the three weeks in this
situation and then use dense rank to
give them the values in the number them
one two and three those week one two and
three and then we can just select out
one two and three this makes it nice and
easy
doesn't matter what our input dates are
here if for some reason there's more
than four weeks at more than three weeks
I should say the fourth week fifth week
and so on they'll drop out we won't see
those in our output because I've not
included them in the values to pivot so
we want to and this works really well
when you've got a defined list so you
have a specific number of columns that
you want to show
your output but the values that go into
them all the values that form them will
change over time and this tends to
happen a lot with dates you might want
to have a rolling four week window three
month window two year window whatever
and you just map these values to a
specific constant so in here one two and
three those become the columns and this
works really well I say when you know
that you have a fixed number of columns
in your output and you just want to map
those values to it doesn't work so well
if you don't know how many columns that
are going to be in the output let's say
instead of pivoting by date by week what
I wanted to do is I wanted to pivot by
distance so for example I want to get
the average speed I've traveled for each
distance now of course in any subset of
the data there could be there's gonna be
a whole range of different values there
so the examples though so shown so far
only had miles one and five but even
when you round the nearest mile over
time and likely to have a whole whole
range of different runs over different
lengths so one mile two mile three mile
for mile seven eight miles and so on and
exactly which subset the data I select
defines determines how many columns are
gonna be in this dataset they would have
only been two for one mile and five
miles but the weeks after they might
been I might gonna have one mile run to
two mile runs a five mile run in the 10
mile run which give those four columns
in our output or we'd want four columns
in that output and this is a bit more
tricky so we don't know in advance how
many there's going to be fortunately
there is this sort of sort of a way
around that and that's to use XML so the
pivot Clause has this little XML option
and what this does is it gives you the
output in XML format and this is might
be wondering why what the advantage of
it here is well you notice I've got this
keyword any here in my in list that
means whatever values we
have 4-week here we each of those will
become a new element in the XML document
so for all the stuff on that input we
will get a new XML element I could of
course replace that with a query instead
of a sub query so I want to say I want
to get these specific dates with dates
that conform to whatever rules my sub
query defines and we can do that and
then we get the results as XML now this
is where I kind of say it's sort of
dynamic little sort of dynamic columns
because you just get one column which is
your XML document and that will look
something a little bit like this so this
can be useful in some situations but a
lot of the time you still want to get
this and convert it into you know a
relational format where you have the
particular columns so you've got to get
good at XML manipulation you've got to
figure out how you're gonna identify
what these values I probably need some
XML inspection utilities and so on so
this is good in some situations but it
won't work in a lot of situations
however it's just gonna increase the
amount of work you do downstream in your
client who has to take this data and
turn it into a format people can
actually use or want to use I should say
so if we want real columns and another
option is to use dynamic sequel and here
is where we in advance
find out which values we want to become
columns or have a query which defines
our list of values that we're gonna turn
into columns and we can do something
like this so first up we have a query
we're querying the running log finding
all the distinct weeks I'm using this
tag fantastic function to convert rows
into a comma separated string and
pivoting the results and storing that in
a variable and then we can then stick
that in some dynamic sequel a little bit
like this so we can do that and then we
can open the cursor and we've got
results
so this works but there is more effort
right we're now running two queries
instead of one and particularly if you
know this query here if running log is
huge let's say it's not just my running
logs but everyone else on the session
and whoever's using my app I'm running
app that I built there could be millions
of rows in that table but of course is
only ever going to be you know handful
of weeks or you know so we could be
doing a lot of work just to get a few
different values out here and so that's
a lot of effort and again this is
something where you need to know your
application know your data what you're
trying to achieve and what you're trying
to do figure out whether this is the
appropriate way to do it there is one
final approach that I wanted to mention
briefly so what you can do is create a
pipeline table function which does this
for you so there's a guy called Anton
Scheffer who built a pivot function that
does this for you and what he built is
you can take this pivot take a query
passing it into a pivot function notice
this is actually a custom function here
rather than the pivot calls because we
passed it into the table operator so
he's smart guy built the uses date
cartridge extensions for functions to
enable it to do a pivot at first glance
this might seem better than that dynamic
sequel approach because we're only one
in one query but there's still a lot of
overhead to doing this you know it's got
a pass and figure out what the columns
are each time so it's still pretty
expensive to do so at this point I kind
of take a step back and say well why do
you want to do a dynamic pivot or a
pivot that can have a dynamic number of
columns in its output because if you're
in that situation you've got to do a lot
of extra work on the client whatever
that is to actually know what those
columns are you could have some ability
to inspect them say whether they'll
exist and return them if they do so
you're adding a lot of extra work there
we
a lot of time don't necessarily need to
do so often it's better if you can to
just stick with a specified set of
columns and map your values to constants
which you can then show place in those
columns you defined but dynamic pivoting
can still be useful in some situations
maybe you've it's part of a generic
library or something like that ad hoc
queries again potentially very useful so
be aware think about how the client is
actually going to consume this if you're
going to use dynamic pivoting so that is
all I wanted to cover on I had to cover
on pivoting specifically so at this
point I wanted to kind of hand over to
you it's your chance to ask your
questions please put them in their chat
you're free to ask anything about sequel
um or what we've talked further talked
about here so let me just bring me back
up anything you want to add on pivoting
while we wait see some questions come in
Keith or think something like covered
just about everything that's useful I
think the only gotcha which you sort of
covered is the concatenation of the
column names and it's quite easy to run
out of in earlier versions extend beyond
the maximum column name where you when
you when we start to bring together the
values that you want to pivot and
concatenate the names so aliasing is is
a must
really hmm we will do stuff by default
but as always with defaults there's
boxes and I can catch you out if you're
not careful so aliases always though yes
yes
yeah it's a it's particularly useful and
we've got like several functions that
are similar and so on to help make sure
you know exactly what you wanted to show
and things like that isn't it okay so
just wanted to say as well let me just
share my screen again briefly I bring
back up and get my controls again so
I've got a very large blog post where I
talk a lot more about pivoting and the
alternate the reverse unfitting where
you've got columns you want to turn them
into rows using examples of some Olympic
data so there's a lot of information in
there goes into a lot more detail that
would have just talked about there's
also a lot of examples over on live
sequel so this is a fantastic utility
this script here is the one that kind of
supports the blog post so if you want to
reading this blog place you want to kind
of follow along try it out yourself
and of course I've my SSO has expired
while we've been talking and it's all
this fantastic I'll have to go back in
again start again it types out when you
just don't want it - doesn't it say okay
so we've got some one st. coming in my
internet all right list AK has the
limitations on the length table contains
huge data then we'll get error
how's this can be mitigated anything you
want to say on that Keith before that's
that's a good question we won't you got
to 12c we'll we'll overcome that problem
but then you run into a subsequent
problem mm-hmm which is that we can
truncate now then now of course you run
into the problem that you may actually
end up missing values yes and not
getting an error so then I guess the
question was we is it better to get an
error and you've dropped data or is it
not and that I guess is you know up to
you as a sequel developer to work that
one out
yes
I think tom has a as a string ank
function which doesn't run into this
problem yeah and there are other ways
around that problem as well to generate
the holistic there's a blog post which
says it's written by you here Keith
which which yes I was going to suggest
that one and so yeah I'll bring it up
just so people can see it and you can't
get into the data cartridge again to get
round there and the data cartridge will
do that but the new listing
functionality yeah is probably the
simplest and the one that's likely to
have the lowest impact on performance
yeah because it's it's a first-class
function ring Wireless so yes and so I
think as Keith kind of mentioning
there's he's got this great post here
there are various workarounds available
pre 12 to which all have their own
various degrees of clunkiness and the
problems depending on you know what how
you want to do it but I think the on
overflow truncate Clause is a fantastic
one where you say if it's going to blow
out the limit rather than that get an
error you can just say show some dots
and then how many characters you trimmed
off the outfit but yeah there's always
that fundamental what did you want that
would you want to do with that missing
data did you need to see it or not yeah
that's the killer really yes
well happily drop it for you but it
might be something that you wanted
exactly okay so does that answer your
question rajesh or are you good okay
yeah it's good thanks ok so they say we
can you don't have to obviously talks
about pivoting here you wouldn't ask any
other sequel questions and please do so
I think we've
so we didn't have that many questions
come in I don't think we have any
questions come in and advance this time
like we have in the past a very
thoughtful look on your face there Keith
no I think pivot to be honest I haven't
seen and we don't get a lot of feedback
on pivot in terms stuff my impression is
and I think the reason why we put it in
is to a V items so it needs more so
they're deeply embedded in you know
things like Oracle business intelligence
and data visualization tools that we
have etc because it is that type of
operation where you want to mmm doing
those sort of pivots to populate a grid
in Java or something and you you want
the data in a reasonable format that
makes it easy to populate that grid so
that's kind of the reason why we
couldn't I think in sort of generic
sequel reporting terms it may not be
terribly well used maybe not not that
well known about yeah I think this is an
interesting point this is actually a
surprising number of questions that come
in and last tom where the answer
involves pivoting even though it doesn't
seem like it would do it first
so we there was an interesting one came
in actually just two or three days ago
someone had a sequence of I guess
clocking in and clocking out times but
they could have multiple in multiple
rows which said in and then multiple
rows which set out they once get the
last of each of those and show those
columns so they want at the end time and
the out time and it's like yeah okay so
you do a bit of manipulation first to
kind of group them find the last and
then you can pivot them and there's a
lot of kind of situations like that
which it's not immediately obvious that
pivot is is what you're trying to do but
you know if you think I've got one
column that I want to turn into two or
three in some situations then actually
pivot was quite often the easiest and
best way to do it hmm
yes that's true that's true I think it's
if I remember correctly I think in our
Data Miner sort of algorithm building
tool
I think pivot is one of the built-in
functions nothing from a data mining
perspective quite often where you've got
rows you would convert those two columns
so that you can do more focused analysis
on it so pivoting in I presume for data
scientists is a is a more used piece of
functionality definitely I think there's
a lot of people who are used to their
Excel pivot can cut everything yes and
it's it's all they kind of yearly annual
reports where you need to show your
sales or whatever by month across the
top and you know say you have buy
regions down the side months across the
top or something along those lines or
days across the top and so on which all
the financial art and our analysts seem
to do spend all their day doing yes
question hmm pivot is appealing because
it seems that the code will be simpler
but as you said it may not be the best
performance wise in some cases writing
complex statements and aiming for a
simple okay so
it's kind of it's really with
performance questions it's always hard
to answer in the abstract because there
is very few kind of cast-iron rules with
performance like you do this because it
is definitely faster I mean if you think
about it if if one way was always better
option exists because we would just go
like you know don't use them I think one
thing actually might just bring the
slide up again and let me just share my
screen again so that you might go back
okay so we can see here where I'm
filtering the data in the sub-query I
think this kind of a general important
point is filter your data as soon as you
can because the smaller the data set
you're processing the less data you've
got to work on less data you got to work
on faster your query is going to be so
the sooner you can filter your data the
better and you can actually filter after
the pit you can have a where cause after
the pivot but in general if you can you
want to do your filtering here because
that ensures that we're filtering as
soon as we possibly can and I think it
just comes down to making sure that
you're processing the smallest amount of
data as soon as possible I don't think
you've got anything to add to that Keith
or the fewer rows you can feeding the
faster it's gonna go mmm because as you
pointed out before there is the
situation where you know if we've got
like we have here weeks four weeks five
coming into that pivot clause we're just
going to drop them because you're not
asking for it but of course that's extra
work extra resources that we need to
pull that data in and then discard it so
the less work that you can do the better
yeah because if we kind of go back up to
the query like gateway I don't have a
where clause if we say they've been a
year's worth of data in here we still
would have you know we're sort of going
to looked at all that and gone oh
there's 52 weeks but actually we only
need three of them it's we're wasting a
lot of effort there so the sooner you
can do that the better okay
so question for Maya yeah would you be
able to explain about regular
expressions so short answer short answer
yes
long answer we need a couple of days I
think yeah and so would be a good one
for another us Tom session yes I said
industry powerful oh yeah they are
incredibly powerful I think it's one of
those things it's like you've got to
really think very very carefully about
what it is you doing on you to make sure
you want matching exactly what you want
and nothing else is otherwise it gets
just a little complicated so what I like
to do there's this site called regex 101
and and you can use this to test your
regular expressions so let's say we've
got you know one two three ABC
whatever and you can start putting some
things in here so we can look for one or
more aids and that will show you what it
matches and I think this is I use this
tool every time I try and type a regular
expression I use this tool and come up
with a whole bunch of expressions and
see what it can do so if we wanted to
say something like we want any number so
that would be things not to 9 followed
by any lowercase letter
said we can see it matches those those
blue ones there or we could do 1 a 2 B 3
D or Reno and you can see it's slightly
color coding differently so we can see
the extra matches there and this is
absolutely invaluable because you can
start doing some you know some crazy
things where you're doing more matches
and bracketing them and so on to figure
out what's going on and it's very easy
to get lost I think it's better if you
have a specific question if you've got a
regular expression you're struggling
with then let us know we'll see if we
can help it with that if you're just
kind of abstractly asking you want to
learn about it I think there's something
we need to cover in a separate session
is that so saundra beautiful cases oh
hey yeah yeah yeah yes and of course
with we've now got overlap with knocking
noise as well which will do other
matching capabilities now registers yeah
that's that's my new favorite feature
now might recognize is this it's quite a
few questions that come in the last time
when I go and they say they're versions
so might recognize came in 12 see they
say the versions 11 ago so easy with
much recognize but okay oh my juice is
it
which one is preferable to use listener
or DBMS a cue register in terms of load
on the DB well I'm not sure I can answer
that one I wouldn't know some long time
since I've done on the a cue yeah
the a toy will be bound there sir
that's quite a yeah yeah
I think the thing is it's a lot of it's
going to depend on how men having
messages you're expecting to come in
isn't it you know in terms of and what
the processing is doing
once you've DQ'd them size of message
number of messages yeah I I mean if
you've got something specific that
you're struggling with Rajesh we you
know the letters now we can perhaps find
out but I I don't have any general
advice on listener versus registered at
the moment mmm because josh is offering
this anything he's gonna give us an
example okay who's cool it's always
useful to have an example I'm trying to
think who the PM is for aq I'd and I
don't know I'd have to have to look that
one up there you know maybe something we
have to take offline
yeah immediately
okay and it's looking for real time D
queuing
so there's the the court is at the
callback listener as it called
I forget exactly and you can register
the PL sequel routine which DQ's them
and I would have to look it up because
it's not something I know off the top of
my head but that will read them
straightway yeah I don't know I don't
know it's too long since I did that yeah
so sorry about that Rajesh I think if
you you can submit questions to these
sessions in advance so you if you want
to know more details it's probably
better to give a kind of like a complete
example of exactly what you're doing and
what you're hoping to achieve then we
can or look at that how that goes well
then we go Anil is that p.m. pretty you
know Goodwin David yeah okay good
question that yes there's a good
question it's a cueing is a it's a
useful feature to help kind of separate
your processing you go something that's
going to take a long time you don't want
to make you force your users to actually
sit there staring at the spinning wheel
of death yeah for it to come up
okay well while we wait to see if
anything else comes in there so we've
got a teensy we can now get it on life
sequel and on on the cloud now so can't
wait so and I know there's something
something in your area that's good for
this
so we any significant changes in the
soap Webber's services in a teensy not
that I'm aware of
um have a look on the what's new guide
for a teensy I think is the thing to do
there so something I if I can find my
share screen button again I'd say we've
got a whole bunch of examples I in live
sequel so as I said eighteen sees out
but it's out on the cloud and for
engineers systems so I am appreciate
that a lot of you either aren't using
the cloud and don't have access to an
engineered system certainly not if you
want to do this outside of a work
environment so over on live sequel we've
upgraded this to a teensy and there's a
whole stack of scripts in here that you
can you you can play around with to see
some the new features that we got one of
which which i think is the thing a lot
of people are talking about is are
polymorphic table functions so yeah do
you want to give a quick talk about they
won't say something about those or do
you want me to I'll let you do I'm just
pretty trying to see if I can find the
soap stuff yeah no worries
okay so polymorphic table functions is
something that it's been part the sequel
standard the most recent release a
sequel standard I believe and what it
does is it allows you to dynamically
define cons in your output so you know
we mentioned the dynamic pivot you can
don't create columns but this is more
about a that you can also use this
and I don't believe or I'm not sure I'm
hoping we can use this to do a dynamic
pivot one day in the future but I'm not
sure it's possible in the current
release but as a little example here
what I've built is a way to take a
comma-separated list so we just skim
past that briefly we can see we've got
two comma separated values in the thing
here make that a bit bigger and we pass
in the columns want and we can see it
split those out and it does the same if
we got one two three four we get one two
three four columns and so on and you
absolutely can use this to do a dynamic
uninhibit so if you've got an unknown
number of columns that you want to
convert into back into rows there there
are examples I don't think there aren't
the not and live sequel and then they
might be in the docs but there is a way
to do that and essentially the
polymorphic table function has two
components to it a describe and a fetch
describe is mandatory and that says what
your new cons defines what the new
columns are going to be and then the
fetch although it's optional and you
probably all pretty much always want to
use it to set passive values into those
new columns define what those new
columns are so in here we can see we're
reading these new columns in I'm doing a
whole bunch of horrible substring type
stuff and that gives us our output and
finally you create the pipe blind rope
or table polymorphic function like this
and this is the one that you actually
call in your sequel statement so we see
we've got CS feeds columns there and
that goes in there and this here you
know notice is actually the table name
so we're really just passing a table
into the function it's reading the data
out of that and depending on what we've
done how we defined it it will then add
some columns removed columns and and
manipulate the output to do that so
there's various things that were
suggested in a sequel standard to do
this
you know dynamic and pivot is something
I mentioned a CSV two columns or
something along those lines but I'm sure
a lot of people out there are going to
come up with some creative and
interesting ways of using this and so
have a look and they say if you want to
fill around with eighteen see just see
what features are there take a look do
the search on the code library you can
see we've got a whole stack of scripts
available you can fill around try
throwing things unfortunately well it's
actually quite a few polymorphic table
function examples someone else has put
in now and yeah unfortunately live
sequel doesn't support external tables
which i think is one of a shame because
I love them a great way to read tables
you know files into your database using
sequel and also doesn't allow us to show
one of the new features where you can
have an external table on the fly so you
don't actually create a real table you
just do a select from external and then
define the whole table in your query
very very handy when you're trying to
build it in the first place quite often
when you're developing an external table
and it's not a straightforward CSV it's
use really fiddly to figure out exactly
you know how you've got to define your
parameters to get it to work and again
also exceptionally handy if you are a
date science or scientist or someone
else who regularly has to pass logs or
read other data from all sorts of who
knows what format and they're just
trying to figure out how to actually
extract anything useful out of it so I
think that's a great way to do that
anything else you want to mention on a
teensy Keith all those features I think
ETS is probably the big one yes I will
get around to looking you up a bit yeah
they say I'm I'm I'm hoping that there
will be a way to do the dynamic pivot
using PTF I I can't figure it out I
can't figure out if I'm just not spent
enough time with the feature yet or if
it's something that will have to wait
for a future release for yeah I need to
look at code I probably whether we have
the row reduction logic in there or not
here I need to know more
this breather so and we get into that at
some point okay okay then um so I
haven't seen any more questions come in
we've been getting close to the hour but
any plans to release Oracle for 18 sake
[Laughter]
I've no idea on forms to be honest we
I'm not the right person to ask about
that I don't know if you've got any
insight all right no thing that would be
Duncan yeah I don't know well I think
now we're moving to these kind of annual
releases and we believe we're supposed
to be doing it for pretty much all our
products and certainly the database
related ones so on the one hand I've not
heard about it and the other hand
whatever the next release of forms
happens to be probably would be 18 see
maybe 19 if it doesn't come out this
year for whatever reason
and but yeah no insight on that I'm
afraid no no
do backend stuff we don't do front-end
yeah exactly
I'm a data guy I don't don't care about
a user interface things like that it's
someone else's thought out yeah I think
if you can track down
Duncan wheels Duncan's yeah your forms
guru
yes that sounds right okay all right
then unless anyone else wants to ask a
question I'll wrap up briefly
so really hope you enjoyed this found
this useful whatever you thought of this
session we'd really like it if you come
back to the office our session and
somewhere on it there is the ability to
give feedback because we really want to
we want to help you we want to make sure
you can use the technology effectively
help solve the business problems improve
your skills get better jobs we're here
to help support you to get the best out
of the technology and help you have a
fulfilling career so we want to ensure
that these sessions are useful and
relevant to you and you get what you
want on them so if you register I think
you need to sign up first then you will
have a feedback box where you can go in
let us know how well have we done what
we could do better we've got a whole
bunch of other office hour sessions
coming up covering a whole range of
topics you know we've been about sequel
specifically but there's things about
security Jason multi-tenant and so on if
any of those are relevant to you find
them useful take a look please sign up
these are regular ongoing and if you're
stuck just drop into them ask us your
questions and anything you want to add
before we close out then Keith it's been
pretty useful questions all right then
well thanks for joining me Keith thank
you everyone for joining us on the
session I hope you found these useful
and we'll see you again next time thank
you goodbye</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>