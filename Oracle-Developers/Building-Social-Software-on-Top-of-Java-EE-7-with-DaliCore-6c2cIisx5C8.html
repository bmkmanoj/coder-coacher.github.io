<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Building Social Software on Top of Java EE 7 with DaliCore | Coder Coacher - Coaching Coders</title><meta content="Building Social Software on Top of Java EE 7 with DaliCore - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Developers/">Oracle Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Building Social Software on Top of Java EE 7 with DaliCore</b></h2><h5 class="post__date">2015-06-08</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/6c2cIisx5C8" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">my name is Johannes and I will talk
about how to build social software on
top of Java EE 7 using data core so what
is the mission of this session you will
learn how you can use the open-source
framework data core in order to
integrate social media concepts and
information into your java enterprise
applications when when we say how to use
open source framework that record that
means you can you can use that acquire
or you can use some of the IDS behind it
or you can use it as a whole it also
goes about enterprise applications new
ones or existing ones today we will
focus on Java EE 7 because we did some
effort last months weeks days this
morning to integrate some of the new a7
features into a dolly core I'm a bit
uncomfortable with the slides because
this is not a my laptop my laptop is a
Linux one that has no VGA and HDMI is
not working so I'm using another one I'm
using another laptop for presentations
but I can't use sorry another laptop for
the demos I can't use it for
presentations because it might catch
fire it gets to heat and really smoke
comes out of that laptop it it once
happened on a plane that there was smoke
coming out of my laptop I didn't feel
very comfortable and the guy sitting
next to me wasn't very comfortable as
well so yeah occasionally that goes out
when I have to start it up and so first
of all we've talked a bit about Java
Enterprise and social media then I will
introduce data core we talked about the
core concepts of data core which are we
will focus on the users the content
online account and we'll show some very
basic demos and then I will talk about
what I don't talk about and
we'll end with some implementation
details if there's something you want to
know just interrupt me and ask our
questions so Java EE 7 what what's the
relevance for source of software now
many enterprise applications they
require an enterprise infrastructure and
they take that for granted they assume
that the foundations of enterprise
applications are provided by the server
for example persistence transactions
messaging if you develop enterprise
applications you know that you don't
have to do this all yourself the Java
Enterprise Server is going to provide
this for you also scalability and
performance which are important in many
enterprise applications these are things
that are provided by the Java EE
standard and are then available in
application servers that that is
actually in many cases a different world
from the world where social software is
being developed it's it's changing but I
think about 10 years ago when when we
started at Lausanne doing projects with
social software many people and company
said well that that's nice to have but
that's not critical to our business and
even today most of the so-called
integrations that we see are isolated so
it's not that the source of software
projects that many big companies do are
integrated with their back-end it's it's
isolated and my personal experience is
that this is this is often due to the
fact that social software is run by
different departments in a company it's
often the marketing department that goes
on project using social software it's a
marketing budget that determines what
are we gonna do on Facebook or are we
gonna use a Twitter account and so on so
that's typically not the IT department
it's
it's really more marketing or branding
thing I think I should postpone this
restart
sorry
no no
so social software typically focuses on
the end-user the visitor of your website
project who were safe for four hours now
by then I should be finished so maybe
three speakers after me he has to be
reminded again
so the where's typical business
applications focus on the business value
social software focuses on the end-user
and it's often seen as yeah less
valuable for companies but I don't
believe that I believe that social
software can provide huge additional
value to companies and I think well
actually what I now just said is
something that I said a couple of years
ago when it was still unclear how people
could make profit from social networks
but I think today we are much more
comfortable because many companies many
developers see that there's indeed
additional value from integrating social
software functionality into your
existing software what's also important
is that if you do some integration with
with social networks like Twitter
Facebook and so if you are successful
you often require high performance and
high scalability and these requirements
are actually the some of the fundamental
requirements of the Java EE 7
specification also the functionality
that's often acquired like for example
Twitter and Facebook Google+ LinkedIn
they all have their sort of allowed
mechanism for authenticating users
let's also become a requirement in the
enterprise so there are lots of common
functionality lots of shared goals
between social software and Java
enterprise software so that's why I
think it's it's very valid to have
social software on top of Java EE now
how can you combine social software and
enterprise software in many cases
unfortunately it
still two isolated worlds so what you
have is a company with some enterprise
applications that eventually feed a
company website also some internet sites
but then they add some Facebook share
buttons and retweet buttons just by
using a JavaScript it's very easy to do
that if you go to Facebook and Twitter
but what what you then actually do is
you provide Facebook and Twitter with
information and not your own application
you don't link it with your back-end
and your back-end is not influenced by
by this application so this is this is
more loose coupling that works fine but
I think if you do this you lose lots of
the potential value so the other way to
combine it is integrate it and instead
of using the Facebook and tweet buttons
you can use the API and doing so your
back-end can leverage the power of the
social networks which which is the large
amount of users the data and the
interactions available there and I think
it's important to to realize this
because years ago we saw projects where
you had well roughly speaking two types
of customers one type that said I just
want the the JavaScript integration and
the other type of customers that said I
want to do everything myself I want to
create my own Facebook so users cannot
log in to your Facebook Twitter but they
have to register here and they can make
friends here and they can share their
timeline here and other on social
networks but if you do that you lose
lots of the information that's already
available in social networks so in
general I think
strategy the best strategy for many
applications is that leverage the power
of social networks leverage the fact
that many people have a large network
but keep the Edit value inside your
business application don't don't give
that value just for free to Facebook
Twitter Linkedin Google+ not that they
are able
so if there's anyone here working for
one of those companies
it'sit's it's fine but they have they
have they have their edit values as well
so if you develop an application for
your company try to keep the Edit value
inside but leverage what you can use
from the social networks so Dalek or
some history with my small software
company la Jong we we are creating
social software for for ages and we
always we did it because we liked it and
because we most of the projects that we
do have something to do with social
software so what we did was we saw that
there were some some aspects that were
always returning and we wanted to to
provide a yeah standard service for this
data core is heavily integrated with
Java EE 6 and 7 so the repository that's
currently on java.net is realized on
Java 7 6 sorry but we have migrated
version let's I will provide a link at
the end that's using a Java EE 7 and why
do we do this because many of the things
that we require as I said before
persistence transactions messaging
should be scalable and so that's
something that you don't want to develop
yourself you can use existing
application service for this also we we
try to contribute back to the community
we're using the GlassFish application
server that comes for free it's
extremely useful because it's related
specification it's a it's not only for
development it's really production
already mature scalable system so I
think it's it's always good if you can
contribute something back
so we've Dali Korell we had some some
lessons that we learned we had some bugs
that we found example in different parts
of GlassFish and we we found them maybe
we send patches we're also working on
the websocket api so it's part of well
give-and-take you get you get glossy for
free so either you give money back or
you give time back in an our case we
give time well an experience back dalek
war is actually the result it's mainly
influenced by the mistakes that with it
I want to be almost on this so I'm a
developer not another market here I'm
not going to tell that this is great
because we spent so many many years in
this I rather think this is good because
we already made made lots of mistakes
and by by building on your mistakes you
probably hopefully won't make them again
so one anecdote that I can share is that
one of the first projects that we did
was a we had to create the dating
website and so we did it that went fine
I mean we had lots of issues that we
could solve but we had it then and then
we had to after that project or world
that was still running we had to create
a blog site for a political party in
Belgium but they want to be they wanted
to be very open so they wanted that
users could comment on blogs and users
could be friends of other users they
could send messages to other bloggers
you could read what other people blocked
so we thought that's more or less the
same requirements as a dating website so
why don't we use the core of that dating
website and that's what we did but then
while during development we try to fail
fast so we throw exceptions and let them
propagate to the user interface just to
it we do know what happens and when this
political party was working with it for
the first time they were showing it to
their president and he did something and
somehow he got a nullpointerexception
that never happened again but he got a
stack trace and the first line of the
stack first set dating users local
could not retrieve with ID so dating
user local bean that was the name that
we had in the dating application so this
this high-level politician was a dating
user local bean for the those of you who
still remember Jah Jah j2ee 1.3.1 dating
user local been used contain immense
persistency entity beans horrible but
many mistakes and I think it's it's I'm
glad we made those mistakes we have lots
of fun afterwards so some examples on
what on the projects that we do using
data core for example a musicians
community in version where bands
organizers can meet with each other
organizers can create contests bands
should submit audio tracks and the best
one the organizes decides which one can
play at a at a concert its bands can
also you can also become a fan of a band
and so so that's that's an example we
have cultural projects where people can
gain points if they attend cultural
events and if they share this
information on the social networks media
projects where the publisher want to
track which information items are
heavily used combination of Google
Analytics Facebook Likes Twitter
retweets and so on and then create the
most list so that every logged in user
gets the best of his content at least
what's the system thing this matches his
interests best and then a voting advice
we do that quite often when there are
elections in Belgium we're a difficult
political country so there are elections
every every couple of weeks almost so we
got lots of experience there as well
what people can do there is they answer
a few questions they can compare their
answers with those of politicians and
the end of their peers at a Facebook and
then they can see you match this person
best this this friend or this politician
and so just to give some numbers because
when we talk about enterprise software
at peak moments when it was in national
broadcast we saw 20,000 concurrent
visitors and that was Google Analytics
who told that in total servers completed
by one and a half million people the how
do you how do you get so many people
well where are so many for probably for
the u.s. one and a half million is not
it's not that much but in a Belgium it's
a I think it's it's forty percent of the
target population that's allowed that
was allowed to vote for this election so
it's quite a lot so I think it's
important the initial traction often
happens via traditional media so it's on
the national TV or in the newspapers and
then what you should try to do is make
those initial people who submitted make
those shared via the social networks and
then the organic life will automatically
pick up so that's that thing causing the
long tail so initial boost on the TV and
then the network's the viral aspect will
make sure that you will keep getting
visitors of course from point of
operations this initial boost is always
exciting but also to give an idea these
20,000 concurrent visitors and they were
all using every request did at least one
database operation we managed to do that
on a single GlassFish instance on Amazon
actually to be honest we had two
instances behind the load balancer but
the load on those was never more than
50% so one instance would be okay but
just for our blood blood pressure we
have we prefer to have a spare instance
so this is screenshot of the musicians
company company a project where we don't
have anything to do with the content but
they can add contests they can add new
bands so it's all this is an I think an
angular website that uses West goes to a
back-end that then use
dollie core so the architecture we have
a clear separation between the dahle
core API and the implementations why is
that we saw that the internal
implementations or often evolving pretty
fast but our applications using data
core was typically a project or projects
typically spend weeks or years so we
want to provide the project with the
latest version of Dali core but we the
with the most bug fixes and enhancements
and so but we don't want to break
backward compatibility so we made the
distinction between API and
implementations also because we have a
number of implementations and I will
very briefly if I have time unless if
you want to hear more about
implementation I can spend more time on
the implementations but we have
different implementations and you can
combine the modules so that you have the
best implementation for a specific
project so storage and search is
something that that we provide a number
of implementations for I will come back
to this again so first of all the user
which is actually the core concept of
Dali well um data is actually the core
concept of Dali
because Dali means data and links that's
where the name comes from or and to be
honest I really forgot it we had a
project long time ago where we wanted to
leverage the Amazon Web Services so that
people could review books buy stuff and
so on Amazon and we called it the Dutch
Amazon lovers initiative or short dolly
I don't know did did we renamed alley
after dolly or dolly after dolly I
forgot so the user which is the I think
the core concept it's actually a pretty
small class but it's extendable clause
of course it implements the Java
principle because we want to use it in
out authentication and so and it's it's
simple it used to be bigger but we
removed most of it because we really
want to be project agnostic so why does
it have done a first name last name
screen name and an email
well that's these are things that you
often see in social networks that's also
political neutral and religious and it's
not about religion we don't have a class
we don't have a field gender and why is
that because I know some people are
offended when you have a field gender
and if you if you track some public
mailing list about why the social
de-esser was folded down there was a
comment from the London jerk about
gender should not be part of a
specification because it's some people
don't know their gender or don't want to
you can't have male or female because
you can have 30% male and 70% female
that's all very interesting but I didn't
want to have this discussion in our
software so we don't have gender as a
basic field but again it's extremely
easy to extend this yeah maybe I should
go back to this API slider first you see
the API is split in two parts first we
have the entities and the core entities
are the user the content group
permission and the online account then
you have the services which is actually
what you can do with these entities so
the user service describes it's an
interface what you can do with with a
user not everything is written here I
didn't know how how small the font size
could be while being still readable but
you can as you can see you can create
the user update you will set this
password and then you have lots of
relief methods for get user by email
validate is a new ID and password find
the users of by specific type and search
users so that's a that's the user
service now what you can do with it
I will briefly show an example now the
fact that I showed that I talked about
projects that we do if the aalikoya
is to try to convince you that you can
do real-world applications because if
you're going to look at the samples that
I show now the those are so basic that
you might wonder can this work in
real-world applications but yes it can
but I think it's important to explain
how simple the basics are okay I had to
check that that laptop was not died
dying yet so we will create an
application a web application that we
will deploy in a glass container it
contains a simple JSP page with a form
and then a rest handler that will handle
the requests and delegate them to the
Dalek or services
so here is the deployed web application
I will first show it so it's a simple
web page you can create a user and you
can log in but since I didn't create the
user yet I have to create the user first
name your home that's my email and
that's my password so I create this user
and it's gonna it's gonna be created so
this is the return page when I go back
and I login oh whoops
yeah non-unique result so I tried this
this demo before I came here and this is
just a demo so I have to I create the
two users with the same name that's not
an issue with the new use of your own
couldn't arrive to email addresses so
that that's the good thing about test
all your demos before you go live and
then you go live and then your database
is not empty
yeah that you yeah if you if you use the
email address as a primary identifier as
I'm doing this application it should be
unique that's a that's that's part of
the yes yes in this case it should be
unique number password so that's okay
now I'm not sure about the email address
that about the okay password that I
entered but apparently yeah that's
that's correct so I will show the the
code for this oh yeah by the way this
application is using GlassFish and I'm
using the Derby Derby Derby database
I wouldn't recommend using this in
production but it's for demos it's a
it's perfect it's it's running on
localhost you clear it by redeploying I
should have done that actually before
showing this but okay that's a that's
what what yeah what you can use just
during development
the demos that I'm providing here are
going to be part of our Gupta's 7 demo
repository on github I will show the
link later so this user project as a
simple application file where we
register this is a rest application it's
this is a texturized tool that we use
here this code is actually generated by
NetBeans so you don't have to do
anything here and I have the user
handler so what happens here when we
create the user this method is called by
the HTML form and we pass the name email
address and password what we then do is
we create a new user object in this
application and using maven we reuse
that occur by injecting it via maven so
we create a new user we set this email
and screen name and then we call the
user service dog create to create a user
and then we set the password of the user
to the created password and then our
user is made persistent in this case
it's in the Derby database so how do we
get the user interface the use of
service sorry that's easily done using a
injection so that's a that's one of the
things we support user service is
actually in a stateless session bean so
it can easily be injected so that's
that's the the most basic example on how
to create the user and how to retrieve a
user
so if in some projects the people really
want separate user accounts that are not
linked to social networks and so and
they want the own user database in other
projects and actually yeah in in other
projects people don't want to have a
separate user database they just want to
rely on what Facebook and Twitter and
LinkedIn and Google provide them I think
it's pretty risky because if those
companies change their terminal services
you can lose all your data and actually
it happened at least with two major
Belgium media companies that they had a
page on Facebook and Facebook closed it
for some reason of a violation of terms
or whatever and for those companies that
was a very big loss so it's I think
pretty stupid if you really if you only
depend on Facebook and Twitter
so they went complaining then but yeah
if if you give your data to someone and
you don't treat the terms and conditions
and then someone takes away your data
and or doesn't show it to your users yet
yeah that's that's very risky so today
what we see in most projects you want to
combine the information in the social
network with the sort with the specific
information in your project so that's
where the online account comes in the
dalek or online accounts links a user of
a social network with a Dalek or a user
so if you logged in if you log in using
Twitter Facebook or whatever what we
then do with Alec or is we create the
user unless you are already a Dalek or
user so there's some logic but for new
users we create internally a user object
and that is then linked with the using
the social network there's one resource
class in old Alec war and that's a
social handler and this one is required
for facilitating the authentication flow
between the social networks and your
application and I'm going to spend some
time on this one
it's I think one of the most important
parts of data core although it's most of
the value of data core is about what you
can do afterwards after you get this
user for example you can get his his
data streams can be tweets can be a
timeline and so you can use it for
posting things on the social networks
you can do many more things but getting
coupling this user with the social
networks is think quite important we
have building support for a Twitter
Facebook Google+ and LinkedIn
authentication but it's extendable
because if you inject an own external
Network locator you can provide your own
external networks and provide the flow
for those external networks for the
authentication now most of these
networks are pretty simple and they they
are you all using well more or less or
out one based protocol and-and-and-and
important to know they might change it
and they do change it every now and then
like for example Twitter recently change
that there so they deprecated the 1.1
authentication callback so maybe if you
wrote applications that depends on
Twitter you probably noticed a couple of
months ago many application didn't work
anymore because that a hard code 1.1 in
the API okay
so Java code it says so I will show Java
code
are there people here that attended the
the session about the authentication in
West Jersey okay because that's a it's
quite important Jersey which is the
reference implementation of jax-rs
now also provides all out as an
extension and as of Jersey to adopt 3.1
it provides the authentication flow as
well so that that was really a helper
for us so but because that's I think
it's only yeah it's less than one week
now that it this is a available in the
repository it was tricky to implement it
but yeah we did it so we're now using
the four out support in Jersey which is
available in GlassFish let me show the
online account which is in a package
Dalek or in the module Dalek or source
will connect
entity
online account contains information
about the user which is the the Dalek
world user and it has an external access
an external token which in this case is
the access token that's given to us by
well link it in facebook whatever it
contains information about the network
and what's the account ID there so this
is really the glue between the user in
your application and the user on the
social network the authorization flow
and maybe I have to show this a first so
we have a slightly enhanced version of
this first user creation demo as you see
this is actually what we had in the
beginning but now I have this button
here below login via Twitter and this is
what you see in many projects so don't
create a separate account but log in via
Twitter so if I click on this and if the
network works
I got redirected to the Twitter
authorization page so this is actually a
page at Twitter so what we do is we we
know the or we construct the URI for
going to this page and we show it to the
user I'm already logged in a Twitter on
this in this browser so it recognized me
and it will ask do you allow this
application to and you will see this
this bite by default we will ask these
permissions so actually quite a lot the
only thing is we're not going to see the
password so if I authorize this app or
Twitter then this is it will call back
into our application and well actually
it is going to call back into Dalek or
Dalek on is going to create the online
account if there's no user associated
yet it will create a user and associate
it with the online account and will then
hand back the control to your
application so I'm logged in now using
Twitter so this flow which is
facilitated by the by the single
resource that I set that's in
decor which is a Dalek or social handler
it's exposed as a puff Dalek or social
one of the methods on this Interphone
this resource is connect connect with a
social network so if you combine this
information with what you saw here if
you go back yeah you see the it doesn't
it doesn't really fit the can I copy the
URL copy link location I want to show it
without visiting it actually yeah so the
big whoops
trying again
the beginning of this URL is
localhost:8080
twitter which is the name of our
application rest which is our rest up
off then we have data core source of
slash connect slash Twitter and we
provide some callback information so if
our application calls this resource this
method will be executed what happens
then is we set some parameters on the
session because we want to maintain some
states not going into detail now we look
up which external network that we want
to connect to this one will then also
look is there an external network
locator that's injected
application-specific blah blah and we
will then create the unique
authorization URL for this request which
is which is done here get your and we
will then redirect the user to this
using standard checks RS calls
response dot C order and then the new
URI in our case in this case we will use
the Twitter external network which is
provided by a dolly court and what's
what's happening here I think that's
that's quite important and that's very
good that that's now standard of in
Jersey we use the Jersey or out
authorization flow in which you can
provide the using a building API you can
provide the URL for getting a request
token
an access token and the authorization
page for the user spending time in how
the OAuth flow works is it's comma it's
gonna take too much time so I'm gonna
skip that but keep in mind that it's
easy because it's easy if you use the
alecour because we provide it for a
number of networks and if you have
another network Jersey checks us to
reference implementation will facilitate
it for you so if the network calls us
back it's again the content handler that
will get the call that will be called
back sorry content and that's not right
the dahle course also handler that will
receive the callback this one is then
going to
get the callback information to the
network specific implementation which is
here Twitter Network and this one will
then be asked to create the Nexus
stoical again we use Jersey here for
asking what the verifier sorry what the
yeah what the access token is we will
create an access token in Dolly core and
we will then create the online account
in the alley core which is yeah which is
done this is internal data core code
just to show how the online account is
created in this case if there's if it I
wasn't using yet we will create a new
user and link it with the online
accounts so that's actually the core how
the online account works and that's a
very basic class but it's I think one of
the most important classes if you want
to connect your application with
existing social networks
okay the second most important class in
hopes
the second important class in a Dalek or
the content class
so actually users in content or the
foundation of most of the of the social
networking applications with and I will
cover that in things I didn't cover
groups and permissions being important
facilitators so our content class again
very extendable contain some basic
fields string title string content in
score and then contains you can also
have type fields we have class type
which is which provide the extend
ability
I'm not going into detail about this one
but this is something that's heavily
used by the implementations because you
can have a user with custom fields and
you still want if you search on those
fields that this is going to be
performant so that is something that we
we really optimized in the
implementations again it's all open
source you can see how we do it but
that's that's one of the things that we
learned we have a very simple generic
content class that's extendable but if
you don't optimizing the implementations
it's going to be slow if you want to for
example if you want to search on
properties that were not originally part
of your design a third we have some
relational fields and those only two
fields but those those are very
important because they they allow you to
create the links and as I said in the
beginning
dollie means data and links and it's
actually the links that make the data
more valuable so if you have one user
and one content one plus one is trade
the user is the content and the link I
didn't think about that before but that
that that will explain me in the future
explaining why one and one is three many
many marketing and sales people use that
but now I can technically tell why this
so the author of content is always a
user and the content also have a parent
field which is over content you don't
have to use it but you can use it and
that field allows you to
ever here we go again hierarchical
representation of your content that's
the the most difficult words in English
I think hierarchical content service
yeah I had even smaller font size here
because I wanted to add more
functionality of what we provide again
you can create update delete content you
can't set the password content and you
can retrieve it there are lots of things
that we support out of the box or the
most important method is almost at the
bottom you see find by parents or you
can find content by parent and search so
you can where we have search problems
which is a class that allows you to
define search parameters and it's it's
more or less criteria build of style so
those of you familiar with the JPA
criteria builder you'll find it very
they will recognize it so lots of
functionality also on this content
service and in the demo that I'm going
to skip now because the next demo adds
more value and I'm running out of time
otherwise we could we will show in the
next next demo that users authenticated
users can create content they can add
comments to content and they can delete
content if they are the author of it and
not if they are not the author of it we
use different types of content for
example a root content we will give that
5 1 and comments on content we will give
that type to will show that immediately
but we are going to combine it with
voting because voting is also quite
important in social applications now
voting and reputation management is
extremely important but it's extremely
hard to standardize and we're not we're
not there yet
with with our internal and external
discussions how what the best what's the
best way to add reputation management to
an application so
as always when we're not sure about
something yet we we don't do it we leave
it up to the implementation to decide
what to do with votes and so on so what
I will show now is a very simple way of
voting in the content that can be
created as I just explained users can
also vote an every day vote on content
they actually also vote on the author of
the content so that way the most popular
order can will receive the most votes
and you can do something with that now
that's the most simple way of doing
something with voting but it's I think
it's it should show you that you can do
much more and we will provide the next
versions we will we're working on some
reputation manager interface and
implementations can be injected so with
different policies but that's can become
very complex so I wanted to show that
the basic principle is actually very
simple
so first of all going back to my demo
vote again now that I'm used to a
Twitter find it's it's much more
convenient than thanks for eating
accounts oh look I didn't clean my
database so we already have some
information in there I can create some
new content
okay and you see this is a here at the
bottom there are no votes on it yet you
see that I have a delete button here
because this is my content well this you
might think it's also my content because
author has the same name but no this is
a different this is a different user so
I can't delete this I can give comments
on this one
and I can delete the the comment I can
vote on this content and you see that
the content the tray here means this has
three votes and the author also has
three votes all right I agree it's very
confusing that I always use the same
names for my demos but if I add another
message
another title another message
which appears at the bottom no votes yet
for for me actually in a good demo I
should now log out and login as an other
user but I have only one Twitter account
and I don't want to create other users
again so you see that now this message
that I voted on has one point my order
is also one point now it's also shown
here because I'm the author of the
content and this comment has zero points
so that's very easy and the
implementation is also pretty easy
maybe I first have to show the content
handler where we created the content
it's again it's a very simple HTML form
you want me to display the HTML for ya
that might be I didn't show the HTML yet
I didn't make that myself but I imagine
this is the HTML that allows you to
create the message as you see there is
no rocket science not even science
behind it but it's a form with action
West content create and it will then
call the Creator handler in the overview
page where we'll where you see all the
content and where you can vote you will
most likely have a way to go vote note
that here we use JSP expression language
for checking for doing some some checks
for example if is the user the currently
logged in user the same as the one who
wrote this message then we're gonna
allow him to delete it for example this
is a this is because we're using a JS
piece here but it's you can use whatever
framework that you want actually most of
the time I'm using JavaFX as a front-end
and then I'm just talking rest with the
with the backend so back to the fault
handler okay so if someone votes on
content what we gonna do is we're gonna
retrieve the score of the content and
we're gonna add one to it we're gonna
see who is the author and we're gonna
add one to the score of the
as well score is a is a core field of a
author sorry of data of all data users
and content so no no no rocket science
very simple but you can do much more
powerful things of course so finally
what what we didn't cover it's as I said
the content has the field parent and
that's good for a 3d representation I'm
not gonna repeat that word again but
it's it's not good for graphs where one
content can have multiple parents we
deliberately chosen to to have the
parent field one by many relational
fields because that allowed us to do
many optimizations and that served most
of the use cases in case you want
multiple inheritance multiple
relationships you can use the group
constant concept that allows many many
couplings all the entities are
extensible via fields didn't cover that
as well and permissions is also
something that I didn't cover but that's
very important and I think yeah well a
reasonable amount of code for projects
that use data core goes into permissions
because you can assign permissions to
code to content users and groups and
data code does not define a permission
policy but it will it will make sure
that whatever you define is gonna be
it's gonna be yeah that the code adheres
to the policy so for example if you
wanted to policy that only uses that
create that users should be in a given
group in order to be able to delete
content you can create content
permission of type delete and assign it
to this group or user so there's many
things that you can do with permissions
I didn't cover it because
it's it seems that it does not add value
because it removes shall you because you
can't do some things also what I showed
in the voting demo that was not using
permissions that was just a dirty check
in the HTML for seeing should I allow
this user to vote or not to delete this
or not but if you really want to do this
in production you will have to use the
permission model we also didn't discuss
the content integration before social
networks because the external network as
we explained it we showed how you can
use it for building the authorization
URI and doing the authentication flow
but you can also use it to for example
post content on Twitter and so on or for
example I think we implemented the the
job API of LinkedIn so more deeper
social networking integration is
provided by the external Network
implementations of or for example get
get friends get Frances is one of the
most important things because in most of
the projects that we do where people are
allowed to log in using their Facebook
Twitter credentials or the customer
often wants is that these people post
something back and invite their friends
to come to the project as well because
that's the viral part of many social
networking applications invite your
users to do something and then let the
users be the best marketeers for your
application let them write something but
make sure that if they write something
about you that there's always a link
back to you because if you do not
provide that then users will probably
tweet about it or whatever but you don't
control it then very briefly about some
of the implementation requirements so it
has to a Dalek or had to be for most of
the applications extremely performant
and scalable because you want to scale
out you want to be able to add servers
without having to change the
architecture has to be modular and
one thing that I didn't cover but if you
saw some of the methods in the service
is that sometimes you saw application
key in there this is our actually our
multi-tenancy hook because many projects
that we saw wanted to share some
infrastructure but had a separate
isolated database so to speak well they
didn't want the physical database but
they really wanted to have isolated
containers isolated applications and
that's why every entity in the record
has an author has an application key and
all the implementations make sure that
only that content with one application
key cannot be mixed with or retrieved by
a user with another application key and
so so that's virtual isolated to a
storage it also allows for
implementations to to optimize so you
don't need $20 core instances for 20
small sub-project of one project then
finally the internals so for example the
user service implementation requires
some storage capabilities and some
search capabilities in our initial
versions we always use the JPA you have
a persistence api which translated our
grants to sequel which worked very well
for most cases but then you saw that if
you really want to store lots of data it
might become slow I think the pinpoint
yeah I typically say once you have 1
million rows in the table it often pays
off to have a well-know sequel or less
sequel datastore so we have
implementations for Mongo so we added
that as a as a as a module what we then
saw was ok storing and retrieving data
is fast but searching data was becoming
slow if you have really lots of entries
so therefore we implemented three
different flavors of search one still
using a JP a sequel another one using
Mongo and the third one using elastic
search we have a fourth one using so
as well that's actually yeah much it
really looks like a
elasticsearch as a user of Dalek or
you're not confronted with these
internals because it's shielded by the
user service implementation that's a
stateless stateless session bean so that
scales very well so you can have
different servers with use of service
implementations so you can scale data
core by putting it on different servers
behind the load balancer there's no
state in the service implementation
itself and it will then connect to the
right user storage and the right and the
correct use of search and those
implementations were especially Mongo an
elastic search they have their own ways
of scaling so you don't need to do
bother about scaling not for the storage
or the searching or your own
functionality if you want more
information the as I said the Java EE 6
based code is still on java.net but
we're working since a couple of months
on having it on a Java EE 7 the it's
probably a bit gray but can you read the
well in case you want it then you can't
find it the Java EE 7 based snapshot
which will soon be we're gonna we're
gonna put it in a probably big bucket
but you can download it now all the
sources there but the project doesn't
exist yet it contains yeah it's it's a
snapchat actually so you can you can get
it there the examples that I showed I
will I will push them in the A+ Aaron
Gupta in case you don't know aaron Gupta
he's a Java evangelist Java EE
evangelist at Oracle and he wrote the
book excellent book about Java EE 7
essentials and has this repository with
lots of samples and we're going to put
the these samples as source of samples
in this repository my twitter handle at
your voice and you can contact me at la
john welcome and I'm open for questions
and if there are no questions I'm still
walking around on the java one or you
can contact me offline whenever you want
sure
well it depends if so if you have one
arrest interface that's going to be used
by the different projects what we
typically do is once once well the
different projects then typically have a
different entry interface which is a
different web page for example the
musicians company website that I showed
they have six or seven our projects but
each with different entrance and when
they make their first call we see that
what we don't have an application key
yet and then the the portal or the first
web page provide an application key and
if there's no application key yet we
believe that it is that one and we put
that on a session and the next all next
requests should have the same
application key or they are not
authenticated but that's that's that's
an internal policy so you can you can
have your own policies on it but that's
how they wanted to use it and well even
then in case someone tricks with the
system and he thinks okay now I have a
different application key still you
still need to to authenticate themselves
so a user that lives in one with one
application key in one databases to say
won't be able to login so if I provide
the wrong application key I also need
the credentials of that storage to be
able to to log in there so you can't do
the worst thing that can happen if if
you hacked the application key is that
you will get a user not found exception
or so but you won't be able to retrieve
content or users if you don't have the
right credentials
but again this is a there are many
things that are left to the application
to the to the to the project that is
using a Dalek or so we have our own
cloud-based version of Dalek or where we
have rest handlers for everything in
front of it and there we handle the
multi-tenancy as well so I can I can go
into deeper detail but that's that's
yeah that's a that's just our lodge own
specific way of implementing it so that
we are not Dalek or specific Dalek or
tries to make everything possible but
not implying how it should be done okay
running out of time apparently so
thanks for attending</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>