<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Create Elegant Builds at Scale with Gradle | Coder Coacher - Coaching Coders</title><meta content="Create Elegant Builds at Scale with Gradle - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Developers/">Oracle Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Create Elegant Builds at Scale with Gradle</b></h2><h5 class="post__date">2015-06-02</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/fsUky0_39OQ" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">okay good morning welcome to the
presentation creating elegant builds at
scale with cradle my name is hands
doctor i am the founder of the cradle
open-source build platform and also the
CEO of great aware company behind the
Gradle open source platform so the
process of soft reproduction is
currently in our experience full of
inefficiencies so and the feedback
cycles are too long the decree of
automation is too low the quality could
be better and the time to market is too
long that that's a pattern we see we see
almost everywhere and and developer
productivity is low and it's and that's
the reason why yeah it's also often when
you work in large teams not so much fun
to develop the software as it could be
so and i'm not talking about small teams
here right I'm talking about teams 30
people 50 people hundred people thousand
people right this is where we see
serious pain and at the same time we
think we are now at a time where where
where the tooling and the thinking
around how you can make software
delivery is more efficient is a is
really prospering so a lot is already
available and a lot more is to come but
nonetheless this is the situation of
today if you were built master with a
larger team this is kind of how many
people feel so and it's always
interesting how people can get
accustomed to pain right you could be an
optimist saying well some eyesight is
left what is your problem right I can
still breathe with one nostril but so
even if you're just getting by today
right the future will give the octopus
even more arms and for two major reason
one is the code bases are crawling in
size like crazy we are involved with
many organizations
they have a growth of ten to twenty
percent per year others have hundred
percent per year really large
organizations so that means if you have
serious problems now just the sizes of
the code base in four years will kill
you buy them right the other reality we
are seeing all over the place is the
modern enterprise software stack is it a
genius right what was a Java shop five
years ago is now usually at least java
android iOS and that adds a lot of
complexity especially those components
are connected they form a logical part
of software it's not that they don't
have anything to do with it with each
other and then you have some scholar
here native code there of course
JavaScript so so this is the reality
five years ago hitter Regina software
stakes were more considered like legacy
burden we still have some native stuff
around what you're seeing now and what
will be the situation even more so in
the future is that this is the reality
so you have to fully embrace hitter
virginity and yeah so so i think we are
at the beginning of a software
resolution when it comes to producing
software similar to what the chi
industry has seen in the 90s with the
introduction of reproduction so although
in our experience most companies don't
have a very efficient production process
there's a handful who is different and
LinkedIn is one example so they have now
thousand software developers working on
one on one software platform we all know
this platform go I guess use it very
often infrequently so in 2011 they had a
solid capability of releasing every 30
days so a thousand developer team maybe
at that time it where 700 doesn't matter
a large development teams being able to
ship the new version of the software 80
30 days is decent even by 2014 standards
I would say right so and this means when
a feature was finished it took 15 days
for finished feature by average to reach
client so what LinkedIn is now able to
do even with a much larger code base is
there now able to do two releases per
day which means the inventory term for a
new feature is half a day they have
decreased the inventory turn by a factor
of 30 this is this is a revolutionary
metric right think about thing about it
think you're now competing with LinkedIn
good luck right so so many companies get
away at the moment with a very
inefficient production process because
the competitors are not doing any better
right but I think it is a unique chance
to get a competitive advantage in
getting your features out to declines
much faster shipping higher quality
software and there is a significant risk
if you don't invest because your
competitors might do so right and and
you get inspired by the feature of your
competitor and whoever is faster right
will win this game so to share you an
example on the other side of the
spectrum we were involved with a company
300 developers half of them in India the
other half in Northern America they were
shipping an ear one in your file it took
six hours to build this efi right so
what does it mean right it means you
have cheering one built run many many
commits right entering version control
so let's say after four hours a test
fails right so okay we fix this let's
start to build a new the problem they
were then having well there are 80 more
changes now in a code base where the
likelihood again was very high to break
the bill so they were saying oh we doing
continuous integration we are doing
modern software development the reality
was the way continuously integrating but
never able to ship anything right so QA
was freaking out say hey where is the
next version we can do some testing they
introduced scrum big things from
training for everyone how can you
describe what you can't get feedback
right that would they weigh in
sastre state and now imagine with the
time zones right how often did they pray
something in the US yep people in any of
them couldn't fix because they were not
involved with that change so we have to
wait for the next day and so a scrum
didn't work what was what is the wood
and then then it's the the final the
pattern of desperation to get anything
working is then freeze right freeze that
that is the only thing they could they
could do they could say everyone stopped
working up every two weeks at least we
need to get out a new ear that someone
can give feedback and it also meant that
all those features what they try to
avoid with scrum we're piling up so in
Cuba end and that that meant after those
kind of two weeks freezers they had to
do another long freeze for shipping
something to decline an enormous time
pressure right so they couldn't develop
software the way they wanted to do
because their production technology what
was not supporting this right so and
then the fun continued the quality they
were shipping was not good enough they
had some very powerful client so the
client said we don't want to upgrade to
the newest version we got burned by that
but I like some of the new features of
the new version can you back for this
and then they ended up with 15 customer
specific branches it's a 15 year old
code base so this company is on the
brink of collapse on the Pring of losing
the capability to ship software what
they do for living right that is the
other end of the spectrum right and so
we got in there with Gradle they could
make significant progress in regards to
the build time and a feedback cycles so
situation has improved but for them it
was was a question of survival so
another thing because this is about
cradle right is when we when we talk
about elegant built at scale we're
talking about a larger project so this
is a conservative domain right you
people don't introduce the
a new technology for producing the
artifacts for you know making all the
exposing exposing it to all the
developers easily right so so for us
showing the momentum of the Gradle
technology is very important because
it's a super important decision metric
for many organizations whether they
should introduce the technology or not
so that's why I want to talk a little
bit about that before i come to the
cradles very great of specific stuff so
uh whoops what's going on here ah yes so
two million is the number of downloads
cradle hat this year right so super
exciting number from Java from Android
also / native teams and we released
every six to eight weeks right so that
that increases the downloads but in any
case massive number of downloads so if
you look at google trends like this is
what google trends says about cradle and
how much activity creator related
queries have a Google right at the
Google search engine so this is a
tremendous momentum if you compare it
compare it with established other
technologies let's say Cloudera right
you can also see the substance even if
you compare to our dupe we're not at a
group level but we are at thirty percent
of her to write so super exciting
numbers for us so in the matter of books
is out there with more and more
basically every every six month there
was an interesting a survey from the j
rebel folks asking what technologies are
developers really interested in and then
cradle was the technologies from all
four all java developers they've asked
across all developer related tooling
where where people were fifty eight
percent of all developers said we are
interesting learning more about cradle
right so another interesting number is a
load or nets are called i think open up
it's really interesting platform to
learn about open source project so I
they basically have a day analyzed
frequently the whole spectrum of open
source projects in the world ranging
from chromium
seller to cradle two very small projects
and and analyze the activity and the
trends they can see with those projects
oh so cradle is very high activity over
the past twelve month reate developers
83 developers computed in equal to
cradle is one of the largest open source
teams in the world it's an upper two % %
percentile and yeah 164 developers have
contributed and this is just for the
cradle course so that means it's a super
vibrant community behind Gradle it's not
just the folks from great aware and
we're just talking about the poor here
we are not talking about all the
external plugins contributions we get
which is tremendous the plug-in
ecosystem for cradle so last slide on
that so many many people many many large
organizations use greater link in fully
switch Netflix fully switched we have a
partnership with Google around Android
orbits many financial institutions so
many many organizations where where we
have n das with and so on and so on so
so its massive adoption in the
enterprise specifically for the reasons
that I'm talking about today builds at
scale right so okay let's get started so
one ingredient we edit so that that the
complexity of bills can be captured by
better much better is the concept of
components and variants right so and in
the multi-platform reality of today I
want to start with an Android example
even a simple Android app has a much
more complex workflow then a Java right
sugar so the scalability problems for
the Android folks start even earlier
than for the Java folks right this is
the workflow for building you know a
simple Android hello world app maybe not
all not all notes get triggered it
depends kind of what what what are you
exactly doing but in any hour in any
case is a lot of complicated source code
generation it's it's it's a multiple
bytecode transformations and
signing of the packages etc etc so it's
a too complex domain now I want to show
you how a typical typical ingredient
with cradle how you deal with that
complexity ok that's just mirroring so
so let's say you want to build an
Android application right so here we
have an Android application it's called
very basic unfortunately I can't
increase the font size on the tree view
only on in the editor and so this is a
very basic android application right and
here's the application directory we have
sources right we have sources to test
the android application and the sources
that make up the actual code of the
android application and how do you how
would you build that with greater right
so to give you an idea cradle has a has
a low-level layer so you can you can
start end style adding tasks to this to
this to this right for example task
hello right and we can execute this task
we see hello world right no applause I'm
you are a very demanding crowd so ok so
there's this low-level execution layer
that is really handy if you want to
extend things but the real way to build
an Android application is to check Radel
hey I have an Android application bar at
the end roid plug-in maintained by the
Google Android team and you specify a
couple of a couple of properties some
you know beautiful versions and Android
SDK you want to run against and then you
can refresh this few and then now you
there's a lot of stuff you can do and
you see the complexity of the workflow
right all these things you can do with
an Android application right and could
not build it and the end result would be
in apk right so
I was aborting build unless I have some
code style arrows in any case so okay
you people using maven would kind of say
well that's kind of the maven story you
say this is an Android application right
and then you get a life cycle that's
what we like with maven okay so in that
respect it's an equivalent approach
right so the interesting thing with
Android is one problem 111 typical
problem Android developers are facing is
they have an application but then they
have quite a few variants of that
application so they have they have they
have their you know the main application
whatever whatever it is whether
application right and then there is a
free and a paid version of it and then
there is a version for the amazon
appstore and a version for the google
play store and then there might be might
be certain modifications for x86 or air
em processors you get the idea right so
and and that this adds a lot of
complexity so let's say if you would
like to model that with maven you would
end up for this weather app with a 50
sub-module build right and and how can
you how can you solve that problem with
Gradle so say we so what you can do with
Gradle you can say hey and with the
Gradle android plug-in I have additional
product flavors free and paid so once
you tell this to cradle right what you
the first thing you can see us you now
have tasks to build a free flavor to
build the paid flavor and what you can
also in a really interesting part of
that is each of this flavor declaration
starts a little built by convention
framework if you like so as soon as you
say I have a free flavor you can put
code in a directory source / free where
you could put you the specifics of the
brief flavor in there
and the same is true for the paid flavor
right so the other thing you can also
see there's this debug and release thing
showing up here the android plug-in by
default already adds two variants by
default it's called debug and release
right so so you can build the APK
differently for debugging purposes so
that QA can consume it let's say with
with a dummy key verses 21 you publish
to the App Store where you use a real
key and also do boot certain things
differently right so so you see variants
is a key part of that you have a debug
and you have a you have a release type
you have a free and you have a paid
flavor and it's up to you how you
structure this and this is extremely
powerful right so you have a few lines
of code where with other build systems
you would have quite a bit of complexity
to solve to to get this all working
together right so and I talked about
that you can have multiple dimensions so
let's look at this guy what you can tell
you can say i have i have multiple
flavor dimensions ABI the processor and
diversion and then you define a free
flavor which belongs to the flavor to
the version dimension a paid flavor
which belongs to the version dimension
as an air em and x86 flavor which
belongs to the FA avi dimension so any
of you now look to this Gradle build
it's all it's all know it's all
available for you you can sue you can
see you can say built all ATK's will two
free ones for air em and you have to
hold community oriole possibilities
available without doing much and if you
look at the project view you have
separate test folder if you just want to
test that i'm aspects of your every
application and the x86 aspects at the
free aspect at the paid aspect so there
is a lot going on under the hood and you
yet you have a super easy to understand
an extremely declarative bed script
right
imagine you would you let me start
differently if you say create a tasks
this is what you get for this 10 lines
of build script right it's more than 300
task now you can get an idea how your
end build would look like if you do this
this is just this is not maintainable
anymore right and that's what we see
with many organizations especially the
ones still using and they say the N
script no one can maintain it anymore
that means no one can increase the
degree of automation right because it
has become unmaintained well it does
what it does and only in the highest
state of emergency you would touch it
right and and that that is what you get
when you when you're on a low level and
even the equivalent maiden build for
this simple thing would be super complex
right and so so maintainability is a big
aspect of that and also hiding
complexity from the developers don't
give them those 50 pages built wiki what
they have to do to build a project right
so the key idea of that is provide to
develop as rich model they shouldn't
think like the build system the build
system should provide them a language
that they can express the domain right
that is that is that there is one of the
very goals of Gradle provide them a very
specific domain that is very that is
highly specific like you've seen in the
case of android for C++ we're doing the
same for eclipse RCP we're doing the
same so so that they can that they can
express their requirements in in their
domain language in a language they
understand and then and then the dsl is
then mapped to the low-level build
concepts of cradle but that should be
the job of the developer right and one
of the beauties of cradle is that you
can extend that dsl so if you have
interesting customer requirements in
your in your organization you can you
can provide them things like that you
could you could create elements what
what observers are we using right
observer websphere observer
weblogic to have to make it easy for
developers to deal with the variants you
have in that domain if you get the idea
so this is full full of opportunities to
increase the degree of automation and
make it really easy for developers that
they can use it because that is another
thing we're seeing in many organizations
there's a lot of friction between the
release and build teams and the
developers so the release teams what
they would love is developer stop doing
work right to keep everything stable
right and developers are kind of
intimidated often by them so that they
don't do the ambitious with factories
that are required to share another story
we were involved with an organization
500 developers the build time was
between 14 and 24 hours so and they were
extremely disciplined they managed to
have a running build every day how did
they do that where they triggered built
at 7pm and then quite frequently the
build failed at two a.m. in the morning
so the first people that had a look at
that with the people in India and if
they could fix it okay they it would
restart to build it they couldn't fix it
they were calling the bill masters in
Northern America they got up to three
o'clock in the morning multiple times a
month if they couldn't fix it they were
calling a developer's another namerica
so that was for them daily doing they
were so desperate to at least have one
package they they could just a good they
could test per day today we're doing is
almost like in human kind of sacrifice
to get there right so but you can
imagine that the build muscles were not
happy about that you can imagine a
friction in this organization but they
have co-pays was 15 years old they
needed extremely factoring so so there
was there was there was not a good
collaboration and I and for reasons you
can understand right no one was happy
with the situation so um therefore it's
so important to get better tooling but I
think it's also important for the build
and release engineers that they don't
just see themselves as the guys that
that build the packages for production
they are also the guys that are
servicing the developers to make them
more productive and that
often the thing not sufficiently
prioritized on their list and that's
something I when we add organization we
make a strong point that you are serving
the developers as well right and so so
11 yeah and and cradle with the
extendable model makes it really easy to
serve your developers another wonderful
thing of a rich model is the IDE
integration so I show you the next
example let's go back to our two-hour
flavor example right free and paid what
you can see here is a little box where
you can where you can choose the flavor
variation you can see you can say as it
is the developer within Android studio I
want to work on a free debug version I
want to work on the free release version
and so on and so on so just the fact
just the fact that the IDE can know that
is notable it's interesting to observe
could you let's say you would have
modeled this with an N built is there
any way you can ask the end build what
flavors do I have and what is the flavor
i only have targets right with maven is
there any way can you tell me what
flavors do you have i only have
sub-projects I don't have the concept of
a flavor but now by by having this
richly modeled the IDE can query right
the build system and can say tell me
what flavors you have and I can show it
to the developers right so if we are now
selecting the free release version what
you can see us that um quickly what you
can see is that this the resource
directory of the free version is one of
the sources directory is now active the
one of the paid version is not active
when you're doing refactoring right if
you switch to paid debug this should
change now you see the resources
directory of the paid version is active
and all of the free version but this is
this gets even cooler so let's go back
to free debug and let's so this is now a
one variant of the f
the free application right if I switch
now to the paid one it immediately gets
updated and this is so powerful right
imagine you could now in cradle declare
your application servers are used for
this application that I de could now
have a really nice visualization to
start them the big problem we see with
ide versus build systems because the
build systems where let's say not that
powerful the ideas often became their
own build system the problem is they're
not extendable easily right so a good
example is executing your integration
tests right you often need to create a
test fixture to create a fire up some
database and whatnot so if you want now
to execute your test integration test
from the IDE what we often see at
organizations that then people go to a
built wiki are this is the end task I
need to execute to create all the local
test data and then I go into the IDE to
run the test we have the nice
visualization running of the tests right
with this kind of deep integration the
build system doesn't do edit ide doesn't
do any built action it would just tell
cradle hey I want to run the integration
test sent me all the events you know
that I can nicely visualize them but you
run the integration tests and you know
what test fixture you need to set up you
get the idea you and you as the build
master can then easily create a task
that sets up the first test picture
where the integration test TAS depends
on and the IDE that way can seamlessly
executor integration test automatically
setting up all the tests pictures and
and that way with the build system you
can extend the IDE if you have such a
deep integration hope that makes sense
that story and there are many
opportunities there for organizations to
make use of that so I think this is a
yeah this is a really an Android studio
we are so happy with this you know that
we have this cooperation with with with
google android and we share this vision
that the key reason one major reason why
they chose Gradle is they want to have a
deep integration with the IDE that they
don't need to maintain to build systems
right besides the fact that now the
feedback in the IDE is much closer to
what you get in on the CI server
you have two separate sources of truth
that it's always good for some confusion
as we all know so okay so i only need
this one slide so this this pattern of
of variants you you might see that this
is really valuable for android so how is
this valuable for other domains let's
just check a java example so oops that's
not what I so let's say I make this
bigger let's say you now want to build
for multiple Java platforms it's it's
fun now again right to use to evade
theirs innovation back in Java notices
this will be more and more of a
requirement so how can you do this
easily well with this is this is from
the latest code base so you can try this
out this is real but it's still it's
still incubating you can now say with
java and we basically took the idea of
the variants from Android you can say
hey for the JVM I want to build a
library or it's called my lip and it
should target java 6 and java 8 that's
all you need to do if you know for
change go to the command line you can
you can ask cradle what can I do with
this build and you can you can see try
to make it bigger you have now
automatically a java 6 my lip jar task
java 8 my lip guitars and to compile of
course is properly configured that one
is compiled for java 6 the other for
java 8 so this is just super convenient
right and and we're working on to do or
at one point also the provisioning of
the platform if you don't have a java 6
install et cetera et cetera so this is
this is one of a pattern you can use for
many scenarios in your organization I
think and and and we know building is up
for java where I think people will also
really appreciate that one interesting
should show you some other thing
cradle is now a nice component report so
when you so now everything is nicely
connected so great in those days there
is just one component it's called my lip
right this is where the sources are and
those are the binary is created for this
component one is the java 6 jar right we
describe we tell you this tool chain its
current jdk 181 is the java a jar on my
machine i only have java 8 installed are
you also used to 1h ATK with the
appropriate settings but you could
define you all to check tool chain so
you could for example if you say damn we
have a we have a different variant
problem right we don't need to build for
java 6 or java 8 we need to build for
IBM websphere and over the JVM this is
all stuff you could wonderfully map with
that pattern right so um one interesting
thing here is and that's what we're
working on right now is dependencies for
for those guys right for for the java 6
variant you might have different
dependencies than for the java 8 1
because Java 6 might get in some some
retro libraries to use some of the job
aid features or so and that is something
you can't model today properly with any
dependency management solution right you
can't use maven classifiers for that
because maybe classifiers can't have
different dependency graphs right so
what we want to enable in terms of
dependency management that to java the
java 6 variant when you build that and
when it has dependencies let's say it
has a dependency on foo we look in the
transitive crowd and then we look at
fool where the poo also has a java 6 and
java 8 very end and then we picked a
java 6 very end and and who might have
another transitive dependency where we
need to pick the right variant right so
this is this is a this is a requirement
I think for modern dependency management
and we're working on that on Java you're
starting to feel the pain for Android
and for c++ it's already there they
desperately need a solution for that so
but even in Java would be wonderful to
have a variant where dependency
management and greater will soon
ship with that so yeah talking about C++
Gradle is a really powerful C C++ build
system so you can do stuff like this
right you can describe your platforms
that you want to create an executable
library you can you can have
dependencies are already you know on a
source level you can nicely define them
and this is similar to Android even more
complex the c++ domain what you get out
of here is a really complex build but
the complexity is hidden and you have a
nice declarative language to describe
your your problem space so you can you
can do interesting stuff with the
toolchain right you created figures out
oh it's on GCC so then you can set you
can set certain compiler settings for z
GCC or if you're on Windows you do
different settings and there's a very
powerful tool kit underneath that you
can really adapt this even to very
complex requirements so okay another
thing I we talked about C++ component
Android component Java components the
idea of component is an open concept so
for example we are working at the moment
with the Grails team creates is creating
a new plug-in system and and they're now
fully switching internally to cradle as
the internal build system and they are
going to model their plug-in as a custom
component with their very own dsl right
they might they might have I don't know
what variants they have but they will
have some right and that is a wonderful
concept for them to deal with that so I
already started to talk about dependency
management this is for me another very
interesting domain so so I get my even a
lot of credit that it introduces the
concept of dependency management into
the Java world absolutely that is a
putting your libraries in the lib
directory what's still quite a few
organizations do is doesn't scale to put
it like that you and no one has any idea
anymore what those jaws are about so no
one dares to touch them no one dares to
clean things up you have weird ordering
shows in a class pass etc but this was
wonderful thing that was a wonderful
thing that was introduced but but the
way the way but if we look at the needs
of larger teams it is not good enough
they still way too much fragility when
it comes to dependency management and we
will talk about some of those use cases
so so first of all cradle fully supports
palm and IV metadata formats so we can
we can produce we can publish palms we
can retrieve any palm from a maven
deposit repository so will we have
hundred percent maven compatible on a
repository level right so but we have
our very own dependency resolution
engine where you can do really cool
stuff or would say required stuff it's
very uncool if you can't do it so no
that is that is not it oops the demo
slide is misleading I'm not going back
to Android so I show you a very typical
use case I think right so this is about
a project that was basically stopped and
then moved to another namespace right so
it's google collections and guava I
guess many of you use them right and I
want to tell my build system hey build
system google collections is replaced by
guava right it's a required or let's say
you acquire a company right and they
change the name names gets a typical
scenario that that the project is
continued under a different name space
right so how can you solve that problem
so with Gradle you can simply say hey
create a dependency management the
Google collections component is replaced
by the guava component so now this is
what I usually don't put this directly
in my build script you
this is something i put in a greater
plug-in that is done that is then shared
with all the teams i just do this for
the sake of the demo right usually
that's something you want to you want to
manage centrally right so but it's no
problem to inject that so assume that
would be injected from somewhere else
disclose now normal developer says okay
I have a what is a normal developer so I
developer says I have ever dependency on
this annotation project and I have a
dependency on Google collection right so
if you're now asking cradle a crater
show me the dependencies situation for
this project right with the different
scopes so what creator tells you or
commutable has a has a dependency on
guava and therefore google google
collections is replaced with guava
because we told cradle that they are
that they be lot that they are the same
basically and one is replaced by the
other right if you don't have a
dependency on guava google collection is
new hot spot right and and this is this
is common did not common stock you can't
express with any other dependency
management system i know right so and
there are other examples let's say in
the old days there was a spring all jar
into spring core job right so if you're
using normal maven based dependency
management maybe can't distinguish
between the two so so let's say you have
a spring all 20 and spring core two one
right and now depends all on the order
in which you declared in the palm
whether spring all 20 is before in a
class pass or after spring right spring
all 20 is either before spring code 21
or behind you this is just chance right
if now someone somehow changes to palm
to have f abetik ordering and the
dependencies boom the order is reversed
and explosion extreme fragility right so
so there are so many
Aereo's with what we say see with palm
based dependency management where people
where there's a lot of fragility in the
classpath and this is just waiting to
explode because you can't express those
relationships right and then and if
spring court if you can't tell the build
system spring coin spring all is the
same well then then you have a problem
you need to do a lot of manual
maintenance and you have fragility
there's other interesting stuff so this
is how you can enforce a standard
version across all organizations so if
someone is using any dependency of or
cradle right use the version 14 so we
have what we see often that companies
have the concept of a releasable
releasable group right if you if you
have if you have a group for ABCD what
you want to enforce is that you use the
same version for all this forest of the
group that's also something you can
easily map with Gradle another
interesting thing our selection rules
right so so after cradle did kind of
conflict resolution you can you can add
additional selection rules that you can
say well for a sample API if the
selected dependency is of type 1 1
rejected and find a better one I and
this is now getting interesting you can
even do stuff like if the dependency is
from the group sample and the name is
API and it's from the branch testing and
has has the status milestone then reject
it so with Gradle you can you not just
have orch group oh sorry group named
version you have additional metadata
attributes that you can use for your
resolution process right so that that's
Netflix is using this a lot and yeah
there for them it's an essential tool
kit how they can or they can provide to
write dependencies to their to the users
linkedin has also driven many of the use
cases that we have presented
am dependency management is a key thing
it why they chose greater for right so
um and and one quality of cradle is also
early mentioned that that it's really
extendable so what you can see now that
that other organizations in this case
Netflix created some really additional
interesting plugins just on top of the
dependency management so one use case
here's the Creator dependency lock plug
in so one thing netflix is doing they're
working a lot with snapshot dependencies
right but what did so what the normal
workflow stay of the developers is that
when a when they start work in the
morning they they retrieve all the
latest snapshot dependencies they depend
on right but for the rest of the day
they want to have stability that's how
they want to work so so therefore they
have now created the dependency lock
plug in where where after you retrieve
all the latest snapshots or this plug-in
creates a log file you can even submit
this to version control and then for the
rest of the day developers can work
against the dependencies of this log
file which is near down right by the
resolution by the exact resolution of
the dependencies in the morning and
there is no interruption from any
further updates during the day that's
how I want to work and that's how they
use the Gradle toolkit or two to make
that work I think it's a very it's a
really interesting concept we will
eventually move into the core the rubies
bank law for example has introduced this
concept right it's not it's not a
solution to all use cases but it's a
very important piece in the toolkit
another interesting dependency plug in
their road is the integrated blacklist
plugin where you can define certain
dependencies as blacklisted and then you
can say they create their own dsl right
with this plugin if i had internet
connection i could show you but I don't
oh I have no damn now imagine I wouldn't
so you can do really interesting stuff
and that you say
this this external networks plug-in is
extending the Creator dsl you now have a
blacklist language element where you can
say flag the following dependencies awk
fubar should be blocked the build should
fail if this is used if com company best
is used issue a warning on a command
line right pretty cool stuff so to to
kind of first say for the first two
months if this dependency shows up you
can issue a warning right as this will
be will be forbidden in two months and
after two months you block it okay the
last thing I want to talk about is when
it comes to scalability it split
infrastructure management so one thing
almost every created project is using is
the greater weapon so so what you can do
with Gradle you can oops all right
what's happening here
so here we go what you can do with
Gradle you can as the build master
usually can create can use to greater
rabbit ass right so so we are here we
have a normal java project it's called
Java standard right so imagine your
normal java project built with Gradle
you can create a rapper task as the
built master and then you execute the
rapper task just to show you the Eclipse
integration and what the Creator rabbit
ask does usually all creator tasks right
into the build output directory by the
rabbit task into your root directory
right into your root directory and what
it does it creates a couple of files in
your root directory one is the cradle w
file the other is the creator w bet for
windows and then you have a cradle
directory with the Creator rapid jar and
to create a rapper properties file so
those four files you are now committing
to version control right and the next
time a developer checks out your project
the developer doesn't need to have
Gradle installed the Creator rapper
scripts automatically retrieve a cradle
version specified in that URL in that
case this is a version from from our
public repository but of course it could
be one from your from your
organization's repository so if you
upgrade to a new version of cradle you
just change the wrapper properties to a
new greater distribution and the next
time developers to an update they use
automatically the latest version this
means zero administration on the client
side right it means if someone is
calling you well this bill doesn't work
with grated version X you say well
interesting let's use the wrapper it
works with the rapa it also means
historical bills right you you have
locked an important part of the build
environment down so if you go back one
year version control will know what
distribution of cradle was used to build
this project we are involved with an
organization shipping medical devices
and if they get an audit and they can't
show that they are still able to
it use the software on those devices to
have already sold to the hospital they
have to call all the devices back so for
dam built reboots ability is an
important issue so ya rabba is really
cool feature we continue to improve this
the other thing I want to show you is
how you can how you can extend and
inject behavior into Gradle builds so
here's another simple project it's
called testing with Gradle and the first
thing I want to show you is how you can
inject a very simple thing into a cradle
build the information where to get the
dependencies from so you can declare
this directly in your build I now remove
this declaration right and and what I
now do is I create a cradle init script
that can live wherever right where I add
this information repositories from maven
central so what I can do now is I can
now build this project let's say run the
test right if I would stop here the bill
would fail would tell me I don't know
where to get the dependencies from right
but I cannot inject this init script and
everything works fine so this is not a
very spectacular example of what you can
inject but this is just forgetting the
idea right now let's do something more
interesting let's inject the following
behavior into this build if any of the
unit tests take longer than 20
milliseconds to execute I want warning
in real time that's a pretty cool
requirement I think so you go to your a
nerd script and you say hey cradle after
you've evaluated all your build scripts
give me the route project and iterate
over all the sub projects and give me
all the tests tasks and in all the tests
tasks I want to add a hook for all the
tests task that after a single test
method is executed give me the
descriptor of the test and a result then
you can calculate the time it took to
execute the test
and if it takes longer than 20
milliseconds issue a warning a few lines
of code for super powerful no
functionality I think right and what you
can do now is the same as before we
inject this behavior into this
particular built and what you see now in
real time you get those warnings as the
tester executed right so for example you
could have such an init script and
inject it into into your CI bolts right
so for example what you what you want to
allow is that on on development machines
greater can use whatever repository they
want on CR you want to say hey whatever
build is X you don see I let me check
the the repositories declaration and
let's see if any repository is used that
is not on the whitelist otherwise we
need to build fail right great as a deep
api testing just one example you can
access every aspect of the build and
then can enforce certain policies right
and you can enforce this policies even
differently on different environments
init script is a very powerful tool for
that the other thing you can do with
init script is every create a
distribution hazard in it or d directory
so you can now create something on a
local creator distribution for example
create at an init script to this in a
dirty directory right that's what we're
doing right now we copy and paste the
same content we were using for the other
bit init script in this init script
right so this is now an init script in
the init or D directory of a creator
distribution and now I don't need to
inject anything every cradle built that
is run with this into with this
distribution is automatically using the
init script that I've provided so I
usually wouldn't recommend that the
developers should fiddle with the local
greater distribution but now imagine we
talked about the wrapper before you can
now point the greater rapper to create a
distribution of your organization where
you put all different kind of energy
and developers have a completely
pre-configured built environment right
with all the stuff everyone should be up
sing with all the policies you have
right just create just put some minutes
group in a greater distribution put it
in your company repository let the rap a
point to it and boom pre-configured
built environment for developers version
control right so there's some more stuff
you can you can do to nail down your
your built environment for example you
can specify the Java to jdk that should
be used for executing cradle bills right
and you can also specify the JVM arcs of
the bill JVM so no bill tweaking where
developers have to read oh I have to set
my end of summer maven up to this this
is now in version control right and it's
project specific so it just works right
so and again something we are continuing
to evolve that we nail down more and
more aspects of the built environment
that is required to reproduce a
particular built yeah any questions yes
please
yes so that you you would need to go to
the to the cradle documentation right
you would go you would look at the test
task and then a test task has this has
this listener method and it would show
you the types that kept at it that it
returns that's that's how it would work
ok good good enough answer yeah it so we
have we have a DSL documentation blosser
javadoc documentation you please just
come after the talk I can show it to you
it's well documented yes please yes so
your question was i mentioned CC that
support is there support for other
languages their support for scala for
brew be any particular language a dotnet
visual c++ so far but net is one of the
platforms want to fully embrace
eventually so if you do visual c++ you
have already support including
generation of visual studio files but we
want to do more for dotnet it's on it's
on a road map but we have quite a few
dotnet users that already use it because
the stuff that is not there can can be
extended by them and it's still a better
platform then then what the alternatives
up provide yes please
okay so the question was i talked about
provisioning with Gradle would it be
something new or would it be a wrapper
around puppet and chef I would say we
definitely saw some provisioning it
there's some feature creep right so we
don't want to we don't want to replace
chef and puppet right on the other hand
there's some stuff for example
provisioning a JD case where we say that
that's something we should do right so
so I think it's both right we want to
extend the native provisioning
capabilities but we will also want to
integrate well with a chef and puppet
yes please
yes yes so you saw you saw the created
okay good point you don't have that yet
and they create likely splat in we just
got started on improving a greatly clips
buggin right so basically we took that
over and and you see it in you there is
there is an HTML report for dependencies
you can generate but it's not directly
integrated in Eclipse but it so it's
really good for this good we just need
to get it better integrated in a clip so
this is coming yes please last question
any any any estimate for the so greatly
clips is available the spring source
folks created to the great length but so
for that particular feature so we're
working now full steam on this special
on dependency management features so I
wouldn't be surprised if it's available
end of the year time frame right but no
it's not on the other end it's not
completely nailed down that I can that I
can I can I can promise that yeah but
you will see a lot of progress with
greatly clip support soon that's that's
another interesting question for
scalability integration of a large
project mapping them to eclipse so we at
organizations that were that we're
having a 600 sub-module build and they
were just mapping it SS to eclipse and
refresh to 40 minutes right so you can
have a lot of some people like that a
lot of cup of copies right some people
feel frustrated so yes
yes so we many so that you can do this
reasonably elegant with greater right
now but it's not yet a first-class
concept right so that is one hundred
percent on the list we're working with
Prezi on that they day they desperately
want that feature as a high-level
feature so what I can show you how they
have written an external Gradle plug-in
to enable that and it's pretty cool it's
called if you have forgotten the name
you can come to our booth then I can let
you know so this is already addressing
this but we want to make this a more
core concept right that that the concept
of dependency is it is it is too too
superficial to say their external
dependencies and project dependencies
it's a fluent thing right and that's
what we want to make a first-class
concept in Gradle but you can at least
work around like in a way that is
already pretty cool what you can do it
just requires a little bit more work on
your side okay thanks a lot</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>