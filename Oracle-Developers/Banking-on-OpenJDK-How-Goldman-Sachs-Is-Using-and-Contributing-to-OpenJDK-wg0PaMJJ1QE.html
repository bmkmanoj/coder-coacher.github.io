<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Banking on OpenJDK: How Goldman Sachs Is Using and Contributing to OpenJDK | Coder Coacher - Coaching Coders</title><meta content="Banking on OpenJDK: How Goldman Sachs Is Using and Contributing to OpenJDK - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Developers/">Oracle Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Banking on OpenJDK: How Goldman Sachs Is Using and Contributing to OpenJDK</b></h2><h5 class="post__date">2015-06-02</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/wg0PaMJJ1QE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">and welcome to our talk on open JDK so
we're here to share our open kqk story
to basically tell your experience why do
we want to use open JDK how do we decide
that we want to participate on the open
JDK project and and why do we care so
hopefully by the end of this
presentations you have all those answers
but first up who are we and this is
something okay and I'm Jessica and we're
both part of the Java engineering team
in common sacks we our main focus is
it's basically on the Java SE platforms
and in particular we do troubleshooting
performance tuning around all the jpmn
issues and we provide consultations and
sometimes run education courses for our
Java travel developers so about this
presentation we'll take you through the
the journey of our Java history in
Goldman Sachs and then that will lead on
- why / JDK let's give you some of the
reasons and and the driver behind first
participating on the opportunity a
project and so we decide that we want to
use almond tree decay how do we actually
use it in our environment we'll give you
some case studies some examples of how
do we actually use it and the case
studies of how we contribute it into
orbit or a decay and hopefully by the
end of that you it will prevent you that
contrary thing wek is actually not
difficult at all and it's actually fun
so Goodman Saxon Java we actually become
is this a long history we started back
in 1998 when we started evaluating
to be used as one of these strategic
language for developing applications so
a couple years later it has become one
of the strat strategy platforms and it's
used in a lot of applications I'll give
you some snacks a little bit later since
then we continuously absolutely working
closely with some van now Oracle to
improve Java we submitted and a few
bucks to Oracle some then and also sort
of communicate with them some of the
ideas that we had to improve Java in
particular one of the examples is the GS
collections framework that's developed
in-house in uniform attacks earlier we
had the talk on Jesus Christ
collection so we had Craig and Don and
that back in 2004 that's when the the
project started and the sign or the how
is implemented is such the base on the
lambdas enclosures in from small talk
and so what ten years ago we're already
ready for lambdas and in 2012 going
Sachs was elected into JCP exactly
committee and and we actually elected
two times in Rome
and in the same year GS collections
frameworks open sourced and Craig
actually from commerce ax had an
interview with in info for InfoSec in
folks or info cube and he mentioned that
since open source who have more than 750
750 followers already so as a SSS and in
2013 we decided that we want to
contribute to on the JDK now in order to
contribute or to perpetrate the case you
need to sign a contract that's called
the Oracle contributor agreement and
commerce access sign that
since then we've been looking for
opportunities to contribute back into
our JDK project actually we have a
couple of patches being accepted and
gone into the JDK 7 8 &amp;amp; 9 so more about
Java in just just some more example and
that gamma sex is part of the expert
groups for they list at 3GS hours as I
mentioned the GS collections has got the
close relationship with the lambda
expressions and Dawn is actually in the
experts group for that GSR we have over
3,000 driver developers in the firm and
remain 10 million lines of code and Java
code
and at any given hour on any particular
day on average we've calculated this
actually on average we have roughly
about 125,000 draft processes in any
given hour okay so now that so like you
know the scale of Java that we use in a
firm we'll give you a couple examples of
how we actually push the boundary for
Java so there's two example that I firm
I'm going to discuss them so firstly
it's very large heap so in our firm that
we process a lot of trades and market
risks and things like that and in
general it has to load up quite a lot of
this trays in the memory come in memory
database and then you can look up those
trays and work out the risk or the firm
and some of these application can use up
to about a hundred and ninety gig of
heap and this brings a really
interesting issues when you're trying to
use those within d with current and
garbage collection algorithms so one of
examples that we actually found earlier
it's the integer overflow issues within
the JVM so the garbage collection
algorithms needs to work out how whether
an object is a garbage hollow and in
order to track keep track of how far is
got it's actually keep those data and
keep those object in through something
called the
backstep and the master it's actually
implemented in an algorithm cook in a
data structure cook group or array and
the way that it works is that as it runs
out of space it would actually double
the size and what happened is that in
that calculation of the new size is
actually have an integer overflow issues
so it would actually request for a
unrealistic amount of memory and they
will basically just crash so that's not
very good so we actually raised this box
with Oracle and point out that where the
where the issue is and you can actually
go and look at lookup that reference and
eventually it has been fixed so the
interesting part about this is we've
seen a lot of bugs that have supplied
because we push the push push the
application to push the edge to the end
of the java technology and there's a lot
of interesting things that sort of like
couldn't be found with normal
applications another interesting ways
that we push the technologies the when
when the JVM is being stressed during
the high volume condition or a new so
usage pattern so for example during a
trading day you would have if you're
doing a trading application you might
have multiple different trading
algorithm and obviously when you have
trading algorithm you train new piece of
code and one interesting bits about the
JIT compiler is that it's actually got
something called a cop catch which is
used to store all the compiled code
within for your applications so one
interesting thing is that if the trading
volume is quite high and so if I offer
the trading day you put actually would
have a runoff a cup catch because in the
earlier version of Java this is actually
a fixed size buffer and we have found a
couple of situation whereby this code
cache ran out so you see that the
application performance is pretty good
in the early part of the day and as the
code cache actually threw up the cheat
compilers stopped compiling the code and
if fall backs into the interpreter so as
a result our application developer
discovered that well how come suddenly
slow down after the certain time of the
day
and we've actually discovered this
issues and we we've actually written an
internal paper to describe the issues
how to detect it as well as how to
actually increase the size of a buffer
in order to get around their issues so
these this of line of special cases of
the way that we used to draft technology
really expose some of the really
interesting problems within JVM that's a
lot of people might not be able to find
so now you see that the how persuade how
widely we use up the JDK and how how
much we push the technology we move on
to why why I want to make use of open
JDK there's a couple of interesting
things that interest us in terms of
using open JDK source access is very
important to us we have we have been
able to mix use of a source to help us
to resolve production JVM crashes so we
when you get HHS or a file it just log
file we were able to sort analyze what's
going on as well as going to the source
code and find out why that's the case we
also make use of the open trading source
cook to actually identify area for
improvement so if there's a certain GC
algorithm that we might want to see
whether there's a potential area for
improvement and we can actually use
analyze looked at a source code and find
out what's going on there
finally it's actually good for security
we believe that with being transparent
and open about the source code we were
able to actually work how exactly what's
way away the potential area for problem
we can actually do some proactive
scanning of the source code as well as
finding ways of defending any security
vulnerability issues so the second thing
that we're interested with open JDK is
the transparency so a lot of times to a
lot of you JVM it's like black boxes
like magic
but in fact one of the things that I saw
Scott wasn't quite widely available so
you can't actually see exactly what what
was it doing underneath the service so
with the open JDK or the source books
being open you can actually look at it
we can actually understand sort of like
know why certain things are implement
that in inside draheim's implement in
certain ways especially now that open
JDK progress published the JEP the job
and has been requests which allows us to
actually look at some of the rationale
and some of the reasoning behind how
these in and the trade-offs in terms of
implementing certain features another
really useful part that they've opened
up is the bug database so you can
actually examine the most going on with
there the software when they implement
effects what's the ration now and how
they arrived to the with the patch
finally we want to be able to so once we
found all the issues and things like
that we want to be able to contribute
those patch and bugs back into the
community so that can benefit both us
and also the wider community
so social I know because as you've seen
we've actually think about sort of like
how often do I get help us so we want to
decide to actually join the project and
since 2007 when open JDK come in come
becomes live we've actually followed the
project quite closely and we have
actually make a decision to join in
about 2012 there's four major reasons
that we decide that this is right for
right for us
so Oracle has shown the continuous
commitment for the project they have
committed their engineers they're
committed bug database open up the buck
database and a lot of infrastructure and
so we found that sofly Oracle is fully
behind the open JDK project other
tritium vendors like IBM azu or Red Hat
they are quite active in terms of
contributing patches and making
improvement to the build process etc so
that shows that there's a lot of
industrial support
or for this project we also see a lot of
contributions from committee like the
London Java community that's important
because obviously we didn't want to see
that it's just an Oracle project and we
see that supply other community actually
actively contribute to it and finally
there's a lot there's a lot of other
users of the open JDK within within the
community so example pretty much most of
the Linux distributions includes a copy
of open JDK should that shows that the
project's mature and that they it's
ready for ready for stuff like export
right so we see that yeah or mange the
case it go in the right direction lots
of good things and so we how do we
actually use it now there are two main
areas that we use open area the KFOR one
is troubleshooting the other one is
research investigate looking into new
features and how is how it works behind
the scene now for troubleshooting things
like if there is a production issue
quite often you probably have to dig
deep down into the JDK code and to find
out what's going on and once you
identify where the root causes and then
it makes the workaround or fixing the
problem a little bit that much easier
sometimes during development developers
might get stuck if there is a bug that
has been found and probably fixed in the
later version of JDK but not in the
current version that they're using we
could make an internal change to to our
internal built and they could actually
carry on with their development but
there another benefit for that is
actually they can verify if the fix is
actually good to fix if the bug that
they've seen is the same bug that has
been reported or in the easier they give
me a new book that we need to
raise it with Oracle or into all the JDK
database research so when the new
feature is released in the in a new
version of Java we want to find out if
there are opportunities for improving
our application we can make use of the
the feature and if we can then how does
it actually work how can they be applied
so later something will give you some
examples of how we do the
troubleshooting and a couple examples
into how we do the the research using
the open JDK but before all that we need
to be able to build open JDK now being
able to build open JDK internally is
it's very important to us we want to
make it easy for our developers if they
want to make a change in job Jacob want
to investigate something or we want to
provide patches you know the some of the
examples I gave earlier if the fellows
get stuck if they want to have a have a
fix for the the bug that they are facing
we can provide that patches into the
internal bill and release that easily
and quickly now for for viewing on JFK
we have a set of requirements we need to
be able to sync with the latest code
regularly and and then after sync up we
need to be able to build regularly and
for those bills we want to be able to
pass in different options you know like
the fast debug and in some cases is
actually it's important if we want to
use some of the JVM pop options that
only works on debug bills and if we want
to look at more for debugging purpose
troubleshooting and obviously we need
the internal build to add changes our
own changes patches or instrumentation
which I built so
this is what it looks like on the
surface that in the give you an overview
of the built infrastructure so we start
at the top right corner there the blue
box means it's external everything else
is internal to TGS so the public we
start with a public open JDK repository
and that is the mercurial - and we we do
the clone and we would pull from the
upstream public repository into our
direct mirror which basically there's
four SS on the team it's it's a direct
copy of the repository from the public
repository and we don't contaminate that
that builds basically if there is
anything that we need to build something
that is exactly a replica of the of the
production of the JDK build then we can
do so but from that that mirror we clone
into a set of JDK repositories each one
of those correspond to a particular JDK
version and we build from that as you
can see from the diagram that we use
Jenkins agent to do the bill once the
jdk source code is built into images
then we want to test it obviously so you
will go through our certification
process which consists of a set of
performance benchmarks a set of
regression test cases and a set of
stress test test cases once we're happy
with the results and and everything
works as expected and we will publish
that and we lose that for internal use
so those are our GS open JDK builds now
if developers want to make their own
changes on to play around with the other
JDK bills or if they actually want to
contribute to the oven JDK they can
easily do so by just calling and pulling
from our Jade set of JDK repositories
into their local environment
and and then they can do a local commit
which will go through our review and the
fruitful process internally
once everything is good approved then
they will go back into the jdk
repositories which gets built into the
geocell control cables interesting
enough during the when we're building
the opportunity we found the problem
now when we were building the open JDK 8
we need to make use of the with altar
option what that does is it allows you
to provide the alternative sound package
headers and the library we cannot use
the default one because we're using the
GS a standard Linux environment which
doesn't have the same package installed
on the system so we mean use of their
options and it failed and it's because
of the the linker parameter that's used
in the build script is incorrect so as
you can see that the under the root
cause what they were using it was outer
as the parameter to pass to the linker
and that didn't work the linker just
complaining and saying I don't know
anything about this - say how something
and the correct one to use is a sound
and we submitted that I had the
conversation with the developers in open
JDK and it was accepted pretty much
straight away so that's one of our
contribution ok right so now that we
discussed earlier so if like we you
believe there's two areas that we want
to use open JDK for a specific issue so
now let's take a look at those examples
and see how how we actually go about
doing this so we what we always like to
use open JDK for our travels routing
issues being able to access to the JDK
source code is important as we described
earlier that allows us to actually look
at the crash dump identify the bits and
pieces of the JVM that's causing the
issues and potentially
supplying the work out how to fix it
generally patch and as well as put
also we also sometimes we generate debug
builds which allows us to get extra
diagnostics informations from a JVM we
also want to solve I mean sometimes we
have got patches and fix in the
development branch which is not
available in the existing zone like Java
8 branch we might want to actually back
port those patch ourselves to test it
and make sure that the fix it's good for
the developers our developers and
applications and then we can actually go
go to open JDK community and tell them
well ok the fix is good piece back
popped it back port it so let's take a
look at examples of a bug that we found
and and how go about actually working
out the process of sort of like working
out what's going on and then and then
contribute the patch map into the
community ok so we use a lot of gbmt
agents for monitoring debugging etc and
sometimes when you actually run those
code it actually gives you an assertion
fail that's at the shop and and when it
shut down so it gives you this horrible
message that Shaban and it's caused a
lot of genuine cost a lot of alarms with
our developer so they come and talk to
us so the first thing you do is we try
to work out exactly what triggers it and
it turns out that you need daemon
--thread and you're actually doing class
loading game shut that and what happened
is that the when you do shrink shut shut
down they have a slightly different sort
of office JVM TI doesn't allow you to do
certain things and basically the cost
loading triggers one of these conditions
so now that we work out what triggers we
we find that we can see whether we can
build a test case so a test case is
basically a daemon --thread that low
classes in the background and then you
stop the JVM and what we found is that
in running that test case
Soulfly no 5/5 over 20 times it would
actually give you that error message so
it's an intermittent message
so once we identify what's trigger the
issues we can actually go back to the
source code and try to identify the root
cause so we actually well obviously one
of the reoffer screw is in the error
message that I produce so we if we took
a look at that reentrant z dot c within
the JVM you can get it from the slide
what happens that we discover that in
earlier sort of earlier version of Java
they fixed issues so listed in disapper
buck and basically what happens that
they if I add extra checks ding shutdown
and enduring shutdown baseless gigantea
will send a wrong phase message and and
we'll have instead the tracks that they
added to the JVM there's actually
missing in some of some parts of it so
we actually produce a patch with the
test case as well as the patch to
actually add extra mission track back
into the functions so once we've got
this patch we actually discussed that in
the mailing list with the developers and
afters so back and forth and research
the patch was accepted in the Java 8
branch and then and then when they
integrated it and tested it and they're
happy we actually request to back port
into Java 7 so this is how you bring a
patch from the issues into the supplying
a generated patch discussing the man
Angeles and then it will get integrated
so we can see how open JDK is useful for
troubleshooting and now we have a look
at how we use it for looking at new
features and find out actually how those
new features work so when a new feature
it's releasing the
in a new version of Java we we are wick
a curious Bunch we want to find out ok
how does it actually work all these new
features and ok once we find out it
looks it sounds good
and how does it benefit our the our
applications and and if everything looks
Wow yes it's awful very promising and we
actually make use of this for how how do
we exploit it how do we actually make
use of it and then we can make it
recommendations to our developers we
could also use open JDK to to look at
potential workarounds or or how many
changes that we can make use of to
improve the performance having a source
code access it's very useful for that
type of research work so we'll give you
a couple examples of how we use open JDK
in the research area so one that one
example is compress hoops and it was
this ordinary object pointer so back in
the beginning of Java 6 and Oracle
released this new new feature and we
want to find out okay compress you it
sounds sounds good how this actually
works so how it works is that on a
64-bit platform the octo references
normally is stored on the 64-bit address
space
if compressor is enabled so all those
object references will be compressed
into and fit into a 32-bit value 4 bytes
value and and they will reduce the
memory usage however the so during the
encoding so that's converting from the
64-bit object reference into this
two-bit size but during the decoding a
shift a bit to shift 3 bits and and make
it into the API alignment and that
caused a limit
to the hip size that that will work with
what that compressor whoops is actually
effective so because of that limitation
as you can see earlier that's something
else any mention we do use large hips as
well in our applications so with that
limitation we're thinking can we do
better so we we have perfect bills no we
want to try out what if we shift the bit
by one more so chefs do four bit and
make it into a 16 byte alignment and
that will remove that limitation to the
32 gig size feet and our result shows
that it's actually as beneficial as
shift with EP 3 bit shift and so we we
actually fought that idea to Oracle and
that's they they take that on board and
and now as some of you probably know
that compressor is actually enabled by
default so by default is enabled and
it's only supposed to up to 32 kick but
if you want to have hip size as over 32
kick and if you still want to be take
advantage of compressors there is an
other argument that you can use to
enable object and alignment and you can
specify the size of that object
alignment and so you can see that we we
do push the boundary and we that's the
one of the example how we make use of
private bills to do to make improvements
for our applications ok so again one of
the interesting thing is that we we
actually want to reduce the amount he
being used as much as possible because
you remember that heat is absorbed the
large of the heat potentially it will
not leads to long GC pauses has got more
objects to go through so in other areas
that we are quite interested in reducing
the amount memory so this is literally
read the supply no reduced the actual
being uses actually strings so a lot of
our application process large amount
strings so for example a lot of the
training information come through
messaging different messaging API and
they're done by strings so REST API and
XML this large amount of strings is
being used as well so we are quite keen
to see whether there are ways to
actually reduce the amount strings so
whether it's the size of the string says
being used so one so well there's a
actually long-standing method of
actually reducing the amount so if you
have multiple strings in your in your
applications and in fact they actually
looks the same saying there's actually a
way to actually get them to share
instances and reduce the amount of heat
being used so for example let's say
you're writing and trading applications
and you process a lot of different
currencies and authors concurrency have
got a USD or EUR or something like that
so if you process a lot of trays
potentially there's a lot of same type
of strings that's been same strings
that's being used and because strengths
is immutable you can actually share that
instances and the way in the old version
of Java happened that the way that works
is to actually you call something in the
string API call string or in turn so you
can't in turn a string which basically
internally within the JVM it's
implemented like a hash table and it
looks up the so you you call the API it
will actually check and see whether
there's an existing instance of certain
string and then if there's a certain
string you just return the reference to
that string so you do no longer needs to
actually create the create another
instance for the same strength so you
pretty much reduced him up heat that's
being used now however there's a problem
with that string in turn call if you
actually go in looking the source code
or the string in turn you'll find that
it's actually not a scalable as he could
be the main problem is that it's like a
hash map so it's got a fixed bucket so
that means that potentially if you have
a collisions and
because it's a hash code so if you have
a collision it will basically build a
quite a big line of objects that you
have to go through and therefore it's
quite poor in terms of scalability and
also and then it's actually quite small
and you can't change it in earlier
version of Java so sorry in fact
actually a lot of application team
implements their own version of string
interning Java and you can actually
write pretty good if you if you put your
mind to it you can actually write pretty
good a string interim replacement for
the JVM and the people do it just
because the scalability for the for the
core of in the JVM is quite poor
so recently in Java 8 update 20 and Java
so that wrapper line 9 branch there's a
new feature within the g1 garbage
collector so this is only available in
tuning garbage collector and it's
something called a string do
duplications okay so the way it works is
that if you look at a string it contains
certain headers and then basically a
char array the array of characters that
actually consists of the strings so
instead of actually in string in term
wherever you share the instance of the
actual string itself what happens that
the g1 collector is able to actually
look through all the ordered pair
character arrays which is paste the
majority of the size of the of your
string and obviously share that
character array by actually going
through source string in the background
so I've got a bit of comparison for you
to shows you and by the way we work this
out by actually examine the source code
and observe how it and also run tests
and observe how it works so remember as
I said string in turn you share the
string instances and then with the d top
you actually share the character of eric
carter array so the amount space safe is
a bit less with the string data but it's
do so fine a benefit majority of of the
sizes one of the difference with string
in turn is that obviously is explained
so that means that you have to actively
put in your coax a string into a certain
string when you create them however the
strength eat up is actually automatic
the way that it works is that once a
string survived a couple of garbage
collection cycle so it reaches the
threshold for which it is eligible for
the duplications so it's automatic you
don't have to do anything for your
formula from your application point of
view you didn't have to add extra cause
string in term has no DC involvement so
it works of any garbage collector you
want to use however with the strength
either feature they're only implemented
in g1 DC the main reason is that
obviously they want to implement this in
the concurrent cycle they don't want to
you don't want to have extra pauses for
your during your if you have stopped the
whirlpool of GC stop the world you
didn't want to have extra long pauses to
have to go through that so this was
actually implement you and GC during the
concurrent cycle you know in order to
actually minimize the impact and one of
the if you look at the JEP and in this
step described it stringed either
feature it will actually tells you that
supply know that one of the aim is to
actually reduce the impact to the
application one of the another thing
when they implement the string D dub is
that the hash table obviously they the
idea between software sharing instances
or again it's this similar you have to
build a hash table to work out and so
that you can look up the shared array
quite quickly and this hash table in in
the string deed of implementation is
actually resizable so it's no longer a
fixed size and pocket so you don't
suffer as much from the scalability
issues okay so now that we look at some
of the so how it works and we think
about where it would benefit so our
early testing shows that sawfly you know
the areas that he put actually
the improve the soil reduced us keep
sizes some actually T IDs with the
string tokens and we see we see
supplying a good reduction within the
IDs in terms of because obviously they
have a Lost's or the same strings that
they can actually do tube okay so we see
a lot of benefits from that we've done
some testing with some other types of
applications for example elasticsearch
whereby it's already done a lot of
extensive string interning within that
implementation so those application
would not benefit from from the as from
deed up to duplications so this is that
this this features slightly different
from compressed oops whereby compressed
tubes was generally benefit everybody
the strengths deduplication it's only
benefit a small set of applications and
so we encourage our application team to
test it we use this statistic two
options to identify and see whether it's
actually benefit your applications so
this is an example of how we actually
make east of source code work out
exactly what's going on with some of the
new features think about where we could
apply these benefits and then and then
recommend recommendation to our
application
right so obviously we want to carry on
using all the JDK so the direction we're
going is we've got this adopt open JDK
initiative within Gulman and and for
that basically we want to make the
process of using opportunity came easier
for our developers and such that we can
encourage or wider participation more
more people will or help and suggest the
patches and that we can go we can start
me to do the opportunity contribution we
will evaluate of using open JDK as an
alternative production JDK we office
initiate value a we need to test it and
we'll need to pilot and we'll carry on
working more contributions look for
opportunities submitted patches and
possibly a larger contribution and that
is the end of our story hopefully we've
convinced you that using over JDK has
got lots of advantage benefits and we
certainly have finally useful and
contributing to open JDK as you can see
some of examples even you know it's more
change is it's already improving Java
and the the process is not difficult and
and it is a good way to influence a
direction of the the platform and keep
on improving Java and we had lots of fun
with it so I think that's it
now we've left all the questions to open
up to questions
not yeah but yeah so we used to sort of
working on pilot to our experience is
that the OpenJDK it's very close to so
fly note the Oracle JDK is only a couple
of bits that's slightly different that
at the moment the main thing is more of
the developer perception I think
developers are quite sensitive to any
changes in the JDK that they want to use
and so we are slowly kind of telling
them convincing them that actually it's
it's quite similar and we we let them
use it in when they want to do
performance tuning and our other bits of
areas testing patches we are we give
them open JDK to kind of get them
feeling comfortable about actually it's
pretty much the same thing except of
like missing a couple of mission
controllers I'm like that
which sometimes most of the time they
don't need so but we're working towards
that goal but I think the the is the
resistance of developers that we need to
slowly kind of work through them and
make them feel comfortable so obviously
if you remember in a big process we
actually got a certification suite we
should be lovin that that's one one one
one of it we are actually getting access
to jck through the if you if you sign up
to the open trinity project and you want
to and you go and you show that it's
actually for contributions you can
actually get access to the j ck
but j ck tends to find sawfly no
supplies no more more of a sanity test
it doesn't really push the boundaries
our certification tests is based on
things like industrial bench map some of
the regression some some of our sample
internal applications those we tends to
find that we find more scalability
issues and more survival rounder
--corner issues
but so both yes both of them are tough
like very important having access jck
and and also supplied certifications and
and and that's how we supply knows make
sure that it's a supply name is good to
go I think it's the I'm talking about
the internal developers I think it's
more I a lot of external developers are
quite happy to you so when JD hey and if
he if you look at pretty much if you
download copy of fedora or even a
redhead copy of redhead it comes with a
OpenJDK bill and stuff like no people
happy using using that for solar in
general application I think it's it's
more to do if so glad no internal
developers feeling not as confident but
it's it comes to timing experience and
things and things like that so I'm I'm
quite happy that we're building up that
momentum to sort of become a production
living here so the the the strings it's
the character arrays ourselves in in the
actual heat the the hash-table that the
instructor of the hash table is actually
outside heat but they actually prepare a
is basically just like any general
objects so it has to go into the main
heat now the way that is implemented is
quite similar to some of the soft line
of soft references so you can eventually
clear out those references and and and
it says so that you you have unlimited
you've got wind grow into an unlimited
amount supply no hash map but yes it so
the pie array is still inside the Java
heap the data structure to work out the
hash table is in the native memory
so the way it works is that we blessed
certain JDK so we picked certain point
so every every for a couple of months we
pick certain JDK and we've blessed them
and say this is this is good for
production applications and you can use
it within the firm and what happens that
we the policy is that if you want bug
fixes if you've got bug fixes with
earlier version update the only way to
get them is to update your latest and we
won't pour any patches or whatever or
obviously unless there's a production
issues and they need they need the patch
we will make something for them
specifically but and that's one of
reason opportunity help us because it
enables that capability for us to
actually generate specific software
patches but in general we encourage
developers of so we bless JDK in certain
period of time we encourage them to use
the latest to obtain the bug fix and
best performance and then Soulfly know
and then grow because sometimes you have
to remember a lot of developers takes a
lot of time to also verify the
application working well with with this
specific version of Java so we we
obviously we encourage all of them to
have good regression tests automatic
testing not everybody have some that we
really encourage them to do that in
order to sort keep up today basically
we reaction acting yeah well we there
are application well there are test
cases that who we take from the internal
applications so there are some we have
to go through some kind of approval
process before we have actually
introduced some of the tests back to
Oracle before way before the open source
open JDK processes we actually
contribute give or Core some of the
benchmark that we interviews internally
but obviously there's this little
process that we have to go through and
and we use a lot of industrial benchmark
spectra BB spec JBM we also use those as
well because those even those so a lot
of the times they they they can't sort
of exercises JVM certain ways and
everybody optimize against those
execution it's still fine managed to
every now and then managed to find a lot
of parts so those commercial commercial
spanish file you can access that we can
pay for them right so and we will use a
lot of those so internal applications
it's more more more for a more difficult
to open source there but we do have a
couple of regression tests that
potentially we can open source as well
but just to add on that
earlier son Lance mentioned how we push
the venturi use the large people I
remember back in a few years one off the
jar for one session and some of us
Oracle about how they test also the heap
size the maximum heap size they do for
testing a JDK and their idea of large
heap is ten gig and you can see that we
use 190 so
is actually some of the cases son they
just mentioned that we have private
ideas to Oracle about the countryside
you can work on the telephone
once I make a Java to working on the
certain trigger another Killian can run
any code any my that is huge so how do
you guys
having Catholic questions so so the
first question is when how do we decide
when we just go to just go to Oracle and
say or CRO fix it or whenever we want to
investigate GS investigate and so one of
the things that obviously I wear a lot
of small firm might not have um actually
if we haven't mentioned but both of us
used to be JVM developers before joining
Goldman's and and and so I think we are
lucky in a sense that the the Goldmans
actually put a lot of focus on the
operation and farm and so we've got
higher expert like us to work on it and
I understand that a lot of the times
smaller firms or other firm may not have
that type of people resources right and
I think the message is sometimes some of
these problems in the class libraries
and and places like that doesn't takes a
lot of expertise it's just Java you can
you can actually go and understand the
issue in hashmap that this will we've
seen things like scalability issues with
serialization those kind of things are
Spacely done in Java if you are so fly
cute Java developer will be able to
diagnose those issues but it's just
sometimes that it's it's it's a service
carry to take into your the source code
and I should work on it but what we've
trying to tell you is that don't be
scared
okay so fly know you might not be able
to work out all the overflow issue in GC
but you will be able to work out issues
with JDK and we encourage other
developers to go ahead and do it and by
the way we do sometimes supply a new
tell Oracle that supply note that there
are parts that supply no I think in
general it's the places that they're
still iffy if you look at the commercial
Oracle JDK there are still a couple of
black boxes and that that they haven't
completely open source and those those
are the one that we have to generate off
offload that to open so a race apart
report right but in general if we can
examine all the source code a lot of
times we will be able to find the
problem because of the expertise that we
have
and and we will actually attempt to fix
as much as possible one of the good
point about that is that once you have
to fix you can verify with the
applications Oracle might not have the
same test case or same application to
when they after they've make the package
they might not be able to verify the the
issue with which the test cases so if we
work on the patch to fix and we can
actually make a bill give it developers
they can do all the testing and then
they can verify the fix is actually good
so that's kind of the tray off that sort
of poll think about so your second
question is about why don't you have one
bill that's specific tuned for large so
heap application and the other bill
that's basically generic
right so you mean you mean you want to
you won't want the decision in terms of
Custer your app your application is
smaller jvm small heap compared with so
let just have a big heap so a big heap
and so again that's the trade-off
between the applications brain mind that
if you Custer your applications you have
overhead in terms of network
communications so you have to talk to
each JVM that's overhead to communicate
so serialization I don't know what
technology you use for that civilization
or something like that
there's overhead to serialize your
objects on one side and that be
serializable nada
so there's all the help of that so some
application might not be sensitive to
those and they could well be it's it's
actually well benefit to actually cost
the application so they can spread out
so I have dupe and things like that to
spread out to different clusters and you
get scalability and and but a lot of the
times we find that problems can't be
easily supply know sort of split up into
small chunks and then you just have to
have everything in one heap so this is
why yes you can Kuster certain
application but sometimes you just have
to because of efficiency issue then you
have just have to have the big
applications and that's that's that
that's why we you still have those just
to add on to this your first question
the the question on asking Oracle to fix
things or we we make the changes
internally we do try to minimize not to
diverge from the Oracle build or from
the upstream of JDK so whenever is
possible we just encourage Oracle or the
open JDK community to actually fix it so
we we are that's why and
we want to contribute to openjdk so
anything that we find that we suggest to
the OpenJDK project and and that
hopefully will go into the open JDK
build and then we use that resistance I
don't know I'm qualified to answer that
question I think that's for more
commercial decision in terms of things
are doing think I'm more qualified
because I'm only a techie don't think
I'm qualified either but I'm feel free
to come from and supplying it something
like that come to our booth to actually
discuss that but I think thing I'm
qualified to comment
you have to do regression testing out
the wazoo to make sure that you have the
JDK you guys see this genuine or you
have some kind of formal other
methodology so that you're absolutely
sure that you're running all the
regression so well there so that's where
we we as I mentioned earlier with the
we've got our own the certification
process but it consists of not just
performance benchmark which we we pick
the tests based on exactly what you're
saying in testing is important but we
want to make sure that it covers all the
different areas so we have test cases
that will stress the heap size
stress GC and we have tests that is for
time and throughput you know to make
sure that's and also regressions and
also it does he fall if we keep on
adding new test cases so if we got our
we automated as well so we really want
to be able to so the ultimate goal of
not not quite there yet ultimate go is
that every single time we compile and
Jenkins to generate continuous bill of
OpenJDK runs through all the tests and
and it will basically gives you a
confidence and another thing to bear in
mind is that there's no testing in the
world that will completely especially
with the JDK that's such a complex piece
of software you can never ever hundred
percent be sure and by the way I
actually found we've actually found a
couple of bucks that supply no really
silly but they haven't they haven't
completely found it with their testing
which I'm not gonna come and I tell you
I'll tell you off the record that
but but so bear in mind that you can
hundred percent so that complex piece of
software we try as much as possible that
we can be supplying the ninety percent
confident that this is good but you we
can't we can never guarantee completely
that say so like I didn't know you
remember the autumn the License
Agreement let's say doing run it with
nuclear yeah what Julian is just a
framework right
but obviously you still need to write
the tests and the tests we take a lot of
tests available out there so if you go
around there's a lot officer be
questioned test included in the open JDK
source code which by the way before open
JDK it wasn't available but now all
those regression test is now available
for you and in fact if you interested in
contributing The Omen JDK that's a
really good place to start right
regression tests it's it's covered a lot
but it doesn't cover everything if we
look at the regression test which mean
open JDK source code so if people want
an easy piece of work to start with open
JDK get involving it that's a very good
place to start and you see a lot of
other tests without their different
benchmark so we try to sawfly work out a
range of benchmark that were
representative of how our application
use Java yes so this is yeah JT yeah JT
or a truce is basically the regression
test framework inside open JDK sources
that I just talked about so when we've
built the over JDK builds Faithie wreck
is part off the duffel so you can yeah
yeah so so and we encourage you if you
want a really easy entry point for
contributing open JDK project JT
wretches the regression test is a really
good point okay time we got one
I'm afraid into a low degree so I can't
I can't comment on the so my the thing I
can comment on is it's sometimes you
yeah you if you're working in a large
enterprises you might get resistance in
terms of soft liner getting in certain
terms agreed but I mean person that it's
it's it once you get through the legal
stuff being able to sign that piece of
paper it's it's it's very easy to get
involved and they're quite but I'm
afraid I can't comment on the the actual
agreement and how it works and things
add up because I'm I'm not qualified
yeah I just give you an idea the London
traffic community they've also signed
the OCA as well so that is basically a
community else eyes not you know backed
by any big into enterprise and they were
able to sign the OCA and and it really
depends on your company where you are
yeah and I think all you can even join
the community so there's another way of
contributing to over JDK so I I don't
know if Linda Java community is unique
in that sense but there might be other
other way where you're from but the
there might be a local one that they
actually yes
yes this is available publicly so you
can see the list of contributors okay
not from us reject em have we enjoy we
get the chance at not from us so far I
think the our thing in general if the
pub is if you if we generate bug-fix so
there there requirements is basically
your your box fix you need to have a
test case that demonstrate it and and
make sure that your coding standard is
according to that so for my my patch
that I submit initially I submit a test
case but a test case wasn't in the right
format so they want us to use the new
API for launching processes so I have to
change my test cases my experience is
that in general they do reject a patch
if you willing to work for with them to
actually make sure that your your
passion at the end of the day
Oracle team owns that pretty much the
Java platform and it's pretty much their
cook base but that they they are self
contributions and so you need to respect
the kind of coding standard and respect
their way to manage your thing
- gypsum and the auntie didn't have the
facilities detect on hardware platforms
that are requested that's what this
change second though you know for a
number of years quite a complicated
conversation with that because the
Oracle reject you know patches I mean
they they would have a very good reason
to and AMD on the other side also have
very good reason why they didn't that so
yeah I think I can't because speak on
behalf of Oracle's I yeah I can yeah my
experience is that if you work closely
with them but I will suggest what you do
is be calm all the conversations is the
the may on the mailing list if you go to
the open JDK website you can go to the
archive list and look at how people you
know the discuss about the patches and
changes in open JDK everything is all in
open so you can see actually the
back-and-forth the conversations they
had when people so many patches yeah and
anything everything is perfect and I
think it it takes time so you need to
keep shouting to Oracle and tell them
guys please improve the process and yeah
I'm sure I mean it took them quite a
long time to open their buck database
etc but they eventually do it so I think
that's the important things to remember
just just keep
their comments thank you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>