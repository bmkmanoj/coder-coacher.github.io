<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>JSON in the Oracle Database: Schema Discovery with the JSON Dataguide | Coder Coacher - Coaching Coders</title><meta content="JSON in the Oracle Database: Schema Discovery with the JSON Dataguide - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Developers/">Oracle Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>JSON in the Oracle Database: Schema Discovery with the JSON Dataguide</b></h2><h5 class="post__date">2018-02-05</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/hEZ_4JqSkpo" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello and welcome to the short demo of
Jason in the Oracle database today I
will introduce you to the JSON data
guide our new tool for JSON schema
discovery I've created a table here
called demo tap which stores the data in
a column called JSON data and to make
sure that only valid jason can be
inserted I added a check constraint so
this prevents any non JSON data to be
inserted and the demo data we are using
here are tweets from Twitter so let's
insert one of these JSON documents into
the database and if we introspect or if
we take a look at this Jason we see all
the key value pairs we see there's user
fields there is a text field this is the
tweet and a bunch of other field
language which allow us to query the
data so if we know there is a certain
field we can use that to query it so
here week we're demo table the column
and then the language field which we see
here
and we expect the result to be yes
standing for Spanish right so if I
change this field Lang to timestamp ms I
would see that numeric timestamp value
here obviously reading through JSON
document to find all the key names that
occur only works if you have one or a
handful so what happens if you if you
have thousands or 10,000 so this is a an
insert from select from an external
table which inserts 50,000 tweets and we
can obviously select all these 50,000
tweets but copy one and paste into a
pretty printer so those are pretty much
all the fields we already saw in our
first document that we inserted there's
some fields which we haven't seen I
think we didn't see the geo fiirt or
entities field here
looking at all these 50,000 instances is
obviously impossible to find out all the
occurring key names so this is the
motivation for the JSON data guide which
is an aggregate function which scans the
entire JSON data and gives us a summary
let's take a look at it
copying it again pasting it into the
pretty printer so this is what we call
the JSON data guide it is a summary of
all the JSON instance documents that
were scanned in this case all the 50,000
tweets and as and it gives us a schema
summary it's a list of all the field
names that were found together with the
data type and some information about the
length about the values corresponding to
this field so the data guide itself here
is rendered as a JSON array and it
contains a list of these objects and
each object has a field o path or oh :
path which gives us information about
the path to the field name or to the key
in this case dollar dot ID is the path
to the field name ID which is always of
type number so all the 50,000 documents
we scanned had an ID as a number and the
o : length gives us a length hint about
the value it's a power of two and here
the 32 indicates that every ID that was
found was under or equal to 32
characters so now here the second field
dollar dgo shows us as being now in some
cases and also as being an object in
some other cases so we see that dollar G
you may have different types so if it's
now the length is 4 well null is 4
characters long but if it's an object
the combined character length is 60
forces rather a short object and now we
see that type follows GU so tai
is a field under the geo object and it's
a string with a maximum length of eight
and there is the coordinates array under
Geo so now we know that in some
instances there is a field dollar dot u
dot coordinates so let's query this so
this is the query select demo tab Jason
data dot geo well let's put a dot
coordinates and we also know that jason
data geo can be null so we added this
work loss here so this gives us back the
array that was mentioned in the JSON
data got if they leave out the geo
coordinates then I will just get the
entire object which has the type which
is point yeah if we go back to the JSON
data right here we can just scroll
through and see that there are many many
different fields that we did not see in
the sample document that we took a look
at so this function is very easy way for
you to scan all your JSON data to see if
there are any fields that you're not
aware of and in the next demo I will
show how you make the JSON data guide
part of the Jason search index and how
you can use it to create views thank you
for watching</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>