<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>How to Hack Into Your Oracle Database via Node js Using SQL Injection | Coder Coacher - Coaching Coders</title><meta content="How to Hack Into Your Oracle Database via Node js Using SQL Injection - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Developers/">Oracle Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>How to Hack Into Your Oracle Database via Node js Using SQL Injection</b></h2><h5 class="post__date">2017-12-15</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/_0q15qX6oUs" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hi everyone I'm Chris Saxon I've got
damn again here with me hello everyone
hi Chris fine Dave her hacking it sure
is done it's a great day
you know I love the smell of stolen data
in the morning so we're developer
advocate Oracle developer act because
it's our job to help you build database
applications using Oracle and we want to
help you build secure applications when
we do that so today we're going to be
looking at something that comes up quite
a lot that's sequel injection so I have
a standard disclaimer before we begin
let's get started now some of you may
well be familiar with sequel injection
be thinking to yourself well you know
it's 2017 sequel injection is a really
old attack it's been around basically as
long as sequels been around so 20-30
years you might go well do we still need
to talk about this and unfortunately I I
think the answer is yes now it can't
have escaped your attention that there's
been a large number of data breaches
over recent years and in some cases it's
easy to look at the sites involved and
kind of go well maybe the people
deserved that but I think that's kind of
like the wrong attitude you know even if
they're using a dubious site like Ashley
Madison if you're using a service you've
got a right to expect they're going to
keep your data private and not share it
with the whole world but whatever your
opinions on this I'm sure no one's happy
about the massive Equifax hack that's
happened recently you know if you live
in the u.s. there's a very good chance
that you were caught up in this data
breach and even for myself in the UK it
did affect a few hundred thousands of us
as well so you know I'm currently we're
even more in limbo because we've no idea
what exactly happened here now this
wasn't actually a sequel injection
attack the problem here was that they
had an unpatched patch Lee struts module
and over a number of weeks hackers were
able to suck more and more data out of
it because there was a problem with the
version that they were on but let's turn
to something which is bit
more upsetting for me and something that
was actually a sequel injection attack
and that's between maker VTech so a
couple years ago they had a data breach
or data hole and which was a sequel
injection vulnerability and in this
details of something like four and a
half million people were exposed and it
wasn't just things like names and
addresses here this was actual photos
chat logs of conversations parents were
having with their kids or stuff children
had captured on these toys and I've got
a couple of young girls and they've got
about billion of these VTech toys you
know if we'd had the things that were
part this breach or we use their online
services there is a very high chance we
would have been caught up in this breach
so and I find those personally pretty
scary something else so in the UK which
I've found scary is a couple years ago
the broadband provided talk talk again
they suffered a sequel injection attack
and as part of this they leaked the
names addresses of 150,000 customers and
in about 10% of those cases so 15,000
people they also leaked things like bank
account details and this is something
that's particularly worrying for me in
the UK because we've got this lovely
thing called the snoopers charter where
broadband internet providers are
required to keep a year's worth of your
browsing history so - so the authorities
can own let's investigate any kind of
potential terrorism related incidents
but you know if
this means that these internet companies
have a huge amount of data on you not
only do they have things like your name
address and bank account details and so
on they know every site you visited for
the past year so they can build up a
really good picture of who you are
and you know if a hacker is able to get
this information if that's exposed in a
data breach becomes really easy for
someone to steal your identity not only
do they know all your kind of personal
details they got a lot of the background
about who you are what you do what kind
of sites you visit so it becomes much
easier to impersonate you so this is you
know really scary like I say this was a
sequel injection attack now maybe you
kind of think well not to worry about
this but if you're a blogger there's a
good chance that you use WordPress they
say how is something like half the
Internet this had a sequel injection
vulnerability in just this year so back
in January this year they discovered a
sequel injection vulnerability they were
pretty good about they patched it in a
couple of weeks but then they decided
well you know that's not good if you
know that's just one vulnerability they
had another three vulnerability in July
this yeah so that's just three months
three months ago so it's you know the
this is still a real problem we still
have wide hugely popular applications
with these vulnerabilities in them and
maybe you don't use WordPress maybe use
some other content management system
like Joomla they also had a sequel
injection vulnerability in just April
this year so this is a problem that's
not going away and I you know I wish it
wasn't the case but it's still here so
what I wanted us to do is what we're
gonna do is we're gonna have a quick
demonstration just how easy it is to
kind of get into a vulnerable
application so it's kind of do this I'm
gonna get down here to build as an
application sit down and you can you
build me an app absolutely Chris
clackety-clackety-clackety- M I'm done I
used a template and created an app
deployed it to Oracle cloud and I just
emailed you a link to get to it
fantastic not that that
is really fast and how did you know how
did you do that so quick copy pasta from
stackoverflow okay so I'm sure that must
be really skill then right oh well yeah
okay so yeah maybe I'm not so sure so
let's just have a quick look so we got a
simple login application here we can get
in super app that sounds great and we
can get in you see it's identifying me
so um I say I'm not too sure about this
let's I want to check and see what's
actually going on here so what I'm gonna
do now I could go in and try the form
but I'm gonna do a different method so
I've got this little tool here called
sequel map so this is a command-line -
based program that you can get so let's
just try I'm gonna place the correct
command in that helps I'm gonna run this
in wizard mode so all we do call sequel
map in wizard mode and then I pass it
the URL of the application when it get
started
so there we go and let's just start with
a basic normal attack nice and easy
when they do basically enumeration there
we go this is gonna take a moment or so
to run and Wow boom okay already we can
see this thing applications vulnerable I
mean come on Dan
was it yeah oh oh in need so you see
this we've got a problem here right
it's we can see what the database were
using so we can see Oracle we can see
which version it is so we know we're on
latest release but maybe we can look see
there's any vulnerabilities related to
that we come in as a god user well why
do we say that because the users DBA
so let's try running this again we found
some basic information there but I'll
rerun it we'll look for a bit more
details and call that in wizard mode
again and we pass that in I'm going to
get bit more information and that's
screwed the thing up unfortunately let's
just try that again I'll pass the URL in
the part the connect string this time
and they will give a second to get going
there we go and rather than I'm just
doing basic let's go for it intermediate
enumeration let's see what we can find
so this is probably gonna take a second
or two to run whoa that's what we got
here
we can see we're getting a whole bunch
of information out the application we're
finding all the schemers in the exists
and all the tables that exist and all
sorts of information and this is just
gonna keep going we can see all the cons
as well basically we can see everything
so we've come in as you know a god user
got DBA privileges that as access to see
everything in the database this is just
gonna keep going and going I think
there's a lot of stuff in here Dan I
mean this isn't good you know we need to
get it so to use a lower privileged user
if I can keep my job yeah if you can fix
this if you keep your job Oh what should
I have done instead so there's a couple
of couple of problems here first up
we've given this user DBA privileges so
they got access to the whole entire
database and this is just gonna go and
go and go isn't it and we can see
everything in here so that's the first
problem
second problem is we've come in as a
application user that owns the tables so
we've got direct access to the tables in
our schema and we've got the highest
level of privilege we've got we need to
kind of split those out
so let's can you just deploy quick a new
version of that app quick sure
clickity clickity completely boom it's
up there I put it under less insecure
less insecure that sounds well i sounds
better but i'm not entirely convinced so
let's just try less insecure so let's
see
oh it's and we still got yeah we still
got working application here but I'm not
convinced by this kind of less insecure
version you know that doesn't give me a
nice warm fuzzy feeling inside
let's try hacking it again now I showed
wizard mode for a sequel map but there's
also a whole bunch of parameters to it
so you can do
things like look for specific columns or
specific tables and I'm you know let's
imagine I'm a hack here I'm going
fishing I want to look for some juicy
details so what are the juicy things I
can look for usernames and passwords so
let's just do a string like this we can
see we're pulling out username password
there and let's run that and then
hopefully or hopefully not depending on
which way you want to look at it we're
gonna see some information here so it
will just go through and yea-ah bang ok
oh man dan is I'm sorry passwords in
plain text there Dan there this is not
good
come on I can hash them but it's gonna
take me some time sometime okay so you
know you mean more than like 10 seconds
okay all right then so I think we need
gonna we're gonna need a stopgap
solution here because clearly we should
be hashing the password so people can
can't just see what's going on here what
I'm gonna do is I'm going to use
something called data redaction so this
is a feature an option for Oracle
database it's part of the advanced
security option alright then so let's
try so let's run this and there we go so
we're now we're in so let's try running
this again so we've redacted some data
let's see what we can see here let's try
and it's gonna take a moment or so to
run but hopefully when it comes back ah
there we go
cool nice nice right so we've masked out
those usernames and passwords passwords
we just see null can't see them at all
user names have got these nice xxx going
on oh do I still need to hash the
password yeah Dan yeah you still need to
hash the passwords
I mean we're still vulnerable to sequel
injection here right we've still seen
that table so what data redaction does
is it only masks the data that it as it
fetches it out of the database so
columns you select but you can still
inject into your where clause so the
data is not mass
in your where calls or enjoins and so on
so if we go back to the app what that
means is I can kind of go in and do the
you know the classic or whatever equals
so I'll just show you what I'm going to
type here so I don't put this in the
password field check whether something
somebody's password equals password
you know the classic whatever they want
so we'll just put some junk in here and
what are we gonna see and yep okay so
you can see I'm not Dave I've found
someone else's details here so you know
we're a step better here we've masked
the information out so people who are
just casually snooping can't easily find
it but you know we can still go through
trial sorts of different usernames and
passwords and just keep going until we
hit something because we all know what
does everyone put that password is
password one we can easily find all
those using their email addresses user
names that relate to that so yeah we're
doing better we put off like the casual
hacker probably but if someone really
wants this data they still gonna find it
right so what do we need to do here Dan
come on we've got to fix it properly was
yeah I need to prevent the sequel
injection give me just a minute look at
the clickety click Li and boom I got a
new version out there it's finally
secure it's finally secure you sure
about this so finger crap
fingers crossed yeah so what let's try
let's just try running the wizard again
get the wizard running again and we've
gone for a secure I like a name secure
that sounds good ok and this will take a
second or so to run and let's get it
let's go for let's go for hard we said
it secure so let's try hard and let's
just go for basic now hopefully this is
secure and so you know what did you do
there to make it secure down I ended up
using buying variable ok you get that
from sack overflow as well there's some
good stuff there right some good stuff
ok so
with cure now and you see this is just
hanging and we've locked down our
application essentially so we got buying
variables we reduce the privileges so
this won't see anything and what sequel
maps doing is it's just testing out all
sorts of various combinations of attacks
and it can do if you saw a bit further
up yeah this lovely bunch of gibberish
basically it's going through trying all
various known things it can give it
sequel injection attacks it can try and
it's just gonna keep going there's like
thousands of these programmed in so
basically an eight-year-old could launch
that attack exactly I mean this is
probably the scary thing you know I
don't need to know anything about sequel
I don't even really need to know
anything about programming I just got a
have a few spare moments of my hair on
my time and when I go out and you know
maybe you know it I may not even want
your data particularly I might just be a
bit bored have some time in my hands and
want to go out and try and see what I
can find exactly this is actually what
happens in some of these cases you just
got some script Kitty in their basement
or wherever and they get bored they saw
they're gonna try and attack these
various sites and every now and again
they hit jackpot make the news the
company goes bust and they spent 20
years in jail or something and it's so
sad story yeah but you know everyone
here everyone watching this doesn't want
that to happen to them do it do they I
hope that I hope that so we've covered
quite a lot of stuff here so let's just
kind of jump walk back through what
we've done so that was a you know as we
saw a sequel map it's a really simple
tool really easy to use but it can
really easily expose a whole stack of
information out of your database so
let's walk through what we did to make
securely application and talk about
sequin gesture and how it works so the
whole problem stems from the fact that
we were building up our sequel statement
and we did it like this so you can see
we get our we're selecting from the
users
tables where the username and password
equals whatever we've received from the
forum so that that text those variables
then becomes part of the sequel
statement so if I'm passing for example
Chris Chris the sequel statement that
goes to the database looks like this
problem here is of course we can pass
anything we want and it becomes part of
that sequel text so you can do the
classic or one equals one so one of
equals one is always true and if you got
something with or and it's always true
that gives you all the rows from the
table so we've got our comments here
it's kind of in the sequel statement
this is finds as everything in table but
as we saw the problem isn't limited to
this that's you know yeah user names and
passwords bad but you might go well one
of this vulnerabilities like on the
countries table or you know some other
reference data that doesn't really
matter if it goes missing well of course
as we saw we can see other things doing
tricks like this you do Union all and
you can find all the other tables that
your database users got access to and
then you can just keep kind of iterating
through this you go through all the
tables and you look at all the columns
and keep going until you find something
that kind of looks a bit juicy and then
you Union that onto your sequel query so
this is a bit of a problem and so how
did we stop it or what was going on well
let's look at how the application was
set up to begin with so we got our
application coming in and it's connected
as a god user so this was our first
really insecure version of the
application so as I said there was
there's two problems with this we come
in as a god user and it is accessing
tables in its own schema so well why is
this problem accessing tables in your
own scheme as a problem because you've
always got full privileges to do
whatever you want on them doesn't matter
whether you've got deeb a DBA privileges
or as few privileges as possible you can
always alter your own tables and muck
around with them so maybe someone
doesn't want to steal your data they've
got they just don't like your company
maybe they've had a bad experience
whatever and they want to call
mischeif you know they potentially they
could get in do things like alter the
tables maybe drop the tables another
nasty stuff so we want to resolve this
the other thing is I say we come in as
God so that means we can see all the
other tables in every other you every
other schema in that database and not
just like we got access to do whatever
we want on our own tables the DBA user
can go around and just start dropping
other people's tables as well so it's
nice or not no if someone wants to kind
of really screw your company over they
could you know suck all the data out get
it
all the information and then just go and
like drop all the tables so now not only
if you got like the PR nightmare of
having all these data leaked and you
know that's not trivial to fix you've
also got the fact that your application
just won't work you know the tables are
all gone and you go wait until you can
recover from backup or do whatever you
need to do to get a DBA with a panic
attack exactly the DBA will definitely
you know DBAs aren't the happiest people
the best times early Dan they're
definitely gonna come for you in this
situation yeah so so how can we fix this
what can we do well the first thing we
need to do is just get changed from that
DBA use it to one who's got as few
privileges as possible so basically just
be it pretty much just to connect to the
database really and then remove all the
tables from the schema and then give it
exactly and only the privileges it needs
to do its job so you know select from
the tables it needs to select and insert
update or delete on the tables it needs
to delete this means it can't go and
wreak serious havoc and of course this
means that as well avoiding accidental
data damage as well because it's
important to remember you know people
are out there yes there's bad people out
there trying to steal our data but
sometimes we've got to protect ourselves
from ourselves too right
we've all seen the situation where
someone's run that script on the wrong
database and drop the whole drop
something they shouldn't have done so
this is as well just helping protect
ourselves yeah thanks a lot of thank ya
so we've we've reduced the privileges
we've reduced the attack surface reduce
the things that they can do in the
database the next step we took was we
used feature called data redaction so as
I said this is part of the advanced
security option for Oracle database and
what this does is you define policies
and then on the fly it will mask that
out according to how you defined it so
this can be you know regular expression
replacement so the classic is you know
you want to mask out credit card numbers
and just show the last four digits so
this is kind of useful if you've got
things like admin applications you've
got your call center agents you don't
want them to be able to see full details
of credit card numbers but they may need
to see those last few digits to help
verify information with the customer and
again things like email addresses you
generally you want a few people to be
able to see those as possible so you can
match that information out so this is
good to help kind of prevent casual
snooping but it doesn't remove the
problem completely as we saw it's still
vulnerable to sequel injection so we can
still come in and do whatever we want
typically we've got time we can just
keep going through trying different
passwords or different credit card
numbers or whatever it is well I'm
hoping to find until we get the
information we want and spawn to
remember this attack could take place
over a long period of time the the
Equifax attack actually took place over
several several weeks whoever did it
found the vulnerability and gradually
started getting more and more data out
over a period of weeks so it's not
always that the hackers are going to
come just do a hit and run try and grab
everything then go if they think there's
information to be found and the
vulnerability isn't discovered and
patched and no fixed they're just gonna
keep coming back keep coming back until
David
today everything you've got so that was
kind of we got more secure we're getting
better but the thing that really stopped
sequel injection is you know we have to
use buying variables so this enable the
this prevented sequel injection
completely so you know you're the genius
who fix this down so I think I should
handle leave it to you to kind of
explain how this all works thank you
Chris I have learned a lot about behind
variables and I'm happy to share some of
that so the easiest way for folks that
are new to these is the thing of buying
variables as placeholders for values and
your sequel and PL sequel code and
unlike certain types of escaping these
these are not escaped at all in fact the
values themselves end up going through
an entirely separate code path they
never become part of the sequel
statement and that's really important
and I'll come back to why that is a
little bit later so let's go with a very
simple example imagine you have this
table T as you can see it has two
columns c1 and c2 and what you want to
do is insert a row into this table we're
going to use the node.js driver to do
this you want to insert a row and you
want to do this safely using buying
variables well here's an example using
what we call positional notation or
binding by position and so as you can
see here on line 11 or actually if I go
up a bit so on line 8 here I'm getting a
connection to the database and then I'm
using that connection to execute a
sequel statement so here's that
statement we're inserting into our
simple table these two columns and the
values are here and we see finally these
buying variables coming in and depending
on what database you're using it may
vary these could be a question mark but
with Oracle database these will be
colons
and so we put the colon in front of the
string and of course the string has to
follow the standard Oracle naming
conventions but then these are just
placeholders right so what are the
values come in the values come in in the
second parameter to the execute
statement with this driver and you can
see that this is in JavaScript an array
an array of values and the order of the
values in the array become the values
and the bind variables in there
in the same order as the as they appear
within the sequel statement so this is
good it works it's safe but there is a
better way to do this and that is called
by name and so the difference here is
that rather than use an array to bind
we're using a JavaScript object and of
course the objects have these name value
pairs and I've purposefully put value
two here before value 1 because the
order of the values and the object is
irrelevant they simply get mapped by
name so the advantage here is if you
have say an anonymous PL sequel block
that you're executing and you need to
modify that code you don't have to worry
about changing the order of the values
in an array it'll just continue to bind
as it always had previously so in terms
of choosing between position or name I
highly recommend folks to use by name
always great so we've got a nice secure
sequel there thanks Don thanks for
explaining that let's just okay you
clear that out cool so you know a lot of
people kind of hear that and I think
most people watching this would probably
at least heard of sequel injection but
some of you might be like well you know
this doesn't I don't need to worry about
this or I can't do this so let's look at
some of the kind of common injections
and reasons people come up with so one
of the first on most common reasons
people say for not using my variables is
they've got a dynamic sequel so this is
sequel where the statement the text of
the statement changes based on user
inputs so it could be you got different
where clause or it could be that you
actually substitute in completely
different tables and so on so a couple
of things here first up if you're all
you're doing is changing your where
clause so you adding or removing columns
from it you can still use bind variables
there you just need to change the values
that you're binding when you do that so
you can still bind your where Clause but
you cannot bind identifiers so table now
: names and things like that those still
have to be pasted directly into the
sequel statement so you still got to
build it up and this can be a problem so
first thing to do is you know you need
to be really paranoid whenever you're
building up something based on user name
input you've got to be really paranoid
they put anything in there particularly
on the big bad web anyone out there
could pass whatever they want so if at
all possible don't accept the input from
the user directly so even if they're
gonna pass the table name to you just
have like you know an if statement
you know if the input equals Table one
make your code hard code the text Table
one so you're not actually accepting
what they say you're just mapping it to
what the real table names are and that
should cover most cases you should be
able to do that in the vast majority of
instances but every now and then you do
need to write some sequel where you're
genuinely gonna accept any number of
table names or column names and there's
you know it could be any number of
tables in your database you don't know
exactly what they are so in those
situations it's not kind of feasible to
do the mapping in your directly in your
code so in this situation I tase the
input so as I said do not trust that the
users are just going to be all nice and
pass exactly what you wanted and so to
send an i sanitized the input you need
to make sure that thing is things like
you know it conforms to Oracle's naming
conventions it's not got quotes in and
things like that now you can go ahead
and try and build your own one I
absolutely tell you don't do that what
you should do in say instead is use DBMS
assert so this has a bunch of functions
built into it which you can validate
that what people have passed is a valid
sequel string of an valid table name so
we take a look at a little example here
we got some code which is being used to
change users passwords
now there's a couple of problems with
this first up this is actual database
schema passwords so the user names in
the database so those are ident
identifiers so we can't bind those so
that's the first problem the second
problem is that in theory you'd think we
could bind passwords but unfortunately
you can't so both parts of these are
things that we are unable to bind so we
need to go through and check that the
sequel statement is a you know a simple
sequel name so it's a real user in the
database and also when we're receiving
the password we need to encode that so
put the double quotes around this now
note this does mean that you can no
longer accept passwords which have a
single quote in them so you'll need to
add to that to your password validation
rules so something to bear in mind but
we can do this we can protect against
sequel injection so we talked about
dynamic sequel and that's why say the
most common injection people have for
not using bind variables or not
protecting their code correctly another
common people have is they say well it's
all very well if the applications out
there in the big bad into that anyone
could be trying to attack it but I just
developed some kind of internal
application it's some kind of
administration out or something like
that so I don't need to worry about that
right well unfortunately you still need
to worry about this it said that most
theft is actually carried out by
employees now different organizations
have different surveys about the exact
figures here but somewhere in the region
of 1/2 of kind of fraud and theft is
carried out by employees so you can't
just trust that the fact that it's only
accessible internally means that no
one's gonna be able to steal it now all
it takes is an employee who's
disgruntled they had to scream with
their boss they want to take it out
their company and they want to get that
information maybe you know they may not
even be that upset with the company
maybe they're just in a bad financial
situation like
looking to make some quick money I want
to sell the data on the black market or
something like that and it's important
to remember here that employees have an
advantage over the general people in the
internet they know what your internal
applications are they know which ones
are likely to hold valuable information
things like personally identifiable data
credit card information that kind of
thing
so they know where to look and what to
attack and as I said if you've not
protected these internal applications
they can they'll be able to access it
very easily
another problem is just because you
think it's internal doesn't necessarily
mean it is internal bigger companies
tend to have very complex networks and
it can be really hard to be absolutely
certain that there is absolutely no way
from someone on the internet to come and
access your intranet so and but it's
also worth remembering even if you know
you completely follow up firewalled off
so no one can come in virtually or
digitally so to speak they may still be
able to get physical access for example
previous company I worked at we had a
training center which we used to train
up our internal employees on how to use
uh software and things like that
but it was also available for the
general public to hire for whatever they
wanted and so one day someone turned up
and sat down at one of these machines
and within about 15 minutes they'd
managed to discover some information
that they really shouldn't have been
able to see why well all those machines
had the Oracle client on them because we
needed that to run our internal software
and because they were in touch inside
the company intranet there was various
things like database links to more
secure databases they could do i island
hop around various application servers
and so on so you know even if they can't
come out via the internet some people
may be able to find a way into your
database into your data center
physically you know they can get access
to a terminal which is inside your
network somehow unfortunately in this
situation of my previous company we
didn't lose any data
our network diffusion intrusion software
identified that something a little bit
fishy was going on so we picked up the
person and it was part of a organised
penetration test so we'd hired a company
to come in and just randomly try and see
what they could do to access information
on our network so there was we learned
some lessons from that but there was no
big fallout but this could be happening
at any time
from someone who is looking to do
malicious damage or steal some
information from your company so just
because it's internal doesn't mean it's
safe so those kind of common injections
but another one you know it's easy for
me and Dan to kind of stand up here and
say you know you must you bind variables
you must be completely secure you must
make sure everything's absolutely
lockdown as possible but I know you know
you're all under a lot of pressure I'm
sure your managers are there they say
they want their features out yesterday
they you're gonna be deploying code
quickly and you're under a lot of
pressure to get stuff done oh you know I
get it and so there's a couple of things
kind of say here first up you know as we
saw sequel map it's a command-line tool
so there's a good chance you can
integrate that into your continuous
integration continuous deployment
applications or your regression testing
whatever it is whenever you check in
changes just have that go out and test
all your inputs endpoints do a very
basic wizard attack see if there's any
obvious vulnerabilities so you can
automate that part of it the other thing
is well you know the good side of the
Equifax breach if there is a good side
is it gives you more ammunition to kind
of push back in your manager and say
look you know we need to make sure this
data is secure
do you want to be the next Equifax do
you want our data to be leaked all over
the Internet
is this is kind of thing that syncs
companies and it's worth remembering as
well that it's not just that the
reputational damage to the company
there's like criminal investigations
happening on senior management arm of
Equifax so you know there's change
the real consequences to management if
if you don't take these steps who gives
you a bit more ammunition to kind of
push back but even saying all that it
can still be difficult to ensure you've
got time let's imagine you're a fast
growing company you bring your new
developers all the time you've got a
pushing changes out as quickly as
possible it can be hard to validate and
ensure that all the new developers you
know are producing high-quality code
which is good enough so there may be
extra steps you need to do to take to
secure your application one of the
things you can do is we've got a product
called database firewall and what that
does is it sits between your application
and the database and it monitors all the
sequel traffic coming in so it can look
for anything suspicious so you can run
it in a whitelist mode where you only
allow certain statements to the database
or you can run it in black mismo to
reject certain things so this can sit
there and just monitor what's going in
and if it sees something it doesn't
doesn't like just ping it back send it
out so you can use this as an added
layer of protection for your application
another thing you can do similar to as
we saw in data redaction there's another
couple of policy based features you can
use Virtual Private database and real
application security so like with data
redaction you define policies on your
data around what people can see so a
classic example employee data people
should only be able to see their own
social security number and the salary of
the direct report so if you look at
Matthew Vice here he should only see the
his own social security number and the
salary of those below him and you might
think okay well how's this data
different from data redaction Virtual
Private database and Raz also allow you
to completely exclude rows from your
data set so there's things people
shouldn't be able to see then and you
can wipe it out completely
also it's kind of an all-or-nothing so
either
see the salary or you don't wear as data
redaction you can mask out certain parts
of it so these just extra things you can
have in your toolkit to kind of protect
your data even if developers are not
always writing safe secure code so we've
looked at various things here but we
need to look at how we're making sure
every the whole stack secure so you can
you talk about this Dan yeah the next
thing I want to talk about is encryption
because we spent a lot of time
discussing buying variables but the
ultimate goal of the buying variables
was to prevent unauthorized users from
getting access to data they shouldn't
have access to right but when you think
about it if the way that you're sending
data across the network is unsecure they
have other means to get that data they
don't necessarily need sequel injection
right so when people start thinking
about security the first thing they
think about is encrypting the connection
between the clients and the mid-tier
typically some kind of web server and so
they go out and they purchase their SSL
certificates to get that up and running
and configured and they're good to go
right so the next place they're going to
focus is probably in the database and we
have a product called transparent data
encryption we make this really easy so
you can encrypt your data at rest make
sure that it's secure even even when you
back it up you don't have to worry about
that so you're good to go and the only
missing piece of the puzzle then becomes
encrypting the communication between the
web server and the database and a lot of
folks think that this is probably
overkill and not worth the time and
effort right
well this slide looks familiar to anyone
notice I think I've seen that somewhere
before that this is one of the many
slides that came out after Edward
Snowden revealed the prism project and
if you focus your attention to this part
right here it says SSL added and removed
here smiley face so basically you know
if the good guys are taking advantage of
folks not encrypting on the back
you think the bad guys are going to do
it too probably right
well believe it or not it's a lot easier
than you may think
to encrypt those connections so what I
have here is a really basic query and
I'm selecting primarily you know just
two tables here so I'm using B dollar
sign session and B dollar sign session
Connect info to tell whether or not I'm
using encryption with a connection and
when I execute that query and I'm not
using encryption I get these three rows
back and we do see some information
related to encryption and crypto
checksumming it basically lets just know
that these services are available but
we're not currently using them so how
could I go about doing that well I
should say that you can do this two
different ways one way is from the
database and the other ways from the
client and the preferred method would to
be to do this from the database the
advantage being that you can basically
enforce all connections coming into the
database to be encrypted but if you're
just getting started on the encryption
journey that may not be practical so of
course you can do it from the client
side as well and that's what I have here
for an example so imagine you're in the
mid tier and you're node.js server what
you need to do is create a sequel meta
or a file and you just add the four
lines you see below here to that file
then save that file to a location like
opt Oracle config then all you need to
do is point your TNS admin to point to
that directory and then when you run
your node.js application it will take
that file into account so if we write
run that same query we're going to
notice two new lines here that let us
know we see the encryption service
adapter adapter and the crypto services
adapter as well so we know that the
encryption is running but you know for
some folks that may not be enough
they're actually going to want to see it
right
that's possible too with just a few more
lines of code it's not very practical in
some cases to install Wireshark on some
let's go back one slide
it's not very practical in some cases to
install Wireshark on a database server
or on an application server but you
actually want to verify that it is in
fact encrypted so what I have here are
some new lines that you can add your
sequel minora
and basically what they're going to do
is enable a diagnostic trace and then
you basically run two tests and the
first test you take lines 6 through 9
here and you just comment them out with
hashes and run that once and then you
run the second test with those same
lines not commented out or actually
there and what you'll get then are two
separate trace files so in the first
test when you did not have and Christian
enabled you will see the sequel
statement in this case for seeing that
select go out but in addition to that
you're also going to see the data that's
coming back as well and of course in
that second test once we have encryption
enabled you're not going to be breathing
anything so once that's taken care of
your encrypted end-to-end and then of
course with your bind variables you know
that data is a lot more secure than it
otherwise be
that's great done so I think I think
we're secure now we've we've covered the
whole stack eminently everything
certainly oh yeah yeah right I think so
you've earned your job back yeah I think
you're safe ok all right then so you
know we covered a lot of stuff here and
some of you might be hopefully or
hopefully not a bit worried at this
point and kind of thinking well you know
how do I know how secure my application
is you yeah you've got not you you're
using bind variables so you're not at
risk of sequel injection but you're
worried about other security settings do
you have users with DBA privileges and
so on so one of the things we've got is
we've got this tool called DB saps ODB
database security assessment tool so
this is a free freely available
command-line tool you can use to assess
your database now this does just check
the database only layer so it doesn't
check the whole application stack but
what it does is it gives you a report
and tells you things like do my users
have a DBA privileges have I got
database links doing
things they shouldn't do so it gives you
a whole suite of things you can look at
and check in your database to see how
you can help tighten up and reduce the
attack surface area so what you got to
do is go to that my Oracle support link
and just download it run it against your
database and see if there's anything you
can improve so let's just wrap up as we
said we covered a lot of things here but
the key point is it's all about layers
it's about building up security in-depth
it's easy to make a mistake at any
single point you might forget buying
variables you might set up your
privileges in incorrectly but the
chances are you making the same mistake
at all points in the layer are very low
so the more things you've got the less
likely it is someone can creep through
and get your data so you know it's open
or we're all developers we've got to
make sure that our data is secure I
don't want to read about any more dates
breaches I don't want to see news
stories about how ever million or
billion people's Dita's were breached or
importantly I don't want my data to be
leaked I don't have to worry about me
being impersonated or my credit card
being stolen and things like that and
neither do you so we all gotta wait work
together make sure that we're building
safe secure applications so we can
protect data for the 21st century so I
hope you in learn something I'm not sure
I'm not sure enjoyed is correct the
right word for this kind of presentation
but we really hope that you've got
something from this so thanks for
joining us so it's goodbye from me and
thanks everyone
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>