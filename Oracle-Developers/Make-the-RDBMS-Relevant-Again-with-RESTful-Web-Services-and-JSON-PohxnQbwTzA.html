<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Make the RDBMS Relevant Again with RESTful Web Services and JSON | Coder Coacher - Coaching Coders</title><meta content="Make the RDBMS Relevant Again with RESTful Web Services and JSON - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Developers/">Oracle Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Make the RDBMS Relevant Again with RESTful Web Services and JSON</b></h2><h5 class="post__date">2017-10-04</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/PohxnQbwTzA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so by oh I have this website if you
Google funny Oracle stuff that's what I
do in my spare time because I have no
life
as a result of being on these Evangelist
programs I've got to visit lots of
places and talk to people about tech
which is something I love to do I've got
to show this slide otherwise I get
excommunicated you can read that some of
the time what I'm going to what I'm
going to talk about today is really the
options we've got from the database to
make yourself to look a bit more
relevant so if you're a database person
I think this is going to help you sort
of enter the new world if you're not a
database person this is a sort of stuff
that you can say to your database people
and say why aren't you doing this
because I think it's pretty cool so
let's jump into it what's the point
I'm hoping this is kind of obvious to
everyone but a lot of people now
consider the arguments our DBMS legacy
probably get shot for saying that in
this building at this time but as a
result certainly pl/sql as a language is
considered by most people to be legacy
so I nearly fell through the floor again
stop moving or lose weight really
quickly so if I'm a database developer
or a DBA how do I make myself look
irrelevant apart from learning MongoDB
so fortunately we have a bunch of tools
that Oracle provide that allow us to do
that so I can very easily use SQL or
pl/sql and presented as restful Web
Services and I'm that's the main body of
what I'm going to talk about today
because Jason is super popular and if
you don't realize that you probably
shouldn't be working in i2 so what is it
very briefly the best quote I've seen is
this one which is Jason is syntax for
serializing objects arrays numbers
strings boolean's and no it's based on
JavaScript syntax but distinct from it
some JavaScript is not Jason and some
Jason is not JavaScript this is where
some people say to me you do realize
javascript is not Java
Mansel yes so I love that description
because most of you are the ones I've
seen are a little bit boring and that
one's kind of to the point so in essence
what we got we've got name value pairs
but we also have objects which are comma
separated lists of stuff with curly
braces and we have arrays which are
comma separated lists of stuff with
square brackets and basically the value
in any of these can be one of those
other objects so we can build very
complex structures the relational people
will look at it and say hey that looks
like foreign keys and the relational
data so happy days
what is it important well kind of as
I've been involved in this stuff for a
long time so was there was a big fight
between who would win out of dotnet and
Java and then JavaScript came along and
kind of won so Jason is really important
because we can take some JSON text and
convert it directly into an object and
we can take a JavaScript object and
converted directly into JSON which makes
serializing stuff and sending it through
a web service or retrieving stuff from a
web service and using it super easy and
this is easy in a lot of languages now
but obviously JavaScript on the client
is super important so it makes a lot of
sense even if you don't care about
JavaScript then it's still pretty
important because we could think of JSON
as skinny XML and I'm fully aware of me
using the term skinny being rather
comical but let's move on doesn't matter
if you can't read this because it
doesn't matter but what we've got on the
left is some XML representing
departments and employees in that
department and when then we have the
Jason equivalent of that on the right
and the right
and if we were to minify that and check
the numbers what we'd see is the Jason
is a lot smaller and this is one of
those situations where smaller is good
so you might think well I'm cheating a
bit because that's attribute sorry
that's tag based XML I could make it a
bit leaner by using attribute they step
them out and yeah that's a bit leaner
but it's still not as lean as the JSON
equivalent so as far as data loads are
concerned well as far as data loads are
concerned then this is kind of important
to me as a data guy because anything
that reduces the size of stuff going
through the wire has got to be a good
thing okay so what's rest pretty simple
really essentially what we're saying is
any end points we interact with are an
identification of the resource we're
trying to interact with but it doesn't
tell us what we're going to do with it
that's probably the simplest way I can
say it so an end point like employees is
fine or employee is fine but having
delete employees sucks it's not rest
there's nothing actually wrong with it
it's just not rest its RPC over HTTP so
how do we say what we want to do with
the resource we do that by using the
HTTP header so for example if I do a
HTTP method of get I'm asking for data
back I'm asking for resources but I'm
not amending them if I do a post I'm
creating a resource if I do a put I'm
amending an existing resource but
usually if that resource isn't there
I'll create it and if I do a delete
guess what I'm removing a resource so in
my opinion as a data person we should
always be looking to present api's as
like logical units of work it's not
really good if I just present a whole
bunch of tables to someone doing client
development and make them into
with them individually it's nicer if I
present a unit of work like hey let's
create an employee or let's create a
department which is probably interacting
with many tables behind the scenes okay
so I'll mention that a lot because it's
my little sort of stick that I like to
hit people with the important thing
about rest is it doesn't actually
determine what inputs and outputs there
are as such so you can actually do rest
with FTP if you wanted to and an act put
my output could just be an image it
doesn't have to be Jason it could be XML
it could be plain text whatever I want
but saying that there's a lot of people
out there that are trying to add some
uniformity to the output so if you look
at say Google's API design Docs it gives
an idea of the way rest output should
look to make it kind of nice and
consistent so it's up to you how you go
with that so let's talk about the tools
that I can start using if I'm a database
person to present what I do as something
relevant in the new world order because
what I don't want to do is force people
who are say JavaScript developers Java
developers dotnet developers to install
Oracle clients and have to connect to
the database to get their stuff that
ship has sailed really over the opinion
that if I'm trying to dictate terms to
someone developing I'd kind of lost the
argument so what can I do well I can
present everything as rest Web Services
what swords it used to be a thing called
the apex listener it's just a little war
file I can run in standalone mode or I
can run it on Tomcat WebLogic GlassFish
and and essentially it provides a
gateway sitting in front of the database
that can do a few clever things back in
the day we would have seen diagrams like
this because the apex listener not
surprisingly was fronting a development
tool called application Express or apex
and Ord still does that that's fine it
can still do that but it's not what I'm
interested in today what I'm interested
in is the fact that if I'm running an
Oracle 10g or above database I can put
odds in front of it which is a free tool
and I can then rest enable my database
in a variety of ways which we'll come to
if I'm on 12c I can also present the
database as a document store using soda
it's a really neat idea but the chances
are you'll probably say why would I pay
for an Oracle license when I can use
something else for free and it's
probably faster for as a Javad JSON
document store and you'll possibly write
but then having it in the Oracle world
means I can make it look like relational
stuff if anyone saw a couple of talks
today by the odds people then they would
have seen that we'll come on to that in
a moment
it also fronts no SQL database from
Oracle but I've not tried that so I'm
not going to talk about it today and try
and act like I'm an expert at it and
remember it can still front those old
web toolkit applications you've got so
it doesn't have to do magic it can just
act as a playing gateway how does it do
this well you basically map a URI to a
database call that can be SQL or pl/sql
and what you're going to do then is when
you make that call if the row bind
variables if there are variables in the
URI
or there's a payload with variables in
it with jason in it
odds will bind those into the bind
variables make the call to the database
and do the work what it will then do is
it will take the output and do kind of
one or two things really if it's using
the the odds functionality it will
transform it into jason if you want to
bypass that and just push out your own
content you can do that and it just acts
like a gateway pushing out the Jason or
image or XML that you push out so you
have options so it's really lightweight
piece in the center but got quite a lot
of useful functionality the first thing
I've got to do if I want to use odds is
I've got a rest enabler schema sorry for
the non database people because there'll
be a lot of this stuff
the important thing is not that you
necessarily understand you just know
you're aware that it's possible so what
I'm doing here is saying enable schemer
I'm specifying the schema name and I'm
associating a base path that's the red
bit in this case I've done something
pretty stupid which is I've made the
base path for the URL match the username
and that's ugly but it serves a purpose
to demonstrate what I'm doing in reality
I probably wouldn't do that and give it
a nicer name than just the username so
with the rest enabled on that schema
what can I do some two very quick things
are Auto rest and Auto pl/sql water rest
I can pick an object and say I want to
make that table of you rest enabled in
this case I've got a table called
M in the test use of one schema and just
by flicking the switch and saying hey
make this rest enabled it's a table and
I want it to be called in the URL I want
the endpoint to include if why things
work employees just doing that means
that odds will automatically generate
endpoints for me for get post and delete
their proper rest enabled web services
and that's cool but remember you're
interacting with a single resource here
you're interacting with a single table
which i think is a bit of an ugly
solution because why would you want to
force your developers to understand your
model in a relational database if you
can present to them a logical unit of
work but if you need that this works
really well it's super quick so what I
would get here is my installation of
odds stops here I've got my database
connection defined here I have my schema
alias and I have my endpoint and then
everything beyond that will be allowed
me to visualize individual rows or
groups of rows and insert update delete
into that table using rest so super easy
obviously the way we do that is using
get put post and delete we will look at
those a bit more later and it is a true
restful web service unlike some of the
other easy options I'm going to show you
in a moment so remember my calling card
constantly is tape individual tables and
views I don't like I prefer logical
units of work so you give the developer
an API that does a complete task not
little bits of a task
another option we've got which is really
useful if you're a company that's got 20
years worth of pl/sql sort of in the bag
already is auto pl/sql so I do the same
thing ODS dot enable object and what I
do then is enable the stored procedure a
function or a package and I'm
effectively making this into a web
service it's not true rest because it
only supports post but it's RPC or
remote procedure call over HTTP so it's
still useful it's just not the ideal
situation what does that do for me well
I have my database connection I have the
schema alias and the object alias if
it's a procedural function if it's a
package I've got the schemer alias the
package object alias and then the
routine name annoyingly the routine has
to be in uppercase which is kind of ugly
but hey I'm not to do anything to get
this so not true rest but kind of useful
okay so let's look at some examples very
simple examples like a bit
embarrassingly simple but to start
getting a feel for how we would define
real web services not the automatic
stuff so the simplest way of doing this
is in a single call I do
odds define service I specify a module
name which is just a collection of which
is just a collection of
brain has gone blank templates that's
the word notice the module name is just
some arbitrary text that identifies it
in the database but this base path is
going to be in the URI I then have a
pattern or a template which is going to
also be in the URI which is my endpoint
effectively and then I specify a handler
which is going to be a get put post or
delete I associate it with an action of
some type a source of some type in this
case I'm saying a query and actually put
select statement in there so this is
super simple what's going to happen is
odds is then going to associate that URI
with this query I use that URI it goes
and does its thing
converts the output of the query to
Jason and presents it to me on the
client so with that simple example my
installation awards my schema alias my
module name my actual endpoint and then
I specify what I want to do with it
based on the handlers I've defined for
that endpoint but in this case as I
would appear in a browser it's
automatically going to be a get so very
simple to get stuff up and running but
possibly too simple in reality you want
to do something more than that that
would be an example of the output it's
all minified so you don't really see
what's going on but you can always run
it through a beautifier to see what it
looks like and we have a collection of
items and an array of items each item
being a JSON object made up of name
value pairs associated with the data
okay so here's a different example don't
worry this you'll see the individual
bits a bit more clearly but now I'm
Robin doing a single call I'm defining
the module template in handler
separately so what we've got is the
module just like before module name and
base path a template module name and the
their pattern and then
the handler defined with the module name
the pattern and the method and an
Associated query again this time though
notice I've got a couple of bind
variables what I can do now is run that
passing in some parameters here and
those will be banned in and I can use
them to generate my jason and have some
input parameters there are lots of other
ways we can do this in terms of the
template structure and you'll see that
as we go along and also by passing Java
payloads
it's like JSON payloads and we'll see
that as we go along so let's have a look
at a homegrown example so not using any
of the built-in ODS features but doing
the work manually here's a really simple
example that probably isn't worth doing
manually but you'll get the impression I
create a procedure it has a cursor
variable a ref cursor I open that for a
select statement and then I use some
functionality in Apex
a package called Apex Jason that allows
me to open an object convert the ref
cursor to Jason and close the object and
pass that out there are lots of ways of
generating Jason in Oracle now and I'll
show you those later this is a stupidly
simple example but I can take complete
control over the production of the Jason
I don't have to let words do it okay so
how would I enable that
well I'd build a service for that in
this case it's got two handlers
I've got sorry two templates I've got em
again with calling the stored procedure
without the parameter going in and then
I've got em with a parameter after it
and that's going to call the stored
procedure with the parameter so I can
have multiple ways of handling the same
data all of these are still get methods
they're still just showing me data we'll
get onto the others in a moment so now
what I've got is two distinct endpoints
that do slightly different things show
me everything show me just this one
employee okay
so that's all getting data right and
I've written a few articles on this
stuff I'm trying to be as quick as
possible but there's loads of that quick
overview there what about getting data
in doing the post puts and then also
deleting data well we'll look at that
now and the answer is pretty similar
I've just changed my post method I could
use an anonymous block here with an
insert in it or whatever but I think
that's pretty stupid
I'd rather call a stored procedure
myself because I'm a pl/sql and database
guy and and if this in this case the
parameters coming in are pretty simple
so I can put them in one by one but if
this were a complex structure that
wouldn't be possible in that case I'd
passing a single parameter of a blob and
then my procedure would have to shred it
and process it okay so this can handle
either really simple bindings like this
or super complex documents by passing
them in as a blob and stripping them
internally not surprisingly put same
thing but this time I'm calling in an
API to amend the data and delete same
thing but I'm calling an API to remove
the data notice that I haven't mentioned
URLs or you are eyes at this point
because on these I'm not passing
parameters typically in the URI what I'm
doing is passing those parameters in a
payload so pretty similar in all cases
let's have a look at what I would do so
if I look at the post that I showed you
before
that's my endpoint my URI or URL I'm
going to do a post method I'm going to
send a head of contents of application
JSON and then I have to send a payload
there's some JSON with the name value
pairs in that represent each of the
parameters if this were a single blob i
passed the whole lot in as one big
parameter so happy days i can test that
through writing a bit of HTML or using a
rest client like post
or advanced REST API advanced restclient
plugin for Chrome but because I'm a
command-line type of guy I'd probably
use curl so here what I've done is I've
said I want to do a post I'm sending a
raw payload and it's in that file so
that file contains that information
there the content type is application
Jason and here's the endpoint and it'll
do that run my URL and so he run my web
service and give me a load of outputs
the I by the way just says show me all
the header sir and that can be HTTP or
HTTPS typically I would be fronting odds
with a load balancer or something to
reverse proxy I wouldn't be showing the
machine directly to the outside world
but in this demo that's what I'm doing
so that's how we're getting data in and
out but there's a new feature that's
coming in the beta that's out at the
moment 17.3 beta which is rest enabled
SQL now in some situations you don't
really know what you're going to get
until you actually have to do something
or in other situations you want to do
quite complex automation where you just
want to run scripts well you can do that
in the latest version of ODS
what you do is rest enable the schema
you then call an end point which is the
schema alias and then this funny bit at
the end which just says I'm using rest
enabled SQL you send in a content type
of application SQL or you can do
application JSON as well and send in
JSON documents to do this you specified
the user credentials so by default this
has to be on HTTP although you can cheat
and make it go on HTTP but that would be
really bad because you're passing
credentials and then you can pass in
either a select statement a DML
statement a bunch of DML and DDL colon
separated as a script or even just
upload a file to it containing the
script and it will run it the way it
does this is exposes the SQL engine
from SQL developer and SQL CL so that
you can make rest calls to it and it's
really cool I wouldn't suggest it's your
solution for every rest web service you
do it's just a way I think of doing
automation really easily but have a play
with it it only came out a few days ago
and I spent some time playing with it
and it's I like it it's cool so that's
all of the odds mechanism but invariably
if you're doing some work on the
database you're going to have to figure
out how to create and how to interact
with JSON documents inside the database
so the bit I'm going to do now for the
rest of the presentation is to talk
about that does anyone have any idea how
long I've got left because I've got oh
okay cool I must have gone faster than I
expected
excellent okay so the JSON functionality
in the database all happened in 12:1 and
has continued in 12 - and there's even
more in 18 see we did have the ability
to do Jason in the database using other
means prior to that there's a package if
you install apex called apex Jason
that's really cool there's also some
third-party stuff like PL Jason which is
a package it allows you to do that from
the Alexandria pl/sql library so you can
do it any way but in 12c it becomes
negative what we got in 12c is a bunch
of conditions and functions and then
this thing called soda which makes
Oracle pretend to be MongoDB I'm not
going to talk about that now I'll just
talk about these top things for the
moment so the first thing is we have an
is Jason constraint there's no new data
type for Jason in the Oracle database
it's just varchar' twos clubs blobs
whatever you want to put it in and then
you can use the is jason constraint you
don't have to but it makes sense to do
that that can be either loose or strict
the other thing you can do is use this
condition in SQL so I can say where
column is Jason and it will only return
rows
where the contents of that column is
Jason so two ways of using that if I
have this in place it allows me to use
dot notation which is kind of simple so
you'll see that as we go on so that's
the first thing what I can do now is I
can actually use dot notation to
traverse the jason document to get data
out of it if it's stored in the database
or if it's in a variable that i'm
selecting but i also get the jason
exists function one of the things that's
weird when you first start doing jason
in the database is that the result of
something being having a value of null
or not being present is the same know so
sometimes you want to know if the item
is present and has a value of null as
opposed to not being present jason
exists simply does that I can say I'm
looking for rows in the table where the
contact details phone number exists but
then that phone number is null so the
element exists but it has a null value
that's all that does Jason value what a
surprise it gives me out Jason simple
Jason values I specified the column of
interest the path and that's associating
that with that piece of that jason data
so I can pull out the individual values
this will pull out regular values it
won't pull out complex structures if we
need to pull out complex structures we
use JSON query what that does is allows
me to not traverse so far down the JSON
document and pull chunks of out so in
this case I'm pulling back all the
contact details not an individual piece
of them what I've got also which is
really super neat is JSON table if
anyone has used XML table in Oracle
databases before this is the same thing
but for Jason what it does is it
projects columns over the JSON document
so I can interact with it like it's a
table so in this case what I've done is
said I've got this table of Doc JSON
documents and what I want to do is look
at the data column
I'm associating the name first name if
you find a first name element in their
last name with last name element date of
birth with birth not surprisingly I've
said this is a varchar I've done it to
date my session as has got the NL s
setting that extends that to date time
so I see that as if it's a relational
data even though it's in the database
stored as jason this is super easy to
use you can also do it in a nested
fashion so if you've got really complex
nesting you can use the width clause to
gradually step down through it and do
some quite complex stuff i've got some
examples of that on the website
interesting thing about this as well is
in 12 to things like jason value and
jason query often get rewritten under
the hood to jason table so it's pretty
cool we also have the ability to index
jason in the database
jason can text contains is the way we
search for that so we do look for our
element and look for a value in it and
notice i'm using this index so there's a
special type of index in 12:1 which is
adjacent search index the syntax has
been simplified a bit in two but
essentially it's just syntax candy it's
doing the same thing and that allows me
to index my JSON documents and search
and more efficiently so in twelve one
with the exception of soda twelve one
was all about how do i consume jason and
that's only half of the story the other
half appeared in 12 to where we've got a
whole bunch of stuff we got a new manual
consolidating all the jason stuff
together we got all those conditions and
functions from jason from release 1 and
now supported in pl/sql not just in SQL
but we've got a bunch of functionality
as anyone used SQL XML in Oracle before
to generate XML okay so this is the same
thing but with Jason I can use SQL to
generate jason directly and i'll show
you briefly what that looks like bear
with it so jason object I can just have
a comma separated list of key pairs and
it produces those 1 4
each row that comes back pretty simple
Jason object AG allows me to create
adjacent object by aggregating some
values together key value pairs
pretty simple JSON array allows me not
surprisingly to produce an array based
on an assortment of comma separated
objects and once again I get one per row
coming out of that and then I can
aggregate anything using jason array ag
and whatever the value here is it gets
aggregated into an array individually
these look stupidly simple but remember
the input for any of these function
calls can be one of the other function
calls so i can nest them to form complex
documents if you've used SQL xml this
will look familiar to you if you've not
your go holy crap what's he talking
about very quickly you'll get used to it
but this is the query that generates
automatically the list of departments
with their nested list of employees so
it looks a little bit hairy but it's
actually pretty simple when you walk
through it so you know that's all there
in 12 to 2 allows to easily create jason
what we also have is a bunch of new
object types which allow us to interact
with jason and pass it so i'm not going
to go into these because it'll take too
long but here's an example of basically
going through all the departments and
for each department pulling out all of
the individual employees and their
details what I've got on my website is
an example of doing a couple more
complex nested jason documents into a
web service where I use Apex Jason to
pass it this to pass it and JSON table
to pass it you can see all three
examples of how to do that and kind of
pick your poison so this is what we've
got out of 12 - which is brilliant it
gives us the complete picture some other
things to mention before we close prior
to 12c released to you
probably gonna have to if you're a
database person install apex into your
database to get the apex JSON package
you don't have to use apex at all you
don't have to care about it but that
package is super useful if you're on
twelve to you can use the new features
to do that instead it's up to you but I
still sometimes use apex Jason because
I've used it for so long if I want to
call out to web services directly from
the database you can do that manually
and it still works but you can also use
Apex web service which not surprisingly
comes with Apex which is a super easy
way to call out to soap and rest Web
Services XML or JSON if your if you want
to use up Auto rest as I said before
that's fine if you're a developer that
is predominant here or client and you
don't want to write pl/sql I totally
understand that an auto rest may be the
solution for you but just remember
network chattiness if you're going from
an app server to a database continually
in order to get information from 50 web
services to pull together one logical
unit of work that kind of sucks
performance wise so I wouldn't advise it
and ODS allows a bunch of authentication
flows that I've not mentioned because it
kind of gets a bit complicated to fit it
into the time frame
you've got basic authentication mode
more importantly you've got a war two
authentication with several flows
including double legs and implicit three
legs and regular three leg flows so it's
super easy to do that and you can of
course build your own custom
authentication schemes as well and
expose them all of this stuff I've
talked about today because I'm a command
line kid kid a command line old fart I
have done it all with code but it's
built into SQL Developer so if you use
that you can do some point and click and
interestingly you can then show the
commands that it's going to run in the
background and it's all the stuff I
talked about here so jason super
important
if you're already a developer you're
probably doing this constantly if you're
predominately a database person my
feeling is that the only way we can stay
even remotely relevant is to make sure
what we do is presentable to the outside
world in a form that they care about and
that's not database connections calling
stored procedures that's presenting
those store procedures etc as restful
web services so just before I finish and
take questions I should have on here
something about Netflix probably yeah I
guess what I was doing in my hotel room
so add this website if you look on it
right there is ODS articles it'll take
you through to this page the website
which has got everything I've currently
written and there's more in the process
because there's so much more about this
I've got to write about and as far as
today stuff's concerned so that's all
from Oracle - based calm and then you
might not be able to read it but that
says Oracle based calm slash workshops
I've got a very simple page and you'll
see the very at the top of that this
presentation with the PDF slides more
importantly the articles and there is a
couple of bits of YouTube stuff on this
but more coming as well so it's up to
you if you're into that thing has anyone
got any questions apart from where is
the beer in the chocolate okay so yeah
yeah the URI is a call to odds which is
sitting on say Tomcat or stand alone
and that's connecting to the database so
typically if I talk about the structure
I have in my organization we have f5
load balancers in this case acting as a
reverse proxy calling odds sending the
traffic towards odds then connects to
the database sends the information back
and ODS converts it to Jason and sends
it out to the outside world
it's answer your question yeah so
authentication we have I've ignored it
here because it's quite a big subject
but what you'll see on that list of
stuff is a whole article on that and if
I've got the Internet you will see some
of the stuff from that authentication
you will see that we have basic
authentication a few different workflows
you essentially associate web services
with roles and privileges not database
roles but Ords roles and then you
associate those with say o auth or basic
authentication and so that's all
explained with kind of cut and paste
examples here so it's kind of it'll take
you like five minutes to get your head
around and then it's super simple if
you've done anything in the database
before and you're aware of roles and
privileges in like schema objects this
is kind of similar looking to that so
really easy every time I look away from
it I forget how to do it I look back and
go oh yeah that's really easy okay there
was another question
right is there an easy way to sew em
yeah I'm not quite sure what you what
you're asking me I think my brain has
just turned off yeah oh sorry you're
talking about DBMS session stuff oh yeah
so okay right you're in my world yeah
okay so yeah you can absolutely do that
and what you would typically do with
that is do that via your database of
connections so for example you could
have an on log on trigger that from so
when ODS connects it sets the basic
information but then also there's a
certain amount of metadata that comes so
you can for example identify the logged
in user there's I haven't got it I don't
know if I've got something written here
yet on that but there is some you know
like with CGI variables when you're
doing like old-style web stuff there's
kind of similar information you can pick
up from ODS so you can pass in who's
actually logged in so whether that's the
basic authentication user or whether
that's like something part of the OAuth
2 flow so yeah and and because you bind
you can you create users and roles and
stuff like that you can very easily
determine what they're what they are
what those people are and also you've
got the identity of the person coming in
through the initial call you know you
can have things like x-forwarded-for to
see where it's coming from and stuff
like that sure
so what if you've got a regular stored
procedure if that were in there then you
can pick that information up it could be
a parameter like in a payload sent in or
it could be just you know what the
method is associated with and therefore
you know what's being called that code
could do it you can write a little bit
of an anonymous blockers like glue code
that picks that up before it calls the
stored procedure so you know you don't
have to just call the store procedures
you could have a little anonymous block
that sets up some information before
calling store procedures so there's a
bunch of different ways of achieving
that if I'm understanding the question
correctly which is possibly not the case
at this point in time if you want come
and speak to me at the end and then you
can if it takes you half an hour to it
to get it through my thick skull then
I'm sure I've got the answer for you
anyone else got a question
yeah sure sure
so you've got a number of options there
you can either you can either do well I
had one example in that's in the slide
let's see if I can find it in this
nonsense let's go back oh thanks very
much for coming by the way I'm happy if
you want to leave while I just filled
these questions that's calling the gang
see you soon come ask me questions hit
the button that says he really sucks
yeah okay and now when you do I can say
yeah that's because they told me to and
it'll make me feel better yeah yeah so
if I look at some basic web services oh
I've got to get out okay hold on a
second let me just sort of multiple
parameters I've got one here so multiple
parameters I'm sure yes so what you can
do is you can either have that cope with
by the URL because you can pass Jason on
the URL as well as a mechanism for doing
that or alternatively what you can do is
pass a thing Tim think Tim do brain work
you can pass a single document
containing all of that stuff and
internally pick that up and pass it and
and apply those so it equivalent of like
saying enlist is the sort of thing
you're talking about isn't it yeah you
can pass those as a document as a piece
of Jason at the end of the URI and pick
it up and pass that and then build the
statement internally load with some
dynamic SQL to do that yeah that's very
easy to do there's a bunch of ways of
making sure it's bind safe and all of
that you know are they using context or
table functions you know those sort of
things so you don't you're not doing SQL
injection attacks through it you know if
you're being sensible
but yeah that's
I mean probably the easiest thing to do
is just look at the examples here and if
you've got any questions Tim and Oracle
based calm email me and say you sir give
me an example that does X and I'll write
it for you so well I mean there's there
isn't stuff when you say automatically
yes well so there is a thing called soda
if you look in if you look in those
articles as an example
it's about storing Jason but remember
we'll suggestions in the database you
can query it like it's relational yeah
so yeah yep there's there's nothing
there's no equivalent of XML DB that
shreds it and puts it into relational
tables like it does with XML but it's
pretty easy when you're writing these
services to shred the contents and then
turn that into inserts yourself I mean
there's an example here with complex
handling complex services and I've got
three examples apex Jason Jason table
and the new stuff in 12 - but you'll see
this is like a nested document where I
just use Jason table to pull out all of
the departments and all of the employees
and insert them it's it's to insert
statements that's shredded that whole
document for me and if it was three net
levels of nesting gets three insert
statements and do it it's like super
easy I mean it's like anything you look
at it and go oh man that's so
complicated I hate it and then a week
later you're wonder why you ever found
it difficult you know I'm just an
average guy and I just look at this
stuff and figure it out while the
documentation is terrible write articles
and then sometime later they steal my
stuff and put it in the documentation
you know so you know it's all good cool
come on thanks for coming questions
question questions
sure</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>