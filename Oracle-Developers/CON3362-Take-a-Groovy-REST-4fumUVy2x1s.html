<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>CON3362   Take a Groovy REST | Coder Coacher - Coaching Coders</title><meta content="CON3362   Take a Groovy REST - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Developers/">Oracle Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>CON3362   Take a Groovy REST</b></h2><h5 class="post__date">2015-12-11</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/4fumUVy2x1s" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">perhaps I should introduce myself I'm
gilman affairs I've been working on the
groovy project for the past how many
years that's since 2003 so let's say 12
years now so that's a bit of time so you
won't find many you know resumes on the
net with people with more than 12 plus
years of experience and pretty recently
rejoined the Apache foundation so
instead of being the official project
lead and I am the chair of the PMC the
project management committee and griz
been in the Apache Incubator since March
and we're going to exit or actually
graduate from the incubator pretty soon
I just wanted to give you a little
update on on this and a quick bit of
news which is a few months ago in June
we the second edition of groove in
action was released and I've got a
special promo code for Java one so if
you use ctw java one you'll be able to
get the book for I think it's
thirty-nine percent of the the price or
something like that so ctw java one it's
a ballgame that's a big 900 pages book
because the second edition covers the
latest and greatest and there's quite a
bit of content there a few months ago I
joined a company called restlet which
focuses on AP is so we've got different
products restlet studio for crafting api
definitions api contracts API spark for
hosting managing existing api's or
creating full-blown api's built right on
the platform you might know though the
rest light framework which the first
to my knowledge the first java open
source project which was following the
rest principles and recent addition to
the the portfolio that's DHC i'll talk a
little bit about that it's a an api
testing tool i'm going to show you the
project near the end of the other talk
okay so well if you want to sign up but
that's going to be the last bit of
advertisement i'm going to make so
there's a bit of a star wars-themed in
this in those slides because i'm going
to use some examples from Star Wars and
there's also a great API that I'm going
to use to showcase this the bits of code
i'm going to show you and perhaps i can
show you a swap p doubt oh yeah I'm not
connected you know forgot to set up do
you know what's there the password of
Hawaii part or echo 15 like this
lowercase awesome I forgot to set that
up ok so let it connect
there's a pretty cool api free api that
he can use which is about star wars and
you can get the least of you know movies
characters planets what else yeah so
where is that the people film starships
vehicles species and planets we will use
that for our examples and if I make a
quick call let's say oops to this stuff
using a THC client I'm gonna speak about
later on so that's a get request here if
all goes well yeah we should see some
cool stuff going on there like the yeah
residents of the planet etc but we'll
come back to that so there's a bit of a
star wars-themed I've heard there might
be a new movie coming up have you heard
about that yeah who is it okay so I'll
do very quick intro to rest but who's
familiar with rest well enough yeah
pretty much majority so i won't bore you
too much with the all the aspects of
rest and who's familiar with worry yeah
good half of the of the audience good so
a guy called Roy fielding on his PhD
dissertation i crafted the the term
coined the term rest represent a
representational state transfer in so
the paper is called principal design of
the modern web architecture but that's
where he designed he coined the term
rest so there are two aspects so it's a
rocket actual style so it's not so much
you know something which is how to say
that
so it's not you know framework nor so
it's more it's a guidelines or the
properties of constraints your
architecture should have and following
leveraging the concepts of the of the
web so there are different properties
like performance scalability simplicity
etc who wouldn't want that in there you
know architecture and there also some
constraints which are interesting
there's one constraint which is a
optional that's the code and email
nobody really cares about that one
usually client-server being stateless
cashable especially things like get
calls should be a catchable etc a
uniform interface but i'm i'm going to
give some examples about about that so
the the key aspect of the uniform
interface is to be able to identify
resources uniformly it's a bit of a
mouthful to say that and also
manipulating the the resources through
representations you might have different
representations for a given resource so
let's say a planet resource might have
different representations like an XML
representation adjacent representation
the the messages should be
self-descriptive I don't remember what
it's about and how do you pronounce hey
toys I I never know how to pronounce
that stuff so there are some poly
polemical you know pronunciation of that
term but the idea is to have the
hypermedia as the engine of application
state blah blah blah but the the idea is
to have hyperlinks so if you look at or
actually I could show you again the the
example there so let's say I retrieve
the planet called Tatooine and if you
look and that you've got residence the
resilience
planet you've got hyperlinks to the
linked resources so that's basically
what hypermedia api's 80 s is all about
okay so resources are accessible thanks
to your eyes so here let's say I'm
accessing the special identified car one
two three I should have used planet or
character there the representations of
its edges XML are representations yeah
so the messages were also about the fact
that you use the HTTP verbs get post put
delete but there are also other verbs
like option like patch so those ones are
less used but they are interesting as
well you can also leverage media times
to exchange and decide what kind of
output you want to get when you get or
post something etc and yeah so that's
the the notion of hypermedia links and
there are actually different standards
or different approaches to doing that
like how json-ld siren and there are few
others but well there are different
approaches and you can create your own
there's not doesn't seem to be there's
no current you know most widely used
tons it for that so it still a bit you
know the Wild West everybody is using
whatever suits you
for each so let's say I have two end
points here so I've got my cars so this
is the collection of cars here and here
I've got one individual item the car
identified with this one two three four
ID if you do a get on this collection
resource you're going to get all the
cars if you do a post you put a new car
into the list if you do usually put it's
going to replace the the whole
collection of cars and deleting that
collection is going to delete all the
cars for the item so you're going to
reach with just one car nothing special
for post because usually post a new car
on this URL there the collection URL
sometimes you might be using past if you
want to specify your own ID so you could
use post for a specific you are i put
usually replaces or creates an
individual car oh yeah actually you
should you well you would probably use
put instead of post there if you want to
specify your own ID actually but
sometimes I capi is with both post and
put for the same thing and delete one
individual color okay so far so good yep
and my favorite part of the of the toy
is about HTTP status codes because when
you to get usually get a 200 ok if you
retrieved the element without any
problem ok but there are different
families of status codes so you've got
the 1x family so well your API usually
don't use that which somewhat lower
level and by the way those pictures are
coming from the HTTP status dogs and
they are variants there's an HTTP status
cat page and HTTP status wrappers page
and and I think there's another one but
the the dogs is is it's one of the best
I think so 42 and read so usually that's
when everything went fine so let's say
okay 200 ok 201 that's when you create a
new resource so you've got a little
puppy dad 202 accepted so you accepted
the request but you don't necessary
return anything so the request might be
handled I synchronously for instance but
the the request was accepted so you
might be returning to 2203
non-authoritative information that dog
dressed up as a lion 204 no content for
instance IAM when you delete resource
you might decide to return to oak or
because you've deleted something so the
operation was successful so it's the 200
family but to specify that you don't
return a particular payload because well
you've deleted that stuff so you don't
need to return the payload you might be
returning to 0 for 206 partial content
poor dog
yeah so it's just a few of them right
because they are more than than that in
the 3x family so that's when resources
have moved so moved permanently
something was actually found but not
necessarily returned see other if you
want to see other related resources not
modified 30 for the proof is on the rim
and 307 temporary redirects and
permanent we re not sure about that one
so yeah for things like you've moved the
resource and that kind of stuff or let's
say like you three or four for example
you might be using that if you if you
know the payload are really huge and the
client already requested a certain
payroll some resource and you can reply
you can reply with three or four saying
okay I've already sent you the payload
it hasn't changed so just go with what
you have in your cash but clients have
to be aware have to be dealing with
caching which is not necessarily the
case and the 4x family bad request when
you use bad quiet power meters or things
like that an authorized so unauthorized
in forbidden so if you didn't log in or
if you don't have the right to access of
a particular resource for for not found
no bone there the method not allowed are
you not supposed to use dogs like that
even if you are hungry and too many
requests so they are M API solutions
like
the one my company is working on where
sometimes so you can put limits on api's
you are hosting on API platforms and if
there are too many requests that were
made too many customers to really
clients you can return a 429 to say okay
wait a little bit come back later so
that you're granted access later on but
you've made too many requests so far so
for instance if you use LPI is like the
gita api you also have some API
limitations and beyond that you might be
getting a 421 for 429 but I think
actually the github API doesn't use for
29 and I think it's using what's the
other one for 22 which is I don't
remember but i think they don't use that
one but some platform use of 429 and so
for the 4 x.x family that's usually when
you up sorry but the 5x family is
usually when it's up on the
server right so internal server error
not implemented or I think there's a
service unavailable and yeah one we bed
with limit exited ok so that's that's
about it about the studies dogs am ok
now let's move to and show some actual
code snippets so the rest well the
second part of this presentation is
going to show some frameworks libraries
etc on the server side as well as on the
client side and I'll finish with another
section on handy tools I recommend that
you might be a never aging when you're
working with api's ok for so since it's
about groovy plus rest I'm going to show
some examples using the groovy language
some of the frameworks I'm going to show
or libraries i'm going to show
are not necessarily groovy specific but
can be used with groovy and some
although not necessarily groovy specific
of some added value when you use groovy
so on the rest on the groovy rest South
Side Story so there's the the Grails web
framework that you can use i'm not going
to show an example of this there might
be some great presentation I don't know
there's one at a gentleman but I'll show
ya the at this red bag chaser restlet
framework so let's go Luke Skywalker may
the force be with you the boobie force
be with you so G serve that's a groovy
specific example library sorry which is
quite easy to use so you'll find that on
github deserve that's a project to stay
there so you instantiate the gist of
class you're going to specify a resource
so my resource is people and that at
least that the the path the beginning of
the path of that resource people and
actually you see the kind of parameter
now that's the syntax for the other so
it's not a query parameter but it's a
path perimeter so you'll have URLs like
/ people / 23 and you use so that's for
a get request and you're going to get
the ID coming from the
the path and then let's say you've got a
person several service storing stuff in
the in some some kind of back end and
you've got some handy method like right
Jason if you want to directly use Jason
and it's automatically marshalling and
marshaling marshaling in that case get /
it's actually going to reality for /
people / so you're going to retrieve all
the other people there and I'm showing
some examples I'm not sure actually
perhaps don't need to specify the
response header because when you when
you use the right Jason method it's
actually I think it's actually going to
use by default the application Jason
media type I'm either the Clinton type
and then what else till you started by
saying okay it through HTTP and you can
specify also some static route let's say
you've got some assets which are also
served by that server like you know CSS
HTML pages you can define links for
certain resources directly to some files
on the local file and then you specify
the report to launch it so that's the
first example using the deserve so it's
not a very well-known project in the
groove ecosystem but since it's not well
known i thought that it would be nice to
speak about it then i'm going to show
the rest I'd framework so that's really
the let's say the pioneer of Java rest
libraries so that's the one my company
is working on and that we're using in
the in the products that we created so
here so this example might be a bit
confusing because I'm doing two things
both the server and the client restlet
farmer can be used both for serving
creating new server basically of for
your application creating the API but
you can there's also a part of the
framework which is a client framework to
invoke rest api so here i'm actually
doing two things but at the same time
because i'm defining resource so that
the people resource so here I'm
returning just a you know directly the
the JSON payload so I define that it's
jazz in here and the get method there
then I'm creating a server with that
port adding the resource and then I stop
the server NAT D and I stop it and then
what's inside between the start and stop
calls are actually you know I forget
that I have to attach to define the
Rooter can define different routers for
different routes in your in your API so
I link the URI there and the resource
and this is the notation for the path
parameters and here in that single cold
air i'm using the groovy a search
keyword for that i'm actually going to
create a client resource to access my
newly created api and i'm gonna access
it at that URL and local hosts etc i'm
going to do a get with the jason type
and then i can retreat the the text and
check that it contains luke skywalker so
fairly easy and straightforward to use
you can use both for server and client
site but when i say client-side i mean
not on the kind side like in the web
browser well actually there is a song
all the project we do which is rest let
Jess which is a pure crime side I mean
the browser
library but here when I say client-side
I mean calling an API in Java rather
than exposing and creating new track so
that the server side and these lines
just about calling an API and what's
nice is that wristlet framework really
starts in mayor milliseconds so it's
very fast and some projects use it even
directly you need test because it stops
very quickly you know compared to
heavier web frameworks or I'd say you
know java ee spring etc with or even
grails which might be starting in 15
seconds or more it's much much faster
and you can run that in May milliseconds
meaning that you can do you need test
easily with that and use it directly and
it is actually for right back who knows
about right back so is it a fairly new
toolkit for writing synchronous web apps
so it's very very very pertinent so it
started as a kind of Sinatra clone for
the school are familiar with Ruby but
really turn into something totally
different and it's very very pertinent
and advanced tool kit so it's a bit
different compared to what you've been
used to you know request-response style
MVC framework so it's quite different
but it's a it's a very interesting one
to have a look at so i should have a
updated this example because the
released rat pack 10 i think that was a
month or two ago and there's already
right at 11 1
I think which has been released i could
have updated the version there but it
should be working out of the box so here
what's interesting is that i can launch
everything from simple groovy script so
if you put that inside a groovy script
if you've got groovy installed it just
groovy the name of the script and it's
going to launch the the rat pack
application right away so I there we
it's it's leveraging so although it's a
Java toolkits you can use it from groovy
with some added benefits like this
special notations with the closures or
actually those curly braces are groovy
closures so you launch read back your
define handlers you define the resources
on the path and then you can respond
here I'm using a special object which is
back content to say I want to define
different responses according to the
different content types I want to
support so here I'm going to send
response with the to jason to china this
is a built in gooey stuff to marshal
some stuff into jazim so this is a
groovy map there and I'm gonna transform
it in in JSON easily with that stuff so
what's nice with groovy as well but I
did mention is that you can as a special
annotation called at grab that you can
put on imports to say okay this rapid
groovy groovy brat pack static method
it's coming from that dependency so you
don't have to define you know a mailing
poem or a great Earl Beal or anything
like that from just a groovy script you
can download dependencies that you need
in your code so that's very yep
yeah so this sanitation when you run the
script the first time it's going to
download the jar from maven central orb
in trade center actually which also
proxies maven central and the first time
it's going to be slow for start-up
because you have to reach with the
dependencies of you obviously but the
next time it's going to be in the cache
locally and it's going to be very fast
so yes it's downloading directly yeah so
dependencies here I just define one
because that the sole one I had but you
might have different at grab annotations
you can put as many as you need and it
also worked with transitive dependencies
so rad back groovy depends on wattpad
core whatever is the core library and
then it might be depending on some other
stuff but that works also transitively
okay so that's right back yeah one who
is out that's forgot that I had this
slide actually so this one's what's
different with this one yeah I was going
to show some other things so by content
and HTML oh yeah it's also using a nice
syntax here there's some special builder
for building HTML so the first example
was using groovies built-in Jason
support here i'm using the json support
from jackson there's a special module
for rat pack for dealing with jason and
this one the HTML builder is interesting
because you can use this nice syntax to
define bits of HTML or full-blown HTML
page with this kind of syntax there so
that's what we call a brewery
builder yep yep yep content negotiation
and while I'm looking at this line there
was there was a different approach I
think you can do this one by kontan
jason closer or this one by content and
then you have inside the color different
ones jason h team but i know that before
right back 10 there has been a few have
been a few breaking changes to the API
so this 1 i'm sure it works the other
one I really need to develop visual
but well so that's the idea by content
and you define the different economic
times you're interested in and we have
something I wanted to mention as well as
that the rat pack is really built with
testing in mind so that's the so testing
is not enough to fold but while
designing read back the the authors of
red back really thought hard about
making your red back application
testable and there are some special so
here it's using the spoke testing
framework so that's great friendly a
testing framework BDDs tile etc and
there are some special classes that you
can use to define the unification and
just under test and some special things
you can like request spec to define what
you expect how your API should be
working and then you can make some
assertions afterwards etc but really
have a look at so it's hosted owner on
the superjet hosted on github and really
have a look at that the tests in the
sample applications that are there are
really really interesting and really
show the power of testing
applications really really elegant
really like that stuff okay let's move
to the client side so when I say client
sites recalling an API from Java not yet
a client-side JavaScript browser
attention well actually I speak about a
bit about both but i'll focus more on
the other side of things so from the web
browser usually you use javascript
libraries or for example of using your
jazz might be using the door HTTP stuff
but there are also some different
approaches like rest on giver and stuff
like that there's a nice API a like
toolkit i used a restful jet which is
quite elegant there's also i mentioned
it there's a rest let Jess which is like
the Java version before JavaScript and
just um passo I'm going to mention grew
script it's a the project which
translate groovy code into JavaScript
code so that's a transpiler so I mean
any modern languages these days
translate into JavaScript as well so we
don't just do you know java bytecode we
also support javascript so if you want
to combine your groovy code into
JavaScript you might be using grew
script so you could use that so for the
web browser are not going to spend much
time on that instead i'll focus on the
java approach for interacting with rest
api so for the web yes this is a restful
jess which is interesting you can have a
look at that also stayed on github and
you could use a guru script for that and
i think they the group's projected
traded an example with restful jess
showing how we could you know right
restful jess stuff into groovy in groovy
to interact with an idea
what else yes restful yes so yeah that's
uh it's quite elegant and I used it on a
couple of projects I quite liked it okay
so now let's focus on the Java side of
things for interacting with restful api
is from java and using the berea
language so what's nice with grew is
that what the hell say that there's a
what we call the GDK so not dedicated
GDK so it might be confusing i'm french
and for if I say je je in French is G
and sometimes I mix up gene J I have to
be careful because we call it the GDK
for groovy development kit it's not the
jeddak above the GDK groovy development
and with the what's interesting with the
brewery development kit is that we
decorate existing jdk classes and add
new methods to dedicate classes so even
on final classes like it's a
java.io.file you can add new methods
dynamically or statically at runtime or
at compile time to add new methods that
you feel are missing in jdk classes and
as part of the groovy library the GDK we
add a lot of those kind of nice
shortcuts GUI friendly shortcuts so for
instance we added the two URL method on
strings on java.lang.string so this is
going to transform that string into your
URL right so you could just do new URL
it's not much more expensive and or you
know not
many more characters but you can use
this to chain calls so you do string dot
to our two URL it's going to create a
new Europe and then we have a method
called get text which can be short cut
with the dot txt notation because that's
a javabeans property so we've got a
special support in groovy for javabeans
so instead of the class person string
name Gator sailors etc you can just say
personal dot name instead of saying
person get name and the person that name
is going to call the Gator so that's how
it works so this is a shortcut for don't
get texts the don't get texts method but
here that's a property and when you when
you do that it's actually doing an HTTP
get to that you are and you're going to
get the the pale as pure text so I'm
really just one line of groovy code
you're able to access and do a get
request on a resource in an API so this
one is so that's the Star Wars API but
hosted on the API spark platform from my
company but don't bother about the URL
it's just like the the swap eco API Star
Wars API I showed you earlier that's
really just the same the same API with
it's just managed by aps part to add
additional thing but it's it will even
for probably two don't focus too much
about the URL so i did get text on that
you are i own and i got the four of
three telling me access denied so I was
surprised because when testing that swap
it out co API from carell on the car
online I could access the API I was like
why do i get for three when doing that
from java movie so it was a bit
surprised and I dived a little bit into
that because the the API is doing some
kind of filtering on the user agent and
I think it was doing something else but
I was a bit yeah you had to specify if
you don't use a if you use a java agent
you have to or if it's coming from a
general library you also had to use to
specify some partnerships number i'm
going to show that in the in the
following example so i would like oh too
bad i wanted to show that in our
presentation but it didn't work i go to
a 4-3 so i looked at the GDK method
called get text and then I noticed okay
you can pass request properties up
that's what I'm gonna do so instead of
calling the dot txt shortcut i'm going
to use the food get text method which
allows me to pass some properties here
i'm using named arguments which is just
like passing map with key and values and
the key is request properties and then
I've got a map of the request the actual
request properties i want to set so I to
make this work I actually had to set the
user agent to be something browser like
and I also had to specify except
application Jason because that's what i
wanted to retreat because otherwise if i
don't use the accept header so this is a
specifying the headers when you do the
cool user agent and accent but when I
don't specify application J'son it would
return and each HTML representation
which is basically basically the the
HTML pages that we were browsing earlier
so I had to do to specify those two
parameters those two requests properties
which are actually put up the header
level when you do the
so I asked for the JSON payload and the
next thing so it's still the same code
in there but I grabbed that with built
in a class called JSON support part of
the api's which parses and marshalls
chisholm so Justin slipper powers text
and these cause going to return some
kind of map of lists of map or something
like that and then I can cause called
that name to get the name property of
the JSON object and I can assert that it
contains Luke Skywalker and then next
step I'm going to use Spock the testing
framework to do that so I can do given
when then kind of stuff so given a URL
to my resource when I retrieve and parse
the people / one resource then I expect
to get look so I treated the same code
as earlier but put inside a unit test
basically so the URL is there then I
call the get text with the right headers
and then I check that it's part and
contains Luke Skywalker okay yeah so
here I didn't use the the Jason slurper
stuff that isn't part of a built-in
group but I just retreat the the text
eric another library that is interesting
so there are actually two movie friendly
client libraries so there's groovy HTTP
builder which is a bit older agreed WS
light which is a bit newer both also
work with soap services for instance so
it's not just about rest api it works
with all the things so it's pretty
similar so again it's a i'm going to
remove the just focus on the on the code
so i just define a rest client and the
endpoint so if i just go back the
endpoint is there so it pointed the the
route if you will of your api then with
that client i can do a get define the
path the headers I want to pass and then
there's a special property on the result
result JSON and it's going to parse the
payload into adjacent structure there's
also so I think it's dot txt or dot row
or dot data I don't remember that text
which was the text and dot Rho might be
you know you might get some binary
content as well so can also use binary
ok so the HTT builder which is a bit
older but supports pretty much the same
syntax so again those are those two
examples by the way you can rent them on
the common line they're actually knows
there's one add grub missing which is to
grab the spec others a testing
framework but otherwise you can run that
easily from the common line if you also
add and it's missing the import for the
specification class wow I've got
mistakes in my slide sorry my code
samples
but you know you want to keep the code
short you trim some fat ok so wa slides
and then HTTP builder is pretty much the
same thing even the same class name I
think the the differences are how you
define line the concent I and data to
get the data instead of Jason Jason if
you use the the ws line so the two api's
are pretty close I tend to use WS slide
more often because WI slides is more
maintain than HTTP builder I'm going to
speak again about HD h TT builder in the
last part of the talk because there's an
interesting framework that uses HTTP
builder yeah so this one is with the the
rest light framework but you already saw
an example of that so client resource
get and you specify the constant type
and then you get the text directly the
something I wanted to mention before
moving on to the next one is that
there's no parsed so there are
converters etc to transform the payloads
into something but here i just used the
text approach to retrieve the content to
the code would have been a bit more
complicated if I had wanted to to have
the content directly parsed into the
adjacent structure it's a small demo
another one which is interesting I think
it's yeah that's from square the guys
from square created a library called
retrofit retrofit so it's a bit more
verbal than the other approaches but
it's very interesting because what's
nice is that you
so yeah before I forget them I'm going
to explain the code afterwards it's
Android friendly as well so it works
really well on Android wear asked some
of the other options might not neces and
rest let framework actually has a
special edition for Android as well we
can also use that on Android devices
yeah so what I like about retrofit is
that you define services with interfaces
and it's all fully typed so you're not
working dynamically with Jason
structures but you have real pojos that
are returned and marshaled and Marshall
transparently and retrofit does that
totally transparent lead i have to
forget to you can forget about it but
you can also specify how you want to do
2 to Marshall and Marshall things but
you don't have to so I'm defining a Star
Wars service I want to define retrieve
method to retrieve one particular people
from the Star Wars movie and here i can
say okay i want to retrieve special i
define at path the annotation say okay
inside that method parameter you're
going to actually pass that you know
curly brace ID query path path variable
things inside the URL and what's
interesting as one of the people if you
remember the payload from earlier so
it's not the people i can do people
people get if you lose i'm going to hide
some stuff so that I am more and so if
you the payload for people contains name
height mass hair color etc what's nice
is that you just define what you are
actually interested in so you're just
interested in the name of the character
so just put
in the in the list of properties of your
class that's going to be used to on
Marshall the Jasmine content and then
there's a builder builder class to build
the adapter so it's kind of a Java proxy
magic going on which implements the
service automatically etc and then okay
it creates an instance subclass driving
from Star Wars service implementing that
in the face and then with the service
you can say okay service retrieve you
pass the ID and then the dot name is not
a dynamic property it's really the get
name method property coming from the
people class so retrofit is really
really elegant fully type safe etc and
then I'll finish ways so yeah still have
time so I'll finish with some of the
nice services online services etc which
are interesting when you're not just
online services but also come online
stuff which are interesting when you
when you work with eight guys so I
actually showed DHC so dheva is a chrome
app but there's also an online service
s'okay you can either install the chrome
app or use the online service there are
a bit more fee there are a bit more
features with the chrome app because
there are less limitations compared to
an online service so what's nice with
that is that so you can easily define
you know the URL the different method
you want to use you can define custom
headers define authorization if there's
a author
or authorization needed to access the
API also what's nice is that it figures
out that the payload is Jason so it's
going to parse the JSON payload and show
it with a nice you know collapsible kind
of stuff so far and another khulna get
that I like about it is that so when
there are hyper media links to related
resources you can do okay let's say
films / one I can click on the hyperlink
and it already sets up the the code
directly and I just need to click send
so you can easily explore an exiting API
with hyperlinks with hyper media links
so here I retrieved Luke Skywalker who's
from when I to another send request
who's from Tatooine and Tatooine appears
in these movies okay so this one up
seems to be a bit longer so that's the
Revenge of the Sith etc so it's a you
can save your request what else I never
remember was that feature resume you can
define assertions that's how do you do
that already you can also you know get
snippets of code if you want to reuse
the definition of that call from the
command line with curl for instance but
that's not what I'm looking for I'm
looking for
where is that yeah I'll have to figure
out but you can also specify or perhaps
it's only the version that's going to be
released to I forget but well you can
define assertions so let's say you make
a call or least of cold that you put
into a kind of collections of cold and
you can do assertions like okay as heard
that the status code is 200 assert that
it contained the payload contains
something and what's interesting as well
as that once you've done because
sometimes you have change cold like just
what I did so I fetched Luke Skywalker
then I went on to looking up the planet
and then the movie etc and those calls
are actually some somewhat chain in the
sense that i navigated to the related
resources and what you can do is define
variables to say okay i want to put the
output of that stuff inside a variable
and then i want to use what's inside
that variable in to the next call to the
next resource so you can make asserts of
basically test scenario concrete tests
you know you'd have for your api like
okay the customer is defining his you
know shopping basket shopping cart then
he adds this product then you should
check that the total amount is this
amount and then he adds another product
and then you check the amount of the
colors change etc so you can do that
kind of stuff with the HD so that's
quite nice I invite you to have a look
at this nice chrome app for testing
api's so it's very oh yeah assertions
are down there
I didn't see them perhaps it was it was
because it's I have to yeah that's here
sorry so you can define assertions
status code equal to android etc so that
was there it was just collapsed and I
didn't see it so that already-existing
the version you can download from the
chrome app ok I should move on and
that's oh yeah on the on the blog am I
on the blog of my company if you go to d
bit ly to be clean DHC to toe you'll
find a detailed tutorial but how to use
the edge so you can have a look at that
yes and the tutorial doesn't mention the
assertion that's going to be in a in a
forthcoming tutorial bad tips that we
haven't published yet oh yeah another
one that I really love um HTTP I should
open up a console somewhere but okay
perhaps should increase the font size a
little bit so when you do oops Curl Curl
HTTP swap pico / people or perhaps its
API need to double check is it the API
if you have such people Oh yep yep so by
default well the API returns the HTML
page and what's the I don't remember is
it Heather except
and I don't remember this index are
except yeah but it's a it's actually
everything is that the same you know you
are the HTML page and the API depending
on which header accept header you use so
if i do that no well or is it except or
is it a continent time or what is it i
don't remember the the exact syntax for
for that with a curl well nevermind
let's say use the correct syntax and
that you would have seen something like
a big blurb of Jason not pretty printed
so everything on a single line so you
would barely see the different items
into the pay on but when you use the
tool go HTTP pie so it's HTTP pie it's
called the the come online tool that
uses HTTP so I'm going to actually use
that HTTP oh yeah so what's not and you
also have to remember there's a special
parameter 40 yet it's easier to remember
it's just a schism that's that's just so
or I could sure what never won so dash
dash Jason's going to retrieve the the
content with application Jason as
consultant so what I'm it should
swappi doc oh yes oh come on silly me
thanks well spotted and what's the
jasmine so it's not okay let me find out
the URL that API a swap Pico so I pico
API nine planets so that should be and
all right you know in the documentation
is using HTTP HTTP by directly oh okay
yes I had repeated you know rehearsed
before during the talks it doesn't show
back I did so what I love about this
compared to curl which is old monochrome
HTTP pi is using syntax highlighting you
know different colors for the headers
and it's doing pretty printing on XML
JSON etc so instead of using curl so
pair is very advanced it's working on so
many different protocols even even if
FTP or some other esoteric protocols
HTTP I focuses on an HTTP web api is etc
so it's more limited but when
interacting with api's it's really you
know really nice to have things really
readable I love that so I install that
on my machine because I really love it
okay yeah another library read which is
interesting it's called rest assured and
it's a library which is focused on
web api testing basically so it's using
a behavior driven like approach when you
do get requests on these resource then
you expect the status code to be turned
red you expect the body to contain name
property which is equal to its address
oh that's very you know readable almost
plain English from how body gender equal
to etc and what I discovered when
preparing that presentation was that
rest assured actually uses groovy HTTP
builder under the hood I was surprised
because I didn't know that I knew about
the library but I discovered that it was
using good into the wood well there's a
variant with using spoke but well
doesn't bring much okay now let's move
to some nice online services not much
time left so run scope you can really
define test for your API in a nice nice
way bit like DHC assertions if you will
but you can also use that for doing
monitoring so every you know how are you
you test and you check the tests are
still passing so if you want to have
some nice you know graphs or whether
your IEP is still online and working etc
so grand scope is really really full
featured can inspect the traffic
different different tests test with a
certain order if you want to reuse stuff
from a previous call etc so I don't have
time to demo that mug bean when you work
with so when you use them
a web hooks when you work with web hooks
webhook to rest api's sometimes we want
to debug rest hooks you really want to
inspect what's going on like the the
exact you know headers that have been
passed etc and some time for debugging
web hoops it's nice to have some kind of
tool in between so not being an HTTP
beam this one is interesting as well for
instance if you want I can show you
change it's very clear to to show HTTP
beam with like that visit HTTP be nor
yep HTTP beam com or dog seems my
browser he remembers that one for you
there are some nice stuff to check ok I
want to see my IP address I want to see
the the usual hairs that are passed when
I my web browser is doing the call or
two well different interesting things or
if you want to test some stuff like HTML
resources or or yeah unexpected so
that's quite a handy if you want to know
something about the code that's going to
be made yeah that's the this or the 1i
oh no yeah and something interesting
with not being also that i forgot to
mention is that you can use it for let's
say you working with a there are two
teams one is doing the defining the api
and the other one it's a your mobile
application calling that API that
sometimes the API team hasn't finished
and you want to use the API from the
mobile client and then okay I would need
some kind of mock up that API so you
could use more bean for that and request
bin is the one I used the most for
debugging webhooks actually so switch
the the description I gave earlier
well that's about it that was the groovy
rest force which is too strong to resist
so thanks a lot for your attention I
think I'm over for questions but I'll be
around if you have some federal question
thanks</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>