<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Find Your Way Through the Internet of Things Protocols Jungle with MQTT, CoAP, and Java | Coder Coacher - Coaching Coders</title><meta content="Find Your Way Through the Internet of Things Protocols Jungle with MQTT, CoAP, and Java - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Developers/">Oracle Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Find Your Way Through the Internet of Things Protocols Jungle with MQTT, CoAP, and Java</b></h2><h5 class="post__date">2015-06-02</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/n8OJiiSBGXs" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">good morning I hope you guys enjoyed the
party yesterday
let's day of travel on yet another IOT
conference I guess today Jimmy and I are
going to talk about some cool IOT
protocols that we actually like very
much for for building IOT solutions so
I'm Benjamin Kabir I work at the Eclipse
Foundation I actually used to be a
colleague of Julian we were a co-worker
at CR well as now I work at the Eclipse
Foundation we have great open source
technologies I mean you guys know the
Eclipse IDE but we have many open source
projects and many open source project a
run by ot so my job is to be the IOT
evangelist at the foundation I love
playing with Arduino and stuff and as I
said I used to work with junior JIRA and
you guys at Sierra do this right yes so
I'm sure you know me I'm a software
engineer I'm implementing iug and
protocols for the advantage dotnet cloud
platform of shahe Wireless I'm also
committed on several open source project
I'm a member of the Apache foundation
and committer on I Eclipse IOT project
around protocols Wacom elation and
californium we present choose a project
later right so I said I think this is
probably like the 20th presentation
about IOT this week
IOT is obviously all the technology for
helping and for making possible to
connect all the things right and so for
that you need protocols right you need
to be able to have protocols that will
allow to connect all these devices
either using wired kind of
communications or very often also a
wireless like you want to use cetera you
want to use Wi-Fi even to use bluetooth
you want to use wireless sensor networks
in general right and there are different
needs depending on depending on the
scenarios depending on whether you are
dealing with very constrained devices or
depending on whether you
building solutions were it's more about
doing telemetry kind of kind of
solutions you have sensors on the field
you want to make sure that they are able
to push the data to the cloud so as you
can consolidate the data consume the
data easily and are also use cases that
many people sometimes just don't think
about this is everything related to
device management you need actually
specific protocols to do to manage the
devices themselves
there's obviously there is some software
running inside inside the things just
like I mean think of your smart phone
you get regular updates right you get a
base as the at the operating system
level these these probably you see them
like when you take Android or your iOS
phone then you you know about these
updates but what also happens without
necessarily you knowing it is your
cellular modem itself I mean the the
chip that's that does the 4G
communication on your phone is also
being managed remotely by your network
operator basically and so there there
are specific protocols for that not
allowed to do from a grade and in
general monitor the health of devices on
the field and basically it's just like
you should think about all these
protocols are as all the different ways
you have to get from point A to point B
depending on and how many stuff how much
stuff you have to carry around how fast
once the transport to be then maybe you
take the bike maybe I'll take that the
train and that that's basically the same
thing in the in the IOT ecosystem there
are many protocols for for for several
needs if we if you guys already we could
actually start looking at what what are
what is this kind of IOT protocol jungle
it looks like this guy is maybe not so
ready I guess
so in terms of telemetry that that's
kind of what's been done for four years
I mean IOT is the new buzzword big data
was the the the previous birth what I
guess and before that the cloud whatever
and before IOT was actually machine to
machine and and before that was SCARA
like
Escada is is monitoring factories
basically having all the sensors in the
factory that are communicating over some
sort of industry old bus like mud burst
reporting data to a servant and you want
to be able to consume the data the thing
with IOT may be compared to what we've
seen for four decades is that IOT you
deal with constrained devices embedded
devices battery-powered kind of devices
you deal with wireless so you want to
take the bandwidth so there is a very
popular protocol that was invented by
IBM and your tech in the in the late
nineties for exactly telemetry kind of
kind of use cases and actually I think
it was for monitoring oil pipelines they
wanted to monitor oil pipelines using as
satellite kind of communication and so
that's why they invented mqtt that's the
protocol stands for mq telemetry
transport sure you've heard about MQTT
several times this week it's a protocol
based on top of TCP so it's all sockets
basically it's not very very complicated
just like I mean on top of the the TCP
stack you have a few a few different
kind of messages to allow to do
publish/subscribe kind of stuff because
this is what
mqtt is all about you have a central
broker the sensors connected the broker
and they can either publish messages or
consume messages but compared to other
messaging technologies MQTT is really
meant to deal with wireless and networks
and constrain devices so the hover head
of the mqtt protocol on top of TCP is
very very small like a very small
keepalive kind of packet will be only 2
bytes in addition to the TCP and to a
TCP exchange so it's a free protocol
free free as in beer free as in speech
you have an open specification that you
can implement as you wish there's no
royalties whatsoever and as well see in
just a few slides there are many
open-source implementations available
off of this protocol and it's also a
standard it's being standardized at the
Oasis
the and the final spec is due very very
shortly so as I said central broker all
the clients are talking to the broker
either publishing of receiving messages
if we were to monitor a teapot we want
to maybe I don't know maneet all the
temperatures you when it's bottling we
want to do that from our smartphone then
both these devices will actually be MQTT
clients talking to a central broker on
the phone
the mqtt client will subscribe to a
specific topic hierarchy to to state the
intent to be notified whenever something
under the root topic kettle whatever is
is being posted and then that's what can
happen later on the some sort of
embedded application running a paha
client inside the device will publish
the message on a specific topic that a
big matches the the subscription of the
other client so the brokers job is gonna
be to dispatch the messages to all the
subscribed client and you can never of
course as many clients connected as you
wish and you have very nice features I
won't go into many details some of you
guys might have a tenant our our
tutorial on Monday morning so you will
find the slides online but very quickly
that the main feature I think that's
basically in addition to the basic tab
sub kind of stuff that would be them the
main features actually of MQTT one is to
work out well we've just talked about it
actually you want when you subscribe to
a topic you want to be able to match
also the subtopics quality of service
depending on how reliable you want the
messaging to be do you want to make sure
that all the subscriber will receive a
published packet or to do you maybe
maybe you don't care like if it's just
about reporting a temperature value
every second then if one if once in a
while a packet is not properly sent to
the broker you don't care so you will
use the quality of service zero and then
basically what it means is that you will
save bandwidth because there will be
less round trips between the client and
and the brokers the clients and the
broker last will and testament
that's for dealing with the fact that
devices sometimes just die so when when
mqtt endpoint connected to a broker so
it is supposed to send regular keep
allies like every 15 minutes for example
the device should should send a very two
bytes kind of keep alive if not well at
the time the device connects it can
indicate the broker a mister broker you
should see me at least every 15 minutes
if not please send a message on my
behalf so as everyone interested in
knowing whether I'm still there or not
we know that I'm not there anymore so if
you eat the device dies abruptly that is
well doesn't have the time to send any
kind of message to say I don't have
anymore battery well that's not a
problem because the broker will take
care of that and we can messages even if
you TT you may think of mqtt as a
message queue kind of protocol it's
actually not there's no queue that's why
it's actually mq t t without any
official kind of meaning behind that
anymore at least reading messages is for
when you publish message you can tell
the broker to keep the last value in
memories was someone who subscribes
later on will still be able to know the
late the latest value that was posted so
that still kind of convenient you can do
MQTT over WebSockets it's very
convenient when you want to build some
sort of mobile application mobile UI
that is in the form of a pure html5 /
javascript kind of application you can
directly talk to the broker using using
WebSockets so that's not very cool there
is a new I mean I don't see it used very
much in the field yet but it's it's a
nice extension to include key that's
called MTD GSM MQTT for sensor networks
the idea is that you don't have any
any dependence on on TCP and IP anymore
it's really about having the MQTT
paradigm accessible to to sensor
networks where he was like Bluetooth or
ZigBee or serial based protocols and so
the idea is that somewhere on the very
deep embedded side you will have mqt TSN
and somewhere before reaching the edge
of the network the IP world you will
have a so-called NPD GSM gateway that
will reach the the sensors game key TSN
sensors to the IP and the MQTT network
in terms of security well the security
in MQTT is basically either you do
unsecured sockets or you use TLS and you
MQTT over TLS you a new event if I the
the broker based on a certificate for
example and the client can also use an
in addition to the sexual socket you can
also there is a built in login password
mechanism in the protocol so as maybe
the broker will not allow some clients
to subscribe to some topics and that
kind of stuff so in terms of open source
implementations the I showed the
reference implementations of mqg they
leave at the odd Eclipse at the Eclipse
Foundation and the ready Eclipse iot
umbrella and more specifically under the
Eclipse PAHO project so you go to a clip
to rock slash PAHO you have also got
samples all the documentation for doing
MQTT stuff there's also plenty of
implementations on github like if you
want to do Ruby if you want to do some
some sort of real language that wouldn't
be in power yet there are still many
many admonitions available out there so
PAHO is about an open source mqtt
clients and so java
including us actually as we will see in
just the next slide
Java EE but also JavaScript go Lua
Python objective-c
C and C++ C and C++ but are getting more
embedded kind of stuff like if you want
to run on embed like a row embed
platform you would use the embedded
client or if you
to run on top of Java me then then so
then there is also a Java ME version
some people people are reported working
having the implementation working
properly on the Gmail to come save the
world if someone in the room in the near
future tries out the the freescale
freedom board you know you've seen
you've all seen I think the keynote on
on Sunday the super cool connected car
one one piece of the of the of the
puzzle was actually the freedom board
running learning Emmy so if you guys try
I'm Kitty Keanu me I'm actually very
interested in your in your feedback
there is a dotnet implementation that
that also just joined the project in
terms of code again we did a tutorial
pretty complete tutorial on Mondays
which you should just check it out
basically you want to connect to a
specific broker you specify the URL so
that would be actually the sandbox
broker we host our eclipse you connect
you specify what is the callback you
want to be called whenever a new message
is is there for you and then you
subscribe to a specific topic or a
specific topic hierarchy and whenever
message is going to be available the
comeback is going to be called that's
pretty simple server-side you need a
broker you need some sort of server-side
technology to take care of dispatching
all the messages so at eclipse we have
an implementation in c c plus in c or c
c++ i think it's in plain see it's
called it's called mosquito and we also
have a java implementation it's called
maquette support all the quality of
services supposed to WebSockets it's
meant to be pretty scalable it's based
on Neddie on the L max disruptor kind of
ring buffer kind of algorithm for for
being a pretty scalable so very quick
demo of the MQTT on Franchitti
connection over here i have a raspberry
pi it's running the java the power java
client directly to my java app and to my
raspberry pi i connected a temperature
sensor while in addition to an LED that
we will maybe see later on
temperature sensor whenever the
temperature changes it's being sent over
MQTT to to the broker and what I have on
my computer HRI FX application that
basically uses again the Java Tahoe
client whenever the idea is that
whenever a new new data is available
maybe Junius you may please just warm
the sensor just a bit whenever a new
temperature value is going to be
available so that's there's obviously no
direct connection whatsoever between
these two guys it goes all the way to
the broker I don't see why you seem to
be very cold that's weird
what did you you can you see you see the
idea and well I could also have a
WebSocket UI that's really foreign qdg I
mean in QT has been around we've we've
seen that for for for many years
you might be yeah so it's been around
for it's been around for many years many
implementations are available out there
so everything related to telemetry kind
of scenario in QT is what you want to
use I guess but what we see more and
more is the web of things you probably
you've probably seen I mean are the arm
tech conference is happening right now
things in Santa Clara they just
announced you know they do lots of stuff
around the embed platform obviously
we've also seen that Java runs on embed
and they are moving into the web of
things space that is based on on radio
kind of protocols like exec V for
example the idea is to basically connect
all the things and for that when you
think about all the devices having all
an IP address then instead of maybe
having a central broker you think about
the web of things and maybe actually
Julian you
talk about what are the pro low cost a
little to do the web of things okay so
what you see with mqtt is ready what we
used to call version 2 machines Kinari
oh we are taking devices and connecting
them to a central server it's very cool
if you want to connect something
monitoring an object like a greenhouse
you can easily build an application when
with this new trend of Internet of
Things and you know every time you go to
the metadata of sensation yes there is a
slide about in 2020 we are going to
connect 50 billion stuff so we are not
going to connect 50 billion stuff on the
same server and we don't want to have an
application for for every for your car
for your TV for you for your lightbulbs
for whatever so some people came with
this concept of web of sinks the idea is
- well you are going to have a lot of
different object what you want to do is
to create rests like it's not HTTP rest
that is it's really like the rest appeai
philosophy is you create an API on every
device you expose the values actions or
whatever for example for car you can
monitor the position for your light you
can change the color whatever and after
that you use you create application
using the web mode that you you create
an application I don't know a smart form
an application and you connect to the
object you need to connect and you use
the REST API and maybe object can talk
to us our object it's ready trying to
break the idea of connecting everything
to a server it's more like distributed
behavior so for that they created a new
protocol
it's called coop cost 28 application
protocol it's an it's an protocol bill
that IETF it's released
Nerra see if you want to read it the ID
is ready to target very low powered
devices on very low power and lossy
networks like microcontroller not even
running Linux or ready with few
kilobytes of RAM and few kilobytes of
flash and with very lossy networks with
very small into you and I packet loss
rate like sixth row pan and yes the idea
is to target very low-cost devices for
creating so weapons the web of things
weren't a lot of things and create as I
created a new protocol because TCP and
HTTP are not ready useful on such a low
C networks so co-op is basically is a
restful as yes it's like HTTP on the
spirit is you have methods like get post
put delete you have a mapping through
HTTP you can use a proxy and and there
is also additional feature for motion to
machine like sending a message of SMS so
it's pretty like HTTP REST build for
Internet of Things so it's it's like
HTTP but it's really different that's a
wire liver it's a binary protocol very
compact there is a four byte 0 you have
HTTP like either with options but it's
all encoded using binary it's not
strings its integer so it's ready
compact and it's fitting in very small
packets and you can have a period like
HTTP exactly the same ie all no pillaji
for example you you create a DD it
requests or something like that there is
also a nice feature it's not it's
something not in HTTP is for observing
values so for example like
Benjamin said before if you want to
observe a telemetry value like a teapot
compared to what you do what should use
it's very simple you issued yet on the
on the on the API you get the
temperature and you say okay I want the
value but also I want to observe it so
every time the the temperature change
the teapots and backs a new value so
it's like a get on HTTP but you have
multiple responses in and it's going to
to stay here forever on to the cyber
world consoles or observation you have
to mode of observing you can have
observation without acknowledgements if
it's not a big deal if you rose value
but you can also have acknowledgement
and since it's using the web model you
can use max ages and HTTP cache like
others for saying okay this value is
okay for one minute or two minutes and
yes it's pretty cool you are also
another feature which is not like HTTP
is group communication the idea is to
send for example a get on a group of
lightbulbs using UDP Verity cast and
also send comments like put the light on
change the color using a multicast there
is also discovery mechanism it's pretty
interesting you if you issue a get on
this dot well-known call URL you you get
a list of all the support and resources
of the device so you can basically
discover a new a totally new object and
build the UI or call and try to find the
temperature there is also a multicast
discovery for discovering object in your
Sam sub networks and a resource
directory door sub directory is a kind
of active directory for sings an object
resistor on the directory and if you
want to know all the
obviously you have you just work on the
directory and try to do this the object
yes a resource also alternative
transport you not only on UDP you can
use SMS or it's pretty good for low
power device using cellular technologies
and not because it's costing a lot of
battery to be connected on a cellular
device so on the cellular network so
maybe you just want to wait for SMS
before starting to communicate you can
use USSD USSD is a bit like SMS and yes
and you can send an SMS and ask to the
device to reply using UDP so the device
connect to the network and send back the
response using UDP yes which is specific
to mention mesh machine to machine and
the security the security is a bit like
MQTT is DTS DTRS is basically SSL TLS
for datagrams
there is a focus on elliptic curve
because epic curve is more efficient for
embedded devices and you can use a
pre-shot secret or certificate or free
shadow to big private key there is
different mod for for more constrained
device or device able to do the wall
certificate stuff like we do with HTTPS
and what we see more and more is in
Edward ship or the Internet of Things is
support for AES or ecce cryptography so
it start to be very easy to implement a
very strong security story on a really
low power device especially with this
also such a to bits
microcontroller use you see today so
it's it's okay to use the DTRS on iot
network but it's quite a challenge
TLS what were built for for this kind of
dev talk so there is a a group at a ETF
trying to create a profile for
using DTS for the IOT sooty space say
it's called T's and it's it's ready in
fact creating a profile for DTS with the
list of ciphers with you you can use so
today so co-op is right over our FC
since few months I sing like six months
baby there is a more walk in the IOT fq
about observing resources resource
directories there is draft but it's not
fine our group communications are it's a
lot of walk around security because DTS
on multicast is ready a challenge today
because terrace was built for unicast
one client one server for multiple
clients it's very complicated and block
waste and stuff or maybe you need to
move large chunk of data over OSI
network and over UDP you need to do a
lot of block wise management and yes
there is an Java implementation for this
protocol it's called California omits or
T that IOT equipped at all since see ya
a couple of months I think it's it's
basically it's it's a real kind of
professor reference implementation for
co-op it's built for not for devices or
maybe for your raspberry PI's this kind
of devices it's not for constrained
devices it's right in Java it's focusing
on scalability and being nice for the
application developer you can use it for
creating a cloud service or maybe on
your not so cost when devices like the
Raspberry Pi of this kind of Java as a C
or Java embedded devices is
what is in the scope of the project is
Java SE and Android Android but there is
also some project but it's not
California about
Chavan so here on example it's ready
like reading a web server using it's
really not far off
TTP separate so you create a web server
you create a resource you give it in a
name and you start to suffer and you you
create some undraw for that you are so
client so in the cloud you are going to
be applying not to servers or services
readies device it's bit strange but it's
like that's the recipe I use on the
device not on the server the server is
gathering that on the different devices
and create application so a client is
you create a coyote we should yet you
have you can use HTTP except resources
like protocol for I want to get an XML
or I want to get the JSON or binary you
can wait for response you can shoot and
you have a free on tap API if it's ready
not rocket science there is also nothing
Kronos client so while you issue get and
you give a callback you argue you have
two methods one for okay I receive a
response and know there is an arrow
which append some sometimes on lossy
networks and you can also and use the
observe feature so you create a client
you you issue yet but you don't call get
you call observe you you give a an
Andhra and you receive the response
every types of services receive a
response
it's mean I I want to cancel the
observation bit but using a a nice way
to do that you sending a packet saying I
want to reset the observation and yes as
a reason as a way to conserve it that is
it's not so nice in California you have
the co-op implementation but you have
also the DTS implementation so in the
java standard library you have a TLS
implementation that you have not
DTRS implementation I don't even know if
it's in scope off I know I don't know so
there is a DTS implementation with
pre-shot key was certificate mode and
Rho public key mode and certificate mode
you are so HTTP proxy so in place of
connecting to your device using coop you
just call a nasty proxy using a HTTP GET
put DDT and it's going to contact the
device with co-op and you have also
implementation of the Russell's
directory so let's do it was quick demo
a quick demo back to back to the
greenhouse actually so we're gonna well
the the greenhouse not only contains an
in QT key paho client that sends data
regularly to whenever the temperature
changes but the very same sensor there's
also a few few lines of californium code
to make the sensor values available over
over co-op so what we're going to do to
test that it actually works what we are
actually going to connect to the co-op
server that prints on the Raspberry Pi
and so for that we're going to use a
nice Firefox plug-in that was developed
by basically the same guy who invented
californium and it's called copper so I
think you kind of see the pattern here
and even copper so basically once you
have the plug-in in Firefox you just
open a URL that starts with instead of
HTTP I want to open a iko iko up URL
right so I want to talk directly to the
device which what in some use cases
right now might might be difficult but
in we're really talking about central
networks right and 6lowpan and ipv6
everywhere and there there will be ways
to for the sensors to talk to each other
directly maybe in in some local areas
kind of networks but I mean eventually
hopefully over over the wall at the wall
Internet so I open the URL and now what
what I'm going to do is to send a
discover packet well we can see that
it's we kind of see the resources
already of man of my greenhouse but
that's what corporate add in cash so
thanks to the discover I actually
discover all the resources that are
available on my co-op server and there's
actually a question over there I think
yeah
so what you need to do is not to use
plane co-op and use ETS with a strong
authentication you see public here or
whatever you want and and yes so if you
connect to a result directory or or any
server using co-op for discovering or
say ok I'm here I'm a new object so what
you need to do on the server is to have
a preload key fork and knowing the
device in fact something you need to do
in factory when you create your device
you put the key in yes and there is
whether it's a wait for for doing that
but maybe you can do a local HTTP proxy
in your house and just our local
communication and then it's HTTP so you
do HTTP authentication
yeah mmm so we see two in ten minutes
there is a protocol called lightweight
m2m its device management putting key on
device and the lifecycle of the device
and it's I think it's solving this
problem okay so I is you discover
package packet earlier the greenhouse
the coliform server answered with the
list or three of resources that I can
you want me to explain
no yeah if I actually do directly a I
get on the well-known core a kind of
magic URI I can see that I have all the
resources there could also be actually
metadata attached to them like yeah
that's actually the format of the of the
of the way known core quorum URI so what
can I do well the the the the the URLs I
you are I said and I have and that are
accessible would be for example getting
the so I have actuators and I have
sensors so I guess that the temperature
sensor I can oops where my the
temperature sensor I can issue a get
it's 21 ish Celsius maybe I can issue
and observe and starting from now if
Julia called Julia starts to warming the
sensor you know what that's really
really weird
so we are talking about concerning an
observation just earlier that would be
by basically issuing a cancel packet
every every observed transaction are as
kind of an identifier how about the
light I want to see the current state of
the LED or is it to another not time I'm
thinking just when you study up there's
maybe a backpack I will put an outgoing
packet that says mister LED please turn
on is it on yeah and now I can send
another lighting package please mister
LED turn off right so that's that's all
based on on on co-op and what also we
could do and fortunately this part of
the demo is kind of broken we could use
one of these guys this is a SCADA mode a
6lowpan mode this rent so that's the
kind of class one devices as jr. was
referring to earlier and a hundred case
of flash less than take ten case of RAM
usually runs some sort of tiny real-time
OS plus an ipv6 stack plus a co-op
client and what we could do is press a
little button and talk directly to the
ipv6 basically address of the Raspberry
Pi we would have another kind of radio
modem on the Raspberry Pi itself and we
can we could do communications back and
forth so yeah this is really like
battery-powered devices lasts for years
on a set of double A batteries basically
so that's for we were still at the
application level I guess right both
within qtt and co-op one two extensions
for data control actuators but one of
the use cases we've seen in the intro
was everything related to device
management right yes so what we've seen
is we've seen these radio applications
device management is yes it's basically
monitoring configuring upgrading
upgrading is very important Freight of
devices maybe you have 1 million devices
you you already want to
it's very different applications so so
device management protocol is here to
help you it's it's really neat to be
independent of your applications yes so
it's well when you build an application
you are building on prototype on some
hardware maybe you are going to change
of the of the platform and get on others
or adware and so you don't want to be
tied to specific platforms or you want
to use a standard device management
protocol for everything the same way to
update upgrade monitor your device and
yes and this is ready the key of device
management standards and protocols just
like network operators right we were
talking about managing mobile phones
earlier like AT&amp;amp;T they want to be able
to make they want make sure that all the
the phones of the Adriatic coast
customers are using the network in in an
expected way so if there's a bug in a in
the whatever Samsung phones they want to
be able to deploy new firmware upgrades
or maybe other kind of phones but for
doing that they do that from their own
servers and they don't want to have like
specific code to deal with samsung
specific kind of protocols or LG
whatever so that's the point right
yeah and yes Oh medium is a device
management protocol which was built for
exactly what Benjamin said for for
managing phones too if you have a phone
it's probably speaking on a DM with a
network operator it's well it's existing
for a long time I don't know exactly but
we can use it for machine-to-machine and
IOT out of the mobile phone scope it's
very protocol mean to be used by mobile
network operator so the features are
quite simple you can read write
configurations or monitoring notes you
can trigger comments for rebooting
upgrading sending a new firm or sending
a new application software so is
different a different way to do that is
the main problem with using medium with
IOT it's really meant to be used for
bye-bye-bye of phone it was some time
already wired to use that with an IOT
applications for example well it's a
medium is based on XML there is a binary
XML but yes what I show you here is the
XML protocol every XML tag is replaced
by a binary value so it's easier to
understand who's using the XML format so
why not no medium client connected to a
server is sending okay I'm speaking oma
DM 1.2 this is the station this is my
first message of cessation I want to
talk to this dealer to this summer this
is my name okay all right you just
saying oh it's me with initiating the
communication and I want to give you
again my name and I already want to give
you again my name and say our last
device years with this kind of model
this is mandatory when a device connect
for whatever you need to send also
information and you need to finish but
it's a language ok I'm speaking English
I was very cool for an IOT device and
yes summer is going to reply say ok I
receive the order information this is my
name again it is your name again and
it's already chatting it's but it works
it's you sometimes when I implement that
I feel like this guy with this ketchup
bottle it's sometimes getting out of my
end but again it's walking you can see
every funny is using it so we can say
it's working but it's not perfect
the security is quite old mechanism is
based on
md5 hash maxing matter basically what
you do is a medium is it's used on top
of TC of HTTP so you can when you send
the content you do a signature of the
content using hash Mac is ready to
checksum and you put back the results in
the HTTP either so you can stream the
content so you need to be very careful
with your memory constraint it's ready
and planned complex to implement
correctly and it's why there is a lot of
security issues if you see last blackhat
there is some security issue with the
phone and it's many do because o medium
is so complex and network operator met
very crappy implementations some o may
rebooted sees this protocol but for IOT
and machine to machine and removing also
phone feature and they will the
basically a new protocol from scratch so
it's called I'm a lightweight into M is
a bit a long name but it's a simple
protocol it's built on top of co-op so
it's very light it's basically a recipe
I for device management on top of co-op
so you seen we can expose temperature
temperature light some values using so
coop HTTP so co-op rest tile API what we
are doing to do is expose device
management resources so the resources
can be security Security's basically the
key and the identity of the device and
the different server whether the device
need need to connect the device so you
can read the name of the model source of
version you can you have the server
object for putting the different server
you want your device to connect to you
have connectivity monitoring for knowing
if you have a good coverage whatever you
using if you are using Wi-Fi or cellular
or 6lowpan you can know if your radio is
okay you have connectivity statistics
it's cool for knowing or chatty the
device for knowing is there is a problem
you can get the location locations the
GPS position so fumarate is ready a nice
feature is for upgrading your device you
write a uri on the on the api and say
okay get this favor and and start it so
you have a lot of standard object and
say use a numerical identifier so the
motor is like site you have first slash
an object and instance and the rustles
so object is device security position
whatever instances because sometimes you
have multiple instance right for
security or for server in this example
you it's a position so position up only
one instance is there is only one
position for for device and you can
issue get on 6 of 6 / 0 of 6 / 2 if you
do the get on 6/0 you are going to the
war position latitude longitude speed
and all the GPS value if you wish you
get on 6 0 - you just get the altitude
just very simple API you can define also
you own object if you want to add some
object and you can discover it using the
coop link format we seen previously and
there is also another nice stand on top
of that is ABS
ape so for its IP smart object it's for
creating standard objects using the
lightweight m2m api but not for device
management but for maybe home automation
and this kind of application yes and
there is also a security feature is
called the bootstrap so bootstrap is
basically your security lifecycle
you have an object it's going out of the
factory well oh oh right my credential
and add or update my credential if I
have a program all right I change the
security schema so it's it's
there is different way to do to put your
key in your device you can use a spot
card for example if you have a circular
modem you can use you can send it over
here or through the factory Iran example
is it's called
device in ect bootstrap so you put a key
at the factory for for the teapot the
teapot you say okay this is your
credential for connecting to the to the
boots webserver the teapot when the
teapot go live on the network say ok I
have no real device management server
credential so I need to connect to the
boots web server it's connecting to the
boots web server so boots web service
and back also configuration and the
teapot connect to the real device
management server what is cool is your
boots web server is very simple just
unlink I send the key another and I do
just that so you can make a very strong
boots web server and in case you have a
problem with the device manager and
server you can still use a boot
observers who's for sending back you key
on the on the teapot and yes and when
you have everything done so device
management server can start monitoring
the device and send an upgrade so yes so
you have a clear separation of
securities of factory closed a boot
swaps credential put the boot strap to
credential on the on the device your
device is going to get a final
protection credential
yes it's and it's you have a nice in
case you have a problem for example the
teapot can connect to the device
management server it's good it's
automatic
click going to connect back to the boots
web server and the boots observer can
send back to new credentials so for
example if you have a confirmation on
your device management server all right
so bleed burg and someone gets your
pre-vet key on the device management
server you can still use this mechanism
for sending your device back to another
new server
yes so sorry some implementation of like
to attempt to him is correlation it's a
new proposal for being a negative soluti
project it's a Java implementation it's
focusing on the server side but its user
is planned for client it's built on top
of californium it's mean to be used well
you can easily use it as a no HDI bundle
but it's not another HDI service it's
it's coming with a very simple device
management server for testing the
protocol and testing your your device
implementations but there is also
library and you can use it with your
library for building a commercial
product and yes what is in progress is a
bootstrap server and a client for you
don't constrain 8 devices using chat I
see we have time for
so there's yeah I think the next team
was actually there say election sandbox
that posted by on Amazon by by Julia and
these sandbox is basically something
that people can use to connect their
embeds they are wireless modems whatever
they devices they have that the rock
talking lightweight m2m so if I actually
connect to assemblers well looks like
this is not even us right this is
someone somewhere playing with a 3d
model and what we can do or we do this
for from the UI right but eventually you
want to use lesson in your back-end
server and and do use api's to to know
that well you have devices on the field
and what's the what's the brand of the
divide the serial number I want to
Netcom I don't know yeah I guess I wanna
I want to deploy a new a new firmware so
why don't you play a new firmware well I
used lightweight m2m to first put a
specific whoops I update the firmware
like what m2m resource to indicate that
a mr. mr. wireless modem please download
a few more somewhere at that URI URL
whatever and once you've done that well
you can issue an exact command on the
basic detail the the modem to to ablate
itself do I want to know the location do
they have a location in this device now
looks like they don't okay do they okay
cool so this is all done over over coop
obviously and I don't know you have you
have an embed device as well that we
could plug and when right after it it it
starts it's accessible of a lightweight
m2m so as we have jumped for question we
well I guess jump to the end of the
presentation as a conclusion well we've
talked about I mean I hope we've been
clear in the introduction we've talked
about protocols that we like personally
I guess or in in a an industry or
context I mean Julian is working at zero
these guys build real solutions on top
of em GTG co-op and lightweight m2m but
it's pretty clear that there's not one
protocol to rule them all if you will
there are different scenarios at the
application level different scenarios at
the hardware level different constraints
there are many other protocols that are
out there like all join XMPP I guess one
of the conclusions would be though if
you'd like to get very serious in IOT
don't start inventing your own protocol
especially when it comes to security you
have real experts at the IETF that are
taking care of that right so I guess for
telemetry
you may want to have a look at MQTT
we've talked about all the open-source
implementations that are out there many
people are actually familiar with the
protocol the specification is pretty
simple to understand if you like to even
implement your own stuck well why not
I know why I would advise that but you
could and for going towards the web of
things well go up and like when m2m are
really very lightweight enabling lots of
lots of scenarios we've talked about the
observer mechanism that the very natural
bridge to to http we didn't mention
caching but I mean there's there are
many many real cool things that you can
build with the coop and iPad m2m and in
general the the job ecosystem around
this protocol is pretty pretty active
especially if you go if you go to the to
the Eclipse IOT shop I would say you
will find plenty plenty of
implementations sandboxes so I guess
that's what we had today I already see
some questions in the room so we have
yeah five to five ten minutes to take
questions
yeah
so I there are several answers and maybe
the first one is if you pay for the
bandwidth and if you are using a very
low-power wireless network you are not
going to be that chatty sometimes you
have some kind of application where two
device speak one time every week for say
hey I'm here I want to give you the data
for the week and maybe you have an
update No okay so so it's not like web
applications it's not the same kind of
traffic sometimes it's less rightly less
than that and yes it was the best way to
do that I think is to splits the
application so you have a device
management server you have some some
telemetry server for gatherings at a
time
yeah and for scalability it's ready the
same stuff you need to implement for for
for the big website is you know using
scalable database like HBase Orcas Inara
and strong HTTP your protocol
implementation
yeah yeah yeah yeah but you you need to
be smart and try to don't do that all
the time if you already have a lot of
device maybe you can put a mod your
device is doing
acquisition locally and push it back
later yeah if if I would fire the the
the web UI than the UI earlier with the
temperature chart what you would
actually see that the way I decided to
implement my application is that
whenever the temperature changes of more
than 0.1 Celsius then I'm sending a data
point which doesn't happen that often
actually if you are in the house then we
are talking I don't know maybe about a
thousand variations a day and so that's
actually not we were that's definitely
not in the range of a mega a hundred
megabytes a month right and you could be
even smarter by using on the at the at
the router level people like Cisco you
may have heard the demo of fog computing
they're trying to bring the cloud closer
to the edge of the network and what they
mean by computing is that they are
working and there's actually an eclipse
project that called Cricut that is the
open source implementation of this
concept is that you want your router at
the IP basically level to be able to be
small enough to filter packets if mqtt
packets related to the green house kind
of application you want to filter them
so as only a tenth of them go all the
way to the IP network or only one the
ones that are QoS to I don't know I go
all the way to to to the cloud and that
way you can filter data at the at the
edge of the network that's basically I
mean of course you need to do that and
and where you took in coop well coop I
guess that's by default the the
endpoints like the temperature sensor is
actually more a server right it's it's
it's it's there it's sitting there and
waiting for some
application to interrogate it to query
it so in that case well the only
exchanges that there will be hopefully
is when I open my mobile phone and yeah
I want to check the temperature well
okay I do have one run trip to check the
temperature and maybe the other
exchanges that there will be is that if
I put in place some kind of observe so
as if there's something really bad
happening on my chapters and so II it
will start talking by itself but the
rest of the time it won't just be
basically silent right I hope this
answers the question give you ideas
there was another question at the front
of the room yeah so question is how do
you add dynamically resource it to a
californian server so I guess you just
do it right I mean it that you can do
that yeah yeah yeah on the flyer yes you
can do it you just there is a method for
doing that adding on if you go back yeah
you have whenever you want you can add a
new resources to do sabotage add and you
create a new resources you can even
create kind of resources well you don't
give the name and you create it you you
under them so get and post and put
programmatically and say ok there is a
get so do I know this object okay I know
this object so I can reply okay or or no
it's not there so I reply not phone so
you can do it easy just check the API
it's really straightforward
yeah yeah yeah yeah yeah yeah I'm remove
of course as well yeah maybe I need to
sleep liquid maybe I need to flip the
example yeah yeah so coop list
can you repeat the question yes not yes
the problem is we're UDP when you use it
inside a house you are a lot of issues
with nuts and you know you need to
publish a message quickly for for
keeping the root of an so yes coop is in
the spirit is built for Internet of
Things and fifty billion connected
object so it's built for ipv6 and an IP
on every project but yes what you need
to do is send a message and there is
some draft for using coop over TCP what
you don't need to do the war small
packets and if you are not so
constrained on the rule on the on the
network you can maybe use coop over TCP
I guess we will take questions offline
right and it's nice thanks all for your
attention I think yeah
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>