<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Live Hacking: From Docker Swarm on a Raspi to Oracle Container Cloud Service and Wercker | Coder Coacher - Coaching Coders</title><meta content="Live Hacking: From Docker Swarm on a Raspi to Oracle Container Cloud Service and Wercker - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Developers/">Oracle Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Live Hacking: From Docker Swarm on a Raspi to Oracle Container Cloud Service and Wercker</b></h2><h5 class="post__date">2017-10-07</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/RyFcJwYFF8w" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so good morning everybody 8:30 is
terribly early for an IT conference and
in my opinion I'm really grateful that
you all showed up there's two things
maybe I can make up for this one is to
tell you that I'm based in Munich
Germany and we have the Oktoberfest a
big beer party running right now so all
my friends said well you want to speak
at this conference sure we understand
but why are you leaving now the other
thing is I brought you a little thing a
docker whale that I want to give away
and I do it right now to have it out of
the way who's interested
it's a children toy it's suitable for
children that are big enough not to eat
it well my name is Frank moons and
honestly I really really like what I'm
doing my work is kind of centered around
intersection of the classical Oracle
Fusion Middleware stack and the new
things that are often open-source like
dock kubernetes Kafka and things like
this and to be perfectly honest with you
it wasn't so easy to get into
conferences sometimes and we always had
to cheat our way in and and talk about
like pretend to talk about the classical
middleware stack like we're blood shake
and then like special things for web
watching and then talking about
open-source editions now with this new
conference that we have with the with
the code Oracle code this is different
Oracle is kind of free orientating and
focusing on this a lot on coding on
talking to developers and on talking
about open source projects that
perfectly work together with Oracle
technology and this is a big trend that
we are going to see may be you know that
this is the last event of this Oracle
code tour and
we all hope that there will be another
one next year so I'm a member of this
Oracle developer champions group which
is actually the group that is supporting
this and kind of people that they want
to talk at these conferences so I work
with the classical fusion middleware
stack I work with clouds
I wrote a cloud book in 2011 when nobody
really cared about clouds so that was
early for market I wrote one about
WebLogic WebLogic distinctive recipes
also meaning like what WebLogic plus
open source stuff and yeah I work with
multiple cloud providers I just got
certified with Amazon now this
presentation is actually about a journey
a journey from a docker container that
is trying to leave the little cozy world
of my macbook here where everything is
localhost and everything is working
usually and it's going to some real big
distributed bare-metal system that i
brought you here she is called mini it's
a Raspberry Pi cluster I'm gonna tell
you a little bit more later and from
there I think there's also next logical
step maybe going to a cloud service and
what I'm trying to do is tell you about
this journey show as many things life as
possible and then yeah finally see if
you agree or not I would kindly ask you
to keep questions to the end I won't run
away so I'll be around and I try to show
as many things hands-on as possible but
I think if you only see code it might be
a bit too much so three things about
docker and I'll sure how I assume you're
very technical so I could say it's
namespaces cgroups
and the union file system now the
namespaces they bring us isolation so we
isolate one docker container from the
rest of the operating system the C group
stayed a limit at docker container to
the resources that that it should access
and this union file system gives us this
layered docker image that everyone knows
like that did you see when you when you
run a new docker image and it's pulled
from docker hub so these are the
technical things that are behind for
those of you not so
technical I want to mention like three
important points but I quickly go
through them and then show you the thing
life the first thing we we say we like
about Daka is that it solves this work
for me issue that we sometimes have
something in development and it's not
working in production and trust me I had
this many times there was running
middleware operations for BMW in Munich
like but seem to be a life a whole life
ago and very often we had people telling
telling me that there is an issue with
the production server because it's not
working there and it always used to work
in in development and I always said look
we have like two thousand 999 other
applications they all work in production
use does not so guess what is more
likely but we always said this struggle
and we always talked about like what can
we do to fix this issue and if I ask you
what can you do to fix this issue this
issue there's not an easy solution now
because it could be related to many
things that not sure if you can read it
it's anything like an operating system
patched at JDBC version if it's about
web logic it could be the domain that
the version it could be some drivers
some some some flag that you need to
start it up and how can we solve all
this together and the answer is this is
where docker comes into play so we say
we talked I said we we put all those
moving parts into an image and we create
a container out of this image we make
sure it's running in development and if
the developer that usually says it used
to work in development if this developer
says it's working we take the same
container and we test it we run load
test we run integration tests and
finally we run it in production and we
always tell people well go and develop
those twelve factor applications and
then you can scale them easily and we
can scale by a process or by container
and this is very often where the story
ends but this is actually the beginning
of this talk because telling people well
they're just spin it up in production
maybe several times to be able to cope
with a load that's not enough and this
is what we learned in the last two three
well two and a half years I would say so
this talk is a bit more about how to get
to production and some of you might know
that very often we
well I just do it on kubernetes know
that seems to be the default answer and
don't get me wrong certainly I think the
whole industry is kind of turning to
kubernetes but you as an IT architect
you should also know the options and and
see what other possibilities you have
you should have the kind of toolbox and
then pick the right tool and it's even
if kubernetes is the best choice you
should know the others and this talk is
about knowing the other options so it's
not focusing that much on kubernetes now
I'll skip this and that's the other
thing that a lot of people don't get
when I heard about docker it was 2014
Bruno Borgess was from Oracle he was
pushing the first docker file to his
personal github repository and I thought
that's great I'm gonna use this docker
file to create a WebLogic docker image
and to run it in the cloud you know what
docker for the first time is a format a
generic format that allows us to run
stuff in any kind of cloud for the first
time in history we never have this
before before you could kind of import
something like your virtual boxes to AWS
sometimes it works sometimes it didn't
but this this generic format that would
run on any public cloud provider we
never had and it started with Amazon and
the others came and today we have one
service that does it for achill and
another one was just announced yesterday
so docker kind of avoids the cloud
vendor lock-in so if you're worried
about this if you have something in
docker container you can run it in any
cloud so it kind of scares you from
on-premises to the cloud in the same way
it gets you from development to
production so it's like two different
access in my opinion and the other thing
that people like a lot is the ecosystem
around docker so people say well the
good thing about docker is like I was at
the cassandra meetup just the other week
and I saw how people demoed Cassandra
the distributed database and and I spoke
to the guy and said so what's the best
way for me to try it on my Mac and he
said well just take a docker image no
say doc Arrancar
and it will run on your Mac so like
trying out things having this ecosystem
of I think it's tens of thousands of
docker images that we can choose from
and I come back to this as well now I
promised you to do as many things
hands-on as possible so I want to switch
to actually here let's see if this is
working on I think you can all read this
and can make this a little bit bigger so
I have docker pre-installed it's
actually running on the Mac there comes
a special docker installer for the Mac
that brings the small small Linux kernel
in in a Mac hypervisor so for simplicity
if you're not an expert in docker you
should just assume it's a Linux system
running it makes life much easier and
then I talked about those docker images
and if you say docker images you see all
these docker images that I already
downloaded and it's like a thing how its
wrapping here it's not showing up too
nicely and if I say docker PS I see the
running docker containers and you see
there's no dog container running what I
could do is I could quickly start do
something in a docker container I could
say docker run and run something I'd say
in a boon to window container and let's
just do a simple hostname so let's start
a window container and let's see what
the host name of this container is and
you see it looks like this it's a weird
unique number and if I do a docker PS -
L the last running container you see the
same number this container ID is the
host name so the container gets an ID
and the same number is also the host
name of this container now we try
something else let me say docker and not
use Ubuntu but maybe sent us this time
and let's say how does it work with this
house name what's in etc' host so now
i'm starting a sentence container it's a
different unique number obviously
because it's a different container and
the way it works that this becomes the
whole
name it's in etc' house now just as a
remark you don't really see the time it
takes for the container to start up it
starts it does something and it
disappears very quickly now you say well
that's very quick now it's just the
whole purpose of docker but we can do
more I mean if you want I can also give
you a let's say a Oracle Linux and I say
Oracle Linux and we run a bash and the T
is for terminal the is for interactive
and now I get a new prompt now I'm in a
docker container that is running a
bastion I can say LS I could say again
cat et Cie hostname and so on so this is
like what people always say on it's just
small Linux tricks no but this is the
beginning no this is how we start I
could say top and you see what's running
in this container it's not much running
now there's actually top running and
bash running and sure if I should
mention it now but the hardest thing for
me to understand is it seems to be that
I'm in this container now know I'm
working inside this container and I'm
kind of protected I have a very small
number of processes I have my own system
resources but the reality is that I'm
just running a batch process in the same
namespace as the container so there's no
real container it's just a namespace
thing that kind of limits my view that
I'm currently seeing if this is
confusing just ignore it but it took me
a long time to understand the dassault
concept of container goes back to
namespaces you know what I see now is
kind of the same namespace so let's quit
this and let's go for something like you
know everyone is talking about blowing
up our monoliths into micro services so
we won't have a lot of micro services
and docker very often is sold as the
thing to solve this micro service
problem so let me start a micro service
for you like docker run and it's
actually running in the background
t4 daemon it needs a port mapping
because internally it's listening to
four times nine and I need to map this
on my host and just choose the same
number
and the name of the container I put here
it's in my repository F moons and the
name is micro if I do this I get the
long ID again and actually I can now
play with this container and access it
so if I go for local host and 9a9
you see what it's doing it's actually a
very small service it's outputting some
text and you see I've been using this in
many other conferences it's actually the
first docker image docker container that
I did myself so I keep using it it
highly depends on the network
sometimes it's causing me trouble you
see it's counting so you there's some
state in the container but apart from
that it's not too exciting if you think
why is it counting from 1 2 3 to 5 nor
is that German engineering it's more
side effect now and the other question
is the containers running so how can I
know what's happening in the container
and the answer is well first of all I
need to find out what is the container
that is running so PS minus L gives me
the ID and actually this container this
ID is also there's also a logical name
so docker creates a logical name for
every container that you create and it
happens to be a adjective and the name
of a computer scientist so I could say
docker locks give me the lock files from
this d3 container and this is the lock
file from the output from the container
and now we also see why it's counting
from 1 2 3 to 5 because basically it's
counting the requests but my browser he
wants to get this you know this little
faff icon that is displayed here and
this is the second request that is done
by the browser this is why it goes from
5 to 7 usually okay so mmm are you
impressed it's getting better let's talk
about scalability no let's talk about
scalability a little bit later let me
try and show you
something else let's run another
container that is not handmade that is
actually nginx and gen-x and that also
needs support mapping because it's
listening internally to a tea and I
would like to map it to a date-date
now I think it should run in the
background it doesn't but it doesn't
matter so if I go for it you see it's
the output of nginx so which is just
running in this container now there's
one thing about those docker containers
that they don't have state we want to
treat them as immutable so we don't
really change the content and that's a
big difference to let's say a VirtualBox
image where you start something and then
you you save it you stop it and you
continue to work from there the content
of this web server typically is outside
of the web server so it's a file that is
outside of the web server that is mapped
into the container into the running
image of the container and I actually
have an example for you as well let's
just stop this here what I need is two
paths to map it and I have it here in
this fire and this is the the command to
start it it's actually mapping a fire
that is locally on my Mac on this ocean
beach directory and the second one is
the location of this nginx directory
where it accepts expect the fire and its
mapping it to eight eight eight let's
see if this is working so we go for
nginx start and I should try
eight and you see it's displaying a file
that I have on a local directory on my
Mac it's actually beach in Australia
it's called Denmark it's not Denmark the
country but it's a bitch it's a small
example of how to access a file outside
of the container and a very last example
I want to show you and then we switch on
to to mini to the cluster actually two
things I want to show you one is I was
doing a presentation in Norway awhile
ago and I said we're going to docker
eyes everything in this in this
presentation we even darker eyes the
PowerPoint slides so what I was doing is
let's see if it's still working
so it's docker run I think it should run
in the background this is why the minus
D again it's listening I think it's
listening to 80 and I need to map this
to something that is not used yet so
this is why I use seven times four and
the name of the container is my
repository and it's think it's slides Oh
Yugi in 17 let's see if this is working
nope
oh yeah this is the the - piece missing
for the port mapping it's all Eugene
seventeen you see it's starting up
because now I get this ID and I should
use the 777 to connect to it so let's
try this
seven and you see these were the slides
I was presenting in Norway and I want
you to show you one just one which is
like you see somewhat similar no it's
here this is one message I wanted to
give that Google is for example using
container technology very very
intensively they start up two billion
containers per week everything you do
with Google every search every Google
document every Gmail is running in a
container it's honestly not a docker
container because Google was using this
technology like cgroups namespaces and
the Union filesystem much earlier will
be pushed actually this kind of
technology into the Linux kernel so they
are responsible in a positive sense for
that we have this technology which is
actually also a good answer for many
people that say isn't docker that knew
that it might be a security risk and I
think one of the answers is well not
really because if you put it in a
slightly negative way it's more like a
very comfortable wrapper plus an
ecosystem around this Linux kernel
technology that we have for around 10
years now and Google is using this
intensively and other companies do as
well right
now last example I want to show you and
this is more about the scaling so I'll
how people the others that I started
remember when I was running the micro
service this one I want to run more of
these so what I want to do is I want to
have a small loop I loop around X and I
think this X should go from 1 2 to 5
maybe to start 5 containers
and I always forget the syntax maybe you
need to help me
oops I think it goes here no to do does
it does it yeah okay so this should in
theory start five containers it's still
wrong because I could not map five
containers to localhost nine nine nine
nine so I need to have a more flexible
port mapping and this is what I get with
a capital P which says well maybe to an
arbitrary port on the host now five
containers is probably more than five
virtual boxes that you could run on your
laptop is it is anybody running more
than five little box instances at the
same time on his laptop
I almost bet that you don't but I told
you I'm based in Munich and I flew all
the way here so I think five is not too
cool how about 15 or 50 how about 100 I
mean even if you don't like the
presentation you could say the German
guy was running 100 docker containers on
his laptop Oh No now we have this where
does it go it's wrong now it needs to
yeah
oh thank you
ah this is what we want look at this
every single line is a container that is
started already now imagine how many
VirtualBox instances could you run on
your system and every single line is
running container if I get a new
terminal and I do a docker PS you see
they're running you also see the port
mapping that is happening here and if I
do this and I just count the lines now
it says 50 52 54 if you think about this
like 21 22 23 it's probably starting
every 200 milliseconds to 300
milliseconds of container and it will
run 100 containers on on my little
MacBook and that's the cool thing the
docker technology is working locally on
a small laptop and it's also working for
companies it's two billion containers
like Google so it's a technology that is
suitable for one single host and the
technology that works on a hyper scale
right mm-hmm
one thing I didn't tell you is if I run
an image like docker run F once micro
the semantics behind is that it tries to
run the image locally if I don't have
this image locally it tries to pull it
automatically from from docker hub so
you could run my micro service example
like this one with the loop or without
the loop on your Linux laptop if you
have taco installed and the cool thing
is you need nothing you don't need to
worry about setting a class path getting
the right Java version it's actually not
even Java it's using Python setting any
environment variable adding any library
remember when I told you it tries to
solve this work for me issue this is
exactly the case so all you do is docker
run the image and it's running isn't
that right
who thinks it's great good okay I tell
you what it's early and it was a tricky
question but it brings me back to to the
few power points that I want to show you
this is what I was just trying
sell us takes a while this is basically
what I said you can do this on your
laptop and you will run my micro service
you don't even know if it's working with
Java if it's working with Python it's
just running and you see the
conference's where I've been you can do
this stupid counting from 1 3 5 and it's
great and half of you said why it's
great now but how about security what we
do here is actually exactly the same
thing as if I give you late at night a
box with a network cable and I said
bring this box back to your office and
connect it to your company network would
you do that come on it's just your
company network again you know I'm a
docker guy it's probably a docker
container the idea is that those
containers contain so you should get out
of the container remember I had to do
this complicated mapping for nginx to
access a file outside so what could go
wrong with something escape this
container this this box metaphorically
the answer is well maybe not but once
it's connected to the network it could
do anything now it could kind of run a
distributed denial-of-service attack
against the White House against angular
makkal and then probably some very
unhappy big guys in darks clothes come
and and talk to you know so there is a
risk and this is what I'm trying to tell
people just don't go and and take any
docker container and run it and this is
what a lot of people do actually and
this is not a good idea
people want Tomcat and they look in
docker hub for any Tomcat they want
nginx and they look for any nginx and
this is what you should not do you
should either only take docker images
from a trusted resource and there are
some marked as trusted resource like
nginx like like Oracle and and like
other companies like Cassandra stuff or
you should check if the docker container
was built in a reasonable way you can
build them automatically based on a
github repository and then you can
follow the steps and and can decide
yourself if you trust it or not ok so
you've seen the scalability we've seen a
little bit of debugging with the law
that was not too exciting and you see
many different use cases for containers
from micro-services to showing people
your slides to doing small Linux things
there are many docker image is now
officially supported by Oracle so you
can get WebLogic you can get the
database for the database again you can
imagine the database needs to have
persistent data so you have to map it to
an outside data file the question is
does it make sense to run your database
in a docker container and the answer is
remember my first slide when I said it's
great for testing maybe this is when it
makes most sense so I don't want to talk
too much about what Oracle is offering
the only thing I want to mention is that
for a long time people said well it's
great how you run your micro services
with docker run F moons micro this is
exactly the way I want to run web logic
no because I'm kind of sick of
installing web logic or the Oracle
database all the time so what I do is
kind of docker run web logic and it
works it's just pulling it from the
repository and for a long time we had to
tell people now unfortunately not you
know because of lawyers because of
licensees so it was never on the public
on the under docker hub and it is now so
now if you sign up there once if you say
I accept the rules and you understand
you only use it for development you get
your Oracle docker images from the
docker hub and a lot of people don't
notice so this is why I want to mention
it now I want to go actually a few steps
further and I want to talk about
something that I realized many times
that things are always easy if people do
demos including me on one laptop where
you always put localhost and we run our
small HelloWorld demos the thing is what
if if you want to go to real hardware
and this is real hardware this is mini I
built her
it's a Raspberry Pi cluster and for
those of you sitting in the back she
looks like this for boards it's an ARM
chip on it it comes with actually with a
USB it's using USB for power so
basically the box the black box on
on the bottom is powering the whole
thing it's it's like a mobile phone
charger with 5 USB outputs I need four
for the Raspberry Pi and I need actually
want for this thing that is already down
there that's the backplane that's a
magic device that you don't see any
network cables come connecting those
four plates they're invisible it's
advanced technology invisible I bought
it at Amazon they it construction is
invisible backplane it says Wi-Fi on the
box
now seriously I didn't want to have too
many cables I was experimenting with a
Ethernet Rooter and I wanted to use it
for DNS and it had some bugs and then at
the end I use this a colleague of mine
built a similar thing so I thought this
would work and it's working actually
quite nice so the other thing is it's
running Hyperion Linux that you can
download it's a special lineups for the
ARM chip so the ARM chip is like what
you have in your Android phone but apart
from that it's not really it's just for
individual notes no and this is where I
want to show you what you can do either
we can go for kubernetes now this is
what I was initially planning to do and
playing with it a little bit or we can
see what what other options we have this
is the building list that I did so if
you want to rebuild the same thing it
will basically cost you like $35 for one
of those boards and then the Wi-Fi
switch a few cables to charger at the
end I think it's like 2 to $300
these days I wanted to gain hands-on
experience I never did a Raspberry Pi
project before and I honestly wanted to
learn about kubernetes and possibly
about docker swarm I was playing with
docker swamp when it came out initially
and I was I was super disappointed it
did all kind of weird things and I
thought like oh my god if people really
try and run their production load and
this this will never ever work so I was
really suspicious and i thought i'm
going to go to kubernetes way and what i
really wanted to see his running
services
on top of this and seeing failover and
in updates so let's just skip this this
is a typical interaction that happens in
kubernetes and this is what I kind of
dig out when I had the first problem
with my Raspberry Pi Casta and something
didn't work
and actually it's if you count the the
the interactions it goes like sixteen
and I think my problem was at fourteen
now if you go and analyze this problem
what do you have while you do a docker
PS and you see all your running
containers because all those bits and
pieces they run into our containers and
it looks like this and it's not as easy
as we used to as we used to have for
normal if you know to normal run normal
service where you kind of recursively
try and find your log files and grep for
something I'm not saying it's not
possible but what I'm trying to say is
that if you really want to run a company
discuss them make sure you're able to do
it so I had many requests where people
told me we want to go to kubernetes in
two weeks we need somebody to set it up
for us and I think this is not enough
because if you really run all your
applications as micro services and on
top of kubernetes it becomes like your
new operating system and you really need
to know how to deal with it
you wouldn't say we switch from
Microsoft Windows to Linux and we need
somebody that comes for a week and tells
us how to do it that's not really
enterprise scale operations this is how
it looks into a swarm so actually much
easier now I want to show you a little
bit what we can do with mini and what I
have is like for open terminal windows
and what I'm doing now is I'm trying to
switch to Wi-Fi to this one and it's
actually called human it comes from
kubernetes and now I should be connected
and those bots they are in my etc' house
so it's mini zero mini one Minnie -
Minnie
we I could say ping mini one here and
you see it's spinning this Dysport the
other thing I could do is if I need to
access all those different boards I
could do something like access all of
them together with a cluster shell I
think people that do the administration
they know this there is something this
small script it says hi Minnie and what
it does is it executes the hostname
command on mini 0 2 mini 3 so if I run
this takes a while it's kind of sending
the hostname command to all the
different plates of mini 0 to 3 and then
sooner or later we should get an output
and you see it's 3 1 2 0 do you see the
order
welcome to distributed systems this is
what we have if we change from localhost
where everything is working all the time
to real well Linux cluster it's not
really a cluster because so far it's not
working together and this working
together is actually what I want to show
you what I want to do is start a docker
swarm cluster and try and start a
service on this and try and scale it so
what I'm doing is just check something
what I'm doing is just clearing up the
stream here docker swarm in it this is
how I start no oops no of course not
here not on my Mac this is the local max
what I need to do is I need to connect
to mini 0 here and I need to connect to
let's go for mini one here the m1 m2 is
like a short version of SSH into mini 2
and SSH into mini 3 and now I'm really
connected to too many zeros here so if I
took to a top here this is running on on
the first plate and the second one on
the second plate and so on and this is
our mini filesystem and mini networking
and so on the networking is isolated my
macbook is together in a Wi-Fi with a
mini cluster but it's not connected to
the outside by purpose because I didn't
want to have too many things that are
interfering now what I wanted to do is
say docker swarm in it and if I do this
it takes a while and it says it's
initialized swarm and I have a current
node which is this one and this node is
also miniature now the idea is that the
first node here
mini 0 is the manager and with this
command I can add more nodes so what I'm
doing here is
yeah I run this here I run the same
command here and as you see it's using a
token for security and it says dissing
all joined as a worker this node joined
as a worker and this node also joined us
a worker so if I do a darker note LS
it's listing for nodes
what is the leader it's me zero it got
this little asterisk and all the others
are listed as well so it's working
together it's actually already building
a small software-defined network and
connected those nodes in a secure way
and that's all the thing that makes
those individual blades work together as
one no and what I want to do is I want
to have a second leader that is not
active but I want to say doc up promote
mini three promote I think it's doc
Aswang
stuck a note promote okay
you see it's promoted as a manager if I
do a talk on taka note and as you see
there is a second one its mini three and
its marked it's ready but it's not
active okay now what I'm trying to do is
try and start a service on this well but
first of all I want to have something
else I want to have a visualizer here
and the visualizer is also running in a
docker container and descript for the
visualizer
it's called start this and the thing
here is the visualizer
is running in a docker container but the
visualizer should visualize the docker
containers so I have kind of the same
problems I had with the webserver I'm
inside a docker container but I need to
see the outside the other docker
containers and get the meta information
from those docker containers so how can
I get outside from one container to the
outside and see the other docker
containers and the principle is actually
the same and the trick is that docker is
using unique sockets to communicate in
this unique sockets they are actually a
file at the end and so what I can do is
I can map this unique socket to the
inside of the docker container so from
the inside of the visualizer I can see
the outside and let me try and start
this it's called stop this and it's
starting up and it's running as a
visualizer and it's running on port
5,000 so what I'm doing is starting
5,000 here
ah and you see localhost is wrong so I
need to go to mini three now and go to
port 5000 and you see it's an empty
docker cluster and this is what we need
to change we need to on we need to start
a service we need to say dot-com
so this create and then it's - - named
oops thank you create - - name and I
want to call it micro micro and actually
it also needs support mapping it's eight
eight eight eight two eight eight and
the thing is called F months and it's
called RPI for Raspberry Pi - micro
micro and actually it's version 1 so
let's see if this is working takes a
little bit which is which is not a bad
sign
it's great there's an error message but
I'm a professional I can handle this
actually the good thing about error
message is the most important thing is
read it and what it says it it tries to
connect to the outside to check if this
F moans micro image is the newest one
but it cannot because there's no
connection but it is there locally and
it's actually running already so if I do
a docker service LS I should see it and
if we go to the visualizer where is it
come on it's here it's got a strange
color you just changes okay we'll find
out now the other thing that I wanted to
show you is to use this and say Dockers
this scale and we want to scale this
micro service to let's say 12 instances
so it's doing something if I go back to
my visualizer let's see if it's showing
up here it's refreshing automatically
and it's not really happy it should be
green honestly but let's just ignore
this because we're running a bit out of
time now
if I had more time what I could show you
is to upgrade this running version of
the service which is version 1 so if I
assume in this says tag 1 I have for the
same service that is version 2 and I
could upgrade this a rolling upgrade so
it would kind of stop one service
upgraded and run another one the other
thing that we can try as we can just try
and access it we can say let's go - lets
go to Mini 3 and go to port number 888
and probably this is not working this is
why it's pink right now
but this would be the way to access the
service it does work so this is the only
thing the service does so I'm not sure
why the visualizer is showing it at pink
so it ripped her it returns its own
hostname and it returns to version
number so I'm super happy this is a this
is working this is what it's supposed to
do one cool thing I wanted to show you
not to show you it's too late now to
show it but if you only run one service
that might be running let's say on Mini
2 you assume you should go to Mini 2 8 8
8 8 and access the service but you don't
have to
what docker swarm does it creates a
routing mesh and you can go to any any
member of the swarm cluster and it will
automatically route you there if I have
like 12 services it would also redirect
me and it would do load balancing so all
this is built in yesterday night I was
talking to a colleague about this he was
trying to do the same thing with docker
swarm and it's not so easy it's a lot of
manual coding so because you all got up
so early I'm gonna do something that we
should never do I'm gonna do and pull a
cable that's the plan
where's to visualize sites here
and I'm gonna pull a cable from mini one
on mini - I don't want to have to lead
us failover but I want to see what
happens with my services so I'm gonna
pull this one it's really not nice for a
unique system to disconnect the power
but it's done and look at this the
visualizer takes a little bit of time to
refresh it should understand that one is
gone are you see are you excited
this is as good as it gets and they're
rebalancing you show - that you see they
show up on the other nodes so this is
the high availability I didn't show you
the load balancing but I explained to
you the routing mesh that is behind so
even if there's one service you always
get to the right service if you have
more than one service it's doing
automatic load balancing so this is
pretty good this is actually what most
people do with kubernetes but it's much
easier it's built into docker still
we're gonna see a lot of kubernetes
solutions but as I told you just be sure
you're able to manage it you have
somebody that you can call if it goes
wrong I'm not sure how many people you
have in your address book I had one guy
I would be able to call if something
really severely goes wrong now
the last part of the story that I wasn't
really able to tell you because we spent
a lot of time with them meanie is now
probably you don't want to build here
your raspberry pi cluster node it's not
how you run your production lord and the
answer is what can you do in production
and one thing is that Oracle is offering
a container cloud service that is
surprisingly not built on swarm and not
build on kubernetes and when I saw this
the first time I felt like oh my God why
didn't he take the stand this is what we
all expect we want to see standards then
I was playing and with the service which
is actually right here I'm not going to
show you details now and I found it very
very easy so it abstracts all the
complexity from you know service trade
Loblaw blah
and it gives you a nice GUI it's not
standards-based and they say this is the
selling point it's just it's expiring
it's just easier without not being
standard placed if you go to Microsoft
Azure you can choose between kubernetes
and swarm what you want to use for
container management but you also get
the complexity of kubernetes and swarm -
the set up of course because it's a it's
a past service so that's something you
should have a look into in my opinion
all CCS it was just renamed so nobody
really can remember the new name and a
new announcement that they made
yesterday is that there will be a
similar service based on standard based
on kubernetes
which was just announced yesterday so
this is the end of the presentation
again thank you very much for getting up
so early for being here I hope you
enjoyed it it was worth your time thank
you any questions I'll be around please
vote when you go out to have more
conferences and presentations like this
Thanks</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>