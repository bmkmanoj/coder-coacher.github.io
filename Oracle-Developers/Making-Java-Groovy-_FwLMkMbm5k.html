<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Making Java Groovy | Coder Coacher - Coaching Coders</title><meta content="Making Java Groovy - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Developers/">Oracle Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Making Java Groovy</b></h2><h5 class="post__date">2015-06-08</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/_FwLMkMbm5k" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so I want to get started because I have
a lot of stuff I want to talk to you
about first of all thank you very much
for coming appreciate that it's there's
been a significant growth over the years
and the number of groovy related talks
that have been happening at javaone I'm
really glad to be a part of that now
mostly just overhead stuff I'm going to
be mostly standing here or sitting down
to stay near one of the mics I know I've
got a group of people over here I'll
wave at you periodically you know but
thank you for it for coming also got an
email from Manning this morning and one
I'm supposed to give away a copy of my
book to somebody in the talk this more
or somebody who came in attended this
morning and what I'll do is I've got my
nice little random number generator set
up and I'll do it is like rows and
columns across and if there's any you
know uncertainty or discrepancy or
whatever then you can fight to the death
over it or what you know however you
want to do it you know so I'll do that a
little bit later and i'll talk about the
book of course because you know hey my
editor would be really annoyed if I
didn't but really what I want to talk to
you about is groovy and specifically
using groovy with Java together now I'm
going to do some basic things in groovy
as well in case you're not up to speed
on the language or don't really use it
very much aren't that familiar with it
so i'll start off basic and then I'll
move to more advanced things as I go
along now they really wanted a Java one
for me to use PowerPoint and I don't
really use PowerPoint but I've got some
PowerPoint slides so I compensated by
putting some hopefully humorous jokes in
them although I've tried them out on
some earlier audiences and I now know
not to expect too much okay my name is
Ken cousin by the way it's cousin like
the relative even though it doesn't look
like it we think it's an Ellis Island
job or something my company's cousin IT
incorporated although my wife says
cousin it like The Addams Family you
know I haven't heard from them yet I
imagine I will eventually so there's my
email address and Twitter handle and you
know feel free to contact me whenever my
Delete key works as well as anybody's
yes okay so what I've been spending my
life on I mean my normal day job is I
teach technical training classes java
related topics spring hibernate
PA as well as Android also and then
groovy grails etc those sorts of things
a lot but what I've been spending my
life on the past oh my goodness probably
five years has been this book from
Manning called making Java groovy and
all the code that i'm going to show you
virtually all that there might be a
piece that I'm not that's not in there
yet all of the code that i'm going to
show you is in a github repository for
the book but i'll show you a separate
github repository that you can get where
you don't have to download the whole
book repository to just download this
one individual section and it'll have
most everything i'm talking about of
course you're welcome to everything
that's out there I'm very much an open
source person if you find any value out
of any of this be my guest you know if
it can help you in any way and if
anything's not clear if it's not obvious
what's going on you've got my email
address and feel free to contact me on
that now just really quickly on that oh
yeah just in case their troubles or
something goes wrong I did bring up
emergency kitten calm so worst comes to
worst you know but here is Manning calm
and the deal of the day today apparently
is backbone j/s in action yesterday my
book was the deal of the day yesterday
fifty percent but I have a coupon code
for you today as well now my book just
came out in print form last week I mean
just became live on the thirtieth see
now the epub and kindle verte i'm sorry
the epub and kindle version on the
thirtieth the print book became live
friday actually so it was really close
but i do have a coupon code and this
will work for i believe all of the well
here let me see what it says manning is
promoting a forty five percent discount
on all our meeps ebooks and p books with
promotion code ml j 0 ml j 0 lowercase
ml j 0 13 CF lowercase C F conference ml
Jo Manning something javaone what expose
the LA I don't have got nothing yeah mlj
013 CF if you go to Manning com see this
is what you would do here
actually demonstrate and then I'll move
on so if you if you took the book here
let me sit down a moment and you went at
banning calm and I put it in the cart
here and then I go down I'm not going to
buy it although I don't give away all
the ones i have so but down here is if
you have a coupon promotion code ml j 0
13 c f yep so i got my audio debugger
turned on it's all right yeah see up
there was the forty five percent savings
so you don't even have to log in you to
try it out I'm going to update it as 0
but don't you do that sorry about that
okay the the other thing I want to
mention here though I can't get back
there we go is that here is the link to
source code and the source code link
will take you to my github repository
it's under my last name and there's one
called making Java groovy and
everything's arranged by chapter but I
also want to point out to you and let me
click on my name here there's a separate
repo I can never get rid of that picture
either I'll never have that much hair
again anyway you see this intro brooby
one this is just the appendix on groovy
by feature this is pretty much the code
i'm going to show you today okay so you
don't have to grab the whole book if you
don't want you can grab just this and it
has a Gradle build file and in
everything and way to install and run
even without Gradle installed all of
that if you have any questions about
that please let me know I'll take care
of that ok this is the homepage for
groovy groovy code house org and they
claim this is where you would do the
download and you can do the download
here this is fine if you're on Windows
first of all my condolences but if
you're on if you're on Windows they do
have a windows installer which works
just fine i've been using it for
literally years you know and not had a
problem with it of course you don't need
to do the installer could come as a zip
file you just unzip it set a groovy home
variable to where you unzipped it put
the bin folder in your path and you're
ready to go it's that easy although
again I typical groovy mistake I skip
step 0 which is you have to have a full
JDK full java development kit i always
you know just it's just assumed ruby is
one of the family of dynamic languages
that run on the jdk it compiles to buy
codes what i'm going to show you here
that in contrast to the other major
languages that run on the JVM other than
Java obviously is that this one has the
tightest integration with Java the
easiest learning curve for java people
very easy to pick up now that i am not
going to say anything negative by the
way about scala or closure or JRuby or
jai phone or whatever one you haven't
alike they all serve different functions
they're all very well written and
interesting languages I just happen to
be I just happen favor groovy because I
like switching from job at a groovy and
back practically on a line-by-line basis
it's very easy to do now the alternative
to downloading this here is I want to
mention something to you there is whoops
that's not the one I want it let's stop
this and go g g vm tool here this is
what I wanted yeah captured on the video
forever that's why I got remember
emergency kitten you know something goes
wrong oh alright anyway they've got a
twitter feed actually the twitter feed i
think is emergency kittens with an S but
whatever I show them to my wife GV m is
the groovy environment manager and the
nice thing by the way this works on unix
shells is that font big enough can you
see that in the back do I have to go up
another size apathy which means it's
probably good enough I can go up one
more anyway there you go what this is
for is that you it works on linux based
environments including max but it does
run under cygwin on windows if you want
to go that way the benefit to gvm is
that the installation is one line and
then you can switch versions of groovy
grails Griffin gailet well whatever
trevor ones are available in one line so
for example here's my terminal so if i
say gvm current these are all of the
versions i happen to have installed at
the moment Gradle 17 Grails Griffin but
the nice thing is is how easy it is to
change versions so if i say g vm list
groovy for example these are all the
versions i have installed those are the
asterisks the betas they don't install
unless you ask them to ok those don't go
by default the carrot here is what I'm
actually using at the moment so if I
wanted to switch to a different version
like for some
reasons i'm going to use 2 point 0 point
7 I would just go gvm use groovy 207 and
there you go now i'm using 207 now to be
honest i don't change groovy versions
very often that that tends to be pretty
stable but Grails versions that's a lot
because Grails each Grails app is
associated with a particular Grails
version and when I'm working with
different clients I like to switch to
whatever version they happen to have you
know waving to the people behind the
post again any rate therefore it's just
a one liner to switch this way so I
really like this and if you use a
version that isn't installed yet it'll
download and install it for you as well
let me switch back to the current
version two dot one dot 7c c 2 dot 2 is
a beta and i have this here and then i'm
going to go on this now if i go back
briefly to the powerpoint slides and see
how powerpoint holds up under this you
know because i'm switching back and
forth and of course they yep Thank You
PowerPoint all right escape and then
maybe I should just get the jokes out of
the way I mean Groovy's a JVM language
that compiles to byte codes you have
optional semicolons if you put
semicolons in they work if you leave
them out that's fine if you have
multiple statements on a line you should
put the semicolons in do you have
parenthesis look what I say about the
parenthesis is the parentheses are
optional until they're not which sounds
silly but what it means is they have
very low precedence so if it's really
obvious where the parenthesis would have
gone that you could generally leave them
out like if you have one argument or two
maybe but if if you do a calculation on
the line and something goes wrong I
don't even look at the error i just put
the prints back in just in case that's
the issue and then it works fine so i
leave them out until it becomes
confusing groovies goal is not to make
the shortest code possible you know
that's pearl right right only code as
they say groovies job is to make this
simplest code possible that's still
readable and understandable now
everything in groovy is an object as
well there are no primitives in groovy
they use the wrapper classes for all of
the numbers and
that includes all the floating-point
values are actually bigdecimal and I'm
going to come back to that so here's the
first of the nice pictures you like that
one one does not simply make Java groovy
actually born one does and simply and
Lord Stark you might want to stay out of
King's Landing you know okay that's I've
got a few chuckles that's not too bad
you know so I want to do my first
demonstration I what I want to do is I
want to show how you can compile groovy
code and execute it of all things from
the Java command I mean of course I can
execute it from the groovy command but
it's interesting to see you can execute
it from the Java command as well so to
do this let me go to my terminal here
and I'll clear this and I have a script
in this folder called hello underscore
world da crew v now groovy you can make
scripts and you can make classes and in
general practice I make classes I mean
almost always i use groovy has
functional capabilities and there's
actually a functional talk during java
one on groovy but groovy is an
object-oriented language it just happens
to have functional capabilities you know
I wouldn't call it a functional language
like say closure is definitely a
functional language and scholars kind of
a hybrid can go either way groovy zan oo
language in fact you remember when they
renamed Java and they said oh now it's
going to be Java to standard edition and
Java to enterprise edition and nobody
ever explained with that too is about or
and I never even heard a rumor about a
three groovy is Java three okay it is
you could drop seriously it's the next
generation language in the same family
you could draw a line from C++ the job
at a groovy now if you want a complete
paradigm shift then there's scholar
closure you know but brew V has a lot of
the functional capabilities but it's
still very intuitive for Java existing
Java developers now I bring this up
because in this script here if I type it
out I've got one line it says print line
hello world notice there's no semicolon
notice there's no parentheses I don't
even have system dot out print line is
what they call one of the default groovy
methods as a class called default groovy
methods it's loaded automatically and
I'm even using single quotes rather than
double quotes for the string in groovy
single quotes are java.lang.string
instances double quotes are also
java.lang.string unless you do
interpolation
side them and then they become groovy
strings and that's what I'm going to say
about that for the moment any rate when
I write my own groovy code I always use
lowercase and underscores for scripts
and then regular camel case for classes
just so I can look at a project and see
immediately which are which but in fact
there are classes involved now you would
not be surprised maybe to know of course
I could run groovy with the groovy
command but if you notice this I'm going
to execute the source code ok I did not
run a compilation phase first I didn't
go groovy see yet and that's interesting
but not all that useful to be honest
with you I mean it's nice to know but
it's not like compilation isn't going on
it is being compiled it's just they're
not saving the compiled version so it
means if you need to deploy a script to
a client you don't have to send them a
binary version they can't execute it and
there's ways to put dependencies in and
everything which is beyond what we have
time for but nevertheless I don't really
do this very often I do write scripts
but if I want to compile it then there's
a groovy see command now if i type Ruby
see then you'll see in the directory now
there's a doc class file hello world
class and if I now run here at VIP if
you missed it and now if I run groovy on
hello world and I take out the dot great
I've executed compiled groovy co with a
groovy command if I can't do that it
might as well give it up I mean you know
just starting yes sir that's what I'm
about to do now so thank you for the
segue this you know the question was can
I use job on that I'll send you my
paypal you know ok actually I should be
using your paypal account shouldn't I I
should send you the right yeah so if i
want to run java on this without doing
anything ok now i do need to compile it
first obviously job only looks at byte
codes but if i run java i get a very
instructive error I get a
classnotfoundexception groovy lang dot
script same thing up here no class def
found era groovy lang script which tells
me first of all the job of recognized
these as byte codes it didn't just
reject it it said hey I can't resolve
all the dependencies oh really you ever
run the Java p command by the way you
know if you run java p it'll do
reflection on the bike codes and tell
you what the methods are in everything
and if i run java p on this I'm sorry it
says compiled from
hello world groovy which is reassuring
you know but how about this public class
HelloWorld in other words it created a
class called hello world the name of the
script extends groovy lying dot script
here and then we have a constructor a
default constructor and then one that
takes something called a binding that's
how you can get data in and out of the
script there's a binding class you could
set parameters and get parameters in and
out and then there's our ever-popular
public static void main string array
args home you know that's always a
mantra public static void anyway and
then there's a run method essentially
what's happening now there's more layers
of indirection than this but basically
what happens is whatever code you put in
the script winds up in the body of the
run method and when you execute the
script your instantiated the class or
you're calling the main method which
instantiates the class and invokes run
so the code I'm writing is basically
local to the run method unless I use
this binding at which point those become
parameters attributes rather attributes
of the class so that that's how i can
get and set them from outside so in
other words there's a class here i just
need to have some way of resolving all
these dependencies and things like
metaclass and stuff like that well back
to my installation of groovy now since
i'm using GV m I have a dot g vm folder
underneath this by the way g vm was
written by marco vermeulen who is
phenomenal developer does it did a great
job with this thing and if I look
underneath this I have a folder called
groovy and inside that there's on my
installed versions I could just go to
current that's what I set my groovy home
variable to his current if I look under
two dot one dot seven you'll see there's
a whole bunch of directories here inside
the bin folder that's where the groovy
and groovy see commands are etc see this
guy called embeddable if i look inside
embeddable there are two files in here
let me make this large I mean let's
actually see the size of those these are
two files that both end it start groovy
old version jar at the end there about
six point three megs or whatever and one
of them is just the regular jar and one
of them is presumably used by indiana
jones
yeah actually that's actually the one
using the invoke dynamic instruction in
Java 7 we don't have to do anything in
order to take advantage of invoke
dynamic and although in two dot one it's
not used extensively but in two dot to
which you can see is in betas it'll be
used everywhere so if you just recompile
under two dot to when it comes out and
run on Java one dot seven estimates of
performance improvement range from fifty
percent the three hundred percent
depending on what you're doing I mean
it's gonna be major and we don't have to
write any different code that's all
happening under the hood just being able
to hook into the invoke dynamic or using
invoke dynamic to hook into the JVM just
for efficiency but any rate this is the
whole library groovy all jar file here
so what I want to do is I want to say
java there's my command and dash CP for
class path and i'm going to operate off
of my groovy home variable and there's
the embeddable and there's the groovy
all jar file and then the local
directory and there's my hello world and
bingo I just executed compiled groovy
with the Java command yeah that's that's
worthy looks very mild clap yeah
absolutely but you're not applauding me
that's groovy hey but here's the here's
the cool part I mean it's one thing to
do a nice demo it is a cool demo but
there's ramifications here this means
what do you have to do to your deployed
production Java environment to include
groovy nothing you add the groovy all
jar file this one to your path or to
your coat to your project actually to
the actual project when you deploy it
you're done you don't have to change
your tomcat server in any way or your
app server whatever it might be
glassfish i suppose why i should say
this week right but whatever you know if
you look at a grails app for example the
last thing you're doing Grails is you
say Grails war the build a web archive
and if you look in the lib folder you're
going to see all the spring jars and all
the hibernate jars and log4j and
whatever associated ones you need and
the groovy all jar file because as far
as the the execution environment is
concerned it's all just bike coats it
doesn't care see it's when you're
writing it and compiling it that it
cares but when you're running it nothing
so that just tell your manager it's just
byte codes just dunno jar fought it's
not a library right you could try that
good luck with that
ok so that was executing groovy with the
Java command yep now I want to talk
about one of the features that is
interesting in groovy but doesn't get
enough attention this I think helps me
understand what's going on a groovy much
better is operator overloading now we
operator overloading has a very mixed
reputation you know people saying oh all
over load plus 2b times or something and
then I'll get job security right yeah
although really that's not job security
so but the thing is while I don't do a
lot of operator of loading and groovy
although you can I don't generally do it
it exists throughout the libraries
something called the groovy JDK the Java
classes that have been enhanced by
groovy metaprogramming to make them as
they say groovier and is used as
operator overloading everywhere and in
fact every operator in groovy invokes a
method call it's not like you have
optional overloading it's happening on
every method I mean that when you use a
plus it's actually invoking the plus
method minus multiply how about things
like square brackets representing get a
door put at you just and therefore if
you don't know what something is doing
you go to the groovy JDK or the library
and you look up the get at method how
does this work or for example with
strings if I do a minus then do i
subtract just the first substring or all
of the substrings that match the
argument and the answer is i can
remember or i can go look up the minus
method in the string class and find out
you only subtract off the first one as
it turns out whereas if you do it on
collection you subtract out all of them
something like that and even equals
equals you know we've been trained for
years in Java to use equals equals for
primitives and dot equals four classes
in groovy equals equals invokes dot
equals automatically unless the class
implements comparable at which point it
invokes compared to instead which is
supposed to be consistent anyway same
idea so let me demonstrate this first of
all there's the link if you want to find
it I just google it normally to go to it
the operator of loading page showing you
all the operators and then of course I
had to put in grumpy cat
make Java groovy no actually yes and I'm
going to do plain old groovy objects and
I'll get to that in a moment let me do
the demonstration the operator
overloading very quickly to show you how
easy this is so now let me come back
here and by the way groovy evil it out
an IDE comes with a program called
groovy SH the groovy shell which is
right here and I don't use it for much I
can go one plus one and go hey I'm a
groovy developer you know resume driven
development as they say there you are
right and i can do the full you know you
know the scala and the closure people
generally refer to this as a ripple you
know read eval print loop this is the
repple for groovy but it's really if you
think about it's a ripple for java right
because almost all java groovy
understands it can execute just about
everything so here's my full whole world
program of course i'll even put in a
semicolon you know now this time by the
way this is the print at a console print
line returns void that's why i got null
here if i take off the semicolon that
works if i take off the system dot out
that's fine if i take out the / ends
again in this case that's simple and
then i moved it to a single quote rather
than double quote here and there you go
and i really don't do much else with
this although it is a nice text based
calculator you know for that if I don't
want to open up some calc or something
I'll come back to this so now actually I
probably won't come back to that but I
could any rate let me get out of that
here's the one I actually do use on a
regular basis something called the
groovy console although i'll switch over
and show you a couple things inside of
groovy and grails tool suite so here now
you'll have to tell me if the fonts big
enough print line hello world somebody
in the front rows naughty well i hope
it's big enough to the front row how was
it back there do i need to go up its
size good okay so you see the nice thing
here is i get very limited you know
source code coloring you know a little
bit and i just execute up here and it
runs down here well remember that
operator overloading well let me say
here i'm going to say def because that's
the variable type where it's like saying
VAR and javascript where it figures out
the type
runtime so it's basically telling the
compiler to just give it a rest and
we'll figure it out at runtime s is this
is a string like that now if I execute
this the last evaluated expression in
the script is returned by the script so
there's my result okay but now if i go
back over here and i go to the groovy
home and i look under documentation
there's the groovy api's which i might
need later so i'll open that up and then
there's the groovy development kit which
is what i was calling the groovy jdk
these are java classes that have been
enhanced to make them as they say
groovier and if i look under for example
string now let me make that bigger ok
now there is a method here if i scroll
down there's a whole series of methods
called get at get at that takes a
collection of indices or these things
called ranges or an int or what have you
and the range thing is a groovy thing
i'll come back to that in a moment but
remember the operator overloading get at
is these square brackets so in other
words i can do this s of 0 is the first
letter or s of one is the second letter
or so2 is the third but since they're
implementing this any way they want
check this out s of minus 1 is the last
letter or minus 2 is the second to last
letter in other words you can index from
left to right 0 1 2 3 or index from
right to left minus 1 minus 2 minus 3
and then I can mix them remember that
range thing it said is one of the
arguments here's what a groovy range
looks like zero dot dot three now the
way you interpret a range is that one of
the value on the left is your from
position there's actually a method
called get from in range and then the
one on the right is called too that's
your to position get to and what what
the range does is it invokes the next
method or the previous method to go from
the from to the two so this is going 0 2
3 next next next so if I execute that
that's the first word ok or here minus 3
2 minus 1 is the last word last three
letters or how about this minus 1 minus
3 now that looks like a reverse the last
three letters but didn't really said
start at minus 1 go 2-3 calling previous
this time
so now I can mix them here's the here's
the string with no spaces in it 03 and
then I'll skip four five dot dot six is
is i'll skip seven then there's a or 80
80 the one would work skip nine and then
10-1 just go to the end see I don't have
to count and there's the string with no
spaces in it and it's all because I
recognized the operator overloading that
I know how to use this I know how to go
to the get method and find the
implementation and see how it works and
as I was mentioning I could also do
things like s+ and more now that's no
surprise we've got we have string
concatenation in Java but I can also do
s minus is here a see how I remove the
first is but not although not both of
them and again I know this because I
look up the minus method in the string
class okay now the nice thing about this
actually let me leave that alone and go
to pogos for a moment pogo's in java
there pojos plain old java objects in
groovy there pogos plain old booby
objects I here in Python they refer to
them as po PO's it sounds vaguely
disgusting if you really want to upset a
ruby developer by the way in effect
you're not using Ruby already upsets
Ruby developers but if you really want
to upset them refer to poros they hate
anything that sounds like Java anything
that sounds like Java let me make a pogo
though i'll show you what features it
has here's a class called person and
i'll put in a first name and a last name
like this now if this was a POJO what's
missing what do i need to add to begin a
POJO getters and setters what else
semicolon shore yeah the access modifier
is public and private pardon me
constructors chore maybe two string
equals and hashcode methods all those
things okay now a lot of Groovy's meta
programming is based on what they call
method missing methods that are not
there that groovy will supply on your
behalf of course if you supply them then
they're already there and it won't get
replaced but let me demonstrate what's
already here now in Java if you don't
put public or private on there on
something then you get this weird
package private hi
rid I understand the attempt to make
friend access but why make that the
default and it's not really friend
anyway but whatever in groovy if you
don't put public or private on an
attribute attributes are private by
default and methods are public by
default and the class is public by
default and since that's usually what I
want that's very helpful now you can put
public or private on there if you put
well I'll get to that in a moment but
any rate there's my class now watch this
I'll say person p is a new person so I
have a default constructor and i'm going
to call sent first even though i don't
have a set first method which i put in
i'm in san francisco ok and then p dot
last equals that work for you or is that
getting really dated they did not do
well yesterday I don't think I want to
pick it was not Colin never run a temper
and a quitter probably not the day to be
advertising him so any rate here's my
groovy string the double quoted string
allows interpolation inside so if I say
Pete I get first and then dollar curly
brace p dot last like this then you
notice I printed out the name right like
that now let me there's a lot going on
here first of all yeah I got a default
constructor but I actually could do
better than that secondly it looks like
I'm calling a method here and here that
these methods that don't exist this is
the method missing thing going on in a
groovy class any attributes that don't
have public or private on them auto
generate getters and setters for you so
you have the getters and setters they're
just they don't show up in the bike
codes they're not in the class this is
runtime stuff now the I don't think so
because I don't think that the question
is if Iran Java p what I see the getters
and setters and I don't believe so
because uh you don't there this is
runtime meta program i believe they
might have optimized that one though so
I don't want to swear to that but I'll
come back now the other thing is is
known as P dot last year here didn't I
just finish saying this was private
right i mean i was the whole point and
here too well in fact this is the
standard groovy idiom when it looks like
you're invoking accessing an attribute
you are actually invoking in this case
the set method and in this case the get
method so up here if I said for example
void set first I'll put in my own
look string first actually let's put in
print line inside set first and this dot
first equals first and as soon as I get
finished with this will start doing some
more interesting things then you'll
notice here that even though I'm just
going oh I call the did the wrong one
didn't I let's change it to actually
let's just do it this way p dot first
equals like that and you see even though
I'm accessing the attribute I'm actually
going through the setter method okay so
this is a standard groovy idiom if you
had to use the calendar class in Java
which is an abstract class how do you
get one you know the factory method
right I thought I heard it you'd google
it right no yeah calendar get instance I
know I heard it out there well in groovy
the way you would call that is you'd
write calendar dot instance and
everybody would know that it's invoking
the get instance method whether there's
an instance attribute or not you know
it'll be invoking the getter method from
that and that's the normal groovy idiom
and if you're using the calendar class
my condolences anyway although that's
going to get fixed in Java 8 right
that's coming out though I know wait and
see too but anyway now one more change I
could make to this before I move on let
me get rid of that and inside here we
have what i like to call a map-based
constructor so if I go first colon and
then last colon that works too and not
only does it work it went through the
setter method it actually invoked the
default constructor and then invoke the
setters which means I can do this with
Java classes to that I call it a
map-based constructor because only look
at maps you'll see colon separating the
keys from the values here ok but when I
do this I can invoke I can instantiate
java classes with the attributes in any
order and any combination you know any
number i want using this notation if i
do it from groovy and it'll call the
default constructor and invoke the
setter methods and i'll be all set so
there you go there's your pogos so if i
come back here and of course it's not
doing it let's try this again
it would assume it was if I left out the
quotes on that on the right-hand side or
what assumed it was a variable yes so
any rate there's your pogos you get
generated getters and setters the map
based constructor oh and the part I
didn't show where the asd
transformations that's actually worth
demonstrating very quickly before i go
on here let me put in now let me let me
do this so take out the the clutter here
just to keep this short enough up here
now i need an import statement import
ruvi dot transform dot star and i'm
going to put in at two string include
names equals true this is all in the
groovy API and how about this one equals
and hashcode like that and that still
works and how about this now I'm going
to go let's make this p1 if you will and
I'll put it in p2 here and down here
we're going to do instead is I'm going
to say first of all i'm going to say set
people equals p 1 comma P 2 that is at a
linked hash set okay by default that's
you can instantiate the set klavia the
implementation of the set interface in
this case it happens to be a hash set a
linked hash set and now when I print out
people it will invoke the two-string
method and notice it only added the
person once because I have a default
equals and hashcode method the same one
you get from the recipe and Josh blocks
effective java book same when the ide
generates you can customize it there are
attributes to say include this or
exclude that or what have you I just
went with the default but hey take a
look at my Pogo you know pretty good I
can even add this one oops at tuple
constructor and now I can do this let me
change this to the arguments in order as
they appear in the class and then I'll
add a third person oops sorry
and there worked again made all three of
them and they're all three identical now
this combination is so popular to string
equals and hashcode that they've
actually replaced it with one called at
canonical and their works the same all
you see the two string method is the
default one rather than won't the
include names in it the more attributes
you have easier this gets okay back here
then I want to go to something much more
interesting i will show you this one an
account class c because groovy has
operator overloading they added all the
operators plus minus x all those normal
operators have been added to number
which is the superclass of bigdecimal
and big integer so if i have to add in
something grew if I have to work with
bigdecimal my java system it's easy
enough just to put in a class in groovy
that does that just that part so here is
my you know okay let me make it so here
sorry here is my groovy and grails tool
sweet i got to keep that available
that's my random number for later and
then here is making Java groovy and then
here is my account pogo see there's my
canonical here is my account class all I
am is wrapping a bigdecimal I've got a
deposit withdraw this is using the
operator overloading to do plus and
minus i already have to string equals
hashcode tuple constructor all because
of this here is my bank in Java and I
can open an account simply by
instantiating the class and then setting
viewing a deposit by wrapping bigdecimal
you know my initial balance with the
string constructor and just calling it
or here is it get balance and return to
bigdecimal or add funds or remove funds
again as far as this class is concerned
has no idea the other ones groovy okay
and then here's my tests and this is
just a simple j unit test written and
groovy so there's my bank and i invoke
open account and now groovy has the old
see version of truth in other words
non-null references are true and nonzero
numbers are true non empty strings non
empty
elections those sorts of things are true
so I just test that this account worked
and then again remember I'm invoking the
equals method here to check that and add
funds and remove funds and this all
works just fine there's my test case
running with the normal j unit runner
even though the test case happens to be
written in groovy doesn't make any
difference and it's all fine so one
simple way to work with groovy a java
togethers put the groovy code in a class
and use it like it was any other class
no big deal nice and simple so now going
back to this again let's try this and
then I've got I got two major demos left
I want to do so okay there we're going
to make it so i'm going to show you the
native collections but i'm going to
build it into the demo I'm going to do
range as i mentioned lists and sets are
available i made one of those as well as
set and then maps as well look like what
we just saw and then ranges implement
comparable you have a next and a
previous method actually let me say it
this way if you want to make your own
class workable in a range you know to
put in a groovy range just implement
comparable so it has some way to order
them and implement next and previous and
you're done then you can use them in a
groovy range and I have examples of that
as well but number date string you know
the library classes already have that
this is a this is a java.util.arraylist
both of these okay or unless I say as
link Latour hear about as set that will
now use a linked hash set and remove the
duplicates and I can either say as set
on the right or declare the variable
type set on the left either way here's
my map notice the key colon value
notation that is a linked hash map and
the keys are to the a B and C here and
the values are 1 2 and 3 and the keys
are assumed to be string so I don't have
to put in quotes around them it wouldn't
be wrong to do so but it's not necessary
they overloaded the dot operator so i
can go map d equals and that's invoking
the put method on the map ok so that's
the map dot key equals value will put
that key into the set into the map
rather then I they've overloaded the put
at method strings don't have a put at
method strings are still immutable ok
but the maps do there's 8 45 and then
you can just use the Java put as well
that works perfectly fine also
and that all is in there now if we had
more time we talk a lot more about
closures I'm gonna have to demonstrate
them instead rather than talking about
them of course closures are the hot item
this you know at this conference because
of the the lambdas being added in Java 8
now here these the closures in groovy
i'll simply say are both they are first
class objects but they can have side
effects if you put the code in to
actually modify a variable outside that
was to find outside of it so do you
really call them pure functions or they
lambdas you know the differences are all
however you want to define it they can
have side effects unless you write them
not to have side effects but if you
don't want to wait for java 8 you can
work with groovy closures now and they
work the arrow is the notation groovy
uses to separate the keys of the values
notice that in groovy you don't put the
parameters and / ends but you do in
close the entire closure in curly braces
if you don't specify an argument the
default are the default closure is a
single argument closure whose default
argument name is it as you see on the
first one there so these are treated
like an anonymous function as a first
class object which is kind of
oversimplified but that's not a bad way
to think about it on there and of course
we have all these methods to each and
collect and find all and inject and all
that and this is what i say is how
groovy acts functionally if you want to
look at the way that you think about it
in from practice the closures are like
lambdas if they're pure functions
collect is the map and inject as the
reduce although there's many reduce
methods like there's a some method on
collections there's a join method on
collections to turn into a string
separated by some delimiter I'm going to
use that in a minute find all is your
filter you know so any demo you see I
think Brian gets did one yesterday with
a filter in it and you could do it just
as easily in groovy right now without
waiting for java 8 so of course then I
have to do this not making Java groovy
well the groovy JDK has all these nice
classes in it that have enhanced their
groovy meta programming and now let me
do one of my cool demos restful
webservice the google version 3g o coder
ok now the way i'm going to do this let
me go to my i'll go in here but this
code is all in the code base i'm going
to give you
here is the google geo coder and it's
part of the Google Maps API as they say
and geocoding is taking an address 1600
amphitheatre parkway mountain view of
turning it into a latitude and longitude
say and the way it works is is they
claim it's a restful web service because
they use a URL real you know what those
rest advocates call themselves right the
real true rest advocate rest afar ians I
didn't do that one that's and that shows
far more of a sense of humor than you
would ascribe to those people normally
you know it they have arguments that
would break their you know room shake or
whatever any rate the output here they
say is either JSON or XML and of course
they recommend Jason because it's a
Google Maps API JavaScript API i'm going
to use xml for this i have a different
example for Jason and by the way i call
it jason and not json mostly because i
like picturing a guy in a hockey mask
with a machete while i'm coding the sort
of stuff down here the address i have to
put in is the thing i want to geocode
and then the sensor is true if i'm
calling from a gps-enabled device and
false otherwise although i've done both
and i'd never noticed a difference but
here's an example let me get out of the
XML 1 i'll skip this one here's the xml
one here's my base URL up to here and
copy that and i'll say my base URL is
like this and then you see the address
here is street city state separated by
commas or comma plus but i think the
commas are fine and notice how the
street has been URL encoded you know
they replace the spaces with pluses and
then of course sensor equals true or
false well if i start off with a list
let me call this encoded and here what's
our address here do you have anybody
having to know did you say 330 333 oh
come it's actually Oh a paw street so I
need a double quotes here i'm in 333 OFA
that's what I thought okay it's at a dr
street whatever at school they'll figure
it out
they will actually be and are we're in
san francisco right yeah i mean you know
i don't want to make the assumption you
know and then there yeah exactly now
notice that is a list okay no problem
there i could even go if I just want to
go doc classname see that that's the get
class that get name invokes arraylist
here but what I want to do is I want a
URL encode or I join them now in groovy
they have that collect method the
collect method takes a closure and
applies the closure to each element of
the list it produces a new list as a
result okay so this is functional
programming right I'm going to apply a
collection now groovy doesn't have a URL
encoder but Java does java.net.url
encoder has a static method called
encode I'm going to code it each element
under utf-8 like this and there it
replaced the spaces with pluses and the
apostrophe with a percent 27 just from
the Javas URL encoder class okay but of
course I don't want a list I want a
string which I'll join with commas there
you go there's my comma separated
address encoded okay now what about the
query string now i'm going to this one
so simple i could just hardwire it in
but here's the general practice i do i
say my query string is there's the
property address that's what they want
the parameter they want and that's my
encoded value and then they wanted
sensor which i'll just say is false and
if i look at that see it just plugged it
in there's the address and the sensor
the space here is just for my own
readability and now with this one again
let me put some room in there I want to
do a dot collect this time and take each
key in value seiki comma value key colon
value and replace it with key equals
value like this okay and see what I got
now is address equals that and sensor
equals false because again collect will
produce a list by applying the closure
to each element of the map in this case
and then I want to join those with an
ampersand you know normal query string
and there's my query string address
equals
and sensor equals false so what I could
do by the way is I could just use the
groovy jdk go dollar base dollar QSR
there's my string see there's the entire
URL all the way over and I could go oh
wait a minute the groovy jdk has added a
method called to URL to string which
produces a java.net URL and then it
added a method to URL called get texts
and there's my xml okay and then of
course if you've ever tried to parse and
walk the tree on xml and java then you
know what a joy that can be okay but
notice there's my root element and
there's a result and if I scroll down
there is up too far here geometry
location lat and lng so instead of doing
it this way i'm going to do this i'm
going to say the root of that tree is a
new xml slurper okay which has a parse
method in it that takes the URL okay and
that will automatically give me the root
and then I just walk the tree so i'll
say lat is root dot result dot geometry
see i can read off the tree now location
lat and longitude is root result
geometry location LNG and i'm just going
to print out dollar lat dollar long and
there's my location pardon me it's
street yeah well Google figured it up
well actually what I'm going to do is
let's let's just show how dramatic this
can be how about this McMurdo Station
and arctica no problem I mean Google's
making me look good see I'm just using
their restful web service to pull off
now it's restful but it only does get
requests you can't add you know post put
or delete at Google you know and the
reason the rest of firings wouldn't like
it of course is because I'm not doing my
content negotiation and headers I
hardwired in here and of course I don't
have post put or deleted but whatever
nice demo how many lines of Java would
that be okay in the source code in the
github repo I have this I have test
cases both with online and without
online okay now for the the question
then becomes hey that's cool verte XML
what about Jason right what about Jason
stuff we use all the time now I have two
choices for that depending on whether
this site is up or not I CND be the
internet Chuck Norris database as in
chuck norris once ordered a big mac at
Burger King and got one if i click on
API here then here is what I'm going to
get back adjacent object success value
is ID in the job time waits for no man
unless that man is Chuck Norris you know
and if I go down by the way I could put
in first name and last name so i can
replace it with you know gilman LaForge
or Andre saw me ray and then down here
what I want to do is I could fetch a
random joke but some of those are not
really suitable for this sort of
presentation so let me go to limit too
nerdy okay copy okay and then I'll say a
string actually i'll just say def URL
equals and there it is and this time
i'll do that URL dot to URL text so you
can see the JSON object chuck norris
does not need to know about class
factory pattern you can instantiate
interfaces that's not bad that's not bad
but you see how that's adjacent object
and what I need to do therefore is to
now that the XML slurper I was able to
use an automatic import on but the Jason
one I don't so I'll say this is string
Jason text this is my text at the moment
and now I'll say jason is a new and i'll
just write it here groovy dot Jason
Jason slurper which doesn't have as many
overloaded parse methods so I'll use
parts text on the json text here and
then i'll just print out Jason dot let's
see drill into value drill into joke
chuck norris's keyboard doesn't have a
control key because nothing controls
chuck norris
you know and as I say I could put in
first name and last name and replace it
however you want I got to tell you I
actually made an Android app that was a
front end on this and got a letter from
the chuck norris lawyers you know I said
but it's a public website I'm just
consuming I'm not selling anything i'm
choosing presentations and Google Play
took down my app so oh well if you want
the code that it's all i c'n DB internet
Chuck Norris database that that Android
app is in my github repo so feel free I
was going to reap put it up there with
Chuck Norris names replaced by the
lawyer names but I don't like to get in
trouble I just like to cause trouble
that's different you know all right so
let me finish up these slides and then I
can answer any questions to talk about
other stuff so that was the geocode ER
again I used in code and the join method
here and I used to collect which took a
key and a value and replace it with key
equals value the way I wrote it and join
with an ampersand and then i use the
slurper and it looked hard but I made
java groovy there's your success kid
right you know on that one and then I
did the internet Chuck Norris database
so there's the URL and see here's how
you would put in all three of them but
again I would make a map out of those
and then I don't have the URL encode
those they don't know spaces there but I
could do the join and add it on you know
the same way I did with the other one
this is just what the resulting URL
would look like and that used the Jason
slurper and I could do metaprogramming
we don't have time for that but there
would be other talks about that around
of course my tests can be written using
the Spock framework a testing Spock is a
happy Spock the combination of the word
specification and mock you know but I
don't buy it i confronted Peter need a
visa at the spring 12 GX conference a
couple weeks ago I said you just wanted
to call it Spock just rationalized after
that right and he just smiled at me but
he does that you know he didn't deny it
you know so it has a J unit runner in it
you can run Spock tests with your j unit
infrastructure and i have many examples
of that in the codebase you want to take
a look data-driven test database driven
tests really slick the other big
breakout project of the groovy ecosystem
other than say Grails you know is Gradle
spring is built now with Gradle
hibernate is built using Gradle and in
the future Android even is going to be
built using Grail android apps and
that's really ironic because crew v
doesn't run on Android you know so it's
pretty good that's a dsl for your bill
so now you're writing your build in
groovy rather than an XML so you can use
the library you could do clever things
you're writing a script to do it but I
hibernate spring and write all this
thing's use and then of course I had to
save the best one for last there we go I
don't always code in Java but when i do
i make java groovy right okay again I
didn't expect a lot you know I was
hoping I was actually worried because
you know they make you upload your
slides here early and I was really
worried they go wait a minute copyright
violations trademarked by least I was
afraid they're going to make me take
them out but I don't think they even
noticed I'm so no problem any rate so
there's your bottom line groovy compiles
to byte codes on the JVM that's what
they are and I could switch from job at
a groovy and back on the same line
without even noticing again it's a
trivial example since I have a moment to
show you okay as a trivial example over
here I had a client once that said they
wanted to print out all the numbers from
1 to 50 0 to 15 in binary but they
didn't want to lose the leading digits
they wanted it with all four digits on
there now that's not what they said but
that's what they meant and I went oh
wait a minute 0 dot dot 15 dot H and
then what I'm going to do is I'm going
to say oh I'll print line and I was
going to just print each but of course
what I need to do is I need to convert
it to a binary string and that's what
integer actually I don't need to do it
this way do I could just write it out
integer class in Java has a two binary
string method that takes an integer and
then I want to go to the groovy jdk and
go well okay pad left four digits with a
zero as the leading digit and there you
go AC I just switched from groovy to
Java back to groovy without even
noticing you know so let me say it this
way then adding groovy the job is really
easy as I hopefully showed adding job at
a groovy is inevitable hey every groovy
project of any significant size uses
groovy Java libraries and other Java
implementation
patients half of Grails is still Java
because of spring and hibernate I mean
why why not you know and Gradle the same
way lots of these are like that so in
your summary here as I say that I didn't
come back up again nope Thank You
PowerPoint and I will not be using you
again for I don't know next year's Java
one anyway we have the groovy jdk which
is a great source of great methods you
wish were there all along like a reverse
method on string or find all on
collections all these things you have
the native collections just use the
square brackets or map or whatever with
the colons we have closures in it you've
got builders metaprogramming and i
suppose if that's it then let me give
you the last literary last scrip i have
here was just in case that i c'n db1
wasn't up i have one here that is a WoW
got small again but I have it oh I got
to do the random number don't I here
here's the flickr one ok there's my key
and my endpoint for flickr and my
parameter is the method and api key
format tags no Jason call back and
photos and of course I'm going to look
for cat pictures I mean that's what the
Internet's for right so I collect
everything and build my my URL and then
I just call to URL text and I get back
Jason and then i append it to a file you
see how easy that is to do then I parsed
it I print it so you could see it and
then I grab walk the tree down to photos
photo and then the way flickr works is
they give you back a JSON object they
don't give you the URL they give it to
you in pieces you have to extract out
the pieces like this one called farm and
server and ID and secret and I just
assembled it and then here I this is
using something called a swing builder
to build a swing application off the
event dispatch thread my jframe here has
a title of cat pictures setvisible to
true pack default close operation what's
WC oh look up here at this import window
constants as WC you could even make an
alias for your imports if you want ok
and then a grid layout and I'll take the
first six and for each one
take the URL and plug it into a Java
image icon see what I mean about the
close integration here and put a jlabel
for it and when I execute this as a
groovy script here and now I'm taking a
risk because it's going to pull the six
most recent cat pictures and I don't
know what they are for sure necessarily
but I'm hoping they're okay now what in
the world does that have to do with cat
see what I mean I I don't know you know
and I've tried it with others and let
believe me this is the safest okay but
you see how easy that is to do and again
this hasn't been added to the source
code but i will now for the random
number I and I noticed in this room I
think I counted I don't know why I can't
see my cursor but I believe there were
ten rows across here women I can't see
here there 10 rows and then how many
across 5 10 15 what do you think 20 be
enough and I'll just generate a row and
column or is it less than 20 looks about
20 right well like I say if you want to
you know argue about it i'm willing to
watch you know anybody so notice this
also i can generate two responses from a
method actually what it's doing is I'm
returning a list and it's extracting the
elements of the list as my outputs and
then I'm printing the row and column
here so if I execute this no j unit
tests found because i hit a tee
accidentally if i hit the g like I meant
to so now we remember or zero-based so
so if this is RO 012 so it's a third row
and the 20th pert well the 19th person
so second to the end that would be I'm
going to some assume it's Wade know
you're in the second row it's behind you
oh no you are this is a first row you're
right it's yours dude I need to talk to
me afterwards I need an email address i
just to send it in to Manning and
they'll get you a book and anybody else
who wants a book you know I gave you the
discount code right you got all that and
I'll be around all week but i want to
thank you very much for coming
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>