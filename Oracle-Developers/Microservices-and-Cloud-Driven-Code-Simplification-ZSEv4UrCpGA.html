<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Microservices and Cloud Driven Code Simplification | Coder Coacher - Coaching Coders</title><meta content="Microservices and Cloud Driven Code Simplification - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Developers/">Oracle Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Microservices and Cloud Driven Code Simplification</b></h2><h5 class="post__date">2017-10-07</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/ZSEv4UrCpGA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so hello welcome to a microservices
clever dragon code simplification
actually a better title would be how to
remove bloat with microservices but this
came later the idea so um yeah I'm a
self-employed of freelancer so I never
properly work I always was by my own
since 1995 and working 1995 and since
1997 20 years
I'm freelancer and Stickle always with
Java and JavaScript okay
someone attended he hates to be already
saw this okay nice
thank you what it is is the problem is
emails and I got lots of emails about
various Java questions I couldn't handle
them and it's also hard for me to always
say no I have no time so the idea came I
will gather everything on gist and
github and you can ask whatever like and
I will answer once a month so this is
the deal and this worked perfectly and I
save lots of time and attend this seems
to have fun and they are all over the
world that is once a month so you don't
have in the register
it's just live streaming and I push it
to YouTube I've read the block from time
to time and there are workshops and
there are two other sessions which were
similar to this one tomorrow
I'm will talk about heavy weight and
light weight what I will do I will
measure a lot performance and compare
applications have as micro versus full a
lots of questions I get they will
compare you know helloworld.java micro
service with full stack whitefly and the
other one is about what happens if you
apply the Java EE patterns to html5
JavaScript CSS so microservices so first
I would like to find what micro services
are I attended Oracle code London and I
use the Martins Fowler definition and a
viewer and these were not very pleased
with that so this time I use micro
services definition from Wikipedia if
you don't like this this next time I
will find something else so there are
many definitions what what it boils down
to I think is is something which is from
the domain perspective self-contained so
this is important to me it has to make
business sense
cannot have you know micro-service like
something like data or whatever so it
could have this is not very well
maintainable so as something from the
main perspective which is wealth
self-enclosed
and usually or actually always in my
projects it the interface is HTTP and
JSON actually so what we already know so
think about this this is basically a JVM
in my case is always Java Java is
service a Java server with a single war
which exposes to the outside world and
HTTP and JSON end point while HTTP and
JSON because we have react and html5 and
view and sometimes if you have nothing
to do and would like to type a lot
angular 4 or 5 ok so this is actually
why it is that way of course what you
could do G RPC but usually you stick
with that any questions no and why is
that important because if you know this
you can kill 80% of all Java patterns
this is actually the topic of the talk
what happens if you take this definition
seriously so this is actually the idea
and this is what I do my projects ok so
this is even funnier this is my one of
the best so what is cargo cult
programming this is what I see in all
projects this is a ritual inclusion or
code or program structures that serve no
real purpose and do a master of that in
Java EE and enterprise I don't know
about other languages but in Java is
very popular and then the next paragraph
here cargo cards the programming can
also refer to the results of applying a
design pattern or coding style and Lee
without understanding the reasons and
understanding the reason is not the
problem the problem lists using patterns
without having a problem this is what I
see so there is no problem just
solutions and after after years no one
knows why the solutions are there and
there is 80% of business logic or
business logic bloat and 20% of business
logic at the solution is of course go to
know Jesus is the life is easier there
but the only difference between them and
asses in node.js no one will write a no
20 layers to see a button on the
H that is what we do all the time right
so so few slides I would like to talk
first about packaging and what I wanted
to say is ears do not make any sense
anymore
why not because ears enterprise archives
back then the idea was you have like
modules ejbs which are reusable and then
Wars which is the UI and this was
strictly decoupled with the idea you
know that the war and egb can live
independently actually you could version
them complete differently in the wars in
the years so well we have war right now
and work and contain everything so all
my projects are worse so years I didn't
ears for years I could probably manage
to take something for you but I had no
idea whether it would actually work
so why ears are terrible from my
perspective you have to zip four times
or yeah three times this year first it
should be jar then the war and then the
ear and then we're often you zip the
slow it gets agreed by the way I forgot
to mention if you have any questions
just ask me so this is why we are there
right if not afterwards so so what the
meat is war what it also implies now now
it's a the more interesting part we only
have an end point to the outside world
so no one will see what we are doing
inside in the world
also the wars are smaller and because
the only end point is HTTP what it also
means the main idea of micro services
you have two teams have forgot to
mention this and they could deploy
independently from each other so this
one war is version 2 and the other one
is version 1 and this only works in Java
if there are no common dependencies
binary dependencies between them right
so you cannot share jars period so if
you cannot share jars what it means in
my projects in wars all jars are
forbidden you are not allowed to have
one war which includes other jars it
does not make any sense so there are
what I wanted to mention there are also
exceptions from the rule but in 90
percent of all cases it does not make
any sense
when it made sense recently we actually
know to talk to micro
of office and without a pet cheapo is
really hard so we had a jar pooey but it
was not our tower what I'm talking about
last year I was in micro service project
what it did at one world and 100 sub
modules which were developed by that by
the whole team and this is the problem
was of course deployment time so they
had to zip again 101 time what we only
did so I killed all the projects copy
everything to one war project and it is
going to be easier so what happened then
this this build was three times faster
but a cool story is they they identified
the applicants the first time because
all the applicants were hidden in all
these small modules and now everything
was in one war so days they saw the
first misspelled packages you know one
package was like a common with 1m the
other one was two M's and so forth
okay everyone with me so what it means
in my micro service one war no sub
projects no sub modules just one war
with everything which really counts our
package names built so if we have that
and we use Java what I'm using we only
have one single dependency which I show
you in a second so dependent to Java is
seven and Java 8 so actually show you
this right now new project archetype I
would like it just would like to fire up
to show you how the what's wrong
too slow Java is fast and ideas are the
problem what is it beans so then I'll
show you later but this is going to be
one single dependency the EE 7 or E 8 so
try it again new project archetype let's
take to Java 7 Java 8 it doesn't matter
and call it food micro service so this
is what we can improve the scalability
right yeah
a Java one the lunchbox service so food
as a service FAS this will be better
named food as a service we function as a
service were yesterday
we need food at lunch in two minutes
right so and now look at that so this is
the default configuration for all my
Java in Java 8 projects and this was a
default configuration for all my java 7
projects so what it means is there are
no dependency no jars super poems do not
make any sense if I go to project and I
see super poem in a code review I did it
at first it's like nice dry wood why
because if you start with a super poem
you are already implying that you have
some dependencies to inherit and some
properties but there is nothing to
inherit we don't like to inherit we
would like to implement our business
logic ok so what I meant this super poor
maven is incredibly simple if Raven is
simple I never got in a running project
the question why I'm not using Gradle
it's like what to optimize here Gretel
would be very very similar everyone
agreed so super proms are forbidden
first so what's allowed how it's called
it is like super plumber's aggregator
built so if we have multiple Wars we can
have once not super political aggregator
poem we just execute everything is more
convenient so you can build multiple
Wars at one time but there is no super
then no one refers to the super
aggregator build how it's called
aggregator built right what the type is
promise it's not work prompt this is
what I'm
so there's one one one kind of poems and
the packaging is pump and this what I'm
referring to
okay great so we covered maven
modularization so if you think about
this so with what would you already said
we have one piece of functionality which
makes sense from the domain perspective
it doesn't make any sense to have
modules inside the module so so all the
attempts you know to have any you know
module technology are irrelevant so I'm
not very sure whether we'll use cheeks
or inside such a work because it will
imply we will get several parts of the
world in different versions so by the
way in my eyes how to verify whether I
know
maven modules make sense or not what I
would like to see is whether so it makes
sense if when all the modules have
different versions but you have 100 more
modules and everything is version at
once this is at least suspicious doesn't
make any sense then I try to our gate
everything to one thing okay what it
means is we have no patents no modules
what it also implies from Java code or
factories interfaces are dead are
actually not allowed in my micro service
projects if one if someone starts with
factory singleton interfaces that okay
then go for patterns where 20 years ago
right now what we have to do implement
business logic agreed of course
exceptions obviously you're something
specific and you have several
implementations and you and then even
qualify NCBI are very suspicious
most of my Java II project at that
simple just at inject no qualifiers and
you only are allowed to introduce an
interface if you find two
implementations so why our module is our
war this is the smallest atom let's say
in the in the micro service architecture
you know and dividing the atom what you
will gain nothing what it also implies
common utils base foundation whatever
sounds nice but there's nothing to do is
domain is completely forbidden so all
package have to have business domain
names in one project lately someone sold
services and there were five thousand
services
then like I forgot taoist they were just
Taoist what are you building someone
pays you or no number of dollars per
minute or what what they're doing here
right what does application does and it
was actually if you look at the
structure you couldn't tell what they
are doing you would like that they know
sell selling patterns and not what they
should okay reuse actuary there's no
reuse I have to say everyone attempted
to reuse and there was no reusing the
less last twenty years so we we should
stop to hope that someone will come one
day and review something from us so what
it means is you know the idea that you
created maven modules push it to our
maven repository and other team in your
company will look at the repository and
they're used this interface it usually
absolutely not happen why not
I don't know we are think or all
developers are if you start to with a
new interface I don't think that you go
to the maven repository I'm searching
whether it's something similar which you
could reuse before you start coding this
is not what I'm usually doing and this
is actually counterproductive into micro
services micro services are about code
duplication sure what it means you don't
care what the other team is doing with
the code if you can move faster you
develop it again and if this is a
crucial piece of business logic what you
will have to do is you will extract this
into another micro service and call it
via HTTP so this is period so I would
say what's good in micro services is
like a black and white architecture and
what we did before is a half either use
right so you have interfaces and then
impulse and hope that we impulse could
replace but how to call the in pull in
pull to was a better name and if it's
what if you change something in the in
pull the interface became a no
incompatible anyway and yeah so the
coolest story is one insurance company
they had versioning and without micro
services and they or they implemented a
huge versioning framework but they said
we don't change the version in
production because too dangerous like
app but then we can remove the version
you could yeah but invested a lot so
keep it okay
reuse decoupling decoupling the first
decoupling is worse one war is
completely decoupled from another war
but there is no decoupling inside a war
so we don't even try
to keep package separate if there's
package cycle there is a package cycle
and I get to no trouble with architects
and and a pizza if you have packet a
cycle between two packages in inside the
microservice you will never be able to
split the packages apart to to
micro-services so I never saw it before
either so it's really hard in Java to do
to move a package outside an app and put
it somewhere else and would work never
sawdust so they always did you know
create another project copied everything
to make it compile this is how it works
in practice if you saw something else
and now come to me later I will want to
talk to me but I never saw it so this
would be miracle Java doc even better
right so what we do is like you know get
on set that this is a getter this is
cetera and these are default
constructors in my mind my best thing
you know develop a watch default
constructor and sometimes it is less at
what OSAP it is always a little bit
amusement a Java doc but attributes are
starting then attributes over method
starting methods ending have asked why
of writing that is a method I see it say
yeah because Java Docs okay this is
nothing with Java dog but you can write
so in microservices java dog doesn't
make any sense no one with your Java doc
the only thing with matters is a nice
description of the API right because the
Java doc only matters for the team not
for the other teams they will never see
your code they will even you know they
shouldn't know that you are using Java
actually in perfect world everyone
agreed no one agrees with me in project
and everyone agrees some conferences
which is something strange so uh Java
doc so we had that and what's important
is and an attendee actually send me a
link how to how to forgot this too let's
see what the internet is working how to
Java doc and Adam bean if you search for
this and I mean how to Java doc it was
not I hope this is this post from the
attendee yes this is a this is what is
in the name
how is in the code and why in the
comment and this is brilliant so but if
you write microservices with Java EE
everything is obvious
so Javadoc in my project is forbidden
unless we have something to say with
edit value' to an average developer and
i would say an average developer
perfectly is aware of that what get and
setter actually is doing even JavaScript
develop hasn't notice and constructor to
string is also not a problem to get okay
so Javadoc completely forbidden if you
think about this how much time we
already saved i mean to generate the
java the Javadoc alone you you spend you
several thousands or millions probably
the whole room in your lifetime just to
wait until the Javadoc generates you
know useless stuff everyone agreed
strange but it's good so i'm Javadoc
exceptions so i'm this is where we start
to code exception hierarchy so I was in
our Microsoft Project and and I had to
review the the concept and there was one
chapter about exceptions so and and they
had lots of notice as abstract exception
and there are technical exception a
business exception an exception
hierarchy which made absolute sense and
it's perfect but not in micro services
in micro services exceptions do not make
any sense what they did is they describe
the exceptions first the exception were
thrown in the business logic but there
are no layers does one class the other
class called the exception try and catch
and transform the exception to HTTP
status code so they I think they spent
two weeks just playing those exceptions
who doesn't make that do not make any
sense because and caller of the service
will never see the exceptions
I agreed so um I'll go out let's see
whether it works a good code fool do
something well you can do with the
exceptions
let's implement that if it if it opens
what I hope last JavaOne was a terrible
so it didn't work nothing works in my
machine and after JavaOne everything
worked perfectly
is there something going on here right
probably you have some spy spy spy thing
is going with my laptop so now yeah food
nice resources resources / pink and
enjoy Java 8 here there's no Java 8 but
so what actually happened I was a lazy
and now the new archetype generates this
class which exposes one string hello
Java 8 and now imagine we have a
business exception and this business
exception new Java class is called new
pink today at it extends from run time
exception because yeah and then what I
would like to do is do that string
message super message and this is what
you would get in project sometimes it is
a new new ping today would be actually
an usual exception that would extend
from exception at runtime exception but
I'm too lazy to throw it and so to catch
it sorry so and so what I would like to
do is just throw new runtime it's no new
pink today exception new Oh ping today
and this would be too early early
so if I we try that yeah so I see
unhandled exception boundary and you
pink too early and this is the stack
trace from hell and what do you could do
is like if I do this I see the same and
if I do this I see five hundred and this
is what you mentioned you see a lot but
this doesn't make any sense for any non
Java developer and actually you see the
internals of the service implementation
now what I propose to do is this is okay
but what it can do
you could inherit from web application
exception and say it is not that bad and
I would like to let's say to roll bake
it automatically and then what you can
do here introduce the mapping response
status and let's say we get the status
would be of course 42 I think like like
this and now had a additional info and
this would be the message and then say
build done so if I retry this again of
course probably given strange exception
invalid response code so we have to use
something more 400 so it's bad request
this is good let's see whether I would
see something here okay now no stack
trace anymore
very everything is clean bed requests
and additional info too early so now you
have a nice description what went wrong
you can attach as many data metadata as
you like and the mapping is done and
self described in exceptions with this
this is fairly old there's nothing new
it is a thing was introducing Java
fibers now Java 6 and along with it that
alone I was able to delete thousand of
classes you won't believe how many
frameworks was developed to have the
same first exception the hierarchy then
exception mapper with lots of reflection
and tracing you know all these tech
traces and then I was a girl and I you
are throwing on catching or building
something
cool cool trick and so any questions
are you happy who asked the question
with very happy right you're laughing
what is your under why not as I mean and
and the cool story is the mapping is
described in one one place and what it
could do you can introduce an even I a
common in them with all the mappings if
you like abstractions yeah
I mean this this Tetris you can still
have it so if I will remove the
application exception you get the stack
trace and you can have still a filter
which or or interceptor we just dumps
everything somewhere okay agreed but
logging hopefully I have logging
somewhere abstractions so abstractions I
am abstraction to show something so I
found code called staff finder and as
you see come a beam j2e
and the cool story is I brought it
exactly 15 years ago it was a best
practice for
j2ee patterns and therefore I can show
it because usually I just know make fun
of other developers and is always good
to make fun for me first Java architect
you see back then 15 years ago at a Java
architect page now I'm just a developer
which is better because as an architect
as an architect I brought lots of
interfaces and factories so I have of
course you know this is the entity and I
had delegate factory and delegate
interface and but back then we have no
time to explain
it makes made sense you see 2002 to have
something like this why it made sense
because the j2 we won three or one two
back then had to throw lots of
exceptions remote exceptions find the
exceptions so we have to encapsulate
that and this is this was the client god
what was the clients trots back then so
now we have MVC very similar to struts
what I'm again right now I would never
do this that everything throws such
exception after 15 years I would forbid
that and it's realizable it's only
because it was stateful but if you look
at that
it would look like an OD D and and CDI
interface or CDI class so there would be
no difference and this was used in web
by strats so there were actions strats
actions and there was for instance a
declination action and this declination
action used the the interface here and
this interface Wars was created by the
factory so if you look at this now with
Java 7 you can inject
just g-class and remove all the bloat
there's what I meant factories wouldn't
make any sense also if you think about
us the factory which I've wrote was
fairly extensible because classful name
it was instantiated by reflection so I
could actually actually replace all the
implementations if you think about this
no way that there would be a use case to
replace them so 15 years ago I assume
now something will happen I will get new
requirements I can very flexibly replace
replaced implementations and this was
completely wrong so knowing that if I
will refactor this I will remove all the
abstractions because after 15 years
there is no single use case where I
could say ok this that they make sense
and back then the ideas were terrible
now we have great ideas regardless what
we are choosing are great so eclipse
even Eclipse if you have downloaded all
the plugins then it is a very productive
IntelliJ NetBeans perfect ok so what it
means is abstractions can be implemented
afterwards so what we do in project is
we've write concrete classes first
several times and if you learn about
your business and you find something you
know common then write the abstract
class and interface but never start with
after class so I don't know about you
but I'm actually I'm not capable to find
right abstraction right away so if I've
ready to know a super class and then
inherit from that after view iterations
completely wrong so I don't that that's
the hard way so I see it as my code is
published somewhere even have found it
today morning I want to show you
something so what it means is all the
their word hours we try to encapsulate
the entity beans so the the star is an
entity beam which is you see at 1 2 3 4
5 6 7 classes which are replaced by one
JPA entity right now so um and and there
were dowels which encapsulate that the
problem is you know the whole
abstraction was completely wrong because
with the advent of JPA it works complete
different so
regardless how many interfaces i've
wrote they're pointless because the new
api is semantically completely different
that it was before ok so what i wanted
to say is in micro-service war
inside the micro-service abstractions do
not make any sense unless they are
business abstractions so in one project
there are some computations calculations
it makes absolute sense to have the
abstraction but is a business of section
so it makes absolute sense to the
business department so this is why we
coded it that way but is not like you
know abstract logger doesn't make any
sense everyone agreed is their architect
in the room yeah still a great very good
so uh you know everything gets boring so
a few years ago I would be you know
there will be a violent feedback you
know for such for such statement and
right now everyone agrees with me which
is good serialization serialization so
what happens in project is so they
implement for instance and we have the
food box this will be an entity and this
would be an entity which I would like to
skip so JP entity often and what you can
do you can say XML root element and XML
access so type so I did it a large field
and then say we have a private field and
this is favor probably we are in US
should be test this right and we need
this and we are ready to go so what it
means is if I import that so what it
means is this is actually a very common
question so I could return the P at the
box here the box without the exception
and say return new box and yesterday the
food service was overloaded so everyone
got a salad at least I got it so so we
have this and so this is this is white
flow
what's over to us as as designed so I
have to say minus H except
application Jason and then do this so
look like this so if I do this I get
favored salad so seems to work but if
this is an entity I get the question
okay is it a good idea to expose that
because every change in the class will
be exposed to the outside world
so in micro service what you could do
you could say xml element and this is
like sorry this is like not the favored
rather than the decorator let's say
right so and then would be decorate the
Senate but the problem is you end up
having a lots of elements so this is not
a problem the problem in my project was
that the you I expected complete
different structure so it was not very
efficient you know and the problem is
always what happens if you have to
differentiate whether some clients
cannot see an attribute at a difference
to null for instance it's really hard
with then you need nillable customer
rotations so what we did instead is in
projects like okay this is not allowed
so what the project are doing of course
they have data transfer objects and
mapping and they met back and forth and
in 90 percent of all times both
hierarchies are identical so I saw of
lots project and code reviews if you
look at them so how to know how to
estimate whether they do make sense or
not look at the mappers if they are
identical if the DTO is always the same
as the entity remove this if they are
different it makes sense in my project
what I saw there is almost no difference
so but what you can do here with Java 7
and if Java 8 is getting even better
with Jason be Jason object what we do we
you can map here I can say to Jason and
return Jason create object builder
ad and say
our favor flavor voltage yeah
flavor this favor you see even can even
fix now the build so and you can have a
constructor you can have a constructor
even now not a different constructor is
an object input and you can do this
favor equals input get string with
default value or not yeah flavor so and
what happens here I have to say then
this is a JSON object and then to Jason
and if there is a relation to other
objects the other option objects
implement to Jason as well so you can
you can use and now the stream API and
is very easy to make so the code is
almost identical to details is the same
problem so you have to invoke get and
set you get decoupling because I can fix
that right now I said there's no more
flavor rather than name as you can see
the external representation remains the
same and with that we are able to delete
several thousand lines of code in one
project 50,000 lines of code in one
project I showed us actually the micro
service they built comprised 80% of
boilerplates
we had no relation to the business yes
oh no reason
I mean I have a lots of trouble with
that already if I would make the fields
public I would be properly in all my
project would be canceled so you should
be gradual or no but I personally would
there would be no problem with public in
my projects if you if you if you know
what we are doing go is public but I
think the funny story I contributed to a
few years ago of years yeah to eclipse
link some extensions and it did private
fields and the engineer say this is a
way to slow no getters and setters
everything has to be protected I guess
and they change that okay so any other
questions questions no questions so you
got idea right
so and now I think yeah you see the
problem is object
imple and the browser requests it takes
HTML and browser cannot deliver but this
flavor salad and this is the flavor if
you go here my flavor is my flavor no I
have to build this okay
testing so in microsoft's world at least
in Germany there is obsession with code
coverage is very similar to to Javadoc
so code coverage 80% or more and what
happens of course there are lots of get
a set as everyone can test getters and
setters because the easiest way to get
nice coverage in one project even
implemented a reflection tool which
invoke all getters and setters which was
even better but if you think about it
doesn't make any sense so the only thing
which make sense is to have a system
tests which is never used because the
system tests usually are outside the
statistics and looks like in Germany
people are very you know about your
statistics so code quality or the to
quality doesn't matters that if you have
write statistics everything is fine so
system test what it means is you write a
module which is playing Java class and
use jax-rs client which invokes the
other testing so why it's so important
and you save actually time with that so
if you just create a project and and say
this is the java application and this is
food st this is my common naming
convention and the food st needs then
dependency structure as depth so the
dependencies and then I would need a
unit test new J unit test and say this
was this would be food and boundary and
food service or box service service IT
for integration test and then take a
minute and implement that in it this
would be before and then client client
builder
always the same new client then I have
de client exactly this client and this
is what's so and I need that and then I
can say this client target and I get a
target back and why it is so important
to do this because there are two
projects we have one project to complete
different projects which are also
versions differently and I call this T
UT which is funny German because toot
means do something it's like it does
something or not so toot and why I call
it to to target on the test like system
on the test target on the test so and
then a method let's say fetch test and
this would be request get JSON object
class and I expect the class here this
would be the box and of course everyone
tries to get row of asserts because they
could break the build so to this and it
does not work why because probably media
type Jason first I need immediate I'm
Jason test better
so it's green and the output is here
flavor salad so um why why you save time
with this first if you start with that I
run it over and over again and I and I'm
able to test you know my my my my micro
service from outside the unit test
really do not matter in this context the
cool story is then this is also the
client for my next micro service so we
use this and you can copy and paste the
code into a CD iron in GB and you have
the client so we will have to develop
this anyway so you need the code here
and if you look at this this is version
100 snapshot this is version of an old
snapshot but over time both are going to
version together 1 1 1 1 1 2 1 2 right
so what you can do on Jenkins is we can
say give me all known system tests from
the past and apply them to the latest
micro service and what we can test with
that is backward compatibility which was
not it's not absolutely not possible
unittest
agreed so no time about testing but i
think you got the idea
cool how much time do we have someone is
I know how how late it is but 10 minutes
5 minutes cashing developers laugh
caching so I get owned as the question I
using infinite spend or hazel test and
my answer is usually nothing first and
with micro services what we did in in in
in jax-rs
what we get built in this cache control
so there is a gash control directive and
you can set the cache controls from HTTP
cache control so it's completely built
in and then what we did we didn't catch
anything in my in inside the micro
service but you can start a reverse
proxy like varnish or squid and this
varnish or squid caches perfectly this
is a small sea demon has nothing to do
with Java and discussion why it caches
perfectly because our service service is
not even hit ok and the cool story is
this varnish has VC
like varnish template language or
whatever so it's like a templating
language so you can even have parameters
where caching makes sense or not and
what can also do you can pre-populate
the cache because they have an API so
weight was the caching we're building
micro-services not the latest idea now
is concurrent hash me by the way lots of
task forces I was involved in when we
deactivated the cache everything worked
smoothly and with cash lots of problems
and it's really hard to implement your
own cache so it looks easy at first but
it end up you know with hell so don't
cache focus on business logic so runtime
configuration it's less important why
before we had a large application
service with lots of Wars or ears share
deployment this not make any sense
anymore you see tomorrow I will show it
the numbers what what you can save if
you have shared deployment this is
laughable so if you like attend the
lightweight vs. heavyweight I will
measure the whole session so what it
means is what makes sense is one
application server who is one word what
it means is if you even assign eight gig
ram to a micro service it's still not
that much so the chances are very low
that you will have you know to do two to
tune the garbage collector but if you
have one shared application server let's
say with 32 gigabyte of ram you will
have to tune the application the yeah
the garbage collector more often and so
that is actually a less trouble with
optimizations and application
configuration what you will do is
completely simple so we have a few
minutes left so that you can implement
this or configurations also very
interesting topic research topic for
developers is the next question how I
configure my applications or my answer
is always first nothing and then if I
have to I do this and this is like
configuration exposure and in Java EE
what you can do you can say I would like
to configure and what it usually means
forgot to mention that micro services
are living in Dhaka so they have to be
somehow cloud native and this also
simplifies a lots of things because it
looks like this produces
and then return system and now it's
important and not get property get enth
and then injection point ejection point
and what the injection point is as the
name says where it's getting injected so
I can ask the injection point who are
you what's your name
this is the name of the field which is
unique so I can say here name name and
get get and and now get or default get
or default get on default the key is
going to be name and this is like
fallback could be system property so
this is actually what you also do if you
do this get property fallback for
testing if you if you're not running in
Dhaka so you can have this and the
absolute form fallback is not configured
so this is configured so our
configuration framework is done so
therefore I never start with that
because always possible so what I can do
I can go to pink resource right now and
say here at inject string default name
and use your default name and now I'm
even running in Dhaka and we start with
those - E or even you know pass a
property file or if I have with in an
open shift its soft problem but this is
how to configure the applications if I
will start this year what it says is not
deployed run yeah it should work I mean
and enjoy java ee okay I cannot explain
that
yeah it's cached you alright but why
okay it's not configured that way but
this is the full configuration which you
get you can pass to docker and there's
nothing else to do for you except it
really likes Java EE now my my laptop
and caching runtime application
configuration and monitoring so I got
the nice requests from clients this year
they built because we have several
magazines in Germany about software
development and monitoring is very hot
so one client had about 50 dashboards
but they had no idea what do they use
cause was use case was successful or not
so can you help us make sense from the
dashboards because a lots of data I
still don't know whether something is
ordered or not so what we did as always
this is the same story ex logging we
deleted all the dashboards and what we
monitored is just the use cases so what
they never monitored they never
monitored weather is something you know
happened or not the use cases were not
monitored what was monitored the easy
stuff they bought more and more tools so
we get CPU temperature on whatever nice
to have everything right that we can you
can monitor climate changes in your
application but not weather actually the
use case is successful or not so we
delete all the tools and then we
implemented small monitoring you know
and and this was better than than than
than before so monitoring is a big deal
a big deal in micro services in my eyes
what you wish we have to do is the
essential use cases provide counter for
these you know how much how how many use
cases were successful how many use cases
were not successful
what is the slowest method average time
and which method through the most
exceptions and the last thing is logging
if you think about this in the r22 in
year 2017 what's it still doing in Dhaka
they are writing lock first in Dhaka
one second later they parse the docs and
hope they find the information again and
send the data somewhere else the
question is why you're not sending the
data right away was never answered
so we overdid it we always did it this
way it's like yeah but in Greenfield
project just what we do define one
interface with the minimal required
information one method like audit with I
don't know three parameters which are
required and right structure not locks
structure event and send them to a
central system elasticsearch whatever
without writing the files I don't know
why they spend a lot of time to writing
the file first and then parsing them
which is a really nice task but not over
and over again agreed so if you like
there are some workshops unfortunately
Munich thank you and if you have any
questions in xtv or ask now if we have
some time if not I would stick around
outside so you can ask me and see you
tomorrow even this heavy weight and and
light weight what I will do is measure
whether Java II is actually appropriate
for high scalable micro services and
your task is to find something which is
too bloated too big too slow too
complicated see you tomorrow thank you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>