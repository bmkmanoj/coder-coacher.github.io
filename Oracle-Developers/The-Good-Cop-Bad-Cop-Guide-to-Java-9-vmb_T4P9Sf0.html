<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>The Good Cop Bad Cop Guide to Java 9 | Coder Coacher - Coaching Coders</title><meta content="The Good Cop Bad Cop Guide to Java 9 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Developers/">Oracle Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>The Good Cop Bad Cop Guide to Java 9</b></h2><h5 class="post__date">2017-12-15</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/vmb_T4P9Sf0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hi everyone and thank you for joining us
for the good-cop bad-cop guide to Java 9
it's our pleasure to be giving this
session on the Oracle code simulcast
online and my I'm Simon maple I'm a
director of developer relations as your
intern at my colleague and no more
lecture life I'm a normal developer
advocate answer interaural and yeah
we're we're looking forward to giving
this session we're gonna take its lots
of the major features on job night I'm
gonna look at it from a from a good
point of view in a cynical cop bad cop
point of view and you're essentially
going to decide whether those features
are yeah there's enough good things in
those features rather than bad things
which is to maybe pull you back slightly
on those features and it's gonna be up
to you so but there's enough in there
beneficial to you to warrant migrating
up to Java not yeah and just remember
this has released that has been cooking
for a long time lots of smart people put
their time and effort into this so
essentially there are not bad features
or there may be just features some
comfort for you personally or for the
project you're working on but believe us
we're doing this in good faith mm-hmm
cool let's get started so a little bit
about us first of all yeah so this is me
you can see my Twitter credentials up
there I'm a developer advocate of was
written around so I maintain outlook
called treble apps if you're gonna check
it out we try to publish opinionated
content technical mostly about Java or
JVM African languages in founder of
Tartu GDG and I'm a co-leader of virtual
drug also myself I also very heavily
into the community so I found in the
virtual drug I'm co-leader of the London
jug job champion job one Rockstar and
also yeah yeah other other awards as
well you can follow me at SJ maple on
twitter so let's get started in the
content then we're obviously gonna be
dealing with good cop bad cop
we're going to take this in terms so
some features I'll be good cop and
you'll be bad cop
other features will both be bad cop no
no it's like you'll be good cop and I'll
be bad cop so
let's start with modularity in this case
I'm being good cop and you're gonna be a
bad cop so let's dog straight in so as
you can see Java 9 has now been split up
into modules and yeah job is pretty big
it's not getting any smaller and one of
the key parts of Java which many other
jvm languages don't don't do so much is
we have a large reliance on backwards
compatibility so it's important for the
Java when they release a new version to
retain backwards compatibility but
earlier version duplications so if
something works on Java 8 we would like
it to work on top and 9 out of the box
so as a result Java as it's grown has
needed to keep these these modules of
code in here such as CORBA in order to
support those applications which require
that but now the the JDK has been
modularized so if you're not needing
clawber you don't have to use it because
you just simply don't include the core
ba module in your in your JV in your you
know jdk that you are that you create so
you can compose applications using the
same module system as well the jigsaw
module system also be that the platform
module system has has used and exploited
modules at the platform level as well as
the application level you'll see a
couple of interesting things here first
of all at the bottom you have the job a
table base which is the implicit module
that everything will need every
application will need to use it has
things like the job at online package
their collections package etc there are
also other things like about the compact
profiles which you're more than familiar
with already and if you wanted to use
specific modules you can you can add
them into your environment let me just
interrupt the erasure please no he don't
need to use core you can come with using
Cobra before as well that's true yes but
as many of our listeners are aware of
who are already experts perhaps that
avoiding core box you can still avoid
Cobra but you don't actually even need
to include a little bit in your base in
it you know in your java image now as if
your application doesn't need it
it won't even
wrap it up so we can we can rather than
implicitly ignore call but we can
explicitly ignore call but which which
feels like a better place to be a
happier place to be now what we're
talking about modules um we naturally
architect our designs in a modular way
let's look at this whiteboard image well
what are we doing we're drawing boxes
we're putting names in those boxes and
we're drawing arrows this is a very
modular already every module has a name
and it has dependencies on other other
modules and we see interactions between
our modules here it's very common to do
that the only problem is when we
actually go to code we don't actually
draw these boxes yeah sometimes we we
have names but the biggest problem is we
don't have enforcement but we do have
some level with public private protected
access modifiers this is totally
different to what we need from a from a
modularity point of view what we're
really looking for is a compilation and
a runtime enforcement of our actual
module boundaries now if we want to use
modules we need to use something called
a module path now a module path is
different to a class bottom by no means
is job 9 removing the class path if you
wanted to stick with a class path you
can still use Java 9 and the class path
but now if you wanted to modularize your
application you would add those modules
onto something which is called a module
path and there are benefits and problems
with each but of course you know that
nothing's ever gonna be perfect with a
class path yes you're gonna get a class
you're gonna get jar hell and all these
kind of things with a module path you
need to actually describe how your
modules are gonna interact so you need
to create artifacts like a module in
photo java which is the metadata that
you require to name a module and also to
choose your dependencies so to create
the dependency graph which for example
may not include the Korbel module and
that is how you would exclude it from
your environment now this is certainly
unsafe plug-ins for the poor the full
resolution of this picture but it's such
a good picture there is a obviously
unsafe API which people have used and I
say people I'm really looking at things
like frameworks and tools people have
used for a long time now and
kind of calm the Sun or Sun dots are
kind of packages now these were these
are really hidden packages hidden hidden
api's which for many years now Sun and
Oracle have advised against using
because their internal however the
ecosystem have used those kind of unsafe
unsafe api's and for good reason as well
you know there are things in that API
that you can't do that is you know
things like memory accessing and things
languages which is unavailable elsewhere
up until recently obviously with with
the motiroti platform modularity
encapsulating away packages that that
are considered private the the JDK team
have needed to expose an equivalent way
of of performing some of the unsafe API
features as a result yeah
and this unsafe API is lava no not gonna
loan could be available to people so
should we run a quick demo and show you
exactly what modules - how much you'll
work it out let's not go to that let's
get to that okay so here we have a Java
Mon services dem I'm gonna show you I'm
gonna talk straight to services I'll
show you a module info Java but I'm
really gonna show you how services work
so we've got three modules here this is
using IntelliJ so we're using IntelliJ
Java 9 support and we have a module here
org
zero turnaround API this has a service
my service interface with a single
method on this get message returning a
string now in this this module needs a
module in phone or Java this call this
defines this module wasn't named module
and we export a package from this this
means that this package that walked up
the zero turnaround or API package is
exposed to the rest of the to the rest
of the environment as a result anything
else any other packages that aren't
exported here are hidden now are
encapsulated away no other module can
gain access to
those packages into the code within
those packages we also have a consumer
and we have a provider so the consumer
currently requires the organizer a
turnaround our API and the the provider
at yes so the provider also requires
water zero turn around API so what we're
going to now do is we're have a look at
the consumer code in the consumer class
what we have here is a main method which
spins around a loop call in call
services when a good go round and call
services we're going to have a system
out to a counter which starts at zero
and looking for services that's all
going to system at all as we go through
the leap we're going to increment that
counter and add a sleep that's pretty
much it from now there's obviously a bit
of commented code there but that's gonna
that's gonna be a surprise for later so
I'm gonna kick this off using that using
charitable so we can make changes to our
code on the fly and as that's executing
there we can see the counter kicking off
we can see looking for services but
there's obviously no services available
right now but what we're gonna do is
first of all I'm gonna go back into my
consumer module in photo Java and here
I'm going to say we're going to use a
service that is called org dot zero turn
around our API my service and what this
what this is so you use is and what this
is now going to do is it's gonna it's
gonna say this module is now going to
make a use of this service and it's
going to look for this service in the in
the uncommon this in the service layer
which has been available in Java for
many years now many releases in fact I'm
going to perform a load on the service
loader of the interface my class I'm not
gonna get an iterable so there can be
many instances of this implementations
of this service available in the service
loader and we get iterable so we can we
can go through that and we can say ok in
this in this iterable let's grab one of
these services out
grab all of the services out and execute
the get message on that but
interestingly if I was to if I was to
rebuild this so Jared was there we go
Jared was just updating ourselves mmm
nothing nothing really nothing really
changed there so we we're not finding
any services while we're not finding any
service as well nothing's actually
providing a staff service because here
while we do have something which
implements my service in our module info
dot Java we're not actually stating and
we're going to provide this into the
into the service look into the service
registry so what we're gonna need to say
here is we're going to provide the org
dot zero turnaround or AP I thought my
service and we're going to provide that
with the org dot zero to around
dot provider dot provider
imple so now we're saying we're going to
provide this service with my own
implementation which exists in my module
so I'm going to save that and build that
into our live runtime and now we see as
Geritol reloads that we see a service
has been found because we are we are
printing out the results the return of
the get message and if I go into that
provider in pool you can see we're
providing this let me just make that a
little bit more obvious so I come in
here and I bring this up let's say from
and then here we can see this dog get
class get name let's hit save rebuild
that and relayed that with J rebel and
second there we go gerbils reload that
we can see exactly which class this this
service is coming from so this this
allows you to to do that how do we
registered we haven't actually
registered this class well the the in
the module info when we add this
provides the the Java Runtime is
actually registering this service in the
service loader so that when our consumer
looks what it looks for this service it
can find this implementation straight
from that okay so that's
that's everything then I essentially
stop this that's everything I have in
terms of the demo so I think we can all
agree that Java 9 isn't poison the job
my modules is awesome doing it it's
fantastic it works to eat that coma or
that is that okay
well me maybe let me agree with you
let's reiterate with you so Java 9
modules the main idea was what was the
main idea of the modules that we will
have a smaller footprint of the JDK
right that's a plus
we with smaller jdk and more motorized
and more isolated internals the open
take a team could have maybe a faster
release cadence because it don't need to
bring all the modules the whole size of
the JK wisdom every time so they can
work on a smaller code base and that
means that features can get to you
sooner and you were Java Runtime
containers will become smaller as well
if you just use part of the GDK and you
will get stronger
absolution so it sounds like this is a
great thing but if you look at this more
deeply the problem that modules try to
solve is that they the reserve typically
problems with dependencies with managing
dependencies especially transitive
dependencies there are no encapsulation
enforcement at runtime at all
typically your project would use a build
tool something like maybe no cradle and
they will specify dependencies but that
is the compile time only a trying time
all bets off and then the larger binary
means order servers for vulnerabilities
you will have to support cleaner API but
those are the problems mostly for the 0
conjugating and the JDK
because in a typical project do you
think the size of the runtime binary
plays such a big role do you think that
is one of the top three problems that
projects resolve dependencies
yeah I'll give you you'll have to have a
certain amount of discipline not to run
yourself into
in the ground with importing all kinds
of dependencies I will give you guava
because there will always be a couple of
jars of guava in any Java project and
but I don't believe this is such a great
big problem we had solutions to do
module before the application level
starting with the early job they perhaps
can do more for the application code
than the OpenGL class or module system
so currently the module system can I do
cycles between commercials there is no
versioning there is the problem that's
gonna probably bite quite a bit of
projects when they try to migrate is
that the split packages or not permitted
the cost for developers is not that
large the cost is one file per jar file
if you can online options to learn about
your food utilities to figure out but
the biggest will be probably the
segregation of the ecosystem the
libraries that we can use now going
forward they need to specify either some
attributes in the pom files or manifests
to say to their preferred module names
that's gonna take one release if they
want to go fully modular and actually
encapsulate some internals which is a
good thing for library because typically
library just wants to expose instruments
out of api's that's great for them but
they need to do modular eyes themselves
then it's gonna be harder to use them
there will be more releases of old
libraries some of them are not even
maintained anymore who knows will it
take a couple of months for the
ecosystem to catch up will it take six
months maybe maybe a couple of years the
release had been preparing itself for
what seven years now and and it seems
that it's actually such a great problem
and the cost is quite high so all you
always have to think about do you
actually have the problem and do you
want to pay
with some separation in the echo system
for the solution of explicitly ignoring
core by so I think I would recommend you
if you're going to migrate to Germany
there are a couple of things a couple of
ways how we migrate typically to a new
Java version you can a greatly
development environment first and see
what it works there or not or you can
upgrade your production or this is very
easy solution typically you just make
your operations people struggle but in
this case I would say that both of those
are not the easiest ways to go because
it's dangerous to upgrade production out
of that there are things that might not
work in development and especially if
you want to use the join 9 features of
modular code so I would say that upgrade
your staging environments and just run
use Gemini as the net Genie here without
looking at the module system just
running as Priestly you can try running
in module pass there would be worrying
and quarantine join and release the
illegal access is permitted by default
so you're gonna see a bunch of warnings
you can maybe deny the illegal access
and see how your application doesn't
work on Java night and then fix ones
that you can fix with little effort and
then wait quite a bit of time perhaps
until April 2018 to see what's gonna
happen with the jo9 what will then
happen with java 10 which is allegedly
is going to be released in March of 2018
and well the reason of course is gonna
be released in March 2018 is because of
modules Jukes was enabled us to increase
that release cadence so we can you know
get fixes sooner we can get more
functionality in releases sooner we
might even have things like the you know
the VAR keyword now being used or
reserved word being used in in March
2018 that as a result of modules which
is a great thing absolutely do you think
the korba module prevented the open take
a team to include the VAR keyword into
the into
language syntax because there were no
modules we can we can put a lot on
kolbar we can blame a lot on call by
don't that we can blame that on call but
the ability to break the jdk down into
modules and have small fixes on little
modules rather than having to rely on
lis no larger changes slowing down the
release I think it's an important thing
it is an important thing but just coming
back to this picture which I absolutely
love when you look at this as as a
developer try to figure out who of those
two people are a developer and who is an
architect who is gonna draw boxes on the
whiteboard and then say oh we're gonna
make those modules communicate and who's
gonna figure out how to get rid of two
bauhaus at the runtime and and who is
gonna figure out how to fix the
hibernate where do you need to put that
opens module with your with your data
modules and who is gonna suffer so it's
hard to be a developer sometimes
sometimes this painful bit about
sometimes it requires a lot of tension
sometimes things just work out of the
box yeah like for the past 20 years and
sometimes there is just this surprise
coming from the back and you don't know
what to do okay so this point we would
normally in a physical conference we
would say right let's have a show of
hands and see who loves modules who
would agree modules is a great great
thing and and who isn't too bothered
with it we can talk about maybe some of
the boats that we've had previously what
do we talk about when we gave this
session at JavaOne and he seemed to
remember people were actually quite keen
on modules people were super excited
about modules yeah so it's a good thing
that we blow up because I think modules
was the reason that the release was
obviously delayed and a lot of work has
gone into modules so I think it's good
that people developers particularly are
interested in key on making use of
modules so that's that's a good thing
yeah and just just just to repeat this
this this was a long release and one of
the biggest problems with this release
and why it was postponed even in June
was that the ecosystem wasn't ready so
we had problems we didn't know how how
the build system will move forward what
exactly some corner cases and it was
rough and the
answered to that and why is it was it so
rough is because it's a hard T mojo
arise and upgrade the whole literally
almost the whole ecosystem to support
the new way and the old way and it is
just the blessing that we didn't have to
deal with the non backwards compatible
releases in the past yeah now of course
the bets are off
so looking forward we're gonna see that
maybe every six months and I do agree
with what you said actually a couple of
slides ago in that you know the time to
upgrade and use jarba nine is when the
ecosystem has migrated and is ready to
support Java nine
I think that's gonna also be critical
with the Kate with the new release
cadence a jar of Java
you know when every six months a new JDK
comes out a new version of JDK comes out
they're going to be usable when the rest
of the ecosystem supports that because
you know very few people are just using
a JDK bare right now right you use
spring you use - and you use other
things so that's going to be usable when
the ecosystem jumps on and so the
success of the new Java cadence Java
release cadence for me it's gonna be
determined by the speed at which the
ecosystem adopts those releases time
will tell I guess we can't really
predict that but let's move on to
garbage collection so like you're going
to be the the glop holiness yeah garbage
collection is one of my favorite topics
and let's talk about that so if you if
he garbage collections obviously about
the memory and when he talked memory in
the JDK and in Java you talked mostly
about the heap memory and if you
previously seen any pictures or have any
representation of how the memory
structured and what the heap looks like
you probably saw a picture or imagined a
picture like that there was a big chunk
of memory and it is split into different
generations that has done T to to be
able to collect the garbage unused
objects from those smaller regions in
the generation rather than the whole
heap and it will be
it's a object through their lifetime
will move from the young generation to
the old generation because the processor
says that if an object lived long enough
to survive a couple
GC cycles probably is going to live even
longer so now coming forward to is in
JAMA nine the default garbage collection
would be G 1 GC it is yeah what it does
it solves a problem with the generation
collector is the main problem with
generational collector let's come back
to this slide for a second is that when
you heap grows too large when it he
please several hundreds of gigabytes
large for your generation sizes also
increasing so typically a GC will still
need to stop the world sometimes and do
the collection perhaps in the young
generation or in the alteration but if
that region is too large in itself then
that GC pause will be wrong so he would
like to do and low latency applications
and you would like to have a low latency
GC you need to do something different so
G 1 GC will be a default garbage
collection in John I come for it so you
have to be prepared what it does it
solves that problem with a very large
generations by splitting the heap not
into a few blocks our generation but in
multiple regions and then assigning
those regions to to certain groups of
certain regions together could hold even
objects or then dog should control it
the benefit of this is that you can
collect objects inside a smaller region
at a time and you can pick how many
regions do you want to clean at the
scene at every given moment time and
thus you can influence how long is the
GC forms if you want to have a passed up
to you like a syrup several milliseconds
then you can collect by say a couple of
reduced at a time you're gonna have more
frequent collections but you're gonna
have smaller posts so it's a it's a
concurrent collector so it runs mostly
concurrently with the application life
cycle
so there could be some throughput
disadvantages the maximum throughput but
in
it's a it should be much more
lightweight in terms of latency so if
you think about doing the garbage
collection now and if you've seen the
typical common line for running Java
somewhere in production that will
include tons of GC options to
specifically fine tune what it does so
which do you want GC it's an adaptive
garbage collection so in the sense
everything that you have to do to tune
that in you need to specify the max keep
the percent of how much of that space
you are allowed to waste because there
is always speed vs. space trade-off and
you just specify a threshold or how much
do you want your longest GC pause to be
and after that do you want to see it
starts running it figures out what the
regions what is the profile of your
application according to memory
allocation and then it's gonna tweak
itself to conform to that pause and it's
pretty amazing it's it's very solid a
major tech it was introduced long long
time ago it was tested and supported and
now it's gonna be officially the default
GC in JDK 9 so now our applications both
on servers and IDs another Java
applications that run on desktop will
become maybe a little bit snacker and in
a sense if you want to think about the
garbage collection what it allows you to
do it will allow you to have a faster
memory management and you don't need to
change your code so much to conform to
write like a garbage freestyle or
anything so just write normal Java code
and it will become a little bit faster
in Sniper and this is an amazing feat
well it's not necessarily gonna become a
little bit fast and snappy I think it
will it will become far from stop here
for many people for other people
depending on depending on their
application it is gonna be slower it's
not it's you know everything everything
is always good in certain environments
and
I don't think G 1 G C is gonna be a
silver bullet whereby everyone everyone
benefits from it it's definitely
something that you will need to test
with your application specifically and
not me a good thing is that they had so
much time before this online released
was actually released this test the
applications within G's the default
garbage collection and send the
performance results back to the day or
communicating yeah and I'm confident
everyone did that right yeah sure I'm
sure
well at least until the module branch
was integrated back into the master they
could have used that with their previous
code no well I would jump back to a
previous slide and actually edit it for
you and highlight the important parts
here G 1 G C was introduced in an update
of JDK 6 ok so it's been it's been in
the JDK since version 6 its tested and
supported so it's really usable from JDK
7 that's a long time ago JDK 7 the
difference is not just to its many many
years I was here a second for a second
people watching do you remember the year
when JDK Sun was released what was the
number
what was it 12 was it 12 no seven was
nine maybe 2009 2012 one of those two I
don't remember that was long ago that's
like some question maybe you love me I
think your lemon yeah maybe not maybe
some homework for the reader code this
is this is embarrassing but let's go
further okay well great interruption
thank you for that let's go for
embarrassing sway so now the important
part is it's officially default GC in
JDK nine well squats are out that
doesn't matter doesn't matter what the
default is it's available since JDK 7
unsupported since JDK 7 so it's been
available for everyone since JDK 7 so if
we were trying to look at how we can use
this we can use this into any case 7 we
can use it in JDK 8 you just need to use
this this flag this javion property
that's a result what's new in JDK 9 is
the simple default if you actually use a
JVM applied like this today in your
environment to specifically say which GC
you want to use the behaviors not even
gonna change in Jenny canine because
you're gonna be specifically choosing
the garbage collector
so what's actually changed in Java night
well not much just just a default the
functionality is still there if you want
to use it so so yeah how interested are
people with g1g see I think in the past
I think people are actually kind of
interested in g1 GC right I think in
general I think we will see the the
typical Claus time that I stopped the
world pause reduce which I think does
excite people will have a place there
particularly Operations teams people who
are you know keen keen for those those
performance spikes to go away when what
did you see occurs yeah I think I've
seen more people in projects that
struggle was the latency requirements
rather than the throughput I believe
there are both in the world but it just
if he talking about a typical web
application which is what quite a lot of
Java projects are you would have the
third-party database and then latency is
important but throughput maybe not
because you can just scale horizontally
mm-hmm
not always but I think this is this is a
complete change mm-hmm yeah I think we
should get excited for that historically
in our sessions most people are on board
with with G 1 GC so that's good go
garbage okay hey maybe what's JSON now J
shell is a Java rattle I had a great
line I can't actually remember he said
it before but it stands for Java shell
rather than JavaScript hell
I've seen that done I don't remember now
the correct attribution I love to I love
to give attribution but I all I can say
is it wasn't magic but but yeah we all
know J as hell is a thing anyway so but
this is Java shell and it's a rapid
rapid stands for read eval print loop as
I'm sure we all know and it allows you
to execute individual commands
individual driver commands at console
and get immediate feedback immediate
responses
based on how your your code executed and
you can continue to code then based on a
lot of time based on the output of your
previous or of your previous results so
easiest thing to do is actually just
show you a demo straight away so that's
G um here I actually already have Java 9
as my default JVM here so I can just
type J shell and this is gonna drop us
into a Java console here now and now in
J shell we can type Java if we want so
we can just type 1 plus 1 and we get the
correct answer which is 2 there but the
interesting thing there is I didn't need
a certain character and that certain
character is something which many people
have have disliked about Java the fact
that we have to use a semicolon now it's
not that we it's not that we can't put a
semicolon it's that we don't need to put
a semicolon in there because typically
with with J shell we're gonna be we're
gonna be sending individual commands
that are kind of and a semicolon is
something which separates commands
distinguishes one line from the next but
of course if we're just sending single
commands and we actually don't need that
I consider things like a thread sleep
let's say for a second for a second and
that's gonna work both without a
semicolon and a try-catch that's in mean
that is good isn't it there's not nice
just like groovy it starts a little bit
like Colin or greevey did let's say you
a couple of other things here we're
seeing we're actually assigning the
output of those responses or these
commands to a dollar one and a dollar -
I can so type slashes mostly philosophy
would do that and it will give me all my
current variables and I can interact
with those variables so I can say I
don't know let's say dollar one times
three and we get 6 what I can also do is
I can say I don't know int sum equals
dollar one plus dollar to class
dollar four which is going to be two
plus two plus six so that's I hope
you're going to be 10 it is 10 and we
can say their sum is 10 if I type of /v
we then get all our variables as well as
this this asunder now if I type I a /
this is a command that I type after this
is going to be directed towards the J
shell environment or as if I don't type
the slash and I just type in a Java
command that's and that's naturally
going to be sent to the JDK so I can
talk to the J shell where I can talk to
the JDK directly if I type tap I get a
tab completion and I can see my options
there so I can see if I want to import
things I can I can drop certain
variables or methods or classes I can
see which methods have been created I
can edit some code I can I can reset my
state I can save my state I can open my
state and I can view history so let's
have a look at a few of these I can
check I can check imports which is
everything that's imported you can
obviously change this based on when you
start J shop you can choose to you know
import a full Java SE imports you can
choose to I think you can do as well
maybe no probably not I think it's just
SC but you can you can choose how you
want to import
I can also state if I type /t I have no
types but if I say I don't know if I say
Class A I create the Class A if I say
Class B which extends a we have Class B
if I type / T now you can see my classes
if I edit a we get this awesome 1970s
style edit box which allows me to you
know update my class so I could perhaps
have a method in here look would be
nothing
oops and you know I can oops
I can have canceled out I can hit accept
replaces class-a and I can exit
you can obviously edit that if you
wanted to advise well we just need to
you just need to set how jasa works see
I can I can oops I can see my types what
else what else can I do I can I can save
so I can save that commands that's
actually just saved that to a file on my
file system which is literally just a
list of everything that I've typed I can
also reset now that's entirely reset the
state so far to look at my variables if
I look at my types after the curve you
know anything else my methods which
actually am created yeah like I can't
see anything there but if I if I'd now
do a slash open of commands that's now
gonna actually rerun everything that I
had before and now if I type /t for
types
/ b for VAR you're gonna see everything
that has already happened and because
that has that has reloaded it i can also
in fact let's do a list first a list is
going to show me everything that i have
that i have sent to the jdk itself so
everything apart from my discussion my
communication with the the j console
command auto J shell console i can also
type a slash history and slash history
will actually show me everything
everything that I've typed both to the
JDK and to J console take a shot maybe
she didn't call J console that would
make my life easier certainly J shell I
can also do multi-line so if I type if I
do something like public I don't know
public avoid say hello and in here I
might say assist and I don't know here I
actually do need a semi car because
we're doing multi-line obviously so we
don't want to confuse anything we now
have a method created there called say
hello which I can which I can execute
obviously that's gonna say hello can you
do multi-line strings well yeah of
course
good emote lunch things like I just need
to hit it oops
no need to edit what did I just do I was
called I didn't know that did that um
okay let's edit say hello
here's multi-stream you watch I'm sure
that's what allows the in its foundation
was Java language and programs yeah but
the two finger tips of your fingers yeah
so I'm sure that's what you meant when
you said multi string is that thing what
you can't do is something like hello and
then on the next line world it's fine
you can it be nothing normal job either
no exactly hit exactly that's a that's a
limitation of the wonderful world
building the you know if any shortcuts
injection injection well you can see do
tab completion as well so you can do
system system dot over then hit tab and
I'm very very quickly will other didn't
do that time better faster day print he
would normally it would normally tell me
my options but clearly clearly in this
case because this is a demo which we
were recording the waters against me
there we go look at that yeah I think I
think it could benefit from which word
pause yeah maybe maybe if it was using
do you want you see that would that
would create a short pause for me do you
think J shell doesn't you g want you see
by default it should do you should yeah
I maybe I should cut that in the Edit no
way I won't let's let let's leave that
in under it's a show of embarrassing us
by the way we just figured out Java
someone who is going to something no
there we go it doesn't look yeah and and
I think this is everything that you have
for the demo I want to show one thing so
J shell is not just just not not just a
console application it's almost like a
full-blown IDE you have
seen those excellent notepad windows
where you can edit the code and you also
seen the tab completion there are also a
couple of shortcuts shortcuts for
example trip tab v will extract the
class name and I'll allow you to create
a variable easily so if I do new random
random and currently if I press shift
tab release those V then the machine
will think a little bit and here I
believe this screen capturing software
is to blame oh it could be
I just it interferes with all the
resources we can see the Activity
Monitor charts uh hi hi hi in the top
things and something is alive rotor yeah
shift at V we get the class name over
there and we can name the variable as we
want including any typos next we can use
a name instead of so that that's paid
without delay it probably only helps if
you're using sprint classes maybe more
if you type with two fingers like like I
do so uh J so this is what you seen you
can do small bits of Java programming
you can maybe test a red X or something
you can see if a certain class has a
method or something
it certainly is more alluring to new
people to come into Java because now
other languages and other communities
cannot say that though Java so it
doesn't even have a shell take that
other communities Joe has a shell now to
be honest if you were a professional or
semi-professional on or amateurish Java
developer if you're anyone literally
anyone literally anyone who does
anything with John you probably have a
couple of programs on your machine
called IDE
it could be to name the most common
three would be probably IntelliJ IDEA or
Eclipse ID or maybe
Melvin's called its continent insidey
and those who are integrated
environments and they allow you to do
fascinating things so you can work with
multiple files they'll look a little bit
better than the terminal window they
allow you to keep the history as I love
you multiple undos and reduce you can
edit the text the way you want perhaps
there is even it like if I keep biting
plug-in or something so you can move
seven lines at a time or so you have
tools currently that help you write
proper Java code we know how to use
those tools to create common complex and
large programs we have the ability to
evaluate the single line expressions and
multi-line expressions before and we
have all the tools to create complex
Java programs right do we need Jay shell
as the tool in our tool belt or is it
just a toy a gimmick to you not the
worse than other languages I love toys
and gimmicks I have I have an iPhone I
have an Apple watch I love toys and
gimmicks this is this is great we can't
we can't deny ourselves gimmicks and
toys I'm not saying that we we have to
deny ourselves gimmicks in toys or just
say that we're gonna never use Jay Chou
because it's a it's a toy I'm just
saying like is it your viable to that we
should get excited about I think so I
like I do like the fast feedback I do
like I do like the conversational nature
with the JDK I've always wanted to talk
to the JDK and this allows me to this
allows me to do that in shorter sound
bites rather than you know having to
having to provide it with a lots of code
test and change rerun this is this is
for me much nicer to become familiar
with an API I've become familiar with a
new library that all the help that I can
give you with the new library I think
it's showing the classes I was a
completing the the names of methods well
I'm also completely sure if you have
time clicking creaking clicking in the
method name and seeing what the method
declaration is ID is an impressive tool
don't underestimate how much help it
gives you the date I will tell Joshua
how you
but I think it's nice it's nice to have
that all time to ever mean you know
other languages use shells people if
you're a scholar user a groovy user you
know you used to show people use shells
in those languages so I think it will be
useful for just doctor we'll just have
to see a great use for JSON would be if
you could connect a JSON processed into
the existing Java Runtime and then
evaluate expressions in the context of
of that Java process right to figure out
what the context should be here on there
and do you think that's the case I don't
think that's currently possible mmm no
reduce it so so let's play so what do
you guys think is is Jai show something
that you would use daily or not is it
have something you might use once then
yeah rely on your IDE perhaps this is
gonna be an interesting one I think J
shall largely people a lot of people do
like but sometimes sometimes people
maybe don't find it useful I think
but at people who very more used to
other languages like like like you
mentioned scholar and gravy it may be
more used to it a shell could probably
get more value out of it because they're
more used to you know using that Yan
will certainly get more Python users so
ya know what I'm saying
so ABI updates this is this is one not
we both like yeah I'm denied ly good
thing more methods that we can use and
abuse more clear definitions of those
and since this is the API updates let's
do it properly let's gonna live code
short snippets of code and see how they
react and to do that I'm gonna obviously
use J shell
obviously because it's a useful tool
answer in this kind of an idea because
it's a toy that allows us to evaluate
single hand expressions
faster not faster but maybe let's see
how it goes mm-hmm only time will be
charged a shell is useful not so there
are multiple API improvements in Java
night and we are not gonna talk about
all of that
right now because of the time limits but
I'm gonna try to show you the favorite
things that has come to Java in this
release and if you want to know more
just go read the text of the Japs or
there are I'm sure a multiple blog posts
over tutorials or how to use or other
sessions described in exactly the new
API enjoy night but let's start so the
most favorite feature and probably one
of the most the longest awaited features
are the collection literals indeed our
code is riddled with new ArrayList and
then on the next slides we add elements
to that were creating map is always pain
sometimes you just need like a very
simple map but it's really not that easy
to it's easy but it's quite variable to
create that in Java fear no more with
John 9 we get we don't get the
collection literals because you can't
always get what you want but we get the
new the second best thing and that are
the factory methods for collections now
John so without further ado what you can
do you can type list over set or mac and
used method off and provide a number of
parameters and you will get that a
collection back so you can get a list
and that would be a ordered set of
balanced implemented the actual oh so
instance of list that is true the
implementation that is returned by the
list method is jolly to list so is it
John engine excellent don't mock me less
if we get if we get if we try to get the
class of the of the list and this is
this is something very important notice
here oh you will not get the array list
or the linked list but you're gonna have
a very specific implementation of an
immutable
collection of the list and why is it
important first it's immutable so you
cannot change how it clips to the
outside world this list second is that
if you experiment with this list of
methods and you just try it a couple of
parameters so say one and then you even
ask the implementation on the single
element list you see that the class is
name is different the reason for that is
that least one is heavily optimized for
better performance so this is not only a
syntactic sugar so to speak to simplify
the creation of short collections or
collections in place but it's also an
optimized versions of that so if you
just use that API when you just need a
list of one or two elements you're gonna
be in the better shape at the same time
you can do the set you can create a set
and that's gonna return you and you need
to both set easy to spot the interesting
bit here is that the order of set is the
watering of the elements in this set is
deterministic and determined by the at
the runtime at the run of the process at
the startup so within this process we're
gonna have the same element of order of
elements as you can see but if we do
restart J shell and say setup 1 2 3
again the word Feldman's could be
different this is done this specifically
to avoid people abusing the word of set
elements elements in the set you can
also do a map and then you're gonna
provide both keys and values so let's
say we have 1 and we have 2 that would
be the first pair and then we have 3 &amp;amp; 4
&amp;amp; not going to be the second pair of the
key and value and this is a very easy
way there are also additional methods to
crates or maps but we're gonna stop here
this is a fairly cool feature it's a
small one but it's gonna make life so
many developers a little bit happier the
next thing that I'm going to talk about
is the improvements to options I think
options are quite
so now one thing that has it didn't
bother me but now we have a stream
method on an option so we can we can
convert an exist an optional into a
stream and this is a really cool thing
and I'm gonna tell you why in a second
so option is container of 0-1 elements
and a stream is a container of 0 or many
elements one including so naturally
could have could be interoperation
but before there wasn't convenient way
to learn optional interest stream what
big deal but if you think about in terms
of transferring with values inside those
containers if you map the function to
you enter the value inside an option
currently so and say this is going to be
like something weird you see that it is
executed eagerly and immediately and you
get the optional of the result
immediately back but you know that the
option of the map function of a stream
is lazy right it's not a terminal
operation so that means that that
function will not be applied to
knowledge inside the stream immediately
so if we don't want to perform that
operation if you notice it's perhaps
expensive we can always do optional off
save the same one and we can stream it
and then we're gonna map the result with
the same function and the result of that
will be that we get the reference
pipeline path
so the the function is not invoked yet
and we gonna invent that lay sleep when
we need the result and this is very cool
and another thing is is that we finally
get the word method on the option option
will say empty I click tab because I'm
so accustomed to using an IDE where the
tab completion is immediate
did it do okay excellent
so we do empty which will create an
empty option for us and then we provide
the or methods into which we're gonna
give a supplier of an optional optional
off and say Oracle not sure why is
Oracle but we get that back and this is
fairly a cool thing because now we don't
need to check for optionals for dollars
from be present not imagine the world or
close action just like I should have
gone with Cora you should have gone with
clover say you can try that again or bah
boom done this is the highlight of this
presentation talking about checking for
presence of things in the optional one
cool thing is that now previously we had
the function if present which would
apply a runnable if the value to the
runnable to the value if the value in
the option was present so if you think
about optional as a replacement to the
default block that would be the if block
right currently now we have an optional
okay don't click tab don't know tab if
present or else which sounds kind of a
little bit threatening but in in fact
it's just simply let's skip the if
branch of this if/else block and then
the else branch will be a runnable and i
think what we're gonna do what we gonna
do i think we can do system and just use
the method reference to print out the
value inside
oh no we similar scurvy no no but that's
fine it is the side effect to execute on
the value i don't think it needs to
return stuff let's see let's try it yeah
see it doesn't read run long it doesn't
execute now if we try the same thing
with with a proper value I think it
should break down with the null pointer
exception
thank you
excellent I've never seen so excited
ever no exception oh this dose of my
favorite there now this is there a
couple of stream improvements so there
are a couple of new methods on the
streams one of them is drop one take
while which will allow you to if you
drop elements in a certain condition is
met or take elements and seen until a
certain condition is met which is
excellent way to work on the infinite
streams for example
so take one especially you have a stream
of elements and until you are satisfied
you can take new elements but then
suddenly when you're done you can say
like please no more and it will work
with it but now we have also the
iterating method which was kind of very
cumbersome to do previously with this
stream within the stream framework what
you have you have the initial value and
then you have the function I think you
need I think you need the twenty feet
first so let's say X less than ten and
then we're gonna have the step function
right and we're going to increment that
and then for that we're gonna do for
each right so for all those elements
through that in that iteration we're
gonna do the system out for column for
dots and you can see that works so now
you can have an easy way to generate
infinite streams or streams until a
certain condition is met there are some
date and time improvements for example
now you can convert dates into a stream
between certain dates which is fairly
interesting and you can have a different
truncation methods on the date time well
that's pretty much everything we have we
have to show you so I thank you very
much for attending if you have any
feedback please do you reach out to us
and and thank you everyone for your time
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>