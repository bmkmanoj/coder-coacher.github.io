<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>What Are They Talking About These Days?  Analyzing Topics with Graphs | Coder Coacher - Coaching Coders</title><meta content="What Are They Talking About These Days?  Analyzing Topics with Graphs - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Developers/">Oracle Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>What Are They Talking About These Days?  Analyzing Topics with Graphs</b></h2><h5 class="post__date">2017-08-07</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Mv1k3fX6tnw" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">Zurich and what I'm going to talk about
today is kind of trying to show you how
you can use some of the work we've been
doing in the PGX project to importance
for a specific application so this is
meant to be more of a demo of how you
could use this technology than an actual
data science experiment but if you know
the demo is kind of a data science
experiment and the topic is how we can
try to analyze some data from tech
exchange so these forums where you can
ask questions and and get replies how we
can analyze topics and how they evolve
over time using graph property graph
technology and yeah some of the stuff
I'll be talking about is already in
Oracle products some of it is not yet
may never be there but yeah so hopefully
it's interesting to you so in a nutshell
what are we talking about so as I said
we have these forms like so the whole
tech exchange ecosystem they make their
data available that's quite nice and
what we did with was just get a dump of
the politics form which seemed an
interesting thing to look at and analyze
two things right so first thing is what
are the topics people talk about so the
and as I will say did I think about
these forums is that post that people
write a tag so you can use this
structure to kind of a great topics and
see and kind of extract some meaning and
then there's thing which we will try to
do is understand what the expert so once
we have the topics we can just look at
who is the users who got the most
excessive dancers in in that topic so
very briefly so this is not a as you can
see it's not it's libelous demo but
they're just very few slides to give an
introduction then we'll switch to demo
mode and then so first I will just see
two things about the data set and then
one slide on what topic modeling is in
case you don't you're not familiar with
it and then the graph the model of the
graph we're going to use in the demo the
tools we use and then and then we go to
the actual demo so the data set as I
said is dumped from from thick-set
exchange the data contains post tags
users through your information about the
user profile and so on and specifically
for the demo we're going to look at the
the
politics forum which is one of the
smallest ones so it was suitable to just
make it live demo today
and there goes as I said is doing some
topic modeling extract some topic from
the context content and see how they
evolve over time and find find the users
that seem to know more about the
specific topic so what is topic modeling
really have maybe so how many of you are
familiar with this kind of thing with
these machine learning things not really
some of them some of you not many so
I'll just quickly go through this
so topic modeling is is defined so this
is the Wikipedia definition of it it's
like looking for a statistical model
from from from a corpus of of documents
to see what are the the topics that
occur in each of the documents right and
the concept of topic is just an abstract
thing that tells you something about
what's going on in the document so
classically what so the classical
approach for example LD is one of the
classic approaches that people use is
just looking at the collection of
documents as just a set of documents and
each document is just represented by the
by the word that are in the document so
it's just a bag of words kind of
approach and then what we do is we have
a model and we need to specify how many
topics we are expecting and then the
this model will we train it on our data
and that will do two things one thing
first it will tell us what the topics
are in terms of a set of words right so
this will be based on on statistical
analysis of the data and it will also
tell us what how much of each topic is
in the document and this is like so that
the assumption here is that each each
document is a mixture of topic so you
get this percentage thing that tells you
that there's 30 percent of this topic
and 60 percent of the other topic so the
difference with the approach we will be
using is that we don't get a mixture we
just get kind of hard topics so topics
will just just be like a set of tags
that represent the topic so very quick
now so so as I said so our our dataset
has a bit more structure than just a set
of documents right so we have we it
comes it comes from the forums we know
that somebody wrote that post
we know the tags so we already have some
structure
and the goal here is try to explode the
structure to do some topic analysis so
the original data comes in XML format
the the important part that we look at
are are these files we look at the post
dot XML file which has a bunch of rows
each row has clearly on the title and
body of the post and then we we have
information about who wrote the post and
then we have information about what is
the accepted answer so so both can be
questions on our answers so for each of
the of the questions we know what is the
right answer and then we have a bunch of
tags that the users can can can define
to kind of specify what what the post is
about then we have the tax file which is
just you know just a list of tags what
the different things and then the users
which is again some information about
the users and then clearly here we can
see that you know clearly each post is
connected to to a bunch of tags and then
it will be connected to users so this is
the tracker the structure we're trying
to exploit and so we what we do is and
this is the pre-processing step the demo
will not focus on this we did this
beforehand you can do this with with you
know with spark or whatever with a
script however you like so we create
this graph that looks like this and
clearly you can make it more complex to
add more information we just keep it
simple for the demo so where you have
posts and then each for each post if
it's if it's a question we know which is
the exited answer so we have these uh
you can see my pointer right so okay so
I will not move it around so you have we
know which which which is the excessive
answer so there is this edge that goes
from post to another post and then it
post has a bunch of outgoing edges
towards tags so we know which are the
the tags that the user chose for this
course and then users have edges that go
to the posts so we know who wrote a post
and then so we just produce a graph
informative of an edge list which we can
load into PGX and that will I will
briefly talked about PGX later and the
other thing we do we also add their
reverse edges in this structure and
that's useful for for the for the
community detection algorithm we will
use so now what is our approach really
using this graph what we do is look for
communities in the graph so in graph
processing
a community is defined as as kind of a
cluster in the graph so a set of nodes
that are kind of internet interconnected
which is between each other but are not
very connected to the rest of the graph
so that that's that so the idea here is
that if we have a bunch of posts that
have similar tags and they're kind of
interconnected between each other that
looks like a topic so the idea here is
to either use this as a static modeling
and oh by the way if there are questions
just feel free to interrupt intent so
any questions so far
all right so what we use is this is this
map equation which is a mathematical
formulation that allows you to identify
communities in graphs and purpose if
achill II we use an implementation of
the relaxed map which is a parallel
algorithm to solve these equations so
what we do again is kind of look for
these clusters in our graph where there
are a bunch of tags all interconnected
by topics that talk about them and that
we say that that that's the topic
so the difference compared to the
classic approach is that we find kind of
clear-cut topics we don't have the
probabilistic mixture but each tag is
assigned to one and only one topic as
well as each post is assigned to one and
only one topic this may be good maybe
bad we found that the results are kind
of interesting and the picture here
shows you an actual example of that we
will be looking at later it's not all of
it so it's missing some of the post
because it just doesn't fit in one slide
and you know we can say that there
there's a bunch of interconnections
between the tags so UK Britain brexit
and so on and then we the algorithm
identifies that as a topic which is the
green tags you can see in the slide
finally very quickly we're using PGX
which is the which is the parallel graph
analytics package from Oracle labs it's
included in a bunch of Oracle products
you can get it from BTS G you can get it
from station graph it's coming to Oracle
advanced analytics so we're trying to
infect as much of those over the Oracle
product line as we can with this product
and we'll be doing graph analysis right
so there are basically two two
strategies that you can use to analyze
the graph the first one is doing some
computation on the
ruff in identifying some property of the
graph and this is what we do - for
example - in five communities the
classic example is also for example
PageRank right you want to understand
which are the most important nodes so
just iterate over the graphs and compute
some metric the other one in fact it's
pattern matching red for example you
would like to identify kind of a family
or you know a part of the graph that
looks in something in specific way and
and then and then you know clearly this
is kind of more of a query a kind of
approach PGX supports both and we will
be using both in the demo and and we
also have a nice environment where we
can combine them so finally I'm almost
done with the slides I'll switch to -
demo and yes just just the cover this is
the first time I play this demo so
Murphy's Law is always there hopefully
nothing breaks and it's demo is based on
these on data studio which is a
front-end a web application that looks
kind of like it does that bring
notebooks if you're familiar with that
and allows me to to just you know write
some code and then execute it and then
show the results immediately
this astute is not available yet but
we're planning on there is and we will
also read the demo at some point so if
you if you want to if you're interested
in update just contact me or follow or
just pull the otm page that there's a
link in the slide so the demo I said
focuses on the politics posts and we'll
use this a graph model that I showed
before all right any questions so far
perfect this one yes
yeah there is there is not a really
specific motivation for not using that
one it's just that we have this idea of
trying to explore the structure of the
graph to see how what was we could get
right and in the so so far right at the
moment I don't really have a comparison
between the two we have some data but
this you know we're still working on it
so the idea here is just let's explore
what we can do with this approach any
other questions all right so let's see
if the demo works I will just close this
and go here alright so this I'm actually
running this thing on on a server on one
of our servers so hopefully the internet
connection is fine and what you can see
is the data studio environment it looks
like a notebook right so you have
paragraphs so each of the of the
rectangles is a paragraph and you can
write some code and execute it so the
simplest and there's a bunch of
interpreters right so this King car
investor understands PGX understands p
gql there's a spark interpreter the
markdown interpreter which is what I
have here so what I did really here is
write some markdown code right we have a
title and blah blah blah and then you
press the arrow here you just execute it
and you get the result below right so I
think it covered like what's what's here
already so I'll just not go through hit
through it again we can just start from
this little paragraph here where I just
have some definitions of functions I'll
use through the notebook and basically
everything I write in a paragraph for a
given interpreter will be available in
other paragraphs again in the notebook
right so what is so here I'm using the
PGX interpreter and I'm defining some
functions and this language here is good
is groovy so the thing is interpreted in
the groovy shell so it's a Java like
thing with you know you can skip types
and stuff which is kind of nice
so the if I if I run this then I will be
able to access these functions in the
rest of the notebook which which we will
do all right so
let's start from loading the graph as I
as I said before what we did is generate
this graph with with users posts and
tags which is already configured in a
data source from the data studio and
then we use a PGX interpreter specifying
this data source to exchange politics
UPT for users posts and tags and we call
this session API from PGX to load the
graph into an in-memory object which we
will be able to refer to as this graph
UPT in the rest of the demo the next
line filters the graphs so what we can
do once we have a graph is just grab
part of it row right so this so I'm let
me zoom in with the final filter that
will just grab the posts and the tags
from the graph so the original graph the
the graph view PT one also has users
this guy only has posting tags and this
is the first graph we will be working
with to find the communities and which
will we will be we will interpret as
topics so now let me just run this and
then the output just tells us that the
the last thing we have this graph PT is
a graph it has a name and then it's got
8,000 nodes or vertices and about 16,000
edges between them all right and by the
way so the the notebook is pre-populated
with the results that they ran before
but it will be rerunning everything live
in the demo so now let's take a look at
what we can do with BG q l BG QL is a
query language that we define that we're
still working on we see we're trying to
standardize it as the name suggests it's
kind of like sequel for graph so it's a
graph query language right and it allows
you to express something like this right
for example let's look at these graphs
we specify that we want to look at this
graph graph PT graph which we JA we just
loaded and then what do we want to do we
want to select something that is a post
and something that we call hash tag and
something that's the tag and we want to
get its name right so we're so the
workload is what the first
from from sequel here we can specify
that something this posting is actually
a vertex and these braces here right
tell us that we're looking at that
vertex and then also tag is the vertex
right and then quite intuitively you can
you can I guess guess that the arrow
here with the square braces here defines
an edge so what we're looking at is a
post that is connected to a tag through
an hash tag edge right and then we only
take ten results just to just to make it
easier draw eyes so we can run this and
down here data studio gives you this
visualization that basically represents
the graph and the reason why I have a
little piece of paper here and tags this
is not magic you can configure it here
so you can basically set up filters and
see what what not label you want to
visualize and what icon to use and so on
right so this is pretty pretty
configured so let's look at what's in
this graph for example we have a post
here that asked why's donut on charm so
popular and the tag for it are Donald
Trump United States election and so on
and this is actually connected to
something else because through the
United States tag right so this gives
you an idea of you know why why we may
want to to use this structure to to find
to find topics all right so let's try a
couple more simple queries on the on the
basic graph so one thing we can do again
is use B gql to select all the toad tags
and see how many posts are associated
with each of them
so we do select tag duck named count
star where tag is is a tag right so this
column tag here is a specification for a
label so both vertices and edges can
have labels and we can query for them so
we can see I want I want I want
something I call tag and that has to be
a tag has to be labeled as a tag since
same thing for something here we don't
call this anything because we don't want
to really look at it but we just look
for something that support and then we
group by tag name and we count how many
we have so again
we can run it and we see that most of
the most of the designing the tag that
has the most post associated to it is
the United States apparently people talk
a lot about that and then we have
election UK and so on so now the idea
here is that these are just tags and
already tell you something about the
content but what we're going to do next
is group them together to find topics
that are that include multiple tags so
very last thing about these legs is the
basic graph we haven't really done much
with it yet is just another particular
query where we select an answer and the
question and the edge the connector so
we can we specify that we want an answer
that is just connected to another post
with a given ID so I just have one here
and and the edge has an accepted answer
of label so if we run this we just find
the answer for this post we were looking
for right so r00 agents really I think
well I don't know we should we should
look at the answer we will just not do
it for now and again this is the default
visualization you get these dots
represent vertices and you get edges
with the arrow for the direction they
point the point at and you can configure
it to to show icons and so on so now
let's go into the actual gist of the
talk let's let's find these communities
right so to find the communities we will
be running this relax map algorithm on
the graph and we will be adding
properties to the graph right so let's
look at these paragraphs here on the
left side so first thing we do is we
grab we get this program that implements
the relax map algorithm so PGX already
has a bunch of graph algorithms built in
like peach like PageRank for example
whether there's about 30 or 35 of them
we don't have a relaxed map yet but what
we can do is just implement if you with
green mark which is a domain-specific
language to express graph algorithms and
then we can use it here in the data
studio by just compiling it and getting
an object we can call so this is what we
do here this is the this file as a green
mark or for the for the for alex map and
i just can just I can just call sessions
compiler compile program
relax map and get a handle on it that
will allow me to run it later then what
we do is we need actually to modify our
graph a little bit and add some
properties in order to to be able to run
these algorithms so what we do is get we
get a copy a clone of the original graph
and we call it graph PT extended right
graph EDX and this is the graph we're
going to work with now first thing we do
is we have some properties we are the
page rank property that is type double
we are the community the property that
has that long and the width property
which is again a double and the
community ID is what the relic map
algorithm will fill in with with some
actual IDs that represent our topics in
the end and that we just here we just
initialize the weights to one which is
required for the algorithm finally we
run the relax map algorithm down here a
pre like a step we need to do before is
to first run PageRank because the the
the algorithm needs the ranks of the
order of the vertices as an input to
alright so first thing we do is we run
PageRank on the graph and this is built
in as I said in P Jack so we can just
call analysts of PageRank it's already
implemented we just pass it the graph
through me just just rerun it every time
and peer prop is the property where we
want to store the PageRank values which
we just added before and then and then
we just call a relax map right passing
again the graph the property of the
ranks the ways some parameters right so
these are the parameters of the
algorithm and then how many iterations
which is again a parameter and then
finally the property the property that
represents the the community that this
is the output of the algorithm and then
we just compute some statistics right so
one thing you can do in the PGX
interpreter is run particular queries
again right so so I can define a string
that is really query right so just
select how many tags there are in each
community and then I can run it with
query P gql in the API and get the
results and do something on it right so
now yeah I'll just just run it when I go
through this so what we do here is we
get how many tags there are for
community
see and how many topics there are and so
on and this allows me to print the
string at the end which some stats right
so what what this says is that the
algorithm found 232 communities which
really interpreters topic topics and
then in average there is 1.5 tags for
communities and 1.8 posts per community
and by the way since relax map
probabilistic every time we run this I
get a slightly different result so this
is why you will see things changing a
little bit compared to the previous
results I had so any other questions so
far yes
right okay yes
so the idea so I think that I think
let's see if I can so I think the answer
to this is that what we try to do is
start to exploit the the underlying
structure of the of the of the data
right so the data is is naturally
interconnected right so we just try to
represent that as a graph and then and
then query the graph without having to
map it to some vector space right so
probably what you saw if I understand
you correctly I mean probably what you
what you say it could be done we could
transform this into a clustering problem
in some vector space but what you can do
if you use these tools just you don't
have to transform it you just directly
look at the data and how it is
interconnected and try to extract some
information from it and again I'm not
claiming that this is the best way to do
it it's just one thing that people
haven't really tried before all right
any other questions cool yeah yeah I
just google it there's a reference on
the slides but I think there's like real
like math dot o-r-g or something so it's
a yeah and also the map equation there's
map equation dot org so yeah just just
google it it's easy to find all right so
let's look at the graph we just
generated now so we can run again a
query with PT QL where we try to select
all the tags we try to select basically
the communities are the community IDs so
that we had at this property that's
called community ID and we try to see
how many how many tags are in each
community and if you look down here at
the stats we see that there's quite a
few right tags per community is just 1.5
1.6 that seems to be like not very
interesting but the fact is that most of
the communities are only one tag so
think about your data right so we have
post an apparently many of them only
have one tag and there's really not much
activity there so in that case we will
just get one isolated community right so
the interesting thing is to look at
communities that have multiple tags in
them
because there may be something
interesting there so what we do here is
just just order them by by by account
descending and then we can see that this
time we got you know this community 1715
is the one that has the most the most
taxes associated to it so now let's try
to look let's take a look at what what
what community is what community
specific tag is into right and since
we're in London I will use a brexit as
an example and we have the politics
forum seems to be a good one so let's
like look let's just look at what breaks
it what community breaks it is is in and
we get that this visit the community
idea right that the community D doesn't
tell you much by itself but what we can
do is then look at what other tags are
in the same community so if I put 2010
oops
1026 here so what we do here is is yet
another query or by the way so the the
syntax here the dollar curly braces
thing allows me to have this this input
box it's kind it's just you know you are
sugar to substitute by my ID into the
query right so what we're doing here is
just select all the tags that have these
ads that have this idea I specify is
their community ID right so what we get
is that the community we find it has
Ireland Greece European Union Britain
exports UK and breaks it into it which
kind of makes sense right
it's interested to see Greece as I said
this is like probabilistic so I've never
seen Greece in previous runs that kind
of an outlier maybe but it means that
you know people had posts with with a
subset of these tags that are
interconnected to each other so this is
what we call a topic alright so now
let's I mean clearly now that we have
topics we can look for answers right so
let me just copy the ID which I will
reuse all right
so now we can just select all the
answers into what was it 2002 six one
zero two six I can just select all the
answers all the excited answers in this
in this in this topic and the way I can
do this is using a path query this is
again this is another feature of P gql
where you can specify a path that
connects the connect two vertices
through some you know through some edges
and possibly other vertices and the
interesting thing is that I can I can
say this can happen multiple times right
so what they do here is I specify a path
that equal a reply to and the path goes
from a post through and accepted through
an edge that is labeled accepted answer
off to another post and then in my email
where Clause I specify that the answer
which is the post needs to be connected
through this reply to path and I have a
start here the star means zero more time
so you can expect to a question which is
which has a given which has the the one
is specifies this community ID right and
then I just say that you know that the
idea of the answer should be different
than the idea of the of the order of the
question so I don't want to get the same
thing so if we run this what we get is a
set of pairs and actually so in the date
in this dataset we only have one
accepted answer per question this is why
we only get fares if we had more like a
thread of accepted answers where you can
have a post and the one answer and then
one answer to the answer and so on that
we will get all of them here with with
the path query and then yeah so
basically we can see that these are
these are at the actual posts that are
in this community so you can see why
it's virtually considered bad for the
you and and whatever right alright so
now let's let's try to do the other
thing we were trying to do right so
let's see where the experts in a given
topic and this is actually very simple
just one thing we need to do is remember
that we did our analysis so far in the
graph that only had the post and the
tags there were no users so the thing we
need to do is
that imports the community IDs into the
graph with the users so the this piece
of code here in this paragraph does that
we just cloned they use the graph with
that includes the users and then we get
a handle on the on the on the property
the test of the community IDs right and
then we have a filter that we call back
get tagged so this is just a filter that
gets only the tags right and then we use
a lambda right four over over the graph
with users we get all the vertices that
are actually tags so we filter and for
each of them and we call each of them V
right we get the ID we we get the
corresponding vertex ID into the graph
with only post and tags that has the
communities because this is what we were
working with before right and then we
get the community ID we just get the
property community ID and then we assign
it right so this is fairly
straightforward just importing the
community IDs into the graph that
includes let's include the users so it
just tells us we process all the tags
and now what we can do is just query and
see who is the guy that knows that that
answered the largest number of questions
about our community we're looking at so
that the one would break it in UK and so
on right and apparently Phillip is the
the the expert here he has 24 accepted
answers so now I mean what what we can
do is just see how many answers the this
Phillip provided into the communities
into this community but looking at each
single tag right so again the community
we found is a set of tags maybe this guy
knows a lot about the UK but doesn't
really know about Greece for example
right which was the community and this
is this way we can see which of the tags
he replied to him and apparently he
knows the most about you know European
Union with 11 answers UK with 7 and so
on right and again here we're using
these uh this past query with you know
something that is a vertex and it's
connected to another vertex through an
accepted answer of edge and we want to
select how many there are
of what
something that we call T and T is this
tag and we specify the topic ID at the
community ID so the topic that is like
the belongs to and then we want to have
posts that are connected to this tag as
I reply in and then and these are edges
are actually the the questions right and
then other posts that are replies to
them and then we want to to select the
user you with this username that wrote
these answers right so so so again so
that the hopefully you can even you can
you can parse the particular syntax
whatever is in the in the in the braces
is a vertex and then the arrows here are
our vertices and I think it's once you
get used to it this is a fairly natural
way to express like queries on graphs so
now I mean very simply what we can do
now is see the yeah see I mean let's see
it's actually what answers what what
what questions did Phillip answer in
this topic right so we can just run this
which is a fairly similar query just get
instead of getting the count right it
just displays the title of the post
right and then here we get the the idea
of the post and the title or it so so
apparently this guy knows what article
50 is who nominates your commissioners
and so on all right any questions so far
all right hopefully you're not all
sleeping so now let's look at something
but so this is another thing we can do
right maybe this is this is you know
even more interesting what we can do now
is analyze topics over time right so
what we did so far is grab the whole
graph with all the posts and all the
users and blah blah blah and look at
this as an monolithic thing and run
community detection and then get the
topics now what we do is we split the
graph in a pox based on dates of the
post so we will we will do this with
three epochs we could do it with
different number of epochs and then for
each epoch rerun the community detection
algorithm to find communities into the
epoch right and then we add we
modify the graph we add vertices for the
topics we connect the topics to all the
tags that belong to the topic and then
we will analyze the whole graph looking
at how topics evolve through time right
so so if we have initially a topic that
has key tags t1 and t2 right the next
epoch may have a topic that has t1 and
t3 and t4 and they will be connected
through t1 because they both have the
same tag right so we can look at this
path through the air box and see how
topics evolve so the way we can do this
with the code since width we want to
show the code all the time
we are back in the apg axe interpreter
here so our groovy code with with the
bgx api we say that we want to look at
three epochs and this is just setting up
basically some some environmental we use
we want to so what do we do here oh yeah
we just get what is the first and the
last date of the posts right and then we
find how much a netbook lasts right so
just you know last date - first date
over the number of the number of epochs
you want to have so this is how much
image in the book how much an epic laugh
and then what do we do we just add some
properties again to our graph we just
get a great we grab a clone of our
graffiti graph we add some properties we
add the epoch property again community
ID whoops which will mean these are the
same as before the difference is that we
also have a pox which will tell us which
epoch a given post belongs to so that we
don't have to query about the the date
all the time and then what do we have
here is that I have just an oxidized
variable that I will use to define the
IDS of the of the things I will add so
since we are adding vertices in vertices
and edges to the to the graph and at the
moment we we only have an API that needs
a vertex ID and an agility I will just
use negative number since I know that
the original data does not have any any
IDs that are negative but we're working
on an API that does not require this and
then I just I just print basically the a
box right so I just run this and I get
that you know the posts are from
December 2012 to September 2016 and we
will have these three epochs and each of
them is about one year and a half long
now
so we have about yeah 10 15 minutes left
so I can go through this so this is a
bit of a longer paragraph and this is
what actually implements the the per
epoch community detection and adding the
vertices to the graph so the first thing
we do is grab a change set a change that
is the concept in PGX that is basically
a way to modify a graph by adding
vertices and edges so you can always
modify properties in a graph without
needing to change that if you want to
add elements to each image the change
set and then you can adjust you just say
you know as vertex I would add the edge
and so and so on and then at the end you
just say build and you get a new graph
with the new stuff you add it so this is
what we do here we get we get a change
that and then for each of the epics let
me go up for each of the epics we see
what is the start and the end of the
epoch and then we get the post and we do
again this with the filter we define a
filter that is basically saying that
whether if the vertex has label post and
the creation date is within start and
end of the epoch or we also want to get
the tags right so if you remember the
graph will work on to get it to find the
communities as posts and tags so we just
grabbed all the posts in this epoch and
all the tags and we do it here we get we
get this graph this epoch handle which
basically just runs the filter on the
graph and then we we want to basically
assign the epoch property in all the
posts to have to say that you know this
post is in this epoch so we just find
all the posts through a filter again and
then we grab all of them and we say that
for each of them we want to set the
epoch property to I ni is the iteration
variable that tells us which epoch we
are so we will have post in the book
zero one and two then this part here is
basically oh that's interesting
I have a big curse for now okay so this
part here is the same as before which
surrounding PageRank and relax map but
this time we only run it on the posts
that are in this epoch right so we were
running three times for each of the
airports and then what we have next is
basically some code to find the
community so since we're adding since
we're adding vertices for the
communities we also give them a name and
the name is just a list of topics that
are in the community so fairly simple so
these parts this loop here just defines
basically the name of the communities we
have a filter that finds all the tags
that have a community ID right which
should be all of them but yeah this
should be redundant but anyway we got
just get them and then we define to a
hash map for the topic names this hash
map we go from a topic ID to its name we
define a hash map that goes from a topic
ID to the vertex ID that we will add
socially since we're adding vertices we
want to to know you know
this topic ID maps to this vertex ID and
then for each of the tags we just get
get basically the topic ID the name and
then we try to add it to the to the hash
map if it was not there we just assign
the name as you know the name of this
tag if it was there already we append a
comma tags to the name and then we put
it back into in the hash map so that now
we have a hash map that goes from topic
IDs to names that are just a list of
tags and we have a hash map that goes
from topic ID to vertex ID so now
finally we can add the topics the the
vertices for the topics so for each of
the other topic names we just get a new
ID and then we add a vertex right so
this add vertex adds a new vertex and we
set properties for it we set the
community ID to the topic ID we set the
name to what we just defined before and
the F up to two I and then we say this
is the topic we say we add a topic label
and then finally for each tag we also
connect it to the to the topics it
points to and here is where we use the
topic ID to vertex ID map to know what
vertex we just added so if I run this I
need to go up a little
all right takes a little while to run
and this will and and yeah and at the
end I I do change the dog build which as
I said before gives me a graph with all
the stuff that I added right so this
takes a little while and yeah so we're
working on the performance here it's not
stellar so don't don't pay too much
attention of it to it but this will just
give me a graph that has all the all the
vertices that are the topics and all the
connections from that from the from the
tags to the topics right so it's it's
it's a graph again and it has it's a
town 8000 and and so on vertices and a
bit more edges than before because
that's what we added so let's now
finally look at this graph right so we
do this again with the particular query
we we query this new graph and we select
topics name and epoch and tags where
that's actually send this down where a
tag is in this topic we want to look at
and and and and also the the tag we
specify is a topic so I have both of
these because this guy specifies that I
want to look at bracket right and then I
also want to see all the other tags that
are connected to brexit right so if I
run this what we get is that so the
degree 1 are the tags and the blue ones
are the epics are actually the topics
but the the thing that's printed so the
number is the epic so we have that
initially we have this topic that has
Scotland UK ireland britain a brexit and
then in the in the first epic so the
first year and a half then here
interesting we only have brexit and
we'll look at why that happens in a
minute and then as we get closer to the
actual referendum right we have a lot
more talk again and we have all of these
tags into the community of epic two and
and again so these are actually the
topics you can see the the name right
which is the list of the tag
and I just visualize visualize the the a
book by by configuring the result
visualization tool so let's now take a
closer look at what happens right so
what we do here is we select we
basically check the name of the topics
that to give a given tag belongs to in
each epoch and see how many posts there
are in this topic right so it's kind of
looking at how strong how strong these
topic is in each of the epics so again
we do this for that for the topic that
contains brexit and we find that you
know initially there's there's a little
bit of talk about breaks it about 34
actually 34 posts there's a lot more
talking about - and there's actually
nothing in epic one so this is why we
only had breakfast we had no actual
topic with breakfast in the central epic
because basically nobody talked about it
nobody talked about brexit between what
was it like 2015 and early 2016 and
that's that's actually interesting right
so finally what we can do is look at the
actual titles of the posts and let me
grab the topic ID which was topic series
2213 alright and we just get all the
titles right of what what what posts are
in this community and then finally
another thing we can do is just starting
from you know started from a tag see how
a given topic evolved across a book so
it's kind of similar to what we did
before what we can do is instead of
looking at bread cities look at UK which
was in brexit originally and
interestingly we find that you know
initially brexit was with UK right
initially in nato in epic zero but epic
one has no bracket because as i said
there's no post with breakfast in epic
one and then again it evolved in
something more like burger with with
more tags so I think that's all I have
we have maybe a couple more minutes for
questions if there are any yes
yes yes you can do I mean so we're not
we know so we're not very strong in that
at the moment but we're actually working
on him yes you can you can just I mean
you can so what you can do now is grab a
chain set add data and then every now
and then periodically you can rebuild a
new graph with the changes right so this
is what you can do now but like
supporting better real-time data is
something we're working on yes what do
you mean by data source if I mean yeah
you can you can just grab information
from wherever right well I mean what do
you mean by data source mm-hmm yeah yes
absolutely absolutely absolutely you can
you can absolutely do that you can I
mean you can just grab your data from
from wherever with like whatever you
know environment and then just build a
graph and then integrate data yes you
can do that you can use the API to do
that yes yeah any other questions okay
so I think yeah
hopefully both so we're trying to target
a very broad audience I mean parts of
the of my job is actually I mean so I'm
both a developer kind of a researcher
and kind of a marketing guy right so I'm
also going to to customers and try to
see what are the use cases right so so
we're really trying to target a broad
audience and so we think property graph
analysis is very powerful tool and we
have a very nice thought form for it and
we're working hard so you know any if
you have any ideas just dropping an
email
I'm happy to to collaborate yeah there
is there is a version you can just try
on the OTN you can just download it as a
license agreement
don't ask me exactly what it says but
you should read it and accept it and you
can just download it and try it so and
but for not for Digital Studio right so
the environment I use is not available
yet but but you can do everything I did
by just using PGX
in a shell so yes you can try it there
is a link in the slide oh we have this
notebook kind of things that you can see
in the browser right so we have
paragraphs and then you can use
different interpreters and run them
right so we can run PG QL in a
particular interpreter we have a PGX
interpreter will support spark markdown
and so on is similar to Zeppelin but
with with some advanced features like
graphic visualization so like you can
see this stuff here it just prints your
graphs in a nice way yeah and wait this
is yeah we're still working on this yeah
supports what mm-hmm I'm not sure about
that
I should ask but if you're in assists
write me an email I can I can point it
to the person who knows but you know in
here you can support whatever
visualization you want is it fairly so
we're designing this thing to be very
easily to easy to extend to add new
interpreters or different visualizations
and so on so yeah if it's not there it
should be possible to add it yeah okay I
came here do we have a mic all right oh
yeah sure yes well I mean that that's an
application right you could implement
that with the system we don't we don't
have anything built-in to do that but
it's definitely something you can try to
do yes so yeah like fake news detection
maybe there's there's a nice way to do
it I don't know okay anything else cool
so thank you all for for listening and
if you have any question just drop me an
email</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>