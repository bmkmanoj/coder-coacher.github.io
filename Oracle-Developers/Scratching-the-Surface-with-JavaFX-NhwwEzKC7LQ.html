<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Scratching the Surface with JavaFX | Coder Coacher - Coaching Coders</title><meta content="Scratching the Surface with JavaFX - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Developers/">Oracle Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Scratching the Surface with JavaFX</b></h2><h5 class="post__date">2015-06-08</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/NhwwEzKC7LQ" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">good morning and I'm actually very
honored that you guys would show up at
eight thirty in the morning after a
night of partying I'm sure the first you
know first night at javaone and so tried
to wake you up a little bit of music and
I'll try to be a little bit animated so
that you don't fall asleep in your
chairs congratulations anybody that one
coffee for playing name Mattoon with me
it was that was fun my name is Jim
Weaver I'm going to show you some things
about multi touch with javafx and also
little primer on 3d if if you attended
the keynote you saw Jasper and Richard
and John Yoon is John you in here he
said he was going to be here he's the
genuine is the Oracle guy but he used to
work for DreamWorks and other companies
and did animation he's the gentleman
responsible for a lot of the animations
you saw in the chest animated chess
pieces so so title is called scratching
the surface with javafx because i'm
using a microsoft surface tablet and
this going to go through touch gestures
how to deal with touch gestures and
drill down a little bit into the
gestures and also touch points and
events and then we'll talk about other
considerations for multi tux like using
a pagination control which helps you do
a multi-touch or a touch application
with one control making it really easy
and then some issues as far as
accommodating fingers the fingers are
fatter than the mouse pointers and so
we've got some of that and then I'm
going to give you a brief introduction
to javafx 3d i'm going to show you this
the zen guitar thing that i created to
to demonstrate some 3d some multi-touch
and also to also I could practice my
string guitar without without having a
real-life guitar so first of all touch
gestures there are four touch gestures
there's a rotate event scroll event
type event and zoom event and those are
all subclasses of gesture event and then
i'll go ahead and talk about the swipe
gesture that's where you take your
finger and just drag it in one direction
and then you're swiping it and so
there's four directions that you can
swipe so i'll demonstrate that here this
is just a little swipe example up down
left right and the code behind that is
this so in the application i'm using a
translate transition for the animation
so when i do the swype notice that it
animates so that's the animation part is
a translate transition in which we're
creating a new one with a particular
duration in this case i'd think a little
bit less than a second and the thing
that we're translating is this rectangle
is actually it's an image and then to
catch the touch the swype event then
we're saying set on swipe right so when
i whenever i swipe right it's going to
call this event and i'm using a lambda
expression like you learned about if you
didn't know already in the keynotes
yesterday to where the event is getting
passed in and then here we're just
checking the position of the image and
we're saying if it's appropriate then
we're going to go ahead and we're going
to set the translate transition X&amp;amp;Y how
how much we're going to move in the
x-axis and the y-axis and then we're
going to play the translate transition
from start translate transition being
one that that moves something from one
XYZ coordinate to another XYZ coordinate
by the way if you have any questions
during this presentation please ask them
some will be you know some will be ones
that I'll want to deal with in the
presentation maybe it'll i'll save it
let's talk about it later or maybe you
know let's take it outside you know i
mean not that way but you know what i
mean and stick it outside
you know maybe it's because maybe I
wouldn't really have time to address
that or maybe it's a little bit like one
off topic so so yes that's a very good
question so is any of this stuff not
doable with pre JDK 8 so the touch
events the multi-touch stuff is in is in
jdk 7 but the 3d stuff i'll show you is
not available before jdk 8 and the
lambda expressions are not available
before jdk a very good question thank
you so then here is this you know the
the swipe left and the swipe right so
it's a swipe down then there's also a
swipe right that I'm not showing so now
the scroll gesture a scroll gesture is
when the user Scrolls a mouse wheel but
also when the user takes a finger and
kind of Scrolls it around so this is a
scroll gesture and with a scroll gesture
the events are continuous we're being
reported when you're scrolling and the
events can either be pixel-based so as
I'm scrolling we're going with pixels
but also they could be text-based
because oftentimes you're scrolling text
and so you want to be able to to control
that scroll based upon the the metrics
of the text and then there's also
something called inertia where I'm not
using it in this example but if I would
flick it here there would be more events
created based upon the inertia and then
it would slow down so you get kind of a
physics kind of thing but those events
are reported and you can check to see if
you're interested in the inertia or not
so and i'll show you the code here so
when you're checking for scroll events
first you want to know has the scroll
started and that's this one right here
so when the scroll is started when
someone touches it and begins scrolling
then will be called here and we're
going to go ahead and record the current
position in x and y of the thing that's
being scrolled and then this is called
continuously as the scroll is occurring
so here we're not interested in inertia
but if we were that's when we know that
we could be called even after the users
lifted their finger and then here we're
setting the layout X and setting the
layout y which positions the this image
on the screen we're taking the current
position and adding it to the total
Delta the total amount that it's been
scrolled since the scroll started in
both the x-axis and y-axis any questions
on that ok so then there's a rotate
gesture and that is where I rotate here
and so typically it's a two finger drag
just going to rotate fingers around each
other those are continuously generated
as well and the coatis looks quite quite
similar here we're just saying set on
rotation started and we're getting the
current angle so we're asking the the
image the node what's your what's your
rotation angle and then we're recording
that and then this is continuously
reported into this event handler and
we're setting the rotation angle to the
total angle in the event the total angle
that the user has moved it since this
the rotation started and we're adding
that to the current rotation angle and
so that's how we're achieving that
question you can get both that's a good
leading question I actually paid this
gentleman to ask that question because
in my next slide or my next demo I'm
going to rotate and zoom wait haven't
talked about zoom but rotate and scroll
at the same time and so as that's
happening then we're getting zoom
gestures
or zoom events which is this very
similar set on Zoom started and in this
case we're going to get the the current
zoom factor so every node in the scene
graph in javafx has a scale exascale y
scale Z and so we're going to get the
current zoom factor the scale value in
this case the scale X and continue this
will be continuously reported here and
as it is reported we're going to take
the total zoom factor from the event so
as the user is expanding or contracting
they're the two fingers then we're going
to take that and multiply it by the
current zoom factor so that's how and
we're doing that on the both the x and y
axes then that's how this happens and
yes both at the same time and then also
we've got the zoom I just said rotate
okay I've talked about rotate and then
we've got zoom so if I covered scroll
rotate and zoom okay good thank you okay
then so those are the four gestures so
somebody tell me what the four gestures
were raised your hand tell me what the
four gestures were and then i'll take
you to starbucks okay I mean just
sometime this week hit me you know when
you see me in the conference and will
you no will will I'll buy a cup of
coffee at Starbucks okay so what are the
four gestures have you want anything yet
in the last 50 days okay go ahead it
swipe swipe scroll rotate and zoom very
good very good okay so so now we've got
those were gestures right but now we're
going to talk about the touch events
themselves so you have touch events but
each touch event has one or more touch
points because I could actually touch
more than one point on the screen right
so I'm going to go through this program
with you but each one of these each time
I put a finger down I'm generating a
touch event if I put five fingers down
i'm generating five touch events and
each one of those has five touch points
here I've got one touch event with one
touch point another touch event got to
touch points that kind of thing and even
if I lift a finger off that generates
event an event because that's a touch
release event and but there's two touch
points I'm sorry one touch point here
but also the one that the touch point
that I released is also reported and
then it wouldn't be reported anymore so
it's these touch events and then the
touch points that are that are with them
so there's press release moved or
stationary and that comes into play
especially in the Zen guitar example
where I need to be able to do a pull off
if you're familiar with doing guitars I
know Freddie Freddie is you there's a
hammer on and a pull off the pull off
you know I can't pluck a string when I'm
when I'm pulling it off on this tablet
but I can sense when the when the when
my finger has been removed and then that
generates an event and so I can sense
that that that there's it's it's temp
that stationary and released so so to
respond to these touch events in this
case in this particular example with the
polygon I'm going to have three events
that I'm interested in set on touch
pressed whoops sorry okay set on touch
pressed set on touch released and set on
touch moved because you notice as I move
my finger we also track those and so
each time I'm going to call this method
that I that I created called update poly
and I'm going to pass in the touch event
here and I'm just going to take the
polygon it's just a job FX class it's a
shape and I'm going to get the points
and clear
the point so I have no points in my
polygon and then I'm going to iterate
over the the touch point that the touch
points in the touch event and for
everyone i find i'm going to add it to
the polygon and so that's how we get
this so very simple very simple of a
powerful way of dealing with things
question yes question yes that's that's
kind of a hardware thing but it try it
when you put your finger down on it then
the hardware itself right the that it
depends on the hardware and then right
and then it reports the software so it's
so we don't have to even worry about
that which is nice got enough to worry
about other questions okay is dental
Ferran here by the way Dannel Ferran is
a is a kind of member of the JavaFX
community and all I'll talk about the
javafx community a little later but he
has created a really nice utility called
touch touch F X Y and it's just a nice
utility that allows you to explore the
idea of multi-touch shows you what
events are being fired and that kind of
thing so it's kind of nice so then
there's the pagination control if you
want to just allow the user to be able
to swipe between one page and another
maybe you've got several nodes may be
there they have text in them maybe they
have pictures whatever then you can use
something called the pagination control
so first I'll demonstrate that is just a
simple one where I'm swiping between ten
different pages or maybe I want to touch
page five or touch one so anytime you
have something where you want to
navigate between pages that's a great
one and each page is a node subclass in
javafx everything you see on the screen
is a node so
oh so the shapes are nodes the polygons
you saw were nodes the images you saw
controls are nodes even like a web view
if you want to embed a browser into your
javafx application the webview is a node
and the media is a node the media view
is a node so everything is a node and so
any anything that you can put on in your
page or in your javafx seen you could
say okay that's a node and put it in
your pagination control and nodes there
are grouping notes like layout nodes and
things like that where they can be very
complex you can have a whole whole graph
of nodes that so you could have a very
complex things in in here rather than
just you know some numbers so you can
either choose the style bullet class or
you can choose to to see little buttons
and arrows and things so to use that
we're just going to create a new
pagination control and then here where
it's changing it to style class of
bullet and then here is where the work
is it this will get called anytime you
want to render a node so it gets called
with the page number you're on and then
it returns it is supposed to return then
the node that you want so here we're
just doing something simple where we're
creating a text node and then we're
setting a fill color and a font color
note I could have done that in CSS as
well in fact it's usually prefer to do
it in CSS too so that it's things are
easily skinnable but but here we're
coding that and so when this returns
it's going to if I was on page 4 if I
was going to page four then this would
get called this lambda it would return
that node and it would put it in there
so it's it's a very powerful way of
being able to do that yes
you know you don't even have to worry
about that at all all you have literally
all you have to do is you have to think
about what you want to to the node that
you want to appear in page 2 and then
you handle this so when this is too then
what you're doing here is you're
constructing your page to node so yeah
it's beautiful you know all that magic
is taken care of for you okay and then
there's the idea of accommodating
fingers because our fingers are fatter
than then then Mouse at least mine are
the mouse cursors so there are default
sizes for most UI controls and if you
want to change that then the easy way to
do that is just to modify the CSS so
here we're modifying the CSS the FX font
size and that kind of controls a lot of
the sizes because you're modifying the
text font and the controls are very tied
to the text font so here's a an
application it's called javafx ensemble
if you've never seen it before it's it's
really worth downloading you can get it
with the jdk 7 or jdk 8 and it's it has
an examples of virtually all of the
techniques and and you know facilities
of javafx so for example if i wanted to
know how to do a chart I could just
scroll down here to charts and I could
see this advanced line chart or advanced
candlestick chart things like this and
also there's the source code behind it
and I can even save and that beans
project with it I can copy the source so
it's pretty nice that way but my the
point for showing this to you is that
when we change the CSS then these these
controls then become bigger than they
normally are because normally they're
about this size and now you know
they're about this size because I
changed the CSS so now I'm going to give
you a little introduction to JavaFX 3d
so we've you know javafx 3d and
multi-touch go together really well
because a lot of times what you're doing
when you do the multi-touch is your kind
of manipulating 3d objects maybe you're
you're rotating them or you know some
other kinds of operations so it's really
kind of a natural thing and I want to
direct your attention to a quote that
Jasper pots made you know several months
ago Jasper pots you may remember is one
of the the people responsible for that
awesome keynote demo with the with the
chess pieces and the and you know the
animated chess sets and those kinds of
things along with John UN and other
people but he said that JavaFX 3d gives
you the ability to use 3d geometry
cameras and lights in javafx so there's
three areas that are kind of added to
JavaFX because of JavaFX 3d geometry
shapes things like that cameras which is
the way that you view the scene and then
the lights the lighting in the scene so
to kind of take you from the beginning
there we're going to show a sphere and a
box to primitive objects to primitive
shapes their predefined shapes and as
I'm moving my finger then the the sphere
in the Box are rotating so those are two
of the three the predefined shapes so is
the box there's a sphere there's also a
cylinder there's also user-defined
shapes and those are ones where you want
to use those a lot as a matter of fact
the the Dukes and and things like that
anything more complicated than you can
create by you know putting some spheres
and boxes and triangles and sorry
cylinders together you're going to need
a triangle mesh and that's basically a
mesh of triangles that define the
surface of your 3d shape so that's a
user-defined shape so getting back to
the sphere and the Box example the code
behind creating the sphere is right here
first of all we create a material the
material is what you see in this case
it's a fun material and we set the
diffuse color to blue so that's this
blue but then we set the specular color
to a light blue that's where it tends to
be shiny and so we're creating a new
sphere we had it with a radius of 200
and then we're setting the material to
the blue sphere get questions on that ok
in addition to having the materials we
can also have textures textures are
images that you would put on the face
the faces of a shape so here we have
just a fun material and then here we
have a diffuse map a diffuse map is an
image and then we have a bump map a bump
map can be confront can be combined with
the diffuse map to give it the
appearance of texture so I'll show you
this in a 3d viewer that was shown
yesterday with the Dukes this isn't the
same mesh but it's it's the same 3d
viewer that was shown yesterday so so
Duke snows here is is a fun it is a
sorry aza is a diffuse map it's just an
image that then is stretched on the
sphere but then compare that to this
this is a diffuse map and a bump map now
this gives the appearance of of texture
sorry of of raised
parts in the in the sphere but if you
look very closely at the edges there's
no there are no raised parts it's it's a
I trick right used by different images
to make it look like and so that's
called a bump map so you use a diffuse
map at a bump map to give to to make it
give it the appearance of being raised
so then if you're going to did you have
a question ok so so very good question
how do you map the image to the 3d
geometry I'm going to show you some code
examples of how you do it with primitive
shapes and so it's it kind of
automatically does that for you and I'll
show you this example which is called UV
mapping which is how you would map
images to complex shapes to predefine
other sorry to to user-defined shapes to
triangle meshes so this is an example
where we would have a Mercator
projection of a map and we're going to
map it onto a sphere so the idea is we
use the UV map and we're going to wrap
it on a 3d model so here is a
two-dimensional map an image and then
we're defining all the different places
where we're going to put this on here so
a real example then is here's a Mercator
projection we're slicing and dicing it
up into a UV map and then we're going to
put it on a sphere so you can either you
can either count on the if it's a
primitive you can let javafx 3d do it
for you or if it's a user fine map then
you need to tell it where you want
everything and some at some point it
gets so complicated that you want to
just use an external tool you know
like Maya something like that and then
you define it all and then it generates
a model and then you can read that model
in at runtime and render it so but
that's really what's happening behind
the scenes so first of all placing
texture on a sphere here's a Mercator
projection of the earth that we've put
on a sphere and now we're just rotating
it so the code behind that is here we've
got we're creating a material just like
we did before it's a new fun material
and then we're setting a diffuse map to
it which is an image and then we're
creating the sphere of 400 radius and
then we're setting the material just
like we did before into the sphere and
so it it takes care of all of the
mapping so we've just put a Mercator
projection of the map on a sphere so any
questions on that that's kind of a
lightning talk about javafx 3d shapes
that's the 3d geometry that's the first
thing that Jasper was talking about in
his quote questions about that before i
got into lights ok so now we've got
lighting that's the second point that
Jasper hadn't is quote because you want
to be able to light your 3d objects in
the scene in this three-dimensional
scene so lights are actually nodes in
the scene graph so you can position them
anywhere you want at any location in XYZ
coordinate space there's a what's called
a point light which then shines from
where that is there's ambient light then
that gives you more of a ambient light
and then I'm saying here the default
light is provided if know if there are
no active lights and I believe that that
is supposed to be the case I have not
actually tried that particular feature
so if you try it and tell me that that's
not yet because it's we're just at a
preview release now you know let me know
but I believe that if you don't put any
lights in your scene then
lighting will be provided so you can see
your objects so here's an example of a
light so here we're going we're putting
a couple of point lights and we're
rotating it now when you put a point
light in the scene you can't see it you
just see the effects of it so here for
demonstrative purposes we're we're
putting a sphere there so that you can
actually see it and notice the effect as
it rotates them that it's having up on
that cylinder so at the same time I'm
going to go ahead and make this one
instead of making the one on the right
move the stationary light I'm going to
make it change color I'm using a
transition to make it change color and
then I'm going to go ahead and touch the
cylinder and now it's going to do a
rotate transition going to back and
forth so that then we can see the
effects of the moving light of the
stationary life that's changing color
and then on the cylinder as its rotating
so that's that's kind of lighting that
those are some of the issues and and
concepts in 3d lighting questions on
that ok so the code behind that then we
can create new new point lights here
we're going to create this point light
here and we're going to set it into the
scene so we've got an XYZ and those are
you know X Y and then Z gets bigger as
you go into the screen get smaller and
if you go negative then you're kind of
behind so that the the lights are
shining from behind so here we're
putting it at seven hundred two hundred
and Z and we're creating a prospective
camera so the camera is going to have
some perspective when it views the scene
and then we're actually then putting the
camera in the scene too because you want
to be able to control where the camera
is
if you are creating a you know a
first-person game and you wanted to kind
of walk around you know minecraft or
whatever then you're moving the camera
where your your person is right so so
that's so you can put the camera
anywhere you want to in the scene good
questions okay then the last thing I'd
like to show you is this Zen guitar 3d
thing that I created which is just I
created it so that I could have
something to practice with when I can't
lug around my guitar but mainly I
created it for this idea of being able
to demonstrate 3d multi-touch things
like that and also there's this great
library but it created by a guy named
David Cole called J fugue that's kind of
underneath the covers that makes it kind
of easy to do the sound thing so so
first of all just kind of show it to you
here it's uh
okay so it's um it's a it can do like
MIDI sounds different types of sounds oh
thank you thank you thank you alright
appreciate that so it's it'll do mini
sounds different kinds of sounds things
like that but I'd like to use that then
to demonstrate some some concepts so the
first concept I'd like to demonstrate is
this idea of touching I'm basically
going to reinforce some concepts because
we've already talked about them but hey
I didn't need power point anyway okay so
the first concept PowerPoint is going to
mess with me now sorry okay we're going
to go down memory lane all right let's
go back down memory lane together all
right do you remember like when we first
met like it seems like years ago that we
talked about like what we're going to
talk about touch gestures things like
that in 3d and then we oh and then I
forgot to tell you about the legalese
that I'm supposed to show you with
Oracle everything Oracle which means
don't trust anything I'm about to say
and then we talked about four types of
gestures swipe scroll rotate and zoom
and then i showed you examples and
showed you some code how to handle the
scroll gesture rotating zooming then we
talked about what we talked about next I
forgot when we talk about next huh touch
events that's right you're good touch
events and touch points and then what do
we talk about pagination control that's
awesome and then we talked about would
we talk about after that a little CSS
right to accommodate the fingers and
then we went into 3d we went into 3d and
there were three concepts with 3d that
we talked about from Jasper pots quotes
they were geometry
lights cameras very good and then we
talked about primitive shapes and and
complex shapes you know user-defined
shapes we talked about diffuse maps and
bump maps so that you can approximate
you know you can make the user think
that they're looking at raised surfaces
but they're not really and then we
showed you how to place a text around a
sphere we talked about lighting and here
we are back again so so now if I put
five fingers on this thing then a
cylinder is going to come out in which i
can pick another instrument okay so and
it's like it's like a 3d cylinder right
it's just a primitive thing and I'm
putting an image map on it so that and
you'll see the image map that shows it
shows me the different instruments I can
select so Freddie select an instrument
and they pick an instrument any
instrument a flute I don't have a flute
a clarinet there's a cartoon where a
faint a famous cartoon where a character
played clarinet anybody now we have kids
that young ok spongebob squidward played
yeah yeah so okay here clarinet
ok so anyway okay so there's a clarinet
oh so then we'll bring this guy back out
and you could pick something else Oh
tell me what movie this is from
ah deliverance very good very good nice
that you guys are sharp okay so so now
the way that we do that is set on touch
pressed we've got this touch event right
and then if that we ask the touch event
what's the touch count how many fingers
were down and if it's five then we're
going to i'm going to call this method
that i've created that shows the midi
picker and here is this isn't the show
midi picker method but it's a part of
that show midi picker method in which i
create a translate transition with the
duration of two seconds and the node of
that cylinder that i'm bringing out and
instead of the translate happening in XY
space I'm saying set from Z of 400 which
is in the scene to a Z of negative 100
which comes out of the scene okay and so
that's why we get this effect it's just
doing that transition this is doing what
we told us to do so then we can rotate
remember where i rotated the instrument
here we're going to use a scroll and
we're capturing the rotation angle here
the the events are continuously reported
we got the whole isn't inertia thing and
we're just basically setting the rotate
angle of the cylinder based upon what
was reported in that event and so since
I'm using a cylinder I'm trying to you
know the events are reporting pixels but
I want to be changing angles so I just
did a kind of a you know an estimate a
good guess at what might look good when
you scroll regarding angle of the
cylinder and so I said okay well if you
take the total Delta X of the pixels
that were scrolled then divided by seven
that's probably about the angle that I
want to scroll and so that's why that's
why this and it tracks pretty well you
know it's it's it's a good approximation
non-scientific but it worked so that's
that then to play strings we're going to
use the touch events so there are four
techniques and playing a guitar for main
ones lots of techniques reports but for
that that that I had to really consider
when creating this this demo how are we
doing on time Richard by the way to unit
now if I know oh good yeah we're in good
shape okay good so there are four
techniques actually there's tapping
there's hammer ons I can remove my
finger I can do slides bends and
something called pull off so there's six
techniques I lied but there's four touch
events that I'm interested in and there
are only four touch events in total
anyway so that's that's fine so here is
uh I'm just touching it let me pick a
different instrument that's I just
picked a marimba don't need a marimba
here go back to a guitar okay so here we
are touching it and then here I'm going
to hammer on pull
and then here's a member that we have a
slide
now we also have a band
notice I'm bending on the X a core the y
axis
ok so those techniques then are handled
by by these touch events so we've got
set touch pressed for tapping and
hammering on that's kind of evident when
when the finger hits the string we want
it to we want to know that but then when
we release the the string when we remove
the finger we want to know when it was
removed so that we can quit playing the
note or in or in this case when we do a
pull off we want to be able to know that
we remove the finger so that we can
continue playing the note that was
already kind of down string right
because I'm not able to pluck that
string again with this finger like I
would with a real guitar but I can know
when the event happened and I can know
that this one is has a stationary event
but I know where it is right so we've
got that and then with the slides and
bends we're doing the move right this is
moving on the x axis this is moving on
the y axis and then finally we have
touch stationary and I talked about that
now the the way that we compute the note
that we're going to play is we get the
touch event we get the touch point from
the touch event and then we say get X
which is going to get the x position and
then we use just an algorithm to convert
that into MIDI MIDI tones and and then
we play that using the underlying J
fugue library so now to demonstrate some
job effects 3d with this I'm going to
switch modes so I've got it set up to
when if I hit four fingers on the same
string then it's going to go in between
playing mode and being able to show you
some 3d stuff kind of rotate the guitar
and stuff so so go ahead and do that I'm
going to hit four fingers on the same
string and then we'll be able to kind of
rotate this guitar
kind of take a look at it maybe even
like look at some of the strings I'm
going to do three fingers on it to be
able to to where its back into playing
mode so i can play it like this you can
see the strings library these are just
cylinders right this is the cities are
cylinders the frets are cylinders and
you know this is just a it's just this
block here that's just a box right with
some with an image map on at a diffuse
map so and these these little fret
markers those are cylinders just really
flat cylinders that I kind of inlaid
into the into the fretboard so anyway so
I'll put it back into the mode here
where I can kind of do the do different
operations on it so tell me what event
that i'm using when i do this oh well
yeah there's the is that guy yeah he's
because he's hiding back there right and
then why i hit the five fingers he just
comes out right well kind of like this
alright see put them back so anyway what
vent is it when i do this you remember
one of the gestures what what scroll the
scroll gesture very good okay so and
likewise doing the scroll gesture here
so what kind of do the scroll gesture
maybe turn it around a little bit maybe
turn it around like this a little bit
and then let's see what gesture is this
you remember rotate okay and then I
could do this gesture I could make a
larger remember what that is what
gesture is that it's a zoom now I've got
it programmed see I can you know when
i'm playing with this i can get it to
where the guitar gets so small that i
can no longer kind of touch it and so to
protect against that until also to demo
some another thing i made it so that
when you make it less than twenty-five
percent of its original size i'm going
to i'm going to make it kind of do a
bunch of transitions to make it appear
as it normally did and put it
play mode so you have to watch really
carefully but when I make it twenty-five
percent then it's going to do that which
then brings it to the normal size and in
play mode so the code behind that I will
show you in a second I need to actually
show you this slide first so remember
how we got into this mode we hit one
string of four fingers so it's easy to
catch four fingers because you just ask
that the the touch event how many touch
points there are right but in this
guitar each one of these strings is its
own node so then the way that this works
is each one of these see where the red
dotted lines are those are each nodes so
each string has its own note so not only
do I have to catch whether there's four
fingers I want to make sure that all
four fingers are in the same node the
same string so to do that we're passing
in this touch event to this method and
then we're saying for all the touch
points that occurred on that we're going
to it or over iterate over the touch
points if the touch point belongs to
this well what's this this is the node
that the that the touch event was
reported on so if I if I put four
different fingers on four different
strings that would get four different
touch events and each one of those would
be delivered to the node that that it
happened on and each one of those would
have four touch points right but if if I
have if I put all four fingers on one
node then I'm going to get four touch
events but each one of those will report
that each one each one of the four touch
points belongs to this node ok any
questions on that yes question
yes
that's opaque to us we just it just gets
it gets delivered to an event handler
and then then you just handle it from
there so if I just put three fingers
simultaneously on the on the the screen
then there would be three touch events
he'll say put them on the same know
there'd be three touch events that
happen I put a fourth one on there then
another touch event would happen that
would have four touch points okay yes
well that's yes that's the question is
couldn't I just register event handler
on each note on each note each string
okay God detect four fingers it will
detect that four fingers are down but
the only way you can it'll detect that
four fingers are down on the screen
right but it won't tell you but you'll
get those four fingers it the matter
whether they're all on that note or not
it just says there's four of them and
then you have to figure out you know
whether they're on your node right
that's a good question though so to make
this happen that remember when we kind
of popped out and did the rotating and
all that just kind of automatically and
went to full size and went into play
mode to do that we used and to actually
do all of the rotating where we're bite
we're using some capability and javafx
called binding and here we've got a
double property now a property in javafx
is a little bit it's like it's like a
javabean only it's got an a
tional thing that called a property that
then allows you to do binding some other
things so here's a property that we're
creating called guitar angle X and it's
a simple double property so double
property is an abstract or an interface
probably abstract class and then simple
double property is though is the one
that's included with the JDK to be able
to create an instance of a double
property so we're creating one for an X
a Y and a Z so that holds the angle and
then also we're creating three reference
variables for the rotate so we're taking
this guitar node and we're accessing the
transforms property now the transforms
property is a collection of all the
transforms that are valid for that
particular node that you've set on that
note now here we're going to we're going
to have at least three transforms three
of them are rotate on the x-axis or
rotate on the y-axis and a rotate on the
z-axis so we're defining those here
we're creating three new rotations
rotates and those the reference
variables are here in this rotate so
then as we bind the guitar sorry the
guitar angle X sorry the as we bind the
angle property the X angle property of
the guitar rotate variable here to the
to the guitar angle itself as we change
the guitar angle that automatically
modifies the rotate property the one of
those rotates in there so in the code
then as I'm scrolling I can change this
guitar angle x y&amp;amp;z and as I do that
because it's bound then it's going to
dynamically change the angle property
that's set in this node I did a lousy
job of explaining
can anybody there's anybody any
questions on that because I'll do a
do-over if you if anybody has a question
on that okay okay yes okay that's a very
good question so thank you very much for
asking my question okay so what is the
benefit of using binding rather than
just setting it and 11 benefit is that
then all I have to worry about is
influencing this variable this guards
guitar angle X and then I can I can I
can influence that angle from anywhere
like from from when I scroll or in this
code right here where I'm going to like
here's the scroll so here I'm
influencing that guitar angle X and here
you know we're doing a rotate things
like that but then here is a timeline
that I'm using for when that thing gets
below 25 percent and then kind of pops
out and I want to I want it to the x y&amp;amp;z
rotation angles I want them to
transition from wherever they are back
to you know where they were originally
and so it's it's really convenient and
you know easy to kind of have a model
you know MVC kind of thing right where
where you have a model that represents
the position rotational position you
know XY position things like that and
even scales that that represent those
things in a model that you can influence
the model and then because of the
binding it just automatically happens
but you could manually do that you could
just set those rotates and that would be
fine I'd like to use models and then
that way it can kind of just change the
models and then it just happens in real
life right is that a fair answer nice
yes yes yes
oh yes right so there's there's very
little overhead and binding but and it
would be almost indistinguishable I
think in a UI sense but there is a
little bit of overhead but it's pretty
it's pretty optimized under the covers
binding is done well the GPU would would
do all the graphics and that kind of
stuff with it that yeah exactly well
sure yeah I mean there are trade-offs
it's just in in a kin like in practical
purposes in things that I've done I've
never seen any like performance problems
but but yes there is certainly some
overhead there good question other
questions how many minutes will have I
have four whole minutes Wow what are we
into in four minutes i'm going to show
you this so here is the timeline that
were that we've created now timeline is
is for animation typically for animation
use these transitions remember we've had
these rotate transitions and translate
transition things like that but if you
want to kind of manage things a little
bit under the covers and maybe make a
lot of different animations happen at
the same time or a lot of different
aspects of an animation then what i'm
doing here is creating a timeline and
then setting up keyframes for where I
want things to be at certain points in
time and then the timeline is
responsible for doing what's called
interpolation which then tells it where
everything should be at every at every
point on that timeline based upon the
keyframes that I've defined so here I'm
just defining one keyframe I'm saying in
one second I want the guitar angle X to
be 0y to be 0 Z to be 0 I want the scale
property be one now here's a case and to
your point where i'm not using a model
for the scale I'm just
directly saying the scale X property of
the guitar is is this here I'm using a
model you know in binding here I'm not
so it's just you know preference and
maybe convenience or whatever and then
here I'm saying translate X is going to
be a certain point y and a certain point
and then Z and that's what caused that
to pop out there's the J fugue library I
just want to show you a couple things
one is there's a site called javafx
community com site that the colleague of
mine named Garrett Grunwald and who's
got seven sessions here by the way at
javaone and you should go see you know
at least one or two of them just a
brilliant job of effects and graphics
guy really really good sessions anyway
he and I administer this site and kind
of manage kind of lead this you know
this site and if you are doing any kind
of javafx blogging then you know let me
know send me an email it my name is
james dot weaver at oracle com and let
me know what your blog is and if you're
if you're doing the JavaFX blogging then
i'll ask you for a feed and then we'll
put that feed here in the latest posts
from the java community we have you know
100 or so bloggers and you can you know
just look at that page every day and see
more blog posts about javafx in the
community which is a very dynamic fun
you know sharing community kind of
learns from each other it's really cool
then we put the latest videos and
announcements and things like that there
javafx community com also you know that
the jdk 8 preview releases is available
also another really good site is FX
experience calm and that's one that
Jasper pots Richard bear and Jonathan
Giles all from Oracle in the javafx
engineering team maintained as new
things come out cool things that they're
looking at and they put it out there on
that site and I've given you a chance
for questions I'm sorry we're out of
time now
you know you could maybe hit me in the
hall or something and definitely if you
want to one if you won a cup of coffee
please hit me sometime during the during
the conference and we'll we'll go over
to starbucks together thank you very
much for your attention</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>