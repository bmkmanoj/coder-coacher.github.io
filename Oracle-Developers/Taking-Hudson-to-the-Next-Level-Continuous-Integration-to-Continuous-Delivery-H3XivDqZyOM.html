<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Taking Hudson to the Next Level: Continuous Integration to Continuous Delivery | Coder Coacher - Coaching Coders</title><meta content="Taking Hudson to the Next Level: Continuous Integration to Continuous Delivery - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Developers/">Oracle Developers</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>Taking Hudson to the Next Level: Continuous Integration to Continuous Delivery</b></h2><h5 class="post__date">2015-06-02</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/H3XivDqZyOM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">welcome to this session on Hudson my
name is Duncan Mills I'm a committer on
Hudson and with me as Winston Prakash is
lead on the Hudson projected Eclipse
what we wanted to do in this session was
really start to outline first of all
where we are with the Hudson project
what's been happening over the last
years since we were last here and then
kind of open up a bit towards the future
what we you know think will be happening
with with this kind of tooling going
forward what the the challenges we have
to address the problems we have to solve
and then I'm going to round off with a
couple of case studies about how we're
using Hudson specifically at Oracle just
to give you an idea of how some of the
work that's been happening within the
project is applicable to kind of
enterprise scale developments so I'll do
the first couple of sections there then
Winston will be able to talk at some
depth about continuous delivery though
in not as much depth so you'd love to
you'd also love to give away some books
I'm sure but we'll come to that in a
second and then I'll finish off with the
case studies so first of all just the
level of playing fields is everyone here
already familiar with with Hudson or
similar continuous aggression
integration tools yeah other continuous
integration tools are available so I
don't really have to tell you what it's
all about right we have the concept that
by making developers life easier by
taking away some of the the grudge
Tartan or grunt tasks of development
automating some of the processes the
testing the integration and so on that
developers would normally have to
manually we just make everyone's life
better right and the challenge of course
is to do that in a way that is useful
right because we can automate stuff with
scripts and that's what people have been
doing for as long as there's been coding
so the whole idea of a continuous
integration server is to take that into
a kind of an additional layer of
convenience and providing the developer
with an easy-to-use tool where they can
set up these repeatable actions
run those actions potentially across
different types of hardware
heterogeneous hardware and probably most
importantly of all do that in a way that
is extensible because no one's build
environment no one's delivery
environment is the same right we will
use slightly different combinations of
software and hardware and though we may
all think you know hey everyone's doing
getting maven some well their course
that's not the case you know people are
using all these different combinations
so that's the idea of course of a
continuous integration server full stop
you know go in there and provide for the
the developers needs and the course
Hudson does this and always has from the
very start it was very cleverly designed
with a plug-in model in mind so that as
our concepts about how we build and
deliver software have evolved new
plugins can be delivered that provide
that kind of capability and so of course
you know Hudson will integrate with all
of the the source control systems you
might want all of the build systems you
might want and so on and importantly if
you're doing something novel and
different you've got something that
really is just personal to your
organization it's certainly something we
have within Oracle there's you know all
sorts of tools that are for various
reasons built in-house then the ability
to be able to build tooling around that
and then integrate it into your standard
build processes using the plug-in model
of Hudson is really key and then some of
the other primary things that we've
always had in Hudson are more and more
important as time goes on and these are
things like that the feed gap
capabilities again we tried to tend it
to use feedback on a you know a
moderately trivial level in the past you
know who broke the build who broke the
build fix it you're tagged right they
said we have that kind of capability
built in this was C and we explore
further into if you like the enterprise
side of software delivery the feedback
side becomes more and more important
anyway pretty much everyone knows what's
the our tools are so I don't need to
reiterate the tenants of CI to you
now what about Hudson itself so
hopefully you'll all be fairly aware of
this but I just give you an update of
where we are so we moved the Hudson
project from java.net into the Eclipse
Foundation a few years back now with the
Hudson 3 release and so we're a mature
technology project at the Eclipse
Foundation so we're not delivered as
part of the yearly Eclipse releases that
the ID releases we release independently
of that from the technology screen the
core what we call Hudson core so the
core build infrastructure and the core
consider plug-in integration around that
are all released under the EPL license
not surprisingly and then the plugins
well that's really totally up to the
plug-in writer the vast majority of
plugins are released under MIT for
historical reasons that's been kind of
the de facto license for plugins and of
course that's a nice open license
doesn't really give you any problems in
most organizations release why it's
where are we well when I wrote these
slides a couple of weeks ago we were on
three to zero when I updated these
slides on Friday we're now on three to
one so we released a patch set on Friday
Buhl's net but the three two releases
our latest one that was released in
August and then we patched it as I say
last week and intend in terms of the
general community staff we maintain the
project plan through the tooling
available at the Eclipse foundations you
can pop in have a look see what's
planned for the next release and so on
and obviously see what the bug backlog
is and all that sort of stuff so
everything is up essentially in the
Eclipse foundation's portal including
the forums and the the bugs of the
system yeah when it comes to plugins
obviously given its an open plug-in
community we don't expect every plug-in
writer who wants to contribute back to
the community to have to be a member of
the Eclipse Foundation right they don't
have to be a committer in Eclipse that
would obviously be shall we say
long winded way of doing things so
plugins tend to be hosted out of github
and then all Javad on that and then we
host those through the Hudson CI website
so it's this kind of dual headed
open-source project part java.net parsec
part eclipse depending on whether you're
talking about core or whether you're
talking about the the plug-in side so
Hudson CID org for plugins and
eclipse.org is kind of our homepage we
keep them both in steps you can go to
either place and get to the software as
required so what's been happening over
the last few releases the major thing
really was looking at how we could take
Hudson from its roots say originally was
conceived as a tool you know as most
most good tools are there they're there
to scratch an itch right developers have
a problem they don't like doing stuff
again and again and again so what you do
will you write a script well you know
that's that's a little bit inflexible so
of course what we have instead is a
really nice capable server that can do
that all the things a script could do
for you and more but what matters to a
developer of course is well just saving
me time it's a very you know logical
thing making me agile allowing me to
change stuff quickly so I don't have to
you know clone scripts and hack them
around I can just do things in a much
more declarative way and you know just
making it really flexible as I adopt a
new technology make it such that I can
start to utilize that type of technology
in these build processes so it's kind of
the the original raison d'être if you
like of a tool like hudson make it easy
for me or for my team we're talking
small scale right save us time please
the problem is that when we look at
moving into enterprise size software
development we we come across a totally
different set of challenges and of
course everyone's at some end at this
scale right you may be a small team in
which case all you care about is the
stuff that immediately saves you
on the other hand if you're working for
a larger organization some of these
factors start to come into play we start
to have to worry about well how easy is
it to manage this thing we're using this
tool and in fact we're using this tool
to the extent that it's no longer a
luxury that we can just have someone
running on a laptop under the desk it's
suddenly become a crucial part of our
delivery process yeah we can't afford to
have this thing go down because then we
won't may be able to make our targets we
won't be able to deliver on time it's
become a crucial part of infrastructure
so manageability becomes important right
security becomes important large
organizations for some reason are
somewhat paranoid about their IP in a
lot of cases that's their business you
don't want that leaking outside of the
organization you don't want it leaking
within the organization because there
are silos of privilege silos of
expertise so security becomes very
important as well again something that
was available within kind of the the
core of Hudson from the start but taking
it to the next level taking it beyond
just simple workgroup security into
something a lot more kind of corporate
related if you like similar to the whole
point of manageability we have to
consider scalability and when I talk
about some of the the use cases later on
about how we're using Hudson inside
Oracle both for the developer cloud
service and our internal build processes
you'll see the kind of numbers we're
talking about in terms of machines and
processes and so on it becomes a big
issue you know if you start having to
procure tens or hundreds of physical
pieces of hardware to support your build
systems then any saving you can make
there is gonna make a big big difference
management visibility because managers
like to know this stuff who's building
what who's failing what are your stats
like important and then the the the ugly
child that we would like to ignore but
unfortunately is horribly important in
this day and age is is the thorny issue
of legal and IP
right if I am using a piece of software
as part of my build processes and that
piece of software is relying on another
piece of software would they just happen
to pull from somewhere else and I don't
know what the provenance of that code is
could someone sue me it's a worry so we
do have to consider you know where all
the code has come from not only the code
we write but the code we use obviously
the code we incorporate and ship third
parties we ship in a product for example
but third-party libraries that we use
within our build processes are also
potentially a source of problem for us
so knowing exactly where code comes from
who wrote it that kind of stuff who
owned it who's got the copyright who's
what licenses under is very important
from the corporate perspective so these
are kind of the considerations and so
with this stuff in mind as we've moved
forward with Hudson we've kind of had
out in the back of our head these kind
of factors which are often somewhat
contrary to the immediate needs as a
developer right it's always nice to put
new features into something that
sometimes we have to take a step back
and consider this other stuff so in fact
if we look at the Hudson 3-0 release
this is exactly what happened one of the
big pain points and certainly time sinks
that we encountered when moving into
Eclipse was the IP cleanup the original
Hudson codebase was shall we say
somewhat haphazard in its use of
libraries and so as part of that process
we had to go through a due diligence
process on every single third-party
library that Hudson used every line of
code we had to understand the provenance
of who wrote it what license is under
and so on so that was a very
time-consuming process but it had the
advantage of course of allowing us to
tidy things up a little bit so we could
reduce the overall library loading
within Hudson from around hundred nine
hundred ten down to eighty five so bit
of a cleanup remove some duplicates that
kind of stuff so that's good but it led
to a lot of pain where there were
libraries in use of which we could not
get the problems we couldn't work out
exactly who'd written that code and
under the rules of its foundation quite
reasonably they weren't so keen for us
to use that stuff and it also libraries
with the LGPL license likewise we
couldn't use that so there was a lot of
work in kind of providing alternative
implementations for those bits of the
code base which had a knock-on effect of
course in some of the plugins as well so
that was the big job at the 3.0 release
very unglamorous very unexcited didn't
really surface in the product it just
had to happen in order for the the
product to move forward and you know
I've been in software developed for a
long time it's in some ways quite nice
to have the luxury of of rebasing like
that really spending the time to sort
out what am i using right it was it was
a big spaghetti to unravel but
worthwhile however we did get some
features in two-30
and that's primarily again aimed at
sorting out some of these enterprise
requirements the first thing put in in
fact was the ability to switch plug
update centers so Hudson originally had
the idea of you know a single update
center hosted off Hudson CI which is
great but of course allows and any
Hudson serve any a Hudson service that
can see the internet pull down any
plug-in they want from that now that's
great but again from an enterprise
perspective well in fact maybe we don't
want our developers just assembling jobs
using random plugins you know a lot of
plugins very useful other plugins are
not so useful
and again there's IP issues with plugins
because they are you know code that's
quantity contributed by someone else you
might want to do a little bit of due
diligence on understanding where that
code comes from what license is it under
and so on so the legal eagles get a
little bit worried about that kind of
stuff so the ability to have a pluggable
update center does mean now that
organizations can have if you like their
own private list of approved plugin
for development teams to pick up and use
and that same capabilities actually
proved quite useful as we moved on to
our latest release because we've been
able to use the same capability to
handle some of the issues that have come
up there which I'll come to and then the
the final big ticket item apart from bug
fixes of course in 3-0 was the
introduction of templating so the
ability to define kind of root jobs that
could then be cloned as templates for
further jobs just to allow us to build
more repeatable job shapes if you like
so it's a convenience but it's a good
step forward when you've got large
numbers of similar jobs for instance far
saw had been to 3.1 and we were talking
about this last year at JavaOne so this
was the the latest thing at that point
we'd literally just released 3.1 again
there was a bit of unglamorous stuff
going on one thing we'd realized quite
early on based both with our work with
the clips and their build processes
which used Hudson and also our
large-scale work at Oracle was we had
some serious scalability issues with
Hudson
so Hudson that scale lodging were
running very large numbers of jobs with
large numbers of builds would need quite
a lot of memory right and I'll talk a
little bit more about that in one of the
case studies later so a major reworking
was done within 3.1 to really optimize
the way that jobs were managed in memory
and builds and managed in memory and
that is resulted in some really
significant savings in the resource
usage required for you know a set of
jobs within Hudson you're gonna see this
having the most positive effect when
you've got a very large number of jobs
and the large number of builds because
you're not we're not saving all of that
stuff in one big memory cache anymore
it's now management much more
constructive and sensible way so those
figures on site there just happen to be
some examples from one of our internal
build systems
used to build oracle jdeveloper but it's
pretty typical as far as the results go
between 5075 percent or more saving on
heap size in particular and the other
key feature introduced in in 3.1 its
team concept so team concept is as the
name might suggest the ability to take
Hudson and kind of make it a bit more
multi-tenant than it originally was so
the the the privilege model within
Hudson was really very flat before and
what we can now do is start to build up
if you like teams as the name suggests
of folks who have privileges to
particular sets of jobs and those teams
are themselves something that can be
driven from your existing infrastructure
so yes you can go into Hudson and use
Hudson's kind of internal user database
if you want to that's not scalable
right that works only really in a small
team ideally you want to hook up to your
UNIX groups or you want to hook up to
your corporate LDAP repository and use
that of course within a team we can have
a single map person as a member of
multiple teams for example so Jeff here
is one of the QA engineers on Hudson
he's in the QA staff team and in the
admin team so the idea of being able to
start to partition are you know a
particular server instance and have
individual teams defined a team can only
firm set of jobs and those are private
to that team really takes us in the
first step towards some kind of
multi-tenancy and again that can have a
hugely beneficial effect on the overall
resource usage as I'll show you later on
so on them to 23.2 we're 3.2 we'd
received a lot of feedback over the the
team concept it was something us adopted
quite strongly within the community and
we came to realize fairly quickly there
was still some more to do right so
initially teams were all about limiting
visibility to a particular set of jobs
having public jobs and private jobs if
you like across those teams but then you
know people started thinking the issue
through and they're saying well you know
I'd also like to be able to do things
like define custom views on the team
basis so my team has its own set of
views which are private to it you know
shaping the Hudson UI and the web app to
specifically what that team needs so you
put that in and then also size to look
at resource allocation so allowing slave
processes to be specifically associated
with the particular team rather than
having kind of a free-for-all pool that
you know whoever was greediest got them
all so we can now do some allocation
based on teams there as well so there's
more to do here I'm sure you know and
that that's one thing after this this
session we got a Boff I think it starts
at 7 o'clock and that'll be a good
subject actually to discuss with any of
you who are already using or think of
using teams you know where could we go
next year there what more do we need so
I'll leave that topic for for later on
another major aim of 3.2 was
unfortunately yet another rather boring
infrastructure change under the covers
and that was an upgrade of spring so we
had a rather elderly set of spring
libraries embedded in the core of Hudson
Hudson users spring extensively for many
things including its security
infrastructure and as we all know it's
never a good idea to hang around too
long in an old version of security
infrastructures that people might have
found exploits for so upgrading spring
was a major priority for this release
and indeed that's what's been done so
we're now on spring 31 to the CG
security has been replaced by spring
security and you know as is with all of
these things there are knock-on effects
there a lot of plugins also use spring
capabilities so there's been a big
re-release of plugins as well in
association with this particular upgrade
because a lot of those need to be
reworked to work with that version of
spring the upshot of that is that we now
have a specific update Center for 3/2
which will serve up those if you like
minute next generation spring using
components but without breaking folks
who are on older versions of Hudson who
are obviously still needing the older
versions so we're continuing adding new
plugins right as they come up I think
we've got all the key ones done but if
there are any of the others you notice
that the need doing we can do that and
then as I said on Friday we just
introduced a new patch set release the
three to one patch set which just fixes
a few problems that were thrown to light
they were actually kind of old
outstanding problems that finally
bubbled up in the changes we made with
3-2 so I think we're just four bugs
fixed in that release but we'll probably
have another dot release patch set
within pretty by the end of the year
so a 3 3 2 2 release and then we'll be
on 2 3 3 3 as kind of the next the next
big thing and that's what we'll discuss
in the buff later so what I'm going to
do now is hand over to Winston wants to
talk a bit about kind of his vision for
how continuous delivery can be morphed
out of the place we are today with with
CI so I'm going to give you the magic
click on that one the worn-out one goes
would ya
I only ever go forward not backwards
hello can hear me
okay so Duncan introduce me already
my name is Winston Prakash I'm one of
the lead developer in Hudson so of
course I Duncan is a he he talks better
than me but I wanted to talk about it
because I wanted to give my visions in
future how we are going to do I hope
what what are things we are going to do
in Hudson to make it a good tool for
continuous delivery so how many of you
know what continuous delivery is skin
how many of you truly dudes are doing 10
years delivery right now in the company
so how many of you really doing
continuous integration right now Wow
still not hundred percent so first I
have to tell you a small story so in in
2012 or 2011 there was a security hole
found in JDK so before this security
hole was found the JDK team was doing
continuous integration so there was
about ten jobs and they have about two
slaves so in the security when they
found the security hole they had to
release quickly as possible so then they
found that the delivery was taking a
long time so then then they wanted to
shake down and find out why so then they
found out what they're doing with ten
jobs it's not the right way to do that
because they have to think more about
continuous delivery than continuous
integration okay
so then they started shaking down the
whole thing and after a month
they came to me and told that there's a
lot of issue with Hudson because Hudson
is not performing well and I asked why
and say all of a sudden we English the
number of jobs and the number of slaves
they asked how many jobs we have they
said we have about 450 jobs I thought
you had only ten jobs last last one a
month before he said yeah no we started
thinking about continuous Tillery
because continuous integration is not
working and they had about two slaves
and now they started talking about 50
slave 60 slaves so this is one of the
reason why we as Duncan mentioned we had
to put more effort on performance of
Hudson Kim bruda improve the performance
on Hudson and the second thing is as I
mentioned that their jobs went from 10
to 450 and all of a sudden what happened
is the number of jobs being managed is
is very very difficult so this is this
is the reason why we started thinking
about teams and team management and
thought that we are thinking about
multi-tenant saying Hudson so so that
there's a natural progression from card
when you naturally progress from
continuous integration to continuous
delivery obviously they demand on Hudson
increases so so we have to think in
terms of two things one is to support
how to do continuous delivering in
Hudson and second thing is you know we
have to make Hudson to perform well in a
continuous delivery environment so let's
quickly talk up a look at it for a
second in a steady way probably you all
know it's a natural evolution of a
development lifecycle so if you are if
you are in the industry for more than 25
years like me probably you know about
waterfall
ethic so if you are in the industry
before 2000 probably a lot what is a
waterfall is well when we were doing
waterfall it almost take one year for a
turnaround time of a product development
then in the early 2000s the agile
methodology started picking up so we
start thinking about we are not thinking
about months and months but you are
thinking about weeks so we started
having developing the products with
within a week and we have a working
product in a week so that's a sprint
lifecycle so in the last couple of years
there's an explosion of mobile cloud and
the whole software industry is exploding
so even the spring lifecycle is becoming
more and more its inefficient so people
are started thinking about continuously
tailoring so a lot of times people think
that ok if it is continuous delivery
means should I continuously deliver it
to the end-user
no that's not the right thing think
about this so how many times you got a
memo from your VP or EVP telling you
that stop developing because I'm going
to do a demo and don't break the product
as I hear this all the time the reason
is because if you commit something you
are certainly going to break something
or other because you're not doing
continuous delivery so when you are
doing a continuous delivery that means
when you come it up commit something
your product is always in a deliverable
state you may not be giving the product
to the end user doesn't matter but
always your product is in a in a
continuously deliverable state that's
that's the meaning of community level
so I said as I mentioned caninus
delivery is a concept see it's not a
silver bullet if there's no metrology
explaining exactly how to do continuous
delivery so if you have not read this
book but this continuous delivery by
chess I would highly recommend you to
read that because before you want to
start doing the continuous delivery you
need to first understand what exactly
caninus delivery is so as the last
sentence says that every build is a
potential release so you need to make
sure that if you say that I am
practicing continuous delivery means
every commit your build is a potential
release so so what is what what we are
doing right now with hudson so has a lot
of hands went up when I asked how many
people are doing hudson so this is what
exactly what you are doing right now
hudson is tuned for mostly for
developers okay so when you when you
talk about hudson all the time we think
okay it's producing a bill and you
commit order the build is is in a good
state or is it in a deliverable state in
order to do that you had to pass on the
build to the to the to the QA team and
then the QA team says okay these are all
the box they then commit and then it
comes back to the developer team and
once the product is somewhat in a better
shape then it goes to the to the ops
team so now there are ops are ready to
ready to deploy the application for you
but what happens for him somebody when
somebody has to change something and
tomorrow your boss has to show a demo we
cannot do the last two things within a
day for the product to be delivered the
product to be in a ready state for your
VP to show a demo so we have if you want
to be in a deliver state you have to
rethink how we are going to use
so let's let's think about what we are
doing in a typical Sprint lifecycle so
we have the product catalog so we have a
sprint sprint lifecycle so you you take
a couple of tasks from the catalog
then you go through the stage and after
say for a few weeks there will be a
chunk of product which will be in a
deliverable State so now you add the
incremental package to your original
package and now you have a deliverable
state the deliverable package and this
has to repeat every four weeks so here
there is a handoff between the developer
and the QA in a in a what he called in a
manual way so when we think about
continuous integration to continuous
delivery we have to think in terms of
doing everything in an automated way
that means you do a comet that comet
passed through all these different
stages so that means we saw earlier the
manual stage of QA has to convert it to
something automated and the manual stage
of deployment has to be converted into a
contingent into an automated mode so
that means you already have that because
you are already doing the continuous
integration so that's good so if we are
not doing the continuation integration
in the right way then you are not ready
for continuous delivery so what is the
right way of doing the continuous
integration so as I mentioned earlier
when I say the JDK team was having 10
jobs each job took about 2 to 3 hours to
finish and create a path so that is not
continuous integration so how many of
you read the article by Martin Fowler
about continuous integration I call it
as 10 commandments of conveniently
so I would highly recommend to read that
thing so he has put ten points to do the
real continuous integration the one of
the point he mentioned is if your bill
takes more than ten minutes probably
you're not being continued solution so
so that that's what what happened when
JDK team was truly doing the continuous
integration so they're they they tried
to divide their portfolio into so many
different chunks of products and that
causes the job number of jobs thing is
from ten to four hundred fifty okay so
if you if you I mean if you have only
ten those and if it is taking two hours
and if you claim that we are doing
continuous integration that's not
correct away so I know some some company
they're not huge products but they have
thousands of jobs
so before I know about all this
continuous integration and continuous
delivery
I wonder why do they have thousands of
jobs so then I know okay in order to
have truly passed through all these
different stages you need to have more
number of jobs this is one of the reason
Duncan mention about cascading jobs
because cascading jobs are provide a
templating way of creating more number
of jobs and keeping more most of the
properties in in the did top of the
parent I'm not going to talk much about
that that's one interesting thing you
have to look into that okay so so in the
in the continuous integration mode only
we saw that the you know the the build
was continuously builds but the QA was
not connected to us a manual process so
in this in this function you have to
write more functional tests so so
somebody may ask
that means the queue has to go who do we
have to let go of all the QA
yes that's not right in this case the
queue is actually empowered they are
getting more more power so they need to
learn how they need to learn how to
write more code so there's a when we in
a continuous delivery in environment the
the demarcation between the developer
and the QA is reducing very drastically
okay so they need to the queue you need
to learn more about the code base so
that they can write more functional
tests more accepting tests and more into
integration tests this is one of the
important part of continuous delivery
and the third thing is the condenser
that'sthat's a part where we are
deploying into the production so so so
what happens if you want it if you if
you develop something and then you are
going to develop a new feature right so
when you're when you are developing a
new feature so there will be lot of
fluctuation that's correct right so in
that case you may not be doing exactly a
continuous delivery in that case because
we have to account for a future
development which is fluctuating so
probably in that case you have to have
two pipeline I'll be talking about
pipelines later okay so one of the
pipeline may directly lead to the DT
production environment and the other
pipeline may be leading to a queue
deployment environment so when that
pipeline matures then you join the two
pipeline to produce to produce one
undeliverable a pipeline yes
and so yes it's a branch so but as you
know in agile environment you always
develop the feature in the branch so in
that case also just because you are
developing a feature does not mean that
that also should go through manual
operation of deploying and testing so
that also has to go through the same
exact trainee exposure and probably in
the two different pipelines I will talk
about pipeline
in the next slide so once we achieved
this okay so now you will be astonished
to see that number of jobs what you have
okay so the the end result is always you
can deploy it to a package or package
repository so which can be used to buy
other products so this is the pub the
bill PI point and promotion so how many
of you know about promotion so the one
important process in caninus delivery is
promotion so as I mentioned earlier see
when when you are trying to integrate
something okay so it has to pass pass
through different stages first it passed
through the development stage then it is
good to the QA stage and then it goes to
the deployment stage so each stage there
should be a concept of promotion the
promotion can be if all these tests are
passed then straightaway promote to the
next one so promotion does not mean it
has to be always automatic it could be
it could be a memo but the manual need
not be you have to handover the whole
package to somebody and then they have
to use it is like this just look at
something everything is fine you click a
button and then it goes to the next
deployment stage so automation is the
most important thing even though there
is a manual intervention there ok so so
now the question is is this the right
way to do that ok is it do I have to do
it exactly the pipeline it is that so as
I mentioned earlier there is no silver
bullet it is always these are all the
concepts these are all the stages
probably you can go you may skip some of
the stages but you may add different
stages which I missed it all depending
upon you how you want to do that so so
what we did in in three point two to
accommodate these things is as Duncan
mentioned it is the team management
right so in
in a in a continuous integration only
environment so we used to think in terms
of dev team the Newton terms of QA team
and then the ops team so the package
goes from one in one place to another
but when you think in terms of a
continuous delivery all these t3 teams
come together they are not no longer
separate entity they are more or less a
single entity so we want to accommodate
them all in a single Hudson so they have
number of jobs but you still they have
today they want to have their own
resources so that is the reason what why
we introduce the team concept they can
have their own resources but everybody
lives in their thing so how many have
you know devops ok so it denies me a lot
of times we just call an up as a dev up
up just an opt-in is not a dev up so
when these three teams comes together
and they understand the entire product
and then they do when the when the
product goes from the developer to the
herbs through this combination that is
it is truly a developed if otherwise it
is just an OP team so we have the the
Ops doves and you need to come together
in a DevOps team otherwise it's not a
dev of team ok so I am I want to use
Hudson for continuous delivery so what
are the best practices I need to know ok
so just because you started building and
you started putting some QA and started
deploying regularly does it mean that it
is really continuous integration
continuous delivery
can you tell with the confidence that
when a customer a developer commits a
girl commits
checking something can you with what
confidence you can tell that the end
product is a deliver product so you need
to have some kind of a metrics right so
Hudson has a ton of plugin for code
metrics so these code metrics I would
highly recommend to use these code
metrics and constantly watch the code
metrics so here I try to put three
things you can see that the number of
line count there's there's a plug-in for
counting the number of lines so every
time the number of Conch line goes your
unit tests must go higher and higher if
your unit test is not going higher and
higher with your loud line count then
the confidence in your containers
delivery is not good enough so you have
to monitor that it's quite sure that yes
that that's good there are plugins which
you can do like Violation plugins are be
all this code coverage plug-in stats
static analysis plug-in tons of plugins
are there but the point is you keep the
plug-in and they they all produce trends
and you have if you have to watch and
I'm not sure if you can get a
quantitative value which you can use it
for that like for example if you say
that if the number of lines are this
much and your unit test coverage is not
to that limit then you send an email to
your manager say that ok your dev team
is not doing good I don't know probably
we could develop something if you if you
want in the future if you want to do
that so
this that's quite there yeah yeah I
think that's a that's a good good idea
to have such plugins so again the code
coverage right so the code coverage is
giving you an idea about the how many
did the unit test coverage in your code
so again even though your unit tests are
going up and if the coverage is not good
enough in the you know in different
packages and in the class level and yet
we worried about okay here I'm mostly
talking about Java but Patton has tons
of plugins for all different purpose of
code coverage okay so when do you know
when you started developing a product
your product is reaching maturity so at
what point you can tell that my product
is very ready for continuous delivery
right take a close look at this thing I
have put a unit test trend and then you
I have put integration tests right so as
I mentioned earlier so the unit tests
are part of the development and one a
development our continuous integration
okay so every time you develop the code
you develop the unit test accordingly
and your unit test is also growing and
what happened then used you go to the
second stage and you start looking at
now your start writing function test
integration test and performance test
and those things so when your product is
similar development stage those
integration tests will be highly in a
flux because the product is still not
coming in a single single way right so
that it is it's still growing but you
should never see any red in the unit
test if anybody is checking with
I always say that if any developer is
checking in with unit tests failing we
should fire him immediately I would have
fired several times if if that is true
so so we have to think about this
integration test so over the time at
some point the integration tests in the
integration test is now it is passing
and and now we know that the continuous
testing is this is becoming a possible
so at some point when when the body call
next flux of this integration or
functional test is decreasing to almost
to a zero level now we have the
confidence that we are ready to have a
continuous delivery so at this point you
can confidently tell your VP said ok go
ahead and take the product it's not
going to break so ok so how to choose
the plug-ins for practicing CD so I we
we talked about a lot there are hundreds
and hundreds of plug-ins like 350 to 400
plugins are there and now on and on the
Jenkins idea to see even increasing 600
700 800 900 plugins so how are we going
to use the set of plugins for the
continuous delivery ok so we took an
effort to look into all these plugins
and as I mentioned earlier there are
several steps on doing confirm
continuous integration to canniness tell
you so then we put two grouping together
all these plugins and I have created a
slide setup slide and I'm not going to
show it here because it will take a long
time for me to do it here
and and then I wanted to show how we can
go from conditioned addition to
continuous delivery using some example
so I started putting together all these
slides then I saw that like 30 35 sized
slides are there
and I know I cannot cover all those
things here so I put all the things and
I put it on the Eclipse Eclipse thing so
if you want you go there and take a look
at it and if you have any doubt anything
just get back to me I will definitely
answer your questions so we are going to
be here until 7:30 8 o clock so if you
have any doubt and if you want to ask me
more about continious call to the kinase
delivery just talk to me others
take a look at these slides if you want
to see a real time example thank you so
we're not done yet hold on we got a
whole hour here I'm gonna use it Thank
You Winston that's great yeah I'll put
up the links to those the links are on
the slide just off the eclipse little
slash Hudson page in a second or I'll
make the change and commit that up
before we finish I just wanted to do a
little bit of real-world case studies
just to to salt your imagination if you
like with with some numbers just to give
you a feel for what we've done and why
we've done it and what the effect has
that been so I'm gonna look at two two
very quick case studies first of all is
the the Oracle developer cloud service
so I just motion you've been over here
but those of you who've been either in
the demo grounds or down at at Oracle
world will course heard about all of the
cloud offerings that Oracle has for you
and one of those is the developer cloud
service cloud service basically offers
you you know the standard kind of stuff
hosted in the cloud as you expect your
source control management through gates
issue tracking through JIRA Hudson of
course do your builds and then wiki's as
well so this is an infrastructure that
you know you can go and buy or hire or
whatever
getting clouds stuff and then I'll get a
valuation license for and then provide
you with all of your kind of basic
development needs the kind of things we
all need to do so Hudson is an important
part of this so as a developer I can go
in and start to use the Hudson
functionality of the developer cloud
service to do the kind of standard
continuous integration tasks that we do
within Hudson every day take from my
source control system push it into the
Oracle Java cloud service and so on now
that started out using Hudson 3.0 when
we first went out with it
and we've moved quite recently to Hudson
3.2 and remember us telling you about
with 3.2 we made quite a lot of
improvements on the memory management
and this is really a nice proof point of
that so just to give you an idea of what
it was like when we were using Hudson
3.0 we worked on the basis of right
we've got a tenant so that's you you've
gone in if you've bought the service
you're now a tenant of the developed
cloud service and then every project you
create that would essentially have its
own separate Hudson master sprung up
right so you can imagine you've got 20
projects each of those would have their
own master each one of those would have
2 gigabytes of heap allocated so that's
a pretty large chunk of memory right now
when we move to Hudson 3.2 what we were
able to do in fact was to take advantage
of the team concept and take advantage
of the core memory improvements and
unwind that so we now have just a single
Hudson master per tenant so if you're
dealing with you know a large number of
projects no longer if you've got you
know one master per project instead
you've just got one master and in fact
we were able to reduce the heap size
allocation from two gigs of 500 Meg
right so in the old version we still had
to run cleanup scripts and reboot
scripts on the regular basis because of
the way that memory will
leaking and you know things were a
little bit messy with three two we
reduced by kind of twenty fold the
amount of memory being used and overall
can I allocate a lot less resources to
each of those individual tenants so
that's that's a huge huge saving for us
as an infrastructure provider but more
importantly actually provides a more
stable system for the actual users which
is what it's all about so that's just a
very simple case study these slides will
be uploaded so you can look at them at
your leisure that's one example and
we're almost there on time so I'll
quickly onto the next one
the other one is again this is more an
internal swara call and this is our
actual build processes for managing
Oracle Fusion Middleware builds and in
fact it's more than Oracle Fusion
Middleware but that's where we're
concentrating at the moment right so we
use Hudson as part of this
infrastructure and just to describe the
problem as you're well aware Oracle has
in the past acquired one or two
companies and as part of that we've
obviously also acquired whether you like
it or not a whole different variety of
build methodologies scripting source
control systems yada yada yada right
because every single company that you
kind of bring into the fold naturally is
starting from the slightly different
place from where you are and yeah in the
long run we can move everyone onto the
common bug system and so on and so forth
but that doesn't happen overnight and
sometimes it can't happen because
there's legacy integrations and a zone
so life is incredibly complicated in a
development organization of this site
you know stealing literally with
thousands of products and thousands of
modules very very difficult
all of these mixes of source control
system different build methodologies
some scripting different build
infrastructures whole farms or servers
that are already kind of part of our
position you know you can't just tear
those down because they're what they're
what's building the software you're
selling so you know it's it's a very
difficult environment to negotiate in an
effective way and particularly from the
infrastructure
perspective and yes over time you can
consolidate you can clean up you can
bring people onto common stacks but
whatever happens it's heterogeneous
that's just if you like the the
consumption and reporting side but then
of course you've got to start
integrating this stuff together you know
module a from here has to get integrated
and released with module B from here and
we have to do that in a timely manner
otherwise the release can't go out right
and we're not renowned for bringing out
software on particularly regular
schedules right it's quite quite a gap
between safe fusion middleware releases
they don't come out every two weeks so
trying to move towards a much more agile
model is is a challenge purely because
of the amount of integration that has to
take place so the whole point about you
know promoting modules from development
into QA into kind of a release ready
standard the kind of stuff that Winston
was talking about is a very big
challenge right fortunately that there
was common ground and the common ground
is right what we've got a way of
defining a lot of these processes in a
nice common infrastructure called Hudson
and because of this plug-in model it
allows us to integrate all of this this
hodgepodge of different technologies
that different teams are using and
control all of that and bring it all
together in in this one place ok and of
course there's some additional
activities that really matter
when we're dealing with builds of this
scale and I've got the next slide will
tell you a little bit about the actual
scale that we're dealing with here but
we do have to worry about managing
certain things centrally right what
plugins are we actually using remember
are saying about paranoia and and IP
usage and so on so we do have to be very
careful about what plugins are being
used what versions the plugins are being
used so we have to maintain if you like
that that local plugin center somewhere
we have to be able to push those plugins
across to the various hudson servers on
our farms and we have to be able to
track who's using what because if you
think about it with if you're a large
software complex complex software
product
we use the idea of branching our source
code and you know we we throw out a
release and then we maintain a release
for patching that particular release so
there's a separate branch now that lives
forever for that release until we end
support and meanwhile our main line is
all got the cool stuff knew it so I
think you mentioned if actually the idea
we almost have to kind of branch our
jobs as well right so we've got an image
well that was the build process then for
that particular software release and of
course that may you know change over
time so that that adds complexity
dealing with all of that management of
keys I getting all of those this is SSL
keys around managing local tools all of
these things are a big issue as well as
just the core things like right what are
the chef recipes to set up our slaves
and so on right and of course the big
one how can we manage security
fortunately we have a very well-defined
and totally global SSO system with
Oracle's that bit actually was pretty
simple but what is difficult is you know
getting the balance right and allowing
individual development organizations
some of which you know have for various
reasons different policies about who can
see and do what allowing them a degree
of control so basically I could say yeah
it's a complex problem right that's what
we're trying to solve so just give you
some numbers this is kind of as of last
week so this is changing all the time
generally in the upwards direction the
the build processes or the build farm if
you like for building the Fusion
Middleware stuff it's currently running
at around 87 Hudson masters which all
need to be coordinated which I'll talk
about in the session second and those
are generally organized kind of by
departmentally unit if you like right
just again to provide a degree of
siloing
as required and that's running around
1,200 slave processes it that goes up
and down because we dynamically
provision them as as needed right and
the job load is around 25,000 jobs
defined
to coordinate all of this we use a
message bus the message bus for reasons
of Downton Abbey is called Carson and
Carson is basically you know dealing
with integrating all of these Hudson's
together work making them work in
context and it handles around a million
pipe lines if you like every week give
you an idea of scale so a lot of stuff
and what that can do for us if you know
if a node fails if we have a hardware
failure or whatever Carson is in charge
of making sure we can restart that
process where it left off because some
of these pipelines are huge and they're
very long running right if you're doing
say a scalability test but you know that
that test itself may be running for days
you don't a restart that whole process
so Carson's in charge of all of that
kind of overall infrastructure here's a
visualization on it I was very proud of
this my PowerPoint skills put to the
fore but just gonna give you no
information of what he does say it's a
message bus he orchestrates all of these
Hudson's together and importantly
orchestrates these pipelines across
organizations right so we're kicking off
one job in this org for example and then
the result of that is going to be picked
up by maybe another or that's trying to
integrate that the artifacts created by
that job so you know we're not just
dealing with in you know conventional
cascading jobs or job pipelines within a
single Hudson server we're coordinating
that across multiple domains and that's
that's what we can do with this this
additional kind of bus spacer software
so we manage our plugins in an ice
factory repository and then the chef
recipes we use for the executors are all
just managing git and then of course all
of that orchestration happens we have
common infrastructure across the whole
farm for handling things like
configuration of jobs yes we back our
jobs up who doesn't back their jobs up
they're a vital part of our
infrastructure if we lose our Hudson
jobs you know everything grinds to a
halt
it's amazing the number of people who
don't back up it's it's crazy right so
we manage the job configuration storage
identity spinning out the other the
number of resources to spin up executors
as needed storage and of course the the
package storage in artifactory so I hope
that kind of gives you an idea of you
know real world usage at scale and again
because of the changes we've made in
Hudson over these last couple of
releases we've been able to achieve this
you know this kind of volume becomes
feasible ok so what's next we
fortunately have run over time but
doesn't matter because we've got this
room next anyway but at 7 o'clock to
allow you to go and get a beer and come
back we have the birds of session
feather of birds of a feather session
which is being too long a day and we
want to take that opportunity it's kind
of a free-form session to discuss you
know what what should we be doing in 3 3
yeah we described a lot of the stuff
that's going on in our brain there's
been a couple of ideas come out so I'd
love if you can come back to that if you
could bring us a beer that would be
great that and you know let's have an
open discussion in that about what you'd
like to see come out of Hudson in the
future and of course any more questions
you can ask then ok so thanks for
attending and thanks for staying</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>