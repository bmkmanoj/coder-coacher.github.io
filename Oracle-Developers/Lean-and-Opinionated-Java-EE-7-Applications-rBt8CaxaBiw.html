<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Lean and Opinionated Java EE 7 Applications | Coder Coacher - Coaching Coders</title><meta content="Lean and Opinionated Java EE 7 Applications - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Developers/">Oracle Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Lean and Opinionated Java EE 7 Applications</b></h2><h5 class="post__date">2015-06-08</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/rBt8CaxaBiw" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so welcome to lenient opinionated Java
applications why Arlene you will see why
lean in my opinion it's impossible to
simplify them any further
this is lean and why opinionated because
it's my opinion and I had lots lots of
trouble with that so I will show you
actually how I think Java applications
have has to have to be designed and I
would spend a lot of time in coding so
it is actually a coding session so I
want to use a lot of slides because yeah
it's harder to explain things with
slides I am still freelancer or
contractor singleton or whatever I'm
working with Chavez and 1995 and I'm
registered my freelance tasks in 1997 so
I've worked two years in Java and then
became I don't know how it's called
contractor or whatever and my personal
opinion is Java programming language
rocks so not only did Java platform but
a java programming language and what it
means I get the question asked a lot why
we don't use Scala groovy closure or
whatever in our project we'll be more
productive and in at least in my
projects it is not the problem with the
language is the problem with the
architects so what what happens in my
project is like they are creating they
are reading some patterns book books and
they applying whatever they read whether
it makes sense or not to Java EE and you
end up with two percent business logic
and 98 percent bloat so and then the
solution is to move away from Java to
something else and the and the problem
with that is if you if you migrate your
j2e project to Scala groovy or whatever
you probably won't use the same stupid
patterns so you are not comparing you
know
pragmatic Java with pragmatic groovy you
are comparing you know ivory tower
architectures with j2ee
with pragmatic groovy closure or
whatever so in my opinion if we just
implement reasonable applications
we would be very very productive and
then if you just use closures Carla
whatever you will probably be even 5 - /
- 10 percent more productive but
actually then no one kiss anymore okay
this is actually my opinion about Java
and your languages and I said although
ever again is the one of most common
questions what do you think about Scala
what else I guess everything is nice but
it's not the problem for enterprise if
you're building Twitter at Google or I
don't know tell cause systems it's
probably another idea and another
another use case in my projects I don't
think we would be essentially more
productive with something else than Java
okay agreed everyone nice I forgot to
mention if you don't agree with me you
get a t-shirt and and this is a ext
shirt
it's called airborne developer and the
reason for that is I did two three times
a year at Munich Airport a t-shirt a
t-shirt a workshop and actually all
developers are airborne developers this
were the idea for therefore the t-shirt
so I've wrote actually two books two
recent books I actually brought eight
but I think the first six are in Germans
are absolutely unusable for you and but
these are in English and they actually
both are somehow covered in my topic so
and yeah this was the workshop and this
is my last slide because I don't think
you can explain Java EE very well on
slides so what I would like to do is I
will try it it's a little bit kamikaze
project right now to build from scratch
a java is seven application with maven
and explain what I'm doing in my
applications and what they thought what
what the problems I actually are if you
see some syntax errors whatever please
help me I will not use any wizards or
something I hate them so I will quote
everything from scratch ok this was yeah
this is my blog I have a twitter as well
and I'm not on Facebook LinkedIn they
have no time for that right so um
Twitter is okay everything else is time
sync and thank you remember the slide
this is this is my last slide okay so
remember that take a picture we are
allowed to take pictures today so
and now I can call the slides I'm no
more nervous because slides are over so
um first what I always have to do is
kill Java because and now I start and
that is just pragmatic the first thing
huge discussion Eclipse NetBeans
IntelliJ whatever in my opinion in
modern age of enterprise development
your system should be not dependent on
the IDE
there should be no reference in maven
Gradle whatever to the IDE period what
it means any developer should choose
what she he likes it should in should
matter and the discussion is over and in
my project is no more discussion and I
get the you know the arguments back bad
we have to support the developers here
who is what what do we like support us
with what I mean coffee probably right
but but there is no no IDE support I
mean what you would like to do so um so
and just just the next part is if you
need strange plugins or something to
develop your application it's a very bad
sign
so to verify your architecture it should
work you should be able to write hello
world with VI e makes notepad or
something like this and not you know
fire up your generation engine and
create everything and generate lots of
code this times are over
agreed everyone okay nice audience but I
will give the tissue away there are way
too heavy so please ask questions so I
started with maven so the first thing
the next question I get often asked do
you like maven so it depends in
enterprise it's perfect but if you would
try to build with maven native stuff and
all these all these strange stuff I
would never use maven for that
so why maven is appropriate if you are
if you can live with convention if you
can do with the conventions is maven the
best possible thing there is actually
nothing to do if you cannot live with
the conventions use something I would
tend towards Gradle for instance and
it's a little bit bit too low level and
make it a little bit too old I would say
so am so something like Gradle is
reasonable okay
what we like to build I had actually any
idea I forgot it what we can do sessions
sessions sessions management a little
bit boring yeah I could use I have to
use class stitch because I would like to
use Java 7 a glassfish before and
jabba's and Tommy and the others would
support Java is 7 in I think end of year
so then I will run the applications and
what happens then
I expect the Derby database and
GlassFish to start up by the way I have
no plugins installed is just plain
NetBeans the same similar experience you
get with IntelliJ and with Eclipse you
will have to spend a few days looking
for plugins and configuration but it's
fun the first few times is fun after
several years of searching I lost my
patience I would say right so am so the
only problem with that what happens
behind the scenes
NetBeans fire up fired up the maven
archetype archetype generate and what it
is it pulls from XML catalog from
central a bunch of wizards and NetBeans
used to standard wizard to create and
Java is 6 or now Java 7 project the
problem with that is not a problem
actually the good thing is it's correct
the best thing is we can simplify that a
lot and I will do it right now so this
is the poem and the first thing what I
don't like the name here it's just
absolutely confusing that if you if you
name it differently to the artifact ID I
searched forever this is in my
enterprise project like they have very
nice names but they absolutely don't
match to the artifact IDs so I always go
to source code so the first you have to
delete this one ok so um so now we are a
little bit here by the way how how big
it is it this is now our 70 lines of
code for the whole maven project so now
this one is not needed so maven compiler
plug-in is nice but there is another
hack this is interesting what this does
is this is a lots of XML just
to say that we don't need an XML so um
so what it actually what it actually
says is web.xml is optional say okay
nice and this is actually a little bit
more interesting what it does it prefers
Java is seven classes over JDK classes
because of GSR 250 so the homework is to
search for GSR 250 what it is JDK
shipped with annotations like post
construct we destroy at the resource and
so forth and they are older than
expected in Java 7 the good news is you
only need this annotations for stranger
things like working with low-level JDBC
you don't need the plug-in a lot so I
always delete it and it works in my case
so let's delete this so then of course
no empty plugins a little bit dot so
it's also deleted and now we have the
only thing which is reasonable and this
our three properties which are always
used and they they replace the plugins
the first one says compiler source one
seven target and failed on missing false
so agreed
and we could delete delete' built but
what I like to do there is a tag called
final name and I always said it
the problem with maven is if you don't
do do this work will end up with the
name version something 1 or snapshot and
you will end it will end up in the
context early if you've write some
system test for rest application so
forth you will have to adjust them so
final name you could use the D variable
or just say session management and
actually this is what I start with all
my Java 6 and Java seven projects type
starting like that now super from
nothing it is very important if you
start with a huge huge poem
no no usual developer will accept that
right if you if you if you start lean
and then add more stuff so for me
pom.xml is like java code it has to
evolve and you have to maintain it like
a java code you won't believe how poem
looks looks in some Java projects so in
one project we had open EJB GlassFish
tomcat jetty as plugins and i asked them
why you are doing this there were no one
in there in the project who knew why the
plugins are there and there's like two
K's lines of code of maven and they
asked me to help them like ok I can only
tell you we don't need us right
so umm ok oh no super poor nothing
started with that and then question
every plug in everything so mate and
this is actually how really 80% of my
project guy looking like of course I
need J you need hem crest and stuff like
that but this is actually usual plugins
yeah but I wouldn't create for them a
super pom and take with me I think if
you start with this way and developer
looks at the pump you will immediately
find actually what happens behind the
scenes no magic no magic development
agreed perfect question
and now for you for weeks
I'm a consultant and at least in
European contract is like I have to
provide my services at the common how
it's called common level of technology
how it's called there's a saying like I
have to provide my services for the
common level of wisdom or whatever and
so what I do I explain them what they
are doing is not what I was supposed to
do and then I attempt three times to to
improve the world if it doesn't work I
can go with 2k pom I'm a consultant I
will earn more money that don't strange
things but I don't have to I try to
explain it to a customer and I've often
hired if something goes bad task forces
and usually I can do whatever I want it
has to work so then I delete everything
of course but if I but if I don't have
the chance I try to explain and I mean
the ideas pom.xml you should treat
pom.xml
as java code this is the basic idea you
get a t-shirt yeah because if you don't
remove the version from final name and
it don't new don't use any any vendor
extensions like GlassFish web or JBoss
web it will create war with the name
session management - one Oh snapshot if
you deploy it to JBoss GlassFish or Tom
Tommy you will end up with the context
or e session management while one Oh
snapshot and then you have the problem
with testing because if you would like
to write for instant arrest client you
will adjust your tests I don't think so
so you have content iam on Jenkins you
have probably something like a branch or
it should be obviously and by the way
but good point what you can do with
maven I don't do it right now because it
is a little bit of topic but on that
note what you can easily do create and
the rest service with path version and
point the service to prom properties
which comes with your project and so you
will never forget in which version the
application is delivered this will
you have to do okay nope and it sucks
Oh perfect we said no and then you did
it's okay like no is I get what they did
they're perfect so um yeah you will have
to have some at some point in time
multimodal projects in maven but I
wouldn't start with that we are not in
waterfall right so we start with one we
procreate the first use case then we
create a test project then we have two
projects and then we get multi module I
would never do this because it applies
that the web and the business logic is
separated it runs into different JVMs
one pattern I learned don't distribute
it's the most important pattern don't do
it so I'm two points all my new projects
since 2009 are Wars
I don't create years anymore there are
some specific cases for years but there
are no more years that's that ii think
what i this opinion it is in my opinion
monolithic is good somehow developers
tend to build 500 modules for hello
world applications and I wouldn't like
to create us now because we have no time
for that so what I really like to do is
the following
everything is monolithic until it
becomes too big then you create the
second monolith and they create via rest
in Java 7 no binary coupling playing
with interfaces modules modules and
stuff like that you you you won't be
able to manage the binary compatibility
between the modules anyway so give it up
so we have worse which are monolithic
and this worse if they have to
communicate the communicate via rest you
could earn more money with soap but who
likes to use technology from 1945
Paden a very good question
why not remotely chibis this because
remotely chibis rely on IOP on korva and
how its implemented usually you will
have to end up in the other war to use
the application server client from the
first one it is really hard to manage so
I would say remote eg bees are dead so
to to shorten the the answer so our
remote in JB's you shouldn't I
there's no reason anymore to use remote
EG bees really if you would like to
there's one probably one similar issue
let's say you have an old legacy system
and this legacy system has to be to
expose let's say to swing core java
vixens whatever so instead of using
remote EG bees i would rather use
something like hessian this is a this is
like a remoting via HTTP and and the
reason for that is often we don't have
to time to rethink our business layer
and create nice restful web services
restful is not HTTP restless an idea
that ant addressing objects ok very good
you you don't like you shouldn't like
straight transactions and it's a is very
problematic and we don't have time to
discuss this but a problem with if you
really like to start with x8
transactions look at it's a exception
and look at the different exceptions IDs
like my basis heuristic heuristic mix
for instance and and think how to how to
cover this these exceptions so for soap
you could use debris s transactions you
could we should test what that actually
works and i would say an XA we get only
trouble with x i so far and the problem
were not the our code the code we're
always exaggerator's from different
vendors this is my experience with XA
so try to avoid XA how you could avoid
avoid XA changing the business logic
unfortunately so you have to provide
compensative transactions but business
transaction not undo a business undo ok
this is the only way to go
Wow yes I would like to heck something
so butter
okay our ears if you lose ear so you
have more flexibility about class
loading
you could also for instance deploy at JC
a connector with the ear it's not
possible with war but this is very
uncommon case I would say agreed okay
then
at least it's the next stages um I'm
from Europe so Germany and it seems like
in Lille I never was in USA I never saw
a newest project but in our cases it
seems like the bigger the company the
less interested developers actually are
to implement the business logic okay so
like they start with frameworks and
everything and this is a huge problem so
I get hired really no kidding and I got
several times two weeks time to set up
the project this is what I did right now
this is what I do I do I mean two weeks
is our even ever write one line a day it
wouldn't be you know two weeks so um and
there is no way to convince the customer
to start the problem then what we can do
then ask could you build us our small
framework we need logging configuration
you know there are the classics and this
is the beginning of the end
no frameworks in Java is six and Java 7
frameworks are a counterproductive we
everything is on the server we don't
need any frameworks per default so start
from day one with implementation of the
business logic and meetings are
forbidden so terrorism also in Europe
there is like the the idea that meeting
is cheaper than hacking right and I
don't get it so it is a lot better to
start with something which is suboptimal
throw it away and start over I would I
would I see in projects really I one
project I was not allowed to heck but
they say me if I start to hacking I will
I will I will write a code and then it's
over we cannot discuss anymore as I know
it's not not doesn't work that way it's
not like it is a locked we can change
that no no no and they discuss for
several months without any business
outcome there was actually no result ok
so minimize meetings built constantly
business logic yes
what I mean most of the consultants come
with super pumps this was my observation
the established project with the super
prom in the super prom prom consists
comprises everything they'd ever built
and if you inherit from the super palm
you get everything they ever built this
is the first problem the next problem
developers like frameworks and we have a
German magazine called Java magazine
it's a similar to Oracle without EE and
asked the Vella press why why are doing
that and the answer was we read an
article about this to seem cool and now
we're doing this so article driven
design really so there is no reason and
for my phone at the next point is often
the developers do not look at Java EE
and JDK they look instead and Apache
Commons whatever and this is the problem
so the my idea is look at JDK first it's
amazing what's there then look at Java
six amazing what's there and the less we
are dependent on the better it is
so what if in enterprise means the
application has to be maintained over at
say five years okay so if it's the case
my argument is any external dependency
is forbidden or we make it buildable in
on our CI if you like to use Apache
Commons we it has to build on our
continuous integration server at one why
because Apache Commerce or whatever can
disappear one day this version and then
it's over so then we have to maintain
this dependency by ourselves and this is
happen a lot for instance all the exes
versions there were no more and web
available night neither in archives dot
org I didn't found them what he had to
do is to decompile the the libraries and
fix the error and recompile damage which
is strange right so if you at all
dependencies are forbidden this is my
opinion if you like and a dependency you
have to justify that and sometimes at
this for instance
security right encryption I would never
build my own encryption algorithm so
sometimes they are about I would never
use infrastructure like you know I would
always prepare for instance prefer Java
et logging or overlock for Jake the
default because it comes with JDK
if it doesn't work
we'll look at log4j no no discussion is
just reasonable I would say agreed so
and what do we have done so I I am I
satisfied my customer because if you
don't have any deep external
dependencies we are not dependent on
anything which is good thing for for the
lifetime of the project this would be
the optimal case and the next word I
really like is the war is extremely
small if the war is small deployment is
fast and fast deployment means
productivity and this is the most
important thing so we discuss the
productivity so what it actually what it
actually means for me at the beginning
of the project that Jane kids should run
like hell very very fast what happens we
do nothing you get the worst possible
machine for Jenkins so you have
escalated you need to know 100 cores and
100 gigabyte of RAM or whatever SSDs
array or whatever because fast Jenkins
productivity and you can show the
business case to any management everyone
will understand that waiting 10 minutes
to something to build is waste of time I
get often argument you could yeah but
you could build multiple project at the
same time yeah and share and you can
start this and sooner this and then you
you are okay then would mean that for
its an author which writes a novel could
write five books at the same time
because his pen is too slow or something
right so that's just crazy talk so it
doesn't work that way
okay so um okay first assumption exxon
dependency forbidden in my project if
you like dependency we have a vicky
Rexel excel you have to say okay i would
like to have the commons and ice I've
saved a time or I didn't found it or
what is the reason using this dependency
very important otherwise you will end up
with everything okay
everyone agreed we had don't we need a
German magazines right so so um so the
next point is business logic first so
actually I would say you don't know
whether you still remember rational
unified process and it's rational
unified process was not very pragmatic
except at the beginning of this this and
there was on vision statement which is
always lacking in projects this is one
pager with the vision why we are
building the project in most of my
enterprise
developer don't know why we are building
the software is no kidding
they get thousands of use cases just
click the button and cancel and or
whatever and no one knows what actually
is the reason to build a system it is a
it's a very important to have the vision
statement and the next part which is
also great from rational unified process
key entities or essential entities what
it means is every system we know
consists of core concepts and the core
concepts are like customer or order or
something like this why because I create
from the core concepts components so
what it means my java is seven system
always looks the same it means in in in
case of of the structure and in this
case it would look like probably come
java one or just one probably java is
trademark or something so one business
so business layer or tier i always
surprise this and then comes the
component and the component would be
sessions and why sessions or session
because it is the essential entity of
our system you would like to manage
sessions or speakers whatever so agreed
and then there is another pattern called
entity control boundary a very old one i
reuse the names from the pet and why to
avoid meetings before the pattern i
invented my own our own names and you
always discuss why this and why this
will notice if you find a some some
something which is standard there's no
discussion anymore you can point to the
standard and it's over one meeting less
is always good right so boundary and
session something management is a very
very bad bad idea but I have no other
idea right now so I will call it
management or provider or something but
but not manager otherwise you end up
everything is a manager session
management you have no just managers
right so um so boundary manager so come
one business here sessions component
nama a name boundary is the Easter layer
on session provider is the class what's
important here so what we have
how looks like we have actually two
tears so we have presentation we have
business two packages and within the
business package I have business
component so they couldn't look like
this
in UML but this is just a regular Java
package and the Java package was
sessions and the session has to be
something what the business department
or domain expert whoever product
management egg actually understands very
very important so then we get probably
another component speakers and another
component I don't know what hotel
management hotel or management or
whatever the important point is we we
should focus on business not on
technology what I see in my project
instead like I call it always
bureaucratic driven design is like these
are exceptions these are interfaces this
are beans these are details videos who
cares
because in three years if you have to if
we have a request for extension or we
have to fix something
who you the custom will say extend the
session with something else
attachment whatever so where to search I
can only search in the full text search
in the whole project but if we
concentrate on the essential entities I
will open the business component session
and everything which is session related
is there and this is nothing new
it's just object-oriented programming
but for some reason it's forgotten in
Java okay agreed so and the nice story
about ACB there are established icons
you can use to model they look like this
this is the boundary this is the entity
and this is the control okay agreed this
is an EJB
and yeah this I need you B so this is
how it should be looks like what we are
in Java 7 so bin 6 ml is optional but I
would like to create one because I would
like to not just use annotated object
but all what it means now I can inject
pojos in Java 6 you don't need it this
is a feature of Java 7 so you can say
just annotated object or not so this is
actually a new feature so session
provider and let's say the session
provider gives us a string string get
sessions and this are Java so and so
what we need also is restful web
services in all my project we have
restful web services and the argument is
very simple even let's say a JSF is
great but if you're thinking about
responsive design or integration of
native Android or iOS devices you will
end up to have something which is
portable and this is nothing more
portable than the rest so we always have
restful web services regardless whether
we are using GSM or not so in JSF is
optional but I always use JSF start with
JSF because in my eyes is the simplest
possible technology for simple
applications ok so then the name is
sessions
resource so and what I need right now is
the configuration for website for for
restful web service and I call it always
rest configuration and it's just a class
and what it can do if you like you can
put the version number here and this is
a good idea if you have if you can if it
can influence the clients and the server
at the same time in internet scale
project or web scale project forget
about this you should never have the
version number in the Ori because if you
upgrade you will break all the clients
so it so I would say in our case just to
show we can call it v1 I'm assuming an
enterprise application and it is
released at the same time
is in the server this is actually my
assumption right now agreed so and now
you have to know that it extends from
application and this is the application
now we have restful web services almost
so we have to say the path is sessions
and this can be a stateless session bean
so the transactions are started a little
bit earlier and we could actually return
the messages get oh then we get the
session provider and we inject it with
that inject and saying return SP dot get
session so this actually really ward
architecture what it means I would never
put restful annotations on that why
because what you will end up here you
will have two verticals responses head
as eat X and all that stuff and at some
point of time your business logic will
be dependent on the rest of Web Services
which is very very bad idea
so the idea is that provider the
boundary is never dependent on a
protocol and if you like if you you if
you have to use soap for some unknown
reasons you could create here sessions
soap adapter which accesses the same
boundary so regardless how simple the
project is always have additional
resource classes agreed yes or not yeah
okay perfect thank you session
management probably v1 sessions
it actually works so it's a very small
very simple Java a7 application so now
the next one we actually would like to
have a session and the session is an
entity one session and this is an entity
or let's start easy let's say at least
that the session has a name
and it's Jax be bound this works in Java
is six and Java is 7 so nothing new here
so and probably I would like to have two
constructors so this would be enough so
what I can do right now is I could
return here these sessions or let's skip
the bean and just try that one session
and return new one session and the name
is of course Duke so so we have XML and
and XML and we should also get Jason is
Jason is not specified but is working
well with most application service
application Jason Jason okay and so the
next tag is if you have Java clients
which are accessing the backend there
are two nice classes message body reader
and message body writer if you extend
from these classes you can you can put
any civilization protocol you like I
described actually the green book there
as the examples are also out there there
if we just download them I call that
Jason's realized or something or su
Eliza and what you could also do the
fastest utilization protocol I'm aware
of is called cry out so
so so what it means through content
negotiation iOS clients gets Jason
browser gets XML because it prefers XML
and all Java clients could get what
native Java objects the overhead is are
two lines of HTTP agreed so if you have
Java client still use rest yeah yes yes
this is the case from here so I just
wanted to show you how it looks like
instead of discussing an you see
shortened meetings code is nicer so now
what we have we have boundary entity but
we don't have the control layer so and
the control layer is in the first
iterations absolutely forbidden in my my
projects why because if you if you make
the control layer mandatory it would be
empty and for 80% of all use cases it
will also remain empty so what we do
instead is there is a great Swiss
open-source tool called
sonar source this is just a maven plugin
this is very very very fast to to
install and what it does there is one
similar similar framework is crept for J
actually crap for J is exactly what I
need but so now source comes with lots
more stuff and this is the relation
between how it's called how it's called
complexity cyclic know cyclic or
cyclomatic complexity and code coverage
and you think about this this is
actually a perfect for measurement of
mayn't maintainability of the system so
it means in our case complex classes
have to be tested simple classes
shouldn't be tested if someone has time
to test getters and setters something is
wrong with the application right so I
mean they have too much time to I don't
know that there's code coverage driven
design I would say so what happens then
the boundary will grow and grow and grow
and it will appear in crap for J or in
so now we identifies to complex then
divide and conquer we introduce controls
after it grew
for some time if you begin with
decomposition from day one it you end up
with lots of classes with no
responsibilities
agreed yes No
so but how it would look like let's say
we have here a class this is a control
and we could say I don't know archiver
it archives all these sessions or
whatever so this is just a POJO with one
method archived and I can just inject it
to the beam so to this beam this archive
so you see two things no interfaces and
no private so interfaces in my projects
opinionated talk are forbidden so why
are they prefer bidden the following
observation follow interfaces in
enterprise projects in the past had no
function architect thought about
extensibility whatever and first
developers to build interfaces for
everything and the developers what I had
to do they had to implement the
interface and they had became they did
they got what a name clash and then we
got strange patterns like you know
archiver archiver imple or the other ok
this is bad
so we can start with I I arc IVA and
archiver so what it means in my projects
if you cannot name the class properly
interfaces are forbidden if you forbid
interfaces there are some cases which
cannot be implemented this is strategy
pattern in their view cases you will end
up with the problem that you have
actually two implementations in one
interface when I tell you in most
enterprise project this is absolute
exception from the rule most interfaces
there is one-to-one relation for the
lifecycle of the projects so what I do
meanwhile as a research in subversion
how often serves some implementations
change I can tell you at least in Europe
they never changed so it means it's a
whole assumption from the architect that
you are extensible you can throw it away
we are extensible but it's like you know
having car with six wheels because at
one day one could break so you will
drive one hundred thousand miles with
six will and Andy and forget it okay
yeah exactly yeah I wanted to Hecht is
so what why it's not private because the
tests often reside in the same package
as the class so I can access directly
all private fields without any magic
Makita will be also able to inject
private fields but this is more magic
anders so this is the simplest possible
thing what the r8 exercises
you broke the encapsulation it's like
actually not because in Java 6 we have
proxies and you won't manage to access a
private fields or package private or
whatever it's impossible
so say ok what I see instead really they
make private fields and create public
getters and setters which really breaks
the encapsulation because it is probably
get as a setters expose transactional
way even remote way all the depends to
the outside but done the area Tech is
happy so what did she learn architects
should be somehow avoided right so in
one project in one project what we did
we had terrible our architect we
promoted him to management we say ok
this really there's no kidding and we we
stay friends but we will orders of
magnitude more productive so or if you
have an architect the itec should code
with us
so coding our high tech the perfect
powerpoint architect are a little bit
problematic I would say often I would
say something else but now a little bit
problematic yeah questions regarding
this so we have boundary on demand you
can inject controls this is the basic
architecture all packages business
components have to be named after key
abstractions and there is there should
be no component with technical name
exception is a classic so there is for
some reasons most of the project is and
package exception all exception are
there and what absolutely forbidden in
my in my projects are packages modules
with the name like Commons
infrastructure domain based framework
whatever everything good which sounds
nice but doesn't mean anything
so why util yeah you to list a classic
and why if you allow this it will become
a kitchen sink in shortest amount of
time
you will find everything in this package
look just a Java YouTube what is there
you would never there are locks
collections dates everything is there
right ok everything which sounds nice
and it's actually generic is absolutely
forbidden
agreed very good so now you get a
t-shirt or shoe for this so but I put
the util classes there is no YouTube
class
there is a class which does string
concatenation or class which is
responsible for logging or class which
is responsible for monitoring so if you
have end out if you start with one class
I would create a package which sounds
terrible Thresh junk whatever and put
the class first why terrible because you
are you you're looking at this and the
next iteration you will try to remove
that if it grows you will find
responsibilities and then I will create
a package with the name logging
monitoring configuration whatever but
never util okay because util is really
dangerous
open your util projects you will find
everything there and 80% of there's dead
it's no more used okay so oh I'm
experimenting with that it depends on
projects in my cases on the business
level so I have I would have here in the
business level a package with the name
logging it's not as it's not the best
solution but it's pragmatic because the
logging is actually no an Okie
abstraction but what you can do right we
need it somewhere so other questions yes
you shouldn't have base classes in Java
6 it's very uncommon to have that really
base classes are more likely an entity
level where you have some behavior with
but on each a B level is very unlikely
at CDL CDI level as well but if you need
the best base class I will put it at
same level like rest configuration the
rest configuration is on the business
level so it belongs to all business
components but if the the adults if for
instance the base class is responsible
for audits I will put in package audits
so ok it's just think like the business
department do because in my eyes if we
manage to have one-to-one relation
between the requirements in the code is
maintainable don't obfuscate that and
whether we use closure or whatever that
doesn't matter actually right
it doesn't matter what would you
language we are using so what I found
out in my recent projects I what you
also can do you could expose adjacent
object instead of one session so if you
are working heavily with html5 and say
there will be no Java clients but you
will get other kinds as well you can
reach jar by 7 you can just expose
straight JSON objects and there is
another interesting discussion is should
we have type save interfaces or weak
interfaces boundaries to the outside
world and it really depends on the use
case for smaller enterprise project
having a types of interfaces is a good
thing for web scale project is a
terrible thing because on web scale
nothing is type so if you cannot just
break the clients because they provide
you a one more attribute right so the
bigger your application gets the more
you have to test and the more you have
to give up the type safeness of your of
your interface otherwise you will lose
customers clans or whatever in
enterprise spaces a good idea of types
of interfaces in web scale not always
agreed there's like how the internet is
are saying the internet is like we
expect everything in provide quality
there is like term power you know you
know the term it's like tcp/ip how the
internet works is like we accept fresh
and deliver quality or something like
this so this is actually how how restful
web services and web scale should work
so um so we can do this so we can create
a Jason instead of this and this looks
like create object builder add name and
Duke
built and this is new JSON object so now
we have just Jason but if you need just
Jason go for that okay you have complete
control at serialization deceleration of
Jason and J this is the new JSON API so
it actually should work let's say named
Jason so we see the difference
yeah named Jason you see so and the
other way around because of I could
create a post method and accept Jason it
will just work questions regarding this
so what do you have very maven an
application which is actually reasonable
this actually really architecture from
my commercial project if nothing else I
created with you as always
okay we have still 10 minutes so what's
the problem so so a session provider so
I could inject the entity manager
directly here the entity manager so what
it means is the next fight with the
architect we need data access objects
and details whatever their problem is
that actually the entity manager
implements something like DRO
- oh it's called domain store it's an
old pattern from Sun Microsystems and if
you look at the domain store pattern
domain store j2e patterns you will you
see there's a persistence manager
persistence manager factory query
transactions if you look at this you
will recognize it is actually the entity
manager if you rename persistence
manager to entity manager entity manager
Factory and query and there is no
transition but entity transaction it is
the entity manager so and and entity
manager is not about sequel databases
there are meanwhile Mongo driver
Cassandra driver datanucleus axle driver
for entity manager so what the entity
manager abstracts from
is entitymanager abstracts from
hibernate open JPA and eclipse link it
abstracts from different databases what
you would like to abstract anymore so
there's nothing else to abstract if you
manage to abstract the entity manager
will end up with I don't know what so
empty entity manager and this is what
usually happens in my project like did
they build that Dowell data access
object and the data access object is
basically empty and they renamed the
method a little bit because you'll be
stupid to call it merge they named it
safe really no kidding it is funny but
it's really how it is right so what is
the problem with my approach injecting
entity manager directly to boundary what
is the problem the problem is you will
end up properly properly with duplicate
queries right but why you make a
difference between query on Java code it
should be no difference avoid duplicates
what it means if you will find out that
you have two queries in two boundaries
which are the same then put it two in
control and don't name the control Dao
data access object doesn't mean anything
and it actually breaks the encapsulation
no one cares whether the custom is
coming from the database or restful web
service or whatever call it then I don't
know session finder but not session find
a dowel and now you encapsulated the
entity manager the question is how to
find applicate so now source a very good
double deprecated detection okay so in
my eyes the entity manager is nothing
specific it's just it's just a thing
which can be considered like a Java
class so there is no reason to rep
entity managers over over again the
problem is you cannot explain it to
architects so what I do often to reduce
meetings no kidding I built a generic
Dowell and if I see in my project there
is no way to go without those I
introduced proactively my down and after
view iterations we get other problems in
dollars right and then I delete silently
my Dao and everyone is happy this is a
social egg if you see something creates
get that says whatever the itec is
telling you yeah and then if you get
real business problems delete everything
silently and no one will ask you for so
at the beginning is like at the
beginning
there is a law is called Parkinson law
of triviality it was like there was a
build a power plant was built and the
heart heart decisions were made
immediately and the trivial decision God
the more discussed that like you know
the color of the carpet was like a three
months decision because everyone could
could contribute and the same is this is
in such a project right so stop talking
just implement things so data transfer
objects so data transfer object are
basically forbidden why we have restful
web services
what restful web service does it Maps
Java objects to json xml whatever so we
have already one layer of conversion
abstraction whatever introducing another
layer of abstraction doesn't make things
anybody better it's just terrible and
details in my projects are only allowed
in case they look substantially
different than the entities what I see
just incredible in in in j2ee entity and
DTO identical for each pair one mapper
which invokes get us here and set us
there right and they get and the mapper
is never tested because it's boring to
test that and the itec say now we have
decoupling so then you can look at
subversion or get or whatever what I
find out it never changes so on each on
each feature requests each feature
requests effects or layers so the
developers have to change the database
the entity the DTO another it do restful
of service and I would say encapsulation
is only good if it's encapsulate
something in if in each feature request
you have to you have to you have to
change all the layers there is no accep
solution delete the layers agreed so DT
always valid if it looks up sensual
different to two entities and this
eliminate in my projects frameworks like
dozers those are model map error
actually no needed because they don't
work anymore
those are Brooks only well in case both
hierarchies are identical and yeah so if
I see dozer and I ask the developers do
you like those who say yes perfect
there is something wrong with the
architecture
very good almost forgot to build so in
in web layer
I would I would get new package
presentation and I don't even attempt to
create components at the first time in
the in the web layer because it is hard
to find there's actually n2m relation
between web components and business
components it is not like you have one
silo from the beginning to the end there
is there is a n2m relation I call the
baking beans in web the same as the page
and this would be a model model is named
and request scoped and this would return
the sessions string string get the
session return something so I could
inject here the EJB or I will have to
inject the entropy session provider SP
inject and say here as petered get
session and you see already it is have
to a nice to have the resource layer
because the resource layer returns JSON
object and I would actually would like
to use the real objects here right and
the question is I would expose domain
object here if it says what do I need
why too abstract if if if you need
something else then I will introduce the
Tio's data transfer object but why right
okay this and the JSF page and the JSF
page just accesses the backing beam
directly so what it means what I never
would like to do is to distribute GSF
and eg B's artificially everything has
to remain in one war shared nothing
architecture don't distribute
so um start page you see Java it comes
from there from there Java and by the
way yeah four minutes to go
this is a real-world architecture we
start with and then you get more and
more components and the question is okay
but if you end up with monolithic Wars
they don't scale anymore and the
observations the following a thing yeah
who said something like a team should
survive with a pizza a day so did what
it means it has to be small I don't
believe in small project if you really
have to have a huge project the actually
the actual each task from from from for
the architect is to split up the
projects in smaller independent projects
so what what you should do is to have I
don't know try three or one to five
developers working on one work and the
other teams are working different words
and the words communicated via rest and
the are heat and the transactions are
usually not that such an issue because
they are very coarse-grained calls it's
not like you're invoking methods it's
like you are starting I don't know you
are archiving something is a higher
level coarse grain coarse grained
interface so we have still three minutes
to go any questions left yes it's a very
good point if you if you like to have
some modularity introduce jars jar
projects and the next heck is the
problem is some sometimes you would like
to reuse the contents of the world right
AB is not possible because word is
checked into MTM to repo but there is no
class bus with a work there is a hack
with the word plugin it's called source
attachment if you do this in mavin mavin
will create a war and a jar so you can
reuse context from the war as well I
blocked about that if you search that
you will find source code this is
something similar this is this I think
there's another possibility another
question was who asked
a transaction presentation of what a
lazy initialization exception and now I
got a and thought about transactions or
laser transaction exceptions you don't
get the exceptions because they're the
egb is stateless and status means the
transaction is committed and if you
would if you have problems with graph
there is in Java e7 an entity graph so
what you can do we can pass a string and
with passing the string it will load all
the lazy objects for you in Java is six
I I misused for that J X path JX path is
like X pass for Java so you can pass the
entity pass a string and I will reload
whatever you need or it's called fetch
joins it's a part of T of the
specification to do this and this
actually good point whereas sometimes
see architects are introducing details
to avoid lazy initialization but what
they actually would like the developer
invokes all the Gators in the
transaction so I would rather say invoke
the Gators and no don't create another
object I mean it's just crazy right okay
agreed yeah I always avoid what I don't
like that my project is dependent on
GlassFish Evers whatever it's a very
good thing to avoid proprietary features
always it was always we're always
trouble in the past
dependent your ID is who I was migration
project from visual age to something
else migration from ba to something else
and the problem with proprietary
features is not that you will migrate
from glass which let's say to JBoss at
one day the proprietary feature can be
can disappear this is the problem what
you have there I was in our talk is like
some misc will disappear if they create
jigsaw then you are does the same can
happen in Java actually in happened in
one be a project they use file services
was like you could write persistent
files and it disappeared in BA eight or
something
we just went away so this should be
never dependent on that so what I
sometimes use for products are Killian
whose profile and we test against
different application servers
I know you I mean oh this is my way of
this is described in the green book for
me by the way today I enrolled in
matchbook something from Amazon if you
buy the printing copy you get Kindle for
free and if you have a Kindle is you can
lend it for free absolutely free so if
you have Kindle you get it for free if
you don't like Kindle you can buy it as
print and get it for free for Kindle
anyway so happen today
yeah or lombok for in laser great for
enterprise project too much magic if you
have a maven you have to be careful when
it generates and when it compiles is a
little bit too much magic for Java so I
like the idea I don't like it to use it
in my my Java projects but really when
you would be in my project it looks like
this there is nothing more to reduce we
don't have to get a set as nothing so
it's just pure business logic and a good
Java 7 in Java 6 project is 2 percent
plumbing and 98 percent business logic
so if you see what I have little bit
afraid of the new wave of Java 7
development is like the fancy constant
who will come down and write an O 500
annotation on a class it's not needed so
B be a think simple good question other
questions this oh yeah I was if it and
upload in somewhere and then tweet the
link then you click on the link and you
get the zip agreed perfect other
questions sorry it was not very
sophisticated the last e I hacked
everything from scratch with all the
Java 6 features this year I would show
you more talk about more best practices
or how I think and say you cannot
implement in out 2000 Java 7 features
for that see you on Friday
and no no Friday tomorrow it's another
session about stress testing application
another strange thing unit test
integration tests are great and no one
tests multi-threaded by the customer
this is actually good for me because
of taskforces but at one day they should
learn that they should do something
about this yeah no you can do this since
2009
it's Java 6 and with Java is 5 would be
very very similar
so actually what I show you right now is
compatible with absolutely Java 6 and
you could with Java 5 so 2006 you would
end up having to 2 more interfaces so
there's no excuse
it is 7 years old architecture really
yeah if it works and you are happy with
that not you should be reason to do this
one reason could be in addition you will
need some other types of clients who
which don't understand IOP then I will
refactor that the problem with migrating
legacy stuff to new stuff is the lack of
tests migration of the problem but how
to know whether it actually works this
was yeah so you write tests first for
the old stuff then migrate incrementally
to the new stuff and tests all the time
this is what I can tell you in this is
that writing the tests is actually a
huge portion of the effort migration is
actually fun really because what you
should know j2e still runs without any
modifications in java 6 containers so
you can make it running first and then
remove all the all the craft from yeah
no scalability there is a cap theorem
see ap what it basically means if you
distribute your systems you can as a
scale or be consistent never both so I
think the best way to scale is to rely
on unlock locality principle so it means
we have one war which is local and one
transaction runs just in one process and
if you have load balancer at front of
your wars with session affinity if you
need more power you will you could start
more Wars this is never an issue in my
project because the problem we have not
was application server we have always
the problem with the database so we can
fire up you know five hundred instances
and the database dies anyway so usually
the enterprise applications have always
problem with database performance I
never saw actually an enterprise
application which are the problem with
the applications of a performance did
you ever encounter problems with the
performance of application server
without DDD database case here okay then
you have then you're doing actually
something like algorithmics in most
applications is just a database browser
or host browser or whatever so I mean if
you distribute things it won't work
proof of concept container managed
persistence remote means never worked
the idea was scalability but to never
work
huh no you have up front the up the load
balancer communicates with Apache Apache
communicates is no JK with that so you
have already three zones no after no
other questions you don't get any
teacher there you would have to give the
t-shirt back here no so uh other
questions no then see you tomorrow
I hope it was okay thank you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>