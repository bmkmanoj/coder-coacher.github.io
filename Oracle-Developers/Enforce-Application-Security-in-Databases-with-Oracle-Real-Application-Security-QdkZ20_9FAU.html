<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Enforce Application Security in Databases with Oracle Real Application Security | Coder Coacher - Coaching Coders</title><meta content="Enforce Application Security in Databases with Oracle Real Application Security - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Developers/">Oracle Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Enforce Application Security in Databases with Oracle Real Application Security</b></h2><h5 class="post__date">2016-09-22</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/QdkZ20_9FAU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">good afternoon welcome to enforcing
application security and databases with
the real application of security I'm
Alan Williams I'm from database security
team so having presented in Java when
actually I was in Java one and date
myself foot 20 no maybe 20 years ago
when they gave out those Java rings I
still have that Java ring at home you
could order a coffee using the Java ring
if I remember so but we want to talk
about how we can help make your data
that you handle in your application more
secure using some features in the
database so there's just a little bit we
talked about future courses or things
that we have on this presentation is
available today so but the safe harbors
same applies for those few updates that
are coming in 12 - all right so we can
talk about us
some common ways that applications
secure data today and talk about what
exactly I'm talking about with row and
column mobile access then we'll talk
about what Oracle is offered in the
areas of what we call data-driven
security over the last past 20 years or
so and then specifically focus on Raths
real applications security this was
delivered in database 12c it's a latest
offering in this area data-driven
security and we'll take a look at the
the admin a GUI admin tool that we have
to manage these policies in the database
and then talk about some of the things
that's coming coming up in 12 - all
right a very simplified application
architecture user logs in gets
authenticated by the application the
application gets the user context from
the identity management service and then
on behalf of the user runs SQL
statements into the database either
inserting updating or acquiring
information from the database
that that connection
from the application server to the
database the common user app or a
connection pool that has to be ill
accommodate every possible SQL that that
application runs it turns out it needs a
lot of privileges and roles so it's it's
very highly privileged if attack occurs
and then somehow hacker gets access to
that account user ID password they could
use that and take do everything that
application could to the data underneath
it so what am I talking about
application security application
security in many contexts people talk
about sequel injection cross-site
scripting and that's not what this is in
reference to your application security
from this context is data access
security how do you how do you get users
limit users to the information that they
are authorized to see in terms of rows
and columns some people call that cell
level access in this example you see an
employee directory this is public data
all employees can see public data
you know it's same thing as you all have
in your company to be able to call find
out who's but where the phone numbers
are who's in different groups but you
also are able to look at your own
personal information she will see your
own sensitive information so scary
numbers and and such and be able to do
updates like there may be your phone
number and in addition managers should
be able to see things about their
employees like salary information but
not see other information like social
security numbers because they don't need
to have that information so those are
type of things
example what I'm talking about data
access security this is what I'm talking
about to provide users information they
need to see but nothing more so that
they don't have they don't have access
to everything that's that they're not
authorized to see so here's an example a
solution for some applications due for
data access control
there's different ways to do this some
can be done entirely in the application
other ones some larger applications like
some examples of some of the Oracle
applications that that do authorization
and within the application they build a
separate schema set of tables that up
create privileges roles and access for
each record for each column and
associate application roles privileges
to the rows and columns very complex set
of information it's it's complex schema
that has to be
it's another schema so it's almost under
application that's got to be managed
maybe even application it's actually
written on it to help you maintain it
the application needs to be able to get
the user context and be able to securely
use that to create the SQL get the
authorization information build the SQL
tune the SQL to get the the right
information it needs from the database
the in order for the for end-to-end
audit to be successful the database
actually needs to know the user
information if it doesn't it's just
going to be able to say hey it's just
the app logging in doing this the a plug
and it's not gonna be able to tell you
which user did a particular action and
in some applications they recognize a
problem with having a single a very
large / privileged user account
connection pool so they may split that
up three four connection pools to reduce
the amount of privileges and roles on
any particular one this just spreads the
problem out a little bit more but
they're still very highly privileged
those are things that applications
example it's not some things I do to try
to help minimize the security issues
from that connection and with some of
the things that they have to do to
provide this authorization information
I talked about some of the challenges it
said there's some challenge associated
with data access in the way it's it's
commonly done it's when authorization
checks are done within application then
that application has that authorization
it's embedded in the application logic
it gets a highly privileged user account
that's that's the the apps account
nothing with no information about the
user
other applications maybe a field
application or like most common ones
actually business intelligence reporting
that goes directly to the database how
do you manage to have the same
authorization checks on those they end
up with their own authorization checks
and they may be built in different ways
this might be a like a Python this would
be a third-party tool that has their own
authorization mechanism it's never going
to match exactly so you've got some
fragmented security and in issues with
how do you maintain changes across all
of them at the same time and it doesn't
protect against our favorite tools equal
plus accessing the database it's
connects directly to the database and
login as user you'll be able to see if
there's no authorization checks in the
database can see anything that for that
application audit looking at here if you
try and track down some action that
happen all you see is apps apps apps did
a particular action not a particular
user a lot more work to try to correlate
that with an application log and complex
development maintenance if you have to
make changes it's never just the initial
application development initial
authorization module development it's
the maintenance they're after especially
if the person that built it left so what
does Oracle data security a database
provide for data-driven security so this
is a it's model showing the the the
manual or we caught what we call the
manual model it was outside the database
but how applications access it they do
their own authorization and then pull
the information
now from the database about 18 years ago
we created something called Virtual
Private database VPD how many of you
work with VPD okay one all right
so VP DS we call row level acts security
RLS it's also can also be used to do
column level access but it's all
programming using the predicate so based
on the user that comes in they put a
predicate on it and it gets you the rows
and columns that you see but it's you
got a program that predicate and
initially if you're just doing row level
it's not that hard to do but over time
as you say okay I can do this I can do
this I could do this that predicate gets
long I've heard one customer said I got
a four page predicate if I tried
maintaining order making changes it
breaks it's very brittle but it's a it's
something we have for eighteen years a
lot of customers do use it and it's very
useful for them Oracle label security is
built on VPD this is built for the US
government initially but it's actually
very applicable to customers as well
that had need this particular use case
to have levels let's say confidential
proprietary public information for
levels and in different compartments in
groups if that matches what you did is
matches the user information or user
label with a data label to see if the
user is able to access that so if so
then they had access to the data this is
one of those it's Common Criteria
certified and used in many high security
implementations the next is the
application security this is what we
shipped with Oracle Database 12c it's
actually part of the Enterprise Edition
it's no not no separate option is
required to purchase for this and this
has one of the big differences two
difference I putting out here then we'll
get more into the application security
okay I'm probably blocking every time I
walk this way maybe we've got the
declarative policy so I talked about VPD
that was programmatic and very similar
to maybe what's being done in the
application as it creates the SQL query
but this in the Ruth R as you can
declare alright this column is sensitive
I'd declare that you don't have to
program that in so makes the not only
the creation of these role and
Commonwealth's security much easier to
do but also maintenance and
understanding what the security model is
sort of the security policy is in the
database and the other one I don't know
if you notice that this this change for
my wide highly privileged user
connection that connection pool that's a
lightweight user because the a database
understands what an application user is
so the connection just needs to be a
little more than a connect hits doesn't
but doesn't need elders select any
tables and all that that usually come
with the connection and so even if that
connection was stolen there's not much
they can attack ur can do with that
particular connection increasing your
security from that perspective so those
are things that we have and with real
application security you saw this
picture before what what the the
problems it solves it replaces the app
user with the context user context of
who the actor who's actually executing
the SQL statement it centralizes the
data access security so it's a common
model applied to any application
obviously that means if you're coming in
through sequel plus or other direct jobs
it applies to that as well and audit you
can see end-to-end audit information
very important and because it's
declarative it's a much easier to much
simplified administration maintenance so
let's go into real application security
I'll talking about some of the ways the
Java developers can access it and then
go into so the the data model as well so
some features for real application
security it understands database know
understands database uses those it's
always had a little hard time trying to
understand those application users in
Oracle but in it would with the real
application security it understands
application your users it doesn't have
to these users don't need
a schema in the Oracle database so
that's that's a huge win there and it
understands the context of that user
application user in the database
understands the privileges and roles
associated with that user and not this
database roles and database privileges
this is a like view salary requests
leave those are application privileges
and understands the application mat role
is like manager and this allows it to
support the fine-grained access the role
and column level access in the data
because it understands the youth the
operational context the user context
that's executing the SQL query and
enforces that security as close to the
data as possible so how does that work
the process process wise let's say on a
given an application page usual logs in
and the authentication is done by the
application the application understands
who the user is and as the context
information for the user that user
information is put into a recession
that's created that wrath session
contains the user the roles and any
other attributes that is required for
that application then when the
application is ready to do a sq to
execute SQL for the user it doesn't
attach attaches that rad session to the
connection pool so the connection pool
is still there you're not tearing up and
removing a connection pool for every
query it's still there so you don't have
to worry about the the heavy operations
of all of that so all you're doing is
connecting the wrath session executing
the query getting the information back
if you're getting information back and
detaching the wrath session from the
connection pool to allow another
connection there and then displaying the
information or displaying a page in some
cases so let's talk about this model
we're gonna use this to kind of walk
through the different parts of the of
res this aspect application use the
security context that's managed by the
application today
it's needs to understand the application
per application needs to understand the
users and needs to understand the roles
it gets that from the identity
management system identification and
pass it put that into the rad session
oops sorry
data security that's managing the
database based on the user context so it
does returns of fine-grain access on the
rows and the columns then in the
interface between the two between the
application and the database you've got
to have this session service interface
and that's where we talked about to
create grading the Raz session and in
the creating and detaching the
application and then you say that check
Akal at the end that's it's optional but
it allows your GUI to say to ask the
database hey does this user have ability
to edit this or approve this and can do
a check and Akal check without having to
do the computation itself it just
doesn't check and modify the GUI or
workflow appropriately so let's go into
that interface layer a little bit so we
have a Java API exception to the JDBC
also PL sequel for those not using Java
and so we talked about the three primary
tasks the creating a session the
attaching detaching the session to the
connection pool and then checking Akal
now if you're using the web logic and
oracle has an application development
environment within a database called
apex using those we actually simplify it
a little bit because we actually
automatically create the wrath session
for the users and for the developers all
right and so does it look like from an
API perspective now we have some API
reference guides online that a lot of
this information is available on the
Oracle technology Network session
manager actually is the one that
actually creates the the wrath sessions
so that's actually no she created using
the one of the connection called
privileged connection
in the application session the wrath
session is then created you by the by
the dispatcher by the session manager
created earlier
for with the user information has a user
and attributes associated with the user
and then once it's ready to execute that
SQL statement that the application will
then attach the session to the
connection you could put that into your
connection code it's usually not in the
the main code but this is something
that's just part and parcel of how you
execute SQL statements the connection
this is excess Access Controller the
check Akal allows you do I have an
update privilege for this that way you
can see make changes to GUI to allow the
user to update shafts or phone number
and then once you're done with in two
different ways once the the connection
is complete
the SQL query is complete you detach the
session from the connection pool and
then when the user logs out in this case
you would also destroy the session or as
user session for that user that was for
that and there's two ways you could work
with users in in rats one you can create
your own set of application users
declare them in the database and the
application roles within there but more
frequently find that customers or the
application users and application roles
already have that an LDAP directory so
you can just declare a sent externally
and say ok design time go ahead and pull
that information so it matches when
you're developing these these Rad's
policies using the exact roles role
names so you're not going to have any
mismatch when that information comes
through a runtime so when you do using
external roles it just one little change
gotta add dynamic role information when
you're doing the attach session
when you're doing the SQL query you can
actually do some Akal checks with the
SQL that you're doing to perhaps get a
subset of the information that you need
for example if you're looking at POS
purchase orders well you can see all
appeals but maybe the user just want to
see my POS in that case you can see well
just get the POS that this user has
privileges for for approval privileges
privileges for so you want to check
privileges does that have an approval of
an approval privilege and just pull
those records out so you can use that to
query within that as well now if you're
using this with Oracle Fusion Middleware
we do have some shortcuts allows it
simplifies the development or the
authentication is done through the
Oracle platform security service and
that we provide a Raz filter a servo
filter that automatically connects with
that and creates the wrath session I
still need to connect that using the
wrath session service to the connection
pool and then detach and obviously if
you want to do your own Akal checks
that's a that's a separate item as well
but it's integrate a little bit closer
with those environments all right so we
talked about so this is an application
some applications do today anyway talked
about the interface we'll talk about the
data security layer now what it looks
like from the database perspective so
real application security when the first
Costas is data realms and that's just
groups of Records groups of rows that
work together for some provide some
functionality so in this case that we
talked about with the HR one realm is
the all records all right that gives you
the ability to see all records the
public records for you know employees
looking at the directory another realm
would be my own record and that is
always going to be different for every
user every user logs in my wreck
they can be on their own record and then
employees under my report that's the
manager view that gives them certain
privileges within that and then by
declaring privileges on a particular
column you're automatically saying
because you need privileges for this
column this column is sensitive and that
blocks it from being a believe you'd and
managed unless they have special
privileges and then we have separate
ones for salary and social security
numbers in this case now so we talked
about realms which has just groups of
records and we have application roles
privileges how they get associated we
use apples access control is to
associate the information of the
privileges to the exact set of records
that are represented by the the realms
so the in this application context that
allows is the Lois pop in this
application to update their phone number
and see the salary information allows
the manager Nancy to see the salary
information for her direct reports Nancy
because the database understands who
user nancy is she can log into the
database seasons equal plus if she
wanted maybe she was trying to look up
other information turns out she can only
see the same information that she got to
see in the application so it's it shows
that it's applies to any method of
access to the database so R as developed
over ten years this is something we
worked with the application teams at
Oracle for they we asked him if we did
this data centralized data security
model for data access what do you need
in there and they said well we need this
we need this after over 10 years
development that's why wrasse
we has a lot of these enterprise
application features that you're looking
for you don't have to code that in
that's already provided in here master
detail understands that it can protect
that as a single logical entity to be
able to do additional attributes you
want to send in with the user so it's
not just a user and some some roles it
could also set some additional
attributes for particularly application
you can send that in and be able to work
within that context parameterize grants
so that the you don't have to keep
writing multiple data realms so you can
just use a parameter to reuse the same
ACL data realm a combination and these
some security features that applications
always need all right first thing as
soon as you finish the application guess
what it's like well how do we do you
know negative so sorry like Nick hmm
move yeah
oh so what I why I except shion's I
first thing you get they ask is how do
we do the old exceptions temporary
contract workers how do you get in
temporary access and how do you I do
this and that these things already
counted for in in this the Oracle
application says ok yeah this is the
normal way but then we have to be able
to provide all these things so that was
built into the res model other things
that it's required for enterprise
applications have delegation I need
otherwise you got to write special code
for that effective day this is one of my
favorite ones you can say this this user
has this role from this state to this
state and then it expires you don't have
to remove that role separately on your
own
negative grants that say ok instead of
just granting say this is not available
on this particular condition and being
able to create batch programs that have
elevated privileges so it can run on
behalf so it can at least get the
summary information and obviously the
audit is a great a great boon to be able
to track down what happened in a
functional scary that's where we talked
about where you do the Akal checks so
you can update your user
interface based on what privileges the
user has all right so that's the what
Raz can do it sir take a look at the Raz
GUI this is built in Apex a development
environment talk to you about the
database this is the there's a policies
privileges users roles there's different
tabs up top this is the policy it's got
actually the most information a lot of
information in this one page so policies
are created on tables so you declare the
table there it's got the policy
associated and you have a number of data
realms associated with that we talked
about data realms and here's the the all
record realm the my record and this is
the the programming that's done instead
of four page predicate you just have
this okay employee ID equals employee ID
my reports you know everyone who's my I
was got manager of ID matching my
employee ID and then all records and in
addition to that Inc with the realm you
have the you could see the Apple that's
associate with that that matches it to
the roles and privileges and here's how
you declare sensitive columns no
programming you just say this this this
column needs to have a privilege called
view salary this one needs to be social
screen over by just declaring it those
columns are sensitive and you know
unless you have those privileges you'll
not be able to see those columns there's
the Akal information the most just talk
about one of them the my employee Akal
has a number of things this allows the
you you as an employee to be able to see
update phone number view you get the
privilege view social security number
remember that view social security
number is only associated with the my
record so you can't see socially ran
umber for all employees is just my
record and saying with view salary based
on realms and you can commodities
obviously raise realms to get the full
picture of what you can see yeah
yeah that's where the the elevator you
can run code that's running at an
elevator privilege to gather that for
you so you can see a summary information
I say that right time view all right Tom
have you actually built it I'm just okay
oho okay so let's talk about what I
mentioned this has been released in 12c
with the release 1 and in the R as admin
tool that's separate
that's a download from the Oracle
technology Network OTN and then we have
updates coming in 12 - when 12 2 is
released that's gonna have remember we
saw the Select privilege for column
authorizations we're also going to have
insert update and delete privileges to
round that out some performance
enhancements and using that label
security that the other products that I
mentioned earlier you can use that data
and user labels for forcement within R
as and we can also delegate so if you if
you're you know it's all a database and
you have different things that HR and
Finance right now with 12:1 you have one
R as administrator and so all you know
that probably needs to have an HR
security administrator and a finance
security administrator and with 12 to
you'll be able to do that you'll be able
to break it down have different
administrators to manage the within
their own context so in in summary this
is a central enforcement in the database
we can audit and user activity it's
actually because of that it's much
easier verification when you're trying
to tell an auditor that the user can
only see this data in this way if you
add another application say oh we've
already done it it's in the data tier
you don't have to you spend as much time
in the application tier to verify that
your your standardizing externalizing
the security aspect it makes your the
the development job a little bit easier
and standardized it you know any
application has developed it just
depends on how how much experience that
developer has who are creating this type
of model some may do it really well some
may not do it as well
or differently and so this helps
standardized and externalize it for so
everyone can use it in in the same way
the application patterns are built in so
you can all leverage that without having
to do that for lepa for the large-scale
enterprise applications and this is
built into the database built in the
kernel it's not predicate level it's
down in the core of database so it's a
highly performant we have some
enhancements with Fusion Middleware and
apex and then we have some the api's
andraz administration tools so if this
is something that's useful for you we've
got a little bit a little bit of time
got at least 25 minutes for Q&amp;amp;A if you
want and you know if they answer the
questions peter out we can go ahead and
do one-on-one sessions at the front so
let's open up for questions I see one
back in the back
sorry calling stored procedures so the
insert and update is for the column
level sensitivity so when you say
calling stored procedures it's a saying
that's sensitive and you don't want
people to be I'll access that and you
want to control access to the store
procedures
elevator access card without you in the
hotel pipe so fine come upon future and
object can be alternative
so you're exiting object I invoke
arrival with the one a user ID to be
propagated and if we post Venus define
error propagated for some of the people
I think is object at the Nexus
controller talking about five minutes
all right we had another question here
that's what the Apple checks help you do
say it is it was this block because it's
secure or is there no data you want to
know that so then you can actually do
some inside of leaving something blank
you could put something in there but
yeah those the Apple checks allows you
to query the database to find out and
you can find out is this updatable by
the you can
so for answers yes you can there's a
rich way of doing it through the job API
and through SQL to to query what the
privileges are yes
yeah
so that's a big change here is that it's
the database understands the application
user and understands application roles
but yes the users have to be associated
with roles it's like somebody new comes
in the HR manager so okay this gets the
HR manager role and gets these Pro and
HR manager role gets these application
privileges with that but it's it but
it's an application user and it doesn't
have a schema it it just because it has
Raz enabled its threat running rats it
understands applications and does does a
login but there's no typical database
user that's underneath a schema less
so it's
nope sorry
we have a full it's Richard this is bill
with API so you can script against it a
lot easier than trying to type into the
well a GUI
so you can you can
yes
the body part is getting into it now we
know if it is
but if you don't around
also your sequel queries are much
simpler you don't have to write these
huge predicates I could potentially have
performance impacts and have the tune of
yourself that's something they optimized
within the database for that so there's
a number of different ways that they've
optimized this and it runs inside the
database it's not predicates that thrown
into very topless equal stack
you are not
so
you were already has obstruction
with
remember that I have a optical I have a
security context role and what
attributes just before
so you are
in the
with the Enterprise Edition so
yeah I do people do ask for standard
edition but it is free with Enterprise
Edition that's so you'll hear from us
less mean the sales books but it's a
that's why we talk about a lot
yeah
first 12:1 it starts 12 - it has
enhancements 12 CR 1 really 12c release
1 in the database already has R as and
then we had there as a DM that's been
released twelve two halves of the
database has some enhancements
all right well thank you all very much
for coming</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>