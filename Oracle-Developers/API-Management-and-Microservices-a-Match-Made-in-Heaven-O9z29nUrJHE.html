<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>API Management and Microservices, a Match Made in Heaven | Coder Coacher - Coaching Coders</title><meta content="API Management and Microservices, a Match Made in Heaven - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Developers/">Oracle Developers</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>API Management and Microservices, a Match Made in Heaven</b></h2><h5 class="post__date">2017-08-07</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/O9z29nUrJHE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so we're going to be talking today about
API management in the context of
microservices we're going to be giving
some context and then we're going to be
doing a demo later in the day so let me
just introduce ourselves so my name is
Luis we're I'm an Oracle a director a
focus on mirror where I've been
implementing Oracle past solutions in
middleware for I don't know 15 years I
come from an SOA background and now
transition into this new world of micro
services and api's and being
evangelizing on API management quite
heavily for I don't know the pasta to
two to three years health it so Phil all
right so I'm fair workings I work with
Luis I've been working in the IT
industry for about 25 years now I
started out as a developer and it's one
of those things we seem to be coming
full circle and getting more involved in
the code and a code and talking about
api's so those of you been around long
enough you probably quite familiar with
the basic idea of an API anyway and yes
so it's really really good to be talking
about those little things and the
concepts behind them so as I said before
we're going to start out with some
context a bit higher level there were
going to be a bit into more detail and
then we're going to do a demo showing
how we build a micro service how we you
know we're on the micro service and how
we can apply some API management
principles to Auvergne those API to
expose bio micro services so let me just
start off by asking a question to - you
know - to you guys do you have any idea
of public API available
I'm sure you use API in your projects
right you're calling public API you have
I don't know a number a figure anyone
just throw a number huh not that much
yet but if you if the tendency continues
it will get there very quickly so that's
a programmable web is a public API
catalog anyone you know you can google
it and you can go and get that figure
that was I think a month ago so it's
probably higher than that now so
Apio that's a poll the KPIs are becoming
quite relevant to organizations like
different example of a or Expedia
actually any organizations is making
that very information as it's available
via API and there's a very clear reason
why and why you should care about these
so let me give you an example cell force
anyone another quick question anyone an
idea how much money is to sell for
sneaking out of API I don't know a
number you you know no percentage of
their total revenue actually sixty
percent so that's quite shocking
they make sixty percent out of their
revenue via API so let me give you
another example Expedia I'm not going to
ask the question again but this is for
me a very very you know good example
that's ninety percent you know I call
Expedia an API with a website it's very
clear in fact I went to India about four
weeks ago
I thought I had booked my my trip
through a or agency a website it's a
corporate application we use when I get
to India I had an issue with my booking
and I will my yeah how to walk in and I
ask a question so so what happened did
my agency made an arrant and they said
well I don't know you did it through
experience like I didn't do tricks video
I'll do a digital agency agencia is
using Expedia APs and most likely many
of the apps you use for booking hotels
will be using Expedia as well and that's
how disguise are generating revenue and
then eBay and I really really recommend
that you google eve a developer API so
develop a program same story they are
making about 60% for the past year or so
they've been investing heavily on their
API developer program in fact there is
videos of eBay CEO talking about why aps
are important and why they're embracing
developers like yourself right into this
ecosystem so you can develop apps right
solutions that actually leverage a u.s.
API same story with a GoPro
sure you know about go pro so they
created this SDK for something that it's
known as a community created content
it's actually yet freaking jungle in
there so that is that through this tech
you know disruption they can get people
right to polish videos and share videos
and then what GoPro is doing they just
create advertisement campaigns using
people's videos right so they don't have
to spend money doing marketing
recordings and so on I think the figure
was the invested 50k dollars in
marketing and the turnaround was like 15
million or something like that no
company in the world has invested so
little marketing and got so much revenue
in return again all powered by I
wouldn't just say API so certainly you
know the SDK and the place are rolling
there however API so great no doubt
about that but they can add a lot of
that ad hoc mix if you call all these
API directly from your programs right as
time goes by right you get to the point
in your organization's that you don't
know who's going what so you're in
doping what I call as you know
unexpurgated write an API spaghetti or
cloud spaghetti whatever you want to
call it everything is calling everything
you don't have this ability as an
organization you don't have this ability
over what API is you're consuming right
for what purpose and that can become a
problem right and that's what API
management is really all about it's
trying to put some governance around it
I wouldn't call it governance as we used
to call it in the SI world it's a lot
more lightweight more lean but it's
essentially that it's uh it's a way to
put some processes around the planning I
speak louder anyway so it's Buddhist
the you okay sorry
it's disputed some processes around the
the planning design implementation
publication operation consumption is not
always about building api's or
micro-services it's about consuming
api's as well that someone else built
right at the examples I gave before
maintenance and retirement so there's a
full lifecycle right in as part of that
lifecycle is the developer community so
an API that I usually talk about when I
do conferences like this is that the
NASA API so if you google NASA API you
get directed into the the NASA API
developer portal you can get your API
key you subscribe you don't have to
provide too much details you get your
API developer your API key and then you
can start leveraging you know NASA
information if you're a rocket scientist
or your you know it's your hobby at
night I don't know bottom line is that
the whole ecosystem is changed and in
managing that community of developers
right it's as important as the
capability you've got to build those ABS
itself I'll explain that in a second in
more detail actually by providing an
example but of course that the industry
is realizing the value of and the power
of API from a business standpoint like
you have you see that the movement in
the industry so you have like for
example Google but recently API II a PE
TIBCO bot mastery no long back actually
bought it from Intel Inc about ma cherie
then I don't know why the solder to dip
code but nice would typical Red Hat
about three scale not long ago and now
Oracle are actually quite recently
bought a apiary but now let's talk a
little bit about micro services I've
been very very excited today of in two
presentations throughout the day also
the presentation this morning from Adam
bean he gave his definition of micro
service which I found good then I saw
this presentation from Lucas lae lae
Hema I don't know if any of you were in
his session he did a very very good demo
I was just in the presentation from
Sebastian also over micro services so so
micro services architecture is
becoming the architecture for software
development so I would say that in three
four years down the line when Java 9 is
out we're going to build applications
that are microsavings natives I mean you
wouldn't even use the word micro-service
anymore because everything is going to
be microservice but i like to go back to
the beginning for example you have a
drain throat right giving his
definition for me is the is the best
definition there is up there well he
well I call I refer to him as the father
of microservices he's done a great work
and a lot of his work is published
online
he called it loosely coupled service
orientation or service oriented
architecture with bounded context and
the bounded context is important because
that's a major difference from from the
way we used to implement its way as to
how we implement our micro services
today but what's really different I mean
I've just same words and describing so
let's get into a bit more detail so this
is what I call the legacy monolith right
you have one big name frame where you
could do many thing in fact in mainframe
you could have services to in fact soap
services you can have soap services
exposing a COBOL you know on a big IBM
machine it is possible doneita in some
of the products I worked with legacy
integration and then we have what we
probably see in many organizations today
which is the modern monolith the stack
of applications one on top of the other
right and at the very top you have your
services service an API is where kind of
the same thing it wasn't very clear what
is the service what is API some people
you know it was the same thing when you
created a service for example if you
adopted the service component
architecture you use the platform like
blood I don't know sauce sweet for
example you could use an open source
platform as well the the service itself
or the service implementation contain
the API as well in other words a widow
if we go back to the soap service days
right when we moved interests right
things became a bit different right now
we have swagger we have IP a blueprint
we have Rommel we have water we have
I don't know swagger 300 just came out a
no long
not long ago so there's a whole bunch of
different specifications to define your
API and they're not so much coupled to
the way you implement the API itself
which leads to my last point which is
micro-services architecture this is from
a technology stack point of view right
so each micro-service oh I like to
describe microservice as a way to
implement the API is the implementation
of the API is where your logic decides
is the real code the API is the door to
that micro service and the functionality
and the things that that microservice is
doing right the micro service it's in
itself completely independent and that's
what Sebastian just said before if you
were in his session and I completely
agree a micro service should be able to
run on its own run on its own process
scale independently I would I would go
beyond and and I'm not promoter that
micro services shoot on its own data
because if you don't then how do you
scale you will always have the
persistence of other as a bottleneck
right that's why the whole thing about
aventures in Casca how do you do a you
know event collaboration is extremely
important when you implement through
micro services architecture because that
will give you the decoupling you need to
be able to scale independently but it's
not all all only sorry about wrong wrong
time also during development lifecycle
if you're completely decoupled you can
for example a doc technologies like
overfly I don't know if you heard of it
is that awesome technology to actually
be copal testing so you can flight
record transactions and then playback so
you can actually have your development
DevOps teams operating completely
completely independent to other DevOps
teams so when you do your regression
testing or your uit you don't have to
test the hosted symbol just your
micro-service so so but you can only
achieve that when you really you know
become micro service-oriented and that's
what this lag is trying to convey but
there is another slightly important
pattern right that we're going to talk
about today which is a a P I gateway or
what I like to call
micro gateways if you go to micro
services though I Oh which is a very
famous
website I created by Chris Richardson
one of the you know evangelist of
micro-services in fact he spoke an
Oracle code I think in New York he did a
video a very good video and he described
he talked a little bit about this uh he
he himself write a wrote about the fact
that eight microservices required an api
gateway and it's a known pattern when
you implement micro services but not
many people to actually talk about this
what is that API gate what is it what
does they do what do I do in the Gateway
as opposed to the microservice
implementation itself what do I write in
Java what do I delegate to the Gateway
so those things are a bit kind of up in
the air so that's kind of where we come
from and trying to put some some some
structure into the capabilities that you
should implement in the Gateway as
opposed to - in the implementation
itself and the other way around as well
by the way if you want to ask me a
question please interrupt me so this is
a definition I myself created based on a
lot of research of in reading the
websites probably the sames you have
from the likes of Martin Fowler for
example John Lewis a Chris Richardson
even Sebastian itself and you know all
these thought leaders like Eddy Kevin so
we domain-driven design whole bunch of
thought leaders that came up with
different point of views and concepts on
what a microservices what I was able to
conclude right is that there are three
different things that really constitute
our microservices no it's not one thing
it's three things so we have
architectural which is the patterns that
you adopt when you implement a
micro-service I mentioned the the API
gateway I think I also mentioned the
bounded context but there are other
partners like polyglot single
responsibility choreography are that
really play a key role when you when you
implement a microservice architecture
especially the Gateway is the one that
we're going to be focusing a bit more
today I think you had enough sessions
today on event sourcing or event
collaboration which is what for example
whether Sebastian talked about before
and also Lukas talked about earlier
today with his event
in a presentation technically I've shown
you the stack right now what the
difference is between you know different
stacks right and why the micro-service
stack is different and then organic
sectional I'm not going to focus on
these right now but this is the whole
DevOps orientation like you have themes
that you know whatever you cook you're
going to eat right and then you own that
meal almost two other life cycles so
basically right you don't just hand over
the coat over the fence to the support
team right to just good luck right you
actually look at it through the entire
life cycle and you obscene become part
of your development team small teams
small size you focus on business
capabilities and therefore you treat
your your your business capabilities as
products that you evil throughout the
lifecycle I'm going to be talking about
this today but I think I mean there's
plenty of material I also created all
the material on this in the past so if
you google my name or you know drop me
an email I can just share some content
now as I said before I'm going to be
tight a little bit more into the API
gateway and how it has evolved and why
it's relevant for micro services in
today's modern architectures so what
electrical generations view that was the
esv time right enterprise service cause
at the time it was all about ESV I
remember when you know it started to
come out and the first implementations
open sourced and Oracle and then you
know VA which now become Oracle so that
was the early days of what we know as a
traditional SOA but there's new new kits
in the block you have early days of cell
for samisen and google's start to to
appear as a players in the in the cloud
computing world still not really
mainstream they were more like for small
businesses a pot sort capabilities
really started to bubble right so so
that's when for example Oracle bought
details from a company called colony I
think you call AXA in this agglomeration
of capabilities
were grouped into these Suites right
that you know now we call the monolith
right but you have this soft suite where
you could feel absolutely everything
into a single box and every capability
you wanted right you could build in
these are you know stack then governance
I mean we were we became paranoid with
governance if you don't believe me I can
give you a free copy of my book 400
pages of straw governance that you can
read on your free time I think it was
too much it was heavy weight it was a
difficult I mean a no longer why right
what I call the second generation right
saw governance kind of it didn't work
right especially with a in the second
generation you get all these mobile
developers right embracing a different
protocols like rest and Jason it was a
lot simpler to implement when compared
to for example soap and large canonical
models right 300 fields right used to
get the address of a person right so
different patterns start to emerge in
the second generation right meaning that
the traditional capables is that you go
from model it right didn't do the job
right
however I think I didn't mention it
before but in the first generation we
have this thing called XML appliances I
don't know if any of you heard of them
like vision example of data power or ax
way it was called border before it was
like almost like a switch like a machine
that you put in your damn set and what
you would do with this machine is just
do XML acceleration in other words just
implement security on it like I don't
know - a TLS or you know security
certificate validation it was mainly
about security right nothing to do with
API management what happened in
second-generation
is that the opportunity came right for
vendors to say oh hold on one second
this thing called API is that the mobile
developers are using and all the cloud
vendors are adopting to connect to their
clouds you know are becoming popular we
need to extend this XML appliances
capabilities into you know and just
extend them to support some API
management capabilities well this is not
really pure play right you're just
extending your capability right it's not
you're not doing the rest and JSON
natively right
in fact I'd be one of the first
second-generation implementations and it
was all about converting from
restoration back to XML and then the
other way around and then back to big
nightmare right the tools were not built
from the ground up to think about this
concept right I would say that the only
company that this came about at that
time was a PE in Missouri I think they
came out about that time frame and there
were more people play API API management
tooling but then we are now what I call
third generation which is data is
absolutely everywhere companies are
adopting many different clouds
whether you're likely or not in fact
companies don't even know what clouds
are already using in many cases right
when organizations are going into this
cloud of testament on cloud strategy
they find out that 10 departments are
already use itself or the other ones are
already using I don't know Oracle
service for so so many are using Amazon
because Amazon have some very good is
capabilities right all theirs might be
using assured they own their line expect
of this right is that your data really
becomes federated now let's let's put
into context micro services now you're
not you're no longer building monolithic
applications you are building these
independent things right that you know
they run on their own they can scale
rapidly and they expose an API that you
can call and all of the sudden you have
100 150 200 micro services right how do
you access them so so third-generation
API platforms or API gateways right if
it's about providing these micro gateway
capability where required and when
required it should not be a big
monolithic thing where you can do 100
things you should be about providing a
link API gateway capabilities things
like routing things like policy
important things like rate limiting
things like API key generation API key
of third session think like API portal
things like a community management so it
makes it easier for this community of
both developers to consume this API and
also gives the organization some
visibility over how this API
are consumed a by whom that's all the
API management should be about and
that's what API guess who should be
doing you shouldn't be implementing you
know 200 lines of business logic in a
gateway that's what we ended up in the
second generation is right organizations
that have this big second generation
gateways that they cannot get rid of
because they don't even know the logic
that's in there it's not just doing you
know policy enforcement it's doing a lot
of transformation a lot of mumbo-jumbo
that you know you really need to look at
the code and then rebuild almost from
scratch so so having said that right
there are ways to realize third
generation architectures right and now
we're going to scratch the surface right
now by talking about architectures I
think bill is going to take over for me
in a second and then I come and do a
demo a flavor of how to realize these
architectures so what do you thank you
so Louis has talked about a lot of
high-level concepts that will leadership
what we need from an API gateway and how
micro services relate to it let's just
drill down a little bit more into some
depth in Louis and I have been working
with a number of customers and to help
shape and inform thinking we've had to
formulate some ideas being an architect
do like to draw boxes and PowerPoint
slides so something to talk about
but the some fundamental ideas here with
api's you're going to need to treat them
differently depending on what they're
for and when we need to get that idea
across so we have this idea at the top
you can see what could cause single
purpose api's either one-off use ap is
that where you're publishing and
interface to an outbound capability for
example a well-known example is the
mobile space you don't want a mobile
application on someone's phone calling
out to dozens of different api's to pull
the data together you actually want to
do that on the back end and give them a
dedicated API to serve that mobile
application
yeah it's a one-off use case it isn't
going to get reused yeah you're going to
want different api's for working with
partners and the public community you
know if you're going to expose it to the
outer world and let people try and use
your API you're going to want to have
different controls on those api's as
well a partner you might be a little bit
less security sensitive but in the pub
an API exposed to the public you're
going to want to be very carefully
managing what that API is doing because
you can there be subject to things like
denial of service attacks and all those
security considerations beneath that
would get into a slightly more generic
viewpoint now we're into the business
what is it the business want to do what
is the views and processes that we want
to expose the business are going to use
so we then then get some we use here
because a business API is talking about
operations on our product or something
like that they're going to be used
across an organization but you still
want to understand how it's been used
when it's being used get some metrics
understand and manage lightly when
someone needs to move up to a newer
version of the API if you've got no
gateway to track that through how do you
know that someone's still using the
version that's three or four you have
iterations old that you want to retire
when you're down here if we're that
gateway monitoring those calls you're
going to head just have to pull the plug
and see who screens and not really where
you want to be and then beneath that you
know the reality is we've got monoliths
yeah and I'm not going to go away people
spent millions of pounds getting their
users instances up then the visions
running they're not going to go away so
what can we do about that we want to
access the data and interact with them
but we want to also understand how
they're being used what
used when it's being used so we can
actually expose them using API
applications that I'll understand the
monolith but I cheer for a generic API
or business API and we can expose that
then through to the to the the gateway
an end-of-course we've got the new world
micro services where they're going to be
offering up their own IP is now be very
easy as well in the micro service world
to link one micro service to another
micro service yeah and then you've got
tight coupling defeats the point of
micro services and in fact you're
probably going to be in a worse place
than before we started with micro
service technologies so you want to be
on table and do a level of indirection
through API management you talk to the
API and something behind that API
realizes it now that might be a micro
service that could be about monolith you
don't know you don't really care another
way of looking at it is through the more
business and data structured viewpoints
so you will Luis mention the idea of
bounded contexts what we have here is in
this diagram is an illustration of those
bounded context concepts so you will
take you you your business concepts in
your data views and try and group them
into logical related pieces whether
they're completely separated you're
going to want to use some sort of
backbone pipeline you know you've heard
about Kafka quite a bit today or any
other technique achi that will allow you
to do a loose coupled asynchronous
communication okay so moving on about
some of the concepts let's look at a
physical deployment model this is
something that we're working on whether
this is a genuine live scenario so we're
an Oracle event so obviously the ideal
thing is to be talking about Oracle
products but you can do this with many
other vendors it just happens that
Oracle
has been proven with this particular
product to be particularly effective so
we advocate a what they call an API
first model which is the idea of
designing the API completely decoupled
from how it's implemented effectively
writing the contract if you're a lawyer
you want the contract you don't worry
about how it's going to be executed you
know that's what we're all about using
API first and that's what apiaries are
one of his raison d'être tzatzi's is to
give you that framework to be able to
define the contract computing the
blueprint API blueprint or swagger it
will support both and agreeing with your
consumers this is the API is it work for
you so you can give you all the
information that you want and then it
will run not mock for you so they can
start coding against that API contract
even though you haven't got anything
built yet and so now your development
team can start building the backend to
that so behind it obviously you need
some people and some roles
you got the developers and you've got
the admins on it and of course when
you'll need to manage the gateways now
in a global world a lot of companies
want to deal with our gateways and the
instances of micro services across the
world so you've got the right
performance so you need a centralized
cloud-based management console to manage
those execution gateways and that's what
we have here you can see we've split it
into two tiers we've got an external
facing gateway I'll set up gateways
along with the supporting good old
firewalls to protect the infrastructure
and then to allow the internal side of
the organization to also use the same
services but with different levels of
control on it we've got internal
gateways and then as we get into the
idea of hyper scale it's not necessary
but if you're going to start doing that
elastic scaling your micro services
you're going to need to be able to
manage which instance
are alive and dead and where are they
through some form of registry and that's
a natural partner to the load balancing
and gateway technologies then of course
if you're doing that a new Greenfield
you're going to be thinking about the
cloud and perhaps working with not just
iOS but pass or even further up the
stack and all of these things need to
communicate back to the API management
just to announce that here and the well
I'm working and these are the statistics
going on so now we have the platform we
have the means to manage and interact
and see what's going on with those micro
services through their published API so
we can now build our solutions such as
mobile apps and as you can see that this
is a customer based mobile app it comes
through the outer firewall before
talking to the new micro services which
could will actually be exposing one of
our legacy applications one of those
monoliths or it could be talking
directly into the cloud but the
important thing is is through publishing
those api's and people finding those
api's they can decide what to use so
that's the big strategic model loosely
in a moment is going to demonstrate a
little bit of this win in the micro so
what we've got in the demo is postman to
mimic a mobile app in this case it's
going to be talking to the API through
an API gateway which offers a number of
services we've talked about sent
occasional is a ssin the weight limiting
so that we don't kill the backend return
many requests when we did win one of
this or denial of service attacks and
things like that and then that gateway
very light touched your checking to make
sure everything is fine
will then pass on to a micro service
running at nodejs
and MongoDB to actually do the the
business logic and it will bounce back
a fire passes back to this nothing feels
so uh by the weight of feel is the main
engineer implementing the architecture
fee after this architecture we're doing
this for a large client we have to
implement about a thousand gateways
literally so it's why this type of
architecture you can pause right so so
we were thinking how we can scale not
only micro services but also the
gateways and I just wanted to - to add
to Phil's presentation so it's a it's a
hardcore you know a level diagram but
yeah it's a it's more complex in
practice so yeah let me let me try and
demo this thing here so the code for the
micro service is available in my github
account so if you take a picture of that
or actually if you took a picture of the
first slide I can just come back to it
quickly you can this presentation it's
already available in that URL in there
so you can just download the thing and
then look at the code later so some
people taking some pictures yeah it's
already published okay so let me just
come back to it so it's not up I mean I
don't have much time so it's a fairly
simple example but it shows kind of a it
gives more context to to what we have
been presenting today so the first thing
to do right let me just minimize this
right it's a good practice to do API
first design for many reasons some of
which is you you want to make sure your
consumers right the people that are
going to be consuming your API right
actually are happy with that with a
contract with the information you're
going to be presenting before you go and
build your micro service so for that for
example I can come to ap re-write is
free for small teams right so you can go
and create your account today if you
want right sorry so
I know I know last session of the day
almost there
yeah so I'm cheating right I already
have an API blueprint created right oh
really okay so that's because then I
need to change my sorry I need to change
my view options in the laptop so it was
second system displays I need to mirror
arrangement you should be seeing it in a
second hopefully yeah okay there you go
sorry about that okay program you cannot
still sis to smoke but I think I have a
trick here yeah so in AP re right what
you can do is you can let me see if I
can create a new one quickly you can
create a new API project I'm just going
to do it for me no for the team I call
it orders I create the API by the way
you're not really creating an API at
this point you're creating just the
contract of the API what we used to call
the widow or the sweater file in this
case I'm doing a pure rest JSON API
description a PRI will give me
immediately a sample of the markdown
that I can modify so I can just change
these on the fly and and you can see
that it's already rendering simple API
but this is not really the power of the
tool you can do these in many ways you
don't you don't have to use API but I
think where the benefit really comes is
when you start thinking about a
collaboration so you want your consumers
to interact with this contract before
you invest time in to actually go in and
build in that microservice that can take
more time so with a PR e what you get is
the ability to try it creates a mock up
on the fly as you model your API already
our mock-up server is being generated so
if I clicked right here right you see
this URL this URL is actually
a real mock-up server that I can call
and I'll show you the example so it
didn't copy it properly yeah sorry I
don't know where this no copy netball
anyways that if I call this resource
it's actually returning out through HTTP
200 response it is it is a mock server
if I was able to copy this thing which
for some reason there you go I'm doing
it the old-fashioned way
there finally
yeah so so it's of course it's a mock up
it's just responding back what I modal
in the Indus weather file but imagine
right you are in the design process of
your micro service right in this case
let's say we're going to implement this
in a micro service architecture you have
a large set of consumers you want to
make sure that you're satisfying their
needs this can really save you time you
model your API insider or API through
pin you share you share your mock-up URI
and you can start interacting with your
consumers right which is probably all
the developers and therefore you can
engage in a more proactive life cycle
right so what a PR able give me as well
is the ability to publish this into I'm
going to go back to my previous one
because I have there already working so
sorry nice demo yet
yeah what I have here is two things I
want to show very quickly one is I can
post it into a github repository so if I
kick if I click push write a it's
already connected to you should be
connected to my github so I should be
getting soon at some point right
notification that my API exchange
problem just gonna skip this for now
because I want to show something else so
that is that this this contract that I'm
showing here it's a it's a not couple to
the actual implementation of this API so
I said before you can go into the
lifecycle but the other things you can
do here as an enterprise implementation
you see that there is this semantic
issue here so this is actually automatic
semantic validation so if I move to team
view if I go into where is this
inspector sorry I'm not interesting you
I'm having account see properly
switch to team yeah now yeah
so these assertions are actually
validations you can do on the fly to
your API contract to your swagger or API
Drupal pal so imagine you have a team of
five hundred or two hundred developers
right then you want to make sure that
everyone is defining your API
consistently you can create your own
assertions and on the fly the to
actually validate and make sure that
semantically you are consistent so this
is quite useful if you have very very
large teams in fact apiary has been used
by Microsoft uses IP re actually which
I'm not sure they're going to use it
anymore because now Oracle but they they
use a a PR e so let me just go back into
my view and this one more thing
my personal view there's one more thing
I want to show another powerful powerful
thing you can do in a PRA is about the
test by the way you haven't yet
implemented this API this is just about
the design part of your micro service
but I want to make sure that I can
continuous integrate in turn is going a
bit slow so to follow this all that okay
there you go I don't know if you heard
of threat but threat is a-- is a tool
credit to actually create continuous
integration tests against api
definitions right so what i'm going to
do now is i'm going to have already
execute this what i want to create a
test right so when i actually hand this
over to my developer team and say guys
go and build your micro service i can
cross check that the micro service was
implemented consistently to the API
definition in that way make sure that
they're not disjointed and that's why
again is to be able to have that little
bit of more management so if I come here
very quickly I just show you you know
how this works
see it's actually an OD as a application
let me assume this in a little bit
yeah again I'm cheating a little bit I
don't have much time but uh what I've
just done is right I executed this
command the and then you execute this
command and then it will ask you a
question where is the API group in file
where is the URL of the mark of you want
to test and that's it and then you can
use circle CI to actually do regular
tests on that API contract so so at that
point right you're ready to hand over
your micro service team builds the the
API have already a builder micro service
I'm using not yes simply because I like
it
but it could be Java as well could be
Springwood it could be drop wizard it
could be you know your choose your
chosen basically Visual Basic if you
want to epsilon that is a what I
wouldn't use be so visible yeah I'm
using Mongoose to connect you to MongoDB
and I'm using Express because it's a
good server for for not GS this is
already working so if you go to the
presentation later right this is all
already packaged as a to docker
containers and using this case a docker
compose not sure if you are familiar
with dr. Campos but it's a very simple
orchestration engine concepts Parker
when you stole it you can stop talking
compose and it allows you to create that
docker dependencies so in this case what
you can see is I'm saying when you wrote
this docking docker composer file you
need to get Louis's image where my
orders microservices but this order
image also depends on a MongoDB right so
also get that dependency you don't need
to have anything if you have dr. install
and docker compose and so that's all you
need you don't even need no GS install
on your machine all you need to do then
is say docker compose up of course right
now the the the images the docker image
is already in my machine so this will
work
me so the service is running already so
actually this is in my machine but in
the example I'm showing we did exactly
this in an Amazon Linux box
so what's just one dog one command just
to locate all dependencies and start off
this micro service and I call it a micro
service because it's completely
independent I could scale this you know
regardless of any other external
dependency so let me go back to so now I
come to I'm going to go to the API
platform portal this is where I'm going
to create my API and I'm going to apply
some policies I think I'm probably
running out of time how much I have left
I have something well can you wait two
more minutes before the veers and so let
me just show you the principles right
and then and we can we can have some
more detailed discussion later if you
want
yep so this is the management portal
where I can actually come in and create
API so if for example I come here and
say my Oracle code API right version 1
create then I come here and say API
request right next I'll just call this
version 1 I know not everyone agrees
that you should put versions in the URI
you could you could put in the header as
well flavors of doing this right orders
API I wouldn't call it orders API but I
have another API call order so I just
need a different name and now what I'm
going to do this is very straightforward
what I'm doing now I want to actually up
the URL of the microservice let me just
make sure that it's actually listening I
think it's this one yeah because I don't
have any header in this one yet
that's postman for example for those of
you that I'm not familiar with it is it
so that's it so if a publish these to my
gateway I only have one so that's easy
right
it's waiting its effect the gateways
operating what we call a phone home
model it's not a push connection is a
pool connection that means that if you
have 100 gateways they get which
themselves will go and collect the api's
they need to deploy the policies they
need to apply and also send some static
information so you can see who's calling
your api's and when and so on right
that's good when you need to scale if
you do a push model then then you need
to deal with firewalls etc right pool
model is actually the gateways are
making up API call to the to the to the
management console which is running in
the cloud so it deploys uh so this
should work theory so if I come here
this you should be this year fortunately
that's where my gateways running
yeah perfect so I'm not calling the API
anymore directly I'm not going to the
microservice API directly I'm going
through the gateway what that's giving
me now is the ability to do you know
some of the features that they get which
you allow me to implement like for
example very simple example is API key
to make sure that only the developers
that have the API keys can actually call
this API so if I come now to the to the
sorry to the management console sorry
for skipping too fast so if I come to
the management console here and I say I
want to apply a security policy it's
called key validation right I'm
expecting a value in the HTTP header
let's go API key right
I save the changes
and I deploy again to the Gateway
now once it's deployed it takes like
five seconds it depends how regularly
you want the gate with actually phone
home and get the details right
it should reject Michael because now I'm
enforcing a policy so it's deployed
let's go back to postman okay so I'm
getting an unauthorized access so now
the idea right is that a developer right
this is actually so sorry this is
actually how it should be done once the
API is polish let's say you have a large
team how do you know as a developer that
there is an API to to you know create
orders you need a developer port and
this is a developer portal fully
customized for this event right where
you can see you know UK tours in cloud
platform whatever right so you can
tailor this API portal to whatever needs
you have
so I come I log in as a developer right
I'm going to skip a few steps because
it's a bit late but I'll show you the
concept so you get idea right and then I
can see I should be able to see the API
right in reality I need to eat I need to
give the developer role the grant to be
able to discover the API that I just
created right now I'm showing you an API
that already has a basically has given
that the role that the developer belongs
to the rights to discover this API if I
have time I can show you that as well so
the idea is that in here the developer
can register in by registering racer II
into the API you can then request an API
key when you get the API key right yeah
which I already have as a set I should
be able to inject it again I'm not going
to use this example because they don't
have to do a few more changes I need two
other developer to the group that the
API just created belongs to so then I
can discover the new API and so on I'm
just going to keep a few steps what idea
is that what the developer is able to
register to that API you can pass the
API key and then you can make the call
right and then you can apply like this
policy you can apply any policy you need
like for example HTTP routing maybe
maybe one concept that bill and I are
looking to implement is integrating or
creating a custom policy to talk to a
eureka registry for example to be able
to get the dynamic dynamically end
points of where the actual aid
microservices is existing so we can
dynamically also do API load balancing
through the gate we are supposed to
having another load balancer that then
does the load balance it for example but
that is that you implement policies
right that add value to your developer
ecosystem right things that you don't
really want to write in code because it
doesn't make sense that's that's what
micro gate with you before and that's
what in this example we're using the
Oracle API platform I think it's very
lightweight it's very good and it fits
very nicely with a micro service
architecture yeah sorry it's gonna be
hopefully available in two weeks but
we've been beta testing it we've been
implementing well prying this product
for the past eight months now so we've
been you know through the whole cycle
are in our testing Eveline will be given
a lot of feedback so so it should be
available very soon hopefully any other
question
sure-sure vienen thank you guys thank
you for your time your lapis</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>