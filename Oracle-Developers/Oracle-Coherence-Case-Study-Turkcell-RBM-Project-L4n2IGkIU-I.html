<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Oracle Coherence Case Study: Turkcell RBM Project | Coder Coacher - Coaching Coders</title><meta content="Oracle Coherence Case Study: Turkcell RBM Project - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Developers/">Oracle Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Oracle Coherence Case Study: Turkcell RBM Project</b></h2><h5 class="post__date">2015-06-05</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/L4n2IGkIU-I" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">my name is hassan duj I'm a software
engineer for five years I've greeted
from University in 2007 and I work force
only for two years and after that I
started to work trip for a true cell in
here and i'm going to share my
experiences with you in this day and the
the agenda is something like that in the
beginning I'm just try to present you
some small but necessary information
about my company and then I'm just going
to present you the the functionality of
my project and then I'm just going to
try to explain you the architecture of
our implementations and after that and
after that I will give the examples of
the implementations about oracle
coherence product in our implementations
and also the architectural parts of the
system and the main flows of it and in
conclusion i'm just going to conclude
all the stuff that i'm just trying to
present you in the end up not answer
your questions it's not going to be a
long presentation it's something like
1220 slice or something like that and
i'm not going to take the whole error of
yours so it's it's going to be and for
example 30 35 minutes later that's of
course my assumptions okay to sell is
the biggest telecommunication company in
my country so we have something like is
65 million customers in all over the
eastern europe and a asian side of the
world so the majority of number of this
customers are all in in my country as
you can see something like 35 million
and I'm just trying to explain this to
you because in order to understand the
applications load a it's a really
necessary information in here because we
have a lot of customers and we have a
lot of loads and subnet activities
something like this and New York Stock
Exchange is just nonsense according to
my presentation because it's mostly
about software not kind of economical
situations or something like that and we
have standards or blah blah whatever
these are just rabbits in my opinion and
rvm project rbm means a rule based
marketing as you can understand that the
second of abbreviation rule based
marketing is responsible about
processing pick customer activities on
network subnet and offers them the real
campaigns if they are eligible to have
it so it's something like this when I
said customer activities it's something
like this for example i'm sending an SMS
to my friend that's an activity so i'm
just calling my friend that's also an
activity i am entering to the internet i
am entering to a specific location for
example like a mole or something like
this for example am visiting a foreign
country that's also an event we are
collecting all these events from the
services and processing them account
according to some business flows as you
can see from here and after this process
is we were just trying to give the right
offer to our customers that's the basic
principle in our applications
application flows actually because our
BM is not just one application it's that
going to flow we have plenty of
applications like chaining one by
another or something like this and we
are using plenty of
variety of software applications like
Apache camel spring itself is a complex
event processing Obama also and it's as
you can see from the enterprise
integration patterns etc and rule-based
marketing is something like this as I
just mentioned it before we are
collecting the whole as subnet
activities like that I've just mentioned
you actually I'm calling my friend
sending an SMS and entering to internet
location services roaming anything that
you can imagine on our subnets
activities so it's something like that
one month ago it is 850 million in a day
but now it's something like 1 billion in
a day right now because it's growing in
a really aggressive stat according to
the new improvements nowadays so after
the collection of all these information
we are just passing this whole
informations into our complex event
processes which is including the
business flows I mean business slow it's
something like this for example I have
one scenario with it and the scenario
has some constraints like if you are
under the age of 25 if you're a student
and if your net income is something I
press on 100,000 in amounts then you are
eligible for for this X flow then it
means that according to some filters
that we are making some checks at the
end of this exact state and it's a we
have also the ear real-time monitoring
when we are making this kind of
processing in our system so as you can
imagine that we need to be a near
real-time because for example you are
entering to a mall and you need to have
that offer immediately because after
some time maybe that guy
just gone and that campaign makes
nonsense in that case so we need to a
fast we need to be accurate in the same
place so after this filters we are
offering the campaigns with several
methods for example we are sending SMSs
we're sending what push we are creating
some acknowledgments for for our call
center and service booster or something
like that anything that you can imagine
actually bizarre not the whole stuff but
we are still growing that as I just
mentioned you before so our very much
architecture is something like this as I
just mentioned you before it's a kind of
IBM is not only one application it's
it's a kind of application chain so in
the beginning I have a sources like file
two implementations the web service
calls and anything that you can an
amendment about themselves and we are
having that information and we are just
as sending the whole information to
Obama which is a complex event processor
and Obama is running some business flows
in it and according to that business
flows Obama is just a laminating some
and pressing which are just approved
into our choose and lmc reader is
responsible about reading that whole
information and writing into our Oracle
database and in here it seems a little
bit complicated time because you cannot
see the exact flow in here but the case
in here is lmc sorter is responsible
about reading that informations that
approved informations from a it means
that approved by the way if if we are at
this exact state in here it means that
them that items are just approved and
and that approved items we are reading
it and sending to lmc processes lmc is
also a kind of abbreviation it means a
last-minute check and we are applying
some kind of business rules for example
to kota check for example blackness
check or fraud checks or something like
that which are all common for each of
our items we are applying that filters
on our events and then sending them into
response manager response manager you
can imagine it as like a kind of adapter
which has the ability to adapt any kind
of system and as I just mentioned it
before we are creating a kind of
campaign over with it but the campaign
offer is not creating in the system it's
the kind of whole system it's just after
response manager part and we are sending
that events to is true actually this
post manager to another system which is
a campaign management system we have
also that kind of product so that's our
flow in here a in the beginning of this
flow we have as I just mentioned you
before we have 1,000,000,000 event in a
day and we are passing than whole 1
billion into palma and then the other
parts and then it's just resulting
before rule based marketing the return I
mean the acceptance rates of our opals
were something like nine is 0.9 percent
or something like that it was so it was
so low after this one it is more than 2%
it seems like it's a a it's not a huge
as significant or
a increase but it is actually in our
sector because all the people thinks
that it's a kind of rubbish SMS or
something like that and there's they
have plenty of complaints about the
situation actually in our application we
need to be fast because we need to be
real in near real time in order to just
fulfillment full film the requests in
the exact time should we need to a fast
and in order to in order to be fast we
need to use some past tools like a
in-memory grits or something like that
and we use Oracle coherence in here and
this explanation has just copied from
its its official site so we use all of
coherence in some separate ways not only
for the storage of functionality of it
and I'm going to try to explain this all
this user's to you we have four types of
uses of this cash to transfer Dae events
from one application to another we are
using the first one the second one
active passive process of multiple
applications it's a its actual logs yeah
the cash locks so the third one is the
storage in enrichment we are enriching
our events with which auto services
informations with that so we are
avoiding to go to services with it so a
it increase our performance in a really
significant way and the fourth want is
we have a flow and we need to be sure
that each
and every event item should be processed
and in order to make this we are using
also this one and let's start from this
as I just mentioned you before rbm is a
kind of chain of application so in order
to make this I am having one event and
just trying to transfer this to another
application so how am I going to do this
with this kind of stuff we made
something like this there's this concept
which is a continuous query cache is a
kind of listener with a filter so a if I
know that if the cache item is belongs
to me or not I need a kind of next
destination area a in each of my items
so you can assume that it's something
like a TCP package in in each hope a it
no step where to go it's something like
this we made a structure like this so
CQC is something like that CQC is a kind
of listener with with the filter and we
have also accused in our applications a
in order to make it tread say blocking
choose and each application is
responsible about processing the events
and after processing the event if it's
available if next application I mean is
available we are redirecting that item
through another application or or if
it's done we'll just clinic that item
from cash so the life cycle of the
applications is just starting something
like this II it'd be much easier to just
try to explain this from this slide for
example I got lmc applications and then
I got response manager application by
the way this functionality is only a
applied in the right site of this this
flaw so it's something like this for
example I have plenty of lmc processor
applications for example like two or
more and also response manager
applications like multiple applications
and each application is registering
itself into a registry cash which is a
replicated cash as you can see from
there that's a replicated cash and we
are registering our identity into that
cash so so each and every one if it is
response manager or an lmc processor
when it's trying to start up it's just
registered itself into the registry cash
that's the case in here so after this
period I have a kind of map which has
the whole list of the applications which
are just online at that exact time so
that gives me a kind of advantage lag
for example I can have the information
about the number of response many
applications and their identities also
so in the beginning lmc sorter reads the
events from database and inserts them
into our coherence cash but when we are
just trying to insert them into our cash
we need to set their next destination
field in order to be read by lmc
processors in there so lmc processor and
response manager have its own sake you
seen it they are fully understand of the
items which are which are located for
themselves each application has its own
events we are redirecting them like
round-robin algorithms for example a lmc
sorter knows the number of the lmc
processor items in the replicated cash
for example it has just a
as 100 items and it's it's inserted that
items into my event flow distributed
cache and before it was inserting that's
a whole item set into a into my event
cash it just sets the nest next lmc
processor application in itself and I
mean the identity of it so each lmc
process your application has a listener
in its own behavior and each application
knows that if that new item is belongs
to itself or not it's something like
this yeah no no no is freak you see is
that kind of I don't know what it does a
underneath it but I'm not making that
kind of a public thing it just
understand itself actually I got a kind
of a code sample for it i can show you a
it's a really basic thing so i have a
kind of map listener in here sewed it
and map listener as you can understand
from here that it is a kind of listener
which is responsible about understanding
if one item is just inserted updated or
just delete it ok this is something like
this and I'm just printing the outputs
of it and i have this also this is
continues Claire cash in here I just try
to make something like if that item is
belongs to me or what so how did I do it
this is my model object by the way this
is my model object and it has only is
two fields just ignore these places
these are they it two fields the first
one is the string improves I mean some
string cat
string item whatever you can just say
and the other one is the destination
queue which is the identity of the next
application that you can assume ok so in
here I I've created a CQC in here and it
says that you will listen this cash and
you're going to apply this filter on it
and the filter says that if the identity
of the item is belongs to me ok listen
this it's sample nights ok and I'm just
creating some items in here like this
one for example and in as you can see
that if the destination in choose name
is in q1 then it's going to recognize
that a it belongs to each cell if not
then it's not going to do anything then
let's run this in
it's not going to take a lot of time
yeah still shoot it in here as you can
see that the first item was belongs to
me that's okay and it has just
recognized that that exact item is
belongs to me and the second one is when
I am just updated its also recognized
that item is disciplines to itself and
the removal product also and the a in
the third line of the coat I have also a
inserted same one and let's just change
this and see them see that it's not
catching that updating you for example
make it 2-2 okay and when I do this yeah
you're going to see only three of them
not last one because a it's not belong
to that listener then something like
this not the fourth one that you have
Justin it's something like this so so
I'm going on so we used Oracle coherence
we used it for this purposes this is our
events a event structure the event
information and the other parts and the
next destination part with it and it's
something like this registers itself and
round robin yeah this is a kind of
collaboration of our our flow in here
and in the first place we are trying to
fetch the events from our database and
then is septic the next destinations to
our items and then sends them to a into
the cage I mean insert them into the
cash so this is something like this so
this kind of usage is
basically the lock usage of of the flow
we use this kind of n views this
dysfunctionality to read information
from databases so we made this why
because we don't want to just one item
to be read twice by another application
because it makes an acknowledgement that
one application has luck if one
application has like it means that that
one has black and the other one hasn't
so the application which has luck means
that it is really at that exact time so
the other one is just holding on and
when for example the application one
dies which is about it means that it the
second application is going to have luck
and then continue after this one and the
third one is this as I just mentioned
you in the beginning of my presentation
we need to be fast so in order to be
passed if it is available if it's
available we can we are just having tea
these services informations reading them
and storing them in through our own
caches in order to avoid much more
system calls so we made something like
this in here and it called subscriber
cash which has 35 million a informations
rolled in it I mean the service
information in it and the service
information we are storing it once a day
it's something like 5am are something
like this and we are story that whole
one into our own caches and then a aunt
then instead of
calling the auto services we are just
reaching our event information with the
services information itself so it makes
us a lot faster actually we used nine
notes in here in three separate machines
and it's something I've 54a gigabytes
memory usage on all over the cluster and
it's a it makes a significant
improvement on our system but the case
in here is if this service is not a kind
of for example a highly updated service
if it's a kind of static static
information which which the service
sauce it means that I can of course have
that information and store it in my old
system so this is the kind of thing that
you just use light so the assurance of
the data flow the main principle in here
is our application is responsible about
processing 1,000,000,000 event in each
day but it's not a one hundred percent
should process right like for example we
have the intention to make some
fulfillments over our system so
fulfillment means money so if you lose
money in here the that means that we are
in trouble so in order to avoid this we
we want to nearly one hundred percent
sure that all flow has just processed
that specific event so how can we do
this for example I i have three
application in here and one is sending
its a event item to another so in the
beginning of this flow I'm just
inserting that specific item into the
cash and the last one removes that item
from the cash so
with this I know that that item it has
just processed successfully this is a
kind of users that I mean we haven't
implemented it yet it's not on our
production environment but we are still
implementing it and we're counting on
this kind of usage in in our
applications okay so the conclusion rbm
is a very important project according to
my company so it's it's growing very
ugly aggressively so in order to make
this VIN you need to be faster and
faster in each day so in order to be
fast serving you need to use fast
components like coherence or something
like that anything that you can imagine
so so a in the future according to these
demands we need to use coherence in the
future a lot so that's it that's my
experiences if you have any questions I
would love transfer it's lunch have a
nice day
could you repeat again I'm sorry I live
yeah yeah yeah of course we had we did
for example actually it's mostly some
minor stuff about this but i can say
that i can say that we didn't use them
in local storages i mean we just made
all our applications like local storage
force because we didn't want them to
just use our applications heap sizes so
in order to avoid this we just creating
stable non-cash which are just
responsible about storing and filtering
processes over it's also a each coherent
note it has its own hip and we're
running on that that's the kind of
lesson learnt it because we had a in the
beginning of this implementation we had
a lot of we saw a lot of other memory
kind of stuff like that but we're still
learning without experts on this kind of
products but i can it's i can say that
it's pretty good and something like this
yeah
actually we have a pretty help complex
our information that we are sisters
criterias a yeah we have plenty of
criterias actually for example in this
flow we have a criteria like if one item
hasn't just been operated yet in 20
minutes just erase it or something like
this or or or how can I say or according
to some properties of my items which are
just stored in the cache I'm running
filters over and over to have some
performance information statistics about
this so a big complexity of the filters
the triggers are are of course affecting
the system speed a in order to make a in
order to be fast by the way a in order
to be passed to read two inserts to do
something as like that you need to make
your filters more basic or you need to
create new and new indexes over your
only met but in my opinion it's just not
so nice to do something like this
because if you create an index it's just
cost you over heap
yeah yeah yeah sure sure of course so
it's liked it have a nice day nice to
meet you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>