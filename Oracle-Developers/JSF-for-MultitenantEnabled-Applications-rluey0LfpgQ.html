<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>JSF for Multitenant-Enabled Applications | Coder Coacher - Coaching Coders</title><meta content="JSF for Multitenant-Enabled Applications - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Developers/">Oracle Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>JSF for Multitenant-Enabled Applications</b></h2><h5 class="post__date">2015-06-05</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/rluey0LfpgQ" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so my name's Edie burns and I'm gonna be
talking about JSF for multi-tenant
enabled applications here's some of my
you know my qualifications and non
qualifications just as important I've
been involved with JSF for a very long
time and I've had the very good fortune
and blessing to be the spec lead since
2003 that's a good long run and the most
fun part of the job for me is hopefully
cleanly integrating other people's great
ideas into JSF and hopefully improving
JSF in the progress I'm really happy to
say that many of the ideas that are in
JSF and people who are using to achieve
success and create value came from the
open source community
the facelets the way we do Ajax in JSF a
couple of actually one of the features
I'll be talking about here today
resource library contracts these all
were ideas that were put out there in
the community contributed by the expert
group and the art for me is to try to
fold those ideas into the platform in a
way that makes sense and makes them fit
with the rest of it on the flip side
though I am NOT an expert in applying
JSF in practice so you guys out there in
the field are the ones that are using it
and you know I would like to let you
know that and if you see me around the
conference all week if you have some
complaints or some suggestions please
come up to me and tell me I'd like to
hear that because that's how it's one
important way that the people that are
developing the specs such as myself get
the feedback so we can put it into the
product we don't have the benefit of you
know being out there in the field using
it for real so the best we can do is
talk to those that do I've written a few
books from mcgraw-hill there's a new one
that's out this year about Hudson
continuous integration and practice
that's in the bookstore there maybe so
here's what I'd like to do with our time
that we have together today why do I
think multi-tenant apps are a big deal
this is an area that's new for me so I
might just kind of be giving my
impressions and opinions from a JSF
perspective so I might be saying things
that are obvious to a lot of other folks
but you know
for me it I think it's a why it's
important what do I mean by multi-tenant
capable apps and then talk about some of
the Java EE features that enable these
capabilities and we have a little bit of
a demo and then some closing thoughts
this statement here is just to say that
the following is intended to outline our
general product direction and is
intended for information purposes only
and I wanted to make it extra clear on
this talk because I'm going to be saying
some things that are very just
perspectives on multi-tenancy from
someone who knows a lot about JSF so
there are lots of product offerings that
we have that I'll be mentioning but you
know this disclaimer is really important
to apply another thing I would like to
mention let's see session this afternoon
4:45 to 5:45 there's the Innovation
Awards Oracle Innovation Awards in done
by Moscone so you know it's kind of the
open world and version of the Dux Choice
Awards basically I would like to mention
that you have a chance to go down and
see that okay so what is the big deal I
think there are two perspectives that
I'd like to put out there about why
people make a fuss about multi-tenancy
reduction in cost and a platform for
creativity well let's talk about the
easy one first why people get excited
about multi-tenant capable apps the
reduction in cost you know this has been
coming for a number of years and now
it's finally arrived
cloud computing being when you have
services that are on demand they can be
spun up as demand increases spun down
one demand goes down this has been
coming for such a long time that it was
even called utility computing back in
the day and I'm gonna remember that term
utility computing yeah but when I was
working
with that son you know we had Jonathan
Schwartz there and he had this utility
computing idea and they had the Sun grid
engine and so that was gosh 2006 7 or so
so cloud has been a long time coming and
now it's you know really finally here in
terms of making lots of opportunities
and creating jobs for people and
creating opportunities for companies to
create products so on demand spun up and
spun down that's what he means by
utility self-service you know cut out
the middleman you you are responsible
for provisioning the entities
provisioning the application servers
whatever you need to have that's done by
a different party other than the hosting
provider broad network access has to be
accessible from you know anywhere
provide some kind of resource pooling
where you're able to it's kind of like a
on-demand within on demand so within the
scope of your app which itself can be
spun up and spun down you also have the
ability to pool assets and spin those up
and down so there's a bit of recursive
concept there rapid elasticity that's
also as I mentioned for the on-demand
and totally auditable that is something
that people really need of course if
you're going to church charge by the CPU
hour then everything is totally Auto
auditable and all of these aspects have
lots of implications for the software
that we've written me particularly as
the jsf guy when we want to make JSF
applications running well on the cloud
it's incumbent upon me to make it as
high performance as possible you know
one of the complaints people have event
against the Java EE stack in general and
sometimes JSF and specific is the amount
of complexity that it has to have to
solve the problems in the general ways
that it does and that complexity
manifests itself in lots of code right
memory usage CPU usage so
you know that's in a cloud where it's
charged by the minute
there's a very big performance penalty
if you're using software that is not
optimal so one of the things I want to
point out is when you look at Java EE
and evaluate it against other offerings
there's there's the runtime performance
of it but there's also the complexity
performance of it in terms of how hard
is it to learn it how hard is it to
write the code and maintain it those are
both things that need to be weighed
against each other so I think we have a
pretty solid programming model with JSF
and Java EE and so now that we've got
people using the programming model then
it's the right time to start doing
optimizations and tweak it for the cloud
and increase the ability to have a
higher number of applications running on
the same set of hardware that's just
optimization you know so we are working
on that and I have a very keen
understanding of the importance of that
if we're going to be weighing our
solution against others because
performance is what matters when you're
charging by the dollar and by the minute
rather so a reduction in cost right so
what's the point of that there you can
now contract out most of what your
in-house ID Department does this is what
a lot of people are saying the benefit
of multi-tenancy and cloud is reduction
in cost reducing the amount of work
force you need to have and you know
that's not I think the most compelling
use case for multi-tenant capable apps
but it is the one that people often put
out there another thing that I think is
even better is formalizes the existing
software value chain so you have a
number of opportunities where you create
the application and then you can host it
and resell it and people can add value
at each step in the chain going from
writing the code to hosting it in the
cloud but that's still on the reduction
in cost side of the fence I think as a
developer the creating new value is more
important than just reducing cost so
when people try to sell you the cloud
world
on you can cut your costs I think it's
more compelling to say what can you do
what what new kinds of software can you
create that you weren't able to do
before and that is when you consider the
cloud as a platform for creativity and I
believe that value is created when
barriers to entry are lowered and that
is the things that that is one of the
things that cloud gives us now you know
people talk about the revolution that
the web has brought us right well
everyone can publish you know you know
everyone can have a YouTube video that
gets a million hits or you know whatever
it is the cloud actually gives you that
capability to or you can put up an
application there and start scaling up
and become a gigantic ly successful
operation on publicly available
infrastructure that just wasn't
available to such a wide number of
people just a short time ago so that's
their the commodity cloud platforms
enable service sail opportunities that
can scale up so I'm going to take a look
at this from two perspectives from the
top down you know you have your large
players Oracle we purchased right now
which is a turnkey CRM solution there
are a number of others that are out
there sa P has a turnkey HR solution
called success factors there's so many
of them that are cloud based software as
a service another thing I'd like to
point out here a live person net is a
web chat customer service app that I've
seen a number of places and you know
they build their app and they sell it to
anyone that needs to do web-based chat
for their product and they offer it
tightly integrated into the rest of that
company's stack and you don't even know
you're using live person net but in fact
they're the ones providing the WebSocket
and whatever other software
infrastructure they have and the ability
they have to offer that to a number of
different tenants such that the users
don't even know that they're using that
kind of service that's one of the things
that cloud gives you
that's from the top down you know the
big names that are saying okay we're
going to go into the cloud we're going
to take our you know investment and put
it in cloud I also think that it's
possible to look at cloud from the
bottom up amazon has created basically
an app store for cloud apps called the
Amazon Marketplace and in there you can
get lots of different things you know
cloud based point of sale software
ecommerce software medical practice
management software you buy it and it
runs on amazon's cloud and you know you
can do business apps that way and one of
the things that i was not so happy to
see when i surveyed what was in amazon
marketplace was there wasn't that much
of you were a java developer i wanted to
put java solutions-based up there so
that's something that i hope we can
start to look at it more although that's
just my opinion and I'm not announcing
any kind of oracle plans in that space
because I don't know of any but we are
that's just something I think as a Java
developer down here in the trenches I
want to make sure that my code has the
widest possible chance to get out there
to developers that are using it so the
fact that I didn't see any JSF based
apps out there is something that is I'd
like to see what we can do about that
okay so what do I mean by multi-tenant
capable I've seen also lots of other
ways of trying to explain this and sass
pass as a IAS s you know so many
different ones I'm gonna try to simple
simplify it and just have two buckets
one size fits most
and a few sizes fit all so what do I
mean by one size fits most there we are
serving the same app to multiple tenants
using the same hardware physical or
virtual and same software configuration
so you're just having the same app the
only thing that varies is the private
data per tenant and maybe there's some
UI customization is going from tenant to
tenant
the other side is this few sizes fits a
few different sizes fit all we saw
mostly the same app to multiple tenants
using the same hardware or physical or
virtual but the software configuration
can now vary greatly from tenant to
tenant and the thing I'll be talking
about today is how that configuration
can vary in terms of feature set and
style customizations there's two
features in JSF 2.2 that I that let us
do that and of course with this a few
different sizes fits all you still have
the concept of private data per tenant
configuration is a really important
thing and I didn't take the time to put
a set of slides that point to other
talks on this there are lots of talks at
JavaOne about this topic multi-tenancy
but there's one that I would like to
recommend that talks about configuration
in specific by Mike Keith if you look up
his name Kei th and search for the
string configuration you'll see it he's
giving a talk about some ideas he's had
about the need to have a JCP jsr for
doing configuration management so I do
recommend looking in the schedule
builder and trying to find that
so let's run through some of the Java EE
7 features that support multi-tenant
capable applications there are a lot of
things I could have chosen to answer
that question but I only pick the most
obvious ones the ones that I had the
most familiarity with in my work as JSF
spec lead so our product story here is
you know we have Oracle Fusion
Middleware it's ready for the cloud it's
designed to let you maximize your
existing technology investment with the
same technologies used in fusion
applications including the embedded
analytics social collaboration mobile
and Kella computing and so it's a really
complete so a platform that lets your IT
organization really just quickly build
things assemble them put them up there
and run them either in an on-premise
cloud or out in public clouds as well so
here is this what I was talking about
where one size fits most you have you
know your one managed server and you
have a number of different instances of
this patient management software and
they are sharing one big database but
they have their own private database
within that that is not shared between
the apps but you know the schema is the
same all the other stuff is the same
just maybe some style differences
between there so in Java e7 the feature
that enables that or one of the features
that enable that is all of the work
that's been done and JPA to not wanted
for automatic schema generation so what
that is is generation of database
artifacts you know your tables your
indices your constraints your generators
and it's useful to have this schema
generation in a number of different
aspects first of all when you're doing
iterative prototyping if you you know I
know this from doing many demos you have
the ability to already have your app
pre-populated with some dummy data and
once you get a system that works for you
they're doing some prototyping is easy
you don't have to worry about
entering it in each time of course in
production when you're putting your app
on the cloud you deploy it and then the
fact that when it deploys it can
automatically create the tables and
other kinds of artifacts that it means
from a persistence perspective upon
deployment is a really useful thing in
the cloud what you're what you're
deploying to or which you what you're
generating is basically a database
schemas and tables the DDL or both of
those things you're doing it either from
the object relational mapping made of
data which has been encoded with JPA
attributes on your entity classes or you
have some DDL scripts that you're
referencing from your persistence files
the important thing though is when it
happens just before the app is deployed
almost you know I guess you can consider
it to be atomically from when the app is
deployed so JP a 2.1 has some new syntax
you can refer to in persistence XML
where you can do database action script
action there you are be able to create
create and drop drop tables all the
things you would do with SQL to populate
your database and you can configure when
that will happen how frequently that
will happen whether it's every time or
you know just once you know that sort of
thing so that's in the persistence XML
another new feature that we added is the
existing table attribute that you could
put on an entity has an indexes property
on there and this index class lets you
you know name the columns and such that
are that's new and JPA 2.1 foreign key
is also a new class that we've added in
JPA 2.1 it overrides the persistence
providers default foreign key lets you
specify the foreign key constraint so
that's an example of that right there
so now that's that's the one size fits
most where I would really like to spend
the time is focusing on the jsf features
that enable this few sizes fits all and
I will assert that the extensible
architecture of JSF puts it in a good
position for this it's very clear that
we spent a lot of time in JSF and making
it extensible and that time has paid off
in terms of all the different component
libraries you can see that are extending
JSF the ability for it to go so well
into tools and also there's a lot of JSF
extensions that build on top of all this
stuff most of those extensible artifacts
can be encapsulated in jar files and
when you do that that allows for doing
composition at deployment time so with
the waar deployment artifact you put
your module jars in the web and Flibe of
course with the ear you just put the
your module jars in the ear so that they
can be separate from the war with
GlassFish you could also you know have a
pre-built custom domain one approach to
cloud is having one app server domain
per tenant and you know that's a good
way to do it you got a lot of isolation
that way but it's not as efficient in
terms of allowing a lot of density if
you have one domain per tenant but it
certainly is a good approach because
it's easy to do easy to understand so
there's some new features in JSF 2.2
that talked about modularity and multi
tenant capability and you know I'm going
to say that the intent for these was to
allow composing a JSF app as a
collection of modules the phases flows
feature allows you to modularize
behavior and the resource library
contracts feature allows you to
modularize appearance so both of these
axes can be independently composed at
deployment time so you can have a number
of different
appearance setups for your application
and this is not just skinning you know
this isn't just okay like a blue thing
or a red thing this is you know the
whole layout of your whole application
you know are you going to have your
navigation on the top your navigation on
the bottom navigation on the side which
parts of the app are going to be subject
to different kinds of navigation or
templating rather you know the full
depth of what you can do with facelets
it can now be modularized and swapped
out and as long as you play by some
rules as far as how you construct these
things and they all can share the same
contract and I'll explain what that is
then you have the ability to create
systems that are very customizable and
swappable and modular based on just what
you put in the wor there and the other
one is the faceless flows marginalizing
behavior you can decompose your app into
a collection of flows and if you
construct it right the app will function
fine based on how many flows are in
there right you know so the demo I'm
going to show will will explain that a
little bit more the important thing
though is that there's a well-defined
contract for each of these things and
the ability to have a contract is what
lets you get the reuse so the two new
features there are resource library
contracts it builds entirely on facelets
concepts and faces flows builds on
navigation concepts let's take a look at
resource library contracts and let's
review what facelets does for you does
anyone familiar with facelets ok great
so you have your template client you
have your template and in order for the
template client to get something done it
needs to know what are the names of
these holes so it could put the stuff in
there if if it needs to do some styling
it might need to know what are the names
of the CSS classes that are used out
here so it can make sure to decorate its
markup with that same kind of stuff but
basically just three pieces of
information that needs to be put out
there the insertion points
the template file name and to a lesser
extent the resources you know if there
are scripts out here or images out here
that need to be also used inside here
then that's a part of the contract so
once you have those three things you
really do have a contract so the
contract can put comprises the declared
templates the declared insertion points
and the declared resources now where you
can put these this is the important
thing as far as modularity is concerned
we'd like to follow the principles that
we borrowed from Ruby on Rails in JSF
2.0 which is convention over
configuration so if you will just like
to take your contracts and put them as
subdirectories in the web app root slash
contracts directory all of the stuff you
just put in there will automatically get
discovered for modularity sake though
you also would like to have those be
available in jar files in web and fly so
there's a syntax for doing that you know
made it in contracts and then the same
subdirectory arrangement those two
sources for where the contracts are
comprised the set of all available
contracts in the application and by
default and face the page and the app is
able to use any of the contracts there
so assuming that there are no duplicates
among this stuff you know
contract ABC all of them have a
completely disjoint set of template file
names
that's the condition you have to have
here but if you you can live with
arranging things that way then you can
just throw them all in there and any of
the pages can use them by simply knowing
the name of the facelet file however
that's always not that's not always
possible right sometimes if you're
developing a large corporate app you
have different teams that are doing
different kinds of templates and it's
not uncommon for there to be a you know
customer review template and it might
have the same name so if you have that
circumstance you can use syntax in the
faces config that I
some l2 control which of the contracts
are exposed to which of the pages
there's also a new element we added on a
new attribute we added on F : view the
contracts attribute were there you're
specifically saying I would like stuff
inside of this view which could be other
template pages to be able to pull in
template files from this contract or
this list of contracts rather okay so
the important thing there if you're
using the convention there that it
assumes there are no naming collisions
but if there are collisions then you can
use this resource elaborate contracts
element and phases config so that's the
resource library contracts feature
that's what it is let's talk about flow
flow is like a java method finally we
have the ability to have that in the
core JSF specification and then that
sense it as a single entry point it has
input parameters it could have multiple
return values and a well-defined
interface contract and importantly the
implementation details are hitting
hidden so when you call into a flow you
know you might not you don't have to
know what that flow does you just know
you're calling it and you're some things
will happen and you know it'll come back
out from a net but it's not just at one
single implementation of invocation of a
method it's a whole series of
application functionality that is now
encapsulated inside of this we added a
flow scoped implicit al variable for
just storing name value pairs I mean
name values and that will automatically
go away when you leave leave the flow we
also added a CDI annotation where you
can attach that to your CDI beans and
they will automatically become active
when you enter flow and go away when you
leave the flow and I mentioned earlier
that the in order to understand flows
you need to understand JSF navigation
that is definitely true but navigation
is no longer just between pages as it
was in JSF 2.2 navigation is between
pages and flows and within a flow you
have multiple different kinds of nodes
there is the view node which is just a
page facelet page method call which is
just a way to invoke a method take the
outcome and put it somewhere decide
where to go next switch which is a list
of method invocations and the first one
that evaluates to true is the one that
will be about taken for navigation flow
call that's how one flow calls another
passes parameters and return that's how
your flow method returns so each of
these things builds on the packaging
scheme that we defined in JSF 2.0 and
that pattern is there's some special
directory in the web app root and then
there's also some special directory or
special location in the class path so
inside of your jar files in general the
first approach is useful during
development and the second approach is
useful during deployment now it's not
just markup files and XML that reside in
these things you know when you have a
flow it also has its own set of beans
its own programming logic in fact you
can even define the flow itself using
Java code using a fluent builder API and
there it's really important to consider
how you're packaging these things and
what technology you're using to do it
JSF has long had support for using the
groovy programming language to define
its code based artifacts so your managed
beans and your components and other
kinds of things can be written in groovy
unfortunately we haven't yet gotten that
part of it working with CDI so using JSF
managed beans written in groovy isn't
something I know if it works or not so
but you can still use these features
without using CD I managed beans you can
just use the CDI runtime that needs to
be there for flows but the reason I want
to point that out is this distinction of
development time and you know production
time because iterative development is
really key so that's why I like to have
groovy be put out there because it's
very useful when you're not quite sure
how your app is going to look you're
still fleshing out the domain model
you're wanting to play with things and
change them and if you have to redeploy
every time you have two choices either
by a product like J rebel or you could
you know use groovy for your beans and
in fact a lot of IDE s automatically
always redeploy and compile stuff anyway
and it's it's been pretty fast so it's
just something to be mindful of so
there's a couple demos that I'll show to
illustrate this
okay the first I want to mention can
everyone in the back see this code No
okay so I'll have to do this little
trick here is those you know i zoom
around a little better like that see it
then okay alright so let's open up this
example here I have two demos one of
them is a little bit flashier than the
other but not as targeted so I'm going
to open up the simple one first that is
more tightly targeted here here we are
oops sorry about that I just wanted to
play it to the right container yeah
sorry about this it's a multi module app
that's the reason this is the one I need
to open okay this is the one I need to
make sure I star get to the right
container and then that's not the right
one this is the right one
okay let's build this I hope it builds
if it doesn't we'll just skip this demo
and go to the other one okay thank
goodness it did okay and let's run this
one okay it is coming up flow and
contract very good okay
okay simple app you enter a flow you
have page see page B and page a and then
you go back out of the flow so what is
happening here
we have the main web page it has a
template and the template says menu dat
XHTML so that would mean there must be
some file somewhere called menu that
XHTML let me look for it well wait I
don't see it maybe it's in web and no
it's not there where is that coming from
well of course it's coming from a
resource library contract and where are
those guys declared well in this case
I'm using maven so the palm just has
these dependencies here alright so this
is the dependency called left nav and
that means that the navigation is on the
left so let's take a look at the left
nav module this is a resource library
contract packaged as a jar and it has
opened for me one of the things I need
to talk to the NetBeans guys about is
when you open up a jar that's a resource
library contract the pages don't show up
as cleanly as I'd like you have to dive
way down into the other sources section
so there it is there's our menu so this
is just a facelet page and it uses it
puts has two regions a menu and content
and it happens to arrange them on the
left them arrange the menu on the left
and the content in the middle when you
package a resource library contract in a
jar file you have to put this extra
marker file in there this is something
we look forward to enable us to discover
them at runtime so that we don't have to
well really it's the only way we can
tell because you can put facelet files
in a jar this is the only way we can
tell is it a contract or is it just to
face the file in a jar so that's a
marker file you don't need that when you
are just putting it in the contracts
directory off of the web app root okay
so this is the menu and it has some
references to some CSS as well okay now
the other thing I'd like to show off of
them that's the main template the main
file which uses the main template which
therefore which in turn uses the
contract simply has a button on it that
says enter flow and the action is flow
so all right what does that mean does
that mean there's a navigation rule
somewhere that that says flow well
there's no phases config and there's no
page named flow so okay there must be a
flow that is named flow and in fact that
is the case so going back to the palm
and this of course doesn't have to be
based in maven I'm just using maven
because it's very well supported in
NetBeans but the concept here is we
build stuff in Java EE and we let
vendors you know like C I this was much
easier to tell the story when Sun was a
separate company from Oracle uh-huh
because then Oracle would have his app
server and some would have an app server
an IBM and have a zip-up server now you
know it's just Red Hat and IBM and
Oracle so the space has gotten
consolidated but anyhow that happens we
in the JCP build technologies and app
server vendors such as Oracle and IBM
and JBoss and and others they could
provide value-added services on top so
I'm showing here a deployment model
that's based on maven and that's you
know very simple right but it's easy to
understand that app server vendors are
going to take these features and build
more product ready Enterprise ready
features on top of it so the the key
thing to look at is just what this
enables here the ability to modularize
your apps and I'm just doing it with
maven so CBA you notice that when I went
from page to page
it was page see page BBJ well that
that's this flow CBA so let's take a
look at
what CBA is multi module here we are
CBA there's CBA so this is also packaged
as a jar and unfortunately again because
I need to talk to the netbeans guys
about how to best render this you have
to dive down into source main resources
so this is where it's packaged in the
jar file made it in flows and then the
flow name directory the other thing to
note when you are packaging flows in jar
files you have to put the Declaration of
the flow in the faces config for that
jar file so this one explicitly defines
three different view nodes a B and C and
it defines a return which goes back to
the main page and the individual buttons
on those pages when we're on a we go to
next let's say the action is that's
returned where's the page a content
command button next value equals next oh
that's right because a is the last page
something it's showing me this in
alphabetical order but this flow uses
CBA C is the first one next is B and
we're on B and next goes to a and there
that's the end all right so you know
let's just show how you can change these
things by changing your pump on deploy
this I'll go and edit the palm and
instead of left nav we'll use another
one top nav and instead of CBA we'll use
ABC so we'll save this and redeploy it I
have to get make sure I click on the
right node because I only need to
rebuild the app not all of the other
ones in the module so I'll just do clean
and build to make sure
and then I'll click on this
okay let's try it again okay so it's the
same layout but now we have the buttons
the navigation on top and in the flow
we're doing ABC so all I had to change
is you know what's deployed with the app
what goes into the war but because I'm
relying on the fact that all of these
different things are sticking with the
same contract the same usage contract
it's not really a rigorously defined
thing it's completely up to you about
how you want to define it you know
there's not like we have a compiler that
checks that all of these names are lined
up correctly and stuff that's you know
that is a tool that certainly could be
built but we wanted to keep it as
lightweight and informal and therefore
flexible as possible does this get the
idea across about the different axes of
modularity okay a more detailed example
I took the old standby the good old
scrum toys app does anyone familiar with
the scrum toys app it's a JSF sample app
that was written by the global code
people a long time ago but we've you
know it's a good solid app anyone well I
see I went to a talk by Nathan shuddha
who was a guy on the no fluff conference
circuit at Java zone and also a couple
weeks ago and he was talking about all
the different JavaScript frameworks you
know knockout angular backbone all these
different kinds of things and he was
complaining about the fact that well
everyone has to build a to-do list it's
like the typical example that people
build to show off JavaScript frameworks
well no one has ever built a to-do list
for JSF although if someone wants to I
think it would be neat to see how it
would turn out but I don't have a to-do
list I have a scrum thing another nice
thing about it is that you know it shows
off the Java EE security and
authentication a lot of demos like leave
that off you know but you actually can
log in to this thing and so the basic
concept with scrum
is simple scrum thing so inside of the
top level you have a collection of
projects right so you can create a new
project we'll call this Java one project
and inside the product you have a
collection of sprints and so this is
called Monday give some talks and we
have to have a daily scrum meeting of
course and the Sprint is composed of
stories so we can create a new story
this is talk about JSF the acceptance
criteria is that people listen and you
know there's a little dashboard so when
you're editing your stories you can
let's see here
edit the story and update the sprint or
you can go to the dashboard I remember
what you do now inside the story there
are tasks right let's take a task which
is point a and it has a start date of oh
nine 23 2013 and we'll leave out the end
date and so there's this dashboard
component with this is a JSF composite
component and with scrum you have these
stickies that you put on the wall so
things go from to do to doing to done
and the idea with scrum is you make sure
that people stickies are moving along
the wall and if they're not then you
know who to talk to and when you give it
a done date oh nine twenty three twenty
thirteen and update this and show the
dashboard again you'll say it's now
showing up in the done column so this is
just the standard scrum toys JSF demo
what it also had a skin concept which
was built in before with you could
change you know
this was really just skin you know
changing the color we haven't updated it
to be more advanced or we're changing
the layout and stuff but we could so
this one offers three different colors
here blue yellow and orange there's a
red one also so why is it not showing me
the red one well it's because all of
these with the exception of blue are
packaged as resource library contracts
and I have some code that is in the app
that simply just is aware of these
contracts and only exposes the ones that
are actually there so if we we close
these other ones out so I don't get too
confused close that okay the skin values
manager is this guy that has a post
construct method so this is the thing
that lets us change the skins right and
it says - it creates a view declaration
language actually I forgot to have to
zoom in and it calls this new method in
JSF to point to calculate resource
library contracts which takes a facelet
page and returns the list of contracts
that are available for use from those
pages or from that page and it's child
pages and based on that it composes this
little list here which is then referred
to in the my page that lets us choose
the colors so if we look at skin change
skin you see this is a UI repeat and it
puts a post-it component which is a JSF
- auto composite component out there it
puts a number of them out based on what
comes back from this color tuples and so
let's look at the palm for this thing
and this one we have yellow and orange
and red oh I know what it was
I uncommented this and then re comment
it out but I didn't rebuild the app so
as I said blue is built-in and orange
and red
so let me undo ploy the app and redeploy
it and we'll see actually let's take
them all out let's get rid of yellow to
make it more impressive here and we'll
we have do I still have red yeah I still
love red let's get rid of red as well
and certainly in production you wouldn't
be just commenting things out or not
certainly hope not
as your way of deploying things alright
be run this guy okay
so we have blue yellow and orange I
think we shouldn't I forgot to get rid
of orange didn't I yes so now we have
just orange and blue I mean University
of Illinois fans out there orange and
blue that's my alma mater go Illini all
right let's see so I had to deploy it or
did I deploy it let me check
oh I forgot yeah here's the break point
so this is set in the post construct
here this is an application scoped beam
so it's going to get created and stay
around as long as the application is
running so we're calling this calculate
resource library contracts and if we
step over this there should be just two
in there yes blue and orange so now I
know that when my change skin page
happens there only be two entries in
that list there orange and blue okay so
that's the behavior and then this simple
app adjusts it is just a skin but you
know I've already demonstrated to you
with the other demo that you could build
more complex arrangements of things
other than just changing the colors now
that's appearance but it's also
important to modularize behavior so I
have a flow that only shows up well you
get a button that lets you do activities
in the app but only if that module is
present so that happens to be in the
edit stories page so if we look at
stories and we click Edit story we would
like to manage some file upload
attachments for this so we can add an
attachment using the new JSF file upload
component and let me make sure I have
the file correct
alright so I'm gonna create a file here
so cat message dot txt and I'll just say
please upload and ok let me make sure I
typed it correctly yes please upload all
right so let's just upload this file
there it is
so there it is please upload we try to
update this aha okay we have a validator
this was shown in the previous
primefaces demo I think he may have
gotten it from here
so there's a validator this is just
showing off a new feature in JSF 2.2 so
my validator asserts that the string
scrum toys is present in the file in
order for me to upload it so let's just
put scrum toys in here there it is and
we'll try again mmm here we go there it
is
and I will upload it and so now we see
it there it's there okay the reason we
see that is we have on this edit stories
page we have a thing that's an
application level concern edit I think
yes so we have a button here who has a
rendered attribute and this is a
standard JSF thing and it if it's true
the thing gets rendered if it's false it
doesn't so I'm calling in to this
application class called feature manager
and I'm saying if this flow is enabled
then make sure to render that button so
if we look at get flow enabled it uses
this kind of a similar idea to I just
showed you with resource library
contracts we call a JSF API and we say
the string here is the flow ID and we're
asking if it exists and if it does we
return it we don't in this example we
don't need it we just are testing for
null so really it could be is flow
enabled it could be a proper boolean
property but I've made it as a string so
if we go to the pom we'll see that there
is a flow module there called managed
story attachments so let's comment that
one out and see what happens to our page
okay let's redeploy it
okay and basically we should see that
the button just doesn't appear and the
user is none the wiser you know so if
you're using an application that you
know let's say you have a medical
practice management software and you
have three different versions of it the
small medium and large version and the
small version just lets you have
patience and give them allergy shots and
that's it the medium version might let
you have patience and you can send them
out to diagnostic labs get lab work done
and then analyze that lab work in and
then the large version will go even
further and let you see other primary
care providers and go to specialists if
you want you know the person who's using
the small version of the app doesn't
know that there's large and medium
versions out there but it's the same
software and the application vendor that
little box thing where I was having all
those different pictures has a choice to
add value if they want to subcontract
the creation of sub modules to other
companies to plug into their system they
can do that so it just lets us have all
these different domains and
possibilities for new kinds of software
all right so that deployed and now if we
go back and try to go to the page where
we formerly saw the button we will see
no button there sprints stories edit and
yes there's no button there all right so
just have a few slides left we're almost
done
another basically there's a lot of other
stuff in JSF that's amenable to this
render kits themselves can be packaged
in jars so it's possible
well the idea with the JSF render kit
from 2004 was to have client device
independence so you could have you know
one JSF app and it works well on a
mobile device and the same app works
well on a desktop browser just by
putting a different render kit in there
are some solutions for doing that it's
possible then that you could make device
independence an optional feature you can
sell an app
have an additional price point for if
you want to expose the app as a
smartphone ready browser format
localization could also be modularized
in jar files you might have a set of
core languages but if you would like to
localize to a language you don't support
you could sell that as an additional
option so all of these things are kind
of a part of the Oracles cloud
application foundation effort and you
know we'd like to have this choice
concept here where if you want to run it
run your business on premise inside your
data center safe from the prying eyes of
the NSA you can do that if you if you
don't mind the NSA looking at your stuff
you can put it in you know a public
cloud or Oracle cloud is you know we we
host that so you know that's different
you have the flexibility to run it
anywhere you choose that's what I was
kind of get across with the previous
side inside the data center all the way
out to third-party clouds and to Oracle
clouds as well so I will leave it right
now there's maybe three minutes for
questions or you can come up and talk to
me at the end go ahead right let me
repeat the question for the video so
that's a great idea and I would like to
see that this is something I'm trying to
get out there is the idea of a
ride-along configuration you put it out
there and I kind of just rides along
with the water when it gets deployed
that's something that Mike Keith is
gonna be talking about in his
configuration jsr but right now the only
thing that works in practice is to make
it here yeah so you could put the war
and let the modules in the ear so that's
the unit of deployment but I really
would like to see a thing where you can
just have a loose collection of jars and
throw it up there there's no reason why
we can't do that
so I think that's a good idea so let me
repeat the
the question was is there a ride-along
feature where jars can be just sent and
tagged along with the wired deployed and
make as if they were in the web mints
live and the answer to that is not yet
but I think it will make sense
any other questions okay well thank you
for your time and I hope to see you
around the rest of the conference</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>