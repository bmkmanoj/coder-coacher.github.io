<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Creating Our Robot Overlords: Autonomous Drone Development with Java and the Internet of Things | Coder Coacher - Coaching Coders</title><meta content="Creating Our Robot Overlords: Autonomous Drone Development with Java and the Internet of Things - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Developers/">Oracle Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Creating Our Robot Overlords: Autonomous Drone Development with Java and the Internet of Things</b></h2><h5 class="post__date">2015-06-02</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/28tyQfHk34k" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so this handsome gentleman over here
stand up please you John oh please stand
up he's a great lineup please
okay so this is Sean Michael Phillips
and he works for AI solutions and AI
Solutions is a company that they don't
have they do something having to do with
rocket science and so you can tell me
while while mark is setting up what you
do so that's all true AI solutions is a
company that is based in outside of
Washington DC and we service flight
dynamics and mission design and rocket
payload launch services out of Kennedy
Vandenberg Air Force Base Johnson Space
Center the Goddard Space Flight Center
Wallops anything in the Western
Hemisphere and what I do is I write
ground system software in job oh and you
brought your Posse with you right oh I
absolutely stand up and took yeah let's
embarrass them over here stand up Shaun
Henley Keith Chapman and xav these guys
all they're 35 different NASA missions
and US Air Force all human spaceflight
in the Western Hemisphere right there
god help us
Marc heckler Marc heckler is a colleague
at Oracle and Marc did most of the work
that you're going to see relative to
that drone and in the in the programming
and the whatever except for a lot of
what you'll see underlying was done by
these two guys down here will you please
stand up these are these are the perotin
drone guys I know yes stay standing I
gotta introduce you that's right I'm
gonna call him out again are you gonna
call oh yeah okay
you'll get your punishment here in a
little bit okay and so just so so what
do you do Marc from day to day I'm not
really sure I work with large enterprise
customers so I'm out in the field with
Oracle I'm not always you're gonna do an
Oracle come here
so no snow now what do you do have fun
what do you do for fun all over the map
but I really love the Internet of Things
IOT work a lot with JavaFX it'll work a
lot in the intersection that's how we
all got together and put this together
but IOT is kind of a passion of mine you
hear a lot about that this this week but
that's it's it's just where all the
things are happening it feels like and
that's where all the fun is I think so
where are we going today well we're
going to talk about how we got here from
the idea to oh my gosh what are we doing
- we can actually make this thing fly
okay so let's I guess you want an agenda
up there what do you want - what do you
want let's go joy yeah so what we're
going to do is talk about autonomous
flight so you've you've all seen drone
presentations before one of the things
that we're gonna present is this idea of
autonomous flight and mark will get more
into that a lot of times you'll see
these drones controlled by you know like
a an iPhone or something like that but
in this case all the brains everything
is strapped into this into this drone in
a Raspberry Pi in the programming with
that parrot on drone guys the parrots on
Java guys underlying sdk which is which
is awesome
okay so then I'm gonna talk a little bit
about the quadcopter itself the AR Drone
quadcopter we're going to talk about how
it's got Raspberry Pi for brains and and
then we're talking going to talk about
how we're leveraging some Internet of
Things concepts and tools most notably
like MQTT and Mark's gonna explain what
that is and then Sean's gonna take over
and show how he developed a simulator
where where it's kind of taking the raw
data out of the the flight recorded data
that's coming out of the the drone as
its flying and importing it and then
simulating it in 3d and then we'll talk
about some next step
so that's where we're going so what are
we gonna do now mark well I guess first
things first I I'd like to kind of start
with stepping through the decision
process the things that we considered
the things that we decided and how well
or how poorly that worked this will be
hopefully this session will give you a
lot to think about in terms of lessons
learned good and bad because we realized
a lot of things once we got started down
this path that we had no idea we were
getting into when we started so stand up
oh sure yeah thank you I am standing
what are you talking now come on
anyway all right well anyway okay first
things first
choosing a drone that actually became a
pretty easy process because what we
wanted is a drone that we had access to
an underlying API there aren't a whole
lot of those especially in the sub
thousand dollar range so it quickly
narrowed down to one the seven thousand
dollar range no sub one thousand two one
thousand right okay thanks
so we wanted I guess some of our
criteria were foundational library we
wanted to determine the level of
autonomous ops that we were going to
support I'm getting ahead of myself
already this is so tough but once we
kind of did made our decisions the
things that we knew we would need is
obviously the drone we also needed a
brain which we settled on the Raspberry
Pi for a few reasons we'll go into here
shortly and once we had the drone and
the PI we had to figure out a way to get
power to the to the PI the brain for the
the drone and have it communicate with
the the drone itself
and then making it all work because once
we had all the pieces we were no closer
to getting it to work so that's as I say
where things get really interesting oh
and I would like to say that as we're
going please raise your hand ask
questions because I'm sure you know I
want to make sure that we're getting
your answer questions answered as we go
I also am very remiss to point out two
other very special people in the
audience and I'd like you to stand up
please this is team our team on
and Ava and there all the way from
Netherlands and yes and they have a
company called Agora sense in which they
have done lots of drone programming for
for agricultural usage being able to
monitor things and over crops and things
like that so it's really cool you've got
some real real real experts in the crowd
here so it's it's pretty it we've got a
pretty tough act to kinda it's please
here but I will also say too that this
is a kind of a as you might imagine
there aren't a whole lot of people who
are doing this yet so when we first kind
of threw out the flag and said this is
something we're looking at doing we
timon reached out to us right away we
got in touch with the appearance on Java
guys and everybody has been just super
with exchanging information and and that
has to happen because again there's not
a lot of information out there some of
the information that is out there and
well documented is not complete so you
you have to work together to make it
happen and the Java community is just
superb at that was there a question over
here somewhere yes sir well I would
recommend you buy one with a lot of
reservations and and I'll kind of go
into the decision process here shortly
but I think by the time we're done
you'll understand why we went the
purchasing price the purchasing route
that the short answer is for about $300
you get a drone with a published API and
a couple or three or five libraries you
can work with the longer answer is
that's not as nearly as precise as you'd
like so it depends on what you want if
you want a lot of precision if you want
full control you have to own the stack
but if you want to get started with
something and and be productive and and
see how far you can take it then then
buying a drone is is the best bet okay
oh yeah as I said I'm kind of ahead of
myself
we wanted a published API a good
community the price of equipment was
important the air drones go for about
three hundred dollars I tweeted about a
week or two ago that there actually was
somebody
gotten ahold of a batch of refurbished
AR drones that were parent refurbished
and we're selling for $159 great great
deal you should see the look on their
faces right now this yeah I didn't buy a
mine for a hundred fifty nine eyes oh
but the good news is I mean you can get
some really good deals out there and get
started for fairly inexpensively so then
it comes to which library we wanted
capability obviously because the more
capable the library the the fewer
problems you have again just out of the
gate we wanted something that was
reliable and and we had tried a couple
of three different libraries and one of
one of which was very full-featured but
not terribly terribly reliable we would
drop connections and when a drone is
flying and hovering in a drops
connection that's inconvenient when a
drone is flying forward at full speed
and it loses a connection that's really
a problem
so we after several discussions Jim and
I were going back and forth and just
saying this this just isn't gonna work
we we talked to the parents on Java guys
and I'm just here to tell you when you
start looking through the code it's
clean its elegant its reliable it's
great
so mostly parents on James these guys
stand up again here please
so we reached out to them they added
some capabilities that that up to that
point they hadn't had to they were great
to work with just just super guys so
can't say enough nice things again the
community rocks so that's kind of in a
nutshell the stack so the pieces the
hardware pieces we have the drone we
have the brain I'll touch lightly on
this because we have a full bill of
materials in there later but what we
wanted to do is rather than have an
external network that we have to deal
with kind of my goal was to set this up
to where everything is on board
everything so what I don't get ahead of
myself bit again but we have a couple of
Wi-Fi adapters in this the SD card which
acts as the the hard drive the boot
drive for the PI if anybody's is new to
the PI and then we had to power it
there's no power plug on the drone that
lets you power an external device so
again getting ahead of myself but the
little mobile phone chargers this one's
a 2600 milliamp charger but it gives
alpha one amp of current for your mobile
phone charging it also works beautifully
to power a Raspberry Pi so we connected
all those and once we worked out the
kinks everything talks and how do we
hold it together well we use duct tape
but ok we don't use like velcro is a
much better solution yes I have a
question mark how much weight did you
add to the copter with your power in
your brains
that's another great question the the
drone comes with a fairly light fairly
small battery which runs about 10
minutes and that is just not enough to
do any kind of testing whatsoever
so there are aftermarket batteries I
have a couple that are much larger or
much heavier and much greater capacity
they'll run about 25 minutes which is
great when you're flying but then it
also adds weight and adds a little bit
of instability to the flight and the
flight dynamics are not terribly precise
to begin with and that goes back to the
question of the make it or buy
it's one thing that that we realized
really quickly is when you fly these
things with a tablet or a phone and it
starts to drift you without even
thinking about it you compensate you
just tilt your phone the other way you
don't even notice you're doing it when
you program it to hover and it drifts
what do you do because it's a closed
loop it thinks it's right where it ought
to be when it's running into your drapes
not that I know that from experience
but my wife god bless her is the most
patient soul on the planet and I
destroyed her houseplants I made several
dings in the walls of our living room
and and just was a terror it was a
terror to to some of our furniture so
I'm lucky to be sleeping indoors this
one drew but so quickly quick overview
of how to configure the positronic brain
there Asbury pie that's really the
central piece so what I did was
configure one Wi-Fi adapter to connect
as a client to the drone because really
quickly how the drone works is it has a
wireless access point on board so when
you connect to it with your phone or
your tablet it's just like you're
connecting to your wireless access point
at home your wireless router only it's a
point-to-point
well if we set up one Wi-Fi adapter as a
client then it can serve as that tablet
or phone to connect to the to the drone
but then what I wanted to do is set this
the PI to be a wireless access point and
run hostapd and DHCP server so I can
connect it with another machine and feed
it well thank you and and feed it from
my machine so again more details coming
up and I kind of touched on this already
how do you power it well you can't we
initially had hoped we could power it
from the drone but you really can't at
least there's no published way so we
just added our own power source which
gets back to the weight and the flight
characteristics because just like an
airplane the more top-heavy it is the
less
stable it is flying and of course
everything is sitting on top and an
additional weight that it it does manage
to work so okay
and when one facepalm just doesn't cut
it and believe me it just did not cut it
we didn't anticipate a lot of issues
that in hindsight seemed terribly
obvious but but they were there some of
the early issues that we ran into and
and thanks to the parents on Java guys
for pointing some of this out we were
running on a different version of
firmware because when you get the drone
it's just whatever comes on it and
something that works beautifully on one
drone won't work very well at all on
another and finally we identified we're
on different levels of firmware so I
updated and everything settled right
down so that was a good learning
experience after several failed flights
API challenges because we were trying to
design an autonomous API and work with a
foundational library which we again was
the ferret's on Java drone API but you
have to work all those details out
equipment challenges again with the way
the distribution the battery the
somewhat frustrating lack of precision
in the flight so we had a lot of
challenges we work through pretty much
all of them I think we didn't kill
anyone on our demo flights so I think
we're good on that here was kind of what
we went in thinking we would run into
some nice friendly robots everything was
Pleasant it would cooperate we would all
get along and this is kind of where it
went it was more like this we I really
felt in many Thai in many ways that my
drone was out to get me I I learned and
this is kind of a pro tip if anyone
wants to try working with these if
you're doing this in a small confined
area like your wife's living room if you
get fishing line monofilament line and
tie it to the little loop on the front
where the camera is you can actually
keep it in in tow so if it goes crazy
you can kind of you know hold it in the
downside to that and this is another
learning moment teaching moment is that
if you apply any pressure to it at all
when it you think oh no it's going to
hit the piano if you apply any pressure
to it at all it fights back so the
entire flight is scrapped you can't test
that flight because it's just going
crazy after that point even if it wasn't
before and then you finally have to
wrestle it to the ground reset it and
start again we gave a lot for this
presentation okay so it was more like
this with a little bit of this thrown in
these are sharp plastic blades that spin
even with an indoor hole when you're
bouncing around off things the hole
moves the hole breaks another pro tip
these holes people I found online people
saying how do you fix these how do you
how do you make them work again black
electrical tape very good yes sir the
question was is there any simulation
software out there for this kind of
thing to maybe head off some of these
disasters that's kind of where we're
heading with with the 3d examples you're
going to see because Shawn put together
a really great 3d simulator at this
point it's it's on the back end but
that's the plan yeah that's correct one
of the one of the challenges we
identified early in the process was if
you wanted to test the flight or the
reaction of your of your your logic to a
flight set of like man's you had to
essentially program the device and kick
it off and have it happen in real time
so at the start we thought okay well
wouldn't be great if we had a simulation
that we could just load something in and
watch it go go crazy on before we had
the the drone a murder everything in his
in his living room the problem is that's
really a really hard thing to do I mean
you've got a I'll get to that more later
so right now what I can show later is a
3d simulation based on the flight
commands and it'll be very clear where
you can extend that and and just a touch
on some of what we did we wanted to have
the full autonomy but we also wanted to
do a flight recording as we went and
that becomes the input for the
simulation it also becomes the input for
when you create commands like replay and
we I'll show a demo of that as well
where you can do a simple or complex
flight plan and then replay it so the
anatomy of a quadcopter and this gets
back to this gentleman's question there
are a lot of different plans online
there are a lot of different things that
are being done with making your own
quadcopter and our own Michael Huffer
not an Oracle employee but just a super
guy who practically genius-level you'll
probably see him upstairs with the 3d
printer he 3d prints his own components
and is building his own drone and is
just doing an amazing job with that so
you know there are a lot of different
ways to crack that crack that nut I
threw this in it's a gratuitous bone I'm
throwing to Sean because working with
NASA and for NASA
I thought he'd really love to see that
the parrot ar.drone decked out in NASA
gear so that has no value whatsoever to
the content it's just for Sean so the
anatomy what what is a quadcopter and
generally all of them kind of follow
this pattern there are four spinning
blades of doom there are arms which have
the motors at the end and the four
spinning blades of doom on those there's
an onboard wireless access point you
connect to as we discussed earlier the
the really key part is the firmware in
the controller inside because that keeps
the blades spinning at the proper speed
and balance to where it doesn't you do a
take-off and hover and it doesn't crash
another wall generally so that's kind of
the the key element to any drone there
are cameras on the AR Drone a forward
facing in a downward facing and when we
when you get into a pattern recognition
you use more of the downward facing
battery holder of course and the shell
right now the indoor shell is on it if
you want to fly it outdoors it doesn't
have the outer ring so then the blades
are even more dangerous so I have never
used my outdoor hall as much trouble as
he gave me inside oh it's a predator a
diver to lose it so take it outside and
watch it fly off so here's really what
the brain consists of I'm Raspberry Pi
model B and I can't wait to switch this
over to beat the beep
but that's what I'm running now a
Raspberry Pi case and again the smaller
and lighter you can make it the better I
actually like the fairly translucent
ones because then you can see the lights
flash and you know what it's doing
without trying to peek through the
corners and whatnot one SD card class 10
for faster access 8 gig minimum two
Wi-Fi adapters again one because it's
going to service the the the access
point one as a client to the drone the
power adapter that's for when you're
running it off your desk the mobile
phone charger when you're running it off
the drone an Ethernet cable for the
configuration and again they're the full
parts list is in the appendix fairly not
straightforward to set up you configure
raspbian hard float configured as a
wireless access point as I said and and
the client and then you tweak it because
it just because you can start the two
connections doesn't mean it wants to
maintain them so there are a few tweaks
you can do we'll be publishing all of
this if anybody wants to give it a go
you can you have to tweak put a startup
script do some tweaking it gets a little
fiddly but it does work and once it's
connected it does it really well so the
IOT concepts and tools NetBeans makes
all of this so much easier and and we'll
show you the some of the demos who are
we running it straight off of the the
MacBook but then we'll plug in there
Asbury pie and we'll push everything to
the PI that means makes that much much
easier than it would be otherwise in
fact I'm I'm sure we could do all that
we do if we didn't weren't using that
means that way we do run a mosquito
broker for MQTT messages that is
optional but again we find that very
useful to get feedback on what the drone
is doing I'm sorry mark what is a
mosquito broker oh okay is anyone
familiar with mqtt the Internet of
Things
it's one particular protocol it's one
particular construct for transferring
information from one small device to
another I guess is the best way I can
come up
with and put it it's it's very short
very low overhead you can send fairly
small messages although that capacity is
not tiny it's it's reasonable and you
it's a publish/subscribe model so you
have a device publish to whatever topic
or subtopic you want the information to
flow out through and then any other
device can subscribe to it you can set
up security you can set up what they
call a last will and testament so if a
connection is dropped it notifies there
are a lot of things you can do with it
but at it's very core it's just a
pub/sub system and that's what we're
using it to do with it
we publish information off of the PI and
we just read it and I'll show you using
a really nice tool by Jen's deters who
create a MQTT FX which is a nice Java
app Java FX application you can do all
this in command line but this is much
prettier to see and as there's a
screenshot and you'll you'll see more of
that in action here okay so so now we
know what I'm QT T is we know the ins
deters who created MQTT FX at the
mosquito and we and we cannot know what
mosquito is maybe a little bit but now
why are we using MQTT again something
about pub/sub but we know the drones
writing stuff but well who's reading it
he wants to know what's puppet in
subbing ah you guys are killing me no no
you know we're practicing things we're
subscribing who's subscribing to
whatever is being kicked out by the
drone and what's being kicked out and
I'm just really foggy here ok what what
we what we wanted to do is have some way
that the drone could provide data back
to whomever wanted to see it in it at
this point in time it provides
navigational data so it it via the
mosquito broker which is just the
publisher the mechanism used to publish
that data it will put navigational data
out error data vision tag data I started
to actually have it relay the the
imaging from the camera but those are
actually much too large to fit into an
utt message but what it does is it just
kind of throws it out there it publishes
it and what I wanted to be able to do is
connect with with my machine even though
the drone is running and kind of in its
own self-contained loop I wanted to be
able to connect and see what's happening
through some tool and and see what the
data feed is so that way you know it's
working you know how it's working if if
there's an error you see the error that
results now right now there's no
security on that feed so anybody who's
in here if they have an MQTT broke
excuse me um client can watch the data
feed live as well so yen's challenge
accepted are you gonna things flying are
you going to now try to hack in and see
see and subscribe okay thank ya greedy
can watch a crash okay remember the
people in the front row we warned you
okay Zorin yes
the question was why didn't by the way
this is Zoran sever ik one of the
members of the null pointer band that we
played at the JCP party last night and
will be playing at Taylor Street at five
o'clock on Wednesday so anyway the
question was and and it's an excellent
question by the way why didn't we use
some kind of a distance sensor so that
we can sense and interrupt the loop when
it was a crash was inevitable and that
is on the agenda we had talked about
adding several different kinds of
sensors but I guess the the the first
part of that answer is there's no
capability to do that in the published
API and with the libraries that were
aware of as far as I know there's just
no way to get there but well we we know
we know we can add the sensors to do it
but you know then we've got yet more
weight yet more power requirements and
all of that so we stayed within we
colored within those lines we color it
outside of a lot of other ones but we
stayed so yeah that that is on the
agenda at some point down the road
because my initial we'll come back to
that okay yes that is in a later slide
so you started to plug your session so
let me help you finish plugging it so
you have a session you are a neuro yeah
yeah so you're a neuro yeah okay so
when's your session and where is it oh
he doesn't know any session is all right
he's in the artificial intelligence but
in this case I guess it is kind of
artificial but that's all right we're
band mates we can cut on each other all
right well that gave me a good chance to
go ahead and power that up which is kind
of nice so
demos this is where the fun starts right
or if you're in the front row I'm so
sorry yes and and this is one thing I
guess again of one of those lessons
learned the the the drone the the it is
reasonably precise but not nearly with
the precision that you would like it to
have again especially when you're in a
small confined space
so everything tests out fine but if you
run it five times in a row your results
will not be perfectly consistent there
will be inconsistencies and a lot of
that is drift that the drone is unaware
of so let's let's see what we get here
see if the demo gods are kind today
first I'll start with just a small box
flight and see what we get oh I need to
reconnect nope it is connected
sure okay thanks for coming so that's
that's kind of the first one and that's
a fairly simple routine yes yes
initially we're right now all this is
feeding off of the the MacBook and you
know what I did not switch over to this
I should have because and in the next
next flight plan I will switch over to
this is mqtt FX that gents wrote very
nice and you'll see the the feed coming
through when I remember to do at this
time what I want to do is show you a
flute a few flights just off of the
laptop and then we're going to power up
the the PI this does go through battery
so I was wanting to run a few initially
and then we'll wrap up with the fully
onboard power that and the fact again
that the flight dynamics are a little
wonky er when you you put that much
weight on top so this just makes it a
little more consistent and then a room
full of people consistent is excellent
so
yeah we'll try it we'll see yeah this
has a homing feature in this particular
flight is supposed to this particular
demo is supposed to bring it back fairly
close to where it started it does in the
l-shape routine a pattern and then comes
back and then hopefully land somewhere
close to where it took off
no rents into the drapes okay what we
wanted to do is is provide some
mechanism to kind of get the Delta so if
you fly a simple or complex pattern
eventually you can just say go home and
it goes back to where it it it's point
of origin again not a hundred percent
consistent but relatively close and
again the larger the area the better off
you are and again I forgot to switch
over to in QT tf-x yes sir
correct and that's which brings up
another great question
yes he the gentleman asked how does the
drone know where it is
I assume it does not rely on GPS and one
of our first questions people almost
always ask is why don't you just use GPS
this particular model doesn't have GPS
capabilities you can add them I believe
to this or you can get the newer one
which does but but this does not have it
so for the sub $300 market that's gonna
be pretty tough to do but the other
wrinkle on that is even if they had GPS
when you're doing a six to nine foot box
indoors GPS is useless if you're doing a
large pattern out in the field you've
got a chance but for what we're doing it
wouldn't help us anyway
so yes oh how does it work basically the
the software that we wrote tracks all of
the deltas it tracks every movement that
it makes and then it does the math to
bring it back to where it started fairly
simply I mean it's I don't want to I
don't want to mislead you it's fairly
simply if you if you fly forward at 30%
for six seconds and then you fly to the
right at 70% power for 10 seconds then
what it does is applies the calculation
of the the the percentage of full
throttle so 30 percent or 70 percent or
45 percent and the length of time that
the engine is engaged flying right and
then it crunches those numbers and comes
up with fly back two seconds at 20
percent power
yes yes whenever whenever it kicks off
it assigns that if you will as home the
zero zero zero coordinate can I add
something yes okay so one of the things
that we plan to add to this can you hold
up in that the roundel that's stuck yes
okay so one of the things that the drone
can recognize with its bottom facing
camera is this orient it's called an
oriented roundel and so it can it can
sense that at not only can it sense if
it can also because it's unique in it
can tell how its positioned relative to
that in terms of yaw right that's Y all
right mm-hmm yeah yeah yeah y'all right
y'all y'all okay so so one of the things
that the kind parent on Java guys did is
they added at our request to the library
the ability for the downward facing
camera and maybe the side facing I don't
know to be able to report the data that
comes from the drone about whether it
has sensed that tag or not and in
addition the the drone is able to report
how far away it is like which and then
you can figure compute height also you
can you can also calculate angle based
upon you know where it is you know where
if where it was in that field of view in
the camera and so by calculations and
using some to me it's higher-order math
to some others that might be really
simple math but to me you know matrix
multiplications and linear algebra and
things like that in probability theory
then you can
well not probability theory yet for this
part but you can figure out where it is
relative to that round oh right so so
right now what Mark articulated was okay
we know where we are right and then
where we're applying we're playing
controls to it right - like tilts and
and speeds and things like that go this
direction with this much with this much
you know motor speeds and things and
then so in a perfect world if there were
no draft so there was no there was no
other inputs there were no variations it
would land exactly you know but it's
never perfect right so that's why it's
not going to land but one of the things
that we are going to add to this is the
ability to again sense the roundel know
where we are in space but relative to
that and then apply a control loop right
and a control loop will then consist of
state estimation where we are and then
it will then apply pit control which is
this idea where we try to apply controls
that will get us to a desired location
and then a loop more state estimation
until we arrive at the place that we
want and so that's a future thing that
will then approach what you're you're
talking about I believe
right so what I'm gonna do for that
question is I'm going to hold that till
later and if there is time I'm gonna ask
- Mona - Mona and Ava - Mona - Mona and
Ava to address that because they've done
a lot of that okay so somebody else had
their hand up that I like to dress just
a question
right you so will yeah right we'll
address that yes lowered low energy
Bluetooth okay so I I think the question
is instead of GPS other direct
line-of-sight or through the wall type
of radio frequencies absolutely a
bluetooth could work in short range
actually what I was thinking was for
like an in the house or small room to
think just using Wi-Fi a lot of personal
tracking devices are now used for they
just use Wi-Fi with enough transceivers
they can predict within pretty much a
foot or excuse me so many centimeters to
where it is any given moment so that
could be a solution however that will
require more hardware the good news is
the Raspberry Pi has a wife you can put
you know Wi-Fi adapters on it that are
very low weight as for a Bluetooth I
don't know if the Raspberry Pi has any
bluetooth hardware built on but why not
yes Bruno oh I can barely hear you I'm
sorry please speak up
well the idea here is that the brain is
on the drone right so so there is no
really central station it just has to be
able to know where it is somehow right
and so the different choices are you
know some visual thing GPS you know we
talked about other other ways and so so
but the the brain you know is in the
controller you know it's all on the
drone itself in this case there's not a
good answer I mean this is why actual
military-grade drones are so expensive
and so hard I mean if they lose all
forms of connectivity there's there's
not much they can do and typically what
they do is I put them in a holding
weight pattern that that's what the
brains actually do until they can regain
connectivity and so it I don't think we
can solve it or even answer it because I
don't think anybody to solve the problem
thoroughly
yes they do again that's just another
repeat the questions oh I'm sorry the
question was don't they make
accelerometers that work on the pie and
yes they do but again that's more code
that's more interactions that's more
intersection between code and physical
world and and that's another lesson
learned is the more interactions you
have with the physical world with your
code the more breakpoints there are so
that's that's something again that we're
looking at kind of coming back to
Lauren's question you know where there
are a lot of ways to improve this and I
don't want to give away the surprise
ending but you know some of those once
you hit a certain level on your platform
you you've exceeded the capabilities of
the platform so then you start creating
a lot of workarounds to get some very
basic functionality and it no longer
becomes worth it to stay with that
platform versus moving on to another so
right and so I just we just found a new
team member for the next version of our
software
thank you for volunteers I will rope
that's what the next version is that
okay
okay good looks like I'm on I'm not
starting anymore I'm kicked off next
year no you you aren't even going to be
able to be paroled off of the team so
small wrinkled demo gods are not being a
hundred percent kind to us they've been
very cooperative but what again another
lesson learned these power supplies for
the Raspberry Pi if they're not 100
percent fully charged if they're at 80
percent then you don't you know the
current level drops as well so you may
not get your full one or one point one
amp and it won't allow everything to run
well so we're not going to be able to
load it on the drone directly but we
should be able to give you the same same
demo just not not quite as nice maybe a
little more controlled
I just rebooted it yeah I just got to
reboot it i if we have time at the end
though I will actually take gems and
give it a shot I don't want to hold up
things too long because I feel like I
already kind of have but the other thing
is I was going to mention that we the
mosquito broker also runs on the
Raspberry Pi so a quick apt-get and
you're up and running with that so again
it provides a really nice mechanism to
feed data back so while that's coming up
let's go ahead and and I guess we've
covered the bulk of the demos let me go
ahead and work on this while you go
ahead and show the the I'll switch over
actually probably easier okay okay
now that's okay so again my job was to
create a 3d simulation to help them
speed up development and also just we
wanted something a little more visual so
that people could play around well very
quickly I found that it was too much to
try to create a full simulation because
of all the characteristics involved and
we'll talk about that in the next step
going forward so what I did was because
I have no social interaction capability
whatsoever I used retro images of robot
movies from the past to make my slight
look away more important than they
really are
so I'm gonna ask does anybody know this
movie well the titles there so it's
robot monster but it's famous because
they took a gorilla suit and then just
added like a bubble on top and they get
put with a skull mask and that was their
idea of a robot monster from space okay
at this point just stop you and I need
to to verify that you have no social
interaction yeah so I happen to know
that Sean's wife Zuma is in the audience
please stand oh yeah make her stand oh
very beautiful thank you and so Zuma is
this true does he have no social
interaction skills and things like that
it's not true or it is true it is true
yeah we have it on high authority so
glad I paid for your plane ticket
okay so so anyways so your to see some
more pictures and I'll ask the same
questions okay so you got to know your
Overlord okay so what I did was I
created an overlord class and it's a 3d
group in that way I can embed all the
aspects of an overlord in it so who's
this robot of course all right so you
guys are nerds - all right so so it
comes with what it does is it attempts
to load a model asset which I died I
couldn't find a good 3d drone model so I
just threw a TIE fighter in there
because that was pretty empire's you
know and I got the model loader from
interactive mesh so it's a great free
model loader happens to be an obj model
but they have a great set of format
loaders and then I use I have a 3d
library called F X Y Z and I have a
little cube world that I throw the thing
in you'll see in a moment so one of the
one of the things I want to emphasize
that when you animate something in 3d
you have to really take advantage of
transforms and JavaFX interpolation and
I'm gonna go over that during the when I
do a little click around and for
exception handling
that's saurians problem next year okay
processing commands this is the command
for what
anybody know oh that's bad The Day the
Earth Stood Still that's for the robot
and that's the command for him to
resurrect his a little buddy there so
anyways what I've done is I've created a
setup just for the sake of the demo
where you can drag-and-drop flight
command logs these are the same commands
that Mark will be that sends to the
drone that sort of thing
it includes an English language type of
command structure with a power duration
and you I'll show you those commands you
will clearly be able to see how you
could expand from that you could add all
kinds of other data feeds to react to
and and what I do is I throw that into
an asynchronous task I use a little use
a lambda and I'm in a function to to to
map that to a flight command data type
then I just add my Overlord to the scene
and we're running so how do you control
it this is the voice of world control
what does this move what is this from
anybody I heard something for what
that's right that's right what the best
evil supercomputer movie ever made all
right so what I've done is I've set up a
system where you it's just gonna take
these commands in stream and then react
to them so it becomes a very simple
switch statement and so you'll see where
you can just add your own or customize
them from there and so the one caveat
one say is that because it's duration
and in power based there needs to be I
found it the easiest thing to get the
demo up and running was just have the
the command system sleep because I
didn't have a strong set up to connect
and determine whether a command was
complete or not that's really there's a
lot of potential there for for D
synchronization however I got to say the
Java vex thread model takes care of it
very nicely okay so now let's animate
and let's do some dancing so if we're
gonna dance the robot who's this alright
nice job it's not Johnny Five
okay so in order to here's an example of
a take off pattern if you want to
animate your your model in 3d space you
you can't really do a translate
translates just going to move it from
one spot to the next and that's
typically what they do and so rather
than create this type of like looping
translation it's easier just to create a
timeline and allow the timeline to do
the dirty work and I'll point out that
for the for the takeoff obviously we're
lifting up in the air I the
interpolation capability is built right
in so yeah so what this this this I did
this because it's it made my life much
easier you can tell the interpolation to
ease into the timeline at the star and
the end just to start just the end etc
okay and so finally it's probably pretty
important to show that the everything's
done using properties and so while
property is updated in and when when
when that in that of course have
invalidates it and then it calls a
custom
a custom function here that I have which
simply moves the item from one one spot
to the next
alright so pay attention I'm gonna
switch over to that what the 3d looks
like it's so far so I really new showed
us was code that is in this program that
you're gonna show us that it takes and
so those those those lambdas things like
that are reading from the the flight
recorded and then it is gonna then
represent that in your 3d model that's
right here's a simple example let's see
here obviously you have your commands
which are defined mark to find that to
be spit out by his
TT there and this is your power and this
is your duration in milliseconds so nice
round numbers and so we have takeoff
forward hover backward that sort of
thing and so when I take that same file
here I'm just gonna drag it in what it
does is it creates a little Thai fighter
guy there and he's taking off notice the
interpolation the animation it's kind of
important and it's asynchronous so you
can rotate the scene however you want
and there we're landing
great so now if I drag that same file in
one of the caveats this is a demo what
you might want to do is create some
controls that you remove the old model
and add a new one but what I wanted to
do is give people the option to add as
many of these together as they wanted
and and I had this dream of having an
x-wing fighter chasing the TIE fighter
and all that but I ran out of time
that's my story anyway
so if I drag this back in I'm gonna this
the same same flight plan so let's see
here notice when it gets to the top it's
going to there it's throbbing so right
there that's a hover command and what I
did there was I created a scale
transition and so it's scaling the the
model slightly and yeah the 3d models
are in the same
face and so and what I ought to do is is
remove those so you can get the the
model asset online or put your favorite
3d model in there the model loader again
interactive mesh just pull it down this
little cube viewer thing is from X Y F X
Y Z and the camera controller is a that
gives you the first-person shooter type
fly through X Y Z F X Y Z as well okay
man that is great that is really cool
stuff I'd like to say that you know
there's so much more that can be done
last thing I want to show and the topics
do okay we have five by Bennis total
okay I just want to show the data
because this is the type of raw data
that mark is processing constantly and
as you can see it's a little bit
different than what I was processing
it's not the commands it's it's all the
little details you could you could
clearly see how you could respond to
this data feed as well and add rotations
to your model that sort of thing add a
flight a ground track or a flight track
and really spice up the simulation okay
sorry to try to wrap this part of it up
quickly so maybe we have a couple
minutes for Q&amp;amp;A and to fly it because
and another tip is that when you're
running low on battery in the drone it
acts like it's responding but it's not
that was the problem not the stick so we
everything is running it is on the drone
I'm gonna take our chances hopefully not
wipe out the front row with this test
let me switch back over to that and also
we'll come back to this slide next and
we'll kind of talk about that but I'm
also going to give a quick quick show of
against MQTT FX this time I really am
going to do it so here we go
oh I forgot to change the the platform
hold on
sorry that was pretty anti-climatic yes
and this again is one thing that
NetBeans makes very easy to do stop
yes so as you can see and that means
it's it's reaching out and contacting
the PI it does all this automatically
once you configure it as a remote JDK
platform it reaches out and pushes that
all to the PI and we'll pull up Yin's in
QT tf-x so you can see the data feed in
living color assuming this works of
course it takes a little bit of time to
go ahead and make the connection
ah now I hear I hear oh I forgot to
change the MTG tf-x
there we go
all right really quickly again that gets
back to the frustrating imprecision of
flight especially when you stack a bunch
of weight on top so getting back to the
last slide and this kind of wraps up I
think a lot of what we were talking
about before the next step there are two
kind of autonomous concepts that we
bantered back and forth early on one is
general autonomy where you provided a
set of steps that you wanted to do and
it does them on its own without
intervention so if the connection is
severed it doesn't matter its handling
it all on board the other is what we
referred to as an advanced autonomy
where you define certain goals and it
determines how to execute and complete
them that is we're right now at the
general autonomous stage not the
advanced autonomous stage that's a
future step but that's obviously a much
much tougher nut to crack we have a good
start on it but it's not anywhere near
ready to show in fact that was how I
broke the indoor hole and found that
black tape works really well to repair
them so that really centers around
creating an external control loop
there's an internal control loop in the
PI in effect and in the API attic that
feeds the commands what we want to be
able to do is have an external control
loop which is self-correcting and that's
the advanced autonomous element as well
as some sensors which will allow it to
respond and react to its environment and
I think I've pretty much covered all
that except for the last point at some
point you realize that a 300-dollar
platform may not provide the full
capabilities you need so you either add
on a lot of hardware and a lot of coding
to provide that or you look for another
option which allows you full control of
the stack not to pick on parent but the
API hasn't been updated in over two
years so it's it's not exactly the
freshest API to work with these guys
again have done some amazing stuff with
with what's rather a semi stale API but
you know it's it's part of the decision
process so we don't know moving forward
this made sense to this point we will
see as Sean said the expensive drones
add a lot of capabilities and the the
software stack you know gives you a lot
more hooks so yes sir
it it allows you to have a the question
was why do we select a Raspberry Pi is
the brain accessibility
it has a widely tested and usable Linux
interface we were able to spin up an
access point on it the software is
already in place JDK we have Java SE
embedded which you know is already
pre-built and certified on it there were
a lot of things that we just it made a
kind of an easy choice not that there
aren't other good choices but but this
seemed to be the most have the most
pieces in place from the get-go
it's 3:30 thank you very much guys</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>