<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Putting Kotlin to the Test | Coder Coacher - Coaching Coders</title><meta content="Putting Kotlin to the Test - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Developers/">Oracle Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Putting Kotlin to the Test</b></h2><h5 class="post__date">2015-06-05</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/BMEkljl0Vhg" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so I'm gonna give you a brief
introduction to walk holiness for those
that don't know it and then I'm going to
show you some some code and tell you why
we're gonna see code because well we
like to see code right so for those of
you that don't know calling is
statically typed object-oriented
language with a dash of functionality in
it it targets both JVM and JavaScript so
you can compile them to either whether
you're deploying on a JVM or you want to
deploy in the browser or on a JavaScript
app form it's open source license Apache
- and we've hit milestone six the
release of Kotlin is going to be well
the thing is we're not going to release
for quite a while we're gonna hit beta
and then we're going to work with it on
beta and hopefully get enough people to
work with it with beta to the point that
we're pretty certain that we didn't
really screw up badly and then hit 1.0
which is hey it worked for google it
should work for us right so why call in
i'm gonna go beyond the the dogma here
and I mean this there's you know
everybody says why did you come up with
another programming language well if
they had said that when someone came up
with JavaScript we were all been and in
a better place right now but
unfortunately no one did but the reason
that we've done this is that I mean how
many of you have heard of jetbrains yeah
you might know us for products such as
IntelliJ and Rashard so we've been
developing tools and we've got tools for
pretty much every language out there you
know I mean I said well if if a language
comes out we release a plugin for it in
fact I mean when dart came out will
release the plug-in a week after dart
was announced so we've been developing
these tools up in the on the Java side
not the Darnell side burn on the Java
side we've been developing these tools
for the past decade in one language in
Java and yet we've developed plug-ins
for all of these different languages and
we support all of these different
languages and there hasn't been a
language that's been found that could
kind of suit the needs that we have a
job range
that's why Cortland
and if you think if you look back at all
of our tools the majority of them have
always been invented out of necessity
which is what our CEO was saying which
is we needed something that at the time
there wasn't on the market and we
decided to do it in our way ok so the
design goals of Carlin are for it to be
fully Java interoperable Interop it's
too early to say interoperability point
being is that we've got a decade of code
and it's no use for us to write a
language to write our new tools in or
continue our tools in and throw out
everything we have because that's just
not viable it's not gonna work so we
needed to be fully owned interrupts we
need it to be at least as fast as Java
because God knows that we already get
complaints sometimes that intelligence
is slow so we need to make sure that
it's fast it has to be safer than Java
it has to be more concise than Java
which isn't setting the bar high because
Java is as least concise as it gets and
it has to be simpler than Scala so how
many of you were Scarlett developers
again or no Scala or like Scala right so
don't compare call into Scala you'll
find a lot of things that are similar to
Scala off the record which I don't know
if this is off the record but I always
joke and I say well if you want think of
cotton and Scala for dummies but it's
easier to understand than Scala let's
say so what is called in it's a language
it's got a bunch of libraries and as I
said it compiles down to the JVM and to
the JavaScript ok and we're gonna see
all some of these constructs so it has a
bunch of libraries already and in fact
James Stratton home where you might know
from groovy was the most contributor to
the standard libraries for Kotlin so he
did most of the a lot of the stuff here
he actually contributed to the sources
on actual github and you can see the
commits and this is the only microphone
with a cable that I've ever had and I
keep stepping on it
so nothing here is final we are in
milestone 6 a lot hasn't changed there
are some things that have changed in the
language but you know there is a
quotient that some things might not be
final okay so we're going to put call
into the test
how we gonna put it to the test well
we're going to do real-world
applications in it how many of you have
actually written anything in call it
okay so you are a better judge than me
standing up here maybe you should do the
tour can I sit down so I have done right
now I've done a couple of applications
in Kotlin and inside jetbrains we're
actually using Kotlin internally we've
written a library which is called can
annotate ER for annotating libraries in
Java and using it and Kotlin with our
tools we have written another plugin for
one of our other tools webstorm and we
have also done two internal applications
and a third one starting now right and I
can tell you from my perspective and
believe me or not although I might seem
biased I love the language now I come
from a c-sharp background actually I
come from a clipper background but that
was a long time ago and then I did
they'll find then I went into dotnet and
then I did see sharp and I love C sharp
as a language and I always stayed away
from Java because I just didn't like
Java as a language unfortunately Carleen
I enjoy it's got its got similarities to
c-sharp so it makes me feel at home but
it's also more concise in many areas
than c-sharp so for me personally I love
working with it and if I were to show
you some real world applications you
would say and what okay so what I'm not
gonna show you any real world stuff well
there are some things that you'll see
but I want to focus more on what we
actually look for when we're trying to
write applications and then see if
Kotlin fits those needs and then you
guys can judge whether it fits it or not
so the features that I'd like I don't
know if you guys would like in a
language is that I wanted to be concise
because I don't want to write a lot
right I wanna I mean you know a lot of
the stuff that IntelliJ or resharper or
all of these other tools do is generate
boilerplate code for you right if we
could generate less boilerplate code for
us even better safe yes now safe can
come in different aspects I am a guy
that loves JavaScript but I detest and
hate JavaScript at the same time because
of the problems that it gives me because
of its dynamic nature but on the other
side I love it because
so powerful and flexible in certain ways
but I like that safety about languages
I liked it to be very expressive for me
that's one of the most important things
because I want a language when I read
the code to show me what I'm trying to
do not how I'm doing it okay it should
display the intentions of what I want to
do compatible well that's an important
feature because if you're gonna start
working with the language and there's no
libraries you're not gonna do it all
yourself are you it's just it's it's not
viable modern that's a little bit hard
because what exactly is modern I don't
know I'm gonna call a modern some of the
new functional things that we have
lately I want it to be fast and I want
to beat it to be to label why because I
don't like doing things manually when it
comes to grunt work so let's see some
code and then you guys can judge and see
whether these goals have kind of or not
been accomplished and if you have any
questions please feel free to ask me at
any time okay
so this is you can all see that in the
background and at the back right
everyone can see that this is as simple
as it gets this is a Kotlin file we have
the concept of packages we have the
concept of top-level functions which
means that you don't need a static class
with a static method if you just want to
create a function you just write it how
many of you actually know JavaScript
here or work with JavaScript okay who
likes JavaScript kind of so it's the
kind of the same thing we have a thing
called fun which it only took what 30 40
years for someone to call a function fun
and we have a mess a name then we follow
the Delphi style syntax which is the
parameter name argument name and then
the type string interpolation print line
this is imported by default we have
implicit imports those things that you
constantly use are imported by by
default we have a main function and you
could just type main hit tab and then
you get
romain templates out there and then you
can just you know write whatever you
want and run this and everything works
dandy and it all works perfectly okay so
that's that's Colin and normally your
applications will they start with a main
depending on what type of application
you're doing obviously a console
application we'll start with the main
okay I'm guessing there's no questions
about that so far so let's go and see
what we got in terms of conciseness C
data classes and objects okay so this is
something that I do a lot right defining
data classes how many of you defined
data beans or Java beans or beans or
whatever you want to call them right so
in Colin you have that concept of a data
class which is basically the same thing
as a class and if you prefix it with
this annotation data then what it gives
you is out-of-the-box you see that
there's no cardi braces I I don't need
any cardi braces and it gives me
out-of-the-box
getters and setters for all of those
properties that also comes with a class
as well not only data class but it also
gives me a bunch of other things namely
it gives me things like to string it
gives me things like equals so it
provides me with all that functionality
itself right without me having to write
it so if I were to don't run something
like this
you can see that I get Joe Joe Smith
which is what I wrote out here and then
I get the customer this is the two
string default implementation of two
string for the data class and then it
says they are equal yes because it does
comparisons and obviously if you change
something like that and you hit run then
you'll see that it changes now so
comments some of the some of the demos
I'm gonna run because I want you to
experience some of the downsides of
Kotlin right now and you can see that in
terms of compiler time we're not there
yet okay so you know we'll say things as
they are so that basically is you know
if you were to write that whether it
were would be in c-sharp whether you
would write it in Java it's a lot of
boilerplate code that you don't really
need and the other good thing about this
is that it actually distinguishes the
concept of a class from what I would use
a data class which is a dto right
because a lot of times we forget the
concept that a class or an object should
have data and behavior and we just limit
it to data right and here we make that
distinction initially we came up with
the concept of tuples what not didn't
come up with the concept of tuples but
Carlin had tuples in them or tuples
however you want to call them and we had
you know as many tuples as you wanted
and then a function could return a tuple
of and values and then we realized that
that's really not good because it's not
really readable and you lose the
semantics when you return a tuple unless
you're signing it to something you kind
of lose the intention so now you do have
pairs and I think triples but apart from
that normally you would recommend using
something like a data class now you can
also do this with a class I could just
do a class like this but then I wouldn't
get any of those default implementations
for those methods but this concepts that
exists which is basically what this is
saying is in the single constructor I am
defining a property of type name and you
notice here that I have Val this could
also be var so Val is something
immutable right and var is mutable okay
if I were to not put this
if I were to just leave it like that
then I would be passing in a parameter
to the constructor however I would not
have that name as a property of that
class okay so that's in terms of
conciseness what else can we do in terms
of concise and sets take a look at
functions yes
I don't think there's any plans to do
anything like that I mean you could
easily extend that with your own or but
there aren't any plans right so let's
take a look at fun yeah I don't know if
we're going to I can check or you know
what Andre Perez laughs who's the team
lead of Kotlin he has a talk and he's
also at the booth these two days so
that's a question he could answer for
you I don't know if there's any plans on
that so when it comes to function well a
little bit of conciseness there as well
first of all you can see that a function
takes the parameters and returns a unit
which is our void in Kotlin but you
don't have to say that it returns unity
I mean it that could be implicit you
don't have to explicitly say unit we
have the concept of name parameters and
we have default parameters so you can
see here that I have an age in zero
which means that it will default to zero
if I don't pass anything in I have
default parameters here and I can also
name parameters so you can see that on
the name parameters here I'm setting an
age and then I'm setting the name so I
can change the order in which parameters
are passed and combining that with
default it gives you a lot of options of
calling your code and having it to a lot
of things automatically for you and when
we get to some of the functional things
that I'll show you it also allows for
doing some kind of partial applications
of functions okay now a lot of the I've
tried to classify some of these
characteristics that I showed you in the
slide into different files unfortunately
you can't always categorize them so
we'll come back and forth on some of
these different things but let's start
with some of the concepts in
expressiveness
so here is two strings that I've
concatenated with the word and okay and
have I accomplished this first all I
this is a thing that we have in column
which is called in fixed calls so you
can call a method using in fix notation
right but what I'm also doing here is
I'm taking a string class and I'm
extending that string class so I'm doing
string dot and I'm passing in a
parameter input string okay so string is
the Kotlin string class but you can
pretty much extend any class whether
it's called in class whether it's a Java
class any class that you want you can
extend and call it okay if you're
familiar with the concept of extension
methods in in c-sharp this is the same
concept you can pretty much extend
anything anywhere and that extension
will apply to the scope where you extend
it so I have this in the package
expressive if I import that package into
another package then I have that
extension if I don't I then it won't
apply okay and this is just two ways
that I could call this now what does
this give me well this gives me the
ability to kind of do more expressive
code and I'll show you some examples
with a bdd framework which takes
advantage of this let's take a look at
delegation this is more about
expressiveness so how many of your
climene I'm guessing everyone is
familiar with the concept of dependency
injection right yeah okay so dependency
injection I have a we have the concept
of traits which is same as scala so
basically they're like interfaces that
can have implementations of certain
functions but they can't maintain state
so they can have properties but they
have to be abstract properties and here
I have a customer trait which has a
function get all and then I have a
customer repository which uses that
customer trait sorry a controller which
uses that customer trait I'm basically
injecting that customer repository and
I'm assigning it to a private property
and then I'm calling customer
go get all right the alternative to that
is to have what's called a delegated
controller which basically here what I'm
saying is that I'm still injecting that
customer impulse tree but all of the
functionality of that customer
repository is delegated to the type to
this trait okay
so here I don't no longer have to have a
private or a property a private property
referencing that dependency and calling
it on that dependency it's as if I mixed
in this method directly into my class
now you can do that on both functions
and you can also do delegation on
properties okay now the question that
arises here is what happens if I have
four dependencies for instance that are
being passed into my class doesn't that
really kind of make it on maintainable
because I have this class and I have
these methods coming from everywhere and
unless I have some tooling I have no
clue where anything is coming from
correct because I'm not explicitly
calling repository and then the question
comes back to why you having four
dependencies being passed into a class
anyway all right yeah one of the
benefits of using dependency injection
versus service location is what who can
tell me service location hides your
dependencies right you're all familiar
with the pattern of service location I
call out get object and say create
service for me it hides anything that
that object does under the covers with
dependency injection I'm passing in
everything to a constructor so therefore
I know everything that my class requires
and if my class starts to require too
many things that's a sign that my class
is doing too many things it's a sign
that it's got too many responsibilities
what else do we have so let's go to
conventions here is again a data class
and what I'm doing is I'm overriding the
plus the plus symbol so how do you do
that well I can extend anything contact
i couldÃ­ve I don't I mean I didn't need
to extend the data class I could define
a function that's called plus inside
that data class but I'm just showing you
that you can also extend the data class
and I say plus data and then inside this
always refers to an
extension method this refers to the
instance on which it's operating so here
basically I'm saying that if you do data
1 plus data to that's going to be adding
the X of data and the Y's right so I'm
overriding the plus operator and we use
conventions to do that so here are a
bunch of other ones that you can use to
override you can override to Inc the
deck all of these things so again what
does this give me in terms of real world
applications well it allows me to be a
little bit more expressive if for
instance I need to do something with a
plus symbol I could do it with a plus
symbol as opposed to having to write a
method which says plus or @ or whatever
if it makes more sense ok it's very easy
to override these conventions pattern
matching I don't know if this really
falls into the category of
expressiveness but I had to stick it
somewhere as well because it's one of
the things that is quite useful here you
can pretty much we're very flexible in
terms of pattern matching you can do on
an on a single value on a range of
values on a list of values negate them
you can even call out to a function and
then return the result of the function
to see if it matches that pattern and in
terms of pattern matching we were we had
high goals in the beginning to do this
all these different types of pattern
matching but it basically boils down to
when statements for now ok ok so let's
see what a modern application what a
modern language looks like and I'll
where are we
Oh covariance and contravariance are
also part of calling right so everybody
knows that Java is finally getting
lambdas right everybody we have lambdas
or function literals and this is how
they're defined in cotton and I'll show
you a couple of things that we have
which are exclusive to call it so here
for instance I have a function that
takes let me focus on this one on the
screen yeah that way you don't see any
of the other ones here I have a function
that is assigned to a variable add two
numbers and the function takes two
integers and it returns the sum of those
two integers okay you don't need to
explicitly say the type it returns
because it can infer it now here I have
a function that takes a function right
so it's a function that it's a high
order function it takes a function
basically
if you think about it it's the same
concept as strategy patterns right
whereas before to do a strategy
implement the strategy path and you
would have to pass in an object and that
object would then do the whatever here
I'm just passing in a function it's the
same concept right except now I'm
passing a function without the actual
object so I have this strategy pattern
and sorry this function that takes
another function so I just say this
function takes a function that takes two
ins and returns an int right easy now
here I have a class which is called a
handler and I'll show you where this is
going later on in a full-blown example
that I'll show you here I have a class
that's called the handler and it takes a
property which is called property okay
now here I have a function that can
somebody tell me what that does what it
takes as parameter
that takes is parameter an extension
function on the class handler that's
pretty weird and that's unique to call
in and that's one of the powerful things
that allows you to create very beautiful
dsls I'm sure you've all seen the
example of the groovy HTML builders
written in a statically version of
Carlin right you've all seen that know
HTML builders confident
fast connection here that's a good thing
they said you need internet in your room
I'm like yeah okay well one day that
will come up oh here we go
typesafe groovy builders in cotton so
one of the things that groovy allows you
to do is you know define a nice DSL so
this is a I don't know how well you can
see that but so this is HTML head title
body all of these things right and
that's actually all statically typed
these are all functions so if you click
on this it will show you the actual
function implementation right
now this is possible because of two
things one that functions that take
extension methods and two convention we
have a convention that if a function and
you can see here if a function takes the
last parameter is another function you
can drop the braces the bracket the
parentheses right so this is technically
this but you don't need to explicitly
put in the braces okay as long as the
last property is a function combining
those two things allows you to create
these dsl x' right and in fact one of
the sessions that andre is doing i think
either today or tomorrow is using this
concept of HTML builders for a web
framework called Carra okay we can even
define these extension methods in line
so for example here space replace is an
extension method on the class string
that takes a string and replaces the
whitespace with a specific character so
now I could do some string space replace
bar and that would replace all of the
strings with a character
so this is unique to cart Linda the
extensions are taking in functions that
are extension methods two or extension
functions to a class as well as some of
the stuff in terms of our conventions
that ya know I mean this is you're
referring to this this one yes okay
so what's happening here is that what
I'm doing is yeah this is the actual
usage it's an extension function since
it's an extension function I actually
have access to what the class yeah and
therefore I have access to all the
properties functions and everything of
that class yeah but you can use this for
other things and I'll show you some
examples later the benefit of allowing I
mean the reason that this is good for
builders apart from the fact that you
know you can drop those parentheses and
all that is that it's restricting what
you can do
so it's defining the scope right as soon
as you say that an extent a function can
only take an extension function you're
now limiting what it can do right okay
so that's kind of some of the modern
things and I'll come back to this to see
how you can actually use this in some
applications now let's take a look at
some of the safe aspects of the of the
languished so this is some corley
controversial
I call it non-controversial I used to
have a different opinion I used to
complain that you know classes should be
open by default so that you can also
always inherit from a class and do
whatever you want
in carlin classes are not open by
default they're closed I also realized
that long chains of inheritance are bad
and they're horrible I also realize that
you know classes actually should be
designed to be in hair
from so Colin made the choice of making
classes by default closed so if you want
to be able to inherit from a class you
have to explicitly mark it as open now
whether you call that safe or not it
depends okay let's go to immutable well
guess it's pretty much the same as
read-only properties but we have the
concept of immutable properties as well
and those can be both properties that
can be variables etc sometimes I wish
that by default everything was immutable
in cotton unfortunately there is no
default it's either var or eval null
safety Collin does not allow nulls that
simple okay if I do this it doesn't work
because name is a string and it cannot
take a null okay so by default nulls are
not allowed if you want a null you can
say that the string can be null you put
a question mark at the end which means
that this is a nullable type obviously
this is fully interrupt so how do we
work with nullable types well if I do
files files tests list files this is
Java interrupts right this is Java IO
file I would have to check for a now I
would say if now if files is not null
then print line file size or I could
just shorten it with the Elvis operator
and say if it's not now call size if it
is null then don't do anything I can
also do the you know if else then so
here if it's size if it's if it's not
null get the size if it is null then say
file is empty and if I want to be a pain
and look for trouble then I just do
double exclamation mark which means I
know what I'm doing
I know that this is null but hole size
on it anyway okay this is what that
means now
this the double exclamation mark is kind
of like standing out saying really you
want to call nylon so you want to call a
method on something that could
potentially be null when you do
interrupt with Java you will come across
this quite a bit and there are ways to
have Kotlin kind of not give you
warnings or full or require you to put
the double exclamation by using this
library which we have called the K
annotator so when you it's a plugin that
you can install into idea as well when
you open up a module in your project it
says you want to use K annotator to
annotate this file you if you're
familiar with how many of you actually
use idea IntelliJ right so all of the
static analysis that we do is based on
annotations right and you can annotate
things to K annotators for that yeah you
can run the annotator on those libraries
yeah
auto castes this is kind of in the flag
of safety and also conciseness I have a
customer here and it's it has a function
called make preferred so it says if
object this customer object make
preferred right and you can see that
this is kind of gone green although I
don't know if you can see you won't see
it in that screen but it's kind of got a
greenish background because it's
automatically casting that to a customer
right it says I know that it's a
customer you've just checked that it's a
customer therefore I won't be a stupid
compiler and ask you to cast it to a
customer because I know it's a customer
right ok
compatibility all of this would mean
squat if it's not compatible so here's
for example using j-unit right I take
the test annotation and j-unit and I
rename it to test I can rename this to
specification because I like
specifications and I can you know that's
it fully interoperable with j-unit with
everything
it's interoperable here for example is
neti how many of you have heard of neti
right so that is neti request handler
which is a Kotlin class implementing the
channel inbound message handler adapter
on object which in Kotlin is called any
the top-level object in Kotlin is called
anything okay so there's full
compatibility with all java libraries
and there's some things that have been
added like for example recently we added
support for Sam's which is sin single
abstract methods so you know it's fully
compatible in that sense ok
so now I'm going to show you some other
things with with cotton so what are
others doing with cotton how many of you
here are actually there might be a
chance that you've actually written an
application and deployed with cotton now
on okay okay how's that working good
okay okay there is actually a
functionality in the IDE also that if
you take a Java file you can right click
and convert it automatically to Cortland
or if you paste some Java code it will
automatically convert it to call it
doesn't work very well a lot of times
but most of the times it's it's okay so
what are others doing with calling first
of all there's quite a few people that
have realized that the lambda syntax
though the function literals are much
more concise and they don't require a
lot of code and what they've done is
they're starting to write android
applications using Kotlin and there's a
bunch of there's a couple of Android
libraries and wrappers already on github
that people are using to write android
applications in Kotlin because the
amount of code is substantially cut down
I mean I can't give you rough figures
but I could probably safely say that you
would end up with around sixty percent
of the original code if you're using
cotton versus something like Java okay
so there's the there's the Android stuff
a function Ali I don't know why he named
it that is is a extension it's a library
that this guy has written Mario that is
as functional aspects to to call it okay
some other functional aspects so if you
notice I mean most of the examples that
I've shown you the I've been declaring
functions everywhere and I've been
passing functions everywhere so in
essence you could say that Colin is a
functional language
I mean it's called most of the
characteristics that a functional
language requires right however there
are some things
from it and I'm hoping that one day we
can include some of these things in the
standard library so what what Mario has
done is he said you see this thing over
here it says do you want to
automatically annotate libraries in your
project with K and M later that's their
annotations and it creates the
annotations in XML file and it puts them
in your project folder so here for
example how many of you are familiar
with the concepts of currying and
partial function applications okay so
partial function applications basically
means that for instance let me show you
this example here I have a function that
takes five integers and it adds all of
these integers so when I do a partial 5
applying that function partially with 5
what I'm saying is that basically five
of those parameters sorry four of those
parameters would be wouldn't be passed
in right and what happens basically is
that it it what what currying does is
take a function and then in return a
function that then operates on the other
parameter of another function I had let
me try and explain let's say you have a
function that has three parameters
currying that what it will take is then
take that function and apply create a
function that it takes two of the
parameters and then on that apply the
third parameter so it drills it out
right I don't know if I've explained
that more or less but it's it's there's
another word for caring which is Scone
uh Fink realization named after the guy
that originally came up with the idea
which apparently wasn't Haskell curry
but anyway so what this does is
basically say that I will add sums four
to ten right then I'm doing partially
three partially two now the problem with
this well I don't like a little bit is
that yeah you've got pretty much
partially for every number of parameters
of every function you can pass
potentially want to pass in which
normally you don't have too many
parameters so it wouldn't be that big of
a problem you have some composition
functions so here I can say add five and
then multiply by two and all of these
are basically built using the core
concepts of Kotlin which are in fixed
annotations which are expression
extensions etc so there is no hack
there's nothing he's just using the
standard library of Kotlin to to do
these things we already have quite a few
of these functional things inside Kotlin
and I'll show you now when I show you
some more revolt code for example you
know reverse or match or repeat or map
or transform all of these things are
built in to the library already so what
else is going on I'll come back to
wasabi Cara framework which is basically
how many of you know rails right so
rails is a MVC framework and Cara is the
same concept as rails but it takes it
one step further and basically uses
Kotlin to create HTML and CSS and
there's a session either today or
tomorrow by andre on this one of the
benefits of this is that in terms of CSS
if you've worked with CSS we've tried to
hack around CSS quite a bit with things
such as less because less allows us for
inheritance so you can already have this
because colin allows you to do
inheritance so if you have a strongly
typed CSS there's no longer a
requirement for something like less
because you have it as part of the
language spec is a little experiment i
put together which is a if you've heard
of BDD or behavior driven development
which really is not a tool I hate saying
that it's a tool it is not a tool but
there's so many people that are creating
tools around BDD I like to call them
specifications and basically here it's
instead of a test
this is actually a unit test but it's
more explicit so i say given a
calculator and then the first line is
instantiate in the calculator
then on courting some with two numbers
and then I get the sum of the two
numbers it should return the sum of the
two numbers so it's very explicit and
again using what I was mentioning to you
the extension method they're functions
that take extension methods that's harm
limiting the scope there is no way that
you could ever put that it for example
or put that on outside of the given or
outside of the it why because they're
methods of those extensions that you're
passing in so it's very good for
restricting the scope of how you can
write your dsl this on github how many
of you have played with webstorm or with
the live edit features of webstorm so
we've got this IDE which also supported
IntelliJ webstorm which is the HTML
editor a JavaScript editor ID and one of
the features it has is that as you
update your HTML your CSS or JavaScript
without a browser refresh but actually
hot swapping using Chrome technology it
changes elements so you constantly get
an up-to-date view of your HTML right
that's part of webstorm and it has been
for quite a while so that plug-in is a
chrome plug-in which is actually built
in Kotlin and then compiled down to the
JavaScript and then ships as a Kotlin as
a chrome plug-in right point being that
although the jave although most of the
focus of calling right now has been
targeting the JVM javascript is also a
serious target for us and there's
already products that are successfully
being used now written in cotton so let
me go back and I want to show you
another thing this is a little bit
something I've been working on
right how many of you do web development
what frameworks you use give me a couple
of named wicked okay that's right I've
heard of Bradley every framework far
from wicked all right
struts here shame to say it right now by
choice right huh who's heard of Rails
obviously you've all heard of rails
right so I almost wish to forget that
how many of you have heard of another
framework called Sinatra okay so I fell
in love with Sinatra via this other
framework called Express jeaious which
is a node.js framework and I I fell in
love with it because of the simplicity
of the framework because I come from an
MVC framework and I was doing the whole
model of view controller and the whole
views and all of that things and it
started to become too complex too
complex in a sense that it was just so
much overhead every time you want to
write something and I have this
obsession and passion for HTTP which is
actually quite frightening but I really
enjoy reading the RFC unfortunately
hasn't been updated for over a decade
but I fell in love with Sinatra because
of the simplicity and because it
embraces HTTP as an application protocol
versus what numerology of us are using
it as a transport protocol and I started
to do web development in expressjs the
problem is that there's one minor issue
with expressjs which is it's JavaScript
right and I hate JavaScript right and I
and I say javascript is like taxes it
sucks to have to pay it but you try and
keep it clean when you do right and to a
minimum and I fell in love with Kotlin
and that's why I'm more involved with
Kotlin at JetBrains
and I thought well you know what I'm
gonna try and create something like
Sinatra with Colin and what I've come up
with is a framework which codename wah
sabe which is actually not very good
because when you google wasabi okay and
this is using some of the concepts that
we've
see okay so Sinatra is basically the
framework which you pass in a path pass
in a route and then respond with a
handler or route handler and you have
access to the request and response
objects in that route Hamlet okay so
normally you fire up a server which in
my case is called the app server forget
this line then I do get post you know I
have all of the verbs on this server and
here for example I'm doing get person
and returns get person's now what does
get person's that's actually route
handler but if we go to the get you can
see what this is it's an a variable
array of extensions on the class route
handler so VAR arc in Courtland means
that you can pass one or multiple
arguments and you can do that with
functions as well right and these are
extensions on the class route handler
what is the route handler class it's a
class that has that's not needed a class
that has a request and a response
property and it has a next method okay
what is route handler here is just a
function that declares it's syntactic
sugar I'll show you where this comes in
now so basically this is a function that
takes a route angular extension and
returns a unit and all it does is return
itself okay
so let's go back to where we were and
let's see what get person's is now I
could actually remove get person's here
and write my route handler here and I
could do something like response see I
have access to response and then send
for example this is some text right and
that would just print out some text but
I'm not doing that there because that's
not really maintainable code right if
you put everything in there you're going
to have a really long file so I delegate
these to prop two very two functions now
in Cortland similar to
javascript you can actually call a
function without explicitly assigning it
to a variable so you could do something
like get persons using the colon colon
organization similar to JavaScript where
you can just call a function right the
problem is that right now that syntax
notation doesn't work on extension
methods so I have to explicitly declare
it but that is going to come into the
language so you will be able to do this
without having to declare it to a
variable and if I go to get persons if
it would work you can see that this is a
route Handler and all it does is just do
response sent right now inside that
function I have access to a request or
in response I'm doing response sent now
this framework automatically takes care
of everything for you so say send is
sending back an object right and people
is an array of type people when someone
calls this it will send them back an
array of JSON objects and it does that
because of this line over here which I
said forget about which is negotiate
content so negotiate content
automatically takes the accept header
that's coming in from the browser it
parses it based on the weight so that is
required because you know that browsers
can request different types of content
types
parses it gives you an order and tries
to negotiate that finds the serializer
serializes the object and sends it back
okay so that's basically the flow layout
of wasabi it's just a routing table and
then you offload to route handlers and
here for example is get person by ID
where I you see now I'm using some of
these functional approaches so I say
person in the people find fine takes a
predicate it refers to the actual
iteration over the array so it's taking
an array of objects so it refers to a
single in single entry in an array and
it says if the ID is equal
to the root parameters to end yes I
don't do any error check in there if
it's not null sent back person if it is
null set status to not found okay create
route handler it takes the request body
parameters and deserialize is done so
I'm pushing this as JSON and it adds the
to the to the array and then sets the
status says the location etc okay now
all of this is basically the core of the
whole wasabi is nothing it's basically
just takes a request and sends back a
response that's it most of the things in
wasabi are built using extension methods
sorry
using interceptors and if you take a
look at this negotiate content what this
is is actually an interceptor except
what I do is make an extension function
on app server to make it nicer to
configure so the app server has a list
of interceptors and it says interceptor
request before the request after the
request etc and what I'm doing here is
basically just adding a method to make
that configuration easier right since
I'm using an extension to app server I
don't need to do this by default by
convention Kotlin assumes that it's
inside that actual class so you don't
need to do this dot intercept it knows
it's in the app server intercept is a
method of the app server so I say
intercept and then then the Interceptor
takes a an interceptor and then tells me
what path says wants to intercept and
when it wants to intercept it right and
then the actual interception just is
interceptor trait which has a single
method which is called intercept which
takes the request response and then
returns true if you want the process to
continue or false okay so everything
here you can see basic authentication
sorry basic authentication
ten negotiation five icons file-based
interceptors all of it all the
functionality of wasabi is basically
based on this concept of interceptors
okay now I showed you with this that
we're using some of the functions of
wasabi of column which is basically the
route extension handlers some other
things that you could do are things like
this so I could do for instance app
server get something and then I could do
negotiate why is this going me oh did I
kill this so I have another one which is
called response negotiate right and
response negotiate takes an array of
pairs now who's familiar with content
negotiation basically a request comes in
as application JSON do this if it comes
in as text HTML do that that line that
you saw previously this one does
automatic content negotiation but you
can also do manual and you could do
something like text HTML with response
send hello and if you want application
on JSON with response send send some
JSON here etc right and this what this
is doing is basically using extension
methods on strings and in fix notation
to define the width and is combining
that with route handler extensions so
that you could do response directly here
right but you don't need the response
here you don't need the response here I
could actually just do send because it's
in the context of the response already
okay so it makes a very fluent fluid
code so
Hey any questions I would run this but
it trust me it does work okay so are we
there yet no we're not and we're not
there yet for a couple of reasons first
of all the speed of the compiler right
right now I'm not gonna lie to you
you're gonna try it yourself and it's
not the fastest compiler in the world
and we do want to make it as fast as
Java right so a lot of effort is putting
being put now into making that compiler
fast are we there yet enough in the
other goals we're not there yet in
tooling either
I mean IntelliJ already provides you
with a bunch of refactorings it provides
you with static analysis but there's
still a lot more left to come so if if
we're looking at those goals we're not
there yet in those two aspects right now
the tooling could eventually come but
the important one which is the compiler
speed needs to speed up it doesn't mean
that you can't use the language as I
said we're using the language internally
however it's not the most ideal
experience when it comes to compile time
right I mean for example for me to rerun
for me to compile wasabi which is quite
actually little code for all it does
which is the benefit of Kotlin but it
takes around 10 seconds now okay the
overhead there is no overhead right
there is no overhead you don't have the
overhead that Scala has right now what
Saba even someone was complaining about
the low time of JVM I have 34
integration tests with wasabi which
basically means that every single test
fires up an instance of an HTTP server
runs the requests against it and does
the comparisons and with 34 tests it's
taking me on the one second to run all
of those tests okay it's using nettie
under the covers which I love what I was
using netting
but in terms of tooling in terms of
speed now we're not there yet so if
you've liked what you've seen and you
want to play with Kotlin community it's
completely free obviously you can come
download the command-line tools the IDE
is also free all of these things that
you've seen and everything that would be
possible in Carlin is always going to be
supported in an intelligent Community
Edition you're not going to need
ultimate to be able to play with Kotlin
the community edition of IntelliJ is
also open source and free available on
github if you want to play with the web
interface there's a web interface on
Cortland MOJ brain is calm and the
source code is on JetBrains slash Kotlin
and we do have external committers to
JetBrains as well more information the
home page is called Linda brains or org
and we have a twitter handler which is a
project Kotlin and i'm going to be at
the booth this next two days so if you
do have any questions please feel free
to stop by the booth thank you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>