<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Of Raspberries, Dolphins, and Chickens: Visualizing Embedded Data with JavaFX | Coder Coacher - Coaching Coders</title><meta content="Of Raspberries, Dolphins, and Chickens: Visualizing Embedded Data with JavaFX - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Developers/">Oracle Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Of Raspberries, Dolphins, and Chickens: Visualizing Embedded Data with JavaFX</b></h2><h5 class="post__date">2015-06-05</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/zgnSvS4uiX0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so I'm Todd castella and I'm here with
my friend Garrett to Grunwald and over
the next hour or so we're going to be
talking about javafx the Raspberry Pi
and kind of an interesting project that
we've been working on for the last of
the wall so we've got some demos at the
end here and hopefully if everything
hangs together it will be well we have
quite a bit of gear up here actually and
so who knows but so far things are
looking pretty good so before we get too
too much into it i'd like to just ask
for your indulgence a little bit and
provide a little bit of context of how
this session that she came together so
last year at javaone Garrett and I were
added in a number of sessions and at the
time there was a bunch of really
interesting stuff going on with Java
actually embedded devices which prior to
that sorry this was not on my radar at
all you know being a client which
desktop guy server-side guy sort of
stuff that was going on the embedded
space was really just not on my radar at
all so coming to Java one last year and
seeing some really cool projects that
folks were doing was kind of like a
really eye-opening experience so Garrett
and I got to talking actually on the bus
ride to the appreciation event last year
and we're trying to think about okay
those all these cool projects going on
you know what could we do right now so
we were thinking and and and so I was
telling her a little bit about thank you
and I was telling her in a bit about so
my wife and I three years ago moved to
an acreage just outside of Calgary
Alberta so just for a little bit of
geographical reference so Calgary's kind
of north and north and east of here and
you know it's a Calgary is a great place
you know I've grown up there it's a
you know fairly big city you know lots
of people lots of noise all that kind of
stuff right and my wife and I decided
okay we just we need to get out of here
right so we end up bought a nice acreage
and you know wanted the peace and quiet
of being you know sort of out in in the
wilds if you like and so as part of that
of course you know you have to have the
dogs and you know we've got a bunch of
barn cats that think they're hoes cats
and you know horses and and things of
that nature right and then a couple
years ago my wife decided okay well we
need to get some chickens okay well sure
chickens whatever but thing is like mean
I don't know anything about chickens
right I mean I'm a city guy right so
it's like well sure so you know as you
know winters in Canada can be kind of
cold sometimes right so it's like well
you know I don't end up with a bunch of
frozen chickens right so what's the
problem here well okay so the deal is
okay well okay maybe a monitoring system
and so the after talking through with
Garrett and saying okay well maybe you
know there's some stuff we could do with
these raspberry PI's and do some
monitoring and things of that nature so
so this whole talk basically started
with with that bus right conversation
last year it's kind of interesting
because tonight actually is the 2013
customer appreciation event so Garrett
and I are kind of like all right what
are we going to think of for next year
sort of thing right so that's kind of
cool so so last year when we left is
kind of like okay well I was kind of fun
we had this nice conversation that's
kind of like well you know is are we
actually going ever do anything about
this but it turns out that and both
Garrett and I ended up hacking on kind
of interesting different solutions and
we came at the problem like really from
totally different perspectives and that
was kind of the fascinating thing for me
was kind of like okay well here's a
relatively simple problem that we can
explain in a couple minutes but we came
at it from like totally two totally
different perspectives and you know we
had raspberry PI's and we have Java
effects but sort of all the plumbing in
the middle was totally different right
so so I ended up doing a lightning talk
at the java posse roundup sort of with
this idea and
garrett did a couple of conferences i
think with his ideas and so we thought
okay well maybe there's something here
so basically that's that's that's the
talk so I'm going to turn over to
Garrett here and he's got some some
context around the embedded stuff yeah
hi everyone so yeah who works with
javafx embedded already someone nobody
with Java on embedded with embedded who
has a Raspberry Pi someone did something
with the raspberry pi or just lying on
the desk because I know that problem i
had the same and actually this was the
project that get me started using it for
something so javafx on embedded has some
drawbacks if you come from the desktop
side and I'm a desktop cry I have no
idea about server side so don't ask me
anything about it I have no answer for
you but on the desktop that's my my
place and so I'm familiar with the swing
but on the pie we don't have swing so I
think that is not the big problem then
we don't have a system menu on the pie
which is also not a big problem and to
drag and drop I can live with that
because if you have an embedded system
somewhere you have a touchscreen I think
you don't want to do some drag and drop
stuff there right and we don't have a
vet view who knows javafx by the way I
just I thought people would show up who
knows okay okay so because on javafx
you've got an embedded webkit browser
which is not available on the pie
unfortunately at the moment and we have
no media support which might be change I
have no idea but at the moment we don't
have it so that is just this is the
difference from javafx on embedded to
the desktop and that's really the only
difference everything else is exactly
the same so that means you have lambdas
you have narrow on you have all that
stuff on the PI right so that means we
have available JD case we have to JD
case on the pie available at jdk 7
javafx too and we have jdk 8 with job FX
8 which is the one you should choose if
you try to do something with the pie and
java then use jdk it's much better it's
faster and you have all the features
and we have different platforms that
that was the one they announced last
year as their reference platform which
is it not anymore so today they use the
PI and I started with the bigger board
which was yeah it took me weeks to set
it up and get everything running on
their alpha release but with the pie
it's so easy to do that so if you didn't
do it right now just try it it's so you
set it up and it works directly which
brings me to my example Todd mentioned
already that we needed a monitoring
system for his chicken barn right that
was the idea so he has the chickens he
has the problem i was in germany and was
fascinated by that idea and was thinking
okay if i would have a chicken barn
somewhere how can i monitor the
temperature using my pie and using
javafx and java and all that stuff so i
just broke down some requirements so the
requirement would be we would like to
measure the temperature we would like to
monitor the temperature on the desktop
machine it should also be possible to
monitor it on an embedded device like a
raspberry pi again and if possible also
on mobile because last year we hoped
that we will see javafx on maybe ipad
devices this year but not today so this
is the it's optional and then the hard
way hardware that we use is the
Raspberry Pi for measuring the
temperature we have the Raspberry Pi for
monitoring a desktop machine and for
mobile app again this is optionally i
just created an HTML client but this is
not not that important so who's who did
some embedded development here already
some hardware developers here ok because
when i tell this to people who develop
hardware stuff then they say a Raspberry
Pi measuring temperature isn't that
overkill yes of course it absolutely it
is overkill but it's so cheap you know
it's a few bucks and then you are going
to go so if it's
get broke just buy a new one so that's
no problem and you don't have to solder
and all that stuff so the typical setup
that's the setup that i use you have 2pi
it costs you may be 40 bucks you need
power supply you need a SD card of
course another ten bucks and then just
for convenience reasons some Wi-Fi
module which is another ten bucks so
that means you are good to go but
seventy dollars roughly it's an
estimation so you set it up what update
I told you I'm not a server-side guy but
I know the desktop side and I use the
chat line very often so who use chat
lines here nobody chatting who knows
xmpp or Java Yeah right let people know
that stuff but you can do interesting
things with it because it's event-based
so I thought that might be a good idea
to use XMPP for my communication so i
use jdk 8 with javafx eight and i use
sensors and actors from a company named
dr. pues that's the company company from
switzerland and i use xmpp for
communication and mongodb for storing
the data on the web somewhere and okay
share so on the pie this is the best
thing to do is learn how to use the
share and the platforms that i use is
the raspberry pi with Java 8 which is
measuring the temperature that's exactly
that set up here which hopefully will
work in a couple of minutes then on the
desktop I just use my Mac and this is
the hardware that i have connected at
home it's the pie i have a camera on my
pie this is the sensor which measures
temperature humidity and pressure and
you see it's USB so there's no soldering
or something I just plug it in and it
works and they have a Java API you can
code it with Java which makes it very
convenient and I have a relay I can
switch things whatever it is and what
else I have this power plug which is
network capable so I can turn it to this
stuff from the pie and switch on light
or off or whatever i plug into this for
connectors I can switch on and off
remotely and I have a brightness sensor
yeah I have many many many more things
just to give you an idea that is the
setup i will show later on and this is
the stuff that's also available in that
I have at home and use it for several
things you will see here's the the
display that you see ya and this is
connected to a QB bored so i will also
show this one and that's the setup that
means i have a raspberry pi for
measuring the temperature that's running
on java 8 embedded then i use another
raspberry pi using javafx 8 to visualize
something but i won't show it today
because we don't have a very good
network connection here so that's the
problem i can't really connect it then i
have a desktop machine with javafx 8 and
then i have a mobile client but forget
about the mobile client right we will
talk about Java so what about the
communication between all these things
so i use legs npp stuff i mentioned that
already so I'm using the smack library
which is if you don't know that it's
it's free it's from a company they also
give you a servant xmpp server it's open
fire maybe you know that or heard of it
and they give you also this smack
library and then if you need XMPP over
HTTP you need something like Bosh right
that's just the port to the web which is
with the open fire server you get it for
free and with the smack and there's no
difference if you talk to an HTML client
or to java client or whatever client so
that means that's a setup I have a
server but this is not really my server
I just use a public one that is freely
available so you can for example the
car's computer club in Germany they have
a server that you can you can get for
free access to that through that thing
but we have also one in the company that
I use right now so I don't have to setup
the server myself which is for me very
good because I have no idea about
setting up a server and
and I use on mongolab calm i use the
mongodb they get 60 megabytes for free
and that's more than enough for my kind
of stuff so and the idea how it works is
every five minutes the Raspberry Pi
measures the temperature and sends it to
the MongoDB installs it there and if a
client connects to the web and you will
see it if I open it up it sends a
message to the server then the server
will forward it to the pie this one will
measure and send it back and that's I
think this is the standard procedure
right the nice thing is that I don't
have to take care about all the
communication in the background and
there is no really a server that stores
some logic or whatever there's no model
there's nothing it's just the client and
another client and they are talk to each
other that's in principle to set up and
this is true also for the embedded thing
if I connect another pipe of the display
this one just also talks over XMPP with
the it's chatting with the other pie
it's a chat so that means the advantage
of XMPP is that it has a free
infrastructure that means I don't have
to buy anything I get a free account on
a free or open source server so it's
widely used many many clients are
available for many platforms so it
supports presence which is very nice
that means if the pie brokes down what
breaks down then I will see that oh it's
not present anymore on the web so that's
very nice and it's it's extensible and
what does it mean extensible so maybe
now you get an idea why i use XMPP this
is just a part of the code with a smack
library you have something like message
class and in this message class you can
just add properties this is just a key
value thing you just simply add all the
properties you would like to send and
then these properties will be attached
to the message and on the receiver side
if you receive a message you can ask for
give me the properties and then you can
read it out again so that means you can
extend it with whatever you have and
that's very comfortable because again I
don't have to take care about how to set
it up and how to setup the server side
to store the data there and forward to
the client all that stuff
don't think about that I just create a
message at the data that I can push it
out and the best thing and that's really
fun you can chat with with that stuff
right so that means i can use my iPad
and chat with my raspberry pi so I
implemented some commands that i will
show you and it looks like that i asked
for the status and then the pie sends me
the status with all the data or the
history that means every 10 minutes the
last hour he sends me all the data or i
can ask for the IP address for the
public IP address and so on i will show
you that stuff in the demo and that's
really fun because then I'm
cross-platform right I don't need a java
version I can use just a chat line on my
iPhone or my Android device it's because
this stuff is available everywhere and
this is a totally different approach if
you create something which is only
available on a desktop machine for
example then you have to create your own
mobile client for mobile phone and in
this case I just implemented a little
API in XMPP that i use to chat with my
pie so for example I use that to
remotely update my application I just
sent a message to the pie I will show
you how to do that and the pie then
downloads the stuff from the web and
reinstalled it so i use it for updating
the jdk on my pie so you know we have
this weekly builds from oracle and they
it's improving so i have to update the
pie all over the time and that takes
some time so i thought it might be much
easier if the pie would update itself
download the stuff decompress install
restart you jdk very easy i can make
snapshots i can control things remotely
but to give you an idea how i set it up
i chat with the pie and the pie I've
also dropbox account which is free for
two gigabytes that's more than enough so
I tell the pie update then the pie will
check on the dropbox if there is a new
version of the jdk i copy this from
wherever I am I just come
new version of my dropbox and then i can
go to the pilots say an update and then
he will check ok it's there downloads
the zip file and then he said okay I'm
finish and I can tell them okay then
reboot you yourself and during the
reboot a shell script will just
reinstall the old version unpack the new
version and then start the software
again and you can do the same procedure
with your own program i do the same so i
create a Java file I put it on my
dropbox I tell the pie update and then
you will check for the jar file and do
the same procedure so I came from for
example if I have an idea now in San
Francisco I can hack it here put down my
dropbox and if it's soon to the to the
dropbox i can chat with my pie and he
will update itself and then i have a new
version available and that's very
comfortable right so i can do it also
with my iPhone or whatever I just have
to make sure that i put the jars on the
drop box so that again i don't need any
server solution for that it's just the
stuff that is available for everyone so
that means this combination of shell
java 8 the dropbox xmpp MongoDB and this
your tip you sensors that's very easy
solution for something like measuring or
monitoring the temperature right even if
you you don't have any idea of
server-side programming or hardware
connecting this is everything is
plug-and-play i just use the stuff that
is freely available so that was my
approach and this is the desktop
application that i created so yeah you
see maybe this is the stuff i can do so
the desktop stuff is for me very easy so
I created a client it should be this new
flat UI style you know who everybody
doesn't know so i thought i would do the
same and it will show you the
temperature you it will take the data
from the MongoDB here you see this is
the pie and if i connect a second pie or
a third one or fourth whatever they will
show up on top so it wherever they are I
just plug them in the in the web and
then this application will check our the
spies are available and then you can
check pies and I have some charts where
you can see the graph from the
from the measured temperature you medium
pressure I have a little menu where I
can also check with the brightness
sensor which tells me okay is at night
or is a day wherever and on the desktop
version I had also something that shows
me the location that it detects by the
IP of the pie on the google map so i
used the web view and it will show up
the location where where is the power
located so that's that's very convenient
and have some informations and so on so
i will show it in the demo so like this
right i can ask him what's your public
IP and then can I SSH from wherever I
did it from the hotel this morning just
to my pie at home and because the pie
just I've wrote a little go script and
put it on App Engine and then this one
will just give me my public IP and pious
for its public IP and then send it to me
and here we go it tells me the Java
version which is installed in the
sensors that are connected you see have
a brightness and power relay at this one
so that's a desktop app and in addition
I also have some little extreme feedback
device which is this tiny thing it's a
thing and blink one and when I connected
either to my notebook also to the pie
then I can it will it up it's a RGB LED
so I can say okay if the temperature is
too high it will get red if its cold it
will get blue so you don't have to have
the the app open all the time you can
put that thing on your desk and you see
oh it's getting too cold or maybe not
that important for the chicken back but
in my office it was it was fun to play
with so and because it's Java all that
things it works on the pie exactly the
same application I can run it on my pie
I have a display with touch screen and
then I can use it on the pie tool and
this is the big advantage of javafx not
on the pie and on the desktop it's the
same jar I just put it on that on the
pile start and it works you just have to
take care how you coat that stuff
because the pie is not that powerful but
in principle is this no problem to do
that and that's also the reason why I
don't have the vet view on the pie
version right because it's not available
that view
which leads me to the totally different
approach from thought so all right
thanks Garrett okay okay so as Garrett
mentioned the way that I came at this
problem was was quite a bit differently
actually so does anyone who knows about
open dolphin a couple great okay so open
dolphin basically the way that I was
coming at this was that I was I wanted
to have the Raspberry Pi to actually
monitor the temperature data and then
use open dolphin to basically be the
plumbing between the Raspberry Pi and
some sort of javafx client or multiple
clients so open dolphin if you are aware
of it it's um it's designed for writing
multi-tiered rich desktop applications
it's really the way that I look at it it
handles a lot of the really nasty kind
of plumbing that allows us as
application developers to not worry
about some of the low-level details of
essentially coordinating events and
things like that between clients and
servers and all that sort of fun stuff
it's that open dolphin dot org and I
would say it was originally I guess
announced at last year's type of them
that right yet and has some significant
development over the last year and is
really a fascinating library so
fortunately the scheduling gods are
actually on our side here because
directly after this talk dirty Oneg who
is up front here who is mr. open dolphin
is actually going to do a full length
one hour session on open dolphin which I
will be immediately going to after this
session so all of the stuff that I
talked about today I suspect he'll go
into great gory detail
so if there's some kind of interesting
things that you think now that's kind of
interesting Derek's talk will will be a
good place to go okay so why do I like
open dolphin so I look when i look at
like evaluating libraries or frameworks
or things of that nature is kind of like
you know what what is it that i look for
so one of the things that really sort of
spoke to me when i started reading some
of the documentation looking at the
fantastic examples that comes with open
dolphin is the fact that it's really
well-designed and there's some really
nice metaphors that are implemented in
open dolphin that when i look at them
say okay that makes total sense to me so
i'm going to talk a bit about them and
have a few examples of sort of where you
might use this in basically a
distributed network ritual I kind of
application so the first one is a
presentation model which is essentially
a data structure that's shared between a
client and the server and you can sort
of think of a presentation model as
containing sort of the data that you
display in some sort of you I but not
how to actually display it that's
actually you know handled by your UI so
presentation models are flat which
basically means that you put values like
strings and dates and things of that
nature in them into a presentation model
but you can't put like a big object
graph so so the things that you actually
put inside a presentation model or
something called an attribute so an
attribute really is essentially a really
small wrapper around the primitive data
types strings dates and numbers and
things of that nature they have a unique
ID in a name which helps when you need
to figure out sort of what attributes do
I need in this particular context or
things of that nature and the other
interesting thing that will touch a
little bit about in a minute or two is
that they actually have some extra
support in open dolphin forgiving
bindings so in jeff affects the binding
story is pretty good much better and
this the good old swing days when you
know we set all these listeners and
property change events and all that sort
of fun stuff it's you know orders of
magnitude better in the open
in javafx but we actually have a little
bit more syntactic sugar that the the
open dolphin library provides us which
I'll talk about in a minute so here's a
little example of to maybe help so I've
got a little you I with a login form
with a couple of labels and a couple of
text entry fields so on the client JVM
there is something called login p.m.
which is the login presentation master
or login presentation model and then I
have two attributes one that's got a
username and one that's got a password
so the interesting thing with open
dolphin is that it actually keeps the
client and the server presentation
models synchronized all the time and
that happens totally behind the scenes
and you don't have to actually worry
about that which if you've ever done
server-side code and trying to
synchronize sort of you I state and
server-side state is a massive pain in
the you-know-what so and the fact that
that abstraction is in there and kind of
baked in the way that open dolphin works
really makes a huge difference for us
that you no need to worry about that
kind of stuff so this is a little
snippet of code which is how you would
actually create a presentation model so
given a an existing client dolphin which
is basically so prior to this code I've
actually connected to the server and
essentially established some some the
mechanism of how my client in my server
is going to communicate which I'm not
going to cover but basically I have this
client dolphin reference that I can
basically asked for presentation model I
give it a name and I have a list of
attributes here with some default values
open dolphin is written in groovy but is
totally agnostic as far as support
across the JVM for languages so you can
use Java and all sorts of other
languages so you know a Java version of
this would basically just contain a
bunch of more brackets and some
semicolons and things of that nature but
you know groovy is much more expressive
ample opinion so so I did talk a little
bit about binding so this was another
interesting addition that basically
there's a DSL that or a domain-specific
language or a little bit of syntactic
sugar that you like that basically
allows us to do some interesting
bindings between presentation models in
the UI so in this case we've got the gfx
binder make a call to what so we're
binding the text attribute sorry the
text property of the user name field
which is basically this thing here to
the user name attribute of the login
presentation model so this reads very
much like an English statement even more
so in the groovy side of things so this
actually is valid hunk of groovy code
that will actually do that exact binding
right so it's blind text of user name
field to user name of Logan so the the
nice again edition of this is that we've
got the possibility that when values in
the presentation model change that they
will automatically get reflected in the
the UI elements so that's the other
interesting thing is that the
presentation model attributes can be
updated by a client or server and again
they are synchronized automatically by
the library so it's something that we
don't have worry about so this actually
is just a little example where I'm
showing a client and the server so you
can sort of see as as I'm typing in this
text field up here we've got essentially
communication happening between the
client and the server and it's really
just as simple as you know these events
are firing on the client and then you
know as they're being typed this
presentation models being updated and
then the presentation model and the
server is being automatically updated as
well okay so that's sort of the client
side of things in in open dolphin on the
server side of things there's basically
sort of two metaphors that are
implement kind of the behaviors this is
where you're going to basically bake the
how your application what would the
smarts of the application of on the
server side of things so there is basic
commands so there's an implementation of
the command pattern which is a very
efficient and effective way of basically
communicating between clients and
servers and so commands are kind of like
the the way that this communication
happens and then there's also actions
and I think actions would be safe to say
are inspired by sort of Grails approach
for web application development so it's
really the the logic of sort of the bulk
of the logic of the the non you I side
of the of the application is going to
live in these actions so again we have a
little illustration here where I've got
my little form and if the user actually
clicks the Sign In button you know
basically behind that button we can send
a log in command to to the server which
essentially would trigger some sort of
an action you know into action you could
have things like you know doing an all
depth look up or some database lookup or
whatever just sort of say you know is
this user with this password actually
who they say they are and the so there's
a couple of different approaches as to
what to do with that so one interesting
approach is that from the server side of
things the server action could actually
you know drop a value in the in the
presentation model that the client uses
in the client can sort of hang out and
say you know when this this property
shows up or sorry when this attribute
shows up you know then I'll go actually
do go and do something so you've got
this really and all this is totally a
synchronous right so there's no actually
sort of state that's actually maintained
between the client and server from that
pursued the other piece that I needed
for my little example was the event bus
and this is not something that you
necessarily have to implement but it's
it's it's again a really fantastic
abstraction and it really kind of solves
the problem of so in the
the previous cases with these
presentation models basically those are
our session bound right so you get
basically sort of decline the server or
they communicate within the context of a
single session but in multiple clients
are going to have multiple sessions so
you need to have some sort of so if you
have the case where you actually need to
be able to coordinate events across
multiple clients there's an
implementation of an event bus which
basically sits on top of the the GPRS
library and if you're in the groovy
world you probably know about that but
it's basically the parallelization
framework that backlog pip think sorry i
can't pronounce his name anyway it's one
of the fellows that's implemented the
paralyzation library and it uses a
publish-subscribe model which is really
effective for this kind of work okay so
let's sort of take these concepts that
I've been talking about here and layer
in to the specific problem that we're
trying to solve with measuring the data
on the on the Raspberry poly and
visualizing it okay so let's start with
we've got the Raspberry Pi running java
8 and basically running as a console
application so there's no UI running in
this thing so you get again so for my
particular case you can think of this
thing you know sitting in some smelly
chicken coop in the middle of nowhere
with you know the chickens are around it
and there's sort of no need to actually
have some some interaction with the
thing so let's say for example that
there's a USB temperature sensor on on
the Raspberry Pi and there's a thread
that runs that basically wakes up every
every minute reads the current value so
it reads a current value off of the USB
sensor and then it drops the value
inside of temperature presentation model
so there's a temperature presentation
model with one attribute called reading
so we've got this value of 25.5 Celsius
so I apologize it's actually this could
be foreign tight too so whatever you
need to measure you're comfortable with
that's one so we get this value that
comes in and then essentially behind the
scenes what happens is that open dolphin
will detect the fact that this this
attribute has changed
and behind-the-scenes sense a value
changed event over the over the network
to the server so the server that in my
example I'm actually running open
dolphin inside of a grails server right
so Grails is a groovy based web
application framework typically use for
serving up sort of HTML sort of stuff
but it doesn't have to so in our case
we're actually not using any HTML sort
of views we're actually using it
basically as the mechanism to handle the
state and the and all the communication
plumbing between the clients and the
servers so this this value comes in to
the presentation model on the server and
this reading attribute gets updated it
to the same value from the client and
then essentially what happens is that an
action fires and it publishes that value
on to the bus so there's 25.5 now gets
pushed on to this this event bus and
they're essentially is so this this
value is now out in on the bus and we
now have a couple of other clients so
that so the clients themselves also have
a temperature presentation model which
detect essentially when the value comes
in on the bus it'll update the reading
property on the sort of reading
attribute on the presentation level for
the client and there can be multiple
clients here that actually get notified
by this particular event all right so
let us actually see this in action
okay so this is there's a little bit
going on here so let me try to explain
what what we've got here so in the in
the top right sorry in the top right
we've got so that I'm ssh2 into the pie
so this is the client side of the pie so
Garrett is actually holding on to the
temperature sensor with his hand and so
you can actually see the events that are
being generated by the the open Dolph
the code on the Raspberry Pi that's
basically reading the temperature sensor
and putting values into the presentation
model on the Raspberry Pi then on the
server you can see there's a bunch of
stuff that's happening here where we're
getting value changed commands being
fired and the you should be able to see
somewhere there should be some
publishing messages going on here so as
the values change they get pushed on the
bus and then on the on the so then we've
got basically three different clients so
these are actually three different
javafx controls running in three
different JVMs that are listening with
sort of three different sessions with
three different presentation models and
so they're basically being kept
synchronized with the the server via
basically all of the concepts that I've
been talking about here so we've got
this this nice control that that Garrett
we have this nice control that Garrett
wrote for me and then a couple of ones
that I've basically just hacked together
which are which are kind of fun but so
yeah so that is essentially the the open
dolphin approach again I would hardly
recommend going to dirks talk in in a
few minutes from now to to get some of
them more gory details about this all
right so I'm going to turn this over to
Garrett and he's got all sorts of crazy
stuff I'm sure so yeah I tried to
connect the other pie but yeah
unfortunately it seems we don't get it
on a network so no idea maybe it will
come up so well I have a pie at home
which is connected to the network this
is the one you see on top here so then
you can see my office at the moment we
have it's 25 degrees Celsius and yeah
what it does is like i said this client
pings and sends messages every 10
seconds to the pie at home and that
answers them with the weather
temperature and all that stuff that i
asked for and i have this chance on on
the bottom last 72 hours then i can see
okay the pressure is falling down sauna
and this is now i think this is a change
yeah so because the pressure is directly
dependent or in relation to the to the
weather conditions i put here some some
weather conditions in there where I can
see okay now at home it's not that
stable with us so which is good that I'm
here and humidity is ok so these are
ranges that I took from the from the web
so what is what is the range that is
good for for human so which is in the
green range is ok it's not too dry it's
not too wet and for the temperature
these are also the same sections that
you can see here are here in this chart
so and you see it's mostly fine but the
weather is going down the drain so when
I will be back home on Friday
a good rain I'm pretty sure so I added
some more stuff when i hold here I
showed it to you already in this moment
it will send the message to the pie and
ask so give me some status information
then I can see okay this is the java
version the public IP the local IP in my
local network and i have a power relay
and a sensor connected so that's good i
told you about this experience it back
device which is this tiny thing and
we're not putting on my desk at home
like this doesn't work put here and i
can switch it on to this light bar and
hopefully oh it doesn't damage demo gods
what's wrong come on
it's always the same usually that should
lit up so but I switched on the
brightness Center and you see now
there's a moon that means ok it's it's
dark at home it's nine hours time
difference to Germany but this is the
that's a desktop application and this is
exactly the same that I can run on the
pie and it works with touch then which
is nice but now let me show you the
chadster which is more fun so I have a
chat line open and you see there's
another pie at home but this is only
that has only connected to a camera into
motion sensor and as soon as somebody
steps in my office it would make a
picture so I always know who's going in
there which is good and you see this one
has also the camera and you can you read
it it is hard to read I think it's hard
from that from the back right sorry for
their for the colors maybe I can change
them but I don't think so no this is
nothing wrong well let's see oh man it's
white ok here we have these are all the
commands that I've implemented which is
a lot so there it starts so that means i
can ask him for the temperature for the
pressure is just eccentric the command
temp and where is the answer it's down
there are there it is so it's 76 degrees
Fahrenheit or 24 degrees edges I can
also ask for pressure just pressure and
then he is the answer and that's no life
so I'm talking to the pie at my office
now and I can also say hmmm which java
version was it hmm I take type bash Java
minus version so it oh no that's exactly
the command so I implemented the shell
command will be executed and then I can
get the feedback from the shell so if
you like you can also do something like
bash LS minus L here you go and you see
it's quite responsive right you can do a
lot of things with that what else I can
do is
show me your status then it shows me
that stuff or what else I have I can
switch on the light my wife will love it
it's a head for ports you saw this power
connector right so i say let I oh that's
a net io thing for one on ok it's which
one I can check yet it switched on so
now in the office at at home that the
light is on in the office so I have to
switch it off because it's quite late
there it's a better to switch it off
again ok switch it up again I can also
measure voltage and current I have a
solar panel which is not connected at
the moment they I can check what is the
current voltage ever watched voltage
sensor connected to that thing I have a
relay board and if it's dark for example
if I take a snapshot so then it would
take it to snapshot and now attached to
me snapshot is taken and he would upload
the snapshot to the dropbox and he gives
me directly the link to the image so i
have to wait a couple of minutes and
then you would see on the upper right
corner there will be from from the
dropbox i get a message that the image
was updated then I can click on the
image and I can see what happened and I
connected for example a brightness Enzo
that checks oh it's too dark in the
office so switch on the light make the
image switch it off against stuff like
that well it's really playing around and
figuring out was it what is possible but
there was one more i would like to show
which is research temperature i have i
have alarms where i can say ok and give
me sent me a message if the temperature
will reach a certain threshold or
whatever so i implemented the location
stuff i told you so i asked for the
location then the pie will use his own
IP address check on the web where am I
and then he creates this google maps
link so i can go on this link say copy
yep go to the browser and then show me
where I am so we'll take a couple of
seconds to load the page but then you
will see aha and this is the that's not
where I live not you see here's home and
there's it's the IP provider would you
see it's the pie in Germany okay so you
think stuff like that it's very easy to
implement because I only coat
client-side java I don't have any server
side stuff that I have to do that I just
whatever you like you can implement by
just coding it try it on the desktop
works okay put it on the pie and then I
you can test it at home I can use my
iphone to check with my pie stuff like
that so XMPP is it's quite nice approach
for people that have no idea about
service it so like me for example you
can also measure the brightness in my
office okay it's quite dark so let's
check up if the snapshot arrived check
the harder it is it seems to be it's
dark so I told you it will switch on a
little light you can see something yeah
there's my space shuttle of made out of
lego on my desk so and there's just a
small light in the background of the
camera that will be switched on only for
the photo things like that it's it's
very powerful because you can extend it
with whatever you have on your mind by
could be connected very easily to
hardware and then you can remote control
it forum where ever and you can just use
every client that every chat line on
every platform to do that stuff and you
just have to implement the commands that
you would like to do to use and that's
really yeah that's that's my my demos so
I i think we are quite fast I didn't
expect that but yeah we have ten minutes
left for for questions if there any yes
you can do I didn't do because it's not
that important for me but you can use a
secure connection to the hd2 the XMPP
stuff yeah that's possible of course and
it's it's quite fast you see even with
this flaky network here in the room it's
quite responsive talking to the PI and
getting the the feedback of them of the
machine so yeah this one is here running
unfortunately the other pie and I think
the QB bought also
waiting for the connection so usually
this one that's a QB board it's also
running java 8 but no job effects and
this also triggers the the Piatt at home
and just a question for the temperature
and then just show it so i can put this
somewhere in my house just to see how is
the current temperature and it's a very
small setup so that's all you need is
just this these two boxes right it's the
display and that's up and 100k brand
that's it and everything is USB so you
don't need any soldering stuff and
hardcore whatever see coding or
something like that so this is not
something for industrial use it's just
something for playing around at home
right and I saw some of you have pies so
I hope we spark some ideas to you and if
nobody has any questions then you're
good to go yeah thanks
oh that's is because let me show you
this the question was how I can handle
that with the public with the public IP
right it's I had this problem and this
is the log file actually I create a log
file on my application that's exactly
the file that is on the hard drive right
now and then you this is exactly the
problem that happens overnight it's one
o'clock in the morning then the IP
provider change the connection will
break down but XMPP is clever enough
that it reconnects it there's auto
reconnect in there so that means it
tries from the pipe yeah that's an XMPP
feature you can switch it on and then
this is in the protocol so that means
you started once set auto reconnect on
and if you plug the cable out and then
put it back in and it says Oh
reconnected Oh connected again and he
tries to reconnect to the server and
reduce that for a very long time and so
I can I can check that and to show that
when I do a public IP for example then
it will always now the pie check his own
public IP send it to me and now we can
for example do an ssh connection to the
pie at home because i have the IP
address here and I opened that port for
for the one pie so I say ssh fruit at
this address and then we will see if it
works it's a little bit slow where it
should work I tried it in the hotel yet
that's no problem so
no the pie is also the pie is connected
to the network right so now I'm on my
pie at home so and at the pie I've
rotated the script and go let's go
language stuff and put it on App Engine
and this is only bring back my public IP
and the pie just cause that's that stuff
on the web reads the public IP and sends
me the IP address and so now we can go
to the to the folder home pie and check
for the log file there it is NSA pie Tim
whatever York to lock and then this is
the same file that you see here on the
other thing right so it's really
interesting what you can do with just
such a small device right you can do a
lot of things and with this XMPP sub
that is very easy to do this is not I
think for for bigger applications it's
not useful but for kind of bad things
it's really it's fun that's the biggest
thing it's really a lot of fun
yeah so you see here's the typical setup
that I use its first of all just use one
USB port on the pipe connected poet you
speed up and then you can get a small
one and you can put them on top and
probably there yes yeah that that's
really the best setup and it's very
important to pi is very sensitive to
power consumption over the USB port so
there you have to be careful if you put
in yet like we said if you put in put in
a Wi-Fi connection to the PI directly
and something else then it might not
work because it's not stable enough from
the power supply yeah yeah this
everything is Wi-Fi so because it's much
more convenient than plugging it into
the network every honor any other
question no questions ok so then thanks
for attending</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>