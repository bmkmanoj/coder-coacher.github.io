<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Security with Java Deployment | Coder Coacher - Coaching Coders</title><meta content="Security with Java Deployment - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Developers/">Oracle Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Security with Java Deployment</b></h2><h5 class="post__date">2015-06-02</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/dkkAULbBgA8" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">okay so welcome to security with java
deployment i'm kris benson principal
member of technical staff at oracle this
is david to Haven he was originally on
the slides but i didn't think he was
going to her on the talk but i didn't
think he was going to show up so i took
him off last minute so anyway here yet
we work in the Java group in the
deployment team and he's popping this
dialog up to join the network for some
reason okay I'm going to talk about kind
of where we've come over the last couple
years with Java deployment the job has
been in the news a lot with security and
so hence the name of this talk so I'll
kind of talk about where we've come just
a brief overview there's changes to the
security features and there's also new
features and I'm going to talk about
those as well as best practices it's
kind of something that we've talked
about over the last few years so it's
that same slide deck you've probably
seen but I've updated it a bit more for
reference then the packager and if
you're not familiar the packager I can
talk about that now skew a later we also
have some talks going on later in Java
one and just kind of where we're taking
the deployment we have a lot of these
cool slides graphic arts departments
been working really hard okay so
overview the in the Java control panel
there's there was a slider introduced a
couple years ago that had low medium
high so low was just kind of the run of
mill how you been running running java
in the web browser and jnlp all these
years we we took out low and anyway i'll
talk more about that but but that's a
new slider that you've seen also there's
a checkbox to disable Java in the web
browser it used to be about two pages
worth of settings and steps to disable
Java in the web browser on Windows and
about half a page for the other two
platforms Windows and Linux so now
that's just a simple checkbox so it's
real nice kind of
long time coming the JRE now expires and
the JRE references security the latest
security baseline so those are more
secure Java applets are blocked by
default the only way to disable that to
unblock them is to have them signed and
you know there's a whole bunch of stuff
you have to do on Safari well unlace
versions of Mac sorry 61 and 7 we now
sandbox your app it's not java
sandboxing it's apple's version the
Safari sandboxing so so it's much more
secure jlp auto download support has
been removed so and NDT those both
allowed they allowed the latest version
of an insecure version of Java to be
downloaded and installed on your system
and so we disabled both of those from
auto downloading a jnlp can't auto
download but deployment toolkit can only
install a secure version of Java so the
changes the security levels I talked
about this a bit ago now it's just two
radio buttons with with high and very
high we were thinking of introducing
very very high but that might be going a
little too far so the basic difference
between high and very high is with high
all jars must be signed they must have
the permissions attribute the only
exception is if they're in the
deployment rule set or the exception
site list very high it has all those
same requirements plus if it can't
connect to the internet so it can't get
to the rehabilitation server then it's
blocked rejected the security prompts
you've probably seen a lot more over the
last few years of these and so what we
have we've added the ability to you had
a checkbox to disable them and now we've
added the ability
to see them again so that was as of 70
45 and JDK 8 as well as the Installer
will prompt the user to restore that as
well and the security dialogues like I
said you've seen a lot more of them and
now we try to show fewer of them as of
jdk 7 you 55 and JDK 8 there's there's a
lot fewer dialogues there's two
different flavors of the security
dialogue unsigned dialogue and
certificate dialogue they'll be shown
how has this code it's once for every
site that's HTTP and within 24 hours of
that same application they will not show
again and for seven days it's that same
thing that they won't show again for
seven days if it's a https so a lot less
frequent and you can always you know
there's that dialogue and connect to our
network okay you guys aren't saying it's
on my screen okay so life connect live
connect has changed a little bit it's a
complicated set of ifs and else's I
tried to boil it down best I could but
I'll try to walk through it so there's a
new attribute called caller allowable
code base it rolls right off the tongue
so I have to get a sip of water you can
add to the manifest file and you can
block or allow based on this it's only
over it writable by the deployment rule
set and you can also enable or block
based off the deployment rule set or the
exception site list exception sightless
only allows things in it doesn't really
block things unless it's not in there
but and then if it passes all through
those then the user is prompted with a
security dialogue to be able to allow or
block the only exception with these is
if the application is hosted across
different host domain host then you have
to add a specific deployment
rule set of file dynamic blacklist this
these are hosted on Java com Oracle
update some ottoman and the jerry
automatically downloads them and so that
we can provide certificates that you
know we've deemed aren't good you
shouldn't shouldn't run them they're
they're blacklisted the the blacklist
support has been updated to accept SSL
and TLS certificates in the case where
we've found like heartbleed exploit for
instance to be to be used so that's new
as well the jdk same origin policy has
changed back in the day your college
roommate would host his server in the
closet and you'd get to it by your xt
but now everybody has cell phones and
laptops and all kinds of portable
devices that are connecting to who knows
what kind of servers most of those
servers are virtual machines that are
hosting multiple domains and across
multiple different servers so we've
changed the same origin policy from
going to IP address to using hostname
and this is a jdk 8 only feature
the manifest attributes are listed here
we've introduced three new ones entry
point is it it allows jars to have
welded let's sit back up a jar can have
multiple entry points so you can have
multiple main classes entry point allows
you to have a space separated list as
you can see there in the in the example
of the classes the main classes that you
want publicly accessible if they're not
in this list and you're using this
attribute then they're not publicly
accessible it's pretty simple caller
allowable code base I touched on this
earlier this if an application is making
JavaScript calls then the call up or
allowable code base just rolls right off
the tongue attribute allows you to
suppress the security dialogues so I
have example 1 going from with a wild
card that allows anything don't do that
to example for with it well three 3 &amp;amp; 4
which are much more specific highly
recommend using the specific because if
you do the wild card then it makes
everybody's life worse because everyone
does wild cards and then we have to
introduce new things for security
application liable allow Africa
application library allowable code base
is a new attribute as well if an
application is hosted across multiple
domains then this attribute will allow
you to suppress the security dialogues
as well they will be shown the first
time that you run the application the
the user has the option to remember that
decision and not show the dialogue again
and the JLP extensions including
non-main jars must come from a listed
place so that's pretty that's pretty
useful here are three examples so the
first ones more vague with the star in
there the wild-card and the last one
we'll also has a wild card but use HTTPS
if you can highly recommend it it's much
safer advanced management console just a
raise of hands nope of anyone who has
heard of this feature okay got one
person this is an enterprise-level
feature that's available with oracle at
java SE advanced it gives the
administrators greater ease of
controlling and managing the java
versions for for like an enterprise
system it uses the deployment rule set
which has been around for a while but we
have a new attribute for called the
force attribute in the deployment rule
set and advanced management console just
made this this available so you can see
you can see the UI here and there is the
rule set file with the AMC generated so
you can choose a specific version of
Java that you're going to run on
exception site list let's see we talked
about this last year at this talk
javaone and application in the exception
light site list won't block but the
security dialogue will be displayed its
main intention is for developers or
customers that can't run all websites
but we recommend using the the
deployment rule set if if at all
possible I mean you can use this for for
development but just make sure customers
don't use it because not a good idea
best practices this is kind of the chunk
of slides that we've taken from previous
years and and we are things we recommend
that you do basically you have a choice
what how you're going to deploy your
application you have java web start jnlp
application that's kind of more native
you know feels a little more native than
being an applet for instance but if you
want to be more of a web browser
first-class citizen then then applets a
good idea we have the packager that's a
new newer feature it allows you to have
a self-contained application so you
bundle the Jerry into an installable
like an msi image there's a link at the
bottom of this page for reference later
so you can find out more about the
packager to determine how you know how
to deploy your application you just want
kind of want to evaluate what you're
going to be doing do you want to be you
know need all permissions can you be
sandboxed recommend sandbox over all
permissions if at all possible are you
going to be using javascript in any sick
way shape or form you know what JVM
options are you going to be using secure
insecure ones same with the system
security properties what version of the
JRE are you going to use you know where
your artifacts going to be are they
going to be on the same post different
hosts now you have to sign all your jars
so there's no question about that read
the secure coding guidelines we all have
to do it here in Oracle so I highly
recommend that you do it you'll learn
about the do privilege block where to
put where to put those when you're when
you're running in all permissions mode
make sure that you don't run any user
code in side of a do privileged block
try even try not to access their strings
that they're providing make sure so
basically make sure you know do
privileged block your only executing
stuff that you're sure is going to be
secure here's here's an example of a do
privileged block you can reference later
all that you can find it on the website
I'm not entirely sure why I put it in
there
Jane LP sign Jane LP files we recommend
signing your jnlp if if you can
shouldn't be too hard basically you just
put a copy of it in your jar file a few
other things that if the two copies if
the copy you normally deploy and the
copy in your jar file are the same then
you're basically you have a sign jnlp
file Java jvm options and system
properties there's a link at the bottom
of this slide with the secure properties
try to use those if at all possible if
you can't then you'll have to have a
sign jnlp file choosing the JRE version
there's two slides here came from
previous years that has all the little
if conditions and else's and all that
kind of stuff but I found that it boils
down to just this slide the first
example is you can run with a specific
version of the JRE example two runs with
use as a star as a wild-card specifies
that version that major version of the
JRE won't run with any other versions so
example 1.7 is what you specify one run
with 1.6 or 1.8 and the example 3 will
with a plus wildcard it will run with
1.7 and above so anything is good from
that point on prevent your jars from
being repurposed this is a number one
security exploit that we do see is
people's jars being used by attackers in
ways they didn't imagine so you can
prevent this by using the code based
attribute that's the easiest way to
prevent it you can specify multiple
locations the example down at the bottom
there's there's two locations oracle com
and java.net
that this example can run so your your
your jar can be fairly you know you can
you can run it pretty much anywhere you
want but if you just just specify then
you know where it can run then it allows
attacker not to be able to use it as you
can see repurposing jars is a pretty big
thing there's a whole bullet point list
here you know again sandbox things you
want to set the permissions attribute
the JLP permissions level of the
manifest file / permits attribute the
permission attribute must match don't
use the HTML applet tag this has been
deprecated people are still using it
been deprecated since 1989 I think sign
all jars are the same certificate except
except extensions those don't have to be
signed with the same certificate the
link at the bottom use this for
reference later because that that talks
a lot about repurposing preventing
people from repurpose your jars you
don't want to make them repurpose bowl
on purpose again we recommend using
HTTPS instead of hcp HCP has a man the
middle attack that people can use
exploiters can use what else don't want
to say about this that's good
signing your jars as of the beginning of
this year all jars must be signed with
high or very high extremely high is
going to be even worse so I'm going to
have to sign it twice or something we we
recommend using the ca certificate it's
just a lot easier to use and you can
time stamp your jar it's kind of a
simple little little feature the when
you sign your jar the time stamp of the
jar goes into being part of the signing
certificate so so I recommend doing that
you can generate your certificates and
you can import them with the control
panel or the command line here's an
example of doing it from the command
line with key tool and here is a
screenshot of doing it from the job
control panel with the manage
certificates button on the security page
so one of the hardest things is to keep
your application up to date because and
with with the security but there's a few
resources that you can use bunch of
blogs recommend reading all those if you
if you can because a lot of good
information comes from those takes time
but it's worth doing packager I
personally recommend to use the packager
if you can I mean I understand if you
have an applet that you need to deploy
or jnlp because an existing application
it's obviously easier you just click on
a link but the packager is that's you
know that's something where we're
putting resources into and we're
developing if you can use it then you
really kind of bypass all the slides I
talked about so it's kind of nice but
it's limited to because you user has to
somebody has to actually install the
application on the machine there's
there's work to be done so i'll talk
about that in the future slide but in
eight u20 we rename the job
FX packager to the Java packager so you
can bundle swing apps used to be javafx
so it insinuated is only for javafx we
introduced an API for IDEs so NetBeans
and I think IntelliJ I can't remember if
they're doing it yet they have we have
an API so they can they can bundle
applications and they can provide
external bundlers as well we've
introduced a support to support the Mac
App Store out of the box we also
introduced a PKG bundler and we sign the
app so that it can be bundled with a mac
app store and we introduce services and
Damons for windows and mac alright sorry
linux 8u 40 that hasn't launched yet
sometime early next year i believe we
single sourced the launcher for for
launching your application the stub app
application that was a pretty big
investment and it allowed us to do a lot
of things basically the the old launcher
was was three different programming
languages one for each each platform it
was just kind of thrown together because
we had a release crunch as those usually
happen on Mac it was objective-c lenox
it was C and windows with C++ so they
weren't all the same but now with a
single source they're all C++ on Mac
there's a little bit of a objective c
plus plus there's a packager jar that we
now introduce and a packager shared
object or dll so native library with
that we've been able to introduce a lot
of these other features the JVM user art
overrides we had that before if you used
it you could go through the Java
preferences but it didn't allow you to
get access to what the default args and
there's a few other things that we we
enhance so we have a new API
if you're using the old one we you know
you can use both still but if you it
allows reading and writing the new one
so you if you write it will write to a
new config file we introduced the file
associations with PKG app msi RPM and
deb on linux and we also have multiple
launchers on windows and linux so think
Microsoft Office or Photoshop sweet
against creative suite so if you have
photoshop and you have illustrator you
can you can bundle two applications
together that there will be basically
two x's to launchers and they'll share
the same runtime so it saves on overhead
and we've introduced a simple dmg so the
what we had before with what I'm calling
complex dmg is you have nice little
graphic with the background a dmg when
you opened it up and there was a symlink
to the Applications folder and what we
did is we had to automate finder for
that with applescript so there's no
other way to do it unfortunately and
when you're when you're you know your
developer and you run it you want to go
check your email and you're compiling in
the back background you sometimes the
bill would fail so didn't work very good
on build machines if you had two builds
going at the same time they could they
could conflict with each other as well
so with with simple dmg all it has is
the dot app bundle went through this
talk a lot faster than I did a few
previous time so future don't quote me
on anything as I said earlier before the
you know if there's any future record
revenue recognition don't make any
decisions by stock or anything based on
what i said i don't think anything i
said is that revolutionary but what
we're going to do is we're going to
continue to improve the security there's
there's lots of different ways that we
can do that
we're going to continue to do that one
of those ways is with Windows low
integrity we talked about that again
last year at javaone haven't quite
gotten to that it's coming low integrity
is basically like the Mac sandbox so so
the app will be restricted when it runs
the Java control panel we're going to do
a whole new rewrite on it's going to be
job FX and the security levels as you
can see that's a that's a big theme it's
going to be a check box it's
revolutionary AMC it's going to be
web-based it's gonna have a rest api I
don't know that that will really
influence any of you but it'll allow you
to push the deployment ruleset file to
the desktop and it'll have more
instrumenting so you can find out what
everyone's running how long they're
running exactly what java version
they're running so you know if someone's
playing solitaire you'll know the
packager we have a lot of ideas for this
one of the big things we'd like is a
better platform support so like on the
Mac there's Notification Center we'd
like support for that there's some
taskbar stuff on Windows 8 when windows
7 that we'd like to support things that
the JDK is just never going to get
around to supporting that we'd like to
be able to support auto update this is
one of those big items that I mentioned
earlier that we don't have in the the
packager that you see from Jane LP and
and applets we'd like to introduce that
it's it's a big feature there's a lot of
third parties out there that we could
possibly bundle or leverage or something
in some way shape or form we're not sure
what we're going to do but but not
everybody can deploy to an app store and
we don't also support since Java doesn't
support Windows 8 we don't support the
App Store on one windows so not yet I
think that will change right now the
launcher it's just a very generic
executable on windows so if you go to
the properties on it and see the version
and stuff it that doesn't show up it's
much nicer if you can
deploy an application and people can see
the version number so we modify the
splat of the icon of the launcher right
now but we don't modify any of the other
metadata we'd also like to introduce the
splash screen to leverage the Java
splash screen but there's some issues
with that so we're going to work on that
and auto memory so that JVM user
overrides that I talked about the
preferences what we find is most people
only want to modify the the JVM marks to
be able to increase the heap size go
figure so it'd be nice if we can
introduce an autumn memory so no one has
to do that so that's one thing we think
we can do there's a lot of a lot of
things moving around there but but I
think we can do that so in summary well
made it really quick you guys can either
ask a lot of questions or enjoy a nice
break you use the packager if you can
use the deployment rule set that
improves the user experience by a lot
because people don't get popped up with
a lot of dialogues even though we've
tried to reduce those follow the best
practices those slides are good
reference but basically you want to use
the manifest attributes use HTTPS sign
all your jars follow secure coding
guidelines you'll have to find that link
and take your JRE please if you're using
jane jdk six update to the least seven
it's a lot more secure and keep up to
date with evolving security practices
here's a link to our blog we haven't
updated it in two years so I plan to
remedy that after this talk we didn't
realize that until till we looked at it
made sure all the links worked and we
have three more well two more talks one
Burt birds of a feather tonight about
the packager dano where's Dan oh no
there he is he'll be given given these
packager talks I'll be there tonight
with the birds of a feather so if you
want to get hands-on ask a lot of
nitty-gritty questions you can be there
to ask us
thank you and I a lot of questions for
you no I'm just kidding ask you guys can
ask questions David I'll answer to yeah
you guys like it's the slides are
already posted yeah if you have a thumb
drive I given to you peanuts in my
pocket lazy download feature work with
sahn jars summarization important bit
that jabba decided the eagerly download
everything in order verify
good question I think we do have to let
download everything before it is
everything doing everything but there
you know Andy fans you know well you get
your information i'll get back to you on
that it's supposed to be different now
it's something that's ongoing those
certificate really relocation checking
is kind of a iterative optimization for
working it's a work in progress we have
to be careful with it because we can't
run code that we have authorized so if
the applet request code and jar that
isn't fully downloaded yet and it's
going to block execution until it's
downloaded and checked right so yeah we
are yours be completely download right I
think the way lazy download works I
think things that if i remember right
everything that's signed is going to be
downloaded anything that's that's not
signed so in other words resources jar
with jars with just resources don't have
to be download can be lazy downloaded
but i don't know if there's much point
of that yeah but let me give your
information and i'll get back to you on
that because andy is team member who
knows all things related to that or
isn't isn't here crickets the other one
all right if if at all possible yeah
because I mean you're bypassing all you
know some of the security checks you get
a dialog you know so they do get the get
the security dialogues but you know
there's time at a time in a place for
that's why it's there so use it if you
need to but I wouldn't use it as a
blanket solution
for everything it's tended more to work
around until whatever the other eye
problems can be fixed
they are questions what if I from these
the application in an environment that
is not connected to internet I need to
use kind of a certificate authority days
that is how to recognize my ass every
day that you know if I won't decide it
because started to gain our Authority
that is not going to that's very signed
by the government one hora you nutcase
you have to import be the ca certificate
into the certificate store which you can
do through the control panel portrait or
he is key tool yeah either way the two
examples that I happens live and you
could do that for testing with
self-signed certificates which eases the
developer burg
I talked way too fast last time I went
over so when I when I tested it I went
over so overcompensated jewelry I'll be
up here for the next 10 minutes if you
want have any questions so I need to get
your information</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>