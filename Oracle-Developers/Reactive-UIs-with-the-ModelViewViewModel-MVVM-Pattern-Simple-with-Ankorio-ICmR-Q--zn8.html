<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Reactive UIs with the Model-View-View-Model (MVVM) Pattern: Simple with Ankor.io | Coder Coacher - Coaching Coders</title><meta content="Reactive UIs with the Model-View-View-Model (MVVM) Pattern: Simple with Ankor.io - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Developers/">Oracle Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Reactive UIs with the Model-View-View-Model (MVVM) Pattern: Simple with Ankor.io</b></h2><h5 class="post__date">2015-06-02</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/ICmR-Q--zn8" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so very welcome to this talk at JavaOne
my name is Tomas speaking this is my
colleague manfred gala and together we
will talk about reactive your eyes with
model view viewmodel pattern and the
framework anchor dot IO before I start
with the actual presentation I want to
give you a short introduction about
ourselves we are both developers located
in Vienna Austria we work for a company
called EURion and we started working
together in the late 90s when we both
got attracted by web applications we
started off with C++ as a development
language we can't were kind of forced
these days to use still C++ out of
performance reasons but we very soon
then switched over to Java and and we
wanted to develop our applications with
Java we had different clients these days
and what we lacked was a really good web
application framework and that is an
open source web application framework
for Java and therefore we took a look on
the market what's out there and we soon
found a paper and it was called
JavaServer faces but there was no
implementation around so we decided to
start this project my phases in 2000
late 2002 where we started development
developing an open source java server
phases implementation this
implementation is now on Apache hosted
on Apache it's called Apache my phases
and it has really gone big big project
later in 2005 Bank in Austria asked us
to to help them with their settlement
system they had an old Josue settlement
system which actually sells all the
trades that happen in Austria let's say
if there are two banks and they want to
trade securities or their tre
coming from in in from the securities
market they have to be settled they have
to go the money from A to B and the
securities from P to a and there are
lots of messages in this system coming
concurrently there are some some patches
that settle at the trades from the David
from the stock markets the day before
and we then try it or decided to use an
event based system so that was the first
time we used events to build up our
system we translated those messages into
events and the events we then used
different statements machines where we
applied those events and then triggered
the business logic via those state
machines and it turned out to be very
robust this system and easy traceable so
if there was something going wrong
looking at the events we could easily
find out what was going wrong the system
is still in use and beside the
robustness it was very very nice that we
could scale our system those days we
just had the CPU with a single core and
to make it to make it work we used four
servers and distributed all our event
system over those four servers so the
scalable and and very founded very
robust and from time to time we look
into new technologies and we we are
still using since then we have been
using this event technology for our
systems and we again last year we again
looked into UI and the UI market what's
out there and we played around a little
bit with events that happen in the UI
naturally and we want to decided to try
out what if we push those events to the
server and back from the server to the
client and see how that works and that's
what we got sorry
and that's what I'm going to present you
now
here's the agenda I will talk about
model view viewmodel that's a pattern we
used we enhance this concept calling mV
SVM Model View synchronized view model
we of course did an implementation to
prove to prove the concept and we open
sourced it under the name anchor and we
talk about this framework and show you
example sense and some features we
implement it there so let's start with
model view viewmodel
who of you already knows this concept of
model view viewmodel okay terrific there
are some so what's it all about it's
very simple and it's quite old already
it was invented by John Gotham Microsoft
in 2005 and it basically it separates
that definition of the UI so how does it
look like which components are in there
and to actual UI logic the controller
logic so it was it's also pretty much
the same as a presentation model if you
look it up by Martin Fowler so the old
or the very common MVC pattern looks
like this we have this controller the
controller pushes the data to the model
or manipulates data in the model and
there's a view which pulls out the data
from the model and and renders the
output so that's that's very very known
this pattern in mvvm it looks a bit
different on the top we have the view
the MU binds to a view model and the
view model is connected to our domain or
to our business logic whatever to the DB
bit more in detail we have the view
let's take a look at this one basically
it's just a definition of the UI
whatever technology you have their HTML
markup F XML if you use Java FX or XML
Microsoft and
we defined at the UI and the binding to
the view model so this MVVM pattern is
all about binding you have the view you
have some tailor somewhere and you need
to bind it into binding usually you do
in the view model so the view model is
kind of the link between your data that
you get from the server and your actual
UI definition so you have some
properties in your data model and you
want to connect it to some input fields
or to some or you want to connect X to
some buttons whatever so you separate
again here the definition of the UI it
sits in the interview and the actual
logic which is implemented in the view
model of course the model is always the
same you know it is that the main model
usually you have probably have some some
rest services in the web application
where you call the server and and get
the data from nothing special here I
guess so what does mvvm solve it
separates once again the concerns the
definition of the I and the
implementation of the UI logic and the
big advantage here or the idea is to
have you a better testable so if you
have a piece of code where your UI logic
is implemented in you're then able to
write a unit test to easily test the
behavior of your UI component or if your
eye view model actually so that's what
mvvm does I will hand over to Manfred
now
thanks Thomas
so now we have learned what what's cool
about mvvm and why it's a good idea to
to think of in such patterns so now it's
my part to be the bad cop and to tell
you what it does not solve what vice and
maybe I'm not not a pattern that solves
everything for us in the in the UI
development so first of all test the
question we are better to keep the model
wherever to have the model physically do
we keep it under on the server side or
do we have it on the client side if we
have a fat fat giant and we normally
have to the model on the client side and
we have the database connection directly
from the client if you have a classical
client-server environment the normally
that the model would be at the server
side and the client gets the data from
from the server and some some kind of
communication so we have the power of if
we've communication between client and
server if we use that model there are
several kinds to use that maybe we can
do some RPC calls we can do it with HTTP
HTTP requests or some other
communication technology another problem
we have there are various client
technologies they are moving fast every
every month there is a new client
technology out turn in HT ln5 so it's
difficult to catch up if you use this
this if you implement if you model in or
in technology and there's a new client a
technology we have to re-implement the
whole stuff and rethink it so
we we try to think of how can we do it's
more simple how can we do it in a way
that we have not to think about the
communication between the client and the
server so we introduced a new concept
that we call MV SVM so what does the S
stand for Thomas already mentioned it
it's we call it the Model View
synchronized view model so what's the
idea ideas to have the view model on
both sides of the line on the client
side and on the server side so from an
abstract view we we say there is no
difference if we on the client side on
the server side we can implement our
view on the client side and have a view
model to a pint our user and we have the
view model on there on the server side
so we can do the service calls and and
all the theta theta stuff there get our
data from the model and the cloud in
between so the perhaps we can find
something that that does the stuff for
us the communication stuff in pulse base
bi-directional so that the idea mysel
with dimensions the client holds the
view and the view model server holds the
view model the other side of the coin of
the view model and the model on the
client side you can use modern
technology so the years to have tilted
the simple side of the view model to
which which only represents the
structure in the data off of our view
model and the server side holds the view
model and and implements the whole logic
intent and the data binding term so it's
easier to implement the client and a new
technology because we only have to
implement the new view and take the view
model structured only the data structure
we have in our new client technology and
bind it to the to the view on the server
side we can use
our approved pattern so we can use it
Java EE server for instance and we have
a stable platform and probably this this
site would not change so fast because we
can have a stable visual model there and
if the client technology changes we can
find a new client to do the same to the
very same server until the same view
model so that's it that's the kind of
dream we always have to implement
something once and and think we can
break to two changes okay so in last
year we tried to implement this we
played around and try to implement this
this this idea the synchronization of
the of the view model from client to
servant and server to client we call it
anchor on anchor dot IO and as Thomas
already mentioned we we try to from the
start on the we implemented an
event-driven programming model so
everything turned in the in the
framework is is event refund as in
Kronos and you have an bi-directional
communication the events are transferred
in both directions
take this question so that's that's how
the Inca MV SVM model looks like what we
do but to use technology will be used to
chasten as the communication language
and whenever there is a an event on the
under view model a change event and
eight the changes that is driven from
the view lifts if the user clicks
something or enter some data we have a
change event that that goes to the
server and there we have listeners that
react on Anto co those events so the
difference in the in the technical
difference in the event the view model
on the client side is there we only have
data we use type less data tab we only
have two structure in the data on the
server side we have we have a strongly
typed data and we implement our behavior
there that's that's the idea we also
implemented it's very modular so this so
you can easily plug in different
connectors for instance we have
connectors for different communication
protocols the first-class citizen here
is WebSocket of course there they have a
synchronous communication out of the box
but you could also use chain as
messaging or appalling HTTP protocol or
something like that it's it's easy it's
pluggable
Anker supports various client languages
and platforms so you can you we have we
have a library for Java effects that you
can can easily buy into your model and
and and implement a client and on top of
anchor
we have several JavaScript support
libraries there tree query angularjs
react
there's us support we can find your iOS
model view model and even this support
for c-sharp for.net clients the server
architecture is written in Java so it's
in Java 1.6 or higher
there are several network protocols
messaging is also playable but to be
used chasing but but it's it's easy to
to replace the messaging part and and if
you if you want the XML you can also use
XML but Jason it's it's I think it's the
state-of-the-art language for messaging
and there's also some support for
concurrency so since this is an a very a
synchronous event to even model there's
no real quick and anchor uses akka
ecosystem for s and Cronus event
processing and and and concurrent
processing to start up anchor you can
can use WebSockets in a bird container
like gas fish if you don't need
WebSocket you can can even use a simple
tomcat web container and the newest
addition is where you can also use
spring
- to start your anchor application with
WebSocket and an embedded Tomcat
okay thanks man Fred we know I will now
show you some examples just short
summary the basic idea here is really we
have the client and we have the server
and we have to interact um somehow and
the way you do it with html5 and the
Java server usually you have your rest
services in between that's not what we
are doing here we which I relate to to
capture the events that happen on the
client and transfer it to the server
and it the other way around if there are
events on the server side or we want to
see see that the result on the client we
want to to push that the events via
messages to the client and apply apply
those events even or on both sides and
client on end on server and what what
you can also do is you can have one
model on server side and that's what I'm
gonna show you in the example you can
have one model on the server side and
multiple clients connect it to the same
model so you can share the model this is
a simple to do application I will show
you a use case might be a trading
application which we did for touch a per
se not using this technology but using
pretty much the same but not this one
you have one one trading or the book on
the server side in this trading
application and it's about trading
energy and nasty stuff yeah I don't want
to go into details but basically you
have one order book and that is visible
to multiple clients so you have one
model on the server side and need to
share the information with with clients
and you could do this with anchor IO
let's take a look at the examples so in
this case I'm gonna start my server
using using spring tool let's start it
up it starts that the anchor server with
WebSockets and it starts also it starts
the model instance former my to do
application so let's go first of all
let's go to the web client okay see here
and connected connection is fine so this
is a to do application which you might
know there are several out there in
different technologies like angularjs
and so on we use the same styling and
implemented it so what do I need to do
need to buy milk for instance or prepare
one talk so as soon as I hit the button
here there will be an action event
create a new task it will be it will
will go to the server and on server side
we will create a new task and as well if
I click something here there will be a
change event for this item and on server
site it's going to be changed it will be
set to complete it and to complete it
triggers if I set the cost to complete
it on server side this happens on server
side it will trigger a change event send
it back to the client and we will see
this task is completed so what what I am
doing here is not happening on the
client the change is not happening and
only client just the rendering the
change is happening on server side yeah
so this is an action event a change
event is propagated to the server the
server changed the tasks item and it get
a change of the item back so that's
what's happening so I can do all if
there's validation in place I can do all
my validation on server side in this
case and if there's going something
wrong I can send back a change for the
error message box for instance so the
whole implementation of the UI logic the
whole view model is done on server side
so let's take a look into the code
I fear my task list model which is part
of the view model and that's implemented
on server side and I have here a method
that is called new task yeah that that's
done by Ankur
you don't have to take care of yeah so
basically what we have we have that the
model is on on both ends on client and
on server button client it's just a copy
it's just data it's just a dictionary a
map of data a tree tree structure of
your field data and on server side we
have the logic so here's the
implementation that's that's how we want
to create a new task I can I can show it
then what happens yeah it will just
reconnect yeah so let's try it out
let's break point should be enabled if I
now add a new task whatever Oh break
find is not active
should be active
I'm in the right corner so now I will
stop the server and start it again you
see the server connection is lost and i
just restarted what will happen now I
will lose also the data because I don't
have a database I don't persist the data
it's just in memory so now it's okay and
they got refreshed as well but the data
of course is lost so by milk not sure it
should stop mission
okay I will figure it out one maybe
during the questions part let's let's do
something else I told you that we have
one one model on the server and we can
serve multiple clients using this model
I implemented this same example in in
Xcode yeah
which this one here okay so let me
explain you this this method it's it's
annotated with an action listener here
so as soon as there is an action I will
show you later how it works in the
presentation but as soon as there is a
new event on the clients fired on the
client side which is called new task
this method will be called and I've and
anchor will pass me the the parameter
automatically the title of the task and
you have a simple in memory task
repository where were insert the task
and update task list
just sends out a change event for the
list so it triggers the change event on
the server the list has changed and so
the list is gonna be transferred to the
client site and automatically rendered
on the client on the client site there
is a binding between the list property
and the actual HTML list so as soon as
asterick change to the list on the
server side through this disbanding we
will automatically rerender the table on
the client side so there's no client all
you have to do as a client programmer
connect those two things say there's
this HTML table and you have the
property and depending on which html5
technology you use it will be rendered
so let's start up iOS example so you see
here now I'm connected to the same model
it's by milk I got and as soon as if I
click here something it's going to be
propagated to all the clients that are
connected to the same model so they're
the change event hits the server the
server changes the model on server site
and then sends out the the event to all
the the other clients so I can even add
another item here prepare talk and you
see it's to the other client got to the
other client as well and we can even
start now a chava effects client and
there we'll show you how we we fire the
actions let's start it up you put it
here as well so now we got three clients
and of course as soon as I do something
in this client it will be propagated via
events to all the other clients yeah and
actually it's not it's not simple what's
happening here because you have to deal
also with concurrency issues if you
connect multiple clients to the same
model but it's in fact it's very easy if
you have a framework or you want to
think about it how it should work and
for from an implementation perspective
it needs to be simple and I think it's
really simple yeah
well we make sure that a change there
there's no concurrency issue when we
apply a change on the server side so we
have a queue for for all those events
and there's just one thread executing a
change for one model of course you could
have multiple models in parallel and
each and then we would have some we
could apply events parallel but to
different models
if it's the same model then you can be
sure that there's just one thread
changing yeah right yeah but that's
something you you recognized on the
server first you get the delete event
you delete the task and then you get a
change event and then you will see I'm
missing this task probably someone has
deleted it and then you can send back an
error message to this client so but you
have to handle it somewhere and that but
you can be sure that's just one change
after the other and not concurrent so
let's try to set a breakpoint here yes
okay
that's why it didn't work so this is on
server side we now set a new task and on
client side let's see where it is it's a
task list controller so this isn't a
Java fix model so here I have an F
annotated F XML method this is the
action method in the F XML client its
new to do and actually what it does the
most interesting part is down here it's
here we have a model ref I will explain
you what that is later model ref fire
new action new task which is called new
task so we're gonna fire action new task
and hand over a map of parameters in the
new map is just the title of my new task
let's set a breakpoint here go to the
chow FX client and add a new task so now
you see the F XML extra method is going
to be called we have in the parameter we
have the new task and we now charge just
fire on the model we fire an action
called new task we do this now we are on
server side is now you see that the
action listener in my model on server
side is gonna get caught new tasks so
it's kind of a naming convention let's
go back we have I was it here we have an
action it's just a string in this case
new task and it will be mapped to this
method action listener on server side
new task handing over the title and and
we can just
add a new task yes please
yeah we have an implementation for
sockets we started off with sockets
then HTTP polling and then WebSocket
well the server cannot push but the
client will pull and and then get the
data it's it's not the way that's not a
nice way this but it works but of course
WebSocket is way more but it's way
better in this case yeah right so what
else can I show you
dotnet client there's as well as dotnet
client but I don't have it working right
now sorry it's copy
well there's that's what we call model
session as soon as the client connects
we can he will tell you some connect
parameters and based on that connect
parameters we create a model model
instance and in the model session and
it's kind of like the same like the HTTP
session so it's going to live as as long
as the client lives if the clients if
the client will disconnect somehow or
close the application then the model
session will get destroyed means yeah we
have a timeout for the for this model
session on server but it's pretty much
the same like HTTP session
not a question okay then let's go back
to the presentation and look at some
some concepts I've already talked about
the ref we call it reference because you
cannot work with the actual data you
want to use an enhanced concept which we
call ref and here you have a simple tree
model that's chasing representation of
the model so we have some some root in
there we have persons and then we have
Chan and Mary as persons in here and how
do we create a revenue this would be now
that or this is that the Java version we
have a ref actory and you say ref
factory ref root that person's it's an
array sort of the element number one in
this array dot name so if you know Java
server faces this will be kind of
familiar to you it's the binding to the
model or it's the reference to the model
and then what you will get is a
reference you can use this reference to
you see it here it's the type ref if you
want to look it up in the code type ref
is the base interface for all this you
can set a value you can get a value you
can even ask for the parent of the
current value you will again get a
reference back you can ask for the root
reference of you model and you can fire
an action based on this reference so you
can have a model that's that is
hierarchical and within this model
you're gonna have some action listener
somewhere and you can fire actions
wherever you think it's it fits best so
looking at the example looking at the
previous example I have a task list
model which actually holds a reference
to the list of tasks and the task list
model has an action listener and the
tasks list model is part of the view
model so you can reference it route dot
a task list model for instance and fire
an action there which is called new task
that's that's what we do let's go back
maybe to the task list controller here
we have the model ref and we fire the
action based on the model ref and the
model ref is here so we have in FX it
looks a little bit different you get the
refractory we are static F X refs we get
the ref accurate and I get the root
reference and from the root reference I
can say a pent path and give me the
model and the model will be that the
task list model that I have to know of
course we all first thought about doing
an automatic documentation which we
can't generate out of the Chava model so
that the I developer knows what she's
dealing with how the model looks like
but we didn't find time to do it so far
so that's what you can do using a ref
you can do more stuff that's just the
most important stuff you're gonna need
you can look it up in the code it's open
source anchor that IO okay so let's take
a look how the binding works we now know
the concept of a ref and we want to bind
now in in Java if X we have an FX
component its annotated with FX ml we
have a clear button which actually is
let's go let's go here I can say those
are done and I want to clear the
completed
that's the Clear button down here now
it's gone because there is no no entry
anymore that I may delete and this is
all done via binding if it's visible or
not so let's take a look how it works
we have this button JavaFX technology
and down here we do the binding first of
all we call the reflector
and we asked for the task lift model in
this case root dot model we get a model
ref and we can now use this model ref to
bind properties from the
new model to the Chavez fix button
that's what we do here we ask for we say
Clear button dot text property so we get
the text property from the Java fix
component and bind it to the model rest
and the model ref and the task list
model we say append path items completed
text so even a text the UI text we get
out of the model in this example so
there will be an items completed text in
the model and we call it for the ethics
property so we bind a fix property from
our view model to the ethics component
and what we do next is we rebound the
label in fact for the button and here we
bind the visibility property works
pretty much the same like for the label
we just say we see bility property and
bind it to some boolean property in our
model and that's all you have to do as
soon as the property changes you don't
have to do anything the the visibility
of the pattern will change on the client
yes so you can decide on server-side if
the button is visible or not and you can
decide on server-side what the label is
so if you switch the language from let's
say English to German all you have to do
is to exchange the labels on server side
and and the UI will be re rendered in
the specific language
so what do we have here of course we
have the actions as well the property
binding and this is the action binding
we already took a look at this is not a
clear tasks example on the client side
you see a clear tasks method annotated
with FX and also if as soon as someone
hits the Clear button this method is
gonna get called on the client side and
we just used a model ref which is in
this case our task list model and fire
an action clear tasks and then the clear
tasks method will get called on server
side and server side we look at all the
completed tasks remove it up and sent
back change event to the client and here
down here is the action listener on
server side again annotated with an
anchor annotation action listener so in
fact it's it's pretty simple how it
works and if you want to look at anchor
is iOS there's also small API for anchor
there as well and that's how you start
up the anchor system using objective-c
so it looks a bit awkward for those of
you who don't know objective-c
but you get used to if you use it so
what we do here we call it a static
method in the anchor system a class and
we in it we start up the anchor system
which then connects to the server it is
establish a WebSocket connection to the
server the address is given here in this
case it's localhost we want to use
WebSocket is set to yes the default was
HTTP and we can pass some connection
parameters connect parameters are used
in this example to connect to the same
model so I tell my application I want to
use the same model in this case so it's
pretty simple to start up the system
it's just basic basically one line of
code you can
of course Rex is the change listeners in
iOS as well like here we have ank refs
which is also a static static method and
we want to observe route dot model the
tasks so we want to observe for changes
or listen to changes in our tasks list
and as soon as there is a tasks we want
to have the tasks changed which is right
here
task change method getting caught which
is done here and that's pretty simple
this one is called giving the the tasks
SSN array and we just reload or the
pair's the table we view that from iOS
and we just exchanged the data and
reload it so it's gonna be rerender in
the UI you can also do this with a
cluster which is called block in an
objective-c of course instead of this
method but that's not so important here
again as well how do you fire an extra
in iOS it's the same again here we have
used the anchor F's fire and action
given the model property root model the
action has a name new task can we pass
the parameters which are again like in
the ciao FX world or example it's just a
dictionary map of data we pass and based
on the key of the entry you're gonna
have here a parameter we just take the
data out of the map fact pretty simple
on server side or of course down here
you have the action listener which gonna
get caught if you fire the action on on
client side okay some questions so far
and I hand over to Munford and again he
will show you some special features okay
there are some special features inside
Anka you already saw the inca
annotations so this these are the this
is the basic way to connect your your
application to the anchor system and on
the server side but again this this is a
this is a black pepper module you can
you if you're a fan of xml configuration
hell like we had in the old spring
framework days you could replace this
this module by an xml configuration for
instance but i recommend to use the
annotations but what's special here is
the pattern you could annotate every
method with a change listener pattern
it's quite flexible you you you could
react on changes in your model anywhere
in the in your structure this special
pattern for instances whenever there's a
change and a property below that the
filter property it and then call this
invoked is this method another nice
feature for fankerz is the big
collections support but they have to to
solve or try to solve if with this
anchor pick collections modulus if you
have a huge list on a client side so
classical search form behavior you
choose your searches and have search
results with with with multiple result
roles if you have ten thousands of us
all tools you do not want anchor to
synchronize all those roles every time
that there is a change in the industry
solve this but you can do is use the
anchor
list annotation and define some kind of
a chunk size the chunk size Allah says
tells tanker system how many rows of
this list to transfer on every change
and whenever the client needs more more
rows it's it requests them automatically
from from the server so the rows only
transferred from the server to the
client set on demand it also works with
maps there's also a big map support
another problem you had to solve and
then when we try to build some some
greater application of the more reality
use case and then we saw that to-do list
we wanted to simulate this this Instant
Search feature you all know from from
Google and when you type in your search
and on every keystroke you get a search
result back from from the server so the
problem here to solve is if the user
types very fast and it types a very long
search term you don't want to fire as an
actual database search and every
keystroke
so what you can do is to define some
kind of wait time that the server beit's
before it actually fires the search so
if the user types constantly
continuously and if he stops typing then
then the searches is fired you can do it
with anchor with this simple annotation
just define and come flood control we
called it and this annotation says tells
that the anchor framework only invoke
this method if there's a change event
that's long I caught and 100
milliseconds so if the anchor server
eyes is
fired with with change events constantly
only the last change event that is this
longer than 100 milliseconds ago
actually invokes this this you know this
method collaboration support you or
already saw in the in the example from
the Thomas showed you that multiple
clients can may connect to the same
model on the server side so you could
use it for collaboration between
different users but another nice feature
of the possibility with this
collaboration sorest you could implement
some kind of continuous work for the
user you can start his his session on on
the desktop work with the application
switch over to to his smartphone and has
the same session the same data the same
view model behind it one of the newest
additions to increase the stateless
server feature if you want to implement
the scalable application it's difficult
to do it when your when it comes to
sessions so thomas already mentioned 10
model sessions so if you want to have a
really scalable application you you want
to don't want to have sessions like open
sessions on the server and we
implemented a feature that that you can
use with a simple annotation you have to
setup the server of course in stateless
mode and if you if you drive to anchor
serve in stateless mode you can tell the
the anchor system by parties state
holder annotation where the view model
actually holds the state but what's the
state of my view model that I need to
reconstruct all the state and Tate
from from somewhere from my big data
store or or somewhere else from the
database and this state is transferred
to the client so actually the client
holds to state here and on every event
the anchor system and and casaba gets
the state and this is able to to rebuild
or reconstruct the view model situation
that it was the last time then the
change event or the action event is
processed the result is sent to the
client back together with the with the
current state so the clients every
client holds its own state so you could
implement a scalable application yes
the question the question was if the
application programmer has to to
implement the state reconstruction in
self right answer is yes you have to do
this because anchor doesn't know where
where to get your actual data so a
simple example here is if we want to do
the implemented to two application in a
stateless mode you probably have two to
two items in a database but you don't
need this is an open session that is
open every time alter all the time that
a user works with it all you'll need is
state information like but but to-do
item is currently activated or the to-do
list you will have it in the database so
but you can do on the server side this
you can easily get the data on each call
you can decapitate it from the database
or might be a mock level to store it in
a big data memory store something like
that and here at this example does two
state whole that the filters this is
this is a state that you won't have in
the in the database so this is this is
actually the thing that the user just
entered some some filter how he filters
the list this is the only state that you
need and then to reconstruct all all the
state you you get the items from the
database and you get the current filter
setting from from the state holder that
that you get on a regular quest
so what ANCA does is it rebuilds your
model you get your model objects back
and anchor injects those those fields
that you annotated to state holder so
this is this is done for you
and the other thing what you see here
and under the set filter this is the the
in it calculated fields this value you
might do the database call and and and
get back your items from them from the
database intent and we initialize your
model in some some way yes
okay so question is how how is the
authentication done and then how anchor
knows which which device belongs to to
to which model
yeah that's that's part of the
configuration the setup of the
implication it's up to us the
application programmer to to tell anchor
what is a new session but it is an
existing session when a client connects
you have a number of Connect parameters
these are custom parameters these are up
to the application and what you have to
implement and under on the server side
is to to implement the behavior what
happens if some some requests and
connect requests comes in with with some
special connected parameters and us the
application has to have to tell anchor
yes this is a non user I know this user
is this disuse all right ahead session
so just telling Kokiri use this session
of this of this user or you can say
notice by I don't know I cannot handle
this Connect parameters just just to
create a new session an example for
connected parameters is is the user ID
so if you have an authentication system
in front of anchor the user ID might be
the connect parameter that that lets you
decide so if the if there should be a
new session or not or perhaps you use
the device ID or something else or or
some kind of cookie information but
that's that's up to the application to
decide
more questions so we had it at the end
of our talk feel free to to get some
more information and uncut at i/o there
plenty of tutorials there there's a
manual that it's that's not complete of
course feel free to contribute to tell
us your ideas what you think about it
and yeah it's open source on github
thank you okay</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>