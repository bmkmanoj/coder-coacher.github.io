<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Prototype and Share a Fully Functional REST API | Coder Coacher - Coaching Coders</title><meta content="Prototype and Share a Fully Functional REST API - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Developers/">Oracle Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Prototype and Share a Fully Functional REST API</b></h2><h5 class="post__date">2018-04-17</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/iqDfZxXfgkk" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">let's get started hi my name is Emmanuel
Paris caucus and today I'll be talking
to you about that prototyping and
sharing with others a REST API and you
know I was really I was listening to a
podcast by Daniel pink yesterday he's an
author he wrote this book Drive and many
other books and he was saying that kind
of the worst time to be doing any
cognitive work is between 2:00 p.m. and
4:00 p.m. in the afternoon and here we
are at 3:00 p.m. smack dab in the middle
of that so I appreciate you guys being
here and I think that means you care
about api's I care about api's so does
everybody in this room is everything so
familiar with rest and HTTP api's yes ok
great so we're going to be talking about
REST API here and we're going to be
talking about how you can make a better
API for consumption by other users also
why would we need a a prototype of an
API so an API is a product it's a
software production I think that you
would need to show it to others who are
going to consume it before you even
write a single line of code why is that
because you want the others that are
going to use the API to be successful
and you're not gonna be successful with
that unless you take into account their
opinion about what they want what data
they want some in that API so you need
feedback from people and in order to
have feedback you need a way to show
them what you mean what you're gonna
make in an API what you need is the
equivalent of the UI wireframe for an
API but of course that that thing
doesn't exist so we're going to talk
about the two that today and in order to
show them what you mean the best way to
do so is to show a mock
of an API what's going to be in place of
the API something that looks a lot like
the end product but isn't the end
product because you don't want to go
into the trouble of creating and coding
that API in making that whole end
products if you don't know whether it's
gonna be successful she want the mock
and also it's a great way to reason
about an API and discuss about an API
with others a lot of the time we go up
on on a whiteboard and we sketch out the
JSON payloads here's what it should be
no let me show you what it should be or
we write a document like a loose form
document that mark contains a
description of the API I think there's a
better way about that to discuss it
externally and and finally after we're
done discussing and agreeing on what an
API should look like we need a permanent
record we need a description to act as
our agreement in our contracts with
others about that what that API is going
to do so once we have figured out the
design of the of the API we need a way
for other people to look at that design
and say yes this is what I'm gonna code
against from the front-end perspective
and from the back-end perspective this
is what I've got our code and make sure
I deliver what was agreed on as a final
product so best way to do that is use
that mock of the API as a stand-in while
you implement the back end but also
while the front end people are
implementing their front-end design so
how are we going to do this first of all
we're gonna have what's called an API
description document it's going to be
something that looks like code in a
domain-specific language that is used to
describe REST API so it's a language
dedicated to describing REST API we're
also going to use examples of the data
payloads in the requests and their
responses so we can show others what we
mean and we're going to use a theory a
free tool that's used as a white board
to host that API description and the
examples and to share with others and
you'll be able to go on on apiary and
register and follow what I do and do
this for free and in apiary we're going
to have access to a mock server in a
documentation render that looks at that
API description documents and
automatically renders our mock and our
documentation okay so the
domain-specific language that we're
going to use today
there are others but today we're going
to use API blueprint it's an open source
language you can go find it on github
its spec and various tools and
implementations and it's based on
markdown as everybody here familiar with
markdown you know markdown ok markdown
is a easy way to write formatted text
because we are gonna be writing text we
are gonna be writing documentation for
our API so it's a way to do it that are
supported by APA we will talk about them
in the end they're also very useful to
talk about them in here all right so
with that I'm gonna finish with the
slides and jump right into my browser
I'm gonna fight the screen resizing here
and I'm going to go on apiary dot IO
which you can go all in and register for
free and in fact I'm gonna start as an
unregistered user and go register for
free and show you how to prototype an
API as a new user on it so let me jump
in and do that alright I'm gonna end
this slideshow here because it's oh gosh
ok let me fight the display here for a
moment
okay give me a second here I try to
prepare for that earlier but didn't
really work for me here we go and we're
gonna scale alright just gonna go away
and we're gonna go to the browser okay
oh if you browse over to apiary dot IO
and there is a call to action to sign up
either with github your github
credentials if you already have them
that's going to work or to sign up with
your email and and both of them are free
so I'm just gonna go and sign up with a
new email account and I'm going to say
okay and I'm just gonna use a random
password probably won't use the accounts
again all right so I'm gonna sign up for
apiary not gonna use one password so
next thing I'm seeing is I'm
successfully logged in and registered
and it's asking me okay name that first
API that you want on our prototype so
I'm just gonna go with that default here
and I'm gonna continue and leave that
selection to API blueprint for now and
I'm just going to go save and start
using APA so the next thing I would see
is a something that looks a lot like a
code editor on the Left I have text in
an editor that I can type in and on the
right I have a preview of my API
documentation I'm gonna turn off that
preview momentarily and just get you
through this document so if you know
markdown you'll see that this is pure
marked and you could take this document
and put it in let's say github and would
render as nicely formatted markdown so
there's nothing really special about the
Mart on here but the editor also
understands some API REST API specific
things within the text and it interprets
the headings as well so the first
heading is going to be the the title of
my API so I'm just gonna say Oracle code
Boston API and if I turn my my preview
back on I can see that I'm seeing the
live preview as I type next follow some
simple text that is about providing a
description to users I make choose to
enter here you know why I created this
API some simple instructions it's one in
the next heading is about that first
resource that I'm gonna call in my API
the research is going to be off the base
URL and there is a base girl here in the
template but I'm gonna go ahead and
delete it to show you that I don't need
an implementation behind it it's just
gonna be this design that renders to a
mock server into documentation so the
first resource I have I'm giving you the
name I'm calling it the questions
collection and the resources slash
questions this particular template is
about an API that is used for polling
people asking questions to people and
then people can vote on choices on on
the question for example you know was
this talk good or bad which API
description language you use things like
that so my first resource is that
questions collections last questions and
then the next heading heading 3 denoted
by the three signs here is going to be
the get method on that questions
resource and I'm going to name that
action I'm gonna say it's the action to
list all questions if you wanted to list
all the questions in my API that
somebody already created you would do a
get on this last questions research and
then below this there follows an example
remember we're talking about examples of
what the payload should look like so
it's saying there is a response that
should come back from the get method if
it's successful and it's gonna have a
200 status code in you know HTTP
parlance this means everything was okay
and the payload that's going to come
back in the response it's going to be in
JSON it says there what the payload the
attracted payload should be and we also
have an example of the payload and all
it is is an array denoted by these
square brackets with one element of this
question object the question has a title
he has a date and it has the four
choices and it also has the votes that
you know we're gonna say that we're
we're talent there
so what I can do just with this template
that came in without me typing anything
is I can go over to my documentation and
I will see that the documentation is
interactive ie I can do things with it
this is what your end user would see
click on list all questions and I can
try that list all questions resource and
get method so if I hit try I call the
resource I'm gonna get back pretty much
the example that I gave it so simple
enough
up until now what's interesting about
this approach is that the tooling apiary
generates a URL for you this is the mock
URL I'm gonna highlight it here and if I
just go over in a new tab and it's a get
method so I can do this on my browser
and just hit it you'll see that that
Jason comes back so the tooling has
automatically stood up a mock server for
me and returns those examples and if I
were to go back to my editor and say you
know what the front-end developers
looked at this and they kind of didn't
like it the way it was and they said um
let's just add a count of the number of
choices here this is what we want for
application don't know what they want it
but this is what they want and if I save
here as you would expect if I you know
run that request again that count is
going to be in there so now I can have
suggestions that come in and make edits
to my source documents and and have
those edits be present in the mock
service that somebody else is already
starting to consume and in writing a
front-end application with so you can
see how that's powerful so this
particular API has that gets or you know
list all my questions in the question
collection and he also has a post to
create a new question well what if I
wanted to add another resource I'm just
gonna copy this stuff real quick I'm
gonna show you how you can expand this
API to make it a fully crud API create
read update and delete really quickly so
I'm just gonna go here at the end of the
document paste this in and say you know
what I need a new resource it's going to
be the get a single question I'm gonna
pass it an ID as a as a parameter to say
okay which which question by its ID am i
interested in and I'm not gonna say
let's see it's the single question
resource and turn the preview on here so
you guys can see save this and I'm going
to say just retrieve a question now if
you're following along you'll see
there's a semantic issue so the editor
understands that hey you know it's
giving me guidance that I didn't do
something right and that what that's
gonna be it's saying you know what you
entered a resource you enter the method
but there's no response so you're
missing that so go fix that okay so what
do I do here so one thing I can do is I
can just take this example and modify it
a little bit maybe I want to use the
same thing here so just paste it at the
end and because this is getting a single
question I don't want that array I want
just the single element of that array so
make it a single element and you know
what I'm just gonna fix the indenting
here
now one thing I didn't talk about is
what this ID does so I'm gonna have to
go and and describe that and to do that
I can describe my parameters and I can
say you know my parameter is going to be
an ID I'm gonna give it an example
because we always need examples to show
people what it's like it's a different
thing to say ID maybe it's a UUID maybe
it's an integer I don't know
so in this example I'm just going to say
ID is 3 and I'm gonna say it's required
so the tooling knows that if I'm me an
error and I'm gonna say it's a number
and I can enter a description for it and
say the unique ID or something of that
sort so now I have every single resource
and how I go get that single resource
and if I've done everything right and
you know if I've saved I think I can go
back here and I can go questions slash 3
and it gives me that single pane again
it's an example which I paste it in
there's better ways to do it I'll show
you that at the end the interesting
thing is the tooling being a mock
service doesn't really care about what
parameters you give it as long as it's
of the right type remember we said it's
required and it's a number so even if I
give it a 4 it'll give me back that same
example so I can have my front-end app
just going through and getting different
questions
it'll get something back that is of the
type that is expected so similarly if I
wanted to do a how do I change this
resource well the way to do it is to
just say it's going to be a put so
change
a question and it's going to be a put on
that same resource
remember I already have that research
well I put is gonna need both the
request and the response and I did have
the shape of a request ready to go here
in my post so I can go and just reuse
that I made one app evolve this as as I
go along but for now it'll do so I have
one request and I'm just going to return
the same response that the single the
singleton gets give me so request
response put it here I'm going to save
it's a valid document and if I go over
to my documentation I should be able to
see not only the two actions on the
questions collection also the two
actions on the single question I can
click on that see examples see what the
data is like what it should look like
and even try it out and test that out so
if I wanted to complete remember we said
crud the API we need to delete in there
really really simple to come back and
say you know what I need just another
action and it's going to be the remove
if I could even type remove a question
and that's going to be the delete
methods it recognizes that and well for
the delete the convention is that don't
really need a payload coming back you
don't West you don't need a payload all
you need is to say delete this resource
number three it's gone so I'm gonna do
response is 204 204 means no payload I'm
pretty much done so this gives me in the
space of I don't know it was what ten
minutes or so a skeleton for a fully
functional API with all
kinds of actions I could go many ways
from here I can say I'm gonna add more
resources I can say I'm gonna add more
cases for what happens so for example
what if I messed up the the ID and I you
know that my ap I didn't find that
resource I want I'm gonna want to model
that so let me go back to my single
question and say you know I had response
200 but I'm just gonna add that response
404 now for for means not found and I
can say you know in this case for
whatever reason my front-end developers
want a plain text error message okay I
can enter that and I can say you know
something like God found not very good
but you know it'll do for a first pass
and once I go into my documentation I
can go into the single question and I
can see that there's multiple responses
but what's really cool is that
I can also try it out remember I can
send in an ID call the resource it'll
give me back that first choice but what
if I wanted to play it somehow in my
front-end code you know I want to branch
off in and you know I want this error to
show up so I can see how I can handle it
well it turns out there's a way you can
do this in the tooling you can pass this
prefer header and you could say I prefer
404 so when you send that back it'll
just give you what you expect now the
idea is that as a back-end and front-end
developer you should be looking as
people use the API as people try things
and there's a tool for that as an
inspector that shows you all of the
requests that came in whether they're
successful or not successful she's going
here and look at each request and Canada
what's going on either as a front-end
developer consuming the API or as a
back-end developer writing the idea
other thing you can do is you can run
some tests so we have a free open-source
tool called Dredd
it's a command-line tool what it does is
it looks at a given API description
looks at your implementation and gives
you a pass/fail so exits with zero or
one and that's very useful either when
you're doing TDD on the desktop like did
I match the specification of this API
that we all agreed or even when you're
done in it's in production and your
refactoring you can put this into UCI CD
and it will you know prevent you from
deploying something that breaks that
spec so you can see how that's really
really powerful
now I also talked about sharing the spec
with others you can hit that like little
person menu there and invite others via
email in the free version of this
product you can invite up to five people
to edit and up to ten people to view so
that's really really useful if you want
to get others to give you feedback if
you want to get the front-end developers
that are going to consume the API to
contribute and start giving you you know
remember we said oh you know make this
simple change put the count in there
that's really gonna help us that's easy
to do once you invite somebody to
collaborate with you again you can do
this today last but not least here in
these settings you can go link that
particular documents with a repo in
github why is that important eh because
you can track changes B because you can
push in changes through github so you
can have people contributing to github
and C because when it comes time to do
testing that would show with a command
line tool with dread you can pull the
latest spec from github
into your own CI CD so and we think it's
a best practice to put the API
description in the same repo as the code
that implements it and
there's advanced versions of this
product and allow you to do branching
and so on but you know for a small
project you can just do this for free in
in yourfeet github repo so really really
useful all right
well of course you can also get help
there's questions on Stack Overflow
there's documentation you can even
contact the team for support so
documentation will give you you know
ways to get started and so on and and
obviously stack over so you can go ask
questions and get them answered there
hopefully alright
so that's kind of it for the basic stuff
the other thing that I wanted to show
you is you can imagine that pasting all
of this text and all of these JSON
payloads kind of gets old after a while
and it's not dry and you could make a
mistake
so there are better ways to do this and
again you can try these as you go along
so I'm logged in to another account here
in my other browser and I have some
examples to show you so one thing I can
show you is first of all you can use you
can use JSON schema JSON schema is a way
to describe a JSON schema and a way to
apply some constraints into your payload
so if you're using JSON schema to doing
some testing you can use that there in
the API description
perhaps your API consumer can grab that
JSON schema and and go reuse it in their
tuning so all this is saying for example
is you know was the schema for the
question look like all the questions
should be there that choice should be
there and there should be a minimum of
two items in that array so that's useful
for me second thing I wanted to show you
is here's a more evolved API than the
one we saw so this is a an API about
ordering groceries and it has some some
crazy features like I want to create a
recipe and make a recipe out of my
items that I ordered and orders in a
recall so we were doing this for a demo
and that API all these these resources
and actions that it has it gets quite
long and it can get much much longer
than this in real life so this one is to
be on a fifty line like ten thousand
lines long so you can see how that gets
really really difficult to uh to
maintain with these all of these JSON
blobs that you're pasting in and out so
one thing you can do in API blueprint is
you can use the so-called a meson
notation what that does is in this
particular API that uses Sampson you
won't see a JSON blob anywhere what you
will see is a simple way to describe
data structures so this is a project API
and we're saying you know what is a
project well it's an array of tasks
there's a task it has all of these
fields here and it also includes a team
member well what is a team member he has
all these things but it's also composed
you know from a user so you can see how
you can kind of compose your data
structures and that makes it much much
easier to maintain and not make a
mistake and then use them this is the
same syntax that we were seeing before
only without the JSON blobs use them in
your responses and end requests so for
example the get get a project collection
all it needs is to say you know I'm an
array of project I'm done so when you go
and change project it's gonna change all
over your API and of course with this
very complex API you only got 70 lines
so that's one way to optimize things and
make things better as you move forward
now last but not least we also support
the other very well-known speck called
swagger or open API and this is not a
markdown API it's mainly a Yamla API
description language so it's it's a
little bit more involved too
so in this example I have a very simple
API much like the first iteration of the
questions API it's just got two
resources as you can see but if you go
and look at the source it's it's got
quite a bit of stuff in it but it's a
very very good format what other tooling
in interoperates we start so swagger is
very very pervasive so you know both
languages are supported and we think you
need to choose which one according to
the way you're gonna use things all
right so that's about it what I had I'm
gonna attempt to show you that last
slide here maybe and describe how all
this
so apiary which is the tooling that you
just saw came in through an acquisition
into Oracle about a year ago
so Oracle has already been developing
its own API management Suites or tools
for your runtime gateways and monitoring
and so on and that we started to work
together as a start up with with Oracle
and integrating with this toolset and at
some point it was a good idea to get the
company into Oracle so now we have a
full toolset that takes care of that
whole API lifecycle from you know design
implementation testing publishing
documentation and you know running the
runtime and really serious about API is
an open source were part of the cloud
native computing foundation we're part
of the open API initiative and of course
we have the open API blueprint spec in
open source in apiary that you just saw
here and you can go register for free
has pretty much three hundred twenty
five thousand users that have created an
API created that API design that you saw
in this four hundred twenty five
thousand of these routes it's pretty big
wood
for about four or five years and it's
pretty much the biggest API design
repository in the in the world and
there's about three million people that
have come and looked at documentation so
a lot of company
have their API documentation in there
and manage their API lifecycle on a
period so hope you can try it you always
be able to use it for free bunch of
open-source tooling that's available on
API blueprint org and an apiary that I
also go check that out and with that I
think I'm I'm all set and if you have
any questions that we had to take them
sir
internal yes on-prem no this is a a
cloud-based service so it's accessible
through the web internally yes you can
close everything off and have only
internal API so that only registered
users can go and look at the source or
even the the documentation so it's the
source of truth for what the API
description or API design should be and
from that source of truth you can drive
documentation you can drive tests you
can drive the implementation with
generators mostly on the swagger or obey
API sides there's a lot of generators
both on the client and on the server and
you can also drive configuration of your
runtime and monitoring and if you think
about it this makes a lot of sense
because you don't want to sit there and
configure everything from scratch and
document everything from scratch and
then when you change something in the
API go back and do it all from scratch
having that API description that
describes the service unambiguously is
is a very very useful thing to have as a
reference both for testing and for
configuration
yep there's no dependency they're just
hosted on the web for you on the cloud
for you and it's just a another URL of
course they're not production URLs
you're going to be rate limited it's
just for for you know understanding how
the API works and for developing against
the the API so think of it as a sandbox
right yeah absolutely and it implements
that contracts that agreements in the
API description that's you know you're
bringing others to contribute to and you
should all agree on what that API should
look like of course there is some point
where you move over to the
implementation so you can't ask this
thing to do you know data manipulation
for you you can't really say oh you know
if I send this payload in then return me
that other pail or add two things and
give it back to me you know at that
point you're probably going into
implementation but it's a very very
quick way to get started and show other
people what you need done all right
anything else all right well thank you
very very you have a question
there is a proxy yeah there is a proxy
so what if you want to use that traffic
analysis the request responses go
through the proxy on the on the cloud
and we do also have some magic that make
you know allows you to use internal
api's without proxy all right all right
thank you very much
have a good rest of the day</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>