<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Bleeding-Edge HTML5, JAX-RS, and MongoDB Case Study | Coder Coacher - Coaching Coders</title><meta content="Bleeding-Edge HTML5, JAX-RS, and MongoDB Case Study - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Developers/">Oracle Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Bleeding-Edge HTML5, JAX-RS, and MongoDB Case Study</b></h2><h5 class="post__date">2015-06-08</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/CRVwRl0o7Zs" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">well welcome everybody looks like we
maxed out the room so we might as well
start my name is Stefan Johnson and my
colleague yo voy deckers so there we
were actually here last year also
receiving the Dukes Choice Award so
we're pretty excited about that so we
did a similar talk last year but since
then actually a lot has already changed
the most important thing that has
changed is that we moved from a flex
Adobe AIR client to a full html5 clients
so that's what we want to talk about
with you in the next 60 minutes so this
a bit of gender quick introduction
because there's a few practical details
that you might be very interested in and
then I'll give you a demo and then
basically based on that demo we're going
to show you how this was all developed
so we'll cover that the javascript
heroes we got quite a few heroes and he
calls in JavaScript I mean I call it
voodoo script because it's amazing how
you can actually make this all work
together there's so many parts that you
have to be a magician basically to
accomplish that and then we're going to
wrap up with some best practices and
what's rather important which was part
of the abstract is that we cannot be
what we also did is that we've moved
from a tree instance clouds sorry
glassfish instance to a full amazon
cloud instance with multiple data
centers etc so we're going to also spend
about 15 minutes about the
infrastructure behind parlay so that
might be also interesting for the DevOps
people in the room so let's get started
so once lied about parlays in a nutshell
who hasn't used parlays yet so okay so
quite a few people so it's interesting
to at least give you a bit of context so
it was founded in 2006 by myself and
basically because of dev ox i organized
a fox which is a european java
conference and i want to actually
capture all of the talks and put it
online and that's why I developed
parlays so it was really in function of
you know leveraging the dead Fox
presentations
sorry yeah well this is a slide so hold
on so it's a platform to actually share
videos slides audios and different demos
basically if I need to give you a pitch
an elevator pitch if YouTube and
SlideShare would have a baby it would be
named parlays so you can do all these
combinations you can just have audio
which slides you can just have slides as
well or of course you can start
combining them and add videos etc so
it's basically a multimedia platform
what's really nice is that because of
html5 did of course works on the in the
browser but it also just works out of
the box on the iPads because again it we
don't use flash anymore you can just
take your iPad or your Android tablet go
to the website and start consuming it
what we don't yet support is like the
iPhone because they're the problem is
that it the iphone demands the full
pageview of the video so you can't see
the slides anymore right so for that
we've actually are building native apps
for the iPad and Android and that allows
you to then actually download also the
talks and watch it offline so that makes
it very interesting if you're on a train
or in the plane or transatlantic flight
you can download some talks where
there's no internet and then watch these
talks disconnected so that's that's
that's also differentiated with YouTube
with YouTube you're not allowed to
actually download presentations so it's
basically knowledge sharing so what we
do is that we provide channels for Java
user groups so that way we have really
lots of presentations we've we've
already exceeded more than 3,000 talks
if you would want to watch all of these
stalks you know it's going to take you
quite a bit of time and what's what I'm
really excited about is that again this
year Java one has decided to record all
of the Java conference sessions and make
them available on parlays right so
that's about 340 talks you're going to
get more information at the community
keynote but basically I'm giving you a
sneak preview here they're going to
release these talks over four months so
they want to do a bit of rolling funded
and I think the first batch will be
about 60 talks and then every two weeks
they will release another 60 talks
that's cool for the people who couldn't
make that but also you know there's so
many good talks in parallel that way
you're really not missing out on any
talks and so we're open for any content
and topics I mean it's very Java centric
we have like Scala days J focus Deb
folkes user groups a lot of Java content
but more and more people outside of the
IT industry are starting to use our
system like we have a stand-up comedian
who wants to use our system for
pay-per-view mechanism so that's that's
an interesting one is that we allow
actually also monetization of your
content so if like for example the
stand-up comedian he doesn't want to
sell DVDs anymore because he only gets a
fraction of the revenue if he can then
put it on parlays he can actually get a
lot more revenue with just putting that
talk on to his website you know people
can watch his talk in a preview or then
pay you know five or ten dollars and
they can download the talk and watch it
offline and what we also support our
private channels so like companies are
starting to set up a private channel
where they want to share their content
with their employees and you know have
that enablement so that's probably
answering your question sir right so
that's a bit of the context now let's
start and do a deep dive in the in the
technology itself so the best way to do
this is maybe do a quick demo and then
we'll talk about how it's actually being
built so if you go to parlays and you'll
owe him with Twitter or Google+ accounts
you actually get a free personal channel
and that's where you can start uploading
talk so like this is a talk which is
ready available and what's nice is that
we have this scrubbing so you can
already do a quick peek of a
presentation of the slides and if you
think then that it's interesting you can
go to the talk and you have like this
typesafe presentation ago with I welcome
to this talk this is a time I am Josh
surrett i'm a senior software developer
at so you get the idea right so how
could you actually well there's a few
nice features like you can like do a
quick preview of the slides and go to
the more interesting parts and then
immediately you know you can click on it
and it will take you to that slide
directly so you know it's nice way to to
watch dogs and if you don't have not
allowed
a lot of time there's even some features
where you can like the taupe there goes
let's hope that works the first thing we
look at is Lexi pigeon actually have him
talk faster so these are like to the
phone I type in a method a all right i
get a value name these are things that i
can talk without saying like really a
traditionalist you can delete them loose
okay that's so that's just the rules of
passage job because it in Christ belper
things you can pour here and that we are
at Newport sep you can watch one our
talks you can watch 31 our talks in like
15 minutes so you know that's a real
helping you there anyway back to the
demo so you know him with a free account
you have an upload form and what you can
do is actually take existing YouTube
videos or Vimeo videos and then add your
slides on top of that so if your user
group you just film your speaker you put
it on YouTube and then you can actually
merge them together using this page here
so that's what i want to show you
there's a nice demo or video of java one
on youtube so what I'm doing is I'll
just take this URL and i will add it to
this form here so it's adding this form
I can then say well take all the
metadata and fill in the description and
the title so we're just taking that from
you to basically then I can give it some
tags like Java one demo and parlays and
then I need to select a channel so I'll
take my test channel and then I need to
add a PDF so I've got just got a simple
PDF with two slides here and that's it
so I say create and what's now happening
is that it's uploading the PDF we are
extracting all the texts out of the PDF
so you can also search on the on the PDF
we are creating some preview slots is
hopefully again with the with internet
connection it's going to be fast enough
there goes so you have like one slide
and then the second slide is going to be
added I can of course go away and just
get an email notification when it's
ready but it's only two slides so it's
not too far it's not too slow there it
goes and now I can actually go to that
talk and I've now merged my YouTube talk
basically with my slides so if I play
this it's going to first show
which is the tunnel info I have sex with
after all the costs and then it will
switch to the YouTube video and show the
slides sink to that so there we go and
we have the together which is better
than ever wink with the slide next to it
alright like that thank you so you can
do that today right and that doesn't
cost you anything because we're
basically having Google costs covering
the cost of the streaming and the
hosting so that's good that's a good
question so how do you merge it well
I've actually forgot to show you that is
that here there's a timeline editor and
you can actually start editing where the
slide change should happen so you can
say well no this video should change
here and then you can even add multiple
tracks so i can add an extra track and
actually even add another video on top
cuts that video of youtube but we are
virtually cutting it and so you're doing
a mash-up with different videos from
different sources vimeo and youtube on
multiple time tracks and then adding the
slides to that so it's a yes carry stuff
not yet no no we're not doing that so
because the transcoding is basically
done by youtube so what we're doing is
keeping track of the timelines where it
needs to play which parts men and so on
this is only for the integration with
YouTube and Vimeo we have also if you
have a pro or enterprise channel we also
host the videos for you and we do the
streaming and also transcoding two
different formats as well so that's
that's only for a know those type of
accounts okay so that was the demo so
that gives you a bit of an ID of you
know what it does and so on so how was
this all built well i'll let you so i
will talk a bit about our heroes to make
this happen but of course thanks to
html5 we have all these new
possibilities in the browser and all
these different browser vendors are
finally working together and making a
necklace
system where most of the websites work
well and they work identically and
especially some new things like the css3
the new JavaScript features the media
codecs so all the standardization at
that level allowed us to build parlays
like it was before in flex and now in
inside a browser with all the same
functionalities you know on all these
different platforms but of course it's
not only the the new html5
specifications you need to add on top a
few other libraries and you see it
quickly adds up so there's there's a lot
there's a lot going on in the JavaScript
ecosystem at this is already a nice list
of nice libraries that work together
it's a slide of a couple months ago so
the list has grown a little bit in the
meantime but if you're looking for a
nice set of tools that work well
together i suggest you take a picture of
this slide i'll try to go into detail on
a few of those to give you a head start
of how we offer the most important parts
of all these libraries that that you
should use if you want to build your own
html5 client with a jax-rs restful back
end and i cannot unfortunately go into
detail on all of them so most of us have
to have done javascript at some point in
our web apps and typically it's just
some small script here and there to make
something dynamic or at one Ajax call
here or there but what we're doing here
is we're building a full application
inside JavaScript so quickly what you're
trying to do is you will want to
organize your code in more manageable
chunks in more manageable modules and
for that you need you need some tools
and to submit to help you there so and
now i'm talking about required yes which
is one of the important tools that allow
you to do that so if you start to build
your app in
and or split your app in multiple
modules what you'll end up with is a lot
of different script files and what
happens is if you have all the script
files is that they will load
sequentially which will last load on
your page because each time it is a new
request so it's something you don't want
to do also what happens if you have a
lot of these different scripts and maybe
you use different libraries is that your
window object could get polluted so
that's also one of the issues that you
get and character now what required just
is is it is actually a module loader for
JavaScript so you can more or less think
a bit of it like something like osgi or
something like that for for inside
JavaScript so what it gives you is some
dependency injection and it had a dozen
capsulation of these different modules
so it avoids this window pollution it
allows you to load asynchronously during
development all these different scripts
so we will still write all these
different script files but then once you
go to your production build it can
combine all these scripts into one file
and it will then minify that one and
also minify your CSS and and even your
templates for your for your HTML which
yes no no it's that that's required yes
it's the its vertices to load up on the
left and that's required yes it's a tool
that allows you to to structure your
application and it loads all these
different parts in it at all required
changes yeah that's the one so and
basically what it allows you to do is to
minimize the number of your elf request
for a for your for the start of your web
up to four requests so one for the one
for the main index one for the JS file
which contains all the logic and one /
CSS and maybe one request to to your
rest api to fetch them data so when this
allows your your web up to start up much
faster than what it used to be if you
wouldn't be using a solution like this
so what does it look like so I hope this
is readable for everybody so basically
you have in your index.html you you love
the library required yes and you tell it
where it's entry point is it's the
main.js file and then in your
maintenance file you can define some
paths to libraries that you're shipping
with with your application and maybe
some libraries that you're that you're
learning from some CD and for example in
this case we could learn jQuery from
from the CDN and then at the end of the
main file we bootstrapper application so
what you see there is you we call the
app module we inject it in your app and
then you can initialize a wrap so what
does this app module looks like well
here we define you see the defined
construct and there we say okay I want I
need jquery I want my home view and when
I have that it will execute the function
which is a call Becky which will get
executed when it's loaded so what it
does it will take some some diff from
our page and inject the home view now
I'll go down to the home view components
and all these all these files are a
separate JavaScript files if you want
it's not necessary but you can do it
like that and it's very nice is there
now our home view is a component that's
that's self-contained there we inject
jquery we inject handlebars now talk
about a bit of Alton mores later and a
template so what what it will do it will
create a note that it will return to our
app and also render a templates fetch
some JSON data from our REST API and
render the template in our note that we
pre pre created so basically what is
allows us to do is then this home view
can now be reused for on different
different parts of our application for
this simple example it's it doesn't make
sense but imagine that you have an
example that you have an appt with lots
of different sub modules then you could
say okay for our widget so we have four
parlays a small widget that you can
embed
in your blog or your website it only Lou
uses a subset of all our modules and
this way we can do it we only inject the
bits and pieces that we need so instead
of one main file you could have
different main files depending on the
purpose and you create a specific build
for all these different types of
platforms so we have fun for a typical
typical web app we have one for the
website I mean maybe we may have fun for
a mobile device for example and this way
you can you get different bills smaller
in size and really only the bits and
pieces that we need without needing to
duplicate a lot of code so this is a
recurring test step clear for everybody
yeah
from
xtg a essentia I not aware of how that
works but what would is it do is it
similar also a modular area well there
are there are multiple module loaders
that exist and this is one of them are
not saying it's the best that is the one
that we use and it works for quite offer
us so it so sent this but the one from
censure might be might be good as well
anybody using require Jesus so then
another important one for us is backbone
so back bonus is actually a framework to
build web apps in the browser right so
it's it's really minimalistic so it
doesn't have an opinion on which
templating language you should use or
how all these bits and pieces fit
together it's it's more some building
blocks and it's you that assemble
everything it's also very small very
lightweight it's a bit different
compared to something else like for
example angularjs or a knockout where
you you use their specific templating
language and everything here it's really
a free-form what will it provide you it
gives you some structure for views for
modules collections routing and events
and but it's up to you to to assemble
all these and make it work well together
of course you why would you use
something like this well it's it's a bit
tough to create your web app all
yourself all by yourself to orchestrate
all these things together the binding
between events and and views so it helps
you a lot there to better structure eyes
your application so how would we do and
do a rendering of our templates this is
what we may have been doing in the past
probably most of you know jquery and
we'll do something like that in their
web apps and they look for some note and
then append some some javascript in
there and you you add some you do some
string concatenation somewhere
and it works first very small things but
once you start building a complete up it
starts to become ugly very soon so this
is why we go to templating and
handlebars is one of the libraries that
helps you there so imagine you have a
more complex you I item like this where
we have a thumbnail with another
thumbnail of the speaker with a title of
the talk the duration of a talk number
of views etc if you would want to render
this with just java with just jquery it
would be a very messy long script right
so what we have with handlebars this you
have a model and a template and this is
for example the model that we're
injecting in our templates it contains
all the data from this view which
probably makes sense to most of you if
not interrupt me and this is a template
it looks very straightforward it's just
HTML and it has some angle brackets sub
curly braces here and there so many have
a question ok sorry so and there you can
see that it's you have some variable
statute that we that we load from the
model for example there is a speaker
it's an each construct so we iterate
over the list of speakers and then
what's what's really interesting is that
you can also create some custom helper
functions like what you see over there
all the way out the bottom is that you
have a talk time or format number and it
then allows us to pre-process the data
of the model before we render it into
the UI and this is something you could
do like this it's a bit hard to read
unfortunately on the projector but I
think you get the idea so you get the
value from the model you manipulate it
and then you return it and this is how
it will be rendered in
browser then one of the other important
parts is that we've built our app on top
of Twitter bootstrap does everybody know
about bootstrap most of them yeah so for
those that don't know it it's it's a
framework by Twitter and they have some
CSS some some javascript components some
icons even and it's it's a framework get
that has this fluid grid system oh it
allows us to it gives us the possibility
to have some responsive design in our
application so Stefan show to the app on
on his laptop but if you would use it on
the ipad it's just the same code it's
the same layout but thanks to this
responsive grid that we're using it will
then scale down all these different
columns and layouts so that it fits and
works well on on a tablet or even on a
phone on the on an android phone that is
it also works quite well and this is all
because we're building on top of that
and what's also nice is that they have a
nice set of components with some already
some quite some nice styling and I think
it's really helpful for developers like
us we're not designers into already
giving us a huge head start when we're
developing web apps and then of course
vs java developers we're very used to
unit testing and it's not because we're
in the JavaScript world that we have to
forget all about that so there are and
we're using qunit but there are other
unit testing frameworks that exist in
the JavaScript old and it's it's all
very similar to what we know from the
JavaScript quality of here your setup
your teardown and you have your tests
where you do something and you you
asserted it's true or not and basically
just the same thing as what we have in
Java we can do it in JavaScript so
there's no no reason to dump JavaScript
development because of this if you would
use QQ unit for example then you can run
your test run in the browser and you can
get a page like this which already gives
you a nice results of all your tests
the different surgeons in your tests
they work or fail or whatever then at
least you know you know what happens
just for certainty it's it's great not
yellow right so yeah the clothes are a
bit of first yeah so and what's also
nice is then we created a small script
that that allows us to run these same
scripts also on the comment line so
we're using phantom GS for that and then
you can run them on the comment line and
what's nice is that it's it's it spits
out a AJ unit XML file which is done
very handy if you is done combine it
with Jenkins because then you get all
your results from your JavaScript test
run or fight Jenkins and you get the
results in your bill so we are still
doing the the whole shebang of stuff
that we do in the JavaScript and the
java space we get all the same tools and
features and a feedback iya in this
space as well what you also see is that
after the icon of selenium there so we
can also also do integration tests
running headless on honor in on our
Jenkins server so you can also do those
it's quite nice anybody already doing
this at rescue unit ago so those are
best practices of course yeah so and
then a left bit on the hash bang and the
html5 pushed it so what you see a lot
these days is in his JavaScript web apps
is that you get the hash or the hash
bang or something like that and there's
a good reason to do not do that so
basically if you use this it means that
that these deep links are broken so it
only works in the browser everything
that comes after the hash is never sent
to your server so the problem there is
that if you would if Google with spider
a page and cross a link which contains
one of these hashes it would not it will
never go inspire this page because you
can
to that one so you can basically forget
about your your search indexing for
example if you would copy paste a link
that you have from a site that uses
these these hashes they put it in
Twitter or Facebook or whatever it
cannot Facebook cannot read this but
this this link you cannot understand it
and run it because you need to know
parlays is a one-page website action so
it's it's only one page it's loading all
this JavaScript and it's one page and
then we were using the scroll showing of
the hash signs to actually you know do
some deeply gather navigation within the
app but that doesn't help you with the
search engines yeah so basically what
you can do is html5 introduced bush
state which allows your URL to 2 under
the covers use something like these
hashes but it would still look to look
as a normal URL to do an a search engine
or in your browser you would just see
just normal slashes instead of these
hashes so and backbone.js helps you
there because it transparently supports
this so it will check if a browser and
support for push state and then it will
use that and the URLs would look like a
normal nested path in in your web app
well on older browsers it would it would
fall back to the hash solution so at
least for the majority of your users
that are on the most recent browsers it
will work well and it will work as well
for the for the other ones so what you
can then do is using some URL rewriting
rules on your apache or nginx or
whatever a third circle that you have as
a reverse proxy and you capture all urls
and you make him you before attempt to
the index.html except for adore the
spiders like your twitter facebook
google all these guys and you feed them
some other static page so you have a
secondary page or a secondary URL which
gives you the content of what this deep
link should have if you're viewing it in
a browser but you cannot feed it like
just some static page so we we make we
provide a different rest api for google
but we we they don't spider that one
directly we just transparently feed them
this content so if they see for exam
will you have in peril ACF parlays calm
/ play / the idea of a talk it Google
would still see this URL but we'd get a
totally different content the browser
would just get the index HTML but Google
would receive the title the thumbnail it
would get the contents of all the slides
etc so that's this is a bit of a trick
to make your content of your JavaScript
pay per click web applications
searchable anybody already doing this ya
know so so at least you learn something
right I think the next time i'ma show is
probably really you that not a lot of
people know because it is really a
leading edge and let me first give you a
demo which is hopefully interesting so
let me remove the website and so what we
wanted to do with what we had when we
had a adobe air is that video adobe air
you could have a standalone application
and we actually provided that and that
one allowed you to then download the
talks and watch it offline now of course
with a website it's a bit more difficult
to do so wouldn't it be nice if we could
actually leverage the same website the
same code and accomplish that and that's
what i want to show you this is a sneak
preview it's not yet ready we're going
to release this in november at the fox
but at least i wanted to share it with
you so you actually have just a normal
icon there on your icon on your desktop
when you click that it will actually
show the parlays website all right so
this is a desktop app this could run on
mac linux and windows and it shows
actually it's all the talks and this
will just continue to work because i'm
online of course right so if i'll go to
this dog which i showed you just before
i could i am actually I now actually
have a new button which is called
downloads so if I would be authenticated
I can actually start downloading this
talk in this web app native that app and
then watch it when I'm offline so let me
show you that I'm connected to the
internet so what I will now do is this
connects my ethernet cable done it you
can see it here it has detected that I'm
not connected anymore and now it's only
showing me the talks that were
downloaded so i already downloaded one
talk so I'm not
and now I can watch the full talk from
my desk so I think if we keep in mind
what I showed previously about the
numbers it's widely deployed but then
also same experience but this could make
some as a feature of the internet and
what's really cool is that we are just
basically reusing the same logic the
same HTML CSS JavaScript on the desktop
that cool unfortunately I did not
develop that JavaScript library but I
will definitely talk about it you had a
question sorry yeah no we were not
allowed technically we can but legally
we're not allowed to download the
youtube talks yes correct lots of course
the service we offer is that yeah if you
don't put your media on our servers we
can at least provide you that one idea
that we have is that we could actually
allow you to upload your video via our
servers we push it to youtube so we play
it and stream it when you're online and
but if you want to download it you
download it from our server so that
might be something we'll probably
evolved towards because otherwise yeah
you can't really legally use it and the
other questions I yeah yeah let me I've
got a few slides explaining that so
thanks for that question so what is what
is it using well it's actually note
WebKit it's called so make time make
sure you know that you write that down
it's it's based on chromium and note GS
so basically what it does and this is
what developed by wrote your run from
China he works for Intel it's an open
source project and what it basically
does is that it combines no gso you have
the full functionality of no TS so you
can access your hard disk you can
actually play videos and audios and so
on in an offline mode and then basically
also reuse the chromium WebKit
environment supports it supports most of
the HTML features it's mel 5 features
but for us of course because of the
multi rich media we wanted to have the
video audio
and it actually supports that through
the GPU so that's really the best of of
co froze so that's that's pretty amazing
if you want to get more about this you
just go to github it's an open source
project so it's github.com / Roger run /
note- WebKit he's actually we're flying
him into two day fox in november so he's
going to talk about this and it's going
to be available in parlays afterwards so
you know you can watch it during
Christmas or New Year's Eve or whatever
but so but how does it work it's it's
really not too complicated and what you
do is that you create your app in a
directory and you put your HTML
Javascript CSS other resources even some
app data so you could already include
for example some videos or some pictures
of things like that and then the the
extra thing you need to do is add a
package.json file and the package.json
file defines the name of the project but
also which HTML file it needs to trigger
right so that's your boot strapped into
your website and then what you do is
that you just do a compress so that's
just a sip of that directory so you zip
that's and you call it my app dot NW or
whatever you want you download the nodes
WebKit and then you concatenate those
two into one application basically so
just moving a simple cut it will create
one file and that one file magically
becomes your standard executable I'm
doing this very rough but there's
different processes depending for linux
windows or mac so there's a few
different steps depending on which
targets you want to make it but at the
end you will get either an executable
and an app for mac and for linux you
will also get a native sorry sorry it
comes with chromium so it uses basically
the WebKit environment
enjoy yeah yeah it's a reticle a replica
tickets yeah yeah it's very similar to
what Google is doing as well with
packaged apps but this for us was for
the rich media there were some
advantages for us we evaluated both for
now this is for us that's really working
for us the problem with the chrome
packaged apps that you need to have
chrome installs first before I can
install the packaged apps people that
don't have chrome installed you need to
tell them that do that let me taste it's
just an app that you install you can put
it in the app store or wherever so
because a lot of corporate users are not
allowed to actually install something so
they would be left out basically so for
us that's better to wrap it all together
it's about 30 megabytes but again if
you're watching videos it's 300
megabytes per hour so you know if it's
30 my advice it's not a big deal with
some other questions I think we did it
like in two days it was really not a lot
of work yeah but it's just it's just a
regular web kit and you get notes
together and you can you can make them
communicate together so you can get your
notes the modules from note that you
require you can combine this with the
stuff that's in your in your web app so
it's really a nice nice way to combine
both thanks to require it makes it even
easier to them inject all these things
together and you're going to see this
more and more I mean this way yeah we
can just put it in the app store or we
could fly create a special packaged app
for a channel so like for Java one we
could have a desktop app for just Java
one and only have those talks for Java
one in there or we could have like our
stand-up comedian that could replace his
DVD leaflets and have some pictures and
some quotes and so on and really have
yeah nice experience so really excited
about that anybody knew about this No so
again yeah possibly yeah you knew about
yeah
thank you yeah yes hopefully being
recorded yeah it's it's being recorded
so hopefully you'll be able to see
another publish it ourselves also in our
channel so so Oracle has decided to make
all the talks the 340 tox free for
everyone so even the non attendees will
be able to access this the only problem
is that they are only recording the
video signal and the audio so you will
not see our pretty faces next to it but
you can take a picture and any other
questions yeah well we're using just
Twitter's redirecting with Olaf and then
yeah the durable nothing secrets just a
standard ways of authentication or what
do you mean what specific problem are
you referring to me no no no no no just
do a rest cult or a server it login
password so we do linkedin google+
facebook and twitter and with these four
or if you don't have any of those you
can just use your own username passwords
of our system but we discourage that
like actually
yeah so yes so like for Devil's Belgium
we do it a bit different because we're
not a big corporation like Oracle so I
mean we record actually the video of the
speakers and the slides and it's it's a
big big investment for a small
organization so what we do is that we
give all the talks for free for the
attendees and we release 11 talk per
week for the people who don't want to
pay and then people who do have a small
budget they can pay like all the talks
which is like 200 talks for safety 9
euros and what we're going to be
activating this year is also the
pay-per-view because a lot of people say
like I don't want to pay eighty dollars
for only the two talks that I want to
see so they will be able to just buy one
talked for like five dollars
you mean advertisements yeah it's
definitely something we're playing with
that together with Google we were
looking at of course adding ads and that
way you don't have to pay at all and we
can recover because you know it's we're
not youtube but like all the streaming
and a hosting on amazon it's it's rather
expensive we won't be able to bypass
that so if you embed the YouTube you
will have the ad of yeah we can't if you
use the YouTube video then that's the
container that we can't touch yeah but
again we're we're learning I mean and
they're working with us as well so we
can always put in like an intro video on
top of that as long as they're at stay
in the video that there are some
synergies possible let's move on because
we got still quite a few interesting
things to share with you which is the
clouds part so that like Stefan
mentioned earlier a big part of the work
last year was to move to the cloud so we
had last year we had three very beefy
servers in some data center in in the UK
but we were getting some some
performance issues like you see in the
image there that we were getting some
congestion because all all the trim of
our machines they were running all the
same services on the same machine so
what we now I wanted to do is to spread
the load so instead of having one
machine that that had and a glassfish
and my sequel and a media streaming
server and all that stuff sitting on the
same box we now are spreading out our
boxes into smaller dedicated dedicated
machines with each their purpose and
this allows us to to choose maybe a
couple more machines that are more
compute and have more computing capacity
for certain tasks where others that
don't require all this I 0 computing
capacity birth that need more i/o
capacity and mix and match those and
also what we've done by doing that
movement is that we were also able to
active
the different regions so we have a lot
of people from Asia I wanted to see the
talks so we just activate the Asian data
center from amazon and then they get
better you know feedback so a better
experience so we are using the three
regions basically America Europe and
Asia so this allows us to give some
better scalability because we can scale
up all the different sub components more
precisely where it's needed
unfortunately it gives us some more
maintenance because you have all these
different machines I believe you about
we have about 11 servers now running in
production compared to three so we
needed some some tooling to help us
there and to give you a high-level
overview of our different components and
this is what we have on amazon so we
have our our web servers which are on
the left side you have apache doing all
the static file serving HTML Javascript
all that stuff together with glassfish
for all the or back end needs then we
have MongoDB that's on a different
server it's running MongoDB and elastic
search and then we are also using s3 and
elastic load balancers to spread the
load and in front of s3 we're also using
cloud front like Stefan sets were that
we use as a CDN to distribute the media
to everybody we have also F another
component which is running Apache and
some PHP to do some some transcoding for
example to create some images from the
PDF slides and transcoding some videos
to different formats and that's
currently running in PHP bitters we're
actively working on redeveloping that in
no chess right now because it's it's
more maintainable for us that way we
have JavaScript on the clines and have
just
servers or get your small team so you
got that bridge face the knowledge yeah
any questions about this No so now how
will you manage these all these machines
well maybe you guys have heard about it
before so DevOps is is what you want to
do so we are using a chef Fredette and
what is that hopes actually is this
infrastructure as code fortunately for
me it was Ruby code so i had to learn
ruby but it's it's not that hard in fact
and by having your infrastructure
defined in your code so basically in
your code you can say i need this type
of server i need to install this type of
service i need this package and all that
stuff and it's you write it all in some
declarative Ruby code which means that
you can also check it into your source
repository and it in gives you some
history and you can it can also repeat
these these steps so for example when
you when I set up the dev environments
and i finalized all that it was very
easy to create a staging environment you
just run the same scripts on a different
set of nodes and you can basically get
all these different environments for
free so your system that you your costs
for our system in our way it's it's a
lot cheaper to do it this way do the
other thing is that it's automated so
it's nice and you can also test it even
we've not set that up yet so have no
experience with that right now but it's
even possible to test your script
because it's code you can test them as
well in a virtualized environment now
how does it work so on your machine as a
developer you have the chef client you
change all these scripts it in Ruby code
you check them into your your get up and
then you use the knife tool to set up to
a chef server and a chef server is kind
of like as a centralized environment
that coordinates all the different notes
all your different machines and it will
then your chef clients so you all your
notes will talk to the server and say
okay I have this type of role what do I
need to execute so that's basically how
it works I know that's also interesting
is that there is this whole community
out there that is right
these cookbooks there are the scripts
for different systems like for example
you have a good book for Blowfish if one
for Apache you have for all these
different things you already have stuff
in the community available so you don't
need to become the expert on how to
install this or that service so a little
bit about all the different names that
exist there so if we have the server
like I said it coordinates everything
then you have the client which runs on
all the machines that you have so it
could be virtual exchange could be
physical machines doesn't need to be in
the cloud even so you can even run you
can even control your laptop so that's
what what we're seeing more and more is
that even developer shops are using chef
to manage the developer machines so to
make sure that if the new guy rising the
team that they just run the scripts and
it sets up the ID and all the
environment that needs on for a new
developer so that's something
interesting at we're seeing and by
default you have you have environments
by default you have one it's called
default and you can create other one so
we have brought we have testing web
staging and then there's roles so you
read so you define a role for a certain
note you give it you can give it one or
more roles it can be for example we have
a web role we have a database role and
you get the idea and then in the
cookbooks you define the recipes and
they have attributes you have templates
for certain config files and you can
ship files with with us as well and then
in then you also have a data bags it's a
sort of container for some attributes at
the global level and you can encrypt
them so you can use them for example to
store passwords anybody already using
shift yeah few people yeah yeah yeah
there's some good talks on for days
about this as well so yeah so what
but but but then show or what most well
known yeah so knife is a tool is a comic
line tool that you use to manipulate
this environment and you can use to
install other cookbooks the scripts
either from a community from the
community site or just from github and
you use it to also upload your changes
back to the server you use it to
integrate you know with with your
environment and then if it's also nice
is you can that you can use it to run
some some shell commands on all your
machines were all or some subset of your
all your servers by using a search query
for example I wanted to know in this
case with what available disk space was
on all my all my a no start machines so
we can see that there is this search
query that I'm doing here to this way I
could get for example the disk space in
one go i get i can get all this
information it's a simple example but
you can imagine what the possibilities
are by script by by this by doing this
what is can also allow you to do is in
our case it allows us to communicate
with with amazon's easy to service so we
can list the instances we can create new
nose with a specific role we can
terminate notes so you know no longer
need to go and fiddle with with the
weapon min or with your other companies
on comment line it's all integrated is
that if you like to announce the fact
that all the talks are available of java
one we can just very quickly add
multiple nodes to it so we can actually
you know scale up for the demand that we
might hit when that newsletter goes out
for itself so yeah so for example if
Stefan said ok i want to send out a new
newsletter on i say okay well I need a
few extra web nodes in my production
environment and it just spins up the
nose creates everything and just one
command and self can you do it
automatically as well it can be done
automatically as well as you integrate
with Amazon's API
but we don't do that we don't do that no
it's more a manual step right now but
it's possible like I mentioned it's this
was easy too but there's plugins for
other cloud environments as well now
when you're developing you don't need to
use Amazon per se there's another
interesting too let's call fragrant and
it allows you to use to use chef with
virtualbox but and so this way it can
create some some VirtualBox images of
new nodes with this and run the same
script so you can try out and test all
this stuff on your developer machine
without needing an account on Amazon or
some other cloud provider so this allows
you to test this all on self-contained
on your machine or also to mimic your
production environment on your laptop so
you can say okay I want one instance
running here with all the different
roles on one on one single machine like
this is this way you could have your
production environment on your laptop
okay so that's the clouds part our last
part of this talk is a bit of the best
practices on the server side we look at
the client you look at the
infrastructure so let's let's just look
at the jax-rs mobile DBN elasticsearch
just best practices basically on based
on our experience so I love jax-rs I
mean that's one of my favorites ap ice
in the Java EE space and to be honest we
use glassfish but that's the only ye API
that we actually are using all the other
stuff is really not standardized so a
really very good best practice is that
we basically have people working on the
client and we have people working on the
server and so you need to have some kind
of contract so they know okay what type
of rest methods are available and so
while this is really bad
I'll talk about it because you can't
read it but what there's a possibility
actually to use like annotations to
document your jax-rs importance and
there's an open source tool out there is
default which is called swagger SWA h EG
ER it's it's okay it i have to evaluate
other alternatives we use it because
it's but it's a bit buggy but the ID is
really very very nice is that it
actually introduce you or it allows you
to actually add annotations to your
class in your different methods like
javadoc tits in the past right and by
doing that it will then actually result
in creating and again excuse me for the
projector but it actually creates a
website which the client developers can
then see are ok these are the methods I
now have available and they can actually
click and use these methods which are
produced in an HTML environments to
actually communicate and talk to to the
rest of the face because otherwise the
client developers which are JavaScript
folks but they need to otherwise go into
the Java code and see okay what do I
have a favor right so this is basically
javadoc for jax-rs or restaurants now
I've been complaining about this not
complaining but you know I'm like on a
crusade because I would love to see this
type of feature in the next version of
jax-rs I mean they should really support
this out of the specification so we can
standardize to see more with tooling etc
but this is a great way to actually
communicate with the server and the
client group anybody else using
something else or anybody using already
smacker
yeah yeah yeah there's a few like Oh
based on the wsdl file it will actually
create some it exactly so but again its
propriety so it would really be nice if
that could actually be standardized so
on so that's that's on the jacks rest
otherwise I mean I love jax-rs it's it's
really a nice way to enable your
environment the only bit of dilemma
you're starting to have is like we are
now really developing the PHP uploading
scripts with no TS and basically you
could just be developed the whole server
also in OGS right and that's really all
so Trent you're seeing is that if you're
really into Java scripts you could do
javascript all over the place so that's
a bit frightening so it also depends of
course of the type of people you have in
your team you know what you do in what
direction then Mongo I'll little talk
about that yeah so we also moved away
from my sequel to MongoDB and one of the
reasons was that first of all we had
some performance issues and Mongo is
this new thing so I thought it was cool
to play with that but on the other hand
it was also I think a better fit for our
problem because in a relational database
you have all these different tables
where you put your data like in our case
you have a presentation and you have a
list of assets and all these assets a
list of files so in the end to to render
one page we had to make this disk
queries with huge joint so about across
seven eight nine tables just to render
one page and by having MongoDB which is
document database you can have the full
presentation structure in one calls at
you one request and you get all the data
and it's really fast sorry
we've looked at it but Mongo was the
first that we tried and it was it was a
good fit for for what we need it so but
it would have worked as well as
Cassandra sure what's also really nice
is that MongoDB is based on the format
of MongoDB is also Jason and Jason we
have on the clients so it's more it's
very easy you just you just do it a
request get the data and stuff it's to
your front end without processing so I
think that's it helps with the
performance as well but there are a bit
a couple of got chest with with MongoDB
so of course you want to have multiple
nodes so in in MongoDB it's called
replica sets that you define and you
need like three notes at least so if one
goes down they can at least negotiate
which one becomes the primary again what
you also need to know is that and we
learn it afterwards that it doesn't oh
it doesn't detect all the notes in
itself so even if you tell it what one
note is so the address of one note it
will not autodiscover the other one so
you need to tell it all your different
nodes which in a cloud environment can
be a bit tricky if you have service
coming up and going down all the time so
this is something you need to take into
account and then by default mongodb only
if even if you have multiple instances
it will only talk to the primary but
we'll all requests will go to the same
machine which is of course not the best
thing to do if you want to spread the
load so for this there are a few
parameters that you want to set up and
one of them is the read preference so
what we do is we by default we want to
read from secondaries not from our
primary and we reset for example the
right concern we set it to the majority
so it means that only return a right
call after the majority of us or for
database servers have the data so this
way we're sure that we'll never will
we'll never lose any data and we're
using adjacent to java mapping using
jackson i believe and it's yeah it works
well for us but it could be better so
there is this new this new library that
I discovered that you are not using it
right now not not yet s called Jango and
its really something you should look
because if you need to do queries it's a
bit it's a bit strange using the Java
API and the Java driver for manga so
John go it's hard to read j 0 ng oh well
it it allows you to to write to write
queries more in the format of the
command line the MongoDB comment line
instead of like in the Java driver you
have to fiddle with creating you a basic
object and basically help this whole
structure in object so it's yeah
function it very hard to three but if
after the presentation i can i can show
you what it looks like it's actually
pretty pretty neat because it's very
similar to what you'd write in the
comment line to do your queries for a
while in the Java driver it's very very
cumbersome because of the nature of
syntax and of course in the future java
ee 8 they will probably introduce new
mapping Jason mapping as well so you
know that Stefan something we gotta keep
our eye out
right so and one one problem with with
mongodb at least when we started there
was no support for a full text search of
course we want our presentations to be
searchable and you can always search for
food for the exact values in MongoDB in
the meantime they've introduced some
full-text search but it's still somewhat
experimental so we need to activate it
the feature it's not in there by default
it's not enabled by default so we
started by using elastic search which is
something that uses leucine under the
covers and it works pretty well it's
very fast and you talk to it via REST
API initially we started to use a
MongoDB River the MongoDB River what
they call it it's something that plugs
so basically it's a it plugged on to the
to the MongoDB a journal and then
replicated all these things all this
database changes in our search index but
please don't use it it's something that
is very brittle and we ended up having
data that was duplicated and stuff like
that so the the founder of elastic
search even said phone please just don't
don't use that another thing about
elasticsearch is that we initially we
started to use the fluent java api it's
a really nice API but the problem is
that if you include this dependency in
in maven it will it will drag in the
full manga elasticsearch distribution so
it gets a dependency of like 16 or 20
megabytes just for querying your elastic
search and it just has this rest api so
which what you go want to do is just
right use a simple tool to to talk to
elasticsearch via rest it's very good
for searching and also for indexing but
you will want to use the bulk API for
example in case we update or all the
presentations in a channel for example
don't call the rest api hundred times to
update all presentations please use the
bulky indexing function it goes much
faster it's one of the coaches
still get one slide but that's too bad
why I see it there's a nice plug-in on
elasticsearch that basically shows you
how your indexes are spread out across
the different nodes that you have how
the partitioning is done and the load
that spread out so yeah if you guys have
any questions a shoot so that's fine is
there a particular reason she chose to
go back over angular yeah angular is
really good I really love angular but
definitely at the time that we started
development it was more students for
forum based web applications so just
form fields and all that stuff that
works really well that's really a sweet
spot for angular since we're doing a lot
of custom components and animations and
transitions we really want to hook into
the rendering process so we really want
to have the hand or we really want to do
that ourselves and this is what angular
doesn't allow us to do they have they
take care of the rendering for you it's
you just change the model and it figures
out what it needs to render so since
then since the last version i think in
angular they've introduced animations as
well but it's still a bit limited for
our needs so we evaluated yes so
probably we could do what we're what we
we could write for a nice also with
angular but we would have a hard time
for for these type of things that the
other questions
so do you actually the file system goals
was to download the video files and then
put it on to the local disk so we could
actually the master a bit low now that
was the issue because you also have
offline in html5 which also because
offline works in html5 but the big issue
is with video files playing video so we
could we could have the app fully
working offline except for the video
files we had we had some hack that
worked in Chrome but it didn't I'm work
in firefox and anais oh this way at
least we have something that works
consistently across on all platforms so
what this might change in the future of
course
what do you mean in case of an offline
html5 yeah it's all packaged and the
problem also that the HTML offline is
that people need to get the idea that
they can actually go to the website when
they're disconnected and that's like
they don't have that reflex right so
that doesn't work for me that's why a
desktop icon that's the best I mean you
really trigger it so yeah okay well we
cannot yet not recive yeah yeah so we're
moving to work really excluding PHP
replacing it with no GS that's for the
publishing part so we'll still have
class fish for the backend that runs the
all the basic back end of the
application but just for the publishing
process try as creating slides for the
for the PDF so extracting the slides and
text transcoding the video all that is
being managed by noches
they're they're commuting over rest so
no jess is talking of arrests with
glassfish biceps yeah yeah so that you
know jails doesn't talk to manga
directly it's all goes through the back
in town okay I think we need to wrap up
we're still going to be here but I hope
you learned a few things and this talk
will be available on parle sore</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>