<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>RxJS: The Basics &amp; The Future | Coder Coacher - Coaching Coders</title><meta content="RxJS: The Basics &amp; The Future - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Developers/">Oracle Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>RxJS: The Basics &amp; The Future</b></h2><h5 class="post__date">2017-12-15</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Assv5o3yEWY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so I am going to be talking today about
rxjs the basics and the future there's a
lot of really really exciting things
about rxjs that we're going to be
covering today so to get started I think
the first question is always what is
rxjs a lot of people have ideas about
rxjs but here are some basic facts and
sort of ideas about what rxjs is rxjs is
simply a push-based primitive in
JavaScript it is also the reference
implementation for the tc39 observable
proposal hopefully landing soon it's
also a domain-specific language that
sits on top of JavaScript the reason why
this is so great is because because it
is a language in itself and it sits on
top of JavaScript it makes it really
easy to refactor your code and move
between frameworks and libraries it's
also the only external dependency for
angular 2 and above this is really
awesome because the angular community
has well embraced rxjs but our extras'
is also still heavily used in react and
view and quite a few other different
frameworks and libraries the reason why
people love rxjs is because it's really
easy to chain together complex
interactions you're able to do a lot of
things that are really difficult in just
a few lines of code once you understand
rxjs so let's talk a little bit about
where rxjs came from so rxjs has two
main authors we have met pod Wysocki who
is actually from Microsoft
he created rxjs for rxjs is actually
quite an old library so arcs just for
has been in existence for quite some
time and
when Ben Lesh was at Netflix he actually
wrote rxjs 5 and above Eric's Jess 5 and
above is sort of what you see these days
in the different frameworks and
libraries and in JavaScript arts jess is
used in a lot of really large companies
it's very heavily and widely adopted
there are way too many to name but to
start off with a few Google of course is
heavily using rxjs we have slack as well
using rxjs Facebook Microsoft Netflix
and again way too many to even begin to
name the number of companies that are
being used that are using rxjs in fact a
the number of downloads as you can see
from this craft in the past two years
has been growing for arts right now I
mean over 600,000 downloads a week that
is that is pretty significant growth for
a library so when you are trying to
figure out what rxjs is and and sort of
understand the different pieces of our X
there's sort of two main components that
you should be thinking about and those
two components are going to be
observables and observers so observables
and observers let me talk about those
just a little bit so when you think
about Rx you should be thinking about
the idea that observables are the things
that are going to be giving you data and
observers are the things that are
actually receiving the data so that's
how those two work together observables
are also just functions in JavaScript
meaning that they're not going to
actually do anything until you subscribe
to them and the way you subscribe to an
observable is actually with an observer
so observables are always observed by
the observer right
and when you subscribe to an observable
what it does is it's going to set up a
chain of observation using observers so
another question people have is isn't
arts just just for asynchronous things
it's actually the this is a false
misconception that a lot of people have
observables are actually just pushed
based primitives in JavaScript that push
values at you so examples of synchronous
observables could be observable of
observable from a great example is just
observable of we'll just give you a back
whatever you pass into that argument and
then observable from is just going to
convert an array a promise or an
iterable into an observable so my story
about rxjs is a may be a little bit
different than what most most people
have experienced I was really excited
one day I saw all my friends using arc
stress and I said Ben oh my god teach me
arcs Jess and Ben came in and he said
okay sure I'll teach you arts Jess and
so I got really happy and I was very
very excited that my friend Ben was
going to teach me arts Jess he started
explaining our XJS and over the course
of quite some time I got exceedingly
frustrated and who it's very very very
frustrating experience and you know this
is me and Ben after basically three
hours of pairing on rxjs at a coffee
shop definitely I don't know why he's
smiling but it was one of the most
frustrating things for me to learn when
I was learning rx Jess I ran into quite
a few different things that I'm sort of
frustrated about or had you know
questions about so one thing is finding
the right documentation you know there's
two versions of rxjs currently
it's GS 4 and 5 so I couldn't really
find the right docs
in addition to that when I was trying to
figure out what operators to use I
couldn't really figure out which
operators did what what's the difference
between a con cat a kink at all a merge
emerged map a switch map a cat map I
mean there's just so many different
operators that do so many different
things another thing that I really
wanted to do and this is sort of why I
wanted to go down the journey of
learning rx Jess was because I really
wanted to understand how to actually
wrap api's and observables that was that
was my end goal and when I actually
finally figured out how to put
everything together with rx I was so
frustrated I sat and looked at my code
for hours and hours and hours thinking
what the heck did I do wrong why on
earth is my code not working and it's
because I forgot to subscribe if you
remember that observables don't actually
do anything until you subscribe to them
because they're kind of just like
functions in JavaScript right you have
to call them so yeah this is a it was
definitely not fun but as I went on I
talked to Ben more about rxjs
and once I finally got it I realized oh
my gosh this is great I really do love
our X so my name is Tracy um you can
follow me on twitter at lady Li and I'm
the speaker a Google developer expert
for web and angular technologies
I love development so whether it's
angular ember react arcs GIS react
native native script I love to ov you as
well oh and love you love to experiment
around with different technologies I'm a
co-founder of a company called the stop
media and at the start labs at the stop
media we really try to focus on bringing
together the web through really amazing
content whether it's podcasts online
screencasts etc so you can go to this
dot dot CEO to check out this dot media
on the left side we help companies
who are needing help with basically
anything related to the front end and we
help provide them with really amazing
mentors so that you can get the job done
faster so whether it's architect level
decisions or what there's just pair
programming in our ongoing basis with a
technology expert that's what we do
I love tech writing and podcasting so
you can find that on modern web as well
modern web comm and I love being a
mentor for junior developers because I
believe it's really important to start
creating junior developers and help
teach them so that we can grow our next
generation of developers and leaders so
um let's talk a little bit about
learning and using rxjs we're going to
go through a few things today during
this presentation we're going to be
going through how to create and
observable the best practices for
importing and using rxjs how to choose
operators and find documentation how to
avoid unwanted subscriptions how to wrap
an API the benefits of same shape Innes
which is one thing that's really lovely
about using rx
and what's coming for rxjs 6 and 7 so
let's get into how to create an
observable first this is the most basic
way to create an observable so what's
happening here is we're creating a new
observable and we're giving it an
observer that is going to basically give
us a function and observer is one thing
to note have the methods next error and
complete automatically on them so that's
basic construction of how to create an
observable now there are many other
observable creation methods underneath
the hood all of these just use the
observable constructor so you don't need
to worry anytime you get stuck you can
just use the observable constructor it's
not a big deal but you can also use
these observable creation methods so
those are
well two observable from observable from
event and observable from is probably
one that you should take note of because
this is part of the official tc39 spec
and I think in order to teach rxjs one
of my favorite things to do is actually
just go through building an application
because it's a I think the best way to
learn it just sort of look at the code
and figure out what on earth is going on
so we're gonna be building a pun off
today and if you go through this point
up this is what the pen up is gonna do
so you can see you can enter in key
words and it's gonna return my set of
puns banana and then food and then if I
go ahead and click on this click on
listen I see banana then banana pence
will come up so that's really cool we're
using the web speech API to do this and
although the one thing that we should
probably be noticing though is that
there is a look ahead search right here
with us entering the keywords so let's
go ahead and get into that the look I
had searched a sort of the idiomatic
rxjs example you might have seen it
online
perhaps that this is sort of our way of
looking at it building a look ahead
search using arts yes so we're doing
this in angular as well basically what
we're doing here is i'm also using
angular material so we're getting
observable if text changes from input by
adding simply adding an impotent or
components template first and then what
we're going to do is we're going to go
ahead and use a subject and that subject
is called keyword input changes and
we're going to use this as the event
handler on the input event now in
angular we need to make sure to create a
template reference variable so that we
can get the text value and in this case
i'm using keywords right over here
and then if you remember I said that
observers have the methods next error
and complete on them right and so a
subject is actually an observable and an
observer so we can just use next right
here since we're using a subject called
keyword input changes to next out the
values and get an observable of those
values so all of this is great but it's
not going to work unless you actually
import subject from rxjs because we're
using subject so we do that here and
then make sure to add subject to our
component class as well now let's talk
about subjects really quickly because I
just said that they were observables and
observers okay so because they are both
observables and observers they allow us
to push values by just calling subject
dot next and then the value and because
they're also observables they have all
the operators on them that any other
observable would so it's really easy to
work with subjects so importing arcs
Jess also I mentioned that and this is
sort of where a lot of people make a
mistake
this is greatly being improved with the
library currently there is currently a
PR out to to make imports a little bit
easier but I'll show you guys just how
we're doing it over here importing
subject from arcs Jeff slash subject so
this is where the mistakes are typically
made right so people will import all of
our X from rxjs now you can actually do
this if you're using if you're using
rxjs and node because you're not
actually shipping to think to the
browser so you don't care about your
bundle size or importing you know a
bunch of different things like
observable and behavior subject from
arcs Jess
now they we are actually working on a
few different optimizations and rxjs 5 5
and above
to make it easier but currently speaking
this is going to basically import all of
the operators for you or all of our X
J's for you actually or importing you
know something from arks just like just
remarks so what you actually want to do
right bad ways is you want to just
include what you need so pulling in the
types you need individually and then
with operators in angular you just have
your app module dot ts file and you're
gonna import individual operators that
you need and also just pull them the
different types you need individually
again this is changing in arts just by
five and above so a lot of different
beautiful optimizations that I'll get
into as we talk about what's coming up
in rxjs let's see now let's get back to
our pun app so currently all we did was
just create an observable of text input
changes that was called keyword input
changes remembering we were just next
hang out to values but you know now that
we have those we actually just need to
get the pump that we're looking for so
to get our data I've created a pond
service and all I'm doing here is adding
it to my writers and injecting it
through the constructor now pun service
is going to use HTTP from angular's HTTP
so this is kind of what our pun service
looks like what we're doing here is
again we're using angular HCP and we are
also creating a method there's actually
two methods on the pun service there I'm
just showing you one I mean one of them
is suggest keywords but we're also gonna
have get puns
they basically look exactly the same and
what's happening is as someone's typing
in a set of keywords we're gonna go
ahead and do it get with that string of
keywords and try to find out what
keywords is going to match on our server
the HTV service is going to return an
observable and then we're going to map
it into the response JSON so we can get
an actual JavaScript object back that we
can use so we also don't really know how
we want to handle errors so we've gone
ahead and added a catch share so what
that means is if HTTP errors and if we
don't have a catch then if we use
something like switch map or merge map
later on that error is going to
propagate out and kill the parents dream
that was starting these Ajax requests
and we definitely don't want that okay
so now we have the observable of text
input changes and we sorry text box
changes and we want to go ahead and get
that list of suggested keywords right
when we continue down this path so what
we're doing here is we are creating a
new observable and this observable is
going to be called keywords so let's go
ahead and create a property on our class
called keywords and when there is a text
input change what we're doing is we're a
synchronously going and getting a set of
suggested keywords by calling suggested
keywords on our service and then the
suggested keywords method is going to
return an observable of suggested
keywords then what we're doing is we're
using switch map here to change our
stream of text input change it in sorry
textbox input changes into a stream of
suggested keywords okay so you might
wonder why on earth are we using switch
map so I wondered the same thing when I
was starting all these different
operators what switch map does it
actually just converts the value to a
new observable and then switches to that
observable and then subscribes from any
previous ones it might have made now if
you're ever wondering why use switch map
you can actually go to the rxjs
documentation so the official rxjs darks
are
reactive x io / rxjs and if you scroll
down on the main page you'll have this
hole this little choose your own
operator adventure right here know that
we are all set with that we need to go
ahead and write our suggested keywords
out to the view I'm doing that right
here and you know if you remember
keywords is just an observable of arrays
so we can just simply subscribe to it
using PI pacing which is the feature in
angular and iterate over it using ng for
pacing is probably one of my favorite
features in angular because what it does
is immediately when the component
initializes it's going to subscribe to
that observable and then immediately
after its removed from the view it's
gonna go ahead and unsubscribe it's a
very powerful tool for it from angular
now if you remember as well
when I was walking through the pun
service we had two methods and the
second method was called get puns so now
we have a list of keywords that matches
our puns and we're gonna go ahead and
take that list of keywords and convert
it into an observable of puns so it's
basically exactly the same code looks
very familiar right and then the get
puns method is going to go ahead and
take the list of keywords and return
suggested keywords and get a list of
Punk's that match those via HTTP so this
is where punch sound comes in and for
this again we're going ahead and using a
switch map okay so let's go ahead and if
you see that initially we wrote the
keywords out to the view and now that we
have puns found using get puns we can go
ahead and write that out - the view - so
this is where that is and we're actually
making a little bit of a mistake here so
I want to walk through this because so
we're using pipe async again right to
subscribe to the observable and we're
actually doing something wrong so here's
what we're doing
pipe async over here is actually used
twice and so
puns found the pumps found observables
actually derived from keywords which
means we're actually subscribing to
keyword twice here and because of that
with this we're using more we're
actually making two HTTP calls to get
our keywords observable but thankfully
there is an operator for that so that's
wonderful
so what we can do is we can actually use
the operator share and this is going to
avoid subscribing to an observable
multiple times with share we're making
the observable multicast right and what
it does is it shares a single
subscription to that observable with
many subscribers and in this case it's
the pipe of these things and with that
we've solved our problem now subjects by
the way are by default multicast so you
won't have to do this with a subject but
since this is just an observable we will
have to do this okay so now if we go
ahead and look at our code we will see
that banana-like things here you can
type Mexican get Mexican food fun to get
food puns right and and so again we're
just writing out the keywords observable
to the view right over here and we're
going ahead and writing out the puns
found to the view right here pretty
awesome right now this is the power of
basically same shape in this okay so
because of same shape in this because
everything we've been working with is
basically an observable of arrays of
strings it's really easy to add multiple
data sources so what that means is I can
go out and I can get any other
observable of key words you don't
necessarily have to be from the user's
text input from the look at search that
we created and we can compose it into an
observable of puns so rxjs also has a
merge operator and what the merger
operators going to allow you to do is
combine observable
together without actually having to
refactor much - so for this let's go
ahead and use the web speech API to get
a set of keywords and so you saw me
doing that right I could talk to my app
and I can say banana and then it's going
to return a set of keywords now if
you're using the web speech API it's
just going to look like this right so
it's nothing too crazy but what we're
doing here is we're creating a new
speech subject and then we're going
ahead and adding an event listener over
here and then the result event will give
us back a tree of results that the
speech recognition thought it heard and
then we're just calling speech dot start
so that our app will start the
microphone for listening us to say
anything so to wrap this API in and
observable it's really easy all we're
doing here is we're taking the same code
we had on our previous slide and we're
wrapping it in the observable
constructor you know when I was first
taught how to wrap api's and observable
I realized well I didn't realize it was
so easy until I realize like oh you just
stick in an observable constructor and
you're all set so the major difference
here is that instead of handling the
result inside of the event listener
we're going ahead and using the observer
to next out the results and we also we
also know that speech recognition is
only going to respond once so we can
just call complete right after okay so
observables are actually both lazy and
cancelable so we can return the teardown
function that calls speech dot abort
over here what this does is that if
somebody and then unsubscribes from our
speech recognition observable or
somebody removes the component from the
view it's going to go ahead and turn
that microphone off so let's also go
ahead and do a little bit of refactoring
here to clean things up event so since
we added an event listener we want to
make sure to remove that event listener
when we tear down so we don't get
anything weird happening with memory
manager
and now what we want to do now that we
have the speech service is we want to go
ahead and put this in another angular
service so I've generated a service
called speech service here and this is
what the speech service looks like it
basically just took all that code we
walked through and added a listen method
to return our rapt API we I also added a
helper here to clean the speech results
method that sort of goes through the
speech results and flattens it into an
array of strings that I thought I heard
and added a little bit of error handling
now we have to have something to
actually trigger our speech service
right so we went ahead and added a
button here with a click event and we
are using a subject again called listen
clicks and again next thing out the
results but we're actually not passing
anything into necks all we're doing is
just listening for an event to happen so
it starts to speech recognition so this
is going to be a subjective undefined or
void make sure to also add that subject
avoid called listen clicks on our class
and also make sure to add the speech
service as a provider and inject it
through the constructor okay so now so
when that listen button is clicked we're
going ahead and getting a speech
recognition observable for my service so
what we're doing here is we're creating
a new subject called spoken keywords and
subscribing to it with switch map using
switch month begin and what this does is
this is going to start the speech
recognition listening for someone to say
something it's going to process that
audio and then it's going to emit a list
of strings that it thought it heard now
before we had simply a property of
keywords right and that was just our
typed input changes that we're going out
and making a request and getting back
and so it's possible suggested keywords
but now what we're going to do is we're
going to go ahead and
factor that a little bit so we're going
to take that piece out and put it into
its own property called type keywords
and then you know spoken keywords and
type keywords are basically exactly the
same shape there are observables of
arrays of strings and so since they're
all the same shape we can go ahead and
merge them together into one keywords
property which is just an observable of
arrays of strings this is really cool
now because we can use the both the
share operator and now keywords is what
we're using for our puns found
observable and this is what we'll do
binding to in our template so um I don't
think we have time for a demo today but
you can find all this code on my github
and I'll go ahead and share the link
after this but I want to talk about a
few things so we we talked through a few
things already today we talked about how
to create an observable best practices
for importing and using rxjs how to
choose operators and find documentation
how to avoid unwanted subscriptions how
to wrap api's the benefits of same shape
enos but the one thing we haven't
actually covered yet is what is next for
rxjs six and seven so let's talk about
that a little bit so a few months ago
Ben created a private branch called
t-rex and it was a teensy little thing
um basically minified bundled in gzipped
rxjs 5 previously was 30 KP and he
basically took about 60 to 70 percent of
all of our X and minified bundled and
gzipped it and it was only 3 KB and so
he was able to make the library a lot
smaller you might be wondering how on
earth did it get so small well what he
was able to do is implement a lot of
operators in terms of other operators so
a lot of operators sort of do the same
thing or they're just you know two
things together and what that allowed it
to do was basically turn different
operators that maybe had 40 to 50 lines
of code into only one line of code so
the reduced operator for example is just
skinned and take last right and to array
is just a specialty of reduce so it's
really really easy for him to do that
and another thing that happened was well
I'll tell you why some of this came
about so I'm currently speaking you have
these things called patch operators and
what patch operators are is they're
basically patched on to the prototype
that's why they called patch operators
but right now what you do is when you
use rx you need to import things like
you know from rxjs slash operator slash
slash add slash operator slash whatever
the name of the operator is I think
actually in rxjs 5.5 that was recent
release actually now you can import from
rxjs slash operator so again the library
is moving pretty quickly in terms of
making these fast right
but what we wanted to fix was that when
people would write libraries that would
add operators to observable somebody
else would use that library and end up
maybe not realizing that they didn't add
the operator the library would remove
the operator and then the code would
break and nobody would know what was
going on your code was just not working
so that totally sucked another thing is
with patch operators when you cease to
use them there's really no great way via
build process to ensure that you're not
using the code you don't want so you can
still use patch operators but under the
hood what what Ben has done in the
latest release of Arc's
is basically you know you you can still
dot chain operators patch operators and
that's what I showed you when you use
like dots which map or dot map dot
whatever but under the hood now they're
just using the PI purple operator so
it's probably a technical detail that
you don't need to worry about but it's
good to understand so that you know
exactly why things are changing in the
upcoming versions so currently what
we're trying to help people understand
is that with best practices it's better
to use these new pipeable operators
sometimes these operators are also
referred to as operator functions or
ledyba operators right and what you'll
have with these are higher-order
functions that take the same arguments
as a normal operator and then what we'll
do is we'll return another function and
that function it returns is going to
take an observable and return another
observable and that's sort of the
signature of the let operator which is
currently in rxjs but with all this with
pipeable operators probably the thing
that people mostly care about is that
you will be able to tree shake your
operators now because they're not passed
on to the prototype so that's really
wonderful and it's much easier to build
operator chance because all you're doing
is using functional programming to build
operator chains with these new pipeable
operators so if you're considering using
rxjs with JavaScript definitely
definitely best practices are to start
using these pipe level operators patch
operators where you can still use the
dot chaining it's still going to be
available and I think a lot of people
note are still going to like and want to
use this but again you know if you can't
tree shake your your operators I mean
basically anytime you need to ship
anything to the browser you should be
using pipeable operators so there is a
lot more to come there are so many
amazing things that you can do with rx
just the community is really awesome
it's really easy to get involved
I am currently leading the rxjs darks
initiative so if you've ever considered
joining open-source and wanted to
contribute and sort of get an idea of
what that looks like
the rxjs starts the new rxjs docks is
just an Engler app so it's really easy
to pull down and contribute we're using
angular material to you know for all our
styling and everything like that and you
can always email me or tweet me at
ladylee to find out more information
about that I have a few different
resources here so if you want to pull
down this project and play around with
it you can go to rxjs my github slash
ladylee slash rxjs - tests again if you
want to look at the current official
Doc's not the docs that we're working on
but the current official Doc's you can
go to reactive Xiao slash rxjs we did
use the web speech API so you can do
that if you ever get curious about other
api's that you can play with and you
pull down the repo and you want to test
out things you can actually play with
the Google vision API which is also a
lot of fun
let me see if there was any other
exciting things I can tell you guys I
think all in all in general what we
would really like people to do is as
they're learning rxjs to start providing
us with actually I mean if you just
write blog posts about you know your
struggles with Oryx chess that is really
really wonderful to see and you know
we're happy to promote it within the
arcs jazz team to gain you guys more
visibility and again there just needs to
be more amazing content if you're
another reason why rxjs is so awesome
and people really love using it is
because you have things like our extra
bucks swift arcs basically anything and
that's under the reactive X organization
so as you're working with back-end teams
you know it's something that people with
you know whether coming from Java or X
Jase is something but they can really
understand because a lot of the concepts
are the same and it might help sort of
you know it might help sort of help the
back end in front of teams work a little
bit better so that is all for my
presentation thank you so much for
listening I really appreciate it again
find me on Twitter out lady lead I'm
more than happy to help at any given
point in time and I hope everybody has a
really nice day</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>