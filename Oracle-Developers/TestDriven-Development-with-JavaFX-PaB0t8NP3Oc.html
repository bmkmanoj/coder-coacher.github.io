<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Test-Driven Development with JavaFX | Coder Coacher - Coaching Coders</title><meta content="Test-Driven Development with JavaFX - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Developers/">Oracle Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Test-Driven Development with JavaFX</b></h2><h5 class="post__date">2015-06-02</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/PaB0t8NP3Oc" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">I'm Henry kvass and this is svenne apart
we are both from Germany so I work at
canoe it's a FEMA in company in sweet
tag and that do a lot of you I waited
staff like for example Java fix
development and in addition I have clock
it's called
google.com there iplock about Java it's
stuff like how it to make who you is how
to do enterprise application development
who is Java fix for example hello my
name is Sven also from Germany and I'm
working for the company code centric we
are more or less consulting company for
different projects and some Java FX
projects for example migration projects
why I am saying this well we could start
who is using test if ik not a suffix
JavaFX who is using FX in in production
or home good this is really good because
I saw a few people that say of Java
exported so yeah yeah I saw but this was
a customer that was migrating to a new
Java version from 4 to 5 yes this year
automobile industry in Germany so it
could be a little bit slower yeah
testing whose testing is desktop
applications so and the biggest question
will be how your world tested say how
will test its applications manually cool
you know what no nobody ok so we will
speak about testing basics ok well maybe
I'm a little bit faster if everybody
will test it then a little small
overview about test frameworks and last
night what Lisa
to say testing with CDI and why CDI or
dependency injection was all to see so
what does it mean in this talk we will
divide the testing area in only three
groups so this means unit tests is one
group integration tests on system tests
units yes means what we could do to test
single components integration tests well
we have it but we are not really
speaking about it and susan test is if
you want to test parts of the
application or the application itself
so like UI workflow you will say a
little bit more about it so everybody
knows it
nobody wanted use manual testing is well
everybody knows it you have to make a
test plan you're creating the test plan
updating the test plane after each
release and then testings release in the
early 90s I had to do it by myself quite
a long time then I was really proud to
have a team yes I was a team lead so not
testing anymore and then slowly it come
back because now we want to speak about
continuous integration continuous
delivery so normally you have to test
after every commit and then you have to
do everything again and again so you
will say yeah we don't want to do it so
I don't want to do it but there was a
problem with Java ethics because we hit
in the beginning with Java FX not really
the testing tools for it but after a few
years now we we have some test tools but
you will find two different groups of
test tools one test tool I would
recommend if you are searching something
like selenium is coeptis
it's a test tool that is quite nice you
have your own IDE you can create test
plans subscribe it you can't just swing
as we T Java fix everything
sometimes mix so it's more or less nice
but you have to
a before you can use it around 2000 euro
per developer so the other thing is you
have no j-unit approach so you are
starting your developing your
application and then you will start it
and then you will say okay now please
let all the tests running and then well
you could see what happened from this
approach you have different products
something like frog logic and a few more
but we want to go more or less to
component testing or a little bit more
to the developer friendly testing
frameworks there was one testing
framework in the o liter of early Java
fix versions is called jamia fix it's I
think the latest version of it was for
Java FX 2.0 I checked a repository a few
hours before and the last community was
two years ago so it looks like there's
no activity and it's not developed
anymore so the next tool I found on my
research and try to move it was automate
on there is it's written in groovy and
it's well it will be developed but it's
only for Java FX 2 and it depends a
little bit on the JDK you can use
because it must be expected Java 7
update 55 or more and not after 8 update
11 why is it automate or or automate on
because me tonight you said automate or
no automate only I copy/paste from the
origin of all page so this must be right
so yeah forgive me if I'm pronouncing
some things not really it's the right
way so but the interesting thing is on
the homepage from automate on there's no
recommendation because if you want to
test only Java FX and Java FX 8 please
go to traffic's so you could read it
there it is interesting if they would
develop it a little bit more because you
could test swing and ethics but only FX
2 so the next what you
good find is Marvin effects Marvin
ethics is developed by a and it's nearly
the same like Tessa fix so the same
approach it's the same way of dealing
with this and there is some difference
between Tessa fix what we want to see a
little bit more detail soon so you have
supervisors on Java fix properties so
this means you have a Java affix
property you could create a proper
property supervisor then you can define
rules and the interesting is here on the
third line under rules you can say okay
I will press a button three times and
the property will change from A to B to
C then you will attacked with a part you
want to test and after this you could
check if everything was right so the
good thing is Tessa fix is on a heavier
development and we decided to feature
from Marvin a fix - yeah what my great
- Tessa fix so what you were reading or
listening about Marvin ethics hopefully
soon you will find in Tessa fix because
we will decided to merge both projects
so Tessa fix itself it's really under
active development sometimes yeah every
few days a new snapshot and for all the
people that are using Java seven days in
long term support branch so you could
use this and some features we'll be back
ported not all depends on the difference
between the two Java Ericsson Java
fixate but there's a long term support
branch you could use this and the active
branch is only for Java 8 so this means
so with SAS effects you can verify the
behavior of such ah graphics
applications but not only the
applications really good thing is that
you can test single components you have
a single special button created and then
you can test only this button you don't
have to bootstrap the whole application
all the time for every test and then you
can go to every component test
Pendley then you can put all together
this I will show you later how to put
different components together and build
a hierarchy of tests and you using a
fluent and cleaner API you will see it
in his examples my example later
and if test stuff is not really enough
you can work with rancorous and you
develop your own testing rules if the
test will fail immediately terrific's
will create a snapshot or a screenshot
so after you have done 100 tests and
three tests are failed you have three
screenshots so you could see with your
log files and what you could see it's a
test because the test itself are running
a little bit faster so that you don't
have to worry 10 hours so this means we
start with the tester fix deep dive he
will know present it's a first example
okay so who is already using test
effects such a few persons okay so maybe
for you will this won't be new but for
all the others it will remain
I hope so interesting so yes think we
have this example yes it's just a
dialogue we got got in dialogue whose
username field and password field and
they work in button and we want to test
this dial or quiz test of X you can do
something like this so this is just sort
of code test of expose solo code so you
can set okay I want to click into the
text field then type Steve in it then I
want to click into the password field so
the text field was a user fee that's
called test text view and then I want to
type the password
Duke forever for example in the password
field and then I want to click on the
login button the button default and once
this is done you can check anything like
a third if a node exists or something at
set okay so let's start step by step how
to do this when working with tests of X
all your unit test classes must extend
the GUI test class this an internal test
a fix class and for every test that you
provide or for every class that contains
tests you need to extend this class I
get shown in the example yeah and once
it's done you can simply use the test
annotation from j-unit and watch your
test functions okay so we want to test a
UI so there must be a part where we can
inject our UI that we want to test or
start our UI is that we want to test
into the test of extroverts and into our
unit test so therefore the GUI test
class has a method that you need to
override its get root node method this
method will return the UI that you want
to test so if you have a maybe you have
a complex application that you want to
test and you want to test a work we also
go from one page to another this will
return the root node of your application
that would normally would be the root
not also seen graph when just starting
the application if you for example have
written custom controller and you want
to test only the functionality of this
custom control the root node will yeah
this method will just return your custom
control and in this case only the custom
control will be shown in the test and
will be used for the tests okay and once
this is done you can yeah just write
your test and therefore the GUI test
class provides a lot of useful functions
with that you can interact with the UI
so here's an example how you can for
example click or type something and so
creek is a mouse click that will be
executed by test f/x
and types that were yes it's like you
type anything on your keyboard and well
you can simply use it all these
functions are part of the GUI test class
and
so there's a few and a pi/2 for this
message so you can yeah just write a
test or workflow in 1/9 and the cool
thing is that they use a CSS selectors
to find components so if I want to click
on a specific button or on a text field
in this example I can use the same CSS
selector that I would use in CSS to
style this text field here to just click
on the text field so what I need to do
is I if I'm using ethics ml I can just
type in the ID text field
in the ethics ml Phi or just type it
into cynic view in Java fix when I don't
want to use a fix ml and just want to
code I only need to say you know text
field set ID and then this idea and then
you can simply find the component and
kick them so sometimes you don't have
this ID or you you have components in
your scene crafts that don't have an ID
but only for example a class a CSS class
or something like that so therefore
there are different ways how you can
interact with a specific node in test
ethics here are some examples so the
first one will click on a node that has
attacked text cancered then you can use
CSS selectors and they you can use any
directors that are out by the JavaFX CSS
API so you can just click on a node so
if you have the not object you can just
say quick node then you can use a lambda
expression too so it's some kind of meta
to find the nodes that you are working
for so in this case you want to find the
cancel button and by doing it so it will
check all the buttons and
for the one where is cancer Martin
returns to this part and we'll be kicked
then you can click anywhere on the
screen wherever you want
yeah the Metra it's mainly this what
I've shown two lines above or you can
just create at the current position of
the cursor so and next to this so in the
short one there you just click on a
specific Java X node so when I have such
test I don't have all the nodes yes
because I just have this get root node
method and in my test I don't have any
node so how can I access the node so
there it's very easy next to the create
method for examples as a scientist at
and who's the fine message you can
exactly do the same s was a quick
message so you can for example use CSS
selectors to find a specific node or you
can use match by using a lambda for
example and Gustav is shown here so this
is a little more complex because you can
you know web find methods an undefined
method so in this case maybe we have
more text fields that are that have the
ID name text field in our big
application and by doing so we can do it
this way now he searches for the Edit
panel and then in the Edit panel he will
search the text field okay so maybe we
will start with some example let me see
what I have here is just a java
application it's just a label and a
button and when I press the button the
text of the game will change so what 70
we will go to another view but so some
things were changed we can press a
button the text will change the
background color will change and now I
want to test this so what I've done I
created a class extent
the test class which one my root note
and then I can just write a test so it
causes a big okay and because I extended
the greatest class I can now just for
example click and I want to click on my
button and when looking in the XML file
the button has an ID it's called action
button so what I do now is I say quick
the action bar so once this is done I
assert that the content of my
application will change so what what we
change the text of the gable will change
so what I need to do next is I want to
be able to check it so let's say maybe
my neighbor not kind it's fine and so
the game has an FX ID - so I simply can
you look and let me see do it this way
and then I say Assad equals I don't know
I can't we don't know the white X so
it's just we are and my neighbor not get
text so now I would start this one
and you've seen what's happened it
appears on the screen my root note and
it clicks button and it says the test is
failing because here it is this is view
to was expect us so it's this is for you
to and expected we are and now I can
change it to this one
come on and when I started again no
sounds good
test passed so that's very quick and
easy example for the basics of test
effects and okay so now I want to go one
step further maybe you have a big
applications that you want to test not
just this small screen and when doing so
you were engine system so no one can
read it it's I don't know it goes
through some tabs and kick some buttons
and do the stuff and after a week I have
absolutely no idea what I've done there
and when I change everything in my UI or
in my workflow this test will be broken
and I said oh I don't know why I
don't understand what's written here so
therefore there must be a better
solution and so as the web developers
use selenium for the test and they had a
very good with solutions called page
objects pattern to anyone no page object
object pattern into so it's a pattern
that is very helpful to test big web
applications and yeah I simply transfer
this pattern to Java a fix and test
effects to test big Java fix
applications so what should we do we
have an application so maybe this is our
example application we have a work for
it's a music player so you can search
for musics and you will see an overview
of all the aisle
then you can click on an album on the CD
and then you see all the tracks and this
CD and then you can create a track for
example and so now what I want to test
this oh when the track is being is the
right name in the toolbar in the header
and therefore I must quickly quickly
click do all the stuff and when I change
everything on my tests for so by using
view of objects pattern what will you do
you will define a class for each view in
your application in this case I created
four classes it's a search view object I
have a few object the directory object
and the preview object and in this class
in this classes I define the
functionality of the windows or the yeah
I don't know workflow steps for example
song in the album's view you can open
album by clicking you can check the item
count and you can assert that a specific
album is contained in it so this could
be done in the album's as it should
pieces overview and not no album to you
but so that's type of that can you do in
the overview and so then in a test we
could you know just causes methods to
test it in this case all the quick you
click and check and find controls will
be inside this message that's the first
step and the second step is that all the
methods should return the view object so
all the methods and void methods they
return itself so this or if by doing an
action like open I boom we go to a next
view it will return the next view and by
doing so suggest we look like this so I
say hey I want to search view then I
want to search once against I want to
open a black market and then I want to
check the tracker on also selected
eyeball and this test is simply
goes through all this pages in my
workflow and we can weed it and so if I
change anything on the I don't know
search view I just need to go into the
search view class and change the stuff
there
okay I will show the example let me see
where it is here it is
okay so I hope I have a Wi-Fi because
this application needs some Wi-Fi
okay this is application and now I can I
don't know such here we have all the
tracks I can click on a track and I can
play it working okay no I want to test
this so I don't want to why to test no
because that's what would take too much
time but I prepared to test already let
me see it's here so what I've done I
created all this view class as you know
and here I have what we've seen on the
slides check track count sort contains
tracks create for example when I created
and all the stuff and this is just my
test and I just for example is new
search will search wise against all
album the black market
check check out or selected islands so
and now I want to just one test for for
example and as you see is it working
right you can go step by step through
the application okay so there are yeah I
call it the object pattern because I
think page object pattern doesn't fit
for a desktop application you don't have
major say so okay
now we want to show you how you can test
some specific application frameworks we
have some examples the first one is
start effects in data it may be some of
you who have seen
Jonathas enterprise talk or the Dada fix
talk you have can defined flaws in dart
effects so by doing so you can define or
you can project your workflows just in
the code by defining these flaws in the
code from Rio to view and air we
recreated an extension for test effects
to simply test that have X Wells and so
this is actually this test that we have
seen is using this extension because the
application is coded by using data fix
through our API and now our test just
extends the flow test and what we need
to do is just instead of returning a
root pain we need just return our first
controller class and the data fix
bootstrap and test the fix bootstrap and
everything else is done automatically so
you just need to say okay this is my
first patrol aware and just want to
start my workflow and everything else
will work automatically I won't show a
demo again because we have already seen
it okay next part is injection and in
data if X you can use dependency
injection and yeah so we have this
iTunes data model in the example it
whenever I search for an artist it will
call to start West call in a background
sweat and return the data when I test
normally I don't want to do this Westco
so I don't maybe I I have a big server
was you know productive data and all the
stuff and my tests shouldn't destroys
the saw I don't want to test versus west
core and what I can do here is so in
that I've exists annotated as
fluoroscope sources who knows CDI okay
so in in CDI you can inject data into
your controllers and you can define
scopes for examples of your scope
defines that an instance of
iTunes data model will with for exactly
one floor once the flow is finished the
object will be automatically destroyed
and what we are doing now is okay we
just say we want a test data model and
this extends our iTunes data model and
we override the search method and don't
do the west coast so don't call super
search and only up some test data to our
data model and now by using the data as
a test of X extension for data fix we
can simply inject our test data model
for the iTunes data model class and by
doing so anytime we're an iTunes data
model will be injected or created in our
code it will automatically use a test
data model so by doing so I can simply
shut down my Wi-Fi yes he's the
injection so lesson method in the in the
flow test in this test of experience
where you because get an injector and
can simply inject your test starter this
is a test model where I add some when
stuff and when I start the test and I
don't have Wi-Fi we will see exactly the
test data and not all the data that we
will see you in calling iTunes okay
that was example and so the next one
will be after burn I fix where we've
written some tests with this framework
and so when will show it okay so why I
would use dependency injection so there
is a main Commission we have to to think
about and we have different approach is
hard to realize dependency injection one
very one framework from atom beam it's
called afterburner if you
it's quite nice to understand what you
could do but and not bad but it's only
three classes there are three classes
and with no external dependencies so
with ease you could start depends
injection and I will show you later what
you could do with content dependency and
context dependency injection so it means
with after benefics it's open source you
can use it it's Apache License and
combines F XML you could use and
convention over configuration so he was
thinking about what makes sense or not
and then you could use add inject so
well it's always moving three so he was
really for source code sure is I was I
have to admit I don't know all the
slides so I have to check what's the
next one okay well let's say these
before I show you some source code so
afterburners really active development
so you could find nearly every day in
your commits so it makes sense to check
this repository quite was high frequency
so the interesting is that injection
that he realized because he's done it by
himself
via reflection so check a class F XML
view so you could see how he's done it
so injection is working over different
steps are injecting a service and the
service itself had some inject of the
Alcaraz mint the algorithm has an inject
of whatever this will work fine and post
construct so life cycle is more or less
implemented so you can use this one too
there is only one thing if you're
thinking oh good I have CDI components
already this is not working with
afterburner because if you are using
scopes and producers it's not working
but I will show you how to bootstrap
with CDR completely so no mix mode
between CDI and afterburner but there
are some nice things well
I have to go to my laptop okay
okay so I don't have just being so loud
so who's using afterburn Airfix nobody
okay
well very short introduction yes the
possibility to create a main this is a
plane main so you have a demo view view
I would show soon what it means and you
can get the note out of it bootstrapping
the main application as normal so the
only thing you could go to the injection
framework say okay forget all because
there is one thing you have to remind
always if you're working with
afterburner I fix everything what is
created why I inject is implicitly a
singleton so this means in CDI
you have to declare something that it's
a can you give me now it looks like that
that you try to give me okay
sorry okay good
so in CDI it's not only in this way that
you have to declare singleton with the
annotation at singleton and this is if
you're not doing this here it doesn't
matter
afterburner will always create
Singleton's so half this amount if you
are working a little bit with
multi-threading for example so the
application itself is quite easy you
have this view the view is extended
always from F XML view if you are
checking here what's going on I only can
show here it's all this FX I'm a loader
stuff so how to bootstrap this if you
are interested in or I could explain a
little bit more after the talk come
through me we can have a deep dive to
this code but for this presentation it's
okay you have a view X and F XML fear
you mustard with the same you have a
second class demo presenter so there is
a naming combatant present and view this
must be well in the demo presenter here
you could use normal XML annotations to
get your graphical gooey stuff inside
and you can use inject
fine so then you can do all this stuff
so if I will stop this it's more or less
a small application not very interesting
but I can show you a few things you know
it's quite big so I have this button I
have this label you could see and if I'm
pressing the buttons and the service is
used so this injection and smallest
working by the way the whole source code
from this what I'm showing you will be
available on github so I will give you a
while so you can play everything at home
again and see what's going on okay
the interesting thing is now you have a
dependency injection framework and if it
is working with Tessa fix I will share
it so for example you have this test and
by the way I switch from dark towards
this normal theme and IntelliJ is not
switching this part here so it's not
configured by myself sorry for that so
after burnout so I have this test so
there's the interesting thing so I have
the normal thing the thing what you have
to do is you have to get the root note
out of your afterburn effects
application in this case is get view
from the component and then you can
write as normal your test find something
and assertive snob nor verify house
whatever so you can describe this test
normally and it will run so this means
using afterburner fix with your F XML is
not limiting the test framework itself
oh I think it was so far that nobody had
seen at all yeah well in the middle it
will appear and so maybe and yeah so so
it's it's fast but it's good that it's
fast as was here thinking too many
things so well give me a slice back
please
with just a second it would take you
longer yeah I'm speaking quite fast
otherwise people are sleeping okay here
we are okay what's up so what I wanted
to show is you can use this small
framework it's nice you can remove
things from the static semantics so the
dynamic semantics but only on
bootstrapping so what's not possible is
here that your switchings implementation
on runtime dynamically saw the service a
also his be injected depending on some
status but you can do this because
Chesapeake's can work with CDI too but
the interesting here's why we want to
use CDI and now we are coming to the
really interesting part because we want
to use marks but this means marks at
which state the main thing you have to
think about is that in your production
code you never want to have anything
that shows you that there's test code
well CDI you could do it quite easy and
now that wanted what you have but maybe
not for everybody is really necessarily
something like dynamic reconfiguration
so what I will show you now is a cascade
of marks will work in the same way with
dynamic reconfiguration now it's for me
terrible where it's sorry so this means
you have an algorithm that is working a
huge amount of RAM but it's very fast
and it's injected as a service and then
you will see that the main available Ram
is not really the memory will not fit so
that you can't create more instance then
the system will tell the context change
now I will inject with the next request
the same implementations that are slower
but using less ram so this means that
you can actively react on the system or
whatever so if something will change the
user world conflict something this you
can do with CDI CDI makes sense in
different ways for mocking and testing
and for dynamic reconfiguration and your
application so what we have is normally
a pain in thought a pain we have a
normal controller and then the
controller will use its service so far
fine but the service itself can be build
up with different components so there is
no so you can do it in this way that one
service injecting service subservice ABC
imperiling or you can have something
like a service will use the service and
the service will use in different
service so it doesn't matter in which
order we are doing it so I will show you
what you could do if it's injected
service believes it injected service
will use another injected service
because we have I will show you first
normal normal example so that we know
the application a little bit and then I
can show the user CDI examples the main
thing is I want to get rid of this new
service to get and inject my service so
we can do it in two ways I can show you
the plain of FX demo if you say no I
understood it I can switch immediately
chooses CDI version but then I can go a
little bit deeper who want to go a
little bit deeper to the CDI he was
sleeping for what airplane F XML well
one what were you doing with him well
come to it it's the same but then I can
go more in detail and I think it's well
I I could a very fast way so let you see
what what I'm meaning with different
thing so this afterburner we have done
so what what we want to have is a plane
of XML and the interesting here is that
now I will show you how we have
different components a main pane and in
the main pane
it appears oh we have different
controllers and some boring staff with
all this loading is inside and base pain
so this you dummy
the main pain will only bootstrap in a
normal way so that you can say okay I
will say the interesting thing is
remember in the next example that we
write new main pain so we are using the
default constructor and I will show you
how you could use normal the default
constructor but we'll get a normal
bootstrap CDI beam okay so this is the
thing what I want to show and the only
thing is okay well compile compile
compile not sleeping okay we have this
here and we have the main button this
from the main pane and if I'm clicking
here you see there's a label that is
incrementing this number and here and if
I'm pressing the edit button then this
is switching so I have different
hierarchies and different things that
happening and now how to test it the
interesting thing is that I want to test
for example first the Edit frame itself
so what I could do is say okay give me
an edit pain only a part of application
and then test in a way we have seen and
well click on assert and so on this is
quite nice then with the main pain you
could do the same one layer buff so you
would say okay I have a new main pain
and then you can start with your tests
the interesting here is that you need
for example at one point what you
recommended level so that you can say
give me the Edit pane and then work on
the label because someone who's
developing the Edit pane will say the
label will have the name or the ID label
and the developer of the main pane will
decide oh the label could be easier I
could have said ID later great so we
have the ID a few times so then remand
that you can go down the hierarchy to
get what you really want to have so you
can cascade all your tests and
and increment all your stuff so this is
fine the thing here is that we will have
a business logic and then soon we will
go to the CDI stuff so I think the main
problem is clear you have main pain you
have added pain your four main
controller you have added controller and
the main controller you have something
like inject your edit pain and this is
important to know because if you want to
have here a CDI bootstrap component it
must work in this way so you need the
thing how to bootstrap in beam with the
default constructor and then inside edit
pain controller as small as the same
uses normalcy normal ethics components
and working on an injected server so we
want to get rid of this one because we
want to use CD ions a smoking stuff okay
so I think so please meet now we have
the server and it's a normal way people
are thinking about is if I want to mock
a server or want to test something I
will mock everything so the server that
is using a service that is using a
service you you're mocking everything if
you are using mojito or implying things
you have to do all this bootstrapping
stuff for yourself but think about what
could be if the main service will be a
mock but it will in a few steps use an
original service that you mustn't mock
and this service will use a mock service
so this combination of different things
in the middle of something marked or
something in the middle is freedom plain
so how to do it in a way that you don't
have to reconfigure all the stuff and
explain everything by yourself you can
use CDI for this this is quite nice
because first we want to divide have in
mind every time protection Mountain test
code must be completely physical divided
one thing is in the test source path and
something isms of production thought
paths but how you can do it you can use
a qualifier from CDI to
you have an entry point to switch after
this because with this qualifier here
called my qualifier you can write it
once in your source code and you don't
want to switch it because you want to
test so this means we are using
producers at inject my qualifier and
this must fit to a producer with my
qualifiers or CDI knows that this
interface I'm using there to get an
instance I will search for producer and
then it fits from interfaces to
interfaces and qualify the qualifier
this combination must be there and then
CD I would say ok if I want here
instance of this interface I will use
this producer and in thises you have all
this stuff to create an instance of the
implementation so this means there at
this point it's this producer here's a
chance to decide if you want to have a
mock or a special implementation or
whatever but please don't think about
something like this it makes no sense I
see it quite often so you have a pretty
assay you have everything decoupled and
then you have something like please this
is a production production implement and
then oh here please use a mock so you
have the mock in your production code
makes no sense so don't do it please
never but how how we could do it so we
see di you have one interesting thing
the most people are using CDI by using
qualifiers in a static way he was using
qualifiers in a dynamically way he knows
annotation later maybe wrong pronouns
was my German accent oh okay so that we
could use this means inside we deciding
which implementation I want to have and
then I have a producer with a static
qualifier for example production and
another producer that's using qualifier
mock so now I have produce and the first
step with my qualifier this is okay I'm
in
business logic and going through the
producer and now I can switch between
all the scenes and inside this producer
I have to decide which producer I really
want to have these could be done and I
will show you source code how you could
do it so okay so what we can do here is
okay take the clock a few minutes okay
and I will hurry up
so the main thing is that you have a
producer for the business logic it
normally looks like that you have an
interface and it's a good thing with CDI
is please annotate with something stupid
so that this interface is not in the
default scope otherwise weld will try to
create an instance of it that's not
working not with Java it was default
inferences and default methods please
don't try so just his business logic you
have your implementation and inside your
implementation you have the next
qualifier for the next service so if you
can combine it here it will say I have
the producer for this implementation
what cell and the interesting thing is
it fits to this qualifier and it will
start so what it will do it will say
please resolve the context the context
our solver is something I implemented I
will defuse as a well from the open
source or project but the main thing is
here the resolver will decide projection
or mod mocked code and you can't ask
something for example the easiest way is
you have a single an application with
boolean's that says mocked yes or no and
then you can say okay if it is marked
please try to use different thing a
different annotation little so this
context was over giving you this
annotation little annotation interval is
something like I well I will write it
here
annotation that are from something
for example Java one 2014 or play okay
and each a new one and this is more or
less an implementation of this qualifier
from this thing I can create an
annotation later are typed and now I
could use this in the same way as this
one and this makes sense because now I
can go to the bean manager and will give
him this or the instance of this and
then it will work in the same way so now
I can create dynamically qualifiers and
with this you are able to switch between
implementations so how to say the main
thing what you could do now is inside
your test business logic well on the
source code level it's I don't know why
it's dark sorry so you have the same
thing here you have the business logic
mocked and crude user that is working
with this so you have here in the test
code the mocked version and you have
here's a production in your production
source code in the test it will look
like this that you have a main paying
test and here you could know right away
so you would say okay create musing
sense then check the normal test we have
done before and then at some point you
can can test everything is working well
but you can switch the come turn where I
have it I've no idea where of it should
look yeah mock test call it mock use it
as milk so what you could say is okay
create in a normal way your component
and what I mean was context is you are
getting your normal context doing
something with this and then you have
something like for example it's the
easiest way to do it it's a
and say okay now he was a business logic
mocked all the business SAP logic mocked
and then the system will switch
internally so the main thing here is
that you could switch in such a test the
different mocks
okay but I think we can only to show
what's going on this means okay okay
this means I can show you the source in
detail it's a little bit much for this
stuff but the main thing what I want
that you remember is that you can switch
and then if you have a different way of
different servers mocked and not marked
you can activate different pathways so
you can say okay the first version is
marked the second one is real and the
next one is real and anti-sway so you
have all combinations between mocked and
not marked and the nice thing with CDI
is it will checks a cloud path and maybe
you don't know that the service that
they has a mock available for a mocked
mode so someone else will create a
service and will make sure that there is
a mock version available and you are
using it without knowing that the is
there so you can activate it and do it
okay well I can show it here with with
the log file I think that time is done
so if someone will see more layers of
repositories all the source codes you
can check and feel free to ask me more D
or for more details so that I can show
the bootstrapping code itself
Thanks and who's interested in the view
objects pattern or in the talk in
general I've uploaded all the three I'd
also talked to scratchy and at gooey
ganache there was an article I posted a
three minutes ago about the view object
pattern so there's everything that was
shown in the first part of the talk you
know how to do it
stuff so okay yes oh by the way do you
know this one it's a very good jolly fix
book you should buy it okay any
questions it's otherwise follow me on
Twitter I will give it to you which you
are from the block of the first one get
up sure can you can you read it perfect
so you you had a question so we you've
won a book good yeah you can only if
you're ready for Java 8 you can so you
can decide if you want a Java 8 annex
book or if you want this awesome
Java's expo but I think you already
bought it so it would be okay if you
take to the Java 8 book in this case oh
that's an another question you want to
book - odd question
well it's a what under ITAR headless I
hate Christmas
so no at the moment tests of eggs
depends on the hwt robot so and for
Marvin ethics I've created a sin Robert
we are and had an implementation based
on the hwt robot and Java fix robot and
I think with Java 8 update 40 years
there will be some new stuff for
embedded devices there's something in
prison or class and who is this you can
do start Java X hat yes and I think from
this point you can use test of X hat yes
but I think there are two blocks post
actually on the weapon you google test
have etc so you will find it and they
create was I think was it was Java 8
update 40 and they needed to change some
stuff in test ethics and then they had
healthiest tests and so it will come but
at the moment it's not there okay thank
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>