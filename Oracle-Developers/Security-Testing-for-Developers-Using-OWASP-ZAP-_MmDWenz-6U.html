<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Security Testing for Developers Using OWASP ZAP | Coder Coacher - Coaching Coders</title><meta content="Security Testing for Developers Using OWASP ZAP - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Developers/">Oracle Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Security Testing for Developers Using OWASP ZAP</b></h2><h5 class="post__date">2015-06-02</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/_MmDWenz-6U" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">my name is Simon Bennett's and on here
to talk to you about security testing
for developers using our SAP I'm the old
SAP project lead and I work for the
Mozilla security team so my plan for
today is to talk about initially why you
should I think you should be using SAP
then give you an introduction to that so
you know a bit about it then talk about
some of the different ways you can use
that and then I want to go into a little
bit of detail I want to talk about the
API and the scripting or there's loads
of things that can do so I can't go into
detail on everything and then I will
wrap up at the end when you can ask
questions but if you have any questions
that can't wait please just share them
out before I get started I've got some
questions for you it's always good to
get a better understanding of who I'm
talking to and where you are so first
question is show of hands who here is
heard of us before sue Kent
oh that's good ass better than I
expected and who's heard of SAP before
this Nutter oh pretty good as well and
who's actually used SAP well that's good
because then the presentation is
hopefully pitched about right and who
here does any security testing and
development oh good
and who thinks they do enough security
testing development yeah a trick
question ok right so I'm going to start
off with this position which is that you
cannot build secure web applications
unless you know how well how they will
be attacked and by that I actually mean
how you pretty much know how you have to
know how to attack them I cannot be use
the example of imagine trying to build a
castle in the Middle Ages without having
an having any understanding of siege
engines or sapping techniques or
anything like that I just don't think
it's practical now before you start
getting bit to stropping about some
security guy coming to tell you how to
develop applications before Mozilla made
me an offer I really couldn't refuse I
was a developer for 25 years been
writing Java
web applications pretty much since Java
came out so start on jdk 1.0 and i
developed web applications all kind of
infrastructure so middleware sort of
applications but they were applications
that I would describe most describers we
like called rugged now what they had to
be they had to perform they had to scale
I had to be secure they were used by
banks governments phone companies
apparently some of my software and up
and nuclear submarines even though it is
that wasn't actually related to
munitions or anything like that so I
didn't claim to be a performance expert
but I knew how to make my code perform
I didn't claim to be a scalability
expert even though made sure that my
applications did scale pretty well skits
very Lim linearly and I thought I knew
enough about security until one of my
applications was pen testers and I found
out I didn't know as much as I thought I
did so I really started off from the
position that you know I didn't know as
much so I needed to and therefore I
wanted to learn about it and that really
came about from that and I think we have
various problems as an industry one of
them is that most developers know very
little about security
hopefully that's changing a little bit
but no I had actually know that zero
security training at all let go for
another question how many people here
have had it any security training that's
getting better that's really good but I
still think most developers don't know
enough about security and you'll find
that you know that will be okay if
companies had security people security
specialists who come in advise at all
stages development but most companies
don't have enough and you can then pay
for outside experts to come in and they
cost lots and lots of money and that
means what happens if you do security
testing at all it tends to be really
late in the development life cycle so
you get to the stage and we see it all
the time where you have the pen test a
couple of weeks before it goes live and
there are loads of issues found and then
the company has to decide whether you
actually delay launch
well those issues are fixed and it there
fairly if they're endemic then it could
be a significant rewrite or you have to
go live with those issues neither of
which is ideal and it's not a decision
that companies like to make and I find
it's kind of strange because imagine as
developers if we said okay we've got a
you know we've got all the functionality
we want for the first phase and you know
it's in there we're going live in two
weeks and it works really well for one
user we want it to scale to hundreds of
thousands but the performance guys can
sort that out they got a couple of weeks
it's no problem or the usability you
know it does everything should do but
it's horrible but yeah the use of those
people they'll sort it out in a couple
of weeks we don't do that but for some
reason we seem to expect that that's
what can happen with security so my
proposal as part of the solution is to
use a tool like SAP in development and
that's very much where Zap started I
actually wanted a tool that I could use
in development so that I could fix it up
find and fix a lot of problems before
they got to that stage but on to stress
that it is not the full solution it's
not everything so you need security
training secure development lifecycle
threat modeling there's loads and those
are other good things and hopefully
there'll be other seen some other talks
about these kind of things as well so
what is that it is a tool for finding
vulnerabilities in web applications it
is completely free and open source
there is no pro version there never will
be a pro version it's ideal for
beginners that's my claim anyway so I
was a beginner in security when I
started working on it and it's got quite
complicated after MIT but we're still
trying to make sure it is an ideal tool
for people learning about security but
it's actually used by professionals
professional security pen testers picked
it up very quickly and originally I
described it as the security tool for
developers and lot of security people
picked me up on that saying no we use it
too so I change that tagline but it's so
it is used by professionals and that
means that you know there's a whole load
you can start using it and get some
benefit out of it and you can stick with
using a very easy way but if you decide
you want to learn more about security
and getting involved
but this is a tool that can grow with
you there's a load of stuff there you
can make use of if you have the need and
I still want it to be an ideal tool for
developers I think it's ideal in the
development particularly for automated
security tests which I will talk about
later and it's becoming a framework for
advanced testing there's loads of fun
things we can do some which I'll show
you as well
it's included in all the main security
distributions like Carly and you really
shouldn't believe online polls but I'm
still gonna make the most of the fact
that it was voted the top security of
2002 love 2013 by tools watchdog org
readers and that's one of the main sites
for tracking security tools and that
actually covered commercial as well as
open source tools I said you shouldn't
believe these things but hey and the
clicker Briggs
and the slides Brooke excellent yes
wonderful your PC right a problem that
needs to restart this is a excellent and
it would help if it did actually restart
we're just collecting some error info
and then we'll restart for you nor
percent complete and we try the hard
boot great so while the PC restarts and
I restart a whole load of stuff that was
actually running on there I will try and
tell you try and remember enough of my
slides to talk about them while this
carries on so Zack is a tool which is
designed to be easy to use it's a fork
of a tool called Parris I don't know how
many people here know that know about
Paris so that was a very simple with
simple security tool and a tool that I
liked about a play around with it
because what I want to do is I wanted to
learn about security and being a
developer I want to play around with
security tools to see what they did so I
played around with various security
tools and found tool called Paris
downloaded it tried it out and I liked
it
and it was a tool that was written in
Java so I could actually see what I was
doing and I could actually go in and
make some changes cutting quite alike
how it did things and what I found was
as I learned more about security I
wanted to explain to some of the other
people I was working with from the
developers and the QA people and I
started talking about security in
general things like the earth top-10 for
those you haven't if you haven't heard
about OAuth do have a look at it's the
open web application security project
and two great resource so everything's
open source and we try and make sure
that it's all about making security
visible to you making it visible to what
developers the whole company basically
so I started teaching people about this
and one of the first questions I got
from
developers and QA people is well how do
we have we do this or testing what tools
can I use because as developers I think
most of us we like tools to play with so
I start having to look around for
relevant tools and what I want to do is
find a tool that was open-source and was
being actively maintained and ran across
multiple platforms and I couldn't find
anything that really fitted the criteria
that I wanted and in fact I decided that
the tool that was closest was actually
the version of Paris that I was hacking
around on my PC yep so it's a so I'm
just trying to get the laptop back up so
the fiddler is very much aimed at
developers and this was something it's a
secure tool which I wanted to be much
more focused on security so it can do a
lot of the things so you can intercept
things you can see what's going on you
can change them but it has a whole
there's a whole different load of ways
that you can use it which I'll show you
if the laptop actually booted so so what
I did it for I disarmed I released as
open source and it actually took off
very quickly and I said it was really
security people who started who picked
up on it released it in 2010 and so the
last version we released was in March
this year and that's had 70,000
downloads so it's become very popular
and one of the things is it's a
community tool so I really want people
to get involved and that's one of the
reasons why I say it's completely free
it's completely open-source it's so that
you know that if you do decide to
contribute to it
then there will you'll know that one
we're not going to make any more make
any money out of it and two we're not
going to turn and say well that's a
really nice feature we'd like to put it
in where that would actually impact our
business model through on that to the
pro version that's because we don't have
a business model
five laptops
did have my last one blue screen but
that was as soon as I plugged it in and
this one
let me get partway through a
presentation okay right it's doing
nothing at all so there are various so
zapped it is a tool for finding
vulnerable web applications and there
are various ways you can use it so one
of the way it ways is very quick stop
yeah we could have a play with that Sid
Castle right so we have a kind of
point-and-shoot option which is a Quick
Start tab and what you can do is you can
put a URL in there and press attack and
what will happen is zap will run what we
call a spider so it just crawls the
application trying to find all the pages
and then performs an active scan so this
is actually actively attacking so this
app can work in various modes we have a
passive scanner that runs all the time
so when any traffic goes through zap you
can actually see the request responses
zap can see those and it just examines
them to see what's going on and we
actually find some vulnerabilities just
on that basis passive scanning is
completely safe it's completely legal so
that's fine we have a an active scanner
as well and that is not so legal unless
you have permission to test the
application so it's great it so it is
your own application or as company a
application is supposed to be testing
then you're allowed to use it but please
don't use it on any sites or
applications you don't have permission
the ways that zap tip the way you
typically use app is first of all you
need to explore the application and I
said one way is using the spider so have
a traditional spider which just goes
through all the responses looks at the
links and essentially just crawls the
application and that's very good it's
very fast the trouble is it doesn't work
so well for Ajax applications where
you're generating a whole load of you
know all the buttons and everything from
JavaScript so for that we have an ajax
spider and that will actually so it uses
a another tool called crawljax which is
selenium so
she's a browser and then go through it
actually just clicks on everything so
that is much more effective with Ajax
applications but it's slower I would say
it's actually more effective if you do
it manually so the best way is to
actually proxy your browser through zap
and then explore the application so
that's so that's a good way very good
way particularly getting started so the
QuickStart tab we just put the URL in
press attack that runs as that runs a
traditional spider and then runs the
ActiveX scan and that's great but it has
limitations obviously it's not so good
for Ajax applications and the spider
doesn't put sensible values in so you
know if you had come across a page which
there's add a new user and it just puts
X Y Zed in or whatever and the
application comes back and says please
use an email address well it's not going
to recognize that whereas you user will
actually see that and put X Y Z W X Y
calm and you'll expose more of the
application so how effectively you crook
explore the application is is key really
but despite us work effectively fairly
effectively so you can use it in proxy
mode and there's various you've got a
couple of oxygen options of how you
configure your proc your browser to use
a proxy you can actually go through all
configuration which is fine and that
works we've got another development
called plug and hack and this means it
makes it much easier for security tools
and browsers to work together it works
at the moment is just Firefox that
supports this we devote to them as
Mozilla security team but it's
completely open-source and it's all free
and various other tools you're using
this as well so you can just click on a
button and you'll get prompted to
install Firefox add-on as long as you
okay that then it will configure Firefox
to use the proxy correctly I will also
import your the Pfeiffer B's app
certificate as well so view because if
you want to intercept HTTPS traffic then
you actually have to have a root CA
installed on your browser which you can
do but it's just a little bit of
fiddling around so plug and hack will do
that for you and that actually generate
the certificate dynamically so you
won't have the same certificate as
anyone else so what you can do then is
you can then explore the application and
then that'll you can do that manually
and that will then show you as you can
clearly can't see on the screens
it should builds up a cites tree so tree
representation of your application you
can see all sorry could you actually
combine that we just selenium and set up
tests for each browser if you've been
looking at my slides before that shhh
yes but no it's actually great because
here you're reminding me about what I've
got to talk about so it is good vision
so yeah but please ask more questions
between because I'm almost certain well
are definitely forgetting things which I
should be talking about sometimes I'll
bring you along printed things so I can
go through and I didn't this time
excellent so so you have to remind me
where I was
sigh tree thank you very much so build
up sight tree and we have a history term
history list as well and you can click
on any of those entries you can see the
requests and responses and then zap does
a passive scanning in the background so
find vulnerabilities that you can see
just by looking at requests and
responses and those then become
available to you when you actually run
the active scanner that's when zap does
actually all the attacks and that's a
thing which is nasty and that will then
you will find a whole set of other
vulnerabilities so we will cross site
scripting SQL injection things like this
and the one things app is incredibly
configurable so there's loads and loads
of options we try and have all the OP
the sensible option set but they don't
work for your particular application
then there's lots of things you can
change and one thing I do recommend is
you do configure that for your web
application and I think a lot of specs a
lot of people don't do this but it's
quite important because there are a lot
of things that it's useful for that to
know about things like anti CSRF tokens
now if you know what they are have got
time to explain but please have a look
at them but and addy cross-site request
forgery tokens zap will recognize
standard ones but if it doesn't but you
know I've used non-standard ones you
want to configure that to use that
actually I've got some slides on a here
can't do any demos but it will try out
to recognize it
like way around
we just run them off that
if you could pull up the same if you go
Yeah right I will go back through the
slides because there are things I missed
which won't matter because there's a
load of demos I'm going to show which I
can't I'm not going to talk you through
them so there's the overview the thing I
missed off was the laptop crushing so
this laptop is now started
so I think of got through all that right
soon as that principals so I mentioned
it's free open source and the fact that
I kind of stress that and there's no pro
version is because I want to encourage
involvement it is cross-platform because
it's written in Java so it is easy to
use that's one of the things we're
trying to we think is very important
there are some caveats is easy to use
for a security tool and these things are
never straightforward but we think easy
of use is very important we try and make
it as easy to use as possible it is easy
to install you need a JVM version seven
and that's it it is fully
internationalized which is unusual for
security tools but others belief that
you know tools shouldn't be just
available in English and my language
tools are pretty awful but I you know I
think it's really important that it can
be localized and I just couldn't bear
typing raw strings into into code that
just felt wrong it is fully documented
now again there are some caveats the
documentation is written by developers
so it could be better but we try and
document everything and I think this is
important because one thing I value ate
a lot of open-source tools have done the
past and I always looked at
documentation early on just to see I
didn't want to use it but I wanted to
see it was there so that I've actually
found a tool which is really useful and
I knew I'd get beyond the basics at some
stage I want to know that was
documentation I could refer to if
necessary we try and make sure it works
well with other tools because we know
that isn't the be-all and end-all and we
try and reuse well-regarded components
as well because I think that's you know
rather than reinvent the wheel of is
something really good out there we can
make use up we try and do that and we
actually try and create components that
can be reused as well in other tools
even competitors tools so some
statistics I mentioned it was released
September or September 2010 and here the
last release May this year and has been
downloaded more than 70,000 times it's
being translated into over 20 languages
by over 100 translators which is
something I'm really pleased about but I
do get the feeling it's probably mostly
used by professional pen testers I can't
really be sure
but I have seen someone saying I was
just a Paris for I did some quick
calculations and I reckon that about any
about 20% of the code is Paris code now
it's up to the other 80% is app code and
that's just the that's not either
libraries we use that's just the code we
include it is counted by I don't know
how many of you know a site called Ollo
so this tracks open-source projects in
these counters very high activity so
it's right up there with the Linux
Curlin and Firefox probably not that
high but it's in the same category
anyway it is the most active us project
and I claim is actually the most active
open source web applications security
tool and there once contradicted me so
it must be true apparently we had 27
active contributors last year and
somehow they worked out it's 329 years
of effort that seems unlikely to me but
that's what they say so I mentioned some
typical SAP use one exploring your
application so that's where you're doing
it manually is best but things like
using the either the traditional spider
or the Ajax spider we might come up with
some the other way as well in a bit so
the passive scanning runs automatically
the active scanner you have to tell it
to run and that's the one which you
should be careful with than only attack
things you allow to attack and do we do
recommend you do some fine-tuning
because just to make sure it works as
well as possible with your applications
and you know you can for manual tech pen
testing this is something obviously that
pen testers do you might know what I do
that but it's actually quite fun to play
around with these things and that's how
I learnt more about security and I I
think this app is a great tool for
learning about security so you can use
the automated tools but we want to learn
more there's a whole load more at things
there which it can do so what are the
things you might need to configure one
of the things start with things pages
you might want to ignore so things like
a logout page you know if you've logged
in when you're proxying via zap then you
don't want that to crawl and then log
out and then we'll be I'm trying to test
an orthodontic ated because it'll
probably hit your login page the whole
time but you might also want to
configure duplicate pages as well I did
a scan of a website
mozilla ash i can tell you what it is
it's a marketplace there's a scan of the
Firefox marketplace and it took 13 hours
that's a bit long so I'd looked into why
it was taking so long as she wrote a
blog post about it's a whole lot of
different things the main thing was
marketplace the database is a
data-driven application so there's a
whole load of pages which are actually
exactly the same just different data
behind them so it's just--come stuff
coming out from the database so we were
actually attacking all these different
pages because the same code running
behind them so it's pretty pointless you
only need to test one set of the code so
what I was able to do is actually write
some regex expressions to Xavier I only
test to sort a subset of these pages and
so we're still getting full coverage of
the application but it went from 13
hours to 40 minutes which is much more
acceptable mentioned the ante CSRF
tokens one things that actually handles
these so what we'll do is when it's
trying to attack forms that have these
it will then regenerate the tokens
because otherwise of your ante CSRF
mechanism is working correctly those
will get thrown out before they actually
could try and do the attacks session
handling we recognized most of the
standard sessions but you might actually
need to if you're using non-standard
mechanisms it might well be worth
checking there's app understands of an
if not tweaking it so they can and
authentication users if you're just
using it in proxy mode then this isn't
so important but if you do automated
testing what you can do is you can
configure that to understand your
authentication and this is actually
really useful particularly when zap
understands our credentials as well
because you can then actually say right
I want to spider or active scan as this
particular user and that will then log
it tell whether you're logged in and if
not logout logged in the right user or
log log out and log in is the correct
user and if your application throws that
out then it will log back in again so
that's very useful if you've got single
page web apps then you can actually do
probably just show it as one node in the
tree but what we Lopes would you can
actually set tells app which of these
parameters there are then zap will put
into a null node
and make their tree much more
understandable and all means that
actually understands the the way the
applications structured and be able to
attack it properly and he'd use only
non-standard separators you want to
configure those as well
so the SAP knows what it should be
attacking rather than trying to attack
things which aren't relevant I'm going
to try and log into this PC just just in
case so some simple use cases I
mentioned the point-and-shoot so there's
the Quick Start tab you just put a URL
in and go from there
and proxying via zap and then scanning
the whole manual pentesting things where
you'd start off with the proxying and
then go on to use a whole load of them
the manual tools then automated security
regression test so that's something I'll
be coming to very shortly and but I use
used to use app as a debugger so if
you've got some JavaScript libraries
that you're using and you having proper
you know you having problems because
something's not working right so you
think something's you know you
something's not being specified
correctly on a webpage when it gets back
to the back end what you can do is you
can use that
it's not my day two days it I wanted the
demo gods are angry so what you can do
is you can actually see all the quests
and responses are going through so you
can see what's going on and you know
hopefully that allow you to work out
what you need to change but if you
actually need to change something then
redeploy well why not change it on the
fly so you can actually change things on
the fly and you can see what actually
works before chained having to change
the code and then redeploying and so you
can do that ended up with HTTP HTTP you
can do it with WebSockets that has
actually excellent WebSockets support
for the best of any security tool
open-source or commercial and you can do
with post messages as well and that's a
little bit strange because post messages
for those who don't know about them
actually stay on the browser
so how's that can intercept them by
magic well we inject some code and
obviously but we you can actually see
things like post messages and you can
change them you can fuzz them door fun a
lot of fun things like that but you can
use as I said before zap doesn't do
everything you might ever need for a
security program so you can actually
include use it with other applications
as well so there is the QuickStart right
I'm gonna see if I can get this going
door dare do it will crush again won't
it
okay I'm not going to skip one of the
steps because I would just show you the
plugin hack thing you what I usually do
is do this first but I've only just
started Tomcat which means you'll take a
bit of delay so I want to make sure it
actually works so what I'll show you now
is plug in hack and then I'll show you
the Quick Start attack so what plug in
hack does it launches your browser now
sir i dint touch it I'm afraid what I
did set this up so that was the best
resolution I could but I'm pretty sure
it's going to go horribly wrong anyway
so sorry about that
so what Zapp does is launch your browser
browser now I've configured Firefox to
music of course to come up with
different profiles if you haven't used
profiles before they're really great
particularly if you're doing nasty
things like this what you can do is you
can create a profile so so this is a
unique profile and do this actually
completely clean so it doesn't know
anything about this app at all but apart
from the fact it's given URL and so this
is a URL to the sap api and what you do
is click to set up and it will detect
that we haven't got the required plugin
you get the option to add it and then we
have a click die
we have an option to configure it and
then we have what we call a scary
warning because you really don't want to
do this honor unless you know what you
actually deliberately done this but in
theory some other someone could use this
to attack your PC so we do want to
enable this site to the plug and hat
provider and that's it so now plug and
hack should have configured everything
fingers crossed yay and what you'll see
now is at the bottom we are actually
getting a load of requests that are
being proxied via that browser so it's
much much easier than going through a
configuration and plug and actual will
do a load of other things as well so you
can actually configure it you can
control zap from the Firefox developer
toolbar do some really fun things there
but just want to show you this so what
I'll do now is I'm going to do the quick
attack
and what you'll see very quickly is the
spider running so that ran very quickly
and now it's starting to do the active
scan so while that's going on I will
show you that here is the tree
representation of your site and what
you'll see is you have these little and
fuzzy icons that you won't be able to
see at the back but they're actually
spiders and what you'll find is that
some pages don't have those things like
the style and if I go back to here I'll
go to home then about us and you'll see
that those little fuzzy icons have gone
so you can actually see the pages that
you've visited as opposed to ones that
slide of it as explored on its own and
so you can actually see when you select
one of these things you can see the
request that was made and the response
that occurred if you then go down and
have a look at the alerts tab this is
where zap shows you all the
vulnerabilities so we can actually see
we had a cross-site scripting
vulnerability and it shows you the
request and the response actually
highlights the string in the response so
you can see exactly where the problem is
and if you want to see more information
you can double click and there's a whole
load of stuff there you can change these
things so you can put in a extra
information if you like but that's
probably more for security people
reporting these issues to developers we
also have what we call the SAP
marketplace so that paz'
is actually very pluggable so we have a
whole load of different things add-on to
include all by default we have a
marketplace as well but I'm not on the
internet so I can't show that there's a
whole load of extra add-ons you can
download and one of the advantages of
this is things like the rules we use for
scanning they are actually defined as
add-ons and that means we can push new
add-ons out at any time so there's a new
vulnerability something like the the
bash bug we've actually got a new rule
for that which he pushed out on Friday
and you can configure SAP to pull these
down in automatically and you can then
do that if you're doing that's part of
continuous integration you can actually
you know you can scan your application
one day then we will publish a rule then
next day you can pull that down
automatically and then find the
vulnerability without having done end up
without your application change just
because we've got some more rules and
detect these things and of course I
haven't actually started my presentation
on here
so let's slide about some proxying voice
app now one thing I should have pointed
out is right-click everywhere so that
might look you know there's quite a lot
going on but it actually loads more
things you can do and one of the things
is right-click so then you have a whole
load of options like you can spider URLs
or subtrees you can attack URLs and
subtrees you can do force browsing on
things as a whole load of things and
actually if you highlight strings in the
request in response then right-click you
have a whole load of options there so
highlight things click on things just
see what happens it's a it's a tool to
explore really on the fine tuning what
we have is we have options loads of them
if you have a look at any particular
some of the main tabs things like the
active scan you'll see a little icon
down here a gear icon all those one at
the top as well and this has loads and
loads of different options and we have
more options particularly around the
scan policy so this is a mixing desk
icon here gives you the scan policy so
this shows you all the different rules
the active and passive scan rules and
you can set thresholds so thresholds are
the level at which different
vulnerabilities are found so if a low
threshold it will report more potential
issues but you might have more false
positives if you set a high threshold
then you'll have less false positives
beer I've some more false negatives and
we also have the attack strength as well
and we have a low strength and basically
that it's the number of requests that
each add-on can make typically to each
parameter so so most of the rules attack
individual parameters on pages so
something like low level is something
like half a dozen attacks per parameter
per page medium levels something like 12
high level 24 and we've got an insane
level as well do not try and attack a
large application on insane level it's
really for when you want to focus on one
particular parameter then you can go to
insane level now we'll do hundreds of
attacks on specific add-ons now you can
just define the the strength and the
thresholds at a high level so apply to
everything
or we can go into different dividual
categories and change them but we have
to actually go down into the individual
rules and you can say right for this
particular rule I want to set the
threshold or strength and that's really
useful if you're finding some rules
aren't working so well for your
application and things like you know if
you've got it
SQL injection well if you're not using
SQL you know you haven't got a database
in SQL database there's no point in
scanning for these vulnerabilities
pentesters either doing black box at
testing they won't actually know what
they've got there you do not where
you've got there so don't bother
scanning for vulnerabilities that can't
happen so you can actually tune these
and to turn off a whole load of rules
that don't apply to you and you're
finally getting some false positives or
false negatives thinning checks change
of strengths and the threshold to make
sure works properly as well as it can
for your particular set of applications
so regression tests I am a fan of
aggression test surfing was when I was a
full-time developer regression tests are
great because you know that you don't go
it passed the regression test therefore
we can ship what you know but they give
you that warm feeling that you haven't
completely messed up so regression test
really great in continuous integration
so you can have a you know situation
where you have your server then you've
got your build tool like ant or maven
and driving something like selenium
driving a browser Firefox of course
apparently there are some others and
draw a ton driving your server so you
have your functional tests in this kind
of its environment anyone here got that
kind of environment yeah reasonable
number great so and these are really
good and what would really like is
security regression tests the problem
with security aggression test is how do
you know it's test you know you are not
assuming you're not security people and
these quite a lot of knowledge and it's
really you know you can put these things
in but most companies I don't think have
security they don't got security
regression tests pew excellent but a lot
less than doing rip them
regression tests but what we can do is
we can actually convert these
insecurities regression tests simply by
proxying your requests your functional
tests through zap and then that drivings
at the Zap api directly so we have an
api and this is really powerful it can't
do everything that the UI can do but it
can do pretty much all the things that
we think are useful for automated
testing and if there's an if you can
find something it can't do then please
let us know and we'll we'll put that in
there because we think it's really
important and what I was going to do is
actually going to demo this but I'd need
Eclipse running and that's probably a
step too far and I'm probably running
out of time as well compared with how it
should be so what the hell I'm gonna try
it let's see if this kills the laptop
completely because what I showed you
before there's a little web application
called the budget store so that's a
deliberately vulnerable application that
I wrote really is a training age so it's
something which I use when giving talks
on security testing and using zap and
what we have is it has some very simple
functional regression tests I've got a
build file here and what I'm going to do
so we've got a whole load of different
options and it's not that those file
so the build fire will actually so what
various options are starting zap as a
demon or starting as a UI so obviously
it started one obviously it started off
as a tool a desktop tool actually
pentesters you to use but now we've got
it so you can run in demon modes there's
no UI at all what I'm going to do I'm
going to start the tests with without
starting zapped I've already got a
version running what I'll do is I will
clear the session and I will run this
building workspace don't you love it I
will give it a couple of minutes just
spawn on minutes for a few seconds to
see what happens what up so what I'll do
is hopefully that will then kick things
off
and if it does then we'll see something
happen in the meantime our carrier and I
mentioned SAP works well with other
tools there are a couple of tools I'll
mention there's quite a lot of tools
that use app now one is thread fix in
the denim group which i think dan
cornell talked about yesterday
another one is minion from Mozilla so
these are tools which actually use other
security tools so they don't just use
app they wrap a whole load of other ones
but they're you know they actually
manage the vulnerabilities over time
against your application which which app
doesn't do is that is very much you run
it and you get the results immediately
so we don't keep things so you can
actually see how things change over the
days and weeks and months so what's
going to show the api's oh here we go
all right
so try this one more time
and will happen hopefully yep so Zappa
is eclipse is now has kicked off an ant
task which is the functional regression
test for budget so these are just
running through the subset of functional
tests which I just threw together to
kind of prove a point and what we should
see is there the test of run so you'll
be able to the back sorry
the the functional tests have actually
run which is great but what we actually
did was we proxied everything through
SAP so then look at the site's tree
you'll see which I did clear a minute
ago you'll see there's a whole load of
things and what we're doing now is I did
actually in this particular version what
we normally do is spider the application
after doing the functional test see
there's something we missed I turn that
off just to speed it up because it finds
loads more things takes longer but we
did then is we actually kicked off the
active scanner automatically and then
what you'll see here is a build fail
message because there are a whole set of
vulnerabilities if we scroll up there
are actually a whole set of
vulnerabilities that we ignore because
what we have is a file which contains a
set an XML file which defines the alerts
we want to ignore and you know as
various reasons you might want to do
that you might actually decide these
aren't real vulnerabilities for your
application you might decide well this
the development environment is different
from the live environments we know
that's a that's not a problem so we can
configure these suit to ignore certain
things but then in this particular case
zap zap has found some other
vulnerabilities and that is why the
build has actually failed and I've got
another example file in there which
includes all of on a bit Azul file those
that we'll find on this application and
then the build up fat will pass so all
that means is you can change your
functional regression tests into
security regression tests and you can
fail the build as soon as an unexpected
security vulnerability is found in your
application and that's really great
because it means you know within hours
of checking some coding you can get an
alert telling you in effect that you
forgot to correctly escape one
particular parameter and you find that
very early rather than on a
run the week or so before you're
supposed to go live I said it won't find
everything but it is but it will find a
lot of silly things and you know you
might be a bit you know had all the
proper training and not make these
mistakes but since you bring somebody
new onto the team some who hasn't had
the same level of training they might
start making these mistakes and you can
find them early on and have a quiet word
with them or make sure they have the
right level of training so it's really
great to find these things as early as
possible so what I do now is talk to you
a very little bit about these API so
there's various ways you can access it
you can if you're proxying through zap
you can just use HTTP cards such as zap
or you can put in the IP address and
port if you're not proxying through zap
and we have various api clients as well
what I'll do is I will show you the UI
and so this is a a very simple UI which
is generated by zap from the API so what
you can do so all the components and the
the API is actually automatically
generated so we have various classes
within zap which define the API and
that's AB so things like the the Java
client and all the other ones are
actually code generated from this so
they're actually step make sure they
stay in step if you have a look at
something other core component then you
can have a look at the site so what we
have is within the API we have views
which return information and we have
actions which do things and we have
other things as well which don't fit
into those so we can actually see the
hosts and you can see we know about to
host localhost and Safe Browsing but the
API because it sort of auto-generated we
can generate the output as Jason as XML
or we have a very simple HTML version as
well and that just all you have to do is
change one element of the URL you can
see things a little bit more interesting
so you can actually have a look at the
the alerts and you can page through
these but that's a that's all of them so
put that in XML to make it a bit clearer
so you can get access to all of these
things and I mentioned other operations
so you can actually access the XML full
XML report now one thing I will show you
is in the active scanner to kick off the
active scanner we have a scan action
and what that will do I will just return
okay because this is an asynchronous
operation it could take minutes it could
take hours and then if you go back to
the active scan there is a status
parameter and if you just keep on
refreshing that you'll see the status
changing as it goes through once it gets
to 100 it's actually finished so you can
kick off the spider and get the status
you can kick off the active scanner and
so what the the application that I was
using to control zap was just using the
Java API to kick off the spider the
scanner and then pull back the alerts at
the API actual cope with that file
structure so you can see so you can tell
it which ones to ignore one thing I'm
probably not going to have those going
to do some demo ins with scripting but I
probably have got time now but we have
very powerful scripting interface to zap
and one thing I is good about being open
source is we don't have anything to hide
so all of the code all of the data
structures available to you and all the
scripting you can do within zap has
access to all of this information which
actually very useful and we support all
the GS are 2 to 3 languages including
Java Script jython and JRuby and
something called zest and we have
different types of scripts so we have
standalone scripts and these run when
you just when you you actually want to
run them and what I'll do so we have
this scripting tab here we have a load
of scripts we have a load of templates
as well so we're going to stand alone
and look through a history table I'll
right-click create a new script and then
I can run that and that's your looping
through the history table and as you can
see this is just a JavaScript thing so
you can change anything you like
we have targeted scripts and these are
ones who actually run against things so
we find a targeted script so I'm going
to find it finding the comments create a
new strip from that and you'll see we
can't actually run that directly you
have to go to the site's tree and say
right click and then you can invoke with
script and get a list of all the
targeted scripts
so you can actually say you can
essentially pass parameters to context
to the scripts we have active scanners
and passive scanners so these are
exactly the same as the coded ones and
these are particularly useful I think
things like the passive scanners so if
we you know they're very simple you can
put simple reg X's in them we've got
examples of how to use them so if you
have some particular standards of your
company and they'd have to be security
one there could be simple things like we
have to have a copywriter and about link
or something on every page where you can
actually put a passive rule in for this
and it will then find it for you okay
report is a security vulnerability but
you still find out about these things
all of you find is a particularly
vulnerability that your application is
you know it can be can occur then you
can write an active rule if you actually
need to do something in order to trigger
this we have proxy rules and these run
in line so every requests and responses
that makes will run through these inline
scripts and these can do anything and
they essentially changing things on the
fly so are there some problems of your
application or something that it's cool
you know you can just change anything
you like we have authentication scripts
and these will have to handle complex
logins so we have options for very
simple that you know through your form
based logins HTTP logins all these
things will support but if you have
non-standard logins got lots of pages
got to click through then you can
actually do very complex logins through
this and we offer input vector scripts
as well so the input vectors define what
SAP can attack so if you have very
non-standard data structures that you're
returning or is that understand quite a
lot bay there's things that doesn't
understand you can actually write your
own input vector ones to difference so
that SAP can cope with your very
specific cases we also have this thing
called zest which I mentioned very
quickly and this is an experimental
scripting language from Mozilla security
team the free and open source of course
the format is JSON which is horrible
but it's not supposed to be written that
way because it's actually designed to be
represented visually and it's completely
tool independent there are some other
open source tools that starting to adopt
this and essentially
we're using as apps macro language and
so and do is I'll very quickly show you
how to record a script so they're
various ways you can crate scripts one
of them is this little record button so
we start recording and just go to our
browser and stop recording and what
you'll see there is we've actually
recorded a zest script so that's what a
zest script looks like it's a
hierarchical structure and if I run that
you'll see it actually passes and this
is kind of you know what does that mean
in this context but what we do is
odessa's zest is all about requests and
responses and one of the things you know
how do you know a request actually do
what it's supposed to do so we have
things called assertions and we put some
default ones in like status code and
approximate length you can change all
these things so this does actually run
these statements and worked out the
responses are correct which is a little
bit surprising because one of these
requests the post actually included a
cross-site request forgery token and
what happened was when you were
recording that script this doesn't
understand any of these things but zap
understands about cross-site request
forgery tokens and it saw one of them
being generated in one of the pages so
it this assignment here was extracting
that token from the page and then later
on it recognized at the same token was
used so it actually automatically put it
in so we have a look at that post we
will see there is the CSR eft-1 token
that zap put in automatically for you so
this can do a lot of fun things and one
of the fun things it can do it can
actually launch a browser as well which
is you know you can do some fun things
with that and what I've got is I've got
a little script because you can do a lot
of things at this problem where I was
doing a pen test on application and it
was using a site called persona which is
a single sign-on
system from Mozilla and you really do
you do neither browser it doesn't work
otherwise and what I was actually able
to do is create a Zess script which
run very quickly and so we have is
that's the script um and what zest
actually does it launches a browser goes
to persona and then puts you know sort
of semi random address and persona goes
okay we've sent an email to this account
but it's actually mail acecomm account
so this then goes to mail na TOCOM
actually loops around waiting until that
email arrives when the email arrives it
clicks on it and then goes to the site
and authenticates that particular user
so i was actually able to completely
offer automate the generation of single
sign-on accounts that required an email
authentication and then I was actually
able to go on an attack because I could
do one attack per account which was
rather fun but it just shows the kind of
thing so it doesn't matter how complex
your authentication mechanism is Zapp
will be able to cope with it one way or
another so very quickly
source code is on Google code we will
move to github Erwin got the time circle
I'm going to move all the issues and
things like that
I've started a blog series on hacking
zap try to explain how to work out if
you do are interested in working on the
internals got a lot of information on
the wiki a Maga at dev group the next
release is coming soon because it's open
source start to see how things go but
one of the things that has got is access
control testing so we will be able to
test access automate a whole load of
access control tests I'm not aware of
any other tool that will do able to do
what we can do so more on that before
too long
there's be quite a lot of stuff in that
next release but in conclusion what you
need to do apart from make sure your
laptop doesn't crash you do need to
consider security at all stages and
development Zapp is an ideal tool for
automating security tests but it's also
a great way to learn about security and
it is a community based tool so we're
interested in getting involved then
please do
so got any very quick questions</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>