<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>An Auto-Join Network of Internet of Things Devices with a Java SE Embedded Lookup Service | Coder Coacher - Coaching Coders</title><meta content="An Auto-Join Network of Internet of Things Devices with a Java SE Embedded Lookup Service - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Developers/">Oracle Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>An Auto-Join Network of Internet of Things Devices with a Java SE Embedded Lookup Service</b></h2><h5 class="post__date">2015-06-02</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/WbCSrJufFg0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">okay I'll go ahead and get started I'm
gonna do a quick introduction and then
we're gonna jump right into the tutorial
the reason I want to do an introduction
is I want to set up the story that we've
set out to demo and I also want to give
you a little bit of insight into how
Oracle is approaching the Internet of
Things so I imagine just from the topic
that everybody has some notion of what
the Internet of Things really means and
hopefully you guys are already hobbyists
you've got a Raspberry Pi and Arduino
board in your back pocket and you're
doing all kinds of great things why
don't you raise your hand if that
description fits you
awesome awesome well both Hank Ben and I
have been doing this a long time at
least the hobbyist part and what we've
set up to do for you today is an
automotive demo and just to set the
stage I want you to think back to how
you got here maybe you're in a hotel
maybe you flew here from somebody
somewhere else but in the during that
process you're in your car so imagine
you're driving down the road to the
airport to San Francisco and all of a
sudden the engine light turns on in your
car at this point you already created a
bad situation you've got to stop you've
got to have somebody fix your car you're
actually going to be late to your
appointment it's a problem I want you to
fast forward fast forward to the
internet of things imagine you're
driving your car along that same half
but all of a sudden you get a call and
you take the call it's from BMW or
whomever your car manufacturer is and
they say your check engine lights going
to turn on in five minutes we've been
monitoring all of the subsystems of your
car and we can predict that this is
going to happen but don't worry we've
already made an appointment for you it's
on the way to where you're going we know
because you've programmed your
destination into your navigation system
we'll have you in and out in five
minutes
we know usually make it to work by 7:00
not a problem talk to Juan he's here
he's gonna be standing by to receive you
as soon as you pull into the garage now
that scenario totally changes my
perception of driving an automobile and
it's not just a hypothetical this is
what automobile manufacturers are doing
every day now and the idea is that
they're trying to create value-added
services to sell on
of their warranty they call it
predictive maintenance plans this is the
highest margin that an automatic
manufacturer can generate because let's
face it cars or cars the difference
between cars is often price and when
price becomes a differentiator margins
go to zero and that's our problem
so a lot of business talk but I want to
ground this discussion in reality and
this is why Oracle is investing so
heavily in this space so this is about
hobbyists this is about raspberry PI's
but it's also about business that's why
pink Ben and I are actually able to do
what we're doing here today so let's get
started with this presentation before I
jump into it I want to remind you that
everything that we're doing here is
going to be available online if you look
at the
and promise this works no there you go
so if you if you look at the bitly
Blowfish here you've got a URL take a
note of that or just remember this is
the track number this is the session
that you're in right now and if you go
to this URL you'll get access to the
code samples you'll get access to the
PowerPoint presentations and everything
that we're doing here today my original
goal was to give you this on a an SD
card so that you could take it home and
immediately start playing with it but
this is good enough you'll be able to
copy these projects you'll be able to
get started right away
this is probably gonna be old had to a
lot of you but hopefully we've got some
new sensors here and you'll learn
something along the way this is just a
note from our sponsors to keep the
lawyers happy we'll move right on this
so what we see the Internet of Things is
is a problem of managing complexity what
happens is that you get in you dated
with so much information that you start
to get fatigued and in fact
paradoxically the more information
that's thrown at us the more difficult
it is to discern what I should be paying
attention to when we talk about things
like vehicle-to-vehicle which I'm sure
you've all been reading about this is a
real concern type 1 errors because after
a while you're gonna get so in your data
that you just start automatically
dismissing them and some of these errors
might be important the majority of might
just be noise the question is is how do
you identify the right piece of
information to pay attention to give
that due process give that the
analytical thought that's required to
make an informed decision and then act
on that in acting on us the key thing
that's what we're going to show you here
today because if it's just about getting
information analyzing the data this is
just a big data problem what
differentiates this from the rest of the
talks out there is that we're talking
about actually doing something
meaningful doing something that matters
with this information
it's a little bit awkward to keep
walking back and forth so you are we
sure this can't get working or no that's
okay not a problem we see getting the
data as occurring in three phases and
we've broken up the conversation a day
to cover each one of those the first is
acquisition and as you've all known in
your hobbyist efforts the world of the
Internet of Things is not a
standards-based utopia quite yet there
are all kinds of proprietary standards
and indeed for this session today we had
to write custom adapters to interoperate
between the languages that we speak
which is rest and WebSockets in the
internet and proprietary protocols like
Dallas and other interfaces that we've
got to adapt to that's a non-trivial
effort on scale because it's not just
one protocol it's perhaps an entire
building or entire canvas of systems a
canvas is a gateway on an automobile
that all of these sensors are attached
to this gateway is hooked up cellularly
to the west of the world and to
interoperate with the canvas requires a
fair amount of integration work so the
first step is just getting the data
so it's not so awkward yeah so after we
get the data we've got to do something
with it we've got to integrate it with
something else and that could be a
complex event processing engine it could
be rules that we simply written in
groovy it could be anything but the
point being is that we've got to
actually do something with that
information we've transformed it into a
form that we can speak that we
understand now the question is is how do
we incorporate the rest of the knowledge
that we have to evaluate that piece of
information this is key because the
problem of the Internet of Things is
taking an observation something that we
empirically observe for example a new
piece of data in this example we're
going to be looking at temperature and
we're going to be looking at fluid level
level with something that we know a
priori a pattern that we've defined for
example if the fluid level is low and
the temperature is rising we can predict
that something is going to happen for
example the engines going to overheat so
this is key and that integration is what
makes it happen now the most important
thing in this process is that this is
somehow secured and that sounds obvious
but the challenges of security are
different for the Internet of Things and
they are for many of the other sessions
that you may have sat through we're not
worried about securing the data in
transit we're not worried about a
classical man-in-the-middle attack where
we intercept packets and replay them
well we're really worried about the
endpoint is where the endpoint itself or
were worried about somebody
impersonating a sensor and then using
that as a vector to attack a network and
this is not as improbable as it sounds
we've already seen some high profile
hacking incidents where this could
happen and you can imagine the
consequence whether you're using the
endpoint as a vector to attack a central
network or you're trying to attack the
endpoint itself
imagine if somebody were able to get
into your car and deactivate the
automatic braking system that's a big
deal
imagine if somebody were able to take
over a drone and do with it what they
wanted to again serious situations so
we've got to make sure that the endpoint
is able to assert itself and in so doing
that we have some reasonable degree of
assurance that it is who it says it is
and by that I mean that we go through
some handshaking
says that we go through some certificate
exchange where the end point makes an
assertion to a gateway that gateway
again makes that assertion on behalf of
that end point and that in so doing we
can uniquely identify that object that's
key and that can't be spoof able in an
ideal world we would use hardware to
manage this and there are other sessions
out that they talk about embedded secure
elements and other hardware based
approaches where we can actually use
something that's tamper proof on the
board itself on the circuit that we can
use to verify the authenticity of the
end point before we authenticate it on
the network thanks like and lastly we've
got to do something about it so in the
example I gave the end result was a
phone call it could also be an
appointment that gets automatically
generated with your dealer or it could
be something much more automated for
example building energy management
building automation areas that we're
actively working on and you can imagine
that in a building energy management
scenario the time it takes to perform an
action is directly proportional to the
value that that action can by you and
what I mean by that imagine a leak in a
building well if I can detect a leak and
it's pretty easy to do all you guys can
probably figure this out you can use it
measuring electrical impedance so if I
can detect that then the length of time
it takes me to automatically shut off a
safety valve is measured in seconds and
those seconds mean that the building's
flooding interestingly a building
flooding is one of the most expensive
things that can happen even more so than
a fire and the reason for that is
because mold and all kinds of other
things or After Effects and sometimes
the entire building has to just get you
know torn down big problem so if we can
speed up that cycle we can derive
immediate value and that's exactly what
we're gonna be showing today both with
lights so a driver could immediately
identify this is a problem but also with
other alerts for example an operator
providing giving a phone call doing
something with it so last slide sorry
next one
keep coming so this is what I mean here
we have on two axes on the y-axis we
have the business value and on the x
axis we have time and the value of
orchestrating these three processes of
acquiring the data integrating that data
with some other system providing
business intelligence with that and then
providing some action whether it's
closing a valve or making a phone call
is hugely important and if you advance
one last slide you can see here
something that's so intuitive it almost
seems childlike in its simplicity it's
pretty straightforward if we speed up
this cycle if we reduce the time we add
business value and that's what we're
trying to do that's why Oracle is
approaching this because when we talk to
auto manufacturers this is meaningful
this is meaningful and reducing warranty
claims this is meaningful and reducing
the amount of time that you spend
stranded on the freeway waiting for a
tow truck to show up and this is
something that consumers are willing to
pay for even if it's a little bit Big
Brother even if people are gonna be
monitoring your driving habits that's
okay as long as it provides some value
as long as this is somehow anonymized as
long as I have trust and the automobile
that I'm driving then I'm able to make
this trade-off and derive business value
so with that I'd like to jump into the
demonstration we're gonna be walking you
through just such a process and at the
end we'll be able to take questions
after each section we'll pause for
questions and if we have time we'll
invite all you to come forward and take
a look at what we put together thank you
I hope you'll enjoy the next hour and a
half or so I'd like at this point to
turn it over to my distinguished
colleague hanket Wong
Thank You Benjamin again this is the
part where we're gonna show exercises on
the Raspberry Pi and can I ask if anyone
has a Mac Mini HDMI to VGA dongle I need
to be able to protect my my slides you
think that we read the gentleman in a
such as this thank you very much
get right back thank you I'm gonna sit
up that's the yesterday and if I can
borrow that yeah I'm one yeah
wait so we're bringing out the slides
now so let me get to our exercise number
one that coming up okay all right for
this part we're going to install the
raspbian Debian wheezy version and can I
get a show of hands who has developed on
a Raspberry Pi before great you know
couple maybe four and who has developed
java on the out of you four or five how
many people have developed with Java on
a Raspberry Pi okay just a few so I'm
gonna dive a little deeper into this
just so that we we had enough the others
are using Python is that correct yeah or
C yeah okay okay well you see a picture
of the board up on the screen here
that's a Raspberry Pi model B plus and
then model B plus is the latest version
that just came out back in August I
think of July a couple months ago and
what you see are these pins that are
sticking up on the right hand side
they're on the right top edge that set
of pins now is there's a lot greater
number of pins and those pins are used
to interface with Internet of Things
with what's called GPIO ports or
channels that talk to sensors actuators
all kinds of devices that only
microcontrollers used to be able to talk
to now this general-purpose computer
this card can now talk to it and you
could put Java JDK 8 on top of that and
be able to program with the power of the
java programming language so that
altogether makes the Raspberry Pi a
great device for prototyping for
checking out technology before you
deploy to the internet-of-things market
and so that and it only costs $35 so all
that together makes it very popular with
hobbyists and with the the developing
IOT engineering marketplace just because
you can do proof of concepts very easily
with it
we use this internally simply as a proxy
to tense Linux so surprisingly even
though this is a hobbyist device because
it's so easy to use we actually will
test the various binaries of Java
embedded that we put out and we'll
validate that they actually work
correctly with Debian right so you get
it a lot of good support and and you can
see up on top of the screen here on the
slide the very first paragraph we're
talking about the September 2014 version
that version of raspbian already has
installed inside the distro a version of
JDK 8 so nothing can be more easy than
just burning the card of the September
2014 version of Debian wheezy and having
Java appear on your device and you can
see there's a footnote if you look
there's a little asterisk and down at
the bottom of the slides you can also
see oops do this there's a URL that you
would go to and that URL is where get
rid of this that URL is where you would
go to to download the Debian yeah
there's essentially two options you can
download it from the raspberry pi
organization but the great part is that
if you go with the September 2014
distribution the JDK is already
installed so the only thing you have to
do is just validate the version of Java
that you're running that's the command
line statement that we're showing here
right so the interim steps that you see
the sudo commands those sudo commands
are for older versions of raspbian OS so
if your raspberry pi has something
before September of this year you could
still get Oracle's Java by doing a sudo
apt-get update and that will refresh the
registry to make sure that it grabs the
latest packages and then you say sudo
apt-get install Oracle - JP Java 8 JDK
Oh our screen is down
does that mean
now my screens up let's just use this
one please I won't be able to okay and
netbeans yeah I think you hit that
button I'm on number one is that packed
yeah great thank you
so let me get back to her so there's a
URL and that's where you download the
image to burn onto your Raspberry Pi and
if you have older version than September
of this year you would then do a sudo
apt-get install Oracle - Java - date
Java 8 - JDK and that will go off to the
raspbian org website and be able to do a
get and install the correct package for
you so once you do that that just takes
a couple minutes over the web then you
do a sudo - mod + s and that does a set
UID and and how many people have used
Linux before in this room ok a good
number of people so people know what set
UID is this is making the executable a
super user executed executable and
that's needed for accessing the GPIO
pins so that's a quick step instead of
having to do sudo Java all the time or
su do - I interactive all the time so
this saves you an extra step every time
you execute it's just you have to be
careful with security or your set UID of
Java will mean that any java application
will run as root but that's just a very
very small security concern now now that
there's a bash shell shock virus out
right now that this really doesn't
matter because people can use a shell
shock virus to get around anything any
type of security on Java at that point
but but what we have now is a Java that
you can run as super user and to test to
make sure everything went correctly and
you updated and you installed your job
right do a Java dash version and you
should see Java version 1.8 dido and
that's the most recent version that just
came out this past March so it's only
several months old
oh by the way since it's a small group
we'll have questions and answers at the
end so if you have general questions so
you can save them until the very end but
if you have questions along the way that
are pertinent to what I'm talking about
just raise your hand since it's a small
small audience right now what we're
doing with Java 8 which just came out
several months ago as I said is that
there are new program language
extensions and that includes lambda
expressions and if you get a chance it's
a great idea to go over to the regular
Java one sessions on lambda and find out
about these shortcuts and these
shortcuts in the programming language
match what you would see in other
languages right now you might have
worked in JavaScript or or other types
of languages where you could have
shortcuts or more compact forms of your
instances of a class or instances of a
method and to do that over and over
again as a class you get this bloat of
the number of classes in your
application instead why why don't you
just embed it right there in your code
and that's what lambda expressions allow
you to do and so you could do these
little shortcut mini instances of
methods right inside your code as your
programming away and this also saves on
execution time too you don't have to
start up a new class and do a new object
there's also method references which are
related to lambda and that allows you to
do again a shortcut to a method that you
use often you could do that you could
pepper it throughout your code as a
lambda expression instead of putting it
inside a class and then you have default
methods which again it's just implied
that you're going to call that method
every time when you have a class so that
you don't have to repeat over and over
again and then you have repeating
annotations and type annotations and
that for instead of lambdas for
annotations if you're using that in jdk
8 that's a way to so that you could type
it once and have it apply to many
different locations where you're using
an
and that saves you a bunch of time when
you're coding so I encourage you to
check out these types of sessions if you
see that on a schedule if you're
interested in the programming language
side of JDK eight and all new features
there because there's a lot of fun and
interesting things for you to do in the
language itself and to do that on a
Raspberry Pi on one of these $35 boards
is pretty amazing that you have advance
language so instead of doing Python
instead of doing script programming you
could do a more powerful language that's
more modern on these Internet of Things
gateways or these types of small target
boards also with Java 8 we have compact
profiles and compact profiles is more
appropriate for the Internet of Things
market because it has a predefined
subset of the Java code or the Java core
libraries so that you could squeeze down
your footprint to fit on something like
the Raspberry Pi or other target boards
and this allows you to choose a standard
set of api's and those subsets that are
guaranteed to be there all the time for
a compact profile like compact profile 1
or 2 which is equivalent to the old days
of Java ME CDC and allows you to always
know that those API s are going to be
there is just not the full set of Java 8
api's anymore because we're trying to
cut down on that footprint so this
allows you to run the java platform on
smaller and smaller devices now let's
jump into what we're doing here as
Benjamin was talking about if we have an
automotive type of use case what can we
do to set up a Raspberry Pi as a gateway
on your car so that you could pick up
all the different sensors that are
connecting up to your car and be able to
process that type of data in a
meaningful way both locally and globally
in the cloud the first step is to
configure a lookup service and a lookup
service is going to make it easy for
when you attach your sensors or devices
to your raspberry pi
and this lookup service will take an
input that's coming in on a GPIO port or
in on the USB port and say hey do I know
this device that just plugged in if I do
I'm gonna look it up and create a proxy
object and that proxy object is for
grabbing the sensor values off the
device and sending it to a proper
location maybe on the locally there's a
Java program running running on your
Raspberry Pi or up to the cloud where
you could process the data for big data
analytics so that proxy object is the
endpoint communication module and that's
the end goal of what you want to do with
your lookup service and this might seem
familiar to some of the people how many
people have heard of geni technology
before your Oh quite a few quite a few
like six geni technology was created way
back in 1999 before it was known as the
Internet of Things it was just the
network of devices and you know Scott
McNealy and Bill joy at Sun Microsystems
used to talk about that is that the
network is the computer
well that was where Bill joy came up
with the idea of geni technology and
having things plug and play like sensors
or Internet of Things so now we call
that network of devices Internet of
Things it's the same concept if you have
a lookup service and you're connecting
these different all these in liquid
level sensors and accelerometers and GPS
sensors how does it create a proxy to
for you to be able to program to it
quickly of course you can hard code it
and use a seed driver and write in Linux
libraries and native code but that's
terrible because you have to recompile
and recompile and we compile over and
over again from target devices to target
device in Java as you know you have one
jar file you take that one jar file run
it anywhere there's a JVM and it will
run the same way and so that is much
better when you're talking about
Internet of Things that one jar file
means you don't have to rewrite and
rewrite and recompile everything that
you're doing in terms of your devices
your draw
drivers and being able to adapt to those
devices so that's the concept of the
lookup services being able to understand
when something gets plugged in what do I
do with that and how do I let a Java API
talk to that device not not a si
interface or Linux driver but an actual
Java API where you can program
enterprise javabeans you can program
your servlets you can program your
jax-rs restful services to talk to it
and that's that's a whole goal is make
it java aware and so here's a diagram
and a description of that lookup service
if you look at the right-hand side you
can see that there's a network bus and
that network bus is just a concept it
could be just your USB ports that are on
your device or it could be just the
Raspberry Pi itself that it considers
itself a network of all these devices
that are going to connect to it maybe
it's sitting in your car and you have a
tire pressure gauge you have engine
light you have some type of
accelerometer to tell your speed and
some type of abdominus though all those
devices are on your network for your
Raspberry Pi that's sitting in your car
and that is going to plug in as on the
very right hand sizes different devices
that will be aware of your car's
measurements and be able to be accessed
through Java API s and then on the
left-hand side of that bar you see that
there might be a client which is a java
application and that java application
could be something that gets started up
in the OSGi bundle it appears and it
says hey whenever there's a device tell
me about it because I want to start
talking to it and once it gets told that
there's a liquid level sensor or there's
a temperature sensor it needs a proxy
and you see that inside the client
there's a proxy or a device adapter that
is meant to be a communication module to
talk to that sensor and that's all in
Java code and then of course this is all
tied to at the bottom left hand side
there's the JVM a java virtual machine
is taking all that bytecode and being
able to process it so you don't have to
recompile it for from device to device
so when you're running this lookup
service with job-embedded you're
providing an infrastructure for a
service object oriented architecture and
that means that services are going to
show up and disappear depending on when
you plug in and unplug a sensor and be
able to provide that Java programming as
something that another program is going
to use so that's the service aspect of
it is those service objects just pop up
and disappear as needed you don't have
to keep running it and pulling and
pulling and pulling whether that device
is showed up or not you can have an
event based where it can just pop up
when the event triggers that somebody
plugged in a temperature sensor for
instance and then locating those
services to match up one-to-one with the
device to a proxy is done through that
lookup service and so that lookup
service is going to run as a daemon on
your Raspberry Pi and be able to match
those two then those services will will
there's services that run in the
background by themselves and they act as
background daemons and they're going to
also contact the lookup service so for
instance in your home the perfect
example is a printer server if your
printer wants to provide itself to the
rest of the house to your computer your
tablet your smartphone as a service on
this network of devices it needs to talk
to the lookup service and say hey I'm
available for whatever type of java
application wants to talk to me and that
is done also as a lookup service
registration either by unicast
interaction which says hey I know I'm
using this lookup service one way
protocol to register myself or if
there's a somewhere hardwired that you
might have if you're a I am and you put
a lookup service on your car you want it
to specifically go only to your
Raspberry Pi and talk to it so you can
have your services register themselves
and talk to own
a well-known location for that lookup
service so once all of those background
processes or background daemons are also
available for clients to use and the
clients themselves hook up to the lookup
service and say hey I want a proxy
object to the accelerometer hey I want a
proxy object to the GPS and then once
they get that proxy object they get
authenticated there's security that
that's ensure that you have the proper
level encryption on that communication
and that client is often running and
able to use that service like look up
the temperature of your engine or look
up your tire pressure and be able to run
so you can have third parties right all
these client applications using the
lookup service to access all your data
and have it centralized so that you can
control that data you don't have hackers
trying to hack in and snoop on your on
your network in your car you can have a
more hardened way of doing it once you
have a lookup service that has the
proper types of authentication you might
choose os/2 for instance and have all
those clients use oauth2 to authenticate
themselves before they are able to grab
that data so in this day and age of you
know NSA surveillance and all kinds of
bad hackers out there you want to make
sure that you start from the beginning
thinking about security and you don't
tag it on later as an afterthought so
this this whole idea of a service object
oriented architecture allows you to do
that consider the security first and
then you have your endpoint registry
your endpoint registry is the place
where you keep all the IDS of all your
devices that are known to that platform
so it's just like on Windows you have
your registry your Windows registry and
that has all these device drivers that
are matched up with any peripheral that
you can connect up to your Windows
device same in Linux you have your Linux
modules
whenever something appears on your USB
port it knows about it and it says hey
it's that's a mouse so I'm going to use
mouse protocol with it well this is the
same idea but this is for Java instead
of for Linux or instead of for Windows
you do this in the level of Java because
Java VMs run the same way from device
device instead of oh you must be a
Windows machine or you what must be a
Mac or Linux box this allows you to have
your registry move to all types of
platforms and that registry has in it
the type of device so you might have for
instance in our experiment here in our
exercise we have a liquid level sensor
and we have a temperature thermometer so
those devices are in the registry as
different types that match to a proxy
object and those proxy objects allow
Java programs to talk to it through a
Java API and allow it to grab data from
them if if they were just readable types
of sensors if they were actuators where
it was a servo motor that moves a robot
arm then it would be a two-way proxy you
could tell the device and actually we do
have a writable device we have a light
where you could tell the light to turn
on turn off and so you get that two-way
interaction of the lookup service where
you could say hey clients want to be
able to read a value but they also want
to write to one of these devices like
our in our exercise it's the light that
it could write that value to the sensor
and have it make a robot arm move or
light turn on or a warning light flash
on your dashboard so you get that
two-way interaction when you're using an
internet of things with this lookup
service any questions yes
I get this is in terms of the static
model right where each one of these
devices has a proxies are dedicated to
pressure what about a model where you
want to dynamically add devices to this
Creek yes great question yes okay okay
the question was if I understand you
correctly this is more of a static model
where you have a registry that might
have two entries for endpoints it like
in my example of liquid level and the
thermometer that's it how would you make
it dynamic so that it's flexible that Oh
someone next year comes out with a new
sensor of whose sensor it wants to plug
in how would you account for that and
not have to just you know flash the
whole device with a whole new instance
that's a great question people have been
using OSGi to do that for instance you
have OSGi bundles and your OSGi bundles
contact some type of OSGi repository or
provider at a well-known place you don't
want to open this up well you could open
it up to the wide web and have third
parties upload their own device adapters
or device proxies there that's not
recommended in the internet of things
it's it's a little more Wild West for
you know pcs and the Mac and and even
Android where you have no idea there's
no vetting process if if people just put
their proxies up that might steal credit
card information or try to snoop on you
so you want a well-known OSGi repository
of bundles where there's proxies and
someday in the future you might upload a
new proxy there that would match some
type of standard ID that you would use
with your your future probe or device or
sensor that would show up and then the
OSGi framework that runs on your devices
hold on I don't know
this device instead of just error out
and stop and say unknown device I can't
talk to it it would go to your
repository over the web and say hey do
you know if there's a new bundle that
represents a proxy for this object it
says yes here's the authentication
here's Olaf I'm going to encrypt it for
you and send it down to you and then
install it onto your device so yes it's
been done in the past and it fits into
this model that it can be dynamic it can
be flexible if you choose and some
people they like to keep it a black box
you know the utility companies they're
only going to have certain certain types
of proxies and they know it and they're
just going to burn it in and keep it
like that others yes no that's true yes
yes that's right it could be anything
yes absolutely and I think a lot of
people have been thinking about that I'm
gonna stand up a little bit so that I
could get a better view of everybody but
there are thoughts of different
companies controlling that registry and
you know you have to be worried about
that who's gonna control that registry
you might want to start out with your
private registry a private cloud that
would have those endpoints and those
proxies and then you might look and see
if someone's more trustworthy and I'm
sure Oracle will eventually have a
registry of all these endpoint proxies
to then you might turn your attention to
that way instead so that you don't have
to keep maintaining and keep adding them
yourself that that's a cough that's the
big cost is adding it yourself yeah
interesting this is a very deliberate
process the businesses are engaging in
and they're creating silos within your
home and else
where the notion is that everybody wants
to be the hub and so whether it's in
Stan or z-wave or whomever they want to
go in with these proprietary
technologies and they want to be the
gateway the idea is that once they get
in the front door or if then they'll
start adding all kinds of other services
so we are trying to do the same thing
but instead of building the vertical
silo we're trying to make this a
horizontally open platform so that
people adopt Java as the gateway
technology they'll be able to
interoperate across all the
manufacturers whether it's nest or
whether it's NC on whomever it is so
this is something that's very current
and very very real probably for all of
you who are now adopting various home
automation appliances there are a number
of standards but it's rapidly evolving
they're they're open standards like
ZigBee bluetooth then there are
proprietary standards like z-wave like
Insteon over time we sincerely hope that
the number of standards will come down
in scale until that point it's been
coming upon us that is as an ISV to
provide various adapters for the
protocols that are out there you'd
probably be surprised to learn that even
things like bluetooth aren't a single
standard or ZigBee they're actually any
number of them bluetooth for example you
may have heard about Bluetooth Low
Energy or a Bluetooth health profile
there are all kinds of implementations
of these protocols and each one of them
slightly different each one of them
requires slightly different tweaks one
of the things that we're trying to do
with Java is to abstract the
complexities of the protocol of the
implementation to the application
developer so they don't have to
understand these they can simply consume
adapters that we're already providing in
the platform runtime another question
yes
you could you could do that but but yes
the question was don't all these devices
have their own protocols yes you're
absolutely right
they're the reason why you go with the
centralized lookup service is you don't
have to write specifically to that
protocol you you just write to a Java
API and say give me your value and then
there's all these different types of
calls that are being made down in a
Linux level down in the native level
that connect up to this sensor this
temperature sensor or this liquid level
sensor that's all hidden from you
because Java as an API is put on top of
it so that you just worry about that
Java API
yes
No so when you're using this lookup
service model your proxies are all going
to have the same types of calls like get
value get value might be temperature get
value might be the liquid level but then
underneath it it's going to talk a
specific Linux driver to that sensor and
say hey open up DP i/o port read what
the value is GPIO and I'm going to
convert it to a temperature and then
return it to the Java call so yes
exactly exactly yeah yes that's right
isn't he Pinkman sees the term GPIO but
that's just one example of the type of
interface even on a Raspberry Pi
there is pulse pulse width modulation
there's GPIO there's I squared C so
there's these other very low-level OS
drivers that we have to interoperate
with and to your point oftentimes
they're written in languages other than
Java yes C is probably the most common
out there but if you could put a level
on top of it which is what we're calling
proxies in this model the service optic
joinin model that proxy has a standard -
it has getters and setters and and
you're going to look for those
well-known Java style getters and
setters and not worry about all that the
plumbing underneath the talks Python of
talks and Linux driver talks c2 - the
actual sensor that's what we're trying
to do is put a job a live layer on top
of it so that it's more consistent
across from device device and it's the
same it's the same with Microsoft you
know that's what you get with Windows is
Microsoft controls the registry you know
someday there might be some central
repository that's being controlled
somewhere for all these devices and so
here's a little bit of code that would
be very very simple I'm just showing you
that if you're liquid level probe has
not been discovered yet and all sudden
there's a condition that says that that
probe has been connected to your board
and you'll see this during the
demonstration then go ahead and call
join
hook up service and say what the type is
because you've just figured it out this
is a liquid level probe that's on my
GPIO port so I'm going to tell the
lookup service this just connected and
then set your internal discovery flag to
be true and you'll see this later in in
the code as it's running any questions
about that
a sensor hooking up to the lookup
service okay let's let's have to go over
to the code I'm gonna bring up NetBeans
how many people here have used NetBeans
as a IDE one two three four five and how
many people have used eclipse a lot more
whoa a lot more then we see this
condition great yeah so I'm just gonna
I'm a big NetBeans fan but of course you
know I understand that there's a lot of
people a lot of people that really like
the Eclipse much more popular but I'm
just gonna show it's the same idea of a
IDE can you see that those lines I
increase the font so that you should be
able to see that better oh I could just
go up no siree yeah go to full screen
here so if you look at the liquid level
sensor that I just talked about here
there is the GPI ports that in Java you
can access them as long as you're super
user and I'm going to skip over just the
general setup because that's more of a
Raspberry Pi thing and then I'm gonna
jump right here where I'm opening up a
specific GPIO port that I know is
dedicated in my system like if I'm
installing this in a car I might have a
GPIO port for that liquid level sensor
and I know I should go ahead and try to
open it up and when I open it up I am
going to in my event loop see using
these lines here whether the value is 1
on that GPIO port and if that GPIO port
says there is some type of value on it
that means I just plugged in my liquid
and these are the lines that I just
showed you in it slides is hey if the
liquid level hasn't been discovered yet
I'm going to go ahead and tell the
lookup service to go ahead and register
that and join the lookup service and
again as a reminder these code samples
are available at the URL we discussed at
the top of that page and I'll make sure
to update it if anyone has any questions
I'll update it there too and so you see
in the output I'll run this a little
later - there's other parts of it that
I'll have to describe first you see that
the log is showing hey that liquid level
is discovered and joined the IOT network
and so those were the two steps for the
lookup service that we were talking
about and I'm gonna go back to the
slides now go back here
oops let me go not fullscreen again oh
there it is
and good thanks
and so here I'm gonna go to adding the
liquid level sensor and a thermometer
sensors as the next step in an exercise
and this liquid level sensor I'm gonna
hold it off
it's a $39.00 device it's called the II
tape Maloney and it's got embedded
inside of it
a sensor of electrode that measures
resistance so when you dip it into
liquid like water or oil for instance in
your oil tank then it's able to figure
out through the resistance value how
much you have left in there and so when
it's totally dry like this that means
that's a bad thing
you have no oil in your engine and that
should light up alert for you so that's
what we're trying to do in our exercise
so when you plug this in don't try this
with one engine no and and this is just
you know one of these hobbyist type of
sensors is not industrial grade so so
this is not for actual use as Benjamin
is pointing out so when you're doing
this there's a set of steps that you're
going to go through to make it join up
that lookup service that I talked about
and one of those steps is writing your
endpoint proxy object and as one of the
questions was isn't there all these
specific protocols to these devices yes
so you're going to write a proxy object
that knows to open up that GPIO port
grab that value and that value might be
a different resistance for different
liquid levels and be able to return that
value as a Java API Oh API call and
that's the whole job of the proxy object
is to take something from the physical
world a sensor or device translated to
Java a getter or a setter or some type
of method that you can call on that
objects and then you need to register it
as we talked about with
the lookup service as an endpoint object
as an endpoint proxy object then when
the user plugs in that device there's a
unique ID or a unique type that your
program knows that the lookup service
knows about and it will able to say to
the Raspberry Pi I just discovered that
automatically without you having to
program it it will wait for the event to
happen and then it will trigger any
callbacks or any type of listeners that
you have when that event occurs just
just a quick comment this is also part
of the security that we talked about the
outset you wouldn't want to auto join
any sensor because it might not be a
sensor so that unique ID is key to
validate the authenticity of the
subscriber that's attempting to connect
that's a good point so if some hacker
opens up your engine and then says oh
I'm gonna try to plug this bad bad
sensor into your network it won't
register in it the lookup servers will
say yeah I don't know you so that that's
a good way of doing that security that
Benjamin was talking about so let's
let's go ahead and run the program the
program is actually doing other parts to
it but I'm gonna still run it just to
show what happens when the liquid level
sent when the liquid level probe is
discovered I have everything hooked up
here so I'm just gonna go ahead and run
and that's the cool part of NetBeans by
the way is remote platforms I'm running
from this instance of the IDE right on
the Raspberry Pi over the network and
you probably can do that with Eclipse
but I think it's all pretty cool when
it's all together in one and you just
saw it happen it was pretty quick I'll
do it again
I'll hit the Run button it goes off and
connects to the Raspberry Pi and then it
says hey what kind of devices are here
and you could see I'm just going to
point out the liquid level adapter was
the liquid level probe was discovered it
joined up the IOT network it enabled the
proxy I'm calling a device adapter this
is the same thing a device adapter in a
proxy it enabled the device adapter
grabbed the value and then is storing
the data locally and sending it
the cloud and that's the action that I
want to happen when I when that event
triggers so that's just a quick example
of part of the overall program that I'm
running where the liquid level is
discovered and then hooks up and joins
the lookup service okay and that here
let's see I'm going to go into the auto
join lines themselves we talked about
this already so so this is nothing new
it's just the way of seeing if the GPIO
pin has a 1 a value of 1 on it and then
you're gone and join up that lookup
service and next we're moving on to the
temperature probe so this temperature
probe let me hold it up this is a USB
now this is different than the GPIO pins
this is a lot easier to use this is
meant to be used with Windows or Linux
and it also works with with raspberry pi
since this Linux it has a USB plug to it
you plug it into the USB port of the
Raspberry Pi and it's got a probe on the
end that can take the temperature so
we're using this as a concept because
again this is more of an educational
type of sensor or for hobbyists to use
put it in your coffee make sure it's a
right temperature before you drink it
but it's not really meant for industrial
grade if you put this in your car might
melt so you just have to be careful with
this and when you plug it in it is going
to talk to LD USB which is the library
that comes with Linux and it's going to
say here is my USB ID here's my
manufacturer ID it's got a bunch of
unique identifiers that go with this
device and it's using a standards using
USB standard what we're doing is putting
a Java wrapper around that standard -
there's a USB there's GPIO there's I
squared C there
all these all these different types of
protocols that are being used by the IOT
world Java just brings it all together
and makes it just one language one API
instead of all these different things
you have to learn so that again we're
going back to the roots of Java is write
once run anywhere and that's the same
especially with the IOT world when
there's so many different standards so
many different protocols you just bring
it together and unify it under Java and
and it doesn't have to be Oracle it can
be anybody that's writing their own
device adapters or their own proxies and
make that available so in the future you
might see a proxy hub but instead of
github and that's where maybe it's open
source everybody uploads their own iot
proxies there or you know you might
start your own website where you allow
people to upload their own proxies for
the IOT world and make it grassroots
instead of corporate driven so when I
plug this in and I'm gonna run oh go
ahead I was just this beautiful is
already started this project so you can
use bitbucket repository with their
tools I think they only have Python oh
you guys well we're working on that yeah
if they could have all these Java
proxies that we've been even better yeah
just because you know the language is
better that it's more object-oriented
and on and on as if you're at a Java
conference that you guys know about this
and so the the code for this the
temperature probe is a little bit
different you're taking a file handle
that Linux sets up as slash dev slash LD
USB zero and that's the ID that it's
going to get it's not unique but it's
unique to your case where you're going
to plug in this LD USB device and know a
priori that this is your temperature
probe for your car instead of some you
know a mouse or some other teqi board
that you're plugging in to the USB port
so it's there there does takes a little
bit of hard coding in your proxy when
you're trying to match up your devices
if if you're not grabbing the unique ID
and and that's something that I skipped
here is
there is another call if you use the USB
for Java library you could extract out
that manufacturer and the actual device
ID from the usb information and you can
make it more specific so you could as an
exercise for later expand on this I'm
just saying any USB device that says LD
USB zero I'm going to assume is the
temperature probe you can make it a
little more smart and understand that
it's only this device ID that I'm going
to consider as a temperature probe and
then once you do that if it exists then
the code says go ahead and turn on a
GPIO pin and that's going to light up an
LED for for us to see that it's plugged
in or not plugged in and it's going to
register itself with the lookup service
can everyone see those old-school LEDs
there it's kind of hard to see for
everybody but it's kind of glowing on my
little board here my prototype board and
I'll show it to you if you come up later
and you can't see it right now then I'll
show what's going on there a little bit
later too but in a slide I'm just
showing you the actual code so if I go
ahead and go back to e there you go go
back to the IDE running I'm going to run
the program again but this time I'm
going to see everything's plugged in and
everything is going to get discovered
when it runs so you could see if you're
up front here you can see that there's
two LEDs that light up there's one blue
and one green and when I unplug the USB
plug to the temperature sensor the green
LED turns off and that's not because
electronics that's because the lookup
service says I programmed the lookup
service to say when the lookup service
discovers the temperature probe probe
light up the LED when it's it's not
discovered anymore and
I put it in my program that it's
undiscovered I don't know how if
something gets undiscovered it's like oh
forget you know about that temperature
probe then it turns off the LED so you
can see that again I plug it in and you
can see the log lines start scrolling up
on the IDE that hey there's a
temperature probe here I OTO discovered
it I'm gonna join it up with the lookup
service I'm gonna start up the proxy
object so that's all the concepts rolled
into one
as as you can see it's unplugging and
plugging in that's USB and if I do the
same thing over here to the liquid level
probe you can see the blue LED goes off
when I unplug it and then I plug it back
in it gets discovered that's not
electronics that's the lookup service
saying hey I'm gonna turn on this light
or I'm gonna send a text message to the
owner of this car or I'm gonna send a
text message to the dealership that this
guy needs servicing because that LED is
representative of all those different
types of actions you can do because a
sensor has been discovered or is taking
some type of reading and has triggered
an event on your gateway that's key the
LEDs are that exciting they're just a
proxy to another action that we could
perform and it's an example of how this
communication is bi-directional so we're
reading something and then doing
something and doing something is using
GPIO to elevate the resistor on that no
II D okay so let's go to the next slide
and now we're talking about the
analytics so you're getting these
readings from these sensors so what you
know you this is going back and
reinventing the light switch you push
the light switch up it turns on light
you push the light switch down and turns
off the light well there is a big deal
because you could take all these values
that are being generated and it's tons
and tons and tons of values that are on
your car there's all these temperatures
and pressures and pressures of liquid
and levels of liquid that you could
generate just megabytes of data in a day
and what do you do with that well you
could take it and use it for analytics
and that's another part of this
conference is that if you go down to
Moscone Center you could do a lot with
all those numbers if you're collecting
it minute by minute day by day week by
week and you can watch it for trends hey
there's something strange going on with
your tire pressures dropping too low why
don't you check it and add air to it hey
there's a trend going on with your with
the the temperature of your car it's
running really hot why don't you take it
in for servicing
so with that type of numbers number
crunching you could do a lot of
predictive type of analysts of analytics
and analysis where you could say hey
these numbers match up with things I've
known in a past to happen and be able to
to take pre-emptive actions and that's
the big deal is save money save time
save your car from breaking in this use
case and that's what we're trying to do
with analytics both on the device and in
the cloud and I'm going to talk a little
bit about the split between running some
type of analytics and you can run
analytics on your raspberry pi versus
send it to a big data center in the
cloud somewhere and have it do number
crunching you can think of the art of
IOT is is being building a better
mousetrap effectively what we're doing
with all this data is it's coming up
with some way to identify a condition
and then do something when that happens
so--oh the analytics that you're doing
in the cloud are really coming up with
this pattern that we're gonna use for
anomaly detection people characterize
IOT as a big data problem and it is
there's big data there's a lot of
information you could crunch but I think
a more apt description is it's a
fascinator problem it's a question of a
rapid stream of information coming in
and in doing something about it you can
do that using domain expertise by
applying some fit form analysis some
pattern and then determining whether or
not that means the pattern or you could
do that completely stochastic lis based
on the data itself like has this data
changed
then two increments within a given
period is this new reading more than two
standard deviations from the mean and
those types of analyses can be combined
so that you can get a better picture of
what's going on so that's why analytics
are such an important part but that's
why they're not the whole part and when
you hear people describe IOT is purely a
big data problem we feel like that's
missing a big picture dumpy picture
should say okay so as Benjamin's talking
about these local analytics can be used
to monitor these devices and sensors
directly on your raspberry pi or your
target board then you can run java
algorithms and you can write them in
java and not have to worry about python
or shell scripts of not being a rich
enough language to write a complex
algorithm like you might have a rule set
or some type of expression matching that
says if the temperature is this strange
and the liquid level is only on that
range then report a problem and make it
overtime that hey if it keeps happening
day after day for five days in a row
then do something or only when starting
it happens that the the amps the current
that's being drawn from your battery is
reaching a certain level then do
something if you're doing that in python
or a shell script it makes it much much
more cumbersome than just reusing Java
and maybe somebody else has written it
so you could just take a job a jar file
that somebody else has for for when your
engine oil light should be reported back
to the manufacturer and you can use that
instead so there's a lot of advantages
of writing it in Java instead of writing
it in in a different language or just
writing it and C and native one other
quick claim in general you'll hear an
IOT about us talking about pushing logic
to the edge to the edge of the network
and there's a reason for that as well
the edge of the network we're able to
deal with data without the latency of
making a
trip to the cloud that's important we're
also able to do data validation so that
if we're collecting data bad data and
get into the cloud we're able to do
things like data aggregation so that
we're pushing aggregates over a
constrained bandwidth connection as
opposed to pushing raw data a
temperature would be a great example
here if I'm sitting in the cloud I don't
really care that the temperature is 4
degrees now and then two seconds from
now still four degrees you can simply
batch that data or aggregate it in
somehow and there are reasons to do
analytics and processing at the edge
versus in the cloud what you're doing is
you're trading off the scope of the data
that's required to make a decision with
the Expediency that they need to make
that decision quickly so in a
hypothetical world you could have every
device know about every other device in
other words if I wanted to look at the
mean temperature of all of the devices
in the determine of whether or not a
current reading deviates from that mean
I could orchestrate the communication so
that every device broadcast is
temperature to every other device the
problem with that is that you have met
coughs Metcalfe's law working in Reverse
you you have an incredible explosion of
traffic to have every device know about
every other device so for that type of
equation it's better to do this type of
analysis centrally on the other hand if
we're simply looking at not is this
deviate from the mean but is this
meeting some criteria like is it above
four degrees centigrade there's no need
to do that type of analysis in the cloud
it's better to distribute that analysis
and take advantage of the local
processing power because a Raspberry Pi
is actually pretty robust this is like
Pentium 2 great stuff for 35 bucks
Pentium 2 sounds pretty bad but the
reality is a you know for this type of
computing this is more computing power
than the space shuttle had on it so this
is this is this is a good stuff yeah so
that's a good point that Benjamin's
telling here is that the the last bullet
of my slide is that the users notify for
anomalous events that's something you
want locally to happen it might not be
big trends or month
we data that's grabbed from your
neighborhood or your zip code or the
country that the data center is
crunching it's something you want to
know right now that's happening on your
raspberry pi on your engine in your car
so that's the the split of that local
analytics and then here's just the top
part of it is really the code where you
would put that inside your adapter or
inside your proxy you would say hey
there there's a temperature reading of
800 degrees and that's way too hot for
your engine so go ahead and do something
with that data or just grab that data
and put it on to some type of flash
storage that's on your device for your
mechanic to look at later on if there's
any type of problem they can just scan
over it and say oh you know on October
1st it happened that your your engine
warning light turned on and and these
are all your sensor readings on that day
so bogging is another important feature
of local analytics and then there's the
cloud so as Benjamin talked about
there's that split of it's a little more
costly to send data over your network
it's a little more time consuming to go
over and use up that bandwidth so you
only want to use it judiciously and
there's global analytics to monitor
worldwide types of sets of devices and
it may be some deviations from the mean
that Benjamin was talking about that's
something that back at Ford or GM they
want to look at and maybe it's not
something that you want to know about
right away on your Raspberry Pi in your
car so there's a global set of rule sets
to watch are all the cars airbags having
problems and they deploy without you
know getting into accident then maybe
it's time to do a recall so they're that
type of data the corporate data center
would want to know and understand so
that that data could get bashed up and
sent every night at 2:00 a.m. when the
the rates are cheaper to use your
communication protocol and as long as
that happens and that's the big data
analytics that happens in the cloud and
the administrators are notified and they
watch over your car so there might be a
dealership and they might have some type
of service where someone has a dashboard
and watching all the cars and a fleet
and be able to notify and call up a
mechanic and say hey there's one car in
the fleet that might need some servicing
want you bring it in so that's another
helpful way of the cloud help and watch
something like if you're Hertz rental
car if you're aegis and you want to
watch over a wide population of IOT
devices and this is not an either/or
it's both the reality is that all data
is not created equal and some data
should be transmitted in batch form to
really go back i oh t's not new and if
you've ever watched your mechanic hook
up a cor rs-232 serial connection to
your car and download information
essentially what they're doing is what
we're talking about doing here
wirelessly if you think about a car the
type of information that they're
collecting some of it's very important
and very real time even more real time
then perhaps Java in true real time
operating systems for example with the
suspension response when you're going
around a corner and adjust so the car
doesn't sway that's something that's
happening in real time something that
has to remain local to the car you might
want to later collect that data and
aggregate and analyze how well your car
is performing but it's not something
that you want to transmit right away and
then there's other data that is
something that you might want to
transmit for example let's say your
engine is overheating well that's an
urgent condition that you want to
immediately relay that's something that
would be relevant to it's a cloud
operator because then they make that
phone call and then there's other type
of information that might just be going
on in the background for example new
vehicles now are being outfitted with
cameras those cameras are being designed
to detect amongst other things
collisions with other vehicles but they
can be used for other things so in labs
around here in Silicon Valley we're
talking to Adam about manufacturers that
are doing things like pothole detection
so you can imagine part of
my vehicle detects it I can send that to
every other driver and then it shows up
on their navigation system a pothole to
avoid this is an example of IO to biote
for the greater good and says you're
taking and information resource that
were have access to for another reason
and then you're repurposing that and
make it available to everyone else but
they don't all have the same priority
certainly that information about the car
overheating is something that we'd want
to take precedence over a broadcast that
there's a pothole on 280 so again it's
not either/or it's all of the above okay
so let's show example and running in a
cloud of what that could look like so I
have a browser that's going to the demo
and what we're doing here is showing you
a graph in the cloud administrator might
be watching your your car into fleet and
sees this type of graph all of a sudden
and it might be part of a dashboard that
keeps on refreshing so just have it
where it's is just an animated graph
that's in JavaScript here and what what
happens is that it could have a oil
level that's reading normal 100 and
that's the y-axis that you see on the
right is what is the oil level at right
now and then that's the liquid level
sensor that I have here and then all
Senate drops dramatically well that
could be one of two things it could be
an actual bad case that you're losing
oil and boy you should stop and get that
taken care of immediately or it could be
the sensors going bad that's that's a
real possibility that the sensor itself
got disconnected or all sudden it just
went bad and it reads zero when it's
still a hundred percent this is also why
it's key to have multiple sensors that
measure the same thing so for example we
might have an oil level using resistance
and an oil level using a fluid switch
because all the time you're getting
errors with the sensors going bad and if
we screech to a halt and pulled off the
freeway every time something happened we
might be actually exposing ourselves to
additional dangers so that's why it's
important that you actually Val
eight of these errors and having all of
this data it enables you to do that and
Benjamin mentioned that another oh yes
there's a question so are you changing
your oil you're changing that's a great
example like if the car is stopped and
oil is leaking the levels going down
that means something different than if
you're driving the oil is going down and
the temperature of the engines going up
so by correlating those two values you
can start to eliminate some of the
Hawthorne effect it if Benjamin just
took away my punchline hero I'm saying
this orange line is actually the
temperature line and on the left-hand
axis you see the temperatures normally
of a normal running car maybe 262
degrees Fahrenheit and then awesome it
shoots up to six hundred seventy degrees
so those two values which have nothing
to do with each other it's not a float
switch of the same oil which when you're
changing your oil both a float switch
and the liquid level would go down to
zero there's another type of data the
temperature that you can correlate with
the liquid level and say a that's
definitely something bad when two things
are going around two temperatures up and
the oil level is down I'm going to send
a signal to your car to say stop
immediately because there's something
bad you shouldn't drive anymore with
that car so that's just one way of
having the cloud be able to monitor
something in just an interactive graph
like like this where it might be on
administrators dashboard any other
questions yes
because not only dancer shut the car
down you have to do it safely right yes
that's right make sure the brakes that's
right that if you look at modern
vehicles I mean they're going to start
making these decisions for you and you
don't want them to do that kind of
willy-nilly and you know decided to
avoid a collision that doesn't exist so
that's why it's so important I mean you
could also major viscosity which will
increase as the little decreases you
could measure pressure or flow rate so
there are many different ways you can
correlate the data and you can imagine
this in other cases like a cell phone
instead of a car maybe there's these
different sensors on your smartphone and
now in California there's going to be a
kill switch law so you don't want your
cell phone to be killed automatically by
the cloud if if there's only you know
one sensor that's saying hey this GPS
coordinate is in Europe now that's weird
I'm gonna kill that phone you want it to
have multiple reasons why and it might
be you know I'll son that shows up in
Europe of a sudden it's doing major
thousand dollar transactions using
PayPal and shut it down so so that's
that's really good that you have a lot
of data so that you could figure out how
to safely and and gracefully shut down a
system or not shut it down at all for
the wrong reasons I mean the nightmare
scenario and you've probably seen all
the 75 movies you know the 2010 the I'm
sorry Dave I can't do that
the computer thinking it knows better
than you and performing some action so
we want to avoid that wherever we can
okay so let's see how that's done in the
in the cloud in our code and you can see
that in the middle section of this code
here I'm using the example of the Oracle
cloud and if you sign up at Oracle cloud
calm there's Oracle has a 30 day free
trial and one of the trials is for
Oracle storage as a service and that
storage as a service can be used to do
something like upload your data from
your from this raspberry pi and so it's
it's pretty simple the first line you
see here is cloud storage config and
that's really that
comes with the Oracle storage SDK so
it's all in Java you just drop it in as
a jar for as a library and that is your
one call to hook up to the storage
facility as a service up in the Oracle
cloud and you just give it your service
name and you can name it anything it
could be the auto join demo for this
demo and then there's a username and
password and of course this is very bad
programming style where you would have
the password exposed and you don't want
to do that you would want to encode that
and encrypt that and store that in a
safe place and usually you don't put it
inside the same program that you're
going to use it from you would use it in
a different file that's encrypted and
then once you have your packet this is
just for demo purposes so just wanted to
make sure that have that disclaimer here
just make sure to protect your password
you would use the service URL to the
Oracle cloud and then you would get a
connection to get storage and those are
the three lines there that could connect
your raspberry pi to the Oracle cloud
then this file input stream is opening
up a local file that F is here is
pointing to the IOT cloud liquid level
data that's on your raspberry pi and
then you would make one call to store
the object that liquid level file input
stream you want to call it the same
thing up in a cloud called IOT cloud
liquid level - data text and that pushes
it up to the Oracle storage as a service
so that's pretty simple using the cloud
with your IOT device any questions about
that okay so we have one question
whoa I'm sorry what was your question
right
okay so deploying it is related to the
question about the device adapters also
if you treat everything as an OSGi
bundle then you could deploy
applications to your device using the
OSGi framework so that's one way there's
there's many many different ways and you
know companies if you take a look at the
floor and in the Democrats and in the
pavilions you'll find other other
companies that have their provisioning -
IOT devices also but in general it's
there's a framework that's running on
your device it could be a free framework
like OSGi there's Felix which is open
source run it using Java and it is able
to have a life cycle of install start
and stop where you could decide as
administrator when things are installed
and what things are installed on your
Raspberry Pi using that framework and
and I'm talking in in a general term
here but specifically if you have a use
case and you know we could talk about it
more offline but that's in general how
you could provision your software over
to devices but I should say that this
capability to do lifecycle management is
already built into the java embedded
runtime there are different flavors of
the runtime you may have heard about
Java SE invented Java ME each one of
them has their own tools what we're
doing is we've abstracted the
differences between those physical
implementations and a set of
administrative api's that you can use to
simply deploy a new bundle or deploy a
new jar whatever the packaging mechanism
is to the device so there are two
pinkman's point vendors out there like
processed who really specialize in this
and have tools that go way beyond simple
lifecycle management but the basic tools
the basic stuff that we're talking about
here is already part
of the runtime itself so you don't need
to shop around I mean it's it's it's
part of what we're offering so that's a
good point that Benjamin makes it and
you can make all your application jar
files if you have your own way of
managing it without using OSGi then then
encrypt have those jar files code sign
and encrypt when you're downloading and
when you're sending it over and have
some type of security you can make up
your own device management layer to do
that yeah at the risk of saying too much
we're going to be announcing in the
coming hours the IOT cloud service and
the IOT cloud service will have amongst
other capabilities the lifecycle
management tools to deploy update and
decommission devices out there in the
field and you'll be able to do this all
via either user interface that we
provide or via programmatic interfaces
and build your own UI and you can learn
a lot more about that at the IOT
leadership circle event for those
customers who are interested in
attending you can look for the press
release which will be hitting the wire
shortly or you can go to oracle ford
slash
iot and we'll be talking more and more
about this in the coming weeks and
months
okay so let's jump it to the demo and
I'm gonna run it again and let's see
let's make the light and able this time
and enable the light to be flashing when
there's a low liquid or there's empty
oil in your tank in your engine and you
can see it hopefully you can see it
flashing right now this means that this
liquid level sensor is reading emptied
which it is because it's out of the
water right now or out of the oil if it
weren't for your oil tank and you can
see my indicator lights are saying that
both these sensors are operating as
normal
they've been discovered this liquid
level and this temperature probe has
been that
discovered it would be really annoying
under dashboard that question yeah it's
it's still no oil so it's still flashing
if you want to blind people yeah so if I
unplug the this one is the temperature
sensor you see the green light come on
and off so that I'm demonstrating the
auto join and then this one if I unplug
the liquid level that's also showing
it's joining up properly and now let's
see if I could view this I'm gonna put
the liquid level sensor inside the flask
sorry this this is a hydrometer for
making beer I think I can lift some beer
on it so it's still blinking
could be the beer residue
yeah
well I don't think it's it's not
cooperate oh there you go there goes I
said I think it'd need a time this this
is not the most industrial commercial
grade type of sensor but after time it
figures out the resistance is is normal
so that this isn't a normal situation
you have oil in your engine so you
shouldn't see this blinding flashing
light that's happening this is our demo
and this allows you to to see that it's
normal and I'm not gonna take it out
because it's gonna drip everywhere but
that's extent of our demo you could take
a look at the code when you download it
and go over it and see how it's being
read and the proxies that are happening
and the lookup service that's being used
and if there's any other questions I'll
put the contact information on that
webpage also it's a wiki page so I can
update it with any other information
that you would need oh let me go back to
it yeah so the URL is just bitly forward
slash course number which is tu t-62 65
there it is Sir yeah that's the bigger
fish and then that's the part where we
could actually open up for general
questions about IOT Java job embedded
yeah first before we do that did you
find this insightful or our new
information here yeah well thank you for
that wait yeah well I'm gonna take him I
was just making sure there's a comment
about the URL oh I'm sorry that's my
father it's on there you go
flame mode or something okay so with
that questions yes please
that's yeah the question was about the
Apache river project you want to take
that yes so patchy river is the genie
project that has been open sourced and
taken over by Apache I think there's
there's a time and place for that type
of technology that was a more of a
snapshot from back in 1999 of what we
use with for that connections was RMI so
that's great if you know you're gonna
have a Java network of java applications
running end-to-end all the time and RMI
is a little bit antiquated now because
it doesn't work as well as restful calls
so in my example I was using restful
calls between the Genie lookup service
and the proxies and the communications
that it's using to the cloud so it's a
little more updated at Apache River if
you took a patchy River and switched it
underneath the plumbing instead of how
am I to use a restful call then I think
that'll be great I think if if there
were more life given to it it would
switch over to HTTPS and and more common
types of network protocols that are
today's standards instead of back in 99
so you know hopefully that answers your
question I think you could use it but it
needs some updating aggregating
ourselves yeah question
yes you may take that yeah okay sure
yeah I mean they're they're multiple
components of security so what you're
talking about is security of the data in
transit and what we're doing here is not
necessarily addressing the security in
transit the notion is that if we're
already sending the data in this case
over HTTPS
we're already relying on TSO TLS rather
to do security of that that information
encryption of the stream with the IOT
cloud service we're actually going to be
encrypting the data at the endpoints and
then sending it over a secure Channel so
it can't be intercepted in transit
because certainly we wouldn't want
somebody to simply sniff the packets and
then do something with that to some
extent
we're punting because we're saying TLS
is already secure for the rest of
ecommerce and so to the extent that the
protocol will continue to evolve and
update itself then we are reasonably
secure that the data can't be
intercepted in transit so the focus of
IOT that becomes what did we do at the
endpoint I mean that's really the
hardest part about IOT or the most
unique part about the IOT security
challenge is this chain of custody
because if we have a router or in this
case a Raspberry Pi the sending us
information we can have some reasonable
degree of assurance that the Raspberry
Pi is who it says it is and we can do
that because we can download an
application we can assign a certificate
we can challenge the device for the
certificate when it attempts to connect
and there will no protocol it's like Oh
a - that we can use to orchestrate that
process where it really gets tricky is
if there's an air gap and let's say we
had a Bluetooth sensor that was
connected to this gateway because then
we have no way of knowing whether that
Bluetooth sensor that's connecting to
this is who it says it is and that's
where it gets really tricky that's part
of the value of being able to deploy a
Java on the runtime but it's also part
of this security scheme of auto lookup
and of assigning identifiers you don't
want to do this then casually because
again you don't want somebody to
impersonate you and do something to your
car like deactivate the car by the way
this technology is already being used
for example to unlock and lock cars it's
not being used for real-time driving
systems to like lock or unlock the
brakes
yeah I mean part of what we're offering
with this IOT cloud service is what we
call this device registry the most
strong security would be an embedded
secure element like on a device itself
and then the question of changing it
would be going to the administrative UI
or invoking an API call and changing the
ID of that sensor so that we know this
is a trusted element and that can't be
discovered via an API on the device this
is a hardware element there are other
schemes of doing this as well there
sessions that talk about a trusted
execution environment this is a software
execution environment that's safe that
can't be accessed outside of the
interfaces that are already provided to
you that so they're various ways to to
get to harden those of course there's no
guarantees in security I'm very careful
not to say it's secure there's no such
thing as secure yeah what we're trying
to do is is provide relative to security
and the whole notion of doing this as an
orchestrated process ulla notion of
leveraging Java on the endpoint it buys
us a lot more than just assuming that
everybody's nice out there it's gonna
say that you know there's a story in the
past a smart cards where there was that
guarantee oh this is unbreakable and
then someone
took a lectronimo chrous cope and looked
at the actual atoms on the on the smart
card and was able to discover the
pattern of what the secret was on there
and so there there's always going to be
ways of getting around security but if
you if you really want to go hack go to
blackhat and say something's totally
secure and unbreakable
good point any other question oh great
question in the genie world there were
two ways of doing that and now
technology has caught up to have that
happen is that if you have sensors that
have their own flash memory on them and
a lot of times they do they would be
able to upload a jar file and say hey
use this proxy for me to talk to me or
another way is that it has an ID that
goes off to that OSGi repository in the
cloud or someone's website and says hey
this ID is asking me to provide a proxy
for it and then grab it from the cloud
and say oh I'm gonna install this jar
file in this OSGi instance on this
Raspberry Pi and use it to talk to this
this sensor yeah without sounding like a
commercial for Java one of these
strengths is that there's various
runtimes and we're talking about SC
embedded this is a version that will run
easily on a device like a Raspberry Pi
there's also a version called M II which
will run on a device in less than one
megabyte of headroom we can actually run
in less than a hundred kilobytes by
splitting out the ROM and the RAM we
even have a version of Java that's
called Java card that actually runs on
those Bank cards or runs on the sim of a
cell phone that will run in you know
tens of kilobytes so the notion is that
these things are getting smarter and
smarter in this sensor for example has
some compute power you can see it even
has its own built-in LED so we could on
theory through your run a version of
Java on this and to the extent that we
can push logic all the way out to the
sensor edge
the greater degree of security we can
provide in the solution yes there yeah I
have to
well they're not supposed to be a better
well we upload them okay yeah yes
servers
ever service
yeah
that
so two really good questions one about
distributed computing and the other
abouts eventing or how you get the data
off the edge and so I'll take the first
one first it's not at all
cut and dry when you want to distribute
a processing logic all the way to the
network edge I'm writing a white paper
on this right now
that'll be publicly accessible on
Oracle's website and the trade-offs are
the computing resources on the device
and the scope of data that you need to
make a decision in a sense you're
trading off how quickly you need to make
that decision with how much information
you need to do to make that decision and
it depended on the use case there's like
a continuum there it actually follows an
interesting function and the notion is
that if you want to do something like
real time processing and close a valve
you don't need very much information
that should be distributed on the
opposite extreme if I want to do things
like calculate rate schedules for usage
based insurance then I need a lot of
data I definitely want it don't want to
do that stuff locally so there are
heuristics but no absolutes when it
comes to making that equation the other
question which was about oh oh the timer
yeah so there's various ways of doing it
you could have an event based model so
it gets reading and then transmits that
reading you could even create logic to
define whether or not that reading
should be transmitted now or later or
something should happen in between then
transmission you could have a pole based
model where I would go and wake the
device up and there are pros and cons of
doing each one they have to do with
battery life as being one very important
criteria if you think about some of the
specifications out there they're really
designed to make the battery lasts you
know years and years and years and years
there's a B sensors out there that will
last for 10 years on a single battery
and the reason is because it's the
device is sleeping like 99.999% at the
time and so you don't want to constantly
wake it up and say do you have something
for me do you have something for me do
you have something
for me so built into the protocol our
exchanges by which it will say you know
wake up for a very short interval
discover if there's anything new or if
there's an event happening then wake the
device up and do something again no hard
and fast rules really depends on the use
case and the need for immediate data
from the device but the good news is
that you don't just want to take a
one-size approach fits all there are a
lot of different strategies so you don't
want to just have it every you know so
often just communicate because the vast
majority the time it's going to be not
needing to do that it is the most
expensive from both a computational and
resources battery standpoint I was just
going to mention there is another use
case where you pull into your garage and
it knows there's Wi-Fi and there's a hub
or a gateway that you have inside your
house and then your car has a Raspberry
Pi in it it just uploads its data to
that gateway in your house for later
transmission to the cloud and then it
shuts down and says I'm going to sleep
now I'm in your garage and so every time
you pull into your garage it does that
instead of time base its event-driven
that hey I'm at a safe location where I
can recharge now you know it might be in
a Tesla or Prius hybrid where it's gonna
get plugged in it says hey it's a great
time for me to upload to the home
gateway let the home gateway worry about
my data from now on I'm going to sleep a
good example of that would be like
aviation so there are super old
protocols for FM of just modulating the
FM frequency to send binary bits of data
for airplanes that are you know in
flight traveling at 30,000 feet and they
can use that via satellite to get
information that a controller would need
to know immediately like the engines
about to die and then if the plane drops
below 10,000 feet it'll actually start
to use cellular and then when it's on
the tarmac it'll use Wi-Fi so it will
and that the reason is is not just the
bandwidth it's also the power
requirements in the case of a device
that's not like an aircraft work and
generate its own power through version
sorry you were asking a follow-up
question okay go ahead
the Raspberry Pi is finding its way into
more and more interesting places and
even we're using it internally to do
traffic generation for network anomaly
detection for improving quality of
service so it's just marketed towards
the hobbyist or really the education
market was the primary focus yeah that
we haven't deployed this in a production
environment but we've deployed similar
boards from free scale from boundary
devices which have similar processing
capabilities similar processing power a
lot more hardened to a lot more heart
yeah and some of them come in a nice
nice enclosure and everything yeah I'd
recommend for commercial use and this is
great for prototyping so you know
commercial development labs and and
research facilities are using this for
their internal development but if if
you're doing deployment then there's a
place called copy labs that has the you
delight board and the utilize board has
an ARM chip on it that's very similar to
these devices we've run the same Java SC
embedded on the utilize as we do on the
Raspberry Pi but that is a much more
hardened system it's more costly it's
like $240 for one gigahertz quad-core
processor instead which is arm and it's
got one gig of ram so that one's pretty
hefty yeah we've
I believe so these come with the
Raspberry Pi comes with shields that
yeah yeah you can that's right yeah are
doing that was another example of a
hobbyist platform that is finding its
way into more and more places we're
fortunate in that we work with both the
chipset manufacturers like arm and and
imagination because what we have to do
is make sure the binary runtime of Java
works for each chipset and surprisingly
even the peripherals that are attached
to the chipset mean that a separate
binary is required for each one so my
team and Pinkman we are responsible for
Java embedded as a whole platform in
addition to IOT and a large part of our
pain is making java run on each one of
these and then they're also the hardware
manufacturers that will use these
chipsets and then put them on silicon on
a chip and then do something with them
and we will validate that that our
runtime works on those as well so we
have a large laboratory where we're
constantly doing these ports yes almost
no one has adopted raspberry pi almost
all of them have some kind of gateway
and in fact in every car every modern
car there's at least two gateways
there's one that does infotainment and
there's one that does critical systems
and virtually all the auto manufacturers
are trying to figure out how to derive
more business value or how to drive more
money off of value-added services on top
of either the infotainment and
applications that could be installed on
the head unit of the car kind of the
next frontier for mobile application
development or on the telematics side
services that they can put around
predictive maintenance and also the data
that comes from that I've seen how they
can monetize that so virtually every
major auto manufacturer is talking to a
number of players I have the privilege
of talking to a lot of them myself and
they're all doing something so it's it's
happening kind of before our eyes it's
it you'll start seeing this more and
more as cars continue to evolve
interestingly regulation is going to
drive a lot of this progress and so I
earlier about v2v so as that requirement
becomes something that auto
manufacturers have to implement they're
going to embrace this technology for
other means and they're going to figure
out how to defer the cost of doing that
with other services so you'll see I
think the pace of innovation in Auto
happen at a much rapid much more rapid
rate which is pretty exciting because
cars haven't really evolved at all in
the last 100 years pretty much exactly
the same - the electronics other
questions exactly
totally yeah and that's why I said
earlier that we use this really just as
a proxy in our own testing we use it
just because it's so easy to work with
and because it's so readily available in
the laboratories so it's just Lenox so
we think of it as just a flavor of Linux
and most the vast majority of these
boards are running Linux in the
automobile space for example virtually
every auto with a couple exceptions is
running some some flavor of that whether
it's qnx or brew or they're all running
something on top of that couple tried to
run embedded windows like forward that
was kind of a disaster and they've kind
of come around seeing the light and are
not talking to us about Java okay if
there's nothing else then I want to
thank you for your time again my name is
Benjamin Wesson this is Hank Ben Wong
please visit the URL and enjoy the rest
of your event thank you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>