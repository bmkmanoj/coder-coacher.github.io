<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Democratizing Serverless: the New Open Source, Cloud Agnostic Functions Platform | Coder Coacher - Coaching Coders</title><meta content="Democratizing Serverless: the New Open Source, Cloud Agnostic Functions Platform - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Developers/">Oracle Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Democratizing Serverless: the New Open Source, Cloud Agnostic Functions Platform</b></h2><h5 class="post__date">2018-02-27</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/FIR8Uv3_juY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so my name is Shawn Smith honey people
went to the keynote this morning most of
you okay so I won't show you the same
stuff I was on was similar and more
depth about what we showed it briefly in
the keynote and we're all developers
here right so I will I'll go off the
beaten path and you can forgive me if I
screw up stuff but well I'll show you
some stuff that we haven't found seen
before so so again my name is Shawn
Smith I'm a product manager with the
service team at Oracle I'm working on
the open-source FN project and the title
is democratizing surplice I get to stay
here democratizing service and the idea
of being that right now there's not a
lot of options in terms of some open
source around service we are working on
a platform with FN to be sort of surplus
for everyone right so we can you can
take this and run it and review like so
hopefully you'll see that'll be pretty
is pretty easy to do after a effort on
the talk so I mentioned this earlier in
the keynote
right so server list is about not
worrying about infrastructure so I want
to deploy my code to some platform
somewhere I don't want to manage the
hardware I don't want to manage the
virtual machines the network all that
stuff right the experience of using a
service platform is deploy your code or
use a service and not worry about it
right so we have lots of experience
using these kind of things most SAS
applications write software as a service
applications our server list you never
see see it right so if using payroll in
the cloud or using some with Gmail and
whatnot all these the kinds of services
could be the service but you don't worry
about it now if you're building
applications or sort of service
architectures you're basically building
them on these components so using
storage using compute using networking
all these things to build a surplus and
the fads and functions of the service
platform that's the piece that's the
compute right so some way you got to run
your code so we'll look at some samples
of me running code but you got a run
code somewhere on your platform the the
piece of a service platform this code is
visited the functions of functions
component
so a function in our sense is not a
mathematical function right so
mathematical function here is like
Wikipedia there's no presentation
complete without a Wikipedia quote I saw
that then cat this morning headlines
like it's required some how's the
template right put it into Wikipedia
quote but math a mathematical function
has inputs outputs no side effects right
that's basically the story in functions
in a function platform that isn't the
case
they have input if outputs they may have
side effects so you may have a function
that posts to Twitter for you we post
the slack it updates a database it does
whatever right doesn't matter what it is
so so not strictly a function just small
piece of code that does a single task
whatever that needs to be right
you can evoke it and the as a service
piece of functions as a service is all
the plumbing of how to make that thing
run how you run that piece of code when
it's called all that's handled by the
platform itself all right so you just
focus on your code that's really the
whole point of service focus on your
code on the task you're trying to do
don't worry about the infrastructure so
this is a lot easier it's actually kind
of fun so if you saw the demo this
morning you saw it's pretty easy for me
to write a piece of code you know five
or six lines of code hit deploy
essentially and run it on the platform
and have it handling copy incoming call
for turning replies it's really easy so
it's kind of fun I'm kind of easy
I wasn't thinking when I was the
developer deploying that code anything
about the platform itself these are when
you're running in the cloud you know you
wanna take advantage of cloud scale so
you're an officer on a service platform
if you deploy a function to a service
platform and it's very popular
you don't worry about scaling it right
the platform takes care of that for you
so you get to leverage the power of the
cloud without having to invest a lot of
energy and I'll I'll talk about that a
little bit more in a second because
these things are small it's pretty fast
to write a piece of code and move on to
the next piece of code or write a small
piece of code test it try it out
iterate on that piece of code right and
prove it so it's actually a fast faster
process than working on large code bases
just changes the math
of what it's like and then the thing
that the big big thing is the cost so
you really pay for a function call when
you're calling it so typically it's
based on how much compute resource you
use so let's say it's based on memory if
your peer function has allocated 120
megabytes of RAM whenever we call your
function if it runs for one second
you're sort of you're choosing you're
using your charge to believe we're using
128 megabytes of RAM for like one second
that's kind of the compute cost you know
if it runs for two seconds is try to pay
for two seconds but you don't pay twenty
four seven minutes just deployed only
when it's being called and that's one of
the key differentiators of service
platforms over traditional the cloud
native platforms you may have used
before there are still servers right
like there's lots of servers and service
just means that not your servers to
worry about and it's you'd be amazed at
how many people get on to Twitter spats
about things like is FN a server service
platform
well because someone said there are
servers like someone said hey you're
stalling FN therefore there are servers
well of course our service somewhere so
I must go server right there's no
magical pixie that's writing this deploy
code to the outer space and it runs
right there servers several just means
not developers problem or the users
problem right the servers are the
providers problem it moves a bit I love
this this article that was posted about
running raspberry pi or running FN on a
cluster of rabbu pies and again someone
tweeted back
that's not star blessed I can see the
servers in this picture there right
there
and we're like you think cloud computing
ones like clouds no there's actually it
computers right there so again server
list is about your perspective right
your point of view if you want to do it
this is a Bigfoot blog owner on a fan on
a cluster of raspberry pies you could
you can apparently so this the
performance curve or the the cough or
the curve
the hit when your pop when your function
gets really popular is worth this thing
starts or really makes like really shine
so you know let's let's let's imagine a
scenario where I'm building a an
Instagram filter okay so my function
takes a picture
it adds puppy-dog ears on to any picture
so put your kids in there put your your
spouse whatever into this this thing
picture them it comes back to the
picture with puppy-dog ears so great so
you write this thing you deploy it and
then you tell your friends and suddenly
on reddit it goes like viral okay
everyone read it's like oh my god this
is the best thing you should get your
picture with puppy-dog ears so so far
you're sort of you know your functions
being popular but suddenly you hit this
like inflection point where wow
everyone's calling it what's interesting
about function platforms is if you're a
developer of that filter that does that
transform right it's basically input
output image in image out you weren't
thinking about concurrency right you
weren't thinking about inter process
communication you weren't thinking
thinking about scale you're thinking I
have a piece of code take some
input return some output so when you hit
that so the inflection point suddenly
that thing you wrote is being called
like by minds of people you didn't have
to do anything to make that happen
right the platform is taken care of
making sure there's enough instances of
your function available to handle the
calls and just killing it for you
so it's really much simplified developer
experience that's that can take like
this scale that we're hitting with with
cloud scale right it can handle it so
it's a great platform for that where
you're not worried about wow I need to
scale up some more vm's to run my code
because really popular that just happens
right and you don't think about it
so we sat back and said what would be
the ideal functions platform that we
could build and so we have a few things
that came to mind right so open source
right now you'll see if you look around
the cloud world you'll see a lot of
functions platforms or functions
function services they're pretty much
proprietary right so everyone everyone's
got a functions offering these days but
they're all really the proprietary
because there really no standards in
this point so open source will be really
great because if you using some cloud
provider and you don't like they're
there how much they're charging you or
they don't like their service you want
to take your code somewhere else right
so that's it that's I think it's really
valuable valuable option I would like
this to be you know simple or platform
independent right simple and removable
so I can run in my laptop run this in
the cloud the key feature of that is if
I can run the same server the actual
same bits on my laptops I can in the
cloud I have a very good feeling that in
terms of fidelity I know that the bits
that I'm deploying and testing on the
server I'm on is the same right so I
have a very close experience of of local
versus local dev versus production
deployment unlike some platforms where
these cloud platforms are built as sort
of cloud only and you get some sort of
local developer experience this kind of
an emulated environment which of course
is not going to be just like the server
so I'd like something that can run
everywhere an approachable listen so I
worked on cloud native application
platforms before if you know the 12
factor app principles and deploying like
Heroku for example as well-known example
Heroku Cloud Foundry those kinds of
platforms you're building applications
that are constrained by 12 factors you
must stay within a certain prescribed
area so you can build your code you hit
the platform they deploy it for you they
take care of basically containerization
and deployment similar to functions
except that when you try to advance
things you can't write so the simplified
experience it makes it really easy to
play code but we really want an
experience where easy stuff was easy and
hard stuff is possible so when you guys
want to build an enterprise application
do complicated things you can do it so
we really want that to be the case in
the path
we're building we also wanted to
basically leverage docker right so
docker is now you know standard standard
tool for building infrastructure
scalable infrastructure and we want to
take advantage of the doc-doctor
ecosystem but when you're dealing with
docker at scale you need some kind of
scheduler you need something to
distribute those docker containers
across a cluster of machines you have
employed your computing infrastructure
so today kubernetes is very popular this
is dr. swarm mezzos we think all those
are cool we just didn't want to be bound
to any one of them so we really wanted
to be independent of any kind of
scheduler so we could run anywhere right
again it's back to portability want to
run any on any platform in any cloud on
any kind of scheduler so those are the
goals so although although through what
we do that then we can bet we can
basically take the measure of whether we
did it so this is where we got to an F n
so the FN project actually we didn't
start it like from Ground Zero there was
a project at a company called iron iron
Daioh and they had built a project and
open source particle iron functions and
you may see iron functions in the
literature if you're looking at web
sites on server list you'll see iron
functions basically FN is a fork of iron
functions the all the original
developers of iron functions are working
on FN so really FN is the evolution of
iron functions with a few more men years
of effort put into it
so if you see people so you will come
across iron functions and it's do it to
know that the DNA is it where FN comes
from that original project so it's open
source right it's an open source Apache
2 license project you can take it you
can fork it I can do whatever you like
with it you can to play anywhere so you
saw me to play it here on my laptop
maybe in the keynote I'll show it some
other more that again you can deploy it
anywhere I was running it on
digitalocean the other day so I said
digitalocean got a droplet little small
container installed FM server and then
start deploying my code to that to
digital ocean
it's totally reasonable use case to do
it's very small so I really liked Venkat
keynote message this more about
simplicity this is a very minimal
service so again in this sort of open
source world of service there's a number
of different people working on sort of
open source service offerings we have
chosen to keep it small and simple very
focused on server on surveillance on
functions we don't try and build Message
Queuing databases this is not part of
our stack FM sits on top of your
infrastructure talking to databases and
queuing and so on but all pluggable so
we have a very focused goal here
delivering functions containers are the
basic building blocks so we take
function function code we package them
up and put them in dr. containers then
we deploy those off to standard
infrastructure right so docker
communities say you know in to handle
scale it's a pretty simple pretty simple
approach that minimal approach is
actually kind of our strengths right
because they keep it simple we're pretty
busy right a lot of people working on
this right now and we are at the same
time we're keeping it simple we also
have a very pluggable architecture so
you can plug in like enterprise off the
authentication that kind of thing right
so it's very pluggable architecture so
we can fit into enterprise compute
platforms
and again our models very simple you
have a container it has standard input
for your function to read from your
right to standard output and then you
log standard error and we handle all the
the dirty work of how do we call your
code how to scale your code all the
stuff we talked about into the hockey
stick and so on
that's all outside of your concern you
write a piece of code just focusing on
these three things now it turns out that
that may be actually even that could be
too hard all right so we have some some
some helpfully and even easier to build
applications we'll talk about so what's
cool about using docker as a function so
if I yeah so my definition of function
is a docker container that reads from
standard input and writes me the a
response the Senate output that could be
anything right so we need certain thing
about functions and even the demos I
gave this morning I show some go code
I'll show you some Java code but I could
have anything in that container that
effing platform doesn't know what's in
the box right what's in the function so
when we open sourced F N and announced
that okay oh one one of the demos we
gave was scraping images off of Flickr
and running them through basically an
image detection system that our function
they would actually go and find license
plates in the image and another function
that would draw on the image where the
license plate was alright so you
identify where the plate was and those
are all being done with imagemagick so
we weren't actually writing java code or
no code or whatever we took off the
shelf libraries packaged them as
containers put a little bit of glue code
in there to basically standard input
calling the utility and write the output
and now I deployed it as a scalable
function this is really cool right so
because containers are the primitive
whatever you can squeeze into a
container could be a function not just
your custom code and so we have the
examples of doing that but in our world
you know we view containers you know the
traits of a container deploy a function
would be short running so you can
imagine that may come and go right so
then maybe they make they may be created
to service a request and then may be
killed all rights up to the server
doesn't manage this of course being
short running you know they're they have
no file system to speak of right this
faucets and ephemeral is gonna go
stateless push your code push your state
and some other external thing if
containers are coming and going you
something you wanted to persist you
better put in the database or soggy
storage or something like that and
really their focus on one thing right so
they do one single tasks so they only
have one endpoint right only one way to
call a function you can't call it this
isn't exposed like an object where has
four or five methods these functions
have one one entry point one function
exposed so they do one thing and of
course they easy that container needs to
have all their their dependencies so if
you couldn't deploy a Java code you have
a function you have all the jars that it
needs package is part of that and we
have a CLI so this would have a couple
of pieces there's the FN server the
thing that runs your your containers
your function containers sometimes
you'll hear the word funk container I
don't know if that so I can I ever catch
on but anyway funk taters but on the
desktop you've seen using FN use the FN
CLI so if you Hugh if you come to our
hands-on labs afternoon and I think it's
1:45 we'll go through this but
installing FN takes about the basic
download to get started as 16 Meg
alright download the CLI and let's start
building and do an FN and it to create
something FN run and you're up and
running with about 16 mega pound load
and about I don't know a minute or less
testing run some unit tests we have
deploy there's also stuff to get logs
take a look at the calls there's a few
things that the FN CLI will do for you
all designed around the users needs
it really just wraps the REST API so the
FN server has a full REST API we've
wrapped in a nice usable you know
command-line utility but you can
actually just use best calls and add it
to be part of your for your bill to get
a build for your spear up locations all
the functions are exposed to be arrests
or HTTP endpoint so you can invoke a
function via a simple HTTP call so you
can use Carl you can open a call a
function from the browser it's it's
actually really simple
ok let me give you demo give me a
different do something different than I
did earlier today if you saw the keynote
so you don't
not too bored okay let's clear that
okay let's see here I think are getting
echoes from me yeah
typing okay sorry see here
okay I'm gonna put our called this for
our session here I'll go in there okay
so go empty folder I'll do a FN and int
runtime I can choose the runtime so we
have support for a number of languages
built-in you need any language you want
and I'll show you even just using docker
but we have some support for using a
number of languages Java is one of them
so if I use Java and I call the function
hello I'll do a hello world for Java if
I CD into that folder if you saw the
goal example earlier it made me go now
it's Java so now we're using really
maven for the Bill to have a pom
generated I've got some code generated
in a funky amo file let me pop open the
code and let me show you what it looks
like okay so this looks at this this
will look a little bit different a
little bit easier to read then the go
code if you saw it earlier because a
Java function looks like a Java function
all right so you don't see me reading
standard input in standard output I
actually have a method I called it
handler request I can call it anything
it takes a string it sort of says okay
if you get a null string and then I'll
default to world otherwise I'll take
that string and I'll reply back with a
new string hello the name right so
what's happened with what you're not
seeing here is that model I told you a
sweet standard input right standard
output what's happening is we have a
function Developer Kit fdk and that f DK
for Java is doing the protocol some
negotiation is going from standard input
is reading it for us
it's invoking my function for me it's
taking my result for my function and
writing it back to standard output so
it's much easier as a Java developer to
just think about Java code and not worry
about the function container packaging
so I got that now what's different what
the job experience also is we also have
a very comprehensive JUnit test suite
our test framework so here you see a
simple JUnit test that lets me basically
create instance of a function of
location
I can then say which class I want to
invoke which head which is my function
class and the method that I wanted that
that is the function entry point I can
invoke that that that function and then
I'm going to do an assert on the result
right this is a no arg call but we have
a much more extensive jana test suite so
if you're building most of the java
really felt that you should have good j
in and support like who wants to write
functions and have to deploy them to
cloud and go through the whole slow
process of uploading and so on to find
out that you have a problem so I can go
into into here I put a breakpoint in the
code I can debug the test debug my code
interactively in my IDE so that's that's
a really a major feature so oh and I'll
just show you the sorry I'll show you
the funky I'm Oh file
so this is our metadata we have for our
functions I'll make it bigger if it's
not very good so the name of the
function the version that's Java and
here's where I actually specify job is a
bit different than other languages in
this case I describe to FN when I deploy
it that this function is implemented by
this class and this method so I could
have called it anything right just like
I just type in the name here as to match
the name of the class and the function
like I've created here this is all
boilerplate they have a couple of build
images here if you know if you're
familiar with docker you know that it's
really important to keep your docker
images small and so what we've done is
we split we would call it a multi-stage
build and so we have a build image here
that contains it's a docker image that
contains all of our build tools it has
maven it has all the stuff you need for
compiling your Java code and then we
have a run image and that's the image
where we take your compiled Java and we
just add it to that image to basically
deploy it so as much more so much
smaller so it's good because again if
you have big containers images when you
wanted to pull them taste while moving
around the network upload and download
them so the smaller your image is the
better so
we do that so let me see here this is
where I am that's right okay so if I do
an FN I'll do a build here and I'll put
him for both so this for both smooch all
the dirty details and I'll use FN build
another command just build it without
running it just so you can see what
happens
so you're seeing some less pretty fast
okay well I ran maven you're in the
whole thing I think that unfortunately
doctors very clever about reusing
existing layers anyway so you can see
here though that we're running maven
build use it the pom adds all the code
that in the end were we're kind of done
that got an image here if I go docker
images and I'll grab hello when we get a
couple of these yeah I got bunch of
different versions of hello over the
years here but there should be one that
just was happening I don't see it here
sorry excuse too small yeah yeah but
basically the output of the the build is
the docker image if I do F in a run you
know actually run that image and let me
move this up with me it's bigger and all
the rest of it here
okay so everybody let's again here it's
 yes I am okay let's do it have
been run those image and rights hello
world right so I could do something like
echo so they'll do here I'll just have
changed this screen so that's not
to hire for you
there we go No
bit higher okay so if I do
again these pipes right so I mean so
echo - no new line la pipe into my
function right so that la that string la
was piped into the Java code
right so standard impose read that
string was passed into here processed we
built hello la you got returned and then
the FN FN had taken the output and then
put it back on the standing up before me
so it's very easy for me to write the
Java code here okay I think that's all
I'll just stop there for a second notice
flip over and show you a couple more
things I'll come back oh actually no
they're doing it one more thing first
because I did not show this earlier is I
can deploy any doc container I mentioned
right so let's say I not see here it's
right over back into hello i go mike
down a function here buying actually go
into funky amo I'm not kind of just hack
this and disregard all the Java code
Michael it funky amo file I can say that
my runtime is a docker file that means
it's not Java it's just docker what
means is when I go FN run it's gonna
look for a docker file in my local
folder and build it me a function from
docker so if I go into my folder now
it's hard to see here okay so my root
folder and I do the new new file I could
docker file
and you're from the site go to hello
world there's a hello world is that oops
that's not good
unless the IDS to clever okay now the
doctor father says hello from hello
world hello world is a docker hub
published docker image I didn't write it
but I'm going to say that's my function
okay it's all to produce will be saying
here so I've changed my funky I'm will
say hey just call doctor forget all that
job is up just called docker if I do an
FN run now it builds the doctor and
builds a function and then call the
function you see this a few dots there
we're actually downloading something
from docker hub okay oh my mistake
I didn't deploy this I changed if I
didn't fight right so better deploy
deploy my app I'm sorry
boy app la and all right let's try that
again
FN call I told you anything off the
beaten path so probably screaming this
all out there la it's hello no I did not
get that working I didn't break it off
of this I did the same hat before when I
was using the go code it's a much
simpler process I think the problem is
that my my yeah Thank You Alma has too
much took it but suffice to say I can go
off and take off the shelf copper
components and just deploy them so it
really opens up the world to you there's
a million docker docker eyes software
components you can take deploy as
functions to they have been platform all
right let's go back onto here so what
was happening when I was doing this so
when I wind it when I do a bill or I do
the plumbing or a build I take your code
right I build up a container out of it
and then typically we push that
container image docker hub or to your
register you've configured you can
configure this but the faults of docker
hub we push your container docker hub
and then we tell the FM's server hey by
the way there's a sir there's an image
over there in docker hub and we want you
to bind it to the name that you given us
so as an application name like my
application and my funk I can find those
together so the FN server doesn't
actually have the container when you do
a deployment to the FN server it just
knows oh yeah there's a function there's
a container over there when someone asks
for I will go get it and run it for you
all right so it's very lazy about this
and if I do if I'm working locally that
whole push that the docker hub stuff is
kind of unnecessary right so if I'm
going to deploy from my local machine to
a target server in the cloud somewhere I
kind of need to push the images to
docker hub so they can be loaded by that
server I'm on my desktop just as a
developer working when you do a docker
we need to build a docker container and
puts it on your local filesystem now
when you run FN locally you can see your
local filesystem
so if I just run - my local it basically
says don't push docker hub because
everything's kind of on my machine and
it's a bit faster so we've taken into
account the need for you to have a
performant developer experience so we
have this like - - local option - to cut
out all this unnecessary communication
to docker hub it's quite quite useful
makes things much much
so I mentioned these F decays so so are
most people Java developers whose Java
developer anyone running a node no code
no Ruby yeah
Python okay so far Chavez working
winning or go a couple of big oh okay so
so right now we have function developer
kits for these languages node is
actually pretty new we just pushed it
out the other week and so it makes it
easier to write code in these languages
without having to have them go parsing
standard input and output like you saw
the Java code is really easy right like
I don't have to be a know anything about
FFN really to write that simple you have
a function just I read an input and
output and the the SDKs handle all the
dirty work of basically getting the
input to your code do you want to call
so in in Ruby you say this is
the function I want called a node you
pass in a function basically to us and
we basically call your function for you
with all the input package nicely for
you we'll unmarshal and Marshall Jeff
JSON if you have JSON will do that
automatically it makes it really easy so
well you don't have to have these empty
K's we do have these ones right now for
these languages there's some
experimental support or community
support for things like this Kotlin I
think it was there's a Haskell that
people are looking at all kinds of
languages it's not really hard to add a
fdk I mean we wrote that the basic node
fdk is only a few hundred month it's
probably 100 lines of code and then more
more in terms of tests so we're not
really doing anything complicated the
job fdk is way more extensive because it
does what you saw in terms of the code
but it also has a huge J unit test
testing support that has a lot of
functionality to Jana to Java
so of course you want to debug your code
right so I you know things are great
when they're working when they're not
working it's it's not so great so
there's some other FN CLI commands so
I'm gonna get all the calls and my
functions as main so I say FN calls list
the application I'll see all the calls
I'll have call IDs so every time you
call a function we have a call ID make a
record of that call okay and from there
you can go off and you can actually dig
down and get the the logs for a given
call so when things go wrong you can say
okay what happened get me the logs
give me the last give me the last game
the logs for the last function call for
this application I can go get it see the
stack trace and go oh yeah I didn't
configure some variable or whatever it
was I had to do right so it's a very
straightforward approach to debug it we
also in we've also have support for open
tracing so we're producing metrics that
you can for me this for example and we
have graph Anna graphs already pre-built
you can use to look at the metrics so
you can look at you know functions call
function call failures completed
functions although basically we have a
ton of metrics that are all available
through REST API that you can pump into
graph Anna and take a monitor your
application so actually I should show
you they have this up here just to give
you an idea of another piece this is not
using graph Anna you see a full screen
this thing so we have a native UI a
simple UI you can see a few graphs here
you can see a bunch of I've been running
a bunch of functions right so I see
which functions I've been calling
they're all completed that means great I
had some failures earlier so some things
did not work that's good to know do I
can take a look at all my applications I
have one here called travel I'm gonna
show you in a minute and it has a bunch
of functions as part of that and I can
actually go off and I can interactively
call a function all right so I have a
nice nicely UI here this is kind of a I
would say it's it's pretty minimal at
this point what we have here I think
that the the in terms of metrics these
are kind of the basic metrics but with
the Prometheus of Gran Fondo support
it's way more extensive but you can get
a lot of detail probably more than you
ever
so we do a few a few you eyes that you
can use to to monitor your your
configuration well here's a screenshot
so here's a screenshot of the graph on a
UI showing some the metrics right so
huge so we actually have a synchronous
function support so you have huge
functions running functions completed
failed so on so forth right so all the
details you could ever want and there's
the UI okay so so I yeah I mentioned
it's also in the keynote that we're
moving now from the phase where you have
individual functions great to write a
function that can do something right but
to build applications you're gonna need
to piece your functions together right
to do to achieve some tasks and so we
come up with an FN flow and flow is a
way to basically compose together or
orchestrate your functions to to build
applications so you know this is all
this is kind of the problem you got the
face right how do I build an application
where you know one function calls
another calls another I get the result
back that's all actually the easy part
right so you can do all kinds of
solutions to do that where it gets
really interesting is when things go
wrong so what if I have function calls
function calls function maybe calls five
functions fans out concurrently they're
being processed and one of them fails
what do I do now
right how do i how do I write a program
to deal with that failure how do i D bug
that these are the challenges that we
are trying to address with with FM flow
so flow lets us gives us a language for
describing these kind of compositions so
run some run these two functions in
parallel take the results combine the
results call another function these
kinds of things write concurrency
management essentially and this is built
on the Java completely future API and so
we have a Java standard API for the
basically a basis of based on futures
that lets us compose together complex
distributed applications it doesn't look
like this to be computing when you look
at it but it actually is under the
covers but it makes it much simpler to
debug
I'll show you example here so this is a
people whose gymnast
so this is a flow function that takes an
image that's been uploaded resizes it to
three different sizes and then logs a
bunch of messages as it goes goes by so
if you look at the top here
oh sorry cutting out all the details
right there is tell the user something
about we're doing some resized jobs and
then says runtime all of means do all of
these things concurrently right so we're
saying we're declaring that these are
can be done in parallel and they will
actually invoke three functions resize
128 resize 256 resize 512 to produce
three different resizes of this this
function of this image that's uploaded
and then it also has a upload when
that's all done and then uploads the
resized images to using fifth client to
storage and then when it's all done it
tells the user we're we're done right so
I'm basically saying fan out and do a
bunch of stuff in parallel and then when
you're done come back and then tell the
user we're all complete all that work so
the value of this API with flow is that
I can look at that and you know I can
reason about this this aren't this this
program right we can say oh yeah what
does this this and this and these things
happen in parallel it's a lot different
than if you try to write some sort of
state machine to do it we think that
being able to write in your favorite
language Java or node or go these kinds
of programs has a is much more effective
than sort of the old-school declarative
or drawing diagrams kind of kind of
approach so that piece of code there is
just with the English version of this
kind of points out that we can do
certain things in sequence and then in
parallel so we do step one then we do
all of the step two in parallel and then
we do step three so I can describe that
in in code so let me show you a demo so
I've got a fairly sophisticated demo we
actually have this as a tutorial you can
actually work through this tutorial is
the code and the explanation for this
code is all on our github repo but it's
a good example of the kinds of things
you might want to do with function so
I've got a travel booking system okay
now when I book a trip I'm going to
a number of things I want to book a car
Hotel flight right so a successful trip
for me is I can book all those three
things and we sort of mocked it out for
this for this example but if we have we
have Java for one piece we have Ruby for
some more we use different languages -
just to show that really the FN is kind
of platform-independent or poly
polymorpha poly Glatt right any language
doesn't really matter to us we have a
bunch of functions one for booking a
flight or our hotel or a car and another
function to cancel that and why we're
doing that is because we have this
problem in this distributed world of
well when something goes wrong we we
have to kind of take corrective action
right so the patterns call the SAG a
pattern just go here so the SAG a
pattern is basically in a distributed
system where you're doing all these
tasks when something goes wrong you have
to issue compensating transactions so if
I say book a car book a hotel book a
flight and then the flight fails I have
to go back and undo the other jobs I
just go back and say okay cancel the car
cancel the flight right to make sure
everything's undone so this is the
pattern we implemented in this in this
demo so actually let me go over here
okay let's pop into code
now
got that yes I do
so if I show you this is this is the
trip sorry pop up one level here so go
quite a few functions here so I got car
and if you look at car for example
there's booked a car and cancel car so I
had that for all these things flights
hotels I've got these a bunch of
functions they're all deployed let me
just make sure I've got left this
running FN apps list you have travels
there and if I go F in routes list
travel it'll show me all the functions
yeah so all these functions deployed
same thing you see in that fnu i show u
dy kind of drill down it's the same
information so mike my applications up
and running all my functions are there
and i'll show you the code because i
think it's kind of interesting to see
what the java looks like doing slightly
more complex computing okay this is way
too big now sorry smaller is better ok
so here's I'm showing them I have
actually in this this this source code
if you look at it the three versions of
this travel function trip function
booking a trip this is them this is us
number two the Samara Handley I want to
show you error handling so I'm gonna go
off and say get me the current flow
which is the the notion of the thing
we're doing I'm going to build a future
so I'm gonna get an object which is a
placeholder for the result of the
computation so I say I wanted to compute
I want to book a flight booked up book a
hotel and book a car I'm gonna say okay
I'm gonna take those results and I'm
gonna say basically when they're all
done so if I do one than the other in
the other when they're all done send an
email
but then if something goes wrong right
so if the car invocation goes wrong I
can actually go cancel or so when the
yeah and it goes wrong I cancel the car
cancel the hotel cancel flight so I just
can do error handling on my distributed
computation here right so these
functions are running somewhere in my
compute fabric so this is what what's
kind of kind of fun so want me to show
you the happy path first so I'm gonna
run this function I'm gonna bring up the
UI that we've shown before okay this guy
this UI will show us these executing
flow
so if I run ethane call travel trip and
I pipe it in isolation I'll show you
that first cat so here's my trip okay so
I'm trying to book a flight a hotel in
the car and I'm gonna think that the
JSON payload to be passed in to the Java
code the Java FD hey is actually gonna
unmarshal this JSON into some pojos so
we have built in Marshall and Marshall
to JSON and then we have to have objects
it's gonna then run the process we saw
and hopefully block me my trip so whoops
so let's just try this FN call do a trip
and I'm gonna pipe into that or redirect
into that that file sample pail of JSON
okay over the UI so watch it happen okay
so my main function is running it's
booking these trips and these great
books the book the hotel it booked the
car etc I've sent an email okay I can
click on these bubbles and see the
results of what happened right how I got
there okay so didn't email when all
these things completed so that's all
great that's nicely not interesting
what's more fun as I break it so in this
example I actually have a control
dashboard where I can go and make pieces
fail this is kind of fun for a demo
right so I can go to the the the car
booking system you see here I can say
okay when you invoke when you book a car
we turn a 500 write this so just imagine
you're building a system where of course
you're interacting with third party
systems and they can go down right this
is kind of the story right so you talk
clogging the Avis and the Avis booking
system goes down you can't book your
complicated trip because it failed so if
I said that and then go off and try and
book that same trip again now go back
over here quickly right OOP things
failed right so I tried to book a book
the flight tried to book the hotel the
car booking failed and as a result that
exception handling code kicked in and
now I'm issuing things like cancel the
flight right
cancel the car all these things are
happening as a result so it's much more
interesting when you see the failure
occur and I click on the
I can take a look at what happened now
of course is this fake code right so
when we fail we just do an exception
this is - an error code just bomb like
it's T the stack trace how do I get
there what happened you can see that she
is this is a note code right so the node
component for the car booking basic
exception doubt failed we went off then
and started taking compensating
transactions so if you come if you come
if you if you go off to F n partial
Daioh and download this and try it out
doesn't even is another one another
version of this where essentially we
make it so that it can't succeed and so
then we start doing things like we
trying so basically doing a backup like
make a call try and cancel that ticket
and then it doesn't work out wait a
while try it again so you see it's a
some topic back off we can do all that
stuff in a simple java program and soon
in future a few few more languages so we
have a very very cool support for
building real applications now in in
these languages so that was just Java
right so I didn't have to learn anything
too complicated to write that flow I do
need to understand that completion stage
API but it's a Java standard API and
soon you'll see support for go in
JavaScript so all the F ends actually
written in go right so the the docker
world is goes to docker kubernetes FN is
written in go so the go the team the
core engineers are really go savvy
people who are writing in support for
fdk for for go and flow support for go
we also have javis JavaScript obviously
with with notes of courses also it's a
very popular language so there's also
really some really cool stuff going on
and the flow implementation actually
surprisingly complicated but as a user
it's actually nice and simple so soon
your favorite language you can build
these complex function based
applications ok so just I have enough
time to wrap to wrap up my story so you
know I think that we've achieved our
goals right so we did this with open
source so all patchy to you can get it
runs everywhere the easy stuff is pretty
easy but you see I started doing
complicated stuff that wasn't even
complicated complicated is I'm gonna go
to
and build docker images and do you know
you know do apt-get install certain
libraries I want to use all that stuff's
all possible using the FM platform to do
advanced container based functions again
docker based because we think that's
important and it's taking advantage of
that value again all these packages I
can go and reuse already from docker and
really I didn't show you running it on
committees but if you go to FN project
at i/o
you'll find a helmet art you install
this onto kubernetes try that out we had
some people talking about doing a docker
compose file for swarm where we're fully
compatible those environments right we
just need docker so docker is our is the
platform alright so thank you very much
if you sit in getting your hands dirty
there's a lab at 1:45 we'll do a little
bit of docker for intro my colleague
Mike rob was here before me he intro
docker so the hands-on lab is a little
bit of docker just to get familiar and
then move on to FN try out some of these
things if you're interested like I say
it's all on github if you like to put if
you like what you're seeing we loved a
star and github that that's a iPad in
the back for the developers and if you
go to FN / chayo you'll find links to
slack twitter youtube all those kinds of
things to get ahold of us and the final
thing is that my colleague pointed out
we are hiring so we're a standing team
so if you're if you're into this stuff
you know let me know you can get me on
my first dot last name on oracle calm
okay well thank you very much and I can
take some questions I think yes sir I'll
repeat the sensor question
okay
years ago
yeah so the question is like what's
Oracle strategic strategy around these
functions basically and how does it
differ from the former story of like so
up so I'm watching the clock here yes
this is more developer centric it's true
right but the key thing here is the
business values around the building
model right so you only paying for
functions as you use them it scales out
if you will use so I saw a cloud service
today
you're still managing sort of fixed
compute and capacity this is a
completely elastic platform so we're
changing it entirely for the business
the need to worry about can they scale
to handle the load can they react to
like the Black Friday curves all that
kind of stuff these kind of platforms
really respond to that much better than
the traditional so a cloud service type
of approach so that's the key thing
right this is a completely different
execution model although you're right it
kind of looks similar that I've got
these endpoints and I call them I can
compose them together this nothing isn't
totally new right anymore
yes sir
Oh
yeah
okay how do so how to function scale
right so when you're talking to the FN
server whenever you're invoking a
function you're talking to those FN
server that FN server will if it's we
have a number of different options
around around this but if we are if we
have a number of income requests that we
can't handle it will spin up more and
more containers right so we'll spend
more of them will scale it out in that
node for bigger scale we have multiple
FN servers those FN servers aren't
special so we will have an FN server per
compute node in a kubernetes world we
actually we have a number of pods
containing individual FN servers fronted
by an F a load balancer so we'll just
take incoming call routed to a fence
server it'll use this compute it will
spin up more if it has to we will load
balance and take care take advantage of
the compute we have in a in a managed
service that Oracle's building we're
gonna build a service based on this that
would be a hundred percent transparent
right so all the compute allocation all
that stuff doesn't matter but you won't
care you'll be like I have a thousand
function calls per second you guys make
it just handle it but really we're just
spitting out more and more instances the
containers or timing things out we're
managing the memory we have available
it's not too too crazy how we do it I
mean we have I have bit slides with more
details on how we actually do it but
it's basically that scale more functions
to handle load at some point if you're
running in a fixed compute environment
at some point you'll get out of service
if you you know if you're running it on
your own compute and you just hammer the
thing at some point you can't handle it
right and it's gonna say you know
server's unavailable but that's why you
want a cloud service that has the
infinite scale okay I think we better go
I think the next sessions coming in so
thanks very much</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>