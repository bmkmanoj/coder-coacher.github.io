<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Rapid Internet of Things UI with JavaFX and Scene Builder | Coder Coacher - Coaching Coders</title><meta content="Rapid Internet of Things UI with JavaFX and Scene Builder - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Developers/">Oracle Developers</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>Rapid Internet of Things UI with JavaFX and Scene Builder</b></h2><h5 class="post__date">2015-06-02</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/nYuZDzWZV60" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello everyone I hope so come on talk
I'll take two organs quite loud wait a
bit so we have away many lies today
where RT mainly just going to show you
building a building some stuff using C
builder connecting up this array of
gadgets and whys and we know you hope
you won't catch fire any moment and yeah
basically a bit more hats off why is it
feedback them so yeah we have the movie
safe harbor statement okay and this is a
manual talk about so we'll start we have
a team builder and we're going to show
you some tactics within our hands
between your microphone you be some
tattoos TM showing at f xml CSS and
connected some code and a general
varieties of using these methods when
your designer such as myself working
with an engineer such as jasper and so
that i don't break stuff and he doesn't
make my stuff like that and then we're
going to take the little project that we
were going to build here and deploy on
our devices and then we're going to talk
about the java one keynote which is the
iot javafx card mr Dunne if anyone was
at the keynote presume it fear viewer
and you might see me a big screens that
we spent an awful lot of time putting
together and then we'll have some Q&amp;amp;A at
the end so with the with the keynote
stuff we used a mold poor FX from allow
this is a really simplistic image but
effectively a master f xml and and
a bunch of included FX ml's inside that
master and that basically allows you to
kind of design things on a modular level
so effectively it also means that the
scene graph for all of your different FX
ml's are a simpler and a bit easier to
follow and debug especially if you you
know for example have something
interesting happening in a layout so
here we can see in our little demo we
have basically app the life XML I don't
know if you can read that the primary
ilysm and then we've got so our perfect
some Eleazar is our master here we've
got a few CSS files and one of which is
a theme which is so basically the master
CSS file and then we've got a gauge a
switch and a temperature f XML which are
include so if i switch into seem builder
let's look at so here is app and you can
see that in the hierarchy panel down
here on the left-hand side app is
actually really simple it's a single H
box and then it has three includes
inside and and seen builder in the
hierarchy here I'll even tell you the
root node of those include so we can see
that these these FX markets here will
have stack painters that we know a
little icon here basically telling you
that that it's an included file so if we
are actually have a look at one of those
you can see that for example that's gay
Jeff XML and so this is one of the
increase and it's it's very very simple
so we can have a look at a similar stuff
inside as effectively a narc which has
some CSS styling and a label and region
and just those three notes inside a
snack pain have allowed us to make a
little gate
now i'm using a little trick here
because we're designing it in FX ml of
using some layout tricks to basically
get this gauge to look like AG agency
motor so if you are actually making this
gauge simply in code and if if you're an
engineer then you probably would
position the needle write some code to
you know some trigonometry and various
other bits and pieces to get the angles
like the offset light etc Valachi I'm
just using a region that's the same
width as the stack pain and I manage
some CSS styling just to which is offset
by a bunch of pixels and basically so it
just has one section of it is green so
very for a designer like me it means
that I can you know kind of a TD play
around a team builder and see how it's
going to look without at he kept writing
any kind of any code or anything like
that so and it's interesting way of
fifth you like a bit of two info between
the engineer and the and the designer so
for example when we were working on the
keynote demo Jasper coated up a bunch of
these and there was a whole load of code
and I was like I've got this kind of
idea we just use one region of Motel you
use of starting it was like all right
they cease to do that signed up for
running away on my coat well yeah Richie
hmm only Harper all short period of time
yeah yeah so so yeah so and we have two
other effects may include so we have a
little switch here and this switch is a
is a total bum with some graphic salad
as its or some notes adding as its
graphic element so if i use the pd
feature here inside seam build up and
play around with that guy you can see
that actually we're just using the
selected states for the toggle button so
to change the to change the actual
graphic so it makes us a little switch
and the last one is temperature and here
again
basically I'm just using a cup of trick
so we've got a tuner allegiance here
which we're going to move up and down
depending on the temperature in the room
there's going to be connected up to a
little temperature sensor here and the
top 10 I simply just can change your
pasty on the one underneath is blue so
as we get colder it gets blue and as we
get warmer it gets better and so yeah
just kind of simple tricks that
basically mean that in even though team
builder isn't a you know Photoshop or
drawing program or anything like that
you can actually approached the way you
build your f XML 30 out less code
because Allah just below flying code
doesn't my phony away we ended up with
this code and and the only I to you as
well with the current fashion for sort
of simple simple graphics and is that
you know you can make this stuff very
easily so let's have a look at some of
the CSS so I'll just switch to inter J
the font yeah yeah how do that we're
going to navigate the presenter mode
again but wound is treated for the one
yeah there is but let me just do a zoom
there we go how's that that bit better
okay so so effectively this is a theme
so and it uses lookups so this is kind
of the master CSS file that sits behind
everything this one is very simple it
even has a little sudo stay here so if
we apply that to estate to the to the
root node then background color and
detail color will be over win by by
different values so and when we did we
do need the key note card mo and or if
you've already played with it on the
demo grounds you'll notice that there is
a light sensor when you put your hand
over that the the car displays will
switch on night 2 2day mode and that's
literally just by replacing lookups
using a serious over and and then we
have some some lookouts which is just a
defined colors so and the nice thing
about being it like this is that if I
want to you know if I'm using include
talk you know from if I make it a large
application on how many includes if we
have in the keynote probably quite a lot
like 20 30 something like that you know
and you certainly don't want to have to
go into every single while those files
I'm changing it just something might be
like two or three hundred places you
might have to change so is that creates
actly so you just come into your into
your theme change it here bang it's done
and and we're using a dot root of course
you can check you could also named that
wherever you like and and so you know
you can call that theme if you want it
and as long as you add then theme to
your to your master f xml but using
brute it's picked up naturally by the
platform right so yeah so basically
means you don't even have to add this
style class to you the root style class
is ultimately applied to the top
node and you'll seen yet so okay and
then if we have a look at for example
the gauge dot CSS I'll just do another
zoom again so you can see that the Ark
is using detail color as is the label
you can see that the needle here is
using the green color and if we used to
use my handy little gadget here see if I
can get both on screen at once
this may work yeah
oh wow okay so basically then if I go
back to the theme you can see here they
are so if we change that green color to
a pink it doesn't like pink then I see
that see me on a background I don't know
if that might be a bit subtle on the
screen there with you can also for
example change the detail color so let's
change that to a purple so you can see
the team builder picks up the CSS
changes from the from the IE straight
away which is really nice in terms of
you know there's no need to kind of
restart and you can even mess around
with colors when you've got the cut
intellij stuff here the swatches etc
tell them it will give you a color
picker and so it's good kind of a co-op
there so let me just
okay and the other thing to show you
seen builder and just out of interest
how many people were out to using build
up some kind of used to it so are lots
of people okay how many people use the
ecss analyzer okay so you're kind of how
many people find I'm really useful when
you're trying to work out the skin of a
node and you know which which part is so
and i'll show you a couple little tricks
with that ball with while we're here so
if we open up the CSS analyzer panel and
now let's just hide the default value so
okay so down here at the bottom you'll
see that effectively you've got the
default values coming from the platform
you have any values which are setting
inspector so you can see here the prep
heights of the selected node are set
there you can see we sent rotation then
you also have importantly for CSS values
that are coming from the star shoes so
you can see the colors that are being
used for FX background color here you
can see the the background in sets that
have been used and and another nice
thing as well if we actually let's just
make a new document as put in something
like a scroll pain which is relatively
complex so let's have a look at
scrollpane one of the nice things about
the CSS analyzer is that you can start
drilling into things so you can say okay
and oh you know discovered the skull
paint has a viewport it has scroll bars
even has a little corner node and and
you can then also copy the starboard
path there so if you say okay let me
copy that guy so if you wanted to open
CSS edit this could be
so then I will give you a you can say
okay and then buys down and stop right
and CSS code so some of the other nodes
are actually you know much more complex
so sliders is always a good one to try
and
the pain in there
so if example slider just looks like one
note but you might say okay how do I get
to the thumb you can see that when you
live in the side RT is made from a track
and a thumb and if you might have made
that famine color or whatever you can
you can use the ecss analyzer for that
it's also really good for when you've
got quite complicated CSS and things
aren't appearing exactly as you hope
they would you can you can debug it with
the CSS analyzer so at some point when
you've made your design and you're going
to want to connect up some code and seem
that I have some very nice features for
that as well so um you'll notice any
inspector down here at the right hand
side we have the whole section devoted
to code so the top one here is FX ID and
which is I'll see how you get your Java
to to communicate or to find a a note so
the other way of doing that is you can
also choose the FX ID hierarchy display
here and that's nice we're seeing all of
the FX IDs in your in your document and
so here we have a stack pay me up gage
gage label and the needle and the
important one here is the label in a
needle because the needle we're going to
rotate when we attach our logical code
and I'll see the label we're going to
print the print a numeric value in that
and also by the way this is seen build a
201 which I forgot to mention which
while I'm on the subject should be out
and thinking the note a couple of months
time and so if you guys want to start
playing with it and I think we'll have a
OT NP week's version like very soon and
it looks the same although this is dark
mode I don't know if anyone's actually
discovered our motifs in the preferences
but effectively is the same and might we
have at you fix on not marks under the
hood so you know it's just kind of a
should be a bit of a better experience
and so we move the control car so where
you connect up your code is now here in
the in the controller menu you can also
see that there's a little list of the FX
IDs in fact you can even select the nose
as well from from here if you need to
and then so let's say then that as a
designer when you're building this to
this point by I've put my gaze together
it looks like like I want it to and I'm
kind of happy now I've got to do the
scary bit for design i've gotta go speak
with an engineer and try and you know
about scary come on try and get him to
make it work and have a good news here
is that because i build it in FX of milk
he's giving me efforts Amell I don't
give him a picture and say can you try
and weave Kate that code I just say can
use low my F XML and so you got you want
to pre I'm not saying I don't trust
engineers but that's just saying
historically that I've given them some
designs and they've given me some it
back up in quite the same and so
basically yeah so you had over there
folks a male but you can you can also
you know be a little bit helpful and so
you can make EFX IDs and if you want to
dive into you know you can even then
make a controller if you like and and
you can you know dive into a little bit
of charm if you want so inside seam
builder we also have a feature called
show sample controller skeleton so if I
go for here and again it might be a bit
hard to eat I'm sorry about that but
effectively I can just select all of
this guy hit copy switch to the IDE and
I've got the basis for to start
connecting logic and so it here for
example I can even look in a code here
and let's say that I want something to
happen so let's say that we drag in a
button
so there's my I button so if I want an
action on the button so why I say okay
do something now if I look at the
controller skirt and again you'll see
that it's added there a little method so
it will do something you'll add some
stuff into it but anyway so it's
actually you know you have a reasonably
a good round trip to the to the IDE also
there's some kind of safeguards so the
example if I try so let's say that I've
given it an engineer is as you connected
up some code I decided that are today I
want to change a couple of things or
maybe font sizes or colors or something
like that I might also say okay I'm
going to use a label anymore I want to
use a simple text but I time to eat that
guy it's going to give me a little bit
of an hour at I say hey hang on a minute
you know this is kind of important to
the logical code so and ok I think I
skipped a lot of slides out you see
where you were so my word CSS themes
spoken about that connecting code
expecting about that so workflow and
effectively kind of been talking about
that one as as I've been going really
and so yeah do you want to take a
slipper little while you still scream
and I control lights on a little
statistic oh very smooth
okay we're doing pretty well so far so I
think everyone's awake but reasons to
statistics that's always good start okay
so let me start something exhume this
guy out so to start with on the desk
here i have a raspberry pi and a bunch
of sensors anybody is in my previous
session i went into some of the details
and how you talk to these different
sentences but basically i have a bunch
of ids I by 2 squared Y C squared
sentences the red guy is a temperature
sensor the guy next to it is a light
sensor who's causing me pain today so
just skip him and then the last guy is
an analog-to-digital converter connected
to that I have a big pebble so this
represents the same as my gas pedals on
the car model this is one of the
prototypes were using they're actually
analog pedals off a keyboard for any
musicians out there or guitars it turns
out that they're just actors be variable
resistors you can wire them up pretty
easily and get a nice value off them and
hopefully they're robust enough to
survive my demographic will find out so
that's basically the circuitry that's a
little guy running down here and then so
this is my console running off my
raspberry pi is sitting there 10 times a
second it's a hypo to 500 second it's
off reading some values so we put those
beside each other nobody can see but if
I oh my finger on the temperature sensor
are seconds our numbers are getting warm
says now reckons it's 27 degrees Celsius
and hair witches and I take it off it
starts to get back to normal so that's
the basic sort of data being read
through if I switch over to my data app
so what you don't make text bigger how
just do a zoom gesture on absolutely
focused all right there we go yeah
teaching an engineer I use my de Caza so
as costata okay cool so basically in
this case I'm actually making it a FX
app because although it's headless I
like using the FX properties and
timelines and uncomfortable that so it
makes my life easier so I'm just
extending an fx app but in this case
it's actually headless I have a date
demo model so if i go into their we have
a for FX properties i have my two
properties which are my live properties
coming off the i have my pedal position
and the temperature and then i have to
display properties which i'm one of
which i'm calculating in here so my
display temperature is calculated to be
four be the celsius or the Fahrenheit
depending on the state of the boolean
property which we're going to wire up to
our UI to our switch but this is just a
very simple javafx thing or idealistic
the four guys in Admiral binding in and
let IntelliJ or to generate my getters
and setters and everything for me so
that's our simple simple model to get
this between the two devices in the real
demo we're actually using the IOT server
and products and cloud and a big sort of
setup for the simple setup here i'm
using a library called j groups it's an
open source library that i've used three
years and is also used by jboss for all
their cluster replication beer just
allows me to create a simple
peer-to-peer network i created a simple
class there's a little bit of coding
there but not major and what it
basically does is I can cool
replicator I just create an instance of
it and I add each of the properties i
want and what that does is it magically
says for every java vm on the same
network that i created a demo model and
connect up a replicator all the jabra
fix properties will always be the same
value so I can change them on one
machine and bind to them on another
machine and they just transmat I
transparently get replicated across the
network which is really so that's how we
did all of our development for breezers
again for the in-car piece so this
represents my can bust inside the car so
we could have you know several different
laptops running running different parts
of the UI we have several different
devices we have lots of little devices
with sensors and they're all just can
they're all just finding into that same
Java face model as far as they're
concerned they're just bindable
properties and they're magically getting
changed so it's kind of a cool way of
doing that a couple of the classes here
which basically help me talk to the
different devices and pull out the
values and stuff we want to pen the
details so once I've got all that we
then go over to oops matters see my code
so this guy is now our second app and
he's our app that's going to use moes
myself XML he's created for me I'm doing
exactly the same construct at the top
and grey myself my demo model and wiring
up the properties so they're bound to
the network and replicated now the next
thing is I load the F XML those who you
who used to loading f XML your think
this is a really long winded way I'm
doing it the little trick i'm doing here
is i'm using a factory to construct the
controller classes and i'm detecting
whether my controller class has a
constructor that takes my model and if
it is i pass in a reference to my model
so this is a way to pass to a model
classes into the f xml into the f xml
controllers because uh yeah
well burned in the past with static
variables yeah I kind of have allergic
reactions a static variables generate
they're not constants so you know I
really want to be able to pass my model
around and to be able to having our test
first no I model and so forth so this is
a way to transparently just pass in your
constructor so if I then go in and have
a look at one of the controller classes
such as pigs this guy super simple all I
do in here is I just have a constructor
that takes my demo model and then in the
initialize I can take my demo model in
this case just bind up the toggle so
that's all I have to do to bind the
toggle button the mo create here up to
my model the gauge controller is pretty
similar but he gets a little bit more
complicated this random code maybe's
generated by you I don't know where that
came from the yeah yes sir Lee assertion
power that's generated by the by Cena
okay so we start off with the steam
build auto-generated guy I guess he got
some ice assertion there to check when
stuff is there I would print flyers
using for my debugging so in this case
I'm adding a listener as opposed to
binding because I want to use a
animation so I started off first of all
doing a simple binding for the needle
and then it will look really jerky as
the value changed if the value changed a
long way from like zero to one like I'm
going quickly here from 0 to 1 then it
looked like a big jerk so what i'm doing
here is like create every time I get a
new value I stop the previous timeline
and create a new timeline to animate
from the current position to wherever
i'm heading and as i'll show you this it
works pretty well to smooth things out
and the last bit there is i'm just
taking the value i'm getting a zero to
one range off the actual pedal so i
multiply it by a hundred to make it a
bit nicer to look in the UI and just
planting it to an int so it fits in the
UI
and then the last guy we had was our
temperature controller which we show
those guys were working so let me grab
so renie I'm gonna run the stuff from
the device which I show you here I have
running but for now let's just buy the
run target it looks slightly different
by the egg because I pushed some graphic
changes yes I gotta talk so I'm porch
I'm running on private network here so I
haven't it's not easy to grab and
connection to the repo on the internet
and Paul notice but yeah if all goes
well with our developers on a workflow
and you know we've we've been doing this
you know on about an hourly basis for
the last month or so with the demo so we
know it works pretty well I can just
pull changes much mozi and then sudden
yeah rebuild and it'll look nice and
pretty like he he had it so this was
here a few hours old version of his code
so that's it running on Mac all the nice
things of Java and the run anywhere is
yeah I can develop quickly iMac and then
death test it out on natural device
other than performance everything else
should be identical so if i press the
pedal down we get some nice animations
so if i move it slowly is it is this is
not entirely linear the pedals so but if
i move it quickly to the end it animates
nicely between them now so that's our
binding in action and if i press RCF so
that's changing our state so our last
controller is how do we make this middle
guy happen so let's have a look at the
code for that guy
so he's got a couple of different pieces
to him the first one is pretty simple
which is just the text that's going to
tell us the temperature in Celsius or
Fahrenheit this is a pattern I use quite
a lot a Richard bear told me i guess
like three or four years ago now and
it's become sort of in my finger memory
but basically the idea is to create a
new custom binding so if you've got the
case where it's not a direct one-to-one
relationship so in this case obviously
we're taking in a number in Celsius and
we want to display or sorry number and
Celsius or Fahrenheit as a double and we
want to display that as cleaned up and
add a string on the end so it's not a
simple mapping that we can do a binding
so we create a custom binding the first
line is a sneaky little trick and what
it's doing basically is creating a piece
of code to execute it when this
anonymous inner class is created and
it's telling the binding which property
do we want to listen to for when it
changes and I've some more of these I'll
show you in a minute and you can add
it's a far as you can add as many as you
like in here so that's all the prop so
when any of the properties you list
their change your expression in the
compute value will get recomputed and
updated and pushed so this is actually
have an arbitrary expression bound to
the source of any number of properties
changing so in this case i actually just
realized i have a have a bug here let's
just fix it water on the fly so
as I was talking about it it came
obvious to me but we're also oh not good
sorry i programmatically rhea so if the
display unit changed so if you clicked
on the bottom and the temperature was
constant at the time where you were
doing it then this binding would never
update so you wouldn't you wouldn't see
the cdf change so i need to bind to both
the display unit property and the
temperature projects if either of those
change that i need to update this text
could bit on the fly debugging okay so
the next bit is this is a little bit
where moment I had a differing opinion
of how to control the height of the bar
mo decided that you know pref high as it
was changeable inside EE should be
changeable by the engineer but it wasn't
pod plausible because there's a layout
it doesn't cause relay out and therefore
doesn't add you change hype time you
want me animate it so what I'm doing is
I'm setting the height 200 to make it
fill the whole bar height and then i'm
using a scale transform to change the
height of it on the fly so i'm just
going the reason why i'm not using the
scale property here is I want to change
the point to which it scales around by
default we were scale around the center
here I want to scale around the bottom
left corner of the bar so that it
changes height from the bottom up should
have done that anyway because I it was
my another department is that pain like
something you changed
yes but turning the press high dynamic
he didn't do anything well anyway I
tried yeah so am so I'm adding on the
scale here and group I'm creating
another binding the same sort of set up
again this time wanted to I started off
with a simple binding but wanted to
change it to the fact that I could do a
max to prevent it going below zero
always my bar could go off the bottom
the screen and then the last guy was I'm
changing and binding up the opacity at
the bar two of the second so inside of
our bar we have two rectangle the moat
created ones the blue one of the red and
I'm basically changing the opacity of
the red to be able to create a color
change and I've got a little bit map at
the end there is converting my range for
the bar to be between 23 degrees and 28
degrees so that you can actually see a
reasonable amount of change based on the
ambient temperature I just found out
that actually this room is three degrees
woman the previous rumours just doing a
demo in so i just had to change this
from 23 to 20 so let's run that guy
again
some reason we're not getting any data
oh yeah so the guy little otter to
connect on the network so if I put my
finger on that it goes straight up and
we can see the colors changing and we
can change our Fahrenheit and we should
get numbers in Fahrenheit as well so we
get pretty fast response from the real
sensor straight through to the actual
bar so it's really exciting to start
getting things in the physical world
affecting your UI and we had a lot of
fun in the car demo getting lights and
pedals and accelerometers and all kinds
of different sensors and also sort of
round trip where we have sensors sending
stuff back in influencing our morale
doing some computer computations on it
and then setting output back to
influence you know LEDs will turn a fan
on and off so I think it definitely yeah
familiar energy it's been a lot more fun
when I can start making devices make
mixing devices with my UI in the real
world so now the next thing that's fun
is yeah running my desktops all cool but
yeah let's at TC we can get this on the
edge of device so
in switch over
that guy I haven't tried this before on
the screen but hopefully it's upside
down other than it's upside down well
that's easy
but
this is our little touch screen here
away we almost have it what's more
singing a chance to focus so not
entirely here but basically yeah salsa
so I have a little Oh droid you three
device here these are my favorite little
embedded device for running effects on
the moment they're sixty dollars from a
company in Korea called heart Colonel
calm and it's a quad-core 1.7 kike
gigahertz with four core GPU and two
gigs of ram they actually have a little
SSD chip so it's got a 64 gig SSD in
time inside the little box so it's
pretty close to soothe being a you know
small low-power laptop type device that
you hang you can stick in your pocket
for 60 bucks so they're a lot of fun FX
runs really nicely on there other than
one bug which the observant if you might
notice unfortunately refocusing bit so
hopefully we should basically so
actually unfortunately the you can come
out and play with us afterwards but the
the reaction time through the camera is
actually slower than the device but
basically there's no it's no slower on
the device than it is running on my
desktop little needle flies around our
texts updating if I our temperatures so
you know you can imagine this being a
you know climate control system sitting
on your wall some of that I can have a
touch screen so I can touch and change
my temperature guy there's actually
really nice little so they actually it's
the first time I tried it static they
just started selling these little 10
inch full HD screens so it's a really
high res 1920 1080 screen
we're running here lucky dog screen so
it's great all to advise so the you know
there's loads of these little cool
devices and you know the raspberry PI's
will kicked off a huge ecosystem of you
know people building these toys for
people to play with and then there's
companies like the imax six boards which
we were using on the so the two displays
we had on the keynote demo the main
center gauge cluster was running off a
imx6 board from mechanical boundary
devices it's a free scale i'm next to
export and they do a lot of stuff for
working with manufacturers to actually
build yeah they built both developer
boards and then they build real products
for people so you can actually take me
add this and turn it into a production
device and there's you have lots lots of
companies and that's just one we happen
to work with doing that but it's pretty
cool to be able to a prototype this
build all and then yeah turning into a
real shipping device that you can stick
on somebody's wall so in a sense tastes
fine an hour and yep so let's switch
over to
spice
so yes we'll go into and showing you
some of the car demo that we build in
the keynote and I hope if you haven't
yet you'll go to the demo grounds and
have a play for real unfortunately
because time for the strains only got to
show about ten fifteen percent of the
demo in the keynote so there's loads
more cool stuff for you to play with
their will show you a bit more here but
you know we built this simple demo just
a little show you the Bates's the basics
of what we're doing but you know all the
key no demo was just taking the same
principles and doing a lot more of it so
what we put together here was I
basically built a test app for running
on desktop that takes each of the sub
apps and some desktop controls to
simulate the different sensors and
pedals and so forth that we have and
wire it all up so it allows us to
develop on desktop and test and motor
play around with the UI and quickly see
his results and then we could run it on
the real bored and see how everything
works so we can we can have a look for
example in a scene builder if I open up
so let's have a look for example at the
center screen there
so there's a sense green inseam builder
again we use the principles of using
some tricks at CSS and layout so you
know the clock looks like a clock it
isn't just a circle with some program
you know Ham's at it programmatically
it's a two representation you have all
of the icons here we've also used SVG
shapes for all of these icons which
means a resolution independent you can
plug them up as because you like I still
look great vetting the screens etc and
then part of that started to come from
the fact that we were trying to pick the
right touch screen to use on the actual
board we initially started with a 14
inch so we're comparing to Tesla with
their nice big 17-cent 10 full screen
and so yeah we're trying to find
something similar witness do we have
found a 14 inch screen and then you know
about a month into the development we
found a 15.6 with a different screen res
there was actually a much nicer screen
more responsive and a bit closer to our
Tesla goal and so we swapped over and
could just scale everything up we round
to rebate images and that's all stuff
that was really nice so if i switch
between the art you're running out so
you can see into saying just take a
night mode off so that's the pseudo
state i was talking about earlier RT in
action obviously when you when you use
it in the democrats it's controlled by
the sensor we've got some some key
bindings here so that we can we can test
off but it looks basically exactly the
same so if we change your stuff in team
builder then you know it's it's
immediately affected and the second
screen here and we also did some some
nice little animations so we won't add
to be trying to build a real car you
know it's at the end of day of it's a
means to an end to show the bound trip
with with IOT but you know we have some
fun with animations so for example when
you go to demography those two trap pads
if you double-click them you can
you can actually change the views and we
have some like nice little animations
there's climate controls and there's
energy and stuff like that and you can
actually start the car so so I think I
can actually drive there we go
then we can even know we did not know
fighting emery boards in the process
here but and active bizarrely this is a
obviously you can see kilowatts on the
letter T was a demonstration of electric
car we wondering why there's a an engine
noise for mayor from a petrol
gas-powered engine that was a bit fun
subtly sample from an old model t ford
and ridge in the air Taniya we thought
that you know the thing is you've drive
electric carts you can have any you
can't drive it very entertaining but
apart of the yeah it'd be 12 you know
you Kathy what if you want really hey
guys welcome to take a cool the sample
from moes ducati and do a catty
soundtrack for it but we didn't like it
around to that ran out of time in the
end better so yeah so basically I hope
that you can see that you know we
produced a kind of a small demo here
with the little gauge and connect our
beer stuff but actually even though the
keynote is also a demo it's kind of a
believable car concept right you could
see that you know he's a high red
squeeze their touch screens or stuff
like this is already existing in a Tesla
I'm pretty sure of five years time
you're going to you know that your cars
effectively going to be a huge cinema
screen and you know so it's it's real
stuff we should get out there start
playing with it making stuff okay for
time so any else to add well if anybody
has any questions we can dive in and
show more of this UI or how are we built
any of the bits yeah the Lots under the
covers but any brief any in areas you're
interested in yep it's you're quite
interested in almost nothing
we haven't done yet we'd like to
providing time permits we definitely
will do obviously we we were coding up
to about an hour before the keynote and
then coding after the keynote to get the
remaining bits working on the Democrats
so the codes very fluid slightly hacked
in places which so yeah the typical
developer he goes we would like to make
it a little bit clean up before we let
you guys see it so we don't have to hide
under the table yeah
sure yeah I think there's definitely a
lot of people been exciting the demo
we've been sort of deep into the middle
lab underground in the dark building
this for the last couple months and so
we just sort of just started showing it
to people but yeah I think there's a lot
of interest to find out more over the
coming months we'll talk more about all
the IOT strategy as well about how do we
do handle secure data links between the
car and the backend and so you know here
we just recovered the ink our side of
the story and so yeah in a real Kyle
they have something called can bus which
basically does all the connecting all
the little devices together in this case
we're using the Java groups is up here
same as we did the middle demo and then
once you've got there there's then a
gateway which bridges that model back to
the backend cloud like I can show a
diagram
so we steal the spectrum Oh from it so
this is a diagram of the keynote demo
this is slightly out today actually but
this basically shows all of the sort of
pieces involved and this is up up on
stage and the keynote but so on the Left
we have the pedals like Paul not happy
here in front of you the little because
you went cursor there this little guy is
the analog to digital chip we have here
working is act the same way and so this
was an earlier version we had it
connected up to a imx6 port we later on
swapped out for one of the K 64 boards
as we found it to be more reliable a
separate on stage oops and overheating
under the blanket yeah so yeah so yeah
it worked hopefully for several months
until we stuck a blanket over things
which have fans for active cooling and
they didn't like the bank you very much
and yeah the exec said oh no we don't
want people to see it beforehand and
it's like well we didn't have time to
test for sitting for three hours of a
blanket over it cooking and hot
electronics you know the good thing is
they can crash the bad thing is they
just did weird things you wouldn't
imagine they would ever do so it was a
interesting lesson so underneath that we
have our two logitech touch pads so the
touch underneath the display we were
just using normal just like I'm on Mac a
touch pad just an external USB touch pad
from Logitech connect up attic is like a
mouse we then had some LEDs from kc t4s
so the k 64m eboard you program it with
java much the same as we've been doing
so far with these devices brioni has 128
k ram so they're tiny little devices
they're arduino compatible so the nice
thing is you can deploy javed to them
and any of the electronic
that in the huge doing arduino community
would you just plug in and work so is
there a really cool device to be able to
bridge your java knowledge and near
doing a community of embedded goodness
out there we had the start button wired
up to that and then we had to touch
screens running off the device is very
similar to what I had here but bigger
versions of and then one of the imax is
is acting as a gateway in collecting all
the data from inside the car and sending
it back to the cloud server over a
secure link up and then from the cloud
server it's streaming into a java ee 7
glassfish server which is then doing any
of our business logic to calculate here
are mean time to failure for the battery
and that's the thing and then pumping
out by web sockets to the UI that you
see so we're kind of showing how here
java can be used for all the different
pieces in the ecosystem and putting all
the different sort of java products
together so that's the sort of main
architecture that we're following any
other questions yep
they're running Cara
you know I've gotta get ya yeah sensible
might okay yes so there as he has some
some of the haps you had some texts some
other things I help you design it like i
was searching for pains to do that or
like rending all the texts myself but
how do you think that I'm agree besides
the Lord
layout managers
and like tex-mex
I'm so which used labels only which part
of the only which part you can go up and
point as here if you want which part you
specifically talking about so it's that
guy
collagen
that's right and well the layout here is
actually not we we try to kind of leave
a natural nail that you get from effects
anyway so so there's very small amount
if any actual layout code so down the
left hand side is just toggle but Archie
they're not there so they're check boxes
because there are three states for each
button so you have the zoomed in state
the split view state and obviously this
state where it's some selected so we we
used to see those states of a checkbox
for that because you've got selecting
indeterminate and neither and the
content itself and so we just were just
a switching via I think we you score
painter to me to see how all the text is
just generally labels sometimes yes even
text nodes in a text flow or labels I
think actually in this case there's all
they're all labels one case inside the
dialogue we wanted to have a underlined
like hyperlink so in that case we're
going to use to terry text nodes in a
text flow but generally they're just all
and then the sizing and styling of what
font and color all comes from CSS yeah
so they're just labels and most of the
layouts are either just so some of these
like this one with the car view is just
actually statically done so it's just
done by I and seen builder it's in it
yeah it's just in a free-ranging
container like pain and then some of it
for example like here where there's a
bunch of buttons as just parts inside of
a box so yeah t resort of e boxes 8h
boxes or free-ranging so yes
so a lot of the time this actually what
we're doing is scaling so when we're
dynamically resizing from one screen to
another we were generally keeping the
layout the same and just scaling the
content so as a question of the back I
missed first the map renderer and yet so
we actually end up with two different
versions of this so the tiles i
generated so they came from
openstreetmap was our source of data so
i found a great little app pretty
quickly sheriff attire so there's a
great open source app called tile mill
it works with a Postgres database in the
background so basically you have a
Postgres database you load the data from
open street map in this case i just took
the bay area because it becomes huge and
then I you can they have a map version
of CSS so just lie effects you can style
the map using CSS so I do your own style
sheets for day mode and night mode and
Peter or own colors and Starling to
match the rest of our app from there you
can hit generate and you know either on
my laptop it took over night to generate
us or two and a half gigabyte file so
actually creates an SQLite database
which contains all of the PNG images or
JPEG images for all of the tiles so what
we did is I took the SQLite database
initially I was just running directly
out of that and wrote an fx viewer that
just uses a canvas and draws in later on
for performance we actually found it was
much faster on the embedded devices just
to have a number of image views so we're
just moving image views around and
programmatically swapping out which
images are displayed in those it's not
hugely hard it's a couple days work to
get something up and running and a
little bit of cheering
to get the pinch zoom and various
gestures working and then the second
performance to we're initially running
out of the database but SQL Lite for
some reason sized it wants to load the
entire database into memory which word
find one that was 16 gigs of RAM well I
tried to run it on a one gig of ram
device for two enough gig databases had
no thanks so I then wrote a nap in Java
that basically took their database and
wrote it out into my own binary file
format and then i used the niño stuff
and memory mapped files to memory map
that and read out that file so I did a
bit of tuning to basically to create a
custom file format for fast reading of
those jpeg images out on the device but
i guess overall it was less than a
week's work to get a map component
working with good performance of
embedded devices desktop one I had
working within a couple days was a
gentleman
ok
yeah so okay so actually um yeah there
was a little tricky inseam builder which
so effectively at the other week we have
a so let me just show you the white flat
so okay so we have app that I've XML
always contains the three includes on
the root container of a pefect smell we
have themed or CSS you can see that
highlighted probably can't read it but
it's added here as a style sheet and
inside theme dot CSS style cast dot root
is declared so you can see this is
themed CSS here you can see here's
here's da tree and inside da tree
basically I I said the the look up so
I'm exam if I can interject for a second
yeah basically technically how this
works is any property that doesn't have
the same name as a stand of FX property
can be looked up later on so basically
wherever you can specify color you can
use a name and it will look up that name
and it the clever thing it does is it
looks walks up the hierarchy so it looks
for the name locally and then looks at
each parent until it gets up to the root
so you can do things like set the
property on a toolbar and all the
buttons inside that toolbar will get
that property and you can create as many
so if you look in our mautner or caspian
CSS files you see a lot of examples and
we happened to start them with the dash
F X dash prefix because somebody felt
like that was a good idea at the time it
kind of bugged me 140 we shipped it and
now we have to live with it but I kind
of wish that they had a different prefix
it was more obvious which were actually
properties in which were named colors
like base and so forth but basically
they're just arbitrary names which we
have them to pick so mo BAM to pick in
here he used something much closer to
Java code capitalization here for a
constant for a sort of reference which I
think it's got kind of something I'd
prefers and naming stuff so I have this
one
for example detail color it's used in a
couple of the include so again so this
let's just change out to purple and save
and then if I switch now you see that
both the FX mail includes that use that
color I've changed the purple if i go to
attitude to one of those guys so let's
say if we go to the gate and the little
trick I i forgot to say earlier chi is
that this guy here he doesn't actually
have a CSS file attached to hit so if
you are you have a structure like this
we have you know lots of child f XML
tour includes so you know like like for
example in the car damn i won't mention
it there's loads of my 30 40 of them and
you probably especially if you're
running on embedded you probably don't
want to reload style sheets by adding
them to each of those FX and mel's but
inside I teambuilder you do want
obviously to see the graphic so if you
actually want to add the starchy to the
F XML you do that as you guys probably
know using a stylesheet property but you
can also use the preview menu and if you
look inside here if I go to remove its
stylesheet you see that I've added that
theme that CSS here now what seemed
builders doing there is it's just making
a soft link is remembering the file name
and that but it's not actually adding
theme dot CSS into your code anyway so
it means that you still get the
advantage of seeing all the graphics
without actually the overhead of so for
example if I remove that you can see now
that all the colors have disappeared
order all the rendering in fact deserves
disappeared so so yeah that's a neat
trick to use the preview menu so you
just go see she sees style sheets and
then you can add it again so I happen to
be on the right directory so there you
go theme cool well I think that's
probably all the questions we have time
for if you have more you can come find
us some if not now will be around so
thank you everybody</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>