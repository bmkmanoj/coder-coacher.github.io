<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Delivering Developer Tools at Scale with Swagger and the Open Source Community | Coder Coacher - Coaching Coders</title><meta content="Delivering Developer Tools at Scale with Swagger and the Open Source Community - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Developers/">Oracle Developers</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>Delivering Developer Tools at Scale with Swagger and the Open Source Community</b></h2><h5 class="post__date">2017-10-07</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/LX5VNs76wbY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">all right
11 a.m. so let's get started thanks for
joining me today
my name is Joey Vee
pending job one so I'm really excited to
be here and to get to be able to present
to you guys I think I have a pretty
interesting topic definitely affects my
team a lot hopefully if it affects you
guys we have some solutions that'll
they're interesting that might help you
in your day to day job so as I said my
name is Joe levy and I work on developer
experience on the Oracle cloud
infrastructure team so who's heard of
Oracle cloud infrastructure ok handful
hands so for those of you that aren't
know I think it'll help for me to frame
it around a little bit of what my team
is responsible for it before we get into
the problem so Oracle cloud
infrastructure is a collection of
infrastructure-as-a-service services all
the ones you usually see compute block
storage virtual networking identity load
balancing objects or java database etc
and the team is mostly out of Seattle so
there's a lot of people from other cloud
companies that are based in Seattle I
used to work at Azure and before I
joined Oracle cloud infrastructure and
basically what what's so great about it
is we provide really low level
networking primitives to make it really
easy to lift and shift enterprise apps
to the cloud and of course it's
optimized for work for quotes and on top
of that it provides a much better price
to performance ratio than the other
clouds are giving you so just one
example of that is we have bare metal
machines you can spend up elastically
News and the performance you get from
that is great but even the price you pay
per core and curve amount of storage and
RAM is less
so just to give a quick little intro
that
so this is the or quad instructor portal
you can see we have our various services
up here and so just say if I wanted to
do something very basic that you do an
infrastructure of the service like spin
up a virtual machine or a bare-metal
machine I click into launch instance
select an image of various services
select a shape you know we have our bare
metal shapes in here as well and hit
watch which I can't do that because I
haven't filled in everything but it
makes it very easy to spin up bare metal
machines as if they were kind of
virtualized microstructure and so this
this helps bring the problem going back
to my deck because what I just showed
you is basically one way of interacting
with Oracle cloud infrastructure
services all those various services can
be interacted through the browser
through customers that like to point and
click and type but that's just one thing
our customers like to do a lot of our
customers want to be able to automate or
control these things from the CLI or if
they're used to using chef they want to
be able to use chef to talk to these
things right
so essentially what owning developer
experience for the cloud infrastructure
means is make sure your customers
whoever they are whatever they might be
using can use what they're comfortable
with and what they've written their code
in today to interact with the Oracle
cloud infrastructure cloud services and
the first piece of that problem is that
as you guys probably know I know this
conference is Java 1 but it turns out
the development Ram scape is not just
Java right but this is an image from
2015
so I just starting my timer figured I
should keep track of that this is an
image from 2015 and you can see even in
2015 this was like two and a half years
ago I think there was a a large set of
languages being used quite a bit and
even if you look at something like
c-sharp a 2.6 percent that still ends up
being a ton of developers and so very
important thing to support and this was
only in 2015 of course in the
development world things move very
quickly so we're now in most of the way
through 2017 right can anyone think of
any languages that aren't on there at
all that are now fairly popular go
exactly go is the one I was thinking
outright go is nowhere on there and it's
now a pretty popular language Scala
might be another one right we're talking
about one that uses the JVM for example
so things change very quickly it's a
very fragmented landscape landscape
there's a lot of tools and languages to
support if you want to support all of
your customers and give them a really
easy experience where they don't have to
uh use a different tool or language just
to interact with your services so that
was just languages and then there's
tools right so in terms of DevOps that
can mean a whole bunch of different
thing that can be monitoring testing
configuration management deployment
continuous integration containers source
control like all kinds of different
things and each of those subjects has a
lot of different numbers and some people
like to use something in there because
they're familiar with it already and
they don't have time to learn something
new and sometimes it's that specific
technology just gives them lines better
with what they're trying to do than
another technology right so you can't
really make them switch to another tech
they're just gonna push back you want to
encourage your users to use you not give
them excuses not to so just looking at
config management for example puppet
chef saltstack ansible vagrant there's
just a whole bunch of things even just
within config management so if I were to
like sum up my my role in one statement
it's basically in developer experiences
it's fill in all these boxes right we
have a collection of services and we
have a collection of dev tools and we
want all of our dev tools to support all
of our services right and so right now
the services we have up top I've already
gone through that that's what we have
today and I think there might have been
a few introduced this week as well but I
I didn't update the slide in time for
that and then there's a collection of
dev tools that we already support as
rosea so we have a Java SDK if I - okay
Ruby SDK command line interface HDFS
connector a chef plug-in and it's her
phone so if you look at what we've done
so far we've done a pretty good job of
kind of filling in the boxes right
mostly green we have a few things in
preview that'll be out publicly soon but
we've done a pretty good job of making
sure whatever service in our cloud you
want to use from whatever dev tool that
we've released so far you're able to
interact and manage that service from it
so that ends up being 49 boxes and I
have a team of six dev so it works out
pretty well that's that's 49 total box
in seven dev tools seven services so it
seems okay right not to worry so yeah so
but it turns out we're not just trying
to support the now or suppose we want to
support the future right and so in the
future there's gonna be more and more
dev tools we know already that we're not
supporting everything the customers are
using now of course Fortran and logo are
probably not the next things will be
supporting it's just an example we're
not not trying to show our roadmap here
by or does anyone remember logo the
turtle that kind of goes around the maze
probably won't have a logo SDK for a
Oracle cloud infrastructure but anyway
we will have other SDKs and other dev
tools coming right even other than SDKs
we might have a powershell CLI we might
have ansible support we might have
puppet support right and we need to for
all those tools make sure we support
these services
so suddenly a fairly constrained box is
now you know growing linearly there's a
growing set of dev tools for these seven
services okay six deaths maybe is still
enough for a smiley face it's still
happy
but it's not just new devtool is coming
it's new services coming so our cloud is
is constantly innovating and expanding
and while Oracle probably won't go into
puppies as a service and haircuts of the
service so the Fenny company wants to do
everything it's probably Oracle we will
be adding various services over time
right and so that adds more and more in
this case columns where we need to
support our existing dev tools future
dev tools etc so now this this equation
we have in terms of what the job
requires it is growing right it's smiley
faces may be drooping a smile a little
bit so it looks like the tops getting
cut off it just says developer
experience again so in addition to more
dev tools coming more services coming
you have to think about the fact that
once you check a box once you say I have
javis gay support for virtual networking
that's you're not done right virtual
networking is adding things over time
you look at the amount of resources
involved in virtual in a virtual
networking right now it's around 25 and
over time they're going to add more and
more and that's because especially the
virtual networking one of the core
differentiators with OSI is we provide
very low level primitives such as you
can get very granular very flexible
about your networking topology such as
we can move very complex enterprise apps
that you can't really move to other
products so we have around 25 right now
over time vcn and all of our other
services are going to be adding more and
more so really to these boxes those big
boxes that we had green before is really
a collection of many boxes where there's
going to be even more and more features
within those boxes that we have to keep
supporting over time so it's not like
once we've got these in functionality
and the Java SDK we're done you have to
keep adding things
so of course acquaintances growing now
five-eighths probably getting worried
another aspect of this is the the
growing pace of innovation so a year ago
our org size working on an Oracle cloud
infrastructure was three hundred now
it's eight hundred fifty described a bit
of growth a year ago we had four deaths
on my team we now have six deaths
so we also grew but not at the same pace
and if you look at our future growth I'm
the developer experience team is just
not planning to the staff at the same
growth level as the rest of New York
right we already have somewhat of a team
so we'll incrementally add but a new
service is going to need a whole bunch
of new people on that team right so the
pace of innovation is gonna grow and the
growth of our of the developer
experience team is not going to match it
so we need some way that it's not just
one Morehead works on this one more
thing in order to go so another piece of
our equation is the growing pace of
innovation
so our smiley face at this point is it's
probably not so happy I couldn't really
find a smiley face that was like a
little sad so just kept the scale
another thing that plays into it is each
of these developer tools you're not just
putting out a public version so in
addition to the public version which
only supports production level
functionality there's a preview version
which supports everything production
ready and also some previous eaters that
we're not willing to certify his
production ready yet
right so the customers can use it early
and then there's even before that
there's internal previews which are
available internally to try out early
but we're not ready to kind of take in
public customers even a beta and there's
just internal only releases of SDKs
which are some services rely on other
services in our cloud such as the load
balancing service of course needs
compute instances so they use our
compute service but they are they have
the ability to kind of configure some
functionality that our public customers
can't just cuz we trust them a bit so
those parameters we don't want showing
up in the public SDK and of course even
if they did show up we need a control
service side who can call what
functionality we can't trust the client
but we also don't want the customers
saying like oh it looks like I can
control this kind of thing on the
compute service when really they can't
read so we try to hide everything they
can't
from them at the different level of
scopes so we basically have a set of
release scopes as well so so this
equations getting pretty big this is
really a lot for six steps to handle so
our smiley face probably isn't smiling
anymore
um he's more dead from stress so that's
kind of the problem my team faces is
with a small team how do we scale the
support a growing set of dev tools a
growing set of services the rapid pace
of innovation multiple release scopes
and more and more features coming for
service over time and the three things
kind of that have helped us water
swagger open sourcing and API
consistency so who here has heard of
swagger before okay good
a lot of people so swagger is recently
also been renamed to open API I think so
you may have heard of it with that name
and basically what it lets you do is
declarative we specify your service
interfaces as kind of a code file and
it's not a code that you can necessarily
just run it's more like a template file
like a chef template or a terraform
template for example but because it's a
file you can put it and it's just text
you can put it in source control you can
branch off of it you can do code reviews
on it you can do dips on it so you can
kind of control it as if it was just
code and it basically as a source of
truth for what your service interfaces
look like and it's Swagger's open source
so there's lots of generators out there
lots of parsers for swagga that are out
there open source and it's useful for a
lot of different things of course I
mentioned you can encode review it and
manage it as if it was code so just
being able to code review your service
interfaces just like it was actual code
using the same tools the same process as
useful in addition to that because it's
that source of truth it can kind of
contain all the information about the
interfaces and you just generate various
things from that so you generate the
rest API documentation you generate the
service scaffolding so obviously you
can't generate all the service nitty
gritties but like just the part that
knows what parameter
take in what types they should be and
can throw errors if unrecognized
parameters common parameters of the
wrong types come in right you can
generate that way and what my team uses
of course specifically is client
generation so we generate our Java SDK
our Ruby SDK or Python SDK or CLI and
we're working on terraform generation
right now and so just one example on
what a common operation looks like in
swagger an infrastructure as a service
offering that doesn't have a way to
launch virtual machines probably not a
very good infrastructure as a service
offering so this is what the launch
instance of such nuance virtual or fit
or bare metal machines looks like it's
slightly simplified but this is kind of
a gist of it so you can see if you can
see my laser pointer up there and you
have the path slash instances and and
that's the HTTP path and then you have a
HTTP POST that he is the HTTP method you
do on that app and then you can see we
have the descriptions embedded in here
we have an operation name in here which
shows up in the SDKs and API Docs and
then you can see it says it takes in via
the body a parameter that's required
which is lawn census details which is a
reference and so I've also pasted in
that reference from a different part of
the spec and so basically what that that
references is a model that says in the
body these are all the fields and their
types availability domain compartment ID
which is kind of like a way of grouping
things for optimization purposes image
ID for example if you want to use
Windows or to Center less right and then
you can see at the bottom it'll also say
which are required or not so you can
declaratively say all this in the spec
and then there's also the responses so
in this case I've left off the error
responses but you can see saying a
response that comes back is a 200 ok and
in that case you'll get back in he
tagged as a header and you'll get back
another model in the body called
instance I haven't pasted instance in
but in reality it looks very
watch instance that's very similar
properties
so and let's go into what that operation
looks like specifically when it's
generated so from the REST API Doc's
perspective so this is the Oracle cloud
infrastructure rest state I see it on my
computer but I don't see up there let me
try to fix it perfect
that is strange
all right I think I figured it out
so here's our REST API documentation for
launch instance you can get to see if
ever it should be post on slash
instances we everything you can say it
takes in the other body watch instance
details which has all those same fields
I talked about right the department ID
image IV and the descriptions for each
the fact that they required the types
min and Max is all that kind of comes
through in the API Doc's so instead of
having to write that manually we just
make sure the swagger spec for the
operations are correct we use that to
the next time we put out our API Docs or
our SDKs or C lies or other dev tools
they just kind of support what it's
mentioned in me
swagger spec so there's show you some
other examples so since this is Java one
I think you guys probably like Java so
let's show what the Java looks like so
this is the API reference here Java
stick and specifically their launch
instance request class which you can see
has watch instance details of them as a
class and you can see that takes in a
whole bunch of those same parameters
department-id and just to show you one
more I will pop open the Python SDK as
well show you that
so this API reference with Python SDK
you can see again we have a launch
instance operation here this is all
generated through so the description is
coming from the swagger spec the
parameters that takes onto instance
details another sink fields and their
types and things like that
so and we get all that kind of through
swagger and of course the the CLI is
well generates an operation for lots
instance that has a parameters for what
was in the swagger spec so we have one
source of truth and we generate from
there and now I'll show you a little
demo running the generator adding adding
a feature to the swagger spec and kind
of how all that works together makes it
very easy to have any features without
having to manually write code and make
sure that code isn't buggy and things
like that
so
now I know this is Java 1 and so I
should probably be showing Java but I
want to also show you that a support
more than we said I can make this figure
not exactly sure out but just of what
it's doing is it's this is our Ruby SDK
and it is loading the config file it is
instantiating the identity service
client
then it is calling list users and
spitting out how many users there are
than it is creating a user just setting
it's a random name and some description
creating it and then it is again
spitting out the number of users that
are in suicide so if I go and actually
run this
so does anyone know notice something
strange about what that says hopefully
you guys can read it Big Tex big
exactly so someone said it it created a
user and there's still 25 it's kind of
weird right so we'll skip the whole
debugging step and I'll just tell you
what the problem is so going back to the
code or basically what the problem is is
that the list users API doesn't let me
pass a page size and it by default earns
25 users and so what that means is if
you have more than 25 users and you're
just getting the first page it's gonna
look like there's always 25 users at the
end that's why we have this issue so
let's say the service is like ah right
we forgot we need to have a page size
parameter such that the user can of
course someone can paginate to get the
full set of results but let's say an
easier way in this case would just be
the pass a very large page size so how
the service goes and actually adds that
functionality service side and then
there's steps tab that - the swagger
spec so this is the identity swagger
spec and you can see this list users
operation which takes a compartment ID
query parameter a pagination token if we
did want to paginate through different
pages and then if I wanted to add a
another parameter to this
excuse me another parameter to this and
now I'd can adding a what we call limit
but it's essentially a page size and so
this is a reference and I can go to
where that actually is and you can see
it's adding a parameter called limit in
the query string which is an integer
which has a minimax right and so let's
say the service goes and does their side
of making sure the production server
supports this but also wants the API
Doc's the SDK CLI and the other dev
tools to also support this parameter
instead of having to have a lot of
people go and understand this name
feature and make the changes manually
you can just generate it through so this
is a file from the Ruby SDK for the
identity service you can see we have the
list users operation in here which has
parameters for a compartment ID and page
but doesn't have anything about women
común plus thank you
that's awesome
thank you so as I said I came from
Madrid before this so I'm used to the
Windows computers instead of the Mac's
thanks so there's nothing about limit in
here and that's because there was no
parameter called limit before I just
added it to the spec so I've added to
the spec now well let's actually go and
regenerate the revs:807rpm all these
files should be done very soon and so
instead of having someone go and
manually update you should leave SDK is
and potentially have issues doing so and
run into bugs or just have to understand
how the future works they just hit go
and it supports that in the future so
now if I go to my identity clients you
can see magically this limit parameter
has appeared right which maps to our
page size and so now if I go back and
actually pass that parameter
and run this program again
much better much better so that's a bad
as simple as a guts in terms of adding a
feature and making sure all of your
depth will support it now I wanted to do
that for the other SDKs it's the same
command just targeted in a different SDK
directory basically and it'll spit out
Java and Python CLI and API Docs and all
that so one source truth everything is
just build off of that
so swagger is really useful they
definitely saves us a lot of times but
there's of course some gotchas we ran
into which I want to cover with you guys
so one piece is since this code is
generated making changes to the
generated code it'll just be overwritten
if someone goes in and manually changes
something the next time you're on the
generator that gets over it so making
changes to this really means changing
the templates used by swagger generator
or the swagger generator itself the
other thing we do is so for developer
tools it's usually okay to represent
similar interfaced with the REST API
shows for a CLI tool for example you the
user might be a lot less technical it
might be an IT professional it's not
very technical and you want to give them
a very very easy-to-use experience so
what we do is we we write higher-level
commands on top of these generated
commands that takes advantage of all the
generated command functionality but
still allows us to give the user
slightly easier ability to do some of
these things
another thing is maintaining backwards
compatibility so one of the things we
ran into with the Swagger's where with a
default java swagger generator we use is
that for example for the java sdk which
spit things out is positional parameters
so your methods signature if you had
parameters a and C we pass the value of
a comma the value of C as positional
parameters and so if we added b in the
future you the method signature would
change to be a comma B comma C and the
users code that was already calling that
operation would now be passing the value
of C for the value of B because the
positions change right so one of the
things we had to do was you know
modify it to tonight to do such a thing
so for Java for example what we do is we
use the Builder pattern where you you
pass a an explicit name for every
parameter instead of relying on position
right so and swagger relying on
open-source software is really great
because it gives you a big leg up to
start from but it doesn't mean you don't
have to do your due diligence to make
sure it supports your use cases and for
us backwards compatibility is very
important when we're talking about
enterprise customers another con to
Swagger is that usually a ruby sdk
writer someone who writes ruby just has
to know about Ruby Python writer just
has to know about Python they don't need
to know about swagger they don't even
know about meta programming they can
just write Ruby and stop they can just
write Python it's done now they need to
understand swagger they need to
understand meta programming and they
need to understand even tooling that
they're not used to right may then for
someone uses Java makes a lot of sense
well understood fits into their existing
processes but for someone writing Python
or Ruby they probably have very little
experience using maven unless they're a
real polyglot right so it requires
getting someone who's a polyglot or
definitely willing to learn new things
because using swagger a lot of times
means not just using that language that
you're trying to actually put out to the
customer or the tooling behind that
language
so the next thing we do that that really
helps us out is open sourcing so the
reason this is really useful is it it I
of course it makes us a good developer
citizen and that we put out our code and
people can use it to learn from and
using their own projects but the other
thing it helps with is actually creating
developer advocates for us so it's very
common for people to go and record
issues on github where you open source a
lot of our SDKs in dev tools which lets
us really quickly intake that without a
whole bunch of layers in between like
Oracle support and things like that it
also gives people a way to just fork the
code make pull requests against them to
fix issues that people have filed or add
new features or even fix issues that no
one has filed yet a lot of people will
just answer questions of other users
like oh well actually this was user
error and here's how you get around that
work oh yes that's a legit issue but
here's a workaround in the meantime well
someone works on a fix for that and of
course improving documentation you know
even if they they don't want to mess
around in the code but do you want to
help out somewhat they can just fix
documentation right and so what this
does is not only does it make theirs
putting out a good products product
great loyal customers but these
customers actually become contributors
to the project they become partial
owners of it and so in doing so they're
actually a lot more likely to advocate
for it to their friends to their
colleagues because it's not just
something to use it's something to help
create now so in addition to the
productivity gains we get up having the
community help answer question its bugs
add new features you're also just
creating advocates for your product in a
much stronger way than just putting out
the product
and it's useful for hiring you know if
you get a lot of good pour request from
someone whether they have an interest in
the area and an acumen for it right so
it can be a good way of just testing if
this person actually was formerly on the
team what they do a good job
contributing to the team can be a good
way to find people to hire other things
github gives you outside of just open
sourcing is it's useful in that it gives
you a very easy way to store archived
releases so every time you have a new
release github will store just keep
track of the past releases and there's
other tools that will do this to you
know pipe I rubygems maven it all keep
the old ones as well but if you have for
the CLI for example the CLI user might
not be used to pi PI or maven or ruby
gems and so don't make them understand
these developer tools just make them go
to github and actually click on pages to
find the verge and click download and
it'll store all the past versions for
them so instead of us having to go that
infrastructure github just does that for
us another thing is it gives you metrics
so you get metrics on how many quotes
you have how many downloads you have how
many page views you have on any page
whether it's a specific issue or a
specific code file github will give you
all those metrics and the lastly it
gives you as a way for users to really
easily subscribe to hear about updates
so if you put out if someone uses the
CLI and wants to know when there's a new
version they click watch on github next
time you see a release comes up they
know about it and it's not going to
their tenancy admin that might be three
levels removed it's going to
specifically the person who cares about
it so so far we've actually open sourced
almost all the dev tools we work on so
the Java and Python SDK the terraform
provider and the chef plugin and that
the CLI just to show you one of these as
an example I'll open up the terraform
provider
sorry
was the question did I cut in pay oh
really
you're right right good catch the chef
plugin is also open source the link is
wrong it's a good catch so this is it
see if the man plus works there - it
does
so this is our terraform provider on
github as you can see we do a whole
bunch of releases of it on here has 25
contributors we have way less than 25
people working on the terraform provider
so a lot of these are real customers or
other people in Oracle that are using
this in some way contributing to it you
can see we have a healthy amount of
issues and a healthy amount of flora
quest 64 people of fort did 68 people
have started so there's really a
community around this in terms of people
helping answer questions people finding
issues and posting them people fixing
issues for us it really helps us scale
so there's some comms open sourcing as
well one of those is that we don't
actually use github as our only source
of truth so we actually have an internal
repository and we basically sync it to
github and similar we sync from github
to the internal repository and because
we do it that way we want to make we
want to be very careful to make sure we
don't lose changes that customers mean
publicly when we sing it to internally
and we don't base in the whole syncing
process we don't want to lose anyone's
changes from the fact that we kind of
have two sources of truth the public one
an internal one um
similarly we want to keep things private
so just one example of that is our test
cases you have to authenticate somehow
and so we have private keys that we use
to access our tenancies the ideas of the
resources and our tendencies are in some
of our tests and we don't want to expose
those IDs publicly just because it'd be
more interesting more information
disclosure than a work less comfortable
with so we need a way of keeping things
that we want to keep private private one
way is get ignore which is kind of a
traditional way of doing it but get
ignore is more of a blacklist and so we
also have a whitelist mechanism we have
a tool that you have to if you want to
expose something new you have to
expose at least like a glob syntax for
it in the weightless file and only then
will it in our sinking to github make
sure it goes out and so that prevents us
from it if we forget to put something in
they did ignore or if we have a preview
service where we actually do want it to
be in the internal git commits but we
don't want it to show up publicly yet
because it's not publicly ready yet we
have a way of kind of white listing
which it show publicly and the the last
one which is a pretty interesting is the
fact that since we generate all this
code what does it mean if someone goes
and makes a pull request on top of
generated code as I said earlier you can
modify generate code the next time you
generate adjusts overrides it so how do
we deal with that and what we do there
is for one there's a large set of code
which isn't generated right like the all
these calls and abusing an HTTP client
that we've written and any changes in
that layer for example it's not
generated someone get over overwritten
so for example if our HTTP client didn't
support Windows or if it didn't support
retries both of which are things that
have come up excuse me
you know those poor requests we can just
keep foot brother pull requests that are
made to generated code it gives us an
exact way of like how we would fix this
issue internally and exactly what the
customer wants in terms of an interface
that fixes the issue and is the
interface they want to consume it that's
exposing a slightly different interview
so what we do there is we actually keep
the pork West open our team makes the
same change to our generator the
templates for the generator and then
only only then do we kind of merge in
their polar quest and the reason for
that ordering is because we merge in
their polar quest and then something
else comes up and we don't actually have
time to make the same changes to our
generator that they've made to the
generative code we've merged they're
changing and the next time we release we
to overwrite their changes and that's
not good if you're trying to create
developer advocates don't take in their
changes and then throw away their
changes so we don't get quite as much
value out of the poll requests to the
generated code but it still makes it
very easy because there's a lot less
research in like what's the right way to
expose this to customers what is the
problem and what would be a way of
solving it even if we weren't generating
all that gets done for us it's just a
matter of making sure the generator can
generate through that functionality so
it still saves us a lot of work and
allows us to create developer advocate
so the the third thing we do is API
consistency which helps a lot so for one
it's of course useful to the user when
they have one way of to paginate
throughout all the different service API
right or one way to do polling if
they're waiting for asynchronous
functionality to complete so that's
useful to the user but the other piece
of it is it allows us when there's
consistency across these services it
allows us to do something that might be
a manually writing of code test once per
dev tool so we have an auto paginate in
Ruby we have
auto waiters that you can use in the
various SDKs and instead of having to
write that for every different type of
pagination or polling functionality we
write it once and because all the
services support pagination and polling
in the same way that functionality we've
written once works everywhere so it
reduces our work that we have to do for
you resource per new service if they
just do things the same way as previous
services and of course it makes testing
easier when when resources have a
similar lifecycle we can copy and paste
tests and they will 90% cover what the
general test of that resource should
look like now it's not always that easy
but when things have a similar lifecycle
we can kind of start with code for a
different resource and use it as a basis
for the new resources were adding and
the nice thing about swagger is it
actually makes API consistency a lot
easier than I touched on this a little
earlier but because it's a codified file
that you can control in source control
and diff and do code review it's very
easy to review it in the same way you
review actual code through the same
tools and processes and branching when
you need to do that and it's very easy
to we actually have tools mated with you
so like pagination and weighting
behavior for example if you have a list
API that doesn't expose the the paid
next page parameter in the same way as
other services and doesn't expose the
page token to pass into that next page
parameter the same way of other services
our auto review tool will catch it and
so that saves us time even in the review
of these
consistency efforts we try to do which
in turn saves us time in the development
of the dev tools API Docs and anything
that uses the swagger spec so one one
other problem that I mentioned earlier
that I can quite address is how the how
do we deal with multiple release scopes
so the way we do that is said you have
we just be done because the swagger spec
is just a file you can control the
source control and your branching on it
allows you to have different branches
represent the different releases right
so we have a release branch it
represents production dev tools we have
a preview branches represent preview dev
tools we have an internal branch which
represents internal dev tools and these
are branches for the swagger spec so
when I want to add a new feature that's
only intended to the internal I branch
off the production branch release I have
that feature I code review it of course
and then I merge it into the internal
branch right and then the next time we
through CI CD generator SDKs off of an
internal branch the internal SDK is it
just includes that feature
similarly if I have a feature that's
meant to go public the person we want to
put it in preview to test about it's not
really production ready yet I again
branch off of the production branch add
that feature merge it into preview when
the CI CD for preview branch generates
the SDK is an API Docs it includes that
feature now in our preview dev tools and
three V API Docs and then when we
consider that ready to actually go out
you know pull on production ready you
just merge that same branch back into
the production branch and of course we
have CICE on the release branch that
production grants to generate those
production SDKs and hope they're not
publicly so this gives us a very similar
way of how you manage code for managing
your service interfaces and basically
the different types of SDKs you want to
put out another dev tools
another thing we do just in case
branching isn't enough we kind of have
two ways of preventing non production or
the functionality from getting in the
production st dev tools and non-public
functionality from getting in any public
dev tool so swagger also lets you add
basically X - whatever you want fields
in the spec to add your own kind of
custom annotations so one of the other
things we do is when you run the code
gem that generates the production SDKs
and other dev tools it'll ignore
anything tagged preview only and
internal only operations parameters
models they just won't appear there so
even if someone messes up a branching
strategy we still have protection and
similarly for the preview SDK
right now you know any SD any dev tool
we're putting out that isn't meant to
supports internal functionality those
internal things are tagged with internal
only and so they just won't show up in
anything other than the internal dev
tools because under the code gen
responsible for the internal dev tools
will whitelist
things tag that way
so and of course the best way to help
scale is just to have more people on the
team right and so if if this kind of
thing was interesting to you you know if
you're a polyglot developer if you like
building things for developers might be
interesting for you you know you know me
or talk to me after so with that that's
the end of my presentation I'll be
taking Q&amp;amp;A now and thank you guys for
coming I hope it was useful to you I
really appreciate your time Thanks
any questions yes
yes so so the question was he kind of
skipped over the server-side
implementation of page size in this case
right and so I did skip over that and of
course the service team has to do that
and while they may be able to
auto-generate the scaffolding the stubs
as you said they obviously have to
handle it through manually written code
after that and so what I skipped through
is the service team actually doing that
manually written code to support it yeah
and not fully they can use it for the
scaffolding bit the stubs but not below
that in this case that pagination
printer sorry that page size parameter
limit actually is already supported by
the services I have just kind of removed
it from the specs such that I could do a
quick example skipping over the service
side implementation sorry Han Cruz yes
that's a good question um the question
was can it handle soap services and I
actually have a lot less experience with
that in theory I mean that the general
methodology of like declare what an API
looks like and generate it into
something you can do regardless of
whether it's rest or soap or our PC or
something custom right in terms of
whether the like swagger tools that are
outdated there today and swagger
specifically support soap it's a good
question and I don't know the answer
clearly rest
it's a good question the question was
why not just open source the generators
so that you don't have to deal with this
like someone ads generated code and and
how do you handle that so the the reason
for that is we've actually thought about
doing it and we may do it at some point
and may be able to back your java one
next are you talking about that but
there's pros and cons to it right one of
the cons to swagger that I mentioned is
in order for someone to really
contribute if they have to understand
swagger and meta programming and
something other than the language and
and maven which might not be used for
that right and and maybe for you guys at
JavaOne especially at least with the
maven part like that just fits into what
you guys do already right but if we're
talking about public customers who we
want to make contributions and we want
to turn into developer advocates we also
want to remove barriers to let them make
changes so it's it's there's definitely
pros and cons to both right like it
wouldn't it would save us work if they
just make the changes to the generator
but they may not even it may be it may
seem like a much more insurmountable
task that they have to change the
swagger generators and the templates and
then run the generator to produce
something right so it's their pros and
cons to both
it's true I mean you don't have to use
maven there's other ways of doing this
it's still even if you take moving out
of the equation it's still more steps
right then rather than directly adding
it and it really depends on the customer
set right if your customer said most of
them we think would contribute we'll be
able to go through the extra steps do it
yeah yeah and honestly we may move that
direction it's kind of in an open
question internally is how much do we
expose the innards of what's going on
here
publicly yeah good question
oh that's great I'm glad it's been
useful what a what depth to where you
use them they're fun yeah I will I will
make sure the terraform is dead no I'm
glad you've been happy with that</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>