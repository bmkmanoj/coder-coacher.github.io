<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Ask Tom Office Hours: Python | March 13, 2018 | Coder Coacher - Coaching Coders</title><meta content="Ask Tom Office Hours: Python | March 13, 2018 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Developers/">Oracle Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Ask Tom Office Hours: Python | March 13, 2018</b></h2><h5 class="post__date">2018-03-17</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/IxbpFtJ3pQk" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so welcome to the first Python and
Oracle database office hours this is
March 2018 for those following along no
clocks have changed in some regions
hopefully all manage to get up very
early this morning and the 10 we have a
standard safe harbor statement here for
Oracle
if you've ever intended any Oracle
sessions you'll know that this just
basically means whatever we tell you
don't make any purchasing decisions upon
what we're telling you especially the
open source world where we are because
everything is very fluid so about us so
these is the key slide here to remember
so you have Anthony - a ninja on the
call he is the creator and maintainer of
the CX Oracle extension for Oracle
database and Python myself Christopher
Jones I'm a product manager so therefore
doing some of the inwards and outbound
kind of communication on various
scripting languages
Blaine Carter is a evangelist in the
same area as focusing mostly on Python
if I can say that although has been
going around to lots of conferences
looking at various little hardware IOT
kinds of devices and things like that so
we're the sort of main contacts here for
a Python CX Oracle in the database land
just again to kind of keep warming up
well we're waiting if anybody's late
joining this is what our sort of wider
group looks after so we look after all
of the database access API is this sort
of right-hand column if you can see the
cursor into Oracle database I'm gonna
say all I mean anything in there sort of
the red and the blue so particularly
obviously today we're going to speak
about Python on the CX Oracle don't base
driver but there's a lot shared in
common in terms of access and features
with all of these other kinds of
database drivers no Dalek will be be was
pretty hard at the moment PHP is very
popular so if you see any sort of
collateral documentation tips about how
to set up databases and networking
things like that for any of these open
source drivers they're probably going to
apply to CX Oracle as well also have a
good communication with all of these
other Creators maintainer z-- of these
third-party drivers and obviously on the
right
hand side you can speak to cloud you
have to have the obligatory mention of
Oracle cloud in there so you can speak
to cloud databases using any of these
drivers or your on-premise databases
which I know most of you still have so
just a little bit about the session
today it's very brief we schedule it for
half an hour just so you didn't have to
spend a lot of time we can just hang
around for as long as you really
actually want these office hours are
going to be regular so don't really have
to join right at the start you can sort
of hop on later if you want and just ask
your questions but I'm going to keep it
brief we've got just a few connection
tips just a sort of icebreaker just to
give you some discussions it's always
the start of getting attached to the
database and so just cover a few things
FAQ is on that not everything just a few
bits and pieces and then you know step
three over to you for your questions we
had a couple of pre submitted questions
and we'll try and cover those as well so
the overview so as you might have found
this is my Mac I don't know quite what
you're seeing there but there's a chat
unmute if you do want to speak I think
I've just made it so you can unmute
yourselves but it's probably better if
you're going to chat first and say hey
you want to talk before before you do
that and then you we know what to expect
but the main key thing about office
hours gives you the voice so I don't
want to be talking here for a long time
I've got those five or six slides and
then we're just going to sit around in
silence waiting for your questions so
let's go on I've kind of lost the chat
off my screen so playing if you can just
tell me what's what's happening let me
know few connection tips okay so CX
Oracle Connect I think you all know is
the main way to connect as a alias for
this as well but this is the standard
one this is its prototype now I kind of
wanted to talk about this DSA and that
the connections string to the database
so this has a few little tricks about it
and one of those things is that it's
actually quite flexible you can pass
lots of different kinds of formats of
these strings in and they're kind of
canonical one that we recommend people
use is this easy connect string which is
basically the host name and the database
service so every database nowadays has
what they call the service
name is kind of abstraction in the
network layer to say hey how do I
actually find that database on a
particular machine and it's abstraction
because it couldn't forward through you
know we've got this kind of clustering
database system RAC RAC and so it knows
how to access any of those nodes just
with the one name a few other
abstractions the experts will know about
but this is the basic format this is
going to be the simplest thing just to
stick up here in the DSN and it can also
be a alias just a simple keyword value
which I'll show you an example in a
moment which is maps to a connection
string which looks kind of like this you
know particular configuration file that
eNOS name Solara file and if you have a
TNS name so verifier you've then got to
tell CX akhul how to find that file and
things don't start getting messy but
you've got to know the one trick on how
to do that some of this stuff is in
documentation so I'm not going to go in
details you can ask me questions so I
don't bore people who do know this and
the third way or fourth way really is
the string from the sector make DSN
sorry and I glossed over this but you
can actually just put the force of
connection string there in quotes in
there PSN name so just going into our
here see the alias DNS name so you can
see it's really just got the alias sales
it's a configuration file particular
name Oracle look for in certain
locations or you can set an environment
variable to specify which location and
you'd say again yeah which machine which
port and the service its effectively
like that easy connect syntax in its
most simple form you had a lot of other
options here's a one of the options but
you get all sorts of failover and
timeouts and other interesting options
there to get much more control on this
but then it's much more complex so in to
make DSN this you often see I guess
perhaps more in old-school documentation
if I can call it that and really just
returns a string
Anthony's added in shouting information
in recent versions so if you're using a
shard of database without 12.2 version
of Oracle database then you can specify
which shard you want to attach to
we're really gonna be using one of these
two forms and as you probably read ahead
do you need to watch out for the suit
versus service name we still see a lot
of people tell people that this is the
way to connect this this top format and
in fact that's probably not going to
work for a lot of people they're
probably gonna need this this bottom
format because nowadays we use service
names to indicate where the database is
on on a particular machine let's see if
this is the system identifier is
old-school I kind of got obsoleted
wodden version I don't know seven or
eight of Oracle database it's still
around you can still use it if your
database has been set up that way like
you're going to start seeing more and
more of these things especially with the
pluggable databases coming you can see
service names rather than SIDS
so just just make sure you know which
syntax to use and you probably find that
the Easy Connect syntax is just as easy
to use because this is effectively just
these gives you the the same connection
values that the easy connect syntax
would okay encoding so I don't know
where that Anthony wants to speak to
this but this is something else people
do get tricked a little bit about that
when you're accessing data in the
database you will be in an and encoding
the database CX Oracle needs to have an
encoding typically we say they should
match but it doesn't actually have to be
true they they're not supersets you may
start seeing some some data corruption
and this is just an example utf-8 but
they're a whole bunch of other values
that you should have put here you know
obviously ASCII is another one and
really you want to make sure that you're
what we call the client you know the
thing which is connecting to the
database in the old client-server mode
has a compatible encoding with with what
the database is configured to use so
this is an easy way yes we can reference
this old-school environment variable if
you've got that set in your environment
but we don't have to you can do this all
programmatically in at connect time
that's one little tip there and I think
the last tip I've got for connection is
this threaded mode and we do see people
sometimes get tricked by this and
because you know threaded mode things
kind of happen well randomly if I can
use use that word
you do want to make sure if your
in a threaded environment that you've
got this set to true appropriately
otherwise you might start seeing you
know randoms of corruptions crashes
whatever and they in the CX Oracle or
the Python world so no other side
comments on that I think the last thing
I wanted sorry I'm Anthony but you know
say something no all I'm gonna say is
that my computer is locked up so
surprised you can still hear me
okay I can't hear you
so I just want to go into connection
types so we spoke about how to connect
to the database and you know what you
actually pass in that connect call there
are different forms of connections that
you can have in CX Oracle and in the
database here I've got a diagram you
might have just seen coming up next
which I'll talk to but effectively on
Python side you get these top two you
get a stand either a standalone
connection so you create it and then it
gets closed you can force close it or
you know Anthony likes letting it close
when it goes out of scope or you can
create a pool of connections and pooling
is good you know it's a highly available
you've pre created this pool connections
are ready they're attached to the
database when you application these one
it just get something from the pool
locally uses it puts it back in the pool
for something else to use obviously in
this case you probably want you know
threaded equals true if you're using
multi-threaded application just using a
shared resource that pool is going to be
available for all users of your your
Python process to actually access
concurrently and I say it's more
efficient because it's that pre creation
obviously got to create those
connections upfront but then you're not
destroying them totally you're just
keeping them open but inside the pool
for ready for reuse for something else
who wants to use it so that's the CX
Oracle tier of the application at the
database remember that question Chris
sure do we have any documentation I'm
connecting to it to any cloud instance
yeah there's some some documentation out
there I can dig up the link
there's a there's a paper out there on
that and they obviously they're
different kinds of cloud instances so it
does does vary we've got things like
exudate or Express I know I've got some
documentation on that but effectively if
I can put it this way it's not our
problem yeah once you once you know the
connection string for your for your
cloud service then you just stick it in
here and then you know the rest is up to
the cloud service in terms of what ports
are open and permissions you actually
got you know database cloud still has
some kind of IP address or machine name
it still has some kind of service
running there so once you've found those
things then the rest is it's really just
a matter of making sure the ports and
things are open so I understand why
they're questions because there are some
detailed backwards and forwards but it's
certainly not a problem which is
specific to CX in Oracle I'll try and
pick up some of that later you know I'll
try and put up the doc on that a little
bit later from the Oracle cloud
instances there's usually documentation
attached to the the type of cloud
database you're using for example if you
using the Exadata Express there's a
authentication there's a key package
that you download from exited Express
and there's instructions on where to
extract that to and once you have all
that set up which is exadata expresses
instructions for setting up then you
just connect through TNS names from CX
Oracle like normal so from the Python
perspective you won't know the
difference obviously you know you want
to make sure that you're running Python
close to the database otherwise you're
gonna get a loose latency issues so yeah
that's your user choice obviously run
Python in the cloud if you want or on
your own premise
let me go back just to this theme I
think everything got this and one and
the diagram slide which I said I was
going to talk to you so you've got two
kinds of connections that you create at
in C X Oracle your choice of how you
want to use it and then in the database
like we've also got a kind of pooling
this which I should have spelled out its
database resident connection pooling so
as you see in the diagram in a minute
every connection to the database takes a
little bit of memory on the database
server side if you have lots lots of
connections coming from Python from all
your other applications you may have a
more memory required for those
connections and you actually have
available on that database server
machine so you start then doing some
kind of pooling in the database and like
every pooling solution it's basic
premise is that not everybody's trying
to use a connection at the same time so
your shared resource or something can
take something out of the pool use it
put it back in for somebody else to use
we do recommend in general use it with a
session pool it's kind of you know the
next tier up in terms of scaling and the
reason for this is that then as we've
mentioned you know this pool is always
available so this keeps the connections
are open to the database and you have
end up with pulling on both both tiers
but the connections are always available
rather than still being closed and
created on demand so let me just go into
this sort of final diagram so ignore
everything to the right so I'm just
going to look at the left so this was
the two kinds of pooling that ice two
times of connection in CX Oracle and the
application here so you have your
dedicated connections you know create
connections the database creates a kind
of process you use it great when you
close it this also gets closed in the
database side and in CX Oracle we spoke
about the session poor things they have
a pool of connections which could grow
and shrink and then these have you know
some memory being used in the database
tier and they was you know those
connections will stay available open all
the time so these processes and the
database this this memory won't
disappear obviously when if it shrinks
but you know at steady state when you've
got a constant number of users on the
application constant number of
connections open and you're just going
to have a highly available connection
in the application to use but these are
all going to use a chunk of memory I'm
not going to go into sheds you may know
this as mts it's a kind of midway
between these these two an available
option
this is database side as subtle
variation in terms of where the memory
gets used but but let's look at this
database resident connection pooling and
as I mentioned you have a pool in the
database you can use it with your
standalone connections from CX Oracle
you can use it with your session for
connections from CX Oracle and you have
this pool of processes in the database
so you don't have one-to-one
correspondence between all of these what
CX Oracle thinks is connections and open
connections CX Oracle's the streets this
is something in the pool that it can use
but at the moment this is idle not being
used if somebody in application says hey
I need a session give me this
disconnection from the session pool
it'll get attached into a process here
in the pool if there if there is one
available or it'll be queued up until
one is available so you kind of get
pulling it at both sides in this at this
model and if you have multiple machines
multiple different styles of connections
and whatever DRC you can still be useful
so that's kind of ten fifty thousand
foot overview there's some white papers
on that particularly I guess there's a
PHP the scripting language PHP white
paper on DRC P which explains a little
bit more saying same will apply across
out the word pipe a PHP in stick in
Python and everything will apply to the
Python world so that was it that was
just the Icebreaker has gone a little
bit longer I wanted a sort of 10-15
minutes I guess we did the 15 since we
started late now it really was over -
you have a couple of resources up there
have our names there
we did have some pre submitted questions
obviously the question on claret but we
had a question on the bulk updates
somebody pre-submitted question on bulk
updates I don't know whether that user
is actually on the on the call they said
they weren't going to be we really won't
be ready for him too early for them okay
so maybe in terms of the recording if
they're checking the recording later we
have that's where
it's got two we have a bunch of stuff in
the samples directory I should probably
do this in the web browser we have a
home page and we have samples in the
source code repository when that decides
to wake up since it hasn't woken up this
morning and question on the bulk updates
was where which one of these is better
to do
client insert was this it execute many
yeah so this is this is traditionally
the way to do inserting of lots or
updating of lots of values inside the
Oracle database in C X Oracle so this is
you uses what we call bash DML and
effective we have one statement being
executed once but with many data values
so this is quite efficient so we only
have to parse and execute in the
database the one statement data values
get sent across separately as no happens
in Oracle and binding the statement and
the data could get separate so you don't
get so sequel injection issues and Bob's
your uncle now this is great although
this user was asking about 1 million
rows and asking about timing and and so
forth it's very hard to answer any
timing questions because we don't know
machines we don't know network latencies
and things like that so a lot of that is
tuning I will say that if you're looking
at you know million records you may want
to look at where the data source is if
the data is somewhere on disk you may
want to use the data pump utility so in
Oracle instant client 12.2 the data pump
the sequel loader all those things are
available as utilities as of 12.2 you
may not may not know that and they are
probably going to be the most efficient
ways to insert large values of data into
the database depending where that data
comes from if you already got it in
python then you know execute Penny's
good but it's it's going to be a matter
of tuning your
your site your network etc etc in terms
of the the inserts Anthony any further
thoughts on that
no the only other comment is that if a
million rows is probably not gonna be
the most efficient sending it all at
once there are limits so it might be
better to split it into smaller chunks
we have been talking internally about
potentially doing that internally on the
user's behalf a bind array size but that
hasn't yet so for now you'd have to do
that yourself they have a little trick
we've execute many for those people
haven't used it as this baby with Auto
commit mode so you may be familiar with
the fact that you can specify that the
mode is auto commit whenever a data is
inserted it gets auto committed not so
good when you've got transactional
consistency when you're inserting a
couple of different sets of data it's
more committed or rolled back together
but from bulk insert you might think
that that's gonna just do exactly what
you want you insert and commit all my
data need to be a little careful because
if there's an error and if you look at
the tutorial there are ways to to
determine if one of these had had a
failure you know duplicate key or
something like that
then the data won't actually be
committed I mean you you have to do an
explicit commit later if you want to
actually commit once you fix up any
problems in that you found there's
something called batch errors that you
can look at in this tutorial which you
can't see this this tutorial goes into
that so just watch out for the order
commit and make sure you're handling
errors properly the next question I'll
run through before I really do throw it
open to people is this objects types to
store procedure so there's a little
question there pre-submitted
about querying from data from the
database inserting into a PLC call
object so that's really PLC cool
question and I think that's a select
into so you can do a select into PR
sequel variables they can get into PL
sequel object
the other part was doing a blinding
types to store procedures so this again
is in the tutorial so sto and an sto
geometry is a pre supplied type this is
part of our spatial actually I guess
it's they call it locator but you know
the geospatial features of Oracle
databases SDO is available in Oracle XE
and all of the other variants and so
with the magic of these features of
Anthony's added relatively recently then
you can actually access the database and
get information about it
into a Python object and just you know
stick your data straight into a Python
representation of that database object
and then bind directly back into into a
table which has that that type has a
column value easier easier looked at in
practice than talked about so let people
look at that and we had the doc on a
cloud I need to go and dig that out so I
don't have that immediately to a hand
I'll do that and put that in their
office hours links but we're open to
questions if anybody wants to stick up
their hand we said we'd be around for
half an hour but we're obviously gonna
be around for as long as you actually
want so yell out put your hand up or
just here typed up into chat here or I
can unmute you if necessary or you know
give us a heads up what you want to hear
about next time or you think needs to be
improved or a feature you want something
like that now you're all eager to ask
questions eager to learn you have
colleagues who are new to sex Oracle do
you recommend the tutorial is a good way
to get started we had very good
attendance we had a lock out over have a
capacity yet the big Oracle OpenWorld
conference when we presented on
presented this as a lab hands-on
for people let me just go back so you've
got the details if you want to take that
got a couple more minutes you said we'd
be around for the full half-hour so
bring up your colleagues and I'll stay
more questions they want asked what
about themes for next next time
apologies to that person on the
telephone and I'm not sure how I can
make you unmute without me immediately
and muting and potentially causing more
chaos
so if people don't know Blaine is going
to be presenting on Python and also
running the lab I just spoke about at
the Oracle international Oracle user
group conference in Las Vegas in April
so collaborate so anybody who's in the
u.s. USA and go along to that and you
can come from anywhere just easier for
us here in the States and it's Vegas yep
yep and for people who don't know there
is actually a Facebook group started to
discuss some of these what we call
drivers the API is the UM CX Oracle for
Python node oracle DB for nodejs so if
you search in Facebook you probably come
across that really it's just me posting
what I post on Twitter I know that
Twitter's not used in number of
countries but it is a standard Facebook
group so you could join there and chat
as well on any of these drivers as I've
indicated lot of the fundamentals of
these drivers match inserts and we're
going to come into the drivers Python's
leading the way there but your statement
caching isn't all the drivers dr CP is
available a lot of technologies shared
so we're just pull our own ology
facebook group might be a good way to
reach people let me just see if I can
pop up one last thing where did I do it
did it do this one and we've got some
some information about cloud this is you
know specific for Exadata Express just
because that's you know the
entry point for accessing and okay now
the questions come in then as we get
resources yeah we'll stick them up on
the cloud we don't have a lot of Ives
for Python because a lot of it is so
common with all of the other languages
all of the other database access API is
connection strings our connection
strings slight variances in the Java
world but in every other world sequel
plus etc etc then connection strings are
the same and the rest is up to whichever
cloud service that your you're using let
me just cut and paste that yeah okay do
we have some demos with Jason Gio Jason
thanks to the sto example do we have
demos with Jason I forget whether we
added that or not I don't believe don't
believe so we do have an action item to
add more demos you're most welcome to
submit what they call pull requests in
the github world where we keep the
source code basically you submit your
your own changes if you if you have
changes you want to make I have good
ideas for examples we can stick those in
we do have to do we do have a couple of
examples discussions in an OTB land and
these well not directly cut and paste
well obviously into the Python world
kind of have some background discussion
in the manual about how how you can
actually do some of the syntax where
jason exists things like that else call
Jason so these are particular Jason
examples you end up with your strings or
lobs and then just deal with them as
strings or lobs in the the code in the
Python code yeah and if there are
specific questions or you can always
create an issue on the C issues page
so again we have an action item we'd
love to do that we'd love to get the
SPECIAL team to to contribute as well
that certainly as users you know what
you want what's the most popular and
you'll find that a lot of this sort of
open source taki is done and the open
source style somebody's asked a question
we've answered it and since we've got
that content and we can send our
documentation so there's a whole chapter
in Jason this is in the note oracle DB
documentation it's very brief because
you know it's just a sort of taste of
what you can do and you can probably get
as much or more from the actual official
jason documentation in that in the
database developer's guide but you know
these are the key things which I found
kind of useful for telling people what
Jason is about so this is obviously the
12c JSON data type you may not be at 12c
yet in which case you're basically
dealing with varchars and lobs and doing
it all manually yourself I don't have
I'll stuff my head Jason modules in
SIG's Oracle set up to actually do it
pausing and whatever in there six are
python has a JSON module built in so yep
cool okay well if there are no more
questions
I will stop the recording and we can
reconvene next month not quite sure
about the time next month I think it's
scheduled but because I would be
traveling for our conference not quite
sure whether we're just going to shift
the date yet or just let it run and be
more open just two questions perhaps so
that that slides or anything like that
let us know send us feedback you use
that question forum on the on the page
the the dev hours page if you've got
comments on how it ran whether the
muting unmuting stuff worked for you and
basically we'll share the recording but
probably not the powerpoints it's not
alone not a lot of value I think in that</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>