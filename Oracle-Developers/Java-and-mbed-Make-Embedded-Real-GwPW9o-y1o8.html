<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Java and mbed Make Embedded Real | Coder Coacher - Coaching Coders</title><meta content="Java and mbed Make Embedded Real - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Developers/">Oracle Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Java and mbed Make Embedded Real</b></h2><h5 class="post__date">2015-06-02</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/GwPW9o-y1o8" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so my name is andre and i'm working for
oracle in the joe and better department
and here is Bogdan and we'll talk about
using Java and in bed technologies in
order to bring embedded like simply find
a better development for the kind of you
know for the people and for the embedded
devices so Bogdan will will start and
I'll then continue with Joe part thanks
Andre for the introduction so hello
everybody my name is Bogdan I work
inside arm as part of the my team and
for the first part of this presentation
I'm going to talk you about embed in
general what is embed and why would you
care about em but in the context of Java
in particular so to start with what is
am but i guess the textbook definition
of definition of em but would be a
platform for building embedded
applications around cortex-m
microcontrollers so when you are
building an embedded application a small
device you are going to need a number of
things first of all you are going to
need some hardware and if you want to
build your own hardware we provide that
in the form of this part here which is
called the HD k that is a set of
reference designs that you can use for
your own hardware you can use it as a
base to build your own border your own
device for example and we also offer you
something which is called an interface
cheap as part of this HD k which is
another chip that you can add to your
design so you can program or debug your
microcontroller very easily which is
something that we found people are very
interested in and of course then there
is the software and for the software
part we offer you this sdk here and this
is a collection of all the software
packages and libraries that are built
around embed starting from peripheral
drivers to various text to various
component
the part the last part on this slide and
I'm going to talk a bit more about
components later because that's a very
interesting part of whole framework so
as I said and by this all about building
applications around cortex-m
microcontrollers and we cover basically
the whole range of cortex-m
microcontrollers from the lower course m
0 and m 0 plus which are relatively
simple devices with not so many
peripherals not a lot of memory and we
go all the way up to cortex-m foreign
and 4f devices with microcontrollers
with floating point a lot of memory a
lot of peripherals and because there are
a lot of manufacturers who chose to use
the cortex-m course to release their own
devices we also support lots of boards
and lots of devices from various silicon
manufacturers the first thing that you
are probably going to use if you want to
take a look at embed you are generally
going to go to end by that org create an
account and right after you create an
account you are going to be able to
write your own code and compile it
online using what we call the ambit
online compiler this guy here so this is
basically on online ide in which you can
write and compile your own code and then
you can download the resulting execute
about your computer and program it into
your microcontroller if for whatever
reasons you want to go offline and
continued development there you have the
option to choose a number of tool chains
including Kyle ir and various tool
chains built around GCC microcontroller
sorry GCC toolchain and their
corresponding ID is ember is an open
source project it has not been always an
open source project it was open sourcing
february2014 we have a central
repository on github and to use a very
simple mechanism based on pure quests in
order to accept contributions to DM bait
source code and at the bottom of the
slide you have some numbers I'm not sure
they are very much up to date but they
should still give you an idea about the
kind of traction that embed is getting
in the open source community in fact we
have quite a few people contributing and
sometimes it happens that part of our a
large part of our day job is just
reviewing pull requests from other
people and accepting them into our main
source tree and we have another
community built around embed so not only
on github com but also a number that
orders itself as I told you a bit
earlier you can go to him by that or
create an account and start writing code
and compiling it immediately but you
don't have to stop here you can publish
your code and by publishing your code
you can share it with other people you
can accept poor request to your own code
or create more requests to other
people's code just like you do on github
for example and you can also post
questions and answer to questions from
other people and for us inside the ambit
team it's very rewarding to see our
users taking actively part in this whole
process of asking questions and sharing
code and answer answering other
questions from other people because it
shows that the project itself has quite
a bit of community traction I am going
to talk a bit now about the SDK
architecture I'm not going to go into
too much detail just the parts that are
relevant to Java on top of em bad so
embed itself uses a layered architecture
at the lowest part here you have your
targets which are your cortex
microcontrollers on which your code is
going to run eventually the next level
we call the target interface and if s
two parts the receives is which stands
for
cortex microcontroller software
interface standard this is a standard
published by arm and what it is it's a
set of interfaces which covers some of
the components of the central cortex
emcore for example the interrupt
controller the timers and so on but what
generally happens because the cortex
itself is just the microcontroller core
various microcontroller manufacturers
would put their own peripherals around
this core for example serial port or spi
interfaces or ethernet controllers and
because they come from different
manufacturers and they are different
they are not standardized in any way
they have a very different user
interface from one manufacturer to
another and in order to fix this problem
embed introduced this part here which is
the embed hull which in a way abstract
all the peripherals on the target
microcontroller in a set of interfaces
that have the same prototype and the
same signature for all targets so what
is important here actually is that this
whole layer the target interface it's a
complete set of interfaces that abstract
a microcontroller and it has the same
prototype for all targets for all
microcontrollers over here and this is
important because the next layer on top
is written in top of this and basically
on the next layer there are all the
booties that you can find a numbered so
you have the peripheral API you have
tcp/ip stacks you have for example
libraries for USB host or USB device you
have a real-time operating system it's
optional you can use it if you want you
don't have to use it if you don't want
to and again this whole library of
components and on top of that you have
your applications now this is important
because by writing your applications on
top of this layer which is generic you
gain two immediate advantages if at some
point later in the life of your product
or project you want to use another
microcontroller
and if that microcontroller happens to
be supported by M but here somewhere you
basically don't have to do anything in
particular with your code you just need
to recompile for another target and in a
similar fashion if you want to change
your tool chain and your tool chain is
supported by embed the exact same thing
happens you just three compiled with a
new tool chain and you are good to go
and it turns out that this is extremely
important for something like someone
wanting to run a programming language on
top of embed because if you put it once
on top of this layer here which is
generic you instantly gain access to all
these libraries here and to all the
targets that are supported by n bite and
I'm going to talk about this in a bit
more detail later our components this is
one of the things that we are very proud
about and the idea here is that when you
design an embedded application you want
to design a small device that that's
something in a way interfaces of the
outside world so it probably want to
have access to some sensors to read data
from the world and then you might want
to give some comments to the outside
world for example two motors or
activators or maybe two relays and
because we have lots of this components
covered in here more often than not if
you want to write an application all you
have to do is import the proper
libraries instantiate a component or to
write a bit of glue logic around that
and you're done you never have to care
about writing a driver for that
component or having to worry about the
particular hardware itself and notice
that components don't have to be actual
hardware devices we also the components
which are communication libraries for
example for Internet of Things 6lowpan
or other protocols
and before joining a bit into details
about what embed means for actual for
java or for any other language that
wants to run on top of a bare-metal
application or bare metal platform sorry
sorry about that right okay so this is
some of the things that we want to do is
somebody in the future and because we're
doing embed you might be able to see
them in Java I mean at least part of
them so there is a common misconception
at the moment that embed is only online
and it's not you are already able to
export for a number of tool chains and
after you export your project you can
develop offline if you want to but to
make that concept even more powerful we
are developing a number of common line
tools that you can use to clone a
project compile it locally flesh you to
the target microcontroller debug it and
so on we are adding some better
debugging capabilities remember that I
spoke a bit about an interface chip in
the beginning as part of the hdk it has
a very very easy to use and very
convenient debug interface and we are
working on making that even better we
want to add more tests into am but we
already have testing em but but we want
to make testing even more of a first
class citizen by introducing some very
clear testing methodologies and one of
the directions that are very important
to embed at the moment is Internet of
Things and we are working very actively
in that area by making a bad raw power
we aim to provide a security solution
and sort of end-to-end security solution
that is very very easy to use and the
thing is with security is that if you
are not a security expert it is
extremely easy to introduce some subtle
mistakes in your code that will lead to
complete security disasters so we want
to make it easier for people to use
security
in their applications and of course we
want to add more protocols that are
related to the Internet of Things the
main things that are working on right
now or ipv6 and 6lowpan but there are
others and to summarize all these in the
context of programming languages on top
of em but well it turns out that this
right here carries a bit of a personal
story when is actually the reason that i
joined the end bad team itself so some
years ago I wanted to be able to run a
programming language called Lua on top
on embed well not on top of em but back
then I just wanted to make it run on
microcontrollers so i created this
project here which is called Aloha ok so
the first thing i did i just took the
basic role language ported it to one
microcontroller verify that the core
works that was easy enough and then
because I wanted people to use it I
wanted to port it to other
microcontrollers to more or something
like that again that wasn't very
difficult then I wanted to make Lua
itself the core of low at the language
be a bit more embedded friendly I wanted
it to run faster I wanted it to consume
less memory and I had many ideas on how
to modify the core but but this time
people were already asking to have you
are running on top of their harder of
choice so I found myself that instead of
working on the core I had to write more
ports and more port and more ports and
then of course people are starting to
ask for other stuff such as support for
tcp/ip networking that is a very non
trivial thing to do if you do it from
scratch support for USB libraries some
support for the components here so at
that point two things happened I found
myself that I almost didn't have time to
work on the code itself I was spending
most time working on board and
making these components work with Aloha
and the second thing was that I found
the whole thing to become slowly
unmanageable because it was extremely
difficult to test the combination of all
the ports and all of these libraries in
a way that I can I could guarantee that
it was reliable on many platforms and
this is a story it was basically it's a
small project it's a one man to man
project but it scales so no matter what
you are going to run here you are very
likely to encounter the same problems so
this is one of the reasons for which I
am now rewriting Aloha itself on top of
this layer here because I get a lot of
stuff for free all these all these and
because I don't have to worry about
quality that much because I already know
this is tested I already know this here
is used by loads of people so they find
bugs they report them we fix them so in
particular this is why embed itself is
such a good platform for someone wants
to run a programming language on top of
a bare metal platform and on this note
I'm going to hand the microphone to
Andre so he can tell you about the
specific of Java ME on embed thank you
Bob done we're very good talk and yeah
let me continue with Java specifics and
first of all let me start with a kind of
disclaimer that we just recently
announced their first kind of release
not of GE quality but like a developer
preview of Java me runnin runnin bed and
specifically on K 64 freescale developer
board and with that we kind of open java
me for being used on low-end
went for Java but like more of high-end
microcontrollers like cortex m3 and
cortex m4 and starting from the story
that began has said yeah I can fully
confirm that this as well applies for a
much larger scale projects like Joe Amy
and if we for example take a look at the
typical you know structure of Java me
implementation here so it's kind of
complex project and we just always the
same face the problem of being able to
implement all of that on top of ladders
architectures various hardware
architectures and as deeper we go the
more complexity it brings so for example
for for gyc typically it's not a big
deal cause it's really there are very
limited set of like construction set
which exist on bigger embedded on
desktop and server systems is likely
like arm v7 and X x86 powerfully before
that and the porting layer is not that
important as typically POSIX is
available but going down to the
platforms which are really interested
really interesting for Joey knee there
is all kinds of different operating
systems which there are very much
different interfaces there are more
instruction sets like on cortex-m
systems it's tom too it might be thump
on on arm9 for example and things like
that and in order to alleviate that we
do have our own ports in the layer
defined and we have multiple
implementations of that which you know
allow us to abstract the differences in
underlying hardware and software to the
upper level stack which indeed in the
source code doesn't depend on what
what's below
so but now as we you know we have this
quite quite useful and bad thing created
by arm we can simplify this for the for
the targets which are supporting birds
and we just you know have our port
interface implemented for embed and
leverage shoulder all the things all the
functionality and goodies available
there and that would you know inevitably
simplify us their work of supporting the
GI way me for their for the platforms
which do have embed implemented for so
well that's that's a good thing for for
us but what what's good for and bad
indeed java brings some what's number of
benefits there so first of all the Java
language which scaled up to the more the
more powerful embedded systems as well
as desktop and server side now that's
managed memory model and inevitably a
remote application management the
dynamic linking we have in javelin which
in jail libraries the tooling story we
have for a long time things like profile
ian and monitoring your memory network
connections of these kind of things of
course security as well as better abbas
honest cause the application is elation
on cody's elation is much better and
managed environments like Joe so then as
I said we just released the developer
preview of what what we call Joe any
embedded itit one release and that is
available for this freescale board which
is basically cortex m4 the more or less
top level microcontroller with 181 20
megahertz CPU and the decor and 256k of
RAM and one mega flash so we as this one
particular thing
doesn't have extolled memory bus we just
you know leverage internal internal
memories so we have all that mostly
occupied by java and all the libraries
we put there because it's it provides
kind of rich functionality and that
supports java language eight so it's
compatible language level with java c 8
it supports remote tooling we now
support only tcp / developer preview for
GA will support USB to learn as well we
have like a whole site toon tooling
program which mes deaky which allows you
to bridge the your your application to
their IDs or like netbeans or eclipse
and have the full tool in debugging
profile and capabilities they are
available we supports file a support
file API for external memory card which
is part of this hardware design of
course the device I you access to all of
the buses a little buses and peripherals
both pluggable and those which are on
that board available from the start and
disappeared working and helped with
security like till as one of 0 and ssl
three so let me just show you one demo
just a simple one you know is it so yeah
i'll show it with netbeans ide and just
one second
that probably will be better so i have
this this unit is boards with me and
basically i have any sdk installed and
we if we get it and you know that there
is a connection manager which will allow
you to add the connection to the device
it auto detects use video devices and
those devices which are connected with
like a local area network and there is a
capability to download the java so you
can just like download the flash to the
board here i have already done that so
now let's just you know create a simple
project and it was yes set up to use
this micro edition SDKs I said you which
is essential for the IDS to work with
Emmy devices so now let's just probably
turn some LED on what I'm writing is
actually that the code the cause of API
of our device io API for these low-level
buses it's easy like that we get a
warning from the compilation because
these particular open methods is a war
arc method and
I will be actually talking about that
things like that in my next session the
thing is that some of the features of
Java language are not that efficient on
small embedded devices because they for
example can implicitly allocate memory
and you know that would incur garbage
collection which is not that fast or on
small devices so that our compiler warns
you that you're using this feature so
you can make a choice whether it's like
if its performance critical for example
part of your application that is you
might want to reconsider considerably
right in it so as a result we do have
this thing LED lit and yeah I can the
this is a screen of our SD key so you
can see that we have this application
running so yeah you can control it from
here and with depth actually concluding
just one second concluding the
presentation and encourage you to oops
to actually try to use this as it's
instantly available and it is supported
from both in bed side as well as Java
site you can go download the java and
easily you know use it on this board and
of course given that
all there you know all the supports for
the embed alarm site as well as support
an for java on oracle side that will be
continued with with supporting more and
more devices in the future thank you any
question so basically the it was down to
support in like this boards with the
embedded rating system I am just you
know releasing the new new versions of
Java me but technically speaking that's
very easy one on the Oracle side because
it's most of the abstraction is done by
embed and you know that should be easy
though for it might well it might bring
the complications on the legal side you
know because we have to have the release
after all for that because Oracle Oracle
doesn't you know doesn't hide the Java
in the open source and that is why it's
like Oracle's or Oracle downstream
partners responsibility to create the
binaries so I cannot you know commit to
releasing the Java ME binary for each
and every frisky o board or whatever but
with with these kind of solutions it's
much more easy to do then the
probability is much higher
well the forum bedspread probably not
but Joey knees you know is for a long
time as well as well before husband play
and the good thing about Giovanni for
raspberry pi is actually that the
peripherals the low-level buses are at
started well available and supported by
Joey mean this device I ability as well
as implemented so for Java Sea it's
because because Java sea's as well well
maybe like that so Raspberry Pi is more
like a target for java Syria rather than
Java me because the platform is powerful
by itself but device I you was not
available for a long time so there was a
third party libraries for manipulating
devices but now there is opens open
source like part of openjdk project for
device iowa for java sea
we are not completely sure about that a
part of it will probably mine closed
source it will still be free at least to
some extent but not open source not
completely right anybody so to the
moment on this developer preview release
we have 170 ki allocated for java hiba
so the rest is taken by weather's like
the virtual machine state the networking
bars use be botherin stuff like that and
the flesh is not available for the
applications totally while one mech is
fully taken borrow by the system code
and for the application we use external
memory card but indeed we can we have
plans for configurations which use
internal flash for the applications
though for this particular board there
is a problem like on a hardware site so
we weren't able to implement in flash
file system because of the limitation of
them of the hardware on different like
Mahara from different vendors say it is
possible and we do
so thank you everybody for listening
this and you know encourage you to play
with it more</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>