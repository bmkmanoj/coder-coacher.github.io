<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>JavaFX CSS API | Coder Coacher - Coaching Coders</title><meta content="JavaFX CSS API - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Developers/">Oracle Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>JavaFX CSS API</b></h2><h5 class="post__date">2015-06-02</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/kMRY2mh-o1k" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">this of course is a tutorial on the
JavaFX gssapi my name is david grieve
I'm a part of the JavaFX team at oracle
I've worked on javafx since the 10
release when it was javafx script and my
role as part of that team has been to do
the development on the CSS engine for
javafx if you've used job FX at all and
you know that CSS is pretty integral to
javafx especially when you come to
controls all the look of the controls is
all done through CSS skinning so if
you're here you're probably here because
you want to learn how to do that for
your own controls or your own you know
nodes that you might envision you're
supposed to read this but all it says is
if you go out and do something based on
what I said it's your own fault anyway
so I think I think it's important to
understand first off just what happens
in javafx there's this thing called the
pulse and this is the life cycle of a
pulse I'm not sure exactly where begins
probably at the very top so the first
thing that happens in a pulse is that
you have the event handling and event
filtering that's actually the filtering
happens first and then the the handling
of events happens after that but in the
course of handling the these events that
might trigger some kind of a change in
state on a node for example you drag a
mouse into a button and all of a sudden
the state turns to hover because of some
event processing that's happened along
the way so that's the property state
change that happens that property state
change then triggers some CSS processing
to happen
if that state actually has anything to
do with CSS at all so if if you have a
node and it goes into the hover State
and there's no CSS for the hover pseudo
class then that CSS processing is passed
by for that node after CSS processing
happens and there is layout so the CSS
this is important because the CSS
processing has to happen before layout
CSS is where you get everything you get
your you know you your colors your
padding you're in sets images all that
stuff happens in CSS and that's what
layout needs to do to do its
calculations then of course after layout
there's the there's the paint process
which I'm not gonna even talk about that
is just you know you synchronize with
peer and that's all magic to me I'll
take a little closer look at at that
again so for example a mouse press event
happens and what that's going to do is
on if you have a button and you're
pressing on the button this mouse press
event is going to set all these
different pseudo-class states have a
pointer here it's going to set all that
can you see the pointer it's going to
set all these different pseudo-class
States here on that button hover because
you've dragged the house into the into
the node armed because you've pressed
the button down focused because you've
pressed the button down and pressed
because you press the button down but
all these pseudo-class states are going
to be set and then you're going to have
some CSS processing that's going to
happen because of that CSS is going to
go out it's going to find all the styles
that match a button in that state and
it's going to apply those styles to the
node then layouts going to be done and
then it's going to then the node is
going to sync with the appear on the
graphics side
to do all the painting see so again
mousepressed there's some behavior
classes and the skins and mousepressed
handles the behavior handles the
mousepressed and calls us button arm
method button armed property has an
invalidated method that sets the armed
pseudo-class state and so that's how
this is this is how the pseudo class
state change is called it's just a
method on node called pseudo class state
changed and we'll see that more later
you give it the the name of the pseudo
class and the state and whether it's
true or false since this is happening in
the armed properties validated method
the get call there is going to return to
the true or false value and so if
there's a style that belongs that state
and it's going to be selected and then
this is what happens in CSS processing
yeah seriously I'm not kidding actually
so look I think could see it so here's
what happens when you're processing a
pseudo class state transition
unfortunately I can't see what's going
on on my screen I can't see what's going
on
alright so so this is what's happening
inside the CSS engine when we're
processing a pseudo class state change
like you know hover state the CSS engine
is going to want to know what properties
CSS properties your node has and it does
it by calling this this method here get
it CSS metadata which returns a list of
CSS metadata objects that describe the
CSS properties that can you're dealing
with and that's that's what the API
looks like forget CSS metadata and we'll
get into that sorry about this so the
next thing we want to know is whether or
not that property can actually be set on
the node there's no sense in going
through all the CSS processing to
calculate values and calculate look up
styles calculate values and apply that
value if the nose is going to say no you
know you're trying to set something
that's bound and if you try to set
something that's bound it's not going to
work so that's what this little call
does here and it just returns a boolean
so so if we get past this check here
we're going to calculate we're going to
look up the style and calculate the
value for it and sorry
so now so now we have a style we have a
value and we need to know exactly where
to apply it since the the engine handles
all nodes it's not specifically made for
handling just buttons or anything like
that it's just a note so this method
here is going to return the actual
property from your node that's going to
that the CSS value is going to be set on
alright so this is instead of doing it
by reflection this is just an API call
that we make so this is going to return
a style of all property and all these
things this CSS metadata style of all
sigh level property all this stuff is in
the JavaFX CSS package okay and it you
can you should know that this is exactly
what I'm describing here's exactly what
happens in the JavaFX runtime code so
all the controls all the nodes that
handle CSS this is the API they use we
don't use any special internal magic to
process CSS now so finally we have we
have the property from the node and we
can apply the style to that node and the
apply style method don't have another
know it takes the style of all which is
typically your node and the origin of
the style now the origin of the style
could be an inline style or it could be
a stylesheet like a user agent style
sheet or a author style sheet for
example so those are the different kinds
of origins I'm just highlighting here
the different parts that are in the CSS
JavaFX CSS API CSS metadata style level
style of a property so there's a
relationship here between
elavil and a CSS meta data and the style
of a property style able is an interface
that's implemented by node okay so every
node is style style is also implemented
by some other things that are not nodes
like a tab is as one example a menu is
another example of something that's
style but it's not a node as much as
possible the CSS engine tries to deal
with just style and not node
specifically for some places we're done
really work that well but that's what it
tries to do so anyway there's there's
this relationship between style of
allure node and the CSM CSS metadata and
again the CSS metadata is all of all of
the CSS properties that this node has
and the API here for CSS metadata you
can see it's at that is settable call
that we saw a minute ago and gets style
of a property and then there's a kind of
a one-to-one relationship between CSS
metadata and style property itself I
think I've got this on the next slide my
hand down there right so the important
so anyway you know notice here in the
style of a property API there is a
method to get back to the CSS meta data
so just like you can get the style of a
property from CSS metadata you can get
the CSS metadata from style property
or there are places in in the code and
javafx code where the it really isn't
quite that clean but for the most part
that's what it works so and here's an
example of how that can be used in a
scene builder for example uses this all
over the place to be able to pick apart
nodes and find out you know what the
properties are and based on what CSS
properties what the actual values are
for its little CSS displayed as you can
see on scene boater if you haven't used
seen builders is well worth playing with
you can do a lot of CSS styling and seen
builder that makes it really easy so
here i just got a rectangle and i'm
going to grab the opacity property out
of that notice I've got to cast it here
to a style property the node api for
opacity is that it's a property but
internally it's really a style of all
property and the reason this it it's
this way is really because all of the
property api's were done before the CSS
API so so a lot of things that say their
properties are actually style able
properties so anyway so I get the
opacity property and I can get the CSS
metadata from that and I can what am i
doing there I can get the style property
back out of the node out of my rectangle
and you can see that I can assert that
the that these two properties are
actually the same property the same
instance not the same you know instance
equality here
so again here's the style property API a
little closer you can see that it
extends writable value and the reason it
extends writable values because you know
if you're going to have a CSS property
you want to be able to set it and the
writable value API I actually define set
so set in whatever that whatever the
type is that tu right there if you're
not used to using the generics you
should really get used to using generics
it's you're really going to need them to
do the CSS API stuff and a lot of other
things in javafx you know tables and
lists views and all that stuff they're
all generic genericized and it really
really helps to learn a little bit about
generics yeah so it extends writable
value it's got this applies tile method
get' style origin method and then of
course they get CSS metadata now no I
already said that that's it am I trying
to say here these are that so these are
the style origin here on this applies
tile call it's an enum and these are the
different values so user agent means it
comes from the user agent stylesheet
user means value comes from something
that the user called set on so if I call
set opacity you know point five then if
I go and I look at that opacity
properties style of all property and get
the origin out of it it's going to say
user then there's author style sheets so
that's there's those are if you have you
have seen get stylesheet and you add a
stylesheet to it those are your author
style sheets an inline style sheets are
if you take your rectangle you call
rectangle set style on it that's where
those properties are going to come from
and this is pretty much in the order if
you ignore importance of CSS
declarations this is the order of
precedence for these different things so
I mean it's very much like standard CSS
except for we've got the sexual a little
bit right here which is user which
doesn't really appear in standard CSS
now in a little note at the bottom that
if the origin of this style of all
property is null it means that CSS has
never touched that property okay this is
actually kind of a problem that I'll
touch on further further on but i'll
just mention it here that you can get in
trouble if you have your control and you
want to initialize some property inside
your control and you call set on that
property so if I have my you know some
kind of overlay thing that that I want
to have a fifty percent opacity and I
call set opacity in my constructor I'm
not going to be able to come along with
CSS with a user agent style sheet and
CSS and style that property ever again
okay and I'll show you how to get around
that later but just know that it got to
be careful when it comes to initializing
so you don't really have to so that
soluble property of course is an
interface that you don't have to write
any code for yourself because there's
plenty of these properties already made
for you there are if you're familiar at
all with the javafx beans property api's
which you should be you'll notice that
there's kind of a one-to-one
correspondence here between those and
the style level properties so if I've
got just a boolean property I can also
have a style style boolean
property and the cows all these are in
the job FX CSS API yes they're there it
isn't unfortunately there is a bug out
there that says hey we really need to
identify what style level and CSS you
can always call get CSS metadata on a
node and get a list of everything so you
can you can find it out or you can just
go look at the code if you if you're
curious but there is the you know the
CSS reference it has all the different
properties and that should give you a
clue as to what's what's what
anyway so so just just as in the JavaFX
beans properties there's these simple
properties like simple boolean property
that does a lot of the implementation
work for you there's also simple styles
in the JavaFX CSS API these should
probably all have simple in front of
them I think s it slipped through need
to fix my displays
so so so this is of course it's giving
an example of us style of logic property
so you can see it's a abstract class and
the reason it's abstract is because it
does not but doesn't it implement say
that yeah so there's so it's abstract
because there's there's no
implementation of the get CSS I'm sorry
of the I'm really blanking on this one
no implementation get CSS metadata says
right there all right
so yeah I guess I guess the important
thing here is that you can see that this
style of object property it implements a
boolean style property but it extends
the java x javafx beans property object
property so while every every style
property is a javafx beans property and
the other way is not not the case this
shows basically how a property it is
implemented in code so here we have this
object property that this is actually
comes out of the shape class I just cut
and paste the code out of shape for the
fill property so you can see that the
it's an object property that takes paint
and there's this Phil property method
that you can call on us it says if the
fill is null then it's going to create a
new style object property for paint so
while the public-facing API on shape is
that this is just an object property
that the fill property is an object
property you can see that inside it's
really a style property
so here's here there's a lot more that
goes on in CSS metadata than what you
see here these are the two methods and
CSS metadata CSS metadata is an abstract
and these are the two methods in that
class that you must implement okay the
first of course is that one called a
suitable and the other one is the it's
salable property and just to reiterate
on the kind of wondering relationship
between CSS metadata and style of a
property and here's an example of an
implementation of oops all right oh okay
so the point here is that this is
settable method like I said before the
CSS engine is going to call this before
does any further processing on on this
particular property if for some reason
you can't this property can't be set
it's going to skip it so is settable if
you return true then it's going to try
to apply a style to that property if the
style exists returns false it's going to
skip it and go on okay and so generally
this edible is going to return false if
the property is bound and so one reason
another reason for doing it this way is
that a lot of the the properties and
node are actually just placeholders that
don't get expanded until you call the
property method itself so if i call you
know if I look at the translate X
property of a node that's going to cause
that translate X property to expand its
going to call new you know whatever to
to make that translate X property so
this little bit avoids that all right so
you can you can check to see if if the
property can be said without ever having
to
expand the property and bloat your
memory so this is another bit of CSS
metadata which is one of the
Constructors and so the the property the
property here is going to be the CSS
property that you're going to use in
your CSS file minus FX opacity or
whatever you want to call it that's what
the property is then there is a thing
called a style converter what the style
converter does is it's going to take the
parsed CSS value and convert it to the
value that this property wants to have
so for example you might say in your CSS
that the fill of this rectangle is some
radial gradient and there's an inverter
there that understands how to take a
radio the CSS for a radial gradient and
convert it into a paint object job FX
radial gradient so then there is the
other parameter for the initial value of
the property what happens here is that
at CSS is processing if you go from one
CSS state to another and there's no
value for that property it's going to
set that property back to whatever its
initial value is and that's where it can
get this initial value could be null and
whatever makes sense for example in the
fill property we saw earlier the default
was black all shapes have a default
black for phil
and then whether or not the property
inherits so this is CSS inheritance and
if you're familiar with CSS and you know
about font and font how font can inherit
so you can have some you know outer
element that has a font style on it and
all the inner elements are going to
inherit that font same idea with job FX
and this just tells that this CSS
metadata can be inherited tells the CSS
engine that you got to look further than
just the current node to find out
whether there's any styles that apply to
for this property typically you can you
know so that's that's the full-blown
constructor there's other constructors
probably you'll just pass the first two
maybe three values hardly ever will you
use and the inherit flag oh the top is
just the reminder of what the API looks
like here's a down the bottom again
we're back to our fill property and so
again back to parameters you can see
that in our generics back in CSS
metadata you can see that it's a s
extends style so you know rectangle
extends style so this could be a
rectangle for example and then V is for
the type of value that the that this
particular property is going to have so
if we're looking at the fill property on
shape you can see that the when we
implement this API is settable is going
to take shape and the sole property
that's returned from gets saleproperty
is going to return a style whole
property paint so if i call style
property get value it's going to return
a thing
feel free to interrupt if you have
questions as we go through here so here
is actually back to shape and the fill
property what its CSS metadata
implementation looks like for the fill
property you can see that it takes the
property name itself as minus FX minus
fill it takes a paint converter instance
and the default value that is black okay
then in the is settable it takes the
shape and all is going to do is say if
the the fill of this node is null or the
if does not know if it's not bound then
we can set it so this is part of the
JavaFX beans properties API so you can
you can bind properties together so you
know you have a property and property be
set the property value on property a and
it reflects and property be so property
a property B would be bound yes and you
can have bi-directional bindings as well
so yeah yes because because if yes
because it's going to be handled through
property by the value is going to be set
through property binding I mean if if
you didn't do this and you let it go
ahead through when you got to calling
the method applies tile it's just going
to throw an exception saying you can't
set a brown bound property so what's the
point in going through all that so this
I mean this is this is boilerplate and
you can cut copy and paste this code
from pretty much any node in in the code
and you know use it
obviously it falls out you're not going
to find it
not there's not an easy way there's some
logging you can turn on CSS that will
will tell you that what styles are being
applied and you could turn that on and
see hey you know I thought phil was
going to be applied but it never was and
I know there's a style there for phil so
maybe somebody's bound it somewhere I
can't think of anything other than that
but that would be a good thing to log
actually and so the kid style of a
property takes a shape and there's this
unfortunate casting that has to happen
here at least inside of shape because
the the Phil property of shape is not
the you know the public API is just a
property an object property not a style
of elaborate Romney so it has to be cast
you can avoid this by making your
property's style to begin with but you
know okay so this method in this method
and style and the style API it's called
just briefly about the style API the
style of lapi is really everything that
the CSS engine needs to find out about a
node in order to figure out what styles
to apply so it's got API and it like you
know get ID get style class you know
those are the two that come to mind and
so it's also got this CSS metadata
method in it so we again this is you
know information that that's CSS engine
needs to know about things in order to
style them the thing about get CSS
metadata is it's called a lot
I mean a lot so you want to make this as
efficient as you can and the way that we
do it in code in our code is we declare
the CSS metadata is a static file and
then just return that static final from
from the node and you can do that as
well I suggest you do that's why you
know the API is you're always passing
the style of object into the API so that
you can use those statics in order to
get at it the other thing is that you
should include in this in this list
that's returned not just the CSS
metadata of your node but of all the
your parent nodes not-not-not parents as
in terms of seeing graphic appearances
in terms of inheritance java inheritance
so for example I have rectangle
rectangle extends a shape so for my get
CSS metadata in rectangle I'm going to
want to include the CSS metadata for
shape in that as well right there is a
method and this is not it's just it's a
static method so it's not really any way
to enforce it but it's a convention that
Thursday get class CSS metadata method
so shape has a get class CSS metadata
method you call it static so you can
call it so your rectangle you know your
static csms at CSS metadata for your
rectangle can just access that directly
I think I might show that here yeah so
so yeah so this is this again is I just
cut this out of the shape class here you
see I've got a private static final list
of CSS metadata expense tileable I call
it styles and then I have a static
initializer block that is going to
create a list and it's going to pass in
the CSS made of data for the node class
all right since shape extends directly
from node and then I'm going to add the
properties that shape ads in this case
fill and there's a lot more that I just
delete it because this would have
scrolled off the screen but you know so
you create the list you add your
properties and then you don't have to do
this but this is what we do in code is
that we return an unmodifiable list CSS
is itself the CSS engine itself is never
going to modify this list it's just
treats it as a read-only list but if you
want to make sure that other people it
might be consuming your you know your
library don't muck with your CSS
metadata and make it unmodifiable so
here's the get class CSS metadata and
again ever any every node in the runtime
jar has one of these methods on it just
by convention it just returns the styles
that we just created and then the get
CSS metadata just returns they get class
CSS metadata now when we get to controls
it works just a little bit differently
in that the there's a get control CSS
metadata method
and that exists because of the skins
it's a way to kind of separate the CSS
for the skins from the CSS from the
control so so that's kind of a overview
of the API so what do you need to do to
actually use this stuff is that in you
in your class you're going to create
style of all properties and you're going
to you know use this javafx CSS style
property or you're going to use one of
the simple style level properties you
got to create the CSS metadata you want
to make it static like we just saw
you're going to implement it for the CSS
metade you create you're going to create
implement is settable and get style
property and then lastly you're going to
implement the get CSS metadata method
which is part of the style API you want
to get static list and just returned and
include the the CSS metadata of the
parent node her parent class all right
so I think it's probably good time to
get onto a practical example and so what
we want to try to do here is just go
through creating a what I call a caption
pain alright so it's just it's it's very
simple just going to be a border pain
that takes a node and then also a string
that allows you to place a caption so we
can take that cash and we can place it
since it's a border pain we could place
it on the top of the bottom left the
right all right that's always a very
simple example but it's good enough to
to illustrate all this stuff hey don't
know
this works
yeah bear with me a moment I've lost my
demo
there is
never do it this way
alright so so that's what it's going to
look like pretty simple again the you
know there's an image it's set up so
there could be any node i just use an
image and you can see down the bottom
the little caption says Duke right so
that's what we're going for get back to
that
alright so this is what our constructor
is going to look like I'm just going to
extend border pain we're gonna use a
label for the caption and we're going to
pass in a node and give it the caption
that we want for the node we're going to
give our caption pain a style class
we'll just call it caption pain that way
we can style it in CSS using caption
pain for our selectors we're going to
create the the caption we're going to
set the center of the border pain to be
whatever our content is we're going to
set the caption to be to the bottom by
default and this just makes sure that
the whatever we put in the center stays
in the center of the of the center I
think this is actually a problem the set
bottom but but I think we'll get back to
that I think it's supposed to be a
problem in this slide and in the problem
is that if i do this i won't be able to
style this with my CSS but this isn't
we're not quite to the point yet where
we can style this with CSS anyway so
maybe it's all right hey you another
demo this one goes better where'd he go
alright so in this demo what I've done
is I've just added this little combo box
down at the bottom so i can set the what
side it goes on and so and really what
we want to be able to do is do this
through CSS instead of doing it this
silly way okay
so in order to be able to set what side
of this border pain we want this caption
to be on I'm going to add a caption
property and the way I'm going to do
this to begin with is I'm just going to
I'm not going to ignore style properties
for the moment alright i'm just going to
do plain old java vex beans properties
properties and so this is pretty much
standard how you would implement a
property in any node you're going to the
it's it's the kind of the property being
convention is you have the property down
here which is we calling caption side
and so you can have a method caption
side property that returns that property
that's you know your beans convention
and then there's going to be a getter
and setter that all follow the beans
conventions so you can see down here
I've got an object property caption side
and it's going to be a simple object
property of type side and I construct it
with this which is the bean caption side
which is the property name and then the
default value which is side bottom and
this is a simple straight javafx beans
property API these two little bits right
here the beam and the property name
allow some reflection to happen if but
again javafx doesn't use it or CSS and
java to get to these pieces of
information some of the default value
getters for table for example use these
beans properties i think to get the
information and
we got here so so this is just the kind
of the next step in this which is that
you notice when I can select the content
of value out of the combo box the side
changed and all the combo box is doing
is setting the side the value of the
side property so it calls you know
caption paint set side top middle bottom
right whatever it is and so this what
happens is when that caption side
property value gets set this invalidated
method is going to be called and we're
going to move the cash and label from
where it is to the side where you want
it to be right again this is all
standard javafx beans implementation
this is if you look at you pacity
property the hover properties you can
see this kind of code there this this is
just a little bit of detail about moving
the the label from one side to another
you got our first remove it from the
side that it's on and put it on the side
that it's going to I'm not going to
spend any more time on the app it's just
that's just what that's doing ok I'll
their demo Wow
so anyway this demo is not all that
interesting but I did take away the
little combo box out on the bottom right
and notice that the the caption the
label was on the top this was done
through CSS alright so I wanted to show
you the property stuff first now i'm
going to show you same thing but now to
using CSS
sink
so hopefully what you'll notice as I go
through this is that this is exactly
what we just did for the regular old
javafx beans property property the only
difference here as far as the property
itself is concerned the only difference
here is that we've added this little
word style bowl everywhere alright so
what we're going to the only things that
we need to change to make this property
style is is that what's been highlighted
in yellow okay so instead of a returning
a object property up here we're going to
return a simple style object property
everything else is the same excel all
right except for this a little bit and
this little bit right here is this is
going to be our CSS metadata so we've
we've got to tell our style object nor
soluble property what its CSS metadata
is and that's you know so we pass it
there but you can see it's it's no
different style property from a regular
old property in javafx really no
difference so so I just said that we
needed to add our side our CSS metadata
her side and this is what it's going to
look like we're going to have our style
bowl is a caption pain and side which is
a javafx geometry dot side I think it is
is going to be the value of the of this
metadata and I'm going to create some
news yes its metadata and i'ma call my
in CSS I'll use the property caption
side to set this and this this is a
little bit funky because because side is
actually in the e noon so we've got to
do a little bit of extra stuff here to
tell it that the to tell the style can
order this enum style converter that
it's going to be converting a style you
know notice here that notice here that
there's this style converter so in
javafx CSS there's a style converter
class that has a static API and it will
return a whole bunch of different style
converters that you might be interested
in using all right so there's a style
converter that will convert a string URL
to a URL it will convert a color to a
color you know things strings the
strings and they're all there in style
converter itself so you probably don't
aren't going to need to write your own
style converters but you can and i think
i think i might do that here if i don't
if I don't don't do that here actually
there's another session this afternoon
called hacking CSS where I show some you
know create your own style converters so
if I don't cover here come to that and
you'll see anyway so that's that's
basically all we got to do to construct
the thing that the default is going to
be the bottom and here for the is
settable i'm just going to say it's
edible if this caption side property is
not bound now here I didn't say you know
if caption property is null and all that
because I know that I've created anyway
I don't defer construction of this
caption property so you know it's not
lazily constructed so why I don't need
to worry about it and then here I'm
going to return for the CSS property the
caption side property before when I
showed you the fill property I had to do
some casting here I don't have to do the
casting here now because you know I
declared caption side to be a style
property anyway right so there's no need
to
for the for the public API it's I can
still return it as a just regular old
object property but internally I you
know I know it's a style property the
other thing that we need to do now we've
got we've made our javabeans property a
style we've created some CSS metadata
now for the caption side now we need to
return that piece of CSS metadata so
that the CSS engine knows about caption
side all right so we're going to go
through this whole process again we're
going to create a private static final
i'm going to call it styles and then on
my static initializer block i'm going to
create a list here and i'm going to pass
the border pain since our caption side
object is a border pain right i'm going
to pass the CSS get class CSS metadata
from border pain and i'm going to add my
side property see my side CSS metadata
to that list and then get CSS metadata
is just going to return style levels I
didn't bother yes
ok so the quickness so the question is
by doing this am I going out to the
stylesheet to get the to get the
information and adding it to this and
the answer is is that the SEC tracked
that ok the answer to that is no this is
all happening inside your javafx code
where this this is this is code here
that's going to be inside our caption
pain class ok no no cat caption plane
caption pain here or caption pain is
going to be our our property our CSS
property so we're going to have a rule
in CSS it's going to be dot caption
painting that's the style class that we
added in the constructor ok and then
we're going to have the rule that's
going to have you know caption side
colon top
Sprott is primarily for performance
reasons okay by doing it this way you
know it's kind of a downside that you
got it you got to have some a priority
knowledge of what the styles are but it
also works that you know you're going to
have to have those properties there
anyway you're going to have to have a
caption side property then you'd be
really cool if you could do that and say
hey you know I want caption side and
dynamically automatically create the
property for it and certainly probably
doable but really for performance
reasons we want to have as much of the
CSS information at CSS metadata be
static be defined up front
no that's that's true I can't argue that
point at all the point was you know in
the future if you want to add something
else you got going to have to go back
into the code to make that change and
that's true that's a valid point I have
no argument for that yeah yeah that
whole workflow between the designer and
the developer when it comes to javafx
you know most of these designers are
used to doing HTML pages and there're
that I mean there's differences between
javafx CSS and standard CSS especially
when you look at all the properties you
know they're probably all used to using
the box model and we don't really have
box model but we have region which is
kind of close but not quite we do layers
of things where CSS do those layers of
boxes so i think i think the designer
needs to get a little bit clued in and
tuned in to what how javafx works in
order to create those assets you know if
your designer says you know I really
really want this and here's the assets
and it doesn't really fit any of the
nodes that that we have already and you
can create a node that incorporates
those properties and does that
good again you know I think the purpose
of this is that you're going to want
this whole talk is is that you want to
take what is already available to you
and extend it somehow you know to add
something that wasn't there before
that's right
grunt yep
all right so I think we covered that
right for demo
all right so that so this the demo that
just was just before this one was just
you know we put the caption at the top
using CSS and which I think I don't know
why I didn't show you that this demo is
going to does the same thing but I've
got added my little combo box back here
so that I can change the liniment
something's wrong here
I'll get back to that demo yeah I'll
have to get back to that demo the right
so the demo before this one remember we
put the caption was on the top all right
and here's the CSS that we used for that
we had our style class caption pain and
we added the caption pain CSS property
for that and we can tell it that we want
it to be on top we could put top bottom
right left because those are all the
side values I also put a little style in
there for label you can see that I've
got inside my caption pain I have a
label and I made the font a little
bigger and I use my favorite font for
the everybody hates Comic Sans I think
it you know so when it comes to bugging
one one thing that is very useful I
think for debugging is to use a really
funky font like comic sans because if
you use me like Arial or some other some
other font that's very close to a system
font how do you know that you're really
picking up that style so use Comic Sans
because it's apparent that oh okay i got
that comic sans font from my style sheet
and you know your styles are working all
right so now we're back to the devil i
was about to show it wouldn't it be nice
to style the caption label depending on
what side it's on right so so what if
what I've covered so far is just the
basics of you know creating the property
making it style a little adding the CSS
metadata and a little you know all all
that stuff is boilerplate code really
you can go into any any of the javafx
code you know it's all open sourcing go
into it you can look at all the
properties you can cut copy and paste
code out of there if you want okay but
what I want to cover now is is just a
little bit more about pseudo classes
because you probably want to use pseudo
classes you may want to add pseudo
classes to you
objects as well to your nose as well so
it wouldn't it be nice of a good style
depending on what side the captions on
so what I want to be able to do is I
want to be able to have CSS stylesheet
this is all the same as before but here
I've got my caption pain and if it's on
the right side I want to rotate my label
and if it's on the left side I want to
rotate it the other way okay that's what
that's what this is showing so now I've
got the caption side all that the combo
box down here now do is doing is
manipulating that pseudo class state top
bottom right left and the the styles are
determining what's going to happen to
the labels so I've got it on the right
there it is on the top there is on the
left okay so all that and you know label
rotating stuff comes out of the CSS
style sheet and so this is how to do
that
so what we're going to do is we're going
to add pseudo-class state to our caption
pain and so there's this class called
javafx CSS pseudo class that you're
going to use to do that and there's a
static method in there which called get
a pseudo class and it returns a string
I'm sorry takes a string returns a
pseudo class so if there's our if you if
you have a pseudo class you know you
want your own pseudo class called hover
and there's already a hover pseudo class
you're going to get you know it's not
going to go create a whole bunch of
hover pseudo-class states all going to
be the same values for CSS is concerned
all right the then there's a couple of
API on node that allows you to get at
the pseudo class state of a node all
right the this gets pseudo-class states
returns an observable set so you can add
a set change listener to the pseudo
class States and you can see you know
what the superclass state values are if
you're curious of this node I wouldn't
use this in production code it's great
for debugging the reason I wouldn't use
it is because pseudo-class state changes
a lot and every time used to do a class
state changes you know you really going
to slow down the system if you're
generating state changes for every civil
class state change but it is great for
debugging the other API there is this
pseudo class state changed method which
takes a pseudo class and a boolean true
or false so you call this method you
know hover might have an example of a
and you pass it true and then turns the
hover state on falls the turnstile or
state off and here's this so we're going
to create a pseudo class state for each
of the sides top bottom right left
this is this is code that's in caption
pain again all right all of this is
still in captioned pain we've seen this
before this is just manipulating what
side the label is going to show up on so
there aren't any changes here again you
know the only trick here is that you
gotta remove it before you add it but
here's what we're going to add to
support her sue class state we're going
to add this little calls the pseudo
clots eight changed so we're going to
say the pseudo class state for top is
going to be true if the side is equal to
top lot only and so on alright and again
this is what happens in our code in the
in the core code trying to think of one
that's the the other thing that you want
to do and this is a this is a something
that might bite you is that you want to
initialize your pseudo class state to
whatever the default is is if you don't
if you don't make this a began we're
back in our couch and pain back in our
constructor and you can do this in this
constructor we're going to initialize
our pseudo class state to be bottom
because that's what the default is if
you don't do this and you never
explicitly set the pseudo class state
it's never going to pick up that style
alright so again initialize your pseudo
class state in your constructor and
you'll be fine
No
not sure what that ok so again to
summarize what you need to do to make
your notes tileable you're going to
create style properties you can you know
we've seen you use the CSS style Oh
property or the simple salable
properties you can create your CSS
metadata you're going to return it and
then you can add your pseudo class state
that's that's really all we needed to do
to handle that top is just setting the
pseudo class state yes in the method for
the drop-down I think I think I was
gonna do that I think I think I just had
the value of the drop down the combobox
bound or I'm sorry the caption side
property bound the value of the drop
down box I think
right exactly yeah okay so a the subtle
gotcha that I mentioned before is that
if you call you know set on on the
property on the style of a property if I
called set caption side top then I
wouldn't be able to style it from CSS so
this is this is the bad piece of code
right there what I want to do is use the
style API to do that and what I'll do is
I'll call the caption side apply style
I'm going to pass null in here and the
reason I want to pass a null is because
if you recall way back to the beginning
of this CSS interprets null origin as
being you never set this property at all
before so I can set it as I want doesn't
have to doesn't have to look at whether
or not it the value there's has a higher
priority or not so this is again how you
avoid that problem you'd still if you
did call set caption side you'd still be
able to style that property with a ought
i'll sheet or an inline style but not
from a user agent style sheet all right
this solves a user agent stylesheet
problem
so I'm too lazy to write all this code
right i mean honestly all i've been
talking about here is boilerplate how
many times have I said go into the code
cut copy and paste and you got it all
right so in this is in eight you 40 okay
which isn't probably going to be
released till next spring i guess but it
is on open JFX and you can download it
and play with it there is this a style
of a property factory that reduces all
that boilerplate to just a few lines of
code okay so we could to use it we got
to have a factory which you create
bussli so you say new style bowl
property factory and you pass it the
pseudo the CSS metadata of your parent
class for all that caption side stuff
that we did it's boyan up today for all
the caption side stuff we just call the
factory create style of a property
method it's going to go and create the
CSS metadata for us and do all that
alright the only other thing that has to
be implemented then is get CSS metadata
and but you know it's pretty easy
because all you have to do is return the
factory CSS metadata from the factory so
this is so this is what's happening in
AU 40 there is a little bit more
overhead involved in this but you can
use this if all you want to do is add
some style properties and don't need a
lot of bells and whistles and extra
handling you know in validation methods
and and so on
the I have another slide so we did we
did tho have a lot of code and that
invalidated method that took the caption
and moved it from one side to another so
obviously that's gone here and but you
know it doesn't have to be invalidated
method you can just add and validated
listener to your caption side property
and do the same set of set of operations
so so that's that's all I have there's
any questions go back on anything or you
know I think it's next spring i think
they said that the at the keynote
yesterday i think it's in the spring yes
yep that's probably the biggest change
is the dialogues
right now let's see that's my dog may
see by the way Wow let's see
hey
I knew how to make this text bigger they
know how to make text bigger real easily
and quickly ctrl + yeah intellij alright
so so there's a the logger stuff which
is in obviously this is just junk code
here huh logging calm calm Sun javafx
logging I have a slide in another
presentation on this I could probably
dig up but if you if you go to the calm
calm Sun javafx logging there's a bunch
of different loggers there's a logger
for CSS there's a logger for focus
through the logger for job FX events and
a couple others i can't remember
accessibility is another one they're
like six of them so you can just turn
the lint 11 logging on through that API
I think there's a way to do it from the
command line to but I don't know what
that is anybody else anybody know
Jonathan you know
yes
so I think it depends on what your goal
is obviously I think if you're trying to
create a library for other people to use
then you probably like FX controls you
probably want to use you know parlor
next and control you probably want to
use skins you probably want to add style
soluble properties to your skins and so
on but for something like this you know
I just used a border pain so it suits
the needs yes yeah this is a Jonathan
Gaius he's also part of the development
team he's the guy that does dialogues
and all the controls
right much easier much easier for you
know the designer to make changes to
something without having to go back into
code and you know if the properties are
there at least and change things yes
yeah well um kind of you you seem
builder works on FX and L files so I
could have created my couch and pain
using seen builder and cranked out on an
F xml file and boy how would you do that
you know
I think there is a talk scheduled day I
think maybe on seeing builder FX and
Ellen controls I think you know he's
seen builder is a great tool for doing
mocking up screaming uh you know
controls and panels views whatever you
want to call works it works really well
they've got some good CSS analyzers in
there to show you where styles are
coming from and so on it's a good tool
so thank you all for coming I hope you
got out of it would you wanna thank you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>