<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>The Bytecode Hocus-Pocus | Coder Coacher - Coaching Coders</title><meta content="The Bytecode Hocus-Pocus - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Developers/">Oracle Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>The Bytecode Hocus-Pocus</b></h2><h5 class="post__date">2016-09-21</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/4Tm6mHzN4aM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">good afternoon and thank you for coming
my name is is it Raymond ruffled and I
would like to talk you a bit about white
coat agile compiler and what's actually
going on as you can imagine there will
be some white coat in this presentation
basically all the content is my own
experimentation on some environments
might be different different beautiful
machines can produce can execute
different bytecode or different Java
compilers can produce different by God's
wat ah about me I'm currently working at
AXA access an insurance company so
basically what i'm doing here is
basically my hobby not my daily work i
also brought a book about android i
wanna little uncheck a competition
personalized here and this year i'm
basically ambassador for angelhack there
in barcelona so promoting more people to
create ideas participating hackathons
i've been speaking out java performance
android on several conferences around
europe basically and i'm also took part
in the demoscene since the nineteen
ninety-five so it's a real-time computer
graphics competitions maybe all these
things about low level white coat and
assembly basically it comes from from
there and also i was the runner-up for
the javascript 1k competition few months
ago so let's talk a bit about the java
compiler so we are all using it of
course and basically it translates or
java files to our class file okay on
different virtual machines maybe we'll
move to key one temple we take android
we now well the class file its
transformed into a text file by the text
tool but they get more complex because
of the decks as well then it gets
translated oh and optimize my next
dropped it depending if it's a double
machine or two out if it's art little
machine acha button androids let's
change coming as well so as I know
you're aware but Google's introducing a
new compilers called Jack and what Jack
will do is basically it late from Java
directly into the x1 but let's focus on
gon Java Sea it's the compiler so what's
the difference between Java Sea and all
the other compilers out there but most
of the compilers they produce a ultima
is code for the target platform
because they usually know which is the
target parking the coatis will not run
so it's optimizing and it's taken a lot
of things into camp but Jabba see as far
as I know doesn't produce atomized code
why because it doesn't actually know
where the code is going to be executed
okay so we did we took that from the
water cold website just before the
conference and there's a lot of Java
cars TV devices j2me the jela me devices
out there and to build a mobile phone
John actually Java so Massimo some other
Intel was our arm as a meeps and there's
many other combinations so for the
reason sorry for the duration job I've
got an old operations that they're doing
is stock-based I don't know you had one
of those old calculators we're stuck
based with its same principle so it's
very easy to interpret but it's not the
most optimal solution from the point of
view of performance so let's go quick
example but we have this simple
operation yep in java bytecode it might
look something like that so lots one
element to the stock loads the other one
adds them together and then stores it
again into the local variable okay quite
easy in a register based approach for
example can be visible on the ex-wife
got or for example in tow it's just one
thing operation just one ad for someone
hears from destitute is the one story
can't register one or wanted is to
another on Intel so quite easy but let's
make thing a bit more interesting so
this is a bit more complex so the right
code from that is what is it more
interesting you can see here work yeah
well here is all the local variables so
local variable 1.2 I 22 Jay Riecke so
with what the code is actually doing is
first of all what Jay and I add them
together that that is always on the
stack then load k add them to a pretty
result what's w and to the stack as well
then loads h.wood applies way to add it
to the store I to the store sorry to the
stack
and then lots twice p multiplies the
result and then add them together to the
disorder and finally it starts back to j
okay so it's not the complex but this is
few operations there on our sister based
approach it can be something like that
which is a slightly more simpler I
haven't assume any any architecture or
anything just and I made that up basic
liberties just to show an example the
problem with that is a basically we use
up to eight different registers there
and as we know an integral is a 32-bit
value but if we don't know which a que
textures going to is going to be
executed it may be that it doesn't even
have eight registers example 6502 on the
class 3 or it might be as well that
photo the 6500 to again that this is
8-bit on it so it is not a real much so
to avoid doing this kind of
complications is just a bite stock-based
and it leaves all the optimizations to
be done by the GBM there was a thing in
general 111 think they introduced a flag
which is mine use uppercase O which was
to optimize but now you actually look at
the Java code it actually doesn't do
anything it's just there for being a
traitor compatible but doesn't actually
optimize anything so but this thing
about living all the musicians to the
built on machine I think it it takes to
conserve a bit too far it's from a point
of view so let's imagine this simpler C
code okay one variable which is 10 I got
the smoke out here which is 1 plus 2
Plus 3 plus 4 plus 5 plus 16 plus a okay
compare that with GCC well with the
musician flock of course if this is ok I
just bring a 31 value just fine if you
do the same with Java able basically
push it into the stack storage local
variable 1 push a 21-2 the stack at load
again that the variable local variable 1
which is safe before add them together
and then store it in another local
variable ok
could be worse but what happens if we do
this change okay disease whatever 31 on
Java I get more interesting why it's
well again pushes the 10 stores in local
go to one which is 15 stores in and then
loads the debatable from before you know
this 15 is the sum of 1 plus 2 Plus 3
plus 4 plus 5 so whatever it is before
da and then add them together pushes the
six to the stack adds to the result and
then a story it again okay so seems that
there's some kind of throttle would what
the thing will happen if we do that
we'll be better will be worse actually
it's way worse simply the jaw compiler
are the first thing it cannot actually
resolve is it stops pre-processing
anything so in this case well it pushes
the tensest to the stack stores it in
local variable one and then load logic
at contentment concert number one
Atkinson number two so it does all
everything okay if we just run this
class as it is it's well well it won't
actually have an impact but it you can
imagine the code is a bit slower than
before but for example at least an
Android with with Jack it's easier
because jack says okay whatever i
optimize that and I just say okay I just
move us 31 and print this value but on
Java we have to rely on the just-in-time
compiler so just line compiler if we
Nevel the disassembly so it brings all
the assembly code to generate it
translates all that by code into yours
okay it just no 431 Danny Bridget ok so
what I'm trying to say here is a java
doesn't try to automate anything when I
mean anything is basically anything so
compilers will optimize Bob produces
optimized code for target platform but
not java all is no java sea
oh yeah okay yes I know she keep in mind
there's a lot of things out there
doesn't have a just-in-time compiler so
if i run into my my laptop amman
enterprise server it should be fine but
if ryan i don't know yet to me device
microsoft just announced they're going
to launch a serious 30 device yesterday
so I still plenty out of there yes not
in this example because the impact is
minimum but in more complex code you can
imagine the kind of things it can happen
so another thing language editions I
think in Java 125 they introduced the
concept of auto boxing okay it's quite
transparent for the development at least
in Java but under the hood the compiler
is adding some code so for example if we
look at this loop quite a step forward
just loads as it of the stack stores in
local variable one loads well then key
is the counter so put another zero in a
surgeon in number three then to check
basically if it's inside the loop it
loads the three which is the number
which is still before compares with n
which is the maximum of loops and then
if it's if it's greater than the number
it just jumps out of the loop I got to
increase squad dj's use increase a local
variable number three and the low-pitch
user is a go to instruction the loop
itself it loads the total which is story
number one it loads the counter the
index which is number three translate it
into a long value sorry and then add
them together and then storage again on
valley number one I actually saw that
the in in one of the quarter beer so
that's one of the reasons I actually did
that because I saw that and say well
that's not something I will not actually
do so we look at the sorry about that
but yeah if you look at the micro from
that is well it's a bit more larger than
before what is actually doing just I'll
go quite briefly about it so it locks 0
and then is actually calling long value
off
and storing an oolong object into
variable number one then same thing
similar thing for the for the index okay
to put this it onto the stack then it
creates in their body wolf and K and put
the new any integral objecting to insert
into the local variable number two to
check for the loop it's a more complex
on that if it loads number two which is
the index it gets the in value and then
it compares with them look at the loop
is the same as before just go to and the
actual loop itself is a actually is
loading the total for valuable number
one is getting the long value from it so
it cannot actually operate on the object
then loads the the integer so the index
it gets the in values well convert it to
long adds them to the preview result and
then it creates a new long object by
doing a long hood value off and then
stores that way again so you can imagine
there's a lot more things going on than
in a previous case the counter it not
even that is simpler because here it
does the same thing it's the in value as
1 and then creates a new integral object
to actually store it and this has some
additional white coats which I don't
know why they are there but they
basically be creating they they actually
putting on the stack again the counter
storing in a variable number three later
on the duplicating the new value storing
about number four then is loading it
again and then it's popping it I'm sorry
because
not really because actually it's not
doing anything with the result so you
can see you can see here actually is
loading the value and then just popping
it from the stack
yeah but okay but I mean yeah I mean
from a point of view actually remove all
these white cuts it just works out fine
because actually is incrementing here
and then it's storing it here so all
this here is duplicating the value of
storing in another variable which
doesn't actually use it anywhere and
then actually popping it from the from
the stack so I don't know maybe there's
a side effect or anything but no no so
if we look well translate that to
high-level Java it's a well basically
doing that I guess no one is actually
going to write that into interloop the
point is is actually well we have to be
careful as well with the object creation
because if we are doing that in a loop
it can be a lot well garbage collector
won't be actually happy so what happens
for example what happens with Jack so
it's a human pilots optimizing but no
app does an action so Jack doesn't
actually optimize these kind of things
so Tomas is a byte code to the decks
white coat what doesn't actually change
your coat or objects and what about the
heat is there actually any difference
with that ok let's take it that 10
million times I just want to mind this a
computer and yeah it takes a bit more
using the wrapper classes it can be the
fact as well as i said the garbage
collector just popping in and just
trying to clean stuff ok but what
happens as well we run it on to mobile
devices so i put it to nexus 5 1 which
get cut which is a wbm another one with
a width and Odell which is an art and
ahead of time optimization we look here
if you use the the primitive types they
are quite well step forward almost no
post at all with the views the proper
classes it takes more or not of course
but on davek there's a huge penalty so
for my Maya biases language editions you
well you can you need some code that
actually needs to perform quite well use
them wisely so that being said I mean I
don't say you know you don't have to use
them but you're treating with data you
need to get a lot of that and depending
on where you're actually front
as well be careful with it I not related
to blood go to white coat but yes to
primitive types and an object is about
sorting so if we try to sort some
numbers just using an eraser for example
there's a big difference between certain
primitive types and an object so all the
proper classes for example we use int or
integrals as we can see as the data size
growth the difference in timing actually
grows even more the reason for that is
when sorting objects it's a stable sort
so stable means if two objects are
already resulted or in a place and are
equal they will it remain on the same
position that well I think the most
famous offering for that is mad short
but the default Java algorithm is a team
sort adaptation so you look that for
well I'm not an algorithm guy what you
look for it it wikipedia something its
planes of it more and primitives doesn't
actually require to be stable why
because if two numbers are in the in one
position doesn't actually matter there
it did change the position so basically
the default that worried me the job is
using is a dual people quicksort okay
basically said as much as you can use
primitive values I haven't actually done
any any benchmark but it might be faster
you have a lot of data to actually
translate that from integral strings and
then sorting then while trying to sort a
list or something with with the wrapper
classes sorry
okay let's talk a bit about to look so
so one thing that we have in programming
that we all have a lot of loops in our
code basically so what's basically the
kind of scenes let's start with the list
so we have a list just a way Jersey
trading with the for loop in the least
okay so we look at the white coat and we
go through it basically the tunnels it's
loading on 0 is the is the result then
it's getting a array loving the index
which is not on number two then getting
the value on the UC number number 12 is
invoking built all I get from the
previous number eight it checks is
actually an integral so what else can
you get for marrying for integrals know
and then invoke the in value translate
this too long ads in together and then
it stores it okay so while the increment
is something like is the check actually
it has to get the instance to the
ArrayList get the size and then compared
with a with the index the increment
straightforward just increment available
okay let's use a for each loop if you
use it for each as you can see in the
white coat is actually using an iterator
so we knew that it just gets in
turtlenecks it again checks if it's an
integer and then get the in value and
then it's more or less the same thing as
before so it's uh but here's with most
simple because the value is already
store in a local variable so here it
it's loading the result onto is loading
the index it translate this through too
long add them together and then stories
again on on 0 ok let's just now adjust a
plane array instead of least we go
through the bytecode it's a okay it's
loading the array is running the index
on number 12 it's loading the value from
the india from the eraser and then it
was me it turns like this too long it
adds them together and then stores it
again ok to calculate the length
basically it gets the instance to the
array and then call the around length
white coat which gets here
the link of the array ok and then
compared with the index so on ok so we
can avoid that okay we can try to just
save in available the length of the
rates and there's no need to actually do
it every time so look at the code now we
look at the comparison instead of
calling having to call every time array
and a trailing it just loads to local
variables and compare them together and
something we have been told sometimes
reason computer science is you compare
with zero is faster ok so let's try to
do the Detroit backwards so if we go
from the last element to the zero let's
see what about this if I could say we
look at the bytecode you can see it
actually the comparison is is a bit sir
is shorter so it's one bite Cutlass ok
having said that I will explain later
more things about going backwards but if
you actually measure the time it takes
using a list takes quite a long time
using footage to be in even more time
than that and the last three using an
array or catching the length or going
backwards it's more or less the same
okay so okay so the data size is 1
million elements and run the loop
100,000 times ok with the same with the
with another device with under the belt
so it's art it's not topic the idea is
the same would actually from more items
you've got actually more increases the
delay between the using a list or for H
versus the array and the others so we
can naturally use a for each in a inner
rey ok so let's go for that so we use a
byte code actually we're going to go
through a bit more with it also i put
here all the local variables so on 0 we
have the array because it's the
parameter of the function here well load
0 and stores it on a number one which is
a result then loads the array again
start season six we will see well maybe
we save a while later
then well he is duplicating the DRA
intrinsic I'm to actually load it again
and then it's calculating length and
stirring on number 5 and finally just
before the loop it puts a zero in number
for which we use that local variables as
the index the loop itself well quite
easy it's just a free white coat it
loads the index which is for a load the
right length which is five and then just
jumps we can see here actually the for
each actually is catching the DRI length
as well by itself so it's something we
actually did before manually now the 4-h
is doing it by by itself okay and the
loop itself it loads the array from
index number six it loads the the index
from number four then get the element on
the array on that index and then it
stores them variable number three the
next step it loads the the pre-built
result which is in one it loads the
number which is taken from the right
which is on three ad commercial Blanc
add them together then storage it again
on number one and finally to increase
incremental loom the loop is quite easy
just go increment by 1 variable number 4
so quite safe for work quite simple if
you measure the loop we can see this
time keep in mind is not upscale so
numbers 2036 already for each is kind of
a 50 dot five percent faster than the
others so it's not a big deal but it's
lovely faster but what happens if we
disable the adjusting time compiler or
if we run a device with a just-in-time
compiler some yes some machine some
building machines there without you can
see it's the other way around so if we'd
secured code that runs a noble machine
that doesn't have any g it or just in
time compiler am at recommendation is
tied to reduce as much as possible the
white coat which is the thing that takes
more it takes more performance out of it
you're running on a generic desktop or
or a very powerful machine will
just because I just-in-time compiler
then I guess the other approach the
normal approach is fine okay so on as
another takeaway years as possible array
since at the plist you take all the
overhead from processing objects when
using least avoid the fridge or iterator
pattern it basically performance is a is
a requirement so from I guess most of
the loops you have I think should be
fine what you're trying to do some
processing of data lots of data I mean
really huge or image processing or
anything like that then we careful well
maybe then javed not the language but
there's an odd story okay and then
another thing okay we should a loop and
we see that it was not actually optimal
so beauty majid manually is it actually
worth it to example that is the code we
just sold for and that's another one but
that actually uses less variables and it
it reduces some stores and unload so the
dots read quickly again on 0 this is the
array I also put the heat to show the
stack because we will keep things on the
stack here it puts the railing on number
three allowed to 0 which is going to be
the index so the eye on the array on
number one and then this is the total
this is the result and I'm going to
store it anywhere I'm just going to keep
it on our on the stack so we look at the
loop it loads the array load the index
which isn't one load gets a bit the
value from it converts it too long so
far it survives on the stack I guess
understand now we have the result and
the element that just came out from the
array we add them together so they are
basically takes two elements from the
stack and resulting one which is the
addition of those two elements and
basically that's it so if we try it
again what we have on will happen on the
stack is the result from from the
previous value so actually there's no
need to actually store load and we only
used three local variables so no you
notice but you use the store an example
you can see this people bytecodes with
the underscore so you store on local
scene 02
three it's one single white coat when
you go for four or five or further it's
an extended white box I mean it's one
bike for saying it's a store and then
it's another one for saying okay
anything these other local variable so
you try to reduce as much possible
variables at the end will be a bit
better okay so well the addition quite
before just adding want to but local
number one and if we actually run the
code with the g2 just in that compiler
well basically it's the same so i can
tell you i disassembled the coat and all
I actually sorry again this is imprinted
the disassembled code from the projects
in the compiler and it's the same so
there's not a big difference but you run
in a machine with a budget just by doing
this small thing actually takes
twenty-five percent less so again it's
more focus on now but basically it from
a point of view it's not really worth it
unless there's a base specific peculiar
case you actually run your coats on a
machine with doesn't have a just-in-time
and you also have all the time in the
world because it takes a lot of time to
write the the byte code manually okay
calling a method is there an hour head
who says yes who says no okay I was at
say who says cookware depends on the
virtual machine yeah hey work okay it's
a small just just to check just two
loops one with a set basketball another
one which use adding one to the
available the 1i will Michelle the white
coat but just show that result so unless
a machine no different on Android device
with art slight difference but not worth
it but now they compared to machine yes
there's a penalty it's actually is 100
percent extra so like it like before so
be careful and depends on where you want
to run your code you need to be aware of
these kind of things there was a thing
it's not there anymore but there was a
opposed by Google to hopefully my son
dirt applications and they actually
recommended not to create setters and
getters you use your variables as public
because of that
yes
yep
ok
okay well you see I cheated the beat I
mean cheated because you look at the
code yeah if they'd run these a lot of
times actually this both matters really
actually gain get translated to well
we'll get boy get translated by the
just-in-time compiler because they are
called lots of methods I haven't done
many more tests and actually I don't
have any any impact on now on calling
methods or not but to be honest on
really critical code I mean I come from
graphics background so I don't usually
call methods there inside so you have
any more example anything you can share
i would like to actually take a look at
that
yeah it depends on the number of
executions basically okay that might be
ok
okay okay i can actually try that but
yeah okay i will actually try and try to
work on that forum index presentation
because the thing is a good thing it's a
good thing to take into account thank
you ah well another thing I strings okay
i can imagine all of us use the plus
sign but it might be evil if it's used
bronc by saying that okay imagine this
thing i saw that as well in some some
code review so i don't know well you can
imagine this is not very optimal why
because uh the plus sign actually yeah
well let me just go through it slowly
first of all well just creates a thing
with an interesting so it loads a
constant from the constant pool which
isn't interesting in this case and
stores it in local variable number one
then the the index of your of the of the
loop this is the same as before have to
check the size same as before so it's
learning from number two which is the
where we actually store the count with
the index then compares with the with
the with then and if it's greater than
but the value it just jumps out of the
loop okay the loop it's the same thing
so it increases one local variable and
then just jumps go to the top of it
again the loop itself okay you can see
here it's creating a new stringbuilder
it's a casa constructor and then it's a
it's a pending the string as it is so
str then is is loading a to close my
shop oh yeah sorry and then it's a
pending as well the other thing we want
to add so it's basically two happens and
then it creates a to string and the
trail and I stores the result into the
string itself again so basically this is
the Java code of what actually is doing
so this is 3 builder because what
happened was another happened and then
it gets the thing in the sitting object
back to the two str so Graham imagine
this is wrong for many reasons but one
one of it is the
month of objects created here so well
the verse of the first one which is said
the loop doesn't matter but inside the
loop is creating a steam builder and
then there's the sting bullet to string
actually creates a new string every
single time as well so what are the
alternatives we can use the sample can
use come cut but come cut actually is
still returning a new string object
every time so a subject liaison every
single time we call kaam karte will
create a new object so what is the
solution well we can use tubular as
before but use it properly so it means
do not create a stringbuilder inside the
loop so create the simpler before the
loop and keep appending the strings yeah
as a penalty stim browser itself is
managing the memory by itself but it's
not the same memory as a jello hip so it
will actually not corrupt the garbage
collection I have a look at the bike on
now you can see on all either the loop
itself now it's only it's it's loading
the value it's actually getting the feel
and appending it so there's no object
creation or anything I kept some oh yeah
sorry our do decoration is only creating
one at the beginning one at the end but
not in the loops so which is the
important thing so the solution is a you
sting builder properly you know to avoid
creating objects or a string buffer
which is the thread safe alternative of
string builder you need to do it
multiple threads another thing I think
this was other than Java 17 thing is the
the strings you can use case the demands
with strings after some well you can do
that this looks quite simple very few
lines of code but they look at the white
coat well sorry you're going to did it
but yes sorry I have to it's a lot of
white okay if we translate that to
what actually is doing is basically well
first of all it gets the hash code of
the string element we want to check then
does a switch case with with hash code
and then is matching with all the values
you can see this 3539 blah blah
is the high school depending which was
one of the cases we got there and then
in it that's the case then actually
checks if the string is equal to the
other string and then set the value to
zero what's up on this case or in the
other case it again it takes with the
hash code and if it matches hash code
then each exit this thing is equal and
then set another value then with that
value that actually said actually does
another switch case so it's not not a
big deal but just to be aware that's
actually skating a lot a lot of core
code okay something about to link you
want to disassemble your java files you
can just use java p since you are
becomes with all java installations or
on android so you want to disassemble
the decks white coat you can use text
dump also you want to disassemble or
assemble classes as well you can use a
crocodile assembler agent good cup just
drive myself it's a bit well it's not
easy it's not safe for work but yeah you
can actually assemble classes from there
or disassemble soph example totem is one
class whether it is i disassemble it
with crocodile and then modified and
then assemble it again you have another
device but this art you can actually get
the assembly code that that is producing
by pulling the file using adb pool with
with the file and then the package name
or your class and then at least with the
Mac you get the G op object dump you can
dump the object but mostly forward you
can just do from adb shell you can just
dump the file from there about the
just-in-time compiler ah ok there's a
lot of options you need you start with
all the options there there's many you
want to see any assembly code you have
to enable the first one so the load
Diagnostics BM options otherwise it
won't work to print all the assembly
generated by the built on machine or the
chasina compare Essaouira is the print
assembly but you want to actually
because there will be a lot of things
you will actually disassemble the string
methods and everything but you want to
see the one method from your code you
can use the compile common print and
then
class and then come on come on the
method be careful with that because it
doesn't method is not actually optimized
way by the just-in-time compiler it
wouldn't actually no print anything so
you can actually enable / example this
there's more commands for temple to
print which method are being optimized
or basically you want to see how one
method the instance like that just put
it in a loop at least drawn it once you
get the assembly code from it from there
Monday there was a session about that
and they were talking about just-in-time
compiler the assembly code who is
generating assembly house atomizing
assembly I was by Alex blew it here's
the reference of certainly sorry was
Monday but here's the reference but he
actually posted all the slides and
everything on this webpage so invite you
guys to actually check because it's
quite interesting so actually the I
would say is that how to close it I'll
have to close this loop and see what the
 compared is doing and nothing I
would like to talk it's a bit well is a
bit more complex example I know how to
talk about the example itself because
it's too complex but it's something that
the you want to optimize you have to
always measure because you can you can
think you're actually demising code but
at the end of the day for several
reasons it might be the opposite except
for example well you imagine a yub to
RGB converter okay you go to Wikipedia
it looks like that so first of all
because all the intensity of the image
and then cuts all the colors well in UMB
format this is not actually the format
i'm going to use but it's very similar
so we look one implementation you can
use it a lot of operations for pixel is
actually floating point is very complex
ok so we optimize that and we do some
pre calc tables we use fixed points at
the floating point which usually what
goes way faster and we try to as we work
sorry I explained as here as the as the
y components which is the intensity of
the light let's say is sharing two
elements so there's our only this two
components of intensity by one only
one by color so two pics of sharing the
core information we can actually
optimize that and manage to do two
pixels per loop so actually avoiding
some overhead as well if either that
fits all the older population tables
other thing with the eight bits of fixed
points all the shipwrights with eight
are are the liquor questions from the
fixed point and actually the loop itself
you see now it's just pick up tables or
and write some non multiplications no
complex stuff and a floating point so
it's way more simpler way more ball
should be way more faster okay I
actually run that on another device
because I was running on a camera
application getting frames from the
Honda buffer and actually run it normal
without any options then minified which
minified in android wall is basically
office created with product which is an
aqua skater then you can actually enable
some optimizations and profit enable
that as well and then so what happens
also with Jack so use the the gnu
compiler we look there on the normal the
blue ones are the nun is not done not
optimized version the orange ones of the
ultimate version without doing anything
so just the debug build see what happens
it takes more time an optimized them the
optimized version which is fine on the
mini fight or obfuscated you see is a
bit it's a bit more performant usually
Probert optimizes a bit coltan mines
methods and those other things so it's a
bit more performant it will enable the
timmys ation of product is slightly more
optimal but not that much what is
shocking and there's something about our
special price if we don't with Jack code
is faster but the Artemis version takes
more time than the not optimized version
I was quite sure but that I guess it's
some it might be something wrong not
wrong but differently the way this is a
Tables Precog tables you know maybe i'm
not sure but it's something as a
recommendation always a measure what
you're doing because a it you can't have
some surprises at the end of the day
okay also when doing performance
measurements
avoid doing multiple tests on the same
and the same goal because just in time
might just kick in in the middle and
optimize and then wow my second when the
second time I run the loop is faster
that's might be because of the jit so I
try to isolate the cases and test it
without or you want to just measure
without they just didn't compare this
and this an option to actually disable
it from the common line but actually I
do not recommend that because it's a you
unless you will actually be running the
code in a hitless environment okay so
thank you very much anything any
question feel free to ask I will process
lights just after the presentation and
thank you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>