<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Sensor Networks with Java SE Embedded and Java(FX) | Coder Coacher - Coaching Coders</title><meta content="Sensor Networks with Java SE Embedded and Java(FX) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Developers/">Oracle Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Sensor Networks with Java SE Embedded and Java(FX)</b></h2><h5 class="post__date">2015-06-02</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/8pKJCsWDT60" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">yes and welcome to the session about
sensor networks and Java SE embedded
first of all I have to show you this one
because I'm working for Oracle so you
have to read it and understand it and
then I give you a couple of seconds and
I think that's enough right we move on
so shortly about me I'm gonna come back
from Germany working for Oracle in the
Fanjul ISM team I'm also a co-leader of
the JavaFX and IOT community Java
champion but that's not that important
well I have a house and I was thinking
about how to make my house a little bit
smarter not really like a smart home so
it's it's not really that it doesn't go
that far but I was interested in how can
I measure the temperature in my house in
the different rooms and monitor the
temperature and especially I would like
to know how is the relationship between
the outside temperature and the inside
temperature at the different times a day
and all that stuff so it has not really
a use case it was my own interest I
would like to know how my house behaves
in different conditions right in winter
times during the night when the sun is
shining so all that stuff was
interesting so when I thought about that
I had a couple of questions first of all
how should I monitor on the temperature
no there are several possibilities that
you can choose so if I might on the
temperature I would like to store the
data somewhere because I would like to
analyze it so we are to store it then
analyzing is nice but you have to
visualize it somehow I would like to see
it right so how to visualize this data
that I got and the other question was
can I do all the things using embedded
devices only so no PC or Mac or
something but only stuff like raspberry
pie bigger bone I don't know all that
tiny boards mmm because it should be
cheap
and the last question was how far can I
get with Java using Java to do that
stuff so I got to these four points
that's my agenda first of all I have to
figure out how to monitor the nine rooms
it's nine rooms in my house
so then how to store the data data and
where can I visualize it on the PI
because I said it should be on embedded
devices and are there may be
possibilities to visualize it also on
other clients right like mobile devices
using Java that was the intention so
monitoring nine rooms sounds easy
and if you are using Arduino so who has
an Arduino at home or playing with
Arduinos a few it's easy right you hook
up some temperature sensor then plug it
into the in the wall with a power plug
and then you monitor it and that's it
very easy but how to store it how to
communicate with it then if you start
with that you will figure out that it
can get very complex and also if it's
only temperature yes
now the idea was there was not really a
plan so you will see how I end up so so
how to how to do that right
so I decided the way to go is using a
sensor network all right it means you
have sensors all over the place they
monitor the temperature and they report
it to some kind of communicator or
something and then I take the data from
that communicator that is the idea and
the sensor network usually is built out
of so called sensor nodes and we have
different Network topologies that are
possible and we have small or wide
networks that depends wide range or
small range then usually the data is
passed to one central node which is the
coordinator or gateway something like
that and then usually this gateway puts
the data somewhere on the internet or to
your server or whatever and the sensor
nodes should run on batteries only so
that there is something like a wife
factor on that I figured out because I
started first of all with using stuff
like a pie put the pie in every room and
if you know a pie it has this LEDs
blinking all the time it's nice if you
have something close to the bed in the
in the bedroom and it starts blinking
and so and in in the living room and so
my wife says you know what it's okay
that you do that but not here
so I decided okay it must be somehow
running on batteries that I can get rid
of power plugs and that I can hide this
stuff right that was the idea so let's
take a look at the possible sensor nodes
that that I figured out like I said I
would like to use if possible Java and
for the sensor nodes you can also buy a
commercial stuff for sure but these
things are mainly for industrial usage
and they're not really cheap so for me
that was out of reach right so I tried
to do something cheaper so I started
with a PI and it needs a power supply
mmm that was the first pro back then it
draws a lot of power so that means
running that thing on batteries you can
do that for a few hours maybe maybe a
day but
that's it so that doesn't really work
out so the form factor was another thing
you can't not easily hide that somewhere
all right especially in the living room
behind a photo or something that was not
possible I tried that so and you have
limited iOS means digital I always find
if you need analog you need additional
circuits to do that and that means wires
and that means form factors so okay and
in the end to measure temperature 700
megahertz 512 Meg's of RAM is a little
bit of overkill right so you don't
really need that stuff so that was not
the right solution to go next one I
tried Arduino yawn who knows that thing
it's in principle an Arduino with Wi-Fi
capabilities well it needs a power
supply you can run that on batteries but
even it's if it's an Arduino the Wi-Fi
really it drains the battery so that
that doesn't really work out it's around
250 to 300 milliamps the power
consumption of that combination and it's
a bit pricey so this thing in Germany
costs up to 65 euros and that's that's a
lot if you have nine of these then you
end up with a very pricey sensor network
just for playing around right I have to
talk to my wife and said you know I have
to buy that stuff so it's I don't know
600 700 bucks
what okay so it has to be cheaper and so
it's again it's a bit of an overkill for
that kind of thing
well like I said you can run that on
batteries at least for day two maybe
three I never tried it really because it
was clear that this is not going to work
so then next combination I tried is an
Arduino and I put this xB shield on that
to the XP so I come in in a in a moment
and this is the XP in this little thing
here and then that is some kind of a
Wi-Fi thingy so I will explain it to get
rid of the Wi-Fi itself right a standard
Wi-Fi because there drains too much
battery so I tried this combination
and again I ended up with the power
supply that was it doesn't really work
it works like I said for a couple of
days that was okay but not really for a
long time I was thinking about months
something like that on one battery so
the form factor like you see if you
stick it on top of each other it's like
a sum pile of electronics doesn't really
fit into our house so the Y factor was
not was not working here so again that
was not the right solution in the end I
just thought why not using only an XP
who knows X B's right so this this stuff
is really amazing it's small and it runs
on batteries only which is great that it
draws around 45 to 90 milliamps it
depends on the use case and on the XP
there are several different versions of
that stuff and you see it has a lot of
pins so that means it could not only be
communication it must be more it's very
small it's cheap so one of these things
I bought them for 16 euros on ebay so
that's really that's something I can
easily pay so that that was the right
thing to choose so let's take a look at
the X piece if this is an XP then it
runs at 2.4 gigahertz around 2 milli
watts and indoor ranges up to 40 meters
that's what Diggy says but you know 15
20 meters that's okay maybe in the u.s.
if you have wooden walls that might work
with in Germany in my house it didn't
really work 15 meters it's okay and if
it depends on the version that you take
there's also some kind of a pro version
that has a little bit more power that
can go far rather than and this but the
standard thing it works in in a normal
house no problem Auto and land off site
it should be up to 120 meters 50 I tried
it 50 was okay above 50 it was like it
got flaky so but that was not really a
reason to not use it the good thing is
it runs on 2 today to 3.6 volts
operation temperature very nice that's
Diggy's degree cells
so it can run run winter times and also
the summer no problem and you have
different Network topologies that are
supported which is also nice you can
program it kind of with yeah it's 80
commands and they have diggie has its
own IDE to do that it's not really an
IDE but it's something like that and it
has a very short wakeup time because if
you take for example you could also
think about Bluetooth right to do that
but Bluetooth takes longer to startup
measure something and then it should
sleep again and this stuff has really
nice implemented sleep modes and all
that so I will come to that in a moment
and it uses the so called ZigBee
standard who knows what ZigBee is yeah
so lots of you know that already so this
is a Wi-Fi standard and you will also
find modules from other vendors that use
the same ZigBee standard but this is the
one from diggy that i used well if we
take a closer look at this thing you
will see it has something like ad
converters and it has also digital ins
and outs and it has a yacht connector
and it has power connection sure so that
makes it perfect for me for the for the
stuff that I would like to do because my
circuit was very simple I used the TMP
36 which is the temperature temperature
sensor an analog one and then I use a
battery and that's the whole circuit
that you need in principle right you can
add more stuff like a capacitor or
something but this in principle works
that's all you need and you can imagine
that that could be really small alright
so let's take a look at the the stuff
that I hope that was too fast so that
that's the procedure that I use so first
of all you wake up the Diggy the XP then
you measure the value on the digital and
the analog digital converter port 3 then
you transmit that value and the good
thing about the XPS is if they're
running on batteries they can also
monitor the
the voltage and they sent you the
voltage also so that means that the XP
itself knows okay the battery that I'm
connected to is running at the moment
3.1 boards something like that which is
very useful because if you have it lying
somewhere in your house you can't really
go there all the time and check how is
the state of the battery so you need to
know some kind you need to know the
state of the battery right so if it's
still charged or not so this is very
nice so it can transmit that and after
that it goes to sleep again
and you can program that kind of
programming in the in this IDE that they
have and then I do this every five
minutes so it sleeps for five minutes
that it wakes up measures the value
sends it out go to sleep again so and
you can imagine that takes not very long
to do that so that means it really has
low low power consumption because it
most of the time it's sleeping and five
minutes it's even I can take ten minutes
or fifteen right which would be even
better so with the sensor node I end up
and I didn't really solder everything
because that was just for my playground
so I'll use a little breadboard then
this PCB that I ordered that other fruit
then I took this the X be the
temperature sensor battery holder this
battery some wires and a case that's all
and I ended up with that so that is
really small it's really just a little
box of five by seven centimeters it's
two centimeters high and I can place it
everywhere in the house right and that
really works you can put it behind a
picture and in the living room my wife
he even doesn't know that it's there
right so and because this thing is
telling me the voltage of the battery I
know
okay now it's batteries going down I
have to exchange it and this battery
will last for I have some running since
March and they have didn't exchange it
right now and I measure every five
minutes so if I would agree stat I'm to
10 minutes it would go even longer on
one battery right so that's that's
really a nice solution and it one sensor
no it was around 350 35 year or sorry
so that means I end up with around 300
euros for the whole sensor networks in
kind of hardware that's what I needed
that's okay to play with all right so
it's really just for playing around so
let let us take a short look at the
topologies that you can use the XPS
support mesh networking
who knows what national networking is
how it works okay because that the
interesting thing about mesh networking
is that it's some kind of self-healing
because these nodes are just publishing
their data just like broadcasting right
they have no idea where it goes to and
then the notes will take care that
somehow this message will reach the
coordinator which is this node the
drawback and you can see that here you
have batteries on the sensor notes but
the Reuter notes have to be always power
on and that's if you take a look at the
power consumption that's a drawback the
advantages you can use it in large scale
you can really create wide range sensor
networks with that topology but it's
hard to set it up it's not that easy so
for me that was not really useful so
let's see what it is and it's it's
self-healing because if some route are
now trails the I could just just use
another route that's no problem
it is really capable doing wide range
networks and packages can take
alternative roads routes that was no
problem drawback is the nodes are
broadcasting so they don't know who they
are talking to they just always put it
everywhere alright so that means power
consumption the setup is quite complex
and you can combine it with the star
network and the tree network so that
means it could be really complex and
yeah all over the power consumption of
the whole network is is bigger if you
take the mesh approach so then there's
the other one
which is really good for short-range
networks and my house is a short-range
Network right everything is within 15
meters except the shed outside in the
garden it's maybe 20 of 25 meters away
and for that one I use the next V Pro
which has a little bit more range than
the other ones and here every node is
directly report
to the coordinator that means every note
knows exactly who is to to which noted
it is talking to so you have to code
every xB has an fixed ID which is which
is just available once and so that means
every note knows I have to talk to this
coordinator and sending only to this one
not broadcasting so that means this is
in terms of power consumption that is
much better
drawback is that you only have this
twenty forty meters inside 120 outside
so this is sometimes it's a little bit
of a problem but every note can run on
batteries that's that's an advantage so
that means we have it's a very easy
setup you just code this this code you
create once for the XP and then you can
save it and just apply to each of the
sensor notes and just give them a
different name so that you can later on
that you can recognize this boss note
number one node number two so they have
an specific ID and you can also
customize the name of the node alright
that's possible and the law of the low
power consumption is for sure the best
thing about it and it's very easy to
maintain
so because it's in it's made for
short-range small networks therefore
it's perfect mmm-hmm then that's also
the drawback it's only for short-range
you can't really use it on wide range
stuff and the coordinator but that also
goes further for the mesh network
approaches the coordinator always is the
bottleneck if this one got broken and
that's it you can't talk to your sensor
network anymore and there is no
interaction between the nodes like in
the mesh one node can talk to another
node here the nodes only can talk to the
coordinator that's the only way so that
was my approach the coordinator is the
Raspberry Pi so that means I have to
somehow at annex B to the Raspberry Pi
to make it possible that this one can
talk to the others all right and
therefore I use the little board which
is called slice of pie and on this board
there is a socket for
the XP so you can use that one and we
can edit to the Raspberry Pi we can just
put it in the on the on the Raspberry Pi
and then we can talk to that using Java
so that was first thing that I would
like to do use Java possible with this
solution jabber won't run on the next be
but that's okay for me so that means I
have this setup I have all the sensor
notes and they talk to this coordinator
on the Raspberry Pi and to do that
because you have to talk to this to the
network you have to somehow need you
need access to the to the XP API there's
there's some kind of an API and I use
this
it's called XP API that's a library if
you type in XP Java in Google it will
lead you to this to this library it's on
Google code or some somewhere and it's a
little bit older but it works perfectly
with the standard XP s so then my
raspberry pi setup is Debian wheezy
Linux half float it's just a raspbian I
use JDK 8 farm I use the slice of pie at
on board and then the XP series too as a
configured as a coordinator and there's
something as when I bought it it was
serious too today they are called Paul
right so but if you sometimes you will
find a 2 in there so that's the one you
should use because there's also a more
simple solution it's called the serious
one and this one's are just like premium
Wi-Fi serial connection and that's it so
they don't support all the
functionalities of the series - okay
what it does it it stores every 5
minutes
it stores the data to the database then
it publishes the the data life via MQTT
and oh it also sends me push
notifications then it tweets about it
and I can also chat with my PI so if we
have time I can show you that I can chat
with my sensor network at home I just
implemented an XMPP or
my pie and so I just use whatever chat
program that supports XMPP and then I
can chat with the system and ask them
for the status for the temperature of
the sensor notes and so on and also use
that to remotely remotely update the the
Raspberry Pi software if it's needed so
the conclusion was then XD based sensor
network is the perfect fit for me it's
cheap it works in small environment very
nicely and the Raspberry Pi it works now
for oh I started last year in November
and since then it's just France right so
JDK 8 and it even runs on the JDK pre
boots so it's not not even the latest
version on there and Java 8 is perfect
it's fast enough and it can handle all
that stuff it's really a nice
combination so that means first thing
achieved so I can monitor 9 rooms using
Java and using XPS so the next thing is
how to store that data right so I told
you the PI were collected and every 5
minute it will be stored in a database
so that means that let me show you how I
store the data are using an embedded
device first of all which database right
there are many databases available and
which hardware should it run on the
database and where to store it on an SD
card yeah you can for example use
whatever MySQL and and install it on
your PI and then it will store the data
on the SD card it doesn't really make
sense because it will corrupt your SD
card over time and then it is SD card is
broken
everything's gone so that's not a good
idea so first of all which database I
choose MongoDB and that's not really a
reason why I choose that it was just
because it's a nice database and it
worked for me and there's a port for arm
available that was one thing that was
important right I would like to run on
embedded devices the whole state in the
whole thing so one would be that it's
very flexible because in the beginning I
didn't know what I'd should have put
into the database so in MongoDB gives
you the freedom to do whatever you like
to just store it right then it's very
developer friendly it has a Java port
and it is available for arm which was
the most important thing
a little bit tricky you have to compile
it on the PI or whatever arms or
Hardware you have but then if you have
it once then it runs perfectly the next
question was which hardware I could use
the PI like I said but that means I have
to store the data on the SD card which
is a bad idea so I was looking for
something that has the ability to
connect a hard drive to it you can also
put an USB hard drive on the PI yeah I
agree but I didn't like the approach so
I was using the cubieboard - does
somebody know that port it has it's an
all winner 20 CPU it is a dual-core with
one gigahertz that's not the important
thing
also the GPU doesn't really matter it
has one gigabyte of RAM that's nice and
if he was this microSD and it has a SATA
port that was perfect because I just
bought simple SSD 64 gigabytes it was
really cheap because this small SSDs are
cheap these days and I hooked it up to
the to the cubieboard and one would be
be is running on the cubieboard on the
SSD and the database is stored on on my
own there on the microSD card sorry and
then the database is stored on the SSD
it has an internet connection and has
several ports that you can use to I
square C SPI LVDS and so on so again on
this board I use raspbian it works on
the cubieboard
and jelly k-8 for arm so you now can
tell me huh why do you use Java it's
just the database right but what I did
was I added a little piece of Java code
on the database and first of all the PI
was storing the data directly to the
database but then I decided it's a good
idea to publish the data via MQTT and on
this cubieboard now the java code is
listening for and it's subscribed to the
same topic and then it stores the data
to the database alright that was not the
main idea to be free because now if I
publish the data from the PI
to MQTT I can use or subscribe from any
client and do whatever I like so I can
hook up in a second database and do I
don't know you can do a lot of things
with that stuff with that approach that
publish and subscribe so and what I did
is the Java code also collects only
seven days I'm only interested in the
last seven days and then I removed the
the first day of that last seven days
and I can also talk to this guy I can
chat with my database server and ask him
ok everything's fine how's memory
consumption and so on and so on
ok so that was easy but setting up the
database took me around a week so that
was because it was hard to have to
compile it and separate everything the
arm port is a little bit older MongoDB
version but it works and I heard
yesterday that they are still working on
the port so there might be a new version
in the future mm-hmm what would he be
perfect for that kind of stuff for me
the cubieboard 2 with SSD works like a
charm
it works like last year November and no
problems with the database at all and
Java 8 also on that device without any
problems so it just works nice so
storing data also no problem then the
next thing was visualizing all that
stuff using a Raspberry Pi well it
should show that the currents the the
card but that's tradition outside so
that means if I now take a look at my
computer I would like to see what are
the medical conditions in Germany and my
place right now outside then for example
it should all then this this data is
coming from the nearest buy airport
right I just took it from the internet
then I figured out that this is not
really precise so the airport is 30
kilometers away
that means if it's raining at the
airport it could be quite cold there but
it could be sunny and warm where I live
so I needed some additional sensor setup
outside that just collects environmental
data like temperature and so on then it
should show the live measure data that
is the current data from the sensor
network then it should somehow show me
the data from the last 7 days I saw that
in the data base
and it should also show me the history
of the voltage of the batteries so that
I can see oh the one battery of that
note is going down so I have to exchange
it within the next I don't know a week
and I would like to see how is the daily
temperature distribution of each sensor
note because that's really interesting
if you I will show you a picture then
you get an idea if you see how the
temperature changes for example in the
shed outside in the garden during night
time in daytime so and then if you
correlate that with the weather
conditions outside and then compare that
to the stuff inside so stuff like that
and that's really interesting to to
figure out how your house behaves in
different conditions and which room for
example always is warm and which will
really cools down overnight and gets
warm of a lunchtime something like that
so that you can really nice visualize so
the first approach that I did was going
big right going big means I used the 10
inch touch screen I ordered that from
Charcot electronics and I think it's in
Taiwan I'm not sure that is that's this
one and the interface that I created
looked like this so it's a touchable
interface and it shows me that's the
current weather condition that come is
coming from the from the airport this is
the stuff that I measure outside so
that's measured by my own weather
station this is the data from the last
seven days all right and it's always
showing the data at the same point of
time that means if I take a look now at
12:21
then this is the data of the last seven
days at 12:21 so that's how it works so
that means this will change over the day
this curve so this is what's my idea
because I'm interested in how was the
temperature now but seven days ago how
was it at the same time so that gives
you an idea yes
know that the the sensor notes itself
just do this every five minutes right
and they do that independently but the
the Raspberry Pi it predicts all the
data and then it sends out one set of
data every five minutes so that this
data is always it's not really life it's
weather maybe five minutes delay no no
it doesn't it doesn't and this is really
this temperature is the one that I
measure outside this data here all right
it's not from the sensor nodes in that
case we come to that so then this is
just to visualize the that's the data
from a weather station outside so it's
just to see okay that's the conditions
all right I have pressure I have
humidity and I have temperature and then
these are the sensor notes right and I
have here the battery state so I can see
okay that's it's okay or it's if it's
getting read then I know I have to
exchange it so this one for example send
doesn't send any signal anymore so it
means there might be the battery's empty
already mm-hmm
so now edit charts these are charts for
each sensor note now I can see you see
this one which is maybe hard to see it's
going up and down and up and down
that's the shed outside you see the
house it's quite stable but outside
temperature it's going from here I think
I can't really see 2.5 degrees Celsius
up to 27 degrees so ever in the night it
was quite cold and during lunch time it
was quite warm right thanks now we can
see it maybe better so this one is the
shed outside and these are the rooms in
the house and then we have here the
difference the legend for the different
sensor nodes and this is the supply
voltage and you can also see sometimes I
get no signal here and the the battery
outside if it gets warm and the charge
is higher and if it gets cold it charges
low alright so this is what you would
expect from a battery that you put
outside so and this is the stuff that I
mean so that I created that chart and
this is the daily temperature
distributions
that means this is midnight and it goes
like that
and here I can see at midnight it was
around whatever it was 10 degrees maybe
and then during lunch or hits a 3 p.m.
then it was hard to read from here maybe
27 or 1 then you can choose the sensor
notes and the last 7 days so that's the
way how I visualized it to see and
that's really interesting if you click
to these days and you see how it changes
over the time and that was that's really
the interesting thing was that chart
it's really nice to to have that data so
the second approach because that was
quite barrier what that's that size and
it's hard to put that on a wall
somewhere and again we have wires and
that was not really useful so I decided
to have also go for a second approach
means going small so that was this one
this is just a pie and in the pie on top
I have a little LCD which is quite small
and I just have 320 by 240 pixels means
that doesn't give you the same brutal
capabilities like the 10-inch screen
right so I have to figure out how to do
the same stuff on that small device well
you would see that I was not able to do
all of that stuff on that tiny device so
that's the user interface that I created
so we see that one which is close to the
other version so I have this last 7 days
then I have the data at the current
situation I have this Miss dials and I
have only one each and I can swipe
through all this stuff is running on
JavaFX
and then I have the sensor nodes and I
can also just with a swipe gesture I can
go through this through these nodes
problem is the 7 day history and all the
charts that thing is too small I tried
that but you can't see anything it's
really just too small so let me show you
a little demo that you get an impression
of that Raspberry Pi version the small
one does it start automatically you see
should start ah here we go
I recorded that with my mobile phone so
it's not that good and it will get crisp
again so
just lost the focus here we go there it
is so for example when I touch that then
you see that it's this one and the good
thing about this this tiny version I
just need to hook it up to power and
that's all and it starts automatically
it's just the size of the pie and it
uses Wi-Fi to hook up to my network so I
can take it with me and wherever I am I
just can put it in in the power socket
in the wall and that's it
so I can monitor my sensor network at
home with a very small device that was
really no problem all of that stuff is
nice but if I'm like I'm now here how
can I monitor it here
so the next thing was I need other
clients like mobile devices maybe so let
me see first of all the conclusion the
Raspberry Pi you can really use it for
for that kind of stuff it's nice you can
find different LCD displays that can be
used for us for Java effects with touch
and all that on the Raspberry Pi
JavaFX it works great on the part don't
expect that it's so fast as on a desktop
right but it works quite good but my
recommendation now would be using an
iMac 6 processor which has more power so
you get better graphics it's just faster
and it also supports hardware
accelerated graphics with JavaFX so that
means visualization done no problem next
thing was like I said if I'm here and I
would like to monitor how should I do
that right so how can I monitor my
sensor network when I'm on traveling for
example mmm
so other clients I created a desktop
plant sure then how here's something I
created a client for the cubox eye which
is a very small embedded computer
running the imx6 processor then I
created clients for the iPad and the
iPhone and Android devices and also like
a SmartWatch running on Android so and
the iOS and Android stuff is not
officially supported
right this is these are community
projects but they work great so they're
really nice so let's take a look first
of all let me show you the version
epsilon hang on my iPad Mini this is
recorded on the device so sometimes it's
a little bit it's stuck wrong you see
here the graphics but this is because I
recorded that life with Wi-Fi and but
it's it's quite a good you see it's in
principle the same that you saw before I
have touched menus I can have blurring
here in the background I have the charts
and this is just show you what I'm what
I did it's similar to the I try to use a
similar interface on all the devices
it's and I reuse all these controls that
I created right so that's the really the
advantage of using Java so I created
that on a PI for a big screen for small
screen for all the devices and I always
used the same code in fact I build it
from the same codebase so I have one
project and I just have one class that
is different for each device because
they have different screen sizes and
orientation here you see a little
rendering issue the black background it
will change now to blue so that's the
way it should look like but in principle
you can build stuff using Java effects
on a mobile device it's possible okay
here you see there's the red battery and
then what else did I implement it I I
also implemented switching so I can also
switch on some stuff at home and all
this is based on mqtt so also the the
iOS version just subscribed to this
channel and the data that comes in from
the PI I just visualized it then it also
talks to the database directly so and
gets the data from there so that that
means I this is the the imx6 device I
was talking about right it's really
small it's really that size and it's
powerful it has a quad core with one
gigahertz to got gigabytes of RAM and
has Wi-Fi Bluetooth it has infrared it
has SATA port it's it's amazing and it
really doesn't get really warm and it
costs you around 120 euros Roth
then this is a SmartWatch running
Android and on that one I also created a
job effects version and this looks the
same as on the the small one that I did
on the PI right and this is exactly the
same code I used there because the
resolution is similar this is 320 by to
95 mm-hmm so that has a little bit more
space than the small pi version so that
makes it really easy to just reuse the
same code just compile it for Android
and that's it and indeed the in fact
this is a real phone it even has a
camera here and you can Skype on that
thing and you can can call me on that
stuff it's really crazy so this is more
like a smart phone just smaller mm-hmm
then I use it of course on a desktop on
iPhone on Nexus 7 on Android devices so
the conclusion is you can also use
JavaFX on iOS and Android so you have a
community-supported ports there then the
performance really depends on the
hardware so if you have fast Hardware
like let me say if you have an iOS
device it should be an a7 which means
that's the iPad Mini 2 retina or the
iPad air that works really great if you
have stuff that is a little bit older
you have to take care about what you are
doing with JavaFX so that doesn't really
work good on that devices because the
devices are just not powerful enough it
seems
so that's my my experience so I also
tried it with a very cheap 46 year old
Android tablet right and 46 year old so
what can you expect from that right it's
really slow but it works so at least you
can do it and you have in principle the
same problems that every mobile
developer has right you have all the
different screen sizes you have
horizontally vertically layouts and all
that stuff so you have to take care
about that too so that means the final
setup that I have aren't quite fast so
it's 96 slides and we are nearly done so
the final setup that I that I use is we
are we have to have this XPS and hook it
up to the PI
with the slice of pie board on top then
they talked to this guy and so this is
the sensor network right so then to get
that store the data somewhere I use this
cubieboard to again it uses Wi-Fi and
that's just a sketch SanDisk solid drive
64 gigabytes it was really really really
cheap and I use this with the MongoDB oh
where is it going come back oh there it
is Oh strange so this is my database
server well there's something with
animations going wrong here hmm
what is that okay strange so this is a
big old bone black who knows bigger bone
black it's it's a quite nice device
right it's it's not very expensive
I run also raspbian on that thing and I
have mosquito installed there as an MQTT
broker that comes with Linux you just
have to sudo apt-get install and then
you can just install mosquito and I
think it's around 80k that's the size
it's really small program can see and
it's good enough for small stuff so I
won't use it for big things but for
small things that's really nice and that
runs now for I don't know a long time in
my office and that's my broker that I
use so I think we will see again the
strange animations oh no this time it
works so then I have the visualization
using the Raspberry Pi here we go again
I don't know strange we have to wait I
think now it will show up the whole
thing again yeah
next one where is it
copy/paste effect good so I have this
for visualization and in the end I have
all my different devices that terrible
sorry for that that talked to these guys
okay can you please show up
and the next one finally so this is how
it works
this guy published all the data and then
all the others subscribe to this channel
right and that makes it possible to
extend it and that's the good thing
about using publish and subscribe model
for this kind of stuff in the embedded
world it's really nice because first of
all I just made something like a direct
connection which is also okay over the
network but with this approach you can
do if you now tell me well you know I'm
also interested in their data how can I
get it well just subscribe to this
channel and you got it that's all
makes it very easy to extend the whole
thing right so I first I started with
the data base then I added that stuff
and at least at the mobile clients and
the only thing for communication was
okay just subscribe to the channel and
you get the data so that was very easy
so the conclusion of all that is you can
create a cheap sense or networks by
using XPS only but let me tell you that
this only works if you don't want to do
stuff like you can't hook up things that
draw a lot of power from them from
switching or something like that that
doesn't really work on the XPS also
switching external stuff like digital
output you need additional hardware to
do that with the next week but for
simple things like just measuring a
value or different sensors and then send
the data perfect fit right that really
works very nicely you can save a lot of
money by using just some better
technology so I am I have not my own
business so I don't want to put a big
server in my my office just to get this
tiny bit of data so I just decided it I
just used the embedded devices and it
saves me a lot of money because all
these bots are cheap right it's all of
that stuff is really cheap so we can use
it in its for me it's really reliable
that runs 24/7 now for nearly a year
without any problems it never crashed it
never let me alone it's really it's
great and you can run on all that system
you can run java that's also no problem
so whatever you would like to do for
example on the database server
I also added the possibilities that
first of all I just collected the data
from from the MQTT channel but then I
figured out it might be a good idea if
the for visualization for example I
talked to the database server directly
to my own Java code asked for data and
then this little board prepare data for
me so the calculation will be done on
the database server because it's just
collecting data it has enough power to
pre calculate stuff that I don't have to
do on a mobile device for example
all right stuff like this that's really
useful and with this I'm done and we are
really fast we are 15 minutes ago let me
try to show you if I can hook up to my
system life now where is the mouse
cursor here we go first of all we can
for example chat with the device which
is always fun if I can hook up the yes I
can
isn't that something oh it's it's now
okay let me see so there should be
something like MongoDB server and yeah
environment server for example so let's
check the let's check that and run one
server as their chat window somewhere ah
that's terrible with two screens what
does it say I can't really read it just
give me a second we will fix that just a
second if you have any questions just
don't hesitate just ask I try to listen
so if do we have if you have some
questions now it will get better in a
second now we are synchronized that's
better for the whole project I started
in November and it runs since December
maybe 2 to 3 weeks
mainly because I have to wait you have
to order all that stuff and it takes
some time to put it all together and
program the XP so programming the X base
it it's a bit a little bit of tricky it
feels like magic you do something you
don't know if it works you just black
power to it and then Oh
it sends data great great so it works so
but in the beginning it's like you never
know oh here we go
so you see let me close this one this is
my chat window and you see I did this
sometimes I'll talk to it let's see info
okay here we go so that shows me the
public IP even so then the status okay
here it is so that's the temperature
right now in Germany at my house outside
so the data humidity pressure minimum
maximum and so on so I can just and I
can do this with all the all of my
devices I always hook up XMPP so that I
can chat with that and it gives you
really interesting approaches for
example mmm updating my Java code
running on on these devices what I do is
I put the jar I compile the jar on my on
my machine here in San Francisco
put it on
my Dropbox right then I chat with my PI
and just say update the PI takes the
data from the Dropbox and restarts
itself just exchange the father and been
remotely updated the PI very easy and it
works so you can do stuff like that for
example so let's see if I run my little
demo app if I can find it in all these
things here we go
I hope it fits on the screen because we
have no different screen resolution due
to the Bema oh it's it's no
unfortunately yeah you see it comes up
but it doesn't really fit on the screen
but as you can see let me show you this
stuff here the sensor nodes looks good
outside and it should be in the nearly
midnight in Germany so it's 15 degrees
not too cold we can see here the graphs
let me go to the shed because that's an
interesting one and now we can see how
the temperature changed over the last
days right and that's that's really
interesting to do that to compare that
with with the current conditions on your
house any questions yes
hmm no sorry maybe I got that I said
that wrong so it's not my secret that
correct corrupted the database that
would also happen with with MongoDB it's
when you store or write and read from
the brightest the problem read to a
micro SD card or SD card that's the
problem
so that SD cards are not made for
constantly writing right so that's the
that was the problem you can run that
stuff on a PI but because you only have
the SD card even if you put in a really
big one at some point this card will be
corrupted and if that happens then the
whole system is gone so what I do is I
have always a spare SD card so and if
this gets broke I just exchange it
reboot and have the data on the database
on the SSD besides now that's yeah
yeah you can use smile square it's fine
sure so I just used MongoDB because I
would like to that was all yes yeah it
can't do that it's because I'm like I
said this is just a toy project that it
has no really use case it's just for me
to play around I would like to just like
to figure out can I do that and how much
would it cost so for sure I can store 64
gigabytes on this database with no
problem yeah that was just a personal
decision
not really a reason for that any other
question yes
yeah I yeah it's Java SE 8 embedded so
it's Java 8 for arm
yeah and it's for the arm v6 7
architecture yep anything else yes open
up no these are these guys over there no
no yeah yeah no yeah I open up it's
really nice but that goes far beyond
that what I am doing I'm really I was
just interested so you know I studied
physics and I'm always interested in
that kind of stuff and I would like to
just to know how the house behaves and
all that different conditions so for
example if it gets its code in the
morning and you have to put up the
heating system but then at lunchtime
it's quite warm so we're the house be
stable or will it follow this right so
will the rooms be warmer over lunchtime
and go back and it's not the case in my
house so the house is quite stable with
the temperature and yeah that was stuff
I was interested in so yes
oh there is a yeah and for the star
Network I don't know if there's a
limited this would depend on the on the
XP specs I don't know if there if there
is a limit there might be one there will
be one sure but I think you can hook up
a lot of experts in that network yes
over there
I was I was thinking about that but to
be honest never asked nobody asked
before well yeah I can do that it's
unfortunately I'm not allowed to open
source code anymore
because I'm working for Oracle so but I
can blog about that because the most of
the hardest part is I can show to you
because we have still time the hardest
part really is setting up the XPS
correctly and that takes some time and
you need this kind of software it's
called X CTU
it's from diggie and okay take some time
what it does is you need a connector for
the USB port of your computer that you
put in the XP then this software will
figure out ok this is the XP type
whatever and then on the right side if
unfortunately I can't show it now but on
the left upper side you see there's
something like I can explain with a
little loop so you can press on that and
then the software will try to find the
next be connected to your computer
directly right and then on the right
side you can do something low to profile
or check several check boxes and change
parameters and it's really always there
ah
ok there's something I don't know
install radio family yeah because the
the the XPS have some firmware and you
have to make sure that you have all of
these I on the same theme well otherwise
we will get into trouble sometimes and
setting it up so that it goes to sleep
wakes up five minutes later measure
something sends back all this is done by
configuring a lot of parameters and all
this should be done in hex and it's
really sometimes like hmm milliseconds
and then it's not that you say every
5,000 milliseconds it's the gap is 10
milliseconds in hex and then x times
this is the sleeping period and x times
that is the measure period and so it's
really a little bit strange to set it up
so I have notes how to do that because
we did that last week for a friend of
mine I can for example put that on the
web yes that's that's no problem
and it's really fun to play around with
the ESPYs they are really it's you can
do nice things with it
for if you think about robotics it's
perfect it's small it has a right range
so it's really good stuff and it has a
low power consumption anything else
if not then thanks for attending and
enjoy the conference</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>