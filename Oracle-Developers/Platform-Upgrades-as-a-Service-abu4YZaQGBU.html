<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Platform Upgrades as a Service | Coder Coacher - Coaching Coders</title><meta content="Platform Upgrades as a Service - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Developers/">Oracle Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Platform Upgrades as a Service</b></h2><h5 class="post__date">2015-06-02</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/abu4YZaQGBU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">welcome everybody and thank you for your
interest in this session so first let's
let me get started with why are we here
what problem are we trying to solve and
when you have questions like this
usually a good source of inspiration is
a dilbert comic so this particular comic
right to the day somehow explains the
problems that our developers face and it
cannot use even go talk about it is it's
actually October and it's just pretty
much talks about it about software
upgrades today if I take a look at the
state of the art of what software
upgrades are this is a very common theme
and in recent years operating systems
and browsers have taken strides to make
the upgrade experience a much better
experience than then the software
development itself so just to prove a
point we took a quick survey of what so
def and we just pick jquery so by all
means jquery this is not a criticism of
jQuery jQuery is a great piece of
software and the popularity and adoption
comes paints and one of the pains or
upgrade of great pains and when we
looked at the eye we just picked up the
latest jquery upgrade guide it was pages
long and you have a stack overflow a
very popular guide which talks about how
to keep jquery up to date right and if i
see the steps that we go through
internally as well as what our customers
go through this is some variation of
this you have this greatest piece of you
have this new version of the software
and you are trying to you want to use
some of the features that you have and
the type of steps that go that you go
through is some variation of it little
read the long boring release notes make
changes keep your fingers crossed test
go through it again
and going back to our previous slides
this is usually software upgrades are
usually not the time you take is
unpredictable and I think probably many
of you will agree with that it is very
unpredictable in terms of you can hardly
say I will finish this upgrade in a week
it's very unpredictable and okay let's
go on to the next slide where I talk
about okay when you say V who are we
what are we talking about and you can
see that there are probably two types of
two types of audience when we talk about
software updates either you are an end
developer I think many of us are here
because we all consume open source or
any other piece of software all you are
responsible for a budget for a project
to run to run the project within time or
you are from the QA audience or you are
from on the other side is a platform
developers which is where myself and my
colleague here or part of ebay and we
are part of the global platform and
infrastructure group and this we are on
the on the blue side of things we r
platform developers we want to roll out
new awesome features and we want our or
the new reasons to be adopted as quickly
as possible just before I go by a quick
show of hands good grief folks say are
you is any of you folks on the blue set
of things okay so you probably kind of
understand the pain that we put on our
on our end users and I'm sure this is
something which I hope that the
remaining folks are probably aware of
the pains right so this is a very common
problem irrespective of whether you're
writing open source or is your writing
enterprise platform or any type of
software where if you have adoption and
you are putting out new releases release
of the release this is an ongoing
problem and add ebay the problem goes to
a different scale and I just want to
spend a little bit of time about why
this is a big problem at ebay and why
did we at
invest time in building an approach that
we built a DBA just a quick stats on
different different type of things that
we do we have our own internal github
repository we have a we have our own
mirror of maven repository npm
repository and we have our own ass layer
platform as a service layer which
actually deploys to an internal club so
with this kind of a setup where we have
our own internal loop excuse me internal
versions of everything you can see the
type of scale as like any of the
large-scale website ebay.com is a
stitched is actually hundreds of
applications stitched together to work
in a very seamless way right and what it
translates to is we have approximately
thousand deployments per day just think
about the magnitude of the problem some
at any point of time there is somebody
rolling out a piece of code which has to
go through testing which has to go
through all the way from a developer
life life cycle of water tested push it
out and you're both of them I think most
of our scrums are around two weeks
that's a very normal thing in a giving
right but you see the number of
deployments will go out far as the
number of releases that we put put out
is phenomenal pretty much I think one of
the joke is we have what 26 24 or 26
paychecks and if you look at the number
of releases we put we pretty much have
to put out a release for a paycheck and
all of this supports the the needs of
the business it's not that we have an
unstable platform you you always have
something happening and there is a
platform ask about hey can I have this
feature can I have this bug fix and that
is one of the things the reasons why we
have to put out so many releases and of
course everybody cannot move as fast as
we want so they are forced to have that
backwards compatible releases within
reasons and then we have our option
adoption is something that we
is a platform that has gone from pretty
much no adoption two predominant this is
this is the platform of choice in the
last two years we have almost thousand
five hundred plus developers across the
globe different time zones to developing
software and the type of software they
develop our web applications services
supporting all kinds of native mobile
web experiences we have messaging
applications and we have batch process
so the hood of the whole all types of
applications that you can think of are
built using this JVM based framework and
to support this we have adopted a stack
overflow like model like a like a forum
there is no tickets and whatnot right
you you post questions and we have a
vibrant community that's that answers
the questions and also we have
moderators like us who jump in and just
to give some the fact that this is a
real platform is we have hundreds or
thousands of virtual machines on which
this code is deployed every single day
and we're talking about multi billion
traffic it's but a very scalable
platform any yeah I would just like to
touch a bit on the number of deployments
so this platform is a job platform and
from pretty sure that from your belkin
experience you also know that when you
deploy in a Java code it's usually much
less riskier that thing's basic things
will not work well because it's a very
type-safe language so it's pretty much
what we roll out with our developers or
are are pretty solid you know features
or or or fixes they are it's a let's say
a very high number of rollouts
considering that this is still a very
safe language so I think that also
an angle on the size of the operation I
want to go back to this oh thank you
Robert so one of the things I want to
say then why we started looking at this
approach was we had all these problems
and I go back whenever you put out a new
release for almost 18 months we get a
lot of love and hate letters I get one
my boss gets a letter saying that
upgrades are painful I'm predictable why
do they have to go through so many steps
and you put out a release every two
weeks I know it is important for me but
why do I have to go through all these
painful steps and I'm sure all of you
work in global organizations p is a
platform consolidate contributions from
many providers from different parts of
the of the world to put together as a
platform that needs to be tested and
depending on who is writing the release
notes and the instructions whether that
person is an english-speaking person or
a non english speaking person the person
who is reading the release notes and
following the instructions there is a
wide range of interpretations on how to
get the upgrade done you know so all of
these are I helped are real problems
that all of you face and when we looked
at it and then we were here that we have
to after 18 months we have to roll out a
new major version of the software we're
practically every maven of palm file
that is out there had to be changed if
we had to actually build a brand-new
maven repository for the new for the new
major versions you are putting out we
were faced with a daunted task how are
we going to do that even our first 18
months we don't have a good a good I'd a
good credibility in terms of doing
upgrade smoothly we talked about it and
as a team we felt that that has got to
be a better way to do this than just
writing release notes putting out code
and whatnot and that's where we began a
journey which started about 18 months
ago where this is how software upgrades
are done today at ebay you go to a
software we kind of treasure to change
the game the way you do this is
go to a portal a self-service portal
there are only two questions that we ask
you are gay triple variant code resides
and your contact information that once
our bread is done successfully or or or
or with issues whom do i contact these
are the just two pieces of information
just take a look at it there is no we
don't ask you what version you are in
which version you want to go all you
have is just this two piece of
information and with this piece up in
with these two piece of information a
lot of things happen we do a lot of
automated software upgrades we after our
blades are done we issue a pull request
to the team that requested it that these
are the changes that are being done in
addition to this you get a very
personalized email about what was done
what is remaining to be done and what
are the other things that are of that
are of interest in your project that you
need to worry about and in the process
what we also do is we collect telemetry
about what did this upgrade happen who
did the upgrade what were the problems
that they encounter all of this feeds
into future evolution of the platform
and so with that I'm going to hand it
off to my colleague Robert who is going
to go to the details of what is behind
this whole experience that we that we
actually put up put out and why it is
pretty much 100 wasn't adopted within
with an EV Thank You Roger so this is if
you look at it this is a pretty simple
way of a user to interact with with a
system I it's hardly more possible to
make it simpler than this unless we
start reading minds and don't let this
fool you though because what's happening
in the background and that's actually
what we will get into is pretty complex
and we do
really thorough analysis of the project
we need we do thoroughly list all the
transformations that are required to
bring the detected version so the
version of the platform which the
project is using the version we detect
to upgrade that code from that version
to usually the latest version of our
platform and applied transformations in
a seamless way out of what the user
receives obviously the pull request
containing a git commit are the changes
which will go into their code base which
will enable them to use the newer
version of the platform that's that's
without a doubt but the email is also
extremely useful and one particular item
of the email is has the highest
importance and usefulness and that is
the average report that upgrade report
is a custom tailored documentation of
the reasons behind the changes contained
in the end and that git commit in that
change that it explains details the
items that were the transformations that
were made on the code that whole project
structure and it also gives the
background why were those
transformations performed the structure
of that report and this is by the way
this is just a regular markdown file
sitting on the user's branch and it's
inside the actual git commit so it's
study tied to code itself it's you you
really can't miss it and it's really
monitor so it contains three categories
of of topics one is the listing of the
automate the steps that were
transformations that were applied
automatically to the code to the project
to all the matter information that is
inside a project the other is
group of changes that were detected that
those have to be made but there is no
automatic automatic solution for them we
strive to have of course full automation
but it's not all the time reasonable and
feasible to have it have it implemented
still even in this worst-case scenario
we detect very exactly which which parts
of the code need to be transformed need
to be touched by the user by the
developer right you're talking about
developers here and we provide exact
instructions what has to be done so they
understand the motivation behind those
changes and there's a third category of
of transformations which are think of
them as optionals just suggestions to
increase the quality of the codebase
these can range from pretty simple ones
like potential JDK version over writes
that the code Wiz might have the
platform ebays java platform is also
providing a recommended version of the
jdk that's being that with which the
application is deployed across all the
lifecycle of getting it from development
the developers machine into production
into our into ebays and users hands so
if somebody just overrides that JDK
version with something else we are
detecting it and we are bringing it into
their attention in front of their eyes
do you actually need this or was it a
mistake so it gives them a chance to
correct it if it's if it's actually they
also identified as a problem there are
also other system override system
setting overrides which fall into this
category they might unaware Lee have
overridden a system property that is a
database data source configuration
on or anything we're talking about
enterprise systems here these are
complex many things can go wrong you
need will need to pay close attention to
keep things under check so just to I had
one thing to add so one thing that
Robert mentioned was the the pending
manual operations that you have to do so
suddenly if you were to go back a few
slides when I talked I mentioned that
the upgrade effort was not quantifiable
today we have changed this problem to a
quantifiable option where if somebody
what you have asked scrum coming up and
you have your your scrum masters in case
what does it take to upgrade it is so
easy for us today to run this tool get a
list of manual changes that are required
and you at least have a meaningful
conversation to say that you know what
besides your normal testing and whatnot
you you have at least a quantified
approach towards what the upgrade may
take right it is not an exact it's not
it's not exactly any by any means but
releases it takes a problem which was
previously unquantifiable to something
that is actually quantifiable so this
was something that our customers were
able to learn variable appreciate that
you took a problem it was intangible to
something that is tangible yeah and this
is a just briefly a bit more about the
ugly report that the size of it is
highly dependent on the complexity of
the project and the impact of of the
required changes on the code base so it
can be a very short report it can be a
very long report but in the end the
purpose of it is to understand the the
size of changes that were applied to the
project and the significant sent and
magnitude of of those changes and the
explanation is actually we don't
normally in line anything into the
report we just refer to snip itself
documentation usually release notes or
other documentation
articles you know and any resources that
are part of our end user documentation
and this addresses the original jQuery
upgrade notes remember you had this
several pages of jQuery upgrades and the
manual operations that you do pretty
much index towards specifically only
those upgrade instruct changes that
pertain to your code so you suddenly
took a really a long boring release
notes to something that is personable
and actionable just say that there are
only things that you need to worry about
the rest is something that you can
always read but that is not that is not
your primary purpose for this particular
for this particular upgrade experience
so this pretty much sums up the end user
experience this is what our users see
when they are using this upgrade service
next we'll look into what's happening
under the hood and we're looking to what
other opportunities we foresee for for
this platform are there any questions so
far all right so central piece of the
upgrade service is an orchestration
service as in terms of implementation
this is just you know a REST API with a
simple interface and that internally
does actually the heavy lifting of
course we stick our web UI in front of
it the one that you've seen the previous
slide but it can be replaced with
anything else that's you know that
that's needed inside the orchestration
layer the fundamental building blocks
are the service commands think of these
as reusable chunks of code packaged in
an inner you know predetermined
structure and they deal with very
specific
they they have very specific duties they
most of them actually interact with the
various services that are deployed or
and repositories that are deployed
within ebays developer ecosystem for
instance the github command would deal
we would work and would rely on our
internal github enterprise deployment
and it would use a rest api to
communicate with it and perform various
operations you know one of the financial
things which with which we do with it is
a forking emerging creation of po
requests so those are all done using
that command interacting with maven with
am a very positive for various use cases
that's that's a well identified command
and there's also that there are
documents actually interact with that
cloud layer and the platform as a
service layer which Raj mentioned in in
one of the previous slides and there's a
a slightly more complicated one the
upgrade module which will detail in in
just a minute but why what is the
motivation behind these service commands
so we are using them inside service
tasks which string together which type
together a chain of commands to perform
a well-defined task for instance the
scenario that we described in this end
user facing UI and report those are the
platform upgrade those are performed by
the platform upgrade service desk it
ties together most of the service
commands to achieve the task of
upgrading the project from an earlier
version of the platform of a base
platform to the latest version of Eve a
spat form that doesn't mean that this is
the only possible service desk and vs
wallet one of which will touch upon
later is one
for an emergency patch the
implementation of the service at this
layer is just you know a simple Java
rest easy service actually it's simple
in terms of API but the complexity is
less than simple inside it but then
among all the commands all the
operations that the service is doing
based on the particular orchestration
that the witch which the service desk
finds the ivory module is of the highest
importance and that is the reason why
that is the case because this is the
actual module which takes the code that
has been already already materialized on
the particular vm handling the upgrade
take the code and applies all the
required transformations to bring that
code up to the latest version compliant
with the latest version of our platform
it has the concept of platform versions
so the metaphors that are defined inside
a particular abrir module configuration
our platform versions and then there's
the concept of upgrade paths an update
path is a sequence of operations
sequence of transformations that are
applied to a project in order to
transform it to transform its API its
its functionality its use of the ebay
framework from an older version to a
newer version and these are great paths
can again be chained together to cover a
certain range of versions the example
given on here is an upgrade from version
11 but of the platform to
2.2 and that implies chaining together
of four upgrade paths to perform that
operation now the question is what
exactly happens inside a library path
why is it just as the blank you know
class that does nothing well actually we
already implemented several features
that are just need a configuration to be
attached to them and they'll do the job
and a perfect example for that is our
maven transformation layer so the update
path is capable of doing maven artifact
transformations it can look at the pump
files that are part of the Java project
and do operations like mapping mapping a
particular group by the artifact ID to a
different artifact ID this is useful if
you're doing any artifact refactorings
you can you can rename your group ID you
can venini artifact ID it's fine we can
automatically transform your any
references to the old artifact to the
new artifact and all you need to do when
you are implementing an upgrade path for
newer version of the platform is to
define the configuration for these
transformations of course other artifact
operations like deletion addition
merging on merging to handle various use
cases are implemented there and one
thing to add over here is because we
chose the upgrade the upgrade as a chain
of operations if we at least a new micro
version all it requires is we just add
the Delta for that the rest is all
anyway reused so you don't need to
really look into where do I start
because it's an incremental Delta over
what is already there and the
transformations happen in a change way
and we are in most cases we have hardly
had any reasons to go back and I just
because it just works does absolutely
correct and the a brake pads also work
with add-ons and think of add-ons as
again reasonable pieces of functionality
that are to be reused across multiple
upgrade paths to give you an example of
an add-on that we're actually using is
one that takes transforms the API calls
to an older logger API specifically
log4j and transform those API calls in
and API usage patterns into slf4j
compliant usage patterns so pretty much
if your code was using lot for J aimed
version 11 12 at one of the platform
when your code was dependent on the
wound upon platform I was using the
services of the one at one platform as
soon as you are ready to 2.2 version of
the platform using vistal then all your
API calls to lock 4G will have been
transformed into slf4j a peg holes and
of course the reason being from a bad
boss perspective the reason of that
transformation is that you're moving
from concrete implementation of a
logging framework to an abstraction of
logging framework swear log4j is one of
the logging framework that can be
plugged as concrete implementers of that
another interesting thought to share
about the abrir module so again this is
a this is probably where lies most of
the complexity of the upgrade service
and we chose we made the decision
probably more than a year ago to go with
scala as the main language of choice for
implementing it because we knew up front
that the transformations happening here
are going to be very much reliant on
extensive use of data
actors did structure transformations and
Scala looked the better fit to handle
those in a less verbals manner so again
we are talking you in the time frame of
java 7 vs scala and first scala war top
grade for this particular task and and
were we can start recommended for for
these kind of operations related to
collections transformations of
collections in a nice verbals way a
sorry les verbals way there's also a bit
of Java code because Java and Scala can
interoperate seamlessly there are a bit
of God a few good shots but not patty
major and then we're also using the
Eclipse JDT library that's the Java
development tools library the one that
spot that's behind the clips IDs Java
capabilities so we're using it to
transform the Java code to in a
type-safe manner to be able to do a full
semantic analysis of the java code base
that is being transformed
so let's let's move on to another part
of the internals ready to the Eternals
of of the system the telemetry what are
we doing actually what data are we
collecting and what are we doing with
the data that we collect from the user
experiences from from the instances
where our users are actually using this
product so one of the things i would
encourage all of you to do and this is
something from coming comes from my own
personal experience is data-driven
decisions are usually something that you
can rely upon right it's not about home
we are cut feeling to the decisions when
you go to gut feeling decisions whoever
is the most superior or you're the
customer usually their voice normal
events if you have data if you have data
to back up your your recommendations or
suggestions usually reasonable people
lizard right so one of the things that
we made it as a point when we went
through this when we actually went
through this upgrade experience was to
collect data right and the data was
useful for many reasons right when we
for product improvements when we try to
do upgrades we look at the way of grades
are done how teams are struggling and
that gives a lot of insight into its
Kelly insight into how the product can
be built in order to be to not be able
to support support upgrades as far as
evolution in a much better way so think
about it right when I first turned about
the fact that this in that particular
user experience that we shared we don't
ask you which version because it is
guaranteed that the person is going to
enter something which may not be correct
so we made sure when we started as hey
do we have the version information
somewhere yes we have to make sure that
all the information we need has to be
there so that it is discoverable because
we observed that folks were not able to
provide the right version that we want a
without that information we may be doing
something which was incorrect the second
type of
information that we get is with this
approach we get our github repository
has so many so many reports fact we
don't even know how many projects are
actual active projects versus how many
of them are just personal pet projects
right by going through this we pretty
much know who are all the active
projects what are they doing have they
gone through upgrades which version they
are in and we also know the API usage
what are we using because we have access
to all the all the reports that they get
right which versions are they using what
are the type of AP is that they are
using so that if in the future if I want
to actually say you know what I'm going
to change this interface or I'm going to
actually know what I'm going to change
this programming paradigm are going to
offer a new programming model I can
actually know who are all the potential
users who may can talk to if I were to
actually talk with them and you want the
feature or who will be affected for any
of these upgrades right I can look at
this report to actually answer this
questions very good it is not about oh
you know what I think it is fifty
percent of the users probably the answer
lies somewhere between zero to fifty to
fifty two hundred it's probably not that
fifty percent you don't go by a gut
feeling because you have hard data
backing up if there are three users we
just use an API you just don't have to
argue about it just go and do the change
right this is also from this also allows
us to do a few more few more things for
example we talked about application
health checks so V is a platform since
our VMs are configured with the
different sizes right some of them are
small big large we can actually know
based on what applications are
configuring we have a good idea of you
know what how is this memory profile of
these applications can they be
classified into smaller buckets there's
a lot of information that we can glean
from their information when they come to
us right so that is one other thing that
we could do the second one we do is we
also look into it this dog footing very
important right if you don't use the
technology that you are willing to put
your customers I think itself is a
really bad idea when we do upgrades
before even we put it out we take there
are always these marquee customers
either or
critical from a business perspective or
they complain a lot and they have a lot
of influence take many of those
customers right put them to the upgrade
tool we know exactly what they will see
when the upgrade actually happens we
know whether it will they be happy do
they have to do more automation or do
they have to do more manual changes we
know all of this and even at risk even a
testing framework when we write the code
and if the developer developers write
the upgrade module test frameworks can
be upgraded because our testers will say
now what I would upgrade all that tested
using this go to a next version because
all the changes have already been done
so we don't really organized about who's
who has to make the changes and whatnot
if you do a good job you can always do
them and the key thing is by doing it as
a service that's a very subtle thing
that can also do if you don't have
enough time to do automated updates if
you cannot do hundred percent on a great
or even if you want to do if you have
golden 280 even if we can't do that
anyway even if you want to go away with
50 you can do that when you release the
product with fifty percent automation
and fifty percent manual next week you
can change that to 70 because you know
because when we whenever somebody
fumbles by the way I think we didn't
talk about it b20 only the good picture
the email will say success congrats you
succeeded or there are times where you
get a thumbs down because your project
is not succeed all of those are
opportunities to go and improve the
product you go back and say why did it
happen right and it also goes back to
the next one right this time around when
somebody complains to my boss or anybody
else that my upgrades were actually
difficult or instructions there is
actually we are back we have clear data
right what was sent to you what were the
changes where did you actually struggle
what can we do better right by providing
that customer focused view of doing this
you suddenly change the experience from
yeah I will do whatever I want I send
your release notes you have to pick it
up to something where we really show
that we can write if you give us
feedback either explicitly or implicitly
listen and these instructions are all of
us to kind of be to be to build a better
product nowadays we don't even think
about trying to write detailed release
notes that make sense to everybody of
course we do but the important thing is
as long as there are the experience
takes it to the next level our customers
are happy right they come back and say
no what it's not bad if this is
something that I can do within a certain
amount of time and rpms or product
managers are able to get the information
about this potential the potential
problems it will run to actually see
what we can do the other one now comes
the more in there are few more
interesting spots right at this point of
time once you have an upgrade like this
actually backwards compatibility is not
a painful thing at all technically we
don't even have to worry about backwards
compatibility because if I go through
this experience I can pretty much
upgrade even the next version I can
operate everybody or at least try to
write it's not always possible but also
one more thing about as I said if you
are right if you are actually running
enterprise platforms where in these days
where there are security vulnerabilities
there's a lot of open source out there
how do you keep type of things one of
the things we do out here and this is
this this kind of complements the
experience that we have over here is we
have built in or into an experience
where we know exactly what version of
software gets deployed and we have the
ability to because we work very closely
so one of the solution I also make sure
is don't if you have an organization
that works in silos it's very difficult
to be effective we have very deep
integrations with her pass layers which
means that every deployment that goes we
get a note we get an actually a call
back saying that is this deployment safe
that is known to have any
vulnerabilities and we have the ability
to either one or fail the deployment and
that's all we tackle some of our
software upgrades if we know that a
security guy said you know what there is
this XML parser that has is
vulnerability just try to we need to
roll out this fixed as soon as possible
we have the ability to immediate
say which version of software has this
upgrade we have the ability to say that
an all deployments and your bills in
your ID can be failed and that only
happens if you really go through the n2
and experience and make sure you have
all those extension points to do that
and that is very important as a platform
as a platform because you are here to
you take Prairie pride and running your
site right you want to make sure that
the users of your software in a platform
are secure they are highly available and
they have the best of class and
experience because they want to build
software that makes that there helps the
business and v is a platform developer
needs to make sure that we are invisible
most of the times right ideas to me
remain invisible but when they need
arises you need to be able to act
quickly and with very clear precision
because if you kind of send out a blast
saying that if you have blah blah blah
release and you have to do that does not
happen but if I actually want or block
your deployment we get a call it's very
interesting conversation but the
conversation is very is very clear where
we actually asked asking you to do that
so these are some things I would I think
if you are not considered that these are
something that I think I would really
encourage platform developers in you to
do that
okay I think we got a number up first on
the robert for what potentially some of
the upcoming things have you plan to do
with this platform yeah so the what we
have done in the past eight months in
ebay we believe that it has potential
lee some very useful bits that can be
from which outside of ebay various
groups can benefit from and then we had
the idea of making the core of this
software of your system open source and
to be able to leverage the knowledge and
the minds of developers outside of ebay
to improve our offerings to improve
their offerings to realize a larger
agenda to actually make it possible to
four platforms and frameworks to evolve
at a faster rate to evolve more
aggressively and first stage of this was
to create the Ostara project which is
licensed under the apache which is
published under the apache license on
github and it literally contains the
core functionality of our framework we
have ebay specific extensions that make
use of that core but we're in the
process of rolling out more and more of
those features which are really not ebay
specific we really want to have a clear
separation of what is actually a general
problem sure that you know the software
industry is facing and what is actually
an ebay problem it's actually gives us
an opportunity to rethink the way we do
things with an ebay and it's pretty
simply this is the way forward with the
project to keep the
for no mrs. Coors developing with new
ideas and we'll talk about some some
thoughts we have and you also want to
reach out to the Java and nodular
developers and capture their thoughts on
potential directions and I move forward
with that and my gosh Tara means rebirth
he asked you why you affected as tries
what is it now it's the pagan goddess of
rebirth fertility you name it and pretty
much the origin of the christian easter
exactly but anyway i think we chose it
for the reboot aspect of it because I
think our software whenever you upgrade
you are actually giving birth to a new
software so okay with this i think we
are going to just have a few final
thoughts on the other future directions
i talked about deep integrations with
your with the the past layer right what
are things about emergency patch right
one fine morning today what we do is we
get our security team calls us and says
you know what we have a patch we need it
all of this right so today with a
current approach of what we can do is we
are able to make the changes an issue a
good get requests get politico's that's
all we could do at this point of time
right but that's not good enough right
it still does not meet in our opinion
ebay agility and i'm sure many of you
teams of rigidity so we take it we take
it further right we can actually all our
API past layers or essentially have the
APS right we can spin up VMs on the fly
on demand so the next step that we would
like to do is we take the code and
depending on the changes that we can do
if the code compiles right without any
issues in that position or no manual
changes left we are able to take the
software spin up a vm deploy the code
and you get a notification to the team
saying that there is actually a deployed
code ready for testing deploy the code
and if everything looks good go for it
even further if you have automated test
cases we are able to since we have
access to everything they have we have
we know all the get-ups
see I Jenkins CI instances so we are
able to run the software on their behalf
because while they're busy doing other
things here comes in an opportunity for
us to take that and essentially give you
deploy code ready to take traffic where
you just test it and then if you're
everything is good you go through your
of course we can definitely push it to
production because we have our own or
one audits and controls that we cannot
do that but but we can definitely do it
for testing and once that is done you
are able to push it up and this also
exemplifies the value of having deep
ties with your not only just doing
software but with your with your past
layer if you have one or anything else
that is equivalent to a track so this is
open to other kinds of possibilities
yeah so the other area which I briefly
touched upon earlier is deep API
refactoring so we would really like to
leverage semantic analysis of the code
base in order to make some some deeper
API transformations and the benefit of
it would be that so normally what you
know that the best practice to do in
Java as actually Java is a leading
example in the software industry is that
when you're changing your AP is in a
library in a framework you rule of thumb
is you deprecated what you don't want
people to use anymore you still give the
functionality around and then of course
you implement the new API or the
improved API the burden is on the
developers of course to upgrade to your
new API by the word a burden is also on
you as the owner of the framework of the
library to maintain that backwards
compatible layer and there's actually
very few projects and frameworks that
remove the deprecated ap is the standard
Java guys is notorious for this
everything that has been deprecated so
far it still big actively maintained
that's an extreme case because this is
probably the one of the largest
frameworks with the largest use base
user base but for smaller user bases you
actually don't really want to keep that
deprecated code around you you really
have the only motivation is that your
developers don't jump ship to something
else so they don't have an answer more
insurmountable task of moving to your
new AP is in an ideal world though we
want to enable framework elaborate
developers to define conversion logic to
the new API and keep the deprecated
api's around for a while or why not even
not even better what deprecation say
that you don't implant the deprecated
layer you implement the transformation
of your old API calls and usage to the
new API usage and be done with it so
that way you can focus on pushing your
frame or pushing your library forward
innovating in your library not worrying
about what was in the past and of course
an ebay java is not the only thing the
only language we use we speak many
languages node and scholar other popular
choices right but if he said look look
back none of the frameworks that we that
we discussed has really any pairings to
a language you could have taken any of
those tasks and implemented it something
suitable for first column node and you
have probably achieved the same thing so
that is one of the directions that that
are there are actually our teams other
teams within our platform are actually
looking at it as well that take this
experience and apply to other languages
of course you may have other constructs
to to worry about other types of
problems to worry about but the problem
fundamentally remains the same whether
you are doing JavaScript node Scala and
whatnot so that is the the other the
other kind of I would say non Java
extensions towards our project so that
irrespective of it could be even used
abused for SQL right what
you want to use it right it's up to your
developers and what you are trying to
what your what are the type of software
that you are trying to support that that
for which you need to extend this
framework so I think as I said the saw
the software is open sourced we are
looking forward to any contributions or
any suggestions that you may have but
before that I think you have our contact
information any questions we'll be more
than happy to answer do you think you
can take this to your to back to your
organization and actually do something
about it do you folks feel that I think
it seriously consider if you are
depending on which role you are if you
are a platform developer this is
definitely I would I think within the
last 18 months week i will say with
conviction that this is the way to go in
terms of development if you are a plat
with your a user of a platform i highly
suggest to go and talk to your platform
developers and say why are you not
considering this or a comparable
approach and to make our life easier and
make the business highly available and
your developers developers we should be
focusing on solving problems i think
that there is a better way to do
upgrades and that's one of the reasons
why we did what they did yes
any question about if you have an
upgrade path that has an on passive
change that maybe can't be on that if
you don't have that one flow goes for so
let me understand the question so if
you're not obligate paths that but as a
nam has a change yes there's some unsafe
those assumptions you have to make her
clever how does that work for girl for
users or managing
yes in the manual changes so the
question was if there are the type of
changes that is cannot be handled
automatically what happens so what we
try to do is we tell the user that these
are the type of this is a change that
cannot be automatically done and we give
you in most cases an example that this
is what you have in the code a very
similar example and this is why this is
how you transform the code and I me give
you more explanation you know what this
was not a singleton anymore now you have
to do a singleton so we are able to draw
the attention to the developer that this
is the reason why this was done and that
makes it a lot more an engaging
conversation why did he do this well and
what not and in some cases one of the
things that we also want to do going
forward is try and make once you have
your used to this approach you can also
try and make changes in such a way that
upgrade upgrade is also constant is
considered in the way you make changes
so the same way testability you alway
all of us know right right software so
that it is testable right same thing we
hope that if you are able to do this
well and we have a more of a community
you also try to write software so that
is upgradeable right very small things
like a good example is there was once an
APA change that was made where the
parameters were transposed for no reason
and when the developer came and asked me
the question why do you transpose the
the order of the parameters because
otherwise that are done an eclipse
search and I said hey this is in string
it is the introducer strings are done in
strain interesting undertone everywhere
instructor ap was changed to string and
a need for no reason at all right and
these are there are very simple things
where if you did it in a specific way
you can actually do the transformations
much more easily so that's how we have
we have attempted to approach the
problem for non passive changes so you
had a questions
yes so the question is how do we handle
transitive dependencies in case there
are multiple versions of the same
library correct yes so that actually is
a problem that it actually can manifest
in two places one is in your platform
release process we have contributors
from various organizations that whose
contributions end up as a set of
artifacts that are shipped as part of a
particular version on the platform and
that's possibility where they are using
incompatible versions of the same
artifact of the same library this we
solve it via the process itself we have
maven aggregator parent structure which
defines the manager versions and that we
you know we don't allow our providers to
make overrides on the default version
that is managed by the framework but we
also handle this apps the end user side
when an end user tries to use a version
of that library that is provided by the
framework whose man whose version is
managed by the framework yeah they want
to override something else so we detect
those use cases in this upgrade service
and the same upgrade service is the one
that our we call them providers the
platform functionality providers use in
developing their applications so if they
introduced an override they will run the
upgrade service under code is to bring
it up to the currently in development
version of the framework at that point
we by default remove the version
override and we add an entry in the
ivory rapport that stating that we did
this because of you know mavens
limitations single class path limitation
so there's an explanation why it is
being done
pretty much the tool makes it possible
to have one version and only if you know
they really want developers really want
to override it then let them do it but
at least they are aware that they are
doing it we so we handle this in the in
the platform release lifecycle we agree
on a particular version whenever you
know we start to develop on the cycle of
the next version and if you agreed on
that version that's the version you know
if you want to change it great the next
time you'll get the opportunity there
always be will be a next version and
this goes back to the natural
intelligence process so when we release
something we determined that the
catalogue of managers that we manage and
in this process if a lot of providers
are our customers start introducing
either a new version that we didn't
anticipate it's already feedback to us
saying that in the next version we
actually have to take into account these
additional users so if it is an actually
an a version that is compatible with the
manager shin we tend to actually upgrade
that automatically so that yes you are
right that testings till the onus of
testing remains but we already got
enough hints that either or provider or
customer is using a possibly a higher
version because of its lower version we
have a conversation it to say that you
know what you cannot use this version or
there are potentially node mode issues
with that version on the other hand if
it isn't actually a more a higher
version then it's actually feedback to
us that you have to upgrade so that's
how the conversation goes there's one
more question k
sounds great but it's also dislike it
stole my construct and possible can just
give me some sample do you have any
examples of course yes one of the first
things that you will see is we are going
to take I think spring a spring upgrade
where you are able to upgrade from one
version of spring to another version
without reading the release notes and so
surely area with all at least with
minimal so you will be able to at least
see that if you have a spring specific
version of the project you run that Thun
I think what is being open sourced is a
command line version right we as I said
we can build any interface any type of
user interface so we use the commands
and we will be able to do that so I
think the project was acting open source
s of I think just a few days ago
correctable so so you'll probably see
because we had to go through our of
course are illegal and what not to put
that so I think expecting a few in maybe
you know in a week or so that we
probably plan to use spring or one of
the popular open sources to show the
concept how you can actually do that and
actually yeah spring is is because our
framework also uses the spring MVC
framework for us bring is an excellent
example to work on the deep API
refactoring we're particularly targeting
the upgrade path from version 3.1
actually 3.2 offspring to version four
point oh in in this if you look at the
resource of of spring four point oh
there's actually not many backwards
incompatible changes but there are many
things that have been deprecated so we
want to really provide a value to both
ebay and the spring community by
creating an upgrade path that is able to
automatically transform deprecated API
calls at least reasonable amount of
deprecated API calls into the new spring
four-point-oh API calls
did I answer your question we can bring
a wealth of the session sure sure any
any other questions okay thank you and I
hope are you hope you are able to take a
new novel approach towards software
upgrades and definitely as customers as
well as producers demand the best thank
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>