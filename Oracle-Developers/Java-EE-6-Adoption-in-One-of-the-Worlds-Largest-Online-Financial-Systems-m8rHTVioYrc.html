<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Java EE 6 Adoption in One of the World’s Largest Online Financial Systems | Coder Coacher - Coaching Coders</title><meta content="Java EE 6 Adoption in One of the World’s Largest Online Financial Systems - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Developers/">Oracle Developers</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>Java EE 6 Adoption in One of the World’s Largest Online Financial Systems</b></h2><h5 class="post__date">2015-06-02</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/m8rHTVioYrc" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">ok Google evening everyone let's get
started oral session titled Java e6
adoption or in one of the war Rogers on
rye financial systems I'm here for me
was a key speaking I'm a financial
technical manager of the Rakuten company
in Japan and my career is a j2ee and.net
framework specialists for about 16 years
and many opus lectures and etcetera read
katha started from a geologist is agenda
first is overview and the second is a JV
back-end systems of our systems and the
third is jsf of the front end systems
from studied overview with the Rakuten
company in japan and expanding to the
worldwide like this and expanded from
2010 and requirement companies here
right by bar and we are the number one
ecommerce company in japan and
consolidated GMS about 51 billion
dollars axis and this is these are the
japanese explaining chart and we are in
the internal financial systems here and
we came from come from rakuten card but
the credit company in japan and
expanding to now expanding to war why
and we have five financial services like
this credit card and then imani
financial securities and arrived
insurance
and they each has huge transaction and
the 24-7 non-stop services and these
this is a very important and very
difficult to achieve but we challenged
every day every single day and this is
the financial system requirements of the
Rakuten company fault is a rapid
business logic changeable and the
business models changes and the second
is huge request capacity as business
clothes and I'm sorry this must be
transactional I mean that the must be
transactional is zero and all or nothing
with a sheet property because of using
the money information so the differences
must be about a abundant avoided and we
are the Rakuten quad week and we had
very old credit company credit
management systems brightness first is
outdated and complicated and difficult
and we must solve this issue rapidly and
we're on the new systems with three big
targets for new architecture first is
sustainability and the second is
flexibility and sorry the system
transparency and the for achieving these
targets we choose we selected the Java
EE platform and and when we selected the
basement framework for our financial
systems we compared with the.net
framework and Java EE
and we focus these points Portability
and the result of financial systems and
the pin the supports and the community
and especially for the community power
the Java EE is excellent and we choose
the java ee for our financial future and
we selected the enterprise platform with
the weblogic server chelsea and the
other major platform and compared but
the webwork server is almost excellent
perform for us especially food we focus
this operation that the development
function of the very Sabha especially
with a fastball and the production
redeployment function is a very
excellent for us because of rapid
development cycle and we selected o co
XO later or for our persistence storage
and transactional management systems and
we focus pci-dss on the operational area
for the special special requirements for
the credit card systems this PCI DSS
means a data security standard required
for credit card systems so an Oracle
Exadata is a special platform to the PCI
DSS requirement and the research is or
collects data and for moving from the
old architecture to the new Java EE
platform architecture we determined by
big issues to apply new je architecture
for its policies and the education a
picture environmental tests
and the first policies in the castle
rubdown we we determined as development
internal development first and no
outsourcing and for financial business
is there also target of the application
of this party and this is a rare case of
inertial system in Japan but we tried
and solve it for the development of the
new je ER je six our picture we learned
many new information like this and
unfortunately the japanese java ee 6 the
documents is always hear this one so we
run the major english and read many good
materials here and also we refer the
only materials like this and the
NetBeans javadocs for advanced
information is a excellent information
for us so please refer this one and for
education we define the simplified
policies from all the object the it was
developed by many known standard
architecture practice PHP and symphony
and the spring framework and the axis 2
and the I what is the persistence
framework that we I I decided to move to
the latest java ee 6 only our teacher
this course simplified and the easy
government and i designed the new
architecture active data access with jpa
messaging JMS and the connection I
male / I ROP and Jax am email with the
javamail all managed by the ejb with the
CMT transaction with JTA and divided to
well presentation from here and choose
jsf a two dot one the standard RK web
framework of the java ee 6 specification
or very simplified and moving from all
architecture to the latest one old
architecture was built by the j2ee one
dot for based very old architecture like
this with a non-standard access to and
spring framework and the front end was
built by the PHP five dot they're very
old picture and a very difficult point
for a transactional operation is here a
PHP contains a transactional boundary so
the many code to the backend systems
when some error occurred cannot be
rolled back completely so we decided to
move this transactional boundary to the
front and back-end boundary here and we
designed back end with EJ be managed all
managed component and divided to the
front end and using the JSF framework
and dmz apache uses the weblogic
prowling through to the front and the
front end called back end using the RMA
overall IRP and thus call external
services with iiop or the jacks soap
frame assault protocol
and Exadata to the jdbc and returned
with the comet old commit and return to
dmz and dmz kyle returned to the
internet very simple and the easy
architecture and here's a details of the
architecture component like this we
define the ejb as a core systems and we
called up I ati's Web API is here and
according to the backend systems and
storage systems and some other systems
and some web our web components defined
from for here from real-time and up from
front patch patch execute executing
system like this and where else we set
the internet side to the air seven
branza big YP and the sticky sticky
configuration and the reverse proxy with
weblogic prolly and according to the
from and real-time and according to the
core systems very simplified and for
environment is europe development and we
choose the NetBeans for our standard ide
with the Mabel automatic building
systems and in this changes we can
develop very easy and as a rapidly for
the our new system development and we
achieved only cost or is six months for
moving from PHP based 12 latest java ee
7 our picture new products and we also
choose the attraction repository system
like stash and JIRA and the confluence
and when some person join our project
and the download call from repository
and ripple or install jelly
a-and the netbeans and the weblogic and
just lung that's all very easy and the
rapid starting start up and we defined
each person's dairy operations in JIRA
project and this person must be referred
Zira and reported report to jira just
one just one case and very simple and
easy to develop rapid first and the
testing we we also choose janki's
automatic building systems with the SONA
managed server module main server and
the Dairy Dairy they are rebuilding with
call checking and with this one we
achieved zero violation for the Java
called conventions ok next is also a pot
with grab free every one myself a shelf
I'm working for three years as ye
engineer and I'm also an app developer
for iOS Android and Windows rate also
vocal double platforms let me proceed
with the agenda ok I'm going to talk
about the egb applying for financial
backing systems well if you have any
questions will take at the end ok to
start with let me make comparison
between our whole system and the new
system or Oh system was using spring di
for dependency injection whereas the j6
you see da and ref emre was based on PHP
using funny framework with a PHP in jail
ex parte but we move to jsf and for rest
services we were using servlets and
thanks thankfully we move to jax RS and
for transactions for using spring
transactional I know how bad it works
and we change it to EG bc empty and for
persistence api we were using a battery
switch has its own good point
but we move to JP which is standardized
and for batch operations I not sure if
you guys have heard about it there's
something called Terra so Luna batch
framework which is created by Japanese
and used in Japan I think only in Japan
but he moved it to EG bees next is
leverages and advantages we had over
this change i am going to concert
measure Leon dependency injection
transaction management persisting
scheduling and remoting okay let me
start with me more interfaces that is
remoting our current system is not
distributed on it's not running on
distributed environment it is still
learning on a standard on environment
but we chose remote interfaces for local
interfaces you might ask that remote
interface uses purposes parameters by
value not by reference so you are doing
a leverage of memory or scalability but
we have plans of changing to distributed
systems so we chose trigger interfaces
Nexus JP ygp and why not I battis I am a
fan of I baddest personally because I
baddest is simple and it is simple
because its uses loose coupling and it
uses excluder ectly the good features of
I battles were it maps objects to just
stored procedures or database tables
directly through SQ XML descriptor
whereas a.j.p users metadata which is
hectic but comparing these features like
simplicity JP is not bad but is good and
the ORM solution complete OS which to
orem solution is achieved only by JP
because it is completely standardized
and adaptivity to deter model changes
since I bet is written directly or SQL
is easy to adapt compared to JP a
complexity wise as i said i bet is a
simpler and dependence a SQL I bet is
majorly paranoid skew because JP uses j
PQ el users usage of j PQ ella adds one
more layer of complexity because first
you run a
it will be compiled in JP q well then if
we change to SQL again that then it will
be done in the whole mapping happens
reverse so it is added complexity
performance-wise I badies was better and
portability of different relational
database both are same and computed it
in on Java platforms JP doesn't support
that and community support and
documentation obviously JP has better
there the few points which I want to
emphasize here that is why jpa it's
standardized first thing it's supposed
inheritance and polymorphism of observer
programming and there is one downside to
GPA that is some parts of JP I depend on
the windows for example caching caching
of database caching which is not
standardized it so we can't use it
depends on the window but we do not we
are not using it and therefore more
downside of JPM see if you are running a
batch operation to copy data from one
table to another table and the number of
records are like million so in that case
if you run a native query or maim query
the performance very bad in that cases I
would prefer you use prepared statements
than using name queries or native
queries next I'll wanna talk about JTA
since you are using PHP framework before
I know a business agios divided on front
side as well as back inside the
transaction boundary was on PHP file so
we could not have the rollback I can use
them in their over systems but thanks to
JTA and new architecture we move our
whole back-end logic to backing systems
on me jb side and the JTA helps has the
role translation rollback feature which
prevents the data integrity from
spoiling next is about to EG v is
whether to use straight for ej viso
straightly AC jb's i would say steadily
CTV's because stateful ejbs makes sense
if your number of clients using the sri
jb's or less than a thousand because
he's easy to manage the states if your
clients are less on
beside but if your clients are more than
like 3,000 pulser Kent lines for first
again in that case go with stately CTV's
and manage the states on the jf subside
that's what we did Nexus managing tt's
this is a very good feature of Hawaii 6
it type of feel like because before
managing it is it was like whenever
going to update a table record the API
is to first find the entity change the
entity merge they need it back and then
commit but now with thanks to my
entities the container the entity
manager gives the entity and all we have
to do is change the state of the entity
and the changes are altima updated on
the table during the commit phase all it
does is change the deltas and push us to
the database one point to notice here
manage entities work best only on exciti
performance-wise with other databases
not so good egb timer services time of
services you might have heard there is a
method called timeout method which runs
a specific procedure or method whatever
you want to run on a specific interval
of time time has a persistent and they
can survive any crash or restarts and
their transaction which can be rolled
back but timers are not really that
precise they depend on zones and the
into the interval of time and if you
have say if you have multiple time of
services say time of service a and time
of service be and they both run
sequentially you have to maintain manage
it by yourself that timer be starts
after the timer a method has ended you
cannot do that programmatically you have
to check it then do it or give enough
gap between the two time of services so
that they don't how to say intercept
each other next the jsf part which are
like the most because i'ma chief
engineer also the jsf to lure one has a
lot of limitations well for our
requirements it had lot of limitations
first is flash the current the
implementation of flash class in jsf to
rot was based on Ruby on Rails I guess
and the one limitation of flash was the
values was 12 / only one step reversal
but our business requirement had a
necessity to save our value for say
three steps because each web form
submission in Japan is like three four
screens not with just one screen second
thing in jsf to what one there was no
CSRF I am really happy to say that we
implemented csrf in jsf two or one
before it was thought as pacification
for jay's of two door to third is there
is no file or template include feature
in jsf two dot one that is to include a
file or template which is available on
the server application server but not a
part of the ER or war and forth
limitation was passed through attributes
since we can't pass pass the video we do
not have a method to do not have a way
to have the passive attributes and most
of the html5 data attribution work and
fifth thing is a customer it is custom
tags and renderers I'll give a demo on
all of these but after the slides first
is flash a custom flash what it does and
how it worked basically we took the
session bean we reserved a part of the
session bean as flash space and say if
you have page 1 the page 1 and we'll
have a parameter it will put it to the
flash face and you do a page redirect to
page 2 I mean the page to all you have
to do is just call the get method the
gate metal will take a flag value called
keep flag or remove flag the key flag
will keep the value in the flash space
until you want to remove it and so that
it can retrieve the same value in page 3
also
this could not be done in the normal in
the standardized flash class I will
share the implementation after a few
slides next csrf tags we implemented a
custom CSF tag which when a page loads
whenever the JSF compiler comes across
the sea a sort of tag it will call a be
if we call a beam and the beam will
create a regenerator token sorry k sorry
sorry sorry ok the beam will generate a
token and it will save the token in the
session and the same token value will be
saved into your web page and when you
submit the form the fall the submitted
form value token' value will be compared
with the session value and if it's
matching it is processed further if it's
not matching to throw an exception that
the tokens are invalid ok it's time for
the code
okay this is my sample code for today
and this is a simple ninja recruitable
Putin so basically what i am doing is
see I'm using placeholder you but as you
might know jsf tour upon does not
support placeholder let me just confirm
with you that I am using a scepter one
free works here see I'm using jessica
robbin but still I have a placeholder yo
how'd it happen s no magic it's simple I
just had a custom text input text
renderer
okay here if you see you have this
input.text tagged with the placeholder
which gives me your error but it works
and how it works is pretty simple I have
a custom input.text render class which
is exchanging the default extender ER
and I have some attributes which you
want to I want the text generator to
just ignore and just paste them as it is
so what it does is it when the text
renderer runs it tells especially in
this step here it is that whatever is
listed in the attribute list or among
string array just ignore them and just
copy paste them as it is don't compile
them that's what I am doing so the jsf
won't compile them and just copy them as
it is but the browser will understand
what it means so here you can go on
adding whatever you want for if you if
you guys are familiar with the bootstrap
or using jquery UI you would need a data
roll or data mapping or data attributes
in your HTML code which not which can be
used in jsf this is a simple hack for
that next about Flash we call it a
splash container let me show you how it
works this is money or she'll go to next
step and here i enter age no this is not
much and happy learning juice it i will
say no what a next step so I had a
three-place traverse and now from step
one event step one is page username
input step two is age input and step
three is this page where it shows all
the information and there's no result
okay
this is my first page here I mean taking
input of Oz name and I have a sample
beam where it has a parameter user name
when I submit the one to click the go to
next step button it causes sub in method
and here is the step which does the
magic flashlight and output and this is
a key and a value basically is a key
value pair which is saving to your
session in a map so let me dig in deep
so you can see you I am passing a key
value pair and session and what I am
doing is just simple thing through the
session I'm adding a new map with the
key value pair so I go on adding that in
each and every travel step if I want to
want to worried if I don't want it what
i will do is you're just say here go and
dot remove
whoa
okay just doing this will remove the
values from the session and I won't be
able to retrieve it in the next step so
this is a custom edition of the flash
container similarly getting a value from
container the flash container is again
the same way what we do is just call a
get method and the get method will get
the value from the session again from
the session map get string yeah get
object okay it checks whether the key is
present in the session if its present it
gives you back if you dot print it will
just throw an exception out third
feature which is my favorite is the csif
tag let me go to a source view can you
guys see this tag here there is a hidden
parameter with the name called session
genuine token and it has a long value
and this is generated by one single line
of code and that is over here just this
lesson 10 characters and what is this is
just a simple custom tag well what it
does is just hidden input tag which is
get which is getting a value from its
waves cook bean and this is the main API
or remain classf it generates and
registers token so whenever the JSF
compile compile it goes through the Seas
card CSI csrf tag it will call this
class and this class will generate the
token and how it does is just here first
it checks in a session if there is
already an existing token present if
it's not present a generous a new token
and that token is is issued on two
places it gives it to save the token
value in the session first and it prints
the value on the page so when it submits
a form we have a method over here CSF
manager validate token what it will do
is it will retrieve the same value from
the session and we'll compare the value
which was
from the form and if it's not same it
will just throw an exception and let me
show it works basically is filtered
event well I am just changing the value
to something kind of here and al input
it give me an exception because the
token is invalid this is how we
implemented csrf because we thought
steers RF we could not implement
anything at all that was the first
limitation we had while using jsf this
third one is Freddy mean Lister yes this
is one of our ridiculous business
requirement that we have to retrieve a
file from application server and include
that into the web page because the
the page content will be changed almost
every day so we could not redeploy
almost every day it is not worth it the
cost wise so what we did is we made a
template files on the application server
which can be modified with the business
side guys or the marketing guys and
we'll be there will be retreat
dynamically every time and they'll be
including the page and how it happens is
simple we have a custom include tag
again for that which will call a managed
bean and the management will have a file
reader which will be in the file from
the server and all the contents will be
passed on a back as a string and singly
pass back to the front end and it will
be printed simple as that if the file is
not existing on the server instead of
throwing any exception we just print
nothing first you have to go yeah I went
through that and custom tag three
components ideas converters and
competitive there is one hora see if you
are using Mahara plugin for jsf whenever
you use video buttons oh
whenever you use radio buttons and if
you're not doing proper validation
things like this can cause an exorcist
attack that is
these these happened a lot try to it
might work properly but if we just check
Yeah right network because i'm not using
Mahara plugin but if you ever seen
Mahara plugin for jsf this will be an
issue and the easy way to work with that
is convert all the use of a special
converter to convert all the special
characters to normal they're encoding
values okay
if you have any questions we are you
free to take it
ESPYs
if
j &amp;amp;
for the day
business strategy
huge mm-hmm
or
must've used
American
no actually the reason for your second
question why we could use some other how
does the API is for huge log
transactions instead of a JTA is because
our systems were very complicated
because of using many things we didn't
want to do that we wanted to make just
use one thing and be done with it you
know if you see here we were using
spring and I bet is an access to for
what happened okay you are using
many technologies back then and we want
to limit to only one thing so that the
new programmers can get used to it can
they can easily adapt to everything and
there's one more limitation to that
since we were from Japan there are not
many books in Japanese on the new and
different technologies so it's very
difficult for the job programmers or
developers in Japan to get a rapper to
various technologies at once if it was
je only Jay it's easy to proceed with
the development and we also had a
limitation of time of six months and
with a team of 25 members and so you
only the fourth question again
there
welcome we don't use web sockets no okay
you're talking about over here right
okay first of all sorry for my mistake
and we use web so we don't really use
the perfuse jax-ws basically our API is
common and our front end is divided
among the pc views that is browser views
and iOS apps android app and windows
apps all access the same core API and
that's why we have to divide the front
in point the frontal and side front
client in point into using Jax I
services and jax-ws services and jsf no
way is here sorry any other
questions
well no but there is one leverage in
spring dy we were able to inject maps
list resources we can't do that anymore
but who needs a just create an object of
all that t realize it do it with CDI
okay any other questions yes please
yeah okay yeah we chose Exadata using up
for prying the PCI DSS using the some
additional components like data database
firewall and Oracle advanced compression
or advanced security and the advanced
add the bus you know you know sorry
sorry details I cannot remember sorry
but some additional component you are
required for prime that the PCI DSS 2.0
and now we are moving to the 3.0
authentication in this year I'll leave
back to your more on this after this
session any other questions yes please
I'm not sure if you can disclose that
he's asking which is for example hi yeah
non-disclosure sorry but yeah you know
that these are the major components can
get some major databases and you can
understand against haha oh yeah yeah
yeah well priority is easily affable I
think mr. Romano's it all ready for it
be is things are many note not good well
that is also guessable there's only one
company which can give you a product
with many not goods estas idiom and
these are the production sorry a show
you Sorry Sorry show you sorry IDK
scopus no no no no episodes production
and we choose the weblogic server for
applying the java 6 in this time other
components are operated java if I a j2ee
5 and no no job I 50 me and the weblogic
server are is was the only a prying job
we suffer in this time so we choose the
web root cellar and compared to other
servers we select selected because of
operation the development functions
using the fast swap and the production
redeployment for the easy operations the
advantage between the third a and
weblogic server is weblogic suppose for
a priority does not support what we are
using party also in taiwan systems here
using priority
ok any other questions yes please
whatever it is for presentation layer
presentation what a beheaded use of
additionally if you you mean the no we
didn't use prime scissors university to
jsf Romney faces primefaces yeah you
need for emphasis no no what is SS and
so here we are basically seat to my
faces we didn't want to use pine faces
because we don't want to be dependent on
external libraries or companies because
that's risky for us because if they stop
supporting something you learned in
trouble so we basically used my faces
and we implemented our own custom decks
for everything does that answer your
question ok any other questions yes
Teresa not sure if you covered so what
is the volume like
omission how many oh okay let me just
tell you one thing we are Japan's
number-one company for having the
highest transactions so on a peak day I
personally see the logs on a peak day we
see like 2,500 people accessing between
one minute so you can imagine the
transactions and each person is like one
transaction basically sorry yet we found
a per minute because we have our great
customers only on online there's no
physical entity anywhere we don't have
customers to accesses anywhere at all
everything is on online
processing company sent
we are a current company may provide the
whole critical solutions like we issue
the cards we are issue has basically
credit card issuers yes yes we are
issues we are also a bit of acquirers
also the much inside but we don't
suppose that is very well okay any other
questions we have a couple of ok when we
have one more minute nope yes we are
waiting for the weblogic patch and we
have serious questions to them we will
ask them on oracle pool and we are we
want to move to the job from the jsf to
that one to the to that to the CDA up
right button and we hope that currently
we are using view scope beans we wanted
use conversations copies but they don't
work well sorry but we asking to be
scoped means but we want to use the flow
scope beans free soon so waiting for the
weblogic patch to move to jsf ease in
next version yes 12 see all our four or
maybe maybe
anything else any other questions rich
family
can you please elaborate question move
no we don't pass it anybody else we do
it everything glasses yes we settle the
payment as well yeah basically we have
Brocklebank also with us we are two
different companies but under the same
group so the D you side is basically the
same the business is divided among two
companies but the development happens so
explained everything in Japan is a
vertical yeah in general everything is a
vertical okay here are the credit card
and bang they're two different companies
but they limit their different comes
with respect to the business when the
development is not done with the credit
card company or the bank it is done by
rakuten as a group so we are the API
wise we are one ok I think that's a wrap
up its time if you have any more
questions we can join us in the outside
thank you thanks be recorded I guess
mine is recording it</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>