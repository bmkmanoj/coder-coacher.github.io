<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Project Avatar: More Than Just Node.js on the JVM—Java EE Written in JavaScript | Coder Coacher - Coaching Coders</title><meta content="Project Avatar: More Than Just Node.js on the JVM—Java EE Written in JavaScript - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Developers/">Oracle Developers</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>Project Avatar: More Than Just Node.js on the JVM—Java EE Written in JavaScript</b></h2><h5 class="post__date">2015-06-02</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/wiOx_oQ1hxw" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so okay hello everybody nice day of the
year now recession about avatar my name
is Nico Kubla my name is haikus Pinta
and we are both independent consultants
in Germany and we found the qualitex
group and talking about mostly quality
knives of architectures and today we
want to talk about avatar more than no
chairs on the Java Virtual Machine it's
not the only talk at javaone del several
separate talks and yeah perhaps when you
read our our abstract you read something
about enterprise Java and written in
JavaScript and read something about
beckon services and front-end components
in project avatar the SAP message is we
we've been told on sunday then use about
avatar some of the features are being
dropped and now there's avatar 20 and so
we have to deal today about with the
with the news and we have changed a lot
of our presentation and hopefully
everything we go well and although we
are not from oracle everything we maybe
we me the talk may be wrong this is our
safe harbor statement you might have
seen this in just another way from
oracle but let's start with noches
javascript on the Virtual Machine I go
white head on over my white our script
so we two guys have a Java je
backgrounds and we did a lot of project
in this in this field and so perhaps
just a few questions who of you has
experience with javascript programming
java script for any sort in the client
back end though quite a lot and who all
who of you and jointed using javascript
Oh quite interested sales would say
almost a half but I think all of us know
that it quite a lot of corner cases and
a tricky part of JavaScript so in
Germany we do another talk about
JavaScript in quality and a lot of wild
stuff that you can do with javascript
yeah we use it and came came up with
some results you never expected and a
lot of corner cases so javascript is
bird at some point so why should you use
it if you take a look in the in the
industry or the notes and the quotes
that we stated you on the on the slides
javascript has a tremendous rise in the
last month's the last year's so it's one
of the shooting stars in the last year's
and fun for that what we see in our
project javascript is something that
will stay so it will cover its part and
will be used in the projects and with a
quote we wish out this on the the next
slide we have other quotes so javascript
is not just a language is a platform so
it I think most of you know no chess is
a platform and it comes with a new
programming model and this programming
model so it's not non-blocking and with
another some other suite features we
will tell about this later on it has
some really sweet spots and really
applications where you can profit from
this programming model so JavaScript
will be there in the in the companies
and the enterprises and yes we have to
deal with this and this is my opinion
and currently I'm working at
a financial at a bank of Germany and
we're using javascript mostly on the
client side but there are a lot of
directions using it or on the server
side as well and so for my perspective
and perhaps you can can join this
perspective JavaScript will be something
we have to deal with I don't know how we
will integrate it so this is something
we can discuss in this session but we
have to deal with it okay yes and just
to state this information a bit more
there are a lot of statistics though
language statistics and here's one from
from guitart that covers the information
that is stored in the repositories and
and questions and something like thatís
is used at github and javascript is the
the shooting started statistics and this
is something that covers the area the
statement that I made even more some
interest in fact about this javascript
has less opened issues / repository and
then chavat us at least at github
perhaps it's not used okay okay so let's
go on so um what is the state of the
nation though this should be familiar to
the most of you so I assume your Java
guys je guys and the projects and the
corporations I saw the last year's we
made a lot of long-term investment into
business logic that is implemented in
Java so there's validation there's data
stored there's business logic rule
engines use workflow engines and a lot
of processes implemented in the systems
and a lot of money is spent in order to
implement this business logic and this
is nothing you will throw away
people want to use it and nobody comes
out with the idea throw it away and
implemented reimplemented with
javascript though javascript on java je
has another sweet spot integration with
a lot of other systems and platforms so
EOS camera you have so our
infrastructures and a lot of different
technologies are integrated with Java
and this is something a lot of money has
been spent in so when we have a lot of
well-known practices blueprints how to
implement applications so that some
sometimes it was a hard way to learn it
Andrew there was a lot of progress in
the last year's and not everything went
well at the first time but I think now
we're really know how to implement
applications and we have a group reuven
infrastructure our administrators know
how to run the systems how to update the
systems how to recover the systems and
all this information is there in the
cooperates right now and the teams and
this is something we can be proud of as
this is a has been a long way to go down
and if we switch to the other side to
the JavaScript words and OJ's word so
what we saw in the in the project is
that mostly they are be used for new
applications so a lot of prototypes
showcases just building a quick
application take some tears on data out
of the of the of the enterprise
application and use it in a different
way perhaps a mobile application yes
take the data away with you and carry it
and so it's a different way that you use
your logic and your data that is already
there in the
the company use it in a different way so
this is something that you can do really
easy easily with JavaScript and no chess
and all this stuff so that is what I saw
and what is really amazing for me go did
you write this number again the 59,000
yes I know I am yesterday a look at the
latest numbers at the NPM repository
there about 97,000 something libraries
available for this something that's
really amazing so the community is
really productive at its quality
quantity not quality that's quantity so
as assume a lot of these node modules
are just playing around prototypes and
something like this but there is a there
is a community that is really productive
and it comes up with a lot of new ideas
and a lot of new ways of doing something
and there are some really good ideas in
there we have to state it and but only
but a few drawbacks so a lot of projects
that came up in this field don't know
how to be managed how to be back up how
to be administrated this is the huge
field that is not covered right now with
no Jas and all the stuff all the
applications or the platform that is
used and it is something that has to be
done in the future so if you don't get
this right if you don't get this done
you can't run the applications in a lot
of companies so I think we have to
integrate JavaScript to something that
is that will be will be the end a few
years and we have to integrate it so
that was my opinion and
so we we have to think about ways how to
integrate it so on the next point so I
stated although already a lot a lot of
applications are used for a mobile
strategy so we have an enterprise
application that is there that is used
with a lot of customers and you want to
tier out some data and carry it away
with your smartphone and sometimes they
are just a part of the team that says oh
we can do it with with no chairs just
just give me a few days they install an
oj s teardown on the trt data through in
the project a few few libraries and
build up a page a mobile page in a few
days and i often saw this in the indie
project near companies and okay we have
to give with it in a few years lotus
applications will be used there will be
there and we have to deal with it
perhaps and a few years and we have to
deal with the data integration so what
what will be done with the data that is
that is used in these applications so it
will be changed and we have to deal with
the change when it comes back into our
enterprise applications yes they are we
have to have to think about strategies
how to handle this and yes we have to
deal with the same logic and the same
code let us use the applications so
something some example of this can be a
few venues validation is already
implemented in your client and you want
to use the same validation perhaps in
your server side so if you used using
javascript it could be a scenario where
you can use the same library and both on
those platforms and
yes if you have different platforms
different different technologies like
noches and je running in the same
company perhaps providing the same
application for your customers you have
to think about managing them as a whole
and what what do you do when when one of
when one part of the application goes
down how is the other parts are affected
and something like this so there's a
whole there's a lot of to do for the
nodejs and for fourth Java guys too in
order to get this all together to wrap
it up and bring a solution that that
works together for our companies this
operation thing is something really
important not not many of our customers
say we only run applications based on a
JVM we don't run allocations based on
some other processes we are all our
monitoring setup on JVM processes we can
we can have a look into the JVM
processes and we don't install and run
some some noche es applications or
processes because we don't know them and
this is quite an important statement to
have the integration done in somewhere
someway between no chairs and the
virtual machine infrastructure so how
can we integrate we have the good old
way about file or data based backed
system but I think we all know this is
not the best way but but as it's done in
the real world I saw a several times
it's not a good way but it's like real
line by the way the beta database packed
yesterday I saw talk also about avatar
and there was a proof of concept running
JavaScript on top of NASA on top of the
JVM inside of the Oracle database nice
proof of concept but I think this is not
a good way to do anything okay in Robin
protocol based communication restful
services service and events web sockets
whatever this comes up when you have
different systems and so I have have to
talk about your protocol might be a good
solution but perhaps not the best for
this approach and if you want to
integrate noches with java applications
there is a module called Java or no java
this is quite funny this deals with the
chain i h-have a native interface and
makes calls from javascript to be other
chain I to the virtual machine instance
and calling their java classes the code
looks quite funny and really blown up
this is not an option I think yes just
grew up because some note guy and didn't
know how to handle the integration
between Java and JavaScript and there
are a lot of warnings and exceptions and
versions that you have to use in order
to get it to work so it's a perhaps
proof of concept prototype something
like this and a lot of work has to be
done in order to get this running and I
was quite surprised so we have that much
modules no chest but no one except that
is dealing with the integration with
java though it is quite interesting so
we are we end up with
with our time that is a quite
interesting idea to have something that
integrates really nicely with the JVM
and we can use our business logic our
Java libraries that we are used to and
get it run on the JVM and can integrate
really smoothly so this is the idea
behind avatar that's that's right for
the old version and it will be right for
the new version edge that will be stated
perhaps this afternoon three o'clock
this afternoon yes so project avatar was
announced last year chavo one on the
slide to see the features of the project
avatar which is unfortunately rest in
peace in this in this way we had a
service layer for java ee with dealing
with rest web sockets % events and this
all was nice based on NASA on the
JavaScript engine and travie age and
make use of avatar is this was the other
part of avatar and also using Jersey
increase Lee for the communication
protocols so all this has gone NASA on
an avatar is the only are the only two
things which are available still and
also the html5 client side framework is
completely gone but it had it was was
also not the best like so the the idea
behind that was due to give the the
developers and pepsi javaserver faces
developer an end-to-end solution from
the client right words to the back end
to the server and hide all that
javascript stuff behind layers and and
api's and so the developer has to happen
to deal with javascript
at all so perhaps at some some places
and just was Ed idea behind it and that
shifted I think really dramatically with
the avatar to dot all that is coming up
ok just this is just a picture of the
architecture of avatar project avatar we
skipped already the the client part
there was on the left side some some
client architecture we skipped it
already and this was the server part of
project avatar using jdk Dennis on
server runtime avatar runtime and then
using modules of avatar Chey's not
modules and so on but I can would say we
can skip this also encode go and further
go ahead sorry let's have a look into
NASA horn I think many of you are pretty
familiar with nestle but yeah just a
short look by the way if you search for
java and nasa horn at least in germany
in google you get pretty fast to the
wikipedia entry of the java and also
located somewhere in indonesia but
that's not the thing we want to talk
about today yes javascript engine on the
JVM i mentioned it already based on the
inbox dynamic feature if you interested
in invoke dynamic and have a deeper look
and that just talked to Marcus la
Cochran he is mostly responsible for
that feature on the JVM and it's pretty
interesting how in what dynamic hand
handles the the scripting feature on the
virtual machine nathan is a direct
competitor
Google we ate so some some people that
messes up the competitors between we ate
note nasaan and avatar so nASA has a
competitor to we ate and advertised
competitor to no chairs and NASA on is
strictly heck no script 51 compatible
and the guys working on the Eggman
script 6 a-6 compatible plea for I think
at least in Java 9 and yes you have
seamless in the Interboro interoperable
group this is nothing fortune seamless
interoperability of Java and JavaScript
sorry for that and yeah you can have
make calls from Java to JavaScript and
make calls from JavaScript to java
classes we have look on this and NASA on
all the way also brings channels and
language and API extensions which I have
some stated on the slides perhaps
multi-line string literals so it can
spend a string literal across multiple
lines and have string interpolation
string templating which is not possible
in plain JavaScript and so on yeah if
you talk about the integration Java and
JavaScript you pretty soon came up to
this statement because originally they
only have the name in common but nothing
of the technology but we're not with
NASA on we're getting pretty close to
let and that's one comes with a command
line client you can call
the command line line and execute
JavaScript and but the more interesting
part is embarking JavaScript right from
Java you can can create a script engine
and they are evaluate every javascript
can load some JavaScript from a file
into a script engine and execute this
and also can invoke some functions
located in the script you load it before
and the way vice versa in walking java
from javascript is also possible say
let's have some static function say
hello which returns any string you can
call from javascript with the expression
java dot type which is similar to an
import statement in Java to import it is
this class and then execute an
old-fashioned way this class okay the
other part the other part still
available still available ed perhaps
some words about the name so I was quite
puzzled the first time I i read about
avatar so we had a bottle project avatar
we heard about profit rjs and just a few
days i saw there's a avatar OS on the
internet right out and so in order to
sort these things out avatar Jas is the
note j/s competitor nakuha stated that
just a few moments ago so this is the I
think the really interesting part that
is
that is they are right now and that will
be that will stay and will be this
almost the same with avatar 2 dot that
is coming up so what is avatar Jas so it
brings the note j/s programming model to
the JVM on top of NASA on on top of the
JVM and perhaps you heard about the
programming model of the slide in the
truth in the next on the next slide we
are talking about the programming model
and there are sweet a few sweet spots
about improving models so it's non
blocking and you have one event threat
that is running your logic and you have
to think a bit different when you see
them so you just use a lot of callbacks
and a Synchron it synchronous cards in
order to implement your logic and it is
quietly more performant when you have a
lot really a huge number of small
requests that you have to handle this is
something that is really working well
with this programming model and this is
something avatar chase provides you and
if we go back to the previous slide it
is built on top of the JVM so we heard
that already and it is not one hundred
percent compatible to the v8 and the
noches API so they are some parts that
are not different and so they are not
all of the models modules will run on
the on the hitachi s library but the
most of them and the team stated a lot
of modules that are the
text with the smaller font size on the
bottom a lot of modules are tested by
the team that will run and there are
quite a lot of famous modules like
Express underscore and and something
like that is already tested and runs on
top of Avatar Jas so you can write
anoche application and use it perhaps we
can can do a short demo later on and can
use it with the implemented with a with
a node.js application right now okay go
to the next slightly so we have two
programming model and we can really
easily called Java libraries Java code
from within our noches applications that
run on top of avatar Jas and we have the
possibility to start more than one
threat so we have the possibility to
spawn new threads and implement your
logic in these threats that is something
that no chairs doesn't provide out of
the box so we have perhaps you have to
run more instances of no chairs in order
to get something like this okay so this
was the well-known parts and now then
use avatar is in project avatar become
avatar 2 del oh no more longer naming
confusions about what is avatar chairs
what is project avatar is only avatar to
the low and also avatar is no no more
related to an application server to java
ee application server it will be
processed running in its own virtual
machine
and more than that you have two
possibility to run multiple event loops
in each in its own threat and you have
an Internet communication we are a
shared state are an internal event bus
and you can persist data in relational
or a nun relational data store via the
Avatar persistence and nevertheless your
run-in JVM process you can use Java
Mission Control of light recoder to have
a look into your running applications I
don't know way to have a look in your
running note applications in that easy
way yes there's a question sorry in
order to do something like that okay
okay so thank you for the statement or I
repeated there there are some frameworks
in order to do something like that that
is provided by Mission Control and
flight recorder ok thank you ok as we as
i already said the UI part is completely
gone it was an old slide i just left it
for some history and historic reasons
but have a look in the end the new
features of avatar avatar persistence
the model store api perhaps perhaps we
have to state there was a model api in
the first version of avatar so there is
something that I that will be
developed in more detail in the avatar
two-door version yeah imagine you can
store your chase objects in relations to
each other in some persistence tall like
one-to-one relations want to n n2m
relations might this be possible yes it
can be possible without our assistance
or this is the only data provider file
data provider and JP a data provider
also gone rest in peace unfortunately
there you have the model store API and
you can set up the database this is
pretty close to setting up jdbc
connection because the model store API
makes use of kpa and jdbc connections on
the JVM jpa is running with the cliffs
link and as always it relational and yun
relation of data can be persistent
ephesus / persistent and yeah also user
transactions are possible because we are
using jpa and jdbc this way on this
slide is the configuration in the code
there will be a possibility to do this
configuration in the config file not
during run time in the code I just saw
this on money on this
in the code from Oracle but
unfortunately I a doesn't have it
available after your database setup you
can set up your models so let's say you
have a family and have a product and
yeah you just configure your your models
in a way of jason oz it called Skiba a
JSON schema thank you Jason's giving who
have you know JSON schema oh just a few
okay I think the most of you know xml
schema right yeah okay json schema is
something seen a similar to xml schema
and so you can describe your objects and
which attributes you are using and which
which types you are using and the muddle
store apio makes use of a dialect of the
JSON schema so you can set up your
family with a name of type string and
also say this is the primary key and
perhaps and have a description of type
string and perhaps you can say it's it's
a bit of type safety in in Chaves script
and also a product is the name of the
product time of string primary key and
some other attributes and now think
about relation this might be possible
with the model store API you can say the
family object has many products
I think this is pretty a pretty cool
feature just to have this relation and
then bind into the store by the way at
the syntax on the slide may be different
from production code I saw some
varieties of this in the last week's so
don't realize that and at least they
also store connect and a a synchronous
function and call with a call back to
store a new product in the database and
have some call back in case of error or
success in project avatar we had a
possibility to use ems unfortunately
this is also gum but the team is working
on t3 connector thin client to use to
make use of calling remote in chevys and
make use of JMS on a weblogic server the
cap t3 is an internal protocol of that
logic this is unfortunately I think so
the youth before it was only class fish
and soon when weblogic 12 13 think so
came out you could also use it on
weblogic the project avatar and now this
will be only a bad logic with a 383
protocol unfortunately yeah
after Java from with your don't code
from your judgment yep habit I'm so
there's nothing to stop you having a
message-driven be that received a
generated message and sent an event into
no no call back to a Java class yes we
can always go this way I would calling
java classes from JavaScript some
remoting message driven beans or
whatever but this jamis way was was a
slight native interface dealing with the
Chamber's resources it was nice to
handle and the other way you have to
deal with a bit more code yeah so
perhaps this is right what you said the
the most ap is that were used with a
lotta the the team uses matura java
libraries like jdk like jdbc we heard
and JMS and all that stuff and just put
a small layer on top that is implemented
with javascript so they don't
implemented all that stuff in javascript
they used mature well proven libraries
that are already there there's also
yeah this is also a case at the next
slide as we were bound 22 application
server we can were able to use some rest
push our socket services because we are
now moving away from the application
server there are no native possibilities
to use these services but you can use
any node module to implement rest
services push services or socket
services I think the most known way to
to implement rest services with the
Express framework and you just have to
put your explain Express framework into
your node application run it with avatar
and then you can make use of rest calls
yeah that's that's also a way with the
chambers or other protocols and of
course it's open source your our law you
all are invited to contribute your own
developments another big feature threats
and Intel threat communication as I
mentioned we have multiple event loops
running in each in its own thread
running in one JVM process so isn't
there the first way there's the message
event pass you can configure it pretty
simple with our charge occasion bus then
you can deal with the bus and listen for
messages on a specific topic like this
pass on hello and then you have an
anonymous function which is executed
when message arrives and then let's say
perhaps you have any another threat or
somewhere else in your code this
function was published to the hello
topic some object no.js integration in
the Java Enterprise context
and running JavaScript apps in a JVM
infrastructure I think this is pretty
interesting the market threaded a
synchronous non plucking API of no
chairs we can use in our java
applications virtual machine
duplications and we can run multiple
event loops each in its own threat this
is not so easy feasible with no chairs
possible but not so easy and we have
this internet communication will stay a
shared state and the event pass we saw
and we have the avatar persistence the
model story API these are the news I
think also trunk Lincoln and his team
will tell you this afternoon at the 3pm
also here in this room I think this will
be the official announcement of avatar
tuturro and yeah we're done have any
questions
yeah in the example you shows in soon as
product avatar we were to write the same
thing using avatar 2 would all push and
rest up again
no Marshall
the question was if i rewrite my sample
applications with Abbott attitude at all
with but with node modules using one
node modules instead of the the rest
service and push services provided by
project avatar perhaps it's possible but
we got weaker weaker not to the new
features three days ago and so we have
to look how do we yeah i think for rest
services make use of Express package and
push services i also have have to look
which package we can use but it's
possible to do this also yeah and the
persistence i would do / if it's a
monster api storing in some kind of
database yeah also you got the Avatar
deadlock this is it's going to to a tool
of Lough Foyle and in the in the server
no this is just just your file Akkara a
known file logger with no logging
library integration yep okay any other
questions and thank you thank you and
have a nice conference</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>