<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Lab 200: Container Native Application Development | Coder Coacher - Coaching Coders</title><meta content="Lab 200: Container Native Application Development - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Developers/">Oracle Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Lab 200: Container Native Application Development</b></h2><h5 class="post__date">2018-03-19</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/50GKxGqj7dU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">all right welcome to lab 200 of the
container nadir development hands-on lab
in this lab we were gonna assume the
persona of our DevOps engineer Derek and
we're gonna access the Oracle cloud
infrastructure set up a compartment and
then provision at kubernetes cluster
directly to OCI we're going to do the
provisioning using terraform and then
the end of the day all the load
balancers the kubernetes master and the
networking will be set up for us so to
get started we're going to go out and
open a new tab in our browser and we're
going to navigate to the
cloud.oracle.com sign-in page and then
we're going to begin signing in with the
credentials provided to us in our trial
account now once inside we're going to
navigate on the left-hand side go down
to under services into our compute cut
the console and inside our compute
console we're going under identity and
down to compartments and here we're
going to create a new compartment to
isolate resources that we'll use
throughout our workshop today
now notice our new compartment was
created and you're gonna want to go down
and hit the copy button to copy the OCI
ID for later use now we're going to go
out and to our desktop here and open a
new terminal window and inside the
terminal window we're gonna make a
directory called slash 0ci and generate
a public and private keys that we will
then use to connect from our workshop
image into the Oracle cloud
infrastructure
last but not least we're gonna copy our
public key using this cat command we'll
go back out to the console go under
identity and users
and will on the right-hand side view
their user detail and then we will add a
new public key and paste in what we just
copied with the cat command there we go
we have a new public key created and you
can see the fingerprint there alright
now we're gonna go out to our website
and we're gonna actually get the OCI
libraries for terraform and download
them for linux directly from github so
just click on the linux tar.gz and we'll
save this file to our local machine and
one of the things you want to want to
check on your side is where it's saved
so you can see we save to home downloads
just remember that directory because
your next command will be to go out to
that directory and then extract and
install the OCI libraries for terraform
now we're going to clone from github
the terraform kubernetes installer -
this this same directory it will
initiate nishal eyes terraform you
should see this at the bottom of screen
of terraform has been successfully
ignition initialized i will clear our
screen and go back out and will issue a
terraformed edge version command and
what you should see here is not only
your version of terraform but also that
the provider that OCI has been installed
now one of the things that's probably
the most difficult thing is the first
time you use terraform is setting up the
configuration file your Terra format
TFRs file so we're actually going to go
in and over the next few minutes I'm
going to show you how to grab the
various tenancy IDs and the various
fields from the console the the OCI
console and where to paste those into
this configuration file
you
you are gonna have to add in a tag here
that's called region scroll up the top
and you can see that our travel is
running in us Ashburton one
you
they will want to check that your
private
is to where you installed your keys
earlier in our case it's really simple
dato CI directory but if you sell them
in a different path make sure you link
to that path now for the sake of space
we're gonna actually lower our k-8 our
master shape for kubernetes down to one
and we're going to set our load balancer
to 400
you
now we're gonna come out to our client
window we're gonna issue a terraform -
plan come in this will take a second to
run but at the end you should see a plan
with 46 items to add - OCI and next
you'll issue a terraform apply to
install kubernetes into OCI it'll prompt
you to make sure you want to do this
just simply type in yes and watch this
run this will take a few minutes to
complete when you are completed you
should see a series of green text that
look something like this and we're gonna
go back to our compute dashboard and
we're actually going to look at our
compartment so we'll get to our the
compartment we created earlier and here
we can see our kubernetes cluster is up
and running now back at the command line
we're just gonna set some bash profile
information for our install for coop
coop CTL so that we don't have to enter
it in every single time we're gonna go
ahead and issue a coop CTL this proxy
command that'll start up the
administration control for kubernetes
that we'll use a little bit later after
that we're going to go out to github and
create a new file inside of our Twitter
feed this file actually be our
kubernetes die PML file and we do
provide the information here in our
documentation to paste in once you paste
it in simply hit commit
next we can go down to our worker tight
UML file and we're gonna hit edit and
paste in some additional information
until work or what to do and how to
deploy this to the cluster
if we go to worker we can see our
commits executing the push release
taking place and if we click into our
workflow tab now we need to add a new
pipeline step this pipeline step will
say hey we want to on a commit deploy to
our kubernetes cluster so we can set
that and make sure that our new step
does deploy to the cluster now in order
to make this work correctly we're going
to have to grab a couple variables from
terraform and import them into worker
our first one here is the API admin
token so we'll grab that next we're
going to go back to our environment tab
and worker and create a new environment
variable kubernetes token and paste in
the result that we just got from the
command line we'll go back to our
command line once again and grab another
variable to set this time we're going to
grab the kubernetes master IP address
import
and click Add
we're gonna go back to the last run of
this particular workflow click on push
release and tell it to go ahead and
manually deploy to the cluster
you may remember a little bit earlier we
issued a cube CTL proxy command just
start the admin console what we're gonna
do now is show you that admin console
that was we initiated earlier so if we
paste in this URL address we will go to
our admin console we can click into our
Twitter feed we can see that it's up and
running and next we're going to click on
exec so we can actually see the command
line interface to the running instance
and issue a curl command to get back the
JSON for our static tweets
and we're gonna go back to github one
more time and we're gonna click into the
Alpha office product catalog kubernetes
AML file and this time we're gonna save
this locally and we're gonna go back
into our kubernetes master and instead
of deploying it through worker we're
actually going to go ahead click create
at the top or uploader ml file
and in a minute or two our product
catalog front end will be up and running
you should see the deployment taking
place and the pods that are being
created and it's fast forward this for
the sake of time but once created you'll
see green checks next to each of these
items and you can actually scroll into
the services option down at the bottom
wait for it to complete
and then you can drill into it
and we can see
external endpoint there if we click on
that export journal endpoint there we
have a product catalog
and that concludes lab 200</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>