<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>eBay, Connecting Buyers and Sellers Globally via JavaServer Faces | Coder Coacher - Coaching Coders</title><meta content="eBay, Connecting Buyers and Sellers Globally via JavaServer Faces - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Developers/">Oracle Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>eBay, Connecting Buyers and Sellers Globally via JavaServer Faces</b></h2><h5 class="post__date">2015-06-02</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/1zgpp3qmkqk" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">um welcome more we're ready to start so
thanks for coming in and joining us can
we get the back door closed okay all
right hello everybody welcome to our
presentation ebay using jsf to connect
sellers and buyers globally I'm sushma
I'm a staff software engineer with ebay
I merely work in their consumer center
space and I've been there for over 10
years and I'm Ken paulsen I've been an
ebay for three or four years i think
almost four years i came from oracle
oracle for a short amount of time before
or after sun acquired them and was at
son for about 11 years I've worked with
jsf since the beginning since about one
dot 0 and have been participated on
expert group and done a lot of jsf stuff
so I'm excited to share what eBay is
doing with with jsf today and so we want
to start by asking you guys how many
people know what eBay is create
everybody anybody who has bought
anything in on ebay ever that's right a
good number of hands anybody has sold on
ebay before just a couple of hands what
did you say sir
several things but tablet concert
tickets okay anybody else was it easy to
sell or okay great awesome so have you
guys ever used any of the ebay developer
api's or did you list on the web ok if
anybody has used Cheyenne's okay cool
versions of jsf anyway who's raise your
hand if you're on 12 or older okay 20 or
higher okay awesome that's great okay
great okay good next so we're going to
this is our agenda for today we're going
to introduce you to Gandalf which is the
code name for our consumer selling tool
will talk about the environment in which
our application runs you know servers
how big it is and you know the
constraints that we have within ebay and
then we'll get dive into the nuts and
bolts the the code and we'll take a look
at some some of the ways that we are
techniques that we use to build our
application so eBay is an online
marketplace for sellers and buyers to
connect globally it is a world leader in
e-commerce the enough is can just
mention it is a nickname for our quick
listing tool this is a tool specially
made for consumer sellers you know
somebody like my mom or your dad or
anybody who's a compulsive liar I'm just
kidding but people who have lot of items
to sell they want to sell but they don't
have enough expertise or time or even
resources to sell online so this is a
tool built up with JSF interestingly
consumer sellers do represent the
largest population of our ebay sellers
so talking about numbers we have 200,000
sellers coming on to our product every
single day they end up listing anywhere
from eight hundred thousand listings on
a typical day to two to two and a half
million listings on a peak day so just a
couple alright so that this next slide
talks about some of the cool features of
our product i'll be presenting some of
these as we go through a demonstration
next but to start with security as
everybody knows protecting ebay user
data as a top priority being part of
ebay inc responsive so we want our
products to be the screens to be
adaptable between different phones
tablets iphones or even desktop so show
hands raising and if you're doing like
front l like web facing development
responsive design that something that
you guys are either doing or interested
in okay we'll demonstrate a little bit
okay cool accessibilities again one of
the cool features of our product because
a number of a big segment of our sellers
are blind or hearing-impaired so we want
to make sure they are able to navigate
between the items between the pages or
less their items with ease multi screen
again any listing should be able to
switch between drafts between different
resources photosinc is a very important
feature this is something that you know
we wanted to show you with the iphone um
we will still do it but this is
something that helps our first time
sellers are our new sellers who don't
want to run around you know taking the
cameras taking the picture trying to
hook that on to their desktop and upload
the pictures yeah what we found one of
the hardest things to to do to list
thing you know what the name is you know
what condition it's in but getting a
picture online
which is very important to buyers is
sometimes the most difficult part and
this makes it really easy will
demonstrate that scalable again as we
just talked about the numbers if you
want two and a half million sellers to
come on the product we want it to scale
of course all right so let's start with
the demo this is a quick snapshot of you
all right okay oh yeah I'm good so I
have my site sorry for the folks who
can't see me from there but this is a
DVD I had at home I bought it like five
years back I haven't watched her since
last four and a half years I don't think
I'm ever going to see it again so i
thought let me let me set it on ebay so
this is our network connection that's
the one thing we didn't test okay all
the connections all right so let's uh I
think it's probably just not on dhcp
maybe if not but I'm on wired so maybe I
need to connect no that's eat they
wireless using dhcp so i can is setting
it up so I'm sure everybody has stuff
flying in their garages which is you
know just waiting for them to waiting
for somebody to come and set it off so
you can make the money so I would really
really recommend this tool this is a
very fast and easy and simple way to
list an item ebay defaults most of the
things for you you can see if you want
to can still change some of the settings
but at the end of their you know all you
do is spend like two to three minutes to
list your items you specify your
salvation your start price if you want
our enterprise and just upload a few
pictures it's that simple so what why
don't we go ahead and come back to this
demo we'll just move on to the next one
or maybe we'll skip it and just believe
us it's possible to list things on ebay
yeah let's switch to your screen okay so
as I said many of you would be waiting
for an upgrade on their cell phones you
have your old phone so ebay has a
promotion going on anybody get the new
iphone 6 anyone nobody got an iphone how
do you want to see the person well if
you change your phone here's good oh you
know the sound I have the sound so I'm
will done online so go ahead but if I
close the presentation entirely must
have this is wonderful guys all right
all right okay I'm John one right all
right let's go all right
i added a slide call presentation but
everyone wants to be a boss and get paid
looking to turn those on you need to
learn in this game is to delete that
middleman boom when I set a goal I never
settle for second best so when I want a
new phone I flip that last gen on ebay
for the win take it away mother right
now get up to four hundred dollars for
your phone on ebay that's up to two
hundred dollars more than AT&amp;amp;T or
Verizon it is so sure your phone will
sell he'll give you a one hundred dollar
coupon if it doesn't that's like the
unicorn of coupons visit ebay for the
wind calm to start selling or text flip
263 848 to see what your phone is worth
I would never accept anything less from
my phone because I'm a money love and
champion all right enough of that so you
can get one hundred dollars coupon if
your phone or if your eye if your phone
does not sell on ebay that's a promotion
we're running so we wanted to let you
guys know about it see how easy it was
to sell it which we skip that part of
the demo because we couldn't sell it
anything on ebay that if you if you if
you can do it it's there so yeah so go
ahead and skip passes so let's talk
about our ebay environment and well how
you know some of the constraints that we
have with when building our applications
at ebay so ebay for quick listing tool
we are using a number of services in the
background most of these are proprietary
ebay services provides us information
regarding guidance for pricing shipping
trust paypal experimentation or even you
know things like search so altogether we
have a pool which has around 100 220
stateless machines all the user
information is saved in our own
databases something what we call as PDS
tomcat 7 is what we are using as our
dinner and Raptor this is a ebay
platform a homegrown infrastructure
which provides us with all these
services okay some curious so who uses
Tomcat anybody weblogic websphere
glassfish i used to work on glassfish
couple yeah that's good ok cool so a
raptor is our go back one I think so
Raptor is is our it's our infrastructure
that we depend on for a lot of this
stuff in ebay so that each application
within ebay and an ebay the selling tool
that we tried to show you is a in
application and when you're searching
for a product on ebay that's an
application so we have dozens or
probably hundreds of applications that
i'll share this shared infrastructure
and this is pretty common at most most
companies but in order to do logging
analytics and a variety of things we
have support there and it's important
for jsf to be able to integrate with
this and it does very well so go ahead
on the next slide so when we decided to
build this project or product for
selling we chose jsf so why there were a
number of reasons and other factors it
had to do with who was going to be
building the product at making sure that
we had people that were comfortable in
java and and with the other skill sets
as well but it was important to that
when we hire new people that they have
that it can come up to speed quickly and
so being an open standard is important
and we found what they found jsf very
easy to use i had been using it for 10
years before it came in yeah i can talk
a little bit more about it we started
this product about careers back they
were three people in the team one for
Colonel one for jsf and one
player there are 15 people in the team
out of them like four people are working
in jsf there are some contractors who
are also they've never worked on GSF
before but all it took them to ramp up
was you know a number of days so very
easy very fast ramp up time yeah and the
fact that the jsf the component based
architecture was very appealing to be
able to encapsulate functionality and to
reuse them within the application or
even outside of the application with
other applications is very important as
well we mentioned scalability we I don't
know if what we went through that slide
kind of quick but we we have anywhere
from it would like two hundred thousand
plus listings a day and and eight
hundred thousand or is it it's eight
hundred thousand listings a day and it's
like about on two million people coming
to using our application so so
scalability is critical if the
applications slow and can't keep up with
that it's very expensive to throw more
and more hardware at it and J sf's been
good that way and one of the reasons
that it has been good is is that we take
advantage of client-side state saving
which isn't something I had done prior
to coming to ebay because it's kind of
convenient to have it on the server but
jsf does have this mode to switch from
client side to server or back and forth
for maintaining your state across pages
or process requests and by allowing us
to send it to the client we don't have
to store it on the server and when you
have two million visitors a day that's
useful in itself that our architecture
is such a tbay that we just have a pool
of machines and we ordered on sticky
load balancing it comes the request
comes in and it goes to whatever machine
you happen to get that time so finding
your state on the server side would be
slow we have a way to do it but we don't
take make use of it because we have this
this feature of client-side state saving
which helped us scale better because the
request habits state with it in which SF
to the state saving amount of
information that's there
dramatically reduced so it's worked very
very well for that reason we also make
use of view scope which piggybacks on
client site state saving so and the
architecture within jsf is I'm sorry
I've got a question sure we have about
100 machines for this application to
serve those couple million users in it
and on peak days it's closer to five
million users not sure yeah I I
developed the upside all I don't know
I'm not sure see the question was how
much throughput do we have it and I'm
really not sure a lot but it's a good
question there are towards the end of
the slide there are contacts so feel
free to send me an email sure so
Jessup's architecture is very extensible
and it's open source of course and so
that all is also benefit another
question Sharpedo
like 12 gig yeah 12 gig I don't know the
exact specs of the CPU and how many
cores and stuff but they're probably
pretty big but still commodity hardware
yeah so they run on two to six VMs per
machine sorry good question so which
implementation do we use for jsf we were
using Mahara and actually if you go to
our website today that's still the
version on though we're using and it's
actually running on Geronimo we switched
to tomcat that our infrastructure
platform the Raptor thing that we did
they they only support a Geronimo until
just recently and now we have the option
to go to tomcat and potentially other
servers but that's their recommended one
so we're sticking with that for now but
when we moved a tomcat we also switch to
Mahara and so we're using the latest
version of mehar did we don't but he bei
does so I we don't know it it's above
our software stack so when the request
comes in and does get load balance and
distributed to one of those hundred
machines and it's not done in a way
that's sticky so we're going to a sticky
load balancing it's done in a way that
machine can handle it so we send it
there and and what that's kind of
outside of the scope of our application
but that's what he bitches
which components within jsf or we use
prime face and we're actually gonna get
to that in our talk okay go ahead and go
to the next bit and actually keep asking
questions I'd rather do that than go
through our slides so that's that's
totally fine okay so following up on his
question which components do we use
we're going to talk about that we're
going to show some code examples of how
we is and how we've extended jsf and
some of the patterns that we we use in
order to make sure our application
doesn't get out of control and it
follows good practices or at least what
we think and these are just kind of our
opinions too so it's definitely not the
only way to write a jsf application and
would love to hear your stories and
opinions so let's go next so primefaces
we do use primefaces as one of the
sources of our the components that we we
create use primefaces great i like it a
lot and we're just we're just kind of
getting started with primefaces it's
used in our application today and I AC
us using it more going forward they have
some good responsive support that I was
listening to here at ebay we're not
actually using it right now but some
cool stuff so composite components so
anybody create what are what are called
positive that's what I'm talking about
here so you use them create them in your
application okay so you use them so
composite components are jsf choose
since 20 and beyond so if you're on one
point to upgrade to 2 and you get this
feature where you can create components
just using the same templating language
that you create with the rest of like
facelets with the rest of your
application so this is a huge advantage
we use that and we have several
components that are created that way we
did have to use a custom base class to
analyst also show that may be in order
to prepend ID do you guys use f like so
in our CSS jas referring to
components can get tricky with the
longer IDs so our developers especially
our JavaScript developer said you know
we hate your IDs you know we make them
simple for us so we turn the prepend ID
cool false on the form field so that it
gives you the idea that you specify and
in doing that everybody was happy until
I used composite components and
composite components spit out their
prefix anyway even though it was off so
we overrode the base component to turn
it off again I can show you how to do
that if that's something you guys have
encountered tree modification components
we're going to do a demo demo hit the
next button okay so I'm going to
demonstrate that so we created some
components that allow you to modify the
the component tree itself so in this
demonstration I have just a very simple
page kept it simple so that when we look
at the code it's easy to see four
sections when we list an item we have
you describe it we have you give it a
price and maybe specify some shipping
stuff and and set some preferences so
this is really how we do it but there's
obviously a ton more information and
this is just fake stuff so we had a use
case come up recently where we wanted to
do that promotion for the phones where
you get a hundred dollars if your phone
doesn't sell and they sell for a higher
price than what you get for the trade-in
value we get a lot of people that are
selling their phones and so we want to
make it even easier than our easy tool
and in order to do that I wish I had an
internet connection I would show it to
you actually I think we have it on a
slide I'll show you later we took our
form which is this big it used to be in
this big is this big and we made it
about this big for cell phones so to do
that we could have started from scratch
and start it over and and and thrown
away everything all or a UI code or we
could have changed our UI code to
rendered equals false here and do some
things like that
problem was is that the marketing guys
came out to us and said and then you
know that picture we wanted up here we
want this section down here and these
two sections need to merge together and
so that the number of changes and stuff
that would be to do it dynamically and
in the page wasn't really a rendered
equal true/false type of solution you
know to that problem furthermore this is
just one project in the next project
maybe the iPads or maybe it'll be
something handbags or something so if we
put all that code for iPhones in our
normal listing page it starts getting
ugly and big and unmaintained bull so
what we came up with was the set of
components that allow you to add insert
and delete and set attributes to our
existing tree structure so let me show
you so this is the page let me show you
what this page looks like so there's my
demos my source code running on tomcat
so if I go into the mod can you guys see
that are they need to make a bigger see
a little better all right so that's how
mature my sound off so I beat them okay
so here's the page pretty simple we have
a panel group for panel groups actually
five I guess there's there's some links
of at the top there's nothing special
about this page the only thing I will
point out is there's a UI insert what
does that do anybody nobody you i
answered facelet templates so right here
if something uses this page as its
template that's where it gets inserted
okay so there's a hint so what I'm
showing you next so here's here's the
page I'm going to click this add button
link and that went to add jsf let's see
what I jsf is I before I do it noticed
there's still the one two three four
sections but there's extra stuff here so
let's see where that came from by
looking a tad
okay so we'll come back to this remove
and insert component or to focus on the
ad ones first up at the top template
equals index HTML that one I just showed
you so that you I insert this stuff gets
inserted at that spot the location isn't
important but the fact that it gets
inserted it is that means it's going
into the UI component tree and when it
goes into the UI component tree these
components get added but their behavior
is more important than than their look
and feel because that's all they do is
they manipulate the tree so in the case
of the add component the jsf th
component has a target and in in this
and the flips sorry I'm jumping around
the first case the target is price and
it has in its body font color equals
read this is new price content let's
look in our browser if I can find it
there's our browser so this is new price
content it showed up in the middle of
our page in there so how did how did it
get there I lost is somehow switched it
okay it's on the right now ok so this ad
component is what was responsible for mo
being a question no she does i used the
i mostly so i do use an ID i use dummy
clips just not very often so but it so
jst add component targetable price
relocated the content within it into
into that document so who uses like you
i insert you i define that kind of stuff
so it's similar concept right except in
this case I didn't have a UI insert at
all I did it cuz at the top for
everything but it didn't have it in the
place so
allows me to dynamically change any part
of the page by a third party payer you
know a separate page all together so so
it's kind of cool much more flexible the
other example is do the same thing they
have different targets that targets the
form at the end of the form this other
one targets the description contents of
three different areas and then looking
at our page again you can see the two
things added at the bottom the one in
there and so on so let's let's go back
and take a look at insert won't go
through it as in as much detail but it's
it's the same thing a little bit
different than only a real big
difference between insert and and add is
is is that insert is add is a Dean a
child of the component whereas insert is
adding appear to the component so if you
want to put something next to a button
you can do that you don't want a child
with a button but you can target a
button and you can put it before after
that button and they have properties for
before or after and so on so also point
out that the target in this example we
have target will ship another simple one
but it we also have yelled so you can
dynamically specify the target or you
can even pass in the UI component if you
have a reference to it so if your code
returns it and you have that object
since it is manipulating the UI
component tree you can do it directly
that way let's take a look at remove I
get again a very similar except that
that remove and these are five separate
files or four or five separate files are
all targeting the same index HTML so
none of them have the content for those
those four sections are all just
modifying it so if we had a cell phone
the one like we do today and then it
used a handbags one that this would be a
fair representation of how we would
what we just have a separate handbags
file that that's based off of our main
template file and then go ahead and
manipulate it so this is the remove
example it just it targets description
of preferences and when we look at this
now there's only two sections because we
removed the other two instead attribute
the replace it replaces is similar
targets one I'll skip that one bit
setattribute goes in and and can change
attributes on a component so it's not
adding or removing any components but is
let's go to set attribute in this case
we go to the description field set the
rendered property to false so
description disappeared from view so
it's not there but there's a difference
between removing a component and setting
that's rendered flag to false not to the
person viewing the page but what's the
difference anyone
yeah so when we really removed it from
the tree it no longer exists beset
rendered equals false doesn't remove it
from the tree it's still there so if we
want to make it reappear later or if we
have other components that are setting
its label or doing other things that
they are looking for it in code they
don't break so we end up attending
attending to remove things through
rendered equals false quite a bit more
than actually physically removing them
because they're usually integral to the
functionality of the application the
other change we made in setattribute was
to set the style attribute and we passed
in some border color equals red and
changed its width and so that last
section looks different just showing
that that through these components on a
separate page we can manipulate our
componentry ok questions you want to see
a change I want to see it come back at
all ok here we go so if i wanted to let
me good i skipped the the replace one so
that if i open up the replace file e
replace ok we didn't demonstrate it so
the replace file so here we have this
price input for a million dollars it
used to be a text box so it shows that
we can change the component to a
different component entirely and I don't
know so if in this new description area
if I did if I wanted to it not replace
the the description area but wanted to
do it to the preference section replace
or cycle
and we could change the target if I can
find it replace input replace
description so if we want to just change
that to think the name is price show you
that this is a real writing demo there's
no price input component ok so i guess i
should look at what I'm changing
what was it called there's there's a
panel group price oh do i do price input
oh no I didn't ha that's cool okay so
what I did was price in put down below
as was looking but i deleted the price
component because i replaced it with
this new panel group so so you can see
that that if I fact if I just reordered
these things it'll work but the other
one will be gone so here put it down
below it so now I changed the price
input field that I delete the whole
section entirely so there now this new
section was the price I should have done
ship instead of price so they go back
here instead of changing price do ship
than that it all work another ship once
changed instead of the price so okay
anyway so you can change things on the
fly too I guess that's kind of what I
was trying to show is it can make quick
changes and it's fast so okay let's go
back and look at what our next demo is
going to be questions yep
hey yes so the comment was that the
technique i'm using may be difficult to
maintain and it's more code so yes
there's we are adding code adding
functionality and so and there but I
adding code so it is more difficult what
would you suggest oh oh if I VI okay
picking on me for VI so I know that she
doesn't use bi aside she cuz I and
debuggers and so for what oh you mean
essay for the the ones modifying it
absolutely so the comment request the
comment again is well if you're relying
on ids in order to change them the main
page is not brittle the main page
changes and it's not price section
anymore its price content or something
and now everything's broken it's
absolutely broken and we do have
regression test and test suite but the
alternative is copy paste and then have
two sections to it you know if to two
versions and then when we do this one
now we have to do it in two places so
we're down to one place it just has an
ID that has to match I don't know any
other way and if you have one I want to
know to make it even better than that we
didn't want to have one file that had
all use cases in it either so that would
have made a giant file because we have a
lot of use cases at ebay so comment
yes more yep yep yep and it was one that
I proposed actually is that we the
comment in the comment was that if you
use a carefully created you I
composition and you answered you i
define a structure you can still do the
same thing almost the problem is that
actually i'll say you can but the thing
is is we we have to to move elements
it's not just a matter of and when we do
we did the replace or the insert you can
actually target an existing component
that was the whole key thing and when
you do the target you don't have to have
the content right there you can you can
you can have another one I didn't demo
that well but you can actually move a
section from the bottom and in in our
real case we have an image section for
your photos that appears up at the top
and instead of the in the middle of the
page when we change it so it's we could
hide that one and then insert it a
different way it just becomes very
complicated with with the other way in
our use case but in simpler use cases
absolutely the facelets composition is
it is a good technique you can actually
view it you can actually fit in this
screenshot so the first pages are the
first screenshot is the existing page or
check a walk and this page is like half
the size of the iphone page yeah and we
moved can you zoom in actually because
it doesn't show up well on their screen
so it was even on the left one so the
one on the left is our regular listing
page even closer and go over to the left
and in this section we we have the title
where the condition we have some picture
stuff and notice the picture you can
just see is in a different location
which is what i was mentioning and then
we have a product i still i can't even
read it and i'm close so but if you can
scroll in more like its product
description we have a bunch of fields
now if you scroll to the right we just
have title we
don't have the condition because we
derive that or ask it in an earlier step
actually and a lot less field this is
actually the bottom of the page that's
all we ask when you're doing the phone
the other one we couldn't even fit it on
the page just about three more screens
it's about four or five times the size
and so you can see the difference in how
much we had to move delete and end do it
in so yeah that's what I'm comment sure
okay let me add stuff first and you hold
your second one so the quest question
was this is a modern version of GSF
template so I created jsf templating
based on 12 it was awesome back then but
now jsf two is awesome and kind of
replaced all the functionality that I
really needed except what I'll show you
know in the next demo and and so this
part no it has nothing to do with JSF
template the next demo yes so next
question okay my intention is to put it
out in the public so the question is is
it open source it's I've wrote it
separate from our ebay code it is it was
always intended to be open source it's
not currently published but it will be
so yeah yeah
sure csr ebay com and that should bring
you just start jsf okay okay did that
was all three questions okay anybody
else okay next yeah same page different
views next ok so this neil asked if this
is related to jsf templating my earlier
project there was one feature in jsf
templating that actually made it into
jsf to as f colon event that really was
kind of the main driving force behind
jsf template are one of one of them
anyway there's a couple others but I
extended what ethical and event did and
I'm about to demonstrate that and
essentially who's used f colon event if
Colin I then pre-render view something
then do some kind of action say action
equals go to Java write some kind of
being code you want to do more in that
go back to Java and write even more
stuff okay so what I did is instead of
putting action on it I allowed you to do
multiple things so that's basically I've
colon event with being able to do more
than one ok so I think that this helps
code reuse more so that you don't have
the action for button one on page six
then have the special dedicated section
of code for that instead you can write
your code that does an action that this
module it takes some input and does
something so better code reuse better
modularity I think it improves
readability when used correctly I think
it makes it worse when you strong it's
good for prototyping which you'll see in
this demo so let's switch back to my
machine ok so first let me demonstrate
what we have I think it's my gif to demo
so this doesn't do anything right now
here's the idea is that we have a page
and on this page we want to create a
listing I've read
sit down to one field and that's the
title so we type in a title iphone and
you click to create it well it has the
title and behind the scenes we might
have other properties and I added one
additional property called auto realist
the ability to relist that phone if
actually that wasn't supposed to work I
must have okay whatever I must have
already done part of the demo okay and
that flag tells you if you if it doesn't
sell it'll relist it for you
automatically and right now by default
it's saying that it's off because I
don't set it and so it's off okay so
that's the function let's look at our
page so little bit word she s of t know
okay so it's one page application here
alright and this application has that's
it that's all it is an input text has a
watermarks already using primefaces and
I don't a cool component has a button
and that button wasn't supposed to have
this code yet so let's take it off so
the buttons not supposed to work yet it
doesn't work okay there and as a panel
group that is hidden by default so you
can't see it until later so to make it
work my demo is ruined already being
there we're going to add the jsf t event
type equal command so in this case the
command event is it's going to handle
the button action and it's going to do
three sub steps I'm a print line which
I'll show you where that went and then
it's going to do the main step which is
to create the draft and that it does
another print line for debug information
let's let's see where's it or is that
print line here it is title odds iphone
let's come back to that actually I do
want to show a couple of things on the
slide if slide still is switched switch
here so I can explain a little bit more
about how
that processing happens right yeah next
so it uses system events so anyway no
I've system events are in jsf
introducing GSF to its that pre-render
view okay that's one of them so when
you're using f colon event you supply
the system event that you want to be
dispatched and that's the hook that they
added in jsf to for you to do stuff
during the life cycle which is awesome
those are the system events in
parentheses there's some names that came
from jsf templating that I've aliased to
the matching ones I just put them there
for reference but all this those are all
the standard ones works with def colon
event next slide jsf t added a few more
that's the code that I'm going to open
source or put out put out that it's
already has a piggy back up to G
assembling project that I think still
exists anyway command was the one that I
demonstrate its demonstrated so for
buttons for command then so at Ajax and
then I did an it page and it get an it
put so when a page first I mean you
first visit that page before it even
starts reading well actually it's not
before it starts reading the tree
because it actually is tied 2-2 to the
tree but as it starts creating his
facelets goes out and starts
instantiating those objects it will call
these events so in it pages for all of
all requests and it get is forget
request and it posts for post requests
I'll demonstrate that when you do a
custom system event jsf isn't firing
those those actions so in order to fire
those actions jsf provides a very simple
utility the application object dot
publish event pretty straightforward and
you passenger system of n next so in
those five cases I'm doing that here's
an example so for button-pushing with
example I just showed you when you click
the button how is it how am i grabbing
that well there's an action event on a
button
I wrote the action event handler and I
registered my event command
actionlistener actually not commit
excellent sir it's that I didn't show
the name up here but I rendered
registered at that event with it as an
action listener for that button so the
facelets comes and processes my tag it
goes and adds in action listener so now
I have it just like you did the action
equals and then some eel or whatever
like I didn't I'd registered that
programmatically and then it delegates
to a system of that which is creating my
custom system of it and does that
through published event application on
publish event same thing with ajax ajax
has a couple extra parameters that kind
of get lost so i hacked a way to make
them not get lost okay next okay and so
here we have the JSF to you than
technical command the exact demo I just
showed you and there's the print lines
even its exact same thing the command a
tie vehicle command ties it to the I
recognize that say okay that's I need to
register that as an action listener so
that's the key to doing that the command
event listener is the system event
that's custom that I wrap the instance
hit the next button so this underlying
instance commands that's that's those
three lines so I grab those and encode
them they actually happen to be L they
are L a couple editions that I did allow
TL assignment so you can say variable x
equals and then another eel thing it's
actually pretty trivial but it's very
useful then so those Ryan sins commands
that and I pass those into my listener
so that it has that information with it
and then I subscribe to the system event
that's it yay so it's actually a pretty
simple add-on to jsf again jss very
flexible and being able to do that in a
very small number of steps that achieve
the amount of features we get from
that's pretty cool
okay next okay so now I'm supposed to be
doing that demo so you saw that demo but
there's more to it so switch back to my
machine so now that we added the command
it processes it and if you look watch on
the left over here this red thing is to
see the print line statement so whatever
I type a type test it spits it out let's
look a little closer so i have this demo
create draft so i'm going to open up my
demo commands text of all bounds and
there's a create draft method here so
that's highlight that okay so create
draft is is written in a standard Java
Bean I'm still using the managed bean
out a notation instead of CDI which hope
will eventually move to but hasn't
happened yet so just managed beans
nothing special about it again I'm just
using al so it accessed it that way and
that's its implementation new draft
what's a draft passes in title so the
constructor does set title and there's a
getter for title there's also auto
realists and that's it so very very
small simple beam so we just created a
draft which has two properties on it
okay cool I guess now looking back at
our print line statements we
concatenated so this is e el eel has a
string and string has a concatenated
support the plus operation that I did so
little it's just eel so that's how you
could can can it can catenate strings
and he'll sew debug title can cat title
and so what is title what scope is it in
anybody let's look
it's right here so our input text is
bound to risk requests go title so it it
grabbed it from request comes out the
tile okay so I printed it out and in our
in our demo I type test is a got titled
test okay then the next print statement
was after we created that draft object
and did I pull it out a request go not
quite it actually kind of was in Chris
quest well I remember I didn't look at
what scope drafts at I think I actually
copied it from somewhere else and it
might be application scope which is a
mistake but whatever no it's coming from
the drafting and so we wanted to verify
that it that it's the same so it is its
title in both cases so the two different
objects to different sources when I if I
look carefully at the rendered attribute
of this panel group it or not rendered
its I guess a style I didn't used to
rendered so style display equals none if
if what if draft title is is empty okay
so that's why when I submit nothing it
disappeared but why didn't the button
then work before when i did it because
i'm looking at draft title and the draft
object wasn't being created so it wasn't
looking at the request scope item if i
was looking at the request scope item it
would have worked without our input
button right because request scope was
getting past so even if i delete this
now that would have worked so there's
there is a separate object there being
created and yeah see now that now it's
working even when it's empty or when
it's not there okay so let's go one step
further so I got it back and restored to
where I had it test test okay so let's
let's add some Ajax so let's let's
demonstrate how you can we saw it with a
button let's let's use some Ajax oh
let's suppose that we want to display
the text as you type
so I know the screens hard to see but it
says your title equals output text ID
equals echo value a goal request Godot
title so our title okay here's our input
text let's add some Ajax to it so if i
had a p colon ajax so primefaces I don't
worry I hear it is to that input text
that will allow me to to redo it in fact
if I just do that primefaces will will
start working so i'm just going to do
that so this is no Joseph T stuff at all
and just just demonstrate what
primefaces does ABCDEF so as i type you
can see that let's make it bigger it's
just button right ah you guys can see
something i'll see the demo ok so I
whatever I do inside this box appears in
that static text because of Ajax so no
jsf t involved but suppose we actually
want to do something other than just
rear-ender the field let's add something
so in this first example I have a print
line time check debugging let's see what
that does hit reload so as I nothing
apparently because I didn't hit reload
on the browser ok still the same
viewstate going back and forth so either
that or i can save here come on shift
real ok or maybe not did I Kia Ajax
okay not sure I saved it in the right
spot yeah it's not executing on the Ajax
okay it's broken I don't know why so
we're actually going to close on time so
I'm just going to debug that later but
let me show you a jsf t event type equal
in it page and we'll see if if maybe my
servers not even reading the changes
because if this doesn't work then that's
probably why okay so netpage clear by
log hit reload and if as if it's not
reloading then something's wrong with
the server will stop it and start it
Tomcats at least fast so let's hit
reload net page and bet you my ajax
works now too okay i don't know what tom
cat was doing but it wasn't reading my
changes from disk now it is okay so as I
type it shows up there and okay that's
not very interesting what if I did
ABCDEF okay it shows it how can I do
something may be different in my draft
beam I have I think I have where's was
my event I think I have a reverse method
so what if I did foo equals draft
reverse title and then I changed my
output text wherever that is to show foo
okay yeah that's right that hit reload
ABC I didn't do anything is it doing the
Tomcat thing again it just doesn't like
me today
okay and hit reload ABC no no it doesn't
even show that they're okay demos broken
maybe maybe I type the name will reverse
I don't know so it's a it's broken so
you can do additional functionality here
and live demo trying to type it on
script on the fly usually it works but
not today so let's go back to the slides
and finish up because I think we're out
of time just we want to highlight a
couple things I was going to show and
the next one how a week is a similar to
how we had their insert components
modify an existing page we actually
sometimes one hour Java code to
manipulate other Java without doing that
and so we created a behavior concept not
to be confused with jsf behaviors which
our client behaviors this is on the
server side we go in and modify our data
structure I was going to do that for
modifying the auto realist property to
swap it without going in and changing
our create code itself and what's going
to show that bit we're going to skip
that so next I think that's really the
only major thing that we missed there
and just go to QA and go to the next
slide any other questions if you guys
want to see this go ahead I want to know
more about the difference between your
gaze
and then the actual mobile site so I
mean it seemed like your easy out some
chance ft stuff to change it but when I
looked at the mobile site here so what
are you yeah so which mobile site are
you going to and click salsa welcome
okay so we we we actually use the exact
same page is still jsf if you go to our
page there's a couple different mobile
things the mobile apps is completely
different than our page but our mobile
web is still jsf is still the same list
JSF page when you get down to that page
the only thing we do is we do a little
bit of adaptive but mostly responsive
design that that just eliminates things
and chain moves them as you your phone
is it's smaller so it shows less so you
need to go to the self out of it only
the selling style of ebay is Jason oh I
think sorry yeah this is there not a bit
um but just that like if you go to CS
r.ebay.com that would be ours no we have
another 20 or 30 apps that they handle
those different different areas
so question was what kind of dependency
injection do we use we will be using CDI
we're not right now we have available to
a spring that we're not doing that we're
using just the JSF manage being stuff
right now any other questions well thank
you for attending and if you guys want
to see more my demo after I actually get
it working I'll be right outside so
thank you very much</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>