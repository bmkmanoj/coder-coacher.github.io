<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Bck2Brwsr: The Java You Don’t Have to (Un)install | Coder Coacher - Coaching Coders</title><meta content="Bck2Brwsr: The Java You Don’t Have to (Un)install - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Developers/">Oracle Developers</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>Bck2Brwsr: The Java You Don’t Have to (Un)install</b></h2><h5 class="post__date">2015-06-08</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/xWX1uWhm_ZI" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">my name is jealous la flaca and I I'm a
founder and initial architect of
NetBeans platform together with me is
Tony apple and Tony Apple is here
because he is user of the technology
which we are going to talk about here
today well i mentioned that i'm founder
of NetBeans plot NetBeans however
NetBeans has been founded 15 16 years
ago and you wouldn't believe doing the
same stuff for 16 days as 16 years is
not really interesting so far last year
I was searching for some interesting
project so and well not only interesting
but also a bit challenging so the goal
that I decided to achieve is is to
return java back to browser so in the
middle is cover of my book i wrote in
2009 because well while working on
NetBeans i learned a bit about API
design so i decided to put that into
into a book however part of the book
starts with this sign this homeless guy
asking i will code HTML for food and i
found it fantastic said ok anyone can go
to HTML and in fact also a bit
controversial or a bit strange because
at the time HTML was just a markup
language nobody would ever code HTML
that's not coding that's just writing
markup language well times changed and
these days we really code HTML and we
have to do it with JavaScript I don't
know how you but I I don't like it I
don't like javascript javascript is good
for scripting but otherwise it's it's
not a language where I would like to
write 10
thousand lines project not at all so I
rather do it in java and i tried i
started an open source project called
back to browser and work on it mostly in
my spare time so this slide that
everyone shows or we have to show
because we are oracle employees really
applies whatever you will hear today or
whatever i will do does not represent
opinions of my employer most of the
things that i will show we're done in my
spare time and is my basically hobby
project some parts were done for oracle
and I will show them as well okay so
this is a picture drawn by my daughter
she helps me a lot with supplying good
pictures for four vector browser and
introduces demo so basically what I'd
like to do is start them or I'll show
you this stuff and then we will have
question and answers but if you feel you
want to ask a question ask it during the
presentation and Tony you are here to
ask questions only if the audience is
shy then you need to ask the question
instead of you guys so let's do
something yeah well before demo you have
probably realized that this is something
you might have seen this week already
and yeah that's true this basically uses
HTML to render the UI rendered aboard
but behind of that is only Java no
javascript whatsoever and I will talk
about that as well so right now let's
start this is netbeans 7 dot 4 and if
you go to tools plugins
available plugins well not right now
because I have it already you can find a
plug-in called HTML / HTML / java
project support and you download it
install it and then you get following
project type so I can click on new
project choose html5 and here is html5
with java application logic project type
so Garnett test project java
only available in seven dot for it's
only available in seventh at 4k yeah 7
dot 4 is currently in a release
candidate state but it will be released
in an in a month plus minus six months
we should not give any estimate surely
well actually so the question is is this
available for eclipse absolutely because
what I'm going to generate now for java
1j1 for example basically what happens
now is I've created a maven project thus
Eclipse has maven support yes it kind of
gets the problem ah good legs exactly so
it's available in Eclipse I don't know
if it will work because not only you
need to have maven support you also need
to have good annotation processor
support and that's something I really
dug they have in Eclipse but what can we
do well we can run the project so if i
press run hmm do maven will kick in
compile everything and show this demo
and here i can type hello select for
example this work type hello javaone it
will automatically change all elements
on the page which refer to this sentence
and and then I couldn't do some fancy
animations and that's it that's
basically the demo application that's
the skeletal application that you can
then turn into something meaningful so
now let's look how this is done so first
of all we have index index HTML page and
here is the animation stuff which is
done with CSS CSS things and I don't
understand that so I collapse that and
now okay this is not important a durar I
promise no JavaScript so that's not
important
mmm and basically this is the
application you can see it's HTML page
and it and it uses HTML elements so can
you CJ okay I ask questions if you want
sure so there is attribute called data
bind anyone recognizes that anyone one
what is that indeed indeed and it's
special attribute provided by knockout
anyone knows knockout.js no no no
couches developers but that's good
because that means you are not
JavaScript developers like are you Joe
dopers thank you thank you because well
knock out Jes is I set I don't like
JavaScript but no Cal jess is really
cool framework it's one of the three
most popular JavaScript frameworks
currently on the planet it's really
deployed on production application and
it works relatively well so i decided
i'm going to use it in my java like
project as well because what it does it
allows you to bind HTML page to some
model so on once fit one side you create
a model in my case we will do it in java
and on the other side you right there
HTML page and certain element you can
bind to the elements in the module so
and the binding is done with data bind
attribute and here well the good thing
on a NetBeans 7 dot 4 is that it comes
with improved java script and HTML
support so i decided i'm going to
piggyback on this improvements and well
use what we support for the for the
JavaScript guys so i can use code
completion and see all the bindings that
knockout.js provides
so here basically the binding is value
and it says okay in the module there
should be a property called message and
please bind it as a value of the input
field you have seen the input field at
the top of the application so that's the
content of that field is message and
then there are other bindings for
example button which says okay as soon
as somebody clicks on this button call
method turn on or turn off and yet
another binding I'd like to demonstrate
is for each it basically says okay that
is a property words it's an array so
please go through elements of the array
and display all of them and generate
this part of the Dom tree for an for all
of them and that's the HTML side and
this is the kind of vegetable i can
write myself it's not that complicated
in spite i'm not real HTML expert well
and now comes the java part so this is
all the code you need to write to get
the application running it uses
annotations and annotation processors
and as such well the goal I wanted to
achieve was to be as productive in Java
as you can be in JavaScript and plus get
some benefits like tape safety and the
tools for example code completion and
stuff like that and for that I needed to
eliminate you writing all the
boilerplate for example writing getters
and setters which is the usual way how
to do properties in Java because well
writing getter and setter properly
that's at least seven lines and well
that doesn't compare with JavaScript at
all so instead of that we have a
notation the annotation is called model
and it says please dear annotation
purchaser create in this package new
class called data and
put into this class property message of
type string and property on of type
boolean moreover this subsequent method
declaration says okay based on these two
properties also create a computed
property message oh sorry words the name
of the method which is based and derived
from the value of the message property
and then splits the message into six
words and returns them as array that's
done here and here are the two methods
that someone can call back so now well
let's do some debugging so I can really
start this project in the back mode the
Maven kicks in runs java virtual machine
shows the application and well hits the
break point because right now the HTML
view needs a value of the works property
so let me let me show that it should be
so yeah
yeah not too much ok here it has to be
here so yeah okay what I wanted to show
is that here we really have we really
see the javafx webview calling us and
calling into Java code where you can do
some processing so right now what is the
message value message value is the
default one hello word from java and
HTML and i can really step through split
it into words and see the result see the
result ok so you have all the benefits
of Java tooling associated with this
project I can continue well if I change
something here for example if i type j
again the application will stop on a
break point and i can recompute
automatically recognized property and so
it's change and now i can press start
again we are back in the we are back in
the debugger we see a model class and we
can evaluate it and go on and
application runs so all the benefits of
java next thing to show i think what we
want to do code completion ok so i said
that we are using annotation processors
and annotation purchasers is a natural
part of java since Java 6 so this is
standard Java is this is doesn't depend
on NetBeans at all its children in any
ID which is good enough so here is the
data class which we basically generate
it so let me jump in that so this is the
generated code generated during every
compilation by the annotation processors
and definitely this is not something you
want to write by hand get the settlers
some synchronization and stuff like that
but if you want you can debug this and
understand what it does it's no magic
but you don't want to type it by hand
and more aware you also have good
completion so this is instance the model
is instance of the of the data class and
and here we see it really has getters
and setters for each property we
specified inside of the video property
annotation and yeah basically we can
code it's this is something you hardly
get in JavaScript you may you may not
depending on how your ID understands the
structure of JavaScript but in Java this
is guaranteed Java is type safe and you
know that message is of type string and
here is a list of words okay next thing
to do well so the application that I
demonstrated basically runs in javafx
review and well if you hurt me standing
in front of the conference room and
claiming i give you java that can run
everywhere that's not it basically this
is this villa run just on your desktop
or on desktop of your users you can
package this application as a zip file
or rapid as an installer and deploy it
to users of your desktop computers it
will run that what what about the
browser what we need to do to make this
application around in a browser we need
to do only two things first of all click
on this combo box and choose different
profile maven comes with profiles which
are basically configurations of values
of the build and the default one rounds
with javafx view but there is another
one called back to browser and I can
switch it and recompile
and what this will do is it will execute
the same application code without
touching a single line of code I will
execute it inside of my browser I select
run
and now well this is the only drawback
that is currently associated with my
technology we need to wait five seconds
because it boots the whole java virtual
machine inside of the browser well i
will talk about that more but if i
change something java one well the
application is the same if i click start
it runs so basically we succeeded these
are static pages that it ok question
good
push that
okay so the question or the comment is
I've just demonstrated that it runs and
transfer ultimately fast as far as the
UI responsiveness goes because well I
really you can you can click here you
can change something and let's not slow
it's fast enough it may be faster than
the than the than the other example mmm
so the performance is not issue for
writing application that show input
lines forms full of input lines combo
boxes and stuff like that this is good
enough the only problem right now is the
startup time because those five seconds
after loading the page that's something
I need to work on and now let's go back
to tell you on sorry to tell you on what
I'd like to work on because this well
let's do let's do let's do this this is
the URL that you should remember if you
are interested in this technology back
to browser dot API design or API design
is my site that I created to promote the
book I talk about you know will code
HTML for food book and one page on this
website is related to back to browser
which is well the project I'm working on
and part of this project there is a
virtual machine that can be compiled
into JavaScript and run in a browser so
back to back to the demo there is one
thing I promise no JavaScript but there
is one thing which is necessary there is
a bit of JavaScript and the javascript
is two lines long basically this line
says the system please load me back to
browser Jas and that's the virtual
machine written in well in Java but
compiled to JavaScript and then
you basically use back to browser
function to create a new virtual machine
the parameters here can either be single
jar file or an array of jar files and
this sets up the classpath so you
compile your classes into jar files and
just put them next to your web pages
link them here in this in this back to
browser constructor and then you just
say okay dear virtual machine load my
class and the class is main browser so
okay main browser it's here and it
basically just calls main page unload
here is here is the initialization it
says okay let's instantiate the model
class it sets the default message and
then apply bindings is knockout like
think which says go and see around the
HTML page where are all the data bind
attributes and bind that to this model
to the model d which has the get message
get words and is on properties well yeah
and that's it next questions perfect
so what happens with files if you if you
for example trying to access files okay
so for the other two machine and now
let's let's talk about the virtual
machine so for this is basically the
back to browser project is the mass the
poem project containing other sub
projects and let's look at runtime and
runtime has emulations of core libraries
so for the virtual basically what I had
to do is to take let's open the minimal
API profile I took the sources of
OpenJDK copied them or some of them into
into my repository and then I had to
implement them in JavaScript so do I
have file not here this is the minimum
profiles file is not implemented here at
all but for example I have URL it was
necessary because we need class object
references class class references class
loader class loader has get resource
method and get resource returns URL so
so the minimal set of API so you need
basically needs also URL so here is the
URL and you can see basically it's it's
copied implementation from OpenJDK
actually it's jdk 7 bill to 147 or eight
I think and its really complete think
sometimes I need to comment few things
but and sometimes I needed to implement
native methods because then you have
native methods inside of the browser
they actually need to do something so
for that I invented something which is
called JavaScript body annotation and
basically it says as soon as someone
calls the load text method please
execute this JavaScript and the
JavaScript does regular XH our magic of
connecting to a URL and download
drink it as a text so basically a if you
saw what i needed to do was to implement
implement the essential java api s of
turin to have some meaning in a browser
and i have the minimal profile and the
minimal profile is basically enough for
the virtual machine to bootstrap so only
those classes i've demonstrated here in
the minimal profile are basically
necessary for the whole virtual machine
to start and run nothing else is needed
but of course if you have your
application you probably are interested
in portability you want to run any
application that you wrote for desktop
well that's not possible right now but
that's similar to jdk 8 cases if you
have jdk 8 is coming with profiles there
is profile compact one compact to
compact free and if you want to run on
small devices then you want to port your
application or your library to run on
compact one and not all libraries
actually run on such system because I
actually tried to run grizzly grizzly
HTTP server inside of the not in the
browser but inside of small device and I
find it out well it does not run on
compact profile too and the only reason
for that is that it was referencing Java
X naming initialcontext API and naming
API is not part of compact too but
compact free so well we needed to adopt
the library to do this kind of access to
naming api's with try-catch block and if
the classes are not available to just
skip the check it then it continued to
run and this is something you need to
you probably will have to do with other
AP ice as well somehow modify them and
conditionally make them run on smaller
profiles and well in case of the back to
browser API I sort of think about it as
profile compact 0 it's not one that's
too huge this is even smaller one so
it's sort of compact zero so here is
list of classes that are supported
inside of java I oap I so you can see I
can do inputstream output streams
probably readers readers definitely
readers because otherwise I would not be
able to eat a lot of stuff is there a
file file is here well file is there you
can use it but you won't be it won't be
realized satisfied with the
implementation because the
implementation basically let's find it
security exception well what what I
decided to do is to really create a
small Java the goal of my project is not
to run any java application in a browser
and I should probably mention that the
same idea as me to write some to get
java back to browser I wasn't I was not
the only one who had the idea if you
search the internet you will find out
about four projects that try to do the
same thing but most of them died as far
as I know there are just two which are
alive which is back to browser and
doppio and the POS go is basically to
run any java library in a browser
unmodified they just really want to
implement any API and get that running
in a browser well I have to say I don't
know what it is good for for because
well in a browser I don't want to run
everything it's different environment I
just want to use the power of Java
language that's what I'm doing here so
to do that I I decided okay if there is
a chance that certain API in Java can
throw a security exception let's throw
it because if it's not applicable for
browser well 40 exception and it will be
and the virtual machine will be smaller
if we don't implement all those ap is
that are available of course we could
but well we are just too working on the
on the project with okay
help from people walking by the website
but but only me and Tony are doing most
of the stuff so to answer your question
well you can use java.io.file but it
will fro secret exception anyway go on
other questions please how have I
implemented DVM that's a fantastic
question so thanks thank you for that
and vm so anyone knows what is java p do
command line tool anyone you know
regular head okay so let me demonstrate
the java p 2 that's a command-line tool
part of any java okay it's visible so
let's find some jar file back to browser
staff back to now not back to browser
HTML demo I think the chest one is ok I
need to go to target and he should be
some jar files ok unzip unzip the jar
and well here is this class so let's
look at it java p class per class ah
what's the name of the jar just demo to
teach our orc API design HTML demo chess
rules so this is where java p is
basically a tool which allows you to
look inside of a Java class and see its
structure its methods it fields and with
a special power that additional
parameter I guess it's minus C also see
the code so this is how your coat how
your Java code usually looks like inside
this is JavaScript bytecode I'm sorry
java bytecode
and well that's easy to read isn't it I
understand it may not be but for me
after looking at it for the last 12
months it is sort of easy to read so now
what I'm doing here is I will open the
project java virtual machine and okay
the important start the important met
class is bytecode to javascript and well
there are many methods but yeah okay
basically what you can do is to provide
the basic method is compile where you
put input stream representing bites of a
class file and it turns them into a
string and the string is executable
javascript that basically does the same
thing as as the class should do so okay
here starts some functions generating so
for each class which generate one
wrapping function and inside of that we
generate methods where a method for
methods generate annotation annotation
requires something initialize array
fields okay so here for each field in a
class we basically generate something
into JavaScript and then we do the same
thing for method and here is generate
static method here I will jump here in
to generate method and now this is the
part that should get interesting
bytecode so this is basically the
bytecode of the of the method full of
those instructions that i just showed
Jose a load something icons something go
to somewhere so these are Java
instructions there is 200 of them and
basically here you will see a case this
case and this is case of 200 with 200k
or switch with 200 cases and for each of
the
of the instructions we generate
something so these are just assignments
there has to be something more
interesting we have support for long
because in JavaScript lungs are not
supported six years all numbers in
JavaScript are represented as 64 bits
floating precision numbers so it's
basically double in Java and if you want
to precisely represent a number you have
only 53 bits available if you if you
have number larger than 5050 three bits
it gets rounded to two double so that's
not something we can accept so we
basically wrote an emulation library
which works with lungs and this soup 64
method is basically one method inside of
that library and the others saw what
else can be interesting well actually
doing bit manipulation with Long's was
easy the hardest thing there was to do
division divided 64 bits number by
another 64 bits number when you only
have 32 bits available for computation
dead was real fun but I got real a lot
of help from a guy working in proc
javafx embedded team lubomir nerrit and
he's really magician with with a bit
manipulation so hidden made it so the
emulation really seems to work ok what
else else is interesting conversions
assignments you know the java bytecode
is well sort of repeating a lot of
things because you need to do the same
thing for short by integer long double
float character boolean and well a lot
of these instructions are basically the
same so here you can see support for ifs
and another thing well go tues there
should be all arrays that's also funny
stuff but
okay that's here now these things are
duplications if you want to duplicate
something on stag that's another
instruction swaps accessing fields so
here is the way how we access fields and
that's all so basically that's the whole
virtual machine you just right let me
say two hundred two thousand lines of
code and you have virtual machine in
JavaScript if you know how to do it ok
so now example of course in so the goal
of the of this project is to support
subset of Java real subset not
everything Java has even in the compact
one profile compact zero but whatever is
supported it needs to behave the same as
it behaves in Java and how can we
achieve that of course by writing a lot
of tests so let's try one of these tests
associated with the with dementia
individual machine numbers numbers will
be easy probably so here is a so these
are virtual machine test I will show you
a better way how to write tests and
submit back reports later so basically
we have a support which basic support
class here which says okay convert
string to integer that's what it should
do it should Wow it should call a parse
int method and well javascript is
basically untyped so we so in Java you
can have parts you can have methods of
the same name but the different
arguments can be passed into it so to
mitigate that we basically name a
methods in this convention that Etta
appends the arguments after the name of
the method but this is internal to the
virtual machine so I the initial Isis
okay this is a method that returns
integer and L java.lang scrip string
basically says this the only parameter
of this method is string so here we are
in invoking the method and expecting a
result 300
23 and passing in in one argument which
is a 3333 string now we are calling that
on a class got a code number and the
name of the method was sparse sparse
bars Wow oh I see okay it's not on this
class so it's really calling a method on
integer class so in integer you have
parts method that's it and we are
basically calling this method and
verifying that it or not this one the
one without parameter this one we are
basically verifying that this method is
implemented correctly and behaves
correctly which actually leads me to
jump into pars and its really well
basically this is benefit of taking
sources from OpenJDK and running real
bytecode we don't need to implement much
if there is sufficient functionality
inside of the Java Virtual Machine that
that does not use some excessive api's
and doesn't give native native methods
we can really run the same code in the
browser as well as on the real virtual
machine okay so another example okay
yeah yeah I know what I'm going to do
number test so here let's numbers
numbers so here is it auto boxing of
doubles is okay so you can guess that we
had a problem with outer boxing of
doubles and the method to check is outer
box double to string so outer box double
to string so basically this is a method
which takes double and then converts it
into string and it compares whether the
result is ok so now let me run out of
boxing double is ok let me run this test
I can inside of the IDE I can say an
unfocused methought well and it should
be really executed and what it does is
it executes this method inside of java
virtual machine with the javascript in
better wow I have jdk 8 interpreter the
later on because basically no it won't
but local variable uh-huh the problem
here is that this is not owned and well
nathan is not in good shape to run this
kind of JavaScript inspired this
javascript is correct for rhino for
google chrome for firefox it's not yet
ready for for foreign a zone so to
mitigate that I think it's enough to say
that this project should run with jdk 7
which is usually my development
environment but here i want to
demonstrate some stuff with jdk 8 so
okay let's switch it let's go to the
test test number and the method Wars
numbers test double from straying out of
boxing doubles I think its limitation of
noise on and I saw reported a back
during Sunday's keynote and I talked to
nice on guys about this I think this
should be fixed just it's it's a valid
JavaScript and I can of course modify
the JavaScript to be okay if they told
me how to how to make it even more nice
and friendly I will do it but right now
I believe they need to investigate this
okay so now it should run jdk 7 yeah it
will run on jdk 7 and that should work
probably okay it works so we executed
one test everything is ok so now let's
do well let's change the value and let's
run the same test once again now the
test should fail because it should
compare the number and the number is
different so it fails okay and now it
fails says that the number is okay and
also points us two days lovely
javascript file and now please hold on
and not be shocked I will open it
two megabytes that's currently the size
of the virtual machine I have and this
is the bytecode this is what I generate
but well if you look here you can sort
of realize a similar construct to the
java p i switch back so so basically
this is the output of the java p 2 and
this is what we are generating so
assignments of registers go two types
calling some methods I will just go
through it if you want to see something
special tell me a good thing to navigate
here is actually source view editors we
are supposed to finish oh thats turn
goes fast okay collapse all collapse all
ok so I I collapse the whole virtual
machine wow that takes time expand and
now basically what we can see we look at
the classes which are in the virtual
machine so basically for each cause here
we generate a function that wraps up the
behavior of that class so well I'm just
tell me what class you want to see
string it's not there or is it string
actually how do I find out if it's dead
vm ok vm dot da don string space ok it's
it here so this is string and well the
reason why i said it's not there is
strength is treated as special in
special day because basically what I
want to achieve is to reuse the
JavaScript type as much as possible and
JavaScript has its own string so I need
to basically do it do things in a way
that the string is reusable and you can
pass JavaScript string to Java and Java
screen back to JavaScript and they will
work correctly so arguments wow this is
probably it this is these are the
methods of the string and value values
so you can choose a method gonna replace
and it plays all Tony replies oh ok so
here is the code for replace Oh see ok
not support this exception but ice but I
implemented it didn't I no no I replaces
intimate replace is implemented edits
well in order to get things running I
unimplemented some some of my thoughts
but I well basically what I'm trying to
achieve is if you find so let's leave
this but if you find a back in in the
general in the virtual machine then
basically there is an easy way how to
write a test and submit it to me and our
to the project and we will we will
implement that so back to browser
modules runtime emulation tests in now
not inside back to back super far that's
it api profile is here it has tests and
it has TCK so this is basically the way
how people should write tests not not
the developers of the virtual machine so
this is how you write a test and that's
not complicated at all you just write a
claw you create a class put the public
method which written something some
primitive type usually string or int is
ok and then you annotated with compare
annotation and the compiler annotation
comes with that's my invention and the
next important thing is factory the last
line of this test needs to be annotated
with factory and factory is annotation
coming from testing g i'm using testing
g to test this stuff and it basically
checks this class and goes through all
the methods which are annotated with
annotation compare and then it runs
compared inside of hotspot virtual
machine and then it runs it inside of
the jar back to browser virtual machine
and it compares the results and if they
are okay fine and if they are not okay
well we have a problem so actually Tony
wanted to do a test compare let's do
some coding public
string replace all return java one
replace all know all right better so the
reason why I chose this example is
because i stumbled across this when I
was porting a library to back to browser
and it's it it really there are not many
things like that it was just one one
specific point and it was very very easy
to work around but sometimes you come
across these things but also i didn't i
didn't write that library for
specifically for back to browser and it
worked almost unchanged and the same is
true for box2d which is like a physics
engine that i'm using in in in some
games and it was probably like two lines
of code that i had to change in order to
make it run on back to browser so it's
really it supports a lot even if it
looks like it's a small subset it's
actually supports a lot yeah i think so
well maybe let's talk about things which
are not supported so I don't support
frets well javascript itself is single
threaded and supporting fritz is not
easy so i just throw security exception
okay
all the big conscripts have
you
so it's not that a good way how to
advertise this technology a replacement
for JavaScript all the things JavaScript
sucks are fixed well they are fixed well
it just needs a bit of work of course
but well look at the Google guys they
are doing the same thing they want to
replace JavaScript which something
better that they are inventing new
language but I don't need to invent new
language I have good enough language for
my purposes it's just enough to select
the right compact zero profile implement
it properly so it behaves as you expect
Java to behave and then create a P is
for accessing the browser for example
the model annotation and stuff that I
demonstrated before because well that is
it's more comfortable than to play with
JavaScript one one thing one thing
before we ask a question so this is
basically the result of running tests so
we know that replace all doesn't work so
it what it says the java version return
java one from the method that i wrote
here it really replace crib with one and
then the JavaScript version flow
unsupportedoperationexception so ok
thank you Tony for Mac report I'll fix
it question
how this compares to GWT actually it's
not that easy well easy it's it's long
answer but here is the page this is
common question people ask it all the
time so slow job javascript interpreters
doing less work well java script was
written at a time where the javascript
was slow now it's fast so javis WT had
to compile on a on a desktop and prepare
various versions for various browsers I
don't have to do that I can compile in
in the browser well visit a five-second
boot boot boot time but that's probably
relatively okay gmail web toolkit well
GWT is called google app tool kit but
it's not google a toolkit deserve that's
a toolkit written by guys who wrote the
original gmail app and its bloated well
it's only purpose well first of all they
created to gmail portal and then they
obstructed it into a toolkit which is
fine if you want to write gmail and I
don't want to write gmail I won't write
write Java I want lightweight api's
something I demonstrated with the
annotation that just binds to the HTML
elements and thus the cool HTML stuff
not something that loads huge amount of
forms and stuff like that yeah language
or framework for what's that so-so well
the jaw the google web toolkit is
basically it tells you it's not java
it's java language but not java runtime
and but i'm telling you this is java
runtime this supports reflection this
supports all the features that java
supports or shoot well at least it
should do it so its aims to be
full-featured virtual machine even with
runtime environments another difference
yeah okay so that's about the GWT you
had a question
perfect question so the question is the
primary use case for javascript is Ajax
basically getting data from a server how
that is supported let's look at the
twitter stuff so of course I had to do
something like that why it's I will try
to run it so you see what it does but
actually I wrote this application two
months ago three months ago and it was
working it was really showing tweet so
you can go here change something and it
connects to the server and gets the
tweets and shows the tweets but
meanwhile Twitter change its protocol so
the application does not work anymore
but if you look at the exception which
is generated in the console it tries to
connect to web so that's basically the
job HX stuff so how'd it's done again
there is HTML page describing the layout
of the of the twitter client and here we
have the model classes and stuff like
the guy I talked about it and actually
you can s the classes seven minutes to
go value I I should ask for free or two
sessions on this stupid okay so here is
the magic again i use it i use
compile-time annotation purchasers so
basically use you use this annotation
and you say okay I want to connect to
this URL I want to do it with Jason P
stuff and okay and basically based on
this the class or the annotation
processor is going to generate method
call credit weeds and you can call this
method submit your route submit your
query submit even your data structures
the models generated you can pass it to
the server and you will get an answer
and as soon as the answer arrives this
this all well javascript is good in a
synchronous things and doing callbacks
and so this is a synchronous as well it
just connects to the server obtains the
answer and
as soon as the kaveri is here it
converts it into a class java query
which has a twitter query which has a
structure of of the server reply and
then you can use it you can get it and
use it and the query has metal to get
result what else is there get results
should have its list so get one and then
you can have get user ID and other other
get tags get URL stuff like that so this
is relatively easy and what i should say
also is you get code completion with
this it's not JavaScript this really is
Java so i can type M method and there
should be advice ok wrong example so
here you can say method and the
supported methods are get post put
delete but there is also since I had to
support the chest demo as I demonstrated
so I around also support for vets
WebSocket that's ok I think this is it
so basically if you do this you turn the
the communication communication into
WebSocket communication and you can
easily use WebSocket just by using
single annotation so again I try to aim
for java to be more efficient language
than JavaScript actually the Twitter
demo is based on a demo provided by the
Twitter guys on their on their web
actually let me show it selfie that's my
website Twitter so now again ok this is
the page and it booted that fast it's it
already started it wasn't five seconds
oh ha well sometimes is faster probably
ok so here is the original demo this is
the knockout.js website the toolkit that
i'm using and you can see the page the
HTML page is basically the same this is
the these are the features that its
support of its broken because of the
change in twitter protocol and here is
the java version doing the same things
and you don't need to do javascript and
actually compared if we compare this
demos then in terms of modeling the page
it's the same amount of lines so the
Java version is as effective as as the
JavaScript one but there is additional
file about 300 fly lines long which is
hidden and it does the Twitter server
communication in the JavaScript version
and in the Java version you don't need
to do that in the Java version you
really write a single annotation and
that's all this annotation and you had
all the communication happens for you so
again java can be effective language if
we want to make it effective probably
next slide advertisement I don't have
enough I want to talk more but I will
not because Tony will talk I will just
sit behind and watch what he says
because right now we had we've seen one
example of how to use it like with the
knockout bindings and stuff like that
and now with the HX stuff but there are
many many ways that you can use that you
can create your own ap ice and that is
one thing that I did I created an API
for rendering on on html5 canvas and can
we switch the screens please guys thank
you thank you and I've got one little
demo for you and this is the page
homepage of a conference that I'm doing
in Munich and this is also an example of
effective browser application so this is
a space invaders game that is written in
java in plain java and it's running here
in the browser in the virtual machine
and you can see the performance is quite
nice so you can do graphically rich
stuff with it don't let me see can you
wave i managed to go go go go go go now
fine fine oh yeah let me play Oh said I
gotta get a load or five more demos that
I did with that SD a SD ah it's too fast
oh and it was very easy to create this
this binding so there was no support
44 canvas inside I it's too fast your
urine it's to optimized to virtual
machine is too fast go on so and I would
like to talk a little bit about the from
a former user perspective because now
you had a look under the hood we would
have liked to have it the other way
round like first show applications that
you can do with it and stuff like that
and later and later on have a look under
the hood in this session but it's the
other way around so you can come for the
introduction recession after this
session and you can see what you can do
okay move away and they are over show
the slide so these will be the slides
for the next talk we will have at the
afternoon and this is the promo
promoting stuff now click click it looks
like left click fight okay thank</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>