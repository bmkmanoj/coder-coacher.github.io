<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>CON7205   Nashorn Advanced Topics | Coder Coacher - Coaching Coders</title><meta content="CON7205   Nashorn Advanced Topics - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Developers/">Oracle Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>CON7205   Nashorn Advanced Topics</b></h2><h5 class="post__date">2015-12-11</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/i8uew2biuLI" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">good afternoon my name is Jim Leske I'm
technically done nice work and this is
the fourth year we've done talks at at
Jeff 1 and this is actually Nasser ins
fifth anniversary that's because it
started in 2010
I'm assuming because it's an advanced
talk everybody knows what NASCAR is but
my wife said you should probably have a
slide at the beginning there just to
make sure that everybody is up to speed
up sorry up to speed on what you're
talking about oops one more sorry so
NASA Warren is implementation of ECMO
script 5.1 on the JVM has a lightweight
interface to Java so it makes it release
easy and smooth talk to Java you can
find documentation on this at this link
there's a steady flow of discussion on
NASA warrant dash dev and also if you
look on Twitter for hash hash tag Nass
horn or Jes if you're lucky lots of
examples can be found on github and
stack overflow and it's a currently
supported by NetBeans IntelliJ and
Eclipse if you want to do development
work the main thing I want to talk about
here is to keep the focus on it's about
the Java stack you know a lot of people
talk about performance and Marcus and
Attila both have done a lot of talks
about the performance of mass were at
the lowest level but I want to talk more
about it nests or net at the Java level
and how important that is for an escort
what I've done is basically SAT back and
income thought about some of the
questions have been asked over the last
year and a half since nests Hornets been
released and pull up some of the talks
some of the questions that come up
repeatedly and see if I can address some
of those and this is where I came up
with the idea of having advanced topics
talk so the first thing that people seem
to get confused about is the difference
between engines and script contexts and
binding and and how to deal with it in
multi-threading so I want to talk a
little bit about
that and ultimately if the question
comes down to is why do my simple
scripts take too long you know I have
this little thing that's only one line
long and it teams to take forever to
come through and inevitably what's
happened is that they've written a
little JavaScript thing that looks like
this where they're creating an engine or
creating a the engine manager and in
retrieving the NASCAR engine and then
feeding it off the something to evaluate
the script to evaluate and this seems to
take a long time well of course is going
to take a long time and let's look into
why that's going on that happens so as I
said we've talked a lot about in the
past about performance and ass horn and
the underlying reason why it takes a
little bit longer than some of the other
script engines is the fact is that you
have to take the source code convert it
to bytecode then feed the bytecode to
the hotspot interpreter and then the
interpreter interprets it for a while
and if you do it enough times then the
hot spot kicks in and converts it into
native code and the performance all of a
sudden improves but this doesn't seem to
be great for interpreted languages
especially we're just going to feed
these one-line things off to a
time so so we've done a lot of work is
it mark as I said Marcus and until have
done a lot of work on improving
performance using using code caching
optimistic typing improving dynamic the
dynamic invoke dynamic interface and
just general improvements the Vienna to
help us out with performance but there's
also this other overhead that kicks in
and that's when you're dealing with new
engines or new contexts or even your
bindings that adds to the cost of the
performance so ideally you would like to
try to keep those costs down and this is
basically where I'm coming from with
with my answers here so so if you create
a new a new engine to do your evaluation
there's quite a bit of a head involved
in doing that it has to create all these
new structures the advantage of having a
new Asian engine is that there's a no
sharing of objects so there's no issues
about objects contaminant contaminating
one execution and another so you can see
that absolute isolation and and it's
empty safe because the thing is if you
have one engine per thread then there's
no way to threats can can create any
kind of college
now it's also possible to create a new
script context where you can gain some
performance by not having to create some
of these other structures you can also
gain performance by the fact that you're
going to have some code sharing if you
execute the same code across the
evaluation then you're going to get
better performance so changing the
context is better than changing in in
the engine but still there's some going
to be some more over it it's empty safe
to a point but if you share the same
contacts across multiple threads you're
going to run into some issues and then
of course the cheapest thing to do is to
change the bindings when I say changing
the bindings really all you're doing is
replacing the goals so you have a fresh
copy of the Global's to work with and
there may be additional bindings that
you might want to add to your execution
the only problem with doing that is the
fact that this apar it's a possibility
that if you're doing multi-threading
that you're going to have some collision
problems and we'll talk about that as we
go along
one thing I should mention now I was
going to mention at the end but i'll
mention it now is that none of these
slides will have any Java code on them
everything I've died and is all going to
be done in JavaScript so this just to
speak to the power of last one so
there's two ways of creating engines in
S word you can do the same thing in jab
as you want to but I like doing things
of JavaScript so you can use the Java X
Script API which you create an instance
of the script man engine manager and
then ask it to search for a NASCAR
engine and it gives you the engine and
then you can use that engine to go off
and do evaluation it's kind of an
expensive API to use and what we do is
recommend that you use the Nashorn
script engine factory and that way it
doesn't have to do a search it actually
just creates an S origin directly so you
get a factory and then you can create a
new engine and one of the things about
doing it this way the Nashorn engine
also takes or the constructor from the
nest or an agent takes multiple
arguments and one of the arguments that
it can take is an array of strings
containing all of the switches that you
want to pass through to
to the NASCAR NASCAR engine in this case
I want to pass the scripting scripting
flag through and then you can go off and
do the evaluate with the engine and you
know get the result script contexts once
we have an engine we have a context that
works with that engine it basically
provides a context for which things
executed so there is a we have the
engine at the high end and we have the
bindings at the low end and we have this
context in the middle the context is
responsible for managing the bindings
that being passed around for the
execution but it also handles things
like all the i/o that's being used by
the by the the engine at that point so
for instance if you wanted to redirect
the output or assign the input to a
different type of device than the save
the console then you could do that
through the context
so there's two ways of doing dealing
with the context you can get the default
context from the from the from the
engine which would include all of
basically standard in standard oh and
the global bindings or you can create
your own simple context and you can have
multiple context and you can predefined
the things that you want inside this
context or redirect the input and output
finally bindings bindings are really as
far as we're concerned in s horan are
the Global's these are the things that
you're up your script would find if you
would start evaluating there so this is
would be all the bubbles that you're
dealing with again there's also two ways
of dealing with that you can take the
the the content of the bindings that are
currently assigned to the current
context you're working with or you can
create your own set of bindings and then
you can add whatever you want to it one
of the things about having working with
the bindings directly is that you can
manipulate them as though they were in
any other kind of map and so that for
instance if you wanted to for some
reason we'll talk about this in a few
minutes if you wanted to remove access
to Java to access to Java axe-fx or any
of those things from the global context
so that you create same or improve
security you can do it against the
bindings so once you have the binding
setup than you you add set the bindings
to the context and then you evaluate
using that context
and just to give you an idea what
happens here is that we have a lot of
Global's that show up when you these are
actually all the Global's to show up if
you have scripting mode on so we have a
lot of Global's get set up every time
you create a new set of bindings so
there's some overhead there finally if
you're working directly from Java
JavaScript itself with an S or in itself
you have eval load and load with the
global new global main thing I want to
focus on here is load with new global
but eval takes us takes the script goes
off and execute it but it executes sit
in the current context and also with the
current set of bindings okay so it's
pretty low cost it doesn't have to
introduce any new structures but the
problem is that if you want to do
another evaluation it's going to be
contaminated by whatever evaluation
occurred prior prior so if you're the
script at Randy from before is executed
it's going to be contaminated maybe by
bunch of Global's that you don't want
around for your next run so that's
ideally it's not the best thing load
load is very similar load allows you to
load from URL or from a file or from a
script object it's very versatile but
again it uses the same context and if
you won't don't come contamination then
you're going to run into trouble so
that's why we introduced load with new
global
so what we want to do is basically start
with a clean slate so that when you
would do a new execution we don't we're
not contaminated by the previous
execution but we've done the minimum
amount of cleanup to do that so the cost
is fairly low well
so every situation is different and you
can play around with these yourself and
and try them into Texas performance but
if the global state is not you know
important to you then you can rerun with
the same global state then use eval load
or this the engine eval actually the
engine eval seems to be the fastest
based on some of the performance I've
done but it's there may be some overhead
in some of the other calls if you global
state is important that you should
probably think about using load with a
new global or equivalently do an engine
eval with a new new context or new set
of bindings so why am I talking about
this well this is often that comes in
that people are creating servers and
using NASA horn and they want to be able
to run scripts that people have uploaded
for instance if you were implementing
something equivalent to know to yes then
you want to be able to run the user
script but you don't that script to
contaminate things for everybody else so
you want to isolate and then often you
want to be able to do multi-threading so
this is what I'm leading up to so so why
would you put youths multi-threading
well presumably so you could get better
performance sometimes that doesn't work
out sometimes you set up all these
threads and you say well I'm not getting
a bit performance so every case is
different but often enough if you have
you know 20 cores on your machines if
you start farming it active multiple
threads then you're going to get better
performance if the application can be
factored in to say good sized tasks then
you spawn a separate thread for that
task and it goes often visits thing but
there's a certain amount of overhead
associated with
with creating new threads so if your
application can break things up into
smaller tasks then that's where we would
use worker threads not give examples of
both of these in a second here okay so
using threads is really easy all you
have to do is get the job of three class
and just start creating new instance of
the thread in this example I'm just
iterating through loop 10 * and creating
10 separate threads and each thread I'm
actually adding a closure with a new
different number sorry actually a
different name in each closure so that
when they when the thread executes so
we'll be using a different value for the
name so then I go through the list of
all the threads and start them and often
go and do their thing in this case
they'll be printing up their name and
then if everything goes right you'll see
them coming up in random order and then
in your main program you should join all
the threads again so that you make sure
they're all completed and come back
now with multithreading there's lots of
gotchas you have to be concerned about
collision of objects an ass whore does
not protect you from having to threads
assigned propers say a property to the
same object because we don't didn't want
to add the overhead or the cost of doing
a synchronization every time you add or
delete property so you have to be
careful not to have two threads working
on the same object at the same time you
also have to note that Global's are just
another object so if you introduce any
new Global's in your execution you're
going to have problems as well if you
have two threads manipulating at the
same set of Global's so it's recommended
that if you're going to work with values
across threads you should probably stay
away from JavaScript objects and work
with Java objects a little bit safer or
if you're working with with some kind of
collection you should use the concurrent
collections and then I'll show you an
example of using concurrency and second
there's also the ability new feature
recent feature since the original
release was Java synchronized which
allows you to put locks on JavaScript
functions so that prevents you can
actually use that for synchronizing
access to a shared object
I did a blog it's almost two years ago
an hour it's been quite a while ago I
did a blog on multithreading that you
probably all refer to at one point about
accessing thread these are the rules I'm
not going to go through the meat here
but basically this is the rules i
defined in the blog but it's it all
comes down to if you don't want to cause
yourself trouble don't access objects
across rights
okay so if you if you have a large task
in this case I just gave a simple
example but I created a simple script
defined using the here doc here and
specified here if you have a large
script that you want to fire mug through
the separate thread this is the easy way
to do it and in this case of what I've
done is I've actually issued the same
script off of several threads to have it
all execute main thing here is and why
haven't bowled is that I've used load
with new global to initialize the state
for that thread so every thread that's
executing will get a new state of
bubbles so then there's no way that
those threads cake in it can contaminate
each other in execution
the other model is the worker threads
model and in this example I spun off a
series of threads that are set up in in
worker mode and what they're going to do
is they're going to pull tasks to find a
simple JavaScript functions from it the
concurrent queue and execute them and
then go back and look for another task
and if there isn't one there then sleep
for a while and try again later on so
typically when you have this kind of
scenario to say for instance I was doing
a search through an extremely large
array of values and I wanted to have
multiple threads break down that search
so like one thread would search one
through a thousand the next raid would
search 2001 to 2000 and so on I would
slice up the task and in the previous I
should go back to the previous thread
there the number of threads I created
were based on the number of processors
that are running on the machine slices
are basically going to be in the same
same order you want to try to make
slices appropriate to the number of
processes that are going on and then
pass the slices off to each of the
workers so the work that the worker is
going to get the the function that's
being returned by the app by the ad here
it's again has another closure with some
values that are unique to that class and
then going off and doing the search
through that range of range of values I
push that on to the priority on to the
concurrency concurrent queue and so that
the worker threads will pick it up
execute and then in this case what I've
done is I've created a concurrent
results queue which will take the
results of the execution
and push the value on that so then what
happens at the other end is the main
program is monitoring the result queue
and once a value comes up it prints it
and in this case exits but if you're
running a server program you could go
off and do something else
okay so i should just reflect on that a
little bit it's it seems that a lot of
people get really confused about
confused about the engines and contexts
and script context and blinding zand
Global's and i was trying to or
basically we're trying to with this the
slides to try to keep it simple and i
think the thing is that some people
where they get confused is the language
used by script X or sorry you have X
script and where they talk about context
and they talk about Global's if you're
working with a documentation ignore it
and just go back to these slides because
I think that leads to confusion when
you're actually talking about JavaScript
okay so the next topic I want to talk
about with sheva lambda lambda is and i
think is probably not a lot of problem
here but i think i think generally there
doesn't seem to be much work where
people are catching on to the fact that
lambdas and java functions can be used
interchangeably right so i wanted to
point out that it's it's pretty
straightforward if you have a lambda
place that requires a lambda in java
then the java function could be used in
its place okay and vice versa
technically okay so this is this really
simple example in the list javascript
list and I want to sort it and I've give
me giving it a function to be used for
the sort order I'm mapping it so
basically up to sticking the first three
characters of everything everything in
the every item in the list and then
finally at the end printing the results
so in this particular example sort map
and for each our functions that are
applied against the JavaScript list and
the functions that were passing through
are basically equivalent to JavaScript
lambdas in this example what I've done
is taking the same list and put it into
a Java arraylist pretty straightforward
all you do is just a to read through all
the elements and just add it to the Java
realist once I've done that then I can
take a stream a Java stream directly
from that list and and apply sorted
which is a java function but use the
same lambda that I used in JavaScript
same is true with Matt in this case the
map is java's map and finally the for
each is java's for each so you can use
that the javascript lambdas in
equivalent places as you would use the
Java linda's an example of this did a
few minutes ago with with threads is I
provided a function to execute when the
threads started up again a place where
you would use lambda and Java but in
this case I've used a JavaScript
function instead
something that is commonly asked for is
the ability to parse JavaScript and this
is something that's been asked for a
rate from beginning because people want
to do analytics or they want to do some
manipulation of the javascript
javascript code so one of the things
that's coming out or it's actually has
been introduced already in some of the
updates is the nests oren parsing api
it's really easy to use it doesn't
require a lot of legwork to set up or
anything it's just you set up a parser
you parse create an AST abstract syntax
tree and then you visit the nodes in the
tree it's easy easy to use anybody's
done any kind of analytics with
languages we would recognize the pattern
so in this example I'm getting a new
parser nasrin parser now this is the
class they're going to be using I'm
going to get the visitor class that I
want to use there's only one 451 now but
when we get 6 going there will be a
visitor 46 code as well and my script is
basically just a simple a equals 10
equals 20 and C equals a plus B
okay so creative visitor or create a
parser parse my script the first
parameter for parsing is basically the
name of the script you could use the
file name if you wanted to if it was a
file can follow it creates the AST and
then you're doing except on EST so this
is the standard visitor model where you
pass a visitor which is an extension of
this simple tree visitor that we defined
in the previous slide and we're
overwriting the visit literal function
or method in this case it'll pass you a
note and extra information that's
associated with that note all we really
care about is the note itself and it's
in this case the value so if we only
visit the rolls notes in the st and
print them out then we'll get the 10 in
20 from from the code
the details of the API are available at
the first link and a really good example
of how you would convert an ass horan
script into JSON equivalent it can be
found at the second link
okay so the next topic is exec if people
sort of get stumble stumble on that the
most common question that comes up it
seems to come up is like how do i change
my current working directory when i'm
doing an exec so hopefully we can get
through that today went to this
discussion first thing that you should
know is that whenever use back ticks in
Ain a sworn script when you're in
scripting mode that is equivalent to
calling dollar sign exec with that
string okay so those those are basically
equivalent so the back tix is is the
shorthand for that when we get into the
discussion examples here I want to talk
about a couple of improvements of income
with jdk 91 is that we've implemented
bitter argument handling because anybody
who's tried to pass an argument with a
space in it knows that doesn't work too
well for you right now that's all been
cleaned up and people have asked for an
exception being raised whenever the
command is being executed
creates an error
by the way I should ask does everybody
know what this is sub ugh I mean this is
about shell scripting right ok so NASA
foreign can be used for shell scripting
the exact command itself is actually a
global and it is just a function and
I've had a couple people ask me well you
know the exact that's built in doesn't
quite do what I want you know is there
some way I can work around it well
whatever I suggested you know with
existing with the existing release is
that they can actually override it so if
you wanted to override it and cleaning
up the argument that's being passed
through to the built-in exec you can do
that or I've actually if anybody sends a
request to nass horned dev requesting
the JavaScript equivalent for dollar
sign exec I can sit into that so
everything that dollar son exec does you
can do the same thing in JavaScript
that's what NASCAR is all about you
don't need to write any Java code
so in this case I'm just all I'm doing
is basically replacing the built-in with
something that prints out the string
being passed to the exact so whenever I
use my back tix it's just going to pass
print out the command also you should
note that when you're using dollar sign
exec there are several variables that
are related to the dollar sign exact
dollar sign out is the last output which
is returned by the dollar sign exec
dollar sign error is the standard out
our starter standard error that's
reduced so if there's a an error
produced by by the call to dollar sign
exact then that will contain the string
with the air in a dollar sign exit
contains the numerical code returned by
the execution so if it's returning a
zero then there was no error if there's
returning nonzero then it was an error
produced and most importantly there's
dollar sign env dollar sign env when
you're doing a scripting mode contains
all of the environment variables of the
process that launched a sort the most
important one for most people it seems
is the PWD environment variable which is
the working directory
so let's take an example we want to do a
recursive directory listing so we do an
LS HR and I just have a fake directory
set up here so the a.m directory and as
content is dot txt and dot b b text and
if i was to replace the environment
variable in the calling script to
include the current working directory
and then one directory down this case am
then I'm going to be repositioning the
current directory down into that
directory and in my when do the LS HR i
get a text maybe dot X so CD is not a
system command it's usually built into
the scripting environment you're using
bash it's built into bash it's built
into t TCH or whatever you're using for
your scripting so equivalently in that's
one this is what you would do
there's been a request that came through
and most of you know if you send
anything that NASA weren't dev or send
anything to anyone of us and you run
into some problems we're usually pretty
quick about responding with some kind of
solution so we had a request come
through that people were saying that oh
sorry I've definitely had my cell phone
this back up the sucker body put
handling first the second argument on
exec is the input string so you passed
in any string that gets passed in
through to this be the input for the
things is being executed if you want the
empty string pass through or empty pass
through then you just use the empty
string and if the command requires input
and you don't pass in anything or
undefined then it will hang so you
should watch it for that ok so now on
tears so if we were to execute something
like Java Sea and giving it give it a
file that doesn't exist my java then
we've printed the exit code we find that
its values too so it failed that should
do the jealousy if we were to look at
the error message we would see the error
message so what we've added in jdk 9 is
this flag on the on the function itself
it says throw on air if you said throw
an error to true and you do the same
thing it will raise the rate range air
to indicate that an error occurred so I
think people want to program the style
that they could just have a whole bunch
of things to execute
and then if somethin failed to break out
instead of having to check the air flake
so that's that was there added
finally the next thing we've added in
jdk 9 has approved handling of arguments
so spaces are handled more appropriately
so if you quote something if you use
backslash space that's all handled
properly if you pass it as the first
argument to exec but it is also the
possibility out of passing the arguments
as a stringed argument to third argument
to dollar sign exec and that will pass
the arguments as is as is through to the
process
security
nobody worries about security
people are really getting into the whole
notion of writing back ends or servers
using NASA learn or components of that
sort and of course if you have a server
than security is important to you so
first thing I should point out is that
nests Lauren does not introduce any new
vulnerabilities it's built up on top of
Java's security model if you want to
turn on the security manager you can do
so and if you wanted to find a policy
you can do that that's not very
JavaScript e so we've tried to simplify
that as well by providing a couple of
options for you so the something that
was shipped with an S torrent really is
this no java option so if you use desh
desh no java as an option to the nest or
an engine it will not allow you to call
any of the built-in java environment you
can't get at javi can't get into java x
FX you can't get anything okay so that
provides a level of security for you
there was also a request because it
existed in rhino I believe at some point
the idea of class filtering and I'll
give some examples of that so you can
actually filter out which classes you
might want to ask let them have access
to Java but there's certain classes you
don't want them have access to or
there's only certain classes you want
them to have access to or maybe you only
want them to have access to classes that
you provide it maybe someday be database
classes
so to test out the security manager all
you have to do is pass the security
manager flag through to Java so if
you're using jjs you have to actually
use the dash J which means past the
argument through to to java and then use
the dash di Java security manager the
past that through on through to to java
so if you try to do anything that
requires any kind of security privilege
then you're going to end up with some
kind of exception so as a simple example
if you were to have a script come up to
your server let's say if you're doing an
oj s type thing and your script came up
and had a quit in it you wouldn't want
it to crash your server so in this case
it won't throw an exception okay so that
that's just the sort of basic notion if
you specify know Java again you try to
access Java javafx the packages global
they're just not going to be there for
you they cannot do anything with them
and finally I have an example here using
class filtering it's on two pages here
so the first of all just going to do set
up the scenario so what we need to do is
we need to be able to create an engine
and then we want to be able to pass a
class filter to that engine
and we need to be able to extend that
class filter to override what it does
that's what we're doing in this second
second slide we create a new we create a
new factory we're sorry we take the
factory we create a new engine and we
pass it an extended class filter and in
that extended class filter what we've
done we've overwritten the exposed to
scripps function or method and what that
does is returns true or false if we want
to accept the class is being passed
through so in this case we don't want
java.util.arraylist to be to work in the
script that's currently executing in
that engine then we could basically
return false if that name comes through
so once that engine is set up when we
pass it and do an eval and then we try
to to instantiate something that has a
rate list in it then we're going to get
a class I thought because we basically
said that we don't have to come through
okay so the last topic I want to talk
about today is jjs as a triple if
anybody gone to the J she'll talk I
don't know if it's happened yet yes okay
so there's been quite a bit of work
talking in recent times on GT cana and
related to IO and how frustrating it is
that when you're using jjs and you're
typing in something and then you just
want to go back and change something at
the beginning then you start getting all
these crazy characters showing up on the
screen all the control characters
because it's not doing any standard UNIX
fighting so what we've done in jdk 9 is
replaced the interactive input to jjs to
use j line 2 and what that does is
allows you to use unix red line control
keys so for instance you can use back
arrows and forward arrows you can use
control back arrow forward arrow to skip
over words you also have the ability to
go through command history so you can
scroll back to commands that you've
already you've already executed and it
also gives you the ability to do tab
completion the details of j line two are
available at this link and the details
of which control keys are accepted
standards control keys that are accepted
are available in the second link
and at this point what I want to do is
I'm going to switch to a demo nice to
show you how this works and stop here
right like this
and
okay so what I'm going to do is I'm
going to start jjs session in scripting
mode because you I don't know why we
don't have it on by default but it just
to make sure that people aren't using
NASA one features that are not standard
JavaScript
okay so then I come up with the
JavaScript prompt so if I was to type in
something like a VAR a equals 10 and
then I realized that I didn't want a I
want to be then I can back arrow and in
the past it would come up with you know
brackets whatever to indicate so then i
can delete that and replace it with B
and hit return and then I also want to
oh no maybe that wasn't right okay so if
i use up arrow then i can scroll back
through my history and then I say okay I
want to change it to 20 okay so so using
the standard characters are sorry
control characters you can go through
your figures input and also through your
history is also a new command is
available called history which will
actually show the history that you've
you've set up and you can again scroll
back or disability if you go through the
description of all of these different
levels of say for instance I can do a
reverse search and I want to go back to
the print so then that allows me to
scroll back to the print so that's all
built in see he's not defined
you also have the ability to do line
continuation whoops equals 10 plus and
in return ok so then simplifies things
so for instance if you want to input a
function it's a lot easier to do that so
you can just say function X whoops sorry
function X and then upper bracket and
then just bring this hello back
see that that's why it's so important to
have this feature right so okay so then
that's completed my my function X and
then I can execute my xq my
function X this feature was put in for
me because I'm such a sloppy typer
experience huh so let's show some of the
auto completion features so I want to
get the one of the nice things about JJ
asses that you can test our Java some of
the built in Java classes without having
to write a whole java program you just
sort of sit down and say okay I want to
work with java
arraylist utility list so I could just I
can get the class if I print the class
oops oops uncle Buck's right back that
back and put it in ok this is my ray
class so if i wanted to see do the same
thing again but what i want to do is
this i've been part of this that the
statements I'd do the same thing if the
tab key then what will happen is we'll
come up with a list of all the java
classes that begin with this pattern ok
or if i was to have a java object of
stove object let's create an object and
the say at all 10 zebra
to the
okay now take an X dot a the tab
completion we fill it out for me okay so
simplifies to provide the input
and then finally I think what we'll do
is we'll edit history so there's a
built-in function called edit it's done
nominally useful but it's will probably
expand upon this and make it a little
bit more useful but if you did any
string then it will dis convert the
string or feed feed it any value to
convert it to a string and then once
you've done that hopefully it should
come up with a little dialogue in this
case it's come up with a dialogue with
the history and I can edit the edit the
dialogue content of dialogue and I can
accept it as input so I can basically
take them to function as an example and
edit the function as a whole and then
have it accepted so it makes a lot
easier to work with GTS is an
interactive tool
ok
so um let's get back here
I guess that's basically all I had to
say in this particular talk I was going
to put it q and a slide in at the end
but I didn't because I thought I'd
probably burned at the time but I'll
open it up for two or three questions if
anybody has any questions
yes
well
from Java
yes yeah that's what that's what the
context is about you can actually
redirect all the i/o from from the
context you provide a different reader
or a different writer for that context
yes
optimizations right I think we sort of
we sort of punted on that a little bit
so if you're using debugging features in
San appease whatever I believe if you
have debugging enabled or or its invoked
by that that means it turns off some of
those optimizations so that you don't
see the dirty bits are going on in the
background so so the thing is that what
could what would happen and some of
those circumstances I have to think of
it a little bit so you're so you're
thinking in terms of like while I'm
executing quite quite well but all of a
sudden I have a problem you know how do
I deal with with those with that bits
and it's caused by optimistic typing I'm
not sure where we are with that that
kind of situation because I haven't done
any testing myself but the thing is that
we didn't want people walking through
you know code that was hard to debug so
right okay yes cooking the parsing api
for midstream subway arson la da sto
pass it on
the there's foundations for that I think
we we probably could move it forward a
little bit further make a little bit
easier but foundations for that would be
that you have the ast and then you have
to to write a pretty printer of sorts to
create the JavaScript and we don't have
the pretty printer available yet but it
shouldn't be that hard to do so and I
wouldn't be surprised if somebody
already hasn't done a pretty print based
on the AST stuff so then then you could
add then we need the ability to add
notes to and that's currently not
present either but that's that gives you
the foundation for some of them yeah
because I think the thing is a lot of
people what they wanted to be able to do
is to say an insert profiling code or
some kind of analytics and we currently
don't have anything to do that the main
customer we had for the API and why it
was sort of that pushed was for netbeans
good netbeans uses nasa lawrence parser
for its api for the ide right
what I had in mind something
rice right yeah
we'll never say never
yeah that's the other thing I should
pointed to is that we've had a lot of
people participating in NASCAR and over
over time but as users and I think the
thing is that I want now that I have a
room full of you that are presumably
more advanced users of network it is
open source and if you want to
contribute we appreciate the
contributions from you and I'm a lot of
the good stuff that we do have have been
either initiated by ideas from you or
some people have actually submitted code
that eventually managed to get its way
into nice work son okay one more
question and I wanted time I think yes
all you have to do is follow twitter or
stack overflow or github and just do
Nass weren't searches and you'll find it
a lot of different places one of our
biggest champions is a benjamin winter
he's doing the reaction stuff and
there's some guys internally like I'm
trying to think was his name that he has
a talk going on I'm sorry it's letting
the day he has a talk on embedding
javascript in the database that's really
cool some of the things that you can do
with that even people are using the
avatar Jas we don't have anybody really
supporting it now it's sort of in a
state of hold right now but people are
using it fernan ojs implementation so
it's all over the board you know I think
the thing is that wherever you have a
situation where you need soft
programming mass horan seems like a
really good cat candidate because it
gets it's all part of the JDK and it's
already sitting there why not take
advantage of it ok with that thank you
very much</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>