<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Android and iOS Development with Java EE 7 | Coder Coacher - Coaching Coders</title><meta content="Android and iOS Development with Java EE 7 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Developers/">Oracle Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Android and iOS Development with Java EE 7</b></h2><h5 class="post__date">2015-06-05</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/ytugdR-EuLE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">due to technical difficulties a portion
of this presentation was not recorded we
are joining the program already in
progress support html5 and browsing and
then so we are you're good to go on that
so the the development cost and the
maintenance cost is much lower but as I
mentioned earlier you don't have access
to all the device capabilities for
example if you want to access the
accelerometer on your device you cannot
do that from html5 and html5 is evolving
things may change in the future but the
way it stands right now you can get
there and then with the hybrid model it
so now you could have one code base that
targets a different platforms and you
could also leverage the native
capability but the downside there is
there is a the hybrid platform is there
in the middle because of that so there's
gonna be some performance involved with
it and then at the end of the day
practically from workman from our
experience even though you're doing
hybrid application you still need is
developers you still need Android
developers in your team to effectively
deliver this application just going back
to the previous slide come in in terms
of hybrid application I mean PhoneGap is
the most widely used hybrid framework
right now and there are a couple of
other products like IBM worklight and
arrow gear that has actually built on
the phone gap engine in addition to that
Oracle actually has a framework also
eightieth mobile framework and it lets
you develop application using fully
completely with java and html5 and CSS
javascript so you don't have to worry
about anything else so if you are
already heavily invested in the Oracle
technology and the ADF model this is
definitely something you want to take a
look at so that's the whole way on the
development methodology itself then for
this particular session as Reza
mentioned we will be concentrating on
the connectivity between client
applications both mobile Android and iOS
application to the je servers and so the
reason we chose the native model is
because that's likely
you're doing today but it could
nominally that's what the development is
done that's right right yeah at some of
the larger clients tend to go for the
hybrid model but to the most part your
native applications of the they buy part
there are more applications generally so
in this particular one so we are
covering two different integration
technologies the first one is the
restful web services I mean as probably
you've heard from the other sessions the
rest has been gaining steam strategy
over the last few years and the one of
this biggest strengths is it's built
based on the existing HTTP protocol so
none of the your infrastructure have to
change all of that works it's of course
the common HTTP works like port post
delete and update the one of the
advantages of rest is it's completely
stateless it's lightweight so it's very
scalable it's couldn't handle massive
loads of data with very little effort
and typically press can't handle both
JSON and XML or any other custom data
format but more often than not JSON is
they used je specification and the
GlassFish server JBoss or the service
completely support as well
then the the next one we were going to
cover as they read sockets this is this
is new and it's a new protocol just like
rest this is also based on HTTP one of
the biggest difference between rest on
this one I mean with traditional HTTP
request/response model you send a
request you get a response with Ajax you
could do a little bit differently but
overall it's still a request and a
response the client has to information
and then the server sends it back with
WebSockets
it actually offers full bi-directional
full duplex bi-directional connectivity
so the very first request is a HTTP
request then in the HTTP request
HTTP since HTTP one one there's a header
that's called HTTP upgrade header that's
being supported you could use this
header to say you connect initially to
HTTP but then upgrade the protocol from
HH
do something else not of custom
propriety products do use that some
products you use that they've been using
for a while but WebSockets the first one
to use that in a big way that we are
saying right now so what happens is the
first connection happens in HTTP as part
of the handshake it issues a upgrade
header saying update the product to web
socket and the je server or any other
server on the other side if they say oh
you want to upgrade the protocol from
HTTP to WebSocket ok let's talk it is
something I handle then the virtual
assistant after that that connection
actually stays open forever for the life
of that application in the connection to
the server
so web socket has built-in ping
mechanisms so it could even keep the
sockets open once that's done then the
client and the server could send back
and forth data at any point so there's
no request response anybody could send
data back and forth at any point so this
makes WebSockets very perfect for
applications like chat or gaming
applications it is it's very very low
lag it's super performance so and the
again the advantage with this one is
because it's piggybacks on HTTP so your
proxy servers your firewall rules your
web servers
none of that have to change all of that
would support WebSocket as long as the
server has the WebSockets capability all
right quit ball guys how many people
here are mobile developers today ok and
how many of you are iOS developers and
how many are Android developers Wow good
even so I don't underestimate the
WebSocket partner right so the stuff
will be showing you if the rest stuff is
probably not that new to you on the
mobile side the WebSocket stuff will be
scratching the surface as to what the
capabilities are you know people are
talking about unifying
yes a Gartner has projected in the next
couple of years simply 70 percent of
enterprise applications would be gay me
fight so there will be some kind of a
gaming feature to even enterprise
applications so if that's a case
WebSocket probably is going to play a
bigger role okay so the Java EE part of
course is is a primary focus of our talk
today so you can think about a Java EE a
sort of a headless server that you know
back in there the similar to what we had
back in the whole client-server days so
it's just a server that has a whole
bunch of back incapable T's and it talks
to all these random mobile devices
doesn't really care so much about what
that particular device implementation is
all it really cares about is that it it
is talking to a given API a well-known
API to each of these devices so the
fundamental protocols as we talked about
today in mobile devices are rest and and
WebSocket right so the protocol layer at
the boundary layer what Java EE is going
to be talking to these devices is VR
jax-rs
which I'll give you you know will show
in the code base and I'll give you sort
of a quick tour of it five minute tour
of it and the Java API for WebSocket
okay so other than that that's just the
protocol layer right that's your that's
what what you're gonna write that and
your end code to say this is how my API
looks like but beyond that you know all
you have the rest of the risk if movies
of the Java even that from so you have
stuff like you know stuff for JSON
processing stuff for XML processing
stuff to do declarative bean validation
you know each IVs for transactions and
any kind of other services that you want
CDI for dependency injection GPA for
persistence JMS for messaging I pretty
much anything else akin to that you can
imagine you own the Java EE platform
other than like just simple servlets and
jsps and and gsm the like so in our demo
code we I don't know how much will we
all get through today but it is on
github you can take a look at it it's
basically using 80% of Java EE
capabilities other than the stuff on the
web here and I'll show you some
the coat there okay so just briefly
walking through jax-rs is the rest
development API for Java it's the
standard API unit in Java EE it is by
far the most popular development model
for doing rest based developments it's
not just a du jour standard it is
actually a defect de facto standard as
well there is both a server and a
client-side API okay so today we will be
showing you the server-side API that's
in included in jax-ur as we won't be
showing you the client-side API but we
will be talking to it so there's some
interesting things you can export there
that we didn't have time to touch upon
but we definitely want to mention it to
you just like everything else Java is
just a set of annotations okay so
there's a whole bunch of annotations
that you just put on your colleges and
you automatically get the container
services and we'll take a look at how
that looks like in the code examples and
also also show you a sort of a very info
1 1 - - example as well so Jack service
is extremely pluggable and extensible so
it's got a cognitive ecosystems around
it it's not just a standard it's all the
all the stuff that builds upon the
standard as well so here's an example of
Jack's arrest ok so if you want to
publish something out there you are oh
you annotated with that path and say ok
I want to publish her to this URL you
can specify parameters if you like and
then you simply map the HTTP verbs that
you want to support onto your Java
object so in this case you can access
the method balance via get under the
path balance and you can specify what
you are outputting and what you what
input you expect so in this case I'm
saying I produce output text sticks
first name will see other of the
Canadian progress as low as we go
through the actual examples again you
can process you know query parameters
parameters matrix variables header
values all that stuff is a very
declarative fashion you don't write a
single line of HTTP low-level HTTP code
it's all done for you by the bit there
ok some other examples in this case I
come to the drama I hear from slash
withdraw you are
in this case I am specifying it for uses
of consumers
so I consume a text left lane and I
produce application institutional and
JSON and guess what this all all you
gotta do right all of the rest of the
work is done by the experts for you okay
job API for what socket again same thing
basically a very high-level declarative
API for for doing rough socketable of
list just because you're doing
WebSockets doesn't mean you got a like
crazy iota IO level code that looks like
you're back in 1990 okay it is 2013 and
this is a declarative API that you that
takes away all the all of the
boilerplate code from you so again both
the client to the server side will be
demonstrating the server side today the
client side is definitely valuable for
mobile development as well and we'll be
talking to that again instead of
annotations again to be extensible so in
order to publish a web socket and mind
you simply annotate to provision with
several might specify what URL you want
to talk to you and then you have a set
of all attributes that are rotated the
annotations principally there's four
other one open and closed on error and
on message right so when a connection
when you get in you WebSocket connection
on and when you get on open when it
closes you get on close and when you get
a message on a connection you get the
one message callback and that's all you
gotta do again everything else is done
for you civilization this relational
data conversion and the like right all
right that's all I got to talk about and
then I ended up handing it over to Ryan
for the iOS part great so the next
couple of slides
although this is a JavaOne conference
we're gonna be diving into objective-c
probably given that I'm an Apple Apple
Pam is not the only language you need to
know if you're developing
so iOS provides built-in support for
both rest and JSON in terms of the MS
URL class which I'll be covering the
next couple of slides along with support
for JSON from nsdictionary familiar with
that class the functionality can be
augmented with an external library
called rest kit which is an open source
project with the under the Apache
License I'll be demoing that code the
code sample that's up in github right
now actually uses both approaches for
some of the calls I use rest kit for
some of the other calls I use the one
that's provided by Apple interchangeably
with no effect on the application
currently or at least as of iOS says
there is no built-in support for
WebSocket yet however there is a good a
good external application of good
external library that you can add into
your project called socket rocket it's
under the Apache License it's out there
on github you can suck it down and
copied into your project for both for
both of these technologies SSL support
has provided for both what rest and
WebSocket however in the code samples
that I'll be showing today I'm not
actually using SSL although I tried to
Apple prohibit basically blocks the if
you try to connect to an SSO server
those running SSL that doesn't have a
valid certificate that refuses the
connection there are ways of
circumventing that however you try to
submit to the Apple App Store they will
reject it just visit enter there so the
first one I'm going to cover is rest kit
which is an open-source package that
augments what apple provides it augments
a couple of important areas first it has
poor data support if your Apple
developer
we familiar with a whore day and how
that how that can be useful
it also supports object mapping and with
object mapping it makes it easy to go
from the JSON result that you get back
so you can take JSON output and will
convert it into an objective-c class for
you much like what Reza's codes what rez
will be showing with the Java site so in
the Java side you can serialize objects
out using the new JSON support you can
serialize objects out to JSON and then
on the iOS platform using reskin you can
take those objects and convert it into
objective-c classes of course there are
some caveats when it comes to data types
and encoding that you have to be aware
of mariska also includes a pluggable
courser parser which you can swap in and
out as well as support for mime types
multi-part submissions and a bunch of
other things so it's fairly
straightforward to use
so the first simpler code I'm going to
show you this is Objective C code and
although it looks a little busy the one
thing to remember when you're looking at
objective-c code is that the parameters
to a method always include basically a
label so you never look at a method and
not know you know what what the
parameter is so the first two lines are
basically just configuring resk it and
setting that are setting the logging to
trace so I connect debug we can more
easily debug the application then I set
up the base URL which I'm going to be
connecting to that it's actually a
constant that I'd find in another header
file that says you know that has the IP
address and the server name for it and
then I said that the this client was
going to be handling JSON data by
default in there's ways of overriding
that if you're doing a specific call for
XML I should point out that it does
there is support for XML in there but
generally giving bandwidth
considerations you want to go JSON
because there's less overhead to parse
it there's less it takes less time to
send it and there's less overhead for
parsing it and on a mobile device the
more time it takes to parse something
the more battery life you're using up on
the end user and generally they don't
like that on the next slide although
this looks a little scary this is
actually fairly straightforward we're
setting up basically an object manager
which is going to handle serialization
and deserialization of the js
so I'm instantiating instantiating
they're giving it a point to the to the
to the client and then the next couple
lines I'm actually setting up the
mappings so where I say to do I the
mapping about the fourth line down
that's where I map the ID I go ID and
JSON - you know ID in the objective-c
class and that's that's a little thing
there with the reason why it's my ID and
the objective-c class is because ID is a
you know ID I'm IO s is the object ID
and then I set up the relationship
napping free enough for the URL etc and
then at the end it's all set me I don't
have to stuff for handling the
descriptor and then this next slide here
I'm actually invoking the restful web
service and this is actually basically
using what will be getting a Java 8 with
lambda we're using basically I'm passing
in a method that there's two things that
can happen when I call this this
connection the first one is that if it's
successful if you see the success with a
little colon after that's the logic that
will run if the call is successful and
that is run on the separate thread so
I'm always invoking stuff on a separate
thread so I never blocked the client and
then it calls and the method because I'm
passing a method into it it calls a
method with the results of the call so
there's one of two things is gonna
happen either stomach all the success
method or it's gonna call the failure
method in the case of the failure method
I then go off and display a UI alert on
the current thread you know having
blocked the UI before this fault and
then if it's successful it continues on
with the code kick off the transition on
this slides a little unnoticed is a
little hard to read this slide is
actually using the Apple approach using
the nsurl directly and it's actually I'm
actually setting up to do basic
authorization within click encoding the
password in basics before etc so that's
what the first block of you know block
of code is actually doing and then you
can see if you see down there in the
post and read that's where I'm sorry I'm
going to post I kick it off and once
again I'm passing in a method so that
using another thread and doesn't block
the UI the socket rocket I'm not going
to dive into the WebSocket support so
this is an open source library mentioned
before under the Apache License it has
actually got a very comprehensive
regression students an example take an
excellent example of a project that
brought Objective C project using unit
tests it does support secure web sockets
in terms of getting a call backs all you
have to do is implement a proxy SR
WebSocket delegate you basically provide
it with a delegate that has callbacks on
it you know from when you receive a
message when a connection is open except
Ora and it's got fairly simple project
integration you can either include their
project in your Xcode project or take
the copy of the sources so the major
callbacks that where the callbacks that
provides one is the message one this so
the WebSocket message every time there's
a message that comes back you're going
to get this method is going to get
invoked and you're gonna be told about
the message and then go about processing
and however you want the message could
be JSON data it could be binary data it
just it could be just about anything and
then we have the socket open connection
failed etc and then to open up a web
socket so this is actually from the this
is the line of code that's required to
open up the connection to the web
sockets I set the delegate as my as
myself in the class that's actually
calling this implements that interface
or that proxy and then I called web
socket open to actually open the
connection to close the connection when
the view disappears so when we go and we
demo the application citizens chat
application when we go back I'm gonna
actually you know close the the closer
connection so I don't need connections
and have us to have the app receiving
connection as well I'm not process with
idle hands it over to follow for the
Android
so there are main three main things we
are doing this applications the first
one is establishing an S connection the
second one is let's get the JSON data
back and parse it and the third one is
making your WebSockets keynesian so this
is just a whole way of what's available
out of the box from Android and what are
the third-party libraries that I'm using
I've used for this particular demo so
Android does come with apache httpclient
so if you want you could actually use
that doing the rest on top of it is also
fairly simple but for this particular
demo I used the springs Springs Android
library specifically it has a rest
template in it that's what I've used
it's very very easy to set up I'll show
the code in a bed and for that for both
HTTP and the rest support there are some
few other rest libraries as well rest
roy there was there was another one i
came across and the third one is jax-rs
itself has a Jersey client which could
possibly be used to make the connection
connectivity as well but there's a
question mark there because it's not
something I've done done before but
theoretically it's possible for as I'll
probably would talk a bit more about
that later as I said if you guys have
been to any of the jax-ur it's two
sessions one of the main things that
were included in Jack's first two was a
client-side API and of course these are
all Java at the eyes right so as we all
know Android isn't quite Java so we've
already had a crazy enough demo so we
didn't want to make things even worse by
trying to hack and hack this and
practice Jersey Jack source client
libraries on on Android but we could try
to do it as might work that's what we're
going to do
dr. right after this damn was inverted
see how that works and reported back to
the jacks first guys I actually created
a support in a couple of years ago
Dalton hey why don't you guys just out
you're you're kinda dexterous you're
Zeke my deity eyes on Android and figure
out how that works but anyway that's
another and something if you want it
take our code and start hacking at it
that's probably the first thing you can
take it and see how that works out and
let us and you guys know - so the other
librarian that I've used is forgiven we
get the data back from the server it
comes in JSON we have to see like I mean
we have to convert that from JSON to the
Android objects so this particular case
I'm using the Jackson library for that
there are quite a few again adjacent
parsing libraries out there Jackson is
one of the most widely used it's
actually performs benchmarks are really
good on that in terms of seal amazing in
DC Royce and Jason there's Google has a
library to JSON and I mean you could use
that as well so incidentally Springs
Press template comes with the adapters
for both Jackson and Jason so it would
be very easy to use whichever one you
want to use so if you use if you do get
if we can get the textures do
descriptive work dextrous yours the
internet support for Jackson Jason as
well as
Moxie so if you're familiar with Moxie
it basically takes two jacks the
annotations and make some work with JSON
and you can also use JSON P which is a
new standard added you know as part of a
ISA offer you some JSON peak of it super
simple avi and then the atlast library
for it was for web sockets for web
sockets again as i said it's really it's
it's fairly new protocol so the support
is not much there at all Android
definitely does not have a built in set
web sockets a problem and I after
searching quite a bit there are two
libraries I came across one was from
Audubon's Android WebSockets library the
other one was from code Butler's
of WebSockets so I tried and our one
seemed to be had a little bit more
documentation and support that's what
I'm using right now the one thing
downside to that is Oregon does not do
secure WebSockets it only does that w is
not the WSS protocol not yet but they're
working on it
hopefully should be out soon you know
and again the WebSocket M standard is
not just a server-side scientist but a
client-side API with the tyrus reference
implementation as well again not sure
we're not sure if it works on Android
yet but it's worth it right and we're
gonna give it a try and again I've
already checked the virus guys working
with them and we're gonna see if we can
hack it together if we can get just
until the main why did you declare
official support for Android and this is
the code snippet is further establishing
the creating the rest and greater than
making the call it's very
straightforward you create the rest
template and then when you when you send
data when you get data back obviously it
needs to be converted back and forth
between Jason and whatever your local
domain object is and for that you need
to register a converter so the first
line what it says is for the ris
template Goverdhan add a converter that
know that there's a mapping Jex jackson
HTTP message can convert it so this is
the Jackson library I was saying earlier
I'm using the way I'm using it is is
simply saying this use this converter
when you get Jason to use this converter
converter to the java objects and then
the second one is this another one is it
saying the type of thing for the string
objects use this particular string
converter to convert Jason to string and
the last line is it's basically that's
the main call that makes the rest of all
it says template dot exchange the first
parameter is a URL string the second one
is the HTTP or whether it's supposed to
get and then the third one is the actual
age HTTP entity object that has two
things the actual domain data that
you're gonna stain which is the tool
item in this particular example and it
also that's where you specify the HTTP
headers and and last parameter is they -
the response to our class this is where
we are telling use the convertor that we
specified earlier whatever JSON you give
back
that into this class and they returned
that to me and that class goes with the
responsibility and so we just say in
response to a care entity you would get
the domain objects so we don't have to
do anything it's very very fairly
straightforward so whatever you're doing
an Android application with your objects
just these four lines of code should get
you to access address call and get the
response to Java objects this is - this
is in this previous one there was one
thing that's showed in the newest HTTP
he takes two things like the actual
derivative check that it's going to send
and also the HTTP headers and this this
one just shows what the HTTP headers are
and for this particular example as I
mentioned earlier we are using HTTP
basic authentication so all I'm doing is
creating an authentication header said
the username password and said that in
the headers Senate Senate and note on
HTTP basic authentication I mean it
because it's the username and password
has to be sent with every single request
it is actually one of the easiest way to
build a true restful service because
it's completely stateless you send the
password authentication information
every single time so the service is
completely stateless there's no token
there's no cookie or anything you have
to worry about and this is the code
snippet for the androids and the
Ottomans WebSocket client itself again
you create a WebSocket connection and
then the next the matrix you see it's
actually it goes if all of this code
goes inside an Android activity and I'll
show the full example of this but so
inside the activity then you just leave
the connection and you say connection
dot connect and then give it an
anonymous inner class that that's in
handler class it's got three methods the
callback methods so they're all open is
the one that gets called once the
connection is established so all I'm
doing in this body this is simple echo
echo blind so connection dot scent
message is a hollow ball and then that
message goes to the server site and that
the server it chooses to send a response
back anytime you get a responsive
blackboard WebSockets the on text
message method would be involved and
then all I get is simply get the payload
and then and this and it's really that
simple and this little bit more that
goes on in terms of how do you take this
code and then make sure you send data to
your activity you're abused and Android
text box instructor I'll show the full
example the next let me go to the demo
part and so we are using like I said we
are using HTTP basic authentication
which is great again when you do basic
authentication the password is it's only
URL encoded it's not encrypted so right
so anybody could look at your password
with features to our basic
authentication over HTTP so if you're
doing our basic authentication
you must use SSL HTTPS to always do that
and so with Android Android comes out of
the box with like hundreds of existing
well-known certificate authority
certificates so you don't have to do
anything if you get certificate from an
established one just change the protocol
from HTTP HTTPS we should be you should
be good to go but if if you're like a
lot of other the projects that I've
worked on before when you're doing
development you don't necessarily always
work with established well-known
certificate authorities more often than
not we use self signed SSL certs if you
go that wrong you could do that in
Android as well you can make that work
but like the steps indicate there it's
kind of tedious I know if I have half
the time I will show the code behind
this but at high level what this is is
if you want to use self-signed
certificates
export the cert from your server key
store and in Android you have this
concept called assets right in the
Android assets you could save the file
in the S an asset pair read the
certificate file you have to create a
certificate factory and then create a
trust manager and then create the SSL
context with this trust manager so if
you set it up set up that way then HTTP
were
even if you have a self-censored that's
not from my established body so like I
said this is very very useful it was
very tedious for us to okay for me to
get this working but once you get this
going though it's very helpful within
the development environment all right
yeah so before we start the demo whether
demo works or not you can't fight you
can't find all the code on github
alright so this is just it's not the job
I used have it's got the Android stuff
is it's got the iOS stuff it's all out
there on the network so this slide dick
is actually up on SlideShare already
okay so you can go download it so
slideshare.net slash Reza underscore
Iran so you can go to you the dead right
now after this talk you don't even have
to wait for the job when nice to catch
up
all right so let's go for the demo let's
see what happens so I've got NetBeans up
and running last wishes up and running
at this point in time we'll show you the
code a little later just to give you a
brief feel for the API this is how the
abstract with the REST API cube so I'm
using possible to do my testing
basically it's we're supporting the four
verbs yet post and head and get positive
Layton and put it so for crowd
operations at update delete and modify
so I'll do a get this is really I'm
doing it against my particular account
which is all Ramon so I'll do a send on
that and oh tell me I don't have any
accounts which is perfectly fine I go
back to the server side I just got a get
request here select ID completed okay
yesterday
all right listen crystal font size here
teacher
and some colors we're gonna lease it to
24 all right I don't know if that really
effects of their code that code up here
but basically a GlassFish server
received the rest request alright so
we'll try the WebSocket part as well so
I'll say hi Java 1 and I've got some
other stuff running already I'll
actually close this and clear this and
reopen the connection and also in my new
question
and basically I've ice the red is stuff
that I just sent out let me see if I can
actually increase upon this way ctrl +
right right so I just sent my my message
out and then the message was echoed back
and I actually broadcast to all of the
rest of the clients we go back in the
server side see if I can make that
happen but basically I've broadcast a
message out to all of my connected
clients which I have three key little
connected parts of this moment my
postman client they are the iOS device
and the end and the Android device
alright so with that said let me switch
over to Quran if that's ok yeah iOS demo
ok terrific so I'm gonna give you a
quick tour of the application before I
show it it's actually when you download
the project it is an Xcode 5 project I
did do it using storyboards so you can
actually see the flow between the
screens each screen has a view control
or associated with it so as you can see
we have a login screen that goes to the
main assistant screen which you can
either go via JavaOne chatter or go see
the session - dues if you go to the
chatter go to the chatter screen you'll
have basically a simple chat window
where you can send out messages and all
the participants although all the
connected users get the message and then
the final yet to do UI so with that I'm
going to quickly I'm going to run the
application so you can actually see it
in action
so this is the application running an
EMI emulator yep so I'm gonna send a
message as soon as he logs in it so I'm
gonna log in well it's as soon as I get
on that panel when I click on Java one
chatter it's gonna switch to that view
and therefore as it would send a message
I should receive it
yep I'll send it right now so there we
go
and I'll send a message back to Reza
yep and I see it so that's that's this
this example here is using WebSockets
when I click the back button I'm going
to disconnect from the WebSocket 20
messages that Reza would send they would
not actually receive I'm gonna click
back and the next thing I'm gonna go to
is to seduce and in the example
application we actually do all of the
restful operation so we cover put delete
post and put input I think everything
except for like trace and a couple of
the other head yep we did not use those
so the first thing I'm going to do is
I'm going to scroll down to the bottom
I'm gonna click Add try to click Add let
me take the up there we go consul now
that's not you're all good here yeah
okay
okay so we're gonna add I know to do
click Add
there we go oops I added it twice that's
something that I should probably fix in
the demo so if you click the button
twice before it finishes it doesn't send
it twice let me actually delete one of
those delete them there we go I can
click on this and that will actually
retrieve it back and so I can actually
see its contents I can update it and
Oklahoma
update and i evently have a book so I
guess with the rest board that is what
you get when you upgrade your your
development environment three days
before the demo to Xcode five when I
grabbed iOS seven those why things look
a little different than some text cutoff
is because I didn't upgrade and then
launch the demo and realize what I had
done I'm sorry it's that session to do
is I can you know check things off as
being done omit cetera that is the code
that is the one difference between Java
and objective-c I get a core dump on the
thing fails as opposed to a stack trace
I'll have to go figure out what I did
wrong already I'm mr. picker server
bunch of stuff that he was doing okay so
in terms of the code when you download
when you download the project I've
actually included resk it as a
externally linked project so you'll have
to check out rest kit separately because
that's the separate open source project
and then set up the path to point to it
the with regarding the socket rocket
I've actually included socket rocket in
the project so I've copied the sources
into it you could actually do the same
thing for rest kid I just was trying to
demonstrate both of them depending upon
what your preferences each of the views
are labeled in the UI so you can
actually open up the views and see the
code with them I'm using postback so you
can see the okay there's several
different classes I created basically an
asynchronous tasks class to wrap things
most of the objects that you see over on
the server side have analogs in the
client side so here is my to do class
and as you can see I've got sorry that's
the to-do client so I have I wrapped up
all the operations going against the
server in one class it was all
centralized so it's basically a static
equivalent of in Java of a static
singleton
so the to-do client is
that has all of the restful calls out to
the server and if I switch over to the
implementation class you can see the
block of code that you saw earlier for
initializing it logging in you know
adding an item so you can see me you
know putting together the basic
authorization etc updating an item and
actually this code could be a little bit
simpler I did not
you know factor things out into separate
methods to make the code more clean
organs organizationally because usually
when you're grabbing a sample you don't
want to have to untangle what the
developer did you know to make it nice
and compact so everything is you know I
could have created objects and stored
them in yeah I could have created
connection things and stored another
thing but then if you copied the code
out you'd have to disentangle that so
the code is not as fat well factors as
it could be that's just so that you can
copy out a whole in copy out a block of
code that actually puts together a
request and sends it you don't have to
pull out member variables or any of the
rest and then on the WebSockets side and
you have your Chetan
okay sorry yep so that's that's a code
with that and I'll hand it over to Bala
for his part
all right no all right this is the let
me just start the application go better
with me as I type my last name how many
characters is it have you ever counted I
think it's still 26 within the first
last Anderson auto-completion
yeah all right so I'm logged in so this
is a javo on chatter so I'm going to go
so Reza do you want me to send me do you
want to say yes okay so you do something
okay got it again
hey Java one again right I'm sorry
it's the it's very light here so you
can't see it there but it's there yeah
hopefully you could see much no that's
like their respective mine okay you guys
can see what he's doing so he sent me a
message and I sent him this is a miracle
yeah again
all right that's a simple chat
application so now I'm sorry let me get
back
okay so this is so I'm going to add a
to-do item it's a very simple form
jeez containment
all right
all right so that's the to do I just
added and again you could go here
there's an X button at the very top so
we could delete it there or we could
operate you could just mark it as
completed updated and I mean that's a
simple demo Berkeley to do and so just
briefly going into the code itself so in
in Java and serene Android application
you just have to create a libs directory
Li BS directory not Li b li BS directory
and then drop in the jars that you're
going to be using so in this particular
case I have the the Audubon library
Jackson spring Android so just drop it
there you're good to go you could you
should be able to use you may have to
add it to the Eclipse class pad but just
adding it for the application should do
and the first thing obviously when you
are trying to make any sort of
connectivity to the network is you got
to go to the manifest XML file
Android manifest file and then add the
this one it says users permission
internet that's the that's a key thing
you got as that that's a that's that's
when you got to start you're going to
make all the connections tomorrow and as
far as exact what's happening is so I'll
show one example here this is the to do
async activity so one of the things
anytime you make an it for a call you
have to do that in a separate thread in
Android it's not going to let you make
the network call from your main UI
thread so you would get an error so what
I've done is to create an asynchronous
activity
asynchronous task which gets invoke from
an activity and that's where I may
actually make the network also here's
the actual code just make the simple
rest set of the rest context and then in
make the call it's an HTTP POST call
here's the URL and the to-do item is
what I'm actually adding to it and then
if I show the same example to the the
list one this is where I get all the to
do is unlisted and then you could see
the to-do item array here and this is
where Jackson actually takes whatever
JSON comes back populates the to-do item
objects puts it in this array and then
sent gives it back and I response dot
entity and one other thing is wanna show
briefly is the URLs there's a URL
file as well in Android so you could
just add all your URLs there for it to
used application so the if you're
wondering so this is actually the format
for the WebSocket 1ws : / / IP address
port number any questions okay so I'll
say the server-side code real quick I'll
start with the chat since that's super
super simple in this case
so I'll blow up the code here you see
the endpoint server endpoint and I've
got a couple of introduce Japanese idiom
and the chat message will say in
Quadrant II corner whispy translating
from Jake's on to Java and vice versa on
my own open and close on just adding the
appears and removing the peers and an
on-message I'm essentially taking in the
actual Java object the stabilized Java
object tableting it using the add valid
valid tag so all of these constraints
would have declared not now sighs and
what not take effect so these guys
actually send me a wrong message I would
have refused the message right right
there I would have an error message back
and I'm simply running through my peers
and then going back they sent me I've
got some on error message handling here
or honor I'm just taking the exception
and backing mapping it to a JSON object
and sending the JSON object back to
these guys if you look at the chat
message itself both the data folder as
well as a stabilizer at least utilize it
so it implements the decoder text and
decode or included of text interfaces
right so I've got that my data elements
now they are using JSON 330 foundation
and in the code
simply using JSON feed to translate from
Java to JSON and vice-versa and that's
it so you guys can take a look at that
code on the server side I've got a
resource I'll show you the resource the
resources bound to to do slash names
that are in r-rahman or what have you or
whatever the user is passing in and then
I've got a get call a post callback to
create the actual to-do item so taking
parameters of a username and then again
applying some validations using the pin
valuation API it finally in the online
service I'm calling the method to
persist that particular are the object
itself edit and remove are very very
similar I'll show you the service code
real quick so let's go to to do service
navigate to the implementation the
implementation happens to get stateless
session means this transactional it's
also injecting a repository using the
attending CDI annotation and all I'm
doing here is doing some service API for
such setups I'm just massaging the data
to make sure that it makes sense to the
repository before I send it into the
repository and again similarly for the
rest of the rest of the crowd methods if
you open up the repository itself the
repositories is using JPA under the hood
just commenting stuff using the api so
you guys can take a look at all of that
stuff we won't spend a lot of time
talking about it because we didn't want
some Q&amp;amp;A time you any time so let's go
back to the presentation real quick and
well we have a few best practices to
share with you obviously we don't have a
whole bunch of time so we'll try to get
you through it quickly or we can do Q&amp;amp;A
so what do you guys prefer do you want
to do Q&amp;amp;A right now or or best practices
Q&amp;amp;A
no best practices okay right basically
the best practices all right abso res
versus JSON so obviously there's two
different protocols that you can you can
use from the from
plans a great idea risk all websocket
today it's predominantly risk because
that's really what we all that was
available and the rest api makes sense
for if you're writing a traditional UI
that has at all sort of you know crud
days atomic operations when you don't
need to you know maintain a session for
a long period of time like you do for
WebSockets however you do want to use
WebSockets when when the use case
warrants right so when you do need
Ridgemont activity when you do need full
duplex condition when you do need a
system customization between the client
and server however keep in mind the one
nice thing mode rest is rest is far more
scalable it's a stateless protocol
WebSocket is not a statistical it's a
stateful protocol which means it's not
gonna scale up as well as a stateless
protocol ever right so right so the
thing is when you're using WebSockets
agura you you have to be cognizant of
those types right so you have this set
for example in order to not run out of
sockets you you should say I it
shouldn't be a short line but it should
be a long time because your WebSocket at
but there should be a timer and you
should do things like connection
handling and this disconnect happen
like can you in yours in your tonight
sector in the service sector there's not
much you can do all you're doing is
working on a connection and you don't
have a whole bunch of Authority connect
back to that flag because you're your
once they're talking to what a million
million clients you know you got to do
that reconnection happening on the
planet okay so the rest of versus Jay
Sandra's Jason hands out really guys
you know the problem is XM one has
multiple problems to it while they done
to you it's it uses a far more bandwidth
which is gonna use up your clients data
plan and B Network heavy and have all
the associate problems with it
and you just need don't need XML it's
the more strings are a type safety and
rich complex domain models which you
don't generally don't need in this case
were to slow state Bala you wanna you
wanna speak to that yeah sure on the
Android side to the most part store
state first of all state is store
anything that's only absolutely needed
number one and then if it's a sensitive
data try to avoid that but in case if
you have to do what so Android has this
shared preferences mechanism you could
obviously store data there but if it's
sensitive if you store sensitive data
there if the device itself gets
compromised somebody could easily get to
the data they have the Account Manager
functionality so use that and then store
as your any sensitive data there
especially the passwords and stuff so
that is the most secure way to store
data on Android so think about your your
server is sitting in a in a lock fully
secured several this thing is sitting
here I could leave it here today
somebody could hack in
whatever they want either this API
design so when you were designing api's
on on the server-side especially deep
reusable teen line okay don't write
device specific API as you're out you're
on the server side to do not have to
rewrite stuff for each each particular
bus as much as possible try to keep your
api is reusable fine-grained and really
focus on serviceability writing good
service in the eyes that are reusable
from from from the client-side and
relatively coarse grained don't don't
make it very fine right chatter chatter
EAP is either make make them look like
your use cases right so for use case you
should really you should aim for one use
case one one one method call if you if
you can if you can hang it if your
business is from the lower security you
want to talk about that one Bala sure so
as I mentioned earlier if you're using
HTTP basic authentication let's your
services be truly stateless it's
fantastic but make sure it's over HTTPS
then of course you could use federated
the OAuth as well I mean I actually
attended a few sessions myself
it sounds like Oh what to is fairly much
simpler than OAuth 1 to get this going
so if that's a route you want to go it
definitely would make sense there
especially if you have more than two
parties involved like if you have an app
accessing Twitter then or definitely
makes sense to consider in that
situation and then in terms of sensitive
data again as I mentioned earlier try to
avoid to store that if you have to store
it make sure it's fully secured
definitely encrypted before storing it
even if you store it in shared
preferences or account manager if you
could so that way you have one one like
one more layer of protection so if you
don't need federated security you can
use all of the existing HTTP
authentication mechanism that you
already use like digest feel based on
basic authentication from the like and
so there's really no
their development model um speak to that
one sure so we mentioned about the three
models earlier the native versus hybrid
versus mobile web applications the
advantage with nativist like I said it's
very rich client user user experience
it's gonna be really great you'll get
all the latest features that the device
and the OS has to offer but the downside
really is it's it's quite expensive you
you know you have to have an Android
team an iOS team and whatever target
problem that target platform that you
want to target you have to have a team
for each one of that so that means
development costs higher not only that
we I mean we have seen coming from
consulting base there's a very there's a
big shortage of native application
developer developers out there right so
that's a big downside to that as well so
now if you go the HTML the mobile web
application route all of that existing
technology it's great so now I think the
sharp but the way you could do is so if
you have the appetite if you have the
file resources to build to build two
different teams three different teams
and if you have the need to provide the
best-in-class user experience that
leverages all the native features like
accelerometer or some other sensors that
you want native is the way to go but if
you don't have to be on the cutting edge
like that in terms of leveraging the
device capabilities mobile web is a good
place to start
it's it might be okay for a lot of the
deployment another form based web
applications out there especially if you
do a responsive and adaptive web design
it would get you there for a lot of the
basic applications then but then if you
you don't have the money or the
resources to do to set up different
teams but you still want to target wide
range of devices that also leverage
native capability then hybrid is the
model to go I'm actually the last year
or so I've been my personally working on
a hybrid application and some of the
experiences have been not it's great I
mean it does help in the beginning
because know you build one code base but
later down the road you have actually
have too much technical debt in terms of
so many people working on diverse
technology said within the same code
base that has its own challenges as well
so choosing this model is going to be
very very critical in terms of how
you're a successful application is going
to be or the next
as sort of pointless it is to predict
the future of especially in something as
volatile as the mobile space today
you're basically all in the native
development that's the predominant
people are gradually moving towards
hybrid for very good reasons that Paula
already talked about but in the future
we may be looking at just html5 which is
much less painful to deal with in terms
of management and development ok the
last two I lost her point is is for just
a couple of quick points on this so when
it is important first of all to write
test test code for your for your
WebSocket and restful web services you
have to be aware of issues including
encoding data precision data types
between the different platforms because
you are dealing in some cases with
native code write unit tests for all
targeted platforms and I would recommend
starting out with Java if you're writing
the server in Java
write java test cases so that if you are
running into problems with encoding or
anything else with iOS or Android you
have a separate code but you have a
separate you have a set of tests that
you know work so you know whether the
base service works because in developing
this application you know sometimes the
question was was was there a problem
with the the iOS code or was it with the
the code on the Java server side so
those are just two two important
pointers and then the last thing with
the code samples when you download it
both the server and all the clients are
checked in the resident but the the
database code actually uses the embedded
database for a glassfish so they're
really all you have to do for the code
sample is deploy the application to
GlassFish and you'll be up and running
is really relatively minor setup that's
required on any of these code examples
here to get them up and running so you
have a full stack to actually play with
which is something which is sometimes
one of the hardest things with doing
this stuff right so that that is what we
want to accomplish really well the
resources section
however we will will do more right now
there's not a whole lot of a description
so you'll need to do something you're
going to have yourself you know after
the session is over
we'll put in sort of like more beef up
the wheat means more so that you do know
how to get things started
if you know nothing about will and will
assume you know nothing about any of
these technologies whatsoever okay
you wanna come to the TCB monitor should
we move on I think we'll just that's a
handy you tell a day for debugging
what's going on with a sock okay let's
forget about the summary - so here's the
resources if you want to learn more
about it and Bala you want to run
through the first real quick the first
one is about what Bala talked about in
terms of mobile development follows the
second one is backing up the statements
we made about market share the third one
is about job ie the fourth one is about
Java EE 7 so if you want to learn about
web socket or Jack's TARDIS - or
anything any other Java EE here is that
we talk about because you don't learn it
there and of course you can download
laughs wish progress which is a
WebSocket implementation accuracy which
is a rest implementation link or risk it
link for rocket rocket link for autumn
on Android link for Android rest and
plate and finally you want to work you
have to take mobile practice like yeah
I'm sorry I just have to plug Catholic
in there that's why that's how they're
going to my expenses for this trip so
but yeah you could go there and take a
look at our model practice and send us
any questions of here</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>