<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>A New Configuration Standard for Java EE | Coder Coacher - Coaching Coders</title><meta content="A New Configuration Standard for Java EE - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Developers/">Oracle Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>A New Configuration Standard for Java EE</b></h2><h5 class="post__date">2015-06-05</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/trYjb37UKyE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">this this talk is about configuration
and i'm gonna i think it probably have
about 30 to 40 minutes of me talking and
then another maybe 15 minutes of you
talking i'm going to pick you out random
and then make you talk for a little bit
now i'm going to ask you guys for your
opinions and see if you have any input
based on your own experience and and on
your comments from what you will have
seen at that point so I'm hoping you can
kind of finish the feedback cycle that
we've already gone through on this and
either it will confirm some of the
things or add to it or perhaps even
bring in some some other degrees that we
haven't yet heard okay let's see if this
works apparently not apparently nothing
works looks like my Tumtum mess my
slides up good be
try that and I will see I was just
trying to get it to advance and there we
go it says now this is the standard
disclaimer its standard for me I don't
know if its standard for you you must
have seen this at least once this
conference you probably haven't
memorized so it basically just says that
I can say whatever I want and you can't
hold me accountable so we're just going
to go through what the problem is it
turns out that what the problem is
actually take some time in fact for me
it was one of the hardest parts of this
whole thing was figuring out what the
biggest problem of configuration was so
we'll talk about that first of all and
then I'll impress you with all the
feedback that I've already gotten after
that we'll go through some of the goals
that I decided we were going to be
covering and you can again correct me if
I'm wrong on that use cases that I've
gotten from feedback have been in the
categories and I'm outlining with a few
other I think additions that I haven't
included but maybe you weren't worth
repeating in my opinion sample
walkthroughs maybe help you understand
just kind of sinking and good and deep
and then I'll go through some API that
I'm actually hoping to get in there as
well at some point okay so what is the
problem anyway well you guys must agree
there's a problem because you're here so
either you don't think there's a problem
and you came here because you're in the
wrong room or you thought there was a
problem and you're hoping we're going to
solve it so hopefully the problem you
think we have falls in the category of
problems that we think we have there
were many people who are actually
interested in configuration and I've
expressed this interest over the past
little while and I've been actually kind
of championing this configuration
problem for a couple years now and it's
been slowly and horribly I hope leading
to the conclusion that we've got to do
something about it and as we talked to
different
people we found that the different
parties had different ideas of what
configuration really meant and so with
the kind of divergence that exists out
there I'm going to try to hone you in on
on what on what we're going to work on
but first of all before I do that I'm
going to show you what the possibilities
could have been you know and maybe one
of your opinions falls into some of
these opinions but one of the things
that people do is they want to set up a
cluster you want to set up a set of
servers or even just one server but an
environment or know when the server goes
out and they want to configure these
servers to be set up in a given
environment this is one use case and one
view of configuration it's not the view
we're going to be pursuing but it's no
makes sense and and it is it's valid
it's just not something we can tackle or
intend on tackling the parameterization
the runtime environment you know what
what actually exists in a run time
configuring what pieces are going to be
inserted in into what other pieces
what's going to be running together
these kinds of things again out of scope
that's configuration of a different kind
altogether but not this kind of
configuration deployment description
we're getting closer here so we're
talking about describing what it is
you're deploying and what you expect to
be deploying furthermore in that
application what technologies are going
to exist in there how are those
technologies configured because as you
know java ee technologies have some
configuration that's always been that
way and likely always will be as time
has gone on we've tried to make the
configuration easier in the sense that
many of the configuration parameters
have been defaulted or made perhaps
simpler to configure easier to specify
so that has been really an attempt to
make configuration easier for the user
but it doesn't take away from the fact
that things need to be configured and
resort specific settings in certain
situations you want to use certain
resources in other situations you want
to use other resources and this comes
down to how you can
your environment and this is also very
well within the scope of what we're
talking about if I finally a scripting
facility I kind of talked about that or
hinted at it when I talked about a
server environment the idea that you can
configuration is code and therefore I
can script my configuration up and you
know that's again hot everybody likes
that right now with chef and puppet and
the idea that configuration is code but
but you know we're not going into
creating a scripting language so if
that's what you're hoping I'm sorry to
disappoint but there is a I think the
acceptance that there are different
levels and degrees of configuration and
once we can decide on and agree upon
which ones we want to tackle now then we
will be most of the way to solving the
problem because then it's just a matter
of small matter of coding right okay so
where do we get the feedback from we
started out with individual people
people in the in the Java EE expert
groups and other standards expert groups
people that are consultants people that
have worked for lots of other companies
and have experienced many of these
problems and had very specific ideas
about you know the exact problems that
needed to solve and then we went in
expanded our outreach to include jugs
and people that maybe aren't in
necessarily the exact java ee camp
people that have some overlap or some
exposure to java ee but in orange ave e
developers or don't use java ee on a
regular basis and some of the pain
points they experienced and that was
actually very valuable because you know
not everybody in a jug is a kind of what
i would think of as a java ee head and
they really had some feedback that was
valuable to me and then we went out to
different conferences of which now you
are one so you can be number four so
you're enough where number four or a
number so a lot of people they're two
different continents just to kind of get
with you know the culture diversity of
I'm not sure that early batteries but
everybody kind of is a into computing
everybody kind of has I teashops
everybody has to deploy applications so
in the end the feedback was more or less
consistent with some variation but you
can never have too much some of you may
have seen or heard of or even use is its
products so I thought that I could at
least mention these but i'm not actually
promising that there will be close to
any of these because each of these has
some notion of what configuration is and
even their notions although they're all
configuration products they each see
configuration differently as well so the
VMware spring config is you know how you
configure spring beans that's what
spring config is all about is being able
to externally define this configuration
through code or even other ways jboss
team has a notion of using XML
namespaces and you know that was kind of
a different approach to things and some
people like and some people don't the
Oracle of metadata service or MDS is a
you know this is a big product that
exists out there it's a I would say a
deluxe product because it does
everything under the Sun for for
configuration from configuration
repositories to versioning your
configurations to be able to write api's
to change them and dynamically do
anything you want to them and it's it's
huge and it's probably expensive for all
I know but I don't know I've never
bought one but it is quite impressive
what it can do now chef and pop how many
people here use chef or a puppet if you
you are probably fifteen percent so shop
or puppet is for those of you who
haven't heard of it is the ability again
this this notion of configuration
through code to script the configuration
for your environment and it seems to be
getting very big people use it tend to
like it
it's primarily Ruby scripting p so if
you like that kind of thing then it's
right up your alley if you don't and you
know I guess you can always learn it but
it is I think again a more general idea
of configuration than what we want to
deal with however there are still things
that we can learn from it and I think we
we have done so do some extent already
so what do we want to end up with well
here's our mission statement mission
statements are still cool by the way
just so you know functionality is that
we want to make sure that we solve the
problems that DevOps are facing that
cloud deployment are facing you know
cloud providers have a way of that they
tell you that you can deploy your
applications and it's a very specific
way it's very kind of cloud provider
dependent and you know we'd like to make
sure that that is overall a general kind
of purpose standard way of doing it we
want to make sure that when we design it
that we haven't locked herself in so we
will start small and then increase as we
get bigger because as we've been if I've
said anything to you it's that everybody
has different ideas and everybody's
going to want to add more and more of
their own stuff to it so that's going to
be important and of course not to be
left out by the user experience guys we
want to have a configuration experience
that is all right so here are the use
cases that all talk to you about pay
close attention because if you have one
that fits outside of any of these and I
want to hear from you afterwards the
first one is cloud deployment here this
is the case where you have an
application you're deploying it to the
cloud and there are services is not
cloud and you want to not wire your
application within the application to
these services that exist in your cloud
so your application is using I don't
know a messaging service and you don't
want to code in your application the
fact that this messaging service is at a
certain place in this cloud or that the
cloud has a specific way to import this
messaging service from within your
up to two your application so you want
to wire it through some external
mechanism and that's where configuration
should be able to help you right if we
have a standard way of doing that then
you should in theory be able to pass
this configuration along with your
application and the two of them together
will form a a plausible deployment for
your environment that in the cloud so
the other one after that is really very
common probably one of the most common
here from the feedback that we've gotten
so far is people have an application and
the application has been generically
written but they want to take that same
application and deploy it in a different
runtime environment however in order to
do that they don't want to rip the jar
open or the war or the ear or whatever
application it is and then change some
of the deployment information within
within the artifact so they want to be
able to say here's my application now
add some other stuff on top to configure
it to run in a given environment so
that's that I think what's one of the
keys to this this whole idea of
configuration java ee is to separate the
configuration from the application
artifact itself and we'll talk about
there are some ways to do that now but
they're not standard and so we'll talk
about those well when you talk about
file-based configuration there a next
one is saying that don't require a
manual non standard deployment tool
there are deployment tools right now
that you can override some of these
resources and some of the configuration
aspects of an application but a they're
not standard their container specific
and B they are not something you can
encapsulate within a file something that
you can version control their kind of
usually done through some tool and it's
not you know and there are exceptions
there are some very proprietary ways of
doing this and I know some servers that
do have this but by large there's you
know deployment tools to override
configuration there's this thing called
all DD
in the ee descriptors that allows you to
override the thing on mass but there's
no way you know standard wise to
override a particular resource so this
would give us that environment
properties how many people use
environment properties in XML
descriptors in Java EE right now that's
about right you know they're under used
one of the reasons why they're under
uses because they're hard to understand
people all the time want to set
environment variables it within their
server but you know doing it in a java
ee deployment descriptor doesn't make
sense it's it's very hard to do it's
hard to read it's hard to maintain and
it's some not something people do they
find other ways around it they do to use
tooling and other things to get this to
work so it should be this is something
that I think we got to have to fix in
Java EE and so I would call this
environment properties to point o
something that in the configuration you
can easily set as a simple property and
would then be accessible from within
your application in various ways all
right deployment profiles how many
people here are in the situation her or
have been in the situation where they
want to deploy an application during
testing to do something and then during
production to do connect to something
else ends up I love you all okay so that
this is obviously a problem and right
now there are you know some point
solutions we have seen jsf has this
stage idea which goes somewhere toward
in that direction at least the
alternative in CD I also was kind of
meant for something similar there's
nothing across the platform to do this
there's nothing to say here's my
application I want to be able to do
profile I mean people do this again
using tools right now they put in
different different tooling processes
during development to do that so it
would be really great if we had
something in here which was a
configuration you could separately
deploy
saying this is my testing configuration
and just apply to this application so i
deploy the application i deploy it with
the testing configuration and all the
things get wired together by the
container for you all right that'd be
nice but furthermore once we have the
configuration defined we want to be able
to access that configuration sometimes
within the application for example a
property case let's say that we have a
runtime property a deployment time
property that gets attached to the
application and during the run time of
the application sometime during
processing we use that maybe it's a
localization issue or who knows what and
so you want to be able to both inject it
and maybe access it dynamically during a
SAS application or something so that's
another requirement and a very common
use case I think okay this one the scope
configuration this is somewhat comments
it's common in a particular case the
idea here is that well I want a
configuration and I want to define some
some configuration information
properties or resources that apply to
everyone all applications defined or
deployed within the server or I wanted
to define this configuration to apply to
just this particular application or
these two applications perhaps okay this
is the idea that scope configuration can
be set by the configuration provider you
can define what the scope should be for
this configuration and how visible it is
or to whom it is visible and that would
be defined by the configuration itself
java SE usage there are certain
technologies where java SE is the
preferred way to test you know there are
there are some testing facilities in the
container you've probably heard about
some of them in the conference so you
can use those and that's fine but some
people still like to test in java SE in
the IDE and some of the technologies
allow you to do this so it'd be really
kind of good if configuration didn't
stop you from doing that and so that
would be also take a use case for
for this in addition I think sometimes
people if this was useful facility then
people might even use this in java SE
applications anyway and say i'd be able
to read in a configuration and be able
to perhaps of notifications or whatever
alright and the last one is a again a
somewhat pod focus but from the other
end it is the perspective of the
application if i'm running a SAS
application you know i understand and
acknowledge this probably isn't too too
many of you in fact let me ask how many
of you have written or our writing
Assad's application right ok so lets you
know half a dozen maybe and you guys are
my fans know you like me this i'm going
to give you something now if you are
writing a sad application and you have a
tenant to come online you don't want
have to bring your SAS application down
every time a new tenant comes online
right i mean the idea is that it scales
up as new tenants get registered you
just register there in some identity
management or whatever and they become
added to some database and you'd like to
be able to do in your SAS application
say ok I've authenticated this user now
I'm going to use these resources for
that user and in your program you go and
do that you access or look up the
resources for the user and this
configuration could could do that it
could change you could add additional
configurations per user or pro tenant
and this would give you your tenant
based configuration and then look that
up in your SAS application so this is
something that that we've seen any need
for as well but again it's very limited
to you know thats as case in the cloud
deployment applications in a past case i
don't think you'd have this situation at
all ok well what are some other ones
these are these are things that people
are asked about or that have been
brought up but that probably we wouldn't
do in the next release there are things
that we think are valuable but are
more than we want to bite off at this
point but you know many of you are going
to see probably these one of these that
you go yeah I want that version
configuration nothing stopping you know
from having version configuration so
when I say version figuration I mean
that the configuration standard will
support versioning nothing stopped to
you from using a version artifact or a
configuration artifact and versioning it
in some version control system you can
do that anyway but there's not going to
be support within the container for
saying okay you have version 3 you know
version 2 is different in in this way do
you want to go back to version two these
kinds of things you would want container
support for these things and that would
be kind of nice the dynamic
configuration change is another I would
say the locks feature one of the things
that that prompted this this
configuration was not just the idea that
people want to separate configuration
from the application but also the idea
that people want the decoupling is more
than just artifact separation it can
also happen at runtime and how many
people here have used osgi Wow quite a
number view absolutely so you're
probably aware in osgi of a
configuration min service the
configuration admin service for those of
you who don't know SGI is a
configuration service that is very
dynamic so you can have a SG I
application or bundle or set of bundles
that is running and the configuration
that service configuration admin service
comes online and you can look up the
configuration from within the program so
as config and you can configure you can
go away as well the program stays
running configurations can come and go
it's a very dynamic activity as osgi was
supposedly meant to be dynamic so as an
application I've been prepared for
dynamic configurations meaning that if
something does go away then I know what
to do and if it's just simply a matter
of rena
sizing myself that's okay if it's
something that I need all the time at
runtime that I may have more serious
things to do but at any rate there is
value and many people do see this as
being something they delighted to have
to have this dynamic notification of a
configuration coming online well let me
give you a for instance of that let's
say you oh well you could even use this
for the tenant case i gave you
previously you could say oh i attended
has come online and i may need to
reinitialize something within my SAS
application to prepare for this tenant
or I may have a threshold as a
configuration so at runtime i read this
threshold and say if i have more than 15
concurrent requests from this from this
tenant then i'm going to scale out and
someone changes this configuration to
say oh you know we've got a much
stronger server we have more facilities
we have more I oh and the network or
whatever and so this gets raised to 20
and so then I can dynamically adjust my
behavior so there are definitely some
use cases for that but it is the problem
with the use cases is that in Java EE
was not a lot of dynamic city going on
the Java platform by and large is a
static system we deploy applications and
then they run when I mean the dynamic
part is undeployed the application or a
hot deploy or something like that that's
as dynamic as it gets and that's
essentially we initializing the
application so inside the application
logic there's not a whole lot of
dynamics dynamic stuff that goes on so
this would be kind of a I think an
extension of the paradigm of Java EE
though not necessarily on the number one
priority list i guess but still very
useful there were some people who would
like all of the existing configuration
files so if i have a cd-r beans xml file
and if i have a conectar xml file these
xml configuration files some people
would like to be able to specify all
that stuff within a single file makes
make sense I guess
I don't know doesn't seem like to be
number one priority but it seems like be
a lot more trouble interview worth but
yeah well who might say last lastly we
talked to a clustering there's not a
whole lot defined in Java EE but
posturing as it is now so very little
chance that we're going to get to
defining configuration for a cluster if
we don't even really define what a
cluster is once we define a cluster
maybe we'll go in to find that so I'm
little bit behind those of you who have
ever seen me give a talk before you know
that I'd like to talk and I think
there's something related to the fact
that I'm worse that you probably could
have guessed that at any rate um here's
where we're going to start or where we
could start an hour hive configuration
archive which contains configuration
information you can do create and deploy
the things separately on the application
but the configuration must be there or
you might have a dependency on the
configuration from the application in
other words if I'm an application and I
need some configuration information and
perhaps i should say is something in my
application that has a dependency on the
given configuration and that would mean
that that configuration should be
deployed before I deployed my
application should be able to contain
the definitions for certain resources
that are configuration specific and
properties we like to make sure that the
existing services in the container are
aware of and integrated with the
configuration and we'll see how this
works in a few minutes as we go through
the run-through and injection should
work there should be an API there should
be some java SE workings so here's our
run-through we're developing an
application so here's the development
perspective this is all of us we're
developing an application here we have
either one of these things let's say
it's the ear for the purposes of this
run-through so if it's an ear we have an
application at
smell the application xml file is this
is the usual application xml that you
guys all know and love except that has
one additional element in here required
config required config says i need my
app config can you guys see that or is
that too small you can see that all
right say we got these big screens for a
reason my app config is the config that
I rely on and I'm assuming that my app
config contains the resources or
properties in my application requires
okay so I have a dependency on that this
is what we could add to the application
xml we could also add a bean so some CDI
bean for example that has an injected
data source in it but that has a
qualifier of config so i would qualify
my injection with the config in the name
of the configuration property so this
configuration property abdi s had better
be defined by my apt and fake right
that's my dependency so this tells me
what data source I want it's one of the
ones configured within the configuration
property named app dot d s any questions
so far ok oh yes
right so if you want to if you want a
single single configuration plus
application that kind of goes back to
you know what you can do now I mean
basically right now you could define
something in a war and then add some XML
files after the fact and the build it
for each environment and build in all
the configuration files on a per
environment basis that's that's possible
now but the case we're considering is
that you've already got a an application
built and but it's not got the
configuration attached to it yet so you
don't want to change the application
because that then modifies your kind of
canonical artifact the application so
you know there's no answer for making a
single artifact you know from two
artifacts unless you actually modify
that one out of fact and insert stuff
into it which I think from what I hear
people don't want to do maybe you want
to and I'd like to hear from you later
on correct all I so I mostly correct it
would it is external to the ear file so
we haven't seen the config file yet
we've just seen the application XML
which goes with the your file will talk
about the config file on the next slide
but any but yes it is external but not
necessarily in the destination lives
there it could live somewhere else and
get put in the destination yeah any
other questions just yes it doesn't have
to be a file and we'll see that too
we'll see everything everything will
become clear just application
configuration very good question so
we're not looking at allowing you to
configure the server the server
resources itself but there are some
things that you now though the small
little star there there are some
services and resources that you now
configure in the server such a global
data source that you would be able to
configure you here because remember we
have the scope configuration and if you
deploy a scope configuration that is
global then that then applies to the
whole server get me you know ya know
well let me come back to that oh yeah
see this is really confusing stuff right
i toldja
you know what I'm going to disallow
questions from now on no I'm going to
disallow them until I'm apt till after
this run through cuz I think some of
them will you come clear after I'm
finish this okay and then after that
I'll open up the floor to questions all
over again maybe okay so here's a nap
mean that's now getting the
configuration injected everybody
understand that part good here's a
persistence.xml which looks absolutely
the same as it always has the only
reason I'm putting it here is because it
has a data source that its global in
there that we have a dependency on
unless that data source exists and this
barfs right I deployment that okay but
you could still deploy I mean you have a
data source there you need it and you
could still configure it when the server
resources or whatever kind of getting
back to what we talked before we could
have a web xml file there too in our
application that has a URL pattern that
is a variable so substituted yeah likin
that a okay so this so this comes into a
cloud situation or if I have a path
situation where I want to deploy an
application I want to put the same
application for a different company
right so here the vendor is a variable
and each vendor has their own URL
namespace okay still not impressed a hmm
tough crowd okay now we're going to go
on to the configuration side here's a
configuration or what could be a
configuration SML this is what could be
a file it's a separate archivist defines
the configuration in this configuration
file i'm listing a bunch of information
the first thing is the name remember
that name that we said we depended on
the application before that's gone there
and my laser pointer ooh where to go
there it is that one
and then we see that this scope is
global so this is something that is
going to be available to everybody this
app d/s it turns out as a property is
attached to a data source definition and
this data source definition is just the
way you define a data source now or
could define it in an application XML
except now it's external the application
and it has all the data source
information on it and we also have our
vendor property down there that was
substituted in our web XML file and it's
now in this configuration going to be
substituted with the acne vendor and at
me makes everything that's good so this
configuration file defines a
configuration that is global to all
applications who could access this data
source if the scope was application I
had to specify a particular application
I could limit so that no one else could
see the even though I'm defining it
separate from the application I could
limit who can see that data source
that's what the scoping does for the
world you could think of using a class
to define a configuration instead of XML
file why can't I just use annotations
since we love annotations so much well
we could and in fact this is a way that
we could do it using the existing data
source definition that we have already
and we you could have a configuration
with some configuration property
annotations on there and it can ping
class so maybe people would rather do
this I don't know it's an option how
many people would rather do that
annotations versus the XML put your hand
up okay that's pretty close to what I
would expect yeah so what happens when
you want to deploy this whole mess we
have our application we have our
configuration decoupled as promised well
we first apply the configuration because
remember the application needs a
configuration before it can be deployed
otherwise you get a deployment error as
I don't have a data source for you and
it bars so the configuration gets
deployed into the server the
configuration service that we're
defining
gets told about this configuration at
deployment time it reads all the
configuration in into the service so it
now knows about that configuration on
the other side we have our application
that we really really really want to
deploy so you put it in the container
and the configuration service also gets
told about the application so it knows
about the application and the
configuration can wire them together and
do what needs to be done inside the
container that's this integration that
we all talked about we talked about the
application be able access to
configuration so I should be able to
access the configuration service from
within the application and access any
configuration I want at runtime even
that's getting into an API if we're
going to allow that to be injected then
the CDI container will know about the
configuration service and it will access
the configuration and go oh yeah this
was qualified with that config so there
must be configuration with a property
name that that's what I have to inject
so it read that configuration go and get
that object and then go and inject it
okay I'm finished you guys can ask
questions again
yeah yeah I mean you could you can
imagine that there are defaults I mean
those defaults already exists I think
that's kind of what what is what we've
been trying to do all along has have
some configuration defaults when I said
I'm finished I didn't even finish the
whole talk you don't have to leave just
finish the run through I got more weight
g they really are a tough crowd so so I
just want to make clear that the
configuration defaults I think kind of
already exists to some extent if there's
something missing them we should still
deal with that but that's mostly
separate from from the configuration
that we're talking about here so what
we're talking about here is when you
want to override existing configuration
defaults or existing configuration
specifications or settings in the
archive in the application using the
separate configuration yeah i think this
not the no not the person to creating
the configuration aircraft they don't
have to know they don't have to know the
application per se they have
requirements what usually i think is
going to happen is there are certain the
application has to be able to kind of
have some specification of what
resources it needs maybe that's what
your asset meaning that's true does
no no there's nothing I mean you could
you could sort of come up with something
that said oh and here all the my you
know then it's getting a little bit more
excessive though because then you're
looking for some specification for
saying here all the individual things
that I need and I better you know pick
those up and that's possible right okay
yeah I'll be worth talking to you and
seeing what you have and what you think
should be there yeah question yeah sorry
they're all over the place here right
precisely yeah so you don't like the
Java annotation part you'd rather have
the xml file yeah absolutely totally
that's something that I've heard over
and over again as well and the idea is
that it just like you have a tool to in
the IDE to create an application by
itself right you have tools that create
your servlets and your components that
everything like that you'd have a tool
to create a configuration as well so it
packages it for you or it opens it up
for you and you just modify it now the
question is again you probably don't
want this tool to be an IDE because you
like you said it's not for Java
developers it's for DevOps people so
there would be a separate tool that it's
not necessarily an IDE based tool to do
this absolutely yeah
yeah I I didn't mean to say that that's
the only thing that's going to be
supported that was just an example of so
that simple enough that people could
understand but totally right and that
would be under the purview of the
configuration standard just try to
define what's allowable of that
configuration file so the expert group
would kind of come together and say here
all the resources that I want to be able
to override not only that but it would
come down to four particular
technologies now what kind of what kind
of resources can be defined separately
from the application in a given
technology and those are the kinds of
things that would qualify for inclusion
in the configuration right I have to ask
you some of these guys on this side of
the room because I've not shown you any
love at all so from the back and then
work our way up the green that's you
well we don't define now and javi health
ins are deployed really we just say
things are deployed no I'm i'm not i'm
not claiming that this is actually how
it must happen i'm saying this is kind
of logically what what you know you can
imagine is going to happen this is kind
of gives you an idea so you understand
you know who might have to talk to whom
and and that's all i'm not saying that
this is you know it's done this is how
it's working sorry guys i'm just trying
to sort of illustrative give an example
of how it could work in and again just
like you deploy an application now and
the java ee standard doesn't say how you
deploy it just as you do deploy it i
think the same thing would hold true
with the configuration is just you
deploy a configuration and it gets into
the container different containers might
choose to do that differently but it's
generally pretty easy to do correct yeah
so so that's that's actually one of the
other cases that has been brought up is
is the configuration modifiable and that
comes back to the dynamic aspect of it
if it's modifiable then you have to get
into how dynamic is it so i think
probably the starting point would be
you'd essentially you have to undo play
or hot redeploy the configuration the
application itself may not care because
it's already been configured or it might
might be an option on there to say if i
did configuration disappears and then
i'm done for I can't exist because I'm
runtime accessing some of the
configuration you see
no because that injection only happens
once the dependent yeah you know the
qualifier can mean whatever you want it
to the qualifier has no it's it's sort
of the qualifier has its own semantics
right sorry for using constructor
strings yeah yeah well in this case it
was passing a string in so I agree with
that part okay okay let me get to any
other questions over here oh it would it
would be in Java EE so the hope is that
it would come in Java EE eight the next
version yeah so the e7 is already out so
yeah the one behind you
right yeah yeah yes the answer to those
questions lies in the next slide yes
well so that's an interesting question
because J max is kind of a management
thing right that's not so much a
configuration thing it's used for
configuration and so some people thought
of it as being the same thing but it's
not and so there's nothing stopping a
container from from doing that whether
it's part of the configuration standard
I probably not but most containers might
actually provide some some mechanism for
just like they do most of their other
stuff through jmaxxx yeah yeah
yeah yep those are all good points on
the substitution part on the variable
substitution that you saw on the web.xml
that was a simple name I think you
probably stick with the I mean it can be
any name I made it short because I
didn't have a lot of space on the slide
but but but I could have made some name
that says URL for vendor or whatever
like that right you can put the
semantics in the name itself but yeah
but what else are you going to put the
semantics how else are you going to
attach that cement it to that name you
know I think you you don't want to make
it too complicated i think variable
substitution is something everybody
understands and hopefully i think is a
simple enough thing to also implement in
the back there first and then to you
yeah
right yes yeah well you could um you
would have multiple configurations but
or you don't have to you could actually
have multiple configurations stored in
the same archive potentially you could
think of that's another option we've
seen we've looked at both of those I
tend to think a different archive would
be a better solution myself I think also
just reversion and for managing
everything like that I think I'd be a
better approach but that's to be
determined yeah right yeah yeah yeah
absolutely yep some question it's fun
and then and then don't do yes yep some
some makes em 20 verizon some doesn't
and I think we'd probably reify that
into this back itself as this is a
loudness isn't definitely um that would
be defined by the standard itself and
you just wouldn't it wouldn't have the
schema to support something other than
that no the next slide is a java api but
i don't know if i'll ever get there and
no Tonio
hmm well I probably wouldn't see that as
being something that would be defined in
the standard but I would certainly see
it as something that would be you know a
container feature that people would
support in terms of the clear text
passwords um you know like right now we
don't have any answer in Java EE for
that people generally use the container
feature that encodes the passwords
already and then decodes them when it
reads it in and I think that same same
feature would be used for configuration
just like it's used for you know yeah
that'd be it would be nice to
standardize that I just we haven't
standardized that yet so it's not like
we're going to start here you know if we
standardize it we've standardized it for
the whole cross the board that's that's
all I mean yeah yeah
yeah I just watched just again I want to
make sure that we understand that's not
a configuration issue that's a standard
kind of password issue so but you see it
in this context for sure right right
yeah okay let's do one well you don't
need another archive but if you don't
want another archive then you don't need
this feature because this feature is
trying to decouple the configuration
from the application archive itself yeah
so where are you going to store that
configuration information if it's in the
ear or war well so what do you do for
multiple deployments but you need
somewhere to store that information is
the point right you need some artifact
to put it in it is not the application
are you going to have every environment
talking to every other environment it
doesn't it doesn't it doesn't work no I
mean you need something you need some
some way to store this persistently you
need to be able to store it away in a
repository or a database or something
like that and so it has to be in you
know files or some data space well some
file like thing right okay well we'll
create a new system you know what let me
just show you the API quickly because
well because I want to this is a simple
API that has the configuration service
that has the ability to look at the
configuration
so it get me a given configuration
return that configuration or query over
the configurations like somebody was
asking for where you over give me all
the configurations that start with my
app name or whatever and then I could
get the property actually out as long as
it's globally unique in the
configurations then the property could
be accessible and then the configuration
API itself once I got it I could ask for
the properties and and the different
attributes of that configuration so I
mean this is a very simple place to
start just to allow you access
programmatically to configuration
information however doesn't have what
what we're talking about earlier where
the ability to add a new configuration
here okay that that is not part of this
right now though it was at one point it
was kind of removed to kind of scale
back so this is kind of the first cut
first you see that you know I mean it's
very simple but it's very functional it
gives you the ability to in application
find the configuration information
access it and do whatever you want with
it shorter multiply in there are a few
open get well there's more than a few
but you know these are some of the
categories of questions that that are
still you know the tooling we know that
there needs to be tools to support this
different people have asked for
different tools and different
functionality and the tools but i think
i think tooling is going to play a role
for sure for the devops folks and it has
to be the right tooling and the devil's
people are going to be the right people
to talk to talk about what that should
be the integration we know that some of
the container services already will need
to know about the configuration service
and question is you know doesn't need to
be SP is across these or is a
configuration new API enough in some
cases I think need to be a little bit
work there and and then stand alone in
java SE how's that going to work should
should there be you know full feature
functionality there or should it be
reduced that kind of thing so in summary
the main idea is d couple the
configuration from the application it
enables plow
employment multi-tenancy platform my
deployment profiles lots of benefits
everybody's happy yay go team okay
that's all I got I'll stay around to
answer questions we're out of time now
I'll just to maybe take them outside so
that we don't intern thanks for coming
enjoy the rest of cover</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>