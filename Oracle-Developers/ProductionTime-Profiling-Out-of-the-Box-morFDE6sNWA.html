<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Production-Time Profiling Out of the Box | Coder Coacher - Coaching Coders</title><meta content="Production-Time Profiling Out of the Box - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Developers/">Oracle Developers</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>Production-Time Profiling Out of the Box</b></h2><h5 class="post__date">2015-06-08</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/morFDE6sNWA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">my name is Marcus hurt I am a consulting
member of technical stuff at Oracle i'm
working with a java product group and
it's great to see so many of you here
it's kind of fool and that's wonderful
so what I'm going to be talking about is
that the new production time profiling
capabilities that that entered 7u40
which is the newest release of j DK and
I have this gnawing feeling right now
and that the session that you all want
to go to is really my session tomorrow
which is going to be more in-depth
especially in terms of others jal flight
recorder this is actually going to be
more away the overview of the
capabilities of Mission Control so you
know you know if this isn't this issue
you wanted to go to you can always go to
my other session so I'm going to select
mood start with a with an introduction
to Mission Control then I'm going to
talk a little bit about the convergence
status so when when when Oracle acquired
sun microsystems Oracle already had a
JVM called J rocket and I'm going to
talk about the convergence project
between image idioms then I'm going to
take a brief look at the management
console although that might not be the
production time capabilities that you're
looking for a it's still a useful tool
so I'm going to just race through that
one limit and then I'm going to talk
about at the Java flight recorder I'm
also going to talk a little bit about
the experimental plugins that are
available from Mission Control so there
are some some plugins that actually
extend Mission Control in various ways
so that you can do things like hip
analysis and looking for heat waste and
other things I will this is a common
mistake i usually do I talk about the
future and then you know there is
another merger and nothing happens so
with with
I i I'm basically mostly going to talk
about things that are either already
checked in or you know really in the
plans so we will hope that nothing
happens this time then I'm going to
point you to different resources where
you can learn more about Mission Control
and this is the mandatory disclaimer
slide which basically says that you know
you shouldn't rely upon the things I say
about the future in this presentation
multiple basically purchasing decisions
on that etc etc things might change you
know there might be another acquisition
so Java Mission Control overview so in
70 40 we got a new tool in the JDK so if
you download it seven to forty you
should find something called Mission
Control in the bin folder and it's a
tool suite which is geared towards
production time profiling but it's fine
to use in development too I do that all
the time it's very useful so you can do
that as well there are some basic
monitoring capabilities so there is
something that we call the DMX console
which you can think of acid so with jake
onson on steroids and then there's the
main production time profiling
Diagnostics tool which is called Java
flight recorder the focus especially in
term you know for the flight recorder is
on low overhead of course since want to
be able to use these tools in production
they are built into the JVM and there
are various ways that we try to to get
this low overhead we try to use
information that is already available in
the wrong time and or that we can get
cheaply and the implementation for
instance for the flight recorder is very
very efficient and I'm going to be
talking more about that in my flight
recorder tutorial tomorrow so the
history of Mission Control is from Jay
rocket from the old Oracle JVM j rocket
so for reasons that I can tell over a
beer we had to build our very for the
very first JVM management console so
that's sort of how the tooling started
and that was out of necessity later on
we found that we wanted more round time
information about production systems to
be able to tune the JDM we really wanted
to know how how the JVM was being used
out there in real life so it was really
for the GPM developers that that the
first tool was built a joke runtime
analyzer and we also built a tool that I
haven't listed called mem leak analysis
tool which was an online heaped analyzer
which was very nice after we had been
using using these tools out in customer
deployments for a while we sort of
accidentally solved for few customer
problems and the customers wanted to
have the tools so that's how we came to
to to build Mission Control as is too
sweet and it really became serious with
with Mission Control to which we called
the energy project because you know mc2
and it was very successful this is the
first release that we did upon the
eclipse RCP platform and later we built
in about the GC group built the
deterministic garbage collector and this
a garbage collector with this garbage
collector you could specify the time
that the longest garbage collection
should take down two milliseconds and
that's really when the need came for
something to detect other types of
thread stalls other type of Layton sees
in customer products you know we wanted
to be able to help customers when they
came back and said that hey you're not
keeping to your service level agreements
what's going on and then it would be
then it was very nice to be able to say
that hey may a synchronization code here
is bad or you know you're you're you're
doing a lot of i/o here it's not our
fault after that we build something
something based upon the l8e tool called
shared flight recorder and that's really
what has gotten ported to to
hot spot now so the jvm convergence for
those who you who heard my taught last
year I was very frustrated by then
because we hadn't released to Mission
Control and I sort of thought it would
have happened by them and you know a lot
of things happen at Oracle strong focus
on security and other things so um if we
got caught up in a whole lot of other
things to do but that's all love here so
it's it's it's much better so we are
doing the convergence it was decided to
use hotspot as a base Mission Control
was one of the things that I wanted to
do for hotspot and that's what released
with a semi-new 40 and the name five dot
to the version number 45 altitude of
zero is really a misnomer it's this is
really a 10 that's a zero release so you
might want to keep that in mind so short
brief update on the convergence these
are the things that Mission Control
needs and uses we need for the console
to have access jmx as access to the
diagnostic ambience to the diagonal scam
beam we don't have a diagnosis gambling
yet that will arrive in eight which will
allow us to do remote implications of
diagnostic commands so and we get that
in jdk 8 so that's not too far away Jay
command of course has been around since
seven you for if you haven't used to a
command try it out it's excellent
utility we got the flight recorder
engine built into the JVM in 74 the only
problem there was that and reason why we
didn't release Mission Control by then
was that we didn't have an events so the
information in there wasn't very useful
for anybody but the people using
weblogic server because weblogic server
were had a producer that actually
produced a lot
interesting information so that's the
reason why it got into some new for us
which flight recorder event parity
happened now and that is why we have
released Mission Control so now we have
pretty much everything that we need from
from the OST of em and Java layers in
terms of events online hip analysis well
not yet so it's going to be talking
about that native memory tracking you
can do that now I did blog post couple
days ago on how you can do that but it's
only for the hotspot jbm native
applications so might not be that useful
to to anybody about the JVM team but
it's there and once we get an mbean to
access the data where we are going to
have nice UI UI in the management
console for thatís one soft cream time
GC I am nothing to say on the top either
prime gem removal going to happen eight
the improved DMX agent yes we have the
improvements there are some further
things that we could improve upon such
as you know I'm I thought about that
later we have something called the Java
discovery protocol so we have a sort of
a little server that can that have
follows the life cycle of the of the jmx
agent that can broadcast the presence of
the gym ex-agent so that it can easily
be found by tools like mr. Cottrell so
this is the base toolset that got into
7040 we have the gym x console which is
for monitoring one or more JVMs online
in real time and you typically just
monitor a few key indicators like you
know live set cpu things like that and
well it's it's a very nice console so so
give it a try the Java flight recorder
is analogous to to data flight recorder
in modern aircraft so we continuously
record information and when you think
there is a need you can dump the
information available in that flight
recorder and analyze it offline and we
also have production time profiling
witches
what this talk is about the supported
platforms the client is not built well
it's not we're not distributing the
solaris sparc or SOS x86 64 and versions
yet we are building them internally so
if you think there is a strong need for
for these platforms let us know because
you know then we can spend the resources
necessary to support those as well but
the current decision is not to
distribute them and server side of
course everything that is 70 40 so to
install Mission Control you just
download 7u40 and there it is the
standalone client if you want to use the
clips version of Mission Control you
need to add an update site your clips
there is a performance problem that is
currently being sorted out in the forex
brush of all eclipse so we are working
together with Tom shindle to sort this
out but currently i wouldn't recommend i
would recommend using Mission Control in
30 date or two not even for the X branch
because there is you know come talk to
me if you wonder why but or just try
these companies it's very slow
installation of experimental plugins so
there are plugins that can install into
Mission Control to to extend the
capabilities of Mission Control and
there are two different classes of
plugins features that we think may be
useful and that we want to get some
early feedback on that we might think of
you know supporting in the base product
in the future and things that are not
necessarily useful for j2se users so we
Francis have a coherence plugin we have
a weblogic server plane and if you're
using wls what we're serving it might be
useful for you to install it but
otherwise maybe not so those are the
kinds and the standalone client is
already configured to that update site
so to install them you just go to help
install new software
and all the plugins are going to be
listed there and you can just select
which once you install unless you have a
proxy problem and the clips version you
need to add yet another update site so
if you want to install the eggs milk
plugins you install them from OPN here
using that URL down there so the
experimental plugins are not as
thoroughly tested as JMC base and they
aren't supported but of course view you
have something you want to complain
about you just write about it in the
forum and the devs are or monitoring
that forum and answering things I am as
well so of course we'll fix it starting
the Mission Control client you can
either just double-click on it or you
can use the command line options if you
think you want to debug connectivity
issues or whatever I have some more info
on that on my blog so please go there if
you if you want to know more about how
to start with debugging options I'm not
going to say more about that than I
think now to start the server if you
want to have access to to the the the
really interesting profile fighting
capabilities of Mission Control which is
flight recorder you need to start with
unlock commercial features and flight
recorder those two flags otherwise you
won't have access so you know that's
very important it can't be dynamically
enabled like interior well I actually
was always enabled in Cherokee we just
didn't have any and the recordings going
so that's not how it works in in in hot
spot yet but there is something that I
think we're working on and there are a
lot of different command line options
you can use to for instance start a
continuous recording from the command
line etc and I'm going to go through all
these examples on how you can start it
up tomorrow during the tutorial so
starting the management agent if you
want to have remote access with Mission
Control you would use the Sun comes on
management flags as normal
I see 74 you can actually run the rmi
server and at registry on the same pork
so it's easier for tambien and that
would be that the extra flag to use for
for for the server and you can also as I
said broadcast the presence of the agent
on the network using the water discovery
and parameter and I just listed this
discuss this is such a common problem
sometimes arm i will get the host name
wrong it would typically notice this by
trying to connect a remote server and
you would go some error that says that
hey i can't connect localhost or
something similar and you know the
reason is that it binds today up results
thrown hostname whiskey and that is what
gets transmitted in the stub so to
override what is transferred to be in
the stub you just set java rmi server
hostname to whatever you want it to try
to connect it a common problem typically
get this on multi home systems or or if
you have configured your hosts file
badly so i'm going to do a quick run
through of the jmx console so it's a
simple but feature which jmx console
real-time monitoring and key indicators
the ones you would typically look out
for is the live set and and maybe cpu
load maybe threads it's it has a simple
trigger engine so very simple rules and
gene so that you can get some things to
happen actions can be taken whenever a
certain attribute get gets to a certain
amount and you can also provide your own
user custom actions and as i said there
are experimental plugins there's a
coherence plugin and there's also
jconsole plugin plugin so a mate a
plugin for running jconsole plugins in
Mission Control that you might might
want to use so I'm going to do a quick
demo
no actually should have started up trips
but here we go
so as you saw there I'm actually running
382 for performance reasons so running
little application that causes a bit of
load and as you can see here you have
the JVM browser you can have it running
in two different modes tree mode is very
useful if you have JTP discovered JVMs
because then you would have a hard time
sorting out which are which if you run
me this flat mode and you can just
right-click and select start Jamie's
console to stop DJ miss console or you
can double-click on the ambient service
wall so this is what the what the
console looks like you can of course add
your mbean attributes if you want to I'm
not going to spend too much time on this
but just wanted to show you some of the
features so thread count for instance
there you go we have a thread count and
you can do things like zooming known on
data I can use the mouse wheel to so
soon and if you hover your going to get
information about the different database
points you're hovering over so that's
something you can do you also have a
pretty nifty mbean browser so if you're
our innocence writing your own mbeans
and exposing your your application is
some way three Emmys this could be a
good way to just check that everything
is okay so there is actually one bug in
the Mission Control version that is out
now that has to do with this and it
seems apache tomcat returns type
information that is a new for an
attribute which is very indecent of them
so Mission Control doesn't really like
that and you'll see an error message so
we're going to handle that we didn't
think anybody would do that so oh well
so memory pools and as you can see you
can drill down into composite data you
can invoke operations as well so let's
let's find the dedlock's threads
presence here we go two of them 13 12
there is of course a much better way of
doing attack it back in Mission Control
but no hay and if you do things like
invoke things that returns more complex
information you can do just drill down
into that as well so i'm not going to
show you triggers it's going to take too
long i think so well you can you can
build your own triggers triggering on
things there's actually if you're
working on oracle there's an internal
update side so if you want to have a
more complex way of looking at and
defining rules we have a complex event
processor we are going to push that out
everybody later when we get the
approvals we need so so we do have a
more complex rules engine that that
people could use as well last thing i
think yes yeah well so the thing is you
would get separate editors for them so
you could do this you know it hits thing
like you okay going off script see what
happens so you could actually put them
side by side like this if you want to do
but we don't have a composite view of
all the different ones well actually we
do but that's a research and development
project that we have in house that we
haven't available as their as applying
yet but it would probably be an
exponential pie in soon what else so
threads so now i'm showing more in this
table than you would normally see but to
get that information you just click on
the table settings to select that abuse
you want to see
but you can do things like deadlock
detection here which in a better way
than we did previously so we can you
know see that we have two dead all
threads thread for is waiting on thread
333 is waiting on thread for and we can
see the SEC traces for the second two
threads we can also do allocation
profiling so you can see you know how
much is been allocated by the each
thread it seems thread to its really
hungry okay so I one last thing on
Castle we have a J console meta plugin
so this is the thread dump analyzer
plugin for jconsole running instead of
Mission Control so i just wanted to show
you that you can you know there are the
things that you would normally do with
the tread by damp analyzer okay so
that's any questions on console because
i'm not going to return to castle now
good so I'm gonna step that application
yeah sure so it's configurable you can
go into preferences but it's a weak word
by default during my session tomorrow I
will humiliate myself by showing how you
can use well no actually I will do that
now later I will humiliate myself by
showing you Jay overflow and the four
dot one version hub Mission Control so
heap dump from the for that one where I
trade a lot of memory for negligible
performs uh okay right so the flight
recorder and it's a high performance
data an event recorder which produces
the files you get from the flight
recorder or binary files that you can
sort of share with people that other
people analyze if you want to send by
email well they tend to get some
somewhat large if you're quite a lot of
data but you know you can share them and
they contains they contain a runtime
profile for the duration of that at the
dumped recording and you can run the
record here in two different ways you
can run continue
sleen so we can have recordings that are
run continuously and you must explicitly
dump the data to look at it or you can
have a profiling recording or time fixed
recording that we run for a certain
period of time and then gets downloaded
if you start from Mission Control if we
can get download into Mission Control
automatically when it's done and this is
of course a bit like having a black box
for for the JVM so whenever something
happens you can dump the data and check
what actually the lead-up to the problem
the recordings themselves are
self-describing a self-contained so they
consists of a bunch of chunks and each
of these chunks chunk contains
everything you need to be able to
resolve the data in the chunk and
describe the day day in the chunk and I
will talk a little bit more about that
during the tutorial tomorrow so just see
how much time I have okay so i won't
demo too much of the flight recorder
actually so one thing i want to show you
is just how you would would go about
creating a recording of course i started
this JVM with it you know unlock
commercial features flag and flight
recorder flag if you've done that you
can just go to the flight recorder note
here I expand it now so we can see there
is no recording running and if you just
right-click on it and select start
flights recording and I'm going to start
a continuous recording so this is a
hardware spelling income is that correct
yeah continuous recording and I'm I'm
not going to go through them I'm just
going to select the continuous template
tomorrow I'm going to go through the the
how to use templates etc no but for now
you can all you need to know I guess is
that there is a continuous template a
default template provided with the JDK
there is also a profile template and one
of the bigger differences is that
allocation profiling is enabled in the
in the profile target ok so just finish
in now we have a continuous recording
running the little infinity mark there
says that this is going to go on until
the JDM dice or well you can dump it if
you want to if you want to do with time
fixed recording you would just select
the time fixed recording I'm just going
to do 20 seconds there call it proof and
I'm going to use the profile template
and click finish I will talk about the
options you have in the that wizard
tomorrow and you'll see it will continue
for for for the designated amount of
time and when it's done is going to get
downloaded of course in a production
system you might not have access with
Mission Control you might not have
gimmicks or are my access to sort of
some agent and that case you can use
take mom to control the recorder to
dumps and to start and stop recording
set cetera i'm going to show you
tomorrow how you can do that as well
there's a lot of yapping about the talk
tomorrow but you know
if only I knew I need to check that okay
just going to Jenna its tempo okay thank
you so damn truck it's a two hour
session but you know it's all going to
be about the flight recorder and the
different things you can do with the
flight recorder and I know Stefan but
there won't be too happy about this but
I'm also going to talk about how I can
customize things a little bit because
it's too darn useful to not tell people
okay so where was I yeah ok so we
downloaded this information
automatically and and here we go i'm
going to show you one thing though since
this since the name of this talk was
production time profiling i'm going to
talk show you a recording of something
that has a bit of a performance problem
so i have this recording here you know
like any good cooking show i have a pre
done recording well and we can see here
that we are saturating the cpu and it's
probably the JVM doing that because we
seem to be set your anything that as
well i know for the process and if we go
look at the code tab group so on the
left you have tab groups and you know in
that every tab group has an associated
set of tabs and i'm not going to show
you all of them because there are a lot
of them I'm just going to note that the
one at the bottom is little bit special
and I will talk about that so so okay so
we really want to know where the
application expanding its time executing
the Java code and it seems to have to do
something to do with linked lists here
and if we look at the the hot methods
here we can see that this link listed
the index of this being called
contains which is being called by this
count intersection in the initiator
class and it's an easier way to do this
is a new thing that we didn't have in
jail rocket actually you can fit the
fury and just go from the top and just
work your way down words and see where
the time is being spent in we can see
that this count intersection method is
actually responsible for for all our
load and if we open that particular
method we can see that we basically have
two collections both linked lists and
that containing unique elements by this
little magical seed modular thing and we
seem to be doing for each of these
collections we seem to be checking
another collection for for for whether
motive contains that that element
elements of other person we can count
them the ones that are similar for these
two collections and of course this is
pretty inefficient since doing a
contains check-in linked list is
proportional to the number of elements
and if we just change this to hash set
we are going to do much better constant
to diverge so that would be a good way
to improve the performance of this
particular little app example
application ok so the method profiler is
pretty impressive in in in Mission
Control in flight recorder you don't
need to be on safe points to a sample
something but sorry what you can
actually configure it and and I'm going
to show that tomorrow but but yeah you
can configure how the new sample so so
there's a little in the wizard the
second page of The Wizard you can
actually define how often you take these
samples and yeah it's based on gatos ink
secretaries so yeah it is so now we
won't do all the threads all the time
for instance and we have a it's not the
JVM TI kind of way to do stack sampling
we have our own AP a-- so using this you
would typically see for all the events
in production you would typically see
less than 1% overhead in j rocket we it
all depends on the kind of application
you have of course but there was for
instance big japanese customer that was
very happy with with the jerk
documentation and they had 0.1 so it was
late entry care we we have some
benchmarks performance benchmarks and a
publishing saying it but yeah there's
actually one benchmark that goes six six
percent faster when you his flight
recorder me we haven't figured out
exactly what yet
so oh so cannot remember you can't
explain countertop yeah so so it doesn't
just have to do with this this method
profiling event of course there are a
lot of other events that can capture but
yep we have compared our numbers to
other profiling systems etc and looks
looks real yes yes there are so there
are some events that are more expensive
than others to take and there are some
events that we basically cause you to to
do a garbage collection so there are
some some heap statistics events for
instance that are enabled by the for
Bolton I think we actually do warn the
user if you try to try to enable these
and say that you know hey this this can
potentially be be expensive and if you
are using the base templates that we
have you shouldn't be seeing much
problems there because they are the
default template parameters are
constrained to arrange that we have
measured and think is okay
starting their goalie and yeah so
resource wise yeah we will allocate some
thread buffers there will be there will
be some some of heat with memory being
allocated as well but it's not very
large yes so that's how it was used with
Jay rocket and of course this is our
very first release with this technology
so and this is actually a call for
action from from me so with Jay rocket
and it had been in use for quite some
time so I had a had the opportunity to
to build up a library of recordings that
showed real world usage in different
customer systems and this was very good
because they could be used as as
examples to others with this release I
don't have these recordings because you
know we released less than two weeks ago
so I haven't had any time to build up
this this library of recording so if you
use the flight recorder to solve a
problem and you think it was nifty
please please send me the recording and
what you did because and I'm going to
explain a in a little while and more
towards the end of the session I'm going
to show you some things we're doing for
the future and having that library would
be would be very useful I think we could
help a lot of people yes oh it depends
try with your application that's you
know it all depends on your settings so
if for instance if you have enabled
allocation profiling and you have an
application that allocates like crazy
you will get a lot of events and the
recordings will tend to get big so it
depends on your application you will
need to try it out
recording yeah we for the time recording
let's say if I if I know this this how
far is my heart failure and record all
the popular data and down together or
you put extreme out okay so you can
configure their quarter to work in
different modes and you can have it to
store to this so it will write chunks to
disk when I'm going to be talking about
this tomorrow okay yeah okay yeah I need
to move on a little bit so there are
experimental plugins for formation
control so there are a bunch of them and
they can this one that i'm going to be
showing extensively tomorrow so i'm not
going to talk about the wls plugin here
there is a dtrace plugin so you might
find this funny since we don't ship the
ship the client on solaris but there is
a dtrace plane which where we have
actually extended the descrip language
with our own syntax to be able to
provide metadata and make it more
self-describing so that we can read it
back into a model that is similar to
what we do for flight recorder and we
have a tool which is well our very first
attempt at using javafx so it's a java
ethics based visualization and it's a
tool for analyzing heap waste so it has
different different anti-patterns it can
recognize so things like duplicate
strings for instance and things like
like spares collections and spacer ease
and it operates on h h prof dumps so
this is really not a replacement for
what we had a joke with online he
profiling capabilities but this is at
least a heap profiling capability that
we have for now
and this one and the these plugins you
need to install from becks mental update
site like I showed before yes if you can
integrate your own application with oh
yeah so yes you can and no it's not
supported and yes I'm going to talk
about it anyway tomorrow yes yeah so the
question was if there is a I've
forgotten to repeat the question for
everything the question opportunity now
so for you who are listening to the
recording sorry about that the question
was if there is any class of having this
work with a little linux version of
DTrace that is coming and yes right now
it's done for solaris and the names of
the probes etc everything is done for
for for solaris but it's easy to
reconfigure the default template you
would have to to do a bit of hacking in
that template yourself but it should be
possible also for the mac OS 10 version
of DTrace but you will need to alter the
templates yourself and you might want to
offer the visualization as a result of
that altering of the template yes and if
you find this dtrace plugin very useful
please tell us so so that we can provide
proper support this is an experimental
plugin i will need feedback to know if
this is something that you find useful
ok so i'm going to do a quick demo of
the dtrace capability so dtrace and this
is what the template file looks all I
guess this is more fun twice
okay anyways so you can see i guess it's
very small but there are there is
support for syntax highlighting and
there's also support for navigating so
we can see you know in this template we
have a bunch of probe sets to find and
you can jump to the definition of the
probe set and you can see that we're
defining a bunch of metadata to
associate with it and when we get down
to the pros these are really things that
are d scripts index except for the meat
keyword which is sorry hours and and
what allows us to to to get the events
on the format that get the information
on an event format that that that is
easy to write a parser back into to to
our mission control flight recorder
parser so that can get it to a model
that is used for for the visualization
tool ok so what it looks like well let's
look at these Layton sees so we do have
some java probes so we can see for
instance that this logger we are
blocking a lot on this blogger and we
can look at frequency analysis of the
times that actually did block and
there's also a lot of OS information so
go to this the recording whoops
we can see that and there is a lot of
always information for instance
scheduling per CPU etc so there's a lot
of OS information in there of course but
can be very useful the overhead though
is much larger than when using flight
recorder so we will typically get for
the bare minimums like ten fifteen
percent so that's the flip side also
typically for the events you won't get
stack traces whereas in flight recorder
you would typically have a way to
navigate to your code what's actually
going on you code from the events okay
so moving over to Jay overflow and the
voluntary humiliation of myself overflow
okay so I don't have a lot of memory in
my machine so this is the there you go I
don't have a lot of memory in my machine
and I have proven it so let's try this
so this was actually one of the things
that were really nice with with Jay
rocket J rocket on 32-bit OS s had a
very neat way of utilizing
non-contiguous eat space would have been
hand right now then again here you know
nobody's using a 32 bit of us anymore
except me so sorry what no no no no
never don't count on it okay so here we
go we seem to be as you know we have
seventy percent of heat utilized by
space race so collections that we could
erase that could probably utilize in a
better way and we have a bunch of
different ones but almost all of it is
used by these object to race so let's
check out the object Ares and it seems
not almost all of them are utilized by
the sir
ray a field Emma Rae in mish patrol and
we can see that we have some
subscription storage that is holding on
to all these if you do this analysis on
50 to you won't see the same pattern so
yeah that's it there is a few other
recordings but I don't think I'd be able
to open them up oh really okay so I do
think that this is a recording from yeah
so we can see that in eclipse this is an
earlier version with clips there was
actually a lot of duplicate path
segments so there were some very
commonly used paths in eclipse and those
were duplicated every single pack the
path segment to utilizing really quite a
lot of the heap so that you won't see in
a more recent version of eclipse either
okay so that's the H profibus tool and I
had to close powerpoint to be able to
open that so getting back to where we
were here though
so regarding the near future of Mission
Control we are currently working on the
five of the three version which will be
released with jdk 8 and also with a 7
you update so whichever that is going to
be and things that we already have is is
remote diagnostic c'mon support so if
you want to use J come on but remotely
you can move that through the jmx
console which can be quite useful we
also have improved content type handling
and formatting so that you can select
how you want to have your numbers
formatted etc a little bit more and yeah
we're almost feature complete so if you
have any feature requests they won't get
into the 503 because it's too late we
are also working on the next major
version of Mission Control and I can't
tell you too much about it but I can't
tell you that one of the major things is
maybe major capabilities is going to be
the automatic analysis of light
recordings and we have a bunch of
different heuristics that we think would
be very useful but of course getting
more leave more real-world feedback from
you guys in terms of recordings and
resolutions etc patternists you might
find would make it even more useful
automatic analysis include comparison
two different worlds and not the first
version now and it does not even all
even it does not look at multiple James
either this first version version
and you want to yeah yeah but it's also
kind of hard yeah we can talk a little
bit about that afterwards if you want
and I didn't repeat that question either
so sorry so some resources then the
homepage is really easy to find it's
Oracle pound / Mission Control from
there you should be able to find things
like the update sites for installing
this into clips and the forum or for
asking questions and and some
documentation as well and there are two
different Twitter accounts that might be
useful java Mission Control is the
mission ctrl is the the trigger account
that is official for Mission Control
then I used to tweet a bunch of things
about the you know upcoming features or
features in releasing JT case and end
and a and Mission Control and then there
is a blog but I used to have at Oracle
but then oracle didn't allow me to use
third-party and blogging tools so then I
moved it down to my seller and that's
where it is right now so her taut i see
it / blog and there is a even a facebook
page and oh sorry yep
okay so shameless book plug I wrote a
book together with a friend and it's
still relevant if you're interested in
adaptively optimizing runtimes or
Mission Control so that's it and I
thought I'd this is a very nice quote
from one of the beta as a guy named
Mauricio serum or similar more now
working exit line tools for now working
at amazon and these are two things he
said when he tried Mission Control it's
an invaluable piece of work and the
other one is I managed to do in one day
what I failed to do in two-plus weeks
using another profiling tool and yet
another profiling tool so this was
unfortunately done using a beta that is
no longer compatible with what what we
released so I didn't even get nice
recording from that guy that I can use
in my library but very nicely good so we
have some sometimes I think for for
questions nine minutes okay
features under a licensee yeah so the
question was if there is any licensing
issues with youth using Mission Control
and especially the flight recorder and
the answer is yes so you can use it in
development for free but if you want to
use it in production you need to get a
license and it's included in javed
vanced and the other sweets i think it's
included in in some weblog server suites
as well so you need to talk to your your
sales rep to to get license if you want
to use it in production if its
development just go ahead yep
okay so the question was if there is a
there is some overlap between mr.
control and an visual vm and the
question was if there is any plans to
retire visualvm and the answer is no not
that I know of there are several reasons
for that of course and one being visual
vm is is an open source tool Mission
Control isn't so if you know you you
want to use the OpenJDK then you would
of course use which will be in yep
sorry the question was in the beginning
I you can get the beginning so when I
say example yeah when to them you today
brief no no I mean if it's a posting
garbage collection face then nothing
will run so it's so the recording engine
is going to steal capture data etc but
but you won't be able to send any data
to Mission Control etc we do collect
information about the garbage collector
so there's a bunch of different
information from the different GC faces
for instance and again i'm going to show
that tomorrow so so there's a lot of
information there if you're specifically
interested in garbage collections but of
course if you're not running any java
mr. control will not be able to access
the ambience landing server and you
won't be able to transmit any
information back to to to Mission
Control sorry the parks yes online
yeah so the question was what's
happening with the online hip analysis
tool and there are a lot of these
discussions on how to best implement
that so one of the things that wasn't
really good in terms of scalability in
the jarek tool what's that it basically
for anything you did in the UI you did a
full mark face on really new chips yeah
that's not something you you'll have to
wait for a while for the information so
you might want to do some some other
things there and yes we are discussing
what can be done to to be able to have
an online heap analysis tool that works
on you jeeps some some cool research the
heap dump oh it small very small so you
know that's the that's actually a very
good reason why you would want an online
hip analysis tool because and so I ran
out of memory for this really small heap
dump and handling heap dumps that are
huge from huge systems can be a bit of a
problem when you want to you know hand
those heap dump surround and then
analyze them on your puny laptop so with
the J overflow it all depends on how
much memory you have in your machine it
could take some time yes so yeah we are
looking into a different ways that we
could do heap dump analysis not heat
online hip analysis like we did in a
rocket but with some relaxed constraints
we're also looking into things that also
would be interesting such as how you
would be able to age classify every
single object on the heap
just a single and so so there there
there are some there are some there are
some with some some cool things you
could do so we're actively looking into
doing them but this this is far off in
the future this is not something we'd
have available in like an update 28 this
would be jet canine or later stuff so
unfortunately yeah okay tomorrow so the
question was what you could do with the
allocation profiling in the flight
recorder and i am going to demo
allocation profiling in the session also
going to talk a little bit about the
constraints in that implementation so
there are strengths and weaknesses with
every single tool and of course there
are weaknesses with with Mission Control
and Java fly to correspond not too bad
once there okay cool okay
no so there is no specification open
specification for so the question was if
there was the binary format was open for
for for for for the flight recordings
and no but there are two parts okay I'm
supposed to stop now I just gonna ask
you this one so there are two parsers
available there is 1 parser built into
that JDK of course is deprecated not
supported and then there is another
unsupported parser include admission
control so those are there two parses
where it could get to get to the sort of
an a model of the flight recording one
of them is sort of like a sax parser and
one of them is sort of a Leica don't
parser both unsupported both unsupported
yes okay so thanks everyone</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>