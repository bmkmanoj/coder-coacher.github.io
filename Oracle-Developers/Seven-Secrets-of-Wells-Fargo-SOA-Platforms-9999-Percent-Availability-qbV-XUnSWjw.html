<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Seven Secrets of Wells Fargo SOA Platform’s 99.99 Percent Availability | Coder Coacher - Coaching Coders</title><meta content="Seven Secrets of Wells Fargo SOA Platform’s 99.99 Percent Availability - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Developers/">Oracle Developers</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>Seven Secrets of Wells Fargo SOA Platform’s 99.99 Percent Availability</b></h2><h5 class="post__date">2015-06-08</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/qbV-XUnSWjw" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">I would like to welcome everyone to
today's session seven secrets of Wells
Fargo's over platforms ninety-nine point
nine percent availability I am Rama
Lakshmana I work a senior systems
architect the bank since I'm going to be
disclosing our secrets I want do a quick
survey how many of you are from
financial institutions can you please
raise your hands okay good even more
pointed question how many of your from
big banks like city bank chase jpmorgan
that's it okay okay I'll make sure you
guys don't go disappointed okay so
couple of rules before I get started
rule number one i recently read that in
your hand the lot of occupancy pressure
points and when you clap those pressure
points get activated and the person who
is clapping in free very relaxed so all
throw this session feel free to clap
whenever you want to so you can feel
relaxed and I can feel it out thank you
so rule number two to this session my
boss's boss's boss as wells for oct was
here and also the wells for was chief
architect is also here so I need to look
very sharp in front of them so if you
have any tough or curveball questions
hold on to it i'll be here even after
the session gets over you can come and
ask me now I'm just kidding I will open
up the Q&amp;amp;A session before it ends so
feel free to ask any question I will try
my best to answer it okay
I just want to give a couple of data
points about wells for where there are
so many good things about Wells Fargo
but just these two points can stress how
big the enterprises so today like one in
three in this room and as well as in
America they bank with us and we
originate one in three mortgages in us
so just these two points are good enough
to stress how big the enterprises so
because of this after the 2008 the
economic crisis federal government has
identified few institutions as Sufi that
is systemically important financial
institution and if those see fees goes
down it can trigger an economic crisis
and Wells Fargo has been identified as a
global Sufi so if Wells for our goes
down it can trigger an another economic
crisis so a couple more points like we
have a fourth largest bank in terms of
assets and number one in market value
among or us peers in by market
capitalization and we have the number
one most admired financial services
brand in the world
okay so this is the agenda have for you
so I am going to talk about the eye
level architecture about our wells for
vico system the ecosystem and then i am
going to be disclosing all the seven
secrets and then just for you guys i
have come up with a meta secret okay so
let's move on so today a customer can do
banking through different channels that
is he can go to ww are wellsfargo.com or
you can go uses mobile devices you can
go to the call center or you can go to a
store can go to ATM to do banking and
besides that Wells Fargo's into 80
different lines of business so each
lines of business they are there won't
need of applications this is what we
have on the front and wells force in
suite offers so many diverse set of
products and services the customer data
and the products and services doesn't
reside in one single data source it
resides in 60 different system of record
so it's not one it's not too it's 60
different system of record so just to
give a visualization I see this room's
capacity is 187 so that means one third
of this if you think everyone here erase
ours so 60 people are sitting here in
this one column so you can visualize
those maiya so as we are to interact so
where does so a platform set the so our
platform is the magic which connects all
these lines of business and the channel
applications with these back with the
system of Records and the system of
Records they range from the very legacy
mainframe applications to oracle
informix I base db2 based systems to
HTTP HTTPS so pressed based system so it
is very diverse system of system of
rackets and some of the system of
Records or even external financial
institution sometimes so this so all the
channels and the lines of business they
send a soap request
that is the exposed slope services and
it procures the data from the backend
system of Records and renders it back to
the client and today this saw
application is one of the largest so
application in the world today there is
around 750 webseries operations deployed
on the sofa platform 715 so typical
example of a saw application or so our
services let's say a customer goes to
online banking and then he enters his
username and password in the point the
online application here it sends an soap
request to so application so now the so
application it goes to a one primary
system of record and it gets all the
accounts that are linked with that
customer so a typical customer would I
was checking a con saving account you
would have a plastic issuance that you
can have a credit card debit card and
some people have mortgages and some
people have student loan and some people
have personal line of credits so based
on a customer it goes to say you're
checking in saving account is in one
system of reckon and your mortgage is in
a different system of record and your
credit card is in a different system of
record the so application it goes to
each different system of record gets the
data applies all the business rules
removes a delinquent account and then
massage is the data and it sends back
and unified swap response to the online
banking application so this is the same
service which is used when you go to a
tailor in store so to see all the cones
are associated this is same service you
go if you call a call center so this is
a typical example of a web service
operation that we expose and in terms of
volume we process every day 200 million
inbound sub transactions that means 200
million that is in one month we process
inbound is six billion soap transactions
and typically one inbound transaction it
makes three back-end calls so we process
18 billion we make a teen brain beck and
call
system of Records so we can see if this
so our platform goes down no one can do
banking there is Mother's cannot buy
groceries home owners cannot pay
mortgage loans ATMs will not work in
online banking run check your balance
nothing will work so it has a potential
to become a newspaper event so this so
our platform has to be available always
so it is that critical so that is what
I'm going to talk about the secrets of
what we do to keep it always available
so secrets I intentionally kept the
secrets a little bit cryptic so to play
19 Lord protect me from my friends so
the reason is as I go through each slide
it's going to be getting missable like
what it means but the underlying
intention is so that you just don't look
at the title and walk away okay Triple A
so today our so application is deployed
across multiple data centers in North
America and in each data center the so
application is taking active traffic for
security reasons I wouldn't be able to
disclose how many data centers are there
in North America but we have multiple
data centers North America and but the
secret here is if there is a natural
catastrophe and if all the data center
goes down and if just one data center
survives that one data center is enough
capacity to handle the traffic of all
other field data centers so it is a huge
huge investment the bank has made for
the commitment to the customers
availability so that they are not
standard anywhere
so 19 if you take a civil engineering
people they invest lot of time in
building a ling or a strong foundation
and on top of that strong foundation
they erect super structures like you can
go around the city now in the San
Francisco the city has given approval
for a lot of construction sites so you
can see if you see the time they take to
lay the foundation is very very huge for
and on top of that foundation they will
the superstructures so this was also
true in our industry few decades back in
during the mainframe time the mainframe
hardware is extremely highly available
on we're on top of that odd where they
build software so with both of them
guarantee they give you I availability
but that works very well but it is
expensive solution recently how the
cloud computing is heading towards this
they take a very cheap commoditized
adver on top of that commodity hardware
they will which the other which just
gives 19 availability there is ninety
percent availability on that of
infrastructure they built intelligence
into the software with that intelligence
in the software they guarantee and they
give the four nines availability like
say this cloud computing operating
system that OpenStack and all using the
intelligence is there in the in the
software in the cloud company operating
system which is great and it is a very
great vision and it is able to get
realized but sometimes your application
also needs to have intelligence it is
not just this cloud company operating
system or the vendor technologies can
provide you that availability that you
want sometimes your business wants more
availability then what these vendor
technologies and these cloud company
operating system can provide you so I am
going to talk about to architectural
patterns that was built in or so
application which gives us the kind of
the availability that we want
so before I get near a quick I can give
a quick contacts or quick story six
years back we did a project which was
aimed like say in banking more than 80
percentage of the data as a read data
only 20 percentage is a right data so
instead of going to another primary
system or across the mainframe instead
of going to mainframe always a hundred
percentage we mood the all the read
operations to an Oracle RAC cluster so
for me for the rights we were going to
the mainframe so the jabrai Miriam is to
bring down the cost and we did that and
it was a very successful another
successful projects in the banking
industry because we now that for all the
reads we go to oracle RAC cluster but
all over one thing was ok so coming back
of it fits here or so application it
talks to the Oracle RAC cluster on one
data center since I told we have
multiple data centers so here I am
showing there is another so application
which is in a data center too it's
talking to the article drag cluster on
the data center too it's a co-located
and it's talking and in case if the if
there is an outage in the rack cluster
you might wonder how can there are
cluster can have an outage because rock
cluster itself is made for I
availability there are multiple nodes in
the rack cluster I would can itself a
voltage sometimes we have seen the San
to which it writes to goes down and we
have seen the sometimes there is some
configuration issue or there is a
switches problem or there is even Singh
bucks in the cluster wire itself which
can cause let our so application unable
to come communicate or talk to the
Oracle RAC cluster there is running on
data center one
in that circumstance what happens is the
operations team intervene and then they
repoint the traffic of the so
application that is running on data
center one to the Oracle RAC cluster
that is running on the data center to
which is its mirror site but the problem
is since we our application the SWA
plication is deployed across hundreds of
servers in order to repoint the traffic
in each server by server basis it was
taking several minutes during those
several minutes any transaction that
goes to the data center one they they
get impacted the client was getting
impacted with that impact wasn't
acceptable for us so what we did was we
built an intelligence within our so
application so in case if the Oracle RAC
cluster in this data center one goes
down or it has any issues the
intelligence within the so application
what it will it for every five seconds
it issues one sequel call vanilla sequel
call is select one from deuel so dual is
basically in-memory table in oracle RAC
cluster it issues that call and if it
doesn't gets a response 45 considers
atoms then it will automatically fail
over the traffic to the to its mirror
side here so in a matter of few seconds
the application fails over traffic from
the primary data center to the secondary
data center you might wonder why wells
for was building this kind of a custom
solution but the reason is the vendor
didn't offer the solution so that's why
we had to go ahead and build it but it's
going to the solution the cross data
center failover of the Oracle RAC
cluster is going to be available in the
upcoming release so pattern number to
see sometimes not so there are some
sensitive jobs that needs to be executed
like say there are sales tracking
or Commission's or there are alert those
things has to be executed no matter what
happens they have to be guaranteed Lee
executed so if it's guaranteed execution
then we would go for JMS server the JMS
implementation so our so application
also talks to JMS server to publish
messages or two cues so that the the job
gets executed in a guaranteed manner but
however we have seen sometimes the
entire JMS cluster itself to go down the
the JMS guarantees the execution only
from my so application if I'm able to
connect with the jamis cluster and pass
the message but sometimes the entire
cluster could go down due to network
issues or there is some cluster
availability issues or miss
configuration or if there is a human
error in that circumstance we cannot let
these jobs fail because they are to be
executed on a guaranteed manner so what
we do is in that circumstance we write
those jobs to a local storage and once
the JMS server or becomes available then
we read from the local storage and then
dispatch it back
okay so here are two patterns where we
have built intelligence within our
applications when the availability needs
or not but or not met by the vendor
technology or external technologies so
third secret Lord protect me from my
friends so as I told our so application
it talks with 60 different system of
Records 1 to 60 different 60 MPH records
sometimes not all the system of Records
or I Lee available system of Records
sometimes they are down there are done
and sometimes they are there but they do
not respond back they are there but they
don't respond back wait a minute my wife
is like that sometimes okay thank you
they might have some internal issues
that is going on which makes it to
unable to be responding back in that
circumstance let's take a look what's
going to happen within the so our server
within the so application stack so the
red box you see is basically our
application server and the red arrows
you see they are basically the servlet
treads which gets the request from the
client picks it up and when the request
comes in one the render off you see it's
moving the request comes in the solar
tread it the application server
containers thread picks up the job he
goes and he established the connection
with the SOR gets the data and comes
back this is what happens in a go good
scenario but when sor is in this kind of
a state where it is there and not
responding it has some internal
issues going in it typically i have seen
two things one the thread has to wait
till the time out kicks in if you have a
connection pool or anything that it has
to wait till the connects the timeout
kicks in so say if you are set of 10
seconds then a 10-second has to elapse
and then the server the thread gets
linked pushed and this is the place
where the back end connection this is
where all the external jdbc driver the
connection pool the parts and everything
comes into play I have seen again and
again in this kind of a quasi-state not
all but few of them they hold on to the
thread that is my thread goes to an
indefinite wait state when that happens
let's see how this is going to play even
more the second request is going to come
in is going to go is going to get locked
because of this indefinite weights
holding on to it another request comes
he goes and then he is going to hold on
is going to go into this wait state so
now there are no more threads available
to process my incoming requests and only
way to recover from this I have to
recycle my server so that it recycles
and comes back but recycling is not easy
to do in real time because if going to
recycle have to take an outage say
suppose if this is an very low volume
not a critical system of record say it
it oozes the student loan if I am NOT
able to when this problem and that
student loan system of record has some
problem it's okay for me not to display
the student loan balance when the
customer signs in but because of this
problem I wouldn't be able to let any
online banking customer or any other
customer to log in because my entire
server middle bar is now in the fire
it's you wouldn't be able to log in
because there is no threads available
to take in any more requests which is a
very very bad problem that means it's
causing an outage to the bank which is
quite unacceptable so this is how we
have engineered the solution the new
world how it looks like is the red
arrows are the the solid container
threads we have introduced an
intermittent worker thread pool so the
green arrows you see these are what cut
thread pool and this is basically a cue
to take in the jobs so if a new request
comes in this radar a ghost that is a
solar content thread goes and e doesn't
directly establishes the connection with
the system of record rather he ants it
over to the green threads there is a
worker threads so the worker threads are
the ones which they are going to make a
connection with system of record and
they're going to come back in case if
they suffer from a timeout or if they
hold on only my green threads are going
to be stuck my red threads becomes
available to process other incoming
transactions so in a way this I am able
to achieve the fault containment that is
if there is a fault I am able to
quarantine it it's not able to spread
across my sist across my entire so
application and that's not it here is
the beauty this Q what you see here it
has an intelligence to it in case if the
system of Records say let's say that the
response name of the system of record is
hundred milliseconds in average when the
problem happens it's typical response
and goes to ten seconds 20 seconds 30
seconds when that happens this queue as
the intelligence to start to shrink if
save the queue depth is 200 originally
it will become unread 50 20 10 and 0 so
by virtue of becoming 0 that means it
put in any new requests they are going
to come in they are going to get an
instantaneous rejection
so this is what so if we know you are
going to fail rather fail fast
so and the next thing to point out is
this Q by virtue of stringing I am able
to defend my system of my so application
from having any availability issue on
the same and I am able to defend this
poorly performing system of record
because now my queue depth is shrinking
the amount of jobs that I I can take is
also going to come down it is also going
to minimize so in case so suppose if M
if my to death is 200 I can throttle 200
request there if it becomes 0 I am NOT
going to throttle lot of you might be
coming from an networking background
there is a great algorithm for as
exponential back-off in the networking
or let's say if there is some point or
there is some congestion in the network
what's going to happen is they do an
exponential back of say if you're
constantly making connections or doing
transverse if there is some problem it's
going to back off it's not going to keep
on transmitting data rather it's going
to try what's happening try again after
some time whether it's rough point and
once it started a function then it start
to retransmit its original rate so this
is a great thing so this also if the
system record is already under stress
why do you want to pressurizing with
even more load and then bring him down
and recently I saw in open source
library where they have implemented this
for HTTP connections which is great so
when when it sees an HTTP at 500 the
status code finder there is internal
server error or 503 that is service
unavailable then it will not send trend
the transactions to try the real world
and then be try after some time it's a
great implementation but one thing is
since our implementation is protocol
agnostic it doesn't it's not just it
works for HTTP it works for all system
all records because this is internal
threads and Q which is implemented
within the so application
so I am halfway through my presentation
why do not we relax a little bit that is
clap thank you 240 k so this is the
salary all you need to ask your managers
because you are all very studious to
come and learn how to build i li
available applications now okay so i
told that our we connect with 60
different system of Records and some of
them lot of the system of records are
not within our organization they are
within different organizations within
wells fargo else for is a big enterprise
and some of them are even external
organizations so how we go about testing
them that is i want to set up a data
like our customers with account balance
will be 0 or accounts with delinquent
accounts or when you do the transfer he
does not have sufficient balance i will
i be able to do because they are done
managed and maintained by different
system of different organizations and
they are their own schedule and then
they wipe out the data for the massage
the data they get it out so i wouldn't
be able to replay retest it a different
point in time that I when I wanted to do
so this is a big challenge and testing
the application so what we have built we
have built an enterprise data simulator
so this data simulator it mimics the
response of all the 60 different system
abducted and this system of record in
the system of record since its may have
complete control we can condition the
data however we want it to be so when
once its condition is said there so I
can run it repeatedly so that I I can
test it at different points in time and
as I told some time back this is a very
old video clip very big companies see
was going around the floor singh
developers developers developer is
absolutely right I would also add there
is a testing testing testing top of it
to have I availability so we have today
80,000 regression test Suites in our
testbed to exercise our application or
so application so very on very frequent
periodic basis we do run these tests so
that to ensure the quality of our
application and the next point toilet is
the performance is very very critical
for our application as it only process
six billion inbound transactions just
talking about the performance can be a
separate jamming session what all things
we do to ensure the performance of the
applications or we scale but 1.2 I
lightest we take a server set of servers
we see how much peak volume it handles
in a given during a peak qalam time how
much volume it Angeles we multiply that
by 3 x 3 x and we do run that test the
three times volume the targeted test in
our performance lab before any new
release is made to the production so
just to make sure it can handle and
survive any I volumes that's going to
come in
so cockpit secret number five so some of
you this is the first day in the
conference and for some it is a second
day and you are going to go through
multiple sessions and probably at the
end of the conference this if you want
this this session may not stick on your
head but if there is one thing that you
want to take away that will really want
to take away I would say it is this
pilot so what is pilot when we say
suppose when we are going to install on
one we do not do a complete install on
one fine day that say on Friday night we
are going to install our application and
that is a new release into production we
do not install it on Friday night rather
what we do is on Tuesday night that is a
four days before the full install we
take few servers out of rotation from
taking production traffic from each data
center and on those few servers we
install the new release of the
production new new release of the code
base and and then we put that release
into production and to take traffic for
next three days we constantly monitor
its key performance metric CPU memory
and its response time and also we
thoroughly monitor its functional
characteristics in case if there is any
issues we find it during that pilot
period typically and whenever you won't
even make a new release to production
that's when the problem surface because
of old ordnance is there it is already
actively taking code actually taking
traffic that typically the problem
doesn't happen when you install the new
release that's when the problem happens
during this four days window we
thoroughly monitor all the functional
and the performance characteristics to
see how it behaves how it responds and
in case if there is any issues we fix it
during those four days period and then
we fall forward so in this case if there
are any issues it is mitigated it's only
quarantine to few set of servers rather
if we install on one
fine day and then when we come back on
Monday if there is some issue it is
going to be a complete catastrophe the
complete applications availability gets
questioned so that is what we do with
pilot yeah
that is a very good question but
actually know the new features are only
activated only when our channel
applications or lines of business more
info they are not going to invoke the
new features until Friday ok so that is
a very good question so the question is
what if the new release as a different
database schema yes right yes so that is
the point number two switches so I
wouldn't tell it is a good point the
recently I learned that one of the big
software a service company they take an
outage when they install a new release
to production because for the very same
reason that is pointed out because in my
new release my database schema is
changing when database schema schema is
changing my application code also has to
change to write it in the new format
because it is not compatible so but in
Wells Fargo we never ever take outage
for installing new release it's because
so the that company the he was asking or
can you change the engine of the
aircraft when it's in motion we do
change it when the engine is in motion
it's because of the switches so the
switch S is nothing but runtime flags so
when the switches in off mode it's going
to write the data in the world database
schema format when the switch i turn it
on when the runtime flag is on then it
will start to write in the new format so
once the database is upgraded then we
turn on the flag so it is a runtime flag
you don't have to shut down the your jvm
for anything so that's how we do this
thing that is with the help of the
switches with this runtime flag I don't
have to take an outage and the switches
is not only installed or done for that
a schema because and one more point to
take care is it is not we're not dealing
with one system of record we are dealing
with 60 different system of record and
they all keep changing and we cannot
wait to do a synchronous install because
of the switches we are able to get there
no no when I enable four days before I
am NOT going to write it in the in the
new format I will be one is still riding
in the old format the one need only
thing I do it is a the pilot is so that
in case if there is any new bugs are
introduced in the world features that
are available i am going to catch it
there yes that is correct precisely
it is in an xml configuration file so we
look keep track of thing and we switch
and once this yes yep
that's correct yes it's what feature is
off there just to exercise that a new
new installation didn't doesn't
introduce any new bugs on the old
features that are running there yeah
okay good so whack a mole I just want to
play a quick video clip how many of you
like to play whack-a-mole all right and
between these are my daughters they are
playing in a game Starrcade recently so
I just took it the final part is
interesting okay so we do our best in
development we do the code review we do
unit testing functional testing
performance testing pilot but still
despite that out of cracks sometimes
there is going to be problem in
production environment sometimes PCP is
going to spike memory might leak and the
JV might crash it's going it might
happen in respect the best we do but the
point is when this happens you need to
be the first one to be aware you
shouldn't be notified by your client
applications or by SOR or by your end
customer you need to be aware of it and
then so you need a very very strong
monitoring in place and not just strong
monitoring is enough but also it needs
to be coupled with instant reactions you
need to have very very instant reactions
so few years back we are a very
interesting bug so what was happening
was the full GC was running but the
memory was never getting reclaim so the
repeated full Jesus were continuously
happening and memory was never getting
became a lot of you know when full GC
happens your jvm freezes when it freezes
it is not going to take any in any
transactions motion they're going to
freeze so the customers are going to
timeout they are going to see an impact
so we developed a kind of a monitoring
script what is it does is it looks it
scans your car based election law and if
it sees the full GC is occurring
repeatedly then it would take that
particular JVM out of rotation from
taking any production traffic so in this
case until the development being
research and we come up with a problem
it is it does not have a customer impact
but one thing to notice the vacuum on
that is removing it from production
whack Amole might be a good game to play
in the arcade but not to do in
production environment because very
sensitive so the full GC that is
happening it is basically only in
symptom of the problem but underlying
lee what was happening was there was a
memory leak in a very very popular
library I don't want to say and maybe
once the session is over i can say but
it got fixed it so we had once we fixed
then the problem went away okay
so secret number seven if you see dot
asterisk this is basically a regular
expression it means it can it can
accommodate any number of characters and
digits so when I framed the title seven
secrets I frame it to just keep it as a
catchy title but actually there is few
more items than seven so that is why I'm
going to talk about them in this slide
so what is the or who is the most
dangerous species in the world human
being Yeah right bingo we have done lot
of constructive work but at the same
time we also done our share of
destructive work and a lot of time not a
lot of them sometimes in production the
error happens because of human errors
because of manual interaction with the
production systems so the the primary
way to mitigate is automated as much as
possible do not let any manual or human
interaction take care of any production
things try to script it as much as
possible automate it as much as possible
so the next thing not in this so
application but in a different
application in Wells Fargo what was
happening was it is a low volume low
tier resistor low tier application due
to some data condition it was spawning
multiple threads and it was resulting in
out of memory unable to create native
threads error and it was where it was
happening and the and the JVM was
crashing so the operations team they had
to restart the JVM even when they
restart at the JVM still he did not
clear its original state once again a
new threads were getting spawn and then
there it was sunny and it was going in
crashing so what you need to make sure
you have a very
lean restart when it comes up even when
the restart is not enough we need to
make sure there is a factory reset that
is able to go back to his original clear
state so where our server initialization
is very extremely important so the third
thing here is the soda that is I told
there is 750 operations all these 750
operations are not deployed as one
monolithic bundle because it has been
broken down by the domains like the
account related services or deployed as
one unit the customer related services
are deployed as another unit so
similarly we do have multiple deployable
units so the primary reason is in case
if there is any problem in one
particular deployable unit it doesn't
cascade across other other of other
services so it gives me kind of a fault
containment or a quarantine the problem
limited to particular scope and the very
important thing is we are cool but we
are not so cool we are not obsessed by
the type of the technologies that a
market makes because we have seen enough
cool technologies in the same java one
conference which has a big graveyard at
the back so we pick a technology only if
it solves our business problem one leaf
it makes us solve our performance
problem or need to provide some
optimization or improvement but having
said that we are not a very conservative
almost our full open source stack is
running on open-source technologies
today the complete source stack
okay I got a nodding from my chief
architect so I can see we are running on
linux redhat linux and our application
server is a tomcat apache tomcat and
internally we use since I told we talked
with several different system of Records
you name any popular open source will
acceptable library we do run like spring
we use a spring we use apache commons
and go ah camel no not yet no
what that is a very good question see
this show application was built in 2001
time frame at the time soap itself soap
was there but there wasn't enough there
wasn't a soap stack available to handle
the kind of the load and the volume that
we want to handle so we partnered with a
big company technology company and we
built our own soap stack and that soap
stack performance we do the benchmarking
today with other open source tracks like
I don't want to mention the names but
this performance is on par or better
than most of the available open source
stacks that is out there yeah
I'm guessing that yes are you with your
services so that you know yes so the
question is how we version the service
that is a very good question so that
slightly deviates from the topic but
anyway I can talk about this and not
problem say example today we expose a
service called a web service operation
or let's get account which gives you an
account balance of an account which we
give whenever we want to add new
features to that service that is
whenever the data elements if I end up
adding more elements or I remove my
elements then that has to be versioned
and as I told I we do a more than 100
plus client applications who are
consuming my service I can say say okay
today on 2013 I am sending you 10
elements in my response eczema in 2014
if im going to send you back 15 or 16
elements then i cannot say to all my
other clients who are using my old
version of xml to migrate on the same
day rather what we do is we version it
say we call it as get account 2013 and
we build an next version call us get
account 14 so the nuke us the new
clients who want the new features they
come and consume the get back on 14 but
the old lines are going to be consuming
the gate account 13 but eventually we
encourage them and we had to retire the
whole message and then ask them to use
the new version of the service so our
version is backward compatible hundred
percent backward compatible okay
yeah see right now we are moving to read
a Kleenex but we were in some other
different operating system so that part
so right now we are in kind of an
transition phase we're in hybrid state
but once we are there it's going to be
Linux completely
yeah no no no I know that's a deep
question so ok I will take it offline
maybe here yes correct correct correct
so in Wells Fargo we do have a phosphor
on that is I forgot then I me Mata
Jeff's tango open secure software so it
has to be vetted by that community so
once they wet and they approve then only
we can use it it's not like we can go
and download randomly and start using it
yeah good so the orchestration business
processing it is done by within our so
application we do not use any external
yes we grew coded yeah yeah so that's a
good question actually we try to make it
as similar as possible as close as
possible we try to mirror it but
sometimes there is going to be one or
two follow so it is very very very very
difficult to make exact mirror thing
yeah how many
now we are a stateless application so we
have we do a multiple saw instances
which take traffic yeah so so so in a
kind of a saw interaction like say for
customer who signs on to online banking
is very first request to can go to one
so I instance whereas the second request
can go to different so I instance so
there is nothing cluster or there is no
session we are basically a totally a
stateless application
now it's basically horizontal scaling
even like save the first request comes
to once or instance and if it with dies
down that's mokay the load balancer will
mark it down the second request can go
to a different so instance and he can
take and process it okay ya know that is
a cache is there but it is done within
that so instance it is not cash it's not
distributed cache so there was a
question there yeah no answer is no we
do not use ejb and we don't use excess
also yeah right yeah so sorry can see we
do do that using our own implementation
if there is AK if there is a need we do
not use XA because if it's XA it has to
be also supported by your system of
record they also need to do their commit
and the rollback and these are very
diverse set of system of Records and
they don't yes you can say no but we do
our kind of the internal lemme do that
yeah something like that yes yeah go
ahead please
see not for critical system of record
answer is yes which is absolutely needed
yes for critical system or records yes
answer is yes see there are a lot of
questions coming but I just have one
more slide to show and then i will take
the questions just one but i will
definitely take questions so meta secret
i coined this word meta secret from the
word metadata that is the data which is
defines the data that is for the metal
details so all these secrets are framed
formulated designed and implemented by
our team so so it does not matter
whether it rains or Shine's or whether
it is morning or night 2 a.m. or 3m this
team picks up the phone call or parses
the log to make sure no one in the main
street is standard no Wells former
customer standard so they can still keep
function see if our application goes
down or if there is any outage it
directly impacts the impact on the
livelihood of our customers it is not a
text or a chat or anything it directly
impacts so that is why it is absolutely
critical yeah this pretty big like the
developer count say 20 30
okay yeah so i would say in the count
call is roughly hundred including it all
the teams entering the project
management the QA the operations yeah
so it is all done by our own libraries
and our own code we do not use any es
least we don't ya know that's very good
so one reason i was expecting or one
question that i was expecting his why
soap why do you wanna use a soap why
can't he use something else but as I
told we did we built is in two thousand
one and two time frame I think so cause
the available thing but soap that gives
us very video our separate so
organization body within our enterprise
so we do have an schema an XML contract
college w of XML that's what is
published in this soap so any new
services that you want to expose it has
to be approved by the so our governance
yeah this is just a so availability the
water that's correct see you might want
to go to the Gomez reporting and the gum
is reporting a publisher weekly not a
biweekly report on the availability of
major enterprises in the bank and they
give the web availability and mobile
availability so that keeps ranging on a
weekly basis see sometimes Gomez reading
sometimes we are most of them they are
hundred percent sometimes a 19-point
nineteen percent 19.98 percent but if
you see we are always on the top of the
stack Gomez gom easy yeah correct
sometimes yes but for my personal
humility yeah yeah when we were on the
message as a provider it's versioned on
our side on the so application server
and so on and the clients consume it ya
know yes yeah but we handle all the back
where the old versions as well we do
yeah yeah good good so it's so we are
stateless so the client they're gonna
send us and request so we're whichever
the channel they want to authenticate
like a wellsfargo com he sends the
request and we go to the system of
record to see whether it matches if the
user name password matches and if so we
send the response back that's it client
whether client maintains a session the
channel is maintained the session we
don't that's why we are stateless yeah
what server no i doona patchy tomcat Oh
for JMS we use IBM mq yeah
no no that is a good question all of our
services are consumed only by internal
clients it is not exposed for external
consumption now it's not even exposed
today it is not exposed for public
consumption all these 750 operations are
only consumed by our channels and our
lines of business yeah
yep so I'm just curious audio from a
fish company you are hooked no I'm just
kidding no we are building internal
cloud oh no we are building our own so
the question is what we are doing from a
cloud prospective like we have these
data centers what we are doing so we are
building our own private cloud in our
data centers yeah
sorry what
okay so that might take long time but I
can I'm here yeah so ya going yes
something you have something on your own
so that's a challenge yeah only if the
vendor is going to give me a commit or
rollback API then I can do that kind of
an atomic thing if they don't then we
cannot do that yeah okay
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>