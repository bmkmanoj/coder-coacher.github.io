<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Be Creative and Create Your Own JavaFX 8 Controls | Coder Coacher - Coaching Coders</title><meta content="Be Creative and Create Your Own JavaFX 8 Controls - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Developers/">Oracle Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Be Creative and Create Your Own JavaFX 8 Controls</b></h2><h5 class="post__date">2015-06-05</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/7PPcM0E5yQw" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">this session is about custom controls in
JavaFX 8 which is not a that big
difference to JavaFX 7 just a little bit
different and I don't have any fancy
demos it's this time it's really more
try to giving you an idea I figured out
five ways how you can create a custom
control in JavaFX and I also figured out
a sixth one I will show it to you but
only as a short demo and so you can
decide which way you choose which is not
always good but that's the way it is so
in John effects offers a lot of
possibilities to create controls just a
few words about me I'm a tune world
working for kind of engineering in
Switzerland exactly the JavaFX community
co-lead java champion whoo and yeah I
love to call Java and Java fix and also
on embedded and that's the stuff I would
like to tell you today so its first of
all what's new in JDK 8 who would
attended lambda talks already okay so
we'll go through this very fast and then
I will mention CSS proto classes which
is new in JDK 8 and style properties and
then I will show you all the different
kinds of controls you can create so that
means the types order the kind how to
explain the ways on how to create that
control and at least some some useful
towards I submit upon so what's new in
jdk age yeah alumnus on you write to me
it's not that you anymore but yeah it's
still new we have JDK 8 is not out yet
so it's still something that is quite
new and I will just show you the
advantages for control developer right
and this is usually stuff you found in
Java FX 2 if you create some properties
and you add listeners to it then usually
it looked like that
which is okay but with lambdas it's this
which is much better so much better
really
trust me it's if you I do only controls
and this is such a great effort to have
this with Landers in here and if you
have for example something that you have
to do an on platform run later because
you have some background tasks running
and you have to fill it into the into FX
application thread then this was Java FX
2 so you have a timeline and we would
just add a listener when the timeline
finished and do something and do it on
the on the FX application thread so we
need to platform one later then that was
the code and with the lenders this is
the code and you could even make it
smaller if you use for example because
now here you have to add all your code
yeah that you would like to do but if
you put this in an extra method then it
would look like this and then you only
have to write this stuff and that's
really convenient to do that so the code
looks much better
anybody use lambdas already played
around with it if you so you're sure do
that it's really nice it
who knows groovy okay so I think the
same so for them it's it's really easy
to adapt
you mean this
oh that's the distant method reference
that means it in principle that's the
same you can use also this approach and
then call a method here right but that's
that just a shortcut you take the
reference in this class and there just
pass the event they actually event to
that method and then it will use this
call this method here and pass the event
from the set on finish from the event
handler directly to the so it's just a
shortcut but it it's helpful to clean up
the code right so you don't have to
write all that stuff down all the source
code that I show will be available and I
would show that the one of the last
slides it's on github and for those that
can't wait if you search for Han Solo
I think it's jfx are eight controls that
you will find the repo with all the
stuff that I have to show so you can
download that and try it so don't you
don't have to make notes okay so that's
it for for the lambda stuff so I think I
don't have to explain that because it's
you will find much more explanations on
the web they are better than mine so the
big thing in Java FX 8 is that we have
no public accessible CSS stuff which is
really good because if you who knows the
usage of CSS with controls and in Java
affects a few who uses Java FX at all
that's good that's very good so I don't
have to explain all the details right
good that means we have CSS sort of
classes anybody knows what that is
roughly okay so that is something that
enables to apply a different stage a
different style to whatever a region for
example for a certain state that means
you can create a state somewhere in your
code a boolean property for example if
you switch that then it leads to the
fact that the the style will change
and this this part here the : with the
interactive for example this you can
name it whatever then this is the
episode of class and this you can now
define by yourself you can define the
sort of classes in your coat and then
use it in the CSS and that means people
that use your code can also use that
stuff right which is that's very easy to
use it's in principle the Java code that
you need is you create a so-called Soto
class which is just one line of code
it's just in this case a private static
final saw the class and this is then the
name that you will find in the CSS right
in the CSS that was Cullen interactive
and this here this is the way how how to
define it in in code and that's all you
have to do and then you just add boolean
property that has the same name
interactive it has getter is it has a
setter and for the property itself we
have lazy initialization that this is
very common for all the controls that
are used in the in the JDK as far as I
know they also use lazy initialization
that means as long as you don't call the
setter in this case the property itself
won't be initialized and the first time
you call it then it will be initialized
and instead of normal simple boolean
property we have a boolean property base
and then invalidated method here we have
this get the interactive sort of class
and let me see okay we have to get in
and we have the name this is standard
this is the same for all the properties
but this is all you have to do in code
to get this style able at this sort of
classes set up so that means you create
the pasola class itself give it a name
create a boolean property for that and
then you have forget our setter and the
property method which should look like
this where you link to the swaddle class
and that's all you have to do and then
in the CSS
you can use it like this that means yeah
I have a style for example my control
here I linked to a skin and I defined a
soluble property and then I have this my
control and there's an area whatever it
is give it's a circle for example and
this circle should have the background
color with the inserts and the radius
whatever and if we switch in the code to
interactive set interactive true then it
will get this background color all right
so this is just switching a boolean
variable in CSS in principle that's the
way how it works and it may be become
more clear when I show you how to use it
you have a control in this control we
have the method the setter set
interactive this just toggles and we
created just a button the toggle button
and the listener here they actually went
when it's triggered it will just toggle
this set interactive right it will is
inductive true and false and the way
around and it will switch the text of
the toggle button and this is the
interesting thing
that's our region this is the style that
is supplied in CSS if I press the button
I will toggle the interactive boolean
property and that will switch the style
to this one right so that is how is what
how it works which is very useful if you
have for example like I said if you have
States for your control and you would
like to visualize them then episode or
class it perfect way to do that for all
the boolean properties that have direct
influence on the visuals you slaughter
classes you can do it in another way by
listening to a normal class and then set
the style and all that stuff works but
this is much more convenient right you
can imagine if you have a boolean
property in your control the same one
active then you can in your skin you can
listen to this one to this property if
it changes you just set another style
class it has the same effect but the
mechanism with the soil class is
in build already so you don't have to do
all that stuff you can just create the
boolean property overwrite the right
methods create the total class object
and then that's what you have to do very
easy and in the CSS it's even more clean
because it's it's really clear okay this
is the state interactive and this is the
style that will be applied in that
moment right I think if you take a look
at the code it's more clear first of all
this is very easy first of all the
theory is a little bit complex sometimes
for the soluble properties especially
that's a lot of code you have to write
but if you use it you will see it's
always just a few lines of code you have
to change and the rest is just yeah you
need it it's some kind of boilerplate so
that is how it looks to me but for the
boolean for the CSS auto classes that's
really nice it's not that much any
questions to that stuff that's very easy
enough and easy to apply the next thing
which is new and that is really a big
one we have now style properties they
have been a while available in JDK 7 in
Java FX 2 but that was all private API
and to be honest I never tried it
because for me it was too complex now
this stuff is open means it's public API
and what it is is it allows you to style
variables that are defined in CSS from
code and you were also it's possible to
add listener so for example you have a
it's so hard to explain if I have no
code let's say you have a CSS file in
the CSS file you defined something like
- background color or - my color
something like that and now your user
load a new CSS file and overrides this
variable how get you the information in
your control that user overwrite this
variable right that's the way this works
and this gives you the opportunity to
get this information are the stars on
the star
was overridden so I can now read out the
new value and use it in code because
sometimes for example my example is a
simple simple LED control and in this I
have the problem that the color of the
LED could be red could be blue whatever
and the effect that when it glows it
should have some drop shadow around it
and I need also an inner shadow that
means I have to change the effects and
this is only possible in code that means
I need to know what color is in the CSS
and then I have to read it in the code
and then I have to create the effects
and code this was not possible for me in
JavaFX 2 but in JavaFX 8 you can use
this style web properties to do that so
how to do that it's a lot of code first
of all you create a style property that
means this is the default color if
nothing is defined then we use this one
when we have a standard object property
of type paint in this case usually you
also could use color but for me the you
would see there is something called a
paint converter which is responsible for
converting the string that is in the in
the CSS file to a class or to an object
of type color in the code but the color
converter somehow didn't work for me I
have no idea I didn't get it running but
the paint converter had worked and I
didn't found documentation for that so
that's the reason why I use paint even
if I just set a normal color we have a
getter and we return the default color
if nothing is defined otherwise we
return the property color we have a
setter of course and here we just call
the property method and set it directly
and like in the CSS title classes we
have to with its again lazy
initialization here we have to create a
new style object property that's the
difference usually here you would say
new object property of type paint but in
case because it should be styler will
you create a new style object property
and this is then default value and we
have again we get the CSS metadata which
returns something of the style
properties dot area color we will see
what this is and then okay we have the
moment method to return the beam and the
string so that's easy
okay lazy initialization can you see a
different color now no okay usually I'm
this is color that you can see which
type is that which stuff is the lazy
initialization initialization so that's
the reason why there is the box the next
step we have to do is we have to create
the CSS metadata it means this is the
stuff that is and you see this is a lot
which is responsible for defining which
variable in CSS should be read out and
converted here is the that I mentioned
some paint converter that means the
paint converter reads out that variable
converts it back to a to a color in this
case which is a kind of paint right and
I expected that I can use a color and in
code everything works but it didn't work
for me I have no idea if it's it should
work right yeah so that's what I
expected but paint everything was fine
with color it didn't work maybe that is
just a back at the moment it might be so
just if you ask yourself why I use paint
instead of color and you will figure out
that this is always the same yeah if you
do this you have to write all this code
for all the style properties again and
again and again which is sometimes a
little bit bad but that's the stuff you
need to do we check is that there is
that property settable and then we
decide okay if it's bound or not so all
that stuff that that is not very special
we return it of course this is just a
normal like a normal property let me see
what is the special thing here this is
the
now if this is the style of properties
or sorry I'm totally confused at the
moment oh okay
damn it okay create a CSS meta data
sorry we create the dinner class which
is this style properties and these style
properties contain all your style
properties that you define that means in
this case only one but this block you
have to add for each of your style
property right so that means the CSS
meta data you have to create for all of
these style properties and then we have
a list and this list name styler bills
contains then all these style properties
that you have defined that means this
will be become a long list and you have
lots of these blocks in this private
static class that takes a lot of space
in your code you would see it in the in
the demo code on github and we will see
also some demos where I can show it to
you okay then now we have to make the
CSS engineer way of that stuff alright
so and therefore we have two methods
that you have to add to your control and
which is the gate class metadata get
trust yes as metadata which will return
this list of soluble properties and then
we have again here we can get the I
don't know why we have two of those but
two of them we need both otherwise it
doesn't work you can just it changed in
JDK 8 over the time first of all there
was only one method and then they add
second one and this text I just copied
from I think I found in the
documentation so you can just copy that
stuff in your class and use it like this
the stuff you have to change is this
thing this you have to add for all of
your sellable properties and your effort
to add the name here in this list that's
the stuff you really have to change all
the rest is the same it's always this
boilerplate you have to create but it
makes it possible to use the style of
the properties so what it does is in the
CSS file we create here you see the area
color and now it's possible to change
that for example by code or I can also
change it with another CSS file alright
and I use it here in the sort of class
and here and usually in a normal style
class and that leads to this behavior I
have a class again my control I add a
toggle button to switch it and then what
I do is my control set area color that
means I just call the setter of this
color change it to another value in this
case it's lime then the paint converter
will convert that in the CSS style it's
there it's just the word London and it
will be used for the for this style
class and if I in the other way it's
blue so and it leads to this behavior if
I press the button it will switch to
lime and the only thing that changes
this definition right in the CSS is then
- area
- color is lime and here it's blue and
the other effect is that if you load a
CSS file where you overwrite that one
your listener will be triggered and then
you see oh the color change and then you
can read it back because it's just just
a property and then you can use that
color for other stuff in your code and
unfortunately we can't we cannot change
effects in CSS that would make things
easier I filed a talk about that on
issue and the answer was no you can do
it by yourself it's open source you know
yeah okay that was a good answer and
then I started looking into the code but
it took me two hours just to figure out
where it is and then I stopped that's
the reason why I'm really happy that I
have the style of the properties like
can get around this problem of chaining
effects so I can chain than encode
because now I know when the stuff change
I can read out the color and I'm good to
go so this is because that's so
theoretical and you really have to use
it to understand it and I'm that in
explaining code I will focus on the
different kinds of controls and how to
create it because it I think this is
more interesting for
and if you were try to figure out how
these soluble properties and the proto
classes work take a look at the code
that I will show you on the github repo
because it's very easy to understand
then you see our ok that's now I
understand how it works and I think it's
also documentation in the open jfx wiki
about the style of the properties which
is quite good so there's everything
explained so these are the things I
figured out how to create custom
controls in Java effects so the first
thing you can do and that's really the
easiest one is to just customize the CSS
that's available right so we start we
have just a CSS file add it to a control
done customized example we take a button
we get we have here this is my button
the style button we at the start class
my minus button and just to have the
original one I just added a second one
and on the scene we load our specific
style file right the CSS file style.css
so in the CSS I just changed the
variables that are available for about
for a button right I know okay in the
modernist CSS of JDK 8 we have different
styles available for a button and I just
changed some of them so it looked like
this okay this is my start button that's
the standard button it's a custom one
right it's you just change the look of
it but it's customized it's in this way
it's a custom control and you can really
tweak these controls so that you won't
see that it's this is a button no that's
something else right or for example the
slider you can also tweak it to that it
looks completely different so that's the
reason why it makes sense to say
customize customizing the CSS is really
creating a custom control so the summary
of that is that's very simple and it's
very flexible but you need knowledge of
the CSS
and that means you have to have a look
at the modern our CSS file and this file
is crazy it's around 3,000 lines of code
and it really takes some time to
understand how these things work
together so it's amazing that they did
it let it let it get it running like
this so when I saw the first time I just
wasn't my god what's that so because
there is for this fire that's just
inline documentation so you have to
really read through all that stuff and
then try to figure out which variables
depend on which very one but if you get
into this you see that is so powerful
you can do so many things in CSS that's
amazing yeah you need knowledge of CSS
and you need to read the monomer no more
than a CSS file that's really important
to do that
so this otherwise you will never figure
out what stuff is available and what you
can change and what is the influence
influence of changing parameters in that
file
did somebody took a look at the
modernist CSS already yeah okay
the caspin is the one from JDK 7 right
so that was for to learn this was better
structured because there you have
something like dot button and then
everything that relates to the button is
in one place and the modern are there is
something like button like things and
then you have all this stuff that is
like a button and then only the
parameters that are related to this
stuff which makes it sometimes hard
because if you search for button then
you miss something and then you have a
button like things okay and then you
it's it's different so the modern is the
the JDK 8 version and the Caspian was
the older one
no the problem is that so the modern
RCSS it's it you know the CSS of JavaFX
it's not the same as the standard CSS
file the question was if there if I got
it right that there are editors that can
handle that stuff and if this wouldn't
help to to learn it and you maybe could
avoid taking a look in the modernist CSS
no because it's not standard CSS so
these editors can't really read it and
then oh yeah yeah but okay but this is
what that's something different yeah if
you use it IDE so I thought it was just
special CSS editors right oh yeah in the
Edit in the IDE the support is there so
that's no problem if you have NetBeans
IntelliJ or eclipse we have support for
the CSS for the Java effects CSS and
there you get help of course but even if
you get the help from the IDE you have
to look in the madina to understand the
relationships of all these different
variables that's very important so the
next thing you can do is you can just
extend an existing control right so my
example here is you know who has a Mac
yeah so and on a Mac you you have a
search field and then in one corner
there's this little loop and then you
have the possibility that on the right
side most of the times if you have text
in there then there's a little cross you
can click on the cross then the text is
gone to clear the field okay how to do
this in Java effects that there are
solutions for that but I would like to
show you how you can do this by tweaking
a existing control so what we need is we
have to build an extent and control then
we need a CSS file and that's our custom
control so what I do is I extend a text
field and just in the constructor I'd
only add another CSS file and this CSS
file contains certain style classes that
I use and then I set a new skin because
I need my own skin to to create this
effects that I need
and that's all that's my whole search
text box class so the skin that I need
extends the textfield skin and I just
add two regions one for the loop one for
this cross and in the constructor I that
that's my kind of doing it I just always
call this init graphics and then I have
a method register listeners and if we
take a look at the inner traffic stuff I
just instantiate the regions at the
style class loop and okay I disable the
focus traversal and also for the cross
button I do the same just at the start
class cross button and then I add this
two regions to the existing text field
and then in my register listeners method
okay that's that's logic you don't have
to take a look at that it just just to
explain it shortly the behavior should
be if the text field is empty not it's
just an empty text field if I enter it
then there should be no there should be
the loop if it's empty if I enter it the
loop should be gone I type something in
and then there should the cross should
be appear that I can clear it right I
have screenshots to explain it that's
just the logic that I use but you can
add it to your skin class and this is
now the CSS that I add to these two
regions which is for the loop I just
used this - ethics - shape this is an
SVG path that is exactly this little
loop and this one here is the little
cross you will see it on the screenshot
and this is nothing special that's just
stunner
JavaFX CSS code and that leads to this
if nothing if the text field is empty
then it will draw the loop on the lock
on the left side in the skin I of course
I said it to dispositions if it has the
focus the loop is gone and then I can
type in something and after that I got
this little cross here I can press the
cross and then the text would be erased
but if I move the focus to the next
field the cross would be invisible so
that's the behavior that means this is
an inference of exactly that what I like
half that is my search text field with
this cross to delete the text and the
loop that shows okay this is a text
field and the only thing I did was I
just added two regions to the text field
and starred them using CSS done very
easy and this was hell in swing if you
would like to do this and that was
really not that easy yes a question yeah
the positioning I'm not sure how I
positioned that stuff no in this case
not I did it in code you can we can see
it in the in the code that I did I have
but then that is very easy that that's
really not hard to do this stuff I was
wondering myself because I was searching
for an example I thought okay I can
because I think there is also a search
field in in JavaFX
yeah so but this example was just too
too easy to to do so you can see and
this will also work for other controls
for example if you have whatever you
need a text field with the button on the
right side or something then you can do
also this one
yes yeah that we come to this point this
is if you create a custom control in
another way so to summarize extending an
existing control that's it that's useful
for simple controls like this text field
where you just have to add something or
add a different behavior or something
like that
it started with via CSS you need again
you have to have knowledge of the CSS
otherwise forget it and again you need
knowledge of modernist CSS and of the
class you extend right you need to know
okay how does the text field work that
you can hook up and there in the right
places the good thing is this stuff is
open source and I can just recommend go
to the JFX masters repo make a clone on
your local hard drive and take a look at
the code it's really it helps a lot to
understand what these guys are doing
there because sometimes it's really
fascinating if you take a look at the
code and then say okay and I never
expected that they do it like this so
it's really good so this is nothing that
is impossible you can do it by yourself
the modern our CSS is somewhere in the
jar it's in the archie j fix our tea jar
and there's also somewhere on the weapon
though Jeff expertly there's one line of
code in the shell that you can type and
it will extract this the CSS file out of
the jar so that you can take a look at
it otherwise you won't get into the you
won't get the file it's not available
like except except you you have the
sources on your computer so for the
other types of controls they have many
things in common that are the same
always so and the canvas like control
the region style and I named it library
style they have all the same structure
somehow and the most of the times is
just about we have logic and we have
graphics code and some of them combine
them in one class and others just
separate them this stuff that's the the
difference so
the similar things is we have to
initialize the size once for the
controller then we have to initialize
the graphics once yeah so this is really
important that you just if you add all
these nodes then just edit once to your
control and then leave it there don't
remove it and add new ones and remove it
again and add one so that you should
avoid that and most of the times when I
give the JavaFX training and people say
oh we can't we can't because we have
something for example we have a user
interface and if the administrator locks
in then it should show this and if the
another guy locked in and it should only
show a few of these things well but you
know that in worst case that British
trader logs in so you can add all these
notes and just take it away from the
scene graph by set managed forwards for
example on invisible thoughts and just
set manage true and set visible true so
you can do this you can come around this
problem that you have to dynamically
change the scene graph but never do
something like remove this node from the
scene graph and then in the next parts
edit again just with another color
that's not good for performance reasons
so and it's it you will see it in the
code you can really do that you add the
stuff once and then you just modify
properties but that's good and then the
controls will be fast okay then you have
to register listeners to two things if
you would like to have interaction and
you need property handling and of course
you need something to resize it controls
most of the controls that I do should
resize properly so this is also
something that they have in common
the initializing the size are usually
doing an init method and this is just
check if pref size is set or not and if
it's null or something or smaller than
now than just set it to the preferred
size that I have defined the same for
minimum size and maximum size just make
sure that these variables are set right
that that's my initialize method and
this is in all of my controls in the
controls of the JDK it's totally
different right so this is
personal thing then I have always a
method to initialize the graphics that's
the place where I put all the stuff on
the scene graph with this line of code
that means here you live define all your
effects and for example regions and
whatever you have all the notes and then
you add it to your control and then I
have a method that register all the
listeners you can I because this was in
JDK 7 we have a method that was handle
control property changed and that took a
string and because I was used to it
I still use this approach because in the
JDK 8 what what happened was we had the
control asked in and the behavior in JDK
7 JavaFX 2 and every control in the JDK
uses this approach but if you take a
look at the behavior classes for example
of if you create a custom control in JDK
7 in Java FX 2 and you create your own
behavior class then you will see that if
you add listener methods for Mouse
events for example they are their events
not so and then I asked Jonathan why you
implemented the mouse listener stuff but
not the keyless nothings and he said
yeah you know not sure if this is the
right approach and how to do it in the
future so the JDK controls still
implement this controlled skinned
behavior but there's much that was
private API in JDK 7 in JDK 8 the skin
base now is public and there is no
behavior in that way it was in JDK 7
therefore it's now there's behavior skin
base which is the the old skin base that
we had in JDK 7 and that is because I
think the JDK 8 controls still have skin
behavior and control right
and I asked Jonathan before the Java 1
what I should say will this last or not
and he said yeah it's not really sure at
the moment if we will get the behavior
and or not so my controls don't have a
behavior
at the moment I just used a control and
skin base and over in the skin right and
that's it and a CSS file and to me it
makes sense but we will come to this
point just to explain why I use this
handle controlled property change this
was a method that was in the superclass
in the in the skin base this method was
available and in JDK 8 this method is
not available anymore
so you have to implement it by yourself
so that means I just hook up some
listeners to my control to my properties
of my control this is the stuff that I
used to trigger the resizing that means
as soon as the width or height changes I
call this hand control property change
with the parameter resize and this is
the method I call right so if it's
resize in this case I just call the
resize method so you make sure that as
soon as something changed because in
Java X the layout container controls the
size of your control
that means you if someone enlarges the
window or the cell in the table view for
example and your control should resize
then you have to react on this the width
changed okay do something redraw or
whatever all right so and this is the
resize method in in my controls like I
said this is my approach this is not as
not a rule so in the JDK controls look
totally different and every developer
has its own thing how he does it so
that's my way and in the resize method I
just check okay give me the current
width and height and then if this is
larger than zero then just set the
preface eyes and relocate that means if
I have something that is smaller than
the complete size I have to place it
somewhere right if it's relative
positions within the control so this is
stuff that all these different things
have in common and as an example yeah I
take the good old LED because I used it
last year for the same reason that it's
it's so simple but it has all the things
I need to explain it so we have an LED
control this has two States it's off or
on
and the structure of that the graphical
structures is this so we have a frame in
the background then we have something I
called main in the in the foreground and
on top it's the highlight so that's very
simple and then if it's on that's the
style of the main right so how to do
that in this different kind of control
types so if we're using the canvas then
there are two ways because the canvas
can't resize automatically you can
either create your own canvas class and
implement all the reasons automatic
resizing stuff or you can simply use a
region and put the canvas in there
it's also possible in this case I use
that approach because then the region
takes care about automatic resizing and
that stuff so we take a region extended
name it led we define or default sizes
for minimum maximum and preferred then
we have some properties and then we have
some graphics code right in this case
everything is in one control that means
we have the logic the properties and
that stuff and we have the graphics code
okay I said that already
right we have properties and it
unfortunately it's it's not colored the
background in my slides in is colored so
yeah I don't know the Bema doesn't take
the color so this is the properties
right and this is the graphical quote
and you see we just have one node the
canvas and that's all who knows canvas
someone code it in canvas already html5
canvas okay because it's the same more
or less the advantages with the canvas
it's some kind of immediate mode
rendering which is this wing style of
doing it so again we have the init
method where I take care about that it
has its initial size to control and then
I initialize the graphics in this case
it's just create the new canvas the
graphics context on the canvas and then
at the canvas to the region and that's
it very simple and I register some
listeners for the properties within
height the frame could be visible or not
it could be on or not and the color of
the property right of the LED and then I
call just this draw method and in the
draw method that should be very familiar
for swing developers who code swing okay
custom control since me yeah so you know
what I'm talking about
this is repaint or calling over right
yeah I forgot it
paint component thank you so this is
yeah exactly the same approach that you
use in canvas right I clear the can the
the canvas here I set the size first
then I clear it and then I draw the
frame here with the gradient and then I
set full frame and over this is the
background then we do the same we create
an inner shadow if its own and draw them
the light version if it's off then the
dark version so this is and so on and so
on so you draw all their things like you
did it in swing okay so summarize it the
advantage is this is just one node on
the scene graph and it behaves like an
image right it's an image in principle
where you can draw on but you have to
take care about that that means if you
clutter your drawing you have to clear
it it won't be clear automatically so
you have to call clear rect or something
like that on the graphics context then
it's some kind of immediate mode
rendering that means you can decide when
to render that stuff it's not done
automatically because with the retained
mode rendering of the scene graph you
have no influence you change the
property and for the next pallet that
will be rear-ended automatically here
you can decide when to render this
canvas which is quite powerful because
you can save a lot of nodes then my best
example is always if I create these
gauges with all the tick marks for
example for the axis in swing that was
each tick mark was a line if you do that
in JavaFX you created
400 tick mark 600 notes okay then you
can create one path with all these lines
also possible but with canvas you can
draw the complete background in one note
created once just one note in the scene
graph so this is very powerful so keep
that in mind the disadvantage is canvas
is using a different API to draw things
this is html5 canvas it's exactly the
same just setting colors is a little bit
different in fonts but the rest is
exactly the same as in html5 canvas so
if you are not used to it you will
figure out hmm this is I have to learn
something new but it's worth spending
some time on it you have no interaction
because the canvas is just one note you
can hook up a listener to this note but
not to certain things in this note
because it's just a plain drawing you
have to keep that in mind if you need
interaction in certain areas of this
control forget about it
right but for this led no problem this
is not directly styling via CSS but you
can use style web properties because if
I have a CSS file and I load a new CSS
file which overrides for example the led
color my listener will get triggered and
then I can read out the color and I can
use it in the canvas to draw it so this
is a possible way on using CSS even with
with the canvas node so then this is the
extending region approach and that's the
approach which I would recommend using
most of the times because that's the
easiest thing to do the region is a very
lightweight node and you just extend
region at the CSS file and that's your
control in principle the same thing that
we did with the canvas but this time we
just don't add a canvas we add more
things right we add nodes to the region
so this is exactly the same stuff that
we saw with the canvas control except we
don't have just one canvas we have no
region for the frame a region for the
led a region for the highlight and then
we have some effects like an inner
shadow and a drop shadow
okay yes I know
then in the constructor we just load the
CSS file for that control and then we
add the LED class that means this class
is available to all the regions in this
control so I don't have to edit all the
time and then okay in it is the same as
before in the initialized graphics now
before with the cameras are just
initialized the new canvas and edit to
the to the control and here now I create
a new region for the frame I add the
frame start class then and okay I set
the opacity if if the frame is visible
or not and then for the region that
means the the LED region in the in the
center of the main part I just add the
start class main and this is something
where I don't know if this is the right
way to do it but if I would like to set
a style like the color from code there's
no other way to do it right so for
example I ever I defined this variable
in CSS and I would like to change it
from code then I have to do it like this
there's no other way around it there's
no API for the CSS right okay so this is
a little bit inconvenient because you
have to in this case I would like to
make it possible that someone who uses
this control not only is able to use CSS
but also can say set LED color to green
only by code so how will this now come
into the CSS no it's a written yet so
it's so I can set the the LED color in
my control by code but then I because
it's based on CSS I have to somehow fit
this into the CSS file and therefore I
use the set style method and then you
see what I have to do I read out the
color from the property to string
replace this one with that and then it
will set this stuff to the CSS file and
it will apply the CSS that works
definitely I used it also in JavaFX 2.2
but I wish it would be easier to do that
from
so that I can my wish would be that this
would be automatic yes yeah I think yes
that could that could work I never tried
it because this is so easy to do but you
should avoid it if possible that's my
problem that's the reason why I'm so a
little bit yeah yeah
yeah that and walk through this thing
and then yeah okay yeah ah yes right
okay so forget about that it's possible
but there are better ways to do it it's
just one line of code and it works but
that's not a really nice thing to do
because this is inline CSS this is not
not that nice but it works and in this
case because I just do it once when I
change the color of the LED then I think
it's okay and the next thing is I have
the highlighter at the highlight class
and then I define the effects that I
need and at last we just add all that
stuff to the control in the right order
of course I register the listeners yeah
we don't have to go through that and
this is now my resize method that means
if someone and largest if I put in a
stack paint someone enlarges that stuff
then I want to make sure like to make
sure that it's at the right size so I
just check because it's a square control
I don't have to use width and height and
just check okay should always be the
smallest if it's written is smaller than
that should be the size of the control
then I just adjust the the effects set
the preferred size of the frame because
this is has the whole space and then set
the prefer side of the inner part the
highlight and the relocate will just
place it to the right position so that
they are centered of course you can also
use a stack pane and do that but the
stack pain is more heavy than a region
so that's the reason why I stick to a
region in this case and then this will
only be done when you resize that stuff
and if it's at the right size will never
call that method again and in CSS then
this is what I did I have the dot led
class I define the color red and this is
the frame and for the frame I then just
use the frame color and set it to the
background radius so that means I can
also define a rectangular background if
I like I just set this to 0 then the
we'll just be a square so that means it
would just be a rectangular square and
for the main class right it's the same
adjust the final linear gradient use
this LED color variable this is very
dark that means a derive the original
color set it minus eighty percent which
is really dark and then if it's if I use
the CSS product class on then it's just
brighter version of that color so to
summarize this is very useful if you
have controls that have not many
properties so and for many controls this
is true you can use this approach very
nicely
it started with via CSS you need to know
JavaFX CSS and it mixes properties with
graphics that means you have one class
you have all the properties in there and
you have the graphics code in there and
the last version that's what I call the
library style that this is just the
split up so it splits up the logic the
properties from the graphics code and
you can also use the behavior but I use
no behavior anymore so I just use the
control the skin and the CSS but you can
still use it but I let the behavior skin
base is private right so if you would
like to do something based on public API
this is the way to go and because you
never know what happens to the private
stuff in the future so with this you
should be safe I hope so that means we
have two classes and a CSS file in this
case we extend a control there we have
all started with properties the proto
class on and so on and here we have all
the properties and you see here is no
graphics code in there this is really
just the properties and what else is
different to Java FX 2 is in Java FX 2
the skin and the control was a note that
means you always have at least two notes
which was not needed because on the
scene graph it would be enough to have
one node in JDK 8 the control is a node
and the skin is just
an object that's a big difference there
right okay in principle this is again
the same we add the style class led here
we have the properties then here we have
all the getters and setters or style
property and this is now the thing which
was asked before in this kind of doing a
control we have to get uj8 user agent
stylesheet and here we define the style
the the CSS file that should be loaded
and in this CSS file we find the link to
the skin class but there's also
something that is is it yeah it's a the
create default skin that this is also
new in JDK a that was not available in
JDK 7 this is also something you have to
keep in mind so if you create some you
need this this you override this create
default skin so and it feels a little
bit strange that you have to load the
CSS first to find the skin class and the
problem is because in the CSS it's just
a string and if you have a typo in there
you will get an error because it doesn't
find the skin right so this is that is a
little bit strange then the skin and
this is what I told you in seven it
looked the same except that here you
will find something like LED and LED
behavior but in eight the skin base just
takes a control and this is public API
and if you would like to reduce the old
approach then its behavior skin base and
then it's the same as in seven and here
we now only have the graphics code that
means here are the size definitions here
we have the regions the effects and in
the initial in a constructor
I just called these methods and we know
it already yes in it yet graphics and
this is exactly the same as in the
region approach this is just a separated
version of that this is the only
difference right that's the way I use it
but everything everything else is
exactly the same as in the region thing
so we have the initialized graphics we
create the regions at the start classes
and at last we we add everything to that
control and then I have again my resize
method that I call and something of the
size changes and then I resize and
relocate the different regions so CSS
and this is the only difference to the
region version here you have to define
not only the LED skin the file of the
LED but also the path to that so it
means the package it's in the package
LED CSS dot LED skin and it's in - FX -
skin and this must you must define that
other file and if you have a typo here
you will you won't see it during compile
time it's just when you start to run it
and you get something like I can't find
skin or something like that I can't
really remember but you get an exception
and then most of the times it's because
you moved it to another package and the
IDE didn't change this one so you have
to change it manually and you forgot it
and then let put happen and the rest is
the same and CSS this is nearly the same
CSS before I have the main main on
highlight and so on and to summarize
this one that's useful if you have if
you create a library of controls and
this approaches is it's quite useful
because or if you really have very
complex controls with lots of properties
in there and lots of drawing code if you
use a region approach then everything is
in one big control and you can't change
the skin for example if you have just a
region and you can only work with the
CSS in this case you can also exchange a
skin together with the CSS that means
you have also the capability of changing
behavior some something like this with
the region that's not possible because
then you have to the region just takes
one CSS file and you had everything is
defined in the region file with the skin
approach you can exchange the skin we
an additional CSS these two are bound
together somehow
so I never exchange only a skin or only
the CSS is okay but only the skin
doesn't make sense
all right so skin and CSS are really
this is just like a unit but you can
exchange them we did this with the text
field right I created my own skin and I
added a CSS file to this when I extended
the text field to the search text field
so that's the advantage if you use this
skin approach because you have to
separate the logic from the from the
graphic stuff so now to some tips I have
no idea about the time I'm still on time
oh it's just really well let me give you
one example this is if you would like to
create this star which is really simple
you can do it all in code just then it
would look like this but you create a
lot of objects here and you see I have
fixed coordinates here and this will
then set the color and with the stroke
and the fill okay we can make use of CSS
means instead of setting code and
filling code in the stroke and fill in
code we just add a style class then we
can use SVG instead of creating all that
code it's just this it's the same thing
this means move to line 2 line 2 line 2
and so on
much shorter and usually you don't need
a handle on all these different points
of the style if you really need it then
you have to go the code approach but
this is much shorter so the problem
again is if you would like to resize
that and you have the code approach then
your code looks like this in worst case
right if you resize the control you have
to calculate all these factors and
multiply them with the width and height
and so on you can use scale in Java fix
works it's much smaller but it's
sometimes not so easy to figure out the
scaling factors if you do it all in CSS
completely then your just this is the
only thing you need in code
and that's the stuff that you need to do
in CSS and the resizing then is just oh
it's not India the resizing with just
changing this stuff changing the
preferred size that's all you have to do
because in CSS the stuff is
automatically resized by scale shape
true you don't have to take care about
resizing all that things and the
gradient for example if you have a
gradient in there
it's just percentage you say from 0% to
100% it doesn't matter which size it has
and the last thing is towards do
somebody know the Caspian styler which
this was for Caspian but it's still
valid so you can really use this tool
you will find it on FX experience comm
and then scenic view is the most
important thing if we create controls
who know scenic view so everyone who not
raise this finger take a look at look at
FX experience calm and download this
tool it's some kind of original debugger
or for JavaFX stuff really really useful
you can click on something in your
control and it will highlight the the
properties that you are the regions that
you clicked on and stuff like that
really good if you do custom controls
with graphically intense things you need
graphics programs like Inkscape
illustrator fireworks something like
that I created a little tool that
converts fxg files directly into a
control but that's very special because
it's you need to know that how to handle
it and if you would like to get the
source code of all these stuff it's in
this repository so all these this led
controller I created in really five
different ways and all the code is in
there so you can really see how it works
and try to figure out to do your own
stuff and because we are running out of
time I just can say JavaFX rocks whoo
and if you have any questions and you
don't mind that we are over time just
ask
yes of course okay
oh so give me a second
camel it doesn't work hi change it
wait it's here can you read it I hope so
any other questions yes yeah yeah
Selleck view was really something you
you have to use if you work with JavaFX
it's really useful anything else then
thanks for attending</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>