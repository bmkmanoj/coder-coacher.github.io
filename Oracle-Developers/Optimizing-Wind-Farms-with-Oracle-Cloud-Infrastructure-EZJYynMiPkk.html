<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Optimizing Wind Farms with Oracle Cloud Infrastructure | Coder Coacher - Coaching Coders</title><meta content="Optimizing Wind Farms with Oracle Cloud Infrastructure - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Developers/">Oracle Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Optimizing Wind Farms with Oracle Cloud Infrastructure</b></h2><h5 class="post__date">2017-10-08</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/EZJYynMiPkk" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">you're the luckiest people in the
building this is going to be an awesome
talk
for joining us my name is Martin Hogg I
work for Oracle out Bristol in the UK
and this is Mike Turner from a company
called Xena Tech in the UK and today
we're going to talk to you about the
Oracle cloud infrastructure the cloud
the container native application
development platform and how Mike's
company are using that to do amazing
fluid dynamic applications at speed and
at scaling cloud so safe harbor
statement everyone has to read this
remember this it's really important
stuff so as I say this is Mike and I'm
Martin and we're both based in Bristol
in the UK I run a team in Bristol and
we're focused on Oracle's latest
generation our Oracle cloud
infrastructure and we're also doing a
lot of work on the clouds contain a
native application development platform
and when we were doing the work over the
last couple of years we've been looking
for companies that are looking to do
very very interesting things on cloud
particularly at companies that have
massive amounts of data and massive
amounts of compute and need and through
that investigation that exploration we
came across Sina tech and that's how
Mike and I came to work together if
you're ever in the UK Bristol is an
awesome place it's the home of hot air
balloons we make more hot air balloons
than anyone else in the world and we
have a suspension bridge that's older
than the Golden Gate Bridge and cooler
clearly so if you're ever in town to pop
by and say hi
okay so talk a little bit how we came to
work together so as I mentioned my team
work on the Oracle cloud infrastructure
that's the Iast layer and we're doing an
awful lot of work now on the pass their
Oracle Mike's company in xena tech are
doing a whole bunch of work building
applications running on top of this is
and pass so to provide a little context
before Mike starts talking about what
he's doing I'll walk through what the
Oracle I asked there is well that looks
like how it works and what's different
about that talk a little bit about the
paas layer I'm so you've got some
context for what that platform looks
like anyone who's in the Java one
keynote yesterday will have seen mark
cabbage announced a whole bunch of this
stuff so I'll just give a little fly
past of what that is and then hand over
to Mike - Wow
you with some computational fluid
dynamics at speed and scale so let's
look at the infrastructure layer first
so a couple years back we looked at what
was going on in public cloud and we
looked at how I asked services were
running in general and one thing that
became apparent was a lot of the
virtualization in many eius offerings is
done in hypervisors running on the
machines right so network virtualization
IO virtualization and virtualization of
compute is done in hypervisor layer now
that works in some cases but it
introduces a degree of unpredictability
into things like latency and bandwidth
for i/o and for network interactions so
when we looked at what we were doing
with our latest generation of
infrastructure we took a step back and
we decided that we would push
virtualization down into the physical
network so the physical network the
switches the network cards and the
physical network designs in the OCI data
centers they're built around the clost
network architecture which is a telco
architecture and this architecture means
that even if we have 10 million ports in
a data center between any two ports
there are most two hops and therefore
very low latency communication and
that's guaranteed latency there will
never be more than two hops in addition
the physical network infrastructure we
have guaranteed bandwidth there is no
oversubscription of bandwidth and so
between any two ports in the networks in
our data center we have very high
predictable bandwidth communication and
very low latencies so that fundamental
underpinning of the physical network
allows us to do interesting things on
top of that so one thing we can do is
for compute in addition to be able to
get the kind of virtual machines you can
get in lots of cloud providers you can
also get bare metal servers these bare
metal servers are connected to this
network these are big fast machines 36
cos terabytes of RAM many terabytes a
very fast locally attached disk and
these machines because they're attached
to this network where the virtualization
is done a kind of unaware there is
there's even virtual eyes
from happening HSC a physical network
and the packets that they used to
communicate with it with other machines
on the network are going very fast and
very high bandwidth IO is super fast and
we have very high throughput and strong
consistency block storage as well so
this underlying underpinning of cloud
infrastructure and the massive speed and
predictability is what led us to look
for HPC workloads and companies like
mics to see if they can leverage this
kind of thing to do the kind of things
you would normally do on supercomputers
and interestingly they can so there's a
whole bunch of information you guys can
find out about the OCI layer lots of
stuff at the booths downstairs and some
links at the end of the presentation if
you want to find out more but just as a
fly pass that's this underlying is there
dollar requires on top of that layer is
you would have heard in the Java on
keynote if you were there we have a
container native application development
platform and this platform is all based
around docker so we have docker as the
underlying container packaging form and
kubernetes as the infrastructure for
orchestrating container workloads across
this very high-performance underlying
physical is layer in addition to having
a kubernetes based orchestration engine
we have a worker product that does
container pipelines which relays that
your code from github all the way
through and deploy that code build that
code test that code unroll that out to a
kubernetes cluster we have the FN
project which is the service offering
that was open sourced in the java one
keynote yesterday a bunch of
micro-services technologies that we make
available to people to use if they're
building micro service based
architectures to running kubernetes and
also in the keynote yesterday you will
have seen the java diagnostics so when
you have lots of java virtual machine
spread across a big network running on
this container native platform running
on our cloud infrastructure you need a
really good way of understanding what's
going on with those machines where the
memory leaks where the delays where the
bottlenecks where the failures so we
have a really good distributed
diagnostics and performance
so that's context really for everything
that Mike's going to talk about now
so this infrastructure layer the is
layer and on top of this is layer we
have this cloud native platform layer
and that context hope sets mic up
sensibly to talk about what his company
is doing really interesting stuff on top
of this whole stack so Mike Leavitt
thanks Martin
yeah my name is Mike Turner from a
company called Xena tech so this talk is
really about I guess it's kind of the
application that we're sitting on top of
some of the Oracle infrastructure so
just to kick off a little bit of
information about Xena Tech we're quite
a small company in Bristol our
background is in computational
engineering and high-performance
computing so be informed in 2012 and
we've been slowly growing since we have
two main products one is a code called
Zen CFD which is a fluid dynamics code
written totally by ourselves and the
idea behind it is it's it's it's
designed to take advantage of modern
computing hardware and scale what we
think very very well said CFD obviously
requires quite a lot of computation to
run and as a small company we didn't
have access to large amounts of
computing so we started using kind of
on-demand computing resources and the
cloud providers and that worked really
really well for us and so we kind of
developed that into another product
which we call epic which is kind of
trying to enable other people to do kind
of what we're doing in our in our day to
day work this talk I'll talk mainly
about said CFD and in particular how
we're using it in some analysis of wind
farms we're not actually we're we're a
tools provider we're not directly
involved in the in the wind sector we
provide tools to people that are design
and maintain these things so I've just
pulled some facts and figures about the
the wind industry and just to kind of
set this at the scene quite nice ones at
the bottom there so over 10 percent of
the use power is generated from wind
energy at the moment
that fluctuates a bit but that was last
year and 112 billion pounds a year
invested in the sector so it's quite a
large sector and it's growing this
there's more and more wind farm
developments globally now and the cost
of wind energy is dropping so it's quite
an exciting sector and we're quite happy
to be involved
the reason we're involved is some kind
of interesting simulation physics that
we think we can kind of enhance what's
currently done in the industry this
image here is of a hard to see on the
projector this image is a wind array
just off the coast of Denmark called
horns Rev so it's 80 turbines and it's
about it's three kilometres by five
kilometres big so that's kind of the
scale of things it's quite a well-known
wind farm in this picture it looks nice
and calm and you can imagine all the
turbines turning nicely but the the
problem we're looking at is quite nasty
illustrated by the next picture so again
this is horns Ralph but the conditions
are just right to capture some of the
wake effects from these turbines so you
can see those those front the front row
of turbines they're in Nice clean air
and probably generating the power you'd
expect from them but the wakes are then
propagating back along the array so you
can imagine if you're a back of that
line there you're getting very very
turbulent air which has a real impact on
the power generation of the turbine and
so the total per the array but more
significantly has an impact on the
maintenance and life time of those
turbines so they're getting kind of
imagine bumpy turbulent hair but they
weren't really designed for and so there
are people running these arrays are
seeing the turbines at the back of the
array wearing out faster than they
expect based on manufacturing figures
and it's down to how these wakes are
being simulated so this was kind of
highlighted as an industry challenge a
few years ago and kind of the estimation
was if you could successfully predict
these wake effects you could reduce the
cost of wind energy by by 10% so it's
quite a nice extra saving you could make
but the problem is that because those
complex wake physics the interactions
aren't represented by the industry
standard tools at the moment and so we
got involved to really look and see if
high fidelity computational fluid
dynamics could help predict these wake
interactions
this nice colorful image in the
background is lidar data from a turbine
so this is just showing real world
measurements of the wake coming back
behind it so that's how we got involved
so where I'm talking at that kind of a
Java conference and I thought I'd start
with a kind of setting setting out the
problem what why do we need high
performance computing and what's the
problem we're actually trying to solve
so fluid dynamics or computational fluid
dynamics is the simulation of fluid flow
and other related physical physics so
some people do chemistry interactions
those kind of things all come under CFD
it's used in a range of industries
aerospace civil engineering energy any
kind of manufacturing industry will be
using some form of CFD it's used for
concept studies product development
troubleshooting and redesigns and it's
often used as a complement to physical
testing so physical testing is quite
expensive and time-consuming especially
if you think of Windtunnel tests in the
aerospace industry can can take years to
get to get done and very very expensive
so if you the more you can do digitally
before you do physical testing you can
speed up your product development and
reduce your costs which is why people
kind of look at CFD as an option showing
how CFD is applied to that the problem
of wind farm analysis I'm just going to
walk through the process and show where
where the Oracle cloud infrastructure
fits in so the first thing we need to do
is is kind of define the problem domain
so we start with terrain data so if the
blue shaded blue surface behind us some
terrain data this is for a an onshore
wind farm the the terrain we we simulate
is a lot bigger than the wind farm area
so the wind farm will be somewhere in
the middle and then we do a few hundred
kilometres either side because there's
some big macro effects as well around
the wind farm they can have effects on
local local weather conditions
the colored bit here you're looking at
is a roughness map so it's onshore so
there's things like trees and different
surfaces and foliage so that affects air
flow so we've got color map in here as
well and obviously that's a 2d image in
reality it's 3d so we simulate say 100
kilometers by a hundred kilometers and
then also eight kilometers up into the
atmosphere so we have this big big box
which is our problem domain
to then solve the the fluid flow in that
domain we then need to start subdividing
it into more manageable sections so this
is the next thing we do
creating a mesh so this is a cut through
if imagine that's height and this is a
cut through the mesh and so you can see
these these shapes here represent cells
so we got a problem domain and we divide
it into cells closer to the surface
where we were more interested in what
the physics is doing we need a higher
fidelity of result we have more cells
and further up into the atmosphere where
there's less physical effects we're
interested in the cells are bigger which
reduces the computational cost so that's
kind of the second step we start with
the geometry we create the mesh see this
is another mesh for development off the
coast of Taiwan so in the foremost of
straights the Taiwanese government is
looking to replace all of their nuclear
power generation with wind farms in
quite an aggressive schedule so these
are the real placements but this is just
a bit of a study we did putting a
thousand turbines in the Straits of
Formosa and trying to analyze it and
here you can see the meshes refined
around each turbine but very big further
away that's the kind of thing we do so
once we've got the mesh we then need to
do the calculations and this is where
the HPC comes in so just some some big
figures so for each of those cells in
the mesh we have to calculate seven
physical variables and things like
density velocity turbulence and a large
wind farm mesh might be around 50
million cells to refine that mesh so
that would be something like that horns
Rev you saw would be about 50 million
cells the solver the way we solve these
solved equations is an iterative process
it's like well the base of the solver is
a kind of Reynold average navier-stokes
equations and so in the wind farm case
it's an unsteady solution so it never
never reaches a state where the flow is
always going in one direction the wakes
are always moving and meandering around
so we need to do this solve over time
which will take us probably around a
hundred thousand iterations to get a
nice time series data which means we
have to update the equations in each
cells
35 trillion times in this case so it's
quite a computationally expensive
process each of those up each of those
updates is probably I think it's a works
out at about 60,000 floating-point
operations so it's it's yeah it's lots
of number crunching so the key with
making CFD useful is to keep that
iteration time as small as possible so
obviously if an engineer has to wait
three months for their CFD results
they're not going to use CFD so we're
gonna try and get it down to days
ideally hours if possible and so to keep
that iteration time small we do several
things so we use high performance
computing which I'll come onto but also
we look at streamlining our code
so then CFD is our fluid dynamics solver
its core is C++ wrapped in some Python
and we paralyze in various ways so we do
multi server parallelism so we have our
domain of 50 million cells we then
subdivide that up again and distribute
it over several machines
so across say 10 15 20 nodes and then
where the faces need communication we
then use the MPI libraries to
communicate between the nodes so that's
kind of multi server parallelism and
then we also use on server parallelism
as well so obviously the number of cores
on modern modern hardware is going up
and up and up so we use things like the
openmp libraries to then paralyze on the
core as well on the node so a machine
with two sockets each with 24 cores will
be running to MPI processes and then
each of those processes were in thread
24 threads out using on to on top of
each core we're also built to take
advantage of I guess the extreme
parallelism hardware so GPUs and things
like the Intel fine we get extremely
good performance on GPUs so an Nvidia
k80 GPU we get the same performance as
around two and a half Intel Broadwell
sockets so about 50 cores per GPU so
it's a really a nice product for us to
use and if we if we're looking at GPUs
we the waves ncfd works is basically we
package up
small sections of work and and farm how
to GPUs or whatever parallel device we
have and for that case where we have for
the horns rev fifty million cell case we
might end up with around two hundred and
fifty million threads in flight at any
one time
so for GPUs it's perfect they can just
crunch do this really really well so
that's the kind of what we do on the
software side on the hardware side
traditionally this kind of run was done
on a high performance computing clusters
so dedicated specialist hardware so you
tend to be hundreds or thousands of
compute nodes very large core counts
connected by pretty expensive low
latency interconnects they're things
like in Feeney pan and Omni path they
typically have parallel file systems and
are controlled by a batch scheduling
system these machines tend to be shared
resources so an organization will have
an HPC cluster and then everyone will be
basically queuing and competing for
resources and same for universities and
National Labs will tend to have this
kind of infrastructure but obviously
they're quite expensive to have for a
small company and you need the HPC
knowledge to run it as well so they're
kind of the way we've gone is more on an
HPC on-demand model so pay when you need
HPC so some supercomputing centers offer
this as a service and we can de media
access for our customers on to those
those kind of resources but also cloud
HPC so the cloud providers are offering
no types now there are actually useful
for HPC which is why we got involved
with Oracle and these are perfect for
bursty workloads so obviously a CFD
engineer will won't be running all the
time it tends to be a while between runs
you'll be preparing the next case
preparing the geometry creating the
meshes and then you probably submit a
job once every two weeks or so so the
very bursty workloads
so this on-demand model is also perfect
for this use case where we're
introducing a new simulation technique
into an industry that isn't using HPC
currently if we said you had to go out
and buy an HPC cluster at the same time
and wouldn't go anywhere so by offering
a combination of the software that will
do the simulation and HPC on demand you
can kind of package together and offer
it
as a service and it really makes things
a lot easier I guess the question most
people have on Coward HPC is what about
the performance and this really comes
down to understanding your workloads so
this is just some performance figures
about this is an a test case called the
NASA common research model it's got a
built in aerospace industry standard
model it's quite small mashes 5.1
million cells see cycle time here the
lower the better
that's our iteration time the green line
there is another cloud provider the blue
line is actually a specialist HPC
cluster with a InfiniBand interconnect
and the yellow line is the Oracle cloud
infrastructure on the x5 no types and
you can see that we're getting you know
better performance on OCI than we're
getting on the special H a specialist
HPC provider this is on the I guess that
lower lower node count the performance
increases tailing off here just because
of the mesh size with with we're not
scaling anymore so for certain classes
of job you're going to get better
performance using the cloud HPC
on-demand which is it's it was kind of
surprising when we first saw it but it's
actually really nice obviously as that
node count goes up and up and up then
the the effect of the high cost
specialist interconnect becomes more
more dominant and more more obvious so
what we've been doing on the on the
cloud infrastructure so we've been doing
things like those NASA high left and
drag prediction workshops and presenting
results we use it quite heavily for
internal testing and this this research
for the wind wind farm optimization the
x5 instance types are available via epic
platform and we'd be benchmarking the
new x7 know types which are skylake the
things we we like about the OCI for HPC
so Martin mentioned the networking layer
that's that's a real real key to us so
we know that when we start up compute
nodes no matter when we start them up if
we're in the same ad will be two hops
away from the other computer nodes so
we've got a consistent and reliable
latency between the compute nodes which
is yeah really really useful again the
bandwidth is is fairly
and getting higher which is which is
nice the bayonets will compute is also
very useful for HPC we like to do as
much as we can to the hardware to
squeeze every last bit of performance
out so we will be playing a lot with
things like CPU States and and kind of
it's nice to not have any noise in
neighbor problems or or any of the
overhead of the virtualization and also
it's nice having access to the latest
hardware so once we running an ACI we
can take our images and run them on
there that the hardware as it comes out
so it's heartening to see kind of new
developments coming out from ACI all the
time which is which is good so we've
done all our calculations run it on HPC
on-demand this is kind of what comes out
at the other end there's got some kind
of colorful images CFD produces lots of
nice colorful images so this is one of
the turbines in a flow field
so that's coloured in X velocity and so
you can see the flow behind the turbine
slowing down it's not really showing
there's also a swirl in there which
isn't on this visualization coming back
to the horns Rev so this is what horns
Rev looks like in there in the CFD
solution and so you can see again this
is velocity behind the turbines and you
can see the weights beginning to form
here and then it's another another view
of horns Rev and this is where we're
starting to look at how they the wakes
are interacting with each other so we're
starting to show show the results that
we expect this is a bit another view of
that solution this demonstrates the
turbulence quite nicely so you see these
lighter lines here are streamlines from
a up wind turbine and you can see they
come down and get kind of entrained into
this wake here and this one it's all
getting Messier and Messier as it goes
back so it's exactly the phenomenon
we're trying to model and so we're
showing that yet the combination of Zedd
CFD and HPC on-demand is is generating
the results the engineers would need to
look at the different wind directions
and decide if the turbine placement was
optimum for this particular site on that
taiwanese case you can see we're zoomed
out quite far so it's got very big field
you can see these areas where the wakes
are overlapping quite heavily so if you
were a developer that was looking at
these regions you'd probably think
I carefully about where you place your
turbines so that's the kind of
phenomenon we're looking at we're
getting good results so yeah so I guess
in summary on that on the wind farm
stuff that CFD MHP see on demand we see
us key instruments in developing and
operating future wind farms and reducing
the cost of wind energy through through
life some other ID and some of the
research stuff we're also doing on on a
CI so we're also looking at kind of
future methods in CFD so something we
got published in there's a an
organization called ma femme and one of
their benchmark magazines looking at
future technologies featured us talking
about some of the work we're doing in
high order methods this is a way of
getting a higher accuracy result without
additional computational cost so you can
see here so this is a standard finite
volume result and this is a high order
result you can see these these turbulent
but these kind of Eddie's are more
visible here they're being maintained so
you get this kind of this kind of
mesmerizing video so the key thing here
is you can see the mesh cells back here
are very big still so as I was saying if
you want a higher fidelity of physics
generally you have to have more cells
but with the high order discontinuous
galerkin methods were actually do
solving data points within the cells as
well and so you can see these these
features are actually maintaining
themselves through the cells so if this
was a standard finite volume this would
all be washed out and you wouldn't
capture any of these vortices so it's
this kind of future development that's
going into our code and then where we're
testing this on OCI which is it's
working well
it's not gonna stop playing
okay yes that was a quick introduction
to safety and wind mops
so yeah thanks Mike for walking through
that awesome stuff I guess from our
perspective one of the slightly
surprising things a Mike said you were
surprised too was when we were looking
at this hardware layer the network let's
go and get constant latency guaranteed
latency and guaranteed bandwidth part of
what was in our mind was the enterprise
use case if the harp if the network
virtualization is in the hardware then
you're getting no noisy neighbors no
nosy neighbors and no nasty neighbors
right so from an enterprise use case
that's really really good and really key
if you're in banking or finance or
government or something like that what I
don't think we necessarily anticipated
was how useful this would be a for HPC
workloads and we're seeing more and more
cases now where things that were
traditionally done on supercomputers
that were rented for some period of time
can now be done in cloud infrastructure
where you go those economic benefits of
paying while you're using stuff but you
also get the fact that the hardware
you're using is being upgraded
continuously new processors faster
processors and newer GPUs hostage GPUs
more memory faster networks and you get
to leverage that because you're making
an API call to create the
infrastructures who run this on so for
us that was a kind of a wonderful thing
when we started seeing that we're seeing
more and more HPC use cases coming this
way I guess we'll stop now quickly for
questions I'll leave this slide here
with some follow-up information if you
want to contact my cell phone Mike to
talk about what we've gone through today
or websites you can go and look for more
stuff but open out for questions now
thanks
yeah well so said safety at the moment
we use things like the CUDA libraries so
that's how we access GPUs and I guess
that that does it's kind of the
vectorization side of things so the the
core of Zed CFD is is designed that way
so we we run as I said you know millions
of threads in parallel as well and then
we just leverage CUDA OpenMP who's
building applications running on the
container native and that was alluded to
yesterday can we make JVM able to
leverage those on the vine
yes yeah absolutely yes so the way the
the model for Zed cfd is that the core
they you know the c++ guts is is is
wrapped at the moment it's wrapped in
Python but then that Python there is
open source so if you want to
incorporate CFD into your into your code
you can do it via the open source Python
layer exactly yeah we we kind of have
our almost a partnering model so if
there is someone that wants the safety
capability will work with them to
incorporate zft into their products and
then they can they can they can value
out on top of on top of dead safety
okay thank you very much free time than
that</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>