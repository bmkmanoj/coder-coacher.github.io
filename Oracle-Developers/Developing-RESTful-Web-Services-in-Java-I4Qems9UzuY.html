<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Developing RESTful Web Services in Java | Coder Coacher - Coaching Coders</title><meta content="Developing RESTful Web Services in Java - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Developers/">Oracle Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Developing RESTful Web Services in Java</b></h2><h5 class="post__date">2015-06-08</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/I4Qems9UzuY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">my name is marek Boetticher and I'm a
software engineering manager at Oracle
and today I would like to talk to you
about restful services development in
Java using Jersey on some of you may be
know me I know Jax r-spec lead at the
same time I'm also Jersey development
lead so and I've been involved with a
client-server development in Java in the
last decade or so in the last several
years I've been working primarily in in
the rest area and and racks RS and
Jersey before we start let me show you
this obligatory a notorious Oracle slide
one two three four five regular you want
to see one more once more
so basically it says for this gentleman
here it says do not alright so what you
are going to talk about basically I'm
going to I want to make a little bit
interactive so I'm going to show lights
and switch to switch to the code try to
run the demos to see how the code works
and we are going to look at how we can
get started with the New Jersey project
then we will try to see how we can run
and test or troubleshoot the project how
you can secure your application your
restful or Jersey applications how you
can apply entity filtering how we can
work with the MVC or integrate with MVC
and work with the view templates and
hopefully we will have enough time so
that I can also show you the last demo
that actually really moves and it's
based on the SSC event support mm so
what is not on the agenda I'm not going
to cover the basics of rest I'm not
going to cover basics of jax-rs that's
kind of assuming that you already know
at least something about you may get
some details and if you if you can still
get something out of this session and if
you are puzzled you can you can come to
a session which will be in one hour
after this one in the serial mining room
and that's going to focus on jax-rs to
the DOE the new stuff so it will also
provide introduction to rest and yeah so
you cannot get a t-shirt if you came
here to ask good questions I'm teaching
you you can
I managed to get one large and one
medium t-shirts so the first good
questions I'm going to award actually I
managed to get three but I kept one so I
will see I might have one so let's start
with getting but let's get started with
the getting started when you want to
start with a jersey application I think
the best thing you want to do is to go
to the Jersey web site at the Jersey the
java.net and click click that get
started button and you will find a lot
of useful information there but two
important pieces of information you will
find there definitely is how you can use
the maven archetypes that are provided
by Jersey to actually scaffold your
application when you involve one of
these you will get the application of
skeleton which is which can be deployed
which can be ran it also contains a
simple test basic test it contains a
simple resource why two of these one you
can you may want to develop of that
application so the first archetype will
actually create something that will let
you build war that can be deployed on on
a servlet container the second one is
actually going to use grizzly to deploy
your application and you can tweak it
more programmatically that's probably
also more useful when you want to do
embedded embedded application
development all right so that would be
for the creating the new project how
about the bootstrapping it so you can
basically first think okay so forget
about the server toodle-oo that's a typo
first thing you need to do is when you
when you start with jacksters
application obviously you need to create
your own sub your own extension your own
subclass of that application and you
provide few methods to to make it round
if you
once you want to do that well in that
application you'll specify what are your
resources
what are your whatever your resource
classes were there are resource
instances and since Jack starts to the
DOE you can also specify whether what
are your initial application properties
that you want to use with that
application so once you do that you
actually can use either programmatic
approach which which is also based on
standard jax-rs and here what I'm doing
is I'm creating the JDK server and then
I'm using jax-ur as a runtime delegate
to create an endpoint for my application
or or handler for my application and
then I'm basically registering that that
application to run on the cool up
context and then I start the server and
basically once I do that application is
up and running for me that's the
programmatic approach now servlet to
approach which is probably something
that you would be more interested in is
similar you can start with the
application then you create a web in
lasari web.xml and in in debates of XML
of your wor you will specify the
configuration parameters for jax-ur
servlet where you say what is the
servlet name if you are using Jersey
will specify the that the servlet
container you want to use to run your
application is the Jersey servlet
container then you need to pass it the
application of the initialization
parameters which the name must be it's
by the spec jugs Java dot WS dot RS good
application and the value is the name of
your application class or the extension
of the of the application class and of
course you again need to also provide
the server mapping for your servlet so
that you know on which count which
contacts your URL is going to be
deployed to and with these few simple
steps that's basically all you can do
and that's as you could see really
simple any or you have up and running
application once you do that
bootstrapping
okay so it's not that simple that's the
good question that's why I got a t-shirt
so actually you can you can also use the
server tree it's been up here for quite
a long time and everything you see on
these previous slides you can do with
just using the jacks or application
paddle notation and you can specify the
context dude there you don't need
web.xml deployment descriptor and you
can just put it in your bar and jax-rs
will with some server 3 that all you
know initialization magic you'll find
everything out and we'll bootstrap the
server information for you and the
application will run and actually that's
actually they approach what I'm going to
use in also the demo that we will be
following throughout the presentation
all right so I mentioned that you need
to configure the application so the
standard way how to do it you implement
the set of set of methods set of
standard methods in in those methods you
create hash sets you basically fill them
with your classes or you create again
sets of objects where you fill in your
single tones and you can create maps
where you put all your properties and
once you are done you just return it
from the application and and you are
good to go obviously but if you're
really using Jersey Jersey provides
something which is called resource
config and with the resource conflict
it's an extension of the jacksters
application and it provides you a lot of
utility methods that you can use so that
you don't have to really implement those
standard methods yourself the resource
configure will do it for you so when you
use resource configure doesn't really
need to get the get the constructor and
in the constructor you can use the
methods where you say register that
feature this feature that instance
whatever you can even say that which
packages the resource config should
should scan to actually fetch your
resources and providers or you can just
specify the properties
like that so that the that's again a way
that we will be using in our application
and that's what what we provided in
Jersey all right so I'm going to
probably post here a little bit and see
if there are any questions so far sorry
this is the this is the standard and
this is what you can do it with Jersey
so just that I'm going to mostly focus
on something which is not in jax-rs
so what what's extra any other questions
yes yes you can provide the XML
obviously you can endure there
additional things you can do you can
maybe even provide the name if you want
and you can configure of the servlet
without specifying all these other
parameters and you can then you do other
configurations such as setting of your
security and whatever so you can do that
but you don't have to the implemented
that the jax-rs implementation is
typically more typically doctors
implementation is is smart enough to
figure out that what you are trying to
do so even if you don't provide all the
information it will complete it for you
but it will not override your
information all right so so let's now
switch gears and let's talk a little bit
about the demo application that we will
be following so it's a I was thinking
what to what to do and it appeared to me
that maybe this simple flight management
application is going to do the trick
basically I have a very simplistic model
obviously lots of information will be
missing in it where I have a flight
object which refers to the aircraft that
it's that it's assigned to the flight
that aircraft is of some particular type
which has the information about the
manufacturer the model the capacity and
stuff like that and also it has the
formation about the location about the
current location of the aircraft and
that model is exposed to the food while
the two joxer's resources the flied
resource and the aircraft resource and
I'm providing methods in those resources
that you can use to to get your to get
the information about the state of the
application and state of those resources
or you can manipulate with you with
those resources using one of the three
basic types XML text and and Jason and I
think now it's the time to really switch
gears to D and look at the application
itself so let me just do that alright so
this is the application the first thing
I'm going to focus is the fly demo app
class which is the extension of the
resource come pick so this is the
bootstrapping class for the application
and I'm doing lots of internalization
stuff here so first thing I'm doing is
I'm generating some some data so that I
can so that I can to fill in the the
model behind just for the purposes of
this demo and then I'm telling the the
resource config which packages I want it
to scan for my resources and providers
I'm also registering something like I'm
also registering a Moxie feature so that
I can get the Moxie support for XML by
default jax-rs would be using the
default
Jag's be support bundle with jdk since
max is providing much more many more
features and it seems it seems much more
useful I'm typically doing this as with
every application I'm overriding the
default Jack's be provider with the
Moxie one the other advantages that
Moxie also provides the way to marshal
Jegs B classes into JSON so I can get
actually XML and JSON both for free by
just by just registering a single Moxie
module and then I'm also setting some
properties so that the XML we see
formatted
so that the XML that VLC is nicely
formatted I'm also registering the JSON
as a rule for moxie also - yes sir
now I tried I think that's as large as I
can get it otherwise I would really not
be fitting almost no information to the
screen I'm sorry I'm this is really I
can if I if I tried to make it larger
well do do you want me to try it once
again I mean no oh okay sorry so maybe
maybe maybe let's avoid with the
questions until I pose again after after
after I I'm finished with this one this
is going to be posted on the github and
Java net and then I'm registering some
very specific properties to enable
tracing I'm going to talk about a little
bit later and also on enabling
monitoring support I don't think we will
have enough time to show it to
demonstrate it live but I can at least
talk about it
and also I'm registering something which
is off the shelf of the Shelf component
provided by Jersey and that's a that's
something that that lets you that's a
filter that lets you actually on the
server side override the override the
post method with something different so
let's say you are really developing a
restful application and you want to use
all all HTTP methods and then if I then
you find yourself in a situation out
should when I want to expose it via via
HTTP and HTML to the browser browsers
are typically only good by working with
get and post method so this filter
basically lets you implement your
resources with full range of methods and
then helps you to leverage post to
override the method so we'll I'll show
it how it works later essentially what
it does you send the post instead
instead of let's say put and
then you apply Puri parameter where you
specify the method name it you are
actually trying to invoke so as I said I
will be I will show it later so that
would be the fly demo application let's
move to the resources that we have here
again the resources I have a resource
for flights which all the methods are
supposed to by default produce XML and
JSON I have a guide metal that can get
you a list of application I have a
similar method that can that can get you
text line version of the same thing then
I have few methods to get you to the
just the selection of the flights the
flights that are open for for
reservation get method to to get the
detail about the particular flight
method that lets you book a seat on the
flight and so on and so on now similarly
I have a aircraft resource which also
does is pretty much doing the configure
to do the same a list of list of air
Krauts as XML or JSON list of strings
some filtered subsets of this the
aircraft by ID and another metals like
delete create and so on so actually
maybe I can pause here a little bit and
mention this this is the jax-rs concept
so sometimes if you don't want to
specify some of the form parameters you
don't have to and if you if you
anticipate that use case you can just
apply a default value and if those
parameters are not in the request sent
by the client the default value will be
used as a substitute for whatever the
client would be sending if the client is
sending those parameter on the other
hand the default value will not be use
and obviously the client provided
information will be will be supplied to
the metal all right so that would be
resources and let's have a very quick
look at the model so as I said I have a
flight it has the ID the status it can
be in the open or closed state it
has the number of the reservations on
the flight so far he has a reference to
the aircraft and the aircraft again has
the ID it can be there available for
assigning to flight or it can be already
assigned then it it has a type and a
location the aircraft type has the
manufacturer and model and capacity
information and the location has just D
well location so let's let's actually
have a look how this application runs
what I already did before the before the
session started I already compiled and
deploy this to the to the jetty do you
want me to do it again so that you trust
me
no thank you so that's what I did and
let me just switch to them so this is
the my index page in the application let
me try to get some flights okay so by
default I'm getting the XML probably
most likely because the server is
sending the XML as the is the first
accepted media type a similar thing I
can do with the with all aircrafts and
again I can I will get the XML with all
the information about the ID status a
type and location and whatever just so
that you trust me I can I can also try
to get the other other ways at least for
the flight so let me send so let me send
a request where I'm actually in the
header specifying that I only accept the
application JSON so let me send that
alright so as you can see I can get the
same information about the flights at
the JSON similarly I can do the same for
the aircraft oh let me try to sorry oh
this is the poster plugin postman sorry
postman Oh second
okay got it that's not what I wanted to
know I think I'm no I for some reason it
just upgraded that I'm not able to show
you how to how to start it again
anyway so this is the postman extension
you can get it it's for chromium it's
also for Firefox there are also other
extensions that you might try to test so
let me try to again for instance get the
a text version of the flight so let's
switch just to text plane I'll send
information I should be getting so okay
so here it is but I know you noticed but
it took quite a long time to really get
that information what what happened if I
look at the method let me go to the
method on flights resource shooting me
really that long it shouldn't take
really that long to build a single
string so luckily Jersey comes with
since version 2.3 that was released last
week Jersey comes with with a pretty
cool feature and that's actually called
tracing support which lets you send a
request and get the as part of the
response headers get the information
about what was happening on the server
side so I have configured in my in my
fly demo application I have configured
this tracing to be to be only on demand
which means that this tracing
information is only sign but when I when
when the Jersey finds some specific
headers in the request other
configurations options are off and I
think all or something like that so it's
either off it can be enabled on demand
per request or it can be enabled for
every request so right now it's on
demand and the headers that are
needed to tracing kicking our accept and
threshold threshold this by default
trace so I probably wouldn't really need
to mention it I'm just mentioning it for
the completeness the other option is
summary and they're both summary
provides only if small amount of
information verbose is well verbose
so let's try to see we can find out what
what has what has happened with while we
were what was happening during the
processing on the server so it took
again a lot of time but instead of three
headers as we got previously now he got
twenty five headers and most of them are
tracing headers from Jersey actually let
me zoom that at least little bit for you
and here we go so in what I'm trying to
find out with these times each phase
took to see if I can spot what what was
wrong with that so so far looks good
oh here we go oh here we go message
Buddha writer or glass features example
flights providers test writer
it took three seconds to executed I
wonder why that why that is so so let me
actually zoom out a little bit again and
let me switch to the application and try
to look at the the test writer what it
does oh it's writing okay so forget to
remove that's right on that but just get
rid of it
that is configure to to risk canceled or
any DS just to is just revealed and wait
for the new configuration to kick in now
that I remove the provider it will not
be found and it will not be scanned and
it will not be used and if you know
sorry if you now try to get D well we
can also try this one if you not try to
get the text version of the flight again
it should not adult take that long
alright so that was the demonstration
did for you to see that tracing can be
really useful occasionally especially
when you really are not that good in in
knowing what what are the what are the
all the all the things that are going
inside the Jersey so tracing can can
give you the hint where to look at if
you are chasing some performance issues
just cool
all right so okay so
what's the default widget I think Jack's
our specification says that it should be
some of the four four oh six or
something the unsupported media type the
standard HTTP response now there is so
Jason is not before by default supported
in Jersey the question was for everybody
what is the default if Jersey doesn't
find any JSON provider so reason is no
default abided by by default supportive
in jax-rs
and if there is no as for any media type
if there is no provider who can who can
do that there the jacksters runtime will
just return the HTTP error all right so
that was about the testing well I forgot
testing okay so let me go to testing
maybe maybe not
okay completely so one thing that one
other thing that Jersey is good at is
that it provides you something which you
call Jersey test and it's the base class
that you can use to test your
applications the reason we are providing
is that it is is that often you really
want to test your application and be
able to debug it without spawning
external external server so for that
reason we are actually providing couple
of test containers that you can use
including the in-memory container which
really just doesn't spawn any server
that doesn't involve any network traffic
and lets you just work with your
application there are also other
features that you can very easily enable
using the test properties that that are
part of the Jersey API and essentially
you can you can just lock the traffic I
mean the request response headers or you
can you can decide whether you want or
not to also dump the request and
response entity as part of that logging
and again the configuring that setting
up the test framework to run your
application is very simple you just need
to override the configure method and
return your jacksters application class
and that's mostly what you need to do in
case you want to do something speci
special with the with the test client
you may want to configure it as well so
here I'm just formatting the the output
of the test client and I'm registering
mocks XML feature for the client ID I
wouldn't really need to have to I
wouldn't really need to have to do this
it's just so that the output is nicely
formatted and in a set of method this is
just the unit unit test class so I'm
just generating the data again let's
have a look at the same single test
let's take this one so Jerzy test
provides you methods to get client or
target just by calling the the methods
that are available on the jersey test
class without the need to specify the or
knowing the the the host and port over
the application gets deployed that can
be configured
separately by external properties and it
can change with in any test environment
so if you want to avoid the need to work
to always find out what is your port and
hostname or what is your even the
context part you can just use the target
but to get the root context pad or you
can directly specify in this case the
the part of the resource that you want
to target so this is the standard
jacksters to the DOE client API I'm
getting the web target and then I'm
using the flow of the the flow
supporting the API to just invoke the
request I'm saying which types I'm
accepting and then I'm just invoking the
get method directly and I'm saying that
I want to get it get get the response
back unmarshal there's a list of
aircrafts so this generic type this is I
know it's ugly unfortunately until we
get some better support for for generic
gratification in Java that's the only
way how you can actually specify the
list of aircraft you could specify list
but you wouldn't be able to specify the
list of aircraft without without this
trick the generic type is part of the
part of jax-rs actually sounded so
that's so utility cost did we provide it
so that you are able to work with the
client new client API even with even if
you want to get the generic information
out of it and then basically when I get
the response back from the server I'm
just trying to do some tests with that
alright so that would be very quickly
the testing so what I covered so far I
briefly covered the jersey test I
covered the tracing support I mentioned
the monitoring support basically I don't
know I don't have enough time to cover
that monitoring cell but it's a cool
feature mirror sitting back there was
implementing it last one so what it what
it lets you do we you can
turn it on and once you turn it on it
provides you statistics that you can
collect or you can inject those
statistics or you can even enable it to
to expose those statistics as a JMX
beans obviously it has some performance
impact we are trying hard to minimize
the impact as much as possible but if
you are really into squeezing the last
bits of the performance from your
application you probably want to turn it
off but in in a normal situation it
should be okay to have it on and yjj
console or visual vm you can just go to
the application and have a look what it
what what it has the information
provided are the config what is the
configuration what are all the resources
and providers that is registered what
are all the properties on the class and
also the information about all the root
resources that are deployed including
the root path the metals that are there
available there and so on
so I really encourage you to go to the
Jersey website look at the documentation
select the monitoring chapter try to
read it and play with it and once this
applicator once this application is
online you can just download the
application run it and attach the J
console to it and have a look yourself
so let me pause again here if there are
any questions of her ok so next thing I
want to talk about this data validation
so I will have like three more slides
about this and then I will remove the
code actually no let's move it directly
ok so if what just happened
I think PowerPoint is making fun of me
all right so let's have a look at let's
say flights resource and and let's have
a look at the get single flight method
so what I'm doing here is I'm trying to
get a flight and I'm testing if the
flight is not new
if it's no I'm just throwing some
exception so it's time to fast forward
to the second stage of the application
and okay so I have this information all
here I'm trying to get a flight oh sorry
it's not the method okay so I'm trying
to get the flight on if I if I cannot
find it in the databases I just drove
and not found exception should there is
a probably better way how to do it
so the and jax-rs provides you a way how
you can externalize the the concept of
validating your input and output data by
integrating with bean validation and
that's what I want that's what I want to
show you I have prepared two validation
annotations bean validation annotations
ones that is I can attach to validate
the incoming aircraft ID I have a
validator that this is the bean
validation API that actually tries to
select the aircraft as part of the
validation and if it cannot find it it
just returns false so that to indicate
that the the validated field is not
valid and I have similar valid you have
similar annotation to validate the
flight ID so I'm also selecting the
flight and I'm just returning know if
it's not valid let's let's have a look
what happens if if I try to access a
flight
that doesn't exist either okay so I got
this not found exception and that's what
I was actually throwing in the throwing
in the in the in the flight resource as
such and what I can do instead of really
always checking these input parameters
for nodes for validity for any other
constrains you may think of I can
instead of doing this I can just remove
that one replace it with the validation
annotation I can do the similar thing
for the create method when I'm when I'm
validating the aircraft ID and again I
can just remove this checks and
obviously if I had more annotations I
could even remove these other checks
that I'm that I'm checking to to like I
would I could have an annotation to say
at at not assigned or something like
that to make sure that I'm not trying to
assign a for the aircraft to a flight if
it has been already assigned to another
flight so when so and once I once I did
it I can now just recompile or rebuild
wait for jetty to pick it up and let me
try to do once more and it's almost the
same and that's the beauty of it but
actually what's more beautiful about
being valid Asian approach is that you
can also in your demo application you
can also enable a property enable Jersey
property which says that you want to
send the validation errors back to the
client so that the client knows for the
security reasons we don't have this as a
default option but you can you can make
your own choice your own informed choice
on and enable this property and once you
do that and once we rebuild instead of
just seeing the by the request response
we will be immediately able to see
something more useful actually one
second okay so here we go so after the
reload we can see actually the the okay
let me what we zoom it up after reload
we can see actually the information
about path parameter does not represent
the valid flight number
the invalid value what was what was sent
there is also some message template that
you can actually use in your front-end
application to to map to to to localize
the message and stuff like that
so let me zoom it out again and
and I think I can again post here to
take some questions about being on
addiction no no so it was for for all by
default by default when it when you have
validation error it just translate to
400 as a bad request yes oh I can well
that's something I can definitely show
so oh I did it again didn't I
I have to exit from the present date
presentation mode if I want to show or
show you things here so you see it's bad
request yes
bean validation works within any input
parameters whether it's on a method or
on the resource as a field you can
attach it to the method parameters or to
the resource fields and it also works
not only with the with the input ones
but you can also validate your own
output so but you do that by attaching
it valid annotation to the method and
when you do that the output will be
validated based on the information in
that output so the question is that's
actually good one are you a medium I am
a medium I can I guarantee you go oh
thanks thanks
sorry so the question was whether I
should recommend the bean validation
approach as a first hand or whether it
should be a refactoring one now so that
I guess the obvious answer is to to do
it first hand you don't want to you know
bloat your code with even if else
statement if you don't have to so so I
think you should you should start with
the bean validation and sooner or later
you can look at your code and see if
there is something more that you can
push all to the bean validation so I
guess thank you that was a good one
any other ones before we move to the
next topic
no I have no idea do you mean if we have
integration support for spring it's the
other way around okay yes so yes the
answer is anyway it's yes I always think
like we have support for them not
depends all right so let's again switch
gears little bit let's talk briefly
about what are the options for securing
your applications
jax-rs provides some standard extension
points
well basically you start typically with
the security context and you can
manipulate it you set it basically in
the container request filter or contain
a response filter you can also apply
dynamic features which is another new
jacksters concept to essentially pre
compute some information about the root
resources and apply some filters
directly to those resources let's say if
you want to support some annotation base
or declarative security I think we will
be showing it later
though on the client side again there is
a client request and response filters
that you can use to to support your
security so let me switch back again to
the application and I did it again okay
so let me switch back to the application
and fast forward
okay so the smoke
all right so I'm fast-forwarding a
little bit decoding of my application
and then you think that you will notice
in the application is the rollout
dynamic feature so this is the Jersey
provided feature that you can register
to get support for authorization based
on the standard Java X annotation
security javac security annotations such
as add permit all deny all at roll out
this feature basically augments all the
resources and and registers filters for
all the resources based on the
annotations available on the method and
what I want to do now is to introduce a
very simplistic way how you can
implement your own custom security in
security provider or security support so
what I'm going to do is I'm going to
implement the security which based on
the Curie parameter with named user it's
going to set the principle based on the
value of that parameter I mean if you
ever want to do the security don't do it
this way it is just for demonstration
purposes obviously it's not very secure
so what I'm doing it I'm getting the
information about the about the user
parameter from the context in my in my
container request filter and if if there
is no such parameter I'm just setting
the user to the role user otherwise I'm
using the value of the parameter to to
set the role and then I'm just
propagating I'm just creating my own
security context implementation where as
a principle I'm returning let me expand
it where as a principle I'm returning
that the principle name is the actually
the actual value that was founded in
that Curie parameter I'm also checking
whether the user is in a role if the
name of the user equals to the role and
obviously checking the scheme is HTTP
then I'm returning true or false whether
the the communication is secure
and just some name for my authentication
scheme it's a custom one so obviously if
you look at again the flights resource
here are some methods like create new
flight delete flight update state of the
flight you probably don't want to be
able to use these methods as as a
regular user actually let's try to
create let's try to create a new flight
online let me let me first get get see
if we can see so we have ten flights
created and let's try to create a flight
so I'm sending it as a foreign parameter
I'm going to send some aircraft ID
actually I need to check if the der
graaf is available so let me first check
if the number one is available now it's
a sign so first available is number four
so let me let me use number four here
and send and the new aircraft has been
created the new flight has been created
some randomly generated fly ID has been
assigned to it the aircraft ID 4 has
been assigned to the aircraft so I could
I could do it without really any any
security constraint so let me try to fix
that and what I since I have this Rose
aloft filter registered what I can just
do and and I already have the field my
container authentication filter
implemented to set the security context
the really only thing I need to do is to
say that on my method they are all sell
out on that method is going to be admin
that's a let's roll that I just saying I
applied to all these methods all these
admin all these admin methods I'm going
to I'm going to apply the rollout and of
course I'm going to I'm going to build
so once I do that and once let's drive
Jetta kicked in already yeah and I get
once I do that without without
authorizing myself or authenticating
myself as the admin by using this fancy
query parameter security authentication
method I'm not allowed to do that so I
just get here the forbidden response 403
so let me just really quickly hack this
and authorize myself and all cases bad
requests why do you know doesn't know
why is it bad request yes yes I need to
I need to actually find another flaw I
need to find another aircraft that is
available so okay so what the second one
is now available okay so once I'm out
indicated as admin I can get the
information I can I can make it work
again and that's mostly as simple as
that
yeah so rather than working with your
own custom security providers and trying
to implement it on yourself
Jerzy obviously provides some of the
soft support for for HTTP basic and
digest client side so you can register
the filters together HTTP basic and
digest authentication support without
the need to implement it yourself and as
you could see you could you could
register that server-side filter or
feature that lets you leverage the
security annotations from the standard
java java api and also since the
recently released version jersey 22.3
you can you can start working with the
alt one and
or to the dull API is both on the client
and the server so you don't have to
implement it yourself do something that
is available to you
Mira had a nice talk with me hell on
Monday about it in case you managed to
go there so let me pause once again to
to take some questions yes if you input
parameter can be a case insensitive
which input parameter oh so it knows how
it depends basically it's it's case
sensitive by by definition of the URI
spec you can compare by ignore come with
with ignore case comparison of strings
if you want there is no way autumn you
are you can you can you can register
your own custom filter that can that can
change the content of the request for
you and make everything capital or
something like that and then always rely
on the fact that you are working with
the capital case
sorry
oh the the postman it's a extension of
Chrome or on Firefox you can just
download it from the extension
repository for Chrome browser or for
Firefox that has do the test guide that
you see so sorry google.com fine oh okay
oh yes oh yes Jersey itself it provides
different integrations with different
containers the servlet is the most of
used one then we have integration with
grizzly we have integration with Oh
simple sir HTTP server vjd HTTP server
and others so yes
for XML payload or you can you can you
can oh that's actually really good
question thanks almost so now how can
you validate the XML payload basically
you can work with Jegs B beans and you
can attach those annotations to those
beans directly to the fields on the
beans to the Gators or to the fields and
if the validation is enabled you you the
Jersey will validate that for you
directly when it really tries to fill in
the bean so you get the validation basin
from the jelly bean all right so I think
I have time only for two more topics and
I really want to go through s SC so what
you want to hear about entity filtering
you can you want to see it or do you
want to see MVC support entity filtering
is MVC sorry guys I can talk about
entity filtering at least so very
briefly about entity filtering we have
an extension module that that lets you
that lets you work with work with entity
filtering code and and the what NT
filtering does is that as you could see
when I was when I was getting some data
I was always getting all of the data
like location capacity whatever and
especially in case of when I'm just when
I'm just trying to list some get some
basic idea I don't want all that
information but at the same time I don't
want to create another model for it
another another beam so that I would be
translating data back and forth so the
entity filtering does is actually to
what entity filtering does is it
actually well we are providing way how
you define your own filtering
annotations and you attach them to the
fields and once you attach those
annotations to the fields on the model
and also it is the same annotation to
the
also it is the same adaptation to to to
a method you will you will actually get
you will actually get the information
filtered out so like here I'm not going
to run this just very quickly here i
created i created a detail annotation
which is annotated identity filtering
metallization and I have some factory
for creating instances of the
annotations for it that's not that
important right now and I attach the
denotation 2d to something in the in my
model and wherever I attach it to
basically that information is not going
to be serialized back to the client
unless the method itself has the
annotation on it so if I was getting now
if I was getting the location and the
capacity here if I resent the request I
will not get it anymore because the
annotations are not on the method that
is providing it button on the model so
music annotations to filter out the data
and and I don't really need to do I
don't really so that's sorry yeah you
control it directly on the model itself
without changing the model you just
attach additional metadata to the model
so obviously I would want that
information present let's say on on on
the on the flight resource on the fly
tricks or theorem when I'm creating a
flight or something like that so I would
attach that oh see here I have it
already so I would attach the that same
annotation to the flow to the fly to
indicate that the filtering context
should be applied and the information
should not be filtered out so in this
case I would be getting all the
information back even those normally
filtered out you can have multiples on
the model you can and you can actually
you can also actually use the ROS
allowed annotations to filter out based
on the roles which you are into it you
apply the rollout annotation on the
model to indicate which information
should be only restricted to the
particular role
if you have the same time same
annotation on a metal do you actually
get the information if you don't you
just get it it gets filtered out so it's
a it's actually good cool feature
unfortunately I'm really running out of
time so and it's a we are currently
still it's it's a work in progress it
was just done right now so the API may
change so just a bit of warning there
okay so very quickly view templates can
I take can I go over time a little bit
sir can I go over time ten minutes five
minutes okay thank you
all right so view templates basically
what you could see in in my in my
application when I when I when I enter
this this HTML page the index page and I
clicked the aircraft or click click the
flights I got the information in XML so
typically what would what would be
useful if you could just integrate with
the existing framework like free marker
JC JSP JSF or masters or whatever any
other framework of you like and and be
able to instead of just directly send
the data to the user if the user is able
to capable of displaying HTML as the as
one of the accepted types you would just
run the data through the template and
produce something which is human
readable and that's all the view
templates are about well not all
actually because another useful case is
with you if you want to extend your
application to support like additional
formats let's say you want to support
support not only JSON and XML you want
to return your data as comma separated
values or you want to return them as as
you know you can you can actually well
even though JSP or free marker are
engines that are here to generate
generally generate the HTML content you
can you can just use them to generate
any content you like it's just a
templating engine and it depends on you
what
what the content content you provide
inside so without further ado let me
again
fast-forward oh shoot
next time you see me just yell but next
time you see me doing that just be here
tomorrow to hear many people yelling at
me okay so let me fast forward a little
bit and let us have a look at the code
again so flights resource here we go as
I said by default everything is
application XML application JSON and I'm
providing the list the ID and the text
line and actually if I enable the free
marker feature and set some properties
for the for the free market to know
where to excuse me look for the look for
the templates in my application war I
can no nevermind this one I can I can
actually I can actually wear easily add
new methods and a new support for for
HTML content so basically I'm just going
to uncomment these methods here and I
believe there is one more or two more
three more okay okay
uncle and all of them and I will get
alright so I have all committed all
these methods and all I said is okay so
now I'm producing HTML this is going to
go to a template the result of this
method is going to go to template and
I'm specifying which template is going
to go and I'm just invoking this one so
instead of returning directly to the
user
I'm telling you to first go to the
template and then go out and I'm doing
the similar thing with the other methods
and here even since I have the
validations enabled
I'm also specifying the error template
so that so that I can redirect all the
validations errors to that to that error
template so basically if everything goes
okay and I return a result from a method
I will I will go to the flight detail
template if something goes wrong and the
exception is thrown I'm going to the
errors 404 template how do the template
looks look like so it's in the free
marker directly as was specified in the
property and let's have a look at the
let's say this flight detail okay
boilerplate boilerplate then we have
some HTML code and in then we have some
marker referencing model by default
model is the model is model is the
default model is the default name for
the for the model that you are returning
from the jax-rs resource so in our case
model represents the aircraft so I'm
accessory flight um and so I'm accessing
its ID field and then I'm accessing the
status again computing the available
seats or and capacity and so on and so
on and if I still have some more
available seats and providing some form
to actually enable the booking another
seat in the ended model so the list
template looks very similar again I'm
listing the flights and I'm iterating
using the free marker construct through
the model every item I'm every item I'm
saying it's a flight and then again I'm
getting some information to display it
as part of the as part of the final HTML
content
so let me let me build just to be safe
let me check if I if I need oh I reset
my changes so that's certainly not what
I wanted to do sorry for it yes
or you can you can also you could also
use the velocity template well we don't
have integration support for it but you
can write one let us know and we will
now but a frame I think three marker
under the hood is using low city isn't
it so so I guess that's uh it's kind of
so we do have support for all city kind
of well actually so one more thing
before I before I show you stuff so you
can as I said you can you can also list
your data as see a comma separated
values or or llamÃ³ it just a matter of
how you write your template so for comma
separated values the template is really
just that simple you just put out put
the comma separated values and similarly
for the gamal you just intend it you
know in a way that it has to be in and
that's it so now let me build it and let
me go to the index page let me see if
you can get something else out of the
old slides now not yet oh ok here it is
so as you can see the same I provided
the same data in the reserves and but
just by adding the template and wiring
the template with the data I provided
from the resource I was able to render
this page I can I can go and see the
detail I can book a seat because the
flight is available there I can go I can
go to check if the flight has only 279
instead of 280 now available once I
booked the seat and similarly I can go
to see the aircraft's and see which are
assigned which are available let me go
go to check the aircraft and basically
so that's it then and as I said I
prepared some so you can now you can get
the also the same data as a llamo so let
me send the request and just by
providing the diamo template and wiring
it with the meta
I'm getting the data structured you know
in a in a AMA format or similar thing I
could do for four I could do similar
thing for a text for C comma separated
values all right so any questions to
this one
so the error reporting is still in the
beta phase I put it there because I'm
not completely comfortable with this
extra error template annotation maybe we
will need to try to find a way how to
squeeze it in into the template so that
we don't have too many annotations and
the last topic I wanted to talk about
this server-sent events
jax-rs is and and HTTP inherently
request response from a protocol SS EU
and is a way how to standardize
something at least a little bit
standardized way how to stream event
data on one single response connection
to the to the editor to the client from
the server this is actually how the
single event in the HTTP response would
look like all the events are separated
by black law a blank line and even can
have an ID it can have a name and it can
obviously have a data the data can be
anything text JSON XML whatever you want
so the support we provided in Jersey is
so is twofold
we have a server-side API and the con
and the and the same or similar
client-side API or the same similar
concepts are also on the client-side API
basically we have a concept for event or
facility for for representing a single
event both client and server side then a
single even channel basically connection
of the client to the server on the
server side is even the output on the
client side it will be even input and
then here is something like the on the
server side view we are able to
aggregate multiple outputs so that you
can just broadcast the messages using a
single operation there is a sec
broadcaster facility that lets you do
that and on the client side we have the
even source which mimics the
implementation of the standard even
source definition which was standardized
by by w3c committee as part of html5 so
you can have a even source sse even
sourcing java
it's ILC during one way of consuming
events and we have a bunch of extensions
or listeners that you can you can
register so that you can know what is
going on while the unions are being sent
and received very simply how does the
how does it look like on the server side
it's a regular resource except in this
case the method is producing a service
and event media type and is returning
the event output and all the metadata is
is actually creating a representation
for the open connection to the client it
adds it to the broadcaster so that you
can broadcast more events to it lighter
and returning we are returning the
connection back from the method no
events are being sent the evens are then
sent in the one once this method is
invoked asynchronously
whenever somebody posts a new message to
this to this resource we build a new
outbound event we specify what is the
media type of the data in that event we
also specify the class of the data and
the data itself and then we broadcast
the event and once we do that all the
registered connections in the
broadcaster will receive that event
pushed out to them on the client side
you can you can use as I said you can
use the even source to consume the
events oh you can you can create a new
even source and override its own even
method or you can register listener too
to risk to to process all the incoming
events even sirs will be try will be
trying to reconnect if it loses the
connection seamlessly for you YUM I'm
trying hard to finish and the other
option is to use the pull model so we
are just reading events from the stream
that's this less probably less useful or
less commonly used so
last thing so I can show you a demo and
in this demo I have I have created a new
resource which basically can start and
stop the simulation of the flight as I
said I'm writing the clients connect to
the resource and I have a simple
simulation page prepared that that is
basically rendering the the positions of
the flight as they move in in a window
so I'm using html5 for that and there is
some JavaScript code that I'm I'm
actually using never mind the code so
much I'm just creating some JavaScript
even source and again listening on any
message and whenever I get the message I
just do the animation to to move the
existing flied representation to another
location I guess it's better to just
show it to you okay that's not what I
want
so here we go
so this is the page and as soon as I
start the simulation this page starts
receiving the events and the animation
should start and I don't want to lose
the plane so I just whenever they want
to leave I just down to the other side
and then I stop I will stop receiving
events but I can really start it again
and when as soon as I start receiving
the new events everything will go work
just so that you trust me all those the
resource
what was the it's simulation events okay
so I can I can show you also on in curl
so do those are the us that are flowing
from from the from the server as soon as
I stop the simulation the un's will stop
here so if I start it again it should it
will start all right so I ran long over
time thank you very much for staying
here</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>