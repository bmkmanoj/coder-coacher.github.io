<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>When Basketball Meets Raspberry Pi and Android Devices and TomEE | Coder Coacher - Coaching Coders</title><meta content="When Basketball Meets Raspberry Pi and Android Devices and TomEE - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Developers/">Oracle Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>When Basketball Meets Raspberry Pi and Android Devices and TomEE</b></h2><h5 class="post__date">2015-06-02</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/BTNrVsK0GeU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so my name is a Stefan Johnson for the
people who don't know me I'm the founder
of devoxx and the initiator of dead Fox
for kids and I also found that parlays
which is an online presentation platform
where all the Java one talks will
actually be hosted again and i did find
still a bit of time next to that which
was like a week and weekend project
which i want to talk about and share
some some experiences you can follow me
on twitter stefan 007 and yeah let's do
that so just out of interest how many
people play basketball here got a few
yeah yeah so I do want to start first
with a suicide so we should stand like
all on one line and we do you know so
that's for people don't know the suicide
that's a basketball term where you have
to run from non line to the other and so
on so I'm of course also are used to be
a basketball player i still play
basketball and recreate recreate to
really create your own point of view but
it's more for the beers afterwards now
these days i must must confess but my
son is also in basketball and i know
it's something every weekend we go to
quite a bit of games and have fun
actually some you know i'm really into
that sports and and this is a bit the
contact don't contact our i want to give
you about this talk that i'll i'll be
presenting this is this is basically my
local basketball team which i go and
support every two weeks they play in my
city and Oh stump which is next to brush
in belgium and they play on a third
national level so this is like national
belgium so of course nothing as high as
the NBA as you guys have here but
nevertheless you know it's it's really
fun to see these guys play and then
afterwards again the social aspect etc
and this is where we'll actually get
started and so as you probably know in
belgium beer is really one of our you
know common denominators we like belgium
beer and if we go to a game afterwards
there's there's lots of liquids that
actually are being consumed
and this was I think it was two years
ago after game we won everybody was
excited we were drinking who hardened
and deauville and so on and of course
while you're drinking beer you start
talking about basketball I mean we just
saw a good game and so on and I was
talking to a friend of mine he's
actually a dentist as a day job and good
game etc and all of a sudden he
mentioned something which I would never
expect during a bar type of discussion
was a raspberry pi he all of a sudden
said like a dentist's telling me like
yeah have you are you were like into
raspberry PI's and we're like what so
yeah of course immediately you know your
your hair goes like hi yeah yeah yeah we
use that for DevOps for kids to learn
electronics two children scratch on it
and so on why and so then yeah do you
know anything about Java I mean I hurt
you you're like running a conference and
so on so you and he was like flattering
me basically he was really like you know
giving me bears and then he had a plan
it was clear right and he basically
sucked me into a project which is what
I'll be talking about and then this was
actually the next question is like so
you saw the game well this afternoon
they were there were local children
playing basketball and had this very old
controller and this is a actually I took
a picture of that and this was a
controller made 20 years ago right and
you know after 20 years it started to
really show some signs of destruction
basically because this was like and I
couldn't actually take a picture of that
it had a very thick cable going to the
scoreboards and also each time they had
to set up the game they had to take that
cable and it was broken here and there
then they had to be like plug it in
there were lots of cables and you have
to actually have a PhD to actually
control this as well right so that like
train the trainer sessions how to
control the scoreboard etc and he said
like I want to replace this with
raspberry PI's like wow and he said like
are you interested yeah about thinking
of course you know the alcohol didn't
help me
and protecting me there as yeah let's do
this this can't be hard I hope that was
completely wrong right so it was quite
quite a journey but this was basically
you know the discussion we had and this
is what I want to talk about and so this
is a picture from last week where they
were playing and for people who don't
know about basketball you actually have
in the middle over there you have the
control center basically so in the
person in the middle is the person from
the u18 and then left and right these
are the people from the local team and
the left person controls the scoreboards
and the clock and the person on the
right controls the 24 seconds so they
basically via these cables control this
big scoreboards and then the 24 seconds
and what you don't see on this picture
is that on the other side they have the
same exact setup now since already 10
years the other screen didn't work
anymore so they were already used in
like they were playing and as you know
it basketball it can really be like
sometimes a small one point and then
five seconds to play and there were
certain players they were like going in
offense and that look over their
shoulder to see how many seconds they
still had and then sometimes they would
take that ball while they were looking I
was like that was for me an extra
motivation to do this project because I
was really not acceptable right so that
was a bit you know the whole setup now
this is a really it is a big ass big
scoreboard and this is actually the guy
who who actually persuade me to do this
young the Clark the dentist and just to
give you a bit of an idea of how big it
is now he's not a basketball player so
he's not as tall as I am but
nevertheless it's a really big
scoreboard and it actually has a
thousand lets in it thousand so that's
quite a lot and these are not seven
segments that lets these are just like
real dots that you need to control so
that that's quite a bit so as we're
professionals we set off shore I'll do
that but I need to have a test
environment first because you know I
can't come to the venue each time I want
to test something so I wanted to have
something locally
home and have a complete test
environment so I could at least as my
software etc and that's what he did now
the cool thing was like this dentist he
fixes Steve and so on but he actually
makes one working TV out of three broken
TVs over the weekends so that really
that did give me a bit of comfort
because I'm really not an electronic
experts so we agreed like okay you do
the electronics and i'll do the software
that was basically the deal which was
good because you will see the test set
up it was you know a lot of Saul ring
and then quite a bit of intelligence
went into to this so this is a picture
of the test environment which is the 13
7 segment let's that you see so you have
the the home score which in a good
scenario you need to go beyond a hundred
points right so you have a small two
segments next to that then you have the
array score of course you have the foul
info so the files from the home and the
away team and also the number of who
which number got the foul which is the
middle let's then you have the clock you
have the buzzers so we had different
types of buzzards you had a buzzer for a
timeout you had a buzzer for a foul etc
and then you basically had the 24
seconds so that was you know the setup
to actually replicate the big the big
ass scoreboard in the in the venue and
then and this which came as a surprise
they had quite a few let interfaces so
all these cards that you see in there
are basically controlling these thousand
let's so there's a lot of soldiering a
lot of you know connecting parts in here
to actually control those thousand let's
but for me that was Chinese I mean I
didn't care right i mean that was his
problem not mine right and it was always
if he played it like that as well if
there was like a hardware problem it's
okay it's Young's fault it's him and
then of course he wanted to find out
there's a bucket Stefan because it's
software and we were like constantly
like pointing each other but it was a
nice separation of concerns so that was
good so these were the let interfaces
and the heart of the whole system were
the max 7219 let drivers now a friend of
mine
and does he's doing his PhD in
electronics so he was a bit of my help
line so i was telling like like well I
don't writer that what I don't want to
write an application where I don't need
to individually control each let's
aren't there any drivers out there where
I can just do it by seven segments and
he came with this one which was really
the lifesaver so you see those two chips
on the left and the right and they
basically can either individually
control 64 let's or they can actually
have eight digits and that's what I
basically need it so I could you via the
spi interface I can actually control all
these numbers because it's really
numbers and sent them a digit like 50
which is the score or two fouls and so
on so it made it very very simple so
that this if you want to do this type of
thing that wasn't was really
differentiated because the the logic and
the code would have been a lot more
complex if I would not have those
drivers available going on so then we
also had to of course power that and we
use this 13 nor eight vc juice provider
so that's fine and then as you can see
here all the soul ring behind it because
all these interfaces had to be linked as
well at the end were driven and this is
the goody by one raspberry pi and that
was like yes so I had my interface I
could install Java on that I install
actually a better version java 8 and i
actually also said well you know i want
to use an application server do with the
jacks restful interface so i actually
used to meee on the Raspberry Pi and
when i tweeted about that david Blevins
who's like founding and running to me he
went like wow you did what one to me on
a raspberry pi exactly yeah sure and he
said it's never been done before you
shouldn't even be careful but actually
have never changed it i've just
installed it and it just ran out of the
box I didn't even have to tweak it
alright so that was like wow that was a
really nice experience so you know we
had all the parts basically in place to
continue so that was basically his part
Yun's part and i could then actually
start focusing on the code so what we
agreed upon is that ok so for him to
actually test the hardware he needed to
have an application and so what what I
did is that i wrote a see application
which if you type in score and on the
Raspberry Pi it will give you these
different options so he could actually
say ok dot slash score and then do like
minus n m four minutes and give the
minutes or home and then give the score
so he was actually he had this small
commands basically to drive the
application now unfortunately at that
time I've could have written that in job
and I've could have done that with the
pie for japi but the drivers actually
came with C code examples so i took the
c chord it was really very basic let me
show you it's really not too complicated
you have the like initialization block
where you had to actually set and again
this came with the driver so it was
basically just copying and pasting what
they showed and then I had to set some
matrix initialization now that's cool I
mean how cool is that you can initialize
the matrix in there is no spoon but they
were you know you had to like you define
and that was the last one you had to
have the decode Moton own and the decode
mode on on the 09 actually said to the
driver that if I would send the digit it
will actually show that digit that's
number onto the onto the seven segment
length so that was really the key to
enable this I've could have perfectly
done that in pie for J but I wasn't yet
very comfortable with it so I did
decided to do it it C but there were
some other opportunities down the road
where I would definitely wanted to play
because for me this was like it's
project to it's a home weekend project
right so you want to touch as many
technologies as possible and play with
this stuff right and see if it really
can be used in production so it was one
you know typhus basically for me and
then to really then sense
a number to the device you just actually
you had to open a device driver so I had
to so I could actually choose which ones
because I one driver could only do aids
and I needed 15 so I had those two
drivers who either use 01 or 02 and then
you open that file using the read/write
it could have been just right as well
check if it's not know and then
initialize which was the previous block
and then write the the numbers to the
specific 7 segment controllers and then
close it it was as simple as that so you
know pretty pretty straightforward but
from that time onwards we had now two
teams he could play with the sea program
and test his hardware and make sure that
everything was connected and I could now
focus more on the application and on the
different clients all right so so that
was cool so now we could actually work
in parallel so how was the actual setup
done so from an architectural point of
view you know I had to make a few
decisions so the first thing was well ok
we going to put the Raspberry Pi in the
scoreboard it's going to run to me now
the fingers you saw that you have to use
a ladder so it was like ok we do this
once and then you don't want to get the
ladder out of it and so on so what we
did as a first step is to install an
access point so we had a nice access
point onto a d-link access point on top
of each scoreboard and so from that
point onwards we were able to wirelessly
just connect to it we did convince the
local City Council to actually introduce
some cables so we could actually hook up
the scoreboards to the internet but I
don't know if how it is in the US but
like in Belgium if you need to convince
a city council once you say city council
you're thinking months right it's unique
it does take a bit so you know we have
to again also work in two different
tempos but with the access point ok we
could ready wirelessly access it and my
idea was ok well let's use tablets you
know I've perceived that now you saw
that nice Nexus 7 tablet from google
will use that for the score and we use
another one like that
for the 24 seconds and of course I did
want to play with the different
technology so i said i want to write an
android application and i want to do an
html5 application now the html5
application did come as a requirement
from the dentist because he said like
well if we're going to purchase three of
these devices but if somebody has an
iphone or an android phone it would be
nice if he could serve to the browser or
to the website of the scoreboard and
just use pure HTML to control the 24
seconds so that's why i chose for html5
because you know android only runs on on
android devices of could of course also
do not done an object C Objective C etc
but yet you have to make some decisions
and we only have that many rainy
weekends in Belgium you know so you have
to make some choices now the cool thing
about this is that you remember we had
to scoreboards so my one of the
motivations was to make sure that the
player didn't have to look over his
shoulder anymore I really wanted to have
that other scoreboards as well in action
so what I actually did I did the other
scoreboard I did the same exact setup
Raspberry Pi to meee and then actually
have them wired physically get wired
them and then basically do some rests
publishing so I had like a pub sub type
of setup now using JMS but pure jax-rs
HTTP puts and that was sufficient to
like I had a small boolean where it said
if it's mirrored if the scoreboard is in
mirrored smote it knew that it had to
broadcast the same signal that the
scoreboard the score app was sending it
was basically forwarding that to the
other scoreboard and this was sub-second
we were talking about milliseconds
because my concern was a bit like okay
how long it will there be a delay or
something will be fast enough and
because we only really as you can see on
the clock we're only doing seconds not
milliseconds so it was the whole setup
was fast enough actually to accomplish
that so that was that was already okay
great and that was the architecture so
you know master slave to meee and
different ups now that was the theory um
actually but i'll come back to that one
later on so i use java 8 beta own arm
for that I used the jax-rs 152 edition I
know they're already at one point seven
but I didn't bother upgrading I mean it
just works i mean why if it works why
change it so it's still on 152 and I I
did use the schedule add annotation
which I'll talk a bit more in details
but the schedule annotation is a java ee
approach to have a timer being in your
in Europe I used the jpa with a memory
is a SQL database so i didn't want to
actually saw it in a physical database
but i didn't need some persistence so
that at least if i want to start like
broadcasting the information if it's
still in memory that that would be
possible but it didn't have to be
persistent because i was a bit afraid
that well these devices like you know
you install it and you fire and forget
basically i didn't want to like run into
problems where it runs out of memory
because the database became to Baquet
cetera i really wanted to have it very
very well pragmatic basically so they
could like turn it off no no electricity
nothing turn it on again of the weekends
and it would start fresh so that's why i
did a memory database and then I I also
started because I did want to play with
pie for J as well i started playing with
that as well and then afterwards i only
saw that that could have also been used
for the spi code and then some seeking c
code for for the max drivers so that was
the technology i was using now for the
clients and there's some is there some
interesting war stories there to to to
mention so this is how it looks i really
like i was really obsessed a bit about
ergonomics core boards so I mean it took
me a few iterations to actually make
this you know from UI design perfect and
this was what I ended up with you could
actually take the tablet in two hands
and they could control the home team and
the away team that they're fun
and that was it and they could just use
it like that it was wirelessly so they
could sit actually they don't have to
sit in the middle anymore so some people
were taking chairs and just sitting a
bit further a yeah right we were high
tech right we really liked the
competition that they came they were
like why you're sitting two meters from
the score but from the table what's
going on way we're wirelessly they were
like bragging with the technology is
like wow okay him but I mean we did
learn a few things and well one of the
things first of all was the setup so you
had if you start at the Android app this
is a physical representation we have
actually three chords and so a
basketball court is as big as this room
basically and we had three of those and
so of course they said like well if you
do one you might as well do all the
other ones so we did 33 scoreboards and
then they start had to select which
court they want to control so here they
select a B or C then they need to low
hem now we only did like test tests we
started giving everybody's username and
password they forgot I keep in mind
these are non technicians right these
are just you know some of them never
even had touched tablets right so you
had to keep it simple but at least there
was a small authentication so nobody
could if there was a real geek out there
they couldn't really high jackets if you
know from the competition and somebody
came with the HIPAA this computer there
was a bit of a token tokenized
communication going on and then
depending if they select its courts be
it would actually ask you in Dutch do
you want to use the two scoreboards
because keep in mind if the children
play they don't need to score they
actually have three chords in parallel
running side by sides so here they can
say yeah it's for the big league so
let's use the two scoreboards and then
they need to enter the team name and
this could be just default to say okay
it's this team against that team and
it's 10 minutes so four quarters of ten
minutes but the benjamins they use eight
minutes or four minutes so you had some
options depending on the child's the
children their age
what type of clock system you had to use
and then for the grown-ups they had the
possibility to start counter so they
could say like okay the game starts in
60 minutes so you enter 60 minutes and
then the clock starts counting from 60
to 20 basically showing the the
supporters how much time it would still
take to begin the rapid the game and
then we already started running into
some enhancement requests so we already
notice that there were actually other
access points out sides which we're
actually dribbling into the venue and it
happened actually that again these are
the people who actually control it are
sometimes like 70 years old and with all
respect what they have no clue you know
they're you give that device and it just
needs to work and then they didn't know
that they were actually connected to the
other access points and ago would go
like Stefan it's not working it's not
working I said oh yeah but you should go
to the access point of the scoreboard
and not from the pub next door so I
added this test we're on each screen it
was actually still checking if they were
connected to the right access point like
stupid things like that you know really
made it a bit more robust and then the
actual controlling was that was
basically did the screen so what you
could do here is that there's a small
negative slider and so if you slide that
everything turns red I didn't get a
screenshot of that but then you were
able to do like minus 1 or minus 2 if
they had pressed three points and it was
only a two pointer so that worked out
pretty well and when they press the
clock it changes nice in Reds now what I
also learned is that in the first
version it just changed into red or and
that was it if there was an error it
didn't change but it didn't say anything
and so people were like we like okay I
pressed it but hey didn't nothing happen
so I rapidly learned that I had to use
the toast API I fear if you know a bit
of androids that I could actually
rapidly always show and every day
pressed it said like okay so they knew
it received it if there was an error it
would actually show the edit and so
those small subtle changes actually
really helped the adoption of the whole
environment
and then you have like a quarter files
timeouts and then actually the buzzer is
the red red color so if you press that
red one the buzzers went off so those
were you know very straightforward ways
of controlling the scoreboard and then
the 24 second app well that's where i
used jquery for that jquery mobile and
it was a bit the same principle you
select the chords and once you had
selected two chords you have to still no
head I didn't include that page but then
you had basically again a very simple
setup where you could start the 24
seconds stop it at seconds to it or
subtracted have a timeout which was the
60 seconds and the 14 and 24 seconds
reset basically now what we did learn
there is that well okay jquery-mobile
very easy with some Ajax calls to into
going to the jax-rs interface but what
we really noticed especially for the
older users is that they didn't really
have any physical feedback so there's
sometimes they like they were looking
especially for the 24 seconds you really
need to watch the game and so you have
this in your hand are you watching the
game and before you know it they were
like touching next to it and so people
are going angel yeah sure yeah you
didn't touch it you to touch it even at
vertices a half deaf as well and oh so
sorry and so that really did that didn't
fly it was really an issue so having
some some kind of visual check but not
just visually like some kind of
vibration check confirming that it
worked would be you know what would be a
lot better what we also noticed is like
in the middle of a game we had like 300
supporters and all of a sudden he
touched the power button and he had no
idea like that that's the power button
so in the middle of a game you just
imagine right 300 supporters I'm sitting
there stressed like a you know a
headless chicken looking constantly if
it's still all working and in the middle
of game he pressed the power button and
they had to stop the game right i mean
yeah Judy I had see he couldn't control
it anymore and it was like I was going
on no yanan and then they were like
waving I mean Stefan stop it's not
working
I had to die neck go over the court yeah
you press that button you shouldn't
press that button and okay yeah you're
back and then the never birds were like
looking oh yeah that's the software guy
in it there's some bugs in there and it
was really bad for my reputation in the
beginning right but it wasn't my fault
son but there were some bugs which I
won't talk about but but you know so we
had to find a solution that this didn't
work this did that was not that was a
bad idea so we were having a
conversation after the game it's enough
bears and he said like minute physical
buttons we need to have something
physical for the 24 seconds the score
was the score control was fine so we
came up with an alternative which was
the 24 second box we made a box and this
is how it looked look nice design Apple
compliance designed in brush the ship to
the out of China and that made it I mean
that really for him that was yeah
perfect he had his physical button
on/off he could really physically press
these buttons as you can see it was
still version one but this worked great
and what we did we put a Raspberry Pi in
it so in the Box there's a raspberry pi
I got a java application running which
is got started when the raspberry pi
gets initiated and there i did i did use
the PI forge a library because basically
these buttons are just connected via the
GPIO interfaces of the Raspberry Pi so
that's pretty cool and he was really
excited the only unfortunate thing you
see this cable i took a screenshot we
did start with a wicked don't go so yeah
just a riffic dongle that's fine
wirelessly and then he took that box
like this and his hand was over the
beefy dongle so blocking the signal so
sometimes it works some size in didn't
 man commercially on do you should
take it like that but you can't take the
box like that so say okay forget it we
will do a USB we will put an ethernet
cable in there and then that's all
sorted so we did it had a physical
connected box and it still had the
tablets working and then of course you
know we be further before about news
fine so we did a new iteration of this
and this is our our latest and greatest
we put a bit more effort in nicer
buttons a nicer design and so this is
the latest one we've now used and works
as a charm you know so we got one
Raspberry Pi talking to the scoreboard
Raspberry Pi talking to another
scoreboard Raspberry Pi you know all in
sync during a basketball game pretty
cooler which apple font yeah there's a
human written apple font hey whatever
works right so for the pie forge a part
a portion of the the 24-second box it's
very very straightforward yeah try to
walk you through it but basically what i
do is that i create a URL and I have a
secret token which is based on a local
hash code that I made locally on the on
the device you basically connect to a
specific pin that you want to register
on based on if there's behavior or not
and then you can add a listener whenever
that action happens you can act add a
listener and handle that events on the
bottom I mean again it's sort of like
six lines of codes and then in the
handle event itself you could actually
then start doing the HTTP request now
what I did did not find and I did
contact or I did tweeted about it was
the debouncing effect and so I did have
to write my own code for that it's not
all true in the next slide but
debouncing means that you know if the
person is using it and he presses the
button there might actually be this bad
event might be actually fired multiple
times and so if you don't actually
filter that out you might be actually
sending multiple requests and maybe over
flooding the de server so you need to
have some kind of debouncing filter and
it looks something like this where you
basically take the current time in
milliseconds you define your debouncing
interval in our case it was 300
milliseconds and that way you were
filtering out any messages which came
faster within that defines a time frame
and so I was like thinking about the spy
for J have any
same mechanism or did I overlooked a
tour yeah perfect so I was hoping it
would be you know in that API yeah yes
yes definitely you can actually cover
that up also or you can handle that in
the electronics but yeah where I
constantly like no no that's your part
and do it in the software and so on but
yeah you're definitely right there are
electronic ways of doing this as well
but that really helped me a lot and then
so why you know you're learning this
it's just a learning experience and then
again having fun with technology and
yeah so that was you know that was
basically the setup so if you now see
we've skipped the android 24 seconds
with a raspberry pi and have a nice
coherent environment so what were the
lessons learned well quite a bit
actually first first of all do you I in
the setup really must must be dummy
proof I mean seriously these people are
nondifferent they're not didn't a key
developers so making sure that you like
you give them the device and you really
talk to him said okay play with it use
it and they go like what's this and how
does its work and and so on and
painfully enough we I sometimes had to
learn it the hard way it was really
during certain certain games that things
went wrong and had to like you know then
at least refactor certain you I designs
I mean for us it's all no more we have
smartphones we have tablets it for us
it's just an extension of our body
basically but you know out there there's
a lot of people who have have really
they don't really have a clue yet so you
need to anticipate that as well and so
accidentally pressing the power button
it does happened so there or something
like ah it goes in sleep mode so like in
androids I there's a possibility to keep
it alive so you when they are in the
score module it will not go in sleep
mode so he doesn't have to panic or in
the latest version of Android you're
actually also able to hide the
navigation buttons so I did that as well
so they had a nice clean slate clean
sleet it didn't go in cyber
or in hyper mode and they could just you
know play with the whole experience so
one thing I actually experienced was the
timer and this was right crucial I mean
it's a scoreboard it needs to actually
show the clock and in a good way and i
actually had issues so my first
implementation of the timer was a very
naive approach where I did the following
is that in the methods start which was
triggered by when you pressed on the
clock it's it's and the start method
basically to the to me jax-rs interface
I check if it's if the clock is not yet
running if the current times in seconds
are still bigger than 0 I actually you
won't believe this but I had the
previous version the current time in
seconds I had equals to 0 and it I had a
situation where the counter actually
went into a negative modes and there
seemed to have been some kind of but I
call it race condition so I had not
synchronized my start methods and as a
result because you see the synchronized
in front of the matata I had two frets
because of the gibbering of the
debouncing it was actually sending
multiple quest in parallel and because I
was a synchronized there was a situation
when it would go under under zero and so
all of a sudden the Coco's gonna like in
negative mode and God Jesus what's going
on and then of course if it's called
negative you see all signs of like
Chinese characters on there as Iran no
this is this is not looking good and yon
was already gone like not me it's not
hardware it's so software guy software
guy and so just two simple changements
changes adding the synchronized and just
to check of a it has to be bigger than 0
already you know help that out and like
stupid things like that right you don't
really think about that when you're
hacking away during a Saturday evening
but then the the mistake I did is that I
actually created my own timer service
every time a clock was started and it
seemed actually that this was a naive
way of doing any anybody knows why what
could have caused this
sorry well I did close the timer so if
you did stop it did it would clean it up
right so but I'd yeah but but basically
it is in that direction what was
happening is that it was actually
creating first of all to my cpu eyes it
was doing too much work and at a certain
time I was closing the references but
the garbage collector actually had to
clean it up and so I noticed in the
middle of a game and you can imagine
like you know there's only like one
point difference the clock is like on 10
seconds they do start and there was a
garbage collection going on ha no and
you know pressed it and 44 seconds
nothing happens but they were already
playing for 4 seconds and they only had
five on the clock so I was like so
how can i solve this right and probably
if i would have talked to kirk
pepperdine he would explain oh yeah you
can do the jvm alterations and things
change the garbage collection algorithm
or whatever but there was a much simpler
approach to this and this is how i did
it i use the the schedule annotation and
the schedule annotation allows you to
actually have an event fires per seconds
now unfortunately and I definitely need
to talk to the speculate it would be
nice if I could have actually in events
/ milliseconds because that way
eventually you know it would be nice to
also show milliseconds on the scoreboard
but ok I'll take this the schedule
annotations sends you one second it
doesn't create any extra timers it's one
timer which runs constantly and there I
could really dramatically simplify my
code where I'm just using a boolean if
it's running and the bullying is set to
true or false in a synchronized block
and then just basically check if it's
below zero or not and that's it all
right the disadvantage of this is that
there is a lack of maximum one second so
if they press one second and that one
was just fired it will only update the
clock one second later but because this
is not an NBA team they're you know
they're a bit more liberal
how it works and that did the trick so
this was really a lot better so we
didn't have that gibbering anymore or
that delay when the garbage collection
kicked in the garbage collection
actually didn't have to kick in anymore
at all so you know you learn by the hard
way sometimes and so that's the java ee
timers I've already explained to JPM
garbage collection and another very very
important way especially like now I'm
like here in the US they had multiple
games on Saturday when when I was here
so you need to really have them because
I you can law everything but if I'm not
there i mean i don't want to be
physically at every game right I'm I
want to enjoy my life a bit outside of
the basketball game as well so a very
good approach was also to give more you
why logging on to the tablets so they
could really see okay the the access
point is down or you know something went
wrong and so that way they could
actually Oh to heal their own
environments and so after one year I
must say the first year of it like man
why did I do this seriously I was like
not enjoying the games anymore because I
was of course constantly looking at like
if everything is still working but now
they're like they're they're sorted I
mean everything is now running smooth if
there is an error they get a display
they know what to do so they're educated
and we were launched basically and
another thing I've learned which was the
HTTP requests timeouts so as you know if
you send a request from that device
sometimes there was a bit of lagging on
the wireless connection and I had it by
default I had it set to 30 seconds so if
they press the starter clock they would
only get an edit or a timeout after 30
seconds and of course you know the clock
that's just not acceptable so for
certain events I kept it 30 seconds but
like for starting the clock and changing
the disk or I reduce that 21 seconds so
if something did go wrong they had still
the possibility to fire a new events we
didn't know after one seconds so those
are like small things but that really
made a huge difference because it
happens in the early days like in the
game they started it
clock didn't respond players were going
like they were already starting the
referee said stop and only after 20
seconds a the clock started because
there were some you know wireless itches
or breakups going on and you can't
control that of course so those were
practical things then the wireless SSID
check was really a lifesaver so they
wouldn't connect to the local pub but to
the scoreboards adding also a password
on the SSID was also a good thing to do
because we were all going ah ok now we
have an access point it's connected to
the internet so we'll provided also as a
service for the visitors to go online
and then guess what happens right they
were like downloading on BitTorrent i
assume i don't know but it was like our
bandwidth went just down and they
couldn't talk to the scoreboard anymore
so we said okay we want to that let's
let's restrict it only for the devices
and basically I mean I must say I did
hugely underestimate this work I mean I
did spend literally proof probably 14
days like which are like 7 weekends
working on this so I feel like a walk in
the park just rainy weekends will do
fine and so on but I definitely
underestimated the work involved but now
you know now I'm like people go like oh
yeah that's the guy who did the
scoreboard can I buy you a beer so I
don't have to buy any beers anymore I'm
a local team right I get so much respect
now because they go like wow it so
that's where feel at least worth
something right and what really truly
amazed me the raspberry PI's they just
rock seriously because that was a bit of
my concern it's like oh it's for playing
and experimenting but these devices if
they've been running like for they like
over the summer holidays they don't play
games they just keep on running two
months non-stop they just run they put
it up or they connect to it and just
work since like amazing $35 you know if
you buy this professional scoreboards
it's minutes like 10000 euros and we
made these like okay if they had to have
paid me it might have been a bit more
expensive as well but I mean it was a
volunteer you know experiments were
but come on like for a couple of hundred
dollars we had we had a working
environment so that was like yeah that's
internet of things right so I was truly
amazed me so of course now we have a
variable version one so we now think you
okay what's next well the first thing i
did say like no i will not start a new
company around that and like make
scoreboards for that i do not want to go
in that business right that was the
first statement i did make but from a
technology point of view we can really
do some more really interesting
interesting stuff so well one thing I
and this is also again some lessons
learned is I do need to add some unti
hijacking court coat because what
happens is that especially when the
children are playing is that we have
three courts being played at and then
accidentally somebody selected courts be
but it had to be court a but court be
was already playing so in the middle of
that game the scoreboard reset what's
going on what's going on ah and then
somebody else actually I sorry I i
selected be and it should have been a so
I need to add some logic where it says
okay if a game is playing you can't
actually hijack that game so those are
like again stupid things you don't think
about but that's definitely on top of my
list that's why it's a home here another
thing I'll definitely do is like tweet
the scores so that you know the
scoreboard is tweeting now how cool is
that alright so and that's easy to do
but they didn't of course need to enter
the right names and so on so they don't
do that for the moment they just use the
default values but if they're right
enter the right details we can tweet the
score and then they're not the other one
was publishing the score to their
websites now they had a really ugly
website they use the joomla and you know
it's PHP and so on and I said okay if I
want to do that integration you know
what we've had a really bad summer in in
Belgium I was raining and so on and said
you know what I'll do your website i'll
redo your website so i did it in
wordpress so that way i could control it
a bit more
and you know it's PHP so that that can't
be too hard and so i redid that but the
only reason why we did their website was
then to actually integrate the
scoreboard in their website all right so
so that I haven't done that yet I've
done the website but not the integration
yet right but that's that's just a
couple of minutes doing that at least
that's what I'm thinking and then remote
monitoring I mean I started also that
there if the raspberry PI's come up they
actually are on instant messaging so you
can actually then talk to the scoreboard
so you actually see the scoreboards on
your adium or your i chat box and then
you can actually talk remotely to the
scoreboard say like okay what's your
status what are the games going on and
so on and do a bit of like jmx enabled
management but via a very user-friendly
way so the non techie guys like the
dentist and he's pretty tacky actually I
shouldn't underestimate him but he he
could at least remotely also would like
see the health of the scoreboards
another ID and I've started doing that
two weeks ago is I would love to
actually have when they start the game
that I've actually adds Raspberry Pi
cameras on the scoreboards and then I
did first think of using the same
Raspberry Pi of the scoreboard but
that's not a good idea you want to
detach that because it does take quite a
bit of CPU so i'll be adding an extra
Raspberry Pi in the scoreboard with the
beta pi camera so every time you say
like start game it will say like do you
want to record the game hell yeah you
press record you put a 64 gigabyte SD
card in there and eventually you know if
it all goes well but the bandwidth isn't
high enough you could even actually
stream the content and have people like
watch the game remotely now the like I
said this is not MBA TV right but it
feels like the low end amateur game or
basketball team approach and I totally
works it's really not difficult we were
able we were even able to convince the
local council to install a physical wire
above the court so we could have like a
nice God's view of the game
then like the coach came up to his own
man yeah I totally want this because I
want to like see how the other teams
play and look at their systems that they
play and so on so they can do some
scouting etc come on you can lock
yourself out right this is really good
fun and because that scoreboard was
already there for 20 years they had a
bit of an emotional link to it because
you can see they put like the sponsors
there on it as well etc but I must say
it's a bit over complex I mean if I
would have bought like a big LCD TV and
then it would have simplified the whole
environment a lot dramatically so if
you're ever thinking of doing this for
your local basketball team or volleyball
team or whatever I would definitely
recommend not going the 1000 let's
approach you know just by an HD screen
are like five hundred dollars you have
hdmi you connect it to your Raspberry Pi
and with Java effects you can really
create a very nice good-looking
scoreboard just on an LCD screen so
that's definitely on my on my agenda but
i will do it gently because they're like
going i'm coming with all these crazy
ideas and especially if i had a few
belgian beers no Stefan ho ho let's
first I just what we have now and you
know so they're like okay well let's at
least put some LCD screens underneath
the scoreboard and then you can put ads
there you know and sell it and then once
I have those screens I won't tell them
just yet but I wouldn't actually you
know show the scoreboard on that I mean
how hard can that be right I'll just
talk to Jasper pots and he can write the
javafx up for me right but that would
reduce all the let's all that hardware
and completely actually get rid of all
the the electronics basically and then
we've got a request as well like last
week last week I play the game there and
there was no electricity and so like i
said i still play on tuesday evenings
and yeah they were working the higher up
and there was no electricity so one of
the ideas we have is like have a
portable scoreboard so we like to have
the like you have like this whiteboard
sphinx well you just have that portable
you plug it in where there is
electricity and then at least have like
a plan B and that would just be a
simplified version but
once you start doing that yeah then it's
like half time you really don't want to
make a business out of this and no no I
said no doing enough I want to know
focus on what I'm already doing but
that's definitely something that the
illness is thinking of worth doing and
then finally now it's all stable i can
again really enjoy the game you know
with a big smile on my face knowing that
we'll get tons of beer afterwards and
and then have fun so that's basically my
story any questions donations comments
yeah yeah that wasn't you mr. gold old
good barb all this these talks are
recorded there will be on parlays i'll
tweet a sly tech and so on but yeah it's
all in there you missed a good part any
other questions so who's thinking of
doing something similar just out of
interest there were some people playing
basketball you might be
cool yeah exactly but I mean can you
imagine that I three years ago I would
never have thought that I would be able
to do this type of stuff seriously and
it works he and I got you're excited you
don't need to have thousands of dollars
you do need a bit of time but this was
really a fun experience and thank you
for your attention yeah but luckily the
guy who made it 20 years ago was still
alive and yeah well the so the previous
installation was also done on a
voluntary basis it wasn't something they
bought and and he was just like he saw
his his baby was really falling apart I
mean after 20 years they had to change
like the game's changed as well so they
had to add new button so he was like
sick and tired of changing it every year
so we're like all documented here you go
and good luck with it you know so yeah
any other guy
how do I control the different shot
clocks I an so no that's a good question
so the question is like how did you
control the 24 seconds if you only add
one box so the each box is basically
hard code it's two chords so if you turn
the box it is like a B or C and that way
they knew that okay that one is using
that IP that one is using another IP but
I will be the latest version it will
have a small dip switch so if there is
like a box which is broken they can then
change the dip switches say like oh no
no okay this one can now also control be
but every box was basically linked to a
court and then of course the score up
well that's where you select the cord
yourself so they could reuse tablets for
any court yeah any other questions oh
well thanks for your attention and I
have a good Java one</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>