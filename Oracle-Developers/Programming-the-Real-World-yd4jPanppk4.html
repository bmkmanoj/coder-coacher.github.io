<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Programming the Real World | Coder Coacher - Coaching Coders</title><meta content="Programming the Real World - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Developers/">Oracle Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Programming the Real World</b></h2><h5 class="post__date">2015-06-02</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/yd4jPanppk4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">welcome to our session this afternoon
programming the real world Java for the
Internet of Things
I'm Richard bear this is Jasper pots and
we're architects on the Internet of
Things at Oracle and so we are going to
talk in some higher level terms this is
an introductory session on what IOT is
how we see Java fitting into that space
and some sort of big picture ideas of
what an ideal IOT platform might look
like we have the obligatory safe harbor
statement which actually and yep good
well anyway
give you a moment to read it as you are
aware you know development release and
timing of features or blah blah blah
don't bet on anything we have going on
here okay so our program agenda for
today I'm going to start with an
introduction about IOT we're going to
talk about use cases we're going to talk
about architecture kind of a reference
architecture that describes what we
think an ideal IOT architecture would
look like for addressing those use cases
we'll talk about Java and then we'll end
with a demo and we will end probably
about 50 minutes after have about five
minutes for questions and then Jasper
has to run for his next talk which is
back to back with this one in a
different part of the hotel so
introduction let's start with that what
is the Internet of Things well this is
the first thing that came to mind
all right maybe it's a tad apocalyptic
but you know you can kind of see things
going down that road but well let's
let's do something that's a little bit
less apocalyptic maybe maybe maybe this
is the Internet of Things
I'm just saying fight the boss guys
fight the man don't let them put that
tag in you so you know you can kind of
see maybe there's some companies in the
IOT space who actually are gonna do this
to you maybe they won't stick a tag in
you but they're definitely gonna be
gathering your data evil alright let's
look at the next this one's actually I
think a little bit more likely all right
bad news the scale is threatening to cut
off our access to the fridge yeah see
that's intelligence right there that
scale knows what it's doing
but this is this is more like when we
talk about IOT these are more of the use
cases that we're talking about in this
case this was a slide that was put
together buddy an external third-party
that talked about different smart city
use cases for example you know you might
have a city with thousands of sensors
built into street lamps utility poles
and and you know building walls
measuring the light noise levels traffic
volumes all that sort of information
taxis buses police cars garbage
collectors this actually you know
believe it or not this garbage collector
one is a real money saver for cities
there's a few cities that have
implemented these smart devices
smart cities concepts and by just having
the traffic there the garbage collectors
pick up trash from bins that need to be
emptied they're able to dramatically cut
down the amount of fuel and other
expenses related to picking up all the
garbage around the town so this is more
of this sort of thing that we think
about when we're thinking about IOT it's
these big industrial use cases the
Internet of Things really is all about
secure distributed intelligence all
right it's making everyday things
smarter and integrating them with the
cloud this is IOT so these are some
statistics that they come
from Cisco I have a couple links here on
the slide from the papers that I got
these from they've been doing for
several years now a lot of market
analysis on what they call the internet
of everything which is basically the
what I think of as Internet of Things
that kind of the same phrase but it
includes machine-to-machine
communications machine to human human to
machine and human to human so basically
this Internet of of everything so Cisco
projects that there will be 50 billion
connected devices in just the next six
years that would be as you know pay
attention here seven per person on the
earth and yet most of the things in the
world have are not connected at all to
the Internet right so there's a huge
amount of scope for for extending that
number the big eye-catching number of
course is the one in the bottom left
quadrant here fourteen point four
trillion dollars is what they calculate
to be what they call the value at stake
so this in the next decade so this is
the amount of money that will be at play
in the IOT space and you will see in a
few slides where this comes from and
then the big driving factor that's
making IO so high OT is you know or m2m
as it was previously known same thing
different terminologies has been around
for a long time people have been
connecting devices to the Internet for a
long time and there are companies that
are out there that have already built
vertical specific solutions in in their
particular market niche that does IOT
that is IOT really but there have been
some big trends that have been coming
together to make it so that we are now
at the point where I ot can be generally
realized by many people in many
different industries and that is cloud
which reduces your cost to market mobile
which gives us all that all the Elven
mobile connectivity the 3G 4G LTE and
other networks that now allow us to
remotely connect to the Internet big
data analysis which is crucial for most
of these use cases in order to derive
the value ipv6 which of course addresses
the addre
in space so that we can have billions of
devices on the network and a bunch of
hardware innovations that allow us to
put more code on on cheaper and cheaper
devices all these things are driving IOT
adoption so fourteen point four trillion
is a big friggin
number right where does that come from
and these guys just making it all up mo
let let's just kind of go through their
list this is again all derived from from
San Francisco's documentation so asset
utilization was one of those areas all
right this is just reduced costs you
you're able to more efficiently
understand how many assets you need out
in the world where they are and so
you're not you know purchasing more
things than you need to employee
productivity right labor efficiencies
the supply chain and logistics again
getting rid of the waste you don't have
to have quite so much stuff on your
shelf if you know exactly how much of
your product is being used by customers
so that you can deliver to them
replacement products at you know having
better intelligence in terms of how that
what your needs are you're able to
reduce a lot of costs their customer
experience you know that IOT will allow
you to have a better customer experience
like for example in the car demo that we
did in the keynote being able to
accurately predict what's going on in
somebody's car and send that diagnostic
information to their repair shop so that
the repair shop is able to do the job
for less money because the Diagnostics
has already been done that's a big win
for everybody who's involved and you
know that's a big area where there's
money to be made and then in innovation
reducing the time that it takes to get
to the market because you've got these
IOT platforms and everything else that
are in place and each one of these
things you'll notice that are not
necessarily some so some brand new area
most of the IOT money to be made out
there is about making existing business
models more efficient or replacing or
disrupting existing business models with
new ones that can be derived based on
big data analysis real time processing
and distributed intelligence those that
those are the concepts that are really
going to drive this and the companies
that are able to take advantage of those
scenarios are going to be the ones that
get to make the money of this fourteen
point four trillion that will be
shifting around from from you know
inefficient use to efficient use so
let's cover some of the concrete use
cases for example in healthcare this is
one area that we've done a lot of
research into you know hospitals it's
very expensive hospitals are very
expensive they're expensive for the
hospital they're expensive for the
patient they're expensive for the
insurance company and they're expensive
now for the taxpayer and if you can get
patients out of the hospital and into
their own home you reduce the cost of
healthcare for that individual and for
the hospital and the hospital space is
able to be used for acute care needs and
but what this requires is the ability to
do effective and safe remote patient
monitoring so the idea is that the
hospital will you know discharge a
patient from the hospital they will give
them a kit that they get to go home with
that is tailored for their specific
condition for example you might have a
blood pressure and a scale or some other
sort of sensors you know blood glucose
sensors or whatnot and they'll send you
home with a kit and you'll be able to
take your medicine and and take the
measurements that data is sent back to
your physician who's able to track your
progress they're able to look at your
health situation your health profile
right none of us are exactly the same
but we are all part of some population
and if you have a large enough
population that then that you fit into
we'll be able to start doing some kind
of big data analysis and realize for
example that you're about to have a
heart attack or that your diabetes is
getting out of control or any of these
other situations you might have they'll
be able to actually look at it and
statistically apply it and say this
person needs help bring them back in to
the hospital so you see we're able to
then more efficiently use the hospital
space for the people who really need it
hopefully saving lives and also saving
costs for the folks who don't need it
who also want to be home anyway
most of
so that's that's one of the areas where
health care can be affected in a
positive way by IOT another one is even
in the inpatient care you know there's
so many different devices supplied by so
many different manufacturers and they
talk so many different protocols that
it's a difficult and expensive
proposition for a hospital to be able to
to have all these different you know
pieces of hardware that come from all
these different vendors IOT has an
opportunity to to drive a consolidation
in the marketplace similar to what we've
seen in mobile and in other places in
which case we the developer will be able
to build standardized code using
standardized tools and programming
languages and platforms on top of a
disparate amount of hardware they'll be
forced to standardize in this space so
that's one of the things that we see
happening as well automotive is another
use case that we're looking at for
example you've got vehicle to vehicle
mesh network communication that folks
who weren't working on today you know
you could think about all kinds of great
ideas right you're driving along and
let's say that the car in front of you
has not wrecked yet but the car has
sensors inside and that sensors inside
realized that there's a lot of vibration
in one of the wheels something is going
wrong not only can they warn the driver
but they could warn the other cars that
are nearby and we can we could reduce
the the violence and the fatalities
associated with these car accidents if
we had even just two or three seconds
warning before the car went out but you
need to be able to have that vehicle to
vehicle communication to be able to pull
that off right they think about all the
money that is spent in healthcare
associated with the results of an
accident insurance payments as a result
of the accident the vehicle costs the
environmental costs that are associated
with having to rebuild the car and get
new metal and all those other things all
that money instead of spending all that
to recover from an accident what if we
spent a tenth of it in technology to
prevent the accident that's when you saw
that fourteen point four trillion
dollars this is what's being measured
they're saying you know right there
there's billions of dollars a year that
could be
of value that could be gained by an IOT
solution in this vehicle to vehicle
communication space and when you start
looking at all these different ways that
you might be able to save money with
greater intelligence you start to see
not only the business opportunity that
you have but also how there could be so
much value at stake in this space so
vehicle-to-vehicle communications and
that's just a simple use case I made up
right now there's a lot more that you
could think of right we talked about you
know analysis of all the electronic and
mechanical systems might my dad owns an
automotive repair shop and so I'm pretty
familiar with his business and how that
works and when you take your car to the
shop at least half of the of that $500
bill that you get is in labor and a
great amount of that is in diagnosis and
as a shop owner you absolutely hate the
the improper the probabilities that are
involved in doing a diagnosis because
somebody comes in and they say they hear
a rattle you got to drive that thing
around you have to try to figure out
where that rattles coming from figure
out why it ended up as a rattle
sometimes they can replace the part
that's broken but it turns out there was
another part that was causing that part
to break and and it's very difficult to
do that as you're a shop owner right how
do you make sure that you've solved the
problem in as cost-efficient way as
possible to the to the consumer because
the happier they are the more likely
they're coming back to your shop well if
we had sufficient sensors in the devices
and we were able to gather that
information up while the vehicle is
running before it even becomes apparent
that you have a problem deliver that to
your automotive repair technician they
would then be able to more efficiently
while they would know exactly what they
needed to do they would go in they'd
replace the part or fix the part that
was broken they'd save you money it
would save them a lot of risk in fact it
would make them more money because they
would be able to just repair cars one
after the other without having to spend
so much time trying to check and
double-check and triple-check every
individual thing that happens so it's
better for everybody involved this is
again another way that you can make a
lot of money in this space building
automation so we have you know here we
are in this big beautiful building the
Hilton and there's air conditioners
running there's lights running
there's a bunch of people in the room
and this is good now the problem is is
that there's a tremendous amount of
energy that is spent keeping all this
space comfortable for us and when we all
leave and there's nobody in this room
that air conditioners going to still be
pumping out now of course for many years
we've had little temperature sensors and
things like that around but we've never
had or at least we are in the industry
in the building automation industry
there's not standards where every
building is following them where you can
do things like for example modifying
your heating and cooling based on
occupancy and leather I mean how many
places are taking into account the
weather forecast to know whether they
should be ramping up on their air
conditioner now while it's cheap to get
the building to a certain temperature so
that it'll last during the heat of the
day versus knowing that it's going to be
overcast and cloudy as it is in San
Francisco and therefore they don't need
to turn on that air conditioner at all
and they'll be able to hit their targets
right lighting is a similar thing
occupancy and also ambient light you
know you walk into your office and you
flip on the light switch in the morning
and as you go through the day that light
switch is still on and the Sun comes up
and you got bright lights and it's still
on and then you go on to the end and the
light and the Sun Goes Down and your
lights still on
you know office buildings could save a
tremendous amount of money by adjusting
the amount of power that they put to the
light bulb based on what the ambient
light is these are all real use cases
that we see in manufacturing again you
know they've got big expensive equipment
millions of dollars and these big pieces
of equipment if they have the sensors in
them that they need to detect vibration
and temperature and so forth they can do
predictive failure analysis and
preventative maintenance you know this
big pieces because the most expensive
thing right is not buying a million
dollar piece of equipment it's having
that million dollar piece of equipment
go down and then your production line is
down for you know an hour or a day or a
week while it gets replaced that's the
expensive part so if you're able to do
some advanced predictive analysis you
save yourself a lot of money so those
are some of the use cases we're looking
at when we're a lot of times when I talk
to people about IOT their first thing
that they think about is consumer
it's home automation and it's the
coffeepot and that's the thing that a
lot of us will sort of pay attention to
at first but according to Cisco's
analysis that makes up about 15% of the
market 85% of the market are these other
use cases that I talked about and more
right it's in energy and in other places
and this is the huge opportunity for
virtually every vertical in the industry
is going to have some way that they
could take advantage of IOT in order to
save costs and that creates business
opportunity for developers so if all
that is background I'm going to talk
about what what we see as kind of this
acute the key architectural elements
that need to go into an IOT solution
right and these are security first and
foremost connectivity efficiency the
cloud and developers so this is what I
think of as an ideal IOT architecture
and I'm going to walk through some of
these different elements and each one of
them fit together really nicely with the
others in order to satisfy those
different use cases that we saw so the
first thing is there's a category of
device up here that I've created that I
call the smart device kind of like your
smart phone a smart device can is more
than just a device it's a device that
you can remotely configure you can
remotely manage you can remotely control
you can remotely manage all the software
updates that are on that device so it's
no longer the case that you get this
device and you flash it at the factory
and then you send it out into the world
and then it's done that would be a dumb
device a smart device you'll be able to
manage remotely and in this case it's
one running java in a gateway in an IOT
architecture adapts java or non java
devices communicating other other
protocols such as a z-wave ZigBee
bluetooth LE and so forth so it's these
these other protocols you know these
these edge devices that we see out here
there's a couple non java ones in a java
one they're not able to talk to the
internet directly so the only way they
can participate in
the internet of things is to have
something proxy for them that can talk
to the internet and that's what a
gateway is so so it's different than a
EE sort of a gateway this is a typical
term that we see in the IOT space on the
device side it's a gateway that allows
other things to talk to the internet now
a gateway should support any protocol I
have three of them here
z-wave ZigBee and bluetooth but there
are thousands of protocols every
vertical has its own protocol in the
healthcare space there's one called hl7
they all have you know can bus for cars
they all have different protocols
right so it's important that a gateway
for IOT is able to have plugins to
support arbitrary protocols and the
types of devices that will be attached
to them now you know we love Java so we
want the Java device space to grow and
we want that to be the dominant piece
that participates in the internet of
things however there are lots of non
Java devices out there today and I'm
sure that there will continue to be some
take for example the Arduino which can
run on tremendously small micro
processors that you will not put a java
virtual machine on we still want those
to be able to participate in the same in
the same Internet of Things and there's
two ways they could do it they could do
it by being proxied by a IOT gateway or
if they support HTTP for example they
could talk directly to the cloud so it's
really important that we're able to
support non Java as well as Java devices
on the cloud side
the Communication Service is really the
most important aspect I guess if the
cloud part it is the part that allows
devices to talk to the internet and it
allows the internet to talk to devices
so it's really a sometimes we call it a
messaging proxy it's the piece that's
going to sit in the cloud and it's able
to talk to devices and it's able to talk
to everything else in the Internet
another aspect of a cloud service
you have to have in the IOT space is
something that manages the identities of
all those devices so you have a billion
devices but you can't just have a
billion random devices talking to your
cloud you need to know who they are
they're serial number their certificate
keys their security credentials all the
other things it has to be some sort of
an identity associated with each of
these devices not only so that you can
route messages to it later but so that
you can authenticate them and authorize
them to talk to your cloud so it's
really it's a critical part of the
security architecture of an IOT solution
is to have some sort of endpoint
management to keep track of all these
different devices you also have the
device management this this module would
be responsible for doing software
updates doing firmware updates system
configuration remote management all that
kind of stuff that needs to happen it
would have like a software repository
associated with it that you could upload
code to that could then be pushed down
to those smart devices and those IOT
gateways so that's kind of that that
piece that chunk now of course you're
gonna need to have a really big robust
data solution because you can have just
an enormous quantity of data coming into
this IOT solution depending on your use
case for some use cases you know they'll
be sending some sensory readings every
ten minutes and for other use cases
they'll be sending 20 gigabytes of data
every day it just depends on the use
case I think I think that number
actually was what they were doing with
larry's racing boat at the at the end of
their season they were doing some some
number of gigabytes a day of data that
they were feeding into that thing and
then doing big data analysis on it to
figure out why they were losing and what
they needed to do so there's going to be
both types of things that you need to do
with that data you're going to need to
there there will be use cases where you
do sort of OLTP types of analysis you
know business intelligence sort of
things and you're also going to have big
data analysis that you need to do on
Hadoop and that sort of stuff there's
also going to be some kind of complex
event processing right you're getting
these this sensor data sent to the cloud
you're getting a
Hertz sent to the cloud and you need to
make decisions what do I do with this
stuff so there should be some kind of a
complex event processing engine that
runs as part of your clouds so that it
can it can see this data as its flowing
are these alerts as they're coming and
decide what to do with them and they in
your complex event processor can do
smart stuff it can do things like well I
need to go check in the databases and
see if I've reached some magic value and
then and then route the message in
different ways depending or it might say
oh well you know I'm gonna have some
window of time and I'm gonna watch all
the data messages come through and then
I'm gonna sum them up and if I get any
outliers then I'm going to send that on
and I'm just going to throw away all the
things that fall within the predictable
range it just depends on your use case
so not only do you need a complex event
processing engine you need one that you
can easily configure and change without
having to go rewrite a bunch of code and
then the last one is some kind of
enterprise integration some sort of
integration with external third-party
services for example there's this this
one I don't know if you know it's called
if this then that is some some some web
service that runs out there that you are
able to configure in it and say if I get
this sort of incoming data then I want
to send a tweet or I want to send a
message to you know my toaster or
whatever else you know so they they have
a whole bunch of like 150 different
plugins to the if this then that system
that allows it to talk to different
types of services and so you you need to
have in in whatever cloud service that
you're using for IOT it needs to be able
to send that data back out into the
world to do some more processing with it
because IOT is all about you know
deriving value through intelligence
intelligence on the front end on the
device space and intelligence on the
back end and and most of that's going to
be in other services that are developed
so security there there's different
types of security that you need to be
concerned about the simplest ones to
think of is the connection security it's
like oh yeah we should use HTTPS and not
HTTP okay brilliant we can do that but
there's other types of security for
example on these gateways you might have
applications running on there from
different vendors
like you might have a home IOT gateway
that's running your medical application
and also a banking application and you
don't want that banking app to be able
to see your medical sensors right that
would be kind of bad and so you have to
be able to have kind of this
multi-tenant security on the device side
so that you can you can separate out
devices from applications and have
security policy that defines you know
what devices each IOT application can
see what they're able to do with them
you might have some use cases where one
application should be able to both read
and write a device to some device and
you might have another application
that's only allowed to read that data so
you need to be able to have some kind of
configurable policy that that tells you
tells that container that IOT
application gateway container what each
application is authorized to do and then
you also need a secure runtime you need
something that you know you're somebody
deploys a bad IOT app they shouldn't be
able to break out and do damage so one
of the things that you use for that is a
trusted execution environment also known
as secure element iphone6 these is that
marketing term also arm uses the phrase
trust zone but basically what it is is
on the on the chip it has a completely
separate area that holds the security
credentials and creates the secure
communications like HTTP and so forth
completely separate memory space
completely separate addressable space
and very limited IO between it so
basically all you can do is say here are
some data please encrypt it or here's my
connection please encrypt it and and
that's that's essentially all you can do
so it's impossible for you to ever
extract out that security certificate
and fake it in some other way it's very
closely tied in on the hardware level
and Java has trusted execution
environment work that's going on so this
is a very important area and also you
know you're gonna have all kinds of
system code running on this thing and
you want to make sure that each piece of
system code has as limited permissions
as possible so that if somebody is able
to break into one ask
they aren't able to break into others so
these are just some high-level ideas of
the kind of security you know ideas that
you have to go in go into an IOT
solution like for example one thing I'm
adamantly opposed to is putting a
webserver onto an IOT device you could
do it if you do it you get what's coming
to it because those are very complicated
pieces of software going on an open port
instead what you should do is is your
IOT device is better off if if the
connection between the device and the
Internet is always device initiated the
device connects to a known server that
it can trust they do some kind of either
mutual auth or o or something in order
to establish that trust and now that
they have a communication mechanism you
can talk to the cloud and it can talk by
proxy to the device for you the device
shouldn't just open itself up and say
hey anybody connect to me that wants to
know at least you shouldn't do that if
you're worried about security
connectivity of course ipv4 just for
compatibility but really it's about ipv6
there's mesh networking standards like
6lowpan there's a bunch of different
protocols a bunch of different
communication mechanisms and modules you
know Wi-Fi Ethernet 2 3 4 G LTE iridium
which is satellite communication and
your IOT solutions should be able to
take advantage of any of these that are
available and you should be able to have
some kind of configurable policy to
indicate which one of these you should
be using based on cost right
sending bytes over the satellite
extremely expensive so you probably
don't want to do that unless it's a very
critical alert that you need to descend
like in the in the case of like we have
this use case of container management
and so you have these big shipping
containers and you put a bunch of
expensive stuff in there and then they
sealed it up with a bunch of sensors and
if if the if the container is opened
before it gets to the destination it
needs to tell somebody and they'll send
an alert and say hey I've been opened
you know somebody's robbing my contents
and that's the kind of thing that you
would pay you know 2 dollars to send
your message over the internet over over
the satellite because you're protecting
you know a couple million dollars worth
of goods but you know so it has to be
some sort of a policy decision as to
what types of messages you send over
one channel over another depending on
cost so there's all kinds of
considerations that have to go into
connectivity and virtually none of these
should be something you have to worry
about as a developer there should be
some platform person who develops the
protocol support develops the mesh
networking support and that should be
mostly transparent to developers who are
building IOT solutions but it has
something that you have to look at when
you're looking at IOT platforms
efficiency is a really big deal
all right battery power is still a
really big deal so so there are many
even not all but there are many IOT
devices that will be battery driven and
they need to be able to last on a single
set of double-a batteries for several
years and these types of you know when
you're talking about sensors that are on
site the crater of a volcano or
something like that you want it to last
for awhile right you don't want to have
to climb back up there it's expensive to
do it the radio on your IOT device is
the thing that consumes most of the
power so it's going to be turned off
most of the time and that means that if
commands are queued up on the server
that need to come down to the device
it's gonna connect you know maybe once a
day you can think of like the Mars rover
or something right where it's like way
out there you know it connects and it
gets some commands and it takes a little
while but that's what it has to do and
the same thing goes in the other
direction with that device may have been
gathering data just gathering data the
radios turned off its gathering data and
then it accumulates it it does some
statistics it does some local processing
and then it's got some data that it
wants to send to the server when it
turns out radio on it's going to send
that data and turn the radio back off as
fast as possible some systems are able
to do that process in two to three
milliseconds so very quickly turn it on
send a couple packets turn it back off
so it's important that the data
transport itself is very efficient in
RAM even is a huge power sink because as
you know you have to exert a bunch of
memory a bunch of battery power sorry to
keep the RAM state accurate and this is
why you find on a lot of
microcontrollers even today that you
have 128 or 256 K of RAM on these
devices is because it takes
battery power in order to keep those
things up-to-date so the K 64 tips that
we had for free scale that we showed at
the Makino demo
you know they had 128 K for everything
that's the that's for all the Java had
to run it was the VM the core libraries
the platform and user code all had to
fit in hundred 28 k so you aren't gonna
have every API that you ever wanted at
your fingertips but you know that's the
that's the space it's something that you
have to be able to do um on the cloud
side devices are gonna send data they're
gonna send logs to the cloud for
analysis right the cloud is going to
control the devices by sending commands
and software updates and configuration
configuration updates and all that other
sort of stuff
applications will talk to devices
through the cloud and the cloud is where
you're going to be doing all that
complex event processing and so forth
and then developers so so far I've been
talking about the all you need all those
other features in place in order to be
able to really do I Oh T but developers
are also a big crucial part of any IOT
platform story right the thing is is
that today there's um you know I've
heard numbers around 300,000 maybe it's
more maybe it's six hundred thousand I
don't know but somewhere in that
ballpark of embedded developers in the
world right
IOT and it explodes it's not going to be
300,000 or 600,000 embedded developers
doing the work it's going to be nine
million Java developers doing the work
it's going to be enterprise application
developers who are given tasks to write
code for devices and so it's really
important that the development
experience is something that is
approachable by enterprise developers
and work with all the other sort of
things that we typically do in the
enterprise so no assembly I'm just
saying it's not gonna be the thing that
wins in IOT and then of course you need
lots of good tooling lots of good
debugging debugging is really hard on
these things especially when they're you
know up in the ceiling somewhere and you
need to debug it and it's like
how do I get at that a lot of these
sensors that go into the building
automation use cases they are there
they're part of the concrete when it's
poured into the wall you know they stick
them in the concrete in order to check
for stress and things like that maybe an
earthquake prone places like this and
you know how are you gonna get at that
thing and debug it if something goes
wrong well you know there's some you
don't think about and then of course
productivity matters so why Java well I
got an idea
this whole write once run anywhere thing
actually is important you know they're
these devices are made by so many
different manufacturers that being able
to write once run anywhere is a big deal
plus we have a bunch of mobile API some
functionality that we've had for the
last you know 15 20 years so there's a
lot there's a lot the Java brings to
this space obviously it's the number one
enterprise programming language so those
guys who are gonna be writing IOT apps
those of you guys right it's Java
developers who are gonna be doing this
there's there's you know Javas huge big
ecosystem big community and as James
says you know Java was originally
designed for the embedded space that was
its Genesis that it turned out to also
work for servers was a benefit I guess
to Sun and everybody else but it wasn't
really what he was aiming for he was
aiming for for embedded systems so it's
actually really well designed for these
types of use cases so I have a few code
slides here this is not real code this
is sort of ideal code this is if you
know as I'm dreaming this uh what what's
the type of code I would want to write
okay
so here's one where let's say that we
had some sort of an IOT app base class
and it had some basic IOT functionality
you know I would love to be able to use
dependency injection on these embedded
systems I would love to be able to say
there are various different services
that are available to me and I want to
have those services injected into my
application I would love to be able to
use things like you know sort of fluent
API to be able to create messages that
are gonna be sent to the server I you
got to have some kind of lifecycle State
on these things
right there just like well just like
mobile apps or applets or any of these
other web apps they all have to have
some sort of lifecycle so in this case
I'm saying well in my start method why
don't you create me a message object
that says hello world of course and then
I'll send that to the server and it's
all nicely decoupled right I didn't have
to invoke any statics in order to in
order to get my messaging service or
anything it's it's all injected life is
great here's an example of you know what
if I had an application and that
application wanted to get a hold of all
the LEDs all the LED devices that were
that I was authored that this
application had been authorized by
security policy to see well you know in
this case I'm saying well why don't you
just inject into me a device service and
then when I get when I'm started I will
just go and I will ask that service
please give me all your devices that it
will implement the LED interface and
then it gives me that list of devices
and even better for those who have done
JavaFX programming would be if this
thing was returning not a list but an
observable list so that as devices
showed up her devices went away I was
notified of those things and I was able
to react to those changes that'd be
awesome and wouldn't it be great if I
could just use the lambdas I mean we're
in the world of the lambda right why
can't I just use lambdas and some you
know like the for each on that list in
order to iterate over each one of them
and do something and for those who do
Java effects programming you'll see you
know why don't we use those prop the
property stuff and Java effects is
awesome and it's got observability and
all other great stuff in there it'd be
it'd be great if an IOT solution had the
same sort of thing so that I could get
that property object and maybe instead
of just getting its current value I
could get its last known value because
you know there there might be this this
device interface might be talking over
Bluetooth to some actual device and you
could save a lot of time just by reading
the last known value as opposed to
actually going and fetching the current
value from the device so there's all
kinds of extra good things that you
could get by having property objects
associated with them
so this is just like that that feels
good that's a nice little piece of code
you need that you need to also have some
sort of an event model obviously
associated with these things because you
don't want to actually have to have
listeners and remove listeners to every
property you care about whenever devices
show up or disappear you'd like the
system to do that for you and so you
could just say well you know whenever a
you know the pedal on the car moves
it'll just send an event and I'm able to
to receive that event and do something
with it so it would be great if you had
this kind of like an event service some
some kind of thing that you could inject
into your app and then you could
register with it and you could say I
want any pedal event or I want to pedal
down of it or you know I want to pedal
up event or whatever they might be and
then when you get those events to be
able to do something with that
intelligence right and this is actually
my favorite one doing rest needs to be
dead easy right this is the Internet of
Things the whole point here is to be
able to use rest and web standards to be
able to talk to these devices even
though there's this huge path that they
have to pass through you just want it to
be so simple so I made up an annotation
here I called it resource you know I
could have called it something else
maybe I should have call the IOT
resource or something but you know I
have this property object I'm just gonna
annotate it I'm gonna run my code
through an annotation processor that's
gonna generate all the all the all the
handling it needs to do to handle
incoming rest requests messages and
outgoing messages and so forth so that
all I have to do is send a post to the
URL that represents this device so that
you'll know this hold on a second let me
go back the property is called threshold
and you'll see down in the start method
I say well if the pedal position is
greater than the threshold then I'm
gonna do some thing so here you can see
I'm doing a post to my device the
threshold property of my device and I'm
just gonna send some JSON down there
some JSON fragment in this case and
that's all I should have to do and the
system should do everything that needs
to be done to understand how to route
that rest request all
down to my device find that threshold
property and change the value 2.4 all
that should be handled for you so as a
developer all you do is annotate those
properties that you want to expose on
the Internet and then start making rest
requests against it using your cloud
service that's all that should be
involved in in making these things
internet enabled all the other magic is
going on behind the scenes so I brought
the architecture diagram back down here
you know I'm doing this post request to
that communication block which is then
you know going all the way down to that
smart device figuring out which smart
device it was that it's supposed to go
to and and delivering that message and
then that smart device has to figure out
which property was associated with it
nests setting the value doing all those
things that need to be done for you for
free that would be awesome and then the
other thing you have to do is like I say
you have to be able to write new device
adapters right you got new protocols or
maybe like what Jasper's gonna show us
here maybe you're using like I squared C
or one of these other device IO api's in
order to manipulate sensors that are
directly attached to your smart device
and so you know you need to be able to
very easily create a new class that
represents this new device that you've
constructed maybe it's a multi sensor or
maybe it's a salinity sensor or maybe
it's in this case I don't know what are
we doing we've got like a pedal and some
temperature sensors you know I mean it
could be a rant you know but you should
need to be able to create that new class
that represents your device very easily
so you know here we've again we've got
like dependency injection on this guy
when the start method fires up we're
gonna start talking over I squared C and
then and then you know posting events
when they occur that kind of stuff so it
should be very easy to do those sorts of
things
so with that is our demo ready all right
well I turn it over to Jasper
so something can you hear me now okay so
we get some really exciting numbers
flying past the screen which I know
you've been waiting this whole time for
so that should show you what sort of
setup I have here basically I have a
Raspberry Pi running here connecting up
to a bunch of little devices so our
favourites or toys for connect sort of
getting data into these devices are
where our favorite bus is I squared C so
that you know there's thousands of
different devices you can get Y squared
C is kind of like the USB for embedded
it's sort of you know reasonably
plug-and-play and you can get all kinds
of devices from temperature sensors to
barometers to analog converters to motor
controllers to pretty much anything you
can imagine wanting to do you can get I
squared C device for so in this case I
have three boards the red one you see is
a little temperature sensor and the
second X guy is a light sensor whose
being painful today so we're not gonna
get any date with him but there's if you
go and see our keynote demo and put your
hand over the k64 it has that same light
sensor on them that's what using to turn
the headlights on little car and give
you the change the screams from day mode
to night mode theme and the last guy is
a analog to digital converter so AM II
sort of slide that over so the data so
the first piece data we're getting here
is a sort of normalized value so I've
got a pedal here this is actually a
pedal off a keyboard for any musicians
out there which turns out to be pretty
much a very big variable resistor so we
have that wired up to our large digital
converter so if I push it all the way
down we should get pretty close to zero
and then if I go all the other way we're
getting very close to one
so we're normalizing this it normally
gives us a you know a voltage reading
off that log from 0 to 3 volts and we
just normalize
zero to one to make our life easier and
then the second guy the temperature
sensor so the moment is a pretty cold 21
degrees Celsius for anybody understand
to European and then I stick my finger
on it
you should start warming up quite
quickly
it's breaking steak well got 22333 so I
think it's warming out there so there's
a pre a critical temperature center so
let me show you the basics of the code
or a ton of how this all works out code
is and in this code is what you can do
today it doesn't include all the little
my dream list right this is just what
you could do today in order to yeah so
yeah when Rich is finished it'll just be
a nice annotation at do magic and work
although I will point out that the
keynote demo did all the fun stuff yeah
the other key now he was using only cool
stuff so I squared to get to I square C
here I'm using the PI for J there's also
the d io library which is part of the
Java open source stuff
- J's are pretty nice little open source
library for the Raspberry Pi d io
supported on more boards and I hope
he'll be a new standard as we're moving
forward to working with all the
different boards so the first thing we
do is we get the I squared C bus so if I
go over to my PI I mean kill list for
singing
so there's nice command-line utility
called i2c detect if I give it the bus
number and say yes go ahead so that when
you first run that it looks through the
bus and basically each or device you
have sitting on the bus has a address so
it has a one byte address in hex so here
I have my two devices on 48 and 49 in
hex so that's how I can talk to them so
and there's two buses on the Raspberry
Pi one you have to solder wires onto the
board and ones available for the GPIO
port so we're using bus one which is the
easy accessible one
so I don't know how much how well you
can see I won't but basically the way
that so there's two wires there the in
the center there's the green and blue
wires so you can see there's the green
and blue wires going up to the top from
little red guy and that's basically our
clock and our data pin so I squared C
has generally four wires so there's the
two from the bottom which is our ground
and power are 3.3 volts and power and
ground and then the other two wires are
our data and clock so all of the i2c to
gets connected over four wires and you
can connect as many it's a bus type
system you connect as many devices as
you like up to 255 in theory in practice
we've had sort of eight or nine working
on a device okay and so you just connect
those four wires up it works over short
distances sort of yeah up to about this
far is okay beyond that you're going to
start to get interference problems so
it's pretty easy to wire them up once
you've got them wired up you can run the
i2c detect and it should if all goes
well it will give you a number if it
doesn't go well you'll sit there and
hang for a long time so it's pretty easy
to know people hook works so once you
have that we can kind of create a night
Itt bus object and then from there we
can create a device object and here I
have my temperature address of 48 above
and 49 for my ADC so once I have my
temperature object all I have to do is
basically read and give it a byte array
and so I'm just reading two bytes from
that temperature sensor the challenging
bit comes to the fact that most of these
devices AB so all of I square C's based
on on unsigned bytes generally or pop
bytes and then in those bytes they're
storing parts of floats or doubles so
you get to do a bit of fun bit shifting
and bit manipulation to take the bot the
two bytes the least significant most
significant and put them back together
and create a tar they get out of it and
each of these sort of devices comes with
a PDF datasheet easily which tells you
what that number is because because it's
a tiny little device they don't want to
do any of the calculation to give it to
you in something nice like Celsius so
they give you the raw value as it comes
with a chip so in this case we have to
multiply it by some funny value of zero
point zero six to five I have no idea
why and that gives us it in Celsius but
you know all these devices have pretty
nice data sheets that just tell you how
to get mutton running this year a couple
group websites like Adafruit and spark
fun and people who take these chips
stick them on little circuit boards like
this and make them readily available for
you so it's really easy to get a bunch
of these staff things and start playing
with them the PI is definitely the
easiest board the k64 once we get I know
we're suppose we working on a any
version they'll go out to the public for
that as I'm forming you ask me that
would be very easy as well and then we
have a couple of the boards if there's
other ones you're interested in once we
get D IO and the other one when
primarily using is the band region
boundary devices Sabre light imx6 board
which is a bit more powerful than the PI
it's a quad-core 1g Hertz and that has a
couple different I squared C buses but
pretty much every one of these embedded
devices I have a u3 here from a no droid
u3 and company called hog kernel again
this has I squared C buses you can start
with you so you know I haven't come
across one of these embedded devices yet
it doesn't have I squared C there's
plenty of other ways to connect this
sort of stuff up like GPIO pins SPI
which is a high-speed serial bus PI
square C's by far the easiest and is
just a great way to sort of get you
started connecting this up
yep so if you want to see more of this
demo and see what's on this secret
screen here and yeah which is you know
we're looking at the next piece which is
taking this data moving over the network
and drawing a tar effects UI from it and
how to do to rapidly build those you
eyes and seen builder and wire it up to
the data so if you want to come and find
out more about that I'm presenting in
half an hour along my colleague moe
so if I need to run moon number on Teddy
yeah I don't know what it is either
unfortunately but that's it
safe harbor hardware software working
together yeah that's it so any questions
anybody have any questions yes
yeah good question so you know I think
yes you want to be able to do that you
want to be able to take it depends on
the use case as to whether it makes
sense or not because like some of the
complex event processing you have to do
on the server side needs to have access
to web services and things like that but
definitely one of the keys in IOT is
that you do need to be able to continue
to operate when you don't have network
connectivity and in that case you may
find that pushing that complex event
processing down is a good idea one
caveat there is just that you probably
aren't going to do that on a
battery-operated device because a lot of
those complex event processing engines
are power-hungry but but you could
always you know it's ideally yes
that's the way you would want it to work
what is it scratch in the head I don't
think that one counts any other
questions well then thank you for
attending our session today</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>