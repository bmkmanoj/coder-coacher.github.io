<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Ask TOM Office Hours: Exploring Upgrades and Migrations | Feb 21, 2018 | Coder Coacher - Coaching Coders</title><meta content="Ask TOM Office Hours: Exploring Upgrades and Migrations | Feb 21, 2018 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Developers/">Oracle Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Ask TOM Office Hours: Exploring Upgrades and Migrations | Feb 21, 2018</b></h2><h5 class="post__date">2018-03-01</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/ZBV5V78HTbY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">okay so welcome everybody to our first
ask Tom office hours about database
upgraded migration this is a new
initiative that we have within data
based product management to kind of give
customers an opportunity to interact
with us ask questions get information
the format today is going to be that
we've received a couple of questions
about upgrade and we prepared responses
for those that we will present and then
we have open Q&amp;amp;A in future months
because these office hours will be held
every what is a third Wednesday of the
month in future months we may present on
various topics similar to how mike blogs
on various topics occasionally whatever
we think seems to be important or we may
just do open Q&amp;amp;A depending on how we're
feeling how much time we have to prepare
things and so on just a reminder that
these sessions are being recorded so
everybody on the on the line I want you
to be aware of that these are being
recorded for future use and at the end
we'll show you where to get our slides
from today so Mike you want to move the
slides for and I'll introduce myself and
then let Mike do him named Royce longer
I been with Oracle now for actually a
little over 23 years I joined in
December of 94 with the deck our DB
acquisition I'm vice president for
database upgrade and utilities and click
on there Mike I grew up in Buffalo New
York so an area very well known for the
snow in fact the town I grew up in was
one that last year got 60 inches of snow
in one weekend one more click and you
work in the Nashua office where we have
about 500 people here in Nashua New
Hampshire just over the line in tax free
New Hampshire and developed here include
a GU Data Guard spatial and so on and
now I'll let my kitchen
himself hello everybody so I'm Mike
Dietrich I'm the master product manager
for database upgrades on migrations I
work for ROI for almost ten years now
it's alright soon our tenth anniversary
first of April and slides and a lot of
our stuff is on the upgrade block so
Mike Dietrich t.com and if you'd like to
follow me on Twitter Mikey drifty is the
Twitter handle and I promise no politics
no sports and no food porn on Twitter
just technology stuff soand I think we
can start with the first question
we've got sure so the first question was
about actually both of our questions in
email we're about upgrading ebusiness
suite databases and in this particular
one it's upgrading the database from 11
204 to 12:1 and also moving to
presumably a new server going from Linux
5 to Linux space so we do have some good
resources for you on that the best
resource for e-business suite is Steven
Chan's blog Steven Chen runs a blog
about ebusiness suite technology and
particularly the underpinnings of
e-business suite not so much about how
to use this or that application but all
of the different components and tools
and layers in the stack for e-business
suite and if you go there there are a
lot of a lot of different subtopics but
in particular for this question at the
top of the blog there is upgrade
recommendations and there's a very nice
chart on that page which shows you for
each part of the e-business suite
environment whether it's the toolkit
Oracle forms the database it has links
to first of all what is supported such
as database 11 204 12 1 and so on but
then also will take you directly to the
notes for the upgrade of that item for
example there is a whole best practice
section on how to upgrade the database
in an e-business suite environment
because there are a few particular
things you need such
to interrupt patches and so on another
thing I found there was a very nice
section on how to test your e-business
suite environment after an upgrade of
course with an upgrade to the database
you might expect some behavior changes
performance changes and so on so Stephen
gives you a set of advice for what tools
techniques what to test for how to test
after your upgrades next slide please
the question about moving from Linux 5
to Linux 6 and a high level 4 as far as
Oracle is concerned as long as the
operating system is supported if you're
going to a new version of the operating
system there's really nothing to do when
you're migrating your database from one
system to another when you upgrade the
operating system under the database you
may have to do some real inking but if
you're going to migrate our our general
recommendation is to use a data guard
physical scan by the reason for doing
that is it removes all of the downtime
of migrating the database either by
copying files or by taking your arm and
back up and then restoring it onto the
new hardware and the physical standby is
fully supported for e-business we will
mention later about how logical standby
transit logical and GoldenGate aren't
fully supported for upgrade purposes for
e-business suite but a physical standby
is for disaster recovery purposes or for
migration purposes so the really nice
thing about this is that you can easily
build your stand by using say our men
duplicate for standby from active
database it'll automatically build the
standby on the new hardware for you then
you can test this many times you could
stop your read to apply activate the
scan buy upgrade it test it throw it
away rebuild it again in terms of
licensing because people always ask
about that remember that a standby
doesn't require licensing unless it is
up for more than 10 days in a calendar
year so if you test something for a week
and throw it away you don't have to
license that stand
so this is all good reasons to use a
standby to migrate to new hardware with
that new operating system version you
it's less time very easy to test almost
zero impact on your source database and
you keep that original database around
as a fallback option if something goes
wrong so that's why I answer for
question one I don't know if mike has
anything else to add
okay so onto question 2
so question 2 actually was an upgrade
scenario again with EBS so an old
Solaris 10 server which database 10 2 or
3 that's a typo on my that's a typo ok
so it's allowed to please let me just
so oops so now 11 203 we quickly
upgraded that just to a finish second
that's awesome better guard physical
standby in place and the target is a new
Solaris 10 server database 12 102 and I
have to move right to the side and
ensure data guard is in place so this is
basically the scenario no oops ok so our
proposal would be first of all just the
customer proposal for what they were ok
but would you like to go on Droid sure
so um and this was a great nicely
detailed question because this
particular person had already come up
with all of these steps for building
this building a new second standby
so using fan-out to go to the new server
and then stop the log shipping shut down
the standby install the software upgrade
the primary because that's how you're
going to you're going to perform the
upgrade on the primary that leads to
standby as a fallback possibility and
then after the upgrade run this
level checker to identify missing
packages and you see it says c-note
there and I didn't reproduce the note
but the note was that they'd done their
homework and found that that Tec code
level checker unfortunately does not run
properly under an 11 203 so ideally when
you're upgrading e-business suite you
would want to check for those missing
patches in advance however in this case
they can't so they're going to do that
right after the 12c upgrade apply the
missing prereq patches if any and then
start the standbys do the log shipping
which will implicitly upgrade the
standbys and make that new server new
primary and then you know verify
everything shut down and remove the old
primary server which would have been the
second standby so the idea is because
data guard rolling upgrade is not
supported for a fee business suite you
can at least use that standby to migrate
to the new hardware but then you still
do have the downtime for doing the
upgrade so based on this we had two
levels of recommendation the first one's
pretty simple and I put it in red here
and that's just moving the install of
software up before you get any downtime
and this is good practice for any case
when you're upgrading the database don't
do your software installed during
downtime and there are several reasons
for this first of all the install takes
time just to lay down the bits on the
disk and get everything lengthen all
you're talking several minutes of
downtime at least but on top of that
when we think about installing 12c
generally any time you're installing a
new version it's not just the base
version you're going to then do patching
and other things and you want to make
sure all of that goes smoothly you don't
want to be in the middle of downtime and
then go to run data patch and now you
find out you've got a patch conflict or
need a new version of a one-off patch so
you can do all your installs in advance
and do that before the
any downtime so that's one way of
optimizing this more optimal would be to
really take advantage of that new
hardware and that second standby to take
some of the some of the variability out
of this process we'll still do that
install first and then you set up the
standby but then take an advantage and
use that as a snapshot standby to test
the upgrade run the code level checker
on a 12c system and check the install of
any missing patches that way you can
make sure that you have the right
patches you can get them have them handy
to install make sure that performance is
good on your system after the upgrade
and so on then you shut it down
flashback resynchronize and go back into
the upgrade Mike you want to mention it
with just just just two out here because
it's a very common technique and very
very useful you can repeat that step of
course so you can once you're flashed
back to your standby and activators temp
I brought it back in sync maybe next
week it's in sync with the production
again and you can run this test over and
over again so we had actually customers
doing is four five six times until they
were really confident and everything is
in good shape and then for the final cut
or where they repeat that step but they
know that things go well at this point
so using the standby here is a very
common very really recommended
technology or methodology in any case
where you get a new hardware piece of
the same operating system family so it's
quite useful and we highly recommend
that it takes out a lot of risk and it's
easy to test easy to very fine and just
one one thing to add to ROI with the ten
days rule I think this applies only to
also failover clusters but if you want
to be really on the safe side because we
don't require licensing ask your
salesperson upfront to get test licenses
just to be on the safe side it's usually
enough to have the email conversation
and your Oracle sales counterpart saying
yes this is fine I just know that that
down just in case
during that process you get a license
opens but you're in the safe side so
talk to your sales person first but we
don't require licensing a test license
is fully okay and it doesn't cost you
anything extra in terms of Licensing I
should mention you're going to new
hardware the odds are very good you're
going to have more cores in that
hardware so that is something to be
aware of as well we see this as
customers moved from a five year old
system where you had maybe a 6 quart
ship and now the latest exadata has 22
cores on a chip that kind of thing okay
perfect and the last bit is where to go
for information so Mike you can take
that away or show you a little what do
you mean we've take it away just take
the slide away you know I mean you can
okay okay so upgrade slides much more
like we have this huge slide deck which
is let me say that not updated for a
teensy yet so we are the process of
doing this adding a few new cool
features which are an 18 C but at the
moment you get the comprehensive slide
deck with 560 slides or something like
that
and many many more slides so whenever we
present at conferences and stuff like
that you'll just find it on mighty tasty
calm and go to the slides button and
then you should find them there I think
that's enough for the introduction Roy
what do you think I think we asked for
open questions because one person asked
upfront questions and answers and if you
if you're shy about speaking and or
don't want to be recorded speaking you
can also put them in chat and when
you're happy to answer them there as
well and don't forget to unmute
any questions so Emil you had a question
earlier
am i correct yes yes right this is not
exactly related to upgrade but this is
related to 12c updated script like cats
on that PL script so can we use this
script to run normal SQL statements
again it against all PD bees can we use
this script to run yes as a matter of
fact that the cat conscript was meant as
kind of a generic script to run sequel
scripts or even individual sequel
statements against multiple PD bees so
if if you look at the arguments to that
script and I don't know if Mike if you
have that slide from the deck probably
takes too long to bring it up but you
can actually pass into catcon an
individual sequel statement right on the
command line and run that on all your PD
bees you can also select a set of P
Dedes to run a script or command with
catcon and what catcon will do is it
will run those scripts of in parallel
across multiple pdbs at a time so here
it might got that this is an example by
the way of the slides that you can get
from our huge deck with a lot of detail
as you can see here if you look at the
cat con arguments at the end the - - X
you can just give it an individual
sequel statement so you could use catcon
to just do something like you know
select count star from user dollar just
to find the number of users and all in
each PDB or something silly like that
run an actual script shall we give a
quick example for that sure sure because
when you like - to execute let's say the
pre upgrade fix ups don't sequel just to
know the status of all the PD B's that
is where I need actually when I do he'll
check for all service all databases
in 3d visual oh yeah that would work yes
so let me just give you a quick example
so it's always important to use the
oracle pearl not your OS pearl and then
cut calm PL require has a few commands
to be mandatory so you call cut from PL
which is in the our DBMS admin directory
here I say - N 1 this is undocumented
still for whatever reason but it makes
just one worker work and just one lock
file being written then you have to
specify with - D for directory directory
where the script you'd like to execute
is sitting in this is mandatory then - L
is not mandatory it's the logging
direction or directory but I recommend
it highly to set it somewhere else than
your working directory because always
you get all the locks in our DBMS admin
which after a while looks pretty nasty
and then mandatory again the - B option
which is the basic name for a log files
so my log file here will be named pre up
fix serum for the first worker don't
lock and this all to execute a script
and here it is an Oracle script but of
course you can use cut compile for all
your scripts and much more or as Roy
explained also to do simple sequel
against the database the thing you have
to be careful with is that your PD B's
should be open once you execute things
in that and you have also the - C
options which allow you to run that
script here in a specific container or
more than one specific container so you
have an inclusion or exclusion list with
- lower case C an inclusion list so you
specify the containers you'd like to run
the script or whatever you have in or
the uppercase C which runs it everywhere
except for the containers you specify so
if you would say - uppercase C CDP
dollar route then you would run the
script in all containers except for the
C B dollar route okay well thank you for
the question we also have a few
questions coming in from each app if you
don't mind can I go it's another
question
okay sure we'll get to the chat ones in
a second okay go ahead okay so this is
regarding of a pretty big clone okay
whenever we do pdb refresh so what's
happening here
if we run any arc ll back up one source
database that pdb clone is failing due
to some missing are clogged if it is one
500gb pdb if it fails I need to wreak
clone one more time that complete pdb is
there a way to apply that missing our
Callaghan target because we need to
comment our cur a backup job on source
when we are doing this refresh otherwise
schedule ARCA job is running and that
archive is missing so even we can
restore that archive and target server
there is no way to apply that archive on
that single pdb I'm stumped tongue at
one no I think that one off with
multi-channel I have office hours and
this is all I can suggest to this
gentleman is he might be able to
actually register the machine archive
block in the database so he needs to
copy it over and then get into low level
and then register that missing archive
log and then it should no see that is
coming outside it is faith-building pdb
creation and another clock it is saying
like this is this pdb is unusable please
drop this pdb and recreate there is no
way to because we have few more pdb
fitting in same server and those PDP's
are coming from different containers
basically okay as Roy and I can't answer
this question like I can ask you to drop
me that question via email so Mike
Detrick at oracle.com and I'll forward
is to the multi-tenant team and all
get you an answer back from them okay
that's easier
yeah always read you the perfect perfect
okay let's uh let's go to the chat
because we've got four questions up
there from Daniel asking about a sneak
peek for a teensy upgrades and what has
changed what should we expect whether in
terms of faster upgrades DBA free
upgrades surprisingly for a teensy
almost nothing has changed for upgrade
remember eighteen seats really twelve -
OH - so about as much as you would
expect to change any patch set now we do
have some pretty major things coming in
upgrade but I think you won't see them
until nineteen maybe in an interim
release of some scripts before then but
Mike can you think of any major or any
changes in the upgrade space for
eighteen in the upgrade space right now
not but I mean I'm not sure if you want
to talk about what we are doing red no
and which will but we're not going to
talk futures because I don't know okay
well we have some some really between us
and the multi-tenant folks there are
some significant new things coming in
this calendar year for upgrade to make
upgrades a lot faster but we can't
really talk about those yet so you're
gonna hear less I see you in a few weeks
I'll update you in person when we meet
each other so but that'll be easier and
that's what you get when you're a
reference customer focus Mike updates
you in person the second question is
this is one we're going to get a lot a
team C has been released on Exadata
already do we recommend installing 18 C
or sticking with 12 - for the moment and
for how long so this actually there's
some news here that hasn't been widely
broadcast I think I don't know if you
blogged about this yet Mike but we made
a decision last week about one of the
questions that customers have had about
our new release model and that question
was
okay you say that a release like say
12:2 will be supported for two years
after the next release like 18 comes
along so what does that two years mean
or when does that two year clock start
ticking and our decision was made on
Thursday in a fairly high-level
executive meeting that the two years of
support for 12 201 will that clock
starts ticking when 18 C is downloadable
on all platforms which is expected to be
18 3 in July 18 3.0 in July so that
means if you're on 12 2 right now you
will have until July of 2022 you'll have
support until then that should be our
last release update for 12 - so if 12
201 is working for you right now there's
no reason to rush into 18 and as a
matter of fact you might just sit there
comfortably and say aha I don't have to
upgrade until 19 is out and 19 is going
to be a long term supported release with
another five or six years now if there
are significant bug fixes or certain new
features in a team that you want then
what I would suggest is if you have
exadata or Oda Oda Oda should be out
soon
download it for testing now and plan on
if you really want those features go
live on the first or second release
update for 18 generally that will find
that will include bug fixes that we
found perhaps late in the process but
couldn't get in especially ones for our
Exadata certification testing that we do
generally that first update will include
a lot of exudative specific bug fixes on
top of the base release so that would be
my advice what do you think like this
same here okay and generally if you are
sitting on 11 - right now which still
some customers are then we recommend
that you go straight to 12 to 1
it's very proven all the experiences we
have with customers in the field there
so far are really really really positive
just from the from the bug fixing site
whenever we check with larger customers
most of the things they found in 12 102
are clearly fixed in 12 - and the
process so far with all the reference
customers we worked on their girl lives
with 12 201 is pretty smooth now almost
no issues I wouldn't say no issues there
are still a few tiny nits of course it's
software and the complex piece of
software but compared to what customers
saw when they started with 12 102 it's
it's way more smooth and really really
good really a very stable release
especially particularly the adaptive
features and the optimizer has been
fixed in 12 - are workarounds and
patches you can apply in twelve one now
but for 12 - you can just take the
defaults and it works and just to give
you one example in addition we recently
checked for a very large customer who is
currently a hundred to 21 or fixes on
top of a PSU in 12 102 and 116 of them
were fixed in 12 to code already so just
for were not fixed for a time and this
gives you an idea what we think and this
is cross support and all the experiences
we have so far very good release to go
live with okay so the next question we
have and this is this is an interesting
case that we also talked about my client
mine might want to bring up the slide
about using physical standby and
migration here okay question is
migrating 11 203 and Red Hat 5 to a new
environment where you're going to have
12 - and Red Hat 7 because unfortunately
you cannot install 11 203 on Red Hat 7
to have your standby at 11 203 and
migrate quickly so what would we suggest
for minimal downtime in this case and
I think so good so yeah you know the
background and Michael pull up the
reference basically what we would
suggest is that you install your 12:2
home on RedHat seven and then you can
still do reduce shipping from 11 to 0-3
into your twelve to home and twelve to
is able to maintain that standby and
perform that redo apply on to it as long
as you don't open it you cannot open
that database under twelve - until you
are ready to upgrade it you can open it
in upgrade mode only
so there is a mas note on how to have
reduce shipping between different
versions of a physical standby and I
know Mike is looking for that now for
the most note yeah for that the slide
about doing manual REO give me a second
I know where it is this when you have
too many slides I know that is there so
just all right have to just move the
stuff out here of the screen so this is
the most node actually and ignore the
fact that it says something about Excel
data that really doesn't matter here it
describes when you have source on let's
say 11 2 or 3 and destination on 12
whatever or 11 to 4 doesn't really
matter just different versions and the
operating system doesn't allow you to
install either version on the other side
and this note clearly describes how to
set it up and as Roy pointed out in our
slide deck you'll find the entire
process described so when you download
the big slide deck in the rack case with
all the steps how to setup the physical
standpoint even if your source would be
a 10-2 database how to build up the back
up with Armen automatically and the only
piece you have to do in addition in that
case as theta guard processes can't talk
to a different
version so the RFS the remote file
server and so on they require the same
version of both sides and so you have to
take the rollover of the Rideau shipping
master so you basically set up a cron
job and move your Rito files over and
once they get received on the
destination site on the higher version
then you just apply locks with an secret
lasso Arman is a pretty basic tool in
that case it doesn't ignore and just
ignore that you have different versions
it just lets you recover the redo there
and once you're in the face of going
forward and you activate your stand on
upgrade its so it's a pretty smooth
process pretty well-documented at this
most node here I think it's case number
two in a most node this describes
exactly the case for Excel data but
ignore the fact that it's exiting it
works anyway actually Mike can you bring
up a slide I think 149 is the one I was
thinking okay support for heterogeneous
primary and logical in the same data
guard config so when it says using
physical standby for Hardware migration
yeah that one so the one word says does
not require source release on the target
hardware probably is the same as the
case two in the slide Mike was talking
about but that one will tell you how to
how to use that manual or the arm and
redo apply there yep also know by the
way we talk a lot about using standby
it'll even go cross-platform in some
cases we had a very large customer
migrate from Windows to Linux using the
physical standby and if you think well
Windows database it must be small there
there was a that was a 30 terabyte
database and then another hundred
terabyte database but they moved using
standby very very nicely so that would
allow you to do the upgrade with just
the upgrade as downtime next question is
migrating oracle linux 5
seven database 11 204 212 C data guard
how to minimize downtime as much as
possible data guard rolling upgrade yeah
that would be what I would use what we
also call transient logical standby I'll
go to the slide in a second then we can
we can show it okay so I can talk about
that because he's done it a lot and I
don't I I would only be talking about
what Mike has done so I'll let him
slowly slowly I'm coming closer this
Golden Gate Golden Gate by the way would
be an option as well so let me show you
how that works so you have a physical
standby in place and actually this is
something a lot of customers have so
what we do here is first step we serve a
guaranteed restore point on production
so this is really important because we
have to flash back to this guaranteed
restore point later on and this defines
also we sense which versions that work
so your production must be at least 11
106 that is the minimum version and as
soon as your 1106 newer and in that case
you are on a new version that works for
you the next step is you build up the
lock mona dictionary which is basically
one call it's a stimulus lock standby
build and thirty seconds later you have
a lock mana dictionary then you convert
your physical to a logical standby with
a clause we introduced in 11106 it's
called key by identity so the database
keeps its identity it doesn't change
because usually for a logical standby
then it would change in that case you
keep the TV ID then you apply the locks
and now with the lock man a dictionary
coming over the lock mode changes
automatically and log minor in block
Minds now the redo logs coming over the
real stream and applies them to a
logical standby database the larger
distant bar database is open for queries
and such what we do with it now is we
stop it we started in a new RT home
instead of upgrade mode and then
upgraded let's say in your case 212 102
or honestly I would recommend you 12 to
because of the longer support timeframe
once it is swing afterwards
now with production again you decide now
in downtown starts and usually at this
point people say now downtime kicks in
and downtime means that you do a switch
over a controlled role exchange between
your production and a logical standpoint
now it's important that you have set up
your application with tough or fan
events or whatever or at least make sure
that your application connects now to
the production the good thing with that
switchover is it takes usually 30
seconds or less so we have a steel
customer in Japan they do the switch
over in 8 to 10 seconds because the
logical standby is open and so we don't
have to restart anything when we do this
switchover now we would have a logical
standby on our former production site
and we actually don't want to use that
as a logical standby so we flash it back
now to this guaranteed restore pond you
remind everything out of the database
until the guaranteed restore point then
we started in the same Oracle home our
production is already running on and now
we use a command we introduced with 11
107 it's called convert to physical
which basically changes one bit in the
standby control file and changes the bit
from logical to physical standpoint then
once this is done takes a few seconds we
turn on the lock transport and this
means now we are ready to apply for a
physical standpoint we get all the
reader locks from the time when we had
created a guaranteed restore point
including the upgrade because you don't
upgrade your stand boy it gets upgraded
theory to apply and as it is read to
apply this goes fairly quick so a few
minutes later your physical stead boys
in swing and one special thing here as
we do a transient standby we have to
revert now to the original setup so we
have to do a second switch over and this
takes now a minute or less usually maybe
2 minutes in worst case depending on
USGA size because now we have to restart
so we have to read
into the original setup and recently
somebody asked me why do we have to
revert that has to do with the
incarnations in the database if you stay
in a previous setup without that
switchover you will get a problem later
on when you try the next logical standby
a rolling upgrade or transient upgrade
so that's why I have to revert back and
this is a common process we learn from
time to time that customers do this with
their like most important 75 databases
for years already and it's a proven
process it works and we extended that in
12 201 with a package in the database
called DBMS rolling which automates most
of these things but if you use DBMS
rolling which gives you full support for
cloud control as well you have to make
sure that you have active Data Guard so
for the basic process here manual or
with shell scripts we offer be a white
paper I think that's on the next slide
are the shell scripts in the white paper
you can do this flawless without extra
licensing but if you use the DBMS
rolling package we introduced in 12 to
1200 - actually not 12 201 sorry for
that 12 oh no - then you need active
Data Guard license for that okay great
and asks clever but from step 6 in that
process
aren't we in a single point of failure
situation and that is true if you've got
just your two node existing data guard
where at a certain point when you have
switched over and you haven't yet
flashed back don't you don't really have
that standby in place if you're worried
about that you could for example put in
a cascading standby off of your original
standby so that when you switch over you
now have a standby from that production
of course that requires the extra disk
space last question here are actually
not last question got another one here
this is an interesting one a production
system with two node rack Golden Gate
active Data Guard after upgrade to 12c
active Data Guard instance will
due to one specific parallel query or
query with a parallel hint it would
occur every other day after restart of
active Data Guard the query would run in
less than 15 seconds all patches of that
applies look like log writer was hanging
is it something we've heard of removal
of parallel hinders working my simple
answer is no I've not heard of that the
and this is something whenever you have
a performance issue like this I always
get suspicious when they hear the word
hang because I've been looking at this a
lot from an upgrade perspective and what
you're going to need to do is really
analyze it as a performance issue like
look at your awr reports see is it
really hanging or is it just really slow
I'll give you an example we have one
case that I'm able to use as a really
nice sample in a presentation I'm
building about diagnosing upgrade issues
if you have bad stats on an e-business
we've database I've got one particular
update statement in the data
upgrade that can run for 10 hours on my
little test
EBS database and more in a normal
situation it takes two seconds so it's
the kind of thing where you might look
at it and say wow this is hanging but
it's really just running very slowly
because it's got a bad query plan so
what I'm wondering is first of all is it
really hanging and if so on what event
because the the event that it's hanging
on will tell you what to do is it about
lack of disk space for your your archive
log area on disk or are you having some
contention there where the managed
recovery is somehow causing a deadlock
with this parallel query although I
don't know why that would happen or is
it something else like maybe you've done
enough work that at some point you get
stale stats and the query optimizer is
going out to lunch
so actually what was coming when I see
that what's coming immediately to my
mind is in 12:1 we introduced that's a
feature of multiple operators
and I would immediately turn off
multiple log riders and the parameters
far as I remember is called underscore
use single lock Rider or something like
that you go to the upgrade block oh just
to Google so the key is really to enable
this underscore use single Rock Rider
equals true and this disables the
multiple lock riders so especially in 12
102 there were some issues with the
multiple lock riders and still customers
ask us if they should now in 12 to run
with the multiple lock riders I still
don't see a reason for that unless you
have really a multi-tenant deployment
with like 50 PBS or something like that
the locker idea is proven bulletproof
functionality for many many years and
you should try a single lock rider or
switch and if you can't find it you just
drop me an email because I tried it to
find it on a block quickly I couldn't do
it right now
but it's something you single lock rider
true with an underscore out front and
try this gift is a try I will definitely
send an email but the thing is with any
underscore parameter obviously you want
to work with Oracle support and support
and I've had two different SRS one being
performance issue one could be in a 12-1
bug neither of them were actually going
anywhere for two months while we were
restarting our production ADG instance
every other day the the weird thing was
it would only happen after 48 hours or
so the same query one day runs fine the
next day doesn't just let in a log file
switch pointer so what mask what
platform you're running we're on rel
seven okay so it's not any x-rays pux
okay it's was not they're not people not
able to reproduce it and we have
multiple non production environments not
able to reproduce it in any non
production in one let me say that this
is hard to reproduce but we've seen such
issues on Linux as well
um check dis try it as a recommendation
neva Roy I can solve as ours here where
support has invested work for two months
it is just which don't us immediately
when I see such scenarios because I've
seen them with our customers as well so
try to do single Locker Ida switch most
of our customers have this set even
though it's an underscore that's our
recommendation here guarantee that it
will solve the issue but give it a try
and if it solves the issue let us know
via email that would be very nice thank
you so much for your help thank you okay
ma'am asks it is ideal to upgrade of 12
- but if the customers running a
business suite they have to upgrade to
12 102 as 12 - is not certified with DBS
yeah yes I'm aware that do I have any
insider info whether 12 2 is to be
certified sometime soon with ebusiness
12 - oh I wish I had that insider info
again I check Stephen Chan's blog
regularly for that kind of stuff but you
should know by now that Oracle is very
tight-lipped about futures because one
never knows when a showstopper will come
up at some point you might have all the
best intentions to release something on
March 1st and then you get some security
issue that takes six weeks to fix so
unfortunately no I do not have any
inside information on that all I can
suggest is keep asking and ask
especially people like Stephen Chan's
blog ask your account team and so on and
just I had a discussion with because I'm
right now at a user group conference in
the US and we have a discussion
yesterday with two customers as well and
there are assumption and this is not
ours their assumption was that EBS seems
to skip always the release in the middle
so as they certified with 12 102 they
may go with a future version 18 or 19
but Nibiru or I have any additional
information on that so Stephen chunks
blog or his email
would be the right way to ask for that I
think we're out of questions on the chat
are there any other questions that
anybody has for today
well feeding seeing they're like no more
questions and it's you know we've had
about ten more minutes but that's fine I
don't want to hold anyone longer than we
need to what I will do is if it's okay
with everybody I'm going to I've
collected the question chat and I will
add them to our presentation with
answers and then we'll post that
presentation on the blog of course I
will keep all the the questions
anonymous since our blog is very public
and I assume that you don't necessarily
want your your names being broadcast to
the world but we'll put the questions
and answers there to capture this for
the future as a reference so thank you
everybody for participating I find this
very useful with enjoyable yes we'll be
doing in a month then maybe we'll have
some more interesting things to talk
about</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>