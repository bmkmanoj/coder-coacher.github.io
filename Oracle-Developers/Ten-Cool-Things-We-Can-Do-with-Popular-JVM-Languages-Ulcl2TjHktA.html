<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Ten Cool Things We Can Do with Popular JVM Languages | Coder Coacher - Coaching Coders</title><meta content="Ten Cool Things We Can Do with Popular JVM Languages - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Developers/">Oracle Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Ten Cool Things We Can Do with Popular JVM Languages</b></h2><h5 class="post__date">2015-06-08</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Ulcl2TjHktA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">welcome to the session on 10 cool things
we can do with poplar jvm languages my
name is Venkat Subramanyam we're going
to talk about a few features from
different languages here mainly I'll
talk about GUI about Scala and Java 8 a
little bit of closure at the very end
I'm gonna be looking at quite a number
of things we can do interesting things
and best time to ask a question or make
a comment is when you have it so please
don't wait till then any time it's a
great time for questions or comments and
if you do have a question or a comment
and if I'm not paying attention or if
you're hiding behind this wall that I
cannot see just start speaking out say
question and grab my attention I'll be
more than happy to listen to your
question and respond let's talk a little
bit about why should we really look at
mixing some of these languages well I
care a lot about productivity I really
have fun programming and as I program
with multiple different languages I
really want to be able to take what's
really good from different languages and
be applied one of the benefits we get is
very high productivity and to me one of
the key things about software
development is the minimum time between
the light bulb moment and seeing
something working and and to me
development is all about having multiple
of these light bulb moments and the
minute you say oh wouldn't it be so cool
to do this you want to quickly implement
and try it and play with it and then be
able to get a feedback from it so I'm
gonna show you ten things that I found
interesting we could do but with
different languages and the fact that
all these languages run on the JVM we
can quickly write the code compile them
to bytecode and then intermix with the
Java very easily so it really makes it
easy for us to use these different
languages for these purposes the
downside of course is we should be
familiar with these languages but the
more we learn these languages it becomes
easier to learn the languages the less
we learn these languages it becomes
harder to learn these languages so it's
actually a good thing to keep ourselves
you know kind of mental muscle active
learning some of these languages as well
but I'm gonna take ten different
examples and show you what we can do I
don't use any slice but if you're
interested in looking at the list of
topics over here and also to download
the code the slides are the code are
on my website the link is on line number
five as I scroll up this document I will
also post the link also at the bottom of
this document as well so you can note it
down now or you can note it down later
up to you not a problem at all so let's
talk about a few things we can do let's
start with accessing a file first of all
a very simple operation
a fundamental operation how do you
access a file in Java I'm I'm really
sorry to ask you that question you would
first start a fire it will create a file
reader then you would wrap it with a
loop where you're gonna be reading the
content are you done
no you have to handle all those
exceptions that may happen in the code
and when you are done with it you're
probably looking at about 30 lines of
code or so and then you wonder if
reading a file is such a basic operation
why am i spending so much time and if
we're doing this well let's quickly take
a look at an example of reading a file
from the from the disk so I'm gonna
start with a groovy example here so I
want to read let's say the etc host file
there are some seats in the front if you
want to move over please do there are
some to my right and there's also a
front row as well so let's say for a
minute I want to print out new file and
I'm gonna ask for etc hosts file I'm
just pulling a random file here and then
I'm gonna say dot txt and right there is
the code to read the content of the file
and print it as you can see doesn't take
a whole lot of effort at all it was
extremely simple and trivial to do this
so the question then is alright if
you're doing this what would happen if
there was a problem in reading this file
well let's say for a minute if I were to
make a mistake in this file and instead
of house I put hosts over here what's
going to happen well when I run this
code obviously it throws an exception
and it's going to fail now what I would
do typically is I would handle this
exception knowing that this could be a
problem
or I can decide that this exception
should be handled at a level about so in
other words in Java what happens we are
the compiler tells you you will handle
the exception the programmer says run
that by me again and the compiler says
you will handle the exception
the programmer says let me show you
who's in power here and put an empty cat
block right so you don't have to do that
here
it makes us am responsible right it says
I want you to do what's the right thing
and I'm not gonna force you down the
path and that's what most languages on
the JVM do today so that's what you saw
here what if I really want to be able to
do this let's say for a minute in the
case of Scala for a minute so let's go
to Scala here I'm gonna import over here
so a scholar dart and IO dart star well
in Scala use underscore for this purpose
underscore takes very different meanings
depending on the context and over here
I'm gonna say source dart from file and
I'm gonna specify the same file again
that I want to read and concatenate the
content to a string and then I can go
about processing it if I'm interested in
so you can see right here we read the
content of the file very easily as well
so very simple code to do things that we
want to do not a whole lot of effort at
all as you can see there are some seats
on the front if you want to move over
but you're most welcome to stand there
as well whatever you are comfortable
with so um how do you really so we saw
how to work with the file now typically
when we write applications we do want to
talk to some other external programs why
because I may be writing an application
where I want to talk to another
application that's doing some work to
give you an example years ago I wrote a
little a hook the for subversion where
anytime a chicken happens it would then
wake up and look what look at what the
chicken was who checked in the file and
there was a little rules file I wrote
where depending on what the file was and
who checked it and it will notify
appropriate people and then once they
take action and check in again it would
up notify other people and so on well it
was about 150 lines of code for me to
write this in that about 150 lines of
code 50 lines of code was to say hello
subversion could you please tell me who
checked in this file so this was working
fine over the time I made other
repositories and I would just reuse the
binary and I would only make change the
rule file and everything worked fine
well programmers would secretly tell you
there's more fun in rewrite
then using code so I decided I'm gonna
rewrite this this time in in groovy and
can you take a wild guess that 50 lines
of code to talk to subversion and say
hello is how many lines of code take a
wild guess I heard two but there was one
person who said one okay let's see how
we could do this so in here I'm gonna go
back to goomy right here and I'm gonna
just create a string SV and help this
could be any other thing you want to do
with that CSV n you could say SV and
look up for example or agate or whatever
you want to talk to you so I just
created a string and I call a method
called execute over here well before we
do that let's just go ahead and print
the string and that is nothing but the
string what kind of string is this well
no doubt about it it is nothing but the
good old java.lang string that's what we
are dealing with there are some seats in
the front if you want to walk to the
front and and so that's what we just
just did here and then I'm gonna say
execute over here and in this case I'm
gonna say text and I'm gonna print the
result and you can see that's the output
from subversion itself one line of code
to do it now of course things could
potentially go wrong and what do we do
if it does well you can do the execute
dart l dot txt and then you can get the
standard output or the standard error
depending on what you're interested in
but if you're wondering what kind of
object we are dealing with it is nothing
but the java.lang throws this object we
are dealing with but grew we added some
nice flexibility to it so we can readily
use some of these you know methods so it
really reduces the amount of code we
have to write now imagine you're sitting
at your desk one afternoon and you want
to really get something done you don't
want to fight with the language you just
want to get this done create a prototype
get a feedback from your colleagues and
say is this what you want to really do
and then that lightbulb moment I talked
about again becomes extremely important
now of course something goes wrong you
can always deal with the error and if
you want to talk to the standard input
our standard error you can do that
fairly well as well so that is an
example of how we can talk to processes
moving on to the next one I want to show
you here this is called the execute
around method pattern this
pattern comes from the small talk days
and it's extremely important and very
flexible pattern but I'm gonna show this
in Java 8 because Java 8 now has lambda
expressions so we can do some really
nice things let me start with a quick
example here let's say for a minute that
I have a class called resource and the
resource is going to have a constructor
over here so I'm going to say a resource
and all I'm gonna do within this method
over here you simply say creating that's
all I have written right here then I
have another method here I'm gonna lower
the font a little bit is the font size
still good for the people in the last
room all right so I have method over
here called up one and all that I'm
gonna do within the op1 here is simply
say op one then I have another method
here called up to and all that I'm gonna
do within the op two method simply is to
print up to and finally I'm gonna write
a method called clutter over here called
finalize and then within the finalize
method I'm gonna simply say closing now
imagine for a minute this resource is an
expensive resource and that's using a
lot of stuff not memory but other
external resources so I create an object
of resource right here and then I'm
going to say over here resource dot up
one and I'm gonna say resource start up
two and I call these two methods right
here and when I run this code you can
see it called up one and up two but it
did not do the closing why is that
did I misspell the finalize method no
I've spelled it correctly what's going
on here
the other garbage character did not run
why because the garbage collector in
Java
he's like the garbage collector in my
neighborhood right it says I got better
things to do there's no reason to
collect this garbage in other words it
says there is a lot of memory in the JVM
no urge no urgency to go run this
garbage collection now this reminds me
of an experience well what if I really
want to clean this up what's going to
happen well I had a client call me up
and say we got a problem in the code do
a code
view and while you're doing a code
review you can probably help us find the
problem that's in the code and I asked
around what support the problem is and
most programmers gave different answers
but one programmer gave me probably the
best answer he said our program works
fine most of the time I said that's good
when does it not work and he said well
it doesn't work between 7:15 and 9 in
the morning I said that is wonderful
every day no only Monday through Friday
it works fine on Saturday and Sunday so
I was a little puzzled I said what could
be the problem why this program won't
work on Saturday and Sunday well it
turned out this was a large company with
about 100,000 people this was a portal
application people log in to work when
they come into work and there was a
resource contention so I found out that
in the constructor they were asking for
a database connection in the finalize
method they were closing it because
there was a lot of memory in the system
the finalist was not being executed the
error was not being propagated properly
so it was confusing to see what was
happening once they realized this was
the problem I thought a closed method
and then I said go ahead and run this
and as soon as I put the closed method
the problem seemed to be gone for a
minute so one of the programmers ran
through this and said yep that seems to
work fine looks like we found what the
problem was well it was really
interesting that afternoon when the boss
came back from lunch and wanted to know
how things were going and the team said
oh we fixed the problem we've been
having for a you know several weeks now
and he was curious as to as he should be
and said what did he guys do and the
team said oh we added this one line and
then he said what else did you guys do
well no we added this one line the
problem is gone and then there was a
little pause and I could hear him
whisper if you guys only added one line
do we still need to pay rank it so yeah
so we have to know where the problems
are we got to fix it properly isn't it
well unfortunately this is not a good
solution still there is something I'm
forgetting do you know what that is
that's correct thank you very much
that's absolutely right and so to do
this I have to put a try block over here
and handle the exception situation so
the right way to write this would be to
put a finally block and then do the
close within the finally block itself
make sure that even if there was an
exception the cleanup happens properly
well now what's the problem the problem
is look at the ceremony in this code now
there's a lot of code we have to write
and we have to remember to write this
code this way every time we use the
object but what are the chances this is
not going to happen if I am the
programmer on your team because this
doesn't require discipline it requires
sainthood and I'm not gonna be that good
forever right so most of the time people
would be complaining if you only know
how to write code we won't have these
errors in the code and bugs in the code
so my argument is what can we do to
remove this ceremony well thankfully
Java already has an answer in Java 7 it
is called the a or M feature so what is
a RM stand for it stands for automatic
resource management and what is
automatic resource management in
automatic resource management what you
can do is you don't have to go through
the ceremony of the finally block you
can remove it and you just put the try
block and within the try block you can
simply move this code now from the
definition area right into the try block
right here and for this to work you have
to go back and say over here that this
implements over here the the interface
called auto closable which has a closed
method so now that I move this around
using the automatic resource management
feature notice that I don't have to
write that much code anymore
it is extremely concise compared to what
we had a minute ago so yeah this is
great we have a RM are we done well
unfortunately no and the reason is what
if as a programmer I come along and I
still don't put the try block and I
simply write this exact code I had
before so in other words I did not put
the try and I wrote the code just like
this what happens well of course it
fails because it doesn't really clean up
the resource now we are back to exactly
the same problem as we had before but
this should be of no surprise to you at
all because
you should never trust a feature with
the word management in its name right so
what is the thing we can do about this
well that's the beauty is what if we can
write this code in a way we would never
have to worry about this and say you
know that's the only way to get this
really working how could we do that so
let's get rid of that AR M think for a
minute and we'll make this really do the
right way in a deterministic way in Java
so notice I said not close which is not
the right solution at all we agree to it
and I went back and removed this
implements back to square one where we
were minute ago but let's go ahead and
run this for a second
now we're gonna fix this for the
programmers now as a programmer I don't
want to do any work that I don't have to
do and I don't want to think about oh
this is the right way to use the code I
want this to be natural for me in a way
that I can use it how do we do that well
the first thing I'm gonna do is I'm
gonna make the close method private so
now that I mark the close method private
what is going to happen right now well
actually in this case I want to make
this private method so now that I mark
the method as private the code is
complaining that I cannot call the close
method well the programmer says all darn
it can remove it and move on now well
that doesn't quite help that but it's a
step forward trust me it really is now
what I'm gonna do is I'm gonna go make
the constructor private as well and now
the programmer is gonna say darn it how
do I really create an object now we are
making the programmer think a little bit
right but in the nice direction I'm
gonna then go back now and I'm gonna add
another method to the class this method
is going to be a static method and we'll
call it as a use method now within this
use method I'm gonna create a resource
object you see I can remember to do this
once as an author of the class because
I'm still knowing what I'm doing I put a
try block I put a finally block like the
way I should and within the finally
block I close the object as the way I
should really close the object as well
so this is a construct I wrote in the
code we're in the use method I'm
creating an object calling it calling
the try block I haven't done anything
with it in the finally I call the close
method now within this what I'm gonna do
I'm gonna say over here a block Dart
except and then I'm gonna send the
resource over to this block and say go
ahead and use this please now what in
the world is this block well that's
where the lambda expressions come in so
in java 8 we have this thing called
functional interfaces what is the
functional interface well before I
answer what a functional interface is
now I stop to think anytime I look at an
interface I ask myself is this a
functional interface or is the
dysfunctional interface kind of
bothersome right anyway a functional
interface is an interface that can only
have one single abstract method well you
can use a runnable for example you could
use callable for example so there are
several of those but Java 8 itself has
another interface functional interface
called consumer which we could use but
pick your choice it doesn't matter which
one you're gonna use and I'm gonna say
consumer over here is accepting a
resource and I'll call this a block so
now if you look at the code the resource
constructor is private the clothes is
private only the useful methods are
public in this class and then the use
method is accepting a consumer block it
creates a resource in the safety Haven
of the try block it calls the block and
says go use this to whatever you want to
and then when it comes back that are
alive it handles the object and then
does the close on it so how would I go
about using this code I'm gonna go back
to this code now and I'm gonna simply
say resource start use and in this case
I'm gonna simply say here's my resource
I have on my hand and I'm going to
simply put here a lambda expression
where I'm gonna use those two calls
right here you could do this in almost
any language that has lambda expression
can Beck talked about this in his book
called small talk best practices about
20 or so years ago and we could use this
in almost every language that we are
interested in using this in so that's
that's one of the benefits you see off
this let me flip this over here so that
is an example of how we could write this
implementation so oh where's the
consumer so it cannot find the symbol
consumer make sure I spelt it correctly
so this is going to be
that's true you build our stream dot
function so essentially the idea really
is apparently not so where's that coming
from
okay that should be function dot
consumer oh where did it put a star
after it might my mistake there we go so
what did it really do in this case you
can see that we come into this block of
code and then we essentially say I want
to run this block of code but a resource
has been pre manufactured and given to
me I work and use this resource here
when I leave this block of code on line
number 25 that resource disappears and
gets cleaned up properly now this is
also called as a called as loan pattern
sometimes because it's as if you're
obtaining an object in loan you use it
and when you return back like you're in
go to a rental car company if it's a
good company they wash it before they
give it to you and then when you return
they check for damages and what-have-you
so that is an example of what this
pattern does now the nice thing about
this pattern is we can remove a lot of
boilerplate code and also don't have to
burden the programmers with or you have
to handle the exception and do the
cleanup properly it becomes a very
streamlined we actually use this on a
project where we had transactions and in
our service tier every class ended up
being almost the same where we would
copy and paste the code create a
transaction do whatever we want to do
within the transactional scope and then
in the end check whether everything went
fine if so commit the transaction
otherwise log and rollback the
transaction and very soon you realize
programmers start doing something they
that we should be careful about they
start copying and pasting this code and
start modifying it that's called
template driven development right and
then they take this template and then
start modifying this code and so soon we
said why don't we create a class called
transaction dot run in transaction and
then very soon all that we had to do was
save our transaction got one in
transaction and put our code and the
transaction was pre created we get
access to it and when we returned it did
the check into commit or rollback now if
you're wondering if you have ever seen
something like this in Java we have seen
this quite a bit over
years you have probably used
synchronized and anytime you synchronize
this is exactly the pattern you've been
using in synchronized the only
difference is they kept it to themselves
and we couldn't do this for our own code
unless it was part of the language
syntax now we could do something like
synchronized where you have a nice entry
and exit block you can do it for any
code of your own choice very easily so
synchronized is a good example of the
this pattern and now we can use it for
our own code as you can see very easily
in this case now we saw that in this
thing called execute around method
pattern now let's talk about one other
very fundamental thing I'm gonna show
this in groovy first then I'll show you
in Java Java 8 let's say for a minute I
have some names over here so the names I
have over here on my hand are let's say
Jack and then I say Jill and then I'm
gonna say let's say Bob over here and
let's say you know branch so I've got
bunch of names now the problem given to
me is I should make all these names
uppercase and I have to print them out
let's see how we're gonna do this for
int I equal to 0 I less than name start
is a length or size size okay is that
less than or less than or equal to right
so how do you feel after writing this
loop dirty isn't it right so nobody in
the free world
should be forced to write this loop
would you agree this is insane this is
2013 come on
ok let's try one more time name in names
how what did we leave already like a
weight has been lifted off your shoulder
right we're not sitting and fiddling
with I and I plus one and then say oh I
once again had my off by one error right
we don't want that life is too short for
that so what should we do oh let's go
ahead and say define upper case let's
call it upper case whatever you want to
call it is an empty collection and then
I say upper case is going to take in the
value named R to upper case so I'm
adding to this one at a time well that's
great so far we did that but now I have
to print it well how do I print it oh no
problem name in
per case and then we can simply loop
through and say print line name itself
that was pretty easy wasn't it well you
did this and your colleague says yeah
good try but we want them all in the
same line
oh no problem I can do that for you no
worries and your colleague says yeah
great thank you but that's not the way
we normally print that what about a
comma oh of course I can give you a
comma also there you go then you say
wait a minute but what does that stupid
comma in the very end okay I got to get
rid of that comma but how do you get rid
of the comma in the very end you
probably anybody had this problem
everybody in the room this is sad isn't
it this is the saddest thing in our
field we never talk about it in public
right that's the way we feel about it
right and then you sit there and fiddle
with this for about 30 minutes and
you're like damn it cannot be this hard
is it and then you google friendless lee
and you find I love Google by the way
because when you google you find there
are twenty thousand people have the same
problem you do right so you're not alone
in this world right and you go through
that and you finally say I know how to
solve this problem this nagging user
want me to fix it I will and then you
say for INT i equal to zero right and
then i less then okay I'll get through
this really quickly right and then you
say sighs and you tell yourself I will
never be back in this field right and
then you had to say a printer name for a
minute and then if I is not equal to
uppercase dart sized dart nom is minus
one oh dear God and then you say you
know that right and then you get that to
work and then you have blowup right well
you know something is terribly wrong
let's try this again why not try this
one more time
names dart collect it Dart uppercase so
to uppercase now what did we do we are
saying just get the job done all right
then what do I want to do Dart joy in
and how do you want to join it with the
comma now of course when you are done
with this you want to print the stuff so
right there we're gonna print it after
we join in it and notice how beautiful
that was all that we did was we just
called the join method isn't this the
way programming should be the day I
learned about join I cried that night
right this is like the way it should be
after all right so that is an example of
how you want this to be very sweet very
simple and you can see how this works
now how do we do this in Java by the way
if you want to do this in Java well
thankfully we can do exactly the same
thing in Java also let's go ahead and
give this a try one more time I'm gonna
get rid of all these guys we don't care
about right now so let's get to the main
function I've created a list of strings
over here so which are the names that I
have an arrays dot as list and here are
the names I'm interested in using so
let's go ahead and try this so I'm going
to say output over here and what having
outputting very simple names dart stream
and I want to do a mapping operation
where I'm going to simply say string to
uppercase over here and then once I've
done with that I'm going to simply say
collect this all together by joining it
with what do I want to join with with a
comma so that is my code in Java 8 and
for this to work I'm gonna import Java
dot util dot over here stream dart
collect collectors and I want to bring
in the functions of the collector which
is going to be the static include that I
want to bring in and you can see how
that's working in Java 8 so very simple
again to be able to do simple things
must be simple and and hard things must
be come in to somebody else so that is
an example of how you can see this is
very easy to do and so no really
fiddling with low-level stuff please yes
no no it's Java 8 library upgrade
upgrade upgrade so yeah absolutely
so that is an example of how we can do
this very simply that's an example of
how you can join strings very easily
high level of abstraction let's talk
about delegation for a minute this is an
awesome feature now let's think about
this I'm sure you all have read good
object-oriented design books and what
are the good books tell us good books
told us we should not
use inheritance we should use delegation
most of the time and they told us why
because delegation is much better than
inheritance inheritance must be used
only for substitutability
and not for anything else and so we
heard all of these good things now you
say you know what this is all a great
news I completely agree with those
recommendations and then you are working
on a Java project and then it says base
over here is a class it's got a function
called let's say f1 and it's also got a
function let's say call f2 doesn't
matter what these functions really do so
you are interested in writing a class
and you say class my class and your
class is required to have a function
call f3
so you wrote it but then you look at the
requirements and your class needs to
have two other methods f1 and f2 which
are already available in this base class
so you look at this book and they talk
lengthily about how inheritance is a bad
idea you should never use it unless you
really want a substitute ability they
talk about this cost substitution
principle and they talk about how
wonderful this principle is you read all
of that and then you say this is
absolutely incredible absolutely correct
and you close the book you turn to your
computer and you using inheritance right
now why do we do this the reason we do
this is because it is very easy to use
inheritance notice how I can come over
here and say extends base and how cool
that is right I don't have to sit there
and write the stupid method f1 and f2
well then you realize I really don't
want to do this I really want to use a
delegation how do I do it
well you remove that from there and then
you say over here base B equals new base
you create an object public void f1 and
then you say B dot f1 you write this and
then you complain you know what this is
really going to slow I don't like it
well there are two ways you can make
that better you can find a fast typist
and they can type this very quickly or
you can find in Java we speed we never
do stupid things as Java programmers
instead we create IDE is to create super
things right so we will say you know why
not just find an ID shortcut and so you
can write
konna gently and say we factor and then
we can say replace inheritance with
delegation and before you could blink
your eyes it would simply replace all of
that and write it for you and then now
we will be treating all the shortcuts
for it right so isn't that cool
well kind of but the problem is this
only creates more problem if I come and
add a method to the base class I gotta
come in tweak this again what chart
could can do that for us if you remove a
function from the base class you've got
to come in to remove it manually if you
modify the signature of a method of the
base class well nevermind that
right and then you say that's why we use
inheritance well how do you deal with
this problem let's look at an example of
how we can deal with this problem and
I'm gonna use groovy for this I have a
worker class right here and the class
worker has a method called work and
within the work method I'm going to
simply say working right here that's all
I have so far nothing else now
groovy has a beautiful concept of
delegation which is done at compile time
to understand this let's create a class
called manager and as you would expect
the manager does nothing and now I say
Bob equals new manager over here and I'm
gonna say Bob dot work and obviously
this wouldn't work it's an alien concept
for the manager right but this marriage
is extremely smart
it says delegate over here and simply
say worker victim equals new worker
right and notice what happens when we do
this the manager is now able to support
the work method really well so we didn't
have to really do much effort at all
what really happened if you pull up the
ast transform code and take a look at it
using groovy console you actually see
this method being added in other words
whatever we did manually are using the
ID a few minutes ago has been done for
us already but the benefit of this is I
can now go back to the worker class and
I can say to report over here and then
now I can call writing report over here
and the manager says I can do that as
well sure bring it on right and so you
can see that how that was compatible now
on the other hand over here let's make
it writing for a minute and on the other
hand over here if I were to have
to pull off these objects what would
happen so to understand this if I were
to write a class called analyst and the
analyst contains a method called work
and where I'm gonna simply print out
let's say analyst working and then I
also have a method called analyze over
here and within this method I'm gonna
simply say let's say analyzing so right
there is analyzing and now what I'm
gonna do is come down to the manager
class and I'm going to say a delegate
analyst over here and we'll say analyst
over here equals new analyst we created
an object now I say Bob dart analyzed
now notice the work method are
conflicting between these two classes
however the way this delegation works is
it first delegates to the first object
in the delegation list and only if that
object doesn't have it
again this is compile-time decision it
goes to the second one so as a result
you can see that the working really
comes from the worker and not from the
analyst itself however what's going to
happen if there's a method already in
the manager class so the order of
dispatching is the methods of the class
takes precedence and if the method
doesn't exist in the class the first
delegate takes precedence and if it
doesn't have it the second one that
takes precedence to understand this
let's go back to the worker class and
write a method called vacation and I'm
going to implement this method
navigation method in the worker code at
the beach right so the worker knows
exactly what to do how to enjoy the
vacation on the no occasion for an
analyst so for the you know manager
though I'm going to say define a
vacation and this says over here a year
long right and now if you go to Bob and
say vacation Bob knows exactly the
priorities and you can see how that
guard dispatch to the Bob's vacation
method and not from the workers method
at all so that is an example of a
delegation works questions so far yes
please you cannot force which method you
want the delegation rule is going to do
but they
simplest answer is then you would have
to override the method in that case if
that becomes very important yeah um so
that is an example of how you can go
ahead and use the delegation itself I'm
gonna move on to the next one here which
is a pattern matching concept which I
really like in Scala
what does pattern matching really do
let's take an example here let's say for
a minute that in in Scala I'm gonna
write a method called process and this
is going to take a message of some kind
it's going to receive and I'm gonna say
this is any message I can send to Scala
I'm gonna call this method real quick
I'm gonna say over here a process and
I'm gonna say I'm gonna send a - I'm
gonna call process and send let's say 3
I'm gonna also call process this time
and let's go ahead and send let's say
4.2 and I will also send over here to
process let's say the command here I'm
gonna message I want to send here is you
know let's say Joe
and finally I'm gonna say process and
I'm gonna send little XML string so
great and then let's say howdy and then
end of greet also so there are these
messages I'm sending to Scala how would
this really work well as we send this
message to this this particular method I
want to go ahead and parse these without
having to go through too much effort so
I'm gonna say a message match and within
here I'm gonna say case and underscore
in this context is like a wild card I
don't care what you're sending kind of a
wild card so in this case I'm gonna
print you sent me something right you
called so that's all I'm gonna print
right now nothing really exciting
happening at this point so that should
print it for all the messages we passed
in so far you can see that but instead
of this I'm gonna say a case and I'm
gonna say it too and I'm gonna simply
say over here AHA - and you can see the
two got processed in the very top but
instead of this I could also be case a
type specific I could say X is an
integer and then I could say for example
here you called with an int and I could
specify the value of the variable in
this case whatever you passed in and it
says you call with an entry whereas for
two it was very different the order in
which it is going to process this isn't
the order in which it appears in this
these are partially applied functions
it's creating now if I go back one more
step and say case and I'm going to say
this is going to be something which is a
double and then I can specify over here
a print line a guard double I can
display the value again if I wanted to
you can see got double similarly I could
say for example a string so I could say
this is a string I'm interested in once
again I can either put a hello directly
right here whatever the string I had I
don't remember now yeah I can say Joe
here directly or i can also say hello
and then i could print the string itself
over here which is the message right so
i could print the message value out if
I'm interested in so those are some of
the examples of how we could use it
finally how do I deal with the XML
document well let's think about XML for
a minute now a lot of times you have
seen code with XML and how do we deal
with it I'm sure you've seen your share
of XML like this isn't it so you would
look at code like the line number 16 and
people will tell you we are using XML
but everybody is lying isn't it they're
not using XML they're using a string now
we all complain about XML but how would
you behave if you're put in the string
all the time
right poor XML it's been in bondage
forever right
so scholar says XML deserves some
respect just a little bit right so it
says I'm going to take any well-formed
XML as a syntax in the language I know
it's a bit scary but you drop an XML
right there and it's able to deal with
it so now I go back to the code right
here and say given a greet and a message
that I have obtained from this great I
want to then go ahead and say over here
print line you have given and let's say
message over here and you can see how we
are able to extract that and say you
have given howdy so you can actually
extract a content of XML files using a
nice pattern matching technique as well
so if you are dealing with a lot of code
where you have to pattern match for
various types of data this can reduce
the amount of effort and Cody
very quickly
well the question really about
performance is I would say benchmark and
see a lot of times we get overly
concerned about performance when it
really is not a concern with all the
other things we do it's always apples to
apples comparison right no it's a part
notes doesn't pair parse through at all
it's a partially applied function so it
would actually dispatch based on typing
like a multi method does that's that's
the beauty of this it's not going to go
to a FL statement looking through these
things because these are partially a
flight functions yeah I got you a
question now yeah um let's say how are
we going to deal with XML documents now
let's say for a minute you are at work
one morning and your colleague comes to
you and says you know what we want to
develop an XML output of some authors
and languages now anybody here who has
written code to spit XML out I'm sure I
know a few people are reluctantly
raising the hand I understand your
feelings yes absolutely but those of you
did dare to raise the hand anybody wants
to go write more of it tonight not a
single hand goes up because first when
we get excited and then we start writing
code to work with XML after about a few
weeks we quickly realize that the job of
writing code with XML should be given to
people in the prison right nobody in the
free world should be doing it absolutely
right well ok it's not that bad really
but let's go back and see how we can do
this in groovy well groomy has a DSL a
builder for this so I'm gonna say
builder over here so builder equals
groovy dot XML dot markup builder so I'm
gonna create a markup a builder and once
I create this I'm gonna say builder dart
languages now it has no clue what
languages is in this particular given
context it doesn't have a clue what that
really is
so it says well I'm gonna assume you're
really interested in an XML document and
produces this little XML baby as you can
see here right so now I want to go one
level down here in this hierarchy so I
step into this code and I say language
over here without any expansion language
and you can see it created a child
L
right here but instead of doing this we
could also say Lang's dart each and now
I can put this inside that context and
you can see that it produced four of
those because my Lang's actually has
four different languages and their
authors listed now I can go back and say
key comma value over here and then I can
specify over here that the author over
here is the key that I want to specify
and you can see how the oil actually
Lang isn't it so let's go ahead and
change it as a language over here let's
call it name for a minute and you can
see how it produced the name as those
and then finally I can say over here
author and then provide the value as the
author again the hierarchy says how you
can create this XML document once you do
this you can dump it to a file you can
dump into a string buffer what builder
whatever you want to do you can do that
very easily the only thing I kind of
remember is don't tell the boss that
this is so easy say the boss that it
takes a lot of effort and take the
afternoon at the beach right so that is
an example of how you can do that
wonderful processing of that that's
great so far but let's go a step further
and look at Exim a tail call
optimization now waters tail call
optimization really now to understand
this I'm gonna use Scala but you can do
this in almost any language like for
example you can do this in groovy using
trampolines you can do this in closure
as well and in Java 8 you could try to
do this with your own techniques the
language doesn't support it right now
but what can we do with this let's take
an example of a function called
factorial now the factorial over here
takes a number as a parameter over here
and I'm gonna write this code and how do
I write it I could say over here
factorial is equal to 1 to begin with I
want to return the factorial when I'm
done and I could say over here for I in
number one to number so I could say one
to number and then I could simply say
over here the fact is going to be I'll
call this fact for now so the fact is
going to be the value of fact x equals
the value of I itself let's go ahead and
pry that so I could call factorial over
here with the value of 5 and you can see
that in this case it printed 120 but you
look at this code and say
this code is ugly because it's
imperative in nature you are completely
mutating this value over and over it
doesn't make you feel good at all and
you know that you want to really program
with immutability but how do you really
do this with immutability well we know
that there is recursion would you agree
that recursions are cool
absolutely up he's the sounding yes over
there if you use recursion you get to
have more friends hang out with you
right
they say this dude is cool because can
solve the problem with solution to
sub-problem how cool is it so people
want to hang out with you we can have
more parties at home or elsewhere so
this is really nice you're rockin doing
this so how would you really use this if
number is equal to one then you could
say return number itself else return
number times factorial of number minus
one and the code is so expressive
compared to what we had a minute ago so
you certainly want to be writing code
like this overall because it is actually
much easier to work with isn't it so you
write recursion and you have a lot more
friends and you're having a good party
but unfortunately one night as you're
having a good party in good time and
then you're talking about recursions
this guy that doesn't like you I know I
mean whom I'm talking about right shows
up to the party and says so you think
recursions are really cool huh and it's
like yeah look at the people around here
how cool they are how much fun they are
having and your dudes say it's really
why don't you try this what's gonna
happen now Stack Overflow exception boom
and the party is over right everybody
leaves and you sit there alone saying
this would be so cool if it only worked
not right and so how do you deal with
this
well what if we can do this in a way
that we can use recursion without any
problems well there's a fantastic book
called sicp sicp just Google for sicp
but sicp is for structure and
interpretation of computer programs and
in this book Sussman and Sussman talk
about a technique for optimization they
talk about procedure versus prose
proceeded as the code we write process
is the one that runs actually after
compiler optimization and other
techniques so you write a recursive
procedure it runs as a recursive
procedure until this fellow showed up
if you run as an iteration it runs an
iteration but the real power is what if
we can run write it as a recursion but
it runs as a eat aeration wouldn't that
be cool well why would it be cool well
we can write it as a recursion which
means it's very expressive but when we
run it it can run without have blowing
up the snag because it turns into a
iteration under the hood how do we do
that well to do this you can do what is
called tail call optimization what does
that really mean stare at line number 5
for a minute what's the last operation
we perform on line number 5 that's right
it's a multiply operation which means
you had to hold the number on your hand
and wait for the multiply and then you
climb up the stack to do the factorial
number minus 1 and you keep doing this
every step and then finally hit the roof
and blow up the stack well what does the
last operation really is factorial
itself if it really is factorial itself
the compiler can say rather than
climbing up the stack I will step one
place down and recall the method with
the new parameter because once the
method is completed I don't have any
more work to do so rather than me
receiving the parameter and giving it
back I made a little step back and call
the method
so compilers can turn a recursion into a
iteration when it is really tail call
optimized how do I do this so I'm going
to go back to this code and say fact and
I give the integer value here and in
this case I'm going to say if the number
is actually we make it a big int and if
the number is not a 1 I'm gonna return a
fact itself if the number is not a 1 I
return a fact times the number comma
number minus 1 so now if I go back and
say 1 comma 5 over here the code is able
to produce that result still however if
I try to increase the number like your
fellow came and told you you can run it
and notice now it did not love the stack
but now you can tell that fellow to
memorize this number of the night right
so
is an example of how you can write this
in a tail call optimization now it is
quite possible that you may probably
come back and you modify the code and
refactor it and then you do some
refactoring like this and notice it
didn't complain but if you put a large
value one more time it will still blow
up the stack one more time how do you
deal with situations like this well I'm
sure we all talked about unit testing
I'm a big fan of it as well but if
there's a problem simpler than having to
write unit tests we should definitely
use it and that is called Scala dot
annotation dot tailed req and then now
if you notice over here it doesn't give
any errors but if I go back and say one
times factorial it asks me what are you
doing venket this is not a tail call
optimized code and so it says that I
cannot compile this code and gives me an
error because it's no longer tail call
optimized so this is an example in Scala
you can make that a little bit more
fluent if you are interested it is very
simple to do and you can simply say over
here I want to hide this function with
encapsulation so I say implementation
and I'll call this as implementation and
then now I can simply call the
implementation but the problem is now we
have exposed details that are not
necessary for the user so I'm going to
go ahead and remove this one from here
entirely make this factorial and I
define factorial over here to simply
take the number alone and in this case
it is going to return a big end but
within the body of this code I'm gonna
move this function itself after all its
higher-order function and now I can
simply return factorial implementation 1
comma number and have the result back go
back out so as the result we can make
the function really smooth for the
calling point of view and enjoy the tail
call optimization in the encapsulated
mode under the hood as you can see so
that is an example of how we can use
tail call optimization the next thing I
want to talk about here that I really
find interesting airs metaprogramming
what is meta programming meta
programming is writing programs to write
programs how cool that is right so let's
look at an example of meta programming
I'm gonna go to groovy here for a minute
to show this I'm going to say Astor
equals hello and I'm
go ahead and print the string value so
you can see that in this case it printed
the string value but I can also say
print string darts out for example it
tells me it doesn't have a clue what
shout is but I can go to this instance
and say metaclass dart shout equals and
I can add a method call it say to
uppercase over here so if I run this
code now you can see it acquired a new
method this is called method injection
well method injection is a good idea
there is something even more fancy we
can do which is method synthesis what
does that mean so if we say class let's
say person over here and then I'm gonna
say define work in the person and I can
simply output over here working for
example and now you can see I can call
this method I can say for example define
Sam equals new person and I can say Sam
dot work over here and call that method
however what if I say Sam dart play
tennis so play tennis over here and I
can call this method similarly I can say
Sam dart play tennis one more time and
Sam dart play let's say football one
more time I can call this repeatedly
well if I do this how would this work it
complains that it doesn't have a clue
what play tennis well to solve that
problem I want to follow a protocol in
this example and the protocol is any
method that starts with a play is a
method I want to handle automatically
that's a convention I'm gonna follow so
I'm gonna say method missing and I will
write over here a string name comma
arguments and within this i'm gonna
simply say you called and i'm going to
simply say the name of the method you
actually called now all of a sudden
notice how this says you call platon is
you call play tennis and you call play
football what's really happening well
this method method missing is called the
mother of all methods it says if you
don't find the real method come to mama
right so it handles that without
complaining and you can see how it
receives the call and handle set so this
gives us an ability for us to
dynamically synthesize code at one time
not only can we synthesize this code we
can cache it also by putting this into
the object using
meta programming techniques so this
object would have acquired behavior well
I wish I had more time to show this how
to write this but I'll show you how this
would feel if we were to write this in
order to show how this would feel if you
were to write this I'm gonna go ahead
and show you an example of how Grails
actually is already using this so we can
get a feel for this very quickly so if I
go back over here I have a Grails
project that I'm gonna use over here
this project doesn't have anything at
all really right now I just have created
a model called a team over here this
model team doesn't have a whole lot you
can see that this model team contains a
name and a mascot that's all it contains
right so that's all this one has it
doesn't have anything else but what I'm
gonna do with this over here is I'm
gonna ask him to give me some
interesting methods to work with
well because I'm lazy and we don't have
time which is a good combination I'm
gonna go ahead and use the grew a Grails
shell so I'm gonna bring up the Grails
the shell over here and in the Grails
shell I'm gonna say import let's say
sample for a minute so a part of me so
Grails shell I'm gonna bring in a Grails
shell let me make sure I'm in the right
place first of all so ah so this is a
feature I had upgraded to a Java eight
and looks like this is not compatible at
this moment but let's go ahead and fix
it real quick so part on my fixing over
here for a second so let's go to my
profile and flip this for a second I
should remember to flip it back later on
so so let's go back over here and try
this one more time so so Grails Sh
so I've started the Grails shell so I'm
gonna say import sample so I brought in
the sample class and now I'm gonna
simply a package rather so I'm gonna say
right here
give me a team with a certain name
that's what I want to get so import
sample dart star and PM dart find by
name and I'm gonna say blah is the name
of the team well before I do this part
on me I want to go ahead and find this
call this finder method but team dart
metaclass
dot methods dot size and notice it's got
157 methods and none of us had anything
to do directly to write that today but
it's there but I'm gonna say team dot
find by name over here and say blah
there's no team like that really but
when I asked him how many methods his
guard notice now he has acquired one new
method
it went from 157 method to 158 methods
if I asked for this one more time notice
that reused that method that was there
so the method count did not increase but
if I say now find by mass cart over here
and ask him for some mass cart I don't
care what the name here is as for the
number of methods again and notice it's
159 methods similarly if I say team dart
made a class one more time and then ask
for a part of me in this case I asked
for fine by name and the mass cart and
I'm going to give two parameters right
so this is parameter one and I'm going
to give another parameter here and again
that doesn't exist but doesn't matter
now it's got 160 methods so the model
here is that you can see how it is
acquiring these methods dynamically and
if you didn't have metaprogramming
things like Gradle and Grails will have
a hard time to do what they're so
fluently doing it's really elegant the
last thing I want to talk about is about
tackling shared mutability now we all
know that mutability can be a little
problematic but sharing is a good thing
but shade mutability is the direct
pathway to hell and if we're going to be
doing with dealing with shared
mutability it becomes really hard
well softer transaction memory says I'm
gonna give you variables that are
mutable but completely managed how does
it really do so I'm going to define a
variable called balance which is going
to be a value of 0 to begin with I'm
gonna go ahead and print that value here
of balance you can see the value is 0
but I'm not going to be able to change
it because it's immutable but I can
create a manage to reference call ref
and a manage reference basically
provides transactional boundaries and it
can only modify this our object when you
are within a transaction so now I print
balance notice the reference object a
special managed object on the other
and if I were to ask what the value of
this is by dereferencing it you can see
it is a zero now I'm gonna write a
method called increment so define
increment which takes the balance as a
parameter and what I want to do within
the increment method is I'm going to
simply say ref set and I'm gonna say
balance value is going to be the current
value of balance plus one so I'm
incrementing the balance in here now if
I come back here and call increment and
send the balance to it notice what
happened just now it blew up on my face
saying illegal State exception no
transaction running to say that there is
no transactions right now running and I
have no business touching this object
and modifying it so unless synchronized
and suffering Java where it quietly
misbehaves this screens loud to say you
shouldn't touch this object right now
because you're not in a transaction
you're like well well it's alright let's
do it right way so you're gonna say do
sync over here you're entering a
transaction what does that really mean
entering a transaction it is asked of
two guys trying to go through the door
at the same time if one person leaves
through the door that person never stops
in a civilized world
when two people approach the door one of
them step back and say after you please
and that one person walks away and the
other person makes the second try to
walk out that's exactly how threads
behave when they are in transactions one
transaction will complete if there's a
collision and the other will retry in
order for us to see this really work
let's go ahead and try this code one
more time well notice that I've called
the increment here and the value goes
from a zero to a one but I'm gonna put
them in contention purposefully so
notice I'm gonna say over here I'm gonna
say it thread over here and darts sleep
and let's give a little delay for me to
wait on the result and then print it but
within this I'm gonna say dart start on
a thread over here and so here's my
thread I'm gonna go ahead and call a
function an anonymous function and
within this function I'm gonna call the
increment and call the balance over here
so I'm setting this guy run in a
separate thread at this point see the
value went from zero to one but to make
sure this is actually
doing it I'm gonna come back over here
and say a print line incrementing over
here right so I'm printing that value if
I run this now you can see it prints
incrementing and then prints the result
what if I run this twice now
concurrently there are two threads
competing with each other you can see
incrementing really went only twice why
because even though they're running
concurrently they did not step on each
other's toes so this is as if I'm light
like about a microsecond bill but after
you
we followed each other but there are
times when we collide with each other
the door let's cost that coalition so to
cause the collision
I'm gonna induce the artificial
collision here so thread sleep over here
and just a slight delay over here before
they could comment and notice this time
because there was collision it said
incrementing twice and not once why is
that because one of the threads
completed the other had to retry the
second time automatically and the net
result should be the same as what you
would expect which is the value of two
in the end and that's what you're seeing
happening assume is a fantastic feature
in closure but you can also use that in
Java if you are interested I gave a talk
yesterday on this topic so if you're
really interested and didn't make it to
that feel free to look at the videos
later on and take a look at it I showed
you 10 cool things you can do in these
languages it is a lot of fun to be able
to have this power as programmers to mix
and match these languages and benefit
from them I really hope you found this
useful thank you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>