<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>PDF Is Dead; Long Live PDF...and Java! | Coder Coacher - Coaching Coders</title><meta content="PDF Is Dead; Long Live PDF...and Java! - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Developers/">Oracle Developers</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>PDF Is Dead; Long Live PDF...and Java!</b></h2><h5 class="post__date">2015-06-02</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/lJ1QTF61CzY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">okay let's start welcome everybody my
name is Brunelleschi sitting next to me
is rough hands
we're from i-tech software and today I'm
going to talk PDF
whereas rough is going to talk Java now
the title of our session is PDF is dead
long live PDF and the question is is PDF
really dead
well looking at my copy of the reference
manual you would say yes because or you
could say Bruno doesn't like PDF because
he tore his manual into but actually I
used that book that much that it fell
apart on its own now PDF is dead why are
some people telling this well because
everybody seems to be using HTML if you
look at the Internet you see that well
in on commercial sites on.com sites 98%
of the documents that are presented on
on the web sites are in fact HTML or
HTML like files like PHP or Java
generated HTML but if you look at
specific types of sites like org gov dot
edu you see that the percentage of HTML
is much lower these numbers by the way
are compiled by deaf Johnson deaf
Johnson is one of the team leaders at
the ISO committee's for PDF and now if
we look specifically at the dot-org of
and dot edu numbers you see that well in
millions of files that we have about
well between 600 million and 700 million
files on dot org sites and you see that
15% of them are actually PDFs and the
percentage of PDFs is the highest for
government sites like 38 percent and on
dot it besides 27 percent now why this
difference what what is different on
governmental sites on educational sites
from dot-com sites
well uncom sites and the Internet in
general you have a lot of publications
so publications they don't need to be
self-contained they may change over time
for instance on a new site you have a
scoop with a headline and then as the
story evolves the page changes and not
all the content in a publication is
produced by the author for instance on a
website you have ads or comment sections
like publications are also becoming more
interactive you have comments comments
on a on a news article or contributions
by people who don't own the website
where as documents a document is a piece
of written printed or an electronic
matter that provides information or
evidence that serves as an official
record a document needs to be
self-contained it if you make a contract
if you have like a diploma you're not so
it's not supposed to change so it's non
dynamic you also need to be able to know
who wrote the document like if you
obtain a diploma from a university it's
important that the people you share the
diploma with know that it's actually the
university where you study that issued
the diploma you also need to be sure
that the document can be secured or
protected so that it doesn't change over
time like a contract where you promise
somebody to pay him like a hundred
dollars an hour you can't change it to a
50 or 150 so that there's a difference
between documents and publications and
if we look at the internet and we leave
out all the HTML pages we see that PDF
is king so in the latest accounts we see
that of the non HTML pages on the
Internet 77% or more than 77% are PDF
files and while you see Word files and
open document files as some of the
alternatives now the fact that PDF is
ubiquitous doesn't really mean that PDF
is alive it just means that a lot of
PDFs are out there suppose that you
would create a new document format or
promoted an existing document format to
challenge PDF what would what would be
the challenges
well PDF is consumed you can consume a
PDF offline so that's that's very
important if you would say let's make
html5 for instance a competitor for PDF
you would need to make sure that all the
content is available offline
so if you have some online references or
external images that's something that
you you'll have to be sure that you can
take care of PDF viewers are ubiquitous
so our browsers but like epub readers
maybe not that big eaters you need to
make sure that the documents are
available for mobile consumption and
maybe you need to interact our
interactivity in PDF you can have forms
you can add comments in to PDFs html5 is
a good competitor on that with that
account and for instance mobile
consumption yeah epub is good for
ereader so you can consume a book
offline but then again epub is a single
purpose it's only meant for four books
you could also attack the weaknesses of
PDF PDF suffers of too much
functionality over the years people have
of Adobe and and and has added a lot of
stuff like flash into PDF and they are
now abandoning it abandoning it so PDF
if you saw the spec that was touring -
that was only a thousand pages if you
would they'd no longer print the spec
but if you would look at the standard
the ISO standard then you already have
1200 pages and and you need all these
technical extra technical specifications
that are on are written on top of PDF
PDF was also designed in a pre hacker
world so once in a while we hear about
vulnerabilities in PDF where a PDF is
exploited and can do malicious things on
your computer so that's that's one of
the weaknesses and then one of the
bigger problems is that not all tools
are created equal
publishers don't always use best
practices so if you have the choice of
20 producers not most of the producers
won't create tagged PDF where a stack
PDF as we will
see in our session is gaining important
importance and some PDFs are really that
you can open them in Adobe Reader
because Adobe Reader is very tolerant
towards false but then for instance if
you would open them with attacks you
would get an exception because the PDF
doesn't follow the specs the same goes
for viewers not all of your support or
features so if you have a comma script
JavaScript in PDF so in PDF you can put
the same JavaScript as you have in in an
HTML page but it won't work on all
viewers because not all viewers support
JavaScript now PDF is just it's more
than them just PDF so it was first
released in 1993 by Adobe but Adobe
handed the specification over to the a
IIM in 2007 with the purpose to make it
an ISO standard and so the first PD the
first core PDF Isis Isis tan that was
iso 32000-1 released in 2008 this wasn't
the first PDF standard before you had
some sub standards like PDF fix was made
specifically for the graphic arts in
2001 PDF a for archiving will focus on
PDF a lot later on was released in 2005
and then you have all these other
standards like PDF v4 engineering VT for
variable transactions in printing UA
will focus on you a later on for
accessibility and then some related
standards that aren't released
officially yet but are in the works
except DF eggman script PRC for 3d and
Podesta's released and I'll have a short
word about this later on now I've talked
a little bit about PDF let's now go to
some examples and I'll switch to a ref
but I have to log in for him so we need
to switch so Bruno give you a quick
introduction on PDF I will give you a
quick introduction to I text to show you
how you can use Java code the user
software live
to create many blade PDF documents so of
course we start with the hello world
example just creating a simple PDF file
which can basically be done in five
steps in high text so first step you
create a document object which is like
an an abstract concept of a document
then we have to make sure that this
document can be written to PDF syntax
which is done by a PDF writer and in
this case it it writes to a file output
stream so we'll create a file on disk
you can also write to memory or wherever
but we'll keep it simple and just writes
to file we'll have to open a document
before we can start doing stuff to it we
add a simple paragraph here so I text
there's all these high-level building
blocks like paragraphs tables lists list
items but we just do a hello world our
paragraph here and then we close the
documents and probably not a big
surprise that we now have PDF document
which is open here in Adobe Acrobat
which a set just has one paragraph
saying hello world so that's very basic
document creation using I text then we
move on to manipulating an existing
document so one of the often used use
cases is filling out forms because a lot
of companies have to fill out forms and
they have the form data ready somewhere
they have it in a database or wherever
they have it stored and it would be
silly for someone to type over all the
content in a form that they have to fill
to submit to a government website or
whatever so we cannot obviously do this
automatically using the ITEX library so
here's some some example code filling
out PDF form in this case this is an
acro form one type of interactive form
in PDF so you can see at first we use a
PDF reader to take in an existing PDF
documents and then we use a stamper to
manipulate that existing documents and
again we use a file output stream to
write out the new
to disk we can get the Accra fields from
this document and then we just
it's basically key value pairs we put I
put my name my own name my own company
and and I'm from Belgium we close the
Stamper the reader and we get the output
which is on the next slide and you can
now see this document is filled so
another simple use case of of
manipulating an existing PDF document
it's all in a document workflow or after
you have sent out your form to a
customer often there's a final copy of
your form so you don't necessarily want
it to be changed afterwards maybe you
want a final copy of your filled in form
and in this case it can be useful to
flatten your form which means you remove
all in interactivity from the form just
you remove all the form fields but keep
the content in the regular PDF content
so I have the exact same same code here
as on the on the previous code sample
it's just it's Bruno's name now and at
the end there's one line added which
says form flattening true and then the
result is it looks exactly the same but
now we have a static non-dynamic PDF
document with a content from the form
but all the interactivity from the form
is gone so this can no longer be changed
in the regular interactive form way
which could be useful for example to
archive this PDF document in your
database or your document archival
system you can also see if you compare
to the previous sorry to the previous
slide here you have the purple bar
saying this is a form you can fill it
out on the next one you can see this is
no longer form it just treated as a
regular PDF document now we will switch
to a another use case adding
then to an existing document but this is
a bit more complex so I'll explain I'll
explain the simple code sample on the
slide first and I will go to a live demo
again we use a PDF reader to take in an
existing document and use PDF stampers
too many plates that document but now we
want to put a watermark across the
documents we just says watermark in this
case so you can see we're using in the
show text aligned line at the end we're
using fixed coordinates to position this
watermark so we have to 297 and 421 as
the coordinates and then it's a 45
degree angle to put on the watermark I
will switch to the demo now okay
so we have almost exactly the same code
here in my IDE there's just an added
part here to add some transparency so
that looks like like a nice watermark
you can see there the coordinates for
the watermark here and here and the
angle this is text the text that we will
be putting on the other documents so if
I run this and then switch to the output
folder you can now see we have used the
same hello world example from before and
now we have a watermark on this on this
document so this was for a very simple
PDF documents now if we switch to
something a bit more complex you will
notice that a lot of things can go wrong
manipulating existing documents so in
this case we have a document with
multiple pages and we have the the same
code stamping on the watermark we just
loop over every page trying to get the
watermark on each page of the documents
so I will run this again
now you will notice on my first page I
don't have any watermark also on the
second page no watermark if I show you
the complete documents which is supposed
to be laid out like this you will see I
only have a watermark on page 13 and
this is caused by by the way that PDF
works with a coordinate system so we
have a bitch coordinate space and the
page is actually just one part one view
on that complete coordinate space and by
convention a lot of PDFs have the origin
so the zero zero coordinates at the
lower left corner of the page but this
is not this is not mandatory so you can
put your page wherever you want in the
coordinate space so this this PDF is
laid out like this in the coordinate
space because it's it's meant to be
printed separately and then assembled or
to put to put a big image together and
because we are using the fixed
coordinates in a code this is actually
the the content or watermark content
that takes these edits to each page but
it's not visible on each page because
it's out outside the visible the visible
area so we'll try to fix this in our
next example
so compared to the previous one you can
see we are now actually getting the page
size from each page for looping over it
finding out what the left margin is the
bottom margin the top etc and instead of
using the fixed coordinates we're now
using these calculated
coordinates to put it to put in the
watermark so again if I run this we have
the same PDF now but you can see on each
page we now have this watermark so
that's an improvement but this page
doesn't show it for some reason
because it's obscured you can see it
clearly here it's obscured by the by the
existing content so again we take a step
back and try to correct this
pretty much the same code again but
instead of getting the content below the
exists instead of getting a layer below
the existing contents we now get a layer
on top of the existing contents the rest
of the code is exactly the same so I'll
run this again and finally we have
created the file we eat once we wanted
to create we have a watermark on each
page and you can now clearly see it's
also on top of the contents looking
nicely transparent on top of existing
contents as we expected it so this was a
basic introduction to creation and
manipulation of PDF files will now
switch back to Bruno to go into
standards okay so these were some simple
I text examples we don't go into much
more detail because many of you already
know the hello world example
but the watermark examples is one of the
free CLE asked questions so there's a
lot of people who say I've added a
watermark to my PDFs and it doesn't work
so that's why we added this example now
the importance of standards I'm going to
switch to the Bible and you see that the
Tower of Babel where the people of Babel
they wanted to build a tower that
reached into the heavens and because it
was really arrogant of them they got
this punishment that they stopped
talking the same language so the
carpenter wouldn't understand the Mason
anymore and the Mason wouldn't
understand the the guy who brought the
the bricks with threw over the sea
anymore so not talking the same language
is a punishment and the result is that
the tower never got built now why do I
show this example well I'm from Europe
and in Europe we have this Eid and the
Eid is a smart card and there's a smart
card ISO standard but every single
country in Europe
implemented the Eid in a different way
so if you write software to read the
belgian smart card or you write software
to read the portuguese smart card it's
different software so at the eid and a
passport conference last year i asked
the panel why is this why didn't you
follow the standard well the answer was
because not following the standard is a
very lucrative business model and that's
well we're ITEX we're open source we
want people to adhere to standards so
that there's interoperability so that we
don't need to write the same software i
over and over again but slightly
different so not being able to
understand each other especially in
europe is a punishment not a business
model and standards are about speaking
the same language I showed you the
umbrella of standards very quickly I'm
going to show a couple of real business
uses of use cases of the standards so
here we have a simple PDF it's from a
manual to assess people and everyone can
read this you see a title you see three
bullets step one step two step three but
it would be nice if we added some
structure like if we knew that this
worksheet for that this is the title if
we knew that there were three list items
if we knew that the list items have some
list item bullet like step one step step
two steps step three and some actual
content every would be able to add this
content this semantics to to a document
then these documents could be consumed
by a machine because for them humans can
read this document where the machine
doesn't always know that step one is as
part of the bullet you would have to
introduce some artificial intelligence
so that the machine knows hey we have
step step step is repeated and on one
two three this must not be part of the
content so structure would be helpful
and but humans can read the document
like this but can everyone read this
for instance this is an assessment the
purple line is the result you should
have the blue line is the result of a
person who did the assessment but what
if you are color blind if you're color
blind you can't see which line is which
then you see stuff like mg T okay we
know that it's the abbreviation for
management but does everyone know this
and also you have these values you have
these different points in the spyder
chart but you don't know their exact
value and so for a human it can be
difficult to read it despite the chart
like this with imagine software reading
this how would software interpret Aspire
chart you you would have to program your
software that way that it can interpret
can read all the different lines and so
wouldn't it be nice if we could have a
chart like this in our PDF but add some
extra structure to this PDF so that the
machine can interpret what is this about
so that the machine for instance could
extract data where you have where you
resolve abbreviations like management
instead of MGT information and business
decision support where you see where you
make the info color independent you see
this aligned with the results from a
specific person and aligned with the
results you should have to obtain the
position and then one other difficulty
is what do we put into rows and what do
we put into columns maybe having two
records one for person with 12
properties one for position with 12
properties maybe that's not the best way
to represent the data maybe this maybe
this is a better way so that you can
compare you have 12 records with three
fields so if somebody is presented with
a chart like this wouldn't it be nice if
we could also add information like this
on top of the chart so that a machine
can really know what this chart is about
well that would be nice and that's when
pdf/ua comes to the rescue so
let's agree on a standard way to store
and interpret documents so PDF a PDF you
a is a standards as a technical
specification where we agree on how are
we going to present the data and we are
going to mark content mark on time so
that machines can read the document but
also that the blind and the visually
impaired that they can until interpret
the document so if they are color blind
and they don't see the difference
between the blue and the purple you have
screen readers and will show an example
later on that can read that stuff out
loud so that people who can't see the
chart can consume the chart and so PDF
view aid provides definite of terms and
requirements to allow people with or
without disabilities the same rights
this is very important in the US because
you have section 508 here where it's
when a government or when somebody puts
the document on on our website it needs
to be accessible to anyone so two people
without and with disabilities and so
people equipped with appropriate
software they can our assistive
technology they can consume the
documents so that's why pdf/ua is
important a second use case well I need
some it's this is a an article from a
Belgian use newspaper this guy Eddie
harness is his name he was building his
house he was he working he was working
with the contractor and the contractor
built his house and he received an
invoice from the contractor so he paid
the invoice what he didn't know was that
the invoice was intercepted and somebody
changed the wiring information so he
said hey this is from my contractor I've
out bailed paid the bill but he paid it
to the wrong bank account and the bank
it's in Dutch sorry but the bank said he
doesn't get his money back because the
bank said everything was processed in
the right order and we are not
responsible you should have used the
correct bank number so if we receive a
document we want to be sure about the
integrity of the document that
nobody changes underway now this is
another slide and we see the Pope
Sue Sylvester and we see the Emperor
Constantine and Constantine is supposed
to have handed the deeds the deeds to
the city of Rome and the Western Empire
of Rome to Pope Sylvester that is
supposed to have happened in the third
century and this deed was used in the
eighth century by the Pope who said I am
the heir I have all the supremacy over
Rome and the supremacy over the Western
Roman Empire
now this deed was used for political
reasons and only in the 13th century it
was discovered that this deed was a
forgery that it was made in the eighth
century not in the 4th century and that
it was made to make sure that the Pope
had the supremacy so numbered so we had
integrity of documents second thing we
want to achieve is authenticity if we
receive a document from somebody we want
to make make sure that this person is
actually the person who wrote this
document who made this government then
we see here Bart Simpson he has carved
his name into fresh concrete and we all
know Bart when he does something
mischievous he always says I didn't do
it but here you see that the shadow of
of March March is here so March was much
was looking over his shoulder and he
can't say I didn't do it because there
was a witness if we have a document and
for instance a contract when somebody
promises something we want to achieve
non-repudiation we want to make sure
that the person who gave us the document
who signed the document can't say hey I
never saw this document that's not my
document so that's a third point that we
want to achieve now how can we achieve
this
well let's agree on a standard
vendor-independent way to ensure
document integrity authentication and
non-repudiation what are we going to do
we are going to add a digital signature
that is created with a private key that
is owned by the person who is signing so
in belgium we all have this
Heidi I'll just fetch it so this is my
ID card there's a smart card that's a
smart card there's a chip on this and it
has a private key owned by me and so I
can sign a document and a hash of this
document will be sent to this little
computer on my CID and this chip will
produce a signed hash so a signed
version of that hash and we can
integrate this into a PDF and then you
can see on the Left panel that a
document was signed by somebody and if
you look at the the slide to the right
you see to the left you see something
that was signed by four people by Alice
Bob Carol and Dave and to the right you
see the same document that was forged by
Chuck so somewhere and the third part
chuck has written something that he
wasn't supposed to do right there and
you see that there are read process and
yellow triangles appearing showing that
the document has been invalidated so
what is this standard about well you
have iso 32000-1
which was released in 2008 it was based
on PDF 1.7 wreathed in 2006 it gave us
some rules on how to create a digital
signature now I so tempted ISO 32000 to
will define PDF 2.0 but it's only to be
expected in 2016 it says 2015-2016 but
actually we know that it's we shouldn't
expect it before 2016 now digital
signing involves hashing and encryption
and certain hashing algorithms certain
encryption algorithms well they over the
years people find flaws in it and
computers get more power so it's easier
to do hack or to forge documents and the
European Union they are really really
eager to to use digital signatures so we
see that next to I so we have Etsy the
European technical standards Institute
they created an technical standard
number one hundred to seven seven eight
and they created a series of standards
but this PDF advanced electronic
signatures and they have introduced some
new types with newer hashing algorithms
with more limitations on digital
signatures and we see that but this is
now used as an inspiration by ISO to
create ISO 32000 too and to update the
standard on digital signing so integrity
authentication on reputation we have a
standard for digital signatures in PDF
and that's a very useful standard use
case to use case three sorry it's a
standard called sucrets
it's a German standard what is it about
well paying invoices can be a pain but
so is processing invoices if you receive
an invoice on paper and you have to put
it into your back-end your ERP system
you have to type it over you have to
find what are the invoice lines where is
the sales tax tax mentioned and so on
and it's error-prone because a typo is
easily made and depending on where you
put the comma it can be a huge
difference in what you have to pay or
what what you actually paid now we need
a standard and what if a vendor would
provide an invoice that can be read by a
human being
so PDF would be a nice solution so human
beings can read a PDF but that also can
be produced it can be processed by a
machine so we have a lot of XML based
standards for invoicing and so that
companies exchange XML files but the
problem with XML files is that human
beings can read them but they are not so
user-friendly to read what would it take
to make sure that we don't have to do
any manual work to input input the
amount to be paid to input the sales tax
and so on so we would need some
structure and for an agreement between
companies on how will we structure the
info and also important how will we make
sure that the invoice can be preserved
for the long time and that's where PDF
comes to the rescue if you have title
companies or in Europe notaries I know
or notary in Belgium he says I have to
build a new garage every five years
because I have to save all my documents
for 75 years so every five years my
garage is full with documents and I have
to build another one what if we could
agree on it on a digital document
standard that ensures that a document
can still be consumed in 30 years and
seven years in 100 years and that's what
pdf/a is about
so let's agree on a standard way to
archive documents and you have PDF a1
which is based on PDF 1.4 and then game
PDF a - based on PDF 1.7 and then PDF a
tree PDF ISO to ice over ninety thousand
five part three it's an identical copy
of PDF eight to even the typos are
copied there's only one difference so
PDF a two allows attachments to the PDF
but these attachments need to be PDF a
two compliant - whereas PDF a three
allows attachments and the attachments
can be anything so the attachments can
be for instance an email can be an XLS
file can be an XML file so can be
machine readable data so you have an
invoice which is readable in PDF by
humans and we'll attach an XML file that
can be read can be extracted from the
PDF by a machine and can be interpreted
by the machine so what the Germans said
is let's agree on a standard way to
exchange invoices so they had the forum
original EDF newness electronic invoice
Deutschland and they create this super
standard based on PDF a tree so
archiving pleasant attachments where
they impose an XML schema for the data
edit an attachment so that data can be
extracted and processed by without human
intervention intervention so it speeds
up the processing of invoices it makes
the process less error-prone
and it reduces the cost which is also a
important so conclusions why our
standards important in business
well clarity as shown in the PDF view a
use case we had this pie chart and we
didn't really know how to interpret it
but if you would turn it into a PDF view
a document then there's an unambiguous
way to interpret such such a chart
security standard since your security as
shown in the Podesta's case
no more invoices that are forged normal
no more sources that are unknown and
normal no more people who can say hey I
didn't sign this document and
interoperability as shown in the super
fat use case if everybody's test started
using invoices like that you could
exchange invoices and really improve the
processing of invoicing and there's much
more to standards but now I'm going to
hand over again to ruff who is going to
talk some more Java and who is going to
show you the technical aspects of PDF
you a PDF a tagged PDF and so on so how
does that work oh that's what I
explained work okay so Bruno gave you
the introduction to several standards in
PDF
I will now handle the the practical
stuff how to create such PDFs that
conform to these standards from from
Java point of view using I text I won't
go in all in all into all the details of
all these standards instead I will
highlight some important points and show
them in a very practical way how you can
achieve having these these these
requirements or restrictions in your in
your PDF documents to have something
that conforms to to the standards so
it's important as Bruno showed at the
beginning of the presentation that we
have the the PDF standards as an
umbrella standard and whatever is added
on top like you äôre PDF a and is
actually just PDF doc technology and and
is a certain way of using that PDF
technology so they're not new
technologies they're just like a set of
required
and restrictions how to use the existing
existing standards so let's keep it
simple at first step 1 just create a
simple PDF like we did in the beginning
with the with the hello world example so
again we just open a document we well we
create a document object we use a PDF
writer again and you can see we use a
file output stream again to create a
file called simple PDF to PDF we're
creating PDF version 1.7 here and we
open the document so we can start adding
content to it we're adding a bit more
contents as in the hello world use case
in this example so you can see all the
lines marked in blue and in italics are
building up a paragraph and the parts in
red in bold are adding content to that
paragraph so we have a chunk which is
basically just a part a piece of text at
first which says the quick brown then we
have an image of a fox then we have a
part of text again which says jumps over
the lazy and then we have an image of a
dog we add all these all these chunks
and images to to the paragraph and then
finally at the at the end at last line
we add this paragraph to the document
then we still have to close the
documents so that everything is flushed
to disk because of the PDF right writing
it to file and we have a PDF document a
very simple PDF document that has the
content as we as we edited to do the
document in this example so this is
probably not not a very unexpected
result for anyone will use this example
to go through the different different
standards in the rest of these of these
examples so let's take this this PDF and
add tagging to it because if you look at
the previous PDF
there are some some problems with it as
wellnot explained if you want to consume
this PDF in an automat automated way
like by a machine all kinds of problems
can arise the PDF is pretty simple but
still the images are problematic because
if you if you want to consume this
bye-bye screen readers imagine you are a
blind user and you have your assistive
technology reading this document for you
it will not be able to to spell out or
read the image of the of the Fox and the
doc for you also if you want to store
this document and make it searchable it
will be difficult to search for a
document that has an image of a fox
because your your search capabilities
will not allow this and although this is
still pretty this is still a pretty
simple example but consider a table for
example in a PDF documents in a very
simple way and if you if you added a
table in a very simple way to PDF
documents it would basically be a bunch
of lines making a rectangular structure
and then adding the text content at
strategic positions between those lines
so it looks like a table but your
machine processing this or your software
processing this has no idea that this is
a tabular structure so to resolve these
issues we will be tagging the content so
that semantics and structures are added
to the PDF document so that on top of
the visual representation you also have
structural information in the PDF so if
we compare with the first simple PDF
creation example we just have to add one
line using I text which has two the
which which says to the PDF writer set
tags so that it will create tagged PDF
and it's it's this simple using ITEX
because we have this these high-level
building blocks like the paragraphs the
tables so actually we have all this
information ready but when creating a
very simple PDF it's all thrown away and
we only keep the visual representation
once you tell the PDF writer to use the
tagging it will be able to to build a
structure structure information add all
the all the extra information that that
we need in place for automatic
processing and assistive technology so
if you look at the output of this tagged
PDF this is a screenshot of Adobe
Acrobat you can see like a structured
tree on the left so at first we see the
P tag which which is the paragraph we
have a span so a piece of texts quick
brown fox then an image then another
another span another piece of texts
which has jumps over the lazy and then
the image of the of the dog again so of
course you can see compared to the first
one this is a lot easier for for
software and any automated way to
process these documents another another
important feature of this is that we now
have a logical content order because PDF
can work with absolute coordinates you
can position anything anywhere like we
saw in the watermark example but if you
want to have your document read out loud
by your software it will need to know in
which order to read this this content so
now we also apart from from the
structure information we also have the
the content order in place to process
these documents so tagging is already a
big improvement over the simple PDF case
but like let's take it a step further
and go to actual universal access
accessibility so PDF you a building on
top of the of the tagged PDF case so
first thing we we have to add is a lot
of metadata so metadata is descriptive
descriptive information about the
document not not the content itself
and one of the requirements is that we
have F to add all kinds of information
about the title the author we have to
add keywords which helps with with
indexing and search capabilities for
example we also have to specify in which
language the document is written you can
imagine if software has to read out loud
the documents it's very helpful that it
knows in which let in which language
document is written so that you don't
have an English English voice trying to
read the German document for example so
that that's very helpful and also we
have to specify that the document
confirms of conforms to pdf/ua which is
helpful for whatever software opens
documents so that it can act accordingly
to this this type of documents so
building on top of the detects PDF
example one of the requirements is that
we have to show the document title at
the top of the window when when you open
it in your viewer in your PDF viewer for
example which is done by setting the
viewer preference in the first red line
in the in Vault we're adding the the
language of this document which is us
English we say this this document is an
English pangram so pangram is a sentence
containing every letter of the alphabet
this is the the title of this document
and finally we tell the I text PDF
writer
store all this metadata in XMP which is
a standard - - well it's a structured
way to store metadata and this will all
be added to the PDF documents a few
screenshots showing the results the
output result of the of all these codes
you can see on the left the title is now
stored in the document if you open up
the document properties you can see now
the title says English pangram on top
you can also see the title is displayed
in the in the window as a
as required and in the metadata you will
see that there's a an entry edits to to
identify this document as pdf/ua which
is helpful for whatever software tries
to open this document and process it in
an automated way because it will know
what to expect of this document next
requirements is about fonts so for a PDF
file it's it's perfectly valid to just
specify fonts by their name so you can
say in a PDF file in the syntax display
this part of texts this piece of text in
Arial or Times New Roman or whatever and
then it's up to the PDF viewer to figure
out where that font is and use that font
to display the text but of course it's
not guaranteed that this font will be
available on them on the machine that
you will open that you will be opening
the PDF on so in that case the PDF
viewer will have to use a font selection
strategy to find the suitable
replacement for that font it will try
based on the information it has tried to
find something that is very similar but
of course there's there's no guarantee
at all that that there's a similar font
available on the machine so that's why
in this case for accessibility we need
font embedding so that the document is
is completely self-contained in terms of
fonts I'm just putting the font in the
file so that there is a guarantee that
you can use the exact same font for
viewing as there was used for creation
so this makes the document fully
portable in terms of fonts because all
the font information is in the file
itself
so when we added the paragraph before we
didn't specify any font information at
all which means that I Tex will use L
Vedika size 12 by default now we're
specifically setting a font we're using
a free font file through type font file
and in red you can see in bold that we
are now telling I Tex to embed the font
in the PDF so before and after
screenshots showing the the document
properties on the left you can see we
specified Helvetica but it also shows
that the actual font used was Arial
empty so it didn't use the exact same
font is that as I used for creation of
the file of course these are similarly
or even completely the same so it
doesn't show up visually but
conceptually the the same font was not
used on the right you can see we now
have the free sans font and it is
embedded it's a subset the the part the
part of the font was actually used the
charities that were used for this file
are embedded into into the PDF file so
as I said it's not visually apparent in
this file that the different font was
used to display it but here's a more
let's say extreme example so on the left
a screenshot of a PDF that was created
using a Walt Disney font and on the
right you can see how the the PDF is
displayed on a machine that does not
have this font so if you spend a lot of
time creating a nice-looking document
it's a it's a pity that you you will
have your users seeing the document as
the one on the right so that's why font
embedding is very important so that that
you can prevent bads font substitution
by by the PDF viewer then about about
images and alternative text as I said
said before the the quick brown fox
jumps over the lazy dog example and the
images are difficult to consume by
software so we have to provide suitable
alternate alternate text
for for non textual content and this is
helpful for the read outloud
functionality of of assistive technology
so when we have the one we added the Fox
image we can simply say there's an alt
text saying Fox if you look at the
figure the image of the Fox and you open
up the properties you can now see that
it says alternate text Fox I will try to
demonstrate this using the read outloud
functionality so we have this read out
loud sorry so we have a read out loud
functionality in Adobe Acrobat
so all activate its read out loud this
page
it's too quiet
jumps over the lazy well let me let me
just tell you what it says
so either we're either Adobe Acrobat
tries to read this file and it just says
the it says the quick brown jumps over
the lazy imagine imagine you're a blind
user this is not very useful of course
if we take a look at the accessible file
as I showed you we now have after
tagging for the figure information of
the Fox it has the Fox alt text for the
figure information of the dog we have
dog so now if you if I would be able to
to let you hear the read outloud
functionality it will actually say the
quick brown fox jumps over the lazy dog
which is of course a lot more useful if
you are a blind or visually impaired
user
all right this is screenshot of the the
back tool the PDF accessibility checker
by XY media so we've run our result of
the previous code samples through this
checker and it says this PDF is
technically accessible so we've covered
all the the technical requirements but
of course this is still not a guarantee
that it's really a completely accessible
PDF because a lot of requirements cannot
be checked automatically a simple
example we cannot check automatically if
the author chooses to enter very bad
alternative text alternate text for
images if it would switch the the Fox
and the dog alt text of course it would
be completely wrong and there's no way
to check this automatically but still
this is a way to at least check that
that the technical requirements are met
for the documents okay now let's take a
step back and start from regular PDF
again and try to create a document that
is suited for archival so PDF a we
commonly say a for archiving exactly PDF
for a long time preservation as it's
called in the standard so again it's a
set of restrictions and requirements on
top of PDF to make sure that your
document is suited to be stored for for
a long time like the example that Bruno
gave about a notary is having to store
their documents for 75 years or
something and in if you well if you
summarize the the specification you it
mostly says that the document has to be
self-contained so it cannot have any any
links to outside resources everything
has to be in the document so that if you
retrieve it in the far future you have
everything everything ready to view or
consume or do whatever you want with
with your PDF documents first of all
have a look at at PDF a3 be be is
commonly referred to as the basic level
which is only concerned with visual
representation
so it's only the visual stuff that
that's important here so the basic part
of a PDF creation is very similar
instead of a regular PDF writer we now
use a PDF a writer which is separate
implementation and I text taking care of
all the PDF a stuff and we can specify
the conformance level of PDF eight that
we want so in this case we specify PDF a
3 B again we have to add metadata this
is very similar as it as in the PDF you
a use case we also have to specify which
type of PDF this is so that it can help
the the PDF reader you can see after
adding the PDF a metadata if you open
the document in Reader or Acrobat now is
this blue bar saying the file should be
PDF a compliant and it also tries to
prevent accidental modification of this
file because it's a file intended for
archiving which probably should not be
modified after it's been archived you
can see in the document properties it
says it's level 3b now one extra comment
so the blue bar is shown when you set
these values but having the blue bar
doesn't always mean that the PDF is
actually PDF a so you should verify for
so the blue bar shows up when you set
the flag but you should verify if it's
actually mean anything yeah yeah the
blue bars just says this file tries to
identify itself as PDF a3 or PDF a in
general but there's no guarantee that
actually complies to the standard so
then there's separate checks needed
because some of our users they just set
the the flag and then they said hey it
doesn't work but you have to do all the
stuff that is needed and that
okay so again font embedding is
basically the same as this pdf/ua use
case you need to have all your fonts
available so that you don't have to rely
on the font selection strategy of the of
the viewer of the software
then we we have a requirement on output
intents which is related to color
information so if you use colors that
are device dependent and in the in the
future in 20 years you have a different
device and there's no guarantee that
your car colors will display the same as
they do now on on your screen or
whatever you are using sorry to display
your your document so we have to find a
way to make colors device independent
and we can use an ICC profile which is
basically a mapping of colors to make
these device independent colors so we
can read out an ICC profile from disk
from file and then use the PDF or PDF
writer to to set this as an output
intent using the the icc profile in this
case it's it's an RGB based ICC profile
if you look at at the PDF on a low level
just using it in opening it in a text
editor for example you can now see it as
output intense information using this
ICC color information if you put all
this together run all the eggs all the
code and look at the end results doing
the PDF a3 be compliance check in
preflight in acrobats you can now see
Acrobat confirms that are no technical
problems with with this file and it's
PDF PDF a3 be compliant as far as
Acrobat is concerned so we've seen the
accessibility parts the archival
archiving parts if we put all this
together we can go towards PDF a3 a and
the a is referred to as accessible so
this is an
PDF file that is suited for archival but
is also as all the accessibility
requirements in place so we just take a
PDF a 3d file add all the accessibility
requirements so basically we just have
to tell our PDF a writer we now have to
we now want to conform this level PDF a3
a and it will it will update a metadata
as expected again
a pre-flight check doing the conformance
check in in Acrobat shows that we now
have a file that that complies to PDF a3
a so we can archive this file at the
guaranty that will still be usable in
the far future but also have this ready
for use by visually impaired user blind
users or by software in general so as
Brenda mentioned about the blue bar
showing up showing up in in Reader or
Acrobat that's not a guarantee that your
document is actually PDF a compliant so
an important question can I make sure
that I am compliant when we're in
creating documents using I text we will
perform we will perform a lot of checks
from technical point of view throwing an
exception when you're when you're asking
for conformance level 3a for example and
you're doing something that is illegal
or you're forgetting something that is
required they will throw an exception
prevent you from from creating
documented that's not conform to the
standard but of course as mentioned
before we cannot check everything
automatically like the bad alt alternate
text for images we cannot make sure that
you you actually do it right you don't
want a text saying the quick brown
figure one jumps over the lazy figure
too but so here's an output example I
try to create a PDF a3 file using alpha
tika but I didn't embed the font so I
take sort of an exception telling me
Alfons should embed it it should be
embedded for the conformance level that
you're trying to get and this one isn't
elevated aizen's so that I can fix the
problem before I for example set up a
batch processing putting all my PDF
files in the archive and finding out in
15 years that all my my files are
invalid okay so a use case on top of PDF
a is the the German Zook first standard
it's not that important that is German
is just the the general concepts that
are important so we all will try to add
an attachment an Associated file
embedded in the PDF which has the
structural invoice information and then
have a visual representation of that
invoice in PDF so we start from PDF a3
be again in ITEX we have added a
separate conformance level for sucrets
which is very similar to the PDF a PDF
a3 conformance level we have to add some
separate metadata XMP metadata
specifying which file which embedded
file is the actual invoice so you can
see the line in bold adjust as the the
Zook fair document file name specify
this invoice dot xml in this case and of
course we still have to attach the
actually the actual invoice information
in xml which we can do by telling the
PDF writer to
file attachments we specify a
description where the file is on disk
and it will add it to the PDF and also
requirement is that the AAF relationship
value is it tells how the Associated
file relates to this PDF and in this
case we tell with a light roll we tell
the document that it's an alternative
representation so we have the visual
representation and as an alternative you
have the structured XML representation
the end result then is we again have the
blue bar saying this is a PDF a or this
should be a PDF a file and in the
attachment pane you can see we have an
invoice dot XML attachment which is
described as sook felt invoice you can
click this double click this this
invoice open it in XML viewer or your
software can can extract this
information automatically and process it
in any way that your invoicing needs to
be processed
okay back to PDF and I'll switch places
in a moment and show you what the
results are what the PDFs look like from
the inside so we look at the structure
of a PDF file and we look at the PDF
from a text editor but we'll also also
browse PDF is actually like an
object-oriented language we will browse
a PDF using Java swing very basic a PDF
usually well there can be more parts but
let's for for the sake of simplicity say
that a PDF consists of four parts you
have a header part a body part a
cross-reference table and a trailer and
to illustrate this I'm going to switch
places with ruff and I'm going to look
at some videos
so that's louder than I expected we have
here a HelloWorld PDF and we can open
this in notepad plus plus and we see
what we look at what the PDF looks like
on the inside here we have the header %
PDF 1.4 here you see the version number
a this can be another version that's
just indicative 1.4 the version can be
stored elsewhere too so not you don't
always have to trust this number that's
that's legacy and then we have some
gibberish why is this because PDF is a
binary format and if you transfer a file
sometimes in the past a binary file used
to be processed as a plain ASCII file as
as plain text and then that the file
would be corrupted so to tell transfer
protocols this is a binary file we add
some some characters that have a value
higher than 127 then we have the body
with objects and we see that the objects
we start with object 2 and here is
object 1 and then 3 4 so there are
objects don't need to be stored in
neurological order how do we find how
does a computer or a PDF consumer find
these objects well you'll start reading
a PDF from the trailer and you'll say
hey where does my X reference my cross
reference table start and this is a byte
position 608 which points at X ref we
see there are seven elements 0 to 6
object 0 is a free element but then we
see object 1 is starts at byte position
200 258 object 2 starts at byte position
15 and so on and although this file if
you open it in a viewer says hello world
we don't see hello world anywhere
actually hello world is stored in this
compressed stream now when I first start
writing i text i needed to debug PDF
files like this that's not very easy so
we wrote something called erupts I'll
open it inspect PDF erupts is reading
and updating PDF syntax and it gives us
a tree view of a PDF so we have the xref
file with all the objects so object one
object to object I object four to six
and we can we have a tree view that we
can open and we can see this is the root
dictionary and the root dictionaries of
that catalog and it has a page 3 and
this pages element has one kit and this
give this object for and of the object
for represents page one and we can look
at the contents and the content stream
is a stream where it says hello world so
there are some positioning parameter
positioning operators and then even
actually did the text now if you see
this you say hey this is really simple
we see hello world there that's nice but
I have here three files of the first
hello world a second hello world and a
third hello world to the naked eye to
the for a human these look like three
identical files but as Rafa explains you
shouldn't expect that this content is
always stored the same way so if we
inspect the hello snippets example and
we look at the contents we see that no
hello world is stored all in different
letters so we have one show text per
character hello world so this looks
identical to the previous file but the
content is stored in a slightly
different way and what ruff thought
about the logical reading order so in
pdf/ua you have to make sure that the
the the reading order is is correct the
way a human would read it here we have
the same hello world but where if we
look at the contents
just a second here we see that actually
it says hellworld low and these
different text nipples are positioned
using their coordinates so for many
different reasons
PDF producers can choose to position
text in an order that isn't the logical
reading order for instance you could say
first I'm going to put all the letter
ace on the page then all the letter bees
all the Reta C's so you don't need to
have the logical reading order to have a
perfect PDF but of course if we think
about accessibility if we think about
processing a PDF by with the machine
not by humans but but with it by machine
we kind of like the fact that the
logical reading order is respected now a
challenge to make a PDF file is how are
we going to present data so as
everything is positioned at an absolute
position and we want to show a line so 0
hello world 1 hello world to hello world
when we create a PDF producer we have to
know where the boundaries of the page
are here it says 7 hello world 8 hello
world and so on if we look inside we say
inspect PDF we look at this page at the
contents we see that there's much more
text it says hello world 7 hello world 8
hello 9 hello world a hello world B and
so on this PDF producer well we made
this deliberately of course this PDF
producer added content outside the
visual area of the document that was
also what happened with the watermark
example where we added a watermark at
absolute positions and the watermark
text was added to the file but we just
couldn't see it because it wasn't at the
right coordinates so a challenge of a
PDF producers how do we if we create a
paragraph and we add it to a document
how do we distribute this paragraph over
different lines so here we see a hello
world with
but we see something with the same
content but now it's distributed over
different lines so if you look inside
inspect PDF and we go to page and
contents we have the stream and we see
that the content is distributed over
different lines now there's something
special about these two texts if I open
it in notepad plus plus I see this in
clear text here we said don't don't
compress the content now it's very
tempting for people if they want to
change something in a PDF file it's very
tempting to say hey I can see this text
here in clear text let's let's replace
it and let's say instead of hello world
let's say I'm from Belgium so who who
either riddled so I'm translating it I
replace replace everything don't do this
this at home so I've changed the content
I'll save it and now when I open the
file I will see okay the everything I
mean Who am I who you da wilt it takes
more space than hello world and I go out
of out of the boundaries out of the
visual area of the the PDF one other
thing when I close this file it says do
you want to save changes to zero for
hello reflow PDF before closing why is
this well I did something that was kind
of illegal in the sense that by adding
more bytes without changing the
cross-reference table I corrupted the
PDF and Adobe Reader is very tolerant
about this because at over either will
say hey I'm reading I'm looking for an
object but I don't find it at the right
position so Adobe Reader will fall back
home on what's here to 0 object for 0
object other will Adobe Reader will look
at these objects not every PDF viewer
will do this not every PDF consumer will
this attack says this fall back also and
will set a flag this PDF has been
rebuilt because the the offsets of the
bytes were wrong but for instance a PDF
that is wrong this way can't be
digitally signed because to digitally
sign a document you need to have a
document that is 100% okay and so that's
that's something to watch out for
okay we have the Fox dog example without
tax
so ruff has already tried to have it
read out loud okay that's not what I
wanted to show but let's let's look
inside inspect PDF if I look at let's
say the structure there's no structure
tree in this example if I look at the
page I will see that the content stream
the content stream starts with the
images so I text if you don't say set
this PDF s tact will try to organize the
dock the contents in such a way that the
images are written first so that they
don't cover any text if you want images
to cover text you have to tell I text to
maintain the order in which you add
content and so the images we have some
positioning information and then go to a
resource images our external objects you
store them once in object here in which
one is stored in object 3 image to a
store an object 0 and if we look at the
streams we see that we have the dog an
object 3 and we have the the Fox an
object 2 and going back to the structure
we see the quick brown jumps over the
lazy and the 2 images now this is a PDF
that is intact let's now look inside the
PDF with the tags immediately when we go
to structure we see the same structure
we saw before in Adobe Acrobat and we
see that there's a sequence 0 1 2 3 and
if we go to the page
No so we go inside and we go to the
contents the stream yeah we now see let
me watch this
we now see that there's marked content
so the quick brown has marked Content ID
zero then you have this image with mark
Content ID one you have jumps over the
lazy with content mark Content ID three
and finally have the image of the sorry
it was two and you have the image number
three and so if you look inside the
content stream you have all these IDs
and these referred to the structured
three roots so the catalog in such in
such a PDF has much much more
informative or information many more
keys than than an ordinary PDF you have
the metadata so this is the the XMP
extensible metadata platform version of
of the metadata actually this metadata
if I open the document in Adobe in text
editor I can see the metadata in plain
text normally it's towards the end so
here you can see that the metadata the
the XML and plain text why is this this
is so that software that doesn't
understand PDF can look for a specific
sequence here the sequence and can
extract information about the PDF
without having to read the actual PDF
this XMP metadata can you can only you
can also find such metadata in g-packs
and image files and in any kind of
document so exampie is is like a
standard for metadata that can be used
in many different document formats but i
was talking about the structure tree
root where we will find the document and
the complete structure tree with the
spans and the alternative text so here
is the dog for the
image so creating a PDF that is that can
be consumed by a machine or can be read
out loud correctly involves a lot more
infrastructure inside your PDF and then
finally the souq fat info invoice let's
inspect the PDF now we have associated
files and in this associates associated
files we have a relationship and
alternative version of the actual
invoice or this is the invoice for human
consumption it's just a phony invoice
but here I have a file stream and this
file stream will give me the same
information but in XML format now you
can see there's some some strange signs
here but if we save to a file and we say
let's save this on the desktop whereas
my desktop here and let's say invoice
XML it's a comma and physics I'm out
safe
here I have my invoice XML let's open it
in notepad plus plus I only saved yeah I
selected I shouldn't have selected that
the Euro sign save to file desktop
invoice ml save I know I should have the
complete file okay this is my invoice in
XML and so a machine can easily extract
this dream and process it
is there something else I should tell
you and we see the output intense that
was what ruff already explained maybe
one more difference embedded files so
embedded fonts sorry so if I look here
inside this document I have page
resources and my font dictionary is just
Helvetica font type 1 with uncie
encoding there's no description of what
the font looks
like and this is with an embedded yeah
this is with an umbrella so if I inspect
this PDF I have this page I have the
resources I have a font resource and now
I have a font descriptor and in this
font descriptor I have a font file and
this is actually a compressed font file
where and if you're if you know PDF you
see that we have three suns and if it's
preceded by a six letter code plus and
then the name you know that it's a
subset of the of the font so here you
have the description of how do I draw
all the glyphs for every character that
I've that I have used in my quick brown
fox example so to sum up to summarize
PDFs can be quite complex but we have
this tool called ITEX ropes to look
inside PDFs and to debug videos when
necessary okay
okay so we've seen that in a lot of
cases it's it's a lot better to have
this structure information in PDF but
now an important question is there are
there are a lot of PDF documents already
in the wild which don't have we don't
have this information is it somehow
possible to process these unstructured
documents
finding determining the structure of
them and maybe add that structure so
that we have a new PDF file that is that
is better in terms of accessibility and
indexing and all that stuff so first the
basics here's some some Java I text code
to get the text information out of a PDF
file it will well it's a it's a listener
implementation so when when i text
processes the content stream as bruno
showed interrupts it will do callbacks
to such a listener and in this case
whenever a text block begins we write
this smaller than sign when a text box
ends we write a greater than sign we
just skip images so the render image
method is not implemented and for texts
we have this text render info which
contains all the positioning information
font information about a piece of text
so we will just route write out the
coordinates the lengths of the texts so
not length in terms of characters but
length in terms of pixels or user points
and then the text itself
here's a piece of code to actually read
out the text or the complete content
stream of a PDF document so again we use
a PDF reader to take in an existing
document then we have the render
listener the my text render listener
which is a which was shown here we we
pro so we have a PDF content stream
processor which can actually read this
content stream we go to page 1 as you
can see on the on the at the end of the
of the code sample so we get the content
batch for page 1 from this existing
reader let me show you what is does
so I have this same code sample here and
I'm doing this for the hello world
examples that were shown before so I
will run this code sample and it has
written out the the text content well
the the content as as processed by the
the text rendered listener two text
files so I'll I'll show this one first
you can see it's a it's pretty
straightforward this was shown by Bruno
in in ribs in the in the first file we
just have the coordinates exit 36
y-coordinates here this is the length of
the of this this part of this piece of
text and the actual text says hello
world so very straightforward we can
extract this information now for the
second example you can see this was the
example where all the letters were added
separately to the to the hello world a
PDF file so you can also see when we
extract this we have separate
coordinates for each letter we also have
the we have the H here the e the L which
spells out hello world but it's it
starts very differently and obviously it
will also be extracted very differently
if you process this file and then the
one where the content wasn't in logical
order again we have different
coordinates for the different pieces of
text we first have held then we have
world and then we have the low part of
hell-lo
and by inspecting the horizontal
coordinates you can see that this at 53
should be placed in between 36 and 66 so
the low part comes with two inhale and
world
so obviously this shows how difficult it
can be to actually get useful text
content out of PDF documents we have an
we have an an implementation in IEEE
texts
that takes in all this coordinate
information and tries to piece together
a puzzle together all these pieces of
text to get actual useful text content
out of the content string so there's
this convenience methods getting the
texts from a page using the PDF text
extractor from h1 again and I will run
this again for the three files that I
showed before now it will it will
display two standard outs so you can now
see at the bottom of the screen we are
extracting hello world three times
because now we have processed all this
coordinate information and have puzzled
everything together so can actually have
useful outputs now
let's try to do this for for a page PDF
page is a bit more complex so we've
taken a page from the I text an action
2nd edition book you can see there's
there's a few paragraphs there's a
header there's a caption at the bottom
below below the image and there's the
image itself at the top here at the top
right you also see a page number and in
the title and of course visually as
humans we subconsciously infirm infer
all this structure information we
recognize paragraphs we recognize
section headers and all that but for
this file this structure is in always
stored in this in this PDF file in this
document so let's try to detect this
information using I text
so using the same text extraction an
image extraction implementation as
before we are processing this page but
instead of writing out a text to
standard out or to a file we are now
highlighting it so we have this
highlight methods which actually marks
the different parts that we have
detected in the PDF itself so we can
have a visual inspection which is use
for demo purposes of the different parts
that we that we detected so we're just
drawing rectangles based on the
coordinate information that we get from
the content stream on the PDF file
itself it will become a lot more clear
when I run this file and show you the
output so the same page is now marked
with all rectangles that we that we can
that we have drawn based on the on the
coordinate information from the text so
you can see basically all letters are
marked in blue because they are well all
parts of text in the content stream are
marked in blue because they detect this
text the image at the bottom is marked
in red because it was it was identified
as an image you can also see some words
or several words or stored as one piece
of text like which questions a but there
are also words which have their letter
stored separately so for some reason the
PDF producer that created this file
decided to store it in this way for
example here we have was the W and the a
or stored as a piece of text and the S
is stored separately as a piece of text
but all the coordinate information make
sure that visually this looks as
expected of course having this
information is not yet very useful to to
have structured information in any way
and of course when creating this file
when it was created all the structural
information was thrown away so it is
difficult to get it back again so we'll
have to
add some let's say human inputs to be
able to to get structured information
out of this so let's say that we
configure this this extraction to say
the the top margin of 48 points is a
resort for artifacts like title
information page numbering which is not
actually part of the content we could
identify regular texts by fonts so the
new Baskerville font and courier font
with which with font sizes 10 and nine
and a half are used for regular
paragraph contents and section headers
are all written in franklin gothic font
ten and a half points and captions at
the same font in in font size aids so
this is specifically for this file of
course but it's a way to to make a
distinction between the different parts
of these contents
so if we add all this input these human
inputs to the algorithm and run it again
so it basically does the same thing as
the previous one nowadays extra
information that we added we now get a
highlighted file again you can see the
artifacts at the top are now marked in
in gray because we've configured
artifacts to be the remark gray
paragraphs are basically still the same
marked in blue you can see that a
section header is now in orange or some
kind of yellow and figure caption is now
marked in green so we have already we've
already been able to make distinction
between the different types of contents
in this on this page of course we still
have some work to do so now let's try to
piece together all the different parts
of texts so that we can have actually
that you can have text lines so doing
the same thing again with some extra
logic in the algorithm you can now see
instead of having all these different
pieces of texts which are arbitrarily
stored in the PDF we have now detected
actually text lines and we can do this
because we have coordinate information
so you can also determine the baseline
of each piece of text so things with the
same baseline will be on the same line
and we'll make up one one line of text
then going one step further we'll
actually try to find structure
information so adding a bit more logic
to the algorithm we can now also be
together lines of texts so that we can
actually determine paragraphs and so if
you now have an overview of this page
we've been able to detect all all the
structural information
human immediately sees when when taking
a glance at this page but of course
having not having the the information in
the file makes it very difficult for an
algorithm for software to do this kind
of detection so this is like a
proof-of-concept implementation to do
this kind of structure information
there's still a big step needed to be
able to use this information to go to
tagged PDF or PDF you a output ok and
it's back to Bruno so one of the
frequently asked questions is I have a
PDF and I want to highlight this or that
word the proof of concept here show that
it's not always that simple to implement
this now the the proof of concept was
based on a project with it for a service
provider in the pharmaceutical sector
where they have all these files that
need to be shipped to the FDA and
sometimes the file doesn't have a table
of contents and by detecting titles
based on font sizes from types fonts
colors we can create a table of contents
and then link to the exact pages of
where these titles can be found now
wrapping up I'm going to go a little bit
back in in history and talk a little bit
about the roadmap for ITEX so every year
we kind of define what are we going to
do from regarding new developments in
this year in 2012 we looked at mobile
versus clothes so I Texas a Java library
we have a c-sharp report for ethics so
the step to make an Android version was
very small we have some demos that are a
bhoot of ITEX running on android but
once we have an Android version it was
also very easy to create a Google App
Engine version because there's not that
much difference there only a couple of
rules that you have to follow about
the file system digital signatures I
showed you the specs that iso 32000-1
dates from 2008 and there were new
hashing algorithms new encryption
algorithms so in 2012 I wrote a 150 page
white paper about digital signatures
it's it needs to be updated because
there are some new evolutions but that's
something that is for next year so we
provided a lot of documentation about
digital signatures we saw that it's
digital signatures are really hot in
Europe and we see that in the states
that with the Common Access Card that
digital signatures are finding their way
into the business to XML work annex if a
worker rough showed a very short example
about filling out a form and it wasn't a
CRO form form you also have XF a form 65
stands for the XML forms architecture
where the PDF acts as a container for
XML and the forms based on the XF a
technology they are really dynamic aqua
forms every field has its specified
coordinates they are fixed you can't
change the coordinates or if you change
the coordinates you get a bad result XF
a XML inside PDF gives you a lot of more
it gives you more freedom regarding
number of pages and so on but in 2012
the XF a spec is really huge
we started with something called XML
worker and we tested with HTML so XHTML
- PDF as a first step towards
implementation of xf8 - flattened PDF
why flattened PDF because xfa isn't
compliant with PDF a isn't compliant
with pdf/ua but xfi has structure so if
we could create a PDF a or PDF view a
from an XML file we would have a really
nice product 2013 we started working on
creating tagged PDFs from high level
objects that's what rough has shown so
where you say I'm using paragraphs
tables and so on and I'm going to tell
the PDF writer set tag so I won't tag
PDF then the information the semantic
information I am a paragraph I am
an image and my alternative alternative
text does not figure one but it's folks
or dog that's what we started
implementing in 2013 and we focused on
standards so we had some PDF a1
functionality that we prepared an text
for PDF a2 and PDF a3 and we introduced
some a first implementation of PDA you
pdf/ua but it's 5 that was a not that
good a choice of us to implement this
because you have these standards but
it's 5 and the standards for baddest 5
that's signing of XML of these xfa forms
and the standard as developed by Etsy
was not the same as XFA specification so
there were contradictions between the
XFA specification and the standard and
we implemented by this 5 but nobody ever
used it so we asked Adobe what is your
view on why this 5 and and they said
we're not investing in in it anymore
because there's no market for it so that
was an investment that we did but for
for now maybe it needs some more time
with for 2014 we we did a major upgrade
upgrade for UPS so reps was meant to be
reading and updating PDF syntax but
before 2013/14 all you could do was
reading PDF syntax so what we've done
now what I've shown looking at the PDF
but now we can also tweak with EF if we
want to debug a PDF it's it's it it's
handy if you can change some value in a
dictionary and to the PDF without
breaking the the cross-reference table
so you saw that I manually changed a PDF
and and I broke the PDF it broke the
cross-reference table with drops you can
do minor changes and don't do that if
you're not a PDF specialist but you can
seriously break a PDF like that but it's
it's it's handy if you when you're
debugging a PDF and in 2014 we have had
more and more customers for
xfa work or so except for XF a worker is
now an enterprise-grade solution and we
have customers using XF a worker to
have a workflow where you have this exam
an XML driven workflow where you inject
XML into a PDF to show the PDF for human
consumption and then when you want to
persist a form we flatten the PDF into a
PDF a or PDF view a or PDF a + u a and
then we can digitally sign the document
so and we don't sign using pedesta 5
what we sign using by the stupidest tree
and in 2014 we also completed the work
on PDF view a PDF a to PDF a3 and so
forth one comment I still have to make
about these slides for succoth this like
this these examples are for testing
purposes they were made before Duke vet
was officially released and for instance
the name of the XML file this we called
the XML file invoice XML but no there
are really there's a there's a you you
need to name your file invoice
super-dense water scene supports invoice
XML
so sometimes we are ahead of the specs
we for 2014 for 15 we well what we built
after the experience with baddest 5 we
like to tune our roadmap based on what
customers need so one of the things that
is now asked by many different customers
is reduction
what is reduction well you saw that
words in a PDF they aren't really words
they can be snippets of more than the
word or only the different characters
and there was a scandal a while ago
where AT&amp;amp;T was giving PDFs to NSA and
they wanted to obfuscate names of their
customers so what I did was they they
put black rectangles on the PDFs to to
obfuscate the the name but of course
these black rectangles they hide the
text when you look in a viewer but you
can still copy paste the text underneath
the text underneath isn't grown so one
of the things that
we'll follow out of our research
development project that that's ruff
shows with detecting where our rich
works will be actual reduction where you
have a rectangle and we are actually
going to remove the content that is
under this rectangle because we can
expect all the positions of every
character we are actually going to
remove them from the content stream
unstructured PDF so we are in 2015 we
are we hope that we can turn our
research into actual development we see
a lot of difficulties like there will
always be manual or human inputs to
really find what the structure is like
like the division in different
paragraphs that will that will work if
the paragraph if the last line in a
paragraph doesn't end at the last at the
same position as the previous line so I
text will look at different lines and
will look where there's a line start and
end and if it sees like an indentation
it will say hey I have a new paragraph
but that that's not foolproof so we are
going to find a generic way to deal with
unstructured PDFs and then try to well
you don't know if we succeed in 2015 but
try to be able to if we have predictable
PDFs if we know we have a set of PDFs
that has been created with the same
software we can predict the structure
then we hope that we can turn videos
that aren't PDF a level a into PDF a
level a but that's let's won't always
work without human intervention and on
PDF 2.0 we're already we've already
implemented some features that will be
new and PDF 2.0 and the next ISO
committee meeting in November 2014
so it's always in flux some things that
were in the draft before are no under
discussion so it's kind of a procession
where we had go two steps forwards and
forward and one step back but it's it's
something that we are actually actively
following up now
many people know that I've written two
books the first book ethics
in action it got a real boost when james
gosling blogged about it so I didn't
know that James was going to write the
blog about a text in action and suddenly
I saw that the sales numbers go go
through the roof and I said what's
happened and James actually used my
affiliate link so for every book sold to
his site even got some extra but the
first book sold 11,500 copies and there
was a second edition it was a rewrite
salt 8,000 copies and then I decided to
make it easy for people to obtain the
book and no I'm I've started writing
books on lean pop lean person online
publishing format where I can write a
book in markup simple markup I put it on
Dropbox I hit the button on the lien
website and automatically a PDF is
generated an ePub file and a dot movie
file is generated and you have a Buy Now
button but I've set the minimum price at
$0 so without registering well you can
obtain the new books without having to
pay for it if you register then every
time I have finished a new chapter I can
make a new version and then I can hit
the button so that you are informed by
mail that there's a new version
available so the ABC of PDF with attacks
is the first book I'm the first new book
I'm writing it's more a simpler way to
read the PDF specification I told you
that the ISO 32000 2 will be 1200 pages
and here I try to explain PDF using
simple examples using step-by-step
examples there are some upcoming titles
create your PDFs with I text the next
one I'll make and that will explain the
high level objects that's real so the
ABC of PDF uses eye attacks but that is
more about PDF than about I text
creating PDFs with I text will be more
like the ethics and action books
updating your PDFs with ethics will be
about forms and and and
that the watermark example you've seen
and then sign your PDFs with I taxes a
rewrite of the the digital signatures
white paper that I already published a
couple of years ago so thank you for
attending to our talk you can visit us
at boots 5712 I'll be there quite often
too and I see that we have still a
couple of minutes for questions if
somebody has asked questions they're
welcome to ask them
so for the rest of the audience I texts
can create PDFs from a high level using
paragraphs but also from a low level
saying using PDF syntax like show text
and move text and we've built something
on top called PDF graphics 2d so you
have the graphics 2d object in the JDK
and we've implemented this using PDF
graphics 2d so that if you use graphics
to the syntax you can output this to PDF
it it doesn't always flawless I have to
admit because there's this you have to
translate Java syntax to PDF syntax Java
effects so we're we've doubled the
number of employees this year and we
have a Java egg fix developer now when
one and so it's not on the roadmap but
if there's sufficient amount for it and
something we can look at the demos that
are boots are in a Java ethics
application so it's certainly something
that's look into
I may be
so if briefly seen that you briefly seen
the structure tree root so in this
structure tree root it has the complete
sequence of all the objects that you add
so the difficulty of adding an image to
a document that is already pdf/ua is it
can't just add it to a page you also
have to refer to that structure tree
root so you also have to add an entry in
the structure tree root at the correct
position so that can that can be a
challenge
are you are you referring to the image
format itself like if it's a JPEG or a
PNG the image for my children matter but
as Bruno explained the difficulty is in
if you add the the image or whatever
content it will be it will also have to
be inserted at the correct place in the
logical reading order of of the content
but if if the image is like a watermark
then this watermark is an artifact
it doesn't make part of the firfer
it doesn't make part of the logical
structure then then it's simple because
artifacts don't need to be added to do
so it depends it depends on what your
what the purpose of the image is if it
would be something really part of the
content like we had the fox and a dog
and you want to add it to the content so
that you have alternated the alternative
text then you need to add it in the
structure tree root - and that that can
be a challenge if it's just a water
marked and then it's no problem
whatsoever
you just need to be sure so that you
mark it as as artifact because in a PDF
view a document you can't have any
content that the the that isn't
quantified and in some way so we need to
be able to identify the object
mm-hmm
mm there are different standards but
they share some something so pdf/ua you
have level a and level B level a is the
accessible PDF a
so there's a limited set of of image
types that can be stored in a PDF like
for instance if if you would add a PNG
to a PDF it wouldn't be stored as a PNG
and if you respect that
well you can't at the PNG to PDF but if
you use the the image types that are
supported by PDF then they are supposed
to be consumable in 30 years and 60
years so PDF a prevents say in a PDF a
you are not allowed to use algorithms
that are for instance proprietary from
somebody you can only use to open the
specs specifications that are open more
questions
there are different options one option
would be that you create an excess XHTML
file and that you define a CSS one of
our customers they need to its a
printing shop and they they print high
volumes of invoices and quotes for their
customers and these invoices always have
the same structure so they provide the
data in XHTML and then every different
customer has a different CSS one with
the blue logo will have like the tables
will have blue backgrounds one with the
red logo will have red background so
that that would be one option to to do
this but of course HTML isn't really a
good format to define a layout so I call
this like the poor man's solution for
high-volume production otherwise you
have all these levels that go to the
really lowest level of where you write
your own PDF syntax no Scott Styles
there and then you have the the high
level objects of paragraphs limited
styles and then you have the the
templating like xfa or XHTML
there are different parts to this answer
so you've seen that when I opened the
PDF in a text editor I had to start at
the at the very end to find the start of
the province table and then find the the
objects there's something called
linearized PDF the more common name is
PDF for fast web view where you
reorganize your PDF adding all the
objects you need for the first page
first and then you have a
cross-reference table that shows it has
links to these PDFs and then every page
has its it builds up like that and so
when you download the PDF you can view
the first page first because you have
all the necessary information you have
all the fonts for the first page and so
on creating such a PDF in a streamed way
is difficult normally you create a PDF
and then you reorganize all the contents
to make it ready for fast web access why
because if you would stream such a PDF
you you create the subsets of a font
that is needed for the first page but
you can't already send this subset to
the to the viewer or to whatever because
maybe you need to extend this subset
maybe there's glyphs that need to be
added that that are not in the first and
the subset of the first page so that's
that's one problem as for streaming PDF
the main reason why I wrote I text in to
India 2000 so I published a text for the
first time in the year 2000 was because
I didn't find any library or tool that
was able to create PDF in a web context
and I wrote my first PDF library in 98
back then PDF was something from the
desktop somebody was sitting at the
desktop and created his PDF manually and
I needed I worked for a university I
needed to create PDFs with as many pages
as there were students and we had 30,000
students I needed to create a document
with 30,000 pages in a web application
so it had to be fast
and what I did was all the existing
tools used the MVC pattern Model View
component where they created first in
XML and once they had all the data in
XML only then they started creating the
PDF I broke this pattern and I used a
different pattern where as soon as I
have sufficient information about the
page I stream it to the to the browser
so that the time mode can be avoided and
but of course you can't view this PDF
when a page is sent to the browser
because I keep in memory the
cross-reference table I keep in memory
forms that need to xn extent and so
that's I hope that's X that the answers
the question I don't know if not we're
at our boot in a mouse okay I see that
people are waiting for the next session
so if you have questions come and find
us at our booth thank you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>