<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Nashorn: JavaScript on the JVM | Coder Coacher - Coaching Coders</title><meta content="Nashorn: JavaScript on the JVM - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Developers/">Oracle Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Nashorn: JavaScript on the JVM</b></h2><h5 class="post__date">2015-06-08</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/iRiiGrIlEE0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">my name is jablonski I'm the lead on the
multi-languages team at Oracle and this
includes NASA one project you have
retired Jas project and dinah link
project this is our safe harbor slide
basically the stuff I'm talking here is
some of it will be talking about things
that we're going to do in the future so
you can't base any of your projects on
some of the things I'm talking here but
most part the first part of the session
will be about things are pretty solid
the takeaway points here will be to
basically fill you in on what NASCAR
Nia's briefly it's mostly a technical
session I want to talk about some of the
technical details about how to actually
use Nance Warren now sort is our sorry
javascript is everywhere you know
everywhere you look these days it's in
the browser people are starting to use
it on the server side and some of the
things that we'll be talking about today
will make you start thinking about using
javascript in some other areas that you
may not have thought it before again
with avatar jas project you'll be able
to use java script on the server side
and the Avatar project itself is
actually all about having JavaScript on
the server side i also want to talk a
little bit about using javascript is a
prototyping language because the thing
is a lot of the work that I've done in
the last few months has been basically
prototyping different ideas using disk
JavaScript and because it is a scripting
language you can you can whip up
projects fairly quickly by using it I'm
also going to be asking you to pitch in
to help out with an aspirant project
it's been primarily just the team at
Oracle been working on it for the last
three years but we'd like to have people
in the community to start stepping up
and pitching in and finally I find that
you know working in Java scripts in the
JVM is fun and sometimes you're you find
that doing your coding is a little bit
of menial and
uh getting everything all lined up and
whatnot but because of the fact the fact
that javascript is a flexible scripting
language that things move along a lot
quicker in the development process ok so
the agenda here is just to give you
background about what's going on at
javaone and boat Nass warned talk about
a little bit about the jjs command shell
scripting javascript and java api's java
and java fex and finally some
experiments we've been doing with with
javascript so what is Nassau Nassau is
an implementation of Equus crib 51 it's
fully compliant it's a one of the first
Java scripts it actually was fully
compliant there's some other so that
caught up to us since then it's a
replacement for rhino boast of both in
performance and also insecurities one of
the big things that we worked on an ass
Horan was basically nailing down the
security so if you want to start
thinking about using javascript in the
secure environment you should be
switching the network it exploits jsr to
92 Via Dinah link Dinah link is a really
powerful library which allows you to
bind languages so in their case we're
using it to buying JavaScript and Java
and be able to talk back and forth it's
fully part of the OpenJDK so you can get
the sources you can mess around with the
sources yourself look at some of the
implementing implementation details and
you know maybe supply some bug fixes or
actually some features that to the
language and it's available on SE and
Emmy and a lot of people are actually
using it on on raspberry PI's for their
projects the talks that specifically
about mass horn from the team tomorrow
this talk by Marcus who's going to be
talking about implementation of NASA
horan on the JVM and some of the issues
that involve there but also he's going
to be talking about some performance
improvements that we've made in nests
horn and attila is going to be talking
about
how to get java and javascript talking a
little bit more about that Dinah length
that's tomorrow the talk about avatar
Jas wasn't in the catalog but there's a
birds of a feather this evening and a
talk tomorrow morning to cover that and
we're finding that a lot of other talks
about bass horn from third party groups
so here's a few of the talks that are
going on this week talking about how
people are using a sworn I think they'll
think the last ones most interesting
that's but basically that's when running
on Raspberry Pi ok so the a lot of
people who have been using javascript in
the JVM have been using Rhino using the
JavaScript API it's a fairly robust API
and as fairly easy to use this is how
you would use it basically you would
create an engine and then start sending
you valves the engine you can bind
variables with it with it but we've also
introduced with jdk 8 something called
jjs which is the Java JavaScript tool
which allows you to use JavaScript from
the command line and it's a very easy
thing to use and what I've done on my
machine we can't do this directly in the
JDK installer but what I've done in my
machine is actually created a soft link
from user bin to jjs so I can be I have
access to jjs directly anytime I want to
want to use it so I recommend doing this
these slides will be available after the
during after the conference you should
be able to get the information from them
there's an alternate way of doing that
if you if you have the Java home bin
library on your path you can use the env
command also get at jjs a lot of us have
been using
using the hour L wrap tool which allows
you to do some ripple type things it
allows you to go back through histories
and arrow keys to correct things so if
you're not using that for your command
line tools i would recommend using that
and what i've done is actually created
an alias just js2 makes it really easy
to use as far as the command line is
concerned there's not that many
parameters that your options that you
would use on it the most common options
would be scripting and FX and I'll talk
about how to implement an FX application
a bit here but the scripting one
provides turns on a bunch of built
things that we built in or added to
Nassau ran up and above and I have a
section here to discuss discuss that
there's also some other / options that
are familiar to you if you use the Java
tool like the dash D into SJ to provide
information to the to the JVM and you
can find out the current version of the
full version of the of the tool so let's
talk about dance horn is a shell
scripting tool so this is not something
that you would have thought of in the
past maybe you would have been using
Perl or Ruby or some other language but
there's no reason why you couldn't use
JavaScript to do your scripting so that
we've added features to two naps 12 to
facilitate that kind of thing so all you
really need to do is set up your shebang
and since we put the link to the jjs
into the user bin it's just surveying
for the JJ at use urban JJ yes and you
know if she'll type she'll like scott
comments you can use back tix to embed
commands so this little example here
just a query of a current directory and
spews out all the jsjs files that are
there you can get AG arguments from the
command line either using the arguments
built-in variable or if if you use
functions a lot embedded in your scripts
then you should probably used dollar
sign arg which you can access at any
level of your function
we have edit strings or templates
templates strings this will be probably
coming in the six version of JavaScript
and allows you to get rid of those plus
signs and actually embed expressions
right in your strings a lot easier to
read and lot easier to follow we've set
it up so that only double quotes I here
doc and back tix actually get edited via
single quotes that's protected from
editing so you can actually do nested
strings that way we can introduce the
here doc so if you're doing a lot of
HTML work or a lot of building up of
pages HTML it's really handy and you can
use the templates inside of the here doc
so makes it really easy to create a
bunch of strings you know that it's a
lot easier to read along when you have
access to all the environment variables
so if I know the current user is what
the current directory is it's all very
straightforward but really easy to do
and so we talked about back ticks well
beyond back tix you might want to do
some more sophisticated execution of
system commands so we have this dollar X
exec commit function which it takes a
command line string and goes off and
execute it it has an optional argument
which is the input which you can feed to
the straight feet to the command line
and then you have the ability to
retrieve the output by default the
result is to return it directly but you
can also get it through dollar dollar
sign out you get the errors from dollar
sign error and the actual exit code from
dollar sign exit there's some additional
supporting functions that provided to
make a little bit easier some of these
are familiar to you if you've used rhino
or one of the other Java scripts for
instance quits obvious obvious to
prints echo red lines freed line with
prompt and read fully which is Riza
whole files so it makes it really easy
to use you can still use the Java
primitive calls to do this but this
makes it easier when you're writing
scripts you can load scripts other
scripts embed them in in your code so
just use a load directive there's two
forms of it basically you can give it
either give it a path or you can give it
an object that describes the script that
you want to want loaded there's also a
load with new global which starts with a
fresh global and i'll be using this in
the demo about talking about threads
later where we where you when you start
a new thread you want to start with new
global so of course you can do CGI I
don't know anybody that CGI anymore but
it's pretty straightforward you can do
this you know basically just use the
same notion of shell scripting and just
you know right right out the same way as
you would with any other CGI language
okay so one of the big things about Java
Nassau is that it allows you to
communicate with with Java and it does
it very seamlessly there's you know like
you hardly even noticed that you're
working either in Java or JavaScript it
just all flows together and this is all
provided through a library called dyna
link and dinah link uses under its
underpinnings are based on jsr 292 which
is the dynamic invoke and what it does
is allows you to call something
arbitrary with an arbitrary make an
arbitrary call with an arbitrary object
and it figures out which objects method
that you need to invoke and does that
automatically it also use it's also used
to figure out exactly which JavaScript
methods that needs to be invoked if
using javascript many methods
so how would you use Java from from
nests horn in Rhino we had this thing
called packages which allowed you to get
at a package string to to locate a
particular class so in the old style you
would say packages jealous java x script
script engine java was built in so you
didn't have to actually specify packages
for java so you can specify the file
class is equal to java.io.file with nasa
room we've introduced a new style which
is a little bit more efficient and uses
less memory little bit faster it's
called you have a tight and you express
it's in a similar way you make this
function function call one of the big
pluses other than make faster and better
performing is that you can also specify
other types other than classes in this
case who can specify a double array but
to saying devil and brackets so any type
can be pulled out so here's an example
of some of the things you could do with
some of the Java classes except for
instance the ArrayList class which is a
which is a collection I can get the
class for that for that class from you
java unit util rate class I can then
create a new instance of it i can add
elements to that new instance we've
created and i can use the for each to
iterate through all the elements so when
you write the code javascript doesn't is
not obvious you know which things are
java and which needs your javascript in
this case you write the code in a way
that looks like javascript but what
happens automatically underneath for you
is that it the dyna link figures out how
you need to call the java code in order
to to make this thing work so you can
get things make calls that get the size
get elements and then one of the other
things is very subtle is we have this
thing called
a beans linker which allows you to link
to Java Bean so in this case we have get
class method at the bottom here scissors
a beam that we can just treat it as
though it's a property so there's two
two requests are equivalent I can either
say get classes or just say dot class
and it will return the current class for
that object this is the same sort of
example using hash map so we've gone
from a collection to add to a map again
you can do the similar sort of things
the distinction here is that we need to
be able to pull a collection out of out
of the map in order to iterate through
it so something that is similar to you
would do the similar sort of thing in
Java where you would actually pull up
the keys or the values to iterate
through them and that's how you would do
it again it's very straightforward
working with arrays working between
switching between JavaScript or Java
raise it's all transparent it all looks
pretty much the same so in this case we
want to work with inter a so we declare
the inter a type and then we create a
new instance of it and in the
constructor the best the number of
elements you want in the array so in
this case you want to ten elements and
then we treat it as level as a regular
array so instead of using the JavaScript
arrays which is a little bit more bulky
than a java ray you can actually use the
compact java ray directly if you work
with an age ever array and you do
something improper like access something
doesn't exist in JavaScript it wouldn't
normally complain because JavaScript you
can grow an array dynamically but in
Java you have a limitation of based on
it the size of the array so this case we
get the normal exceptions and we can
handle the exceptions with the triblock
strike explodes
rena bowls or single access methods it's
pretty transparent if you've done any
lambda programming in Java JDK 8 similar
very similar effect takes place in nests
horn in this case when you create a new
thread you usually pass at a runnable so
you have to create a new instance of
runnable and extend it with the run
function but in that sort you just put
in a function and put it all does all
everything for you ok so in this case we
create a new thread we feed it to
function hello world we start the thread
thread started we do a join to force it
to finish executing we get the hello
world and that's that's it so it's
pretty straightforward really easy to
use and we work well with lambdas so
anything that takes a lambda you can
feed a JavaScript function and any
lambda function you can feed it to
wherever javascript function could go so
it works back and forth so in this case
if you want to use parallel streams from
Nassau and go read to town it all works
and here we actually have a mix of of
Java and JavaScript stages here so in
the first phase here it's primarily all
Java except the match function and the
lowercase function those are JavaScript
so we're mixing mixing here and in the
last case the for each here we're
building up the array at the end so so
we can mix and match the jab and the
JavaScript to whatever
okay so one of the great things about
being able to communicate with javis
then we can take advantage of all the
great libraries that are sitting out
there that are written in Java and so
we're a lot of platforms based on
JavaScript would require that you create
these huge libraries is written in
JavaScript to go off and do you know all
the POSIX calls or what have you well we
you already have it available to you in
the Java world all that stuff is all
sitting there so one of the things that
you can take advantage of is javafx now
what we did with with the jjs command we
is we've simplified simplified how you
would actually use Jeff Jeff effects all
you have to do is specify dash FX on the
jjs command and that tells Nass horan
that this is an FX application and it
will treat it a little special and how
its treated special is with 33 magic
functions the init function the start
function and the stop function anybody
who's written the javafx program knows
that those are the entry points from
your application now an ass whore and
all of those are optional you don't have
to define any of them if you don't want
to because if none of them are present
we treat your whole application as
though it was just was the start
function so anything that you put in
your main script becomes part of your
start function and just goes if you want
access to this to the default stage we
have a global variable that's defined in
that scenario called dollar sign stage
and you can access the stage so that's
the only thing that you need to know but
you don't even need to do that that's so
this is what hello world looks like in
Nassau again here as I just mentioned
earlier we don't you don't have to
define it and it
or stop or start this is all treated as
the start body we make declarations of
the classes that we're going to use in
this case we're going to use the button
class the scene class and the stack
paying class and the only reason we have
to declare these ones are the because
we're going to actually create new into
new instances of those all other classes
that are used in this example if you
look at this the equivalent java example
you would have to declare all the
intermediate classes as well but in s
warran you don't have to do that because
once you access the function it creates
access to that class for you
automatically if you don't have to worry
about it so so in this example we create
a new button with knock knock on it we
set the on action book but value or
property of the button again this is a
use of beans so normally you would set
the on button but in this case we're
just going to assign the beat the beam
directly as a property and normally we'd
have to wrap a class around the function
that we want to handle the event but in
s or we just assign the function
directly and NASA Warren does all the
dirty work for you it just makes it real
easy to use ok so we create a new stack
pained a bit to put our button in we
added to the main scene here note that
the root children children is another
beam so normally would say get children
but we just say children and then we set
the stage seen to have the scene that
we've constructed and then we do a show
simple as that so then this window it's
not coming up clearly here but the
window that you see off on the side here
is what would come up with a nut nut
button and each time i push knock knock
it would come up with the hello world in
a display it's pretty straightforward
ok so I'm going to show a little bit
more detail of a bass horn working here
and any of you who were the talk last
year I did a demo of the fireworks
display and and it was quite a bit of
work to actually get that going because
I had I didn't have this feature that I
just discussed about actually being able
to access the effects functions directly
and I had to create a whole bunch of
Java rapper rapper functions to do it
but this year now that we've got you
know basically more complete support for
FX and also because more work done in
Dinah link i can actually do the FX
example in a hundred percent javascript
i don't have to do any java messing
around at all so what I'm going to do
here is I'm going to break it for a
second and put my glasses on so I can
see what I'm doing here and I'm going to
bring up the FX example now I had
planned on putting this on full screen
but the projector system doesn't handle
it very well so I have to do it this way
so I'm just going to scroll through some
aspects of the of the applications is to
see what you know what it would take to
create a whole application it's not very
long it's only about 200 lines 20 20
lines except to be exact so we make all
the declarations of classes that we're
using this is it this is a convention
that we've decided to use hope that you
guys follow it as well because it makes
a lot easier to port stuff around see
what we have this the see what can we
okay maybe I should talk a little bit
about some of these magic classes like
for instance here the animation timer is
one of the things I had to write in jab
the last time because the fact that i
had this callback and I needed to be
able to handle the call back
and don't need to do this anymore
because I have the ability to actually
get at the timer and then actually at
the bottom here i'll just have to scroll
up a little bit so you can see it it's
possible to actually extend the timer
with with this java x10 function and
this allows me to create new classes
that extend the animation timer and i'll
show you the example them later on here
again we have an example of primitive
primitive declaration double array okay
now in this demo I want you to keep in
mind that every little dot you see on
the screen is a particle and every one
of those particles is going to be a
JavaScript particle and and it doesn't
affect the performance of this
performance of this example it's all
written in JavaScript it all works
fairly well okay so I'm just going to
scroll down towards the bottom here this
the draw every team is basically
iterates through all of the the
particles that need to be redrawn okay
and fire the particle it basically it
looks very similar to the actual Java
code the only thing that was really
changed was you may be switching to
using beans in some spots but it looks
very much like the Java code exploding
circle some sort of thing okay let's get
down to the bottom here okay so here's a
case of where I'm actually extending the
animation class so so the way I extend
the animation class is I create a new
instance of the extended class and then
at the end I add an object which has all
the functions that over I want
overridden so in this case i want the
handle function over written in the
timer in the timer so this is the code
that we thought we would use in the
timer one thing that you have to keep in
mind too is that a lot of these things
like timers whatnot are all done in
separate threads so that's one can
handle
for you so okay we want to make sure the
timer gets stopped on exit of this
function so the step function here is
defined in this thing this example so
make sure that the timer's all turned
off okay do some initialization here's
the stuff that basically puts the the
pain together okay we you know start out
with a new pain we add the backgrounds
we at a surface where all the particles
are going to be drawn in we add them to
our seen a new scene and then set the
stage up and then start the timer going
so if should be able to just say run
whoops oh no demo gods give me second
will do this right okay I won't launch
it from here I'll launch it from command
line just give me a second
okay and see what's kept locked fire
works yes and you notice I I had it set
up as shebang up there we go so how to
teach me to run it from an editor
instead of command line so here's the
fireworks example every one of those
particles as I say this JavaScript
object and it just works fine you know
like you hundred percent JavaScript you
didn't have to do anything written in
Java so one of the things I wanted to
point out here in this talk is that next
one is really good for prototyping
prototyping things and I find I think
that that if you have an idea for a
project that you want to implement in
JavaScript I'm sorry in FX you know if
you don't want to write it entirely in
JavaScript you couldn't release
prototype it in JavaScript get all the
ground work done and then converted over
to Jabba later and you'll find that the
differences between the languages that
are very minimal and you won't have to
do a lot okay okay so back to the slides
ok
so this leads me into something that the
we're calling experiments what I hope to
do is in the next few weeks is actually
create a experiments folder in the
National Armed repository which has a
bunch of things that we've been working
on it gives you an opportunity to
actually add to it so this is this is
effectively a call to arms anybody who's
interested in doing JavaScript
development we'd be interested in having
you help us with the nest one project
there's a lot of things that you can you
can do just straight of the box with
Java you don't have to do you know too
much any of the libraries that are
sitting out there like if you want to
use the co routines library or if you
want to use the fork join library or
math libraries or what have you just use
them to the box but sometimes there are
some things that are a little bit more
complicated and I'll be actually giving
an example and you find that a lot of
the other languages have libraries for
you like you're using Python you would
expect Python to have a cgi library for
you you can do it directly from a swarm
but it would be nice to actually have
support for it sockets HTTP all its or
stuff so so let's a pic threading as an
example so let let's talk about
multi-threading in JavaScript it
basically doesn't exist it's not
supposed to exist the specification says
it doesn't exist but it's kind of hard
to use the JVM and not want to be all
these threads you know it's like you got
these things with hundreds of cores and
then why can t take advantage of it so
we're sort of being sinful here and
saying well we'd like to be able to be
multithreading from NASA one right so
how do we do that okay so you know
JavaScript objects are not fair use fed
safe you know if you do a set of an
object it like sometimes creates a new
property and has to restructure it so
it's not thread-safe its we need to be
able to avoid that but this we still
have this desire to do multi turning now
if you want to if you actually want to
do
it's actually did I miss the slide there
Oh guess I'm sorry if you actually want
to do multithreading you have to keep
all the thread safety in mind and these
these are the rules I actually listed
this on the net forum blog previous time
but these are the sort of the rules that
you should keep in mind okay the first
rule is the absolute rule never never
never share objects across threads
because then if you do that you're going
to be in trouble okay and if you if you
ignore the rest of it and do that you're
fine okay but being developers you don't
want to do things like you know you're
supposed to you want to do them go a
little bit further so these are these
are the rules that you should follow if
you create a new thread you should
probably create a new global space for
it so that you're not sharing the
Global's okay in that way you don't run
into the same kinds of problems that you
would have with with messing around with
objects if you want to pass information
across the threads you should probably
use JSON to basically to package up as a
string pass it over the other thread on
package it and that way you're not
sharing objects if you really need to
pass an object over you know make sure
that's a java objects because Jeb
objects are safe across the threads
because I mean basically that's what the
JVM aside for but but if you need to
really really need to manipulate a
JavaScript object you should probably
freeze it and that way nobody can change
modify it okay and caused you any
difficulty if you do need to set the
fields make sure that partly the
properties are stabilized so the
structure is fixed okay now I've got the
caution symbols there that's the degree
of caution there I would really not
recommend doing that at all but if you
feel you must let's keep those things in
mind if you do anything else I can
guarantee your Apple crash okay so that
keep that in mind okay so why am I
telling you this well that's why we need
to have libraries to make a little bit
safer to use to use threads
so what we would like to do is basically
have a system set up so that when you
start with your main thread you know and
you want to create new threads that it
creates isolations for each of those
threads okay they pass information back
and forth using JSON okay so if you
wanted to do raw rod threads management
from dance or and this is how you would
do it you would you know create a new a
new new thread class or could create the
thread class or get the three class you
would set up your task in this case my
task is just iterate you know several
million times then I freeze my task
object so that's fair to share it then I
would go down and create in my new
thread and in my youth my new thread the
rena bowl i have there i'm creating
basically say load with new global and
passed the task through so what happens
is it creates a new thread creates a new
global in that thread and runs that task
in that new threads in a new environment
so then you can go off and start start
that thread that thread will go often
and do its business then you can join
and put the result okay so that should
all that should work fairly
straightforward what we really want to
do is take advantage of some of the
other api's that are out there in this
case web workers is out there with html5
and it would be nice to actually be able
to do that directly from a scorned so
this is one of the experiments that will
be sitting in that folder is a thing
called workers Nance foreign workers
what it does is it creates a list of
activities that you want workers to
perform uses json-rpc to communicate
back and forth between the threads or
the sir the service that you're using
you have a service out there that you
want to do the work for you it's either
a group of threads or could be another
process or it could be a process on
running on another machine and and keep
it all thread safe so this is what our
goal for workers
so this is how you would use workers
this this is how the prototype works you
would create a service of some sort in
this case we want to create 10 threads
so that's going to be my service then
that create a new worker where I would
prime it with things that knows how to
do which is which literally is just a
set of functions that you can call that
it knows how to perform so in this case
I have my factorial function sitting out
there then this this file and it also
provide the service that we want to use
apply against the tasks that this worker
does then with the same as with web
workers we provide a non message
function which handles the results once
the result is computed then we go off
and we fire off a bunch of calls to that
worker in this case we're using a
built-in feature of nests worm which
allows me to call an arbitrary function
and wrap it up into a JSON RPC to call
the worker to do the work so in this
case what happens is it it feeds that
call off to the worker and the worker
puts it in the queue concurrent queue
and then the service pulls it off the
queue to do to do the task so in this
particular example it will go off and
create 22 tasks 10 those 10 threads
would be operate those all in parallel
and produce the results in the callback
so this all works and but we want to be
able to create other services like
remote services Sun nodes instead of
that saw sister these sorts of things we
want to expand in our library okay
okay so my last topic here is debugging
one of the things that we're currently
lacking in NASA one is debugging I'm
hoping that it's going to come quickly
but I can't commit to anything because
we've you know we have made any deals
with anybody yet but this is a sort of
thing that sorts of areas that we're
that we're thinking about so obviously I
gece needs a support NASCAR and so it
would be great if NetBeans supported
NASA Warren you saw the demos in the
keynote yesterday about how it works
well with JavaScript we should be able
to do the same thing using wire
protocols create a common API for all
the languages that run on on the JVM so
we're talking about actually creating a
same way we've created Dinah link which
allows you to bind across different
languages which be able to have an API
that for all debuggers to work across
all or debuggers work across all
languages so we're looking at that the
wire protocols so that you can actually
use the development tools that are built
into chrome and into Safari if we if we
had the bra our protocol setup you
should be able to do that and it's a
reasonable task to do and as a proof of
concept I wrote this little application
called askari a scary are those little
birds that you see picking bugs off the
back of the of the Rhinos back right so
it's somewhat relevant here so what I'm
going to do is I'm going to switch to
demo again see you escape and
okay so askari is one hundred percent
JavaScript I often do this from command
line again just so that we just don't
tempt the gods that's right askari is a
hundred percent JavaScript application
he uses FX it was written in about three
weeks and only took me about three weeks
to put together and it does most things
you want I want to do okay again i'm
using shebang here to launch this
scourge s okay and we have a little ide
type display here i just use icons
instead of words here i've got an open
door and click on that and i create open
up my application so i see there's a
little truncation there on the display
there but hopefully you can see enough
to be able to see what's going on is
there some way we can correct the
projector there so that we can get that
thank you very much okay okay so i have
a sample application written in
javascript here that i want to debug
everything you see here is either javafx
or Java or JavaScript right nothing here
is there's no jobs involved here at all
so what I want to do is actually to
debug this so I presstv bug button and
because I don't have a lot of memory
here my ticket take a second to come up
and just give it a second come on oh
there it is ok so the you can see that
the break point is that story stop point
is set up a function at the beginning
there and I have a little stack display
off the side you know so this is using a
table tree view from one of the new Jeff
effects functions or classes it's pretty
straightforward you know I can you can
view values let's look at the contents
of this and the different variables I'm
going on you can see all the variables
are good in this function or old
previously declared without undefined
I'll fix that up so that only displays
ones that currently evaluate at some
point but there's a prototype this works
fine right so what I mr. Wran you have
the ability to set breakpoints okay I
should just set mentioned in this
display out here where the where my text
is this is all using text flow from Jeff
effects but i'm using the nass Warren
parser to actually to do the syntax
highlighting so I know where all the
strings are and they're all identifiers
are when I was really straightforward to
use okay I can i can step over okay step
over different things I can look at the
values as I've been set set ok I can
step into or can go to go to the break
point and go to the break point ok step
over ok evaluate the function you can
see that it's added new 2d variable ok
get the out the air print I can
collected this so there's this the thing
that I'm debugging is actually running
in a separate process so i can actually
pull in the output from that separate
process and put it in my display here so
okay so you know this is you know pretty
cool but this what sort of other things
can i do with this well you know because
it's javascript i can evaluate at any
time right so i can say let's say y
equals something else
I have an extraneous character in there
i guess i doing okay combat is what i
wanted evaluated and proof you know
where I where I am in the stack which
which frame of reference i have is still
maintained you know and I've changed the
value of y reading the rate in the stack
so this is the sorts of things that you
can do directly in JavaScript that you
couldn't do in Java without you know
rewriting the class and so on so forth
okay so I want to stop this function of
this session here and hopefully this
will work out okay I what I want to do
is start the debugging session again and
this time I'm going to step over the
Declaration of tests and do this
okay so if i evaluate this you should be
able to see on the the other panel there
that's replaced the test function with
the new function so I can actually do
live update of my code as we're
evaluating so now if I so I step forward
in the the code you can see that instead
of sticking y + D it's actually stuck
the string of D of y in ND okay so
because of this feature there's been
several groups that have been working on
ripples which allow you to do live
update of of your NASA learned sessions
if you're using FX you can actually
replace the f xml file you can replace
the code all on the fly while your FX
application is running I don't have any
examples here but I know that some of
the other NASA learned sessions will be
discussing that if you look for you for
Garrett Greenwald he has some examples
of some of the stuff he's done with with
Emmy and controls and he's doing live
update of his controls and those
something some of those demos okay let's
quit this session here get back to our
notes
okay so that's pretty much the end of
the information I have here contact
information the national project is is
openjdk project you can get at its
project information through that first
link if you have any questions about
Nana sworn development we are accessible
through the debts the address on the
second line there you get a lot of other
things going on there like all the
chickens are going on but some of the
chickens are useful to follow and also
some of the debugging tracking this
going on the bugs are all track with jbs
you have public access to that so you
can look at the bugs or soon you should
be able to actually submit bugs that way
I regularly or semi regularly submit to
a network blog always always post a lot
of good examples up there for discussion
using have a lot of good discussion from
that and if you're talking about nesslun
on Twitter use the s-1 jas tag for that
there's some documentation you can
actually give that this through the the
wiki link for furnace horn through the
OpenJDK but these are the document links
the first one is the JavaFX scripting
guy second one is the nasa warn user guy
so it talks about a little bit more
about the details of the extensions that
we've done and the last one is a
programming guide which goes into more
detail about how do you access Java from
JavaScript I recommend that you go to
the other NASA learned sessions and get
more information more details about but
bug use specifically want to talk about
the the Java connection that you should
go see it till it's a session tomorrow I
guess I have some time here if anybody
has some questions so I can yes go ahead
no it is not okay because that's they
ran that basically ran out of time to
get that to work right it would be
desirable to do this oh yeah so okay
that's about getting that horn in the
webview yes I can I'm sorry Kendra view
I can't Oh echamos trip says yeah okay
so that's that's one of our main goals
with with jdk nine a lot of the features
will probably come out before jetty
Kanan comes out through updates some of
the more basic ones but because es6 is a
moving target it's not settled soul yet
we can only do what we know is just a
well established but we are going to
track it very closely any other
questions guess the back
I don't think that that's particularly
reason there it's primarily a security
issue okay it was put in extensions
directly primary as a security issue and
creating security layers
I suppose so oh it mean it's not
buildings are the RT yeah no it's fine
that's yeah you can swap an ass horn in
anytime yeah yeah well it's just a
prototype you know an hour long straight
long term plans for debugging is still
up in the air I mean I think I think in
my mind if netbeans and Eclipse and
IntelliJ integrated debugging in their
IDs that we much far better than if we
did our own but I don't know how long
that's going to take and that's why I
started to do the Ascari project was I
figured well if i could get this up to
speed and so reasonably solid at least
you have some kind of debugging in the
short term
right right right yeah I recommend going
to Vince talk about that ass run in
education when's that for 30 months yeah
yes it it yes but you might you might
have to do a few twists and turns might
make it working but it should we're fine
so okay yeah yeah you could use like for
instance if you're talking about using
the concurrent libraries as an example
yeah concurrent libraries work fine
right just you just have to be use the
same protections as i talked about you
with case of threads so yes yes but what
I would like to do is because we are
open source I'm obligated to put it
somewhere and what I will do is I'll
create an experiments folder in the
national directory where I will put
these things for people to play around
with
right yeah well basically this there's
two approaches to take with debugging
one is to use the JD I which I used here
which is more Java centric but it works
you know it works fine and reasonably
well or use the wire protocols that are
used by chrome and I think I don't know
for a fact but i think the demos that i
saw with netbeans yesterday it sort of
implies that they're using wire
protocols therefore javascript so it
would probably be reasonable for us to
use that approach yes yeah right yeah
remote debugging is high in our list
because we want to support avatar jas
right so yes sorry no no Jar so no juror
was announced yesterday as avatar GS and
as part of the Avatar project
subdirectory it was just an issue of the
use of word node in the title so we had
to come up with something and since it
was going to be well and integrated into
avatar anyway we just extended avatar
jas yeah it's all the nodes it's
basically a hundred percent no GS yeah
we just can't call it that son so any
other questions yes
you have to convert them yeah it's a you
know I'm saying I'm saying using JSON
RPC because that's a well-established
standard like the wire protocols that
everybody is using you know json-rpc so
that's why I recommend using there's no
reason why you couldn't use your own
string protocol and embedded into
adjacent you see right so yeah any other
questions I have to wrap it up because
we're running out of time so thank you
very much</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>