<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Pattern Matching the Genome at Scale with Docker and Kubernetes | Coder Coacher - Coaching Coders</title><meta content="Pattern Matching the Genome at Scale with Docker and Kubernetes - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Developers/">Oracle Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Pattern Matching the Genome at Scale with Docker and Kubernetes</b></h2><h5 class="post__date">2017-10-04</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/dBrlZBKXWaU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">great good morning everybody
at this early session so this is a
pattern matching the human genome its
scale with docker and kubernetes and
some other tools on my left we have
Jeffrey Powell
he's our subject matter expert in
bioinformatics on the right john
singleton from watchful eye oh and he's
gonna help us build explain how we're
gonna scale this solution out that was
really loud is there any way to yeah
okay so a little idea that agenda it's
it's a bit like peeling the onion so
we're gonna do it kind of like a
Tarantino movie where the end comes
first and we just kind of unravel it but
we'll go down through these layers so
first we'll do some introductions I'll
show you a brief architecture of the
solution and the problem we're trying to
solve for for our client and then Jeff
will give you kind of the big picture
bioinformatics condensed down into a few
minutes that's always exciting to watch
him do that and he'll also talk about
the monitoring solution because as we
scale alpha solution monitoring becomes
a very big factor then we'll flip back
and go through the component
architecture and talk about the tools we
used and I'll do a brief demo to show
you the solution and then we'll tell you
and then John will give you a
presentation on how we do pattern
matching at massive scale and how to
take full advantage
the cloud infrastructure take advantage
of l1 l2 cache and to make sure we get
the most out of our scaled out nodes
will do closing thoughts and mmm we'll
have some giveaways so you have to stay
at the end this is a blatant bribe to
keep you here so at the end we're
getting a whole bunch of cool swag to
give away but we'll also be doing a book
grapple it's a Kindle version of our new
cloud book and it's constantly evolving
you know just about every week or two
Oracle through their continuous delivery
method is revising the Oracle cloud so
we're constantly updating this book we
have a new release every couple of weeks
so the way to get in the raffle is to
send an email to hello at viscosity na
komm and Phillip here will get make sure
you get in the raffle and I'll just give
you a little secret pretty much
everybody that sends an email will get a
Kindle version this is this book is
actually it came out of an Oracle cloud
experience lab that we do where we and
we've done this all over the country
we've even done it internationally but
we set up the Oracle cloud and have a
workshop we spend a whole day just
building up and tearing down
infrastructure and it's quite popular
just a little bit about me I'm from
Austin Texas I'm an engineer and
developer there's Twitter also do a lot
of development with Oracle apex it's a
low code platform that we built the GUI
out for this solution I'll demo that
later co-author of that Oracle cloud
book will be given away and co-founder
of viscosity North America I also am a
private pilot and I have a passion for
the red grape in fact my wife and I have
a very small property in Argentina where
we run Oracle software and pick grapes
and make some wine there a little bit
about viscosity we have a whole we've
actually had over a hundred
presentations this year it will be going
to Australia New Zealand very soon we
have a presentation in Chicago and
Wisconsin next week so we're constantly
doing these things so if you if you also
send us in a mail tell us you want to
opt in and when we're in your town would
be happy to send you an invite to these
free presentations that we do usually
they have a happy hour afterwards so
just a little bit about us we are we
help businesses innovate when they must
innovate to survive I think that's more
relevant now than ever and we're a small
company about 50 employees but we're
very broad and deep
experience and we're certified small and
minority-owned business we've written
more than a dozen books on Oracle data
and the cloud including this
best-selling book Oracle Database 12c
released two from rich Neiman who's
sitting there in the back just a
sampling of our clients they range from
very small to medium sized businesses to
fortune 50 companies from local state
and federal government to fully
commercial companies mm-hmm all right so
let's just go through a brief
architecture in the solution before I
turn it over to Jeff to give you a level
set of bioinformatics and the background
so we approach this similar to how we
approach most problems and that's what
we start with big boxes right inside of
the genetics box I had no idea what was
in there which is why we engaged Jeff
but the client told us they they wanted
to build a business that scaled out if
you think of 23andme where you do a
genetic sample and they tell you that
you have a Viking ancestor this is the
kind of solution they were building and
you know part of its fun part of its
historical and part of its you know
actual medical you know beneficially
medical so the solution starts with
swabbing your cheek and getting a DNA
sequence on that so this gives us all of
your chromosomes both your mother and
father's chromosomes into a very large
file and that represents kind of your
genome if you will the next thing we
want to do is search the each genome or
search each chromosome for specific
patterns and Jeff will tell you a little
bit more about that but if we get a
match in depending on what type of match
we do some scoring and we can tell you a
lot of things like if you have that
Viking ancestor for example so we
maintain a list of these genetic traits
in to a database a relational database
and then we run that out at scale and
that's the docker in kubernetes part and
then finally we want to give your report
and deliver that report back to the
customer you know if you have these kind
of genetic markers and that's really the
application so we don't have any genome
sequences that we deal with there's
plenty of labs out there that'll do that
relatively inexpensive so definitely
send you know send your swab to the lab
and then they send you a bunch of files
back and then all the magic happens here
in the application that will get more
today so at the core of this thing is is
really this idea that we're searching
through your genome and here's one
representation of that this is a fast a
file format that Jeff will tell you
about but basically this sequences of of
these components and we want to search
through that for medical facts such as
vitamin D deficiency and fun facts like
the Roman nose kind of like my nose or
Tom Cruise's nose
and also another funny one was his
Guinea smell asparagus in your pee so we
thought those would be fun so the
logical design view here if you can see
that it will take the clients genome and
that's that's your genome and then the
genes that were searching for there may
be hundreds of those or dozens or
hundreds and then we kind of organize
this at a high level and then we search
each chromosome here chromosome one from
the mother chromosome one from the
father all the way up to 23 from the
mother 23 from the father and then we
kind of pull all that data together if
we get a certain type of match we apply
a score to it and a relevancy and then
that all gets stored in a relational
database so we may start with 10 - you
know tens to hundreds of genes that were
researching and we'll be searching the
clients genome file which can be you
know many many gigabytes so you get an
idea of the scale and we have to you
know generally do multiple passes
through this thing and then go through
each chromosome so it's very compute
intensive and it can be storage
intensive you know so our application is
really what organizes and does the high
level matching and the maintenance of
the metadata and then we use Python
scripts sending Python is one of the
most popular languages in this space so
we built out the Python it you know our
infrastructure in Python and then the
database of course it's an Oracle
conference so this is an Oracle database
that's in the cloud so in order to do
this first I came up with some sizing
assumptions and and this was for
specific business application and I said
well if we've got if we're searching a
hundred people's genomes a day that's
three thousand a month and let's say
we're only searching ten genomes or ten
genes per genome and so we're looking at
about 30,000 scans a month so if that
search takes let's say a hundred and
twenty minutes we're gonna consume you
know quite a bit of compute and storage
and if we scale that out to thousands
you know that that kind of scales up and
so then what I did was I took these
assumptions and I applied them to the
various cloud offerings because that was
kind of my requirement is to find out
where you know where this runs and you
know what it's going to cost and here's
an example from Microsoft Azure where
you see the monthly cost for you know
services a networking database compute
with the assumptions we made storage
archive storage and premium support and
then over the course of a year as you
store more and more files as they
accumulate your storage cost starts to
grow and at that time I sure I was
missing any kind of archive storage
similar to Oracle's storage archive
storage cloud or Amazon glacier so that
long-term storage cost became very
expensive so by year three you know the
cost based on those assumptions was you
know approaching six figures
and that's just to give you kind of an
idea of the scale of this so that's the
first part of the onion and turn this
over to Jeff and he's going to tell you
about bioinformatics straight I guess
this is where I hit the HDMI to and not
the off right I happen to some groups
yesterday so I was like it anyway my
name is Jeff Powell I'm a quick 30
seconds about myself I'm a biochemist
neuroscientist I've been doing a
software development for 15 years before
I got into that so I've been at Eastern
Washington Texas A&amp;amp;M right now I'm
working for xenos and I've been a
dancing dance instructor for 15 years so
those going to cloud fest tonight you'll
probably see me out there so looking
forward to that see how well we can keep
up with it but yeah so I'm going to be
talking to you guys about bioinformatics
here so kind get started like I didn't
know exactly what kind of everybody that
was gonna be in here wicked out play
business side people sale sales agenda
marketing software developers engineers
system architects and so I really wanted
this first kind of address what what is
the root of why we're all here right and
the giant idea from that is it's the
industry it's the money there's value
there so and that's kind of the core
root of it all
so the biotech industry that covers
everything your prosthetics all your
services it's gonna cover you know all
the pharmaceuticals all the data
analysis that industry right now is
about 1.3 7 billion in the US I pulled
that from Gartner and Grandview and all
that and of course 316 billion global
and 6 billion where you're looking at
just the bioinformatic piece of that now
looking at some of the projections going
forward well not quite yet but here's
some of the companies that we actually
find in this workspace right now you
probably recognize a few of these like a
loon thermo Fisher of course thermo
Fisher I think owns Life Technologies in
a firm that's now
agilent's pretty hit big name out there
so the projections by 2020 for the u.s.
is going up to about 330 billion so
you're almost you practically doubling
there we're going from 300 something
billion to
750 worldwide and bioinformatics is
almost tripling and one thing we really
want to keep in mind for bioinformatics
because that's our space that's the text
space right that's 6 billion dollars out
there right now 4 billion of it's
probably gonna be replaced by better and
more innovative software so that's one
of the big things keep innovating keep
going forward right so really you're
looking at about possibly a $16 billion
growth in the next five to ten years so
there's reasons for that and so you're
gonna have all the same players in the
market space maybe some others and then
there's gonna be a lot of room for your
ideas out there too so that's something
to keep in mind and so when we look
really looking at what is the market
share in biotech industry this is kind
of what we see right there is you know
Pharmaceuticals is taking up the huge
part there are the 60 70 percent of the
industry depending on what skills you're
using how you're measuring it's always
going to change and bioinformatics it's
just that little 1% but if you think
about what we're all the different world
industries in the 70s right and that was
you had your big oil energy companies
you had your medical companies 18
computers is a small thing now ITIN
computers is in everything right and so
bioinformatics is going to end up
bleeding into all of these other
services as we perfect the medical in
industry so I could ask the question
what can we improve in the medical
industry and there's like a hundred and
two hundred chairs in this room and
there's going to be 200 answers so be a
little more specific about that what can
we address with bioinformatics
and so part of the issue with this is
that if you were to go to a doctor's
office and I'm speaking very generally
not an any specifics is let's say you're
suffering from a vitamin D deficiency or
something like that he's going to do a
diagnostic they're going to say okay
we're gonna prescribe drugs at your drug
why correct and what they're really
doing is they're going to a chart that's
all statistics of math saying okay in
80% of say the European population or
something like that we had you know a
positive effect with only you know
headaches on the side but with
more of that East Asian population it
was only 50% effective but it had more
side effects so used rugby instead so a
lot of it is just kind of ballparking
based on background history region
origin stuff like that but by using
bioinformatics we could instead turn
around and say let's do a quick sample
your DNA run that tech really quick and
then find out oh you know what we should
just give you a drug seat or just drink
more water right because that could
actually tell us exactly what's going on
when we're looking at the bio pathways
and so right back up previous and so now
let's get into the science of things
this is where I'm going to start to talk
about being the biochemist so I'm hoping
we're all familiar enough with DNA right
now right it's kind of the base you have
the base pairs that makes the double
helix it's the start of everything so
what I really want to go through is
about 6 years of biochemistry in 10
minutes get you guys completely up to
speed on this I'm going to avoid all the
details but if you can get down this
central dogma you're already ahead of
like most students in college because
this is the big picture that drives
everything so DNA is gonna get
transcribed to RNA now RNA is what's
going to pass out and then it's going to
get translated eventually into these
proteins now we've all heard amino acids
right you know your 20 essential amino
acids amino acids in a giant long chain
that's a protein so proteins are amino
acids and so you know that's just what
it is is you're gonna take the DNA it's
going to be expressed into and
transcribed into RNA and then read and
translate it all the way into a protein
so from there what are we looking at
when we're looking at DNA itself there's
four base pairs and of course you know
Phi means gonna pair with an Addison on
the other side Addison's pairing with
thymine guanine cytosine so you can see
how it's just making this long chain and
then you're gonna have a second chain on
the other side going all the way down
there's about three billion bases in the
human genome so you can think about that
just being a really long data set and
you have just a TCG that's it so it's
almost kind of like binary code except
you're in
watch an airy system so okay so this is
a karyotype so this is basically a look
at all the different chromosomes in the
human body
there are 23 chromosomes but we have 46
total again as Jerry mentioned we have
one set from mother one set from the
father all come together so you're gonna
have two of any given chromosome so
spring apart remember you have two
chromosome ones - chromosome 18s Jew
chromosome 22s anybody know which
chromosome you might not have a pair of
yeah exactly why x and y so well done so
that's kind of the sex chromosomes XX or
XY so your female your xx and then
there's XY and then you know there's
always the weird genetic no telling like
variations on that so alright so what
can we do in this industry right now
this kind of the low-hanging fruit right
what's out there that we can achieve
that we can get something in the users
hand to start getting traction that's
what we're really after and that's what
snips comes into play and so there's
companies out there playing in this
field right now 23andme ancestry watch
polio so single nucleotide polymorphisms
this is where and I'll show you an
example here what they look like in a
second but sniffs occurred about one in
every 300 base pairs so looking at all
the you know 3 billion base pairs in
human genome you're looking at about 10
million snips that can occur and the
human chromosome set and gene set and so
you start to do the math of what are all
the different combinations you can come
up with that is a massive amount of
undertaking so this is actually what a
single snip record is gonna look like so
you can see the snip right there is the
guanine and then there's the upstream
that we like to call the 5 prime side
the down stride that's the 3 prime side
and every snip is going to be referenced
in catalog under the ncbi database as
they're discovered as scientists do
research on them so they're gonna have
your friend snip they're gonna have the
alleles which right now most commonly
gee that's what probably 90% 80%
percent depending on you know population
studies show the ancestral DNA and then
what the mutant snip might be or the
alternate pairing you know it's going to
tell you what chromosome it's on its
going to tell you what position and of
course this upstream and downstream
exist in all situations for everybody
and so it's kind of like a map puzzle in
a lot of ways we know exactly what we're
looking for we know exactly where we're
looking for it kind of like a puzzle so
if we're looking for something on
chromosome 2 you go to line 2 you're
looking for position blue right and then
it has to be lilac on the upside not
violet not purple right and it's got to
be sine on the down side and they like
cool report what that is is it adenine
guanine cytosine what's there and so
let's take a look at what this actually
significance is I'm sure you recognize
these characters and so right now this
is an experiment and all you know where
does there some of the similar
superpowers come from right and so we
sequence their DNA and all of a sudden
we're looking at one of these specific
specific snips you can see the how the
upstream side is identical AC ATG ACAT G
and then here's the snip where you're
going to have a guanine guanine and then
an adenine and then the downstream side
C T ATC is the same for everything and
so we're interested in that single
nucleotide polymorphism right there and
what we actually do with that is once we
get that polymorphism that snip at that
location on the first chromosome you got
to do it again for the second identical
chromosome so that you see what the
whole pairing is and that's where we're
gonna have okay we find out Ironman is
has both gg both the ancestral so he's
got you know the normal human senses and
then down here you have spider-man ends
up having a a because he had that word
mutation so he you know gets those
tingly spider senses right and then of
course Wonder Woman you know has GA if
you know of anything of her background
so then she has kind of heightened
senses so there's ways that we can see
how different sniffs exhibit different
things so we can apply this to do you
have blue eyes
do you have dark hair and blond hair you
know your nose long what can you smell
what can you not smell and it goes way
beyond what we can physically see and
represent but it's how your body breaks
down metabolisms and breaks down sugars
proteins enzymes and all sorts of stuff
and so there's gonna be a lot of really
great health information associated with
snips and so when you get one of these
reports right whether you're at 23andme
watchful eye oh and sistering things
like that you could be at a site that
basically you know if I was talking
about vitamin D for a second
you know vitamin D might come in it says
hey you might have a vitamin D
deficiency not only that but vitamin D
is taken up through cholesterol right
and so it's variant form of cholesterol
and when it gets in the skin that's hit
my sunlight it's gonna get converted
into an inactive form of vitamin D then
it becomes activated and it gives you
energy you're excited right and then of
course it finally gets broken down and
passed out but there's a lot of steps
that biochemistry for that to happen and
the other source provide them in to use
dietary and so depending on what the
mutation is it could be a mutation in
how your body breaks down vitamin D so
if your body's breaking down vitamin D
faster than its supposed to because of a
mutation you're gonna have low vitamin D
so all of a sudden giving you vitamin D
pills might not be effective because
your body's is gonna keep breaking down
really fast but if you have a problem in
creating the inactive form of vitamin D
from cholesterol that could be a very
different solution or a very different
prescription and doctor might give and
so all of a sudden two or three people
with a vitamin D deficiency have two
very two or three very distinct types of
treatment that can be scribed to them
once we know what the snips are and so
as you go through these these can kind
of tell you exactly what it is about you
yourself that's unique and how to be
more aware of and be more
health-conscious and so that's kind of
the great thing here so let's go onto
the bioinformatics techniques so this is
where I want to get a little more
technical but I want to hit a lot of
these things so this is going to be four
of your developers and math sequence
guys so I'm going to talk a little bit
about predictive analysis a little bit
about sequence alignment and clustering
and mapping all right so
first thing remember where we talk about
the central dogma because proteins are
like the workers they're enzymes they're
the ones that do all these little
mechanics and stuff like that right and
so proteins are just this long chain of
amino acids now yes get that just don't
here and so what happens is you have
this long chain you've seen these blocks
puzzle blocks you fold them off you
squares you make a nice little box there
at the end
enzymes are a lot like that they're not
just you know this long chain that sits
there they fold up to form a very
specific shape that has a very specific
task of purpose and if you've ever
played with one of these but you know
puzzles you realize that any given um
pointer given our pivot point you can
you know point in all sorts of different
shapes and configurations and so there's
only one correct solution right but
there's hundreds of combinations you can
try so as we take an enzyme we have no
clue what it actually does right we just
have the sequence there's a lot of
different laser try and fold this up to
predict when it's going to do and so
this is kind of like a predicting where
there's gonna be a lot of localized
traps where we've run out of moves to
try and fold this thing up and so is
that a functional shape or not or is the
functional shape over there whatever
it's the actual real shape is the ideal
one we're looking for but again it's all
predictive analysis so it's kind of like
a thinking jump if you've ever remember
these games from the 80s so that one's a
really fun one and there's a lot of
exercises and a lot of studies and kind
of software out there playing with this
stuff right now
so moving on the sequence alignment now
this is back when we are now looking
more back at the gene sets right home
and specifically this is a amino acid
sequence so we've kind of shifted from
the DNA back to amino acids here and
what we're looking for maybe is we're
comparing three different specimens here
so maybe we're looking at a couple
variations of rats or mice or other
things that might be having problems
with mix linked leukemia or something
like that and we want to figure out how
to solve this to you know take on a
cancer for children at Children's
Hospital so from our sample specimen we
realized that hey this is the amino acid
sequence
it's really important for us we have
glycine valine spar tape prolene right
and we're going to try and find that
within you know the expressed sequences
and you notice nothing is actually
perfectly paired or lined up and so this
is more of a local alignment and so you
can see how the glycine's lineup then
you have alanine is very similar to
valine so that gets a nice light blue
color glycine is kind of close and then
threonine is just too far out so it's
scoring red same thing kind of right
there where you have your glycine versus
your aspartate and glutamate acids and
so we kind of use scoring matrices you
know to try and predict this and of
course you have penalties for gaps in
the sequence or you know other things
like that so give you an example of what
a scoring matrices might look like is
this is for asparagine and and so you
can see that for n it's going to get its
own score 1.0 because you match it
perfectly now you might have some other
things like you have a sparging kind of
okay cysteine it gets a really good
score because they're pretty similar and
how they function as an amino acid
phenylalanine and all of those get
really low scores and so you're gonna
create the matrices and it's a scoring
matrices for every amino acid and even
then you might have various scores for
different amino acids depending on where
they are in a sequence and what they're
next to and so it can be really
complicated really fast and so here's an
example of several multi sequence
alignments cluster all Omega which is
pretty popular callaghan is nice it uses
fast Fourier transform or math uses fast
Fourier transforms or callaghan uses
more of a Riemann sums and things like
that and so and then tea/coffee uses
hyman distances and so you know I don't
want to go into the you know
mathematical techniques of how all of
those work just would be here for a few
hours but this gives you a place to go
where you can keep kind of researching
and looking up more now if we want to do
whole sequence alignment this one's a
little different and this one's a lot
more fun but you can kind of see if
we're gonna take a lot of the same
approaches and then of course you still
have penalties for gaps but you know
spark tape and glue to make a glutamate
all kind of line up there it's very
similar and so the fun thing with
sequence alignment versus local
searching though is you're gonna keep
zooming out the zooming out zooming out
you'll get to a point where you're gonna
have chromosomes comparing where you can
watch gene sets are cassettes shifting
all over from species to species and so
if you can imagine the complexity of
these algorithms failed and not only do
local alignment than they ll jump out
and realize hey this section jump from
here all the way to that chromosome back
and forth that can be pretty strong
software and so we're still all working
on that and a lot of thats still done
visually so here's some great different
examples of local sequence alignment
kind of below that goes a lot larger so
you have blast razor and Anglia now
Anglia is really cool because it uses
kind of quantum and eigenvalue stuff so
that one's really fun as well so the
last one I wanted to talk to you about
is clustering algorithms now this I love
these things
so for clustering algorithms ignore all
the circles right now just kind of look
at the black nodes and dots now you can
use clustering for almost anything
take Twitter for instance you have so
many different followers and so many
different people are following you right
and you know you're so you're gonna
start to create a network because you're
gonna see who's following them and who
else are they following or you could
take you know cell associations or you
can look at my metabolism similar
metabolism processes among different
patients and things like that so there's
a lot of different ways you can start to
define cluster Maps and things like that
so the idea is where are your groups you
know what is going on in there and so
Markov clustering is kind of a way to do
fast very scalable but unsupervised
clustering of figuring out what's going
on then so you know you might have
clusters there and there and the
important thing with clusters safe it
you're using looking at Twitter becomes
if you wanted to put a message out there
you know what message who do you want to
contact and what clusters which ones are
you gonna have traction in right or
you're looking at you know medical
science you know where are your
different volumes of patients you know
if you're trying to develop drugs or
other things like
that pharmacy extra pharmacy why group
acts group why and so Markov clustering
this is what we're gonna have fun with a
little bit of math um you're not math
okay if you're it's 8:30 in the morning
and probably after so many parties not
moving right so Markov mustard
clustering is gonna do so through
expansion row normalization and they're
gonna keep repeating over and over so
each given element is going to be a
single note so if you have a hundred
nodes you're gonna have a hundred by
hundred matrix and if you have a
thousand node you're gonna have a
thousand by a thousand matrix so if you
realize that for a second each one of
those is going to be a double operation
so a double multiplied by a double and
so for any given square of a matrix
you're actually looking at about n to
the 3 multiplication operations on
doubles per iteration and then of course
when you normalize you're dividing and
you know squared and cubed number of
times per iteration and you keep
repeating this process over and over so
this is massively computationally
intensive so I do a lot of it on my
laptop cuz I have a really strong GPU
and GPUs are great at matrix operations
so um where let's say Amazon's web
service AWS as a whole GPU processing
crop so it's great for these where when
you want to do sequence alignment that
could be something more like a Oracle or
system cloud or even a Google cloud so
what this actually looks like so here's
a cluster and as we kind of walk and you
can kind of see how all the connections
are there so as we go through expansion
you can see how we're losing some things
and we're strengthening different
connections between these things and as
you continue to go through a repetition
of this algorithm you can see how
everything starts to collapse until you
get all the way down to your individual
clusters and that's when you actually
hit when you complete the algorithm and
so Markov clustering can be incredibly
powerful and a lot of fun there's a
bunch of other clustering algorithms out
I just thought it showed you about
hidden Markov model and Markov modeling
there's high dimensional clustering
which is also another really
mathematically and computation to do
quantum or eigenvalue stuff that can be
really interesting because again that is
a lot of matrices operations and that's
spectral so you can kind of find their
information there so there's a lot out
there that we can do with this so the
idea now becomes you want to do all of
this for your pharmaceutical company
maybe you're looking for the next
biotech breakthroughs as far as a gene
splicing gene editing maybe custom
maybes things like that right and so
you're looking for all these different
solutions where you want to sequence a
line cluster group and repeat and so
you're gonna have possibly a modern
environment you're going to be running a
GPU cloud for a different clustering and
grouping things you're gonna be having a
natural logic fuzzy logic clouds we
might have a whole cloud for your
customer interface to be able to get in
or your management interface and so this
is where I'm gonna you know quickly
shift over to the monitoring side and so
most companies have been - this is kind
of what their modern IT environment
looks like it's giant less right so
you've got like Java clouds red-hot
clouds servers and you just keep
attaching component after component you
know for an IT guy to keep up with this
you know how many different monitoring
solutions do you have for all of that
ooh right just a lot and so what happens
is you really want a great monitoring
solution this is where I'll give a
shout-out to my current company xenos
but if you can we're what Zino's tries
to do really is collapse like those 50
60 70 tools all the way down to one tool
that your IT guys can do and there's a
lot of other tools out there find the
right one for your company that fits the
idea is when you're at downtime in any
part of your system or environment
you're losing critical data you're going
to be losing revenue revenue on that you
don't have the right tools you have very
limited visibility especially if each
tool is only focused on one thing right
you can't see how they're all
interconnected
and so if you have a really good
monitoring solution in place then you're
preventing your data loss as you're
mitigating downtime because you can
predict it ahead of time then you're
getting into and visibility so that is
very important for your scalability
issues but other than that yep so do you
want to switch back over to demo I gotta
hand it back over to that and then I'll
switch this back to you okay so we'll
run through real quickly like I said
thank you Jeff so that's the black box
right and there's a lot in it so what we
want to do is assemble around that black
box an infrastructure that can scale and
and so what we did here was we built an
application we used Oracle storage cloud
and we also used Oracle database as a
service and we use Oracle infrastructure
now the Oracle cloud infrastructure
inside of that infrastructure we stood
up kubernetes managed cluster where we
had a master and one node and each node
had three pods
okay those pods each ran a docker
container and we used since this was a
Python framework Jeff wrote the original
Python code we built the framework Eric
Espinosa built a framework with Python
celery and that allows us to run code at
scale so really if you look at the
organization of this model we start with
our singular micro service and that's
basically search the genome for this
pattern and that's Python celery can run
this we have eight celery nodes per pod
per docker container per pod around that
we've assembled a docker container
and then those go into the pods and then
these are the kubernetes nodes and of
course it's all managed by the master
cluster what is python celery is just a
distributed task queue that allows you
it's a production ready task queue to
allow you to run Python code its scale
docker and I'll just run through this
real quick so docker is the most popular
lightweight containerization and what
kubernetes does is to Jeff's point as
you you know as you it's it's
orchestration in the cloud so we can
take the same code and we can deploy it
onto Google's cloud AWS Azure or
Oracle's cloud infrastructure okay and
also announced yesterday was the Oracle
container engine so a lot of what we
stood up is available as a turnkey
service and in addition to the container
engine they give you a place to register
your docker containers a private
registry which is extremely important
you want to put that in public so just
jump into the solution real quick and we
don't have a lot of time so basically
there's some this is the app we built
and there's basically some maintenance
that we can do you know one is to
maintain the phenotypes so asparagus
odor detection we'll call it that and
then the other thing is these patterns
that we were talking about so here's an
example of a snippet file and this is
the pattern that Jeff was talking about
everything that occurs before the thing
we're interested in and this is
everything that occurs after the thing
we're interested in okay so what we do
is we take a customer and let's take
this guy Mike Barnes and basically okay
so we can actually upload his genome
here or we can have that scripted of
course
and then we go once that's uploaded we
can execute various orders against it so
if I want to search for asparagus odor
smell I simply add a new one submit that
and I've already submitted it so when
it's done I get this nice report back at
Eric built for us
what is your likelihood yes you're 75%
able to smell it strongly and here's
what everybody else compares as it
relates to you so and and some
background information but that's the
POC let me show you a little bit of the
code and the Internet's not working too
great so we won't log in but here's the
Python file that actually searches the
chromosome the file format is FASTA the
organization of this is basically this
is a Python factory framework and the
key things that are interesting here are
the chromosome this is the meat of it
this is what we build a micro-service
around
celery this just sets up a celery
instance that we can scale out and then
this is the search where we are
basically querying the Oracle database
and handling the request pulling the
files off the Oracle cloud and then
sending the data back to the database to
be reported on and let me so that's it
let's go what you want
okay that's it all right
Smike work a sorry about that well hey
guys my name is John Singleton I'm a
co-founder and CEO watchful dot IO and
we're working with viscosity for scaling
up this solution that's Jerry mentioned
it's extremely compute-intensive to do
to traverse genome these are extremely
large files there can be tens hundreds
of thousands of patterns that you're
going to be searching for at any given
time a traditional regular expression
implementations will start falling apart
at that scale if you're trying to if you
think about looking over three billion
base pairs ten thousand different
patterns of varying complexity you're
looking at you know basically ten
thousand times three billion base pairs
the numbers start getting very large
very quickly so what we do at watchful
is we're an easy to use massively
scalable real time event processor that
makes building efficient fast and
resilient data pipelines and leverage
distributed pattern matching very easy
just using H api's and we'll kind of go
through what we'll do is do an overview
of what the stack looks like a little
bit about the optimizations underneath
the hood that allow us to do what we do
and then a little bit about the scaling
I'll be honest yesterday we're going
over what we're gonna be talking about
and say hey talk about all the scaling
well great that's thing I know at least
about so I definitely a lent on my
co-founder and builder of kind of all
the fancy wizardry behind it some rely
on some notes ok yeah let's go I'll go
through pretty quickly we only have a
couple minutes but effectively we can
treat data just a stream for us this
would be our FAFSA file or a chromosome
file that's just coming in as meta
around it as a user-defined JSON blob
and the actual content in the string
it's gonna normalize that data on ingest
from there we enter the watchful stack
filters are just gonna be grammar
restricted regular expressions no
no back no backtracking offensively
those will hit into the watchful core
which is built on closure then going
into the watchful engine which is built
on rust uses a large number of hardware
level optimizations to basically run a
state machine at at the CPU level that's
gonna hit a fast caching layer mem
sequel and then on disk for Postgres and
then hitting us out on a closure web
tier to pull everything out be a restful
api and then here's just some returned
options basically draining those filter
dot that those filtered events are in
this case Jess snips genetic matches
into a database application micro
service some complex event processor
like a spark downstream a little bit
about the stack so we're built on a
Kafka backbone we'll talk about that a
little bit here in a second we written
docker orchestrating kubernetes yeah
running at a time here but the big news
here is where you use an optimized DFA
or deterministic finite automata pattern
matching engine it's ultra high
throughput looks like these little
things didn't come through up to 160
gigabytes qubits per second you can
search from millions hundreds of
thousands whatever patterns
simultaneously in a highly optimized
graph structure across every event in
this case every piece of genetic code
it's going to be a 1.5 to X minimum
speed increase against the best possible
regular expression implementations so
yeah we go into a little bit about how
we scale basically long story short the
two big things that were worried about
is how do we minimize the overall eye
impact component failures and maximize
the total throughput in the system the
first big problem component failures a
lot of that has to do with how the data
is going to be moving from application
application all of our internal
messaging is use elÃ©ctricas Kafka it's
a built by LinkedIn to do to be their
data transport solution they use
in-memory append-only logs to achieve
high-throughput messaging passing
between those applications
the topics are just collections of logs
that an application can publish or
subscribe to the more logs back in the
topic more parallelization you're able
to achieve and therefore the more data
you're able to push the system but the
trade-off is if the order must be
preserved within that topic only a
single log can be used on our case we
use a single strictly ordered topic to
pass reg X's to engines in a cluster and
achieve high throughput topics to move
input data through the system very
quickly kind of ran out of time here but
yeah it should be good it we also use
right ax right ahead logs via Postgres
basically to get all the transactions
and amount of a database very quickly
and also consists in hashing to allow
multiple engines if one fails we can
have two three however many engines
might be picking up the slack to
recreate the state of the database but
we can talk about more later all right
thanks guys sorry we ran over it was a
lot to cover and definitely what
watchful does is help us scale out and
it's not just for genetic patterns its
banking patterns fraud that sort of
thing so thanks everyone here for
questions</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>