<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>CON8368 A Few Hidden Treasures in Java 8 | Coder Coacher - Coaching Coders</title><meta content="CON8368 A Few Hidden Treasures in Java 8 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Developers/">Oracle Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>CON8368 A Few Hidden Treasures in Java 8</b></h2><h5 class="post__date">2015-12-08</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/e_CRhnIpzEs" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">alright let's get started welcome to the
session on a few hidden treasures in
Java 8 my name is Venkat Subramanyam
we're going to talk about a few things
that I've found to be fairly interesting
in Java and we'll look at some of these
features take a look at how we can use
it so one of the things that really got
excited me about Java 8 is some of the
elegance it provides first of all the
code ends up being a lot more concise
not only is the code concise we also be
able to express our intent very clearly
with that comes along ability to write
code with fewer number of lines of code
but fewer mutable variables as a result
also code that seems to have a lot less
errors or less error-prone in general so
I want to look at a few different things
we can do to get our life's easy or
easier in terms of getting some common
tasks completed using Java 8 some of the
things that I've run into that are
pretty interesting and useful let's take
a look at one example first of all and I
can bet you that everybody in this room
has done this at some point in time or
another let's say for a minute I have a
current directory here let's start with
the current directory a new file I'm
going to provide the location let's say
users I'm going to just simply specify
my directory here called adder and I
want to be able to get some content out
of this particular directory well
obviously this is going to be a Java I
oh so I'm going to bring that in but i'm
really interested let's say to list
let's say print the files so we're said
print the file names a comma separated
so that's basically what we are asked to
do used to print the file names comma
separated well how do we go about
printing that well in the traditional
approach of course we would use a for
loop to do this so we could start
something along the lines of for
instance we can say file let's say
children equals 2 and then we could say
in this case current directory and then
list files so this gives us all the
children well it could be potentially
empty so i'm going to say children is
not equal to null but then of course i
would start out by saying a for loop
well in this case i don't want to really
write nasty loops here so we could
simply say something like file child
coming from children and then of course
we could simply output the child
name and get the value out of it well as
you can see here i don't use any slides
i'm just writing code but if you're
interested you can download these
examples from my website i'll post this
right after the stock so you can
download it just about anytime you want
to so i'm going to get look through and
print this information and sure enough
in this case i'm going to loop through
all the values in this directory and
have that printed out well how do I go
about printing these values after all
well I've got all the list files and
once I get the children are all the
files from their directory I want to get
through each of the children not equal
to null and get the values and print out
well we could go through this and try to
get the values out let's see what it's
telling us well some reason is not
printing anybody since the error here so
I want the files and we make sure there
are files in this directory that would
be nice to have so let's go to the users
and then of course the vanca directory
oh of course I miss spelt it that's why
that's nice so I didn't give us an error
but it was now great so you can see in
this case I got the two files well
unfortunately though you can see that
the files really wear printed but not
comma-separated how do we really make it
comma separated well that shouldn't be
really that hard is it so we can simply
put a comma right there well but it's on
two different lines not in the same line
that's kind of silly let's fix that
let's now do this that's awesome oh but
wait a minute there's a stupid comma in
the very end anybody has seen this
problem before every one of us right and
how do you feel when that happens right
and then you think about this for a
minute and you say I got a great idea I
can create the string I can strip the
comma out of it well after while we
realize the string is immutable then we
reach out for a string builder and that
only seems to drag us in deeper after
thinking deeply for a few minutes you
realize there is actually a very simple
solution and dawn it how do you do not
think about it all you have to do really
is to simply change this to int i equal
to 0 and then I less than right and then
of course children dot length is it
length or size or well ok length and
then I plus plus oh wait a minute is it
less than or less than or equal to and
all get done later we can simply come
back here and say print
and then of course in this case will say
children and we can use a square bracket
I obviously in this case to print it to
get the value out of it so we can say
that but what about the value after all
when we run this of course that's nasty
we want the name of course get name well
that's still nasty where's the comma
then then we realize we can simply
output in this case the comma well but I
don't want the comma sitting in the end
again back to the squire one we realize
this can be done easily if I is not
equal to and then you say what is the
children dot right and then you realize
is this really happening to you right so
so that's an example of how such a
really simple task can become incredibly
difficult let's try to do this one more
time let's try this one more time we're
going to say in this case bring in a few
tools let's bring in in this case a
stream of course so we are interested in
a stream now if you ever have a
collection like a list you can call a
stream on it and get a stream out of it
but we don't have a list we have an
array on our hand so we got to say
stream dart off and then I'm going to
say children so this converts an array
into a stream by using the off function
you can get it now that I have a stream
on my hand I can perform a map operation
I can say file get name and this easily
gets us the name of every single file
and the last step here of course is to
collect this and once I collected I can
simply go ahead and print it because
that's what I really want to do so let's
go ahead and say in this case I'm going
to go ahead and call a collect function
but the collect I'm really interested in
is going to be a collect into a string
so i'm going to say static at this point
and say collectors and bring in the
collectors function into the mix and so
in this case I'm going to say joining
and then of course I'm going to just put
a comma in front of it and you can see
that it prints out so the day I learned
about joining I cried that night this is
the way programming for be right so it's
amazing how you can actually very simply
program by writing code like this so you
don't have to really go through as much
trouble when you have want to do some
simple operations like this
this can be extremely convenient to use
as you can see so we got the collection
of data did the mapping whatever we want
to do mapping but eventually we call
adjoining so this could be your
classpath you want to join together
whatever that could be and it's smart
enough to patch those values with the
joining with that of course including in
the end or either corners so that
becomes a very easy solution to use so
things like off to really take an array
to a stream and then of course you have
irregular filter and map operations and
collect is a reduced operation in this
case we ask you to collect it into a
string using the joining operation and
print it out or get the value out of it
so that's exactly what we did here so
that gives us an idea about how we can
use some of these operations we learnt
about off and we learned about the
joining as well but what about
interfaces now interfaces are a little
special in the case of Java so let's
take a look at what interfaces can be in
Java which is a little weird if you
think about it but it's pretty powerful
now step back the job for a minute think
about what they used to do in Java well
if you have an array and you want a
utility function on array where would
you go to you'll go to arrays utility
class remember if you had a collection
and you wanted a utility where would you
go collections well that's exactly what
they did when they start a developing
Java 8 I remember the first few months
into Java 8 they had all these things
that end with the s in the very end and
very soon they came to sense and
realized now they're going to explode
the API with all these classes ending
with the S compared to these interfaces
and that's not going to be very wieldy
at all and then they realized wait a
minute why are we doing this if we are
working with a certain interface and we
want the method a utility method related
to that interface why not simply stick
that into the interface itself so static
methods can be part of interfaces now so
for example let's say I have an
interface called util just for an
example here and within this I'm going
to write a static method let's say
number of processors are our number of
course let's say and I'm going to write
a convenience utility method right here
and in this case of course I can
runtime dot let's say a get runtime and
then available processors and this is
going to return to us the number of
cores are at least the 18 things and so
in this case I can output util dot
number of course for example and I can
call that particular method and simply
use it so they shows to us that we can
actually reach in and call this
particular method what did I do wrong
here so runtime Dodd get is at runtime
get runtime whatever that number is I
know exactly how to fix this I'll just
say eight that's enough for net for now
okay so that's an example of how we can
just call that method right here so that
gives you an idea about how to call
static methods and use it which which is
really a number he can change it to even
in an even bigger machine right there
it's easy to work with that so that's an
example of how you can call static
methods vary directly as you can see so
this can be very convenient because
interfaces now can have all these static
methods and you can readily reach into
it and use it so this also is a bit of a
challenge at the same time because what
you're used to in the past is no longer
the case now when you start working with
interfaces all of a sudden interfaces
now can have static methods and you're
like wait a minute the interface it was
familiar with now suddenly has a few new
things which means you got to take the
time to learn a few things that may not
have been there before in the previous
versions of jdk that's a little bit of a
challenge but but i'm sure that's a lot
of fun to work with once we get
comfortable knowing where to look for
things so I talked about the static
methods that are available interfaces
you want to see this all over now almost
every corner you turn you can have
static methods and interfaces that that
you can look at well okay we looked at
one example here but I want to talk
about the next one thing that's pretty
interesting which are called the default
methods now one of the problems is you
know remember what interfaces mean in
Java interfaces establish a contract and
if once you publish an interface even if
you think about modifying an interface
you immediately get death threats over
email right because people don't like
you if you want to modify interfaces so
on one hand interfaces are set on stall
once you release that
on the other hand every one of us can
agree that we get smarter every day and
we are telling the jdk team that what
they did 20 years ago they are stuck to
it they cannot change it right and
that's really unfair to say we cannot
evolve so they were really looking
forward to how can we evolve interfaces
how can we change it and so there was a
nice little loophole into it which are
called the default methods now what is a
default method a default method is a
method you can put into an interface and
we're going to talk about some rules
related to default methods but let's
start with a little example let's say I
have an interface called a fly interface
and in this case I'm going to write a
method here let's say in this in this
method is going to be a void will call
it as take off now clearly this is an
interface and I'm going to put a little
okay here just to show that the compiler
is happy with it but of course if I come
over here and if i were to implement
this method I'm going to say fly colon
colon let's say take off notice a right
of the bad java is going to complain to
me saying what are you trying to do
you're trying to implement a method in
interface so uncle java 7 here is my
definition of an interface an interface
is something that says a lot about what
it'll do but it never does anything kind
of like my boss right so in other words
this is just sitting there doing nothing
with a few descriptions as these are
things that could be done well that all
changes with Java 8 fortunately you can
come in and you can put a little method
right here called default for example
and you can see the compiler is quite
happy with it so you can start defining
default methods into into interfaces
very readily and I'm going to put a few
more things here so I gotta take off
I've got a little method called the turn
and I have a method here called a cruise
and finally have a method called land
over here so clearly you can see I have
four methods I have implemented a turn
method a take-off method a cruise method
and finally a land method and the
compiler is quite happy with all those
four but let's understand what happens
when you bring in default methods into
interfaces so there are four rules of so
for roots of default methods in
java but before we talk about the four
rules let's understand a few differences
when you can when you start putting
implementations and interfaces the first
question people often ask is oh gosh if
you can put implementation interfaces
how is then this different from abstract
based classes well abstract based
classes can have fields abstract based
classes can have implementation or state
in it well interfaces cannot have state
interfaces can only contain method
implementation so if I want to deal with
the state how do I do it there's a very
little nice trick for you to deal with
this so for example let's say I want to
know the altitude of this particular fly
or a flight well how would I do this
obviously I wouldn't put altitude here
as integer or whatever that is that
wouldn't make any sense because you
cannot have a field or a state in an
interface but don't worry all you have
to do is simply say get altitude and
that becomes an abstract method in the
interface and then of course with then
take off you can say take off and you
can report whatever the altitude is and
you can get the altitude right they're
readily by calling the guilt at altitude
method where would the get altitude come
from obviously that will come from the
implement tour of the interface so
interfaces can have default methods but
anytime they need a state like a factory
method they push the state down to the
derived class to hold the state so they
are up here doing their stuff and then
leaned down to get the state and do
their stuff again that's a very nice way
to really work through it but coming
back to default methods right here we
got four default methods given the
example there are four rules of default
methods let's talk about the first rule
rule number one the first rule is any
default method is available to you when
you extend our implement so in other
words if you implement an interface or
external interface all the default
methods are available to you they are
within your reach which is a nice thing
they're not just stuck over there up in
the top
let's look at an example of that I'm
gonna say in this case interface fast
fly and implements in this case a fly
interface I don't have anything in the
interface at this time but my fast
flight interface actually has all those
four methods it contains the method take
off turn cruise and land because those
methods are obtained through the
inheritance right off the bat we don't
have to worry about it let's actually
see if this is true so I'm going to
create a class called let's call this as
a seaplane class and it implements in
this case the fast fly so we have an
implements fast fly and I don't have
anything in the sea plane right there as
you can see but I'm going to come down
here and call a method and the method
I'm going to call is called a use method
on the sample so new sample let's say
new sample dart use and let's go ahead
and write this use method so i'm going
to say in the use method i'm going to
call the seaplane so let's say seaplane
and i'll create a seaplane object and in
this case equal to nu seaplane and i
will simply say sea plane take off and
you can see right off the bat i can
actually call that method and get it
into it implements so you can see that i
can bring that in readily and bring that
into the interface as much as I want to
so back here implements a misspell it
implements so what did i do or extends
of course this is an interfacer ended
right i have they kept it in implements
would be consistent but nevermind ok so
and that's basically it's never your
fault right i love this life so you
basically uh you know extend this and
you can say hey take off and where does
the key take off from come from it comes
through the inheritance hierarchy so
let's try this one more time I'm gonna
call the turn method and I'm going to
call the cruise method and finally the
land method you can see all of those
four methods are here so we pretty much
used rule number one well then comes
along rule number two rule number two
says you may override any of the default
method so if there is a default method
you
override the default method absolutely
nothing stops you from doing it you can
do that in the class you can do that in
the interface it's up to you entirely so
let's go to the interface right here I'm
gonna take this method called the
take-off method and I'm going to bring
in the takeoff method and I'm going to
change it to a fast fly right here so I
overload the method call take off in my
fast fly so as a result you can see when
i call the take-off on the sea plane
it's no longer going to go to the Flies
takeoff method it's going to go to the
fast flight takeoff method as you can
see that's rule number two so rule
number one you got everything you have
rule number two you can override what
you want to and then comes along
probably the most important rule rule
number three but before I talk about
rule number three let me quickly mention
one problem you have when it comes to
bringing multiple methods through
hierarchy this is a problem of multiple
inheritance I was giving this talk you
know a quiet quite a while ago and while
i was giving the stock one lady in the
audience she did something really
wonderful she didn't say a word and she
just took her hands and she just did
this in front of me for a couple of
times and then she put it down and like
this I'm like oh that's awesome she just
showed me a diamond this is called a
diamond problem and the diamond problem
is a very famous problem every see you
know you know how you know it's a
programmer who has programmed in C++ as
them to slightly remove their shirt
you'll see a skull of the shape of
diamond on their back right that's how
you know it's a diamond problem so
everybody who's done programming in c
plus have seen this diamond problem and
the problem is when you have multiple
based classes and those based classes
have a common base class well it ends up
being this way and you got to really
bring it down into a diamond and that's
really a pain well but the pain actually
comes from not the fact that you have
multiple inheritance but the pain
actually comes from the fact that you
have multiple inheritance of state well
interfaces don't have stayed so you
don't have a diamond problem on your
hand at all well then that brings the
question what if I do have multiple
implementations what do I do rule number
three says any men
third in the class hierarchy hierarchy
takes precedence over any default method
so in other words do you have a method
in your class hierarchy does your class
you are based class you are grandfather
class you are great grandfather class
all the way up to object does that have
a method that method takes precedence
over any default method so here's the
easy way to think about it your hashcode
method will never ever come from an
interface because your object has hash
code it's going to pull up objects hash
code or equals from the object if you
overwrite in your class it takes your
method in your class otherwise it keeps
walking the hierarchy of your classes
and only when you exhaust your class
hierarchy it says I couldn't find the
method in the class hierarchy now I'm
gonna look in the interfaces that's the
last thing it's going to do so let's
look at this example right here to see
how this is going to work so I'm going
to create a class called vehicle and the
vehicle has a method public void land
and in this case I'm going to simply out
port I'm gonna say vehicle colon colon
land right here so you can see that I
have a method called land in my class
called vehicle and I'm going to come
down here and say extends vehicle so
this simply says that my seaplane is
driving vehicle which in turn derives
from object and then of course I'm
implementing fast fly which again
extends fly however the rule number
three says that the land function will
no longer come from the interface the
land method will come from the vehicle
class because your class hierarchy rules
so if i run this little code you can see
in this case that the land method came
from the vehicle class and no longer did
it come from the fly or the fast fly
anymore well that leaves us the last
rule which is a very important rule to
think about fourth rule and that says
what if there is no method in any of
your classes any of your classes in the
hierarchy
so that's the first rule right there's
no method in any of the classes in your
hierarchy but there are two interfaces
with default methods in your hierarchy
right so in other words there are two
interfaces in your hierarchy and they
both have exactly the same method so
there are two interfaces with a default
method of same name of course right so
same name and signature so in other
words uh what do you do if there are two
methods in your hierarchy with exactly
the same method Java handles this in a
very very nice way they say it's your
problem so it's very simple as that so
they say well sorry you go deal with it
so this is something you have to solve
they're not going to help you with this
so in this case let's take a look at an
example here I'm going to create yet
another interface right now so this
interface is called a sale interface and
I have a default boy cruise in here and
the cruise method simply says sale colon
colon let's say a cruise so you can
clearly see there are two interfaces
with exactly the same method called
crews and the same name I haven't
brought the sale in here so there's no
problem yet everything seems to be fine
but I then go to the seaplane class
right here and I tell the seaplane hey
seaplane go ahead and implement the sale
as well now you can see you get a
compilation error at this point because
you are bringing in another interface
into the mix and that interface of
course is going to be the sale interface
and what does it say it says classy
playing inherits unrelated defaults for
crews from fly and sale at the same time
so they gave you an error of ambiguity
right there because you brought in two
interfaces into the mix and the methods
are colliding so this becomes your
problem to resolve now so what are you
going to do you have to resolve this by
so the way you solve rule number four is
by bringing in rule number three right
because rule number three says a
time you have a method in your class
hierarchy that rules so Rule three is
often a solution for rule number four so
what am I going to do I'm going to
simply come back here and say I have a
void cruise function and the cruise
function simply says seaplane cruise and
you can see in this case we are able to
resolve that and use the seaplanes
cruise function but obviously the point
really here is but what about the
methods and the default we still want to
use them how do we get to that well
thankfully we can so we can say for
example if let's say altitude as an
example is greater than zero maybe and
then else I can then say in this case
well I can say fast fly dart super dark
cruise and I can call the method and
then else I could probably say sale dart
super dot crews and I can call the
method like that and you can see that in
this case the seaplanes cruise turned
around and called the fast fly screws
you may wonder why in the world I said
fast flight out super dark cruise rather
than saying fast flight crews and the
reason is of course you know that cruise
maybe a static method in the fast fly
you don't want a static method you want
a default method now they could have
called it default over here but if they
did that would make sense so they
couldn't do it so they had to call it
super so it basically says go ahead and
call it through the hierarchy and call
it so this is and also by default they
could have said it'll be a default
method until unless you say static but
they wanted to be consistent with the
way we call static methods in the past
meaning if you just call without any
reference in front of it well that's
going to be a you know class name or
interface name so that's intuitive it's
a static method so we say super to say
it's a default method and not a static
method so that's why you have to put the
word super here rather than just calling
it on the fast flight directly so that
shows you how we can use default methods
very nicely and so once again you're
going to start seeing these default
methods almost every corner you turn
you're going to see these quite often in
the code and they can be pretty powerful
when used properly that can be a nice
design tool as well like everything else
we have to be careful how we use the
things but once we use it wisely this
can be quite beneficial for what we want
to do so that gives you an idea about
what default methods can do let's go a
step further and see how we can put
these to good use now to do something a
little bit better than what we've been
doing so far so I'm going to start out
with a little example of a create person
so this is going to create a bunch of
people you can see it got a few people
like Sarah Bob Paula Paul jack jack jill
and i want to work with these people so
i'm going to say let's just person will
call it people equals create people and
i want to sort these people so i'm going
to say collections dart sword people
anybody who has seen discord before we
all have right so what do you think this
is great this is bad this is pure evil
which one you do you think this is pure
evil absolutely right why is this pure
evil because it changes the input given
to the function right changing an input
given to a function should be crime
punishable under law right nobody should
ever do it of course you may say if it's
so bad why do they do it well I know
exactly why they did it they were young
they needed the money right but now we
know this is not a good thing to do
because it's going to really mutate the
value given not a very good thing to do
yes it gives us better performance but
if you really wanted performance and you
don't care about correctness and
morality you should be programming in
C++ right so the point really is we want
to really be really doing the right
things as well so how do we go about
doing this properly well notice what I'm
going to do here I'm going to go back
here and say public static will say
print sorted and this takes a list of
person will call it people but I'm going
to pass a comparator over here as a
parameter comparator and this is going
to be a comparator on a person will call
it comparator now what am I going to do
with this they'll come in a minute we'll
get to that in a second let's go ahead
and bring in the comparator right now so
i'm going to say java dot util dark
compare a tour and I'm going to bring in
two things into the mix here I brought
in the comparator but I'm also going to
say stat
on the comparator so competitor actually
not only is an interface it's got some
interesting methods to it we'll talk
about this in a second so now that I
brought in this code so far let's see
what this code is going to do for us i'm
going to say right now I got the value
on my hand so people dart stream so I'm
bringing in the stream API i'm going to
call sorted on it and pass the
comparator to it and then for each i'm
going to simply say system dot out and
i'm going to just print each of the
person after sorting it so you can see
how easy it is to write this code to say
given this collection of people sort
them based on the comparator given and
then once you do just print each one of
them well let's go ahead and exercise
this and see how we're going to use this
so i'm going to come down here and say a
print sorted right now and i will send
in the people to it but i asked the
question how do i want to sort it well i
want to sort it based on the name of the
people well name of a person is nothing
but a function after all given a person
give me their name that's a function
well I want to compare based on that
function so it's a very easy way to
implemented you simply say comparing and
then you specify person colon colon get
name and look at the way this has been
organized now you simply call the
function called comparing and what is
comparing do the comparing function
simply says I'm going to return a
comparator for you now you know we're
comparing comes from comparing is a
static method in the comparator
interface that returns a competitor to
you so you call the comparator dot
comparing and you get back a comparator
on your hand and you can do the sorting
based on that very easily so you can see
how in this case when we call this
method we are sorting based on the name
even though on my original list of you
new member I had Sarah on the top and a
few jack on the bottom you can see that
Sarah is in the bottom right now because
we sorted based on the name so the
sorting is happening based on the name
in this case but let's say I don't want
to sort on the name I want to really
sort them based on the age
values well that shouldn't be really
hard at all notice I'm just changing the
function to an age right here and as a
result you can see when I run this code
the sorting now happened based on the
age and not based on the name you can
see the very first object printed is
person with h2 and the very last object
is a person with age 72 both of them
happen to be Jack in this case the young
Jack on the top and the under under
elderly jack in the bottom however there
is one small problem in this code when I
ran this bob was extremely unhappy Bob
said this is not fair why is Sarah
before me so there are two answers to
that question first answer is Bob get
over it so that's one way to fix it or
we can say well fair enough if two
people have the same age it's only you
know correct that we do alphabetical
sorting if the ages are actually the
same so we can actually do that fairly
easily as you can see so a second ago
when it ran this little code you can see
that bob was right after Sarah who is 20
years old but I'm going to change this
now to comparing based on the age then
comparing and i'm going to say person
get name and you can see that in this
case it's going to compare based on the
age first but if two people have the
same age it then compares based on the
name this appears like fiction when you
read this but it's actually true as you
can see it actually works so it's very
highly expressive as you can see yes
please yeah you can go to a reasonable
extent as long as you don't you know
loose clarity in the code you can so to
a fairly good extent well keep in mind
as long as can get a healthy comparator
on your hand you can do this so sorry
factored into a modular code that will
return a comparator so the code doesn't
become a nightmare to read and then just
flow through that give a nice name for
the comparator to logically mean what
you want it to be then your code is
still readable and you're able to get
the result out of fed so you can write
your own functions to return that
comparator fairly easily as well so
that's basically what you're doing here
is combined
these things together to produce a nice
result and that becomes very easy to
work with so that is one example of how
you can use the sorting how quickly a
forgot mention you know what comparing
really is it is a static method so it's
a static method that returns a
comparator but you also know what no
word then comparing is what do you think
it is it's a default method right so
it's a default method in the comparator
so we are using in this example both a
static method and a default method and
you can see the default method is quite
charming in this case it quietly came in
and made this work we didn't have to
really call you know silly static
methods over and over this gives a nice
flow through it so if we begin to I have
to say when i first came across static
methods and default methods my first
reaction was gosh this is ugly and then
about an hour later I'm like oh I love
this I've not gone from hate to love in
such a fast time at all after that any
feature but this is something I begin to
really understand and appreciate as well
please right right right so the question
is how do you remove a fields from the
person well you can so I'm going to take
theirs or two different questions one is
I don't want some people if they're not
meeting at putting quality then you
would apply a filter before you come to
sorted so for example i would say i'm
really interested not in all the people
but i only want adults to come in so i
can say given a person i can say person
target age is greater than let's say 18
this is adult based on their age not
their maturity so you can actually ask
in this case and you don't have anybody
younger than that that's one way to do
it the other way of course is you can
say well it's really about filtering
properties once i get to it well that
you have to really you know change the
function you are using here to say
whatever information you want to pull
out of it and i already forgot your
second question Oh serialization you
don't talk about civilization in public
okay so
so so that's basically the way you can
do this all right so all right so we
looked at how we can do sorting already
which is really nice but we can go a
step further than this we can actually
perform a very nice grouping operation I
want you to just think about it I'm not
going to write this code because I don't
want to punish myself here right now but
I want you to think about this code you
got the collection of people and I want
you to collect take these people and I
want you to create a hash map and here's
my requirement for you your hash map
should have keys which are names of the
people and the values must be the list
of people with that name so let's just
go to the mental exercise to think about
how we will do this you first create an
empty hashmap then you take one person
from the collection you take the name
you go to that hash map and say do you
contain this key it says no so you now
create an a-list you add the person to
the list you put this list into the hash
map with the key and the list then you
go to the next should I keep going no
right because you know this pain already
that's called Java programming we have
done this so you're like come on there's
gotta be a better way to do it well
thankfully there is so notice what I'm
going to do now I'm gonna come in here
and say here's a list of people and I'm
going to say output well people dart
stream so we got the stream of people
dark collect and in this case i'm using
a collect function just like we did
before in other examples but what i'm
going to do in the collect here is I'm
going to simply bring in the collectors
that's that I brought in as an import
already so i'm going to say right here
grouping by and i'm going to say in this
case person get name so i want to group
everybody based on their name so you can
see the power of this code so we have
the name as a key value but notice the
values for those keys they are lists of
people so you can see Bob and Bob male
20 but Sarah is a different story I've
got to say
in there in the list the first Sarah who
is 20 years old and the second seer who
is 22 years old so you can see the
collection of people in the list so you
got a map of a string comma list people
on your hand you say okay that's cool
though but I don't want all the people I
really want to get their age values
after all I want the name and a value of
the ages so if I have a value called
Sarah oh how many what are the ages of
all the Sarah in my list I want to know
20 and 22 I don't care about the people
this kind of goes to earlier question as
well I don't want all the properties of
the person i just want only those
properties this is another solution for
that so notice what I'm going to do now
I'm gonna say grouping by comma mapping
so you're grouping and mapping at the
same time and then what am I going to
map it into I'm going to map based on
the person's get age and then I want to
put this into a list value after all so
you can see in this case now we have all
the people given to us and then of
course once we get the people's name I
want only their age values so you can
see Bob 20 whereas Sarah is 20 and 22
and then you can get the values by doing
the mapping very nicely so that gives
you an idea about how you can group and
map at the same time so you can see the
power of expressiveness this is what we
call as declarative programming
declarative programming is where you say
what you want to do not how to do it so
you just issue a command do this and you
walk away and the underlying libraries
take care of things for you in the
imperative style of programming we r 0 /
sleeves and spend the next two days
writing that code and here's what
happens when you take two days to write
that code you it is two days of coding
and three years of debugging right and
that is really a nightmare to deal with
well the code you don't write has the
fewest bugs in it and so I'm all for not
writing code when I don't have to write
code because of fewer code I write the
fewer bugs I have to deal with so this
is nice to just be able to rely upon
this declaration style rather than
having to write all that code all by
ourself so that is about
how we can group these together very
nicely well let's go a little further
now and we look for a few other
beautiful functions we can actually use
so this is one thing that I begin to see
in applying with patterns as well is we
can actually nicely start forming good
good functions together so i'm going to
write a function here called let's call
it as print info and i'm going to take a
value take a message as a parameter and
i'm also going to take a predicate as a
parameter as well and this is going to
be an integer predicate i'll just call
it predicate so I've got a little
function that takes a predicate where
does this come from the predicate scum
from the function package so I'm going
to bring in Java dot util dot function
dot star that's where the predicate is
coming from so all I'm going to do is
output the value plus the message plus
let's just put a little colon and then
plus a predicate dot test on the value
so you can see in this case I'm going to
just print that information out well how
am I going to use it so predicate
integer will call it as ease greater
than 5 equals given a value tell me the
value is greater than 5 so you can see
this particular predicate is telling me
whether the given value is greater than
5 or not so i can now call print info
and pass a value for i can say is
greater than 5 and then i can then pass
a yeast greater than 5 as a predicate to
that particular function very easily so
this time you can see that the output
tells us 4 is greater than 5 is false so
we pass the predicate to this particular
function where the predicate is nothing
but a lambda expression but I can also
now say a predicate integer this time is
even equals and i'm going to say given a
value emaar 2 is equal to 0 well I can
simply say print info for comma ease
even and in this case I can simply say
well let's say is greater than 5 well
now this time I'm going to pass through
it is even and you can see that it tells
me a true because the value is actually
even well but the beauty of this is
I don't have to struggle through to do
more work I can say is greater than 5
and even and in this case e is greater
than 5 and ease even and I can nicely
put them together and obviously that's a
false it says that it's not true I can
also say print info for is in this case
he is greater than five or even and of
course he is greater than five a dot our
is even and we can start combining these
things very effectively with the end
operation or operation negate operation
and all those good things I can put
those together very nicely so this is
the one thing I beginning to use as well
when I want to really pass predicates
two functions but i can start combining
those predicates but my function itself
is pretty simply using one predicate
well i'm just using the decorator
pattern here on the predicate after all
so that becomes very nice and concise
and easy to work with i can do the same
thing with functions as well so let's
look at an example of that so notice
what i'm going to do here i'm going to
change this to a function a rather than
a predicate and this is going to become
an integer integer we'll call it a
function and i'm going to change this to
function dot apply well let's give it a
try one more time this time I'm going to
say here is my function that I created
and the function integer come by integer
says well inc and i'm going to say given
element e return of a plus one now i can
call print info i can pass a 4 comma
incremented and then i can say inc over
here and we can see in this case it says
for incremented well becomes a value of
5 as you can see very nicely well
likewise i can try one more thing i can
say doubled over here well we're doubled
is going to be a function i'm going to
call will call it doubled and in this
case i'm going to return at times too
and notice in this case it is doubling
the value after all so i'm going to pass
doubled it to this and you can see that
it says for doubled is 8 but once again
notice what i can do print info for
or comma incremented and doubled and in
this case I can say comma ink and then
and I can pass this to doubled so I'm
incrementing first and then I'm doubling
so 4 plus 1 is 5 5 times 2 is 10 and you
can see that actually worked just fine
but I can also do the following I can
say doubled and incremented well
obviously in this case I want to double
first so 4 times 2 is going to be 8 and
then once I get the eight I want to add
one to it should be 9 well you could say
you could do this banquette you can say
double the dart well you can but instead
i'm going to say ink compose doubled in
this case and you can see that in this
case i'm actually reversing the order so
notice that here i called and then
whereas here I call the compose so
compose will swap the objects and then
apply that you may look at this and say
gosh why would they want to do that and
the reason is it doesn't disrupt your
flow so if you have a group of functions
but if you want to apply the functions
in reverse order you don't have to
create a garbage temporary variable and
then turn around and call and then on it
you simply keep walking with the end
then and a composer and then I compose
now clearly the method name could have
been better than composed I'm not too
happy with that method name that just my
I just don't relate to it as much but
but I can understand the benefit of that
too nicely say go through it nice flow
that can be very useful so and then
simply combines them in that order
composed combines them in the reverse
order so that's basically what it's
doing there can be pretty powerful
operation to perform so you can see the
output of that right here as incremented
and doubled and of course finally you
can see that incremented and doubled as
well and then of course doubled and
incremented you can see both of those
things working pretty nicely right there
so that's another example of how you can
provide some of these nice combinatorial
operations very nicely well I'll give
you two more examples here that I think
are pretty interesting to you look at
one excuse me one is functions on map
that can be pretty useful to write some
really you know exciting code
especially if you are doing memorization
and things like that this can come in
pretty handy so let's say for a minute I
have a map of integer comma double and
in this case I'm going to say we call
this as Squire root values and in this
i'm going to say new hashmap and here is
my hash map of these values let's just
create it now what am I going to do I'm
gonna call a method so i'm going to say
output square root values dart let's say
compute if absent so rather than calling
the put you can do something like
compute if absent and compute of
absences for common and in this case i'm
going to say sample colon colon square
root so i'm calling this function
computed absent and i passed the key for
but i'm passing a function to it right
after that so let's look at this example
static let's say double and i'm going to
say square root int number and in this
case i'm going to simply output square
root called for let's say number and i'm
going to return from this math dot
square root of the number so now when I
run this code you can see square root
called 44 and it gave us the result of 2
which is the square root of four but
here comes the charm if I were to run
this one more time notice this time
around it's not calling that function
because that value exists in the map
that's why it's called compute if absent
so if it is already present it's not
going to compute it it's going to simply
return the value back to you similarly
there is a compute if present now you
may wonder why you would need a computer
is present and that is to say if it's
already there I want to change it to a
new value in that case they give you a
bite function they give you the key they
give you the old value and then you
return the new value based on the key
and the old value so you can use a
computer present there's also another
function called compute which kind of
brings that together it doesn't matter
whether its present or not it's going to
always call it and then you can compute
based on that so there are a few
variations very well worth spending some
time looking at the map interface to see
what new functions they have added in
Java 8 and
some of them can be pretty concise I've
used this quite a bit in programs and
and the code just becomes extremely
concise all that other if and else
condition we normally put simply just
disappears and code becomes a lot more
concise easy to work with and and the
last thing I want to talk about here is
something that can be quite powerful but
we got to be extremely careful about
which is parallel streams so I'll talk
about this offer a few minutes before I
actually show the example a parallel
stream is a very powerful way to create
a number of computations parallely it
really works on a collection so the
competition the collection can run in
parallel but there are few things we
have to be very careful before we ever
use a payload stream well the first
thing I would say is if you think you
need to use a parallel stream
immediately called for help that's the
very first thing I would recommend go
talk to a person and say I've got these
thoughts in my mind you know I need
counseling so collectively decide
whether you want parallel just don't
turn on parallel arbitrarily the
functions you have in your lambdas they
have to be extremely pure if you're
mutating it can be really troublesome
you got to be very careful about it so
that is something you got to be very
very you know careful the third thing is
your parallel computation has to be
really faster than sequential but that
doesn't mean it will be all the time if
your data is really small or if your
task is really fast you may not get much
performance benefit by going parallel so
you have to evaluate and see if there's
actually benefit to it so I've given you
enough caution about not to do this
until you really really mean to do it so
having said that there are quite a few
interesting things we can do with this
let's look at one example to just get a
feel for what better load stream can do
for us so I'm going to start with the
list of numbers let's say these numbers
I'm going to repeat this so we can
actually do this computation a few times
so I've got about 20 numbers on my hand
and what I want to do is I want to say
numbers dart stream and I'm going to say
a filter and i will call sample let's
say 'yes even
then I'm going to say dot map will say
sample double it and then i'm going to
say for each and system dot out and
print line so i'm going to double the
even values and print it well let's go
ahead and try this out first of all then
we'll come and talk about it so I'm
going to say in this case public let's
say static void a boolean let's say 'yes
even and in this case I take a number as
a parameter and what am I going to do
with this number i'm going to simply
return let's say number mar 2 is equal
to 0 well likewise i'm going to write a
double it function and this is going to
return of course an integer and all i'm
going to do is return let's say number
times two well obviously in this case
when i run this code you can see that
particular output but i'm going to do a
few things differently i'm going to
output is even and then i say plus
number now clearly this is a side effect
you don't want to do this in production
code but this is just an example to show
you those functions are being called but
i'm going to then say plus and we will
say in this case a thread a dark current
thread so you can see in this case it's
going to show you that those
computations are being done in the main
thread are absolutely so but then i'm
going to come here and say a parallel
threat stream and you can see it right
now all those are in the for joint
pulled thread rather than being in the
main thread so that's what parallel
stream did for us but having said that
let's go ahead and take a look at what's
going to happen now in terms of how this
is going to work so i'm going to remove
that for a minute but i'm going to add
this into a little thread dot sleep and
in this case I'm going to say thread dot
sleep and give it a second interval so
once i have a sleep function here so
let's go ahead and say in this case I'm
delaying it by a second and obviously
when i run this it is going to go
through and do one at a time to print
the values if i start with the stream
obviously here i'm going to run this
compile you can see that through the
loop once every second or so it is going
to print that value out is it taking
more than a second feel that way so you
can
see that of course because the even
numbers are being illuminated remember
that's why so it's one second per value
so i can see that coming through for
every one second well that's great so
far but i really want to run them in
parallel stream so i'm going to say a
parallel stream now what's going to
happen well it's gonna unleash a threads
on it so if i go back and run this now
you can see that in this case it's going
to be a parallel stream still need to
spell correctly so i'm going to run
through this here and you can see in
this case it gives us the value but did
you notice something though let's
actually to see this let's go back to
the code right now and here let's go
ahead and put output is even plus number
so we can actually see this now so
notice when i run this code this time
around notice that it comes in bursts so
one burst to burst three bursts so it
came in about four different burst if
you notice and the reason it's coming in
four different bursts is by default the
behavior is the parallel stream gives me
as many threads in the pool as the
number of cores on the machine and it
thinks that my machine has eight cores
and as a result it is eight so it's
going through you know two or three
different bursts in this case to give
the result so the first time it's going
to do eight the second time is going to
do 16 third time it's going to do the
remainder of the values so that's
basically what it did it went through
three bursts in this case so that's the
default but what if I don't want the
default I really want a bigger pool size
well you can define a bigger pool size
by using the JVM option which is minus D
java.util concurrent for join pool
common parallelism I really like this
particular definition because this is
finally something longer than my name I
love it so so you can give this
definition and say I want a hundred you
know values in the pool size you can
give that i'm too lazy to type that in
so I wrote myself a little compile
option right here so i'm going to say go
in and run compile to let's say and you
can see in this case it came in one
burst as you can
see rather than tubers there you go and
the reason of course is I've given
hundred threads in the pool it didn't
have to really scheduled with the eight
and then wait and then reschedule it I
got a bigger pool on my hand well as a
third option you can do as well which is
a programmatic setting remember how
you're used to creating executor
services well much like that you can
create a for join pool and if you create
a fork join pool then whatever you call
in the for join pool will become as part
of that let's quickly see that actually
happening I'm going to run this and you
can see that coming to burst what I'm
going to do though is I'm going to go
back here and say java dot util dot
concurrent dart star and I'm going to
say here is our fork joy in pool and
this is going to be my pool equals new
for joint pool and i'll give it a
hundred threats in the pool and now that
I'm started that one of the first things
I normally do is to say pool dart
shutdown and that way I don't forget to
shut it down now I'm going to simply say
a pool darts submit and in this case I'm
going to create a little lambda for that
pool and I'm going to move this code
into that lambda so now you can see that
the code actually is running but it's
running within that pool created a
thread so as a result it's going to use
the pool for running this code rather
than running the code outside so how is
this going to work let's take a look at
this real quick so I'm going to go back
oh let's actually we have to wait for
this to finish so that's usually what I
wait a notification but I'm going to
take it easier out here just put a sleep
for a minute so this is going to be
waiting for this to finish and of course
that requires me handling exceptions but
not a problem so we'll take care of that
as experts so throws exception so let's
go ahead and try that little code so
what is that going to do well that's
going to use that particular pool we
created so if i go back and run this now
you can see that's still in one burst
rather than going through those
little-little values that's because it
was using the pool in which it sits
using the current
pool so if your threat is in a 4 join
pool it uses that pool if your thread is
not in the for joint pool but if it's
the main thread it uses the you know the
system wide if you gave an option our
falls back to the default so that's one
of the options it goes through to decide
which one to use so I shared with you a
few things that has excited me over time
looking through java so it makes code
concise makes code easier to write fewer
lines of code to write fewer mutability
fewer chances of errors it makes us more
productive as well and we're able to
really look around and make use of some
of these functions one of the challenges
though is the existing functions
existing libraries existing API all of
them have evolved with newer functions
so something you may have used for ten
years suddenly is brand-new all over
with all these new added things so we
got to be a bit aware of what's around
and we can pick up and use it but a lot
of fun when we start adopting it well
that's all I have I hope you found it
useful thank you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>