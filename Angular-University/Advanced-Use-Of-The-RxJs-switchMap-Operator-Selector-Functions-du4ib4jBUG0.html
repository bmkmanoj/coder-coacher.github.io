<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>ðŸ’¥ Advanced Use Of The RxJs switchMap Operator - Selector Functions | Coder Coacher - Coaching Coders</title><meta content="ðŸ’¥ Advanced Use Of The RxJs switchMap Operator - Selector Functions - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Angular-University/">Angular University</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>ðŸ’¥ Advanced Use Of The RxJs switchMap Operator - Selector Functions</b></h2><h5 class="post__date">2017-05-05</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/du4ib4jBUG0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello everyone and welcome back Vasco
here from the angular University we are
going to refactor this course detail
top-level components so it's the
component that gets displayed here and
instead of making it a smart component
so the component knows how to fetch the
data from the service layer we are going
to instead make it a plain container
component so this component will no
longer be responsible for fetching the
data from the backend it will also not
have the application services injected
it will simply inject the route the
activated route and let's see what we
can do with it to retrieve the data so
as we have seen the data will now be
returned to us by the data resolver so
the data resolver upon route transition
from the home screen into the course
detail screen is going to load this data
tuple this observable will emit the data
tuple as it's loaded from the backend
and that is going to be made available
here at a level of this component via
the route so we have here a parameter if
we do this dot route we have here a data
parameter at the level of the route
which is itself and observable so this
is how the data is going to be consumed
later at the level of the container
component the course detail component
right now let's implement first the
course detail resolver the first thing
that we are going to do to implement our
resolver is to inject here at the level
of the constructor the courses service
with the service in place we can now use
it to implement here the resolve method
so this method is going to start by
retrieving the course by URL then it's
going to keep the course and it's going
to do a second request to find the
lessons for the course once the lessons
for the course returned we are going to
emit a tuple and we are going to return
it here as the output of the resolver so
the router will wait for this observable
to emit its first value and then
complete and then it's going to trigger
the transition the course detail will
then have access to the data via the
data observable so let's start
implementing here this logic we are
going to use the courses service and we
are going to call the method find course
by URL what we need now is the URL of
the course that we want to load from the
back end and we have it here at the
level of the Rooter snapshot so the
Rooter slap shot has here a property
called parameters this will contain if
we go back here to the Ruettiger field
all the parameters that were passed in
during this routine transition namely
here the ID parameter will contain the
course URL in order to access the course
URL we simply use here the array syntax
notation for accessing the ID property
of the Rueter parameters but we cannot
return this as the output of this
resolve method because this is returning
an observable of course and we need an
observable of this tuple here so here is
what we need to do we need to call
switch map and the switch map operator
is going to take the value that was
emitted by this observable so it's going
to wait for the first value to be
emitted and then it's going to switch to
a new observable so here in this
function we need to return the
observable that we are switching into so
what does the bubble are we going to
switch into we are going to trigger a
new request to the backend again using
the courses service and this time we are
going to find the lessons for a given
course so here we need to pass in here
the course ID which is available here at
the level of this property now as we can
see this would still not work because we
are returning an observable of lesson
array and not an observable of this
q-ball type here so what we need to do
is to emit an observable that combines
the result of this observable here which
will emit a course with the result of
this observable here which will emit a
list of lessons so in order to combine
the source observable and switch to
observable results which map provides
here a second argument that we are going
to be using so the
we'll take a function the first argument
of the function is the output of the
first observable so it's the output of
this observable here which is the course
and the second parameter is the output
of the second observable which is the
list of lessons and we are simply going
to call it lessons this function is then
going to combine the two results and
it's going to emit a tuple type so the
first value of the tuple is going to be
the course and the second value of the
tuple is going to be the lessons so as
we can see when we hit control s we now
have a compiling program so typescript
is checking that indeed the output of
this observable is emitting a tuple of
this particular type which is the data
that is needed by the course detail
screen and with this we have completed
the implementation of the data resolver
let's now switch back to the course
detail component we are going to
refactor it to consume the data we are
going to make it a container component
let's have a look at it this is coming
right up in the next lesson</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>