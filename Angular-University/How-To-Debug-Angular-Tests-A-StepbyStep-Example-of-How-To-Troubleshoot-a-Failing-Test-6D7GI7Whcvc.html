<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>ðŸ’¥ How To Debug Angular Tests - A Step-by-Step Example of How To Troubleshoot a Failing Test | Coder Coacher - Coaching Coders</title><meta content="ðŸ’¥ How To Debug Angular Tests - A Step-by-Step Example of How To Troubleshoot a Failing Test - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Angular-University/">Angular University</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>ðŸ’¥ How To Debug Angular Tests - A Step-by-Step Example of How To Troubleshoot a Failing Test</b></h2><h5 class="post__date">2017-05-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/6D7GI7Whcvc" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello everyone and welcome back in the
last lesson we had one of our tests that
was failing but everything seems to be
set up correctly so let's take the
opportunity to learn how to debug
angular tests this is just one simple
way of doing it there other ways and
also let's learn about a common error
situation that we tend to find while
writing this type of tests so let's go
back to the test and try to see what
could have gone wrong in order to
visualize what could be happening let's
take the email field input that we have
here so this is a debug element we can
get here for example the native element
and now what we're going to do is we are
going to get the HTML of this element to
see what is going on we are going to get
the outer HTML and we are going to log
the HTML to the console so that we can
debug it so if we hit ctrl s this is
going to really cute the test and again
we have a failing test but now here on
the console we have here the font
awesome input HTML in the headless
browser at the moment that the test is
starting to be executed so as you can
see something is wrong here because the
ICANN class is already there and the
font awesome class is already there but
the font awesome
- envelope class is still missing
although the input has been correctly
projected inside the front of an input
element so let's see what could be going
on here going back here to our program
it looks like the Ted application is
running that the headless browser is
correctly creating our email field but
this input has not been yet processed at
this time so it's a timing issue we at
this moment need to run manually here
the change detection mechanism of
angular to make sure that I can input is
processed internally by angular and
reflected in the Dom of the component so
the problem is that the assertion is
being then too early at this stage
if at this moment we manually trigger
the change detection mechanism of
angular this will now work and actually
this is a good idea to do anytime that
we run a test to make sure that
everything is updated and that all the
changes have been synchronized to the
Dom so before each we are going to use
here the fixture and we are going to run
here the change detector we are going to
call manually detect changes so let's
have a look at it now if we run the test
let's see what happens now after a
moment if you head over to the console
you will see that all the tests have
been run successfully so if we switch
back here to the browser we can see that
all tests are now successful so this is
something to bear in mind while writing
angular tests to make sure that the
changes that we make on the tests we
give it change detection cycle so that
those changes get reflected in the DOM
and with this we have a test suit in
place for our font awesome component
what we're going to do next is we are
going to learn how to publish this to
NPM but we are also going to see a
problem with the current format of our
library and how to fix it we will also
be doing an exercise we are going to
build a similar input to this one that
is very closely related it's going to be
a material design input let's have a
look at it this is coming right up in
the next lesson</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>