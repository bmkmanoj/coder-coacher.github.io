<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>ðŸ’¥ Angular Component Design: How to Avoid Custom Event Bubbling And Extraneous Properties | Coder Coacher - Coaching Coders</title><meta content="ðŸ’¥ Angular Component Design: How to Avoid Custom Event Bubbling And Extraneous Properties - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Angular-University/">Angular University</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>ðŸ’¥ Angular Component Design: How to Avoid Custom Event Bubbling And Extraneous Properties</b></h2><h5 class="post__date">2017-04-14</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/9m3_HHeP9Ko" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello everyone and welcome back in the
last lesson we saw a problem with
component design we saw that bubbling
data and events up and down the
presentational component tree is going
to end up causing code repetition and
also it won't work necessarily well with
third party components let's see a
solution for this design problem it's
actually quite simple we really don't
need to inject services only at the top
level components of the container
component of our route the angular
dependency injection system allows us to
inject services like the newsletter
service deep into the componentry so
nothing prevents us from creating lift
components such as for example the
newsletter component we are going to
open it here nothing prevents us from
making this a smart component instead of
a presentational component so there is
nothing preventing us from injecting
here the newsletter service so that's
what we did here and nothing prevents us
from having logic here that called the
newsletter service directly in this case
subscribing to the newsletter so with
this new implementation of the service
we really wouldn't need neither the
input nor the output because the same
way that we injected here the newsletter
service we can also inject here the user
service directly so if there is some
component deeply nested in the
componentry that needs access to some
data that is centrally available we
don't need to pass it up and down the
tree we can inject the observable later
service directly in the smart component
that resides deep in the componentry and
use it there so we no longer need this
input and we also don't really need this
output here so we can delete it so let's
have a look at how we could we use the
observable data service if we go here to
the newsletter template component we can
see that we really only need here a
property which is the first name so
let's simply define it here
for the moment we are going to
initialize it as a string and we are
also going to implement all in it
because we should avoid any type of
initialization logic in the constructor
in general so we are going to have here
the method ng on in it and on it we are
going to use the user service for the
moment we are going to subscribe to it
actually we are going to subscribe to
the user dollar observable and here
whenever we receive the user we are
going to initialize the value of the
first name property so we'd is in place
let's go back here to the template so we
were calling here subscribe to
newsletter method so let's refactor this
method slightly we are going to call it
subscribe to newsletter this is going to
be the email field we are going to pass
in the value that we retrieved from the
email field to the subscribe to the
newsletter service and here we were
clearing out the name of the field
whenever we emitted here the new value
so we are going to clear the field only
if the subscription was successful so
let's add this logic here so as you can
see our component is now starting to
look a lot simpler and also if we go
back to the course detail component we
no longer have to pass in this here at
the level of the course detail we can
remove his input property we can remove
the use of this output event that we
were receiving so we were bubbling at
event up the tree this is no longer
necessary let's go back here to the
course detail header component we no
longer need this input and these outputs
we no longer need this unsubscribe
method that was only here to bubble the
event from the level of the newsletter
and if we go back here to the hospital
Heather the newsletter no longer needs
neither the input property nor the event
so this newsletter component really
becomes a smart component instead of a
presentational component so in general
we should not agitate to inject smart
components deep in the component
three if that makes the implementation
of our program simpler if we find
ourselves in the situation where we are
bubbling events at the componentry this
is a good indication that what we really
need is a deeply nested smart component
there is only one problem which is this
solution as it's currently implemented
it's not working we are running into
change detection issues let's find out
what is the problem and most of all what
the correct solution is in the next
lesson</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>