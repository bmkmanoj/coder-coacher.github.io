<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>ðŸ’¥ Angular Ngrx Architecture Course: Flux Architecture - Does It Solve The Facebook Counter Problem? | Coder Coacher - Coaching Coders</title><meta content="ðŸ’¥ Angular Ngrx Architecture Course: Flux Architecture - Does It Solve The Facebook Counter Problem? - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Angular-University/">Angular University</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>ðŸ’¥ Angular Ngrx Architecture Course: Flux Architecture - Does It Solve The Facebook Counter Problem?</b></h2><h5 class="post__date">2017-01-15</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/ACFnxGFsjgA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">right now we are going to cover the Flex
architecture as an alternative to custom
global events as a way of having
different components at different points
in the component tree to be able to
interact in a decoupled way so let's
have a look at what the Flex
architecture looks like these are the
four elements of the Flex architecture
actions a central dispatcher originally
we have multiple stores
now the most common variation of Flex we
only have one store and the view so
let's go back here to this
representation of our application let's
say that we write here a new message
that will trigger the creation of a new
action we would call it write new
message action that action which is
simply a plain JavaScript object is
going to be dispatched to a central
service known as the dispatcher the
dispatcher would then notify the
multiple stores of the application and
what is a store the store is like a
container like a vault of state where we
store inside the state of our
application for example this application
could have a few stores in it the Fred
store the messages store may be here for
the unread messages counter we would
have an unread messages store so the
store is a container of state of our
application so in memory state on the
client-side the domain model of our
application would be found inside the
store typically the store does not
contain derived data it contains the
actual business data we're going to
learn more about this distinction
further in the course so the store will
receive the action and will transform
the state that it contains inside the
store it will then generate a new
version of that state the view will then
be informed that a store to which the
view has subscribed to has a new version
of the state so the view will take the
stage
it from the store via a callback method
and it's going to render that state to
the screen so typically the view will
take the state from the store and it
will further transform it because each
view each component will have a
different representation for that state
so this component here would take the
state out of the messages store and it
would loop through it and count the
messages that have not been read by the
current user and it would project that
to the view under the form of a single
counter but this other part of the
application would receive that same
application state and it would produce a
different representation of that state
in this case it would produce a list of
messages of the currently selected Fred
so we can see that the Flex architecture
allows that our application has several
components at different parts of the
component tree so completely unrelated
parts of the component tree to
communicate among themselves in a
completely decoupled way by using a
centralized service that in the original
flex architecture was known as the
dispatcher in the variation that we are
going to cover in this course that is
angular version and rxjs version of
redux the ng rx store we are going to
see that the dispatcher and stores the
multiple stores of the application have
been collapsed into a single central
service a single store so we will see
that in ngx store the notion of
dispatcher and stores have been
collapsed together so let's go back to
our original problem that we were trying
to solve the facebook counter problem
it's just an example how does the Flex
architecture help us in any way to
better solve this problem how does this
setup help us to deal with the Facebook
counter problem how is this better
compared to custom global events and
event bus
illusions like we have presented before
in which way is this better the solution
is simple we are still in our
application whenever we do a
modification of the state of the
application we are still sort of issuing
a command to a central service it's
roughly equivalent to emitting a global
event actually because the centralized
service is global and visible in
multiple parts of the application and
action itself is very similar to an
event it just contains some data some
payload that gets sent to a global
service the difference here is the other
parts of the application that need to
react to that action they will not be
notified of the action directly so there
is a level of indirection and the action
will be processed and it will be
resulting in a new state so the multiple
parts of the application that need to
display that state will simply receive a
new version of that state but for
example the counter here does not know
what caused the emission of that new
application state it simply knows that a
new state version has arrived and that
it needs to be displayed in a certain
way in this case counting the number of
unread messages the same goes here to
the list of messages so these different
parts of the application that project
multiple representations of the
application state they do not know what
caused the creation of that new state
and this prevents situations like having
logic that corresponds to the counter
here
accidentally being added at the level of
the right new message component the
presence of the store creates a level of
interaction and the view subscribes to
the store in that sense this notion is
very similar to an observable as we will
see so the store can be seen as an
observable of application state because
it emits new
versions of the application state we can
also dispatch actions directly against
the store as we will see so to summarize
the key thing to retain about the Flex
architecture is that we can have
components interacting at multiple
levels of the componentry and related
places of the componentry
without introducing tight coupling
between those same components that is
achieved by introducing a level of
interaction so each part of the
application that wants to do some
modification of the application state
simply sends an action to the store the
store will calculate the new application
state and it will report it back to any
views that have subscribed to it so in
the case of our said application each
view will receive the complete state and
it will know how to display that state
on the screen so the counter receives
the complete state meaning the complete
list of treads and messages and it will
know how to reduce that to a single
counter the list of messages will also
receive the same data and it will know
what is the current Fred what are their
messages and how to display them on the
screen
so to summarize and to conclude this
lesson the Flex architecture allows us
to implement decoupled communication
between components at different levels
of the component tree these camps at the
expense of introducing an extra level of
indirection between the action creator
and the stores subscriber but it makes
it very simple to implement certain use
cases like for example the Facebook
counter problem it's very important to
realize that there is a trade-off
at stake here that might make sense in
some situations and not others and this
is always the case with architecture
there is always a trade-off involved so
I hope that this gives you a good
overview of flux let's cover one last
thing you need a rational data flow and
after that we are going to start
building our shed application and if by
any reason some of these initial
sections were
not a hundred percent clear the first
time that you heard them if everything
about flux is very new to you I suggest
let's just start building that shat
application and once that's done you can
always come back to these initial
sections and watch them again and
everything will make a lot more sense
and don't forget to leave me questions
in the comments
great so without further ado let's get
going with unidirectional data flow</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>