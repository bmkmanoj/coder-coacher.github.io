<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>ðŸ’¥ Angular Router Guards - CanActivate - Auth Guard - Redirect to Login | Coder Coacher - Coaching Coders</title><meta content="ðŸ’¥ Angular Router Guards - CanActivate - Auth Guard - Redirect to Login - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Angular-University/">Angular University</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>ðŸ’¥ Angular Router Guards - CanActivate - Auth Guard - Redirect to Login</b></h2><h5 class="post__date">2016-12-11</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/0Qsg8fyKwO4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello everyone how's it going it's Vasco
from the angular University welcome in
this lesson we're going to cover can
activate Rooter guards it's coming right
up in this lesson we're going to add
some more security related functionality
to our application so what we would like
to do is the following let's say that we
are unauthenticated we have not yet
logged in and we click on a lesson right
now we can see the lesson the
functionality that we would like to add
is we should only be able to see the
lesson if we are already authenticated
otherwise we should be redirected to the
login page the way that we implement
this is with a can activate router girl
and that's what we're going to do in the
security folder we are going to create
here a new file and we are going to call
it authentication guard is the Rooter
girl is just a class but it needs to
implement a specific interface provided
by the Rooter which is the can activate
interface the can activate interface has
the can activate method which takes a
couple of arguments so it takes the
activated route snapshot and it takes
also a snapshot of the whole router it
takes also a snapshot of the whole
Rooter state and then it returns either
an observable or a promise of boolean
actually we can also return the
synchronous value but in this case we
are going to return an observable of
boolean before implementing the can
activate method let's make the Rooter
girl an injectable and let's add it also
in the providers list of the application
module now that the rock guard is an
injectable we can inject in the
constructor and in dependencies that we
might need for our implementation so in
this case we are going to need the
authentication service and because we
want to redirect to the login page if
the user is not authenticated we are
going to need
also the router let's now implement the
can activate logic so we have here the
authentication service which gives us an
observable the off info dollar
observable this observable gives us
value an object of off info which has a
boolean flag that says if the user is
logged in or not so the value that is
emitted by off info is of type of info
and here we have a method is logged in
so right now we already have here at
this moment and observable of boolean
because we have taken an observable of
type of info and we have mapped it to a
boolean now route cards when returning
and observable they need to make sure
that the observable completes otherwise
the routing transition will not finish
in this case we are going to make sure
that the observable is completed by
using the take 1 operator instead of
first so it's basically equivalent we
are going to return these as an
observable so this implementation here
would already work it would already give
or deny access to the lesson detail view
depending on the authentication status
of the user but we also want to take
action concerning that state so if the
user is not allowed to access this
screen we're going to adhere some logic
which says in this case we should
navigate to the login page and we are
going to do that using this navigation
API now how do we use this
authentication guard we need to go to
the router configuration and to the
parts of the application that we want to
protect with this guard in this case the
path to the lesson detail component we
are going to add here in the can
activate array we are going to add here
a list of cards in this case we only
have one guard which is the
authentication guard and with this our
route card is configured let's now try
this out currently we are not
authenticated so let's try to access the
course detail if we go here to this view
and now we click in lesson we are being
redirected to the login screen as expect
now let's authenticate now that we are
authenticated let's try again to access
a lesson this time we are granted access
to the lesson so the route guard is
working as expected remember the route
guard does not give true security in the
sense that this is all front-end code
running in the browser that could be
easily over even if the data in this
page is supposed to be only accessible
to authenticated users you also have to
implement that protection logic that
security logic in the backend as well
because remember everything that you put
in terms of security on the front-end
can be bypassed so remember that the
Rooter guard that we saw here the off
here this is really more for user
experience purposes this is more for
implementing business logic requirements
that relate to security such as for
example the redirect to the login page
etc this does not ensure security of the
data so it's very important to also
protect the data in your back-end
services</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>