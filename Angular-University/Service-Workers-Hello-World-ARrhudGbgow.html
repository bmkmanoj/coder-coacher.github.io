<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>ðŸ’¥ Service Workers Hello World | Coder Coacher - Coaching Coders</title><meta content="ðŸ’¥ Service Workers Hello World - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Angular-University/">Angular University</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>ðŸ’¥ Service Workers Hello World</b></h2><h5 class="post__date">2017-10-27</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/ARrhudGbgow" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello everyone and welcome back in this
lesson we are going to write our first
Service Worker we're going to do an
introduction to the chrome dev tools for
progressive web applications and we are
going to start covering the Service
Worker lifecycle let's keep in mind the
key overall philosophy of the Service
Worker life cycle it's about ensuring
consistency by default and making sure
that the user always sees one version of
the application even if it has multiple
tabs of the application opened let's
then start writing our first Service
Worker let's call it SW dot J's we are
going to put it here right next to the
registration script here in the source
folder let's create a new file we are
going to be using here a version for it
let's use the Const keyword to define a
version for the service worker that we
are currently running this version
number we are adding it for learning
purposes this is going to help us to
understand better how the service worker
lifecycle works let's make it a string
and we are going to call it for the
moment v1 in order to better understand
how service workers work we are going to
be logging this version number in every
logging statement that we make inside
the service worker so that we can
clearly link a certain behavior that we
observed to a certain version of the
service worker right now we simply want
to log to the console that we are
installing version 1 of this service
worker because we will be using logging
a lot to really understand how service
workers work we are going to create here
a logging function that is going to take
here an array of messages and is simply
going to log them to the console but in
each logging statement we will be
prepending the version this is going to
be very helpful to understand our
service workers work right now let's
start using this function we are going
to simply say log installing service
worker so let's try out this very simple
script to see how this works
before trying this out noticed these two
files serviceworker register and the
serviceworker file are being served by
the angular CLI notice here in our
configuration file angular CLI dot Jason
that we have added here to the assets
property a couple of extra files so we
have here the registration for the
serviceworker
we have the serviceworker itself and we
have here a couple of other files that
we will be using in future lessons this
configuration will not be native in a
production angular application
everything will be available out of the
box this is just needed here in our
sample application because we want to
create our own custom serviceworker
for learning purposes only the effect
that this configuration has is that it
allows the angular CLI to serve these
files if we don't have this
configuration in place then we would get
an error from the angular CLI
development server if for example we try
to load here the registration script
once this is in place we are ready to
activate our first service worker in
order to better see what is going on
let's switch to a larger window we are
going to put in here in the URL bar our
local host application this is going to
lower the application and take a look we
are using here the chrome dev tools we
have selected here the application time
service workers and we can see here that
there is a service worker up and running
in this web application if we click here
on the source of the service worker we
are going to confirm that this is indeed
the Service Worker script that we just
wrote now let's have a look at the
console as we can see we have the
logging message installing service
worker version 1 and we have here
service worker registration completed if
by some reason you are not getting this
exact console log statements it might
have been because you loaded this in
another tab if you want to see these
console statements you head over here to
your application tab and you can simply
register the service worker click and
register and then simply reload the
application you are going to see the
raishin process again notice that if you
reload the page the service worker will
not be installed again the registration
completed event is still being triggered
but we can see here that no logging
statement occurred here inside the body
of the service worker so this logging
statement was not executed this means
that when we refreshed this page the
service worker remained active the same
instance of the service worker will
still be running across page refreshes
the browser will activate or deactivate
the service worker at certain key events
in order to spare resources especially
on mobile let's see a concrete example
where the browser is going to deactivate
this service worker now let's see what
happens if we open another tab on the
same page let's see if the registration
process is also triggered so here on the
first tab we had here instance 954 if we
switch over to the new tab we also have
here instance 954 activated and running
now let's see one example of what could
cause the deactivation of the service
worker to see that we are going to open
here another tab we are going to open a
blank tab we are going to open the dev
tools and then here at level of the
service worker tab we are going to make
sure to click here the show all checkbox
so with these check box if we scroll
down a little bit we're going to see
here the service worker for localhost we
are also going to see all the service
workers of all the sites that you have
visited recently that have service
worker functionality enabled here we can
see localhost and we can see here
instance 954 is still up and running
let's then see when will this instance
get deactivated by the way you can stop
it here and you can also end register if
you want right now let's focus on
deactivation let's first close one tab
we're going to wait a little bit we're
going to see that the instance will
still remain active and running
now let's close the second tab and see
what happens so now all the localhost
tabs have been stopped and if we wait a
moment we're going to see that this
instance is going to get stopped and
after a moment this instance will get
deactivated so now this service worker
is stopped as we can see in this example
at a given point the browser is going to
stop the service worker to spare
resources this is especially important
on mobile let's now see how this works
in terms of Service Worker versions
let's say that a new version of the
Service Worker is available how is this
going to be handled by the browser</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>