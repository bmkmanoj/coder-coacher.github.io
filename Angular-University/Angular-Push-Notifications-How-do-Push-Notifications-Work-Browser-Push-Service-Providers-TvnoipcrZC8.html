<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>ðŸ’¥ Angular Push Notifications - How do Push Notifications Work? Browser Push Service Providers | Coder Coacher - Coaching Coders</title><meta content="ðŸ’¥ Angular Push Notifications - How do Push Notifications Work? Browser Push Service Providers - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Angular-University/">Angular University</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>ðŸ’¥ Angular Push Notifications - How do Push Notifications Work? Browser Push Service Providers</b></h2><h5 class="post__date">2018-02-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/TvnoipcrZC8" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello everyone and welcome back in this
lesson we are going to complete the
subscription process to allow our
application to emit notifications we are
going to have a look at the push
subscription object that we are going to
get back from the browser and we are
going to understand better how web push
notifications work in general
let's then go back to our call to
request subscription this is going to
get back a promise so we will call dot
then on it and this promise is going to
emit here the subscription value if the
subscription is successful we are going
to be needing this subscription object
let's have a look at it we are going to
print it out to the console to see what
it looks like we also want to handle the
case when this subscription does not go
through successfully and in that case we
want to add here a catch block to our
promise we are going to simply in this
case log the console error to the screen
we are going to log here the error calls
let's then go ahead and try this code we
are going to start by incrementing here
the version number so it's going to be
version 9 we're going to head over to
our terminal and we are going to make
sure that we start our application in
production mode with version 9 up and
running let's go ahead and trigger the
subscription process we're going to open
here the console to have a look at the
subscription object let's go ahead and
hit subscribe as we can see we now get
this pop up show notifications we're
going to click allow and as we can see
we now have here the notification
subscription object meaning that the den
clause was executed and the promise was
evaluated successfully if we have a look
here at the subscription object in more
detail we're going to see that we have
here an endpoint property and a couple
of other properties here such as for
example user visible only true these are
certain default properties of the push
subscription that we are going to go
over now
one of the properties is the application
server key this is another form of
writing the vapid public key another
property that we see here define these
the expiration time
in this case we have not defined it here
at the level of the request subscription
otherwise this property will also show
populated here another property that we
have here is user visible only true this
means that the web push messages that
are going to be sent using this
subscription are guaranteed to always
result in visible content shown to the
user the most important property maybe
it's the endpoint let's have a look this
is a URL that is pointing to the Google
Fire Cloud messaging service at Google
APs calm as we can see the last part of
this URL is a unique identifier this
unique identifier identifies this
particular Chrome browser instance to
the Google Fire Cloud messaging
infrastructure which is the server which
is in charge of pushing push
notifications to all Chrome browser
instances this means that web push
messages do not come directly from our
server they arrive at the browser via a
service that is under the control of the
browser manufacturer this ensures from
the point of view of the provider of the
browser such as for example Google in
the case of Chrome that they have
control over the notification user
experience so if there is an application
that is showing too many notifications
to the users the fire cloud messaging
service would be able to blacklist
certain sites from sending notifications
providing very disruptive user
experiences because too many
notifications that can be very
distracting to the end-user in the
particular case of the Chrome web
browser it's firebase cloud messaging
the back-end service that pushes
messages to the browser in case of
Firefox that's going to be a different
service under the control of Mozilla and
in general each browser will have a
corresponding back-end service that it
uses to push notifications to the user
this is not configurable by the
developer so we cannot specify here an
endpoint property and override this this
is defined by the browser and can
be changed so if we want to show a push
notification to these browser instance
what we have to do we have to send the
message that we want to send to this end
point here which uniquely identifies the
browser instance we add the text of the
message that we want to display and
these back-end service firebase cloud
messaging in this case will eventually
push the notification to these browser
instance this means that in order to be
able to send notifications the first
thing that we need to do is to take this
subscription object and send it to our
server
it's from our server that we are going
to trigger notifications notifications
cannot be triggered here from the client
this means that the first thing that we
need to do with this push subscription
object is to send it to the server where
we will be able to use it</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>