<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>ðŸ’¥ Angular HTTP Retry -  Retry HTTP requests in Error using the retry and retryWhen RxJs Operators | Coder Coacher - Coaching Coders</title><meta content="ðŸ’¥ Angular HTTP Retry -  Retry HTTP requests in Error using the retry and retryWhen RxJs Operators - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Angular-University/">Angular University</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>ðŸ’¥ Angular HTTP Retry -  Retry HTTP requests in Error using the retry and retryWhen RxJs Operators</b></h2><h5 class="post__date">2016-06-24</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/HQaRI1A4omg" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello everyone how's it going it's Vasco
from the angular University and this
lesson we are going to see how angular
to http
can help us deal with and stable
backends that occasionally return errors
by allowing us to retry certain
operations let's have a look in this
example instead of calling the normal
load lessons method of our back-end we
are calling this suspiciously named load
flaky lessons let's have a look at the
backend to see how this is implemented
we can see here that basically this
service only works one time out of two
so one time out of two it will return
the valid result containing a lessons
array and another time out of two it
will fail and return an HTTP code 500
let's see this in action
so if we lower our page we can see that
the lessons are there
if we click multiple times on the retry
button we will see that eventually the
call will fail and the lessons list will
be empty we can work around this issue
by using the rxjs retry operator let's
try it out and see how it works
so let's say that the call fails was
what rxjs retry will do is that it will
subscribe again to this observable so it
will emit a second call until it gets a
successful response and if the second
time around it still gets an error it
will subscribe again to the original
observable until it gets a successful
reply so we can see here in this example
there were four Network calls in error
until the fifth one finally completed we
trying again
immediately when a network call fails
it's probably not the most frequently
used strategy usually you want to wait a
little bit maybe just a couple of
seconds until you retry again because
many times these problems are
intermittent so what we can do is
instead of using retry we can use for
example the retry when up
I try when gives us as input and
observable of errors so this is a stream
of the errors that occur in our original
observable so what we are supposed to do
is to return another observable this is
a very common pattern in many rxjs
operators we are supposed to return and
observable that when that observable
emits a value that's the moment to retry
again the call so let's simply return an
observable that takes the error and
delays it for five seconds this means
that we do a call it fails we wait for
five seconds and then we retry let's see
this in action if we hit the retry
button we can see that the request fails
then we see here that there is a delay
here of five seconds the request fails
again again we wait for five seconds and
that the first time around the request
completes and the data is injected in
our template this is a good example of
something that is really simple to do
with rxjs that if-then in another way
would be rather complicated to implement
let's give another example of something
that is very easy to do with rxjs
that it's very difficult to do otherwise
cancellation it's coming right up in the
next lesson</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>