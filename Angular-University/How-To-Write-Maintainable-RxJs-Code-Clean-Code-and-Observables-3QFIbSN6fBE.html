<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>ðŸ’¥ How To Write Maintainable RxJs Code - Clean Code and Observables | Coder Coacher - Coaching Coders</title><meta content="ðŸ’¥ How To Write Maintainable RxJs Code - Clean Code and Observables - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Angular-University/">Angular University</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>ðŸ’¥ How To Write Maintainable RxJs Code - Clean Code and Observables</b></h2><h5 class="post__date">2016-09-30</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/3QFIbSN6fBE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello everyone how's it going it's Vasco
from the angular University do you
struggle writing rxjs code do you find
it hard to write code based on
observables to make it maintainable and
readable do you go back to a method with
six or seven operators chained together
and you don't know anymore what it does
if so be sure to watch this video until
the end to see some tips and tricks on
how to write maintainable rxjs cold now
notice how I have been doing this I have
been using this intermediate explanatory
variable so this is a best practice that
comes from the clean code book it also
applies when we are developing rxjs code
so if we try to do a shain of rxjs
operators and it's starting to get it
larger than let's say three maybe four
it's better to assign that observable to
a variable that explains what we are
trying to obtain otherwise when you come
back to the function in order to try to
maintain it it will be the sort of code
let's say that you have six or seven
rxjs operators shamed one after the
other it will be very hard to read what
is going on now explanatory variables
are very helpful for building this query
it would have been hard to build it
without them but we should always be on
the lookout to opportunities to extract
queries that we might reuse in the
future two separate functions for
example what we are doing here is we are
going to find the lesson keys based on a
course URL this might be a query that we
might want to repeat later let's say to
test for the presence of lesson IV in
the course this function here we're
going to refactor this part of our query
into a function that we can reuse and we
are going to compose these using
function composition so let's do that
the input is the course URL so fine
lesson is per course URL and the return
type it's important to define the return
types of these API calls even though
they are implicitly defined if nothing
else for documentation purposes so this
should return the observable of a string
array so it should contain all the keys
so let's refactor this we are going to
return this value so we no longer have
cores here so we are going to call these
dot find course by URL and we are going
to pass it in the course URL so this
returns an observable of course and the
switch map here will return as a list of
objects not a list of strings so let's
add here an extra mapped step then in
this map function we receive here an
array of objects so lessons per course
I'm going to use blue roll here in this
abbreviation we are going to take this
array and we are going to map it what
we're going to do is we'll receive here
a lesson per course object we are going
to map the each lesson per course object
to its key so this way what we return
here is a list of strings containing the
lesson keys and not those fire-based
specific objects so let's use this
function here we need to use this dot
and we are going to pass it in the
course URL and we can remove this
explanatory variable here so we already
have here and observable which contains
a list of IDs so the thing is we this is
no longer an object here this is a
lesson key so let's take this and let's
pass it in here so we no longer need to
call dollar key one final refactoring
that we can do is we really don't need
these explanatory variable anymore this
was useful when we had several of them
now we can simply return so we are going
to take the observable that has
least of lesson keys and we are going to
apply map to it so again here we are
assuming that this is already a lesson
key and not a lesson key object so if we
now try this out we can see that our
refactoring work that we are still
retrieving the list of lessons for a
given course and we have now here a
couple more functions that we might want
to reuse in other situations</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>