<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>How To Tackle JavaEE | Coder Coacher - Coaching Coders</title><meta content="How To Tackle JavaEE - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Adam-Bien/">Adam Bien</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>How To Tackle JavaEE</b></h2><h5 class="post__date">2014-04-14</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/JWcoiXNoKxk" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so I'm hello to Stettin good evening
dobry virtual so um can you hear me
so just give me a twit or or it's chat
in in the social stream so can you hear
me and see me yes no news are bad news I
think it should work okay looks nice so
um good evening why I'm here or not dark
yeah Stettin is a little bit hard to
reach
comparing to crack of Danzig or war so I
would have to travel to Berlin and then
switch to stay Tina will lose power
probably two days of my work and this
little bit hard because I have lots of
deadlines to meet and I think it was
three to four years ago I was asked by
Pavel suave Itsuki whether I would like
to talk in Stettin and I remember it was
I had no time I was in Hamburg and they
say ok it was really hard to come to
Stettin and say no problem I can pick
you with car and I was about to say yes
but the problem was it was weekend the
next Monday I had still to work so do be
are crazy right so I remember that and
Pavel asked me again
would you like to to come and now I say
ok what about a virtual way of
communication I mean we are all virtual
right so why not to try this and yeah
see how it works so I'm what I think is
a keynote so in keynote is a little bit
higher level and in my last or recent a
hex at admitting airport and we had lots
of discussion about architecture
structuring Java applications and and my
impression was it was still not clear at
the end so I'm what I would like to do
today is first to start with some slides
to explain you how to how I structure
Java applications and why it worked well
so far this is actually the idea of the
workshop and we are still some time
depends on paddle we I could show you
some code hexam code for you but yeah
keynote is keynote so we will be a
little bit more high level everyone
agreed yes no questions no questions we
will use quit a Twitter for
communication because of a Skype there
is some delay so um so okay so then
let's start with the actual presentation
so you see there is the Twitter with
Deaf crowd and yeah how to tackle Java
and I will just go fullscreen
so about me
I like Java I've working with Java since
1995 and I am freelancer I never worked
for our for our company actually I
always was singleton
I'm I've write a blog from time to time
I am on Twitter I am three years a year
I organize or my wife organizes and I'm
just delivered the workshop Java wreck
ship is one week the people come from
all over the world there were some of
from Poland of course and each month
each first Monday of the month there was
a question and answers ritual like this
so you can ask me whatever you like
about Java I try to answer this I do it
to save a little bit of my time because
I had lots of questions from my blog so
um this is these are the workshops and
I've wrote two books but now start with
the topic so um the question is who
actually cares about Java so Java
Enterprise Edition very nice but at the
end of the day you will have to do
something for your customers and whether
this Java EE or not now no one actually
pays attention to it except probably
operations so what you have to think
about is we should be more productive
otherwise we will be killed by Ruby
PHP even or Python or whatever or go or
whatever go probably not but node.js for
instance so um what would the point is
with Java you can be extremely
productive if you concentrate on the
business logic and this is actually the
topic of my of the workshop here and
when the architecture is perfect
I would say the architecture is then
perfect or Java is then perfect when you
have about 80% of domain code or 80% of
your code covers domain logic business
logic and 20 or even less 20 is already
way too much but 20 or more percent is
it's the framework code and out outside
8080 and 20 percent rule is it's a known
rule but I would even go and say ninety
ten or ninety five five percent so on
the best possible Java architecture
would be lots of pojos with with some
annotations and simple straight forward
call this is actually their best case no
frameworks no interaction no strange
patterns no you know exaggeration just
straight business logic this would be
the best possible case and this is what
I try to achieve in in my projects at
least and yeah it works from time to
time it really depends on the on the
architects and and the developers so
what what one does me a little bit is
everyone was didn't like the j2ee 1/4
and 1/3 complexity so the problem was
there was lots of there was lots of lots
of problems with xml and and and and
overhead with interfaces and jenny i
lookups and exceptions and dependency on
the api and the problem is probably or
went away in 2006 and with the
introduction of java
five and Java basics but I still see in
projects most of the developers most
some developers are still applying the
same old ancient and outdated patterns
to the new technology it doesn't make
any sense anymore and I think you should
stop with that this would be actually
nice to UM just to just to stop with it
and so um the next point is no
dependencies so no dependencies means
start with a plain pom.xml no external
dependencies or or you shouldn't start
with some some dependencies what I mean
by that is I wouldn't use Jakarta
Commons or Google guava or whatever
without urgent needs so it's not just
using dependencies just for fun why not
because each external dependency
increases the build time increases the
size of the war web archive and if it
resists are at the size of the of the
web archive it will take longer to
deploy it will bring in production
although each deep external dependency
is a risk risk means if there is some
back you will have to fix the back which
is usually not a problem at the
beginning but imagine your application
will stick in production for five years
after five years who knows whether these
dependencies actually still around so I
saw really ROG project which were
dependent on on a small github project
maintained by one single guy for
instance so the question is what what
happens if the guy just pushes the
remove remove partnered github and the
project just disappears so um this is
what what I'm thinking about and also
whatever I order orally apply this in
Java six just start with a war web
archive ears are nice but are actually
no more needed so you can just do
whatever you like with a width war ears
is a special case if you need to knows
specific class path settings or you
would like to deploy the JCA connector
with ear then goes with with an ear
otherwise goes war in fact I think I
don't know about
eight years ago I used the last time in
the year I really so whatever I do is a
war so um let's see whether there are
some questions are there some questions
oh no question just welcome it's not bad
but question would be even better so any
questions everyone agreed with my
opinion so far this cannot be because
this opinion is not dead
common so I get lots of not problems for
discussion in my projects about this so
okay no news the good news if you are if
you are with me is in better the next
point is the last the last time we got
lots of questions is how to start with
Java is complicated what I have to know
and you which frameworks to use and so
forth so on I would say Java and Java in
knowledge does not really matter so I'm
I think you can build very effectively
Java applications with knowing just 500
tations basically @inject is the most
important one at stateless for
transactions at entity for persistence
and probably for 444 for the key and if
you if you would like to start with JSF
probably at model if not at path for
jax-rs and of course if you if you know
already path you have to know that for
each HTTP action or method there is also
an annotation knowing this you could
build something similar like chat or
Twitter or order already and everything
else can come later so just start with
hacking something so on that note what I
also see in projects that because some
of the consultants are not don't don't
have really deep knowledge about the
domain and this also happens to me
because I'm also external consultants
and in some project I really don't know
what is actually the key point of the of
the domain logic because they do not
know about very much about the domain
they program around the domain so they
introduce abstractions and interactions
just to not to go into the into the
matter actually
are what you should do instead is just
to start with plain concept playing
pojos and try to express as direct as
only possible the business logic or
domain logic and then apply some
annotations on it this would be the best
possible case yeah the next is no vision
no glory so what is vision vision if you
remember it was I hope you remember it
came actually from a waterfall process
called the rational unified process but
the vision vision was really very nice
thing so what it is is actually is one
page one page which describes why the
project is actually built what are the
key features of the project and why the
project or the product is better than
the competition so adjust you know the
key advantages of this what we are
building and I have to admit in most of
my projects we get millions of use cases
but no one actually knows why we're
building the application so it seems
like we're building if you if we just
create 100,000 buttons and and 200 check
boxes we are ready to go but it's not
the point do you know to to fulfill 600
use cases the idea would be to create
rockin application this is actually the
point here and this is I'm often what I
miss in projects and and and and what it
should do is ask for so the domain
experts so what do are actually the key
points why we are building the system
the next point is is actually funny this
is the Parkinson's law of triviality
so of triviality so the Parkinson's law
of triviality says basically that the
the easier decision is the expensive it
becomes and this was actually not funny
it's actually said in US they build an
atomic reactor so nuclear reactor and
and all the hard decisions were made
very fast because they were hard they
weren't just view people involved but
the the decision about the color of the
carpet in the front of the building it's
they spend millions just to decide this
because everyone could
and actually it is exactly this in my
projects so like you know questions like
why you name the thing facet and not
service and we spent days in meetings
just discussing about the names the name
discussion but semantics no one cares
about so in one project we actually I
submitted a project and there was a no
one asked me about you know consistency
transactions or or some of the
principles rather than what was most
interesting is what is the group idea of
the whole thing in maven can can we just
deployed this and then which name to
choose for instance and so I'm a seed
over over again so from my perspective
what we should do all trivial decisions
should be backed by a somehow standard
and you can point to the standard if you
point to the standard you can you can
omit boring meetings so I'm just try to
you know avoid meetings by using
standards so we come to this a little
bit later so questions what's wrong with
you know questions I only seen me see me
but no questions so this is not good and
here are no questions no questions okay
then Parkinson's Law of triviality
mainstream means if there is a pattern
just use it before you invent your own
and why just to minimize discussion
period so if you take something obvious
which is standard no one will ask you
why because its standard but if you
invent something by own is always
trouble with it and if you go to other
projects you know the the people who
stay remain the projects will we have no
idea what you actually meant by this so
on this why I found a very old book
object-oriented software engineering by
Iver Jacobson and the average a cook
Jacobson is someone who also was
involved in UML unified modeling
language and in this book there is an
interesting pattern called an T 3 entity
control boundary and this pattern is
like universal pattern for
for MVC so it is a glorified MVC Model
View controller with the distinction
that Model View controller so a little
bit overused and in Model View
controller is applicable mainly for UI &amp;amp;
entity control boundary could be
applicable for whatever like so I'm
using for instance for structuring the
business part the back-end of the
application so on let's start with the
with the artifact so boundary looks like
this and it always looked like this so
if you even the oldest UML drawing tools
head to these icons and I drawed it with
OmniGraffle there is and you can use
Visio and and there's whatever UML
framework you are using they are such
icons already prepared for you if not
you can just use plain stereotyped and
if you don't have an UML tool available
what I don't use it very often UML you
can just use it for to draw it on the
table it's a very easy to draw so and
the boundary what the boundary means is
the boundary is the boundary or the
border between UI and the business logic
so in my I concentrate in this talk just
about the business logic how the UI and
the integration logic looks like is a
different topic but just let's
concentrate just on the business so
boundary is the is something which
isolates the business logic and exposes
to the UI the most easiest and most
usable API on the planet this is the
idea zere's this is actually the main
responsibility of the boundary and I
call it the boundary boundary and I use
the same icon why because it was defined
for by ivor jacobson 20 years ago and
why did you invent another term and
there are lots of other architectural
styles but none of them comes with icons
which are already available in all
drawing tools so just be pragmatic and
by the way in the two recent books I
refer to this pre before of before those
books I I used my own names as I didn't
use the boundary rather than service
versed and this was a huge mistake
because in all of my project I have to
disk
why the name is service verse eight and
not just for Seder not just service or
whatever or endpoint or who knows what
so and I think about four years ago I
switched to entity control boundary and
no one asked me again why I use the name
because I can point to this book to the
standards oh look something is defined
er just use the names so the next is the
control and what they control is you see
is optional so this is actually means
optional here optional means don't use
it from the beginning it control control
happens on demand by divine that divide
and conquer so what it actually means is
you are starting with the boundary which
is in my cases always an EJB why because
we need transactions and monitoring
these are the aspects I'm interesting in
so always an eg be threading throttling
transactions monitoring this is why I
need it and controls controls are just
helpers so what it means in one point of
time if you put everything to a boundary
boundary becomes too complex to how to
test and and how to maintain so what you
should do is to look on on coherent
pieces and and and extract them
somewhere else and where is it a control
and control is a CDI pin so it just
depending dependent beam which is
injected to an eg B this is called
divide and conquer it's probably one of
the oldest software development
principles on the planet and so you
start with boundary let the boundary
grow it becomes too big too fat too
complex just extract parts to control
injecting code controls to boundary
period so on how to create color
controls they are created as as as
product of refactoring so please ask
questions because ah very nice no depth
policy a kajari purism may need so many
problems Oh perfect so Adam o Adam and
also Adam so I'm nice
making just okay
how standards relates to agility I think
I don't get the question really so how's
done at the rates to agility I would say
agility means concentrate you know on
the core stuff and and don't play around
to you with the with the out power night
with with stuff which is relevant and in
my eyes naming doesn't matter semantics
are interesting but but naming doesn't
matter and agility I have to say I hate
the vert agility or not I don't like the
vert I DT why because in my eyes you
cannot build software in other way other
than a jar it is impossible to build
software in waterfall manner so some
sometimes you are forced to if you are
building rockets or satellites or
whatever but in our I would say
Enterprise boring enterprise
applications business you can just just
do it what if all it never worked so a
jelly standard so stop call it agile and
let's focus on software development so
and what standards also mean with Java
if for instance I just concentrate on
the business logic from day one I don't
have you know to to choose a la carte
from different api's on best-of-breed
application servers or whatever i just
download Tommy why try GlassFish
WebSphere Liberty profile and start
hacking or coding and this is what I
like the most on Java are on standards I
don't have to think about the trivial
stuff and mostly it is good enough so
Adam thank you very much for the
questions I hope um I hope I hope I hope
I answer the question and next question
is from Pavel of course I can give you
an example the first time now for years
I try to be more structured with with
slides so and you would like to see code
so here is it here's one of my open
source projects you there are all the
business components and there is
configuration with a boundary and the
boundary is and startup singleton which
is which is restful web service at the
same time this is an x-ray
you can clone it from from github there
is another another example monitoring
boundary it is an singleton startup this
is all singles unusual but this one is
is it singleton because a jmock spin at
the same time and or let's see
statistics boundary data statistics
resource and the daily hits calculator
is a control this is REM it is a
singleton force as a singleton because I
have to catch stuff but usually it is
not a single newbie OCD I manage pin so
this is a very specific project for me
but you see everything is confer is
organized the same way and yeah so we
have here hits resource hits resource
with hits management and the hits
management is in the control perfect so
basically the boundary would be an EJB
with it stateless
in standard enterprise project this is
not a standard enterprise project it
uses hazel cast and the lambdas and all
the crazy stuff so at stateless it would
be a a a stateless bean and would with
injected controls which are just Java
classes without any annotations perfect
um
so boundary is more or less than
application layer yeah it is
with the except what I would I what I
see is not application layer it is a
component layer so as you can see my
whole application layer is business is
organized in business components and
within each business component I have
our single boundary so it is not an
application layer it is a component
layer because application layer would be
too large in applications layer there
would be no one boundary will be too fat
and so I have boundaries for each
business component the question is what
is business component it's a lack tag
like a large object so a large object it
means from my pet example Amazon it
would be order for sure would be a band
would be a business component or a caste
or book is two specific products
probably very Goods thank you for the
question is amazing fontsize what's
wrong with you of course so fun size 24
for the old people so any questions Adam
now it should be good
paavo are you satisfied with my
explanation the difference between
application layer and in boundary and of
course you know the boundary only only
appears within a component and not as a
total okay let's see font okay now
perfect this is extremely I got to know
tweets from all over the place so here
is nothing in the social chat okay
control the next one is obvious entity
what entity is in my project just JPA
entity period so this is or sometimes if
you don't for instance in the x-ray
project there is no JPI JPA just memory
grid just pujoles or adjacent object
whatever JSON object is a little bit too
generic but something which has behavior
and can be persistent this is entity the
old you know old-school object what we
learned in the school this is the entity
so what it already implies if the entity
is a JPA entity it can absolutely have
business logic so it's not like the
business logic is forbidden in the
entities it is required because we would
like to build business applications okay
and now what what do you what you saw
already in x-ray the business component
is a package with a business name and
boundary is a sub package control is a
sub package and entities as a package
and here we have eg be with stateless
here we have used usually CDI managed
pins except you would like to have
asynchronous behavior and then I would
use a Jew pistol or schedule or
something like this and entities are
usually JP entities can be also just
domain objects which are not persistent
so transient entities are absolutely
fine so I think the basic architecture
is covered now let's start so I hope
font size big pavel is satisfied the
other power as well as as well so then
let's start with some principles don't
repeat yourself and the application is
evil so i'm the terms are stolen from
Ruby on Rails not stolen did they were
famous in Rubin race and and what I mean
is define the concept on the ones and
not multiple times this is the basic
idea of this so what at what at M
automatically means is if you have tjp a
entity just stick with the entity and
don't even try you know to create a DTO
up front in another client teo or
whatever and that the single truth to
multiple layers these already deply
duplicated because the first application
happens in a database right we have the
concept table in the database and we
duplicate it once to a JPA entity and
then and then i think there is no more
required to create details up front so
i'm my funny saying is if those are or
javabean utils works well in your
project your architecture is suspicious
so what it means though say if it's a
project which really nice project which
copies very efficiently data between
objects back and forth given the objects
are almost identical so if the object
are identical those ever as well but JP
means GPA is the same looks like exactly
the same like the DTO what it means you
have to application your project and you
should it is at least suspicious so what
you should do instead to try to start
with JP a and if the client adore in one
point of time needs something really
different to the GPA then
introduce the DTO but then you wouldn't
use probably dozer because they are
structure is dead different that it
doesn't matter whether you or doesn't
matter it doesn't pay out pay off to
just use a reflection tool to copy the
data back and forth and this is the most
controversial topic I would say so I
would expect at least some feedback no
there is no feedback so it means you
don't writing details which a good thing
so it says they are dead anyway
in most cases except the structure of
the of the backend is significantly
different to the 2ds to the structure of
the client and then you have to use d
tos and map TD TOS 2d entity beans
perfect you are gonna need it so this a
little bit harder in Indian business
enterprise projects but what you should
attempt to is to kill as many features
only possible because most of the
features are not used anyway so I was in
project there was a de funniest example
it was a few years ago they didn't did
they introduced it a form and the form
was so massive there was so many text
fields that actually showed that this is
impossible to fill out the form before
the time out of this session so it was
like everyone knew that is impossible to
fill out the form for a normal user and
and it was still implement it so I try
to escalate this and at the end of day
with pretty deform but just know to kill
the features in eleven features and
concentrate on the antimatter I know it
is harder in enterprise project because
we get the use cases and everything we
have to do to implement one-to-one but
at least try to convince the product
managers that you know is not like the
more features we implement the better
the application gets so this was the
last slide from the from the theory and
now I would like to hack something for
you to show you how it looks a little
bit how it feels in source code so do
you get a reference reference
architecture so one question to Pavel
and should answer the Twitter what is
actually the mascot so what I what you
saw
tea musket here this one the right one
so they do is the conference or Stettin
no answer then go without mascot I would
like to start with a web application and
call that deaf crowd crowd okay doesn't
matter
use white fly you so GlassFish all the
time for me now I will show it white
thread also works so um what I did
I created the project wrongly with thumb
sync which I didn't like to do so this
is oh let's leave it this is a standard
moving our attack archetype so if you if
you look at this it is a standard maven
archetype for Java EE so there is the
Java dependency and there's a maven
compiler plug-in with settings maven war
planning just to say fed on missing
web.xml falls there is maven dependency
plug-in which behind-the-scenes copies
the dereference bank and falls we get
80% of the code and most of the code is
no needed and this is why I created my
own archetype which you can also use as
well so this is the simplest possible
archetype because what I usually did I
created and the Java II project from
scratch with this and then deleted all
their craft so um I would just go with
this and say comma X is the group ID so
and I will call this dev crowd and now
it will create also maven project but
this project will look a little bit
simpler as you can see this is all you
need you can specify here the Java
version you can specify whether you
would like to see whether you have a
WebEx ml or not and the single
dependency goes to Java 7 and if you put
6 then you would have a Java 6 project
so this is
all I need to start questions no
questions
very good so um what usually happens oh
there's one thing with one single thing
which I forget what I also also do
always do is I create here a final name
with the name of the project why because
then the name of the war is death crowd
and it will be reused by the application
service you will see the early death
crowd so you can use the early the only
one change if you skip this the name of
the war would be death crowd a10
snapshot or something so and then what I
would also like to do is start with
restful web service because this is the
most reasonable thing to do everyone
talks Jason and HTTP and almost no one
more talks soap except Java and.net but
all Dino and you were staff so is
unusable for for this so I'm calm no no
no not calm PL dev crowd dev crowd um
let's say virtual virtual this name of
the of the application and then I would
like to create a jax-rs configuration
which extends application and
application path is resources it's a
good starting point so now jax-rs
services are set up let's see questions
ah Stettin chicken very good thank you
steady in chicken so and this is virtual
business so I forgot to mention all my
business logic resides in in business
layer so this would be the business
layer and by the way most of the
frequently asked questions if I have you
know shared classes where to put the
classes I put them to business directly
because they are shared so and then I
create a class called of course chickens
so I got the hint chickens and boundary
and chickens resource is going to be the
first ingredient of the boundary package
chickens resource so thanks for the hint
path is chickens always chickens plural
public string and now have the next
question what's the name of the chicken
chickens so returned Duke chick nice
name
oh thank you the atom likes my my my
artifact so chickens I assume Duke chick
so this would be the boundary so what it
means
I have also the restful web servers in
the boundary and the chickens we saw
something like like a I would call that
protocol adapter so then I would like to
introduce the chicken chicken Rhys or
service and the chicken service is the
actual protocol neutral gate to the
business logic so this one has to know
nothing about soap jsf rest nothing just
pure istic business logic and this would
deliver the actual name of the chicken
string get all chickens and give me the
name has the chicken a name inch 13 no
name so no name this would be the
Pacific business logic right and the
chicken service sorry the chicken
resource would like to have the chicken
service and I would just here reduce the
chicken service and usually is not that
simple like it is I would usually use
response not a string and then we would
have here some more HTTP based logic for
now both are at the boundary this is the
true boundary and this is rest protocol
adapter so I would also have chicken
soap service if someone would force me
to use soap I would put the soap stuff
here or RMI or whatever so then control
and before you create control you have
to do something in Java 7 you have to
create a bin 6 ml and the bixit XML in
bin 6 MF to say everything has to be
injected so on now you can inject
whatever like you can inject stateless
Bean CDI managed bean whatever with
annotated only annotate that stuff would
be injected and now everything is
injectable so and let's say we have
a chicken store this could be a control
I just only do it for to save time
because usually you could you could
inject the entitymanager directly to the
service this would be not a big deal at
all
so I actually always do this if you look
at the x-ray service all boundaries have
direct reference to the entity manager
or hazel cars are infinite span or
whatever who cares there is no need to
encapsulate this so in the chicken store
and of course what we need the chicken
itself the nameless chicken chickens dot
entity and this would be the chicken the
chicken which is going to be an entity
and the chicken has dot even doesn't
even have the name a name which is very
sad for the chicken but then I give him
or her an ID and probably has an age at
least if not the name long H dagger ah
okay now it changes everything so it has
an named name and constructor name H so
and we also need the default constructor
and we are almost done except then we
use we need the persistence unit with
drop and create and I would call this
prod
why does save and we'll just look
whether I'm using Chavous one Oh white
fly so again where's the chicken chicken
it forgot white fly so create
persistence unit and data source is
empty because it can be a default
persistence unit name prot
and let's look what happened behind the
scenes I would just like to verify this
looks great
prot JTA is the default and you would
like to drop and create the tables on
the fly there is no reference to
hibernate no reference to data source
because in Java 7 all the application
servers need to have a default data
source and there is no need to specify
hibernate or eclipse link because should
use whatever installed on the server
questions of our dagger or Duga I think
it will be dagger or dodge' hmm chicken
chicken store so obviously the chicken
store need chicken so entity manager now
we can use this add persistence context
and a method called save save the
chicken she can chicken have a duet do
you have any deadlines or can I just
implement the application because now we
are 45 minutes so just tweet me whether
I should stop now or just keep it going
and the chicken resource of course
chicken service scuse me gets the
chicken control but again this
architecture is already over engineered
because there is that the control was
just introduced to show you this default
structure I would usually never use
control for created rabid lead I will
just inject the anti diminish directly
to the service void save with the
chicken chicken and and and and chicken
store
to save chicken straw CS and inject
Soyuz inject whenever possible
chicken import it and then this cs dot
safe and so as you can see now it
already decorates to an empty delegate
which would be forbidden my project is i
would consider as a defect there is no
edit value' not just to delegate why to
use this but yeah i would like to show
you the whole structure this is why and
of course i can have your name query na
named query and with name all i would
usually create a constant for this but
this is fine for select no no query
select see from chicken see so now i
have to query and the chicken store
would return a list of chickens all and
this would look like return this am
create name query with the name is all
the type is chicken dot class and get
result list so this would look like this
so this would be ready to use and the
chickens resource we have your chickens
and in public void safe let's go with
something like germ Oh just use chicken
no something new jason object and i call
this chicken
a second
no thank you it's not we have time
perfect
so post and then and then and then I
would have to use what at least a name
so get string name and it's going to be
the name of the chicken name and chicken
get int this would be the H of the
chicken H and then we can say CS dot
save new chicken with name and H so this
would be the full implementation of the
project so we have the chicken store
save all we have the chicken which has
the name H and this would be and yes I
think we'll return the chicken here
right string chickens no this would be a
list of chicken chickens this is list of
chickens as you already see the control
is absolutely stupid here is our causes
lots of the application so this yes all
so now it looks better except what I
also need here some Jack's be
annotations XML root element XML access
or type field you don't have getters and
setters and now let's say let's see
whether it actually works so first try
to run the application and now I will
switch to Twitter
no test so far no no test it's a reason
for this is it's too simple so we could
I could introduce some tests right now
but I will also increase the amount of
business logic but I think the next time
we can do some tests so just testing if
you like no one session about testing so
if you like we can do this whenever you
like
but this time deaf crowd resources Adam
dude suck is very critical listener
they've got resources slash cheek cans
and I get on an arrow because you see
here for response type nothing defined
for tech see HTML so I would use the old
curl and I would have to say - H steady
header basically except application
slash Jason and it will return an empty
array so arm then I would try something
else - H content type application o
blank application slash Jason and you
see em - ex post and - D - D and name
what was it dagger
and weights good so and H was is of
course 42 and then the Ori and then
would like to see chickens dagger on die
focus this single fold here so named H
let's do I think we need this as you can
see it works so um hopefully I got the
dagger back so named dagger this was the
whole run trip from command line and it
works well so our field injection of a
constructor injection good one no no
Adam critical Adam is TD's the best
possible Adam you get a t-shirt the next
time from me so just keep ask questions
so next on field injection over
constructor injection so um what I think
what the other other means is the
following so why I'm not private so but
right now this fracture is ready I would
say we are ready to so this is actually
the structure I talked about with this's
extreme over and Jean and Jane earring
combined worth cargo called don't try it
at home so this is the chicken store is
exaggerated so this would this would be
a part of the boundary but now I can
explain you why I never do this because
what I can do right now is no not Donald
I have to join the test already so I
will need two dependencies stray unit
and the scope is test and mojito
mockito is a great polish invention has
all its the best possible motto best the
most simple as possible
mocking framework you can imagine so now
I would like to test what is nothing to
test but let's say I would like to to
use the chicken storia for testing so
now I can say the following
chicken service CS and in it di before
this yes at the CS
and what was it huh chickens - ah let's
rename it to store otherwise it becomes
confusing so our store equals we have no
time so I will just start with the mock
and the mock is going to be the chicken
service chicken store sorry so so now I
can test the method safe and the message
safe would be the C s dot safe with a
chicken
with a chicken and then do something
like verify this CS store safe with
chicken no mistake I always do the drunk
it means actually it means the same as x
1 so verify that that the have to import
this was well that the safe method of
the store was invoked once so if I test
this should work we have no business
logic Joe is just the minimal test and
it failed
why not pointer oh I know why no this CS
store and this CS equals new chicken
service so test it green bar and we have
the test questions hmm very good
question why we don't post the chicken
service with the resource because this
was possible in Java 6 and I wanted to
show you something new from Java 7 so I
use the JSON object this was actually D
the thing but what we also can do we can
say this is just for know we could use
the one for or why not try this know
what you could do you can say this one
accepts consumes
media-type application XML for instant
application JSON sorry and we could
build another method which just uses the
chicken for instance and just XML or
even we could use you could delete this
method and use chicken for both for XML
mixer and JSON but this could be even
more interesting because we could accept
different formats for JSON object and
and chickens or do be more flexible so
we could accept I would say loose typed
objects from JavaScript for html5
clients and and type save XML from for
instance Java clients
very good ah try a notations so a good
feedback why I'm using a little bit why
I'm using this right and what you can do
you can do the following but I don't do
it project it's too much magic so I'm
what you can do equivalently well is to
say run with mojito JUnit runner and
then I can say inject mocks to this and
my chickens to all becomes a mock and we
can skip this entirely and just use this
and this should work also it works if
you this would even work if this were
private but there is some limitation
with this approach so we have no time to
discuss this but first why private here
it is and if I do this way I get always
a question from developers like they
belief that this thing is running on
applications about something so does
like too much magic does dd the prior
approach was just straight and this is
more elegant but also more complex so I
try to avoid this and by the way if you
don't put private
this is fel still encapsulated because
eg B's and CDI they they using proxies
so if the proxies are injected the ID
you cannot just change the state of the
chicken store if there's normal scope
CDI managed beans and ejbs and now the
question from the other atom
why I don't do something like this and I
could skip this and the answers are not
entirely it's more code and no edit
value' in my eyes so I'm in Java it
really doesn't matter actually never it
is equivalent code but I try to avoid in
constructor injection because these are
way too much code very good so other
questions
so someone asked what would you use
synchronized in Java
I would I would avoid synchronized
altogether not even in Java EE even in
Java SE project I would rather prefer
locks than then synchronize that didn't
you synchronize for for several years
already so try to avoid synchronize
whenever possible possible in Java II
synchronize regarded you put synchronize
you put it on servlet and to get then
you will block probably the whole web
application you put in on set as eg B or
request copy GB there will be no effect
because you get multiple instances of
them and if you put synchronize and
singleton you will create a bottleneck
so other questions
Pavel what the State of the Union do you
have question do they have questions
font is large we have three minutes to
go so please ask questions and otherwise
see you one day in person or at the X in
Munich in July or December or next year
or whenever you like or Java one or
whatever conference you like so
questions
no questions then thank you very much
for watching and I hope now the whole
architecture is a little bit clearer in
my hope and sorry for the slides but is
really hard to explain you know the
concepts just with code so you have to
now both slides and a simplistic code
and I will check in the code in a minute
somewhere and and then send you a link
via Twitter so you can download the code
and then try at home with it should run
with GlassFish or white lie equally well
so the code is portable so thank you
very much for attending the Deaf crowd
conference and yeah see you and one of
upcoming conferences workshops or even a
hex on projects on forgetty projects so
thank you very much bye</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>