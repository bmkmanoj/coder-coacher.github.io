<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Custom Managed Thread Pools and Java EE 7 | Coder Coacher - Coaching Coders</title><meta content="Custom Managed Thread Pools and Java EE 7 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Adam-Bien/">Adam Bien</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Custom Managed Thread Pools and Java EE 7</b></h2><h5 class="post__date">2015-02-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/20KVZ0ZnCl4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello my name is a novena today I would
like to introduce you to project
porcupine which is I would say custom
thread pool managing library for Java 7
and I would like to start as usual with
the simplistic maven project the
essentials and I'll call it torque the
project is called porcupine and it's
taught in soma type so we can just
reference it and to do so I will just
specify a dependency and a dependency of
course we are searching for called
porcupine this is this one and I would
like to use this and usually you would
like to use the air hex dope ID so this
is all you have to do to install this
and first I would like to start with the
pin 6 ml and then create a jax-rs
configuration I think it is the easiest
to show you strikes arrests because you
can also expose statistics using Jason's
over JSON or XML and so Jess F of course
would also work or whatever you could
use it in timers whenever you whenever I
like application path is as resources
and it has to extend the application
from RS this is this one from restful
services are now start with the content
and I would start with the statistics
resource and statistics resource just
exposes these read for statistics and so
the pass is going to be statistics and
what you can do you can lazily inject an
instance of statistics and this artist
mystics and statistics so this is all
you have to do we have to import a bunch
of stuff the statistics and I think
would like to expose it as well
statistics and now you can say
statistics get now the dependency gets
fetched or resolved get is just
sufficient and now it is available by a
JSON or XML so this is just basic pool
statistics but now let's declare a
custom thread pool so oryx resource and
the package is going to be the x doesn't
matter this time and the path is of
course parks parks and just make it
stateless and I can say inject dedicated
executor service now execute a service
it's fast work
so the executor service - ordinary Java
8 or or even Java 6 execute or service
and so thread pool and what dedicated
means you can just the qualifier and if
you don't specify anything the name of
the thread pool becomes available under
the name fast pork so and what I would
like to do just create a very simple
restful web service and I would like to
say suspended asyncresponse response
response and here we can say for
instance complete table future
computable future supply async and what
I would like to supply is
the perks so now supply the porks and
this could be Duke Duke &amp;amp; Duke Java and
say then and then say supply async and
then accept response the zoo and to use
the poll we have to specify it as a
first parameter so otherwise to be no
effect actually and should actually
accept the first parameter the supply
async the second parameter sorry fast
pork now that's good what it actually
means right now is this method will will
return immediately so there will be no
blocking threats and we are managing our
own threats now imagine this would be an
incredible expensive operation so it
will be executed in our thread pool and
our threat food is fully configurable
and also monitor able so now let's see
whether it actually works I would just
to run it on glass fish and actually
tested this on payara and on white lie
so I would like to run it and now the
application server starts the database
starts and the application is going to
be deployed so it will take a few
seconds because it's a cold start
actually forgot to pre start the
application server so you'll have to
wait a little bit and so resources I
think works so you can see Duke Java
seems to works and statistics statistics
you see the statistics so there is
completed tasks count two tasks are
completed and executed and the largest
threat posed I was to and the currency
size is other
and the maximum pool size is 48 and
remaining queue capacity is 100 so
nothing happens in the system and what
we also can specify rejected execution
endless or what happens in case you know
the threat put is overloaded we can
receive events and yeah
we discussed this fretful in depth in
the in the in the micro services
workshops at in Munich Airport at the X
and this is the project porcupine is
actually used also in heads Achatz doors
on how the idea during the workshop what
hell is ok this is a load generator for
WebSocket so it uses internally
porcupine so we get statistics you know
how many threats and tasks are executed
and thank you for watching and see you
in upcoming workshops probably the first
Monday of the month at ext fuck TV and
yes you in Java land so thank you for
watching and bye</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>