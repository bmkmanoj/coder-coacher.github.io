<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Java EE Monitoring With firehose and prometheus.io | Coder Coacher - Coaching Coders</title><meta content="Java EE Monitoring With firehose and prometheus.io - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Adam-Bien/">Adam Bien</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Java EE Monitoring With firehose and prometheus.io</b></h2><h5 class="post__date">2017-04-03</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/_FW5472xTmQ" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello my name is Adam Venus they would
like to introduce to you a fire hose is
a small gateway I've wrote which fetches
metrics from any java application you
like and converts them to Prometheus
compatible format according to
Prometheus best practices what is
Prometheus is nice tool which i think is
written go it's a very lean lean tool
which is able to gather stir like
time-series data from several hundred
sources and stores them very efficiently
and provides a really nice
visualizations so what fire house is it
comes as a micro service you can of
course or war sixty Caine war micro
service based on tommy and it exposes a
a URI firehouse resources matrix and
matrix name and also it comes with a
simple docker compose file which I would
like to launch so docker compose up
compose up Manistee so it should create
the network and all these services so
everything is launched if you go here
and see all the micro service launched
so we have this actual Prometheus and we
have the firehose and our sample service
and the sample service is the actual
example so this is what happens here so
and this is a very simplistic or
simplistic Java EE sample service with
application em sample service component
matrix resource units request suffix
total and value whatever and important
thing is this application component unit
suffix and value are the key components
of a a Prometheus matrix which are
suggested as a best practice so I just
just took them and so if you if you just
expose a JSON object with the format so
our firehouse will take it it could of
course overwrite the the conventions
with your own stuff and expose it to
Prometheus so how to override that it's
actually within the matrix and as you
can see here my if I our sample service
application is renamed to sample serve
and the reason is simple service dishes
are not allowed in Prometheus so I had
to rename that it's an example and of
course what Prometheus will have to know
I know how where is the early and it
says ok our firehouse would have to know
where's the Ori and it says ok the
sample service Ori is this and it
becomes available under the name sample
service so it started and we couldn't of
course convey use restful web services
you know to gather the statistics or to
configure firehouse as well so you can
use the environment variables or use Co
for configuration ok so let's see what
happens so I will go here and say
localhost 1990 this is Prometheus and
Prometheus answers and immediately there
should be here the statistics you see
the sample service Metis resource
request total so this is what Prometheus
found I can just go to the graph and you
can see here statistic is online so yeah
it works so this was a easier than
thought brief introduction to to to
firehouse and Prometheus what we of
course could do let's see docker PS and
these sample service is available under
the port 80 to 82
so we could of course go here and say
localhost 8 to 80 to sample service
resources
I hope matrix is the URI
yes it is and I could invoke this
several times and here you will see ok
you know the graph changed so you see it
works and it's really useful of course
it's very first version what I plan to
do is to have some kind of translator
which is configurable and of course
scrape you know even application service
was the same tool and make whatever
whatever Jason statistic available for
Prometheus immediately so um thank you
for watching see you in upcoming
workshops there is an monitoring
workshop where we play a lot with
Prometheus and and and firehouse in
Munich Airport and even conferences you
know Java one is almost around the
corner and thank you bye</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>