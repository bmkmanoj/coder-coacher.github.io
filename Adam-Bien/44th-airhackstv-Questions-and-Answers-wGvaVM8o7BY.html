<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>44th airhacks.tv Questions and Answers | Coder Coacher - Coaching Coders</title><meta content="44th airhacks.tv Questions and Answers - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Adam-Bien/">Adam Bien</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>44th airhacks.tv Questions and Answers</b></h2><h5 class="post__date">2017-11-08</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/wGvaVM8o7BY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello welcome to the 44th edition of a
hex TV with lots of questions so here we
go so let's start with announcement and
this is not insignificant so we were a
little bit tight with the room size here
and I managed to get the largest room on
the airport also the nicest room at the
airport for the day second second - Oh
forth so there will be almost no limits
or so I will probably close the
registration 25 seats so there's our
about I don't know three more seats
available errors really tight is the
first day there are already 21
registrations okay so this is DDD
workshops in December and the next year
so we are after they web edition of a
hex and what I what I did is that there
will be a single page application
without frameworks is a very similar to
the web standards ignitor with a little
bit more at focus like offline
capability service workers and
navigation and routing and the second
day is built on top the first one and I
will talk a little bit about web
components web components tanda
standards how to build apps with web
components and of course mentioned
polymer three or three oh and some other
web components frameworks so this
happens in March and hence react sixteen
frameworks is MIT license so there are
no more no more licensing issues I also
plan to deliver a react framework but it
will be later so I think April or May
okay so this word is news something very
new there is a podcast and I started the
first episode this is October 15th right
after Java 1 so it was long monologue
I'm just talking about Java 1 but the
second episode was was with Sebastian -
nah it is a hex alumni so he attended a
few years ago a hex and now he's also
speaks at conferences Java champion and
we are chat about the state of Java and
there are more episodes to come if you
like register so you can go to iTunes
and get
to fight about new episodes or there's
direct RSS feed so this is this and now
start with the very first question and
the very first question is that during
the talk Java you heavy weight or light
weight this is a talk at JavaOne and I I
delivered a talk because I get
frequently the question to know what
about the size of application servers
are not to be choir music them and they
are too slow and and this this talk only
focuses on that and by the way I'm
delivering similar talk so with a little
bit more content and and switched of
course which the Condors a little bit
tomorrow added a blue Jack's conference
in Munich so if you're a Munich just I
think is around 5 p.m. so but he asks I
didn't mentioned spring why that so why
I didn't compare spring to Java and the
answer is fairly simple so most of us
all of my project are Java I never
started a greenfield spring project so I
would have to prepare something for the
conference for the talk and also what I
did in the talk is I compared
application service with helloworld.java
SE so with nothing so this is the worst
possible case fully loaded or full-blown
a Java EE full stack application service
WebSphere GlassFish and I also used the
white rice warm and I compared them with
server socket with one thread a Java SE
applications there was nothing if I
would use spring I think that the the
footprint of spring would be similar to
a java application service and there
were lots of discussion to know whether
I used the right configuration or not
and and it was like this was not the
point the point was now how much RAM or
footprint or download size we can save
by not using the application service and
and build something completely I would
say lightweight and custom therefore a
spring was not the option in the talk
but if you like prepare something I will
point to it
so now who go works ask me I'm watching
website let's ignite them so what web
standards igniter is an online workshop
which just focuses on you know the UI
like how to call it if someone would say
Java developer would develop or know
applications you is how he would
approach it or she or he of course would
approach the situation and what I did is
I yeah I just in this workshop I just
focus on standards without any
frameworks I'm just building everything
from scratch and show you how it works
so similar what I always do with Java
and so this is the the course is
mentioned here and the question is why
how I would implement the bar in html5
so first it's a very simple bar it would
be undefined so it's very and with Flex
layout you are almost there so it would
be very very easy to implement and but
the SDK the actual question is with
server-sent events WebSockets or long
polling so in the past I always use long
polling and because it always worked
except you know the issue the the timer
should be short not that long
so what long polling is the server
blocks connections and if sorry the
browser initiates the connection the
browser blocks the connection and if
there is something to push to the
browser that server pushes uses the
block connection and then closes the
connection and in the next second or so
the browser reopens the connection this
is the full cycle so what about the
server this is just a simple servlet
circuit or WebSocket it is a jax-rs
asynchronous jax-rs house call it node
server the resource so it was servlet in
the early Java if six in Java five days
so I used service for that and of course
WebSocket is just a one annotation
server end point so in any case in case
of jax-rs there is just one annotation
suspended and async context basic
response what you get and in the case of
WebSockets you have one
with one on tation server end point and
all other annotations are very similar
to the corresponding JavaScript methods
and he uses circuit I or atmosphere
exactly socket IO I would say it's a
little bit more popular than atmosphere
so atmosphere comes from from Java so
it's a actually from grizzly it's a Java
solution and socket IO is used by all
the UI front-end deaths and the question
about fallback so what I did recently I
implemented that chat which used
WebSockets to push the information the
point was in the WebSockets were just
like notification was just a
notification mechanism to notify the
clan did something changed and the
client was meant to fetch T changes
using using jax-rs so in this particular
case if WebSockets wouldn't be supported
the the user would have to push the
refresh button manually so this was my
way of dealing with the situation and I
didn't have to use any additional
framework so of course socket IO doesn't
Morse it doesn't more transparently the
question is know how often it happens
nowadays the D that WebSockets are
actually blocked so it happens less and
less and this is an firewall issue so
this is what you will have to evaluate
first to know how high is the
probability that the WebSockets gets
blocked so this is an interesting one
so saman Passarella asked me do you have
any idea why Jack's pea has been
duplicated with Java 9 and so indeed it
is and there's actually a post so I will
copy 2d to the chat and so let's do this
someone says Adam we wish to see you at
devoxx begum so button you see me right
now and not only you and everyone else
so I had no time this time to for for
devoxx crazy times but thank you and
next time so but yeah so this is the
where was it here
mojo shed with Java not resolved by
default
and what it means is Jax P is also a
part of Java and Oracle decides to you
know to make this the standard and not
the Java SE so in in future you will
have to use additional module with Java
SE to have Jax be Jax P itself is not
duplicated actually in fact if we go to
JCP and I think this is 220 to 220 no to
to do yes Java retexture for XML binding
and the reason is to three version and
as you can see it is quite in
development so we had some reviews and
the maintenance review ballot was in 18
of April so it happens a lot there so
it's not like it's not first developed
it's more like it is it's going to be
removed from Java SE and and not being
dubbed supported double in Java C and
Java e this is at least my
interpretation of this yeah so this is
um if you have any other information
just write write a comment so done that
next one this is actually also
interesting one so who go again so ask
me in my opinion what is more faster in
HTML inner text so now switch the switch
complaint context which so this refers
to html5 and actual not html5 just Dom
API browser Dom API so what is more fast
using and in HTML and in a text so
actually inner text is going to be
faster because there is nothing to parse
any inner HTML what you can do we can
pass HTML tags and the browser will have
to parse them then document create
element document clean clone node and
what you forgot to ask is document dot
create fragment which is really
interesting so with a fragment you can
create preper your elements and then
flush them at one so the browser which
is supposed to be a little bit more
faster so by the way in
at the very end of the web standards in
ignited workshop I created a table with
10,000 rows and I forgot how many and I
suppose 10 to 100 columns I I don't know
how many and the whole table was
rendered without any optimizations in
about 2 seconds so the question is know
what we are talking about what we are
building if you are building a game this
is an issue if you are building an
enterprise app and don't bother with
that just you know implement a simple
just just keep your code simple and
forgot any micro optimizations but still
so and this is nice article I read it
from medium about how to write your own
virtual DOM and which is also
interesting so I will like to open the
article and or use a vendor library so
what what happened is it turns out that
you could actually not not use any
virtual Dom or shadow DOM and just focus
on es6 templates and this is the fastest
methods and this is what polymer 3 is
going to do they will that they are
experimenting with javascript based
algorithm to track changes and this is
called lit HTML I think it's wait a
second lit HTML yes this is the HTML
template literals 4 4 4 premiere in
JavaScript and they make they made some
performance consideration and happens to
be the fastest fastest solution and the
problem was virtual dumbest of course
you need more memory so you you will
have to know to keep the elements twice
once in the browser and once in your
shadow Dom in one point of time to
synchronize them so why this solution
why I am talking a lot about virtual Dom
because every Java developer should
should should understand immediately you
know what virtual Dom is if you if you
look at JPA an entity manager so the
entity manager inside is something like
a virtual Dom this is called transaction
so if it creates a changes and actually
in the
article they have similar problem you
know how to detect changes of non-number
existing entities or Dom elements and
what the what the the entity manager
does it calls that unit of work
internally so um you are you are
dispatching the changes so all deleted
entities and all updated entities and
all created entities and at the end of
the transaction this is what is flashed
to the to the Dom this is what angular
does with zone so at the end of the
rendering process everything is
synchronized and this would react also
does with the virtual Dom but polymer
will do something different with our
templating without virtual Dom and that
they claim to be as as far as as virtual
Dom so what what does the message is
here forget about optimizations a write
simple code okay I hope it's clear so
now Vic to ask me what are the reference
implementation servers are similar for
eclipse micro profile so Eclipse micro
profile I think it is efore J so I know
for a for J there will be a several
reference implementations for one API so
it's not like D one implementation
rather than multiple and the micro
profile is implemented should be
implemented by Tommy swarm and of course
payara micro and to my knowledge there
is no reference implementations there
are multiple reference implementations
and this was actually discussed in the
e4j mailing list so if you're interested
in it look at that so what we will the
impact of the new release scheme for
Java of Java SE so this is like we get
the next release release is going to be
18 3 which means 2018 and March for the
e4j or spring so I'm I think what will
happen the features of Java Java 9 could
lend earlier in the spec because II 4j
will move faster than Java II did
because the process is more open I hope
right and and and spring is even faster
because spring that there is actually no
specification to follow the
and do whatever they like so of course
they have to do to listen to the
community but they could move even
faster I think what will happen is all
the new features will be adopted by the
micro profile first which going to be
like an incubator for all new features
and then if they feature major they will
land in e4j yeah and spring will be
probably as fast as micro profile so
this is probably what will happen so and
what are the next feature which we have
to watch closer is the the I actually
forgot that you can skip the the types
for declarations of variables in using
just var like the es5 was in JavaScript
okay
they are at months on first nice to see
you
so this is a very short story so
monsieur desmond asked me at JavaOne
whether i would like to drink something
something of the de session via twitter
and my answer was we are a java one and
not oktoberfest so i'm glad not to drink
anything i will just look focus on java
and then i drugged and drunk a coffee
after the java one in a coffee near
Moscone and I met there and Monsieur and
the rats Minh and he told me you've
wrote on Twitter that you are not for
drinking here and drinking some coffee
so we had that coffee together and a
nice chat so this was the small world
story so I'm what I have experience with
eg be timer synchronization via hazel
cars not with hazel cars rather than
with database so if you use database
there's actually not nothing to do what
they will do is they will just store the
values in the in a central table so if
you have in a docker Network this is not
issue at all because if all the hazel
casts clients are in the same docker
network hazel cache just works this is
actually what what happens on my block
all these stats are stored in several
hazel cars instances running in dhaka in
the same network and the synchronization
just works so I'm confident it will work
the problem of course is you know what
we expect because if you if the timer
will have to synchronize what it means
if the time of fires in one note what
what you would actually expect that the
note locks until the changes are
replicated everywhere else and then
delux is freed which may may may link to
deadlocks and if you would replicate
asynchronously the timer could fire
multiple times anyway so what can
happens then of course if you let's say
that this is a unusual setup but the
time I could fire every two milliseconds
and let's say or let's say every second
and your application takes one a half
second then it just wouldn't work so you
get a multiple timer initializations in
the same network so this is the problem
is there an easy way to test it so easy
way to test it you will need a central
database with a table with name of the
node and I will count something up and
see whether it works and and then the
test will just go to the database and
see you know whether there was just one
node counting or multiple nodes this is
how I would test so in order to test it
you need a central central place a
singleton and the best singleton in
distributed setup is a database I hope I
answered your question
so bile lovage in order to generate
reports I use several sequel and
processing in my java code one solution
is to prepare the data in views and I
used the report to generate the data
from it so it's the use of views a good
thing in this case absolutely so a
database views I hope this volume in so
a create view from whatever from select
so and and this is actually the best
case because the data is already
prepared in the database and you get a
very very nice it's called API which is
accessible via API so you can map a JP
entity to a view and fetch very
conveniently the repo data or use JDBC
for that and by the way my n hit rate of
framework
it would be also perfect for that so
what it could do is just you know I use
JDBC to fetch the report data and
transform it in in rural time to Jason
or another format so CSV Jason and the
problem is of course the question you
have to ask is how often you have to
adjust to reports if this is a one-shot
report so viewer perfect views are
perfect but if this is a report which
changes frequently because you get new
requirements from the business
department then in my eyes would be a
lot better to keep you know the repo
definition outside the database and what
what I would even think about us to use
jsps for that Java server pages so why
not
so there's actually an old and an
extremely fast solution in order to have
scriptable data access of course what
you shouldn't do use too much scriptlets
in the GSP view but what you could do is
you could have like a data access layer
which could be CDI beans which go which
are named at named and then you can
inject them into a JSP so if you like
injection CDI injection to GSP would be
a nice three minute screencast so if
you're interested in it just pick me and
I will record and so the implementation
that I want to do is with JP I okay but
according to my knowledge is necessary
to use native query and not necessary
you can use if you have to use native
queries use natan use named named
negative queries this important native
quarries are a little bit dangerous from
security consideration what you could of
course use named queries why not so you
can just use named cores which get
translated to native queries and a new
case consider map the JPA to a DB view
so it works absolutely we did it in
projects okay so our radius database
data base I think yeah ready say Oh
so this is the Redis databases in memory
data structure uses database and the
question is now religious Redis I need
to start a new demo project which should
use radius in combination with Chuck's
res so Vassiliou
the question I have to use what does it
mean why you should use Redis so who
tells you that so why is necessary to
use Redis in combination with dexterous
the application should load some basic
data from database ok make simple
computation based on the rest input
param I mean
rest input parameter there is probably a
post or put method and there are some
pass params and you will parse the
params and do something with it and save
the result in reduced for later requests
later requests probably means you know
in later transactions and then in-memory
database could break so I think the
Redis will run not in process what the
NASA troll plays can you help me to
understand what should be the correct
architecture of such application and is
available to have this combination
I mean first I have no idea what you
would like to build so it is unusual to
use Redis just without any additional
you know requirement so Redis is just in
in memory fast in memory database what I
would think as a Java developer first is
h2 or Java DB for instances in memory it
is extremely fast and and regardless
which solution you are using what what
you should be a little careful list
duration some costs associated
serializing and deserializing Java
objects from a external database to
memory back and forth so my first idea
would be to use concurrent hash map as a
very simple cache and then see whether
it actually works so you can use a
singleton just go for it so and and and
Redis I mean I have question is no for
for instance I use in one project
elasticsearch and why I use it because I
really wanted to have full-text search
and they had already JSON in place that
there wasn't natural
so it was easy to explain what to choose
so um if you have would like to have
just no Jason you could even go with
Postgres so it's like you know very fast
database very easy to install and with
Jason and and even no sequel support so
um yeah it is a viable solution so what
would be the correct architecture it
will be a thin war no dependencies there
will be a PC boundary control entity it
means I would think about the concepts
the concept would become the component a
top-level package within the package
there'll be boundary and the boundary
you get a resource like for instance
computations resource this would be your
entry point then you get a computation
service and onto this service you can
inject a remote reference to read its
elasticsearch or whatever database you
have and Redis is not supported right
away so what you will have to do is to
integrate that and if you like to
integrate that how to do this yeah you
would have a class it could be a
singleton or not and this class will
produce the Redis binding which can be
injectable everywhere so the correct
architecture in your case a
proof-of-concept should be no more than
three classes by the way my recent
project two weeks ago was worse or
really fun so I got it will about 40
classes proof of concept and and I had
to review the architecture and the
review I spent I think I don't know two
days just describing and 30 PowerPoint
slides in know what not to do and my
client who told me okay could you just
change that so what I did is I I think
removed everything and what what what
was left was like I think four to five
classes in total was the fool Java EE
applications without any dependencies
and all there were multiple frameworks
involved and then mappers and everything
was gone so this is this was my current
project so in your case there should be
not more than three to five classes if
this is a Java yep ok any questions here
no questions here
I don't know nothing here except
requests to be and evokes Belgium is
impossible to be in Belgium and in
Munich or ADX at the same time so done
and this is cool I have been working on
a part of Java roller block code to Java
EE this is really fun because archive
and ambient come I think yes what this
is this is archive of all my blog posts
going back to 2006 with the second post
why blogging and over eclipse so let's
see over Eclipse Eclipse Callisto so
about eclipse so interesting so um and
what this is I just I was asked whether
there is a no like a summary of old blog
post I've wrote which this is exactly
that and how it works is are using SPG
this is the static page generator from
look at github for us SPG and atom beam
and it direct directly connects to roll
a database to us this is also the block
engine am using and it generates that
and I thought about replacing the
original Apache roller with my own
implementation and it seems like relay
and does something similar this is why
was really interesting so and he asked
me about he working on a part and is it
beyond scope of the show to do our
critique so um yeah yes but this is
actually as I mean a smaller project so
we can absolutely do it so what I did is
I just open the downloaded resources and
open the project and the coolster is now
I can talk about the sources usually I
cannot because all the source I see is
from my clients with lots of ndas and
the first time I get something you know
open source and someone asked me to
publicly criticize the code which is
great for me so first I open that so
what I would in do in my reviews I would
just open that and see okay this this is
not a Java EE project this is a lots of
dependencies and I would ask first
why you have so many dependencies and
the answer would be probably because
this is a port and so what I would
expect over time to remove more and more
dependencies from from there and then
you should end up just having Java 7
this would be this would be my my
requirement to our Java EE port and then
what I found first such as would
variability open the various package and
what I found is this and an interface
with abstract manager and it does not
implement the interface but if you look
at that I will question the added value
of that so actually in commercial
project I will fully delete it because
it's the open source project
I could say ok this is an
experimentation which is absolutely fine
but in in commercial code reviews is
uber defect because there is no added
value over the entity manager so first I
would delete both and also this and so
so let's keep this so I think in the
later if you Henry if you are still
interested I could criticize you further
the next package in the next episode and
the next if you would like to be a
successful open source project you
should also change you know the
packaging name I wouldn't use your name
here because you know the other
contributors you would say ok this is I
don't know we would have to have
something neutral so and then you could
look at my project say hey why you are
using comma X and the answer is is a
little bit different so I'm using comma
X because some of my projects are in
sauna type central in one requirement is
to be open source and you have to own
the URL and the only non personal URL
their own is comb DX and everything is
coming X which is public so this is why
I music going this way and I'm not that
interested in contribution so I'm not
you know the perfect open source guy I'm
more you know I do something fi di I
push it to github and and and and see
what happens but it's not like I try to
build build you know a new business on
open source software so whether someone
contributes or not I'm
I'm fine with that and and and honestly
I wouldn't have time you know to support
projects I don't know is one day a week
to create new features so this wouldn't
work but he has some specific questions
and the questions are works oh no for
whites we hibernate and he added some
stuff the classes in questions are the
users entity search last just open the
users entities and I couldn't identify
the problem so if we look at the users
entities or first he says this entities
does not work on Windows so no entity
doesn't work on Windows here to rename
it to entities this cannot be true I had
you in Windows before and the entity
package name always worked what I guess
what he did is he generated the entities
from a database and then also generated
properly the boundary from a database
from from from with NetBeans but the
entities really look like generated
classes so what you should be careful I
will look at danced at the name queries
and really think about how many queries
do you really need because that many
queries will cause slowdown of your
deployment having said that I couldn't
identify the problem so again I couldn't
I didn't deploy this to a glassfish
because of time but there is no
dependencies on hibernate there are no
hibernate specific features index
classes so it actually could work what I
would do first is to remove everything
you don't need and then and then like
this this this looks actually reasonable
and also user old so I couldn't identify
any problems which are you know
hibernate specific and therefore they
don't work run or it couldn't identify
any hibernate specific features okay
also something like to use a manager
here so at a new user this for instance
okay this this this works so we have the
entity manager but you know the whole
inheritance I will remove that so I
thought about create apart with
different focus it's
like you try to provide a multi-tenant
solution to a blogger I think I wouldn't
do this anymore so this is what's called
planet in blogger what I would do is
like you know a block engine for a
single user and in the micro-service
world you know who cares about
multi-tenancy so if you have five
tenants you have five micro-services
what this was the best possible
isolation so if you do this you could
remove you know all the users and
security all together and you end up
having you know a block engine just for
one block instance if someone would like
to know have more blocks then will
instantiate more engines which is far
easier to manage monitor and we all know
that the Java EE is lightweight enough
that should be known no issues if you
are still interested clean up the code
and drop me a mail and we have the
renova review part 2 in the 45th episode
almost Christmas we'll be in the
beginning of of December okay so now
something happened in the chat so what's
wrong here so I don't get any the view
is loading okay so Henry says thanks for
even the project so hopefully you are
still happy so um I was a little bit too
critical but you know he asked me for
that and this was the first first
impression
so again if you like if you if you like
clean up the code throw away all the
code and a throw away are killing
whatever you have is not needed so keep
it really simple extremely simple make
it work then you if you would like to
make it grow so many developers from
outside will help you but if their code
is simple if it's too complicated you
know it is no more javi okay thank you
and I will keep if you like reviewing in
the next episodes with all the attendees
so we will have multiple I don't know at
the end of the day could be no over
thousand reviewers which look on a
project similar thing so it's like the
Omega zero nine ask me about design
question with a checked in project so
also interesting ok now a lot from rola
this is what I thought so handy what I
would do is
I would know this is what I actually did
in my project I would just create a
block with Rolla one single block then
export the tables and create from this
crucial tables the entities that we did
you know the crucial entities and then
drop everything else so this what I will
do and I know that the roller block code
is not that easy to understand because
the night hex book it was just just
created because of that so I wanted
actually to enhanced blogger the D
roller software with statistics and it
didn't work for me because the old
spring version was old hibernate and
whatever I did was not compatible so um
I just created a project x-ray and all
the statistics statistics are computed
outside so this was actually the the
idea there so I would just not even look
at the EDA source and just create
everything from scratch I think this
would be you will move faster with that
and you could keep in the first
interations the tables compatible that's
an idea
cool thank you
now injection test so a similar story
someone asked me about and I think we
answered a similar question the last
time but my answer was not good enough
so we get the second answer and this is
computation processor so now let's start
with the resource so I'm just walk
through the code and then look at the
question so it looks like we have the
resource which of course in real world
do we better name like computations
resource and there's a responses
computation for me with long idea and
some path and what happens here the
service we get an entity and the service
goes to the entity manager with which we
could remove the private here and then
the entity we got the entity which is a
persistent Oh which is a persistent
entity by the way I look at the code oh
not this yeah and the first thing I did
of course I look at the dependencies and
this is a beautiful Java 7 project you
know single dependency and everyone
knows what happens so
the my entity is the persistence entity
and so I get the entity here and then we
have a container so and this is what the
problem starts so states will request
scope cannot be state world says
stateful session scope would work but
this does not make any sense request
code means it is for the request and
stateful means it the it lives longer
than a request and to make this work
this class should be serializable which
causes even more trouble
so stateful should removed with with
request scoped alone this is actually
this word you would get anyway so and
let's go to the code further so and then
you would like to compute with the
computation processor so and the and the
process or what it does is it gets the
container I think to get the access to
the entity and now you do something here
compute some steps I change the age of
the entities or base or each steps can
change the state of the entity and then
you are done and then the entity is
saved so I think the problem is a way
easier to solve without any magic so
what you could do is so my understanding
is you are in the lucky situation that
you have the ID for the entity so you
can fetch the entity so what happens if
if this is a stateless just put the
stateless here so what you get is this
is transaction begin and this is
transaction end so the entity you get a
copy from the entity from the entity
manager something like a virtual Dom so
your personal copy of the state then you
can the compute you can pass the ID to
the compute processor here and the
computation processor could fetch the
entity in because it is in the same
transaction it gets the same reference
to exactly the same entity and then you
can do whatever like and the cool story
is you don't even have to save the
entity because the entity is already an
annus Oba so called managed or attached
entity and then you are done so actually
you can remove everything you only will
have the computation process so with the
I D or you can pass the entity or the ID
and does not matter and at the end of
the computation and at the end of the
computation all the changes will be
automatically start in the database now
you're asking about async in your
solution will also work in an async way
why what it could even do you consent
tid as a event CDI event and then
asynchronously and then someone wakes up
processes the entity and stores in the
database and you are set and their way
back could be using web sockets for
instance so you can push the changes
back with web sockets so this would be a
more extreme case what you could also do
you could use here you could just do
this and put here suspended suspended
async response and response so and what
it could do then is of course response
dot resume so you can start an
asynchronous process and with the resume
you can push changes back to the browser
so this is what you could also do if the
computation takes longer the browser
will block but the server but what the
server would not consume any threats or
any HTTP threats for that I hope it's
clear if not change the call and ask
again so you have for four weeks to do
this cool so let's see what happens here
so Twitter's quiet sirs
ah you ask me
Brett Tucker asked me whether I would
like to publish my podcast this is a
hacks FM to Google Play of course if
it's possible I would do this I would
check it out so I will try to do this no
issue with that
so um everything I did belongs to me
actually the the feet is also generated
with SPG and so I have complete control
over everything so I would try to do
this over Thank You Brett and Brett a
viewer view years ago he was at Airport
unique drug shops Christmas edition so
it's time to come back okay so we did
this the next one to used to recommend
boundary control pattern for jacksters
application not only that so actually a
java one there are a surprising amount
of attendees who came to me and told me
that the BCE works really well in
conjunction with java and so i can tell
you not only i consider so it's a good
solution it's the other developers also
like it what is the best practice to
store conversational state in Jax or a
stateless session bean application which
is scalable
so first what means scalable so what is
your the limitation the limitation I
usually memory or threats something like
this so if you would use stateful
session beans or something session
scoped the question is how many
instances you can you can you can keep
in memory until it breaks the next
problem you will get is if you have a
load balancers it is they they have to
be smarter because the same user should
come back using cookie or another
technique to come back to the same note
over and over again otherwise you get
some trouble synchronized synchronizing
just the state across nodes so the best
the best present the best practice would
be to keep the state on the client if
this is not possible is properly to keep
the state in a fast database so the
ready solution could be also an
interesting stuff but the problem does
not disappear so if you would use
something
like Redis the question is know how to
scale Redis so how many instances
because if you have one instance in
memory you get you get the issue that if
the instance disappears or the state is
lost the question is is it crucial or
not it shouldn't be because it's
conversational state if it disappears
nothing should happen and the most
seamless and interesting solution would
be to use infinite span or hazel caste
for instance this would be because what
you could do you can store directly in a
hash map and the hash value replicate or
across all instances cool so what's here
why have you removed private from
anti-de manager decoration for easier
task because if you remove private and
unit s is the same package as the entity
manager I could skip in or kill and
everything else and just instantiate the
entity manager directly I think there
are multiple blog posts about that and
also some some videos it is past time to
come back next year yes spread so see
you next year would be nice now
I'm Java and Java advocate and actually
I'm not sure whether I'm dead advocate
or evangelist and more you know I'm just
talking what I'm doing and what I'm
doing is how Java and Java and now
JavaScript so feel about the fact there
is no official or at least in official
Enterprise ready Java solution for the
browser anymore
I think JavaServer faces is still
official and the a jf2 3 there are alive
with servlet for all support with HTTP 2
with lots of community contributions I
would say JSF is still great and I also
have to say I'm working with some
startups and they really love JSF so I'm
really be cautious are ok no JSF is like
not the most popular technology in Java
and is a-ok in Java ecosystem and to say
we don't care just works so then we have
J's peace I mean just peace also great
it's like server-side templating right
so I mean there's whether I use mustache
or handlebars or J's Peters are not
loved
of difference I would say so I'm not
talking about server-side rendered HTML
but our technology which makes it
possible to build offline first
progressive web apps or even hybrid apps
for all major mobile platforms I think
to answer to this is actually the web
standards training I showed you earlier
so this thing here so I am not using any
frameworks here so I'm just using the
platform which happens to be the browser
platform the question is should we build
an alternative java ee based platform in
javascript which i think wouldn't lie so
what I did here I tried to prove the
point that you can you just use browser
and and and build decent apps without
any frameworks which is a very Java
istic way without Java EE to develop
apps and I also think about you know ii
am recording also more stuff which is
free this is the it's called bhanu
section and there are some more features
in pipeline so you sue responsive design
and i plan to do some offline stuff here
just to show you what how far you can go
without any frameworks so i don't think
it's necessary to do this ok so I hope I
answered the question so on then mmm Amy
says is there an end point GlassFish
out-of-the-box to deploy static files on
the dock root folder I don't think so
what you can do you can lose use loader
loader atom being a small project for me
it just uses the REST API to deploy and
to to deploy a application and what we
can have you can have a war just was a
static content and with its called I
think GlassFish web and with glass with
web.xml this is the proprietary
corresponding parts to the web.xml with
that you could say you know I'm thirsty
I'm referring to the root folder and try
to do this so this could work but an I
had no time you see this 8 hours ago to
check whether there's actually an API to
write something at the dock root folder
I don't think so because
you could break glass wish itself okay
do you know hi Adam
so he's talking about micro service what
about Perot topics so Pro topics
security load balancing high
availability service discovery in the
fourth are those topics covered by some
of your online courses so Java micro
services online course and if we go
further there's no security but here
starts in our dynamic linking user with
user-defined networks linking containers
with legacy link service I would say
starting with the here with 58 to 69 is
all about configuration load balancing
and discovery
having said that would ever had talked
at conferences or in my books is
actually what I'm doing projects and
what happens in projects is one project
this year they had five microservices
often my visit they merge everything to
one wore thin war and then they will
split it again to better micro services
then was another micro service project
where they reduced the amount of of Wars
to a view from I would say 22 up around
five so I don't think it is a good
practice to have you know hundreds of
micro services just to introduce you
know discovery or or API gateways what I
what I see is you know they need to to
have a stable or ease because if one
service talks to another service using
rest or any connection based technology
you will need the URI and this is solved
by by docker and openshift and actually
all these solutions are capable of to do
of doing this and in my current project
we use open shifts and it's also solved
because an open shift at the end of the
day uses kubernetes and kubernetes
exposes these services using the service
endpoints and this are stabled load
balance so you can absolutely use this
or ease stable or ease and you can even
have rolling updates behind the scenes
so there is actually no issue at all but
I
get a question all the time so and
security is also soft by stuff like
openshift docker plain not dock
enterprise das so um I try to stay away
from security load balancing so covered
in YouTube channel actually there are
feel free sessions I use nginx and H
approxi for load balancing let's see
YouTube are very good come on
and there should be cloud and service
yeah and then no cloud and server less
then do we have here micro services yeah
micro services playlist so and in one
point of time so this is communication
between wars with WebSockets we have
pushing Java thin Wars or clouds so on
and and end there should be load
balancing I did it with HR proxy yeah
load balancing Java micro services HTTP
load balancing with dock and nginx and
this is another atom which with similar
terminal setup okay so I covered this I
mean but what pro means pro means what
you would usually use in projects right
so this so what are the pros and cons
using things like para micro sin wasn't
a full container yeah this actually
would also ask myself so I think I mean
I would say what is the advantage of
using full container the advantages more
people using food containers so if
something breaks you get more answers
and pi are micro or whiteflies form is
more optimized solution
- to our problems which you probably
could have but you don't have to have
them so I think the difference between
your questions and my approaches
I just know try to use the simplest
possible solution or no the most popular
solution among my clients and see
whether it works and if it's good enough
I just don't try even to optimize that
so this is what I try to do and it works
well and then developers like it so and
pirate micro I see one one benefit of
pyro micro like you know fully packaged
jar what you could do you could create
your own distribution which already
contains some security libraries from
your company certificates everything
inside the jar and then it is easier to
distribute then a docker container
properly doctor image something in this
direction this could be a benefit and it
was a nice soft I take it off at Otto's
looking forward to become program of
course yeah I think this is the
reference what I told in one Java one
session so III shown my own old code at
JavaOne it was from 2001 criticized
myself and there was somewhere I know
like I had a URL Java - our high tech
comm as okay I start as an architect and
then and I was promoted to programmer
over time okay
now I used a batch in view projects on
JBoss AIP this is Monsieur
mr. patches our schedule it on eg be
beans using at schedule annotation but
for that reason I've fire batches using
rest it should be cabbage
ok so what it does I guess he directly
invokes these schedule methods the
problem is that sometimes it should be
fire a batch on my dev environment when
project is deployed but there is not
desirable solution how to prevent it
what is preferred model to work to
prevent fire schedule on death
environment now
so what you could do just misuse the
class here you could actually create an
item a time a service so and then a
method timeout
and then what you could do here you
could say wait a second Tyler service
yeah time and service save entity what's
going on here code is broken
ah the name of the class is resource
this is why it doesn't work so okay so
go somewhere else so we have the service
so and we could inject I'm a service
resource timer service service then in
it post construct and this could be a
singleton which is startup so and what
you can do here is this service create
exactly create timer let's say here any
time you like I guess you could create
single action timer and let's say with
any configuration like and the point is
the timer you have here
this year and the timeout methods the
timer will fire and what you can do you
can actually cancer the timer if it's
fired and we initiate it so what you can
do is after it fired you cancel it or
you cancel first then do something and
then call the method again so you have
full in full control how often the time
of fires and there's this create I think
it's called create calendar timer and
you can even have scheduled expression
here scheduled expression as II and just
you can just use whatever you already
did so you can say day of month you know
it is no usually we say hours every hour
right every minute and every two seconds
do something like this do something and
I pass the expression and now it is
initiated so it will always fire and
then I can just recreate a new timer by
calling in it so I can cancel this one
and recreate a new one so then you are
in full control whether that time I
should fire if not so um I implemented
something like this not to overtake
already-existing no timers if this no
we'll find out every second and this
will block for two seconds you might be
in the situations that wouldn't like to
ever know time is waiting for each other
and with that you can say okay first now
you are done and then I will create a
new one and then from then in two
seconds something should happen this
could be also solution to your problem I
hope
so they say ask me is it the vegetable
using nurse called back-end for
real-time solutions like payments if yes
which vendor do you advise ha first no
squirrel is not a solution not a
real-time solution for payments the
question is why relational database is
not good enough so um the answer could
be because my payment is no crazy
structure like you know jason-3 like
structure and it is really hard to to
write it to tables to fit it to a table
or it changes very frequently and we
cannot migrate the table back and forth
so stability then you will have to use
no sequel and for real-time solution
like payments or real-time solutions I
think is what you could use seems like
Kafka it is not like no sequel database
is more like persistent queue so I do a
replacement for GMS persistent queue if
you don't like GMS persistent queues you
could use Kafka's but if you already
have if you already have for instance MQ
serious installed in your enterprise
just go with em too serious a stable
solution and it works but if I have to
choose to install a mysterious by myself
or use Kafka I will probably go with
Kafka so um yeah and a real-time
solution I mean the real-time solution
if you are searching for a streaming
solution this is what you could ask you
know you get a stream of payments and it
would have processed them in real time
there are specific streaming service but
this also calf code you could do because
who's Kafka can move back and forth and
process the the events afterwards yeah I
hope I answer your question you have to
be more specific giving more some more
context but short questions are better
for the show okay so what's here ah
he was a Munich warrior the axe that is
more interesting so first streaming
stops now streaming still works seems
like it works and what's here so do you
recommend using Jake edge with hazel
cast you can use Jake as with or without
hazel cards because if we just use hazel
cards I think you get two lines of code
which are dependent on hazel cards and
everything else is basically concurrent
hash map if you're only interested in
the cache okay so and seems like you
have streaming problems but everything
is well working well in here and
everything was recorded well I hope and
yeah so I would say see you in December
thank you for the project to review it
was fun so if you like we can keep doing
this
so just implement your engine and
implement your injection test develop a
further pink me and I will review their
game and package you a package so if you
also like it do it so if you like check
out the podcast and see you at Munich
Airport where was it here next year with
standards this would be more like the
enterprise solution to the problem
without Java even just with pure
JavaScript and if it likes you in
December so thank you for watching and
bye</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>