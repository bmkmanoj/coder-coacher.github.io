<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Dependency Injection ...and there is no magic | Coder Coacher - Coaching Coders</title><meta content="Dependency Injection ...and there is no magic - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Adam-Bien/">Adam Bien</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Dependency Injection ...and there is no magic</b></h2><h5 class="post__date">2013-04-19</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/WL5bqoXFBWg" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hi my name is Adam beam and today I
would like to demystify dependency
injection a bit I have the impression
that dependency injection is still a
myth I get lots of question how it
actually works so what's the magic
behind annotation so let's create a very
simple inject injector from scratch to
show you how it actually works
my own injection a simple Java project
with the main method and what we would I
would like to start with is with a
annotation and annotation is actually
and looks like an interface I would call
that please inject and this is
annotation so it has it looks like that
I have to specify whether it is visible
for reflection or not and actually all
annotations Java EE related annotations
have to be runtime because only then the
reflection facility in Java is able to
locate to find them and target I have to
specify this a hint for the compiler
what what can be annotated and I decided
to just annotate fields and yeah and now
I would just need a class I would say
this is the presenter and we need
another class I would call that the
boundary and I would like to inject the
presenter and the presenter the boundary
so what I would like to do is just to
inject please inject oh not please
please inject
so wrong one and then see whether it
works so and now let's build that so we
have a boundary and we have a presenter
which would like to have a boundary so
and my own injection let's assume this
is the container so first thing to do is
to load the class so I would like to
class boundary but usually I would like
to load it dynamically from with a
string because I don't like to be tied
to the particular implementation
actually if you think about this the
container also does that so it just
scans for classes at deployment time
searches for the classes with a string
and loads them so I would like to search
for the presenter and throw some
exceptions and what I get back is a
class so what I can do I can just get
all fields get declared fields and I get
an array of fields and now I would like
to search for fields with an annotation
so I will ask the field field
give me please give me please the
annotation of Type R please inject and
now I will get back the annotation or
null and then I can ask if annotation is
null so now I know the field is
annotated with the please inject
annotation and now I can even ask the
field for the type ok what type you are
field and I get best back the type and
this is actually the type should be
there at the boundary so what I can do
then is to say ok now I have the type so
I could actually instantiate the other
side
the other side side so and now we have
the instance of the other side what I
would like also have to have the
instance of the left side so I would say
large class new instance and let's say
this is the left side for now this is
the presenter the other side so now we
can say filled set left sides and the
other size okay to increase mental
maintainability I would call that right
size okay so now it should be injected
and now I can call say okay after all
our left sides which is the presenter
and I will just to print it out and see
whether it works run and as you can see
so we have the boundary filled it's
injected so we built with 30 lines of
code and an injection provider which
actually works but you could argue it
only works because this is in private
which is actually true so if I declared
private and we run it I get illegal
access exception in thousand work but
private is more and more or less
like a like a hint so what I could do
right now is say field set accessible
through and now it even works with
private and to show you that it actually
works I can say here to string boundary
hey boundary and rerun it NOC boundary a
boundary so the presenter as a field
with wit injected boundary so our happy
injection but actually U is actually
similar what happens behind the scenes
except the container has to better
manage the instances doesn't doesn't
create instance for every injection but
cashes them dependently whether this is
an EJB or CDI beam but actually works
that way
so in J hacking and by the way you
experience the first ten to ten minutes
of the bootstrap a hex workshop Adam
Munich Airport and by the way I built
also a similar injection for a Java X
project called afterburners as a small
injection framework even so you can just
look at that but it's still one class
with about 100 lines of code so thank
you for watching and see you one of the
upcoming conferences workshops or one
whatever or Java one okay thank you
you
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>