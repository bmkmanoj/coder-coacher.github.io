<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>HTTP Load Balancing With Docker and nginx | Coder Coacher - Coaching Coders</title><meta content="HTTP Load Balancing With Docker and nginx - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Adam-Bien/">Adam Bien</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>HTTP Load Balancing With Docker and nginx</b></h2><h5 class="post__date">2016-12-05</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/CS6bzlwdhqU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello my name is Anand bina to do like
to show you how to load balanced
application service and we use Tommy
fool 702 and engine X this time as an
examples in previous episodes I used H a
proxy so this time I will use Tommy 702
so this image downloads Tommy and
install staff in an image called a hex
Java so it's the base based Java image
and I actually won't use this image
rather than inherit from this there's
another image called Tommy pink and it
just comprises simple app pink war and
this pink war is a health check it
exposed the sets of gem X data and
simplistic pink app so it provides this
Ori so our load balancing actually load
balance this health checks I will start
to Tommy's and use nginx up front so
nginx also two images the first image is
the base image just installs nginx and
the second image inherits from the first
one and adds the nginx configuration and
this is a fairly simple so it just
defines two service pink one and pink
two as a host names you know an upstream
called pink and it listens to port 8080
so it also exposed port 8080 and what we
do or I also did the statistic are
exposed with slash stats so our
simplistic statistics so this might be
not available if you build nginx from
sources if you use the binary
configuration or binary distribution
usually statistics are available so okay
so let's start start with that and what
I will have to do I will start with the
network so I will have to define the
network first so dhoka network create a
hex so already exist so let's remove
your hex 10 so remove it first remove a
hex and then create a hex okay dokin
Network inspect a hex so now the network
is created and there are no containers
included so the network is empty so why
network because the H a proxy will have
to to communicate with the pings
so um then
I would I would like to go to the Tommy
pink and build that so Daka built - tea
is this air hex Tommy pink this is the
attack so it's built and then we can
launch we can launch we can launch toka
run - tea without port mapping but in
the network a hex and the name is
important the name is pink one and what
we have to launch is a hex Tommy pink
okay it looks good
try that so doc IPS looks good dark
locks Knox pink one looks also good so
everything is deployed and inspect so we
have in the container there's the first
first container in the network so I will
do the same so we need it pink - because
of load balancing so done and then we
can launch the load balancing self and
this is going to be run - Dee and this
time I would like to expose the port
otherwise I wouldn't be able to
communicate with the load balancer I
will name it pink one but it actually
doesn't matter and the name is engine
x-h a pink this is the name of the image
and water of course for God is the
following what I will have to do first
run and then say net
yeah X has to be launched in the same
network so uh and the name should be
pink perfect
dr. PS so all three images are running
so let's see whether it actually works
localhost:8080
and you can see Atami
answers then let's see whether we were
able to reach the pink so nice there's
the pink and see what these tats are
doing so also it's working
so and to demonstrate you that is
actually the H a proxy I'll do this
following curl - I so the engine X
answered the request so um
load balancing with Java is actually
even without clustering is a easy task
and and what we used here is actually
roll around Robin algorithm because it
was not configured and the default is
round robin and yeah enjoy java enjoy
java thank you for watching and see
upcoming workshops Airport Munich the
online version micro services or
projects conferences Java user groups
meetings or at the xtv is the first
Monday of the month at 6 p.m. so thank
you for watching and pi</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>