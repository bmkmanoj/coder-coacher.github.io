<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>2nd Airhacks Questions &amp;&amp; Answers | Coder Coacher - Coaching Coders</title><meta content="2nd Airhacks Questions &amp;&amp; Answers - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Adam-Bien/">Adam Bien</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>2nd Airhacks Questions &amp;&amp; Answers</b></h2><h5 class="post__date">2014-05-06</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/hRrKFgZAMR0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so hello welcome to Eric's interactive
Eric's question and answers the first
Monday of the month and I got too many
questions actuary so I couldn't pick any
questions from my blog so I start with a
really good question from Roman Edelman
I got the question via Twitter and the
question is the first question is
deploying jars with embedded containers
so what the story in Java it doesn't
make sense or not this is actually the
question and I mean it was always
possible to deploy java applications as
jars actually it it is a typical egb jar
it's a jar but you can even create a
very simple one so I will just create
one and call this maven project I will
use my own archetype come in hex I will
use the version 1 - just a jar so it
will create a war project so it will
take a second because it fetches this
artifact from maven central and the
packaging is war I could just use a jar
packaging you see it changes the icon
but it's just just a jar I could use
exactly this and then let's see I could
use for instance something like
jobscheduler
and package come in hex and this could
be a regular a GB it has to be something
active
you can adjust deploy POJO store or JPA
objects or JP entities to attest to
something which starts with the server
so I will even use startup singleton for
this
and method schedule no idea how to call
it scared dual annotation and this
should fire every couple of seconds so
our and seconds let's say every two
seconds every two seconds and all
minutes so and this should work so if
you would like to use dependency
injection
what's okay sure if you would like to
use dependency injection you will have
to create bins XML file this is the deal
so without bins XML it would not work so
this should be deployable so if I will
just build this
you see I got just a char folder and
yeah if I put it to the folder of an
application server it should work so we
just could start the application server
I could use this time the whitefly eight
because I used all the time the
GlassFish a lambda GlassFish and now I
can use the white for application server
and it is an actually an excellent
application plug-in for NetBeans to send
external plugins built by someone with
twitter handle a Savoye here
this is his twitter handle but it feels
really like a glassfish they get the
same the same integration as class
fisheries I could even use both
interchangeably and yeah now the chair
boss is fired so I will just use my I
term and go to work servers whitefly I
use the final one standalone deployments
and I would just open the folder and
then go to junk just ajar target and
open this and I will put it here and
with a little bit of luck is deploying
deployed you see that it actually works
so what I did right now I deployed a
plain jar there's really a jar it's not
an EJB jar is just a plain jar this is
actually nothing there just a POJO so I
mean I hope the question is answer so it
was always possible or it is since Java
6 it is possible and in Java e5 and
prior you had to use an EJB jar to
achieve the same and if you look to the
into the egb jar there's actually
nothing there just one class no XML no
properties files nothing so why I didn't
use the deployment from from NetBeans
because it's just a regular jar and
NetBeans didn't knew that actually could
deploy it even to JBoss it would you
would search for a main method and why I
always start with a war because I'm
assuming that we will need something
like jax-rs and actually I use jax-rs
all the time for stuff like monitoring
or yeah simple monitoring even so I hope
the question is answered live and yeah
just as I will have to would like to get
rid of this annoying output here so I
would like to under ploy this I'm
curious where it is yeah it was listed
as a GB module what is not quite right
but it's the closest so so now this is
under ployed I hope the question is
answered
let's see any questions regarding this
air hex no then I hope you are happy
with the answer so it is as lean as you
can get just
one jar with one class and it works okay
then pick the next one how to structure
the UI and this is actually a quite a
nice question so I got here someone from
PHP actually is funny I got lots of PHP
developers who who are interested in
Java
I see the trend for for several years
already so um yeah it seems like PHP
devs really like Java which is a good
thing and what I usually do I structure
my back-end according to the M entity
control boundary or a boundary control
entity pattern which is rather simple so
you have one boundary which is the the D
boundary to the outside world then you
get a control and the control is
something reusable and the entity so
which is the persistence and this is
actually quite quite simple and the PHP
developer asked me okay how to approach
or okay the business is simple but what
to do in the front end and actually I
cannot question answer the question in
one hour so actually we we spend a whole
day during the regular Eric's workshops
just talking about this and this is I
think one of the most controversial days
Java EE web frameworks and Java and
html5 but what what you would like what
you will have to do is you will have to
think about what for what is actually
did a user of the application it's a
basic question and if the user is the
Internet so all possible users usually
you would end up having Jack's arrest
restful web services which are going to
be consumed by application like most
likely angularjs or ember GS or stuff
like this XJS or some kind of html5
framework so actually a Java ends then
but if this is a simple enterprise
application you could use JSF Java
server for the JavaServer faces for
instance and comes out-of-the-box
extremely simple I use it all the time
for simple administrative
tasks and the question is how to
structure such an applications so do do
we have something like boundary control
entity or something similar so how to
approach this and unfortunately it is
not as easy as the backend so and it is
really hard to have a component which
spans presentation and business dear so
actually it is unlikely they will able
to do this because usually you have some
reusable UI components in the front-end
reviewers reusable services in the
backend there is no exact one-to-one
matching it is more likely that you will
get n to M matching so um what I usually
do I try to find some kind of concepts
or abstractions in the front-end so what
I mean by that usually if I have no idea
what I'm doing I would create one folder
per view for instance so you have one
page one folder and this is the view of
course if in single page applications a
little bit harder because it will end up
with one folder per application but in
enterprise applications usually you get
more views or more subsystems so
something like this so I would exactly
as in the backend look at the UI I try
to abstract things and then structure do
our UI according to the business
requirements and not according to
technologies would not create one folder
for managed beans the other folder for I
don't know UI components all rise
instruction after the concept and and so
about the framework so the basic
question is do we need a client-server
framework or or client centric or server
centric framework but no one asked the
question so if you if you like to
discuss this just ask me the next time
about client and server centric
frameworks and I will cover and dedicate
a question at the beginning of June I
hope this is covered it is I cannot
answer it right whose a piece of code
because you know there are about there
are more UI technology then then beckon
technologies so I hope the question is
answered as well so we have no
err hex Roman Edelman asked me
bootstrapping the service from the jar
actually I've thought about this for
Marv for my pink application so I wrote
a very simple application which which
just is ping able so you can actually
see whether the application is working
or not and I will provide some
extensions it's on github on my github
account and actually I thought about
this this is the pink where is it here
here because it makes absolutely sense
to bundle the application server lose
the war and it is already reality roman
because if you look at jenkins if you
download jenkins you can just install
jenkins by doing something like java
manage our jenkins to the war and it
will start from within the war so if
you're building a product you can
absolutely do it and you should even do
it because if the installation is it
makes the installation more easier and
and so your product more appealing to
the customers i hope now is the question
answered
hopefully ok and thank you to the java
ee platform which you should of course
follow they announced this event which
is really nice so thank you java e
platform and I'm really curious whether
Java EE platform is a Oracle handle or
individual so if if possible just answer
this it would be nice to know so okay so
we have we we have two questions
basically
cavett already I hope we are in time
Oh problem with lambdas app service and
possible solution so I got a question
like so this is actually how it looks
like prior was the regular glass wish
for if you would like to deploy a
application with lambda and the question
is why it happens and someone asked me
cool an idea how to get support for four
oh and it
that they can ablute or pitch myself so
it's broader question so how to fix the
problem if you have an application
server and all the application server
you would like to have you would like to
have lambdas running on this and what's
the deal whose lambdas and usually Java
it does not care about lambdas but the
application service somehow do so why
and the answer is pretty simple lambda
uses invoke dynamic and application
servers what they do they have to
manipulate the bytecode in order to
create proxies so and they use
frameworks and some frameworks like this
is a an ASM the older version of ASM if
they see a bytecode to which they do not
know they throw exception like in this
case so what happens behind the scenes
here the ASM framework look so the very
first time invoke dynamic bytecode
extension and throw the exception so how
to fix this if you if you are running an
older GlassFish you should try to to fix
it's a problem by upgrading the ASM
library for instance or a framework
inside the application server which is
responsible of the bytecode generation
this would be the approach so try to
find in your application server the
subsystem which is responsible for the
proxy generation and attempt try to
upgrade this this would be actually may
approach hope it is answered ok got
another interactive question how do you
manage our sessions in a rest app
consumed by and consumed by an HTML
framework like angular Jas so the
question is how to deal with
authentication and authorization so
actually you could use whatever
framework you like you could use OAuth
for instance and how I use it it really
depends on my customers how to use it
but we have one questions question
according to alpha mitigation and
authorization if any of the source codes
I will show you what
can do out of the box with Java but if
you if your question is targets the the
session you could even have stateful
jax-rs services it's not a big deal I
even wrote a blog post about this
I think Adam being HDB state now this is
actually nice not HDB state let's let's
see hessian i think this was called
cookie manager let's see yes this is the
blog post and in this blog post if it
was this single line of code what
happens behind the scenes the cookie
manager will send cookies back in force
and make whatever you have in this in
this example I used Hessian but it could
be jax-rs
it will send the cookies back and forth
and make effectively your jax-rs service
state fool if this is the question and
how to do this particular really all api
api's web api is do it differently if
you just look on public api's usually
they use of some kind of API token which
is sent back and forth then your API can
be even stateless so perfect the next
one so I have I hope we covered this our
kenan versus mojito this is very common
one actually i got several several just
doing a coffee we got i got several
requests for even whole day workshops
about our chili about testing and
quality in fact the question is so
common that I decided to create a
dedicated day special event Java 7
testing and deployment and code quality
and July about this and this is already
we have already sufficient registration
so will take place
so um and the question boils down is how
to how to test Java applications and why
not to use Arcadian for everything and
why I'm using mojito not mark arquillian
so we can spend I think a whole day
discussing this so actually spends
several days discussing this but it is
actually simpler than you may think
so how unit test is defined and the
definition of unit test is testing it's
the smallest possible piece of
functionality or or snippet of code this
is actually a unit test and even if we
have a Java EE application we can it it
hopefully consists on business logic and
this business logic has to be tested in
isolation and if you would like to test
in isolation why to start the
application server so I saw even really
no kidding
projects were they started the
application server to test getters and
setters this is I don't get it
this is strange so um I would of course
never test get and set us so um but um
what I did before before the show here I
created a very very simple application
and actually created even a github
project I will make it a little bit
larger so this is just was the first you
saw you see two hours ago I created a
very first commit what's called
workshops and what that project is it's
a very simple very simple boundary
control entity application with unneeded
package number it's just a package and
what I did here I have one control which
calculates the the fat and I have a unit
test we just instantiate directly the
class and calculates the ddd fat and i
would never start an application server
folders and I would use mojito if for
instance they've had calculator
use the entitymanager here to fetch the
you know detects rates from different
countries they will mock out the entity
manager because I would rather test my
logic here and not the database so I
will mock out mock out the entity
manager with mojito but in some
applications I use concepts at all
constructs like for instance plugins and
what is the deal whose plugin so usually
they rely on CDI and the plug-in has to
work in case or the application has to
work with or without plugins and to test
this behavior you have to use arquillian
because you would like to construct
deployment units with different contents
so for instance i would like to create
one war with without any plugins and see
whether default behavior kicks in then i
would try to create a war with a single
plugin and see whether it works and then
with multiple plugins so to create to
create a multiple deployment units with
different contents it's actually only
possible or only easily possible with
our Kilian and and a particularly in
framework called shrink wrap which is
part of our Kilian and i always use our
Kilian for this but a usual usual
enterprise project does not have such
requirements with plugins so I use
barely achillion in boring enterprise
projects and I was I will I use always
arquillian for our more sophisticated
products or project with higher
requirements with more sophisticated
dependency injection I hope it is clear
if not we can write a code next time but
I will try to keep this this edition of
a xqa a little bit shorter I hope it is
clear right now if not I have enough
code and I could even record a dedicated
screencast about this but it is
basically easy so and most of the
developers are disappointed that I'm
actually right right
simple unit tests and not inoculate
there's two test logic like this perfect
so next question how can you propagate a
beckoned exception for example an
optimistic clock exception to the front
and JSF or Java fix so let's see what
actually the origin comment is probe
propagate so this was the origin
exception and this is actually fairly
easy so what I have here is a very
simple service just which I can reduce
that I can register to a workshop and if
everything goes well I get 201 created
back HTTP code and the question is how
to do those exceptions in jax-rs so what
I would usually do in case something bad
happens I would return for instance and
server error which is a little bit too
generic so it is much better to use our
proper status and the status can be bad
request for instance something
syntactically incorrect or conflict for
optimistic assumptions for instance but
the problem is actually I always look it
up in an HTTP spec so what I do is HTTP
RFC code so status code
and this was conflict so I will look it
up whether they cool actually fits the
ideas or my error this will be the first
but the problem is it's also too generic
so you get just I don't know what what
is actually 4 or 9 or something like
this yes and the kind as no idea would
actually happened
so what I do then I use a header so I've
read header with X stands for standard
extension I would say here arrow message
and I could put message whatever I like
don't be concurrent for instance and
then return this response instead of
that and those you can always do this
you should do this so what I sometimes
see is like they're the project are
returning just a response which is
always 2 or 200 and you have look within
the message what actually happened I
think it is a lot easier and and to use
if you get the response code straight
away and then you can decide whether you
consume the message or not but yeah but
this is what what I would suggest and
there's a really nice interface in
jax-rs which is almost forgotten and
this interface is called exception
mapper so what you can do you can write
your own
for instance runtime mapper and this
runtime mapper implements exception
mapper of type runtime exception so and
what you can do right now is then you
can map your runtime exception to the
response you can say ok return response
server error for instance this this is
already a server error but now I could
integrate in a header it's message the
message for instance exception get
message and I could use you have to use
provider notation
to register this and I forgot of course
built you can see 80 characters are too
short so we had to discussion my block
so I could of course do this or this but
the question is why so we have I hope we
cover that yes
no no questions I will just briefly look
at the social stream here just open this
and close that okay
fine so we covered this next one now
this is a more generic one someone says
okay they have an unstructured data in a
system in db2 and it is not it's not
normalized and unstructured which is
which I would say really world and the
question is would I use JP on such an
existing database in my experience GPS
and all or nothing' technology and isn't
easy to introduce in existing systems so
this was an email question and what I
what I or I did once what I did once or
once multiple times what once was was
really convoluted database it was an old
Borland database I actually forgot the
name what it was crazy and what I did
then you can for instance if you have an
project you can go here and say new
entity classes from database and pick a
date at a database hey he even found the
JBoss database but they couldn't find it
found the driver but I could put the
let's see what I found something else
this one new entity classes from
database should be n yeah this is a
glassfish project so there are different
databases installed you see it searches
for tables and I could just use for
instance a account table and then it
will generate the account jpay object
for me
but the nice story is if your database
is looks really bad it will still work
so sometimes of called stir and all the
keys are mapped to one to one but you
could write a unit test and at least you
know ping the database which APA so I
will at least start with JPA generate
the the persistence layer usually use
NetBeans for this the
assistance layer right some unit tests
really unit s fire up the persistence
and entitymanager factor in the entity
manager in the unit test and see was it
works for you or not and if it doesn't
work then I will just use JDBC or
whatever but if it does you are actually
you have you have standards persistence
and by the way all or nothing I would
say in most project I was able to I
sometimes I work alone but usually in
team we were able to to cover would say
80% with GPA and there were always cases
where you had to go directly database
using JDBC or or you know connect to two
functions or sub procedures so the
answer is try which API if it doesn't
work search for something Samsung's
something else so in my book this is the
green book I used pair Eliezer and
multiplier and someone used this pattern
and the question is how to write in a
single file in Java environment and the
question is actually broader than my
paralyzed and multiplier so first there
is no simplify in Java if you're in
cluster what work is there file where is
it isn't in Sun isn't it NFS or what is
a single file if you are not in cluster
you are in luckiest situation because
then you only have to you only have to
deal with possible inconsistencies if
multiple processes are hitting the same
file this is the problem if you have if
you if you if you are in a single node
so in a cluster you have more problems
because usually you will have to do to
access the file remotely so we need
somehow a running running system so how
to write in a single file so the
question is how to identify the file
first so if there are multiple processes
what to do with it and usually you will
have to pass the information you like
for instance the path to d2 defile
through the process how to do this
you could use CDI events for instance
and just you know put information to a
CDI event and pass it from process to
process you can use futures which is
which is also nice because you can pass
the information is the future you get
the handle back and then do something
else with it and you could use
completable futures and actually will
record a screencast about this I hope
next week or week after about just
computable futures and to do this so you
can chain different several processes
together so I would say the main problem
is files are not transactional and how
to synchronize a single file so the data
doesn't get corrupt if you if multiple
process of writing to the file and what
what you could do you can write your own
connectors you own a JC a connector and
a road one which uses this is at least
transactional but it is not fully
transactional so if you would like to
have a transactional file system there's
something I was interesting
it's called Jakarta Jakarta Commons
transactions and the Jakarta Commons
transaction comes with a file package
which is not backed free but it works
surprisingly well and you get
transactional file so what you could use
you could use a transactional file
access so Jakarta Commons transactions
with for instance connector wrapped in
connector and you get almost a high
store for free or you could cash the
contents of the file with something like
for instance hazel caste and then if
you're if you if you have all the data
together flush it at once and write it
and write it to to the file system or
you could you can set up a very small
application server having just sublet
installed or a Jack's arrest and
just this process will write to a file
and you can connect to the 2d process
via via Ajax RS client and writes the
file two to one process - in order to
mitigate the problems with which
distributed system what is the
appropriate
I forgot actually what what is actually
I forgot what actually is I have to
admit what is Joc I have to find this
joke okay
this is the query construction language
and and out and the question is how to
integrate this in in Java econ
appropriately okay how to integrate this
is fairly easy because it generates SQL
and you will sequel and you will like to
to execute the sequel the only thing you
have to do is to to fetch the data
source so to inject the data source with
a tree source data source to your EJB or
CDI bean and fetch the connection from
the data source past the connection to
an external persistence framework and
and then close the connection afterwards
does the only thing you think you have
to you have to do so you have to use a
managed JDBC connection if you if you
are playing with sequel and by the way
in one of my current projects called and
here try it I'm using plain plain JDBC
to access a database and and it uses an
unmanaged connections but if I have
several problems to solve right now but
at the end of the project or a names few
weeks I will introduce a managed managed
variant of the of the actually the
project uses uses lambda
for data transformation so you can fetch
the information from JDBC and write it
somewhere else I would probably use it
for instance to back up my block why not
so but I will I will not rely on JPA I
used JPL for testing but I will use
managed JDBC connections right now I use
for testing unmanaged JDBC connection
because it doesn't matter
so to integrate such a framework you
only have to to rely on data sources and
how it looks like I will just write some
pseudocode it would look like add
resource and data source this one D s
and then just fetch the connection and
then you get the connection and then
afterwards you have to close the
connection this is nice
because if you close the connection the
connection gets returned to to the pool
so the connection is actually wrapped it
is not you know the Oracle connection
you get something back like pull
connection and this is applications
server specific implementation of the
connection okay hope the question is
answered no davido is happy and no risk
probably happy so it's for unknown
reason this just always forgets about
the X and XML was full support for map
string and object
I don't know this weather you can just
with full support for map string and
object huh I've no idea but but
regardless mapping objects
this one has full support for this
response can be consumed as XML and JSON
but this is not our Maps doing an object
in worse case you will have to write
your own mapper
but I cannot answer the question right
now
but this is actually good one produce
map Jase oh but okay now is the answer
Jason object is a map of string and
Jason value so it is actually already
soft in Java 7 string an object and this
is Jason value if you look at the Jason
value you get there are certain types
because a Jason array objects drink
number boolean or null so it is already
already solved the problem is XML so
what to do with XML this is a prototype
ik because you get key value pairs or
how to do is XML but in Jason is already
solved so yeah this is in Jason is
solved you know and who would you who
you would like to use XML and sorry this
was just joke but what you could also do
for the XML case you can you could write
your own your own serializer
and you have to implement two classes
message body reader and message body
writer so you could do this easily oh
and no risk is very happy so you see
what we can do
okay so where are the questions we have
a go through the all the questions just
at least the first ten this is actually
the deal here so I got a very good
question from Adam another Adam Adam do
Chuck and that Adam is organizer of of
the decon conference and they asked me
very very interesting question so I'm
about constructor injection and actually
I never used constructor injections in
my projects commercial and I don't even
think in my open-source project as well
but this is valid question so um does
dependency injection record know or not
and it actually always worked always
means Java six in Java is seven and in
Java if I've no it didn't because there
was no CDI and EJB dependency injection
it didn't work so it works since Java 6
so what you can perfectly do let's see
here if I had let's write some other
code registrations so what happened here
and we just removed the exception and
here okay
it's an error is gone so imagine we
would like to need here another class
which is the country country rate and
this country rate is needed to do you
know to code to get the country specific
event so what I would do you could use
this this would be my code very simple
to write a unit test I will I will mock
out this country rate to test this so we
added already the problem as if it would
be private I will have to use inject and
inject mocks annotations or write
getters and setters which I will never
do get a set of just for testings or
never sometimes I'm forced to do such a
thing but you know
would try to to do something more
appropriate so but what it can also do
you can create an constructor and just
put the annotation here and now this
could be private and the container will
inject the state here but this is are
far more codes than this so I would
prefer to use this but you can use
dependency injection if you like but if
you put at inject here everything has to
be injectable so whatever you listen the
parameters everything is gets getting to
be injected okay
I hope it's insert I hope I answered the
question so this is more full of
philosophy logical one and I think there
is a big difference whether you are in
container playing building services or
you are in the unda client I think if
you are building client side
applications with more object oriented
code constructor injection does makes
more sense or is more attractive than
constructor injection on the application
server traditional customers so you
should be lucky that you don't have to
use soap ok so next one and wait a
second
yeah X well now remember a hex at least
Oh master Pony I am and I'm lucky and
run just one note but got multi multi
motor bring Theatre in vitam so I could
use a Jakarta Commons you could use
Jakarta comments - coordinated data on
disk so what Jakarta Commons will do it
will write to a temporary file and
uncommitted the file will appear it is
it's basically copied from the
repository to your folders they will see
the file in the file system but um
Jakarta Commons is a little bit complex
and the connectors are complex so I
would first look at Java nioh probably
is a good enough if not go to Jakarta
comments and put write some tests and
yeah usually I shouldn't answer such
questions I will I would first answer
what is actually use case and then we
could talk about the technology but I
think you see where I'm going with this
you have always a problem because fire
is basically a singleton and Java is
distributed and it's always problem to
know to do to synchronize Singleton's in
a distributed environment without
deadlocks and stuff like this but thank
you for asking or asking for the
interaction okay so this is also nice
how do you handle two PC with this
protocol and let's see what is on how to
tackle protocol adapter so what he
refers to she or he refers to protocol
adapters is what I what I did I in in
how to tackle Java EE I gave a keynote
online keynote is recorded is online you
can watch it if you like and what I did
I created entity control boundary
application which is very similar to
this and what I said is the registration
resource is something like a protocol
adapter because the protocol adapter
exposes the registration eg be SRS web
service and I would have I could also
have here soap service which which
exposes this the same functionality
which is registration as I soap this is
what I said during the the
keynote for the Deaf crowd conference
and the question is yeah how to handle
two two two two phase commit or x8
transactions which jax-rs and I think
JBoss had a project they were able to
send transaction IDs excit s from
two-phase commit over the wire so you
you could get a two-phase commit buyer
jax-rs
but the problem is jax-rs is also its
week has its weaknesses so if you are
thinking about checks two-phase commit
you have also should be able to catch XA
exceptions and this is one of the my
favorite one so if it is actually the
exception which can happen during during
commit or during the interaction with
two-phase commit and if you can see my
favorite is because I always click on it
is heuristic mix it means one process
was committed and the other was rolled
back so the question is how to recover
from this so um two-phase commit I would
say is not the right right approach to
coordinate applications on this level
the question is what is the right
approach and the right approach is in my
eyes is to use fire-and-forget so if I
and forget who is compensative
transactions and what compensative
transactions are are not undo
transactions or basic under transactions
rather than business transactions so
what it means is in a kit or a
subversion if something goes wrong the
compensative transaction is merge it's
not it's not like uncommit is this merge
if you order something on Amazon and you
don't like it the compensative
transaction is to send it back so this
is compensative transaction so you will
have to think about the business logic
and change even the business logic this
is actually the the the answers are a
little plaque here we actually talked
the whole day about this during the
attacks and the architecture day just
about transactions and and all the stuff
so we had a really nice discussions but
but you have to rethink it is not like
you cannot coordinate multiple
with protesters with our technology it
just does not work well enough and
usually what happens back then if we had
in the IOP timeframe we used to face
commit but what happens in several
projects actually all the exceptions
were just silently ignored so how all
the definitely the lock statements were
redirected they've null in no one cared
about this so and the system became
inconsistent so on with jax-rs you get
the same so it's actually it's not the
problem is not jax-rs the problem is a
conceptual one hope the question is
answered okay
no jokes about soap they hurt yeah nice
so where are my questions so enough
marketing so hosannas one I get it a lot
actually a very small a really smart
question I have a got a question about
BC if I have a message driven bean how
would it be classified so the question
goes okay I have my boundary which all
do you know the boundary is the boundary
between the UI and the and the business
logic control is a reusable stuff and
the entities are the persistent JP
entities the question is how to deal
with message to mean so what our message
do means and if you think about this
what a message driven bean actually is a
message is a if you think about this
here's a here's our boundary and the
boundary yeah and we have different
clients so we have html5 client which
talks up over Jason and I don't know
WebSockets with the boundary and you
think about this we could also have a
queue and we could map to the queue and
message driven bean
and this message driven bean could talk
to the same service here so we have a
service which is exposed with a message
driven bean or expose with jax-rs
or expose with soap or expose with IOP
so if you if you look at this from from
this perspective a message driven bean
it's just another protocol adopter and I
will put this message driven bean into
the boundary package so we have a
package here boundary and the entity
bean I would put the boundary package
but if you have integration packages or
it just imagine a whole system which
interacts with the backend we can think
about putting the message driven bean to
a dedicated package called integration
could be so for integration purposes but
usually usually it would be always just
we also just another client so why to
deal a legacy host differently so
usually you can say okay the host is
just legacy client but you can use
exactly the same channel to talk with
who's the application service and by the
way message driven bean does not have to
be mapped to a JMS queue some projects
who just raw sockets brought we wrote a
JC a connector and this JC a connector
was was mapped to a server socket and
the server socket translated the the
binary data to two messages and the
message driven bean was integrated so we
used message to them beans to receive
messages generated by by some machines
so some hardware okay I think we covered
this
okay perfect
and a hex no questions very good
and probably the last one how to lazy
load fields and entities for your UI by
the way what you should do immediately
after the show you should follow all the
guys who and actually just guys so next
one next time we could get some some
woman's as well so um but you should
follow whoever asks a question here just
just as a credit so this should be done
at least so um how to load lazy lazy
load fields and entities for your UI
inch SF and ethics in boundary and
problem is of course so if you have the
registrations yeah so register ation is
an entity and this entity could have for
instance a collection of addresses and
the addresses could be lazy loaded so
what happens then after they commit the
collection first if you how it works
behind the scenes the collection so this
is the inside usually what most of the
frameworks are doing they creating a
proxy for the collection and its own
active in case the entity manager is
active but after they commit the entity
manager is no more active and if the
manager is no more active and you try to
get dere you can do exist if you attempt
to access the collection you get strange
errors I remember once and resolve proxy
error or something like this and how to
deal with it so there is a thing called
fed joins so you can you can use joins
too lazy too eager load lazy fields you
can of course edit eager which would be
the best for more static use cases or
what you can use you can use Java seven
fetch groups and fetch groups is like
you are marking with attributes your
path so you can mark your relations with
attributes and then you can specify a
fetch group during the query and
everything which belongs to the fetch
group gets eager loaded
and this is what I would do and what
happens then yeah and then you can have
lazy loading everywhere on on-demand
just execute a fetch group or specify a
fetch group and everything which belongs
to the fetch group is going to be to be
eager loaded so this this would be the
answer and okay the next one is very
simple one so I will just take the
question number 12 and everything else
postponed to the to June and if you have
any questions asked right now after
answering this question it is one hour I
hope today that we can go through about
in half an hour so easy one what is the
best practice to run scheduled event on
only one node in a ie cluster so we had
just a char we had the scheduled event
here and the trick is this if you
specified this the this scheduled event
is going to be stored in in a database
and if your database is central this
event will fire only once so in the
whole cluster and the question is how to
know whether central not in class which
case I think where is it it is somewhere
here install databases sublime it should
be timer Oracle so and if you can see
this is the table where you can specify
at table resides in central database
the schedule will run only once in the
whole cluster but if you will use if you
are going to use transient timers they
will fire once once per node so it is
actually the difference so let's see
it's using fried channa to write that
file by those and the multiplies it
should be but it should be thread safe
but I will look up I will double check
that on Javadoc so everyone is happy so
I would say thank you for watching and
see you the next event is actually in
May so I would just show you this
because I will I'm invited to a
conference in Kiev and this is this one
and then 23rd of May and I would like to
show you live some tricks I'm using
similar to the exception mapper which
acts rs200 in Java sevens or I just
bundled of the most frequent questions
and answer them send them here and my
github account is Adam bean and you can
see most of the examples here and yeah
thank you for watching and I would say
see you and upcoming conferences and the
keynote the first Monday of the month at
6 p.m. CET and I will post the these
recordings to YouTube tomorrow and see
you at conferences and a hex in Munich
is so far always sold out so the events
will take place and then you can ask
questions and you will get even t-shirts
gifts and some surprises and in the
middle of the workshop we get a free
event
we call we call it in hack stripe so I'm
we get we get a barrel of beer it's
called a hex bro and you can ask me
whatever you like so we have don't
invite to register just just come and
visit us at the Munich Airport so thank
you for watching and see you next time
bye</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>