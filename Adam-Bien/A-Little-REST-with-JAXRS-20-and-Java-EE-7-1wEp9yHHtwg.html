<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>A Little REST with JAX-RS 2.0 and Java EE 7 | Coder Coacher - Coaching Coders</title><meta content="A Little REST with JAX-RS 2.0 and Java EE 7 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Adam-Bien/">Adam Bien</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>A Little REST with JAX-RS 2.0 and Java EE 7</b></h2><h5 class="post__date">2014-05-30</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/1wEp9yHHtwg" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello my name is Anna beam and today I
would like to show you a little bit or
show you to talk a little bit about
restful Web Services and why I got the
idea about the restful Web Services
jax-rs for this conference well I saw a
lot of projects and applications this
year and for unknown reasons everywhere
I saw in as a text
the term restful or rest but it wasn't
restful at all so what I would like to
do is to to write a little bit to write
a little bit code and that prepares or
some projects and show you some some new
jax-ur as to all features but I would
also like to talk in general about
jax-rs I will use the Twitter handle you
can use the Twitter handle je convey a
hex or atom beam if you like to ask
questions life so it worked pretty well
in the past I can just do it so I have
opened my Twitter here and so you can
you can just ask me questions about
whatever you like not whatever like
about restful web services so on that
note we can start with the slides so the
first slide is of course the title of
the of the talk I'm a freelancer and I
really enjoyed working with Java and
programming the Java programming
language and I have to say actually the
recent years all my projects were Java
EE projects and this year I'm in the
luck situation to be in some projects
with Java 7 and in Java 8 last year it
was exclusively actually yeah it was
less fish Tommy this year it is whitefly
Tommy and GlassFish so it is going
getting better and better
so I actually never worked I was also
freelancers or some some developers
expect me to work for Oracle whatever
but I actually never work for Oracle Sun
it was just always on my own
yeah there's some references so I block
from time to time and and Twitter handle
you probably know already and three
times a year on organize a workshop week
at Munich Airport so with lots of energy
from all over the world so if you like
come for an week - or for one day to
Munich there's different workshops on
each day something else but everything
is Java and web and html5 related okay -
books okay loosely related to this topic
so in both I mentioned rest but it's not
about restful exclusively so what is
rest how it is defined and this is
actually where trouble begins or the
definition of restful web services is
really clear right if you read it as
like a representation state transfer
rest is a software architectural style
consisting of a coordinate set of
architectural constraints applied to
components connectors and data elements
so actually what word is a little bit
interesting here you see the hypermedia
T term so it just somehow hypermedia
related so at least you should find some
links or identifiers and restful is not
about HTTP but usually it is I have to
say in all my pragmatic projects I would
say actually one of our projects will
use rest with HTTP of course and and I
would like to widen the definition a
little bit because I think you could be
restful just using the HTTP methods like
get post put delete and so forth without
without was a really ugly ugly API and
what I think is more useful to think in
rest in terms or to be more to provide
more usable and domain domain related
api this is what actually brings the
benefit and there's another term this is
a really hard to remember hate OS it is
called high beam
the engine of application state and this
is a little bit crazy because from my
perspective it goes too far it would be
like you are providing providing a set
of or you are returning a resource to
the client with some links and the clan
is able to parse the links and just
using exclusively the information from
the from the resource to interact with
the server this would be you know the
the highest possible rest normalization
if you will and I actually never saw
that in action that or we never built a
jax-rs client which automatically parses
the links and does something with it so
we always relied on the existing
information about in some kind of
contract but the idea is nice and I
would say if you would use 20% of the
ideas in how-tos it would be already
nice so um as you can see this was the
last slide so now everything I think
should be clear right so we actually
covered the whole theory behind rest so
we can stop right now I will just
quickly look at the Twitter whether they
are some orders only oh this is someone
asked me about about something Java ear
related but no checks eraser will skip
the question for a second yeah and some
some some someone watches from holiday
then my analogy Davido jax-rs which is
actually a nice Java is exciting
exciting enough to to be to be watched
on vacations okay now how to start with
jax-rs so I will just create a very
basic project and then I prepared
something and I will then then go
through my examples and show you some
newer stuff which you can do with it and
the examples are based on on frequently
asked questions of the most frequently
asked questions so um I would start a
very simple project a maven project with
the maiden archetype
which I created why I created it because
I think it is as simple as possible
maybe an archetype for Java is seven and
this is this is why I did it
and I would call the project the rest F
nice name rest death so arm probably it
is obvious to the conference attendees
of je conf but it is am unfortunately
not that obvious for my project so what
what what people end up with is putting
everything to epics ml which is actually
not required so on what I created right
now is a poem XML a very lean one and
what I created here property fail on
misuk web.xml Falls what it means where
pics ml is actually not needed the
project will build without having a
webmix ml so what it actually means to
have restful web services you will have
to do something and you won't have to
create a configuration class and I will
go here and say rest staff was our
application name in a bound not boundary
I'll do it yeah red stuff and then
jax-rs configuration call me a hex rest
of jax-rs configuration simple class and
this simple class it extends application
and application ah
and now the first question is what to
write here so what happens here is you
will have to create an OD a URL and this
or e here would be appended to the name
rest staff and the rest of is the war
name so the whole uri is going to be
rest F slash something which was here so
like resources for instance and then the
resource name but resources is like our
web resources or services or whatever
sounds right but the problem is what it
actually it's actually
superfluous right because you could and
my resources is just you could write
utility or whatever you like so the
question is why not to put version
number there I mean this is really
interesting discussion because in my
eyes it really depends whether this is
best practice or not whether you can
influence the clients or not so if
you're rolling out the clients together
with the back end you could actually use
the version number here because on each
change of the version you could control
the clients and roll out new clients so
whatever the client may be whether this
is a web applications a single page
application JavaFX or whatever but if in
internet environment so how it's called
web scale environment it is a little bit
harder so if you change the version here
it would really hard to notify the
client that there is new version so I
think it would be better in web scale to
put say something generic which is not
not version related at all like
resources happen to be in a very thin
best practice and and what it means they
early becomes stable so whatever happens
it would be no change on the OD now the
question is what to do with versioning
and what I would say it's actually
larger discussion but in a web scale
environment if you're building a web
service for the for the internet no for
the intranet I would say your API have
to deal with different versions so you
all have to accept older and newer
clients at the same time it it it causes
a little bit trouble with or no no
trouble more efforts with testing but I
think it is a good idea to do it so now
the application is set up and I just
watched our click Twitter and found
bigger font bigger of course we can make
font bigger so as you can see Java
duvall this is already 18 Java
developers are already a little bit
older to they need a bigger font
I think now we have a huge font so je
conf I think now the font is huge right
and I get really nice question for Carl
kiddin but this is actually nothing to
do with jax-rs I will promise I will
answer the question the next it has qu a
or if you have some time here so now
it's configured so what to do what to do
next so the next would be to create a
class right and the class would be the
name is the Val lo developers resource
and the developer resource is annotated
with path and their name is always
plural so the question is why so why not
developer and what I see a lot is like
developer service what I think is
conceptionally wrong because in my eyes
what you should do is you should address
the set of all developers with the
resource and then you can query for a
single developer or all developers or
whatever but I think the first mistake
is to attempt to use jax-rs for a remote
procedure call like like replacement of
IOP and if you would really like to do
to write your own jax-rs restful layer
to replace remote procedure call I would
model this remote procedure call and and
like I would use another resource called
invocations and the idea would be a
method name or service name then you can
model the actual remote procedure call
so and then I can just return for tests
drink developer and of course I have no
idea who is the most famous developer in
Kiev but I think we can go with Duke is
neutral actually Duchess
and you so to developers would you
actually write because developers is all
developers touches in Duke
so get returns to developers and with a
little bit of luck it could work so I
will try to run the application which
will build I will use the old GlassFish
it is sufficient for a purpose with
whitefly it will work as well and tell
me as well it's not okay so I did
something before with whitefly and just
the next time I will reboot my machine
before a conference talk run it again
and see what happens so let's see what
they are some No
Berta
hmm why I don't see you and your talks
at je kont this year ah this is not me
this is somewhat a static and I think
you see me right now okay so what
happens here with GlassFish did
something work if not I would just
repair everything with this oh it worked
I was too fast oh man
okay what's wrong window so just do it
again service GlassFish and run it sorry
for this I was just too fast I just
killed everything because before
whitefly shut down in glass visual
started so let's see what it works this
time has to so any question so far I
think it is obvious actually it is
absolutely obvious purpose for unknown
reason is not that obvious in the
project or men I have lots of projects
here
this is the problem with GlassFish but
we have here resources and the Velo
purse I think as you can see it works
Duchess Duke this I think you need
larger font here as well so so now we
have a nice web service what I only have
to do is okay if it works it works so
right stuff so this was the simple as
possible restful web service and so we
have jax-rs configuration develop as
resource and nothing else there is no
way big smell nothing nothing there so
web app weapon if you see everything is
empty so that's just the simple as
possible jax-rs application comprises
two classes jax-rs configuration and at
least one resource so if this would be
all developers then you can also address
a single developer with let's say this
is developers and developer and it looks
exactly the same so you can use your
template and see even first name or
first and last shorter so you can create
your own pattern here first and last
pass pattern is first string first and
pass param last last and I can just
return to show it actually works return
first last so on how it would look like
developers chief touches and I forgot of
course get so we have path catch I think
we will run it and then see what happens
remember so this would return resources
developers and path param is chief
touches and it doesn't work
developers does it this does and the
shoot first laws first lost path parent
looks good but another work but has to
is absolutely right
so just rerun it it has to work I think
it looks right so I forgot to get you
see developers chief Duchess seems to
work yeah perfect I think there's some
interaction on Twitter so let's see what
tin use nice hey lots of developers
there this is like millions of them this
is like twice as Java one just kidding
okay good quality so perfect so good
quality of the broadcast not of the code
I hope so um so this is how what are we
actually return this text plane right
it's a little bit boring so what it's
Costin could also do and this is the
next surprise this is absolute basics
here you could actually return the
developer and it is sufficient to put
root element here and the xso type and
this is always filled in my case because
I don't like Gators and setters and they
become optional here private
what was it private string name name and
we have also it's a last name and we
need a constructor and a constructor
this is the constructor for the sake of
Jax P and a constructor with two
parameters and this should be sufficient
so what we could do here in developers
resource I could return here the actual
developer and of course not here sorry
this would be not right so this is the
talk about best practice practices
little practices which xrs so you should
do it here return new developer with
name and last so this would be look this
way let's try this
and you can see this is XML so you get
it for free and I could go here and say
- H accept application slash Jason and
you get Jason back Jason back so um the
Jason binding is almost mandatory in
Java EE 7 but was not mandatory in Java
6 but it vertebra keishon service in
Java 7 comes with JSON object so you can
use so you can use you can you can rely
that this what I'm showing you right now
would work with Java 7 as well by the
way there's a small typo I will just
used it first so now she chief lost 42
works perfect works as usual now I hope
no question this is just basics right so
and if you would like to change
something you can absolutely do it you
can say here XML element is name is
first-name and and this becomes
first-name so basics agreed
so so a very good question from
Christine Lopez the rest resources reps
the boundary in a Seabee architecture
what it actually means is what I what
I'm skipping today is the following so
this is just in my eyes is like a
protocol adopt it doesn't actually
matter whether we use jax-rs or not
usually I would have here at the real
boundary and I would call the boundary
developer manager developer service
service manager stupid names but
something businesslike and I have no
idea right now so we'll call it
developer service and the developer
service would be a regular boundary as
an EJB always why it's different talk
and this would manage all developers and
I would could inject the developer to
the developers resource why because
usually it's not as easiest as what I
show you right now you would like to use
for instance HTTP headers for instance
and you could use the HTTP headers in
your in your code and the problem then
is this is harder to test you will have
to mock out the whole jax-ur as HTTP our
hit architecture and infrastructure in
order to to to write a simple unit test
so I always separate the jax-rs part and
the and the facade part and both
comprise the boundary so if you're in
the unlucky situation of using soap you
will also split both so I wouldn't
annotate this with web service I would
use a dedicated class to implement a
soap stuff so now in Java is seven I
hope no questions right no you could do
the following so you can say I would
like to return a custom JSON object and
by the way I do it a lot in the recently
because XML becomes less and less
relevant at least in my project so I
could say so I can create JSON objects
and you and what I can do then I can
just either I have two JSON array or I
can just pick whatever
like from the entities and transport
back to client what I'll only look like
to would like to show you how it
actually looks like and not JSON object
JSON array would be better but let's
start with object to save time and this
is a first name and this was touches
build so now it creates the whole object
and I can return the object okay so um
how it looks like if I go here and just
use the developers early you see that I
got a JSON object back but now I stick
with chasing there is no more XML so I
cannot just use XML is just it's just
Jason nothing else but this is really
convenient if you if you use for
instance angularjs fondant or ember GS
or something similar or any JavaScript
client JSON object is the way to go and
by the way this is not right you should
use JSON array remember I think it's
just an array
yes remember this developers is
represent the set of developers and here
we get a certain developer assuming that
this is the actual key which is actually
not the right user where usually you
would use a technical key but in our
example is it's good I just wanted to
show you a little bit more complicated
by the way you could use here even
regular expressions so JSON array
similarly so there's Jason create array
builder and I can just use this here and
this creates an JSON object object and
here I can add the object and return the
array
still basic what I show you but and
build but for unknown reasons has lost
lots of confusions in projects about
this and you can see it's nice array so
and this is actually a nice small nice
interface okay so we have a developer
developers about the idea about rest so
to shorten the time a little bit so what
we have here we have developers the idea
is get you get all developers back how
developers look like depend on the
application you could return you could
return for instance XML JSON or Cialis
Java object depends on Europe client so
developers ID would return a developer
with a ID which is technical and then
you can travel okay I would like to see
the programming languages of the
developer let's say lengths so now I
would get the list of all programming
languages that developer is able to
program and then it with Java you would
get the reference to Java programming
language so the idea is that you're
actually just looking at the ori this is
actually what i try to do in my projects
just looking at the ori
i know what is going on on this is for
me the restful arrests in the enterprise
or rest in intranet so if you have a
cryptic or is is still still restful but
less useful I will call this a useful
rest right and why so I'm my ideas the
the Auris shed should be self explaining
so if you show this to to to a business
or a domain expert that they could
technically they could the riff just
from this without any documentation what
is actually going on here
and the most criticism of rest is what
happens you know get post put delete
there are the IDI actions what happens
if I would like just you know to train
all the developers so it cannot be
expressed here with with train so how to
expose an
Express train in jax-rs and the trick is
usually you don't have to think in verbs
you have to think in substantive so what
you should do is or in resources instead
of modeling trained as a action you
should modeling the training or workshop
as a resource and then becomes easy
again you can say hey developer Duke you
need some training and you can post to
the resource developer Duke training a
resource which a training resource and
so register developer for training and
if you would like to cancel the
registration of the training so you can
also equally say registrations for a
training right for je conf you could say
okay I would like to unregister from the
conference which is probably not all
possible but how to approach this well
if the registration is a complex process
we need here registration or
cancellation is a complex process as I
said it already you will have to model
cancellation and now you can with post
create a new cancellation which get get
the status of your cancellation this is
actually a nice trick and and a nice
trick is not a trigger as a rest usable
rest and what and this is what I see a
very rarely in projects instead I see
something like everything is get right
and there is our methods or deaf dev
action I think action equals register
and this is ugly and I think even soap
is better better than this right okay so
by the way how to use this this would be
a query parameter which which should be
optional use this query parameter you
can you can refine the query this
actually the the idea behind this okay I
think we this is the basic idea of rest
so on or my understanding and I try to
do this to be able to do this you have
to be really safe in the in the target
domain and
a good news here the domain experts also
are thinking in the resources so I have
your notification from Twitter let's see
whether it is actually something
interesting uh-huh
just jokes not joking asking you have to
ask me questions okay
so we have now JSON array which returns
all developers and developer which is a
single developer right so how to
approach how to go with what is the next
point so the next point is how to deal
with exceptions just imagine this would
throw an exception let's say throw new
runtime exception actually not this but
what usually happens we inject here and
a service and the service throws on a
runtime exception and how to deal it
with here say no all the Velo pairs are
at je conf today
no developers so this is the exception
if I invoke this I get a really nice
error and a stateless 500 and the next
question is how to do these exceptions
one of the most frequently asked
question and there's a very old or what
it means old Java 6 days class was
called exception mapper runtime mapper
runtime exception mapper I will just
show you how it works is realize our
runtime exception exception I thought
runtime exception map of course
exception mapper implements exception
mapper and I would like to map to
runtime exception and what I should not
forget is provider annotation and
now what I have to do I have to return a
response status we can create whatever
status we like would say actually status
status server internal server server
error is not that bad actually in our
case this server error but what you can
also do now I can I think I have to
import something right yes so now what I
always do I create a header with
additional information like a reason and
you could say the reason is get message
and you can usually you would create no
exception ID and stuff like this what I
would like to skip so and this I will
create the response and return this
provider see whether it already works
you see X reason all developers are @je
conf it worked so I could also say no is
actually not an error it is perfectly
fine
and you can see no no strange output is
just okay but all developers are at GE
conf and this is actually what I do not
with the 200 which actually also see a
lot what I see a lot they get always 200
response code regardless where the
exception happens or not which is also a
little bit a little bit of I would say
so I think we have some Twitter
interactions so let's see what happens
Oh securing the application this is a
not a good one and a good question but a
little bit boring it's a nice story is
with jax-rs jax-rs in fact is just a
servlet which reacts actually to
reflection and what what what you can
always do we can create in web.xml
define j2ee security and then what we
can do you can say okay resources get is
can be accessed by anyone but resources
that post just by a particular user and
by the way I brought I wrote a whole
article about this and I'm being Jade to
a Java EE security and this was a Java
magazine article or is it it's a Java
Java magazine was the ease as a freaking
download the PDF and in this article I'm
doing exactly this I'm creating our
realm and and show you how to deal with
jax-rs but it is really basics it is
like you can you can use the standard
j2e security the old j2e security to
secure rest web services
okay I hope I answer the question so and
this is and this is a very good one from
our equity question as is really nice
what are the use cases to use soap
instead of rest and I would say and if
you have already soap in place for
instance a classic one is if you have
old legacy systems like z/os or as/400
or whatever it is usually very easy to
to expose your own native stuff like
soap procedures then I will use soap for
integration purposes but I would never
use or never yeah I personally would
never use soap as a de facto standard in
the internet no one uses soap anymore
yeah okay
soap isn't it's no more that popular I
would say so express it that way okay
resource links no I didn't cover this
those links so far so in stateless
Sebastin task what about if you would
like to be a stateless on the server
side you can I mean the the Java EE
security is somehow stateless what you
will need you have to choose what you
usually use how it's called base
authentication the easiest one so you
have to use the username and password
hash it is base64 and then use of course
SSL communication between kind of the
server but if you are using SSL is not
normally stateless because there is a
state there is a handshake between the
client or the server so you have stayed
in place perfect okay
I think we covered now exception
handling this is a secret weapon
exception mapper so again this was the
case usually you wouldn't do this
instead you have you you are accessing
injected resources also injected
services like boundaries and if you're
accessing them here if you're accessing
them here you will want to see a lot to
try catch you no exception catching a
lot of stuff and instead of this you can
just define common exception mappers in
a central place it works usually well
with EJB is a little bit harder because
it should be tend to wrap all exceptions
they will have to have unwrapped
exceptions in the runtime exception
mapper or egb exception mapper okay I
think we covered this and I think this
is so far the basics then I will try to
show you some nicer stuff so I'm which I
prepared because I already suspected the
time it will be a little bit hard to get
everything explained in one hour so
sub-resources extremely simple but
actually as see really really rarely in
my projects so we have Jack's or s
configuration again beans resource and
now there is something different so if
you look at this is the following
there is no get no pause nothing it is
just path if you're doing this the bean
resource is not going to be serialized
in XML or JSON it has to be a resource
itself so if you skip the HTTP action
here the return type has to be a
resource so if I click here you see this
is actually a resource request code
produces and so forth what I did to
impress oh you something this is a
common problem this sub resource called
bin resource needs and ID and just has
an one constructor but I would like to
access the headers here so you see there
are the HTTP headers and now we have the
problem because if we construct the sub
resource here on this place the class
nothing is going to be injected there
and this is why Java is seven introduced
resource context I think Java 70 was not
in place in Java 6 resource context
now you can say resource context in it
resource bean resource and now this
class becomes managed by jax-ur as run
time so what actually means this HTTP
header is going to be visible so if I
run this I hope I think I use whitefly
yes
now classroom is running so I will use
GlassFish actually it doesn't matter but
if I will choose Wi-Fi this time I'll
get a part config again I will have to
kill Java again which is not nice at
Java conference so does it work or not
if it takes too long I will skip to the
next one my machine is a little bit over
text with all the streaming and
everything running on a machine so arm
did it actually worked in and build it
does matter and it will work so this is
actually exactly the same example with
so you get actually the point y been y
sub-resources is extremely crucial in
Java projects without sub resources you
will end up having here you know
millions of paths and sub paths and this
is no kidding
I know resources from from real world
Java EE project which are 5,000 lines of
code so it's just crazy talk so instead
what you can do to navigate from
resource to resource just use sub sub
resource again what it is a method
returns a resource and is not annotated
by get on the container does it
delegates to the sub resource I hope it
is clear so no question from Twitter so
it means for you crystal clear hopefully
is this new so has to be new because
this is really rarely used in projects
instead they're using an old combination
of path and sub path the next classic
one or not guessing is actually a little
bit harder because not hada it is Java
EE 7 it was not available in Java 6
let's imagine the following I have a
method post beans which returns to beans
in as a list
and what I would like to do is I would
like oh this isthis doesn't matter here
I would like to introduce a container
request filter and what the container
request filter is able to do is
something like an interceptor in Java 6
or in CDI or egb and the annotation
pre-matching is really interesting so uh
this is going to be executed before the
container matches or chooses the action
on the on the server so um what I can do
I can say whatever the client executed
set the method to post what's nice with
it is for instance you could the client
consent post request and you can set it
to put which should be for instance so
um there there was lots of discussion in
the internet you know what how to deal
with proxy service sometimes or old
browsers sometimes they don't they get
delete put or whatever so you could use
container request filter to override the
methods after the fact so also the
method was put you can override it too
or even get you can always override it
to post do you have to complete the
complete control over lots of things you
can swap the stream in request or each
inject security context and lot lots of
stars oof
this is actually a little bit a opie so
this was pre matching with container
request filter container request filter
and there is something like an
interceptor something similar and it's
called
right and rida interceptor they're
actually both there's some frightened
reader so there is outbound and inbound
there is a reader and the reader is
comes from the request comes from
clients as in the server and the writers
the other direction so what you can do
usually it wraps the resource mapping so
you get here the access to m2d to the
entity and to the stream is also new in
Java Java EE 7 in Java
there was only message for the reader
and most body writer and with message
for the reader and writer you could very
easily use your own protocol so you
could use your own you can to introduce
realization here so this is also new
stuff read the Interceptor and and yeah
to intercept the traffic so filters it's
the same example whose filters so it I
have just get on post exactly the same
example from before and I would like to
to lock all the requests and what I can
of course do without pre-matching I have
just here I can intercept the whole
traffic and lock everything out or I
couldn't I was asked recently I would
have to now to have access to HTTP
headers for authentication tokens you
can do it absolutely in container
request filter so this is a very simple
example of the pre-matching pre-matching
was like you know changing get to post
region container request field and this
is very basic example so you have to
access to the 2d get headers get head a
string to D to the headers for instance
and you can use security authentication
information do something with it so even
more interesting is dynamic feature
so what dynamic feature actually is is
how it's called dynamic feature and what
it does is you can configure configure
stuff so in this case what I did is
depending on something you could use you
know I don't know environment time
system properties whatever you could
decide whether to register for instance
a request Locker which happens to be
contained a request filter so the
difference being is if you would like to
lock everything you could put provider
annotation on it we added already and
provide a means it gets applied to
everything but with this with the
dynamic feature you can you can decide
on something whether you would like to
deploy message for the readers writers
whatever you like
dynamically which is really nice for
instance
in debugging case you can intercept the
whole traffic and in production or if
everything is okay you can just skip it
of course you will have to redeploy the
application or restart the server oh I
got some questions sorry
ah
is there any any way to make a request
asynchronous in jax-rs
of course and this is actually very very
easy so I can show it right now so how
to make it asynchronous right I will
skip this and say suspended async
response response and then I will just
delete the exception and say response
that resumed object and the nice story
is what I could do as well I couldn't
say response dot set timeout and I would
say one day is a little bit hard but
responds that set timeout Handler and
you can register timeout handler here
and what you can do here you can say
okay in case in case timeout occurred I
will take their asyncresponse and write
an appropriate HTTP code back so of
course jax-rs is not only jacksters to
is not only asynchronous from the client
side from the server side but it's also
absolutely asynchronous from there from
the client side so the plan is also
asynchronous so this is how it would
look like an asynchronous invocation
what asynchronous actually means is that
the method is is executed immediately
and you don't have to wait until
something happens does actually so sorry
it the method is completed immediately
and without blocking a threat and you
could pass the async response to someone
who and a synchronous egb or whatever
who which which fills
the response in a synchronous way by the
way I recorded our little screencast
about this so if you go to youtube and
you will see watch the screencast was
completely the future to see it in
action
completely asynchronously so on that
note so what what I wanted to mention
but didn't is usually I don't use this I
always return the response so it will
look like response dot status and in
this case is okay of course I think is
entity yes
entity and I will just return the
developer here built new developer build
looks good so there's a little bit
boring a little bit more exciting it
would be if we had a post method which
creates a developer I think we are
little bit of time so the question
reorganizes how much time we have I will
hack a little bit and if you are no more
interested you can just leave the room
or something so the question is if you
have any questions asked and the
organizer can block me at any time so
return response what's wrong with our
this is a would say safe developer and I
could pass the developer here developer
developer developer developer developer
and now if the developers created I
could return response dot and now a
little bit interested created with the
or e dot built so and this will return
201 not 200 201 with the location header
which is really nice because on the
client side you will see okay now the
developer is created and it's available
under this or e and the whole headache
creation happens
automatically behind the scenes here so
um how to do this I think I could do
something like this context I think
orient oh right yes info and there was
something with builder get absolute path
builder ad now path and I could say ID
and system current millions usually will
use ID from the database built I think
this is looks good
or II and you would return the order
here and this is wrong so let's see
whether it actually works so developer
want developer we only need to the
developer data to do this so can we do
this developers let's try this okay
so I would use I would use the Duke
chief and this is my developer and now I
could say curl - ex post - the data and
the ori is i think this one let's see
whether it works what is the problem
oh I forgot something - H content type
is application slash o / Jason wow it
worked so do it again what you see right
now developers created and what you get
back is location as you can see
developers with the ID this is not
actually we could create something
really nice so we could say not this
rather than make it really restful and
return something like chief Duke and of
course you know getting it from the
actual request let's do it again
so I get this and now I could cut here
and say curl no you can see you get this
XML representation of the developer this
is what I meant so so there are lots of
HTTP codes and how to deal with it I
would say what I do in my projects I go
to HTTP status code RFC RFC yeah perfect
and just look at the codes and I would
use a code which really fits the best
here and this is the basic idea so on in
standard inventing something just
what's already there the same note if
you have forgot how post or put or
whatever operates just go here and say
HTTP POST RFC and the specification is
surprisingly lean if you go here and
search for post for instance this is
everything so this is the whole
specification about post look at this
and then you can write better interfaces
so on I think our session is over we
could talk for multiple hours do you
have any questions any questions about
restful Web Services and stuff or other
question I was asked which were not
about rest I will answer them in the
next air hex Quay it is I think June the
second so I will just pick the questions
I put to my blog and I will answer them
as well but right now I would like to
hear whether you have any questions
about jax-rs jax-ur s2o java 7 in
context of Jack's res no questions then
I would say thank you and sorry that I'm
not there in the je conf would like to
come but crazy time I have lots of
deadlines to meet and just to travel
would kill me this time and I think it
work really well you are a little bit
more quiet than usual usually I get are
so many questions we are Twitter that I
actually cannot handle them so um thank
you for watching and see you one of
upcoming conferences hopefully Jake on
next year
Java 1 I will be there or e^x in Munich
Airport so um Pia is behind me so um
thank you for watching and bye
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>