<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Accessing WebSockets from plain Java with JSR 356, Java API for WebSockets. | Coder Coacher - Coaching Coders</title><meta content="Accessing WebSockets from plain Java with JSR 356, Java API for WebSockets. - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Adam-Bien/">Adam Bien</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Accessing WebSockets from plain Java with JSR 356, Java API for WebSockets.</b></h2><h5 class="post__date">2015-02-06</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/YfIPZ9h0iGE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello my name is Lebanon often asked how
to implement a java web socket client
for WebSocket server so to show you this
I will need a first server so create a
server endpoint so it's very easy so I
would like to use the very thin maven
template and I'll call the server or web
socket server and what will create it
will now fetches the archetype and
creates the project and then I will need
to create a maven client project doesn't
have to be amazing but I like to use
maven is very fast and simple so I will
use web socket client and the web socket
client needs a dependency so you could
see it's a very simple project I will
just use Java 8 and the pendency is to
tyrus Cairo city reference
implementation web socket reference
implementation or and searching for is
the server and I would lose use D
version 1 9 so this is all you need to
to implement our WebSocket client and on
the server side I need a endpoint
I call this messages endpoint and point
and I need the same similar endpoint on
the client as well so this is the
messages endpoint and it needs to be
annotated with server endpoint and I
would like to use DM all I have to use a
or e starting with a slash and call this
messages and then what we need at least
one method on message but we also need a
session so this session you could confer
this create a method called init and on
open annotation and put here your
WebSocket session
and we can remember the sessions oh
there's session equal session I would
like to remember that and what do I also
like to do is to create a method called
message could be on message like message
driven bean it doesn't have to and I
will just interesting the payload on
message on message and here I would like
to output the message and what I also
like to do is to send back the message
and say send text let's echo and our art
D adds the message so that's good I only
have to catch of course an exception so
we just ignored for a moment so this is
just a server part it doesn't matter
right now so now concentrate on the
client so let's try to deploy this
whether it actually works so grassfish
server and run it so as you can see it
works somehow
so there is an 404 because of course
there's no HTML page in the gif no JSP
nothing but the URI is important so our
now let's build the client on the client
side is very similar story the web
socket is a I would say symmetric
protocols on the client we also need a
messages endpoint messages endpoint but
we will have there is no container on
the client usually so we will create it
programmatically so extends endpoint and
we implement the method and what I would
like to do is I will also like to
remember this session session because SN
so remember this so we have T socket
session and I would like B to be able to
send a message so how to do this similar
string message
and this session get basic remote sent
text message so now it's sent and of
course receiving message wood could be
also interesting so let's do this this
session so we have to do at message
Handler and we have to register a
message handler but this message handler
needs to be a whole we would like to
implement something which receives the
whole message string and we say here
received message and this is just now so
looks good so we have the unopen and we
send the message so what we only need
now the actual client or driver so I
would like to write a unit test for this
and call this sockets test and the
package is going to be a hex so let's
see sockets tests and send message so
there is a class a bootstrap class
called container provider a similar to
container provider very similar to the
client builder in jax-rs so container
and container we can say connect to
server and as you can see we need the
endpoint so I would like to remember the
message endpoint to system message the
endpoint equals new message endpoint
and I need theory and the aura starts
with W s / / it and let's go to the
browser and this is actually the same
Orias two servers so let's just I don't
use the HTTP because it's not HTTP and
then what we also need to tell is the
messages so we have to check it so this
is the only that's a very very similar
to jax-rs actually so messages and of so
we have to end Boyd key messages and
this needs to be an OD so we use here
new Ori and with the constructor and
then it should work after catching some
exceptions so this exception you would
like to deploy an exception and IO
exception and now are no more exceptions
left so endpoint send message hey Duke
of course and now try this test so test
is green which is also always nice let's
see what happened on the server and the
server received a message so thank you
for watching as you can see WebSocket
client is even easier than WebSocket
with jax-rs now I would say the same so
it's really easy to create WebSocket
fans for testing or justice drivers or
you know for your swing in Java fix
applications
so thank you for watching and see you on
upcoming conferences a hex of course so
we have new Eric's workshops and mimic
or custom workshops or even the real
word project with lots of coding and
don't forget to subscribe to your hex
news okay thank you bye</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>