<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>JavaEE Authorization ...Injecting A Custom Principal | Coder Coacher - Coaching Coders</title><meta content="JavaEE Authorization ...Injecting A Custom Principal - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Adam-Bien/">Adam Bien</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>JavaEE Authorization ...Injecting A Custom Principal</b></h2><h5 class="post__date">2013-09-04</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/iEEfNB05ado" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hi my name is Ivan and today I would
like to show you a little bit how to
extend Java six security so I would
start with a simple war project and I
would say packs flexible security next I
would use GlassFish the Russian for but
it actually doesn't matter and this is
actually one of the common questions
like Java ejt security is not flexible
enough so how far we can go with just
stand up and to show you that I will
implement first a very simple Giuseppe
and the chaser and we will need a a
kingpin to inject combat index as well
to package this it's this one so and
this is going to be a model I will just
return the principal principle and we
can inject the principle which we do not
with that principle principle and we
just return the principal and the name
of the principle so and in case F right
now we can just use or just display the
current principal so now deploy
everything so it was thought best fish
first and Lundy story database and yeah
hopefully you will see something in a
browser and you are probably already
thinking about is what I'm showing you
so the idea is is that the principal the
username is actually always unique so
there's always IND cues
you can you use it as a key in fact this
is often implemented as a key in in
robes security runs and if you use the
username as a key you can just fetch
whatever you want from your own store
inject add and then you can have a
flexible security so like there's
actually the difference as you can see
the username is anonymous and because we
are not authenticated yet but what we
can easily do this is to invent our own
principle so I will call that they hide
principle or yeah doesn't matter
and sisters a regular Java class and the
Java class can have two username and
usually would have an array or list of
entitlements or rights or exchange list
of innovations so we would like to
perform contractors and you would also
like to create the list intern and
probably add some entitlement to the
list string connection this actions and
actually and to see something I would
just like to use just implement it to
string method so this is our own
principle so only could do right now I
would like to create a trance called
custom URL and this is going to be an
EJB because we will have to access
entity manager and this is actually
really nice to have it monitor able so
and here I would like implement
method called a high principle fetch and
the input will be just the principle so
this is what it can do and yes what it
does it it transfers it so it transforms
the principle that creates from the
principle the ahead principle so how to
do dad
we can we use the name first and we use
the name as a primary key then I would
do something like this
entitymanager find a hex principle with
the name so just commit that and then
return the fully populated GAC principle
with the name and probably a temptation
as water and I don't know everything
so now and what we can do right now we
can even simplify that so how to do this
we will say this is produced and the
principle is going to be injected
principle trend and we inject that so
now in the index instead of injecting
the principle now we can use our own
density and yeah we just say principle
to spring so and of course the principle
is just approach' domain class so what
it can do here you can implement your
methods to check its rights dependent on
I don't know temperature and daytime or
whatever you want and of course what's
always possible you can implement an
interceptor which which checks which
Trix web connection is actually allowed
or not based on annotated methods so
let's see whether it actually works as
you can see it writes user under the
most actions everything so with a simple
hack the Java security
starting with Java 6 is very very
sensible and yeah thanks for watching
enjoy hiking and see you one of the
upcoming conferences bread shops or even
the annex so thank you and enjoy Java
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>