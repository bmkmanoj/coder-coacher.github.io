<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Going Asynchronous With CompletableFuture and Java EE 7 | Coder Coacher - Coaching Coders</title><meta content="Going Asynchronous With CompletableFuture and Java EE 7 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Adam-Bien/">Adam Bien</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Going Asynchronous With CompletableFuture and Java EE 7</b></h2><h5 class="post__date">2014-05-08</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/KUISpHbWib0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello my name is Alan bean and today I
would like to show you an idea or to
present an idea how to combine
completely future jax-rs CDI events
together to a nice job a servant job aid
package so on I would like to start with
an empty project so we don't need any
wizards it's just easy enough to build
us and I call this a sink
the problem is in Java 6 you could you
could have perfectly asynchronous
behavior with with jax-rs and or
asynchronous tablet and and eg B's but
you won't have to use futures and it is
a little bit is you have to write more
code in Java 7 it is fairly easy so I
meant Java 8 it is fairly easy so what I
would like to do I would like to start
to create a class called calm Eric's
Jack's async business do it right and
this would be the jax-rs
configuration so and we I would like to
create a package called
here the dot async and the class answers
answers resource so we have answers we
chose and the jax-rs configuration I
have to specify the path application
path usually resources because it
doesn't matter and extends in this case
doesn't matter and it has to to use the
Chuck's RS extends from jax-rs
application so we are in the business
Jack's current version in the async we
have the answers resource and this is
going to be a resource with the path
answers and we make it a stateless EGP
why not
and so I would create something unusual
a method called answer which is void and
this method is get so this is impossible
in Java EE 6 but perfectly possible in
Java 7 because I could use here a
suspended asyncresponse response and now
the cool stuff begins so what we are
interested in the hole response is
actually only in the resume method just
in this so we can use method handle for
this so resume a method handle right so
but the interesting part
there is a consumer available in Java 8
so this is a built-in function called
consumer and this is a kind of duck
typing because we are we specified an
interface on the fly and we called here
consumer dot consume the method resume
is going actually to to be to be invoked
is like in a class so and I would like
to use an event of type here consumer of
object of object events and this can
inject this event so and the interesting
part is now I can just fire the
consumers in event so I am actually done
here so what happens here the method is
completed and then the event is fired
here which is quite nice and the
business async and this is going to be a
boundary so boundary so now let's
imagine we have a POJO
answer or I called it thinker thinker
and the thinker has to provide the
answer and this is a control
it's a POJO has nothing to do with Java
EE so there's only one method the answer
and make it the answer because we had
the answer already and it is it returns
of course 42 what else so so we have
thinker the answer synchronous call and
then we need the actual boundary which
is going to be the answer
provider and this is usually always an
EJB and what we have to do here we have
to to listen a new question for the
consumer of the answer so we use the
annotation observes and consumer of
object consumer and this is this is the
consumer is really just a Java 8
interface so we can it comes with Java 8
so and now the fun stuff begins so what
there is another interesting class
computable future supply async and so
and it expects two methods two parameter
story supply an executor and the
executor we are lucky we are in Java 7
space so what we can do we can inject a
managed executor service mes
and use it as shred pool which is quite
nice and then we can say then accept the
consumer and chain them together so
computer future supply async then accept
consumer and what's about the provider
of the answer
well the provider we can inject the
provider directly here is going to be
the what was it the thinker and of
course the same trick we can we can have
a supplier of type string answer
supplier equals thinker and the answer
and then of course I could use here the
answer supplier fine so and I could
invoke it but there's void there's no
result because it happens to be are the
scenes so
now let's test it oh no test it without
what I forgot is the pin 6 ml of course
we have one pojo which is not annotated
so I switch to all so all classes are
injectable right now so I would like to
run it so which server the lambda fish
just run it and the hurry of this
project should be an async / ace
resources and answers I think resources
/ answers as you can see there was the
easiest possible way to print 42 on a
screen right so as you can see
completely the future jax-rs and and
executor service is actually the entity
it's a really really nice way to combine
synchronous and asynchronous behavior
together and yeah thank you for watching
and see you one of upcoming conferences
Java one for sure and yeah and projects
drug shops or even the X in Munich
Airport is my personal workshops ok
thank you bye
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>