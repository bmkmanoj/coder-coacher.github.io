<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Combining Custom Elements, Shadow DOM (Web Components) and lit-html templates | Coder Coacher - Coaching Coders</title><meta content="Combining Custom Elements, Shadow DOM (Web Components) and lit-html templates - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Adam-Bien/">Adam Bien</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Combining Custom Elements, Shadow DOM (Web Components) and lit-html templates</b></h2><h5 class="post__date">2018-01-20</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/mnbrxARvCTQ" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello my name is Adam beam and today I
would like to combine a custom element
shadow Dom and a template engine called
lit HTML and it comes from Google it is
basically two functions one is called
HTML which expects on template literal
and a render function and this is the
template engine which is used in polymer
300 which can be used with polymer 3 oz
I already downloaded this and it's about
500 lines of code and minified with lots
of comments ok so let's start with a
component so what I would like to do is
to create a custom element and call it
nice counter which will extend the HTML
element and I will just switch to here
and I will just use a constructor and
call super because required by the spec
and then just open the shadow Dom at
that shadow and then use the open mode
what I also would like to do is to have
a message and this is just the value of
the attribute message so and then I
would like to have a counter value which
is zero and then have two methods one is
called get counter and it will return
the return the counter value and another
method is called set counter let's just
get on set up with counter and then this
counter value associated with the value
and then I would like to define a method
template and this method
we'll use the lit HTML but in order to
do so I would like I would like to use
the es6 modules so let's activate that
and then I can just import import and
HTML function and render function from
from lit HTML GS and then I can define
my template and this is the text syntax
this the multi-line string and what I
would like to do is just to return a div
div and with indeed if I can just access
here my message with the state of the
counter so one is the attribute and the
other one is going to be dynamic why
dynamic because what I will do is I will
do the following set interval and I
would like here to a fight method
increase counter and this will just
increase the counter and so let's do
this every second so and if Nick so we
have the template here and in case the
counter is going to be changed what I
would like to do is tear in the set
counter method I would like to rerender
the page so I will use the other method
is called render and in this render I
will just fetch the template and render
the output into the root the shadowed so
it could already work what I only will
have to do is to define the component
and and the name of the component is
going to be a nice counter
and the class is nice counter so this is
the class name and this is the technique
so now we could use this and let's do
this yeah nice counter and the message
is stuck and what happens console
counter value is not defined so let's
see what the problem is this is the
counter value counter this counter value
there's and counter value message is not
defined so this is this message this
message and of course this counter and
we have Duke and two so it works and but
the most interesting part right now is
the following
so if we open the shadow DOM and the
diff we notice that only the one
variable is updated in the DOM and the
other one is static so what it means is
this template engine is very efficient
with the changes if I would write the
template engine by myself so very simple
one just use the year six literal it
will replace the whole subtree but with
little ml it only replaces what really
changes which is very fast</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>