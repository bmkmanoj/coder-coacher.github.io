<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Live-Coding No-Ceremony Microservices | Coder Coacher - Coaching Coders</title><meta content="Live-Coding No-Ceremony Microservices - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Adam-Bien/">Adam Bien</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Live-Coding No-Ceremony Microservices</b></h2><h5 class="post__date">2018-04-19</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/qQtF-Ks0c5U" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello my name is Adam beam and welcome
to life coding no ceremony
micro-services what I at what I would
like to do is to code a little bit
microservices with nothing but standards
and see how it actually feels like if
you would just focus on on the standards
without using any external libraries
okay let's start with the content so
thank you for invitation to the Java
with the best conference and start with
the topics okay
so I'm working as a freelancer or
consultant and I really like Java so
really enjoying it also I have to say
the last time I do lots of Java EE
back-end stuff I would say 60 70 percent
of my time and the remaining time I
spent with web standards in the front
end
okay so I've write a block small as a
notepad there's a bunch of online
courses and by the way there's one
course which might be relevant today is
Java EE micro services or if you like
the content and the lightweight nature
of micro-services take a look at this
course and so there's the first Monday
of the month I try to answer taking the
questions via live streaming where
exactly this channel and and from time
to time I publish a podcast okay so
what's the idea
Len ones never migrate so this is the
idea with web standards as well as
back-end java e technology so if you
focus on standards there's less to do
because they do not change that often
okay so and this are basically the
slides and if you like come to Munich
next next winter there will be one micro
services workshop as well so this is the
very last slide so thank you for
watching and see you next time bye not
just kidding so let's start with let's
start with the content and what I would
like to do is to create a micro service
from scratch and how to do that so I
will use maven and I use maven archetype
so you can use it from from do it from
command line
from from the IDE I do too right now
from the IDE this is the Apache NetBeans
which happened to be NetBeans but was
open-source and now it's a Apache
NetBeans and and I would like to use the
Java 8 archetype and the current version
is zero zero two this is the current
version and the name of the
micro-service is what we call it or we
could do today workshop workshop so we
have a workshop let's create a workshop
workshop
ok now it's going to pull the project
definition of via the internet it the
performance of this depends on the
performance of the sono type central so
sometimes is lightning fast and
sometimes charitable turbos slow and
yeah let's take a look at the maven
definition I get often question you know
whether I like maven or Gretel and for
Java I prefer maven why because it's
very lean whatever we usually get in my
project some test dependencies and in
this particular case I would like to use
Java EE 8 in Java 7 you would have - 7 +
6 - 6 but it is good enough and what
happened behind the scenes so I created
a pin 6 ml deployment a script or or
configuration file and I like the bin
discovery mode all which means
dependency injection works everywhere
and what also happened I have an
endpoint called pink pink resource and
with enjoy Java 8 and the micro service
is configured to expose resources too so
this is the entry a URI so per
definition or convention in Java EE the
or e would be workshop / resources /
with a little bit of luck if I would run
it and I would like to run it on payara
5 which is the supported version of
GlassFish 5 and
five is the reference implementation of
Java EE eight so payara five you can use
in production or white whitefly 11 or 12
or Tommy or open Liberty there are lots
of application service and now let's
just try to run it locally so I would
just click the button okay and then run
it so run it and what happens right now
the database boots and the payara also
boots locally so now it starts and I had
some Cassandra stuff installed which is
not relevant for today so I will just
install that you know we don't need any
Cassandra today we just need the so it
took a while but we deployed behind the
scenes for different applications or
right now we have just the workshops
okay now what doesn't mean that with
resources pinks pink resources and not
things rather than pink with UC enjoy
Java EE so it seems to work
so we have our NetBeans and here we have
enjoyed Java EE so and if I would add
something more dynamic
we should should redeploy and we should
see immediately it's a difference okay
this is the simplest possible Java EE
application the question is what is a
micro service so micro service means we
have just one one application per
application service or one Warp
application servant once in a processor
with 1gb em one application server one
war so we don't need clustering multi
domains nothing we have we used
application server as a operating system
if you will and this should run in Dhaka
so we started outside now let's try to
to make it run in Dhaka so what is to do
so what I usually do in production I'm
using my own open source project called
Docklands
and you don't have to use of course this
this open-source project rather then the
idea is more important than the project
and what's the idea behind for instance
I have heared Java 8 dockerfile or Java
10 daca file and let's go to the Java 8
and what you can see here that this
docker file is based on sent to s7 and
I'm I need an unzip and Java 1/8 open
JDK and and then I said T Java home so
this is the uppermost image and this
image only change order has to be
rebuilt in case we get new release of
Java so what you also have let's say
let's switch to white there for instance
so in do you want white fly it inherits
from a hex Java and this is why it's red
11 then downloads white fly and then
sets up the white fly so it runs on
different user so it can be drawn on
open ship for instance in the cloud and
then it exposes the port 8080 so what
doesn't mean we have two layers the
first layer is the Java layer then we
have a white to a layer and let's say we
would like to make it run Android white
fly so we started in payara but let's
try it on white fly right now in Dhaka
so how to do that
so what was created here is a simple
docker file as you can see from a hex
GlassFish but let's try it with white
line while to fly and because we have
Maidan I know that the name of the war
of the project is name of the war so I
will copy the target virtue ops war into
deployment der and the deployment der is
st deployment folder were Tommy white
file open Liberty or payara
or scanning are scanning the wars so
let's try to build that so I will switch
to the terminal and we should have
workshops here and how to make it runs I
have a script was also created but let's
do it from from scratch
maven clean install
clean install or packages enough
actually and Daka built and you and we
can use a tec-9 air hacks slash
workshops hopefully it's not used yet
and what happens right now it will build
the binary image and it's done so it's
very fast why that because the only
thing which changed so there was the
full maven build plus the full docket
build so first good news if used
Microsoft Java based microservices the
build is lightning fast which is very
good for productivity because we usually
have a CI continuous integration
continuous delivery pipeline and waiting
for too long is it's not that ideal for
productivity so we have that and I would
like to run it in Dhaka so the name of
the images air hex workshops and to make
it run doc run in background - t is t
touch mode the means in background and I
would like to expose the internal part
80 82 80 82 and I would like to give it
a name workshops and use this image name
so it's done so it puts and let's take a
look so it runs and we can also take a
look at the deluxe and as you can see
it's deployed and now let's see so we
can make it run on 80 82 and it also
works so and to show you that it's
actually white fly I can actually oh I
think it's cached because it should be a
white lie so this is a this is the glass
finish this is the payara
and this should be white fly but it
looks like GlassFish server which is a
bit strange but this glass was five so
what's the problem here docker file
white fly I didn't save that
the problem is so we ran it accidentally
on on on GlassFish because I forgot to
save it which is true so now you saw it
running on payara GlassFish 5 and now
start try it again who is whitefly so I
would just rebuild that so build it
again so now it should take the whitefly
server and before I run it I will have
to kill it workshops ok killed you kill
determined killed so and now run it
again where is the run script here rec
shops and hopefully now it's going to be
white lie and it is white fly so it
looks good
white fly looks better and it was
workshops resources pink and this is the
response from white fly so now we
deployed the application twice or three
times actually and using docker and
mavens or this is the worst possible
experience because we don't have any
Cuban it is nothing just plain plain
docker with CLI and plain maven without
any additional tools or specific you
know IDE support ok nice
so the next question is I get a lot okay
this is sounds sounds interesting but
how you configure such application in
cloud native way and if you run in dhaka
there is only way to configure such a
thing and this is via environment
entries because in cloud usually Kuban
it is injects the environment entries to
your application so let's try to to show
how it works and i would like to add
configuration dot boundary a
configurator let's call it configurator
and the configurator exposes the
configuration a string expose and i
would like to use the injection point IP
and produce says and this should be dis
producers and what I can do I can say
okay nice I would like to first check
what's the name of the what's the key
member get name so I asked about the
member and the name and then I can
return system get and get NF get or
default key it means I would like to get
the key from the environment entries and
if not available I would like to use my
system property and the system property
is very helpful for local development
because it is harder to change the
environment entry so what I usually use
I use system properties on my local
machine and I use the same key and it's
not available I can say yeah not set or
I could throw exception of course so now
I have a generic configurator and what I
could do right now I could for instance
inject a string hello message or just
hello and oh and then just add this
hello okay we will have to build it
again yeah we have to build it again
because we change the source or bytecode
and then kill it again and run it switch
here and see what we get
not set so good news first
something got injected so this is not
bad and what I will have to do is to set
the hello so how to do that
we will remove the workshops and run it
again this time with minus e and I can
say - e hello equals hey Duke and
minutes E is environment so now it's set
and I can switch to here hey Duke so
this is how you usually would configure
Java applications in cloud native way
and what you of course can do you can
specify here and file this is my nose-
end file and you can specify no key
value pairs which are then stage
dependent so this is a built-in dhaka
functionality on open shift or in cloud
is even easier because then you you have
config Maps or deployment configs or
build configs I just brick we'd quickly
switch to Twitter whether there are
questions or in chat also no questions
so this was how to configure
applications and now let's create
another micro service because you know
one micro service is a little bit boring
so the next question is how to how they
can communicate or how to make them
communicate with each other so then
create a another micro service and with
the zero to version and I would like to
call it trainers and takes a while
okay so we have the trainer's now this
is the same structure so no surprises
and we also have to ping service and now
what I would like to do is to expose a
business object or business object a
resource called trainers trainers
resource and we would like to get from
the workshop the trainers so this is the
idea here trainers and just create think
at call which returns the trainers and
the trainer should be the Duke and Luke
no idea so two trainers and this should
be good enough so we can change again I
would like to we can keep it this way so
it could be GlassFish v5 why not so we
will run the trainers on GlassFish v5 so
let's write that I would switch to
trainers and maven clean package and
afterwards I would like to build with
Erics
trainers trained nurse dot now it should
build that and make it run with class 55
doctor run minus D minus P and the pot
number just go with 80 84 88 e
named trainers yeah ex trainers okay it
looks good
doc yes so now we have workshops and
trainers running both and let's see what
happens when I ask here 80 84 84
resources sorry
not trainers resources and I guess
trainer so yeah two times trainers was a
little bit boring but this is how it is
so and now let's say I would like to
call this Ori from the workshops
microservice so I have here the
workshops micro-service and I would like
to call here my workshops I will create
a workshops resource workshops resource
with path fetch ups and return the
workshops and this is going to call so
this should be workshops boundary just
refactor that quickly and then workshops
catalog and this would be stateless and
then we could return and then we could
return the workshops here and which
workshops we have of course we have web
standards micro services and lean and
fast ok so we have this and the
workshops resource we can just inject
this workshop catalogue and say this
workshop kata are this workshop catalog
ask for workshops and then what I would
like to do is to add a class
which fetches the trainer's so and this
is going to be a control and this would
be how to call it
trainers what catalog trainer catalog is
a little bit strange name let's call it
trainer store and and the trainer store
what it does it has a method called in
it post construct and it should return
and what we would like to do is he
actually we would like to access this
over here which is a little bit
complicated I'll show you in a second
why but return fake so we have trainers
we have in it and we could actually in
here say this workshops this would be
return workshops and what we also would
like to have is inject inject the
trainer's store store and you add the
trainer's this store dot trainers ok
drug shops and trainers and so let's try
that
so whether it works so what we should do
we should redeploy the workshops and we
save that which is already good news and
I will just switch to different console
and say here talk a built
workshops it's built remove workshops
run workshops perfect so with a little
bit of luck we should be we should have
another end point here in 8080 to
workshops resources pink so this works
workshops resources workshops we see
here linen fast and fake so obviously
it's just fake but at least we
integrated the class ok now the problem
is twisty localhost so we have we have
two independent JVMs to to up to the
independent docker containers even Linux
distributions could be and you know how
to get the name and the good news is
because of docker or clouds the DNS
happens behind the scene so we don't
have to do to to bother with the IP
address instead what I can do I can rely
on the container name so instead of
doing this I can say what I would like
to use is is the container name what's
the container name dr. PS so I'll just
clean it docker PS docker PS and the
container name is trainers so I would
like to use just e trainers here as an
array and what's the part the part is
the exposed part regardless regardless
what the actual name was so I would like
to use this so this is my er E and then
client builder new client just do that
this client so we have the client and
then this client target use the URI and
I would like to return this target call
it um trained nurse target and then and
so we have the trainer's target and here
I could just say this trainers target
request get and I would like to get this
as string so what happens now we are
accessing the other server who is the
name trainers 8080 and it will work the
problem list I will have to set up a
docker Network for that so sounds
complicated but is actually fairly
simple so how to do that I would like to
create a token network token network
create and call it workshops and now I
can say Doka network connect workshops
and this was stupid name workshops
because this is a micro service name and
the workshops name and doc doc network
network inspect workshops as you can see
workshops are now part of the network
and I can repeat that with trainers so
now doc network inspect workshops and we
see the trainers and workshops are both
inside the network with the name
workshops ok
it could already work so let's see if we
just try that ah it won't work
why not because we change the source
code here so I will have to rebuild the
workshops microservice so there are no
miracles even not even no miracles with
Java EE so maven clean package just do
that so now we rebuilt this thing and
then remove workshops and now run
workshops but what like what I could do
now right away I could tell the
container to run this micro service
within the workshops network so dark IPS
we have both and go to the browser here
it's a pity so it should be not fast and
fake rather than something else but
let's see now just go to the coal and
fast fake oh it's not safe again
workshops clean and built back shots
removed and workshop started with haiduk
workshops a hex workshops perfect ok now
it waits for the local host and we have
fast you can't look
so this Duke and fluke comes from the
other micro service so we made two micro
services communicate with each other
again just with plain taka without any
additional tools or fame works so let's
see what happens here in Twitter nothing
no questions here no questions here
which is good so we can move faster ok
now it is not very robust the wave of
communication why not because there are
no timeouts there are no bulkheads in
place so bulkheads means if this server
is too slow what could happen is that it
it will slow down mine servers in
eventually kill my service so in order
to prevent that I would like to
introduce timeouts first so instead of
doing this I will rather go with the new
builder and say connection timeout and
the connection time mode should be one
second one second and then reach timeout
also one second
and then I can build the client now if
the other server is not available I get
an error now the question is what
happens in error case so if this if this
method is not successful we should do
something about that and what we could
do is to call to implement so-called
circuit breaker so and in Java EE we
have already a built-in circuit breaker
so let's try that new Java class and
let's call it or just put it here
workshops we are in the package control
so I will pull the secret break in here
and the circuit breaker translated to
German is the here honk which is funny
name so I will call it Z Karanka
just just for fun why not so we have the
Z here on pattern it would never take
off with the name so object and call it
guard invocation invocation context I
see and throws exception and return I
see that proceed and this will just
invoke the methods around invoke but
what I can do as well I can introduce a
atomic integer should be enough arrow
arrow counter counter new atomic integer
now what I can do now I can just say
okay in case an arrow happens catch
arrow in case the arrow happens I will
for sure
increment the counter and then we throw
the exception and yeah we throw the
exception then I can ask in case the
arrow counter catch this larger than to
return null
and now the circuit is open so the the
actual method is not going to be called
so now let's install the Z here on so in
order to be successful with that this
should be a singleton why because yeah
because there is this one instance of
the back and micro-service so it's
easier or more natural to represent that
as a singleton if you don't like
Singleton's we could just make this
static so they are both pose
possibilities and in case the singleton
I can make it a little bit more
concurrent so okay please don't not to
not lock anything and then I would like
to install my Z here on here so
interceptors and this is the old
interceptors whatever I show you right
now is actually ancient so it's nothing
new here see here wrong class okay so we
have to see here honk and now the
trainer's method is guarded so on error
the error count is increased and I will
just say Z here honk is open
and here arrow row happened and plus
arrow counter get so we have this and
should look good so and let's test that
and to invoke and by the way
system.out.print line can become the
next best practice because frameworks
like open shift or other cloud native
frameworks are able to gather the deluxe
from this system was print line so this
could be one way of writing log feist of
course the problem a little bit is that
if we look and implementation is
synchronized so the concurrent behavior
really depends on the performance of of
your logging framework so we have that
so let's see what happens so let's
rebuild the workshops again so kill the
workshops build the workshops and run
the workshops and random
and take a look the internal Severo this
is not nice dark logs workshops and what
we see here is what
a problem and it says failed to
construct construct component instance
and why - connect timeout client builder
oh this is right and what I do no such
method error
I accidentally accidentally used
whitefly 11 which does not support Java
8 client here so what we would have to
do is thankfully we have a bunch of
servers here to choose I will have to
switch the workshops to GlassFish and
sorry for that but this is real life
exception sometimes happen so just build
that and run it by the way if you have
just Java 7 application service also not
big deal the only difference is in Java
7 this the the connect timeout and re
timeout
they are proprietary constant so we
would have to use the GRC or rest easy
or cxf constants and not rely on the
builder here
ok and let's see what happens
and it works which is good dark and logs
workshops and workshops and we see about
to invoke public method trainers so now
looks good so now try to break it and
how to break it in the most effective
way make the a trainer service not
available so on how to do that I can go
here and say doc and network I hope is
disconnect yes
workshops trainers
now there are normal trainers doctor
locks workshops do the follow thing so i
will see so and now switch to here try
it again and what you see is the
si-hyoung is open so now there are no
more arrows and what we see is the null
and the Z along is open there are no
exceptions and what we saw is the
unknown house exception trainers so now
there is no way to close the Z here on
right now but because we do not have an
API so we will have to restart the
server what we do in production we have
a kind of dashboard or KPI monitoring
thing and with the KPI monitoring thing
we are able to close the Z here on what
you usually don't do not do is to use
fancy algorithms because in most
enterprise system all systems are
crucial and if a back-end system is not
available we usually create a ticket or
you know try to wake up the
administrator and we do try you know to
apply any retry logic ok so we have the
communication right now and let's
implement bulkheads
so what bulkheads meanest we would like
first we can change this a little bit so
what we could do is we could communicate
asynchronously here and how to do that
first instead of doing this I can tell
here Erik's
so what I would like to use is the
reactive way of programming and say I
would like to have a completion stage
with type class with type class with
type string and what I get back is here
completion stage I hope yes this is my
return value so this is what I get back
and I would like to return that here and
say return this so now my boundary here
workshop catalog
not catalog virtual resource calls the
trainer store and the trainers returns
to completion which does not want
looking very nice so what I would like
to do is to change it in complete
asynchronous way how to do that so I
will get rid of this one and instead of
doing this I would like to make it void
and say here hey I like to use suspended
communication model suspended means the
server won't block it will the threat is
going to be parked so it won't take any
resources and I would like to use the
async response asyncresponse and the
basic response risk responds what I can
do I can I can say now the following so
the trainer's reach returns completion
stage so I can say then accept response
dot resume so and I created my own
little pipeline so what it basically
means is I get the completion stage it's
a kind of pipeline and this completion
stage is executed fully asynchronously
regardless how long it takes
and this ASIC response is passed here
and this method will complete and this
thread is going to be parked and in case
the trainers return we will get ddddd
value is going to be passed to hear
there's a reactive programming style and
what I could also do here I can say hey
I would like to have a timeout here as
well set timeout
let's say two seconds this is like to
guard you know the resource we'd
properly in more complex applications
it's hard to tell what happens here so
we can say regardless what happens here
we would like to return to client 503 in
case something
takes longer than two seconds so and
this this wood could work so what we
could also do we could create a method
add string value add trainers at trained
nurse a trainers yeah and no advert
ropes or just add whatever will work for
us
workshops catalog tout workshops and
plus value just do this return and what
we could do is then apply this ad and
then accept so what happens right now we
get the trainer's first then we add two
D trainers this should be the trainers
trainers we got the workshops and then
except of course we could use Jason
builder to end and return Jason
but for now strings should be enough
just to demonstrate how it will work
with playing Java 8 without any external
libraries or frameworks okay we have
that and now let's test that
so the chops kill remove the workshops
first then build the workshops and of
course run defects shops I even save
that the first time so which is already
a great progress
run run workshops hello Duke looks good
so try to run that and try take a look
how it looks like blocks workshops or
workshops and yeah
so what we get is darker law curl artist
dhaka network inspect workshops token
network inspect workshops and the
problem is of course we only have the
workshops and we have to read the
trainers otherwise it won't work so just
do this connect trainers and try it
again and it works so the problem was I
forgot to re-add the trainers and now we
have fully reactive programming style
right now so it is almost robust
actually in this particular case the
server will take in cloud and huge
amount of memory at least with Java 8
why this because if we take a look and
then apply and then accept what happens
behind the scenes is it will run in for
joint pull so if we go to the trainers
and and this returns the the reactive
completion stage and the problem list
the pool is unbounded or we actually
don't know how its configured and the
completable future usually relies on for
join framework and this fork joint
framework usually acquires twice as many
threats as we have a CPUs which may
cause the application server to acquire
several hundred threats so what we need
is a bulkhead we would like to define
the amount of threads consumed here so
we can do this so we can just set up a
executor service and the executor
service
can be injected so we can inject a
managed executive service mes and we can
just pass the managed executor service
so and the managed executor service can
be configured by the application server
and this is actually just an glorified
executor service from JDK and this was
introduced with JDK 1 5 so nothing new
here but the cool story is now I can
tell the application server hey please
this default execution you can have we
don't have to use the default we could
use
I ain't named one but I can configure
the manage to execute execute or service
to have at most let's say five frets and
in case there are more or less than that
more or less if there are more I can
specify what happens then whether the
queue should block or not for instance
so so what we have right now we have two
patterns we have bulkheads this is the
bulkhead pattern and we what we also got
is the circuit breaker in German zero
okay so we have a view minutes left so I
would just take a brief look at the
questions so no questions here in
Twitter's and also no question is a chat
so
now what we can also do some
cutting-edge technologies I can actually
create a micro profile application and
let's call it future my future because
micro profile eclipse micro profile is
something like an incubator is not a
part of java 8 also not of jakarta now
but what's the difference if you take a
look this is a so the 1/2 is implemented
by payara right now so this is the this
is the micro profile dependency instead
of java 8 so the difference is here in
the trainers we had Java 8 and this is
micro profile and because payara 4 and
payara 5 supports micro pro and 2 I can
just deploy to the same server as had
before but instead of doing this I can
actually implement a hash check for
instance and call it pink health and
this should implement implements health
check and then I have to return health
check response and I will have to use
the qualifier health and let's do it
application scoped and what happens now
I can just return the health check
response and tell the server hey I have
a has checked called
future and it is up and we can pass some
data
have lean and fast does this and we can
create that so now we have a has check
configured and this should be enough so
I can try to deploy that on my local
server on the payara because it is power
of five it is not in the container right
now
so I would like to use the payara or is
it payara five and run it just run it
and future resources pink so we have
that and with health we get the health
which is real nice because right now we
can really easy implement readiness and
and and liveness checks for to running
on for instance on open shift so if I do
this - I you see that this is the payara
five one eight one worth application
Jason and I get the health check as
Jason so what's also cool is the
following I can get upset further and
say what I'm really interesting here is
in the performance of this thing here of
the pink so let's say Java is really
slow let's do this and what's new Java
class let's call it
pink logic so we have the pink logic and
the spinch pink logic compute pink into
an hey Joe and let's say this this thing
pink resource I would like to have this
think they're pink logic yeah so returns
hey Joe with that and so and this pink
resource okay so now we can inject the
pink logic inject the pink logic with
logic and cool and then of course use it
Plus this logic computing and what I can
do right now I would like to say I would
like to count the calls here counted and
the cool story is if I would just do
this I get the metric how many parallels
calls are going on behind the scenes but
I could say also monotonic true and now
we just count the D calls and my pink
logic I would like to have here a timed
metric a timed metric okay so now run it
again and I can now invoke resources and
pink so seems to work hi Joe and the
cool story is what we should get is we
should get the matrix application and
what we get just go to the
so we see that the boundary of pink
resource was invoked for time and what
we also see is the computer ping rate
per second the Aldi matrix for the
invocation of my ping logic and this is
available this is the strange format is
Prometheus format so comes out of the
box so you don't have to implement
anything and on my youtube channel if
you like you can take a look what you do
if you don't have a micro profile
available so I just converted the matrix
by the application server from Jason to
Prometheus but the cool stories as well
I could also ask the server to get
application Jason matrix and this idea
the same matrix as Jason and even better
I can skip the application and then I
get the application server matrix like a
known number of processors thread count
and and I get everything here as you can
see even the application even the
application matrix ok this was a micro
profile 1 2 and the Dow even built a
fault-tolerant spec patterns and
configuration even more powerful with
their showed you right now and what's
also interesting is the following the
question is why what I did was so fast
and the answer is because of the project
structure so if you take a look at the
docker images you will see I have a lots
of images here and all the images are
suspicious suspiciously a half a gig big
which actually this could even blow up
my machine because I don't know how many
how many hundreds images I have but if
we take a look at the image here hacks
trainers right now what you can see
Hearst the change history and you can
see that the first layer this was all
represented you with the Java is 19
month old just the central 7 with Java 8
and the what you did 38 minutes ago we
created the trainer's image and this is
just 4k so each deployment to the cloud
takes it's very fast because what gets
pushed is just the 4k not the full image
and this is where Java II really shines
what we have we have the deployment
process so we build a server once and
the server only changes or new release
and we focus on business logic and and
we we only only ship what changes and
this is usually the war and if we even
take a look at the micro profile future
target you can see even the full micro
profile application with the matrix is
also 4k big so thank you for watching I
hope you saw a little bit how
lightweight micro services can be see
you at workshops upcoming conferences or
if you have questions left go to ear
hacks TV and this is where I usually
stream the stuff so here should we you
should see I don't have the Flash Player
installed right now but you can ask me
questions the first Monday of the month
and and yeah thank you for watching and
enjoy the Java with the best conference
so thank you and bye</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>