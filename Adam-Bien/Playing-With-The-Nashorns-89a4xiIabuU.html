<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Playing With The Nashorns | Coder Coacher - Coaching Coders</title><meta content="Playing With The Nashorns - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Adam-Bien/">Adam Bien</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Playing With The Nashorns</b></h2><h5 class="post__date">2015-05-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/89a4xiIabuU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so hello my name is Adam bean and
welcome to my session playing with the
nice horns and I t connect conference
yeah live streaming session and yeah
it's a part of the IT connect conference
so it's a 15 minutes later but seems
like the Confessor lots of fun so let's
do some Java 8 and and JavaScript and I
would try to actually to not to avoid
java ee this time you can ask me
questions on Twitter so to use the
hashtag a hex or IT connect so whatever
you like and if you like you can also
connect via IRC and and then just ask
questions about whatever like could be a
Java 8 nice one or even Java EE so um
let's start with the extensive slides so
playing within asshole so who am i I'm a
Java enthusiast so what it means i
really like java i started with java in
actually 1995 and it's getting more and
more exciting so um at the moment if
when I think I I got it so the new stuff
is coming out so it is never getting
boring with Java what I what what makes
mistake to the programming language and
yeah from I I write a block which is
more or less a notebook and I think four
times a year I organize virtue of the
munich airport so I'm the organizer and
and how it's called teacher or
instructor whatever you call it so I
hecht lots of Java html5 JavaScript
stuff so if you like come to Munich and
I think some people were already there
so I'm a hex new a hex news is just my
meet our mailing or spamming list so
what I'm doing right now i just sent
once a month on mailing a male about
such events like this for instance live
streaming or I don't know
some know some new Java user group stuff
so two books somehow relate to the
topics is our most liberal Java in this
book I also explain one of the pattern
how to embed javascript code fluid logic
so you can look at this if you like and
I think in end of May there are first
monday of the month there is a question
answer shows you have questions
unanswered questions about java java or
whatever just tuned in to your ex TV
this is actually the same channel as you
watching me right now and do your the
workshop dates so there's nexus in july
and any questions or ask questions if
you have any but because this is the
last slide so this was thank you and see
you right and the reason why i am so
fast with the slide is because i would
like to open the ID so let's let's start
with the with the fun I'm just looking
briefly at the any questions and you
still don't have any questions which is
actually good and bad news so it's good
news because there was no content right
now and and bad news probably you didn't
go to know the channels right so what I
did I started a NetBeans development
edition so I think is from from from
this week and why because it comes with
better JavaScript support debugging and
yeah and I would like to use it but
let's start so my plan is to show you
two sides of NASA one from the Java side
and from the JavaScript side and then
even from the command light side so
let's start with java and i would like
to start with a maven project so maven
not an archetype just regular Java
project and I will call it ite connect
what is it connect one so finish so what
I would i am what i did i created a
standard maven project so nothing
special in it so what I just would like
to do is to use Java 8 so this is the
only adjustment i will make and what i
like to do is to create a journey test
class
us and the class is playing playing with
NASA wands test and my packages chrome
DX because I'm not sure how mighty
connect would also Burkle it wait a
second com I t connect it should be your
page so finish select so and what just
happened behind the scenes here Ned been
just added the dependency to a unit and
hem crest and don't even need em crest
should be sufficient ok so in unit test
what I would like to do is to set up in
it and use before so script engine Oh to
the organizers you can bring me some
coke if you like this would be nice or
send me via Twitter skip engine manager
manager new script engine manager so are
my attempt is now to include last one
via java and this is absolute nothing
new so if you look at this it was
introduced in JDK 16 bad way 11 of the
guy is working on a song from this
origin team but this is so called
scripting library it came in JDK 16 so
we have the script engine manager and
now we can pull the nurse one manager
get engine whoa get engine my name
javascript is ok i think GS would also
work and then i can just fetch the
engine this engine and i would like to
use a field and i could say test setup
and it should work in case
a certain not now this engine of course
so this is important but in jdk 17 you
would get back right now and what do you
like to have is to have nice one so what
we could do assert that or let's do it
short this engine get class get a name
contains nice one and probably lower
case would be organized to lower case
contains nice one and make an import so
let's see whether it works so open so it
is green green means so far so good so
what we got we had we know that the
engine is set up what we also know is
that the engine the name of the engine
is at least nice one okay so let's do
something fancy so what we can do is
hello we can say hello to nice one so
test and the best of all there are no
external dependencies so you can just
use Java 8 so and you don't have to add
any any any additional libraries so this
engine we can say avail and say here
print head on and of course we have
throw some exceptions so run it and by
the way this exception is pretty useful
so it contains line number column number
and script name so if so this is a
checked exception but this is really
worth to extract the data from the
exception but see whether we will find
something so our output hello seems to
work so now I just go to any questions
no questions
no questions just statements aah Coke
Thank You America for a coke so it
worked so see everything is virtual even
a coke so um this engine avail print
hello so it depended something out and
of course what it could do you could say
this engine eval I think I never try
that but I'm 0 this is a little bit it's
242 just for the beginning and of course
readfile you will see an object with the
value 42 how to put 42 so um so what it
means the engine can also give something
back and it is going to be converted to
a Java object and the type is get class
also look at this properly integer so
integer yes so now the question is you
know how to interact with the engine so
what it could do is say this engine got
put and let's say Duke 20 years so what
I could do right now say 42 plus Duke
and you see there is no does not know
string is just plain Duke then because
it's JavaScript just because JavaScript
should work so let's see red file is now
string so it was changed to this and the
red vowel is class first so a string but
let's see a devalue so just repeat us
so 2442 20 years so seems to direct so
what it means you can pass whatever
objects you like to javascript it can be
even a java object and why does useful
imagine the following what you did in
some java projects we passed on jpa
object graph to NASA one and we use the
scripts for object validation which is
actually very useful so I'm one we have
to duke with a new date and let's say 42
plus date and you will see probably
something like 42 and the current date
so look at this and then not a number
which is actually also JavaScript so
what it means the coercion didn't work
so it was impossible to add a date to 42
which is actually true but you see I can
pass those a Duke to string this should
work again ok this works so this is just
this was extreme basic stuff so now do
something more fancy stuff let's save
useful interfaces because interfaces are
not always useful sometimes they are
just for the sake of ivory towers but
this time should be used to let imagine
I would like to implement runnable in
nice one so how to do this it's possible
actually so I will just create a method
which returns runnable get runnable and
what we can do with the NASA one engine
was named the engine so we can say the
engine and we have to cast it to invoke
table which also comes with JDK 16 so
what actually only comes with Java 8 is
the JavaScript implementation and JDK 16
introduced the whole scripting API in
vocal and we should be able to cast it
because nice one is in vocal so now I
can say in vocal
dot get interface and what we like to
return is run able dot class so now the
question is you know so obviously nice
one is able to implement Java interfaces
the question is you know how the
implementation looks like and now comes
the crazy stuff so what what we can do
we can say engine eval function of the
name of run with the name of run there
is no parameters and now we can say
print running like hell so should work
of course some exceptions and now we can
fetch the runnable here and throw some
exceptions and say run run oh this is
stupid so we just might runnable
runnable dot run and hopefully out of
course before we do this some tests
assert not null runnable so run it so
and what you see running like hell the
interesting part is you know what is it
so let's look at this and save and rerun
so and you can see JD Kane aswan javed
up the java.lang relabel so it is it has
something to do with nice one and this
is extremely useful because what you
could do right now is for instance you
could just no store in a central
database scripts in this scripts could
be executed on the fly and it could be
oregano cleaning jobs or whatever and
and this of course has to be sanitized
and works for its as a unit test so
we'll just briefly look at add the
stream
is the validations America ask me is the
validation similar to play framework
Jason reads right since it's as
automatic serialization so what I meant
by the validation is we just implemented
algorithms in JavaScript which validated
the jpa entities what you can of course
do is you can include this tube in
validator so it doesn't matter where it
is executed so and now we have here more
text let's see what we got here okay oh
I see myself does it like a recursion
you know so no questions so we got this
and now i show you an a privation of
this or or variation of this example it
is with java 8 combination java 8 so
what I sometimes do I show lambdas or
let's say streams so let's I would need
a a object I call the tanker and the
hacker has a name and H and needs
constructor to be born and some get us
to be caught okay now what you could do
we could say list of hackers Oh hecker
so you have to write it like this new
arraylist
and now i can say hacker and chief
hekkus of course Duke and this 20 years
old of course and the other one is can
we have oh let's say I'm also hecka so i
am just 22 years old let's say this and
of course I t connect is to just family
of hackers and you are probably i would
say 18 years old so what we can do right
now we can say hackers so this is
nothing to do with hackers Oh stream so
i got a stream and i would like now to
filter all hackers with with with what
oh all hackers with d in it so f dot get
name contains d and unfortunately does
not I 280 connect so and then I have a
filtered now I can map to int the
contents and what I'd like to do is h h
dot get h and then can say average h so
now we have nice lambda expression of
all hackers average age of the hackers
of course is we get optional so it's a
in case there is no no hackers with the
name d i would like to give zero back
which is the average average date so
let's try this
is it safe streams so what's wrong with
this average average age no date but
should still averaged eight yeah 21 it
should be average age of course no date
so 21 which is quite true in the java
lens on average we are about 20 20 some
years so average a date no idea i wrote
date ok and now let's say we would run
against hazel cast in finnish pan and to
change the filters or mepis we would
have to know redeploy the server over
and over again so what you can do you
could just rewrite this and say this is
a predicate as you can see predicate so
you can say this is a predicate of type
hecka and say filter and this is
actually the implementation of this
predicate so this is the same code and
then say filter here so i just know
extracted this because what i would like
to do is I could not say ok I would like
to keep this flexible and say get filter
from nice one and here is my code so
what I would like to do is I just have
to remember this is our filter so and
and then end I will need this code again
so so of course what I would like to
return is predicate and this is function
I think the name is test the predicate
as a method test input is H and then and
then we could say something like return
h dot get name contains actually this
would also work and this time I t or I
it's good enough I think exception again
right exceptions that we have engine
predicate from Nestle nice one and this
has to throw exception as well so what
we are able to do we can write a note at
hog filters which is quite useful so run
it right run it streams test and what
you will find out of hopefully the
average age is now 18 because only the
developers from IT connect are
participating in the indica in the
survey and not Duke and also not me so I
think this is pretty useful and this
exactly what I do my block so I have
some queries and they are just pushed to
to hazel cast and by the way this is
also moving code you could store it in a
grid it's just a string you don't have
to distribute classes a thing I have a
question here or at least it looks like
can we do you think we can bring okay
one question is since you can define
some logic in gs do you think we can
bring react jest Java with nice one and
I think so because there is a reaction
native or something and I and the
implemented bridge to java or Java vex
so I think it would work so what you can
do is not soon as well you can include
Adele will show you this in a second you
can include or load external Java
libraries which are egg mark compatibles
actually in the Economic Opportunity so
what I do is I loaded mustache for
instance was no problem it worked but
what you don't have is the Dom so what
you will need is you have to create your
own virtual Dom structure or something
and of course what you could do you can
create your own Dom you know rapid for
instance wink or Java fix application
use jQuery to manipulate swing so it
would work okay thank you for the
question no questions
this is okay no question so far which is
nice I think we are done with the or
what I what I would also like to what
you can do there is compatible so you
can write a nice one script and cash it
so it's also possible for performance
reasons yeah so this is also possible so
this was the know the view nice one to
java and we only well we have just 20
minutes left so now do just plain-ass
one so i will start I a library project
and I will call this Java library and
this is IT corn egg clip Wow lip so we
have this and let's and this is one of
the reasons why I'm using netbeans daily
because this support comes with daily
and the regular netbeans stirs is not in
this i would say quality so what I got I
just a JavaScript project you know and
what I could do is I need just another
editor because my clipboard doesn't work
always so what I wanted to do is to
paste this and what this is this jjs is
the interpreter and if you have Java 8
is already installed in a machine and
this is actually extremely useful so
what you can do you can use nice one as
a system language so it will replace
your shell c shell script or batch file
so um just to show you that it works
print hello from command line and yeah
it's run it run file and hello from
command line so this is nice one and the
cool story is wait a second what I would
like to do terminal so I can go
22 the work work spaces and junk this is
my current workspace and we are in TS
lip I think now we are in I click on a
clip cit connect lip yes and in source
folder you will see main Jess so what I
would like to do is to say CH mod a plus
X main Jess so now I can say mange as
run n you see Dean asshole full version
18 31 is my current version and this
comes from the from the minus V flag so
what we can do you could you can you can
just you know output the Java version
and this is just the outputs of course I
can integrate with Java so this is now
the integration in the different
direction I can say not this is nice a
date new no let's do this way
java.util.date and this is the dangerous
part or the dangerous way what you could
also do no show in a second i could say
i would like to integrate it here and
say new date so and run it again so just
to show you here and see hello from
command line and the date from java
whites dangerous because if nass one
wouldn't be able to find the class it
will assume it's a package so d the
little bit less dangerous way is to use
java type and this as a string so it
will then create a class which i will
show you print date date so you see java
class java.util.date hello from is the
same output and this is actually nice
you can construct your own strings with
placeholders so this is nice so we'll
just look briefly are the questions and
i don't think any questions
no question no question no question no
question in IRC so lazy IRC and twitter
is really nice because I even got a coke
so now still boring because it is not
you know too much stuff for automation
but what you could do is for instance I
could say I would like to see my file
system so let's do this or not file
system let's execute top and then I
could print and say I would like to see
the output out i would put sorry right
it's safe ah what's wrong oh it just
doesn't doesn't exit this was a bad idea
let's can see this is this was this was
the the LS minus L so this is what you
can do with for the automation and of
course even more interesting and just
thinking about whether I have somewhere
a let's do this so I t connect this is
the page and what we could do we could
say I would like to have curl this page
and now I saw your page and this little
bit boring because it's just HTML if
this were Jason I could just you know
include here I would just show you this
Jason attempt
I could try to do this and say Jason I
think it was let's try this one parce
yes this was the right one and I try to
parse it it won't work of course because
not Jason but you should get the idea
and then we'll just try to to output
this what I do for instance i
implemented with nice one and you see
here invalid Jason expected is literal
but found something so from doc types is
not adjacent but the great story is what
we get back here from from from NASA one
is Jason native JSON object in
JavaScript and you can just without any
further parsing you can just iterate
over the structure and extract the
things i do it a lot with two to monitor
my docker containers so I use very
similar script or a very simple script
very similar idea so this is this is the
automation so now the problem as you saw
what i do is what i would like to do is
I would like to you know use the script
test it and then then and then install
it in my in my path and for this purpose
i use gulp so i would just read this and
i use it a lot so this is why i created
a template and what it actually does is
it watches it watches my source j/s and
on each change it copies the script to
use as a beam work scripts which just
happens to be in the path so i will try
to launch it so now it started gulp from
netbeans and now i can go to my junk
folder and just say or not even to any
folder i like and same end ojs and it
works so which is really nice I think
it's different managers let's see it's
different one so but for my change
safe and you see unsafe it copied now
try it yeah now it's our script so this
is how I work with with with system
scripting so I just say Finn
automatically installs the script on my
machine and then it is becomes
immediately available and what also
great so I can even set up a break point
here and say go here and say debug and I
can step over the code and debug the
code which is actually even nicer and
this is the actual reason why I'm using
us on because I wrote some complex bash
script and there was really no way to
find out what's going on there so arm so
I you see I can get here I see this is
the Java class statics so I can you know
browse through the code so see what's
going on so and there is even one useful
project in my repository I'll show you
this github and this called SPG SPG SPG
and what did this aesthetic page
generator so they are written with NASA
on from command lines or the main idea
is that I have an input which is
adjacent a template which is HTM and it
creates it merges both to adjust these
index looks like this or are
placeholders and uses mustache for this
and Jason it just defines the price
defines the placeholders and the output
is just HTML with deal with the output
and so the nice story is I use it a lot
for instance if the date of the workshop
changes so you see here a virtual SPG
static page generator and there is a
script called again SH and it just
execute spgs with input and the output
and opens the folder so um if I will
start it it will just generate all the
pages and open it so if you go to the
bootstrap you will see bootstrap
with the new date july so this is what i
use it because prior to this i had to
know to do to find all occurrences of
the date and this is here in the
overview and in the form and with SPG it
works a lot nicer and what also on such
a static page generation is useful for
if you have to generate invoices or or
some you know overview contracts
whatever so you can just hire hire
designers to do this and some project we
even generated application server
configuration so it also worked well so
we just looked at the questions again so
what's wrong with you no questions lazy
audience no besides dynamic scripting
and using native jess lips like
handlebars what other scenarios you
would use nice one for Jenkins
automation a doctor monitoring for the
users right now validation then project
n hydrator is like et al so go to the to
my github repository the name of the
project is an hydrator and this is like
integration projects you can define
flexible know there's table input table
output and you can define the mapping is
just Java 8 without any dependencies and
and nice one so go here project is
called an iterator it is not well
documented yet but i would do it soon so
it is an hydrator and hydrator yes here
is it it's like transformers or looked
at it I would say it's about there's
code coverage about 82 812 ninety
percent or whatever was lots of tests so
look at this and what is able to do for
instance it converts Jason to CSV or
whatever and it it uses java 8 functions
which are implemented with javascript in
so the whole pipeline is very flexible
okay i hope you are satisfied with the
answer so no questions no questions left
so what you can of course also do here
you have you can access
environment entries and and let's do it
run so just an object is a good sign so
what it could do we can say for e in end
print and II would be the key and n of e
the value just JavaScript loop and what
they should do here as you can see I
just output all the system environment
entries so what is useful for the
finding out the working directory or you
know to check the environment so we can
do some of my clients using NASA want to
implement install script portable in
schools in install scripts for a java
application service for products okay so
we are actually pretty far so we have
gulp and what I would also do I would
like to show you with web store so I
switch between NetBeans webstorm in
IntelliJ just for fun and so there
should be I think the SPG coder yes and
it is a mix of of Java so as you can see
so it just the process the arguments
first and the arguments are available
with arguments the length and you can
access the argument so there's no
surprise here what's surprising what I
do here I'm loading mustache and the
mustache is just the JavaScript library
directly from downloaded from the from
the internet so this is just standard
JavaScript templating library so nothing
nothing nothing special with it and as
you can see I can just adjust added some
Java classes and in one point of time
here I invoke masters Rhonda at what I'm
doing and I'm passing the content and
the parameters and what I get back is
the output and the output is is written
to the entity to defile and this is what
the SPG generator is doing just worth 80
lines of code which is extremely
convenient for me okay so I think we
have just a few minutes left and I will
show you the last mirko is very
skeptical to mix both but sometimes i
would say what i show you right now i'm
using this actually in the enterprise
project and and the problem with Java
Java is type safe and sometimes you have
to know to have dynamic behavior for
instance formula evaluation and what we
did we miss used back then how it's
called rhino and right now nice one for
evaluation of flexible stuff and this
was way this was way stable or way more
how it's called sane then implemented
your own language using parser
generators or whatever so this is entler
for instance so I was once hired to know
help with end land and I ended entity
are introducing nice one also to give
you an example one of Java is seven
startups called typical a few weeks back
he asked me to help with implementation
of an algorithm and the problem he had
is there are campgrounds around the
world and each campground would like to
have different algorithm to compute the
price depending on the on the how it's
called occupation of the camping ground
and he implemented the algorithm using
using Java we know switch switch case
with NASA on each campground owner could
just implement own algorithm in a
database and was extremely flexible so
it could be also used now for
integration for flexible flexible
algorithms yeah just just works and for
the stability what we always do we use
the NASA own script we load it in a unit
test as a Java interface and then if the
unit test passes we've write it down to
the to the database so it shouldn't be
you know you should never execute
nastran script as user input of course
so in the last and the last thing I
would like to show you so what nice one
is able to do it accepts classpath here
so what it could do is the last thing I
would just create a maven project with
java application and name of the maven
project would be IT connect jar and
jelly Kay 18 and let's say we would like
to use jax-rs to client in last one so
just a heck what Jax are a step so what
you will need is to know the the jax-rs
20 implementation which is Jersey here
and the Jason mapping and there's Jason
processing and the mapping between both
so now it is but the problem is if I
built this you won't get you know you
will have to include a whole array of of
dependencies to nass one so what I do
instead is I do the following so I i
introduced the built tank with a nice
final name and i will call it a java lip
and then there is a plug-in called shade
and the shade here I just excluded j
unit so and if I execute this what it
will do it will pull all the
dependencies and create one single jar
which can be easily in included to NASA
one so if i go here you will see here
java lip and it contains all the classes
so just to show you that it actually
works so i will go to the terminal here
and so what is CD I t connect to our
target LS and print working directory so
we just fetch this and now I can go to
knotts one and say minus CP hmm oh I
have to use the always forget this copy
so this is this and the name of the jar
was I think java-jar Tochar wasn't this
Java lip java jar will be completely
strange so Java lip to chart so and now
try something so i will just go here and
say i would like to have java type and
the type is what you have a x wrs client
client build on so it should be java x
WS RS client client builder VAR client
builder
and then say print client builder run it
run it again and hopefully it will work
if not we don't have the time to fix it
this is the nice story talking at
conference so and we get class class not
found exception Jack what was the
problem I think I Chuck's Java ixta
Bria's RS client client builder it
actually looks rice and what does the I
think we just pulled it again but it
actually should work and
I think interact right otherwise you
wouldn't get lots of stuff going on so
you should shorten the IT connect page
now we have T f's and should start with
java class you as you can see it was
loaded so we have the client builder and
now we can say client build a new client
and initiate arrest communication not
with curl but using just plain java so i
hope it was useful so i will just go to
the questions because the time is over
so i only had forty-five minutes so this
is what i could show you in this time
and thank you for watching and see you
at upcoming conferences xix meaning in
july if you like so there were already
some some some people even the phone
from very great i think and yeah if not
i will probably attend javaone so meet
you there or whatever projects get up
you know the social network for
developers so see you and bye
thank you
you
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>