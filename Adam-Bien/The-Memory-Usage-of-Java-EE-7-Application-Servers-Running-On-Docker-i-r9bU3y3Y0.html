<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>The Memory Usage of Java EE 7 Application Servers Running On Docker | Coder Coacher - Coaching Coders</title><meta content="The Memory Usage of Java EE 7 Application Servers Running On Docker - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Adam-Bien/">Adam Bien</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>The Memory Usage of Java EE 7 Application Servers Running On Docker</b></h2><h5 class="post__date">2016-04-03</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/i-r9bU3y3Y0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so how much memory an average java
application server consumes it is an
interesting question to know if you
would like to use the application
servers in microservices context and
what I would like to do is to launch the
most popular application servers within
a docker and measure the memory usage of
the application server with the JVM and
even the whole docker image so even the
operating system and I will use the
project top lens is a set of occupy
simplistic dhaka files which allows you
to to run common application servers
within docker images the project
docklands and also what I will do I will
use the pink application as a simplistic
9 colaba kilobyte war which checks the
health of the application servers like
like a pinging the DD image so then
let's start and I would actually start
with hello world Java 8 nastran
application to set the as a reference to
see the overhead of a simplistic java
application and in comparison to java
application server so we just run it
with docker - d-4d th - P 42 42 is the
stock port and the image I would like to
use proper name and I know none o micro
and the name of the image is nano micro
and I need one docker PS perfect is
running it was started two seconds ago
so let's see whether it actually works
I would like to launch it micro a
yesterday so seems to work this is the
image so now let's see I will use the
darker stats command
and it uses 63 megabyte of RAM so we
just check it again so we just use this
and again sit around our 60 65 megabyte
of RAM so okay this is just the
reference now let's go ahead and launch
to work sorry but the profile Java 7
edition so I would use the pink here
again and would like to use the run
script which basically just starts the
the websphere on port 90 80 this is
actually what happens behind the scenes
dark ApS so our website is one inc so I
would like to test it 9 Surrey in 98 he
was it I think so this is the Liberty
profile and pink was the stay
application so let's ping it so it
answers and we can also get you know to
memory stats so now check the overhead
dhaka starts wlp pink and it consumes
160 megabyte of RAM so I would say it is
twice as much or even three times as
much so the over it is around 100
megabyte of RAM so the difference
between websphere liberty profile and
the end the nano micro is around so we
can just repeat the other this one and
this is 70 so it really depends what the
memory pressure on the garbage collector
is so how how often the garbage
collector runs so it will also influence
the memory utilization or memory use
okay now go ahead and to whitefly and
let's start the Wi-Fi pink app docker PS
whitefly it runs on eight to h2 port so
I would like go here and
a ch2 h2 pink so it's running so we can
check the put time so it's running and
dog come check these statistics why it's
fly pink and it it's a lot it it use it
it uses around five six hundred megabyte
of RAM so 550 megabyte more than
helloworld.java but let's go ahead and
see what happens within the container
white light pink and we see the
deployment and the whole start and
what's interesting here is the white
fella was started with out-of-the-box
settings - x ms - - geek and - XM x - 2
week what basically means you know
acquire all the memory so what is
surprising that it's still only consume
sinks are a megabyte of RAM so with it
without the settings the over hood
overhead would be very similar to what
sphere so um if you really are
interesting interested in in a small
memory footprint checked the - x + weeks
and - x ms settings of the JVM
okay so what's running now go ahead and
try Tommy and dr. run - t- p now let's
use different port 8080
it was Alex told me pink docker PS and
what I forgot to give her Tommy a nice
name and therefore we got a random name
happy bark which which is nice so doc
has starts happy bark and it uses 260
megabyte of RAM and let's see
whether Tommy is running actually 84-84
and we see here the Tommy so this is the
Tommy page so it looks good so okay we
got the Tommy so we have already several
application service running so go is the
next one and try payara payara pink and
run it so where is it paella is running
port is talk 8080 so go into 8080
so looks like paella and we have here
the the output so it looks good and
Dhaka starts payara pink so 750 megabyte
of RAM so it's the worst possible case
right now
so why it's so high and the reason for
this this one's on as a sample I used
during the Java EE microservices
workshop and it is configured and this
is the configuration so it uses also
these two geek settings here and it
seems like it uses it more aggressively
than whitefly so it is minus XM s and
minus XM x of two geek both okay now we
saw payara
now let's go to the very last one and
this is the WebLogic a recent one and i
would like to run it as well docker PS
and this is the Gabriella's the WebLogic
name of the containers SS pink so talk
hand starts WL s pink
and it actually consumes 500 megabyte of
RAM again because it's probably caused
by the JVM settings let's now double
check that now doctor log in docker
locks wls pink and at start they should
be somewhere the the - XML settings it's
hard to spot when a server - xmx it is a
512 and MS
it's 512 so the WebLogic used the 512 -
x MX + - x ms settings so and therefore
it is around 512 megs so um so what what
we learned actually is that the overhead
between a plane in java image which was
the the hello world one-liner nice one
and and the application service is in
verse case around 500 megabyte of RAM
and D so we have here you see 60 mega
byte was helloworld.java and 500
megabyte was a full-fledged Java 7
capable application server but the nano
macro micro was deployed without any -
exam X settings and all other
applications ever came with the vendor
defaults so this is the actual overhead
and what's interesting to know if you
will start the application server
multiple times because of Daka
optimization it is not like you will
replicate the overhead over and over
again so thank you for watching enjoy
Java EE and micro services and see you
in one of upcoming conferences projects
hexade me you need a port or even the
online version a hex io where I recorded
already bootstrap effective testing and
the Java EE micro services workshops</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>