<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>GlassFish Management and Monitoring | Coder Coacher - Coaching Coders</title><meta content="GlassFish Management and Monitoring - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Adam-Bien/">Adam Bien</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>GlassFish Management and Monitoring</b></h2><h5 class="post__date">2014-03-06</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/s5RsjbgZrkA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so okay let's go welcome to the first
virtual class fish user group event in
London actually and we are doing this
together with c2 b2 consulting and me as
a credenza basically and the Twitter
account is C to be consulting and at
Adam bean and if you have any questions
or remarks just use the hashtag London
gu G stands for GlassFish user group so
um yeah hi welcome from undisclosed
location near Munich I would say and
today I would like to discuss with you a
little bit how to work with GlassFish
how to or what I do with GlassFish and
how to use it in context of of Java Java
EE 7 so I will use your Twitter life and
words with the hashtag London GOG I will
if you have any questions feel free to
ask and I will answer them online so I'm
the first question is why GlassFish well
GlassFish is the reference
implementation and for java is 6 and now
Java 7 so I will cover GlassFish v4
right now and reference implementation
means yeah it was implemented by the
community with Oracle and why I like
reference implementations because I
guess if you find some some bugs in the
spec they are going to be fixed faster
because it is reference implementation
by the way GlassFish is not just built
by Oracle for instance the integral part
of CDI is is to weld coming from red hat
or or or JBoss and yes what I supposed
to do is to cover I would say roughly in
45 minutes
GlassFish and then I will open for
questions for the remaining 15 minutes
and if there would be no question
so I gathered some questions before and
will answer them okay so um let's go
let's go with with GlassFish so this is
the UM Twitter location and I would
actually use some slides to introduce
you to introduce me and yeah my standard
introduction is I never worked actually
because I like Java so I'm I'm I'm
consulting working with Java since 1997
I started with Java in 1995 and since
then I'm just a freelancer one-man show
I'm working mostly with Java and Java SE
actually I try to do some some other
project was different with other
languages but usually clients won't take
the Java from me and I'm really happy
about this and some usual stuff at the
beginning I would like to cover some
resources because I always forget them
so um now is the chance to get it so I
will I would actually introduce a light
fish there's a small application I built
and also there is an application called
x-ray I would just briefly cover x-ray
because it is just loosely related to
today's topic but I some automation
techniques for developing of x-rays I
will show you this and there is a nice
or nice one class project called loader
and a load allows you to deploy on
deploy and list applications with which
java pink is a is a simplistic
application this is actually just a war
where you can just drop to any java 6 or
java 7 project and you can just pink the
server whether it actually runs runs or
not I use it because I use some several
GlassFish running in the background and
on my server this is nice to have a
certain location certain entry point
to the server and I've wrote recently an
article for Oracle TechNet work so if
you search for atom beam GlassFish
monitoring and the article is from
December 2013 and it actually covers
similar stuff what I what I'm talking
today about and of course I was asked by
c2b to deliver talk about GlassFish at
the London GlassFish user group and I
was asked or I thought what is actually
C - B - C - B - and I actually don't
like commercial event so my first
question is what you are doing and how
you are related with Java user group or
what's the deal with with C - B - and as
you probably know Oracle dropped
commercial support for GlassFish and I
asked Gabe ask a lot of questions from
my customers about commercial supporting
GlassFish and C - B - and another
company from Belgium collage on both
provide a commercial support for
GlassFish so which is actually really
nice because if you have a some serious
projects you can just get commercial
support which is not unreasonable for
technical but samplers even for
political reasons
yeah and there is some the page is C - B
C - B - C Oh UK and the twitter handle
is C - B - consulting so we are no time
actually to discuss the resources here
with C - B - so I hope it is ok so um I
brought some books loosely related so
actually this book covers a little bit
automation in GlassFish and this book
just covers general Java EE patterns
there's nothing to do with today topic
so skipping this and a little bit
interesting so umm I think no I think
end of March there will be the next
edition of a hex and mook airport is
actually the location you are so behind
behind me so it is located actually you
here so two hundred meters from here and
and yeah why you do this because
I try to minimize time for travel and
why it costs a lot of time and I would
like rather spend my time in hiking Java
not in airplanes and trains and it's
just impossible to handle the request
for Java EE and and GlassFish consulting
so yeah let's start with why GlassFish
so on why GlassFish um even a few month
ago I will say GlassFish is great
because it has it is unique it has it is
the the reference implementation and you
can buy out-of-the-box commercial
support from directly from Oracle and
this deeds are actually almost the same
bits so you can you can download the
open-source version or you can just buy
support from Oracle now I have to say
there is no more conversion support so
it became a little bit less attractive
but still I'm using GlassFish in
majority of my java 6 and Java e7
projects not like I move away to 2
whitefly or Tommy I still I still use
GlassFish a lot and yeah and because we
have Java 6 in Java 7 it is actually the
application server does not matter a lot
this is actually d a good sign so
installation so um why this is why is
this important because actually I start
every project with installation of
GlassFish and of course so I what I
don't do is not like I'm running one
GlassFish and millions of projects what
I prefer is one JVM one GlassFish and
sometimes a shared GlassFish but one
dedicated domain so there's as in my
project I prefer the one domain per
project style and why I'm doing this
because the overhead actually doesn't
matter usually around us cause nothing
and CPU is extremely cheap so you know
saving money on on because you can save
30 max of memory running on cert server
just increases the risks and and you
won't gain anything so um so our
installations or what I'm doing of
course
I do what I do right now I go to
GlassFish dark or java.net and try to
find the right addition and what I
always do I use the zip installer and
always the full Java platform the Java a
web profile is a little bit smaller so
let's see yeah 40 Meg's
so you can save 40 Meg's out roughly for
4 images from from from you from your
DSLR so it isn't worth so I also
measured some performance overhead and
there is almost nothing so I I just
always use the full Java platform also
in my development projects I'm just
using the divorce and not the the ears
but still the full Java EE platform is
it's much is what I prefer and by the
way I do the same with Tomi and not not
using just the the web profile rather
than its atomic plus it's the same true
for for JBoss so it's actually almost no
runtime overhead between the full java
ee platform and java web profile and you
know the download size should not matter
so on any question so far no questions
not even from Mycroft so what's what's
going on here with Twitter assumed
Twitter is down watching life watching
life so everyone is watching life and
there are no questions Mike are you
alive were your introduction to see to
be consulting ok no news and good news I
suppose
ok so let's proceed so now I'm launching
the best GlassFish ID you can
concurrently get so of course NetBeans
and it comes with GlassFish and this is
actually what I will use
today I will use stock or stock is the
euro is candidate one from from from
NetBeans and and it comes with with
GlassFish for Oh what I have because of
some common
all the projects I have installed
afterwards the glasses-free one and I
also working with Tommy right now and
whitefly and this is a dedicated domain
which I've forgot to stop we'll do it
right now
better is it I completely forgot this so
um so you see life is life and what I
prepared us I just I will have to delete
this Susan I opened some projects like
my light fish loader and actually just
both and I will I will tell you later
why the projects are actually
interesting so to demonstrate why Java
or why GlassFish I would like to hack a
very small project actually just
containing a Java server face page and
one one class which is injected and and
one model classes of very very basic
stuff so I would like to start with the
web application I will call it of course
glasses user group hello
and I will use the glass roof for O GOG
hello is OK and will like to just create
us so as you as you see the JSF page and
ojf HTML page was created and I would
just like to create a GSF page so where
is it
no Jess F page then I will create this
one Jess F page the name is index and
for each JSF page I would like to create
a baking bin as well so I will call the
class index and word I suppose Co UK or
UK Co now the question UK Co
classes use the group dot heck hex
better finish so and this is going to be
request scoped so um just shorten this
model and very simple method string get
message to get messages just my my
standard standard output and get the
message return message okay I have it so
let's see whether it actually works and
GlassFish starts if now I would have to
kill the whole ID because I started and
you see another GlassFish but life is
life and killing Jess Java has to be is
usually very fast so but as you can see
this is the demo effect it actually
works so um we have the index which is
model get message and what we of course
need because we are in the enterprise
space so we need a and EJB so of course
there is this an enterprise class we use
a group I don't know facade doesn't
matter and it is an EJB so it returns
you will see them in a second why I'm
doing this so it is really class fish or
Java related get hello from bean from
mr. bean oh it's an English podcast and
my name is bean so we can use mr. bean
return hello from mr. bean + new date to
see some action so and of course we can
just inject the bean here add Enterprise
our what I'm doing here and prize facade
facade at inject so um we have done get
halo from bean let's see what that works
nothing happens because I forgot to
actually reference to be
let's do that okay so it seems to work
now
why I did it let's see what there are
some questions oh I got the first
question which is which is perfect
so um Mycroft is alive which is a good
thing I saw in a Twitter profile I think
he's doing some snowboarding something
like this so pretty dangerous stuff so
glad you are alive and I got a great
question for an element from Twitter how
do I connect a single application
deployed on glass which to serve our
clients with different data bases so are
different data bases
I would say there are different data
sources or different persistence unit or
so entity managers and to serve our
clients so um what I usually do in my
projects are not using the remote client
what i'm using i'm using restful web
services so the jax-rs api and usually
this is not a huge problem so actually
the tip the answer is very simple
so uh multiple databases use just
different data sources or I never use
actually data sources JPA entitymanager
and with CDI you can produce different
entity managers dependent on the client
at runtime and yeah as a I hope you are
you you're satisfied with the answer if
not please refine the question okay
perfect so we answer the first first
question um yeah seems to work now how
is this graston should related so um
what you can do with GlassFish you can
access GlassFish strangely with some
strange you are URL here monitoring
domain server so what I did before I
activated all monitoring levels and
GlassFish to an higher level and yeah
and and this is why I see something in
your case you should be able you should
go to the admin console and do it is
from the admin console or from command
line I will also show you how it
actually works and what you can see here
there isn't a very plain basic
strange-looking HTML page and and what
you see here is the following there is
there is another hello application the
enterprise message bars and just yeah
the enterprise message bars and some the
camera went off and and there's another
hello application and our application is
the GlassFish user group hello
enterprise q g ug facade and as you can
see it is create count method ready
count remove count that happens to be an
EJB and there are some bin method get
get hello from mr. bean was invoked
where is it method statistic total total
number of errors there's no errors total
number of success ten times was invoked
use a lot actually and the nice then i
think is you can get the information as
jason so on or you can see here this is
an JSON document or xml come on exam as
a little behavior but this takes too
long but usually here it would no idea
why it takes to so long so Jason this is
Jason and I will refer to this because
this is actually nice that we'd get
Jason back so what it what we can do we
can access applications specific data
using this which is which is which is
perfect for for monitoring for my
projects we actually do it all the time
just the monitor application during
stress testing and what you can also do
we just back and to the server for
instance transaction service so what I
did today
just for fun I wrote a short article how
to monitor the number of a short post
how post how to monitor the number of
rollbacks or commits so um what you can
do here as you can see there is an
active count of transactions committed
count so we have 10 commits which
perfectly matches with the number of of
invocations there is no roll bags and
the state is fine so what we can do of
course we can say why not aerobic or
even let's be more drastic and just
throw new a JB exception just for fun so
and I will like to invoke the page again
so it what was it 80 80 it was hello
just for fun so it's a nice error and
the rest interface if we just
you see roll back counter is one roll
back so you can very nicely monitor
what's going on life on the application
server so two counts so everything
crystal-clear alamin is satisfied and do
we have any questions
Oh John Klingon from Oracle there's a
thing is product measure from from from
from GlassFish he asked us to take a
survey about Java 8 so you should do
this um yeah so what what we did we re
accessed via our web page
the GlassFish and by the way it is a
little bit boring doing this from from
the webpage what you can do you can
access the same from command line so you
see here rollback Jason
so we get the Jason and just let me go
here so this is a JSON output and of
course it's XML so you can do the same
from command line which is actually
really really nice so what we covered a
little bit is this Jason monitoring what
you can easily do as well you can you
can use class visual management restful
services for management so um the
question is why I actually used EJB here
and the answer is pretty simple
eg bees are monitored poachers are not
so if I would just skip the stateless I
use request code beans or state sessions
code beans I wouldn't seen out seen
nothing so grass which wouldn't be able
to monitor anything because it is not a
part of the j2ee management and
monitoring spec so you can only so you
can only monitor zorg or an application
service only forced to monitor Java EE
components and CDI is not included so
because these specification this is the
management and monitoring specification
predates CDI ok this is why I create the
EJB and the nd management so what you
also can do of course there is a command
line client for GlassFish so I will go
to class fish home and there is in a as
admin so it you can access the GlassFish
configuration management and monitoring
through a s ed min which basically is
a restful client which which uses the
same the same interface as as the SD SD
webpage and of course there is an S
admin or SS admin there is an
administration interface for as a web
page so just I would like to show you
how it looks like so you can and you can
you get actually two views one is the
HTML view which is the admin console the
other view is a restful interface and
you can access the restful interface
directly or using the s admin commands
okay so um any questions Oh
so element is happy with the answer so
um it was actually very very simple
question so thank you for this
it's always nice to get such questions
during during sessions um yeah and what
I did before to show you there is the D
monitor and as you can see the only
thing I did is I increased the
monitoring levels too high so everything
it is actually the slowest mode so
everything is now monitored so I'm
usually there everything is off so you
can use this the admin console or you
can use you can use the the as admin a
restful interface and by the way this is
what I would I did what I've described
in the article GlassFish monitoring and
management
and this article covers this is a free
upload article of OTN and it actually
exactly exactly explains how to how to
deal with their info with the levels for
instance to get the server monitoring
levels I could just go here and exit and
you can see you can you have exactly the
same information from here or you can
set the levels from the s admin console
or you can use exactly you can use the
curl or or restful web services okay
and to get anything you can just say get
monitor server you get all the stuff
this actually huge this actually always
fun to do so I'm not sure what they
should do this in production but see
there's actually all this stuff you can
get just start with it with with the
with the command monitor server and you
get all the settings which which are
actually can be interesting for you so
what you can also do you can deploy
applications using the T web console or
of course using Crowe so arm what what
happens here you can use just curl post
and upload and war to put a glassfish so
why is this interesting
so believe or not I was in a project and
the developers just used the the admin
console the whole time to deploy
applications and this is really
error-prone and I would say what you
should do in guess which project is to
automate everything from the beginning
so the first step is download GlassFish
install this and the question is how to
install GlassFish so of course you can
just use the console to create new
domain or use it but what I usually do
is this is where the x-ray project kicks
in set so what I did here is I would
like to show you what I usually do in
projects
create x-ray domain so what this is this
is my script as you can see it it
started with let's use three and use
with GlassFish for right now which
completely destroys GlassFish and
reinstalls that from scratch and if
something feels wrong I just do it over
and over again and on Jenkins exactly
the same happens so on my own my
continuous integration environment each
commit just drops the whole GlassFish
and reinstalls everything from scratch
it takes a few seconds but it is a more
consistent in and then hot deployment so
you can really rely on it and yeah what
you can see here there is a stop domain
deleting domain creator main so what
happens here the domain was the name
x-ray is stopped then it is deleted then
created with the port base 5300 what it
actually means this is really nice what
you can do we can automate this with the
part base I know right now that
GlassFish will create parts 5 3 4 8 for
the administration part 5 3 8 0 4 as
HTTP port and because of development no
password true then I just copy some JDBC
drivers I'm starting the domain setting
JVM options creating on the fly the
connection pool the JDBC resource and
the connection pool is created just with
mock passwords so I just changed that
XYZ it wise e and an the port number and
then this class fish is ready to go
so whatever happens I just able to fire
up the script I just just do it so what
can go wrong right create x-ray domain
so as you can see it creates all the
parts and creates a and n creates an
application server from scratch so this
is the installation procedure what I
always do first so actually oh man open
source project or my client projects
whatever I do with GlassFish or even J
Baz it's the same story actually it
always starts with automating the whole
process installation process
before that I just used one GlassFish
buy and I don't know multiple projects
use the same GlassFish instance it was a
real it was a mess actually and now
everything is is really nicely isolated
so any questions so let's see no
questions
indirectly and London ah what are junk
Lincoln mentioned is use case under
consideration for Java 8 this is Jess RN
multi-tenancy support if it's meant this
way then oh no this is actually question
with a what about using a single war
application depending GlassFish to
several clients with different realms
and databases this is a good thing
fights fires bash bash um actually what
I would go a step further what I'm what
I'm would really appreciate in in Java 8
is to having to have the capability to
have multiple context or ease in a
single war this is even more painful to
have one war with multiple entry points
so you can so you should be able to
specify the context or e within the war
right now it's just a default so I'm the
GlassFish or the application server
takes the name of the war and creates
the context or E and of course with year
you had the opportunity to do this even
if just Wars is impossible so there's
actually a great question somehow
GlassFish related so perfect thank you
for questions so now we installed an
application server so it is running so
this is what actually happens I just
wanted to try to be here to show whether
it actually works so and now we have an
empty glass vision which started just
for us and to proof whether it is
actually working so this is for 8 it's a
default and there should be another one
with 5 3 5 5 3 8 0 omen 5 3 8 0 yeah and
this is our freshly created GlassFish so
am let's see installation I think
covered if there are no questions I
would just move a little bit further
management so um as you probably saw
what you can you can do you can equally
well do something like this I could say
GlassFish home bin AAS admin I just use
the same commands almost yes I could use
the same commands from a script this is
what they actually saw in my in my batch
file so if there is anything to set to
configure I what I usually do I create a
not amazing project is just an mock
projects it's just a folder in in git or
subversion and this mock project just
contains the GlassFish configuration
files or the GlassFish script and this
project is checked out on CI continuous
integration environment and usually
Jenkins in my case performs the
configurations anything changes we only
have to commit the change to the
repository and everything else happens
automatically and if you would like to
influence your local GlassFish I have to
run I run the script locally then ok I
think the installation is covered no
questions and thank John for for
answering the questions is actually
really nice so I'm almost jobless so
management another thing what is not
which is nice is if you know the restful
api what you could do you could create a
java application or a java class which
uses the jax-rs client and it's able to
deploy applications to the application
server so now the question why you would
like to do this and the answers well you
could automate the process even further
you could use an Maidan plug-in or
Gradle plugin or inter
your IDE or usually you use it even from
from from Jenkins and we have to
automate the whole installation process
a kind of wizard and what we did we we
used we use the this class and this
actually open source project so this is
this loader what I mentioned so go
github there's a github and then pin
x-ray
this was the x-ray project and I think
loader is the other one yes and what
loaded loader is able to do you can
deploy it an archive in my case is the
coffee beans that wore I can check
whether the archive is deployed I can
list all the applications just see what
is actually deployed and yeah let's run
it let's see whether it actually works
so there is an test unit test see
whether it works so now it goes to the
current GlassFish and attempts to deploy
the application so it seems seems to
work so it there is an another hill
hello
it also found the glasses user group
hello and coffee beans and the workflow
would just deploy and deploy and list or
applications or just write this but as
you can see it is very easy to automate
common tasks on GlassFish so you could
even write a cloud-like API where you
can automatically deploy and deploy and
manage applications and domains so feel
free to use log loader it is Apache
License so you can do whatever you like
with it so
no questions okay
monitoring we saw a little bit of
monitoring and the question is why is
monitoring so interesting and I would
say for me it's monitoring actually
crucial so I am working as a consulting
and as a consultant and what I already
see in project is the following so there
is a huge focus on test coverage so unit
tests and integration tests and no one
cares actually are about robustness and
stress test which is crazy and it is
really easy and fun actually - right -
right
stress test but the question is if you
just have stressed us you you should be
able to see what the application server
does in behind the scenes and what
happens behind the scenes and the D for
long idea what it could do of course you
can you could write a rest client which
periodically fetches the information
from GlassFish and starts it somewhere
during the stress tests so you can
analyze the results after off after the
stress this actually because if you just
connect with Mission Control or or J
visual VM as a mission control without
the flight recorder or visual VM the
data gets lost
nothing gets persisted so it will see
the graphs the charts but not the actual
data and so what I did I wrote a very
simple application actually the first
first version I wrote it in train
between Frankfurt and Munich and I would
like to start the application for you so
it deploys the application and this is
the the light fish I mentioned earlier
and this is also on on github and it's
called light fish and this is one of the
more popular projects so this is now it
is deployed but what I wanted to show
you this is actually the release I'm
using right now is the light fish water
was deployed and
slide view app is in Java fix fondant
which is able to to our monitor the
application so um let's see in action so
um what I would like to do is to go to
the light fish project and there is the
light view and I can just start it from
the command line so if you clone the
project the same should happen on your
machine and as you can see there's this
Java fix front-end why Java vics because
I had no time and Java VIX is just Java
so I hacked it in the Train of course
this took a little bit more time but the
first but the very first prototype was
built I think and three and a half hours
so I had a hard deadline so um I just
started the monitoring and what you can
see here is that I have to activate the
monitoring first and then start it and
what it does it monitors the heap size
the thread count and the pick thread
count and there are the snapshots every
10 seconds so I can monitor it
transactions again what what happens
behind the scenes this light view just
uses this jax-rs client fetches the
GlassFish data and the data GlassFish
monitoring data and displays this so
there is a number of commits and
rollbacks so we have the two roll backs
because of the two exceptions so what we
also have paranormal activity so um this
is actually the most important view
during stress test so what happens here
we have the acute connection so what it
actually means it actually indicates
whether the GlassFish is overloaded or
not this is actually the the chart here
with a we see three arrows we can
actually increase the number of arrows
easily so if you go to localhost 8080
and
what was it doesn't doesn't work anymore
but as you can see there is an error so
we with this simple case you see we can
just see live weather there are and some
errors or not andcue connections means
the GlassFish has nothing to do
performance commits per seconds and
rollbacks per seconds so you shouldn't
be proud of rod breaks per seconds but
commits per second is actually
interesting during during a load test or
stress test and different topic but i
make a difference between stress tests
and load tests
so what stressed is just is a test
designed by developers and developers
word developers try to break the
application server and load tests are
designed by usually no design specified
by the business department and the
business department attempts to be more
realistic
so our stresses are not realistic but
they try to break the server and load
tests are realistic but far not that
appropriate for robustness testing
because load tests are full of think
times and you just decrease the
probability they will actually find the
error so web you should see the number
of sessions and the expert session so it
seems like a bug so we have - one
session which is quite interesting so
our application is extremely stateless
with - one session resource double pool
so you so we have eight connections not
seven half eight and there is a time I
pulled as the internal GlassFish pool
but even more interesting for unknown
reason why I know why what happened our
integration tests for loader undeployed
our London GlassFish user group
application so it actually worked this
is white screen deploy checklist and
deploy and everything which was deployed
was undeployed so it worked as designed
so let's read apply the application
let's see whether it will actually up
here as you can see now we have two
glasses use a group hello again and
there is the enterprise GOG facet as you
can see there is no index because index
comes it's a just a POJO
ICD i-beam so it's not visible for
GlassFish if you click on this we see a
number of created beans one is created
once is destroyed no one is waiting and
there is no threads we're waiting and
this is just general performance
characteristic hell of hello from mr.
bean
there is one success one invocation
count and one invoke was invoked once
max time is zero milliseconds until time
is also zero so it's actually pretty
fast so it's see whether it actually
works and now it's a different
invocation count success 40 max time 1
total times a 1 millisecond so we are
able to and let's see
still nothing cute so this is basically
light fish and yeah and what I did
before I just activated the monitoring
with this activate monitoring tab and
what happens behind the scenes it sends
a rest request to GlassFish and
activates the monitoring on the
server-side I use the tool all the time
for stress testing and it runs actually
on my server in production so the
overhead is relatively low so let's see
whether we get some questions no
questions no questions John is also
happy
so then I will kill would like to kill
the application and automation so now
what we can now do so what what we did
right now is the following right so we
were able to access the restful api from
GlassFish domain server and let's say
transaction service and we have or go
just go to D applications why not do
this and you would like to monitor
something in GlassFish user group
enterprise facet and beam methods and
hello get hello from mr. Bean's of this
so what I did is previously before Java
8 availability of Java 8 I use I used
how it's called not Nass horn but the
thing before forgot the netscape project
and so it was the embedded javascript
engine coming with jdk 1/6 and it was it
is also kind of nasa alpha but actually
named it was the JavaScript engine dddd
very old one which was created by by by
Netscape and right now you can do
something crazy so I would like to
create an HTML HD out automation and
html5 project no frameworks but what I
would like to have is plain JavaScript
file automation automate Jess some Oh
out of a J's is actually a nice name for
JavaScript project so because I use it a
lot I created on NetBeans template why I
create html5 project because of syntax
highlighting and github sorry get excess
and stuff like this so on what you can
do there easily so I can just say I
would like to have the command here and
the nice thing of of nice honest you
could you could create more maintainable
things and say they should be the server
and the VAR server is localhost or could
be even passed as from from the outside
local host so local host
so so far so good don't know the
question what we can do with it now the
crazy thing is what you can do with with
with NASA on I can exit this command
exec and say curl Dora command the
output resides in out far grease out so
let's try this so there is the script
automate GS I install JDK 1:8 so it
should work and usually if you if you
installed it the daily builds you will
have to set a link there it's actually
described to the ggs interpreter but I
also have to change the mod 2 outer to
executable autumn HS so no news I
grunting good somehow good news curl
command nothing server log lost so let's
try that
still not
just print the command so the server is
not expanded because I forgot this one
let's see looks nicer so what we have
here is just the raw string so nothing
exciting yet but what we can also do we
can say this is the string so we can say
parse no json dot parse and use the
result here what I get back is T is T
let's say one object so let's see
whether it works print one object you
see it works so this is object so um now
we can access so let's see whether we'd
be able to do this so there is a message
command and entity so extra properties
is I think the key so what we have to do
is to use command let's try this touch
command or extra property Striders extra
probe T's play with it still works so
extra properties is defined otherwise we
would get an error entity dot entity
just go one further so there we have the
X entity and I think count
count undefined when you see where I'm
going with this
so extra properties entity I think
execution time count so let's say entity
dot execution time execution time count
entity execution time count
there is something arrow between but you
see where I'm going with it
let's see what's actually the difference
to the transaction count from today
entity rollback count so it looks
execution time let's see the o versus
lower T
count and I would expect a number right
now execution count is one execution
count is 1 so um what you probably can
see what we are going with it does Jason
parse is interesting by the way this
script is executed Java is actually a
java application running so what do you
what do you do easily can do you can use
the restful api from GlassFish to our
automated processes and why to use
JavaScript in favor of Java because it
is very easy to access the d-d-do to
parse the json objects from from from
GlassFish in in java is a little bit
more error-prone so right now with the
json api is fine but it is not as easy
as here so you can very easily write
monitoring scripts for instance I use
stuff like this for testing on
continuous integration server like like
Jenkins and and this actually the reason
why I don't know des admin commands very
well because from the one and automate
at whatever I can and then never look at
them so just they are executed in the
background ok so what is actually the
future so what we cover dist
so we have at the management monitoring
so you can manage GlassFish what also
works you could of course change the EM
XML files so you can directly manipulate
the XML files from GlassFish and but
this is actually not recommended and it
is hard to maintain so it is way better
to use the e as admin or restful all the
restful api to do this ok in the future
I would say the future is even more
exciting than then then then then
GlassFish right now what I'm doing right
now on my server I'm using a tool called
called docker and what happens behind
the scenes is the docket downloads
GlassFish it creates downloads JVM and
creates the whole image creates the
operating system as a Linux container
was the operating system and lunch st
operates a whole
operating system in a view seconds and I
even automate you know the the full
provisioning and this is why I actually
use not so nor for the automation
because docker also comes with Jason and
and the RESTful API and GlassFish
similarly whitefly is also similar both
are great for for automation using
restful api and why Jason not XML and
the only reason why I prefer Jason over
XML is the the accessibility is really
easy to work with Jason and you can
access them from Python and Ruby and
very easy and all the operations can
just access more easily than with then
with XML and the question why not why
not
Jay a mix java management extensions are
fine actually I could write you and
singleton beam which with gem --ax in a
few minutes the only problem with gem
Ickx gem X is a little bit harder to
access because with gem --ax you will
have to to use specific tools to access
the two to get to get information and
with over ask you can just access the
the API directly and so I think I
covered a lot of ground it is we are a
little bit over time which is not a big
problem because yeah we are in virtual
London so it shouldn't be a big deal
so I am really open to freestyle
questions oh ah
what would junk Lincoln's head is hmm I
imagine lights is using mask on to
allowed users to define their own
attributes to monitor and it is already
implemented so
so if you go to show you a secret
feature from from from I forgot actually
to block about this so if you go here
and say new script see whether it will
actually open the window or not oh this
is our exception looks like in Java fix
so I'm what this is probably the reason
why because the running on Java 8 but
what happened before and light fish
gathers snapshot so it remembers to
snapshot the current one and then the
recent one and what you can do is you
can write in JavaScript right now in
light fish a script which compares both
and escalates probably the problems over
/ s channels and I'm going to implement
the same with over over WebSockets this
is actually the idea here but defining
the DDD attributes could work as well of
course
well thanks John I see whether we have
any questions here London Lite which is
shaping up yeah quite nicely yes I hope
I hope glasses as well so let's see
whether probably someone asks a question
via the a hex channel No so are any
questions Mike C to be to make any
questions C to be to again is the
organizer of of the first virtual event
usually I was asked to come to London so
ok let's try to save time and do it from
here so this is actually and they say
yes of course why not any questions if
not see you at a hex the virtual
workshops no virtual there are workshops
at Munich Airport they could be ritual
in one point of time but right now they
are just workshop at Munich Airport so
I'm
any questions
one two three four five six seven okay
no questions then I would publish the
whole screencast again and YouTube on my
channel and in a higher resolution so
you can see it afterwards and yeah enjoy
Java EE and enjoy GlassFish shaking
thank you for watching bye
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>