<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Implementing Health Checks With Docker | Coder Coacher - Coaching Coders</title><meta content="Implementing Health Checks With Docker - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Adam-Bien/">Adam Bien</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Implementing Health Checks With Docker</b></h2><h5 class="post__date">2016-10-06</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/_CVewEfVQAo" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so hello my name is Adam beam and today
would like to introduce you to the
health check functionality together with
java application service and docker so i
will use for this purpose an old project
called pink so i use it frequently in
order to be able to pick pink my wars my
application service and via defined ori
so it's just a tiny 9 kilobyte war which
emits some information some basic
information like memory information and
also provides an echo functionality and
i will also use the Docklands image and
particularly the payara pink image and
if we look at the payara pink image it
comes with a health check command which
just it goes to the to the resource of
pink echo and and checks whether the
server is actually available so if the
server dies the the image will be
unavailable so let's see how how it
works in practice so on what I just did
because application servers are
particularly stable I decreased the the
interval to 15 seconds so you can
provide options like like the interval
on down and as well the amount of
retries until the status changes so now
let's build that so I would just build
the image and what I also will do I will
run the image and what we should see is
something new here on the status you see
health starting so it starts for a few
seconds and then it should change the
status this information is also
available on the inspect and container
name and there should be a status
section here somewhere here if we see
prod windings restart policy status
status healthy as you can see and we see
the output here so so it worked so
docker PS and you see status healthy now
just change the state
of the application server so we can do
this with connecting with the payara
pink and so on so and now I'm in the
folder of GlassFish or payara
and now will change to domains domain
one auto deploy and we see here our pink
so i will just remove the pink and it's
undeployed so now the checked should not
work anymore
dark IPS healthy still still but let's
double check the status so I will just
inspect the container again and let's
see what you will see here and we saw
already there are some attempts several
attempts failing string one so it failed
already once and dark PS still healthy
we should and now it's unhealthy because
because it failed three times and it
will tries three times and each retry
interval took fifteen seconds
so after 45 seconds it became unhealthy
so I think this is useful feature
particularly if you are not just using
you know damn pink functionality what
you could do you can really use
so-called synthetic transaction
transactions and check the health of
your application whether it's actually
working so um thank you for watching and
see you on upcoming ax Munich Airport
conferences workshops projects or
whatever in java and javaee lens or
thank you for watching and bye</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>