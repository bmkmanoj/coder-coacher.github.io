<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>45th airhacks.tv Questions and Answers | Coder Coacher - Coaching Coders</title><meta content="45th airhacks.tv Questions and Answers - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Adam-Bien/">Adam Bien</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>45th airhacks.tv Questions and Answers</b></h2><h5 class="post__date">2017-12-07</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/AsrCuzX73Eo" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello my name is an ambien and welcome
to the 45th edition it's a very very
last in 2017 of a X TV so let's start
with the topics so first next week we
have also the last EAX calm workshops in
Munich the first first workshop is
absolutely sold out and we have a very
view seats for the remaining slots and
the reason is the the room is slightly
smaller at the very first day the
problem is I have to fight with BMW and
OD and all others you know to get the
rooms not that easy
and there are thankfully some
registrations for for the other
workshops next year so thank you and
what I can tell you Java EE is even more
popular than ever
so thank you for for coming now
what also happened is I recorded a
podcast with a IBM open Liberty
developer with Aaron Schnabel and what
was not mentioned in the podcast how I
met her and I think it was three or four
years ago at JavaOne
in San Francisco and I evaluated the the
open Liberty web SIA and I tried to use
Java EE 7 or 6 profile and it just stuck
so nothing happened and so I went to the
IBM booth and asked her know what's
going on and she just looked two seconds
on on the rock fire fire up VI and just
fixed this in second and since then
since then we which had at conferences
and because conferences are noisy and
there is usually no time you know to to
exchange ideas because usually lots of
interesting talks are going on I
actually started a podcast and I take
half an hour one hour one hour and or
whatever it takes to to chat about
technical topics okay
workshops covered so what what has
happened in in this month I extended the
firehouse I made the error the exception
handling a little bit more user-friendly
so you get better better exceptions and
I tested a lot it with the payara fish
this is the error fish to pay our server
and what I recorded here how to use fire
house together with use configure and
use fire house together with with
Prometheus and Gras fauna so I gathered
some metrics during during the
screencast and and you have some more
ideas what you could do what you can do
is fire house for instance you can also
gather some business data but this is
more or less obvious I think hardest you
know to adopt two formats like Jason
from from from GlassFish what also
happened I I used open Liberty this is
the WebSphere Liberty profile so the
open Liberty it was complete up
completely open source and I recorded a
podcast where I downloaded extracted
configured created a java EE projects on
Java 9 which having any features and
deploy that on open Liberty and they are
reconfigured open Liberty in real time
so if you're interested watch this
and I posted several examples about Java
8 and the reason for that is next week
we have one Java 8 in Java 9 day and I
wanted to practice a little bit so I
before I throw away the examples I just
posted them ok so this were you know
this is the how this is called month
review so what happened in my world what
also interesting so why this podcast
take place of podcast a xdv that takes
place another Monday because on Monday I
was invited to Hamburg user group to
talk about Java 9 and Java 8 so they
wanted to have the top
I usually don't like just to talk Java 8
in Java 9 because you know if I just
list all the features is just boring but
then I just try to explain the possible
use cases what you could do with Java 8
or the impact on Java 9 of Java 9 Java 8
and show some examples was nice
conversation and surprisingly so the my
house come by one of my clients which is
actually speak Spiegel Online is like
German magazine allowed me to talk about
this so where I should create together a
micro service micro service architecture
with one small team I think they were
even Java EE beginners but they really
enjoy the lean way of Java EE and they
are actually hiring so I get lots of
questions do you know anyone you know
who would like to hire developers for
Java EE micro services yeah they did
they hunt and they hire some some
developers and this nice little team
team there are several teams but it's a
it's a nice working environment what I
would again tell you from outside also
funny I asked the the the developers
during during the Java user group
meeting you know what about the size of
the war and they told me is five makes
five max I mean this is not number of
thin war what you did and the next day
in the morning they came to me and say
ok we had one maven plugin so we had to
remove it and there is a swagger inside
and we need some generated soap code but
because we talked to D to D to D to
another service so and but by still they
half the size 2 to 1/2 MEK still a lot
for Java but it is to a half and not 5
ok
beretta offender on show and and
attendee of XCOM he comes from Utah said
Merry Christmas so merry Christmas to
you Brett and see one day in Munich
again or back to Munich so this is why
I'm late here in Java is a group of it
was caused by the Java user group
Hamburg and I think the meeting was sold
out in I've forgot a few hours there
were already 100 registrations and 100
on waitlist so Java is crazy popular is
what I can tell you ok so this was the
reason and now to your questions so the
first one the first question have you
tried being shelled yes I did and Bing
surely is fairly old and we use it back
then for configuration and how do you
compare it to a groovy Scala or newly
Kotlin I would say venture is older than
all the others and and but and there
there was an attempt to standardize that
but it failed so if you go there let's
see so the D let's see what the results
were so it was 12 years ago it was
rejected and the reasons were what
everything was green but it stopped so
this is interesting story actually so
it's like everything was successful but
nothing happened ok can happen and if
you look at the examples this is very
like much like a groovy and I would say
not many developers know about bin shell
nowadays so I would if you have the
problem to know of of having a Java like
syntax and and would like to investigate
something I would choose something
different and having that said for
instance so if you if you look at the
world's intro yes so some other features
this is the dynamic execution of the
full Java centric Java code fragments
and so forth and and I think we have
something better than this so we have a
J shell which is a Java line tool and it
is it is even better so I can actually
say new date so and then can just use it
so the variable is number one to string
and so I can also say date equals new
date so I have the date symbol date to
date of course so and and what's also
nice so if I just type in date so I get
the Javadoc included so for
investigation so it's twice if it if you
hit tab twice you get Java doc expanded
which is one of the killer features in
my eyes for Jay shell so I would say I
prefer gesture which comes with Java 9
before I use pin shell so then and then
the others let's say what was what was
the question so if you compare it to
groovy Scala or new ricotta lean so I
would say groovy is very similar I would
prefer groovy over bin shell because
it's more popular Scala yeah I don't
like Scala because of the compilation
times and if you if I just go to the
source code of the libraries of Scala is
really I I don't understand the code so
therefore I will personally would prefer
groovy and cotton is interesting is I
get another question with cotton because
cotton could kind of take off why
because the official language for
Android and Android is huge and
therefore cotton comes with very good
support in in IntelliJ so Kotlin if you
if you have a reason just look at cotton
yes cotton can be of course using java
java application the question is of
course
why you would like to do this because in
my eyes Java 8 and Java 9 there are
perfect languages very productive and I
don't think you are going to be a far
more productive with Kotlin Scala groovy
bench LJ shell or whatever shell
comparing to stock Java 8 so and if I
have dynamic parts if I would like to
replace algorithms I call that fluid
logic in my book I would use prefer to
use Nass warned which is es6 and a or or
es5 so javascript interpreter which runs
in in in the JVM so you can you can
actually in the look at the firehouse
video I'm using NASA on there too to
have the ability to provide dynamic
scripts which extracts the monitoring
data so the problem here it seems like
you're using Apache as a front-end for
application server this is what I'm also
doing so if you go to my block is
actually Apache and behind the Apache
there is Tommy GlassFish and white lie
so I am every application servers open
Liberty is lacking but I will fix that
soon so all known application servers a
few years ago are delivering my block
with statistics and workshop
registrations everything is Java and I
don't have the problem here what I'm
using is in mod JK madre que is a binary
protocol between the Apache and the
backend what I think what you are using
is the mod proxy so I'm but then all all
front ends I know you can set up
pass-through I guess is the names over
the headers get a path through 2d 2d
backend and if you search for Apache
proxy pass exactly and headers you will
find the mod proxy definition and and
what you can even do you can even add
new headers to that
so I guess should work I had of course I
cannot just try that because it will be
the
a huge under undertaking and what I
tried that I think with AJ proxy and but
hea proxy is is network level proxy and
with nginx so i hope i helped you with
that so look for the parameters this one
is interesting I had similar similar
problem here so Monsieur a front and
he's she was inspired by my videos and
what's interesting is if you if you read
further this is a spring developer who
likes Java this happens actually to me
more and more during the Java user group
meeting in Hamburg for instance there
are some spring developers who asked me
know for instance why they have to to
manage all the spring boot dependencies
and my answer is I don't know why you
have to I don't to use it and and there
was a nice nice nice conversation
afterwards if they've saw how how Java
operates and and how easy and lean it is
so and this is also one of the
developers or a front if you can I would
really curious why you going now the
Java it out if you are a spring
developer but what's unusual in Java I
can tell you right now is to create an
abstract dowels actually most of my code
rivers you have performed if I find an
dowas usually a defect but and no worry
are going with that I wouldn't call it
Dao something else but what you would
like to have is a class like entity
manager switcher know so this is
actually what I also would do so you
have two entity managers which are
injected and now if you look at the code
what we try to do is depending on the
IDE you would like to have one of these
the entity managers active so what you
could do for instance you could expose
this ID as a request scoped context or
store the ID somewhere and then what you
could do is in
that of doing this get entitymanager you
could say produces entitymanager inject
the ID here and depending on the idea
returning this one or order another one
and then you could do here payment
resource at inject entity manager and
the and the right one would be injected
either you know who's the ID first of
the of the ID ii i had to do something
almost exactly the same we had I think
three or four entity managers and at
that particular case what I did is I
injected several entity managers here
and had unusual exactly there's a switch
case and I think even I passed the
parameter so it would be even even
simpler so instead of exposing and
relying on dependency injection you can
pass the parameter here and you will get
the first one or the next one so this is
this boolean ODS you could pass here or
if you like you can inject the ID here
and make an dynamic dispatch and
something like this it works and
actually I is this to the right way it
would work but in my eyes too complex so
if you if you can you know implement a
simple if-else statement I would go with
that why you know to use qualifiers and
and whatever if just plain Java works I
think hopefully let's so what would we
have is the archive and CDI
No so all the one mm-hmm
now I thought this is a blog post but
it's actually a video so you have to
watch the video afterwards
I'm putting the the CDI container in a
unit in the inner unit test and then I'm
selecting dynamically a beam so I'm
making I'm choosing a class and in using
this select so if you watch this how
long it is I don't know five minutes or
something I did something similar here
on the fly just to show you know how to
use CDI outside the application server
and you could do the same within the
application server so um I wouldn't do
this is to complicate it as I said in
your case you have just two and TD
managers so the question to you is you
only have two or you expect to have 100
later if you expect to have more this
would be no proper way if you if you
will only have two period I would just
implement something like this very
simple
even without the dowel you have
something like not abstract like
entitymanager provider and it can be
injected then I say you know our method
can the name of the method could be en
just e/m so the shorter am and then you
can just use the entity manage am dot
and do something with it
this would be my way yeah and the whole
that would think this is not very java
istic way of programming I would say
because the anti-d manager is already
know a dowel on steroids and using
another doubt and capsulated our this
strange so this is your what do you
thing about using cotton where a second
this Kotlin was already asked here here
cotton so you get the same answer
Monsieur oh ma so co clean in Java a
project would work the question is why
so what do you get out of that because
there are a far more Java developers
than cotton developers but as I said
cotton is already interesting by the
if I would had a little bit more time
and less projects and would like to
learn a new language
now I'm really completely overloaded
with Java and JavaScript I have tell you
but I would sign no the the capacity or
no interest to learn a new language
I would actually learn something which
does not run on JVM so why to use
something else which runs on JVM if you
would like to learn something new just
use do something completely new it was
also you know ten years ago there was
Ruby on rice 2006 and theirs was also
grace with groovy so okay if I will find
time I will go you know the Ruby on
razor out why you should use Grails
because it's too familiar to me so it's
like if I learn something new then
computing you there for I'm really happy
with JavaScript which runs in browser so
and which is completely different
environment in Java and I learned you
know the whole time and still forget all
the things so this is a great
observation or interesting observations
or small observation about conversations
or and and he mentioned dunning-kruger
effect and and I said what is actually
the the key definition of dining Kruger
effect and the definition if you read it
this is a complicated expression of a
simple thing it so my understanding of
dining Kruger effect is then someone
overestimates its capabilities so this
is what how I understand that and the
question is you know someone did someone
just says because of dunning-kruger
effect and this is doesn't I I don't get
it because if someone would have done in
Kruger effect it means it doesn't have
any experience
then what belief is a master he probably
wouldn't wouldn't use Google stuff
rather than implement everything from
scratch say okay I'm an older hero and I
would like to implement everything from
scratch so I think regardless rather
than in Kruger or not Google uses it's
so great
so exactly did I had all the time not
in google Netflix runo history is an
application service everyone wanted to
have histories and application service
regardless that the application server
had exactly the same functionality with
circuit breakers bark heads and all the
functionality say ok the answer was why
I mean Netflix we cannot compete with
Netflix and I was okay but I'm not
Netflix so this is the main difference
you're you are not Google
you are not Netflix and you probably
don't have Google Netflix and Facebook's
requirements this is the big difference
in projects so what is good for Netflix
or Google or Facebook is almost
certainly not very good for smaller
teams so because Netflix rebuilds the
full infrastructure from scratch why I
should rebuild everything from scratch
if I am in Oh two men show or five men
show or even a smaller enterprise
project in my eyes it doesn't make any
sense so and actually this happens
frequently to me even yesterday so
yesterday someone asked me like you know
we have to talk about conversation
configuration so I'm shot you know with
the that produces string you can inject
strings and and fetch them from system
and and it was two liners you can
configure all the service from from
within docker the cloud like environment
and so forth so they say okay what is my
opinion about zookeeper so I say ok I
would never ever use zookeeper just for
configuration and zookeeper is more like
the master/slave and I forgot diverters
ID directions like yes Lee the elections
I guess and then we discussed for about
I think 15 minutes and then I would say
out for instance if you really would
like to have something different I would
use etcd or from Hoshi corporate for
consul and say ok but we use already
zookeeper for leader election so and
this of course changes the whole
discussion because in this particular
case if they already have zookeeper for
the direction they can of course used to
keep as well for configuration so this
was the easiest possible choice there is
no need to discuss with me whether it is
good or not it's already there are we
choose it first before I introduce
another tool and and so my observation
is
lots of misunderstandings in in projects
and we have to use this frame where
Google uses it's so great so this is
another symptom it was like boring
technology symptom so what I observed
more and more some developers don't like
the fact that Java is basically done so
if you if you just download the
application server you are productive in
five minutes
so there is nothing else to investigate
to evaluate it you just go with the
business logic but if I would choose
histories I have to integrate it with
Java II I have to integrate it with
tomcat jetty I have to do something so
and this doing something is better
feeling and it's not so boring than
thinking about the business logic so
it's funny but I think really this is
the the main reason why I hear all the
time about Google not so much but
Netflix now is in and sometimes Facebook
so it really depends on the project and
yeah and by the way then the then the
conversation started with angular and
then I who have no time to discuss this
right now but in the project yesterday
we also have to discuss angular and yeah
your experience was deadlock
conversation my question is which
requirements or how much is it better if
we choose Google framework of stock Java
or Java so this is how much time do we
save this is my main question how much
time do we save or what or what part of
the application makes easier and so did
it happens all the time to me in one
project for instance there's also
recently a team created a
proof-of-concept in two weeks and
actually what they had to show is a Java
EE micro service which reads data from
one single table only one table from
database so this was the proof of
concept and they created 45 classes and
my job was to review their code so I
mean I created I think 20 PowerPoint
slides describe
why it is wrong and just deleted jealous
deleted and then I just say okay I can
just write another 20 slides or my
suggestion was I would fork the project
and provide you know one alternative and
they were about five classes already
overage over-engineered core code and no
kidding I spent more time arguing with
the architect why it is wrong to delete
all the unneeded classes which is in my
case obvious as even though the
principle of HR development test and
delete waste so and and we agreed that
some classes could be deleted and what I
wanted to have to shorten the
discussions I in future point in time
let's say in three weeks I would review
the your code again but then at least we
could delete you know all the unneeded
code and I don't know whether we agreed
or not but it was this is though this is
I try you know to get as fast as
possible some numbers or or something
which is quantifiable quantifiable or
measurable and and this usually solve
the problem so let's see what happens in
the Twitter Wow
so most of the clients build on top of
spring yes but it changes a little bit I
mean lots of my clients if you get so
let's say what usually happens I'm
involved in task forces and after the
task force there's lessons learned and
the lessons learned what we do we throw
away all the dependencies usually is not
spring involved and I would say spring
is fine outside Java EE so spring boot
is good comparison to Java EE but I
wouldn't use spring inside Java is too
too much overlap so to entity managers
so if you have just two entity managers
then go is simple if-else statement and
forget all the qualifiers and and CDI
magic you know use the entity manager
pass the ID and have fun if else and
you're set so the G boo grunt is
available to get hired so then go to
Spiegel Online and search for change the
in D in the job what I saw in the Java
user group was no Java EE rather than je
position so okay
Victor asked me do JPA implementation
hibernate and so forth use JDBC
internally absolutely so they use JDBC
to JPA implementation use an internal
cache with in synchronous DB later
absolutely is cause you need your work
they have multiple such cases and how it
works is they quite transaction also
great you can do whatever like at the
end of the transactions the entity
manager computes our entity manager the
anti-de manager implementation from
hibernate for instance like the
hibernate session computes the deltas
and synchronize creates from Delta
sequel statements and sends them to a
database by the way this is very similar
to virtual Dom in react or angular
four or five six or whatever version we
have right now why do we need connection
post DB connection application service
mainly before because if you just use
straight
connections local straight connections
usual connections means no it's eight
connections just transactional
connections and you have local
transactions what happens then is for
each transactions the connection is
bound to the transaction so you have
let's say five parallel transactions you
get five parallel transact
five parallel transactions you get five
parallel connections so it won't work
with one connection except if you don't
if you if you're not working with
transactions which would be which will
be a little bit problematic I would say
because of consistency so therefore
usually what you will do is if you have
no we talked about bulkheads the thread
pull of the applications of HTTP thread
pull if you have five threads your max
pool size should be at least five or it
should be five in the JDBC connection
pool and also what they do application
servers they have prepaid statement
cache
which is sometimes is dependent or
independent connections depends on
database and if you have a connection
pool so creating a connection
it means class four name driver driver
manager gate connection take some time
and all the connections in application
server I are already pre initialized so
it is faster to reuse them so this these
are the main reasons ok so what's here
nothing chat is quiet the chant I think
the last time shut the door
there were times where chat was
hyperactive but now Twitter is more and
more active and the chat is almost at so
I wonder why probably we switch to
something else so Henry Lu asked me how
do you decide the optimum Amazon AWS
instance type and how you combine with
class dish configuration for optimum
performance I recorded actually a video
on how I push grassfish to ECS and I
started I hope back then with a AWS and
I'm using first the smallest possible
instance see what happens do a stress
tests and see how it behaves and then
what I also do if client asked me you
know how big the instance has to be I
asked them you know how big is the
project and what budget do we have if
because what you could do in Amazon was
a little bit of fiddling you could use
so-called spot instances there are huge
instances but you have to leave them in
in a view I think you mean it's time to
leave them and they get killed
and what I did in my ECS I just used
this is not picot but it's called me
mini but at the Tyco instance I think it
was not not usable was ECS is not
possible to get there and the neck
instance is already good enough so
actually we did some project with a
smallest possible instance and the
evaluation is very similar to two usual
hardware the question is is it CPU bound
or i/o bound you have lots of database
connectivity
lots of database interactions then you
need more usually more threats but less
CPU lots of lots of lots of algorithms
or encryption then I would give the
server more CPUs and and less threats
okay so it's basically no answer due to
an answer no difference to to be a metal
or or toka so and usually no if you have
one or two cores and I would just so in
the ECS I think I picked 265 megabytes
per instance but I would go with 2 gigs
why not I mean yeah so another question
how do I get a glass of shape occasion
without losing Kappa variability
actually doing this right now
so using payara and i'm using open shift
and this is what HR proxy does out of
the box and open shift you have rolling
upgrade strategies you can have canary
deployments everything is built-in so
and in all my Microsoft projects outside
open shift you use a chai proxy for that
you can also watch videos so if you go
to my YouTube channel and search for HR
proxy or nginx there's how to use a load
balancer with microservices in dhaka and
if you don't have taka and you don't
have you have nothing just you know
museum technology with pierre metal and
glass fish cluster then still glass fish
was capable of rolling upgrades if
you've searched for them this only works
in gaseous cluster but this was an
extension built by a french team of
developers and inverted well in clouds
we don't need clusters we don't need
admin servers or we don't need cluster
service we only have single instances ok
so
next one so it says thank you for all
the good I should be no very good so
good is okay so good information you are
providing means you know I'm talking
about something just kidding
so the question is Mowgli is playing
with JWT authentication mechanism so he
brought his own HTTP mechanism and has
some trouble and the trouble is if the
authentication does not work he gets web
application exception to access local
exception how to deal with that first
what you're not using here is the
message context and message context as a
method forward so what you could do
instead of doing this response
unauthorized you could you couldn't just
forward to arrow page and then or to for
reauthorization this is the obvious one
what you can also do I think you get the
exceptions because this thing is
probably egb or there are some egb
between and what you can do you can
throw a web application create your own
application exception your own exception
which inherits from not authorized web
application exception if it exists let's
see does it exists not our rice
exception exactly so you would have to
inherit from not authorized exception
and annotate that worth application
exception what happens then is then do
your problem with the worst egb you
access local exception won't happen
anymore there will be no such thing and
they can will get for all three I guess
okay so let's say my code I think I hope
it is answered that on where you can of
course also do you have to response here
you can redirect and and then pass back
JSON or or whatever you like let's say
my I am code exposes REST API so GSF app
and one and I want to use two different
authentication mechanism what is the
best way to achieve that actually
what you can do you can ask whether wait
a second what you can do there is in the
context there is credential and you can
and you can check whether this is user
so how it would work you can you can
create how it's called username on
password credential or or token
credential and then you can have
multiple authentication mechanism and
choose one on the fly and then you
wouldn't say context of the response and
authorize there's like context yeah do
nothing or not do not think there's
nothing like like authorization skipped
so there are three options so you have
to say I skip the authorization then the
next one kicks in and yeah this is what
you can could do okay so now very good
question I even made a symbol page app
on web components and even added routed
route capabilities we did it actually in
that during the last air hacks comm
workshops I the attendees asked me know
and what if you would like to have Ruta
without frameworks how hard is it and we
just implement that I think there were
four lines of code so and very good
point but what happens if we need you
know component like tables and then what
I usually do you know it's just creating
a table is not a big deal but if the
table needs filtering and all the crazy
enterprise stuff then of course if you
have react or angular as always the same
story then you need an external
component and I would like to have a
standard component and therefore what I
usually do I point to to Vaadin elements
and Vallon elements is a library of
great UI components and this UI
components have are built on web
components of just absolute standard and
there is there are lots of grits and
table
and the grits are actually great so um
if you look at that there's an HTML API
this is a web component an API and you
can use voting grid filter selection
column and this is really powerful
components again Weiden elements is not
Vardhan it's just you know the
JavaScript portion without the Java
back-end so this is what I usually do
this is just one suggestion there are
multiple such frameworks okay so thank
you for watching my Java doc has stuff
and I've better exactly but I'm still
not understand how you handle the
database connection actually forgot to
fire up my private cloud so I will skip
that but for instance if you are in
openshift so you can create your your
your service and then what you can do
you can just choose a database and and
OpenShift comes for its newest Postgres
so it will install Postgres in your in
your private cloud and you can access
Postgres like it was a local database
and most of my clients have on-premise
data based is not docker eyes not in
container just on premise and this is
not a huge deal because what happens
then your application runs runs in your
private cloud and the IP address and
host has to be visible of course then
you can just access us access the
database directly and what we do if you
have multiple database in the
configuration of the application server
there's a placeholder and a placeholder
is going to be replaced at startup so
it's supported by all the application
servers by open Liberty Tommy and
GlassFish payara now payara and i mature
about last fish but payara does that and
and in the cloud you will either have to
buy at Amazon a cloud or a cloud
database or buy an AWS compute you see
compute instances just a bi-metal server
and then a volume this is EBS elastic
block storage and in within the VM you
could install a database or you could
just
there are lots of prepared images so if
you go to Amazon and then browse the
catalog you get to know all the
databases so you can just run them so
this is not a big difference to
non-cloud anyway in my my eyes tears
there's really no huge difference
between running your apps Java apps in
cloud and outside and EDD clouds or yeah
so this is better combination No
congratulation to the good work so a
read great work so again good okay thank
you
just kidding and good question two
databases and how to synchronize them so
should I should I look for a x8
transaction it's a hard question because
I know projects where it's a just works
fine so they had always never any
problems that's the problem if you if
you if you look at it say you also will
have to look at XA exception and it's a
exception is thrown if something goes
wrong and they are did several states
which such exception can have like
commit hazard mix means one branch
committed in rollback so in you will
have to escalate the error or some
somehow and if you just ignore the
exception you cannot use XA two-phase
commit because your data gets lost and
or get corrupted but if you have proper
emergency management that you can react
to all the arrow states then it could
work but if you just if it's and this is
why 5:8 this is why this you got this
answer because if this will be
greenfield project I would try to try to
solve it with with the domain or
business use cases or what you could do
is to write to the first database and if
it fails then decide you know what to do
from the from the business perspective
let's say the first database is an order
database
the next one is payment so if I write
the order and I cannot cannot cannot
fetch the payment what I what I would do
I will create a counter counter
transaction and the counter transaction
would be to cancel the order or cancel
the shipment we cannot undo it anymore
it would be like another use case on top
of the already existing one
so with two-phase commit what is just
doing e you could be lazier with
two-phase commit if it works because you
don't need the compensative transactions
I talked earlier so you can just rely
that it works but in most cases it is
very problematic and also I would only
look at XA in case there are two exactly
the same databases from the same vendor
on the same page level otherwise it is
almost sure that you will be in trouble
under under heavy load also two-phase
commit it comes with some overhead which
is which is clear because there's a far
more communication going on behind the
scenes so how it works the code are on
the neck and the next one is you're
using what rate what what fate has to
has to do and this is what fate class
die I guess the whitefly 8 will write
transaction lock for two-phase commit
and this has to be persistent and
reliable reliable just as PI system what
it means is if one cluster node fails
you will have to migrate the transaction
log to another one so what it basically
means there's a lots of moving parts and
you get everything right it could work
but you have still to react to the
arrows but if it goes south there could
be lots of troubles so this is and again
I saw lots of projects you know they
were usually no project from the old
days hosts involved were people with
lots of experience or where it's a work
just fine and and if you just do X a and
forget about this this is almost usually
you're asking for trouble
ok what's going on here nothing nothing
and no questions here so and now to miss
your her neck I got a question Twitter
and now I got the his and and he asking
me know what is the Java way to
implement PWA so know what he would like
to have is have to have progressive web
apps and single page applications build
with Java but they have to run in
browser this is the requirement right
now and by the way what is wrong is Java
Vic's ports to the browser oh okay I see
so it has to run in a browser because
usually what I you're right it's not
wrong what I usually would do I would
run Java fix outside a browser and never
in browser so which and by the way and
there are interesting stuff here J sweet
is like cross compiler so and the reason
why I change or what I suggested the
last time is the following you see the
reason here so this is Java code and
this is the JavaScript code but this is
the es5 code this is the egg math script
five if you just look at the web
standards training on some of my
JavaScript videos I could rewrite that
almost identical to JavaScript the new
JavaScript so the question is for all
enterprise projects and in enterprise
project who are in your unique
situations or unique situation means in
most at least European companies we are
allowed to use Chrome or Firefox so if
you are allowed to use Chrome and
Firefox you get you know the newest tech
or the best possible support for for
HTML HTML dumb JavaScript and CSS
features and then you can write almost
Java code so in fact all most of my ear
six applications they look like Java X
or or afterburner apps so this is and I
showed that also to developers and they
really like the approach so for me there
is no need to create a transpiler
or or just use Java if the modern
JavaScript already looks like
Java I agree with you I wouldn't like to
write the old JavaScript es5 like
function exactly this so this is this is
I don't like it so and therefore in the
past year I always try to find an old
Java solution for the web and right now
I like the new JavaScript because for me
it is almost identical to Java so for me
there is no more rethinking I just go to
browser man productive and not only me
I get experience with fresh projects
which started without any frameworks
with es6 and javascript and they are
happy about that so this is actually
this was a great but there are
interesting tools you listed like J
sweet and the so I would not use GWT so
this is what I'm also very opinionated
this is like would say problematic
technology for lots of times compilation
time then I knew and you can drink lots
of coffee then GWT is the right right
choice yeah
and so I would I wouldn't use typescript
because I have exactly the same attitude
in the browsers in the back end no
dependencies use the platform rely on
the standards and then we never ever
have to migrate and my clients like it
developers like it so we have similar
mindset and typescript in if the project
is really huge
so typescript has a bad way typescript
was internally invented by Microsoft
because they had to port these Microsoft
Office
I was called 360 or something and there
is a huge project of course inside if
you have such a big project with
completely different requirement and I
wouldn't use you know in my small single
page app typescript because I'm not
Microsoft so exactly the discussion from
from before what's also interesting you
will like that it's called duke script
and duke script is really interesting so
the the duke script I would call it it
is like html5 for Java and the NetBeans
developer worst
involved in duke script and it it once
more or less Java in the browser with
with data binding and this is actually
dissolution air looking for this this
and for native apps there is glue one HQ
I think and this is for mobile apps and
there's a similar approach you can write
with Java the D front-end and gets you
get a mobile app but a cool story is you
can inject services running in a Java EE
server and this is worth Johann Voss
this is a very good developer has a
company from from Belgium so I would
look at this gluon or Duke script and
Duke's crib one Duke Awards house cause
Duke Choice Awards a Java one also very
skilled developer from Munich actually
this is Anton Apple and they provide
training and I think he brought even
books so it's a social and and an apple
Duke script you will find the resource
yeah and and this is a Java Rockstar
from Java one so I think I will look at
that if you don't like know my way of
providing just es6 apps so isn't that
kind of giving up Java the problem most
is not fault of Java the problem there
are plugins in browser so I think all
the plugins will disappear so we have
only one possibility the possibility is
to transpile Java to JavaScript right
now however there is something
completely different on the horizon and
you could we all can get our java to
java in browser so what it could be or
what it is it's called web ASM and this
is web assembly and this is this is
actually working already and there's web
assembly what it does is this is like
bytecode directly directly executed
interpreted by the browser
and and they're already and and this
this this is standarized so all browsers
will support it is this high speed and
then JavaScript will transpire or
compile and compile yeah exactly
javascript will compile to to a web
Azzam and java could compile as well so
we could just take byte code and compile
it to this and then we could get native
Java this could be interesting but still
I really like es6 and we have the I do
Java for 20 years like like right now so
I really enjoyed to do something else
and I think it is suitable to focus just
on JavaScript because there then then
you are covering the two most important
languages right now
I hope let's see what was TOB index
let's see November Oh
javascript is number six this is
impossible and c-sharp and python okay
so I was wrong but Java is number one
and it is a little bit less popular so
we have all learned C but actually see
knowledge could be could be interesting
if you just would like to web assembly
without Java just write the byte code
for the web okay but still JavaScript
and okay Python and and you know what
I'm doing JavaScript in Java right now
and really happy with it I hope I answer
the questions
yeah and offline functionality is
actually not a problem because service
workers are concurrent access to the
cache and this is just an API so I could
call it from from from es6 or later Java
the Java would answer to this the answer
to this is not run in browser right now
the native language in the browser
JavaScript period and and by the way was
Duke script and glue on a glue or not
which new script you get the PWA but
still peter beauty was heavy often
functionality what it will means
see do we have Java web ASM compiler
okay just 21 stars no idea how popular
this eight month ago so it seems like we
are able to so this is a preview to
cross compile Java to to web assembly
and yeah
so something happens I hope this was the
answer and the Java answer would be to
run Java fix outside a browser which is
perfectly viable solution okay let's see
what happens here now very good you see
the first one for all in my wonderful
work there's normal good so this is it
gets better and better so the problem
here is the following so balance request
does something and goes to the outside
service seems like and this is supplier
of requests of response and supply acing
balance requests supplier and the
enquiry is probably the thread pool and
the problem is here that the handle
handles the exception and then if you
handle the exception you're probably
returning response and then you are
accepting what happened here so what you
can do this response accepts the result
and object or it also accepts accepts
the response so you can do both and
there is note on the handle you can you
can look at exceptionally and uncomplete
so what you can do you can also call
then apply and convert the response to
something else so I think the problem
you have here is that this is supplier
of response and in the in handle
response you are handling the exception
here and
you just passing back the the response
and by the way I would never block here
because if you block here this does not
make any sense so the whole idea is not
to block here and then you're not
blocking the method and Java EE micro
services I'm not sure whether I did
something on YouTube but at least here
in my so we have complete Abel future
and exception handling and I think I I
wrote a unit tests with all the with all
the possibilities of exception handling
and you don't even have to buy the
course to look it up because it is free
on github the source code you only have
to find it this is not your task
somewhere here I have here the so the
whole the whole code is here so take a
look at that and yeah if not see you in
January
it's 3-4 weeks I think it's yeah shorter
because we are late okay now let's see I
hope I could help you so this is so Nara
Dean asked me I am trying to encrypt
from data use an email password before
sending to browser don't do this you
cannot encrypt this so usually you have
to use HTTPS and by the way what you
should do this is the servlet spec and
what you have to search is it's the
logging from authentication and it looks
like this and then it is sent to the
server there's a standard Java EE way
and what you have to do is you have to
set up in web.xml confidential so just
take a look at this and you said this as
confidentially just works over SSL and
then everything is encrypted so umm if
you have a forum just look at that this
is the login authentication I just have
for but this is the didn't changed in
this is in all the servlet specification
and take a look at the our
authentication and you see here this is
you can use the basic digest I would
never use the digest so take a look at
the basic a deform based or HTTP client
authentication this would you can you
can do and the additional methods are
scrapped as well but this would be my
approach to a problem never ever try to
encrypt anything directly in the browser
ah I met this nice developer yesterday
it was yesterday you know a day before
at a job is a group and his question was
how to convert local date/time a with
Jason B in Java 8 to 2 from pooja to
Jason back and the cool story is I look
at this and there's no problem works out
of the box even with custom formats you
can you can even specify format how and
what you would like to to do and what I
also promised to write a blog post and I
will try to do it tomorrow or next week
or week later but the good news is if
you use local day time or just local
date in a POJO and you use Jason B it
will sue allies back and forth this into
Jason in the standard format and you can
choose the format with I think it's
called Jason B date mapping and you can
provide the format so so something new
or interesting there is a Jack's table
yes which is soap in one fly 10-1 which
is a fairly recent file whitefly and it
gets a GB transaction rolled back
because of timeout it looks like and the
problem is everything is rolled back
what what and what is actually the
question so however I believe there has
to be a way to make the connection
timeout exception rollback the current
and when the
I read this and forgot actually what the
program is so um yeah so first what we
can do you can you can increase the
timeout which is usually five minutes I
think is the standard if so if you are
there hit the five minutes you should
really roll back because five minutes is
way too long and so you should increase
the timeout what you can also do if you
inject the session context you can you
can ask the session context whether
whether the the the transaction is going
to be rollback so there's a method set
now get rollback only or is I think it's
not it's aerobic only rather than get
rollback only so search for session
context is rollback only so you will see
in all other methods whether the
transaction is going to be rollback or
not and what we are doing here is you're
marking the other methods requires new
so that they just complete so it looks
like you have an outer method which
takes too long and this outer methods
invokes inner methods which which are
shorter and if you mark them as requires
new you can complete you have multiple
independent transactions which is a
little bit dangerous for consistency so
what do you how to deal with the problem
what you can yeah the problem you have
is the transaction timeout happens
outside because it is caused by the JTA
so you cannot catch it easily so you
have really increased the tea time out
this is global setting on the
application server to ten minutes
whatever suits you and then it won't
happen anymore what you could also do is
to inject user transaction and if you
inject user transaction is actually
terrible so first you you have to mark
the egb transaction management bean then
inject user transaction then begin and
commit the transaction so as the
problematic transaction and then what
you can do you can say set transaction
timeout and specify your timeout this
would be also solution to your problem
and then
you can catch whatever problem you have
inside a code I actually never used user
transactions in my projects but always
as a workaround so once we had a problem
with you know with a tool and we have to
use it but never because of business
logic okay Wow lots of new stuff
the question if you want to behave with
the Java nine methods have what might be
the alternative for Java 8 so what he
does is we have our time out so this is
a discarded in my block and get
okay so I don't get the so death or
timeout means that the it's a full
pipeline times out if you have jax-rs
for instance you can you can say
asyncresponse set timeout and then you
get what happens at least is you get the
timeout to the client so this is the
first thing you can do so because if you
use Java 9 in Java EE 8 with Java 8 we
could set up two timeouts right once for
the async response and the other one
with completable future and so this is
what we can do in Java 8 on Java 7 or
Java 8 asyncresponse set timeout and set
timeout handler this works right now out
of the box but if you would like to have
the timeout inside the pipeline so then
supply so what do you what you what you
have to do then to specify the timeout
within the methods and this could work
with transaction timeout for instance
and if you are working with Singleton's
there is an excess timeout or if you
have dealing with databases there is a
connection timeout so you have to and if
and if you calling let's say computable
future then what's called supply async
and you calling an external service then
you I would provide the HDP timeout
there
so this is how it would work because
this Java 9 solution to the problem is
only if there is no fine-grained
timeouts so I have a global timeout
which is I mean yeah this is a house
called the last line of defense
how do you choose the type of database
in your project relational database
versus document database or knows no key
value stores I mean if you look at the
data this is the answer right and and
order can answer you as the following
what kills relational database is the is
the fact that
you if you run your DDL data definition
language changes with liquid base or all
flyweight DB and it takes more than view
minutes it will kill the relational
database because it means basically
application it gets offline for this
amount of time and this kills usually
relational database my projects and we
look for alternatives so on how to
choose them I would say there's always
trade off and a trade of this relational
database I type safe and the problem is
if you are not very disciplined with
good details it they will the quality
will degrade to more or less key value
pairs whose back references and this is
terrible so you get you know no type
safety and and ugly queries document
databases on row secure databases you
don't have to change the DDL so the DD
DD schemas so what do you what do what
you can do you can you can provide a
broader and broader objects or you can
and and the and your business logic
logic has to deal with with the changes
or with was a different
I was called different types of objects
at the same time so what it means is if
you have for instance a a device in the
in that in a table or in a document so
newer versions of the device can have
more sensors than the old one for
instance right and your business logic
have to deal with that so thank you for
for following me and go to the next one
so I didn't read this because it's
everything from today so I got all crazy
so this will last last minute question
so let's see what happens here what is
your preferred way for connecting a
desktop application Eclipse RCP oh I
hoped it was not your choice this
Eclipse ICP you just have to use it so
to back-end server
rest we use Java fix projects aid
ability swing even inevitability swing
and we used always rest remote is not a
thing
forget it rest
no WSDL okay and soap
I wouldn't also use soap anymore so so
Java micro so drone in different
containers for services or eight or even
16 would provide standards in for
electron intercepts and Konami okay over
state is application with a single app
which shows the status of random
alkaloids action call known take a look
at firehouse I would say and how how
would you technically implement to
register myself micro service to a
status app so I did something like that
and I use WebSockets so on all
application is to know there is a
standard monitoring tool like watchdog
and they just push per WebSockets and
say I'm here or I don't know even though
the web sockets or checks or us and
which are online go to my youtube
channel if you have a this is micro
services in a different containers so
what it means is you're owning docker
and in Dhaka you have health checks so
usually your Dhaka does it for you and
if you go to docker PS you will see what
is healthy or not it happens out of the
box in openshift there's liveness and
readiness checks and cuban it is as well
so if you have cuban it is also soft
problem so usually you don't have to do
it by yourself so it is soft by cuban it
is soft by Daka
and look at firehose you have a central
facet and firehouse could could go to
all your micro services gather the
metrics and if one micro service does
not answer then it's not there so it was
you see that and what we also do in one
project the Cuban it is an open shift
they have a REST API so or so our
service can ask you know if I arrest how
many pots are running so ok just two
questions left sirs would be one of the
longest shows ever I think so
they recently find me okay we they have
job j7 Java 7 running on para when the
session expires there is a session
something expiration listener it is an
HTTP it is on servlet level you get that
so am and what could also work you could
have a session scoped CDI bean and there
is pre pre destroy pretty strong you can
also have this callback so you get this
and there is HTTP session binding
listener is the name HTTP session
binding binding listener right so that
you bound by the unbound oh this is
something else this is these what is
bond and iron bound and there's also
session house I see Java EE session
expiration it's not the name something
else this is special it's not just
session created and session destroyed
okay so what is your opinion on using
vertex instead of Java for a micro
services based application so you saw my
code we use it in production and I have
to sell to tell the following
Java EE is like no basic boring
technology which most of developers know
and they're happy with it so if my kinds
are happy and everyone is productive we
don't look to something else having that
set vertex is interesting so if I would
have problems with comes from Red Hat is
interesting and now some really very
good developers who are using vertex so
yeah do you think is a birthday
alternative compared to Java EE so what
it means worthy so um let's say
I don't think any of my microservices
projects in this year could be
implemented faster or we could save any
money with a different technology I
don't think so I would say with no js'
would even lose money but comparing to
other technologies we would be as fast
as Java it probably the cool story with
Java the Stack Overflow factor so if I
go to stack overflow I never question
the question is know which technology
provides me the most answers and I think
javi so you get to know if you have
questions I'm running on white for I
don't even mention micro services and
they have this in this problem you know
you get the I hope most I hope I know
most answers on four because Java is the
whole technology more scalable so vertex
seems to be more scalable so what I can
tell you are single application server
empty applications of a like hello world
app you can achieve ten thousands
transactions per second so if your if
your application is CPU bound you can
linearly scale if it's a io bound
database whatever you're using in your
container or micro service you will
still have wait for the database so the
question is now what do you mean what do
you will try to build first so if you
are building facebook like stuff then I
would look for something else like Java
because if you have you know hundreds of
thousands of micro services then it is
worth for optimization but if you are
building if you are planning to build an
enterprise app with you know five to ten
nodes in cluster or the cluster like
there's no more cluster like working in
parallel then Java was just fine and and
by the way all my startups were amazed
how fast Java actually is and was able
to reach double D throughput or Java and
use less resources this would be
interesting what you actually did I mean
what do you mean that you have was
vertex twenty thousand transactions per
second
and if you really have the questioners
Rudy this really depends on the context
what can happen I don't know what they
are building if you have four it's like
message based you know message passing
application then yeah then you should
probably use JMS or whatever then also
changes completely but this what I will
investigate Wow
this is our kind of test so class which
three is ancient and koruba util means
you're properly using remote eg B's and
and you have a deadlock what it could be
everything but what's unusual here that
this is koruba stuff and cava means
usually I would I would gas remote eg
B's this is our mi over i io p and
possible solution would be to look at
the remote interfaces and yeah ok i hope
no questions left we are one of the
longest show thank you for watching and
see you in 2018 so prepare your
questions and it was I really enjoyed
the show I don't know why it's like
almost like Java community or community
I get afterwards lots of feedback so
thank you for watching see you probably
next week in in Munich or next year at
the X TV so thank you and bye</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>