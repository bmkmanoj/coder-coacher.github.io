<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Common SQL Queries converted for the Firebase Database - The Firebase Database For SQL Developers #4 | Coder Coacher - Coaching Coders</title><meta content="Common SQL Queries converted for the Firebase Database - The Firebase Database For SQL Developers #4 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Firebase/">Firebase</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Common SQL Queries converted for the Firebase Database - The Firebase Database For SQL Developers #4</b></h2><h5 class="post__date">2016-12-09</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/sKFLI5FOOHs" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">we're good okay now okay no now we're
not good okay there everyone welcome to
the fourth episode of the firebase
database for sequel developer series in
this lesson I'm going to write eight
sequel queries and then convert them one
by one to firebase queries so let's dive
right into the laptop so right here I
have a file called query dot sequel and
at the top I have an example table of
users and at the top we show the columns
so we have you ID which is the primary
key and then we have name email age and
location and then below we have to
sample rows of a user named David and a
user named Alice and below this is the
list of the eight queries that I'm going
to write and then next to this file I
have another one called query dot T s
and T S stands for typescript which in
this case is essentially just JavaScript
for us and I'm only using typescript
because it's going to give us some
awesome code complete in the browser so
right here I have an example data
structure for the firebase database so
we have a parent key of users and then
below the parent key we have individual
child keys for each user and this is the
same list that we have on the previous
page so let's go back and let's start
writing some queries so the first one is
select a user by UID and this is
probably one of the most basic things
you can do is select a record by its
primary key so to do that we'll say
select star from users where UID is
equal to one and this will pull back the
row for David and so if we wanted to do
this in the firebase SDK well we see
that we have our users key and then we
have our child key of one so to do this
we would create a root reference first
and I'm going to do this up top so every
single query can also use this root
reference variable so Const root ref is
firebase
database dot ref and so this root ref
points to every single piece of data in
the database and then using this
reference we can then nest down to any
child references I can say Const 1 ref
and I'm calling it 1 ref since it's the
first query that we're writing and I'm
going to say that it's route ref dot
child of users and so users is our
parent key and at this point if I want
to go from the parent key to the child
key of one I can just call dot child
again and we are at the first key and
this is the same thing as saying select
star from users where UID is equal to
one and if we wanted to retrieve this
user we could just do that by attaching
a non value listener or something like
that but right now I'm just going to
keep it to the reference so the second
query is find a user by an email address
and this is almost exactly like the
query from above we can say select star
from users where email is equal to Alice
at email comm and this will select our
row for Alice so how would we do this in
our firebase database
well we'll create a reference again and
we first need to get to the reference
for users so root ref that child of
users and we can't call that child again
and nest down because we can only nests
down to the keys that we know about so
what we can do though is use one of the
ordering functions so we can say order
by child and then specify email and at
this point we could say equal to as is
our query function and set equal to
Alice at email comm so we're getting to
the user section we're ordering by email
and then we're looking for the email
that is Alice at email com
so back to our sequel file our third
query is limit to ten users and this one
is also pretty easy we say select star
users limit 10 in the firebase database
land will create a reference to our
parent reference so counts 3 ref is
route ref child of users and then we
will say order by ki because this will
order by all of the child keys and then
say limit to first 10 and actually the
real time database SDK is really smart
for us so we can actually get rid of
this order by key and it will infer it
for us
so the next query is get all users whose
name starts with the letter D so in
sequel I can do this using a like clause
and so I could say select all from users
where name is like capital D and then a
wild-card so now using the firebase
database SDK I'll create a reference to
our users reference yet again so root
ref of child of users and now we want to
order by child and specify the name so
we're querying based upon the name and
at this point I can use the start at
query function and say start at the
capital letter D and this will retrieve
everyone in the database whose name
starts with the capital letter D now
sometimes there are problems with
dealing with Unicode and so you want to
make sure you're getting back everything
within the unicode range and so to do
that you can actually say n debts and
then say capital D / u f8 FF + u f8 FF
is at one of the highest points in the
unicode range and so by doing the start
out end at range you make sure that
you're grabbing everything that starts
with the letter D so now the next sequel
query is get all users who are less than
50 so it's a select star from users
where age is less than 50 now back in
our firebase database file we'll create
a reference to
users so create a another reference
route ref child of users and now I want
to order by the age so order by child of
age and I can say dot end at and put 49
and the reason why I'm saying end at is
because we're essentially saying order
by all the children but let's not go any
higher than the children whose ages are
greater than 49 so we won't hit anyone
who's 50 so that is less than 50 so the
next query is get all the users who are
greater than 50 so this is pretty much
the same query we can just go and copy
and paste it so a select star from users
where age is greater than 50 so back in
the other file will create another
reference because remember we always
have to create a reference to the parent
key in this case that is users order by
child of age and now I will say start at
51 so this is similar to the previous
query we did in this case we're saying
order by child of age but let's only
start retrieving the children once their
age is 51 because 51 is greater than 50
now the next one is get all the users
who are between 20 and 100 so to do this
range query I'll say select star from
users where age is greater or equal to
20 and age is less than or equal to 100
so this is similar to using the start at
or end app but we're actually going to
use them together
so we'll create our reference so root
raft child of users order by H and we
want to start at 20 and we want to make
sure we're actually starting at 20
because our range is between 20 so 20
equal to 20 or greater and then less
than or equal to 100 so dot end at 100
and the last query number 8 is get all
users who are 28 and live in Berlin so
to do that we'll say select star from
users where age is equal to 28 and
location is equal to Berlin so we'll
jump over to the firebase database file
and we'll say Const 8 ref is root ref
child of users and so you might be
thinking okay well the first part of
this clause is users who are 28 so I'll
say dot order by child of age and say
equal to 28 then the second part of this
is users who also live in Berlin so I'll
say order by child of location and say
equal to Berlin but this query right
here will actually throw an error and
the reason why is because you can only
use one ordering function in the
firebase SDK so how do we get users who
are 28 and live in Berlin so whatever
you structure data in the firebase
database you want to do so with your
queries in mind so you can optimize your
data structure for the questions that
you're going to ask it down the line so
taking a look at this data structure we
have users and then the child key is
their UID so the quickest fix we can
actually do right now is combine the age
and location keys together and create
our own index so to do that we can say
age underscore location and set that to
99 underscore SF because 99 is the age
and the location is a is SF and then in
the second user you can do the same
thing again age underscore location and
the age is 28 and the location is Berlin
and then
now down here we can just move back to
using one order by method and we could
say order by child of age underscore
location equal to 28 Berlin and just
like that we are getting users who are
28 and who live in Berlin so that's all
for this lesson if you found it helpful
make sure to LIKE and subscribe
and you notice in this lesson we wrote
eight different sequel queries and then
converted them all to firebase queries
but we only queried one table in the
sequel database in just one collection
and firebase database and coming from a
sequel database you're probably used to
writing joins where you can join
multiple tables to get one result set so
how would we handle joins and firebase
database well stay tuned to the next
lesson where we'll cover that in depth
so that's all and I will see you in the
next lesson instructional video you
might also want to check out this video
or even this one and make sure to
subscribe and now you just watch me try
to cut for them
Oh doing a row</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>