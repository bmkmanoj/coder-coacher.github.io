<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Understand and Grow Your App with Firebase (Firebase Dev Summit 2017) | Coder Coacher - Coaching Coders</title><meta content="Understand and Grow Your App with Firebase (Firebase Dev Summit 2017) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Firebase/">Firebase</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Understand and Grow Your App with Firebase (Firebase Dev Summit 2017)</b></h2><h5 class="post__date">2017-10-31</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/csf6nhN1MAY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">good morning everyone my name is cat and
this here is Andrew we're both engineers
on the firebase team mostly we work on
features to help developers build their
apps quickly but if you've already built
your app if you've already shipped it
then what what features does firebase
have to help you out at this point to
explore this question we decided to
build our own app complete app without
firebase and it's called goldmine this
is a little game we've built but
everything we show here today can be
applied to any app so let's get this
started of our demo once our game is
started up we can select a level will be
dropped in the middle of a goldmine and
our goal is to get as much gold as
possible and escape onto our ship and
out of the goldmine
yay we escaped so that's our little app
that we will be demonstrating on today
let's go back to the slides but for some
reason we don't have very many users and
our CEO is not very happy with that but
we don't really know why or what's going
on with our app
luckily firebase has a whole suite of
products to help us as developers
understand how our app is being used as
well as uncover issues that our users
might be facing such as bad performances
or crashes so back to our CEO level
mandate how do we get more users well
we've developed a lot of new game
content including a lot of new levels
but we think that our users won't know
about this how can we let our users know
about our new updates hmm I have an idea
let's use firebase Cloud messaging to
notify our users when we release new
game content that way they'll know to
come back and try the app again that is
a great idea and attract that people are
coming back to play the new levels we
can make use of firebase and a lot
and we'll know that our approaches
working so andrew want to get us started
sure let's jump back to the demo good
morning
the first thing that we'll want to do is
install firebase we've already created a
firebase project and we've created our
iOS app and to save time for the demo we
also downloaded the firebase
configuration P list and we uploaded our
APM s-sir to firebase the first thing
we'll need to do now is use cocoapods to
install the SDKs let's plan ahead and
install a few of the SDKs that we're
likely to use first we'll need to add
the SDKs to our pod file and then we
head over to the console and we run pod
install we'll let that run it'll
download the SDKs and we're all set so
we can head over to Xcode and we'll need
to add to edit our app delegate to
configure the firebase app all willing
to do is at the top import firebase and
then call firebase app dot configure
firebase Cloud messaging Auto registers
for new notifications so we won't need
to add any special code to configure
things but we will have to enable clout
push notifications in our project so
let's go do that now there we go and we
can run the app we can now head over to
the firebase console and we can quickly
use the UI to send a message to these
users let's try it out we'll go to the
council we'll open the notifications tab
and we'll create a new message for the
message text let's enter something like
come check out our new levels and then
we'll target our message let's say to
the whole app and hit Send great so if
we head back out over to the app now we
should see our notification come in
there it is
next let's hook up analytics to see how
many of those users are actually coming
back to the app to try the new levels
will have to write some code actually
Andrew we are already getting some
analytics data we got it for free when
we configured our firebase app well
that's cool
let's see what the data looks like we'll
go over to the console will pull up the
analytics dashboard and we'll see what
the data shows hmm you know cat it
doesn't look like we have very many
users I'm really interested to know if
people are actually playing these new
levels we can't tell this from the
default data but with a little bit of
code we could log some custom events and
we could tell each time a user plays a
new level let's set that up
let's over to head over to Xcode and
we'll open up the view controller for
the level screen and at the top first
we'll import firebase then we'll add a
custom parameter we'll define a level
complete event and we'll add in the
level that they're on and then we'll add
in as well the instance ID as a custom
parameter so that later on we'll be able
to target push notifications to them
since custom parameters have a limit on
data size we'll need to split this up
across two parameters and now we'll log
this event using the log event method in
analytics there we go next we'll enable
the debug mode for analytics in our
project now usually the firebase
analytics SDK optimizes for battery
usage and it batches events together
meaning it can take a little while
sometimes before new data shows up in
our console but for development we
really want to see the right events
right away so we'll go in an able debug
mode to ensure that those come through
right away all right let's run the app
and we can see if we get new data we'll
want to go and complete a new level just
to see if our custom event is correctly
logging things we'll pick up some golds
we'll find our ship there we go
cool we escaped let's head over to the
console now and we'll go down to the
analytics debug view and refresh the
page and refresh the page and we should
see there it is we see the new events
coming in it even has our green
conversion event that we just locked
let's go take a look at some of our App
Store reviews our better our users love
these new levels so slow don't waste
your time maybe that's an outlier worked
for me but took forever to load starting
to sound like a trend takes like 30
seconds to load
yikes well I have an idea actually I
think I know where this is
maybe it's the giant background image
we're loading we can probably fix this
by using a more optimized image hey Kat
as long as we're in that code let's
update the image let's pull in that new
Thanksgiving background image that we
were working on Andrew
Thanksgiving is an American holiday I
don't think everyone here knows what
you're talking about for those of you
that don't basically Thanksgiving we get
together with our families and we eat a
lot of turkey but that is a cool idea I
think you're onto something if we use
remote config we can set a different
value for users in different regions
we'll be able to configure a parameter
and remote config to determine what
background URL to load and then the app
will connect to firebase and get the
appropriate value for that user
this way we can
our normal background optimize of course
and for Americans we can go ahead and
show some turkeys for Thanksgiving and
when it becomes time for Sinterklaas we
can send a Sinterklaas name for people
in other ones we'll be able to change
all of this on the fly without having to
push a new update like we've done in the
past hang on if we're gonna be changing
the background images all the time how
will we prevent these sort of
performance problems that we just saw
from happening again
what if someone forgets to optimize one
of the images that's a good point we
dropped in the performance monitoring
SDK earlier so that gives us data that
measures Network requests and we can add
a custom trace to specifically track the
performance of our new level choosing
code all right so let's go back to the
demo and since we've already installed
the SDKs we can jump straight into the
code here we're going to be changing the
code for our level chooser first up new
file new import let's drop in our
firebase import firebase this will
import both remote config and
performance monitoring then we'll take
out this line where we were loading our
oversized skulls background and instead
replace that with code that we'll fetch
from remote config instead we will
create an instance to remote config that
will actually connect to firebase and
get us our values and we'll set
developer mode so that we can get this
data quickly in a production app these
values would be cached for a certain
amount of time but we want to test to
make sure things work now on stage we'll
create a constant for the name of our
parameter here we've picked background
URL because it's our background and it's
a URL and we will set the default value
to fall back to in case we can't connect
to firebase then we can perform a fetch
from firebase the expiration duration
here determines how long we will wait
before fetching the values again and of
course while developing we will want to
set this to 0 so the
we can see the effects we're having
immediately once we've fetched the
values we have to activate it this is a
separate step because we want to be able
to control when the values actually
change it would be very disorienting to
change the background while the user is
choosing a level but every time they
come back to the screen we can go ahead
and change it once it's activated we
will read in the actual background URL
from remote config and we'll be able to
load the background oh and while we're
here let's add that custom
instrumentation for performance
monitoring so we can see how we were
performing we'll simply begin the trace
before we download the background and
we'll name our trace background load so
we can keep track of it and we'll end it
as soon as we've finished loading our
background all right
so the code is all hooked up the next
thing we've got to do is go back to our
console and actually set the remote
config of Al use
we will create our first parameter
background:url as our code is expecting
and we will specify our default image
you can see here they're not oversized
skulls then we'll add a condition that
allows us to target a section of our
users just our American users and send
them a different value so that they can
get that nice turkey background for
Thanksgiving we'll select the region and
give them the URL for the Thanksgiving
theme awesome let's publish those
changes and run our app remote config
essentially provides us with a key value
store which we can change remotely this
lets us set this sets us up for sending
out that sinterklaas theme later on
without having to deploy a new app for
example we could also sorry remote
config also allows us to target
different groups of users based on
analytics exact events for example we
could push out a special theme for users
who have completed 10 or more levels
looks like I've got my turkeys here cuz
my phone came with me from America
alright so we can see we got the turkey
let's go check out the performance
monitoring data
we have a couple of traces set up by
default here such as app start an app
and foreground and you can also see we
have the trace we've set up the
background load let's go ahead and drill
into that we can see the range of times
and if we drill in we can see this
broken down by app version by people in
the Netherlands or America and other
countries and this way we know if
there's a particular region that's
seeing poor latency we can use remote
config and send them a better image all
right now that that's fixed let's take a
look in our app store reviews again hey
that looks better
looks like our American users love the
new turkey background whoo that's not
good okay well one of our users isn't
happy and apparently our app crashes on
level 2 that doesn't seem good at all
all bet crashlytics can help us figure
out what the bug is we already installed
the crashlytics SDK so now we need to
configure it let's head over to our
Xcode project and let's open up the
navigator and open the build phases tab
and we want to click the plus to add a
new script phase there we go and we'll
want to add some text into this box all
right that's all you need to setup
crashlytics let's take a look in the
console and see if there are any crashes
Hey look there it is so this is actually
super helpful if we look in here we can
see that we're having a bug in our level
model now we can debug this really
easily if we were running this locally
with the debugger but what if there's a
bug that happens remotely crashlytics
actually gives us the ability to capture
custom data from remote crashes as well
to do this first we'll need to go over
to xcode
and we'll open up our level model since
that's where the crash seems to be at
the top will import crashlytics and then
right before where we think the crash is
we're going to log the row and column as
custom data note that testing
crashlytics locally is going to require
us to turn off our local debugger so
let's do that now
and now let's run the app
it's building it's launching there we go
and let's try it level two since we
heard that's where the app crashes yep
there's the crash found it now we can go
back into the console and we can
actually see the crash data including
the custom events that we just logged
let's take a look at the log data here
looks like we crashed right as we get to
column 9 you know I think I've seen this
number before in our code
maybe we hard-coded the maximum size of
our levels let's go back in the code and
see uh yep there it is oh yeah we did
hard-coded okay well let's fix that
let's instead base the size off the
actual level configuration all right
let's run the app and make sure the bug
is fixed
all right let's try level two and there
we go it loaded great let's go back and
take a look some of the reviews all
right Sinterklaas theme is great looks
like that removed configs really working
for us a very well built app fast stable
and fun
sounds like we fixed a lot of issues
best maze game of 2017 we did pretty
well now that we've sold our quality
issues maybe we can use our analytics
data to help us increase our user
engagement we know that our users tend
to drop off after level two so what if
we gave them some encouragement at just
the right time so that they'll keep
going and play level three cloud
functions can help us here we're already
logging analytics events every time a
user completes a level so we can use the
function integration to identify when
someone has finished level 2 and send
them a notification encouraging them to
try level stirring all right let's try
it out to do this we'll need to first
make sure that our level complete event
is marked as a conversion in the console
this allows us to trigger a cloud
function from it all right here we are
we have level complete and it looks like
we have already marked it as a
conversion awesome so now we just have
to write our functions code this is code
that gets run in the cloud so we won't
be writing it in Swift and we won't be
using Xcode and we don't even have to
deploy a new app for our users to get
this functionality will be writing in
nodejs
let's dive in we've got our import here
for functions will also want to import
the admin SDK so that we can actually
push out a notification
we'll also configure our app to use the
default information for our firebase
project next creating the actual
function we've called it on level
complete and it triggers every single
time an analytics event comes in
four level complete we'll get the event
object passed to us containing lots of
data such as the custom parameters we
logged this includes the level data and
the token we'll need to send them a
notification so let's grab that and if
it's not level two we don't want to send
them a notification so we can exit out
early otherwise they'll have just
finished level two and that's when we
want to send them a message so let's go
ahead and write that well tell them
they're going great they should keep
going for level three
maybe we'll get a 100 bonus points all
right the last thing to do send it off
right using the admin SDK so we'll just
save our file and firebase deploy it
cloud functions is a powerful
integration that allows us to trigger
code based on events that are happening
and allows our app to respond in you and
customized ways to analytics data we do
this without having to push out a new
app every single time functions also
integrates with other firebase features
for example we now have a crashlytics
integration in beta every time a new
issue appears we could have it file a
ticket in our bug tracker automatically
all right
looks like our functions deployed so
let's go ahead and try it out just go
ahead and finish up level 2 so much more
gold all right well you escaped so you
finished level two now analytics will
send this custom event to our server and
this triggers our function which sends
us a notification that we just set up
there it is so let's take a look back at
what we just did we used cloud messaging
to let our existing users know about our
new content we then added analytics to
track how our app is doing and what
levels people are reaching remote
convict allowed us to target particular
users and give them a spot
relized experience without needing to
publish a new version of the app we used
performance monitoring to track how our
app is performing with the new fixes and
crashlytics gives us insights into what
crashes our users are running into and
lets us gather contextual data from
remote devices finally we wrapped it up
by using the integration with analytics
and functions to send off a notification
at the right time to encourage users to
go on to the try level 3 it turns out
almost 50% of App Store reviews our app
crashes or network issues or other
performance problems that we can fix
these are issues that we as developers
should be aware of and have the power to
fix to give our users a smooth app
experience firebase can not only help us
catch these issues upfront and react to
them but it also allows us to track how
our app is doing from how many users we
have to latency numbers and enables us
to reach out to the people using our app
there's a lot more we'd love to show you
but we have limited time
everything we've demonstrated today live
is free to get started with so we
encourage you all to explore on your own
thank you so much for coming and if
you'd like to speak with us after the
talk you can find us in the ask firebase
lounge
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>