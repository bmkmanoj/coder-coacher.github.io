<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Denormalization is normal with the Firebase Database - The Firebase Database For SQL Developers #6 | Coder Coacher - Coaching Coders</title><meta content="Denormalization is normal with the Firebase Database - The Firebase Database For SQL Developers #6 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Firebase/">Firebase</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Denormalization is normal with the Firebase Database - The Firebase Database For SQL Developers #6</b></h2><h5 class="post__date">2016-12-22</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/vKqXSZLLnHA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">yeah okay yeah yeah let's light it on
fire and send it to the world all right
everyone
welcome to the sixth lesson in the
firebase database for sequel developer
series and today we're going to be
talking about D normalization and if
you're coming from a sequel background
which you probably are since you know
you're watching this you probably know a
lot about normalization which is you
know reducing data duplication at all
costs in your database and normalization
is great but today I want you to take
that idea that concept take it right
here and just put it right down here
don't lose it though because it's really
important but I want you to have an open
mind when we talk about D normalization
because it's pretty much going to
contradict everything that you know
about normalization so to learn more
let's dive right down into the laptop D
normalization is just simply duplicating
data and to be more specific
it's duplicating data to simplify or
reduce querying this database model is
what we've been using for the entire
course it is our events database and we
have users events and event attendees so
event attendees is sort of a junction
spot for events in users so we know
which users are going to which events
and we can see that through sharing the
key of FM for the events for firebase
Meetup and also the one in nine keys
which are the user IDs underneath users
and obviously you'd be using a push ID
or a firebase authentication ID but this
is just to keep it simple and underneath
event attendees we're storing just the
name so if we wanted to get the entire
results for the user we had to do a join
which is what we did in the previous
video and the way this joint looked was
is that we grabbed a root reference from
the database and then from there we
grabbed a reference to event attendees
slash FM and that's the firebase Meetup
and then attached a child event listener
which fired off for every attendee at
the event when each attendee went and
fired off we went and grabbed a
reference
to their data underneath users using the
key and then called once and got that
data back and so effectively joining the
two together now this is fine if you're
not doing this query that often or if
it's a small set of data but once your
access pattern grows larger and you're
running this query all the time or
you're running this on a larger data set
you probably like to eliminate this
inner read and just read this data one
time just like this just with a simple
child added but currently we can't
because you can see underneath event
attendees we're just storing the name
but what if rather than store the name
we stored the entire user object and
this way we could just do that one read
and we'd get back everything we needed
about the users just by saying child
added on event attendees /fm so a big
question I always get is when do i
denormalize my data when how do I know
to duplicate data here or there and the
rule of thumb is you want to structure
your data after your view so I've built
this app called bomb fires which is a
list of firebase events and bonfires
uses the same events database that we're
using in this series and which you can
see up here at the top and bonfires is
that there is a navigation bar where we
can click featured SF Denver London in
Berlin and it will bring us back those
specific events at those locations now
you would imagine that something you can
do is you could just say I'm going to do
a query on the events key and I'm going
to say order by child location equal to
SF or equal to Denver but rather than do
that I could also do normalize so I
could create a completely new data
structure called location events and
then from there key off each location so
SF for San Francisco and B R for Berlin
and then store each event at that
location
underneath that location key and then if
you just need to read the data it's just
a straight read there's no querying you
just create a reference to location
event /sf and then attach your real time
listener
and that's all you need to do and then
if you need to do this for another city
you just change the key so instead of
San Francisco in this case we choose
Berlin and attach our listener and the
great thing about this is is that if you
need to do further querying nothing
stopping you you still have the ability
to order by any child within the
location events key so another big
question about de normalization is what
about the consistency of my data so if
you're duplicating data all over the
place how can you ensure that when it
changes in one spot it changes
everywhere so take a look at our users
database we have users and you have
event attendees and in users if the user
David goes and changes their name to
Dave you can see that it won't
automatically go and propagate to event
attendees and so this could be a bit of
a problem because you don't have the
consistency that you're looking for
generalization is just simply
duplicating data to simplify or reduce
querying and once you start duplicating
your data threats your database it
becomes really simple to read your data
because you don't have to do a complex
join or a query but the problem is with
consistency is when you start
duplicating data everywhere it becomes
hard to make sure it's all consistent
and you can fix that with multipath
updates which we will be covering in the
next lesson so if you like this video
make sure to LIKE and subscribe and I
will see you all in the next lesson hey
thanks for watching our video you might
also enjoy this video or even this video
and you should subscribe because it's a
snap oh wow that was a bad decision</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>