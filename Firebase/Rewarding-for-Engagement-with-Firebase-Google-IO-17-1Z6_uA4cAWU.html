<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Rewarding for Engagement with Firebase (Google I/O '17) | Coder Coacher - Coaching Coders</title><meta content="Rewarding for Engagement with Firebase (Google I/O '17) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Firebase/">Firebase</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Rewarding for Engagement with Firebase (Google I/O '17)</b></h2><h5 class="post__date">2017-05-19</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/1Z6_uA4cAWU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">welcome to reward for engagement I'm Gus
with me here is Damian today we are
going to explain to you how you reward
your users and increase their engagement
and also reward them to bring more
friends to your app or game we are going
to talk a lot about firebase today so if
you don't know what firebase it's a set
of tools that Google provides to you
that help you develop better apps apps
with less crashes apps with better
performance more flexible and also help
you grow your audience getting more
users or players and if you are into
this kind of thing you also can earn
money with that and Damian explained
that our plan today
cool so one challenge that every app
developer or game developer find is to
get more player for more users in their
in their app or game and when study that
we made about a year ago we found out
that 52% of people find out about new
apps or new games from friends or
colleagues recommendation and after that
from the App Store and after that comes
search engine and ads etc but the main
thing is word of mouth friends and
colleague with commendation so we will
focus on that and make that experience
of sharing an app with friends and
colleague the best possible the way we
do that is by implementing a referral
mechanism a referral mechanism is a
circle that directly starts with someone
that click on an invite button and share
a link through a messaging app or a
social network or SMS email whatever
later on someone that will click on the
link install an app open the app and see
some message saying like hey you get
invited by the name of the sender of the
invite please log in to get a reward or
something like that
later on the user with logging or do an
action in your app or game and we will
reward both the sender of the invites
and the recipient of the invite
finally as we are giving a reward we
need to think about preventing
fraudulent patterns of people that
creates a fake account to claim the
reward multiple time without inviting
real users
so we will think about that okay we
certain if I told you let me introduce a
Vitesse from a rock by who integrated
that referral mechanism in their game
and they will tell you he will tell you
bit more about their experience Thank
You Damian hi everyone my name is Ari
Tish I'm from Rock byte games and I'm
the developer of game deep town that's
the game we're going to be talking about
me deep town is basically a game about
monsters self-replicating robots mining
crafting and science it's kind of a
science fiction game about where you
kind of manage an underground town and
build factories dip town has was lunch
of March 15 two months ago just in the
first month we already had about 200,000
daily active users and over 2 million
installs very engaged players now in
deep town there are things like rare
items and rare items can be only get
from legendary chests lucky thing is you
can get a legendary chests by inviting a
friend and the cool part is that if you
invite a friend they will get a chest as
well so here's how it works the whoever
was doing by different I just have to
click on the invite button and when that
happens we use firebase dynamic links to
generate a special URL then we use
google share dialog to show some options
like send email or use social media to
share the link so now our player can
just go ahead and share that and this is
how it looks like on the other side for
a lucky friend so they get kind of the
share link very nice and beautiful they
click on it they can then go to google
play download the game play the game and
when that happens we actually take no
action instead of just we just remember
that this person was invited by a friend
and we let them play the game now after
they spent some time ending the game and
they play the tutorial and things like
that this is the perfect time for us to
take action well now we can freely use
the firebase real-time database to
perform the magic of notifying everyone
that reward has been given that allows
us to keep making all the hustle of like
having servers maintaining servers root
all database that does it for us so when
both of the players get kind of
notification they can open the chests
see the nice animation of the chest
opening and they can see what's inside
that's pretty simple and the cool part
is you can't abuse that because everyone
has to kind of play the game for several
minutes and only then they both both of
them will get we work in deep town we
use firebase a lot so as I told you we
use real-time database in order to fix
our server problem and not not have to
maintain any servers we used analytics
in order to measure our KPIs do some
funnels things like that we used remote
config to a/b test our numbers on shop
and things like that that really helped
us a lot
by increasing the revenue by the way we
use correct reporting to maintain the
whooping 4.8 waiting on Google Playstore
and we also use notification to send out
you know notifications to people with
seasonal event and such finally about
some numbers rewarded invites are great
and they're so good that our players
love sending them out it's the 10% of
our entire playerbase or sent out an
invite to their friend but that's not
the best part it's not just about
gaining new users it's about quality of
users you get with the statistics we
measured we can see that the invited
people are more likely to spend time in
game they are actually spending 22
percent more time in the game and there
is a resulting in a 50 percent fifteen
percent revenue increase for a for each
user so that's pretty cool I guess
that's it for oh sorry that's it for
deep town thank you very much Damian
thank you very much the better one five
okay so the plan for today is we
prepared a small demo application and we
are going to integrate that referral
mechanism in the game can we switch to
the following place okay so that's the
demo app in our current state like there
is no refer mechanism just
like it's just a simple game where you
can play Oh No
let's start that list okay it's just a
simple game okay let me first close it
so you can logging in the game with
Google sign-in but firebase is also
support like Twitter Facebook etc and
then you can play the game which is a
game where you need to zap droid using
the right color at the bottom it's at 20
seconds I am not too good at that game
it doesn't really matter much okay so
when you finish again you get the high
score that get synchronized with the
real-time database I didn't beat my high
score this time I also have a username
at added at the top you can see sister
they move there all of that you've
stored in real time database so in that
can we switch back to the side please
sorry perfect so in that game we already
have some part of firebase already
integrated we have analytics to better
understand what people are doing in the
game
we have crash reporting that should have
touched that bag we have remote config
that lets us tweak some part of the
gameplay like for example the current
game last 20 seconds but server side we
can switch it to be 30 seconds very
easily and we have authentications on
real-time database together that lets us
like cycling in the game and create a
user profile in the real-time database
that saw our progress from one device to
another okay so when when we say we have
a complications we have to part of a
consultation in the game first we have
anonymous logging when you first launch
the game because we don't want to ask
players to signing in the game right
away unless Iran we let them switch to
Google signing a new moosa game is quite
cool because it gives us an user ID from
the start which lets us store the user
progress in the cloud from the start on
for example if you have an animal
slugger sorry an animal anonymous users
that contact the customer support asking
for help we can display the user ID
somewhere in the game and you can see
his safe his progress and help him
directly from from the database it also
gives us the same cut path because we
always have a user ID we always save in
the DB no matter if you are logged in
and a new movie or with a real call with
real authentication mechanism so it
helps us having a simple code path
in the game so we also have a gameplay
limitation in the game like every free
to play game you usually have user like
current current virtual currency or some
sort of energy mechanism in our case
implemented the deme limitation which is
you can only play three times every
seven hours and that will also be our
reward for the referral mechanism if you
invite one friend you will be able to
play for time if in right side friend
two friends will be able to play five
time etc in your game it might be giving
coins it might be giving energy or
whatever and to implement that
limitations we need to store some
information in the user profile in the
in the real time database so in the top
left corner at top left corner you can
see user 1 which is our user ID in our
database and there is we have two
different set of scope when is private
field and the second one is public field
under private field we store information
that are sorry under right go back and
their private field we store information
that are written on written by the
currently logged in user and their
public field we store information that
are written by the currently logged in
user on read by anyone like in under
public field you in find information
such as your high score which is a
public information your user name and
the last time you logged in so we can
show you if your friends are active in
the game and their private fields we
store information such as your
authentication token that we will use
later on in in our server implementation
your FCM second to send notifications to
players but also how many time you
played in the last seven hours which is
less play here is the start of the seven
hours period and number of plays one
with meaning that I just played once in
the last seven hours that will let us
enforce the limitation which is free
play in seven hours
ok and about the referred mechanism that
we are going to implement we have three
different actors there we have the
center of gene right the recipient of
the invite entire base when the sender
of the invite click and invite button we
are going to query sorry
our ways to get the dynamic link then we
are going to share it using a system
intent on Android we are going to the
recipient is going to accept click on
the dynamic link receive a custom and
boarding later on he will login in the
game at that point we are going to give
the reward which means updating the DB
crediting the reward to both the
recipients and the sender of the invite
and then finally sending them a
notification to both of them so they
know they received something the first
thing we are going to use is dynamic
link dynamic link is just a smart URL
which contains a payload in our case the
payload will be the user ID of the
sender of the invite so that if we send
me an invite the receives the guys I
click on the dynamic link we'll know the
user ID of Luis and be able to read his
public information so good part of
dynamic link is that if you have the app
already installed it will launch the app
when you click on it if you don't have
the app installed you will be redirected
to the Play Store or the App Store if
you are on iOS you will be able to
install the app and when you launch it
we still have access to the payload we
don't lose that information okay so now
let's see with Luis how we are going to
click a obtain the dynamic link from
firebase and share it with an interns
thank you nice Chuck now we start with
implementing things just a caveat here
we said it was going to be live coding
but it's too much content so we are not
going to do live coding so we can show
everything sorry for that let's start
from the java part from the client-side
we are going to create a dynamic link by
hand this is at the beginning and just
create a string and concatenate multiple
values I'll explain to you in details
what we're doing here I know it's a very
long link but let me explain details the
first part we have here is a domain this
the five acts you see there you can copy
from your dynamic link dashboard on
firebase console so if you create a
project you have that code for yourself
already every project has of course one
different and you can just put it there
after this you need a link a fallback
link why do you need this for example if
you send us an invite to someone
in your friend open it on a desktop on
this browser this is where he's going to
be directed to if he opens in on Android
on iOS then it's going to be direct to
the app or App Store Play Store depend
if it's installed or not after the the
fallback link we can add as many
parameters as we want
for our use case for the affirm
mechanism we need a user ID
it's the sender it's the person that's
inviting someone so that's what we are
edging here you can add as many
parameters as you want and you have
access to this later when your user
opens the app from the link you have
access to all of these parameters aside
from the parameters you might use for
your for infrastructure for keeping the
flow you also add some other special
dynamic link parameters that these in
case here are the we call social tags
and it means that whenever you share
this there is going to be a special
title a special description in a
thumbnail so it makes the link
Prieur it's make more you look at
something and it's nice and that's how
it is there to share it's just the
typical Sherrington from Android I'm not
going to explain because you own all of
this but I'm just using the dynamic
links they're passing to the string we
have an example here so from our small
game you've just seen we can click on
invite from invite we can choose where
we want to share there I just remember I
just show the code to share something
that it will trigger that share using
something I'm going to use Google keep
because I'm lazy and here is the link
that we've just created it's over there
there's a very long link and when we
save and click on Google keep that's
what we see so that's what's being
shared that's what your friend would see
on the messaging app on the social
network whenever you send this and this
this looks very good for me so this is
working but yeah and now it's working
but it's not so great right you see the
the link is very very huge and you
barely see the social tag at the bottom
now I'm sure we can do better like the
idea is that the full dynamic link is
very long too long and not visually
appealing
the good news is that we can we can get
a shot version of it it's totally doable
the bad news is that it require some
server code so let's see how this is
going to shorten the link okay let's do
more work Thank You Daniel
let's do the part of obtaining the link
from the firebase server the good thing
here is I don't want you guys to spin a
server to create a machine docker
kubernetes all of these kind of things I
don't want you to talk about this today
it's a lot of work and you don't really
need for this test so we are going to
choose something different we're going
to choose called functions for firebase
called functions firebase is a way to
write code that will run on firebase
servers Google servers and you don't
need to worry about provisioning to
load-balanced you don't need to worry
about anything or just write your
function and it will be fired in
whenever an event occurs and this event
can be a write on the real time database
can be whenever a user authenticates or
whenever he logs out can also be
whenever there is a conversion event on
the analytics can be like if there is a
HTTP call to a specific URL that's the
kind we can create a web hook from here
so it makes creating server-side code
easier like much much easier today we
are going to talk a lot about cloud
functions and it's in JavaScript so bear
with me let's start with the first one
to create a dynamic link and I'll go
through all the steps with you don't
worry first we need to export a function
we create this so just as a heads up
this is you put this on one javascript
file that's of the function we are going
to start when exporting is going to the
name is create dynamic link so this is
also going to be the rail we are going
to call we are defining that this is a
HTTP call HTTP call and from there we
are going to do some tests in order
first we are going to value data header
we are going to then after validating
the header we are going to create a
dynamic link after we create the dynamic
link with the result of that we are
going to save to the users profile and
then we return like 200 if it's
everything okay or unauthorized it's
there is any kind of error during the
way let's
invalidate header why am validating the
header I said this is a web hook so
anyone could access this our URL from
any browser and I don't want everyone to
just assess my my endpoint I don't want
that I want to validate and make sure
that all the users from my app are
assessing these endpoints it makes I I
restrict the use of my constraint like
my resources how do I do that whenever I
make this call from the client I will
put on the header of this this call I
will put a bearer and our token
separated by space what I'm doing here
verifying if there oh I have the bearer
nice let's split it and get the idea
this all token after I have this all
token I'll call a method from the
framework as you mean dot off verify ID
token I don't need to write that I just
call the framework method and it will
return to me the decoded token and the
ID of the user so if I'm user you want
whenever I call this when I get here the
decoded ID token dot user ID will be
user one and then I can use that on my
next step
that's create a dynamic link with the
user to create a dynamic link before
doing that we are going to talk about
another specific from firebase for code
functions from firebase sometimes I
deploy my code and I want to change some
of the values that this code is using
without have to redeploy everything and
there's also other cases that I don't
want to commit to my repository some
keys or some very specific values from
my code I don't want to write a very
constant with a key I don't want to
write a constant with a API URL because
it might change and I want to customize
this as much as possible so that's where
we can use the firebase client tools
here it's a command line so there's a
lot of environments will talk about Java
code there was JavaScript code now we're
talking command line in the command line
I can just set a variable like firebase
dynamic link dot rest API endpoint
that's the rest API from firebase to
create
dynamic link for me I also have to defy
want also to define a domain the domain
I just talked about you it's the 5x
there you get this code for your desk
from your dashboard and finally I also
define a Web API key that I also get
from my firebase console here that's
very part because you don't want to
commit your repository keys because
anyone could find that there and it's
really not safe so you can just define
these own environments and whenever your
functions as a kitchen you have access
to that and that's exactly what we are
going to do here and create dynamic link
for user first thing I'm going to do is
functions doc config and then get one of
the values and with that I will start to
concatenate and create my call
great you are out to call for my recipe
from my endpoint I'll just add Web API
key of course I'll get the domain
because I'm going to use on my request
I'm going to make a post request to
firebase servers now and I'm going to
pass this body here it's a lot of code
I'm not going to enter in details but
the important thing you have to pay to
look here is so fix option short and
that's exactly why Deming was
complaining he wants to make the link
shorter this is the only option you have
to send any to create a short link for
me that's the return of that call as you
can see their short link you a user
could remember that by head you can read
and remember by head you just remember
like then all 10 characters and they are
the preview link is the other link we
created by hand just in case you once
for some whatever reason so this is the
return from that call and this return we
are going to use on Save Link on
database saving link I just put this on
the user's profile to save on the
database I won't take too much time I'll
just create a map that's a path on the
database and a value with this out just
update the map here is users user AG
public fields dynamic link and I just
put a value short link and then I'll
just save to the database using a
specific instruct that admins database
why I'm using this because I don't want
to worry about who is calling this who
is the securing I don't want to
about that I want to save to the
database whenever I do that I have
superpowers so of course I can't overdo
that I can keep doing to avoid mistakes
but on this situation I just want to
save on these users profile this value
we use these more often later then we
are just operating what we just create a
map after that we just return we just
return the save link that the body sorry
to the user return 200 that's okay so
the call from the client receives this
dynamic link and he just show in the
share dialog that we've just seen and
it's something like this this is what we
had before the result of that call now
is this one so maybe they means happy
now and not even there nice so give me
the last work okay so now that we shared
an item a link with someone let's see
how we just implement that small box
which is custom and boarding how we get
the value from the dynamic link the user
ID from the dynamic link when you
implement an Android app everyone knows
that you have a life cycle and the first
method that is called in your life cycle
is the uncle' in your activity so that
code is executed in the uncreate of your
activity so it's Java code that is
executed client side we could an API
from a pin write that let us register a
callback that callback that callback
will be executed every time that the app
is triggered for our dynamics from a
dynamic link the first thing we do in
that cutback the first if is to make
sure that we actually have data in the
dynamic link we have something we like
very spirometer in it and then we get
the instance that was used to trigger
the app with the results that get
invitation in turn from that we get the
user ID the sender ID so that's the
parameter we put in our dynamic range
and that's under ID we give it to a
function that I am NOT going to go in
details which is show high from a sender
the only thing that does that function
is first it takes the user ID it reads
the public field from that user ID from
the real-time database unsigned the
nickname of the user
and then it display your pop-up that
just say hey you get invited by Lewis
please looking to get a reward that's
the only thing is that let's see how it
looks like so I had the link that we
sent me earlier today if I click on it
that should open my app and that time it
works I have a process saying welcome to
bed the rate which is the name of the
app fifth sister which is a nickname of
with left your gift when I click on okay
I get redirected to the game and well
here the idea is now to implement that
if I click on login I get a reward but
right now we haven't implemented
anything yet so let's see how we are
going to give the reward to the players
can we switch back to the slide please
okay so now we are going to implement
that huge box that contains logging to
Google to Google logging updating the
real-time that today saying that the
user has converted he has logged in
crediting the reward to both the sender
of the invite and the recipient of the
invite and finally sending a
notification to both players next is
risk to tell us more about notifications
and cloud messaging
nice nice so after the user accepts our
invites and finding how does the sender
know that Oh a friend accept that invite
oh how do I know that I received
anything we are going to send a message
straight from our server we are going to
use called messaging customer code
messages part also firebase and you can
send messages straight from your server
to specific devices to topics to
audience to a bunch of number of people
if you want so the idea is that you can
exact send a notification hey there is
something for you here come back to the
game play a little bit more you got some
more coins this is an API that we can
call from the command line or there is
also a console on firebase that you can
just type it if you just want to test or
if your marketing people want to try a
little bit and usually what people have
to do in the past you had to have your
own server your own back-end just to
call a command line we have just to do
that of course to do some integration
but you had to have a server for them
today we are going to implement that
using called functions and it is going
to be automated you don't need to worry
about most of the work let's start by
understanding the database and what we
need from it to do it work this is
almost the same database snapshots we
saw before but I have some fields here
that are important for me now first of
them is anonymous IG and these value is
written here when I start as an animal's
user as they mean told us before
whenever I signing I keep this anonymous
IG I caught this from my previous node I
had here in the database I crop it here
and it's important because I'm going to
use the fact that I'm copying this value
here to trigger functions for me the
other value that's important is you
invited by so user one was invited by
user zero to the game and so with this I
can keep track of Oh invited poo and
this is of course at one time only I'm
can only be invited by one person and
later can't be invited by someone else
well the first one gets the reward sorry
let's take back let's look back at the
code and understand how it should
implement that we are going to create
another called functional we can use the
same file just use before I just put it
below and but this is a little bit
different we are going to call this
validate use invite and it's not a web
hook anymore
it's a database event so whenever there
is an update on that path users user ig5
private fields on animals ID I'm going
to react to that whenever there is any
write or delete there I'm going to react
to that
and do something on my server what I'm
going to do here is I'm going to get the
values from from the parameters get the
private fields for that user remember I
just saw just show you guys private
fields anonymous idea had invited by
I'll get private fields from the
database it's just a query language
waste your time with that and then I'm
going to activate an invite activated
invites it's the system understanding
hey this person was invited by this
other one and both of them have to
receive a gift that's what I'm going to
do here let's take a look on activating
so I have private foods and I have
recipient hygiene after this I have I
know from private fields I know who is
they invited by and I know he is the
sender and I just use the admin database
reference that I explained to you guys
previously I'll write to these users
send energy
you mean invited I'll write the map that
recipient IG and true I know it's a lot
of things but I'll show you the snapshot
of the database will be much easier to
understand sender ID sorry skip that
let's take a look on the database and
see how it is here remember user one
other animals ID is down there invited
by whenever they invites that user won't
send I start to get used by people these
whenever user clicks on invites opens
the app in signs in who happen is I will
start to write on a demean invited I
will start to write values here so what
we can understand here is that user two
three and four they were invited by user
one they open the app and they signed in
that's what's written here and I use
this information to continue the flow
here with this in mind now we have to
give a reward there's no reward yet
nobody is happier you're just doing back
in to keep track of things
oh but I explained called message read
sorry let's take a look on code to give
your words first it's a database
function again and now that's where
things is going to happen right so bear
with me it's long but the idea is that
I'm doing the same thing for to users so
technically if there's a lot of
duplicate code here we are calling this
give rewards and it's also a database
function I'll react to whenever a user
of data right on users user IG admin
invited recipient ID whenever right
there I'm going to get user data for the
sender and the recipient so the to
person that involved in this transaction
I'll get their data so I can start to
send a notification
later increase the reward I won't
explain geckos I did it because it's
just a query I have the user IG is just
a query so let's take a look on st.
notification to sender and then increase
reward the st. notification to recipient
and it result is exactly the same so
don't worry about it now
to send a notification to sender I have
the sender data and the recipient data
why do I need both of them from the
sender I need his FCM token that's on
his database so I need that to address
him that's a way to say notification you
need this token and from the recipient I
need his name because whenever we send a
notification I want to send an
application that has some kind of
meaning that whenever the user looks at
sees that on the notification tray he
has some information already I don't
want to say hey there's something for
you
hey there click here that it has no
meaning
I want to explain to him they may use it
one of your invites both of you got a
gift oh right I got something I'll click
here I'll come back to the game that
that's that that's where we engage our
users that's the key after that I'm
going by calling my utility function
here send notification I just create a
payload and then I call what the
important part from here is admin
messaging dot sent to device that's from
the framework and that's how you send a
notification to our users
so it's one line it's quite simple right
so you can do this from your function
and you can do all kinds of integrations
here let's take a look on increase
reward I won't take too much time here
again admin database I'll count I'll get
the current count of rewards you have
and just add one and let's see the
database how it is now well here sorry
sorry here my rewrite count is three
that's what we should expect whenever I
add to the invited note every time I add
someone there it will increase the
reward there is a couple of advantage of
doing that one is if I want to test I
can just create a user five
put through there and the function will
execute even if I they could I I put
this value direct on the database I can
bypass the app and everything if I want
to give your watch as v user I can come
here and change and the function will
work so it reacts from even from the app
or from if you write the database
yourself let's take a look on how it is
under how it works so here Damian was
anonymous when he clicks in and then he
says oh I'm damn llaman being he clicks
on that what will happen is that when he
finds in how we receive a notification
saying hey someone used your invite
and he also received a notification you
also receive an invite or not invite a
gift and that's how you give the gift
you see a notification it's shown there
and we can to improve what we have now
then well so until until now what we did
is just put in the in the real-time
database some things that say we were
counting l3 but nothing else right
science I'd like you still need to write
the code that is going to look in the DB
read the amount of reward count you have
and decide if the user can play or
cannot play as you as you will know it's
fairly possible that people will try to
compare with your code dioxide and will
try to remove the limitation that you
implemented by outside so as much as
possible you should try to enforce that
imitation server-side when you can I
know like some games are playable only
online so they have the logic of the
game running on the under server that's
one solution but there is a whole range
of gray area where you can either have
all the logic client-side on hope no one
will compare with your code or be in the
middle where you have part of the logic
server-side on part of the logic
client-side
but I decided here is to have part of
the logic client-side and server-side
and I did that by using security rules
in in firebase so we just so Cloud
functions which is a way for you to
execute not GS JavaScript function in
the analogous environment server-side
that get contained a lot of logic as we
so like we read elements from from parts
of the DB with some
vacations etc but we also have something
called security wolves in firebase that
lets us unforce then when the client
come and try to write something in the
DB he is doing something that he
legitimately has been right to do and
when sign on whether three on one side
will have cloud functions which is like
very very flexible on the other side we
have security rules which are less
flexible but are free to use so what I
did is in the real time database if you
remember we had the note for the number
of time you played in the last seven
hours and when started that seven hours
period
I just implemented a set of security
rules that say that if someone comes on
try to write that he played minus one
times that won't work if we try to write
that he played three time instead of on
he already had played like four time
before for example that won't work if he
tries to change the seven hours period
while seven hours haven't been in the
last time he started the seven hours
period that also won't work which means
that the server will validate that what
you write in the DB is correct and if
the write succeed then I will let play
on site the user play is the right sale
I want that the user play the cool part
is if I decide later on that I want to
give I don't know five three runs or
days I can just change my security rules
and that will automatically check the
client site will automatically get five
free play for seven hours there is one
little catch that I mean we can also use
firebase have a Java SDK but it also
have a C++ SDK and implementing games is
usually done in C++ by most of the
people out there and you can use both
the Java SDK on the C++ SDK together you
can implement part of the authentication
mechanism in Java if you want you can
implement part of the logic for
limitation in using firebase successful
CZK and you might know that C++ and to
be harder to some para wave like
decompiling see process is nothing and
recompiling is even less so that will
also help you enforce imitation okay so
that Swiss now that's going to tell us
where to go next if you want so and more
they are days that that's what we want
to explain to you guys I hope you
enjoyed a lot and if you want to learn
more about firebase there's a lot of
very nice talks today here there's the
next one but it's talking about
integrating machine learning and occult
functions you've just learned all
everything about what functions can
improve from there there's also how to
better attack your database how to test
better your functions and there's an
amazing session at 3:30 that will show
you lots of recipes that you can easily
implement in your app just by using the
firebase and then you can improve your
app easily with that just one or detail
all the code we've seen here the Java
part the server part the rules the
command-line everything will be on
github by next week maybe the other so
just fingers if you need that we post it
so you can come back to our office and
what I want to take it from this talk
all you need to take from the stock is
will never get your office on Monday and
then your boss will come to you and say
okay you were there enjoying the event
everyone was happy
what what did you learn what can you add
to our app today you can just take say I
can reward our users for engagement
oh there you have your promotion so you
are welcome and if just that just now
like we still have one gift to give you
well actually to make it if you yeah if
you click on if you get that link you
can download the game from a Vitesse and
that will also reward me because that's
my link thank you very much thank you
very much
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>