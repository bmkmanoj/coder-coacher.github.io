<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Getting Started with Firebase Cloud Messaging on Android - Firecasts | Coder Coacher - Coaching Coders</title><meta content="Getting Started with Firebase Cloud Messaging on Android - Firecasts - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Firebase/">Firebase</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Getting Started with Firebase Cloud Messaging on Android - Firecasts</b></h2><h5 class="post__date">2017-01-03</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/KPpK65BX80o" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">what's up everybody this is Lawrence
from the firebase team and welcome to
another episode of fire casts on today's
episode I'm going to show you how you
can send and receive messages using
firebase cloud messaging on Android
you'll be able to be up and running with
this feature in just a few minutes so
let's get started the first thing you'll
need to do is to make sure that you have
your app ready for firebase you're
probably familiar already with how to
integrate firebase into your app so I'm
just going to go straight to getting the
ID token that you'll need for firebase
messaging this token is used to identify
your device by the cloud messaging
system the code in my main activity
simply calls firebase instance ID get
instance that get token to get the token
I'll pass this token to my app server
and the app server will then tell fcm to
send messages to the device identified
by this token call FCM in this case is
in async class that is used to post the
contents to the app server you'll see
that in the next step now when building
applications that use firebase Cloud
messaging you'll need your own app
server to handle this messaging so I'm
going to build a simple one in PHP next
here you can see the app server that I
created it's just running on a basic
website and as you can see I can send a
message to all devices or each one
individually but how does this work in
the previous step you saw how the
Android app posted the registration ID
to the app server in this case I wrote a
simple app server that just gets the
firebase registration IDs and stores
them in a database this database is then
used to generate the page when the user
sends to a particular device it uses its
ID and if you want to send to all you
just loop through all of them here's the
code Google API is offers the send
function and you simply call this
passing it your authorization key you
pass it also the list of ID's that you
want to send the message to which is the
reg data variable and the message itself
which is the data variable you might
want to know how to get that
authorization key well that's pretty
simple it's available in the firebase
console simply go to your project and in
your app manage your settings there's a
cloud messaging tab and the keys in it
back in the code as I'm using PHP I'm
just going to exact this in curl this
function accepts the Reg ID of the
device to send the message to and
assigns that to the registration IDs
variable that FCM Google api's com will
understand this can be an array if
you're sending to more than one the data
field is just the message to send and
it's as simple as that now that you have
a server let's look at building a simple
client to receive messages and of course
you can send messages from this client
too earlier we saw that we created an
app that registered with firebase Cloud
messaging and you can see that app here
when I register I see the device listed
on the app servers page by its ID so if
I now type a message and send it let's
see what happens
I get the notification in my app so how
does this work well first in my
androidmanifest.xml I'll define a
service that receives an intent filter
from the fire based messaging event this
class extends the fire based messaging
service you can see this in the header
and in its on message received I can
capture the remote message in this case
I turn it into a notification in the
standard Android way this can take an
intent so that I can open a new activity
when I click on the notification and you
can see that here so when I touch on the
notification this activity will be
launched let's see it in action and here
you can see I've received the
notification when I touch on it the
activity launches with the message from
the notification metadata and if I go
back to the website and find this
registered device you can see the
message I sent if I send another one
containing the text second notification
you'll see that the device receives it
and if I touch on it the activity will
launch with that text and that's it for
this forecast please leave your
questions in the comments below or reach
out to me on Twitter our G+ will be
dropping new forecasts every week so
don't forget to hit that subscribe
button I'm Laurence Moroney and thanks
for watching
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>