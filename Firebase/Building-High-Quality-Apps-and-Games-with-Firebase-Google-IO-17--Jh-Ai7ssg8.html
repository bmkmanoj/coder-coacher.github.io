<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Building High Quality Apps and Games with Firebase (Google I/O '17) | Coder Coacher - Coaching Coders</title><meta content="Building High Quality Apps and Games with Firebase (Google I/O '17) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Firebase/">Firebase</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Building High Quality Apps and Games with Firebase (Google I/O '17)</b></h2><h5 class="post__date">2017-05-17</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/-Jh-Ai7ssg8" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so today we're going to talk to you
about building high quality apps and
games with firebase so today building
high quality apps has never been more
challenging when you're building for so
many different countries each of their
own set of devices languages and
carriers how do you know when your app
is ready to launch and after you launch
how do you monitor your application to
make sure it's stable and performing in
production well we'll get to that in
just a minute but first why is this even
important it's important because the
data shows that the quality of your
application has a direct impact on your
business
slow and crashy apps mean babb user
reviews and bad reviews mean lower trust
in your application and ultimately fewer
users and your lower revenue in fact a
recent analysis of Google Play Store
reviews shows that 50% of the time when
a user 50% of one-star reviews mentions
app stability and bugs as a problem and
on the flip side 60% of five-star
reviews mentioned speed design usability
so the data here speaks for yourself
speaks for itself if you have a
low-quality app your users will notice
and it will impact your business so how
do we build high quality apps well it
looks pretty straightforward on paper
you build the core functionality of your
application you test it either manually
or ideally in an automated fashion you
want to distribute it in the App Store
and then you actively monitor it to make
sure there's no problems and you take
those learnings and you repeat but in
reality we know that this is very
difficult to do without the right tools
and so at firebase we have some great
tools to make your life easier we focus
specifically on the test and monitor
phases of your lifecycle and before you
launch we have something called firebase
test lab which helps you test your app
against a variety of devices to make
sure it's in good shape before you
launch then we also have tools that help
you monitor your application after you
launch in production
so we have crashed reporting which helps
you find errors and crashes in
production and alerts you of new and
regress clusters it also helps you find
the root cause of the problem by giving
you stack traces and helping you
identify what actually caused the
problem and it crashes are a big problem
but often the problems that are toughest
to diagnose are performance issues so
what's causing your app to be slow and
why so we're really excited to tell you
about our new product firebase
performance monitoring in just a minute
so let's talk about firebase test lab so
firebase test lab is a physical and
virtual device lab in the cloud we know
most developers only have access to a
few devices to test their app on so our
goal is to give you easy access to a
wide variety of devices that represent
your user base and that's why we're
constantly adding new and popular
devices from around the world when you
run a test you can choose a combination
of devices OS versions and languages to
make sure that your app is going to work
well for your user base and we're also
aiming to have the latest developer
previews in our lab so you can make sure
that you're supporting latest Android
features with confidence now every
developer has a different workflow so we
have different ways to access the test
lab you can use the web console the
command-line interface and even Android
studio and we also support popular
testing frameworks like Robo diem
espresso and UI Automator now what if
you don't know much about testing or you
having a chance to invest in test
automation that's exactly why we built
Robo so robos an intelligent app crawler
that will find crashes and layout issues
for you and you don't have to write a
single line of code all you have to do
is upload your apk choose what devices
you want to run on and it will crawl
your application and while it does that
it will record a video take screenshot
capture device logs and even stack
traces for any crashes that might
encounter here you can see how robos
crawling the IO 17 application Robo also
powers the pre-launch report on the Play
Developer console so a lot of you
probably have used this in the past this
is available at no cost to you it's a
limited set of devices that play will
automatically run your app on if you
participate in the alpha beta Channel
it's a great way to try the product at
no cost now we know many of you who do
invest in testing like to run on every
push and commit so we have integrations
with some really popular CI tools like
Jenkins and Travis in fact we have
really great partners like Amex and
Walmart that are using tests lab in this
way in fact Walmart recently opened
sourced to amazing tools for the
community the first one is flank and
flank lets you shard and throttle a
large number of tests against our test
lab this is one of our most requested
features so we're really excited that
Walmart built it before we even did and
made it available to the community and
the second one is coming soon
it's called Shifu and it lets you mock
it's a mocking tool that lets you mock
your database or your data and network
requests so you can build a hermetic
test suite so if you have a CI
environment and you test on every build
and you're struggling with device
compatibility test in firebase test lab
has a great had some great options for
you and that's firebase test lab so last
year at i/o we launched firebase crash
reporting in beta firebase crash
reporting monitors your application and
then alert to you when you have crashes
and other non-fatal issues now the key
here is we wanted to do more than just
identify the crash we wanted to help you
reproduce issues so we did let in the
fall of last year was integrate with
Google Analytics for firebase to show
you what your user is doing in your app
before the crash and this lets you
reproduce that in your own environment
very easily because we think that's kind
of the most
lunging part of fixing crashes but this
year we have even bigger needs so
firebase has joined forces with fabric
as you've heard probably a couple times
today we're really excited about where
we're we'll be working hard right now to
build bring the best of both platforms
together and we're excited about
crashlytics because it's the best crash
reporting service in the market it's
used by over 500 thousand developers and
it gives really great real-time insights
and what we're excited about is we're
bringing this to the firebase community
so that means in the future you can
expect to get the entire crashlytics
experience right from the firebase
console so if you're thinking about
integrating a new crash reporting tool
and you don't have one yet we recommend
crashlytics but current current firebase
customers don't have to worry we'll
upgrade you seamlessly to the new
experience when it's ready and we
continue to support that service and
lastly I wanted to talk about firebase
performance monitoring so firebase
performance monitoring lets you see
what's happening with your application
as users are using it in production we
have two goals in mind when we built
this product one we wanted to provide a
ton of value out of the box without
having to do anything and the second
thing is we wanted to make our insights
actionable so everything we show you
like give you a way to fix it or at
least debug it and diagnose it a little
bit so out of the box just by installing
the SDK you get visibility in your app
startup time and all of your network
requests and then and then you can also
instrument your own you can do custom
instrumentation to diagnose specific
parts of your application and time those
now whether you're using our looking at
our out of out-of-the-box insights or
custom insights we give you the ability
to slice and dice the data in a number
of different ways so you can look at you
know how does this particular how does
my app startup time look by carrier or
by OS version or by at version so that
really lets you kind of hone in on the
problem it's a really powerful tool and
we're going to be deep diving into it
tomorrow at 4:30 right here so we hope
you can join us for that and now I'm
going to hand it off to Justin all right
Thank You Nolan
so I'm going to give a deeper dive into
some of the newer features on Tesla so
for some time now we at Google have been
stressing the importance of writing
automated tests so how many of you raise
your hands how many of you write
automated tests for every new feature in
your application all right
that's why we've given up nagging you
doesn't work so we are putting a lot
more focus now into automating the crawl
of your applications with the Robo we've
already made improvements in this area
in terms of the performance
how many cry over how fast the crawler
is as well as the coverage how many
screens we can find how many crashes we
can find but you can expect to see even
more significant improvements in the
coming weeks and months but there are
always the deepest darkest corners of
your application that even our crawler
cannot find so with espresso test
recorder you can which is part of
Android studio you can record a test by
interacting with a device a local device
with your app and upload that test to
test lab and thereby test those hard to
reach parts of your application so Nolan
talked about the new firebase
performance product which gives you
insight into how your application
behaves in the wild we on the test lab
scene believe it's equally important to
understand how your application performs
before it even gets into your users
hands so with every test that you run in
test lab that runs on a physical device
we measure various performance metrics
such as CPU and memory and network
and we provide you those as part of your
regular tool test results synced with
the video you'll see this in a demo
later on alright who wanted more devices
oh come on I'm gonna ask again who
wanted more devices yes that's that are
all right yes well we now have more
devices we've added more of the newer
devices if you heard Frances talk yes we
have pixels yes we have s7 s7 edges we
also have some of the older devices more
the old advices we also have a preview
version of Android Oh running on the
pixels so now you can test out and
integrate with some of those new
features that Dave Burke talk talked
about at the keynote this morning
so we've known for a while that the
quality of the network connection can
really affect the usability and the
reliability of your application and so
with G cloud in the release that follows
i/o one week after i/o with G cloud
which is our command line tool you can
now test your applications under a
variety of different Network conditions
everything from LTE to edge to GPRS and
so on you can even test it under
degraded versions of those same network
profiles but what I am most excited to
talk about today is our new support for
testing games so we've talked with many
developers who are creating games for
Android and from those discussions
the key takeaway for me was that testing
games is in crayon Android is incredibly
painful and because I had gum surgery a
few weeks ago and that was incredibly
painful I immediately thought of this
and if there are any dental folks in the
audience if you don't know what a dental
probe is then identify open orders you
can look away now but this unfortunately
is the
anyway so the this I can think we
already that this is a pain of testing
games on Android it's not quite the same
pain as we see here but given your
feedback given the the discussions we
had it is almost of intense so this
person recognizes that there are
thousands of different device types out
there and it's impossible to test on all
those different devices this person had
to build five different versions of
their game for Android and then test
each one of those separately this person
had a game which bricked a device that
they did not even have in house a very
important device that they have that the
only thing they could do with with
blacklist and lastly the thing that we
heard most often was that it is hard
just treading water keeping up with all
the different operating systems versions
and releases so what are we doing about
this and the dense folks can now look
back on the screen again so we're going
to do a number of things but I'm here
really today to talk about just one of
those things today we are introducing a
new framework for testing games on
Android so with this new framework we
allow developers to create game loops
and trigger those game loops so what is
a game loop
well I'm sure most of you have been to
an arcade and while the games are not
being played they are running through a
loop demonstrating their behavior and
that is essentially a game loop so a
game loop is a way of simulating a user
interacting with your game it can also
be used as a way of stress testing a
game such as in a multiplayer situation
or focusing on a specific game component
now you can trigger game loops with this
framework locally
using an application that runs on the
device that we've written that
application is freely available to you
you'll find it by going to our website
our documentation for code for test lab
and you search for game loop and you'll
find a reference to it that is freely
available to you you can download that
run it on a local device and trigger the
game loop but what is more important is
that we've added support for game loops
in test lab so now you can with set up
simultaneously test your game triggering
game loops across any of the devices
that we have in our device fleece and
expose problem problems such as crashes
or memory leaks or probably more
importantly graphics performance issues
so to help us understand how this works
I am extremely I mean this extremely
excited to welcome one of our partners
up on stage with us they'll be up in a
second deep silverfish lab deep
silverfish labs who as you probably know
is a world leading developer of high
fidelity 3d games for smartphones and
tablets their latest game galaxy on fire
three Manticore released this morning
but it is frankly a benchmark of sci-fi
shooting game they have been testing a
pre-release version of their game on
test lab for some time now and as I say
it released this morning but I've been
testing this game for a while and I can
honestly say that the last game that I
was this addicted to was about 25 years
ago and I can see some raised eyebrows
the incredulous in the audience yeah
they did have computer games 25 years
ago so
let me welcome up andreas and your
harness on stage andreas is the director
of visit the director of business
development and sales take over this lab
welcome andreas and Johannes is the head
of core technologies a lead developer at
deep silverfish lat welcome guys all
right so we're going to start with you
under s I think what do you see as the
main advantage of the new support for
testing games in Tesla yeah thanks
Justin um well as you mentioned before
the challenge that we basically face is
that we want to have our game running F
on as many devices as possible so what
we face I mean you're very very
successful with with Android so you have
multiple OMS deploying it on the devices
those multiple OMS have multiple devices
so I think today if you look into Google
Play you have like over 13 thousand
different devices with OS s so it's a
big challenge we look into that and say
well what's the market share and so on
so today or up until the last few months
basically before using firebase test
labs we went out and tried to purchase
as many devices out there as possible
and if you buy one of the latest phones
out there probably costs like $800 so
imagine if we want to cover like a
hundred devices how pricey that
basically is so so that that's one thing
where the firebase test labs helps us
because as you just mentioned you
provide us with test devices that we can
run our game on that's one thing and by
the way we have this very very little
vault in our office where we stack a
hundred devices but 100 devices are
basically not enough we are or the goals
that we have for for our game is that we
want to cover like about 500 different
devices
well why to have a meaningful user base
so that's that's one challenge the other
one is
that one device of one OEM might not
have the same hardware inside in the US
as in Europe or in Asia so what we
sometimes face in the past was that we
got an user reply saying hey it doesn't
run on a XYZ device and we tested it in
Europe and said well it runs with us but
then we have to find out that they use
different GPU or CPU right and how
should we get as a developer devices
from Asia
so again massively helped there so so
that's something that basically helps us
to overcome that that challenge and the
research i'm at the time that we put
into research before finding all that
out that hardware stuff was immense I
think for for Galaxy on Fire 3 we had a
product manager for about two months
just searching databases of what's the
device market share in different
countries to try to get those devices
also fiber test labs really helps us
there because we don't have to do that
work anymore we're saving money we're
quicker so that's great and then how
does it affect your overall launch
process as as you imagine
we're quicker so basically things we're
quicker in getting the game out there
it's more effective in terms of QA and
testing and that sense and also we're
more confident I mean as I mentioned and
you also it could be that we have to
blacklist
a device earlier on that was a product
that is like have a market share of like
5% an Asian now we're confident that we
say no what we don't want to blacklist
it because we've tested I know with
firebase test labs and we're confident
so so we are quicker for for QA so
development time is quicker and I guess
you all know that less development time
means less budget so so you can save
budget on that one
secondly as have more confidence we can
we can cover more devices more devices
means we make more gamers happy out
there with a product they're there
they're playing it they're writing great
reviews on it
because they don't get bugs they don't
get crashes and and and we're we're more
happy that and then because we're
quicker we're more confident we're
covering more devices by the end of the
day and I'm miss Devon sales we're
making more money and that's that's what
we want to do which is the point yes yes
all right Thank You Andrea is really
appreciated all right Johannes you've
been patiently waiting I think for her
to give us a demo so please yes finally
thank you just yeah so for that I will
need two MacBook I'm going to show you
how we edit support for the game loop to
our game Galaxy on Fire three Manticore
and we've been using the test tab for
some time now and I'm very happy that it
has helped us improve our game and also
with the launch so the very first thing
you need to do is you need to declare
your support for the game loop and you
do this in your manifest and for that I
will just jump right into Android studio
so the first thing we do here is we add
an intent filter to active to our
activity and the exes name is come
Google intent but actions are test loop
and that's pretty much all ready all you
have to do you can also add some more
metadata here like how many different
scenarios you support but we currently
only support one and in that case that's
not really required the next step then
is you need to check for this intent
when your app starts and we do this in
our activity in the oncreate function
here we get the intent we get the action
and compare the actions name to the
string we also saw earlier in the
manifest and then the only thing we do
here is called this native function
force performance test which is which at
this point basically only said to flag a
native code which we then later check
once our native code spins up in order
to determine if the game should run in
this game loop mode or not so all the
actually game loop implementation
happens in native code where we load
different locations and missions after
each other in order to see if they work
at all and also in order to determine
the performance
so once Ted stand in native code we hand
back control to the activity by calling
this native notified performance at end
function and according to the game
respect or
need to do in order to finish or to show
that we are done it's called the
finished function on the activity and
that's pretty much all you need to do
for the implementation the next what you
want to do if you will actually want to
run the game loop and as Justin said
earlier there is a little app on that
you can install on your device so I will
do them on the device now you can we
switch to the right yes so this app is
called test loop app which I have
installed here so we just tap that and
when it opens it gives you a list of all
the apps on this phone that support the
the intent we saw earlier so currently
this is only our game at the time so I
will tap that then it gives you a list
of scenarios and we currently have forms
so there's not much to choose from but
quite important up here is that you can
set the timeout which defaults to three
minutes minutes which might be a bit
short for the game loop I guess so and
then when that's done you can tap on the
Run button and this will launch our game
in game loop mode and starts loading the
first location and once the loading is
done we will see some action now so this
works and then the next step is or the
next way to run the game loop is you can
also do this in the firebase test step
so we switch back to the macbook for
this so we go head over to the browser
and firebase and select the tests tab on
the left so here you can see I did some
tests before which pass and some which
failed but we want to run a new test so
we click on the run a test button here
and the Robo tests and instrumentation
tests those two are old but what we want
is the the game loop here so we click
that and the first thing we need to do
here is select an apk so I will just
choose a very small one here because now
does the upload and then you can also
choose the scenario you want to run here
but we will just go to the next page
where you can select the devices and API
levels you want to test on
so once you've selected that you can
click the start button down here in
order to launch the game in game loop
mode on the selected devices and the
firebase test lab of course the running
of the game will take some time so we
for the results I will just choose one I
did before so for example this one so it
gives you a list of all the devices that
the test ran on in this case this is our
working boot of the game so they're not
that many devices but we can look at the
pixel for example on the first tab it
gives you a some additional performance
data that we are self generated during
the run but here you can also look at
the log which is mainly advantages
mainly beneficial if there were any
problems or crashes during the run so
you can figure out what went wrong you
can also look at the video of the run
but I will just skip over to the
performance tab because we also have the
video here and some additional
performance data like the CPU usage over
time the graphics performance measured
in fps here the memory consumption which
doesn't really go up so I don't think we
have a memory in here and the network
usage as well and the cool thing here is
that you can actually click on the graph
so if you wanted to figure out why we
have these frame drops here we can click
on it and we see that the video jumps to
that point in time and we can play the
video from there and we see it's the
loading screen so it's not that bad that
we have frame drops here and once the
loading screen ends we see that the
performance goes back up to this so 30
FPS we are aiming for so this is running
the game loop wire the the firebase
console but you can also use to run the
game loop by the g-cloud command line
tool and for that I head over to the
terminal so this has the advantage that
you can also use OBS or apk expansion
files which for games you might often
have or and you can also easily
integrate this into your continuous
integration or the server setup so there
are different commands like for example
you can get a list of the devices and
the test lab
basically the same as we also saw in the
console earlier but you can also start
the test for example with this command
you specify the type at the game loop
you can also specify the timeout here to
provide the name of the apk the name of
the OBB files note the naming year that
the Obi's already have to have the
correct name so they have to include the
version code that is part of the apk and
you specify the devices and API levels
and the orientation you want to run on
and once you run this command it will
start uploading the apk and it will be B
files to the test lab and once the
upload is done it will start running the
game loop on the selected devices it
will also give you a link to the photo
results in the Firebird console so you
can look at the results just like we
already added and it's pretty much all
there is to it you have to add the
interpreter to your manifest check for
the intent on startup implement some
logic for the game group in your native
code and then run using one of the three
message I just showed you and we'll set
back to the sides Thank You Hannes that
was awesome that's how you that's how
easy the game loop feature of test lab
and so if you're interested in testing
your games please go to firebase more
excitement now and come on look at her
she just ran a game loop come on yes
come on yes I clearly Justin's very
excited yes use game loops run them
locally run them on test lab to make
sure they work on your users devices
we're really excited to show this to you
in person
to recap quickly I wanted to just recap
what app quality tools we have in
firebase and how they work so before you
put your app in the hands of your users
make sure you use them up make sure you
test your app on test lab to make sure
it works on all the right devices after
you launch you'll never catch all of the
issues before you launch so after you
launch make sure you monitor your
application and it's stability and
performance with crash reporting and
then finally use performance monitoring
to see where your app is slow
why and definitely tune in tomorrow for
right here on this stage at 4:30 to get
a deep dive in the performance
monitoring it's a really exciting
product and can't wait to show it to you
and then finally come see us at the bam
XM box
yo.hannes anand Reyes will be there you
can talk to them about how they
implemented the game loop we also have
another game mecha hamster that's an
internal game and we're happy to show
you hands-on how we integrated game
loops into these experiences and come
find us we have the engineering team
that will also be there that's excited
to talk to you and yeah thanks for
coming everyone have a great i/o thanks
very much</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>