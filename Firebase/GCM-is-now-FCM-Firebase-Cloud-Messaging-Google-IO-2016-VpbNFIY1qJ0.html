<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>GCM is now FCM (Firebase Cloud Messaging) - Google I/O 2016 | Coder Coacher - Coaching Coders</title><meta content="GCM is now FCM (Firebase Cloud Messaging) - Google I/O 2016 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Firebase/">Firebase</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>GCM is now FCM (Firebase Cloud Messaging) - Google I/O 2016</b></h2><h5 class="post__date">2016-05-20</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/VpbNFIY1qJ0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hi everyone I hope you're having a great
first day at i/o my name is 2b and I
work on cloud messaging when we launched
Google Cloud messaging in 2012 our goal
was it to make to make it the best
mobile messaging platform and we wanted
to give you the tools to make to reach
your users notify them of important
events and help keep your data in your
applications fresh today GCM is used in
more than 1 million applications
reaching more than 2 billion devices and
we receive around 2 million queries
every second
that's over 170 billion messages a day
and this growth has been just amazing
we are always improving our
infrastructure so that we can scale more
as more developers take our platform for
their messaging needs we believe the two
most important aspects of any messaging
platform are reliability and low latency
GCM is extremely reliable we deliver
every message that you intend to send to
your users honouring the constraints
that you provide and cesium is fast for
an online device our mean latency is
around 60 milliseconds and our 95th
percentile is around 160 milliseconds
there is another talk on GCM performance
factors and it goes into insights on how
we measure and improve on our
performance and reliability I highly
recommend going to that one if you are
interested in this area chisim is an
integral part for a lot of applications
today and messaging is a feature that
almost every developer needs and uses
for engaging with their users studies
have shown that users that have push
notifications enabled have almost three
times higher retention and 88% more app
launches and that means more user
engagement for your applications
now earlier in the keynote we announced
a new mobile development platform
firebase firebase is a suite of
integrated products which are designed
to help you develop your application
grow your user base and earn more money
and GCM shares these same goals we
believe we can offer a lot more to
developers when integrated with other
firebase products so I'm happy to
announce that as we are launching new
features to GCM this year we are
renaming it to firebase cloud messaging
so what this means that cloud messaging
is one of the products in the firebase
family having seamless integration with
other firebase products like firebase
analytics
making it easier for you to develop grow
and earn from your applications and this
uses the same underlying messaging
infrastructure like that we have today
so you can be assured you will see the
same level of reliability and
performance that you're used to so
what's new with firebase cloud messaging
or fcm well we really simplified our
SDKs it's really simple API is to start
using FCM you can reach multiple
platforms using FCM and based on your
feedback we've added a lot of new
features so let's get started our new
SDKs are designed to make the
integration with FCM much much simpler
and take away a lot of code from you let
me explain fire based messaging SDKs for
Android and iOS take away a lot of
boilerplate code away from you code that
you had to deal with yourself before
like registration logic subscribing to
topics handling any errors you get with
our servers while doing these actions
all that is taken care of automatically
just another example this is the these
are all the permissions that you had to
worry about before with GCM not anymore
our new FCM libraries use manifest
merging so you don't have to worry about
permissions it automatically adds any
permissions needed and just one less
step for you to worry about
we've also simplified the registration
flow as you know a registration token is
the address that FCM uses to deliver the
message to a device now this process is
asynchronous our libraries automatically
get a token on your behalf so when you
call I edit a token we give you an
already registered token all you have to
do send this to your servers and start
sending messages all the improvements
that we are going to announce today
apply to both our Android and iOS SDKs
our goal is to make FCM really
cross-platform now in addition to having
SDKs for iOS and Android
we are also launching a brand new SDK
for our C++ users now you can have one
implementation to reach your users on
both these platforms and I'm sure our
game developers are going to love this
now we will get into more details on how
to use these new SDKs in just a bit as
you saw FCM is cross-platform last year
at i/o we added support for iOS and
chrome apps in addition to Android and
we saw a great adoption on these
platforms and it was a very strong
signal to us that developers can really
use one solution to reach users on
different platforms so we are making it
even easier this year by adding a
branding C++ SDK and with their push
support on FCM
with FCM you can now implement the
standard IETF where push API is and
start retargeting your browsers for
example on Chrome you can send a message
to your Chrome page in Windows Mac or
Linux and you can also target your
chrome on Android let's talk about some
features we've added last year we
launched topic messaging and by the way
this is one of my favorite features
topic messaging allows you to send a
single message to a large number of
devices it's a great way to notify your
users that are interested in common
topics like a musician or an artist or a
game or a sport event all you have to do
is publish a message to FCM an FCM
delivers it to all the devices subscribe
to these top two this topic we also had
a limit of 1 million subscribers when we
launched this and a lot of you asked for
more because you have more users so we
are removing any limits on topic
messaging now you can have as many
subscribers on a single topic or across
different topics in your application
quick reminder this is how you send a
message to a topic all you have to do is
set the topic name in the two parameter
but what if you want to send a message
to a combination of topics for example
let us say you have a weather
application and you want to send weather
updates to your users now some of your
users can be subscribed to topic for San
Francisco weather and some can we
subscribe to topic for Oakland
when there is a weather update in this
area you don't want to publish the same
message on both these topics as there
might be an overlap and some users will
get duplicate messages now you can use
our brand new API to specify a condition
an FCM will make sure we only deliver
this message the users that qualify this
condition so in this example the message
will be published to users that either
have the San Francisco weather topic or
the Oakland weather topic so it's a
union of users you can also hit a
intersection of users by using the and
operator now we know you have all these
registration tokens on your servers
wouldn't it be great if you can just
categorize them into topics based on
your users interests I mean after all
you know your users interests yes you
can
here is the API with which you can
subscribe a registration token to a
particular topic for example the topic
name here is movies all you have to do
is give us the registration token and
the topic name in a URL and fcm will
subscribe this to this topic you can
also send us a bunch of registration
tokens NFC will subscribe them when you
send them to this batch add URL you
don't even have to update your
application anymore you can just start
using topic messaging from server side
similar to the batch ad with batch
remove you can unsubscribe these tokens
from this topic
now just a word of caution before we
proceed when you send messages using
topic messaging we allow you to publish
to a large number of users so when you
publish too fast on big topics you
should make sure that if you see any
errors from our servers you should retry
later and if these devices in turn are
going to hit your servers for more data
you should make sure your servers are
provision to handle that traffic do we
have any iOS developers in the room we
are part of you last year when we added
support for iOS a lot of iOS developers
Astor's if they can just use their
existing APNs tokens and start using our
service and the answer today is yes now
we have an API with which you can send
us your epns tokens an FCM will give you
bad registration tokens for those APNs
devices here's how you do it you can
send us an ArrayList of your APNs tokens
to the batch import URL an FCM will
return you back a registration token
along with the status for each of those
APNs run to opens now you can reach your
iOS devices YFC am using these
registration tokens really simple and
you don't even have to change your
application
Sweet Lord a lot so far our brand new
SDKs platforms that are reachable by FCM
improvements like removing limits from
topic messaging API to send to a
combination of topics an API to
subscribe automatically from your server
side and an API to import your APNs
tokens and before I forget all this with
FCM is still free now as promised
earlier let's get into details on how to
use our new SDKs and I'd like to invite
Liam on stage for that hi I'm Liam and
now I'd like to talk about how to use
these api's in your apps for each of
Android iOS and C++
I'll cover the basics of integrating FCM
first we'll cover iOS and probably
Android developers out there don't go
anywhere we'll get to you shortly the
first thing that you need to do is add a
dependency on firebase messaging to your
pod file and now I know that you've all
been waiting for some code so let's move
on as you'll as you already know a
registration token is used for sending a
message to a single installation of your
app and it's Abby I mentioned earlier we
now automatically get a token for your
app and handle all the errors and
exponential back-off so all you need to
do is call this one function and we do
the same for subscribing to a topic and
we hope that these improvements will
make things easier for you
and while these examples and the ones
that I'm going to give or an objective-c
we are also fully compatible with Swift
to handle token refresh events you need
to add an observer to instance ID token
refresh notification this is caught if
your token ever changes so so when you
implement this you should upload the
token to your server this is also called
when we first get a token on your X
behalf so by implementing this it means
that you'll always have the correct
version of your
touken on your server now that you have
a token and to subscribe to topics let's
move on to how to receive and send
messages to receive a message need to
implement that did receive remote
notification callback here you'll get a
user in projection area and this will
contain your from address and all your
message payload data and to send a
message you need your course in message
and here you pass in all your payload
data the to address the starts of your
sender ID the message ID and time to
live and will try to send this message
immediately and we'll keep retrying if
there are any errors until your
time-to-live expires now one thing to be
aware of when you're using our API is on
iOS is that we use Swizzle II so
integrating fcm can be done using a
single line of code and it's very easy
to get started what this means is that
we add some hooks and your app to
automatically call if cm methods at
runtime but if you want to disable this
you can you just need to add a flag to
infer top pierless file but if you do
this make sure that you call these two
methods to ensure if cm works correctly
in your app and here we have a big green
android and as you've probably guessed
I'm going to talk about using Android in
your apps I mean using FCM and your
Android apps so first here you need to
add a dependency on firebase messaging
and this time to app level build.gradle
file our Android API is a very similar
to our ones in iOS and we do all the
same and we automate we also
automatically get a token for your app
and perform retries so all you need to
do is call get token we'll handle the
rest and likewise for subscribing to a
topic
to handle token refresh events you need
to extend the firebase instance ID
service and override on token refresh
and just as with iOS here you should
upload your apps token to your server
now let's see how when we receive and
send messages on Android to receive a
message you need to extend the firebase
messaging service override on message
received and here you'll get a remote
message object from which you can get
the from address as well as all the
message payload data
one other thing to be aware of is that
when you see the notification message
and your app is already in the
foreground instead of posting it to the
notification tray instead we'll call on
message received so you can handle the
notification intelligently while the
user has your app open and you can get
all the extra notification payload by a
remote message to get notification to
see the message you need to build a
remote message object and pass it to
send just as on iOS you sit the to
address the message ID the time to live
and your payload data
now now let's look at the changes that
you need to make to androidmanifest and
I know this has been a pain point in the
past with lots of copy pasted
commissions and receivers but now all
you need to do is add one entry for your
firebase instance ID service and one for
your firebase messaging service just
like any other Android service and
that's it you're done for all you C++
developers on both iOS and Android it
should be a talked about we have an API
for you two on iOS this is all the
bridging to Objective C API s and on
Android that does all the Jane I work of
talking to our Java API s and also
includes proxy classes they pass the
messages to your C++ code we've made all
these changes to make your life a little
bit easier so the link and the C++ SDK
on iOS you need to drag these two
frameworks and your Xcode project and on
Android you need to link to these two
static libraries and add the proxy
classes to your manifest when your app
starts you need to initialize firebase
messaging by passing in a firebase app
object and a listener class note that
when you create the firebase app on
Android you also need to pass in the
Jane I environment and an activity but
these are the only differences between
the api's on each platform the listener
class has callbacks they use for
handling a message and for handling new
tokens but I'll give you an example of
that in a moment now that you have the
SDK set up how about subscribing to a
topic and again this is a simple
one-liner and just like an objective C
and Java
we will keep retrying if there are any
failures here is an example of that
listener class that I talked about
earlier you need to implement on message
where you'll get a message struct and
they will contain the from address and
the message payload you also need to
implement on token receive we should
upload the token to your server to send
a message you create a message struct
and parts of a send and this takes all
the same parameters that I talked about
earlier
now there are a couple of things to be
aware of when you're implementing FCM
and your apps first is to make sure that
you handle token Refresh events this
will make your app more secure and
ensure that you always have the right
version of the token so your users will
never miss messages and second is don't
try to use our new FCM API so as well as
the old GCM ones otherwise you might get
some unexpected behavior but don't just
take it from me hear from three of our
partners that have already successfully
integrated FCM into their apps versus
live Figaro the oldest French daily
newspaper and they talk about how
trustworthy and reliable at all if cm is
next we have quaver and app to help you
create music and collaborate of other
musicians and they talk about how simple
it was to migrate from their previous
messaging platform to FCM and last we
have fabulous and they have to help you
create healthy habits in your life we
talked about how convenient it is to
have one messaging platform that talks
about ios and android and now pass the
floor back to severe thanks Liam that
was fabulous so we've covered them in
detail how to use our SDKs platforms and
improvements in FCM let's talk a little
about our integration with other
firebase products this is the firebase
console and it's designed to make
integrating these products very easy and
simplify your app management as you can
see you can access all your project
settings in one place and here's a URL
to access it specifically for cloud
messaging you can see all your settings
in this one page you can see your server
key and sender ID and these are the same
credentials you use when you
authenticate on the backends iOS
developers can upload their APNs
certificates right here so we can
successfully send messages to your iOS
devices
and there is this notifications on the
left menu
hmm and what is that but this is
firebase notifications and it's built on
top of firebase cloud messaging it's a
very easy-to-use tool to create user
engagement campaigns targeted a segment
of your users etc let me show you this
is what it looks like it's a very simple
web console you can create a campaign
for now or later
you can send messages to a user segment
that you can create it can be all users
with an app version or with a
combination of application versions all
users with the firebase audience all
users running a particular language on
their devices etc you can also send
messages to a topic and also to a single
device and that's very useful when you
are debugging or developing or testing
your application and not only can you
send messages using this campaign you
can also see how effective they are you
can now see how many messages were
actually sent using your campaign how
many users clicked on it
how many opened it and how many users
went through a conversion event a
conversion event can be something you
define like an ad click or an in-app
purchase or something like that and now
you can calibrate and see if your
notification strategy has been working
the way you wanted it to it's really
powerful and all this rich data is made
available with our integration with
firebase no different analytics firebase
analytics
there's another talk on firebase
notifications tomorrow which is going to
go into details of all the powerful
features available on this console so if
you're interested please cover them
everything we talked about and all the
other details are available at our brand
new documentation website please check
it out at firebase dot google.com
under cloud messaging and these are the
talks that I mentioned during this
session if you are interested in push
notifications I highly recommend go into
these talks I hope you are excited about
firebase cloud messaging and enjoyed
this talk thank you very much and let's
open the floor for questions
is it possible look yeah is it possible
to use firebase Cloud messaging to send
messages to our users who are on a
safari or a Firefox web browser we don't
need the so north with the FCM because
FCM implements the web push API which is
already in critic in chromium so any
chromium based browser it's possible you
said there was and there was - these two
have you haven't that's a good idea I'm
going to take your feedback but we don't
have a crane it's an odorous and you can
use two operators so you can have three
topics in the condition we have any
recommendations to migrate from GCM and
APN to FCM now because then if use
doesn't update his app you have like
three systems to manage instead of yeah
there are migration guides available on
our website
yeah for both iOS and Android we're so
gonna support GCM for the foreseeable
future but if I was running a new app
today I would use firebase Cloud
messaging
so do you know what the foreseeable
future is like currently I have Google
Play services location and GCM messaging
now I'll have firebase messaging and
Google Play services location which will
then both pull the cores from GCM before
or from Google Play services core and
firebase core correct yeah so but if I
wanted to stay on GCM how long if you
can stay there there's no reason that it
should stop working or anything but
again if you are writing from scratch
and your new apps you should use as here
there will still be a version of GCN in
Google Play services and the newer
releases that are coming out but it's
not going to get any new features thank
you
yes yeah we do have that limitation
Thanks
all right thank you very much everyone
oh good day</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>