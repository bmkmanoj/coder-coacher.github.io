<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Getting Started with the Firebase Realtime Database on Android - Firecasts | Coder Coacher - Coaching Coders</title><meta content="Getting Started with the Firebase Realtime Database on Android - Firecasts - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Firebase/">Firebase</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Getting Started with the Firebase Realtime Database on Android - Firecasts</b></h2><h5 class="post__date">2016-05-19</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/lpFDFK44pX8" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">what's up everyone
david here from the firebase team and
welcome to a brand new season of fire
cast where we're going to be showing you
the all-new firebase and on today's
episode i'm going to show you how to get
set up with a real time database in
android and since that's so easy we'll
spend the rest of our time covering the
basics of the real time database by
building an app then you'll know
everything that you need to know to get
started in just a few minutes so let's
go and dive in open your Gradle file and
the first thing you need to do is
include Google Play services so
independencies I'm just going to set the
classpath for Google Play services 3.0
and then I need to open up the app
build.gradle file in the dependency
section I need to include the firebase
core and real time database dependencies
and these are just calm dialed firebase
and firebase database and firebase -
core and lastly I need to apply the
plug-in for Google Play services so
there you go
it's as easy as that now that we're all
set up let's build an app we're going to
build a social local mobile
crowd-sourced weather app that will tell
you whether it's sunny or foggy in San
Francisco it is a pretty basic app but
it covers the fundamentals of saving and
synchronizing data in real time so let
me go and show you how that works so now
that I'm all set up I'm going to build
out my UI so I'm going to open up the
main activity layout so I'll delete the
stock text view and I'm going to add a
larger text view to the screen and I'm
going to set the text to condition and
then change the ID to text view
condition now I need to add the buttons
for sunny and foggy so I'll add a button
down here I'll change the text to sunny
and the button ID to button sunny and
then drag another one and just do the
same for foggy so the text is foggy and
the ID is button foggy so great the UI
is all set up but we actually need to
wire these components in the main
activity so open up the main activity
and then I'll add them as properties and
then just use vine view by ID to wire
them up over here and on create so now
we need to talk to the real-time
database the first thing I need is a
connection and to do that I'm
going to create a database reference so
as a property I'll type database
references M route reference and that's
going to equal firebase database not get
instance not get reference and the
reason why I'm calling this route ref is
because when we get a reference it gets
us a reference to the root of the
firebase JSON tree
so the next step is to listen for
real-time changes whenever the condition
in the database changes we want to
update the text views text property so
to listen for that change I'm going to
create a value listener in the on start
lifecycle method so kraton start and
then on set of on start I'm going to
create a child reference I'm going to
call it the condition reference and that
is going to equal the root reference I'm
going to call dot child and then pass
through the string condition so by
calling child on the root is that we're
creating a location of condition
underneath the roots and then we're
going to be setting a value so either
you know sunny or foggy so I'll just
copy it up here and then paste it below
the root ref and then change it so it's
M condition ref so now that I have
access to the condition location I'll
create a listener so inside of on start
I'm going to call the add value event
listener method and notice that I'm
calling add value event listener on the
condition ref so we're attaching it to
the location of condition inside if you
are going to give it a new value of
event listener and this is just two
methods inside of the anonymous inner
class so the first is on data change and
this will get fired every single time
the condition value updates in the real
time database and then on cancelled is
if we run into any errors so in slide on
data change we're getting our data back
as a data snapshot and this contains
your data in other useful methods so
what I want to do is I'm going to use
this snapshot and synchronize it to the
text view so first I'm going to get the
data back as a string so called data
snapshot back get value and then
make sure it's a string I'm going to
pass in the string class and then now
that I know it's a string I can go to
the textview and then call set text by
passing in the text so I have the app up
and running over here and I have the
real-time database viewer right here so
there's no data yet so let me add a
condition location so hit plus type
condition and we'll set its initial
value to sunny with an exclamation mark
nothing happened
why is that well that's because the
default security rules only allow
authenticated users to access data so if
I click over to the rules tab you can
see that within these rules we have dot
read and dot write and they both have a
rule of auth not equal to null and like
I said this only allows authenticated
users to write or read from anywhere in
your database so we're just developing
an app so we don't have to lock down a
rule so just yet so we're going to set
everything to be readable and writeable
but when you go to production you should
not do that because anyone can access
your data and I think you know that's
problematic good thing
so for read I'm going to just write true
and the same for right and then just
make sure to publish your changes so now
back in the data tab I'm going to
restart the app and you can see that we
have the value of sunny but to prove it
to you I'll actually go and change the
value so we'll remove the exclamation
mark and boom it updates in real time so
that works but if we are to click on any
of these buttons it's not going to
update this condition and therefore
update the textview
so let's change that in our app so back
in Android studio I need to set click
listeners for these two buttons so on M
button sunny I'll set on click listener
with a new onclick listener and then
inside of the click listener I'm going
to call condition ref dot set value so
keep in mind that the condition ref
connects us out to the slash condition
location so if we call set value on it
it will replace anything that's
currently there which in this case is
sunny
so whenever someone clicks on the sunny
button we want the value to be sunny so
I'll throw in a string of sunny and then
I'm just gonna copy and do the same for
foggy so it's really important to
understand the data flow here is that
we're actually calling set value in both
of these click listeners and we're not
directly updating the text view we're
not directly updating some internal data
source we're updating the real-time
database and then when the real-time
database updates the on data change
method fires and therefore updates our
text view so the lesson here is don't
modify your local state let everything
come from the real-time listeners so now
when I click the buttons the database
updates in real time and therefore so it
is the text view there you go you're all
set up with a real-time database and
only in a couple of minutes and that's
all for this fire cast but please leave
your questions in the comments below or
reach out to us on Twitter and G+ with
the hashtag ask firebase and we're going
to be dropping a new fire cast every few
days so don't forget to hit that
subscribe button to stay up to date I'm
David East and thanks for watching</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>