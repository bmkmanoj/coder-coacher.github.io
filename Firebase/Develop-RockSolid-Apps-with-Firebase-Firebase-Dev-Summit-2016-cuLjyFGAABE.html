<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Develop Rock-Solid Apps with Firebase (Firebase Dev Summit 2016) | Coder Coacher - Coaching Coders</title><meta content="Develop Rock-Solid Apps with Firebase (Firebase Dev Summit 2016) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Firebase/">Firebase</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Develop Rock-Solid Apps with Firebase (Firebase Dev Summit 2016)</b></h2><h5 class="post__date">2016-11-07</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/cuLjyFGAABE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">very excited to be here my name is Ali
I'm product manager on firebase crash
reporting and I'm right behind you know
I'm Justin from the firebase test lab
team and our team works on app quality
in firebase we help you build apps with
high quality so that your users have the
best possible experience now before
jumping in is probably worth explaining
why we do this why this firebase invest
in our quality at all we've observed her
a while now that app quality leads the
better user attention the better your
app is and the more stable it is the
more likely for users to come back and
for your business to be successful and
sustainable so this sounds like common
sense right well this year we had a
study of bad reviews on the Play Store
and we found out that more than 50% of
one-star reviews come specifically from
stability issues we're not talking about
functional issues here or missing
features these are basic crashes and
stability issues that simply should not
be there but they happen all the time so
why is that well turns out that
maintaining high quality is actually not
that simple consider today's mobile
ecosystem you have numerous device
models many operating systems and
operate system levels and the
combination of all these things would
just be too much to keep track of
especially if you're a small team
without a lot of resources and that's
where we come in so Google has been
building ask for a while now and our
experience tells us that the best
approach to handling app quality is a
combination of being proactive and
reactive which is exactly why we build
these two products firebase that's not
for Android and firebase crash reporting
they work hand in hand with desk lab we
can be proactive and you can test things
on many different devices without having
to own a single device which i think is
the coolest part about it with crash
reporting it can be reactive it works
out it works for you out there in the
wild when you've published your app and
if there's a part of your app that
wasn't properly tested or a device that
wasn't accounted for during testing
times while we covered this issue for
you and you reactively fixed it in a
timely manner okay so how about we start
with Justin telling you a bit about
Tesla Justin by the way does an amazing
English
accent impression you gotta hear this
all right I'll see if I can keep that
going alright so in the spirit of
prevention being better than the cure
and spirit of proactivity
as Olli would say being better than
reactivity I'm here to talk a little bit
about firebase test lab so with firebase
test lab you can test your app on lots
of different Android devices before it
gets into customers hands you can use
our rather friendly Robo and test your
app or you can run real range
instrumentation tests you can do with
the Robo you can test your app the Robo
will explore your app looking for
crashes looking for unique screens and
you'll get a report at the end whether
you use instrumentation tests or whether
you use the Robo
you get comprehensive test results so
what's new welcome here today to talk
about what's new so we talked with many
developers in fact I talked with a lot
of developers in such diverse places as
Poland recently and Vietnam most
recently and we found that the biggest
impediment to signing up and using Tesla
was the requirement to use a credit card
which is why despite my truly British
exterior I am pleased to announce that
you can sign up today for the SPARC free
tier and you will get five virtual
device physical device tests and ten
virtual device tests every day seriously
yes every day at zero cost
now see it worked I'm sorry one of the
other things we heard was more devices
many more devices so since we announced
test lab at GA at i/o we have doubled
the number of device types available to
you in the catalog we'll continue to add
new devices especially about around the
introduction of new API levels and to
that end this week this last week we
added n nuga mr1 devices to the catalog
virtual devices to coincide with the the
Developer Preview release that happened
earlier this month while not new I do
want to highlight the play pre-launch
report the play pre pre-launch report if
I can say that the play pre-filter
report is free to anybody it's powered
by test lab you can simply upload your
app to an alpha or beta Channel opt in
to receive the free report and you will
receive a report that is the results of
a short Robo test and a security scan we
also know that it's really hard to write
tests nobody has the time the tests keep
breaking every time you change the UI
all that changes with espresso test
recorder espresso test recorder is a
tool that allows you to record an
instrumentation test and espresso
instrumentation test by simply
interacting with a device on which your
app is installed it is absolutely dead
simple no coding is required and you end
up with an instrumentation test that can
even include assertions it's part of
Android studio part of Android studio
2.2 so you can download that so test lab
users really care about application
quality which is why we're all here this
is a quote from a recent customer jet
but one of our long-standing users I
want to talk about American Express
they've been with us for a very long
time
they are still running thousands in fact
tens of thousands of tests every day
prior to their app getting out into
production they want to do this because
they really want to make sure that their
users don't see issues with their app
and in particular this app is mostly
doing financial transactions so they
care about how those financial
transactions are treated so let's early
let's talk about crash reporting all
right
so if you guys have been tayo this year
or watched it online you probably know
that we announced firebase crash
reporting in beta this year it is a
cross-platform SDK we support both iOS
and Android and on iOS we support both
Swift and objective-c super easy to
install if you're on Android you just
installed the Gradle dependency if
you're on iOS install the cocoa pod and
you're up and running it's that simple
and when you do that and when your app
is in production we start collecting
information about the errors that your
users see and we triage them by impact
on users and probably one of the best
things about crash reporting is that it
works very well with firebase analytics
so one of the things we allow you to do
is create audiences art of crashing
users so that you can understand the
business impact numbers like engagement
and retention so ever since we announced
this we've had a lot of great and
positive feedback many developers have
adopted crashed reporting and we thank
you for this and perhaps the one thing
that they're most excited about in this
product is the console and they like it
because it's actionable so here you see
an example of what the console looks
like in this specific example we're
monitoring the error trends over the
last 30 days of the latest version of
our flooded app the one that was demoed
today in the keynote and right below
that you see a list of the top issues
that impacted 300 the number of users if
I click on one of these I get an error
details page that gives me the context
on that specific errors that you can dig
in fix it and get on with it okay so
that was six months ago our announcement
and since then we've been working very
hard to make this product better than
ever and today we're super excited to be
here to announce that firebase crusher
Corning has exited beta is generally
available and it's better than ever go
ahead too much caffeine all right so far
we are pointing obviously it wouldn't be
a launch without adding some cool new
features right so let's talk about
what's new we understand that a big part
of monitoring things in production is
your ability to be aware of what's
coming in terms of issues so we added
alerting with this you get email
notifications that tell you about brand
new issues that you haven't seen before
or issues that resurfaced after being
fixed we've also listened to your
feedback one of the things he told us
the most is that you needed a better way
to manage the workflow so we added the
ability and the ability to close
clusters of error in the console once
you're done fixing them so that you can
focus on the next thing and probably the
one thing we're most excited about in
this launch is a brand new integration
with analytics that enhances our logs
feature if you've used the logs feature
so far you know that she can instrument
your code to add a bunch of custom
events and we'll collect those as a part
of the crash report and tell you what
happened leading up to it with this new
integration with analytics we
automatically import analytics events
into that report so that so that you can
get a lot of additional context for free
so many of these events are actually
thrown out of the box by analytics and
for this you don't have to add any
additional code and if you do is
tremendous while we include this - so
it's a lot of great context and I'm
gonna demo this for you in a bit and I
think you'll like it actually I think
it's time for a demo right Thank You
Ellie all right so we thought we'd show
you some of these new features as part
of a perhaps realistic story it's one
that I think most of us as developers
have faced or something like it so it is
the story of a developer who wakes up in
the morning
she's still into her first cup of coffee
maybe some of you already in your first
cup of coffee I don't know and she opens
her laptop bleary-eyed she finds a crash
notification so we take you through how
she first of all figures out how serious
this issue is how she diagnosis or
debugs the issue how she fixes the issue
verifies that it's fixed but then most
importantly and one of the reasons we're
here she makes sure that this particular
problem never happens again so without
further ado let's switch to the demo
Alli all right so it's a brand new day
I'm in my inbox and I get an email from
firebase telling me that there's a new
fatal error that I haven't seen before
obviously this sounds concerning so I'm
gonna go through the email says it's a
new fatal error on the flooded app
specifically it's a runtime exception
happening on the latest version 41 and
it's happening in the about activity
okay so this gives me some idea if I
click on View details here it'll take me
to the error details page so this is in
the crash console now and this gives me
the context on what's happening with
that specific error so the first thing I
see is how many times this error or a
cluster of errors has taken place and
across how many unique uses so now I
have an understanding of the impact in
general and next to it I get a breakdown
of the app version API levels and
devices on which this error has taken
place now it seems like this error only
takes place on API levels 22 and above
which is kind of weird we probably
should take a further look at this so
we'll do this in a bit but let me keep
going
the next section here shows a bunch of
error samples or samples like and I go
through them one by one to get a
snapshot of these errors right so each
one is a unique stack trace but they're
lumped together because they have common
stack traces let me pick this one here
go through it
the orange frame here shows me which
part of my app is crashing right so this
is the top frame that belongs in my code
so I get a sense of where it's happening
right below this I get a bunch of device
Diagnostics so I get things like how
much free memory was there on the device
when the error happened how much free
disk space was the device in landscape
or portrait orientation and so on and
all of this helps me refine the context
of the error and right below this is the
brand new feature I was talking about -
the enhanced logs so here you get a
bunch of steps leading up to the crash
and they're coming from two different
data sources one of them as indicated by
the icon is the crash SDK so these are
the regular custom events that you would
log in your code and this icon here
indicates Analects events so these were
thrown either automatically or using the
developer instrumentation through
analytics and together they create this
one seamless report that leads up to the
crash so here I can see that the user
selected a bunch of content they started
a new game level started a session
clicked on this new feature and within
milliseconds the fatal error happened
okay so one thing I'd like to highlight
is these analytics events if you expand
a couple of those they actually come
with a parameter list that gives you
even more context so here I can see that
in the in the second last select content
event the user selected the modes and
the one next to it they selected the
level and as of this week and little
ships with this built-in parameter that
tells you which screen the error happens
out so it'll say in this example that
the select content event happened on the
stats screen so now all these steps
leading off to the air you can box them
in into these screens to understand
where the user was leading up to the air
okay so this is a lot of context and we
now have enough information to get
started on the fix thank you welcome all
right so now the next step is to
reproduce the problem so the trouble is
that we we know that this problem seems
to occur on API level 22 and above I
don't have an API level 22 device
available to me that is probably typical
but
for the most part you can never maintain
a set of devices on which your users
have installed your apps it would be
almost impossible that's essentially
what test lab is test lab has lots of
advantages you can test whenever you
want you can test on whichever advices
you want you get more comprehensive test
results you have a full history of those
test results but again most importantly
you can test and fix issues before they
end up in your users hands so what we're
gonna do is run a short Robo test but
it's really easy to get started today
you can sign up for the free spark plan
as we did already as where I talked
about already no credit card is required
and you'll take it you can take
advantage of the zero cost testing so we
don't need to do that which we saw with
the crash console we already have a
project so I'm going to take advantage
of that project get rid of this
notification here so we're gonna run a
test it's very simple all I need to do
is run a quick Robo test I'm going to
upload my app into cloud storage so that
the test lab has access to it there it
is I'm going to choose an API level 22
device a nexus 5 and portrait and that
is it that's gonna start a single test
it's gonna run that test it's gonna take
a couple of minutes and so what I'm
gonna do now is go back to a run that I
did previously so we don't have to wait
for it here it is and we're gonna take a
look at the screenshots so this first
one which is kind of difficult to make
out but this first screenshot here has
the crash in it and just underneath the
screenshot which I think you'll have to
take my word for it is this button that
says cool new feature I've never seen
that before in fact I don't know who
developed that cool new feature but
it doesn't seem to be quite as cool as
he intended was sure so now what we're
gonna do is use a couple of
methodologies that probably you're
familiar with but we also encourage
strongly within Google test-driven
development and continuous integration
test-driven development as probably most
of you know is writing a failing test
that exercises some aspect of your
application a problem some feature
you're developing and then implementing
or fixing the problem running the test
again verifying that it's fixed and then
adding that test the last part you're
continuously running set of tests to
make sure that that problem never
happens again or that feature remains
properly implemented the main issue is
that I hate writing tests I really do I
mean it's it's a pain they're brittle
it's like and judging by the number of
people that we talk to who have no tests
at all running against their app you
guys hate writing tests well maybe not
you guys but maybe these guys hate
writing tests I so but we're gonna use
espresso test recorder and there's some
reason my visor there's always going to
be some problem so there it is so we're
gonna use the espresso test recorder to
record a test so I have visor here visor
is an app that allows me to view what is
happening on my physical device which I
won't show you because that'll it's down
at the device you'll have to trust me is
on the table here I'm gonna interact
with that device I'm going to build a
test so the first thing we do from
within Android studio is we run record
espresso test I'm going to record an
espresso test on my local API level 21
device and there it is so we're going to
under start interacting with the phone
and I'm gonna take my app
to the place where I saw that cool new
feature and then I'm gonna click the
button at this point it doesn't crash we
only saw this on API level 22 so it's
there we wouldn't expect to see this at
this point I could also add assertions
I'm not going to do that or we're trying
to do here is reproduce the crash so
that's the end I'm going to complete the
recording here so now I have a new test
and if we look through it we can see
it's generated an espresso test for us
so I'm now gonna run that espresso test
and it's really easy to do from within
Android studio I just click on cloud
testing here I choose the same device I
chose earlier a nexus 5 running API
level 22 and portrait and then I can
start that off and that'll run and again
is going to take a few minutes so I'm
going to switch back to a run that I did
previously and there's the run this is
the one I did earlier
it's a nexus 5 API level 22 and sure
enough there's that exception so we have
now a test that covers the issue so now
I have a failing test I want agree I now
want to fix the issue so let's take a
look at the on click event for this
button what we see here then it says
that if the current API version is
greater than lollipop which it would be
for 20 to log something and throw this
very contrived exception which is really
rather silly of course but the point
here is to demonstrate that there are
many cases of API level specific issues
or device specific issues many of these
we see when when when people run their
apps through test lab perhaps an
unguarded call to an API regardless the
the key takeaway here is testing your
app across a wide array of form factors
API levels devices to uncover problems
that your users will see
so now we would go ahead and fix this
issue fixing this rather contrived silly
issue is going to be as mad a matter of
simply commenting out the exception so
I'm not going to do that with you and
leave that as an exercise for your
imagination there and verifying the the
test but I'm going to focus on the most
important part taking this test that
we've created and adding it to our suite
of tests that's running continuously
before your app goes out in production
in fact with espresso test recorder
there is now no excuse not to have a
sweet or battery of tests running
against your application continuously
before it gets in doubt into your users
hands it is the single that's single
most important thing that you can do to
affect application quality so now that
we've fixed our issue we are going to
upload the new application into the Play
console I would do that from here this
is the Play Developer console I can
upload into an alpha or a beta channel I
can even upload in production but I
don't get of play pre-launch report if I
do the production so I could I click
this button and it asks me to upload my
apk I'm not gonna do that because I
don't have an apk so but I do here I
want to show the play pre-launch report
so this will still show the old app
which has the fail of failing API level
22 devices what we see here is the
pre-launch report has a set of 1012
devices that is run that you wrote that
is the result of running a robo test and
we see that this crash happened on the
two devices that we have at the top both
API level 22 so we still though we have
a pesky crash notification yep we do
okay
we still have it we still have pesky
crash notification and we're gonna close
the loop and Ali is going to take us out
all right so this is my favorite part of
the demo where I get to get back to my
crash console
and hit that close button and this
cluster of errors is now closed
successfully so this means it's out of
my sight I don't have to deal with it
again
but we keep we'll keep watching it and
if it ever pops back up again in a
future app version we'll send you a
notification just like the one we sent
today all right so this closes the loop
and if we get back to the slides we can
recap what we just did you get back to
the slides perfect thank you so today we
woke up we found this nasty issue in our
inbox we jumped in the into the crash
console to understand the context of
that error we try to debug this error
using test lab we jumped into Android
studio after debugging it to build a fix
and we verified that this fix actually
works with test lab integrated the fix
into our CI system so that it keeps
running before going into production and
we close that issue and now we'll keep
watching it and we'll notify you again
if it happens again and that closes the
loop so while this might seem like a lot
of steps in this demo the take home
message is actually pretty simple right
it's simple because actually if you
don't fix your application quality your
you will be letting your app out into
the wild with issues and if you let it
out in the wild with issues you're gonna
start to see customers we're writing you
one-star reviews those customers they're
never gonna come back
they're gonna go out they hate your
knees or you hate your scaring them man
they need to be scared
nobody should not be listen guys it's
simple here just build a suite of tests
using test love make sure that you run
these test cases all the time before you
go into production once you go into
production keep an eye on things using
cross reporting that's it do this all
the time
and make a lot of money you'll be happy
ok
that's
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>