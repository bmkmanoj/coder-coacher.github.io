<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Unity AI:  Simulating Crowds Part 1  - Penny de Byl | Coder Coacher - Coaching Coders</title><meta content="Unity AI:  Simulating Crowds Part 1  - Penny de Byl - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udemy-Tech/">Udemy Tech</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Unity AI:  Simulating Crowds Part 1  - Penny de Byl</b></h2><h5 class="post__date">2018-03-04</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Of_Q4F5I1zs" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">in this section we will begin looking at
the simulation of a group of agents in
which they are treated less as
individuals and more on mass crowd
behavior differs from individual
behavior in that properties within the
crowd such as a motion collision
direction and speed propagate from one
person to the next giving the entire
group its own identity to simulate every
single individual in such a group and
then produce a crowd would be
labor-intensive
and in fact many of the things you might
consider important decision-makers for
individual movement in a crowd can be
boiled down to simple vector mathematics
there are numerous methods researchers
have investigated for simulating crowds
including having people move like
particles in a fluid - using real-world
data a crowd doesn't move as a chaotic
set of individuals but rather in a quasi
organized fashion it is said to be a
self-organizing system where flow lines
appear in the direction of movement
however it has been found that if a
crowd becomes denser than six people per
square meter then pockets of turbulence
will occur one of the most popular and
simplest ways to simulate a crowd is
with Reynolds flocking algorithm that
has been used in motion pictures to
simulate animal herds and armies it's
based on three simple rules turn towards
the average heading of the group turn
towards the average center of the group
and avoid those around you we will be
using these rules in combination with
nav meshes and ray casting to create
crowds and flocks in this section if
you'd like to explore some simple crowd
dynamics you can do so using a navmesh
open up unity and create a ground plane
also create two walls so I've just made
the ground plane out of a normal 3d
plane and I've created two walls out of
some cubes and the walls are position
such that there's a corridor down the
middle the blue capsule that I've added
over here is going to have to walk up
here down the corridor and over to this
cube and this capsule here is going to
have to walk up and
around to their so create to capsule so
they're just in the hierarchy 3d object
capsule and I've colored them
differently and then I've named one red
agent and one blue agent I've also added
in some goals so I've added a cube
called the blue goal and that cube is at
the opposite end of the path that we're
going to create for the blue one and the
red one is at the opposite end for the
red agent now the red agent is going to
have to have a nav mesh added to it
these are just all the default settings
the blue agent also has an EV nav mesh
added to it and then on both of these
I've got a script
it's called AI controller and in that
script you'll find this first of all
I've got an exposed variable public
variable called goal and that's what we
will give the agents the two gold cubes
so that they know where they're heading
towards after that we're grabbing hold
of the nav mesh agent that's attached to
our character don't forget to use that
you'll need to include the Unity engine
ai library at the top in the start we
then grab hold of the agent that's
attached to the cap shop and we could
also at this point set the destination
goal which will be the goals transform
top position and that's all we need to
do and we can even get rid of the update
because we won't need it save that and
attach that code to the red agent and
the blue agent then you want to select
the plane and the two cues that are the
walls and ensure that this set to
navigation statics and you can do that
in the navigation object tab by
selecting this static button here or you
can also set them in the inspector as we
have before once that's all set up
you'll want to go to bake and then click
on the bay
tab and that will give you a blue area
like you're seeing here so the only
parts that aren't walkable are where the
walls are this will force the agents to
have to go from one end to the other now
to make sure that happens
select the blue agent and then in the
inspector on the code for the i/o
controller you want to use the cube
that's over here sorry next to the red
guy as the blue agents goal so grab a
hold of that cube which i've called blue
goal and then you would drag and drop
that into the gulf setting for the blue
capsule for the red capsule it's the
other way around the goal will be the
cube at the other end now when you play
this the agents will walk the path and
swap over from each other
now that was sped up by the magic of
video editing but if you want your
agents to move faster don't forget that
you can select them in the hierarchy go
over to the inspector and change their
speed value mine are currently set to 10
which is quite fast by itself when we
start adding more agents you might want
it to run a little bit slower so first
of all let's have a look at that
phenomena of self-organizing by flow
which is where two groups coming
together moving in opposite directions
will form lines of flow through the
crowd all we need to do is select both
of our agents and then control D and
create a whole heap of copies let's
create 20 copies okay now with those in
place let's press play and we can watch
them they're on the same spot that's so
they're going to explode from the same
position that they're in now as they
come together they will form lines of
flow now it's only a small group so you
get two clear lines of flow where they
overlap from here you could select all
of those duplicates and duplicate them
twice again to get some more and then
play again they explode out from the
single place and now they're going to
crowd in this area here and we will find
that they will form lines of flow we get
a little bit of turbulence as you saw
there it got quite dense and some guys
back here actually got stuck in that
crowd as well
you can modify this simulation as much
as you like by adding more walls and
more agents here you can see I've got
four different colored agents and even
when they crowd you can clearly see the
flow lines forming in AI when this type
of behavior occurs in a system that's
not specifically programmed to do this
it's called emergent behavior and it's
these clever lifelike results we are
trying to get in our NPCs with as
minimum programming effort as possible
the next lecture we will work on a crowd
simulation with animated human
characters thanks for watching please
support the development of more superb
online learning content by subscribing
and as always visit holistic 3d comm to
learn more about awesome games
development books and tutorials
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>