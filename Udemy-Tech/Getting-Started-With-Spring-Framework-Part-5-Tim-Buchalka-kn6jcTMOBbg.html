<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Getting Started With Spring Framework - Part 5 - Tim Buchalka | Coder Coacher - Coaching Coders</title><meta content="Getting Started With Spring Framework - Part 5 - Tim Buchalka - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udemy-Tech/">Udemy Tech</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Getting Started With Spring Framework - Part 5 - Tim Buchalka</b></h2><h5 class="post__date">2018-03-15</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/kn6jcTMOBbg" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">all right so moving on we now want to
add the beam definition for the data
access object the DAO implementation so
we need to go back to our beans - CP dot
XML file then we also need to head back
to the beans tab once you're there click
on new bean and we need to go through
and into these attributes so for the
attribute let's go with orc Dao for the
name or nothing there but for the class
we click on browse I'm going to go for
the organization Dao impl class and of
course that was one that we worked on in
the previous video select that and click
on finish so now that we've done that we
want to actually add a property to our
bean for the data source I'm going to
click on making sure Oh org Dao is
selected which it is right click select
beans we want to click on property
insert property element that's the name
we're going to refer to that as data
source the capital S and in the
reference we're going to specify des in
lower case so this is the reference to
the basic data source bean we declared
with DES up here in the previous video
all right so next what we need to do is
add support for the property
placeholders that we used in the
previous video for our data source the
username password etc so to do that
first of all you need to come down and
click on the context tab they want to
right click DV beans they want to click
on insert context property placeholder
this one down here and for location and
click into there we're going to type
organization dot properties which of
course is the organization properties
file we also created in a previous video
all right so we're ready now to create
some code to test all this and to get it
working so what we want to do is so go
back to our packages
let's add the
file that we're going to be used using
to run the app so I'm going to
right-click in the DAO folder click on
new select class we're going to call
this one the JDBC template classic app
one and I'm going to click on a public
static void main so that we can actually
run it click on finish and actually I
put that in the wrong package so let's
actually refactor that a little refactor
movies and we'll just save that first so
want to actually move this to the
conduct in Bjarke let's bring demo
folder that's actually where it should
have been so when I click on preview and
click on OK because it looks good to me
even though it does the reflected source
still doesn't show the new folder you
can see up here that it is going to be
moving it to that folder click on OK and
we now see that the package shows and
there's our JDBC template classic app 1
Java now we need to add some code to
this obviously to get it to work we're
going to delete the automatically
generated code we're going to start by
creating the application context that's
going to be application context CTX is
equal to new this is going to be a class
path XML application context it's going
to be in double quotes in in also in
parentheses beans - CP dot XML or what
we need to create the be at the imports
and first bean or it's going to your
organization Dao I'll call that Dao is
equal to the organization Dao impl CTX
get beam or Dao this is what we named
the beam then we went into a list
organization orgs is equal to Dao dot
get all organizations then we use a for
each so for sort except those imports
first
okay that's for organization or call it
orgs to go through each one and let's
just print out the valley which will be
all and we'll close the application
context it's going to be two left
parenthesis plus path XML application
context drop parenthesis space CTX right
parenthesis dot close and I'm going to
save that well so nothing really too bad
to understand there I think we've been
through a lot of this through the code
this is retrieving the beam that we've
specified for our for accessing
ultimately the data from the Marci color
database so we're using the organization
Dao interface here but then we're
casting it as the actual implementation
class and therefore we're going to be
using the code to get all organizations
which was the code that of course we
wrote from our organization Dao input
class which was this code here which you
can see is querying using the JDBC
template and then we're just iterating
through all the organization objects we
get back on lines 22 through 24 and just
printing them out all right so we're
ready to give this a test run now so
let's actually try running it so I'm
going to right click in the main method
run s and click on java application and
it looks like we've got an exception so
I double click to have a look at the
error and not get Jamie's exception and
they're just reading go over and read a
little bit more
yes server timezone is unrecognized okay
so it looks like my sequel was having
trouble with my current time zone so my
current time zone is cen it's
abbreviation for central central
Australian summer time so what happens
is that my sequel also tracks the time
zone and uses that for date related
functions which we're not actually using
here at the moment but it seems to have
a bit of a problem
so let's go into my sequel workbench and
check that out and what we'll need to do
is we'll need to actually what we should
be able to do is do a select here so
select then we should be able to do at
hat system timezone timezone just try
running that sorry it's got underscores
as a system under school time underscore
zone and that should give me what the
current time zone is according to my
sequel okay that's set to central
Australian summer time so that's correct
let's just have a look and see what
timezone is set to you it's set to
system now you shouldn't be getting this
error so if you are getting this error
then follow along otherwise what I said
what what I'll do is I'll see if I can
just quickly change this to get it
working and perhaps I'll make a video
about this if it ends up being a problem
on an ongoing basis but what we can
actually do is we can do a set global
system Thomas called time zone actually
times what is it time zone so in equals
and what I'm going to do instead of
having it set to Australian central
summer time we're going to put plus 10 :
30 which is the current offset in my
city so I should be able to do that to
save it so let's try that and then we
just taught us select again so should
have done that and they did another line
select at hat time I was called zone I'm
just try running that to make sure it is
working we call there let's to set the
system so it didn't update so I think I
need to be logged in that's the root
user so I'm gonna go back to home double
click in there and log in as root let's
try changing it there so I'm gonna do a
set global time on his core zone
so is equal to plus 10 : 30 I won't say
that alright and what I would do is I
just come up here into server and click
on system status variables I'm kind of
system there but was a little search for
time okay I can see there that has
updated plus 10 : 30 so that's good
that's what we wanted it to do
alright let's go back and try running my
program again same deal we're going to
try running it again job application and
this time we've got some output so that
clearly fixed a problem so this was a
problem with for my sequel not
recognizing the time zone that has been
set which is cuz we're in daylight
saving over here in Australia right now
or at least in South Australia that's
what's caused the problem so what I did
was I just changed it to what the
current offset was as you saw with the
plus 10 : 30 so that wouldn't be a
long-term fix but it's a short-term fix
to get us past that today so if you've
got a similar problem do post in the Q&amp;amp;A
section of the course and myself will be
perhaps will talk to you there and see
if we can figure out a solution but for
now that's obviously fix the problem so
let's get back to this code and you can
see here that we've got two forms of
output but clearly the problem here is
that I didn't have a two string method
in my organization class so we're
getting the representation the default
two string representation which is what
we want so let's go back into
organization and we'll just add a - a -
string with it source generate it isn't
whoops wrong real one we've already
generated those right click again source
and this time I want to string so I'm
going to have all of them selected by
default and the default insertion point
after slogan is fine and there's our two
string method so that will hopefully
print that out for us alright so let's
go back and try our word JDBC template
classic kill app one right click run as
java application and this time we've
actually got some outputs you can see
there so that's working nicely and that
data should be identical to what's in my
sequel so it's kind of a look at that
workbench and we'll go back we can just
have over here to development which was
our other one and let's just replace
that with select star from organization
all right so there's our two entries
they're BMW and Amazon and I should
coincide exactly with what with what
we've got there that's looking good
let's just try a few things quickly and
make sure what's working well put will
change this kind of ply and we're going
to click on apply obviously they're very
simplistic changes here just to see that
something has changed but it's then go
back and run this again just to make
sure that we are seeing that data and
seeing the new changes to build great
cars and online giant so clearly the
data data is being retrieved to
successfully that's great we know that
it's actually reading it from our
database so at this point in the lecture
we've only dealt with XML base to
configuration what I'm going to do now
is make some modifications to the
current project to demonstrate the use
of annotations in conjunction with XML
so the two files are going to be working
with to change are the beans
- CP dot XML as well as our organization
Dao in Porto Java so firstly let's open
our beans file and what we want to do
now is comment out our our org Dao bean
because we're going to replace that so
we come down here and just to a less
than exclamation mark - - and then cut
that ending out and we'll just put that
down after the bean definition so
leaving the datasource there we're just
actually commenting out the org Dao and
again we're going to be replacing that
with their annotations all right the
next thing we need to do is we need to
add a context component scan and we need
this to set it up auto bean discovery
now that we haven't got the bean defined
in XML now we can go back to the beans
tab to do that but another way of doing
it is if you know the exact syntax you
can just type
so we could type context : component -
scan space then base - package is equal
to and then whatever the packages in
this case it can be com dot timber Chaka
dots between demo and I guess we could
have just done it all in the one but
we'll just do context component scan
close it off and just in case you're
welding I commented that out the XML
definition of our were being just so
you've got that in the source code for
this video in case you want to
experiment with that turning that back
on alright so we've added our content as
sorry our components can and again we
could have done that by going into the
context tab noting that now that I've
done this we can actually see what I've
done in that context tab and I can click
on that and you can see that it's
updated it so that's one of the beauties
about the way that Eclipse has set this
up you can either make your changes in
the XML or in what the visual interface
and they both reflect each other's
changes which is pretty cool alright so
I've now set this up so that the common
duct immature code up spring demo
package will be automatically scanned
and used for auto discovery as well as
the sub packages as well so next what we
need to do I mentioned and there was
another change and we need to change the
organization Dao input so let's have a
look at that and what we need to do for
that first thing we need to do we need
to add a class level annotation at
repository for this class I'm going to
come up here and do that then we'll talk
about it at repository third time lucky
and we need the name so it's gonna be
all Dao
not sure why my keyboard for some
reasons decided not to work which is
been annoying but there we go
org Dao being the name that we want and
we're doing this again because we
removed the bean definition from the
beans that CP del XML you know at
repository the annotation in case you're
wondering it's a specialized case of the
app component annotation used for the
persistent or database layer so
adding at repository makes this this
current class the organization Dao in
pool enabled for component scanning as
well as saying that's for a persistence
layers and that's why we're not using
component now note that if we haven't
used the add component instead of at
repository things would still have
worked but spring actually recommends
you use the add repository to follow the
conventions of applying the relevant
annotations for the matching layers so
the at repository is for a persistence
layers with database in other words at
controller is for a presentation layer
so on and so forth so it's a good idea
to make sure you are using the one
that's recommended even though it's but
in this particular case we could have
used another one and it would have
worked and of course the other thing to
note is that at some point down the
track they may will stop this they might
they might set it up so the yet
component may not work for persistence
so it's good to get things correct so
okay that repository I'm going to accept
that import so again I set up all Dao
it's the name thereafter the repository
the other thing we want to do is we want
to set up an auto wired for our set
datasource method so we're going to talk
at Auto Wyatt above that simply
important so we're doing that over the
set data source method so that an
instance of type data source which will
actually be an instance of all donatacci
commands dbcp dot basic data source that
service we configured in the beans - CP
dot XML we're doing it so that gets
injected here into the organization Dao
import alright so that should be the
only two changes we need to make we're
going to save that and actually go back
to beans make sure that was saved and if
you go back to our JDBC template classic
app one let's actually try running that
and we should get the same result and
you can see we've got the same result
but this time using annotations all
right so this has been a long video so
let's stop the video here and just a
note here that XML and annotations that
we've covered here are part of the JDBC
templates best practices recommended in
the spring documentation so we are
learning to do things the right way here
alright so in the next video we're going
to continue
and we're going to keep working with the
JDBC and start looking at some of the
other crud operations because at this
stage we've only got the retrieval of
all organizations working so let's
continue with that in the next video</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>