<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Flask Web Development  Build A Flask App!   - Jose Salvatierra | Coder Coacher - Coaching Coders</title><meta content="Flask Web Development  Build A Flask App!   - Jose Salvatierra - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udemy-Tech/">Udemy Tech</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>Flask Web Development  Build A Flask App!   - Jose Salvatierra</b></h2><h5 class="post__date">2018-03-04</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/qv6Nmvwu1q8" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">let's get started to make our first
flask app you don't need to know very
much but it will be really helpful if
you know a little bit about Python
already
if you know about dictionaries and
functions that's pretty much all you
need to follow through this entire video
our simple first flask app is going to
be made up of a single Python file and a
few HTML or Jinja files now ginger is
flasks templating language and we'll go
over what that is shortly but it allows
flasks to give the user some content or
a page to display
so flask is a Python web framework and
its simplest terms all it does it's it
Maps URLs things that users type in
their browsers it maps them to Python
functions so when the user types in a
specific URL flask will receive that if
we give it over to your Python function
which can run your Python function can
do things like show a page or this make
some data or maybe check if the users
logged in and so on
so we're going to be using flasks of
course for this first app this app will
require a Python 3.6 but I will explain
which parts require Python 3.6 and as
long as you change those you can use any
Python version down to Python 2.7 so
what we'll be doing is displaying some
HTML content allowing users to submit a
form that's always very important in web
applications and we're gonna save things
to an in-memory database so we're not
gonna be persisting things to the disk
we're not gonna be keeping things
available between running sessions but
we're gonna save things to an in-memory
database and then it's fairly simple to
save that to the disk if we want and
this app is gonna take the form of a
simple blog app so we're going to give
the user as a blog and they can add new
posts and then they're gonna be able to
read them and so on
okay so let's dive right in the first
thing you want to do whenever you start
a new Python project if you want to make
it reasonably independent from any other
Python project you've got in your
computer so the first thing we'll do is
we're going to create a folder for this
project where only this projects files
will live
and of course I'm sure that you already
do this for your project notice how here
I'm using the terminal to create
directories and to move around but you
can use the graphical interface if that
is easier for you to make it make the
folders and so forth all I've done is
I've created a new folder and I've
called it first flask app and then I
have moved into that folder I've opened
that folder now for the next step you
will need to use the terminal but if
you're already slightly familiar with
Python
you probably already know a little bit
about using the terminal the first thing
you don't want to do is to use PIP to
install a very important a very
essential package called virtual end so
the first thing I would do is do pip
install a virtual end now in my case it
tells me that the requirement is already
satisfied because I've already got
virtualenv installed and if that's the
case for you then that's totally fine
and you're good to continue if you do
encounter any problems then this could
be because of PIP not being installed so
make sure to look into that
virtual end has been installed you can
do virtual end and then VN and what this
does is it runs the virtual end program
that we've just installed and it creates
a new virtual environment which I'm
gonna explain exactly what it is called
VNV inside the current and directory
inside the current folder and then we're
going to do - - python equal five and
3.6
now if you are if you are only with if
you only have a single Python version
installed then you don't need to do this
so I'm only doing this because I have
two or more Python versions installed
and I want to use by 50.6
if you only have Python 3.6 installed
for example then you don't need to do
this - - Python equal Python 3.6 okay
and then press ENTER and then it'll go
through and create your virtual
environment okay now once you have your
virtual environment what that is is a
completely new Python installation
essentially that has been created inside
this folder so if we look at the files
or folders available inside this and
directory that I mean you can see that
we've got a new directory they're called
vient inside this directory you've got
python 3.6 but there is a key difference
between these pi this Python here and
the system Python that you've got
installed and it is that if you have any
libraries installed in your system
Python they will not be available in
this Python that means that this Python
is completely independent and if you do
have any out-of-date libraries for
example in your system Python and so
forth you can freely update them in the
virtual environment without fear of
affecting any other projects that may be
using your older Library versions it's
really important to keep your project
separate from one another so that they
can have different versions of different
libraries if you want and also just so
you don't end up with a hundred
libraries installed and every project
having access to them when they don't
need to ok so now that we have our
virtual environment you're gonna do one
of two things if you are on Mac or Linux
you're gonna do source VNV slash bin
slash activate okay
then you see this opening closing curly
and closing bracket there the end that
means you are now using the virtual
environment for all your Python related
stuff if you are on Windows you do not
want to do this line there you want to
do
don't backslash vm / scripts / activate
don't bat okay so if you're on Windows
you want to do this command there and
then you see the same thing happen
remember for Windows you want to be
using CMD dot exe as your terminal and
for Mac and Linux just use your terminal
okay if you are here you're good to
continue and all we have to do is little
pip install flask okay now our project
is only going to need flask to run so
this is the only library we want to
install and when we are inside the
virtual environment when we see this
bracket VM this pip that we're running
is our virtual environments pip so flask
is going to be installed in our virtual
environment and not in any other project
in any other environment including not
in the system Python okay so then it's
installing it and that's part of
installing flask it also installs a
bunch of other things like ginger to
work so I click it's dangerous and
markup safe okay
we're going to be using a couple of
those throughout this video now when we
have all this ready whenever you want to
run your app all you have to do is make
sure you are on your virtual environment
and then do Python app DUI
now AB py is the file we're going to be
creating just now so this won't work
until we have that file created okay
let's move on to the next bit of the
video what we're going to be actually
programming in Python so I'll see you
there in just a moment okay
now I've opened Visual Studio code to do
my coding but you can use any edits that
you want you can use notepad if you want
you can use vim or Nano you can use
sublime text you can use to add some you
can use pycharm
or you can use Visual Studio code
sometimes I myself jump between editors
depending on how heavy a task I want to
do and for something like this small
flask app I think Visual Studio code or
sublime text is a perfect tool but of
course if you want to use pycharm I
definitely recommend that for any larger
projects so it could be a good idea to
use that in order to get accustomed to
it
the first thing we're going to do is
we're going to create a new file and
we're going to call it a py
okay
I'm going to just ignore those
notifications but if you if you are
using Visual Studio code and you don't
have the Python extension installed I
advise you install it it just gives you
a nice syntax highlighting and some
autocomplete
now in our app dy we are going to be
defining what a flask app does what the
endpoints are what the things that the
user can type in the browser are and
what we're gonna do when the user types
something in the browser and presses
enter ie what happens when the user
arrives on our website so the first
thing we want to do is we're going to
create a hello world app using a flask
so that's gonna be a really simple app
the first thing we do is we are going to
import flask and we we do that by typing
from flask import flask and now we have
to create our flask app and we're going
to create a new variable called app and
call it flask and then inside the
brackets name okay
this underscore underscore name or as
Python coders call it dunder name is the
name of the file
as it stands in the current import tree
so it's nothing you have to really worry
about just know that it allows flasks to
identify this app that we've created as
something specific so it's always a good
practice to use underscore underscore
name but you can type in whatever you
want in there
next for our app we have to define the
route or the endpoint which is what the
user is going to type when they arrive
on our app so we're gonna do an app
don't route forward slash notice how the
four words as you say string and what
this does is this is a Python decorator
and if you're not sure what these are
that's totally fine you don't need to
know about decorators for this video we
can explain decorators in a different
video what this is going to do is going
to affect the function that's defined
directly below it okay so we have to
define a function directly below the
decorator and I'm going to call this
function home now but this decorator
does is it affects the function below it
and essentially as you may be able to
guess when the user arrives on this URL
on this endpoint this function is going
to run okay
notice how we only have to define the
endpoint and not the entire domain so
for example this could be my site comm
/ok www.vitac.com is a domain and the
end point what the user is accessing is
this forward slash okay another example
could be for example slash login that
would be an entirely different endpoint
and we would have to create an entirely
different route and function to go
assign to that endpoint okay so all
we're defining is the endpoint there and
not the domain flash doesn't really care
about the domain because it doesn't it
never sees it
now that we've got our function defined
we can tell Flass to give something back
to the user when they arrive on this end
point and we are going to do just that
we're going to return hello world
now whenever a function that has this
root decorator returned something that
goes straight to the user so when we
return something from this function the
user is going to see the words hello
world on their browser okay but of
course the last thing to do is to run
the app so we can do that app dot run
there
now what to do is to go back to the
terminal and run this app so let's do
that okay now we are in our terminal and
I have gone into the folder that
contains my app and remember the first
thing to do is to go into your virtual
environment if you are on Mac type
source VNV in activate and if you're on
Windows type don't back slash VM scripts
activate dot bat okay
once we have that we are able to do
Python app dot py if you get any sort of
errors at this point maybe because flask
hasn't been correctly installed or
because you're not on your virtual
environment to make sure that you are in
your virtual environment and that you
have done pip install flask now flask
runs pretty quickly and what it does is
it tells us where it's running on our
computer the address to your computer is
always one to seven point 0.0 point one
when you are talking about web stuff so
no matter what computer you are in the
computer always thinks of itself as
127.0.0.1 that's the computer's address
and the : 5000 just means the port in
which the app is running in order for
apps to not be able to access other apps
data every app runs on a single port or
maybe multiple ports but not to apps can
run on the same port so all this tells
us is the flask app is running on the
port number 5000 and no other app is
running on that port so we can know that
the flask app will receive this data
that we send on this port and nobody
else will so what we want to do is copy
that and go over to our browser we're
going to type it in and see what happens
well when you go to your browser and you
type that in you should see the words
hello world come out that's the content
of your page right now and
congratulations because you've just
built your first flask app but don't
worry we're gonna do a lot more in this
video other than the hello world app
now that we've got the hello world there
we've got a lot of things working we
have installed flasks we've got a
virtual environment we've created the
first route which is the forward slash
route and we've actually ran our app so
that's really quite a lot of stuff and
it's a really good thing to be able to
do all this already now we have to
continue and display our first HTML page
using flask so let's go and do that just
now
now we're back at the the editor we
should be able to create a new folder
inside our project make sure to not
create this folder inside the VM or
inside any other folder that you see
there but make sure that it is at the
top level beside app the py and call it
templates important it has to be called
templates nothing else no s can be
missing or anything like that
notice how this gets on on my editor at
least a specific icon
that's because templates this folder at
the top level means something for flask
this is where flask is going to look for
any HTML or ginger to files to serve to
our user we're gonna look at ginger too
shortly but first let's start with a
simple HTML file so create a new file
inside the templates folder and call it
home dot HTML
now HTML if you don't have any
experience with it is a markup language
so it defines the structure of any
content you want to give your users
there's got a couple of parts the first
one is a doctype
and that just tells the browser that the
file that is going to continue after
this first line is a HTML file notice
I'm at the end we've also got another
set of crocodile clips and a forward
slash and an HTML there that's because
this doctype also acts as an opening tag
and this here is a closing tag
everything in HTML or nearly everything
and relies on these opening and closing
tags so that we know where the content
is in relation to other content let's
write a little bit more code and then
we'll understand a bit easier
now we've got two more tags inside our
HTML tag we've got a head tag and a head
a closing tag and we've got a body tag
and a body closing tag inside the body
is going to go every piece of content
that we want to give our users for
example if we want to show some text or
some images those should go in the body
so what goes in the head if all the
content goes in the body well sometimes
there is some content that we don't want
to show our users but we want it to be
present so that it does something for
example in the head you may put some
code to color in your text as red
instead of black or some JavaScript code
to enable interaction on your website
those things that aren't things that are
shown to the user normally go inside the
head
let's put some stuff inside our body
tank so that we can then give this
template to the user and check that it
all works
the first thing I'm going to do is
create an h1 tag and an h1 closing tag
make sure that your tags all have both
crocodile clips are the Sun on the end
and the your closing tags all have the
forward slash
in here we're going to type my awesome
blog because that's what this is going
to be
now below the h1 tag we can type ap tag
P stands for paragraph and h1 stands for
header 1 the biggest type of header in
the P tag we can write some content that
we want to share with our users
something like that for example now this
is a very simple site and it doesn't do
anything yet but it's only for us to
learn how to give this page to our users
as opposed to just some text saying
hello world so if we go back to app dot
py we can now change this return hello
world for something else we want to give
them the file so how do you think we
would give them this file
some people might say that you would
just type home HTML here that seems like
a pretty reasonable assumption but
Python is not that smart
if you return home dot HTML in place of
hello world well all we're gonna see is
home dot HTML in our browser print it
out just like we saw hello world
so we have to do something else some
people might decide that hey since
Python or flask is looking in a
templates folder we can just not make it
a string and then it'll be a bit smarter
but unfortunately this won't work
because it would look for variables
called home and inside the home variable
it will look for a property HTML so this
is not really what we want and if you're
not sure what this would do and don't
worry we'll look at what objects and
properties are later on in a different
video indeed what you want to do is tell
flask to use the template and the way we
do that is by importing render template
so from flask we're going to import
flask and then comma and then render
underscore template and when we tell
flash to render a template it will go
into the templates folder and select the
appropriate template and give it back to
the user
so we'll do render template and then
pass in template as a string inside the
brackets okay so render on the scroll
template and inside the bracket is that
come right after it we're gonna pass in
a string render template is a function
just like home is and it can accept an
argument which is the name of the
template that we want to render and give
to our users now this is normally a
point where some people who already know
a little bit about computing me may
think well why is it called render
template surely the browser does the
rendering and you would be correct if
you've thought that the browser does the
rendering of the HTML file so why is
this called render template well it goes
back to that Jinja to a thing that i
mentioned earlier where flask can use
HTML files or it can use ginger to files
when you tell fast to render a template
all it does is it goes over the template
and it looks for any ginger code that
cannot be rendered by the browser and it
renders that into HTML so it converts a
ginger to code that we'll look at
shortly into HTML code and then it gives
that HTML code to the browser which then
also renders it and displays whatever
content is in it so there's two to
rendering steps in here ginger 2 to HTML
and HTML 2 viewable things in the
browser
now that we've got this render template
we can go back into the terminal and
runner up again we have to stop running
it first and run it again afterwards and
then we'll go back into a browser and
make sure that we're seeing the correct
thing so I'd advise you to do that on
your own and if if you're not confident
yet on how to go about that continue
watching I wouldn't do that here
notice how we have some things that have
appeared in our terminal since we last
ran our app we've gone three lines of
code and I'm pretty sure you'll have the
same three lines of code
we've got or or you'll at least have two
lines of code apologies I did refresh
the page you have a line of code like
this one that shows get forward slash an
HTTP slash one point one an important
thing is this 200 there at the end what
this says is the browser asked to get
this root for what slash and it used
this this way of requesting that called
HTTP hypertext Transfer Protocol and the
version is 1.1 the version of the
protocol used we're not going to get
into HTTP but just know that browsers
and servers like this flask app
communicate normally at least when it's
web related using HTTP and this get here
means that the browser wanted some
something from our server
the 200 means that the server thinks
it's okay to do that and everything is
working in the server in order to give
the browser that endpoint or the content
that's related to that endpoint that
means okay the browser is yeah I can
give you this because everything's
working and it does given that
another example is when we try to get
this slash far I can daunt ICO so what's
this we've not programmed this into our
flask app that's right
but for every website you visit browsers
normally try to load this favicon which
is the little icon shown on your browser
and as a an icon for the website and
every browser normally requests this as
well in order to show an icon for your
website as opposed to a blank icon again
it also used HTTP 1.1 but now the code
was 404 which you probably know means
not found so we didn't create this
favicon so it was not found if you
refresh the page you'll see that this
line appears again now whenever you want
to stop your app all you have to do is
follow the instructions that appear here
in case of Mac you press ctrl + C if you
press ctrl C the flask app stops and you
go back to your virtual environment and
we can run it again remember to have
saved your file before running your app
again otherwise you'll just run the same
app as before now when you go back to
your browser and you reload the page you
should see my awesome blanc and welcome
to my blog enjoy
now that is awesome because you've in a
few lines of code
created an HTML page and a flask app and
you've joined them together and you've
given them to your user some content
that is really cool and in some places
it can be really difficult to do but
with flask it's really simple
now that we've got our flask app running
with some HTML content Veen served we
can go ahead and start creating our blog
the blog is going to be really simple
it's just going to store posts and we're
going to give the user the posts that
are currently available and we're gonna
let them create new posts so let's start
with some sample posts and show them to
the user so it's a bit simpler and then
towards the end of the video we'll look
at creating new posts let's go back to
the editor
normally when you'd be creating a
blogging app or indeed any other app you
would use a database to store the blogs
and the posts and the users and so forth
for this app we're not going to use a
database because that can complicate
things quite a lot and we're already
sort of half an hour into this video so
we're going to use an in-memory database
now that's just a fancy term to say
we're gonna use a dictionary to store
our blog and our posts if you're not
familiar with dictionaries this may
start to get slightly less clear as we
go along but I'll try to explain as best
they can
we're gonna have our blog and it's going
to be our a global variable here beside
app and that is going to be a dictionary
now dictionaries are created by using
these curly braces and inside a
dictionary you can have key and value
pairs so for example inside our blog
dictionary we're gonna have the name of
the blog which is gonna be my awesome
blog okay now at any point we can access
the name by typing blog and the name
inside square brackets there if we do
this this is going to be equal to my
awesome blog because it's going to go
into the blog and see what's there as
well as the name of the blog we're also
going to have the posts if I can spell
and those posts are also going to be a
dictionary now if you already familiar
with Python this may strike you as a bit
weird why not use a list but all your
doubts will be cleared very soon
so that's it this is our database I
think that base stores the name of the
blog which is gonna be a static name for
now and the posts which will be dynamic
and we're going to start with a sample
post the sample post is going to be a
dictionary with the content 1 : and
another dictionary in their title first
post let me just explain what this does
in just a moment
okay so what have we done here well
we've got the name of the blog and then
we've got the posts key the posts are
themselves a dictionary which is going
to store each post that we've got
now we could oh sorry by the way I
forgot post an ID is one we could have a
list and a list would be a perfectly
reasonable choice to make here we could
say that the posts are this
let me just copy this here
we could make our posts into this list
this is only an example where for each
post in our list we have a dictionary
and the dictionary contains the post
info post ID which is one the title
which is first post and the content
which is hello world if we wanted to add
more posts we would just put a comma
after this dictionary and we could
create an entirely new post like so for
example post ID - and then call it
another one and then some different
content some other content
now our list would then have two posts
this first one and the second one and if
we wanted to access any of these posts
we could just find the correct post in
our list for example we could do
something like posts one to access the
second element on our list
remember list start counting at zero so
posts zero will give you this first post
posts one would give you this second
post so you could do this and that would
be totally acceptable but when it comes
to finding a specific post for example
if you have like 10 posts and you want
to and you want to find a particular one
and you don't necessarily know the order
and then it gets slightly more difficult
because how do you do it well the only
way to do it is to go over each post and
check some property that you want to
find until you found it now that's okay
for example if we wanted to find post ID
number two and we weren't sure which
order it's in we'd have to do something
like four posts in posts and if post
post ID is equal to two and then return
post you'd have to do this whenever you
want to find a post if you're not
familiar with for loops perfectly
acceptable don't worry at all this is
just sort of an extract try to explain
why we do this and dictionary instead of
a list the for loop goes over each post
and it gives you a variable for the post
that you're currently at so the first
time you go through the for loop you'll
have this as your post variable the
second time you go through your for loop
you have this as your post variable and
then we have an if statement that checks
if the post ID is equal to two which is
the one we're looking at and if it is we
return that and potentially we can use
it somewhere else
now if you have a thousand posts you're
gonna have to go over potentially 999
posts before you find the post you're
looking for not great so what can we do
instead well we can do this dictionary
and thing here which is normally called
a mapping and a mapping in this case is
from post ID to post what does this mean
well if we are looking for post ID
number two now we're using this mapping
we can do blog posts too and notice how
this is a dictionary and not a list so
this is not accessing the third post no
that would be if it were a list instead
what it would be doing is it was
accessing the key - which could be
something like this
okay blog posts gives you this
dictionary here and the two would access
the key to in the dictionary just as you
could for example access the posts key
in a dictionary you can also access the
key number to there and this allows you
to find a post by ID much faster than
going over your entire list of posts so
that's the reason why we are doing this
mapping there and I know it adds a bit
of complexity to our app I apologize I
just learned something really cool that
a lot of people don't know that you can
do this and it can save you a lot of
time in terms of searching for a post
okay but we're just gonna have a single
test post for now and we're going to be
creating more posts later on
so that's the end of that extra bit of
knowledge there let's go ahead and allow
users to go to a specific post the way
we're going to do that is by defining a
new endpoint a new route and I apologize
for seeing route and route and endpoint
all sort of interchangeably and they all
mean the same thing of course route and
router just remnants of a messed up
English and I've got the route we're
going to create here is slash post slash
and then int post ID now this is really
important because what it does is it
allows a user to go into this slash post
/ - for example this thing here will be
replaced by this - so when the user
types - in there it would be assigned to
a post ID variable and we will then be
able to look for post number two how
will it be assigned well
simple enough we'll have a argument to
this function so this post function is
going to be receiving post ID via flask
as an argument which is going to be
whatever the user types in their browser
if they type to post ID will be equal to
two if they type one it will be equal to
one and so on
now how do we find the correct post I'm
sure you can do this now knowing what
I've just explained about our mapping
how do you find the post that matches
this post ID
by the way when I ask you a question is
not because I think somebody's gonna
reply to me I know there are no you're
not
but you can pause the video and give it
a go really by programming yourself is
the best way to learn
so what I do is a post equal log posts
post ID simple enough we are now able to
find the post that the user has typed in
the browser and we can potentially give
them something okay and what we're gonna
give them is just the post title for now
we're gonna make this a bit more
complicated and of course put the stuff
inside a ginger template in just a
moment but once again what we can do is
go back to our terminal restart our app
then go back to our browser and access
posts sorry / post / 1 and that should
give you post with ID 1 and it should
give you first post as the content let's
do just that first thing to do
restart your app so once again ctrl C
and type Python app dot P way again by
the way if you're on Mac or Linux I am
pressing the up arrow the arrow to go up
and that just goes back to e previous
and command R I typed so it lets me go
back to Python app top py very quickly
now that's running again let's go over
to a browser we're back at our browser
and we can restart or reload this app
notice how our homepage has not changed
but if we go over to slash post
slash one
we see first post
now mic drop or whatever it is you want
to do that is pretty amazing because now
we have an in-memory database that has
been initialized with a single post and
we are able to give the user some data
related to that post
you can imagine how if you save this
this dictionary to a to a file for
example how you could make a reasonably
DIY database and that persists across
sessions but we're not gonna do that in
this video but just to give you an idea
of something you could do if you want it
now that we have some data from our
first post we can go back and display
this in a slightly nicer interface by
giving the users each gene jattu
template let's go and do that
we have our app working and we have
shown the user some data and related to
the post that they are interested in now
let's go and give them the post in a
slightly nicer way by creating a
template for it so right click your
templates folder and create a new file
which I'm going to call post don't HTML
and we're gonna change this post or HTML
in a moment by the way but just know
that there are a few things that you
have to do when dealing with HTML files
or indeed when sending something that
the browser will think is HTML the first
thing is the doctype okay you need that
otherwise the browser may be confused
then we're gonna put in our head and our
body and I know we're not putting
anything in the head but you know it's a
good practice to have that in there just
in case you do want to put something now
in the body we want to show the user
some post info we can show the user some
post info by using ginger too now ginger
too doesn't care whether this file is
called post HTML or something else but
it's just normally a good thing to
rename this file rename it into post not
ginger too
also that way your editor as long as you
have a ginger - extension available can
also help you with syntax highlighting
in this case and visuals to your code I
don't have the extension for ginger -
installed or maybe there isn't one I
don't know I don't use visuals to your
code that often it's not giving me
anything but if you have a different
editor that does support ginger - it may
help you of course if you cannot find an
extension for ginger - and you want the
HTML syntax highlighting just keep your
file as HTML that's totally fine okay
now we've got this saved and we can go
back to our app dot dy and we can do a
return render template of post
don't ginger too
and to this template we're also going to
give it something else which is the post
now post equals post there is something
that looks a bit redundant redundant and
looks a bit redundant and but it's not
this is a key word argument in Python
and what it does in the context of
render template is it allows a template
to access a variable inside the template
called post the value of that variable
is going to be your post variable that
exists within this function okay so may
sound a bit confusing if you want to
rename this argument as something else
like template post or something not that
I recommend you do this but if this
helps you understand it a bit better we
can rename it to template post so again
inside your template you will have a
variable called template underscore post
and the value of that variable is going
to be the value of your post variable at
this point in time okay so the variable
in your template is template underscore
post now let's save this file go over to
our template and what we're gonna do is
create an h1 tag now that visual sugar
is not giving me or a complete I have to
type my own tags but that's fine an
inside the tag notice how it's not sorry
not inside the tag but within the
contents of the of the tag we're gonna
type open close open curly brace twice
so two curly braces and then two closing
curly braces this is ginger to syntax
whatever goes inside these double curly
braces will be used as a change a two
value so what we're gonna do here is
template underscore post title
remember is our variable that we pass to
our template here the value of which is
our post dictionary that we got from
here and the title property of that post
is first post so that's what's going to
appear inside our h1 ok at this point I
think it's a bit clearer which one is
the variable that we're passing to the
template and which one is the variable
that it's in our local function so we're
going to rename it to post in here and
to post in here
that's just so the template is using a
variable that has a reasonable name post
as opposed to template post again you're
free to keep it as template post if you
want going back to our template we're
gonna type AP tag and here we're going
to type post content
okay very simple it has no sky
so ever so no CSS involved in this
template but you could style it if you
know how to if you don't that's
something for an entirely different the
video or indeed if you are interested in
learning much more about building web
apps using flask and Python do check out
the link in the description below and
sorry just a bit of advertising there
okay
now we have our template being rendered
and a post being passed to it the
template is then using it to display
some information let's go back and
display this template and see what it
all looks like
okay going back to our terminal notice
how I've got some errors there don't
worry about them you won't see them okay
that's just them Safari being a bit
weird and on auto completing my URLs and
it autocomplete it into a post that
didn't exist we're gonna look at exactly
fixing that in just a moment what to do
once again stop your app restart it go
back to your browser and refresh that ah
how awesome is that
in just a few lines of code you have got
two pages up and running and one of them
is dynamic depending on what the user
put in and you are able to display
information about your home and also
your posts now not all is perfect
however we've made a very common mistake
in Python which is that what happens if
the user wants to go to post number two
now that also looks like an HTML page
but it's not one we put in there and
also it's not really that that
interesting internal server error we
don't want that to happen so let's go
ahead and fix that in the very next a
bit of video now flask is really helpful
when it comes to telling you when things
apologize when things are going wrong
and in here you have in your logs you
have everything that went wrong you have
an error in app exception on slash post
/ - it didn't like that now it tells you
everywhere that the error went through
so the error happened at first the error
first occurred or flat first notice the
error when it did the dispatch now there
was an error there so flask handled it
you in this function there then it
reraised it then it raised it at some
point and at some point there was the
request was dispatched then flask was
looking at your view functions of which
your endpoints are two of them and there
in your view function is the error okay
so at the very bottom of your trace back
this is this thing is called the trace
back at the very bottom of it you'll see
you'll you'll normally see the source of
the problem okay sometimes the source of
the problem can still be your code but
it's not at the bottom it can be
somewhere in the middle so just make
sure to look through until you see your
code normally the problem will not be in
flask or in Python or in virtual ends or
in your browser normally but this mean
99.99% of the time the problem will be
in your code okay so either you've
written something incorrectly or there
is a problem and in this case there is a
problem so in this line post equal log
and then we access the posts of that
blog and then we access post ID we got a
key error
says to and that's it so too is the
Kiera we try to access post ID number
two but it didn't exist because we only
have a key ID number one in our posts so
what can we do whenever the user access
is the wrong ID or not the wrong ID but
whenever the user accesses an ID that
doesn't exist we are essentially
crashing and telling the user something
happened we don't know what we don't
want to do that when the user access is
a post that doesn't exist we maybe want
to show them a nice page telling them
sorry you've accessed a post that
doesn't exist let's take you back to the
home page or something let's do that
right now
so we are back in our code and we have
this square brackets post ID and
whenever you access something in a
dictionary using the square bracket
notation and that something doesn't
exist your app is going to crash and
burn
so Python has or dictionaries have a
pretty handy thing you can do instant
which is don't get post ID
and that's it that that will fix it not
quite it won't quite fix it but what
will happen now and feel free to save
this and try it again
what will happen now is that your code
won't fail on this line
but what happens is that post if you try
to get post ID number to post will now
be none post we beat none if not found
ok so that's what the get function does
it if this thing here is not found in
the dictionary it returns none unless
you tell it to return something else ok
so you can tell it to return like hello
and then post would be hello if not
found obviously we don't want to do that
so we're just gonna leave it as none but
your code would still fail except it
wouldn't fail in your Python code it
would fail in your ginger to template
because you would try to access this
title key of the post matelassé and the
post would be none and of course you
cannot use square bracket notation on
none you can only do it on dictionaries
and lists in any iterable in fact just
to keep things correct so what can we do
well first thing we can do is if post is
not none return this template here
that's it
only is not none is implied it's not
really implied but it's sort of implied
and you can just type if post okay
nun evaluates to false when you are
doing an if statement so if post where
nun then this will essentially be false
and if false this would not run this
thing here only runs if this is true
okay so if post is true meaning it is
not nun we return this template II
however I don't like this and this is
not the most pythonic way of dealing
with this problem there is a more
pythonic way that is what I will advise
and it's that you do if not post okay so
if you find the problem you can deal
with it and you can sort of do something
here if this is a problem if you
encounter another problem you can also
deal with it if you contour another
problem you can also deal with it and
eventually at the very bottom of your
function I would sign of any if
statements you have what your function
should do should everything go well that
is more pythonic that's normally what
Python developers do and it's it's quite
nice because you can see what you want
to do if there is a problem
so if not post meaning if post is none
what do you want to do and this is what
we're gonna do we're gonna do
you
we're gonna do that now I just typed
that quickly for you because we've
already seen this before we're gonna
return a render template of 404 dot
Jinja to which it doesn't exist yet but
will in a moment and we're passing it a
parameter as well sorry an argument as
well which is message just like here
we're passing post to this postage into
to to our 404 Jinja to we're gonna pass
message and the message is gonna be a
post with ID post id was not found this
post ID is what the user requested and
we're gonna show the user a page that
shows this this message there for some
information now I told you the beginning
of the video which was a while ago that
some part of this code would only be
runnable with Python 30.6 this is one of
them if strings is Python 3.6 thing you
cannot use it if you are in Python 3.5
or below
okay so if you are on python 3.5 or
below you're gonna have to find a
different way to do this and that
doesn't involve f strings or you could
do the most awesome thing and the thing
that i recommend which is install python
3.6 m let this be the perfect time for
you to upgrade and move on to the future
with me okay so we've got our f string
and that's gonna be the message we're
gonna pass 404 dot ginger - so what do
we do now well you guessed it
we'll go and create 404 digit - and by
the way I'm calling this template 404
ginger - because the problem here is
that the user looked for a post that
wasn't found the post wasn't found so we
want to present the user with a page
that reflects that the post that they
looked for was not found 404 as you know
is the code that is used for when things
are not found so and that's why I called
it that
and once again we have our head and our
body
and in here we can
to each one
you
you already know all of this stuff so
all we've done is put an h1 in there not
found and the message variable that we
passed in inside our P tag
now feel free to rerun this code I'm not
gonna bore you rerunning this constantly
and if you want so feel free to rerun it
and see what happens there but I am
confident you will see a proper error
message now returned of course you can
improve that page on the link back to
the home page if you know how to do that
and if not we're gonna teach you how to
do that in just a moment but now we have
our posts being shown the next thing
that we want to do is of course be able
to create them so let's do that just now
and that's gonna be a slightly more
complex thing but not too much
do not worry let's go and do that just
now so what to do is first of all let's
delete our sample posts we're not gonna
need those anymore
and the next thing we're going to do is
we are going to create a new template
the template is going to be called
create dot ginger too only it doesn't
need to be a ginger template because
it's not going to require any variables
so we're gonna do HTML okay now doctype
head and body and in the body we are
going to put an HTML form if you've
never used HTML forms do not worry
all that they are our fields that you
can put things into and then as you fill
them in you can then eventually submit
the form and the data in the form gets
sent over to flask or whatever server
that is in the background and they can
use it if they want so what do we need
in order to create a new post
well posts had post id title and content
the post ID is auto-generated we're
going to just create a new post ID for
each post as we go along so we don't
need to pass in post ID but we do need
to pass in the title and the content so
let's do that we're gonna create a form
and the form method is going to be post
now this is very similar to this gate
thing that we saw earlier in the flask
logs we're going to look at exactly what
that is in just a moment
now we also need the two fields input
type is text and by the way apologies
this is just me being too pythonic
normally in HTML you'll use double
quotation marks for strings so it's
always a good idea to adhere to that
you
okay so these are the first examples of
HTML tags we're seeing that don't have a
closing tag they are self closing so you
can just put a forward slash crocodile
clip in there and they become self
closing and that's only possible because
these tags don't actually have any
content in them the users gonna type the
content so we don't need to have a
closing tag as normally between closing
tags you put whatever it is that you
want that tag to contain okay and I mean
by that I mean between tags you put
whatever it is you want the time to
contain
okay so now we can go ahead and save
this and go back to our app top UI and
we aren't going to show it by the way if
you have any experience with HTML you'll
know that that form I've just created is
pretty shitty and we're going to improve
that in just a moment okay so don't
despair
again app dot route slash posts nosh
create and now we're going to add
something else after the slash po /
create whenever that browse our accesses
and endpoint it will always do so using
get
however our form is using post because
post is normally used to send data and
indeed when the form gets submitted it
is going to send us some data and it's
going to do so via post so flask allows
us to create endpoints that can accept
multiple of these verbs and they are
called HTTP verbs and what we do that is
get
and post there so that's methods equal
and then inside the list we have get and
post now this method will accept get
requests which is what the browser is
going to do when it accesses the page
and it also access accepts post requests
which is where the form is going to do
when it sends us the data okay then
we're going to define our function and
now we have to do one of two things if
we are receiving data we have to process
it and add it to our blog if we are not
receiving data we want to show the form
so that the user can can send a state
okay so for that we're going to include
a third import from flask so from flash
we're gonna import flask comma render
template comma request
okay and this request is the current
request the users making that really is
slightly abstract and probably not very
easy to understand but just know that
when the form gets submitted and it
sends us a post request request is going
to be that post request and that
contains a data when the user asks us
for the page using the browser and the
sensor the get request the request
variable here is going to be that get
request so at any point in time request
is the current request that has been
processed so if requests stop method is
post
then we can process the data there
however if it is known then we can
return a render template of our create
dot HTML template make sure to use the
correct extension there otherwise flask
won't be able to find it of course
now we are not doing anything with post
requests just yet we're gonna deal with
them in just a moment and everything's
gonna become more clear as we complete
this app now let's go over and try to
run this and see if we can see this
template and of course feel free to
check this 404 doe ginger too as well if
you haven't done so already and by the
way something I always forget to add to
my forms or something that you need
which is this input type submit that's
the submit button without which you
cannot submit the form okay so important
thing to add there now that's it let's
go and check this out in our browser
okay just stop the app and restart it
and let's go over to our browser by the
way I've just ran this not found page
just to make sure that it works as you
can see you get the correct page there
and then if you go to slash create you
get your amazing form you don't know
what any of these fields are but we're
gonna fix that in just a moment this is
the title and that's the content so we
can do something with them
what would happen if we press submit
seemingly nothing and well that would be
correct all that our endpoint is doing
is it's doing nothing if the request is
post but then it is always rendering the
template again so even when we submit a
post request we're still rendering our
create dot HTML template so let's make
sure that we don't necessarily do that
let's go back to our code and make sure
that we process the data and do
something a bit more useful when we
create a new post okay so if we have a
post request we want to do some
processing of data and that's really
quite straightforward we can get the
contents of the fields very easily using
flask so let's let's create a new local
variable called title and that's gonna
be request form don't get title now you
can imagine what this does it goes to
the form that is included in the request
and it tries to get the title field the
contents of the title field this title
string there by the way is if we go back
to our form the name of the field okay
it's not the ID the ID is used for
something else it's the name ok and the
content is request not form look at
content again that's the name the post
ID is going to be the current number of
posts in our dictionary of posts so when
we have 0 posts that's gonna be 0 when
we have one post that's gonna be 1 and
so forth
so we can do that with the Len function
the Len function in Python gives you the
length of something over an iterable so
in this case the dictionary's length is
the number of keys in it if you have a
single post that will be just the one
and the length will be one so when you
create your first post that will be
added here as zero and a new dictionary
and then when you create another one
it'll be added there is one your new
dictionary and so on
okay finally all we have to do is put
this post in the posts thing there so
blog posts post ID this is how you add a
new key to a dictionary by the way blog
posts gives you this dictionary here and
then using square bracket notation you
can say square bracket something that
doesn't exist yet
equal something and then it will create
this key for you
it won't give you an error it only gives
you an error if you try to access
something that doesn't exist but if you
try to put something in there it won't
give you an error it will just create it
for you that's something that's really
good and then the post ID is going to be
post ID the title is going to be title
and the content is going to be content
remember these are just those things
they're post id content and title there
is going to be placed inside a new
dictionary and that dictionary is going
to be this post idea within the posts
within the block
so remember fiction ''tis don't have to
be in multiple lines or anything like
that if it's a short dictionary like
this one you can just have it in one
line as long as you find that easy to
read you can also of course split into
multiple lines if you want finally what
we want to do is not rerender the form
you don't you don't have to assume that
the user wants to add another post after
they've added a post already so what
we're going to do instead is make an
assumption about what our users want and
we're gonna send them over to the post
that they've just created okay what to
do is we're going to have to go over to
the top and import two more things from
flask we're gonna import redirect and
that's used to send the user to a
different endpoint altogether and we're
going to also import the URL for and
that's used to construct the URL that
we're gonna send the users to okay so
again we're gonna now return a redirect
and where do we want to redirect the
users well here's what the URL for comes
in handy URL for how do we create a URL
we have to give it the function name of
whatever thing our sorry the function
name of the function that is associated
with the route so in this case it's post
now notice that this endpoint here needs
a post ID so we just do that by passing
post ID equals post ID here notice how
all of this is inside the brackets that
match URL for so you're gonna pass the
function name post and any arguments it
needs post ID in this case and that's
going to be equal to the post ID that we
have just calculated so we calculate the
post ID we put it into our database and
then we redirect to that same post ID
make sure that you do that after the
post has been added to your database of
course other otherwise you redirect them
to a post that there's an exist yet so
that's just something to keep in mind
that is pretty much our app done so
let's go ahead and try to create a new
post and have a look at it let's save
our app and go over to the terminal
restart and go over to your browser as
well I'll skip the terminal restarting
just because you already know how to do
that
we're back at safari and if you want to
refresh your page don't submit the form
and then reload because then safari or
potentially your browser we resubmit the
form and things can get quite confusing
should just ask your browser to go to
the URL again by going to your URL there
and pressing enter that is going to make
the browser make another get request
instead of redoing the last operation it
did we've got our form back here we can
type something in just to check voila we
have created a post notice how it's post
zero and that's it the title and the
content are saved and they are in your
database so that's pretty awesome now
what happens if we go back to the home
page we've got still my awesome blog and
welcome to my blog and so forth but of
course the users are not going to be
able to find any posts so the last thing
we're gonna do in this app is add a list
of posts onto our home page let's do
that just now
we have our app fully working we just
need to be a bit nicer to our users and
make sure that we can show them
everything that we want to show them and
that includes a way to find posts in our
blog now what we're gonna do is into our
home HTML template we are going to pass
the blog
dictionary here as the block argument
now home dot html' stops being a plain
ol HTML file we're going to rename it
into home ginger to
just so it's a bit more obvious that
this has ginger to code and in here we
can open it and change a couple of
things in here
instead of my awesome blog being
hard-coded as the name we can use blog
name
so that we'll use the name that is
inside this property there and then we
can leave this welcome to my blog and
join in there that's fine but what we're
gonna do now is we're going to have a
list of the posts that are available
this is the most complicated ginger to
code that we're gonna do in this video
so stay with me and let's have a look at
it in order to make a list in HTML we
use the UL tag that means unordered list
okay that's just gonna use bullet points
if you type o L instead o ll that would
create a numbered list or an ordered
list we have our UL here and what we
want to do now is create a new list item
for each post that we've got inside the
list item we're going to have an a which
is an anchor a link link to somewhere
else the href the hypertext reference is
where the link is going to point to
where the link is going to point to is
the post page for this specific post
okay
we're gonna put something in there in
just a moment
inside the a notice the closing tag here
so inside the a we're gonna have the
post title okay so this could
potentially be something like my post
okay
but of course we don't have the posts
because all we have is the blog so what
can we do well fortunately ginger gives
us a for loop that we can use inside the
ginger template and we can use it to go
over each post and look at the post
properties so let's do just that the way
to do a for loop in ginger is you do
open curly brace % okay open close open
curly brace % and then % closing curly
brace now inside over here we can type
ginger - ahem functions and generally
other statements
for example the for loop is one of them
so 4 4 is the keyword is the digs
followed by the way are exactly the same
as Python for loops ok
so we have to iterate over our blog
posts so we could do for example
something like this let's see if you
spot the error for post in blog posts
do you spot the error
I wouldn't expect you to but hey if you
know this much about dictionaries then I
don't really have anything else to teach
you
posts blog posts is a dictionary so when
you iterate over a dictionary in this
way all you get are the keys so every
time you go over your post the post
would be first zero because that's the
first ID you're gonna have then it would
be one because that's the first ID
you're gonna have then it will be two
and so forth so you never actually have
access to the post itself unless you do
and blog posts post which is really ugly
but you can do that so what we're gonna
do is instead we're gonna say post ID
comma post for possibly compost in blog
posts don't items
but it is only Python 30.4 and above I
want to say if you are on Python 2.7
then you may have to do something
different here but I'm not sure off the
top of my head what you'd have to do so
yeah good luck use Python 3 basics for
pose ID come a post in long posts on
items and what items does is allows us
to iterate over key and value pairs so
every time we go through the for loop we
have now two variables post ID and post
you know what they are post ID is the
key post is the value which is a
dictionary and by the way all Jinja to
for loops need an end for ok just so it
knows when to stop repeating things
whereas in Python you can use
indentation levels for that now that we
are inside our for loop we can copy our
list item
and instead of my post we can type post
title
excel and in the atria
remember how told you this is very
similar to Python we can use some of the
flask variables for example URL for this
is completely bonkers man the first time
you're doing it but worry not URL for
the function that we want to redirect to
that's the post function now let's go
back to our app view why remember we
want to look at a specific posts so
that's this function here and it needs a
post ID so very much like what we did
before
both underscore ID is post on the
squared D remember that's this variable
here and the argument is called post ID
so that's it we are now able to have a
complete list of posts on a home page of
course and do remember in your app be
why we have renamed home dot HTML to
home don't change it to so change that
otherwise it won't work
now we can go and restart our app and go
over to our browser and try it out let's
do it so we're back here we can refresh
the page and we don't see anything why
not we created a post earlier well
that's the thing with in-memory
databases as soon as your app stops or
you restart it you lose your posts sad
but true if you wanted to persist your
posts and keep them between sessions or
between app runs you would have to use a
database or save your dictionary to a
file so in order to check that this
works we have to create a new post so
let's do it
you
now we have our new post we can go back
to a home page and we see our post here
and what's best you can click on it and
it takes you to the post page
something that you may have noticed
there is that our form looks pretty ugly
still so what you've seen up till now is
your first flask app we've created an
app from scratch from zero and we have
served our users with content we have
allowed them to send us data we've used
that data to create more content inside
our app and well overall we've created
quite a dynamic experience a bunch of
things are missing like improving our
user interface I think styling
potentially adding more user
interactivity and things like that
however as a bare-bones flask app to
introduce you to flask and what it can
do I think this is a perfect perfect
project again if you're interested in
learning a lot more do click the link in
the description below
it's my course that is pretty long 16
and a bit hours and and it covers a lot
of this stuff and much much more
including HTML Javascript MongoDB and a
bunch of stuff really cool now if you
are so interested we can continue and
fix that form a little bit just just to
give you a bit more of an idea of what
you can do let's do that if you are
interested if not you can just stop here
if you want
well thanks for staying with me now we
can go and improve that create HTML
editor a bit so what do we have here
we've got the input and another input
and another input one after another
inputs are what's called inline elements
so they are a specific width in this
case they're no very big and they appear
one after another as you can see from
our page there appear all on the same
line it's not very pretty certainly not
very readable so what can we do well we
can wrap them in divs okay what's a div
here you say it div is a block element
now divs appear beside each other one on
top of another as opposed to one beside
the other that's the difference between
inline which appear in a single line and
block which appear in different lines
and different blocks okay so now we have
all our elements one on top of another
and that's gonna look slightly nicer I
know what this looks like in my head by
the way so I'm not going to be
refreshing the page constantly but feel
free to stop the video type this out
refresh the page check what it looks
like just so you develop a bit more
inside knowledge on how this all works
now that they are one of them of another
we also want to add a label a label in
HTML is not only a piece of text that
accompanies a field
but it is also something that screen
readers can use so when you have an
input field and you have a label and you
have this for property in that label
that label becomes associated with the
input field and now when somebody who's
blind or or who's using a screen reader
for some other reason it comes along
they will be able to very easily read
this content of this label that is
associated with the input field so this
is just a really good thing to do let's
do this okay and similarly label for our
content and it's gonna be content now
something else I didn't like about the
form was that and the content field was
a single field so if you want to write a
long post it's not really that easy and
you can't type new lines and things like
that so we can replace the input field
by a text area and we can remove this
type equals text from there now that's
gonna be a longer longer box that users
can type
okay a few more improvements that we
could do is we could use ginger to
inheritance to save us from having to
write a doctype on every file and so
forth so each template can inherit from
another template and only modify
specific parts so for example we could
only modify the body that would be a
good improvement to make more stuff we
could do could be to use proper styling
like bootstrap and the course that is
linked in the description does cover
bootstrap - it's a really good library -
very easily add styling to your apps and
we could do a bunch more things
including add a JavaScript and so forth
but as I said before this is a really
great first project if you want to learn
more about web how the web works how
flash works and also learn a bit of
Python in the process as well so I hope
you've enjoyed this video I know that is
very long so thank you for sticking with
me until the end and that's it from me
so thanks for joining me and hopefully
I'll see you in that course or on
another video see you soon
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>