<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Phone Authentication in Ionic with Firebase | Coder Coacher - Coaching Coders</title><meta content="Phone Authentication in Ionic with Firebase - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Samarth-Agarwal/">Samarth Agarwal</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Phone Authentication in Ionic with Firebase</b></h2><h5 class="post__date">2017-11-25</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/3tlSUMsEqAA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello and welcome back to my channel I
am some earth and in this lecture we are
going to do something really fun we are
going to build a feature for ionic where
we can verify the phone number of a user
using an SMS so how this works is that
whenever the user makes a request an SMS
will be sent to the users phone number
and that SMS will contain a six digit
code which the user can then enter in
the app to verify that the phone number
belongs to them this is a typical
scenario these days because all
transactions generally require you to
enter that six digit code it is often
referred to as OTP or one-time password
so that is what we are going to
implement in this lecture in a blank
ionic application we don't need to pay
for anything everything is free of
course because we are going to use
firebase to implement all this
functionality and for the ionic side we
are going to use an open source plugin
which we will install in an ionic
application and it will do most of the
job for us so the first thing that you
need to do is create a blank ionic
application I have my application
created right here so the name of my
application is SMS verification I'm just
going to open this project in Visual
Studio code so here is the project it is
opened inside Visual Studio code so as
you can see that this is a blank ionic
application and the first thing that I
am going to do is run this ionic
application in an emulator so I'll just
type in ionic Cordova run Android and
this might generate some new folders in
my application and you can see that a
new configured XML file is also created
that's what we needed
so head over to your conflict would
examine and here you have a name or a
unique identifier for your application
change it to whatever you like I'm just
going to change it to condor some earth
dot SMS I'm gonna save it and now I'm
just gonna close my contract what XML
that's everything that's pretty much
everything I needed to do on the ionic
side right now
we'll come back to our ionic application
in just a moment now we need to create a
new project on firebase so head over to
your firebase console it should look
something like this click on add project
and here you need to type in the name of
your project once this project is
created you will have to add an Android
app to your project
our main objective as of now is to
download Google services dot JSON file
from firebase into our ionic projects
root folder so click on project overview
click on project settings and here all
you need to do is click on add a
firebase to your Android app here you
need to provide the unique identifier
that we just configured in a conflict
but examine I need to provide in an app
nickname which I am just gonna leave
blank for now and you can leave this SHA
field blank
but to allow your application to request
Google or firebase to send SMS to your
phone number you need to provide in this
essay chip this is really simple just
open up a command prompt and type in
this command so we are basically using
key tool to generate a debug sha-1
certificate so basically you can type in
this command and generate your sha
fingerprint the squared and press enter
and this will give you a number of keys
just copy the sha key that you get here
come back to firebase paste in that sha
key and click on register app now you
are ready to download Google services
dot JSON file so just click on download
and save this file into your ionic
projects root folder
done hit continue and now you can click
on finish so you have successfully added
your Android app you have also
downloaded the Google services dot JSON
file and now all you need to do is just
enable for authentication so just head
over to the authentication section click
on sign-in method and here you need to
enable for north indication so just
click on phone enable and then save ok
and I have created another video where I
have completely explained firebase
authentication using Facebook make sure
that you check out that video as well
now we are done with the firebase part
now let's head back to our ionic
application and install the plugin which
is called cordova plug in firebase this
is not the official Cordova plugin for
firebase instead it is a fork of the
original plugin and this is an amazing
form because the author just Castro has
added the function verify phone number
to this plugin
so this is one additional feature that
he has added into the official plugin
and therefore this plugin is not the
official one I hope that either this
plugin becomes official one or the
official plugin adds the verify phone
number feature soon but until it does we
have to use this plugin come back to
your ionic app in Visual Studio code and
just install this plugin so to install
this plug-in all I have to do is just
type in ionic Cordova plug-in add and
then the URL which you can find right
here come back to Visual Studio code
again and paste the URL to the great
repo right here press ENTER and this
will install the plug-in into your ionic
application and the plug-in has been
installed so now that the plug-in has
been installed let's head over to our
page and designer page so that we have a
few buttons and a text input to interact
with so I'll just head over to my home
dot HTML and inside my iron content I'm
gonna delete everything and I'm just
gonna paste in some ionic HTML code so
here I have a button this button is a
block button which calls the function
send we will create this function in
just a moment and this button actually
sends a request to say
an SMS to our phone number secondly I
have an ion input here where we will
type in the code that we receive on our
phone this is bound to a variable called
code using ng model lastly I have
another button which is bound to a
function called verify and this button
will be responsible to verify whether we
have typed in correct SMS code or not
lastly I am just going to change this
title as well and now that we are done
with the UI I'm just gonna head over to
home dot ts file and start writing all
the functions here so first of all I'll
create two variables one is called
verification ID and the other one is
code so this code variable is actually
bound to the input field in our view and
this verification ID will be required
when we get authenticated successfully
so let's start by typing in the code for
the send function so I'll just go ahead
and paste in some code here and this is
a very small piece of code which I am
just going to explain as well so we have
the firebase plug-in object available to
us on our window object because we have
installed the plug-in and on this
firebase plug-in object we have the
function verify phone number this
function takes in three parameters the
first parameter is the phone number
which is my phone number
the second parameter is the timeout in
seconds so I have a specified 60 seconds
as the timeout value and the third
parameter is a callback function which
is executed if the request for SMS
succeeds and in that case I'm just going
to alert a message SMS sent successfully
and I am going to log the credential
which I receive as a response to the
console inside this credential I have a
verification ID which I require while
very fine the SMS code so I'll just save
the verification ID from this credential
object into the verification global
object that I have created right here at
the top and if something goes wrong we
have the error callback here and I'm
just going to simply log the error to
the console so this is all the code
which is required to send the SMS now
all we need to do is write the code to
verify the code that the user types in
our input field to do that we will need
the firebase node module so we'll just
in
all that now while the fire base module
installs head over to your app dot
module door TS file and import firebase
here so I'll just type in import star as
firebase from firebase ok now I need to
configure this firebase module so I'll
hit that to my firebase console click on
project overview and then click on add
another app here you need to click on
add firebase to your web app and this
will give you a lot of conflict so just
go ahead and copy the config object and
come back to your Visual Studio code
inside your Visual Studio code all you
need to do is just type in firebase dot
initialize app and this will take that
JSON object that you copied earlier as a
parameter so just paste in that and you
are done so you have successfully
configured firebase now close your app
dot module dot TS file now you need to
import the same firebase module in your
home dot ES file as well now we are
ready to create our verify function and
here I'll type in let
sign-in credential this is an object
that I am creating and this will be
equal to firebase which is a module that
we have just installed dot auth dot
phone auth provider dot credential and
this credential function takes in two
parameters the first parameter is going
to be the verification ID that we
received during our send function and
the second parameter is going to be the
code that the user types in in the input
field so it will be equal to this dot
code okay so now we have the credential
stored inside our sign-in credential
object and now all we need to do is sign
the user in using this credential so
I'll just type in firebase dot off and
this time this is going to be a function
and this function returns an object on
which I am going to call in another
function called sign in with credential
and this function will take in a
parameter which should be a credential
we have a credential inside sign in
credential so we'll pass in that
now if the authentication succeeds the
promise will run and we will get some
info in the response okay so I'm just
gonna log all this info to the console
okay and if something goes wrong the
error callback will run and here also
I'll just log the error to the console
so that's pretty much it if the
verification succeeds then this success
callback will run and info will be
logged to the console and if the
verification fails in that case an error
will be thrown and the error will be
logged to the console now it's time to
run this app and see everything in
action but before we do I need to deploy
this application on my real phone
because we cannot test this
functionality on an emulator okay so
here we have our app running on the
right side of the screen
you can see the preview of my phone and
on the Left I have remote debugging
tools from chrome running so that I can
see all the console logs or errors if
any so the first thing that I'm gonna do
is tap on the send OTP button and see if
I get the alert which says SMS sent
successfully so I tapped on the button
and you can see that I get the alert SMS
sent successfully
and I also get an SMS from Google the
code is five nine five nine four one so
now I need to enter this code in the
input field in my app so I just tap on
the input field and enter this code and
I'll tap on the verify button and you
can see that I get a verification ID
which I got when the SMS was received
and I also get another object which
contains the authentication information
and it shows that my authentication went
through and the SMS code that I entered
was correct otherwise I would have
gotten an error here so now that we have
got this object let's head back to our
firebase console and see if we get a
user created there so here I am back in
my firebase console I'll go to my
authentication section
and here you can see that I have a new
user created and the identifier is my
phone number so this proves that the
user has been logged in to my app using
their phone number and the way we
verified their phone number was using a
one-time password or OTP so this is how
you can implement phone authentication
or OTP verification in your ionic apps
for free using firebase make sure that
you do not exploit this method because
if you exceed the limits specified by
Google then your account may get blocked
and you will not be able to use the API
at all so keep an eye on your usage and
make sure that you check out the
limitations is specified by Google so
that was it for this video I hope you
enjoyed it feel free to drop in your
comments about this video thanks for
watching</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>