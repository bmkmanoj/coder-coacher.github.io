<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Take and Upload Photos to WordPress from Ionic App | Coder Coacher - Coaching Coders</title><meta content="Take and Upload Photos to WordPress from Ionic App - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Samarth-Agarwal/">Samarth Agarwal</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Take and Upload Photos to WordPress from Ionic App</b></h2><h5 class="post__date">2017-07-04</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/wMEkHYjuxSU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello and welcome to another video on my
youtube channel I am somewhat agrawal
and in this video we are going to create
an ionic free application and in that
application we are going to create the
file upload functionality so basically
our application will be able to click
pictures using the devices camera and
then will upload those pictures to a
remote server for this video we are
going to use WordPress as a server and
the pictures that we click using this
application will be uploaded to our
WordPress installation and the pictures
will be displayed in WordPress media
library so as you can see that I am
creating a new application here it is
called file upload and while this
application is created let me brief you
on how we are going to achieve this task
so the first thing that we are going to
do is click a picture to click a picture
we are going to use our neck native
Cordova plugins so will install this
Cordova plug-in camera and ionic native
/ camera node module and then we will
use this plug-in to capture a photo once
we have got the picture using the camera
module we'll upload that picture to our
WordPress website using this transfer
plug-in this is also Cordova plugin so
we'll install the code of a plug-in
called Cordova plug-in file transfer and
we'll also install the ionic native
wrapper for that so our application is
now created so I'll just open this
project in Visual Studio code real quick
and let's get to work so the first thing
that we do is install everything that we
have just discussed so the first thing
that we'll do is install record over
plugins camera and we'll also require
the ionic native / camera node module
which is a wrapper for this Cordova
plugins so we'll install that as well
we'll also need the Cordova plug-in file
transfer so we'll install that
and along with that will install the
wrapper for this plugin so we will
install that as well so now that
everything is installed we will have to
import each of these in our AB dot
module dot ES file and pass them in our
providers arrays so I'll just do that
real quick let's save this and now we
are ready to use these modules so I can
now collect my app folder and now I will
come to my home page on which I am going
to implement all the functionality so
the first thing I'm going to do is open
my home to HTML file and create two
buttons there so this first button will
be responsible for clicking the picture
and I have bound a click event of this
button to a function called get photo
that will create in just a moment I'll
also create a similar button and this
time this button will be used to call a
function called upload photo and I will
change the text on the button as well
text will be upload photo between these
buttons I am going to create an image
tag and this image tag will display the
preview of the image that the user has
clicked using the phone's camera and I
will bind the SRC property of this image
tag to a variable called image URL okay
and I will also bind the hidden property
of this image tag to another variable
and that variable will be called as hide
image we will toggle the value of hide
image from our home dot TS file and
we'll display this image tag only when
the user has clicked an image I'll also
add some style to this image tag so that
the size of the image remains within the
viewport
I'll save that and now let's head back
to our home dot TS file and get started
with the code so the first thing that I
will do is import the required modules
I'll also pass both these modules in my
constructor to create variables and one
last thing that I will do before
starting with the code I'll also import
a module called
camera options I will explain to you why
we are importing camera options in just
a moment so now we are ready to code our
functions so the first function that we
need to code is get photo so we'll get
started with creating that function so
the task or forget for the function is
to click a picture using the phone's
camera and for that we are going to use
the camera module so we can use this
stored camera so get picture this is the
function that takes in an options
parameter which is of the type camera
options so we'll pass in that parameter
here and that is why we have imported
camera options on the top so we'll
create a variable called options and
this will be of the type camera options
and we'll specify some camera options
here the first parameter will be quality
and you have to specify quality in terms
of integer ranging between 0 to 200
where 0 means worst quality and 100
means best quality so I'm just going to
stay Midway and specify 50 here and
along with that I'll have to specify a
destination type as well it can provide
us a URL to the image or it can also
provide us the data URL which means that
the complete image will be encoded as a
base64 string and will be returned to us
so we'll use the data URL
I'll also specify a source type which
basically means is specifying whether we
want to take the image from the camera
or the phone's gallery so I'll just use
the camera for that so basically we have
three options here camera photo library
or saved photo album I'm just going to
choose camera here you can play with
different properties and see how it
works
we can also specify a property called
allow edit and I'm just gonna let it be
false if you pass in true it will allow
you to edit the picture after clicking
the picture using the camera after that
I will provide in an encoding type and
this will be either JPEG or PNG I'm
going to use PNG and after that I will
pass in a parameter called correct
orientation and this will be true which
means that if you click a picture and
your phone was rotated the picture will
be rotated accordingly finally I will
specify a target height of the picture
which I will keep as 512 pixels and I
will also specify a target width of the
picture which will be 512 pixels as well
so now that our options are ready we can
pass this options variable in the get
picture function okay once the picture
is clicked you can execute the promise
on this function so I use the done
function for that and this will return
you the image data okay
so since we have selected data URL right
here this image data will contain the
image data as a base64 string so I'll
just assign this image data to a
variable called image data that I will
create globally right here so let's just
create a variable here image data I'll
also create a variable called image URL
and I'll also create a variable called
hide image and I'll set its value to be
false okay so this variable will hide
the image tag initially and these two
variables will get their value once we
have clicked the picture so we'll just
initialize the value of this stored
image data to be equal to image data we
can generate the image URL by
concatenating this image data to a
string such as type in say star image
you are
is is equal to and the string that we
have to concatenate with image data is
data : image slash P&amp;amp;G and if you are
using JPEG then you're left to pass in
jpg here and after that you have to put
in a semicolon and type in base64 then a
comma and then you have to concatenate
image data with this okay so this whole
thing can be used in place of the image
URLs inner image tag right here so as
you can see that I have bound the SRC
property to the variable image URL and I
am specifying this value who are image
URL variable as well so this will be
responsible for displaying the image in
our preview I will just change the value
of high-damage variable to false and
here I will just specify the values to
be true okay and now that we are done
with the gate photo function we are
ready to create this function called
upload photo which will be responsible
for uploading the photo that we have
clicked and stored inside our image URL
variable to the WordPress website and
for that we are going to use the
transfer module so you can see that I
have created a local variable called
transfer which is of the type transfer
so I can use this so I'll just type in
like T equal bass dot transfer not
create this will create a new transfer
and now we can use this transfer to
upload a photo so I'll just type in T
dot upload and this requires a few
parameters the first one is the URL of
the file that we want to upload so we
have the whole URL inside the image URL
variable which we can access using this
dot image URL the second parameter is
the URL to which we want to send this
image to so in this case we have our
server and the URL to our WordPress
website is this so basically this is the
URL of my wordpress website and this is
the end point that is ready to receive
an image if you have your own server you
can try using that but for now I'm going
to use this WordPress
right and the third parameter that we
are going to pass in are the headers so
the idols may contain information about
the type of file that you are sending to
the server the authorization information
that the server expect and some other
information that is server may require
this headers object is completely
dependent on how your server is
expecting you to send a request so if
your headers are not correct your server
may not respond or accept the request
for this WordPress website I am going to
send in a few headers and the first
header that I want to send in is the
authorization header which will contain
the username and password that I am
going to create on my WordPress website
so basically I am going to use the basic
authentication okay so what I am doing
here is using basic authentication to
get authorized and be able to post a
picture on my WordPress website the
second header that I want to send in is
content-disposition and its value is
going to be a little bit complicated I
have got this from the documentation of
the WordPress REST API so you have to
type an attachment then put a semicolon
and then you have to type in filename
and provide in the name of the file that
you want to upload you have to escape
these single quote characters and let's
say that the name of the file is a
multiple Val dot PNG okay so these are
basically the headers that are required
and we are going to send just these two
headers and once we have made this
request and this request is successful
we'll get the response in our promise
function so for now I'm just going to
alert this response
so now I think we are good to go
and test this on a real device so I'll
just connect my phone and run this
application on my phone so here I have
my phone on the right side of the screen
and I'm just going to run this
application on this phone so I'm just
gonna type in ionic Cordova run Android
and hit enter so application is now
launched on the phone and I'm just going
to click on the click for the button to
click a picture so as soon as I click on
this button the camera launches and and
it's going to click a picture real quick
so I have clicked this picture and this
displays the picture in the preview now
now we are ready to upload this picture
to our WordPress website so I'm just
going to click on upload photo now and I
will approve it for a few moments before
I get the response so I'll either get
the success alert or the failure load
and you can see that I get an alert and
this alert is the success alert and this
is because there are no errors in this
alert you can see that the first key
that I have here in this object is the
number of bytes sent which is two one
eight eight nine one which means that
the data has been successfully sent to
the WordPress website I also get the URL
of the image in response which means
that the image has been uploaded
successfully
I will hit OK here and let's head over
to our WordPress website and see if the
image has been uploaded or not so I'll
just head over to media click on library
and here you can see this image that we
have just clicked right here in our
WordPress media library okay so the
image has been uploaded so this means
that the code that we have written is
just perfect and is working fine you can
try modifying this code to make the
quality a little bit better or change
the size of the image to suit your needs
you can use JPEG instead of
ing you can also select the image from
your photo album or media library and
upload those images to the server of
your choice
tragedies with your WordPress website so
this is it for this video if you liked
this video let me know in the comments
hit the like button and subscribe to my
channel for more stuff like this thanks
for watching</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>