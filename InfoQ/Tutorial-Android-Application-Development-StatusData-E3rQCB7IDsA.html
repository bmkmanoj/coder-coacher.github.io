<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Tutorial: Android Application Development - StatusData | Coder Coacher - Coaching Coders</title><meta content="Tutorial: Android Application Development - StatusData - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/InfoQ/">InfoQ</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Tutorial: Android Application Development - StatusData</b></h2><h5 class="post__date">2011-02-25</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/E3rQCB7IDsA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so one thing that I would like to do
next is I would like to kind of um
refactor this stuff a little bit so
we're gonna be working on the timeline
activity next right and we're gonna need
to read the data from the database and
this guy is saving the data in the
database so what it sounds to me like is
that there's some repetition there in
the amount of work right in both cases
we need to open up the database and we
need to basically worry about all the
database related stuff and we also
talked about that yesterday briefly how
to much of the system right now knows
about the database intricacies right so
we may not like that because you kind of
want to try to keep things loosely
coupled in other words abstract it from
one another so that if we do not like
sequel I database or something you know
for whatever reason we can at some point
get rid of it and so forth we don't have
it yet we're about to write we don't
have our petition yet we're about to but
think about what is the what is gonna be
the job of the timeline activity this is
the guy that actually shows us
everything that we have so this is gonna
be the guy that if you remember my
sample of that I have and see if I have
it running still guess what it's not
running so let me go to my sample so
this is the timeline activity that we
are about to start working on so guess
what this guy is reading data from the
database right so it's doing this after
reading it so it needs to also get a DB
helper open it up say blah blah blah
right so there's a lot of work there so
what I would like to do is I would like
to refactor it now and it's a good way
to sort of pick up you know pick up
where we left off yesterday just to
cover like refried
all that and so forth so what I'm
proposing is to create a class that's
gonna be responsible for everything data
right and we're gonna hang that class
off of the application so it's gonna be
readily available to rest of our system
make sense so I'm gonna call this class
status data just because that's what
we're savings that is data you know
corresponds to status database right so
and we're gonna hang it off of the
application eventually so we're gonna do
two things we're gonna start by similar
to close all this for now we're gonna
create a new a new class so so right
click so basically right click on your
package right before I just do that I
want to make sure that I actually did
create a new copy of Yan before you guys
yesterday one two and yesterday was
three right compress so I wanna have it
incremental so that you guys know that
which zip file corresponds to what okay
so all right click new and Java class
and I'm gonna call it status data since
it's Java it's gonna be capitalized
capital D right there it is
instead this data right now is gonna be
just a plain Java object right it's not
sub classing anything special it's going
to know about the context so it's gonna
need a context or I'm gonna define my
standard variable so private static
final string tag right remember how we
always do that status data dot class dot
get simple name and I'm going to define
context so
context context just let me have it and
I'm gonna create a constructor public
just a so far I'm just kind of creating
a shell right it doesn't really do much
my goal is that this Dallas data is
gonna have all our data related
functionality right and it's gonna be
the only one that actually uses data DB
helper right so it's going to have a DB
helper so I'm going to create DB helper
if you help her as a you know as a
relation is a object and and when we
create the new status data we're gonna
create DB helper his new DB helper this
so not this big context we're gonna pass
the context into because that's what we
need for
so far so good so um just to kind of
think about this
so if DB helper is only gonna be used by
status data does it make sense to keep
DB helper as a separate class yeah this
is the kind of situation where you may
want to move DB helper in to make it an
inner class so what I'm going to do is
I'm gonna call cut or copy the entire
debut helper so basically all this stuff
that you did right and I'm gonna put it
inside of of of this class status data
organized imports let's see what the
error is so I have an error right here
I'm sorry yes you know yeah that's a
good point it should be a private class
right
yeah so I copied basically everything
inside of the DB helper so you know -
the imports because you're gonna do
organized imports in the other one right
make sense
we're not defining a new context we're
just defining a reference to a context
so contest is gonna get passed into it
sorry in this guy so the context is
gonna get passed into status data and
we're just passing it oh I see what you
mean so base now we have it yes yes so
this becomes a good point so this
becomes yeah so we don't actually need
this anymore because context is now
known inside of status data yes good
point so we don't need the multiple
version in variables pointing to a
context right so DB helper can now use
the context that was defined at the
level of status data
but it's reverse of refactoring right
this case we are bringing in we could
have added some functionality in yeah so
yeah we're gonna add that functionality
to deal with data to to status data
right but DB helper is gonna be helping
status data to complete that
functionality so as opposed to making
the c DB CalPERS really responsible for
opening and closing the database yeah so
we're making status data be responsible
for that so status data is gonna be
responsible for all the data data
related functionality and it's using
dayton alright so the structure is gonna
be like this so it's gonna be status
data right in status data has a DB
helper so the B helper right so uses DB
helper and then provides all the all the
functionality and then it's gonna be
application that has yeah yeah yeah
exactly
so so basically status but we the
outside world is only going to be
concerned with status data it doesn't
care that the status data internally
uses database
oh so so with that we now so we now yep
basically have a simpler we have
something called status data that we're
going to be using now what we're gonna
do is we're gonna tank status data off
of the application Yampa application so
that it's available to everyone right so
I'm gonna make right actually I'm not
gonna practice a status data stop status
data and then you don't create we're
gonna create status data status data is
new status data and we passed this in to
achieve that status data key as the
context so we basically declare it as
part of the application
Rumania oops and we initialize it here
just twice or new basically in your map
location
so far so good
so so so again we just basically are
hanging so its Yamba application that
has a status data so this is a has
relationship so this is status data
right so from in the future we're just
gonna be able to ask anywhere in the
system for Yampa application status data
so anyone in our system we now have
access to status data right
what is the reason for passing a context
context is sort of a gives see remember
how we said our application is really
everything here right so this is
everything is application so
applications sort of nose or bits and
pieces of application know who they
belong to based on their context so the
context for an application decides on
everything from like which processes
belongs to what file system it has what
resources it's got access to and so
forth so it's just sort of like an
abstract concept that gives you you know
gives you your membership in the club
right gives you context for your code so
an activity doesn't know who it belongs
to
other than what the context that it has
been hearing from context it knows which
app it's part of and so on so so
activities services application they're
all subclasses there are children of
context crazy
can you share one activity between two
applications not really I mean you can
copy your class from one if you have two
copies of classes but they're gonna
belong to they're two different contexts
yeah what's possible to do is it's
possible to share to have multiple
applications share the same context
that's possible to do so that means that
you have brought apps signed with the
same key belong to the same package and
then they can share the context in other
words you can have two applications like
that for example share the same file
strike the file structure the privates
file system right yeah okay so now that
sorry any other questions oh yeah you
would have to send to a separate apk is
that share the same contacts all stuff
like the process ID and the the file
system okay so if I look at how we use
database yeah in our updater service
remember I said this is not very
efficient code we're like here open the
database we created the content values
and then we close the database I would
like to have this responsibility shifted
now to status data because I would like
status data to be responsible for
everything database related so so what
what so basically what you are doing is
we are hiding the information about how
insert happens what algorithm we're
looking using for you know when problems
happen all that stuff we're putting now
in status data right so what I'm gonna
do is I'm gonna create in status data a
new method called I'll push I'm gonna
push the DB helper lower let me just
kind of document it so class to help
open create open open create up upgrade
database okay so I'm gonna push the
responsibility I'm gonna push the up you
know DB helper lower so what we're gonna
do here is I'm gonna create a public
public insert I don't like it's gonna be
an int for now I'll just return void we
may change that later on content values
values and so this is gonna be
responsible for inserting into the
database so this is gonna be our code
that inserts into a database now the
question is do this again like this the
question is you know I said I'm trying
to kind of not explain not not you have
to show the world that we're using
suddenly that's database specific right
so you know so we're trying to hide the
fact that you're using DB and all that
from the outside stuff and we want to
package all that inside of status data
now the question is what about content
values I'm using this thing called
content Alice
isn't that a database to relate to think
because we introduced it as part of your
database yeah so that's a good point
so content values as you can see from
its package where it belongs to come on
mouth sure it's part of Android content
content values in other words it's
bigger than the database it's it's
because beyond database somebody was
asking yesterday about it I think you
were saying that why does it say here if
you're using content providers don't use
anything from the database package well
that's why because we are acting if we
if you're using the data in the more
generic way we don't want to tell the
world we don't even want to include
database related stuff right so that's
what I'm trying to point out the content
values really has nothing to do do with
it
with the database it's just a very
generic name value pair table it's a map
essentially it's a map and it goes
beyond how it's implemented it could be
used for database purposes but it could
be used for other purposes as well so
that functionality now that we had here
you know sorry so this open database
stuff I'm gonna cut let me you know what
I'm gonna copy it for now and later on
I'm gonna go back here and yank a bunch
of stuff out right but so but that that
functionality that we have here I'm
gonna basically copy in here so we open
the database right we insert into the
database so I'm gonna copy it for now
so we kept duplicates right and then I'm
gonna close the database except that I
don't need to be opening closing DB
helper because DB helper is something
that you already created globally right
for status data so the DB helper in
itself is not holding any resource its
job is just to create a database if one
doesn't exist right it's what what is
holding a resource is get writable
database that's why we wanna undo
whatever we do here right so we are
basically opening closing database right
within this block right we get writable
database and we close write about
database right here
so so what what it means to get instance
of right so DB helper is I guess I
should really rename it it's important
to DB all para helper so its job is to
open up a database but let me rephrase
that it opens up a database not a date
not the actual database connection yeah
so it's let's say it like this it opens
up the connection to the database server
but quote-unquote server because it's
not a server right so it provides
connectivity to that mechanism but it's
the actual get writable database that
actually gives you a connection and it
gives you a in this case means that you
can you are the only one who can write
to it at the time so that really locks
the resource yeah so in other words DB
helper can live for a much longer
lifetime like opening up a DVR you can
do it with the phone boots and never
close it until the phone shuts down and
that's fine it's not holding any reason
any valuable resource other than a
little bit of memory DB right yet
writable database actually opens up a
database for for awhile right
yes exactly yeah so difficult well is
you so you can put yes if I put my mouse
here and I go source override the
implement methods the clip should be
smart enough to show us what options we
have so close get readable get writable
and open so you can do something on open
so you know something on close if you
want it to and get readable get writable
database you can override them but we
don't
override it we actually use it so we use
it here yeah when you get a writable
database you what yes yes exactly you
open it for writing and you get
exclusive lock to it just ever enough
okay with our new insert method
yesterday SQLite database is the
connection to an actual database yes
so now
why do I have it here yes so we now have
a bunch of duplicates so now we're gonna
go into like trimming mode right we're
gonna cut out as a bunch of stuff so
good point so I'm going to go now to the
service and all this stuff that we had
to open up the database okay I'm gone
all the stuff that we had to close the
database
likewise it's gone and now to save
something into a database okay gone so
so how we're gonna save this stuff well
we need access to our Yamba application
which is this is how we get our
application right in then status data
and then insert but so now you know
since I have this um application all
over the place what I'm gonna do is I'm
gonna actually define it I'm gonna
define it like what do we want to define
it we can define it in constructor I can
say you know application yeah but just
to make it shorter okay
sorry and like that okay and then I'm
just gonna say Yamba is that right just
I'm shortening it to all of it right and
then I'm gonna replace this with the
Amba to make it shorter as well so you
don't forget whether you know it gets
the latest Twitter and then we do to
Twitter update okay so similarly and now
I could actually make this even shorter
so I'm gonna replace that like that so I
don't even need the object Twitter right
so yeah I'm but get weather and getting
France timeline right just updated class
was the thread updated class is our
separate thread which we create
when services started and stopped right
and now when I insert insert so it's not
correct to say insert into database
because we don't know its database we
just say insert data right I'm simply
gonna say yeah um but dot start those
data dot insert values right so this is
where I simplified stuff so that's what
I mean by refactoring it I now outsource
the job of dealing with saving data to
some other object which is hanging off
of a Yamba application which is readily
available to us right throughout the
system and so I say insert in there yep
so I just defined it here
just to save myself typing but it's this
well-known stuff right get-get
application we cast it to your
application right
and I just defined it global to my -
yeah we could have made it global to the
entire updater service not just the
updater class but we still using the
columns fields to find a stable each
other since the original was put into a
pirate class
that's right Stannis neither let's say
we don't believe it
in December so my question is this case
is one of those constants put in at the
level or status data because it seemed
like is columns you know function for
status data or if you very limp instead
of getting a couple is just prices in
size up status do we have to make babies
are private so that's a great point so
the point is like we're trying really
hard to get rid of any reference to the
database related stuff in updater
service or for that matter the rest of
the system we don't want to address to
the system to know about that database
because you guys asked yesterday you
wanted to potentially change to some
other database system etc etc so your
point is great it's like hey what you're
referring to
DB helper all over the place and the
only reason why this even compiles is
because I have a duplicate DB helper
here because remember the one that we
are moved to to here is now private
right so I'm about to delete this this
is gonna go away and this is not gonna
compile right so that's a great point
what do we do well we could you know one
option is to make make DB helper not
private and then do status data so Yamba
dot status data dot DB help not blah but
that makes no sense
what makes more sense is to move some of
this stuff
that is actually relevant to the rest of
the system outside and I'm actually I
could pick all of them but since I'm
only picking the ones that actually are
shared by the larger you know group so
I'm gonna cut that out that's a good
point
so let me just let me just move this
here okay so move this variables here
the the the database columns okay I'll
get back to your point okay so so that's
that's here and and then just to finish
the referee factoring but I'm not I'm
gonna get back to your point it's a
really good point
so now this is not dbgap referring to
but status data right
right
you meant stop stop yeah just define
that this is just to save me from typing
you can just basically refer to this
because that's how we get the reference
to the application but so DB helper now
belongs solely to database to status
data we're about to delete it from here
yes so I define DB helper here right in
the constructor and I create an instance
of it right when status data is created
so it's kind of like it's a built-in
component of status data that's what the
big helper is and it's defined
lower here as as a private class right
as a matter of fact let's go now in the
elite DB helper and gonna let's see what
all other problems that generates right
so I'm gonna go ahead and delete the DB
helper class from the file system
altogether because right now we have to
we have to under three moved as an inner
class privately and then we have the
other ones and so now it's a mixed bag
of what's referring to what so I'm gonna
get rid of this and Eclipse
automatically compiles everything then I
guess everything just compiles
so it's good okay
status data yeah so status data now
that's where the DB helper is
so status data now houses the the the
variable the names of the columns right
and you know so the status data houses
the names names of the columns and and
then the updater service is basically
referring to those status data variables
yep
now is everyone good with that so far
which one so status data
so we moved the functionality for
inserting into the database here to this
guy so now so here's a little bonus
question for you guys
back to the question what right now we
said we designed this status data to
take content values and insert it well
what if we wanted to simplify this even
further so that we're not even worried
about content ballast but we simply say
imagine that you can simply say insert
into insert status imagine that you can
do that of course that doesn't work
right now right so how would you
outsource some of this functionality for
converting into status data that's what
you were asking about right okay so I'll
give that to you guys as a bonus
question so try to do that so in other
words what you want to do is this now it
doesn't compile right but what I want to
do is create a new version of of of this
actually let me do it like this first of
all define it so public void insert but
as a it taste takes a status as the data
right organized imports and import
Twitter status because that's what is
very referring to so this now needs to
take this and insert it into the
database again inserts inserts into
database and the only difference is that
is status data as provided but online
service so that's now what we want to
insert right so I'll give you I'll give
you a second to do that to update it
okay did anybody did make this change
create this method so basically all I
need to do is I need to move the
responsibility now for creating new
values so I'm gonna I'm gonna copy it
first and never remove it right so it's
easier for you to visualize so now this
guy creates new values this guy cop is
the values from one oops from one to the
other right and then this guy is simply
gonna call in so this dot insert values
right so right so well not the job of
these guys to insert one status at a
time so it's basically C as opposed to
we have two versions now of insert we
have the one that takes content values
and inserts them into a database we have
another version which takes status
converts the status to content values
then cause the other guy right
so leverage is the other guy so now you
have just two different you know
function insert right so it's you have
more a richer API you know way right and
so now I can simplify even further my
service to be yank this stuff out yank
this stuff out and I simply say insert
data yam but status data insert status
and all this is actually you know it to
seek out how much simpler my service now
is right and so it doesn't even know
about databases and you know about
content values I mean that wasn't a big
deal
so that that was just really an extra
but basically we get status from Twitter
we loop through it and for each one we
inserted into database that's it
how many maximum interest you can have
in a database on it really depends I
mean there's no real limit like how big
your database grow yeah I mean it's
there there's a limit on the entire as
the car I mean not as the card but the
data partition but I don't know exactly
what that is and I don't need I don't
think we you know we're not gonna at
this rate we're only growing up to 20
per for 24 hours right so we're not
gonna really grow you know 20 records
for 24 hours let's say you can have 10
million records right or you know honey
calculator right so let's say that
that's ten thousand 10 million divided
by 20 so so this many days so we have
about you know one one thousand in three
hundred years before we have a problem
so I wouldn't worry about that I have
picked 10 thousand ten million records
is a I mean yeah there's a system and
you know what you could also do I mean
what you could also do is you could
purge the data as part of the opera to
the database the release so every you
know assuming that users use your app
they're going to want to upgrade your
app right so whenever you release an
upgrade of the app you can have change
the schema to activate on on upgrade and
simply known up great purge the the you
know the the oldest million records or
something like that or the opposite to
keep the youngest million records
something and there should be planning
but we can also if you want we can
easily add a purge button right let's
let's do that as an X as a little bonus
actually that's a great idea
so just to demonstrate now that our our
what we just did is very useful okay so
you guys so just to kind of illustrate
you know we it sounds like we did a lot
of this back of flipping between
different files and you know it's
refactor it a factor in tends to be
confusing to people observing it's
usually obvious to me because I'm doing
it and got it conceptually but the fact
that I'm flipping between them like hey
we're creating this new file and then
we're hanging it off of this and now
this file is using this file via this
file that can get confusing I totally
get that well that's why I try to avoid
flipping too many screens and having too
many things open to the same time but to
demonstrate Suzanne I'm good with this
so far Koopaling yeah who policy works
okay so but so we're doing something
that's sort of the same thing so it's so
let's think about this what if I want to
provide a way to delete all the data
okay so how would you do that somebody
tell me yeah so all the data related
stuff goes inside here so you're saying
we have another like another I could
call public void delete right simple
enough right
and deletes or all the data so you're
saying in this method we're going to
delete all the data so how do we all get
it all the data yes yes so it's gonna be
a we're gonna need to open the database
I know that and we're gonna open it for
writing right I'm gonna open the
database and I know I'm gonna also need
to close the database I'm gonna copy
paste or
come close okay so for all these you're
gonna basically do open closed the
database right so your question yeah but
I don't wanna yes
yeah I want to make it to Tomic meaning
I want to open do the job close it and
not keep the resource open yeah so that
would be more Piedad more proper yeah so
that comes down to a question how many
people are using this and what's using
this and status data could be used by
the service as well as back tivity at
the same time so if the service has it
opened for forever for writing so it has
a lock on it and now we're trying to
delete data from we're gonna have a
conflict right so that's what I want to
do it like this so now I can delete the
data and so that's gonna be DB dot and
then I don't know let's look what we
have no look there's something called
delete table okay that's easy we got the
table so it's gonna be the table is
gonna be DB helper dot DB helper dot
table right and then the where clause
and where arguments so this is the part
if you came aware like if you want to
say delete from blah where you know ID
is greater than equal 47 right but since
we are not we're deleting all the data
in other words unconditionally in other
words no condition no no okay so there
it is so was it hard to implement or
delete I mean it's a copy-paste from
insert and we just changes that instead
of insert we said delete right like I
would I would expect you guys to be able
to extrapolate this kind of information
by now right
update and query can be much higher well
query has something special but update I
would expect you to be able to figure it
out how to use it so we're gonna open up
the database for writing DB da to update
something something and then divvied up
close right so that's your job next so
now when I click on a menu I would like
to have a button here that says purge
okay so so you tell me
menu dot X and also to add a menu
we're gonna go to values so not lollies
menu
right and we are going to add yet
another item and it's gonna be just like
any other item we added so ID matters so
ID is gonna purge okay
then title I'm going to create quickly a
new title so new string title purge ah
state purge you insert it okay and then
the hardest part is going to be the icon
right so a lot of guests are entertained
with adding the rest of stuff I'm going
to really quickly look up my Android
draw boss on screaming penguin calm
which you know gets you there and I'm
gonna search for something that says to
just do a delete I'm looking for
something that starts with icy menu
because then they're kind of uh there
you go I see many delete because they're
all consistently the same size okay so
back to this at Android column draw both
slash I see many do it ooh so it doesn't
it's a see now I have an error here
remember XML errors are harder to find
like you just see it here and then stops
compiling everything and including your
are file right so you got a the only
clue is what you get here on the
on the you didn't uh-huh
what do you think is the problem it's
super hard to find yeah this is a I mean
ultra hard to find but see I have an
extra space like you get an extra enter
yesterday so be mindful of that I don't
see it it's right there BAM and now I
save it it still shows here so you may
want to clean clean desk but saves it
everything's come files okay so my mani
is automatically now gonna be there like
it doesn't go anything but if I run it
my menu is absolutely gonna be there so
if I click on menu there's the elite
purge it doesn't do anything right
right so the exactly so the menu
processing for status activity is done
in the status activity itself right so
status activity and we should you have a
method called under menu stuff called
on options item selected so whenever
menu gets clicked this gets called and
passes the actual item so we just get to
add another case then so case r dot ID
dot item purge do something and then
break and so what is that we're gonna do
right so do you have a reference to our
Yamba application here okay so I may as
well create that this is to save me time
from like typing the whole thing so I'm
just gonna create here iam application
yeah right and then you don't create I'm
just gonna create it so say yum is and
then I have to cast it yeah education
then get vacation it's double quotes
double parentheses there so just you
know so just makes it easier for me so
I'm not typing this whole long thing
here right that's all because it's
something that's readily available to us
are just kind of shortcuts to make it
easier for you the first one to do that
I should be consistent and move my
static my this guy's up to the top so
now that I have Yamba and then
processing the button it becomes really
easy
it's basically young but dot spells data
dot elite really gone right now I could
do something to tell the user that it
was deleted right so I could actually do
something like toast dot make text write
this I need to come up with some text
this is gonna be toast dot line clong
show right and then thanks to be proper
I should really gonna open up my values
strings add another message right here
well my messages are sore doing a good
manual it string name equals and I'll
say msg or they all data urged all data
has been purged like that right and then
back to my status data and as it's not
says there the status activity and then
fax becomes our
string dot message or data first
but if reformat reformat and just to
test I'll give you guys then chance to
do it yourself but just want to test it
so I'm gonna go into my database first
so sequel a three star so select star
from statuses damn there's data right so
now if I go here menu for doesn't have
any item click on purge all David has
been purged and then I do select select
star from status is gone
mmm-hmm was that hard you just increase
the value of your application from like
nineteen cents to like twenty three
cents right and it took you only couple
of minutes right because we now have the
framework to make it like full easier
right so again just to kind of really
quickly so what we did is we simply
added a new delete net function to our
status data which is readily available
to the rest of the system which simply
just calls database dot delete and then
we added a new menu just like we added
three menus before yesterday today
before right and we then just scandal
that by calling yam but status data to
it that's it
okay so I'll help you out now on create
ok topsis menu but that hasn't changed
in a while okay but in the meantime what
I also want to test I haven't tested in
mine works so I'm gonna say run service
I'm gonna look at the logcat really
quick okay that seems to work I can do
the still now select star from statuses
status is again and it did work and so
that seems to have works again so mine
works
but so this was basically stuff from
yesterday right
that is updating the service another was
inflating the menu
you guys good just so just to again
review so what we did is so we we moved
we got rid of our DB helper we moved it
into a new class called status data so
status data now he has all the DB helper
stuff right there it is now it's private
to status data so status data now
creates DB helper when it starts up
right and so it's readily available and
now status data provides nicely packaged
methods insert for content values insert
for status delete right so so it's
really nice easy now to to use status
data and these were basically doing the
same work that we did before so if I
want to insert content values I would
need to open up the data base for
writing do the DB insert and then do
closed right so it's atomic so this
happens all in one thing right so now it
is the status data we hang it off of the
Yampa application right so yeah
multiplication now has a status data and
whenever my application is created it
cause status data that's right one
another thing that we could do is yump
application also has a method called
terminate so when your application is
shut down you can do something this is
just a it'd be a nice thing to do so
what I will do is source override
implement methods and I would say on
terminate and I would provide a non
terminate method to do something when
we're done right done with the
application so actually the system shuts
down the app or removes the process and
all that yeah not when you leave a
activity not when the activity get stops
the application has its own life cycle
right so for example you're in status
activity we have we do this to up to
create it the opposite of the
we'll be to do but to implement a public
void closed right there to undo what we
did here so I may say DB DB helper dot
Club got closed for example to close any
open database or anything like that
okay so that's the opposite the flip
side of a constructor will be closed
right there would be a nice thing to do
I'll be nice to the system so I'm being
nice to the resources I'm cool it will
but the system will clean up the objects
but the way it cleans up the object is
by checking who doesn't have any
reference to being referenced by
anything so if you have an open database
then throw harder because it says okay
this object is still maintaining the
database maybe the database maintaining
the reference back to it so you have
this circular reference and it just
takes forever to like actually I realize
that that's subject you know so database
networks things that are external to us
you kind of want to close them and so
yeah application is a good opportunity
to do all that so status data dot dot
close is now the opposite of status data
that's right
so again we have on create the flip side
is on terminate so whatever you do here
you kind of want to undo here that sort
of stuff
right
yeah and so in the update service the
Java we simplified it dramatically but
basically just saying Yamba status data
insert right and Yamba is basically just
a short form for you just in yeah just
yes so status data now has a close we
just closes whatever it opened right and
then see here it's kind of like you have
a constructor and the opposite is a
closed as a quote-unquote destructor
right and here you have the oncreate and
the opposite would be on terminate yeah
right so that's what I was feeling yeah
yeah yeah cool so now we're back at
square one and basically what we did
today is just refactor stuff along but
we made it a little simpler but our goal
was to kind of abstract the data stuff
behind something called status data so
now there's something called status data
which is global to the object which is
readily available and that now deals
with this later on status data is
actually gonna become this guy's content
provider but for now just so you know
it's you know we kind of just from Java
standpoint we want it to isolate so the
rest of the system doesn't know anything
about databases which is a good design
right cool okay so let's take a break
now and then we are gonna worry about
time line activity next</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>