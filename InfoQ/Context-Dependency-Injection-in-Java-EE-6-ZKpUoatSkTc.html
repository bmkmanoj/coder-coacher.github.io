<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Context Dependency Injection in Java EE 6 | Coder Coacher - Coaching Coders</title><meta content="Context Dependency Injection in Java EE 6 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/InfoQ/">InfoQ</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Context Dependency Injection in Java EE 6</b></h2><h5 class="post__date">2012-05-01</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/ZKpUoatSkTc" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">I heart I'm terrible evangelists I used
to work force on my persistence as job
evangelist as well at the moment I'm
explaining my own website for the job of
passion calm so today's topic is CDI how
many of you have used to see the I oh
okay
several of you okay alright so let me
just move on right so I'm gonna spend
about 30 minutes talking about CDI
basics and I'm gonna talk about advanced
features of CDI for about 45 minutes and
my actual trip is sponsored by variable
force so I'm gonna actually do five
minutes just demo I technical demo on
Jay repo and then I hope you have some
time for Q&amp;amp;A by the way everything I'm
gonna demo today he's available on my
website called the Java passion come
slash job talks okay so in that website
you will actually see CDI basics and see
the advanced presentation which is a
little bit larger number of our content
and what I'm going to talk about today
so let's talk about the basics of CDI so
these are the topics of CDI so the
topics that are grayed out are not those
are the topics that I'm not going to
talk about today because those are two
basics and I don't have enough time but
the topics in both want those are the
things I'm gonna talk about so what is
in why CDR I assume everyone of you
understand the concept of dependency
injection by di so
CDI basically unifies existing
dependency injection schemes so you
probably have used the Spring Framework
dependency injection
what juice was seen and basically these
are proprietary dependence injection
schemes even though those are popular
now CDI standardize these dependency
injections
it provides a completely new and richer
dependency injection scheme compared to
these three dependence injection schemes
and it provides a typesafe dependency
injection and I'm gonna explain what I
mean by that in the rest of the
presentation and it's designed for use
with a stateful object so it's sometimes
called the scope object this scope
objects something I'm not gonna talk
about because this is again pretty basic
concept you probably know the sessions
go application scope and requested scope
now it has a conversation scope and it's
a dependency dependency scope okay so
basically it's providing this scope
object now the difference between CDI
and other the the scope object you
probably have used is that in CDI it is
a CDI containers responsibility to
manage the lifecycle of this scope
object other than that the concepts are
pretty much the same and IMing at the
taco I'm not gonna I'm not going to
actually talk about that now CDI I
initially called
web beans and the scope of that jsr was
very small it's basically to use EJB
beans as a managed beans of JSF okay so
instead of two separate component model
they want to compact combine these two
component model that was actually that
goal and that is still being supported
in CDI but CDI is actually kind of
broadened the scope of the jsr okay so
that's basically what you're going to
talk about today so another exciting
feature of CDI is extensibility in fact
I believe this is a kinder feature of
CDI we are not going to use this
extensibility for a while okay however
this allows you to build your own java
ee platform so if you like any of the
features that are provided by Java EE
platform right now are by 6 you can
change the behavior of the services and
if somebody actually build the brand new
services and then you connect to take
advantage of it in a portable fashion in
fact tables guys whose are you know they
are in fact the reference implemented
implementer of CDI basically they are be
writing their same frame
as a collection of cd-i extensions and
you can pick advantage of all those
extensions they built whether that's a
security or logging on your CDI platform
right so basically you can think of C
they allowed you to build your next
generation of Java unique platform on
your own so it's pretty exciting
all right you're not going to talk about
that feature today all right so why we
need a CDR I for Java EE platform by the
way even though CDI the JSON says is
extra context dependency injection for
Java EE platform it could be used on
Java SE platform as well
okay all right now why we need CDI on
Java EE platform the reason is the first
existing Java EE proper meaning Java 5
meaning and I meant a previous version
of Java 8 platform in in Java EE 5 have
a dependency injection schemes however
the resources that you can inject are
known resources to contain a meaning it
doesn't provide general purpose
dependency injection scheme like a
spring framework so we need
general-purpose application level
dependency injection scheme like a
framework of increment and that's
basically what CDI provides ok second
reason is we need a type based
dependency injection so Taipei's
injection generally considered is
providing more robust implementation and
it actually enables a better tooling as
opposed to string or XML based
dependency injection ok so Spring
Framework you're basically using it XML
or the string based well you know right
now they actually support the yeah ah
notation base injection as well but in
general you know you're probably most
mostly you're probably familiar with the
a string based injection is being famous
all right moving forward being
definition so we have used this term
being in many different contexts that
you have a JSF teen you have a jelly
bean you have a spring beans
now we ever see the idea so what being
are we talking about right so there is
in fact a lot of different definitions
or beans that's the reason in Java EE 6
it has a man as being one that of
specification that defines what a bean
is all about right so what is the
definition of the bean in managed to be
known that or is very very simple
it's a project class that is managed by
the container ok in a simplistic fashion
so it's very lightweight and instances
are again managed by the container
alright so what about the other beans
from the context of this bean managed
managed bean specification what is an
EJB being what is the JSF bean what is
for example recipe basically these are
the beans manage the beans with extra
services so EJB is a managed bean with
agency specific services for example
transaction or security and threat
management and things like that or
persistence ok but resting you can think
of is the managed bean with some HTTP
services and CDI is a managed bean with
a CDI services so what do I mean by CDI
service it's in fact that's what you're
going to talk about in the rest of the
presentation so these are a subset of
the services that are provided by CDI
being discovery how being is being
discovered by being a CDI container was
easier at one time set of qualifiers
again you're going to talk about each of
these in a bit more detail so I'm gonna
just move on so this is a CDI bean
example you can see this is a POJO ok
there is no XML there is no notation
it's a genuine CD ID alright alright so
let's talk about the first CDI services
being discovery right so how does CD at
one time figures out the beans of your
application basically it scans the
classpath now in the classpath there are
archives not only for your application
but
also from the systems and you want to
sit at one time to discover only the
beans that you provide right so the way
that you can specify this is the archive
that I want the CDI container to scan is
by providing an XML file called the
beans that XML okay so in fact there is
an XML file however unlike in Spring
Framework context configuration file in
which you declare all the beans the role
of the beans that XML file in CDI
contexts is not for declaring your beans
is basically the presence of biet in a
bean the archive indicates to the CD at
one time this is the archive I want a
container to scan does that make sense
okay so in the case of war file the B's
that XML file is in web-inf directory
and for jar file is in the mirror in
directory so as I said before it's not
for declaring your beans so it could be
empty okay
it's just the presence of the beans XML
file just indicates to the container
that this is the archive that needs to
be scared now it will be used later on
for advanced features of CDI so you're
gonna actually take a look at examples
of those later on
okay so basic injections how you're
going to actually inject your bean it's
pretty straightforward it's basically
you're gonna use @inject annotation with
a Java type and variable for field
injection
okay so Java type could be either
interface or it could be class typically
it's gonna be interface so when you say
inject greeting greeting what that means
is that I want an object instance of
greeting type okay so nothing different
from its being favored okay so once you
got the object injected that you can
invoke the method of that object
okay nothing that much different from
rest of the dependency injection scheme
injection point could be a field that's
an example that we have seen in previous
slide but it could be a method
Mehcad method could be constructor what
initializer was set a method where it
could be producer and observer and again
we're gonna pick a look at examples of
the a producer and observer the
injection points again there's not that
much difference from Spring Framework
here okay okay so I'm gonna give you my
first demo for those of you have an
access again to the Internet again you
can actually download CDI basics
hands-on lab and the CDI advanced
hands-on lab and you can actually run
the exactly same demo application and
running right now so those are all maven
projects should be a book important and
just running okay so I am going to
inject so let me actually show the code
so this is a very simple servlet code
and here is injecting EJB being right
and once EJB being is injected i connect
a call okay right now and this is a
greeting beam okay now in Java EE 5 so
this is the way that you are injecting a
resource like I using a tjb
moving forward it's recommended that you
use at injector notation rather than old
notation like a JB okay so let me run
this application then I'm gonna change
this code to use and inject a notation
okay so let me run this code okay so
it's very simple code calling a method
of injected method in a local temper
okay so I'm going to change this code to
use a inject
hey so I import inject and just to make
sure I'm not lying to you I'm gonna just
change this code injected maybe each be
class something like that take a change
refresh you can see it's now using
injector notation is used in the
placement of a TDD
okay so moving forward is recommended
that you use CDI annotation rather than
old at EJB or add resource on a
patient's okay alright moving forward
okay qualifier so again the concept of
qualifier is available in all other
dependence injection schemes so what is
a qualifier by the way qualifier is a
type it is a very important concept and
I'm going to emphasize these aspects
several times in my presentation okay
all right so qualify is basically when
you happen to have a multiple candidates
for a type you're looking for unless you
are using qualifier and big UD error
will occur because CDI one-time doesn't
know which one to choose
okay so qualifier is used to select a
particular type among the multiple
candidates very simple concept okay
so the way that you're going to use a
qualifier is set of qualifiers and Java
type so in this case I'm not just asking
just regular user type object but I'm
also I'm actually asking the combination
of these two I'm let me just repeat I'm
not just asking for just regular user
type I'm asking for I've logged in and
user tried combination object okay all
right so how you can actually build and
use a qualifier so first you are going
to build a qualifier
it's basically a notation okay so you're
actually built on or not the qualifier
in the form of a notation so here I'm
actually building informal qualifier
okay this is a type all right now you
are going to qualify an implementation
with a qualifier type you are basically
adding extra type to this implementation
it's not just regular my greeting type
it's a combination of informal and my
greeting type does that make sense
all right now when you are using as a
consumer as actually a coder who wants
an object instance of the qualified Java
type so basically you are going to
specify I want not just with not just
like the regular greeting type I want
informal and reading try combination
object make sense you see the reason why
I'm saying that this qualify is a tyke
is actually extending the type of Java
this is a power very powerful concept if
you think about it okay okay so this is
the point that I just mentioned
so qualify and Java type make a
composite type or extended type okay so
you can think of qualifier as extra type
that you can associate or bind to a
particular implementation class okay so
qualifiers make type safe injection
possible so qualify it's a genuine Java
type okay so instead of using string now
you're using genuine Java type this is a
way that we can make type safe
dependency injection possible okay all
right
there are several of building qualifiers
that are provided by CDI implementation
first at mean I'm gonna actually talk
about AB named in the following slide
and then we have a default if you don't
specify any qualifier for a particular
beam then at default qualifier is
assumed
okay all right the new is if you want
actually create an object instance
without associating a scope that's the
time that you can use at new example if
you actually inject the beam instance as
one of the argument of a method this
could be actually the usage of the new
we'll see an example of that in one of
the demos and any is basically you want
to actually provide injection point for
any qualified type okay that's the plan
you can use at any alright moving
forward so let's uh try the second demo
here I'm gonna actually show you
ambiguity error first right and then we
are going to use a qualifier so let me
show the code so this is the ambiguity
case so we have so this is exactly the
same code that we have seen in previous
code here we are injecting reading
interface type object now we have two
implementations of this interface we
have formal greeting which isn't
implemented green interface and we have
informal greeting also implements
greeting interface so we have a two
candidate okay so when you want this
application see they are one-time
doesn't know which one to choose so it
will throw exception and be given
exception okay so let's run that
application okay so if I see the detail
of this error you can see ambiguity
dependency error okay because there are
two candidates right so let me remove
the case
all right now so we are going to use a
qualifier this time so we have defined
so this is the same code but we are
using a qualifier informal qualifier so
informal qualifier is basically
qualifier notation that we have defined
okay and then the implementation in the
informal greeting implementation is
bound with this informal qualify meaning
this implementation class is qualified
with add informal qualifier type so this
is not just regular informal greeting
class it is the combination of this and
this okay same reason we have a formal
greeting is annotated with former
qualifier right so now here in this code
I'm asking for implementation class of
informal type okay so if I run this
application it would say informal okay
because they picked up informal type of
implementation class okay now if I
change this one to formal
now is taking our formal implementation
class make sense all right
by the way I'm using terrible underneath
so whenever I make a change you know I
don't have to actually rebuild and we
deploy the application okay all right
moving forward so qualifier is a
notation okay so the examples that we
have seen is we have informal
connotation informal qualifier and
formal qualifier so we have only two
qualifiers however suppose you got
hundreds of qualifiers you don't want to
define 100 of qualifiers right instead
you want to use an activity because it's
a genuine or notation you can have a set
of attributes right so here I'm actually
planning various greeting qualifier with
an attribute a single attribute and the
default value is green type informal
that's in um type right so this is the
definition of qualifier using an
attribute this time and then I'm binding
my class meaning I'm qualifying this
implementation class again with its
qualifier with the attribute value make
sense and then when you're using that
the the qualifier again you are going to
specify the value of it as an attribute
make sense all right pretty
straightforward
so I'm gonna skip this demo because it's
gonna be thought the same you know look
and feel okay alright moving forward
named built-in qualifier so why we need
it named built-in qualifier okay so we
have seen examples that the qualifier is
used inside a java code however there
are cases that we have to deal with many
invocation of your being right without
depending on java for example if you're
writing just tea or facelet code right
you have to have this notation right
okay so we're dealing with non Java
bytecode in this case we have a way of
referencing your being that's
time me provide that's the time you're
going to use at name da notation so here
basically what I'm saying is that I'm
actually naming this thing with my
printer okay by the way if you're not
using at name that II thought name is
gonna be the name of the class will be a
cup or the small error for a small error
right so here I define my being with my
printer and then I can use my printer in
my face leverage ASP code that's what
name is all about again pretty
straightforward
okay moving forward okay so far you
probably have seen these things and you
know what is the big deal I can do
pretty much anything that I explained so
far using just regular Java code Java
and Java implementation interface right
so what is a big deal okay so basically
the second part of this presentation is
going to actually answer that question
so these are aware the power of CDI you
think we are going to talk about so
these are the topics we're going to talk
about producer events alternative
interceptor and decorator and Strayer
type right so let's move on to producer
so producer method so so far the example
you have seen is that you know you ask a
beam and the container will actually
find the class then it will actually
call the constructor method of the being
create an instance and give it to you
right okay now producer lets you have a
control of being in sensation okay for
example you want to create a beam
instance based on business logic okay
based on your mood based on time of the
day whatever right so it might in fact
keep your different pain instance
depending on business condition okay you
could actually create a non beam object
as well are using produces okay and if
you have to provide some custom set up
instead of a dependent constructor
method of the beam if you want to have
some custom instantiation again this is
where produces could be you
so again through major principles of
cd-i is loose coupling and pipe based
dependency injection right so this is
again one examples of loosely coupled
framework okay all right so here you are
actually separating out the producer of
the bean instance from the consumer
consumer doesn't care how the bean
instance gets created okay all right
okay so let's see examples so this is
the case that a bean instance is being
created depending on pitches logic so
here so this is the consumer consumer
basically says I want the coder object
instance whose qualifier is chosen okay
and the consumer doesn't care how the
peniston's gets created okay now this is
how you could create the coder chosen
holder object instance here basically
again this is an example of new here we
have a true implementation object being
cast okay to this method and depending
on the logic so here in this code the
code type is something the user will
actually set I'm gonna actually give the
demo in a few seconds based on what what
the you just said it will choose either
object instance of this or object
instance of this okay so different
object instance will be created and will
be returned again client meaning
consumer doesn't care how the object
instance get created this is in fact
loosely coupled okay the model that I
just talked about all right okay
creation of non-being instance in this
case I want actually have a face context
object and you can create a space
context object and now it is a penis
alright so let me just show you a few
demos
so let me run this application first and
I'm gonna show the code so here we are
actually injecting three different
object instance this is a string this is
integer and this is the again integer
okay
so let's actually see the consumer code
first so this is hello servlet Java so
basically I'm asking not just regular
string object instance but formal string
object instance here I'm not just asking
regular int primitive type but max
number in type and here again I'm
actually asking for not just regular
integer type at random integer type okay
all right
so let's actually see producers again
consumer doesn't care how the object
instance gets created here producers is
there okay so here this is the code so
depending on the time of the day
different string object will be created
make sense this is an example of
business logic is used to create a
different instance do you agree with
that okay all right same thing with the
max number okay so here you know we
don't have that much of the setup code
but here you know the this max number
could be generated depending on again
your mood or depending on whatever
business logic you want and same thing
with this okay all right now let's see
I'm gonna actually do caprile exercises
so here we define the full mall okay and
it produces pom own type of chain okay
and this is the consumer okay what
happens if I actually do this what do
you think
what do you think it will happen well
you know it happens this gain is
actually you know Jerry Apple actually
does the work okay so it's unset it
unsatisfied dependencies okay because if
you remove this one is gonna be default
qualifier okay however the consumer was
asking formal qualifier so there was no
formal string object available that's
the reason we got unsatisfied okay
dependency injection right so now if I
remove this one do you think it will
work
how many of you think it will work how
many of you think it will not work how
many of you don't know what you're doing
you're here for pizza be honest no I'm
just kidding all right should work
because here the producer is generating
default qualifier object and consumer is
also asking for the default object so
should work okay so if I just want it
again it works okay what about the case
that now I'm going to remove this guy it
would work why not
it didn't work okay okay again this guy
was actually looking for you know you
can see unsatisfied dependencies because
this is providing formal string object
however this is guys this guy's asking
for default string object okay all right
okay so that is the first demo now let's
take a look at the second a man that is
the one that I showed in the
presentation so let me just run this
application so here it is the string
encoder so I have a two choice I can
either choose test or ship the letters
and depending on what I choose
different implementation will be used
for creating an object instance so here
if I choose a and then if I want to move
by two then it will generate it will
actually display C okay and this is
excusing implementation based on this
but if I use test version of it then it
will use a different implementation okay
so if we see the code that is basically
what I showed you the presentation so we
have coder implementation and test core
implementation and here depending on
what user has chosen okay so this coder
type is set from the JSP page right and
depending on which one I chose it will
choose a different implementation for
providing object instance make sense all
right okay
moving forward type state use of Java EE
resources so this is another usage of
produces anything this is in fact one of
the differences that you will see in
fact you know what is possible with
existing Java type versus what is
possibly the CDR now in all Java EE 5
code ok you might in fact have to use a
string value like this ok persistent
unit if you have just one single
persistent you need you don't have to
specify it but you could have a multiple
persistent unit in that case you have to
specify and this one is just a
persistent unit resource however if
you're actually providing like a
connection factory of JMS you know again
you have to specify the string value of
it okay now if you have to have multiple
places where you have to specify these
resources using strings right what you
can do is you can use a produces to
create a single so here this is an
example so here instead of actually
having this produces this producer field
persistent unit in many different places
I'm gonna actually have a single
location where I'm
producing nuture database type of
persistent complex object in this case
entity manager object okay again this
user manager am user database is the
qualifier and then in the consumer code
you are going to use this user database
type so here you don't have to use a
string so this is providing again type
safe code okay
alright so let me show the demo so I'm
using Java DB and Java DB is X running
from this for convenience reason I'm
actually running it from the NetBeans so
here we don't have any tables yet so
it's going to create here to do database
table so let's actually run this
application first
case so this is a code let me run the
code and I'm gonna show the code so you
know I'm going to just feed a to-do list
keep a talk in San Francisco job submit
probably I don't worry
you should actually create a persistent
you need actually persistent XML file is
defined in a way that he should actually
create automatically so let me just see
man I just tested before I came in
yeah sex drop and create tables so that
should work okay I'm gonna just clean
built and if it doesn't work I probably
have to move on
so what is actually building let me
actually show the code let me just
so this is the entitymanager I mean this
is again the same code that we have seen
so you know by the way you can see it
produces can be excused not only in the
method but also field okay so this is
actually I'm actually producing not just
regular entitymanager object but use
your database type of entity manager
object and then I'm actually using it in
this ejv code so here I'm actually using
that code so I'm here asking for not
just regular entity manager type object
but use your database type of entity
manager object okay so let me just I'm
gonna just to be move this guy
okay just
okay that worked okay and just to to to
whatever summit if I see two items you
know I got those two items added to the
database and if I want to see actual
table and I just be fresh and this is
the to-do list so I'm gonna actually see
the key the data and you can see the two
items actually have been added as the
to-do items okay so pretty
straightforward events so I assume every
one of us is actually quite familiar
with
javabeans event mode where you have
event source and you have event receiver
and event receiver has to register is
interest of getting events to the event
source using add and remove event
listener is very complex if you think
about it right
so in CDR is greatly simplified and you
will see what I mean by that and again
this is another example of loosely
coupled scheme where event producer and
event consumer in fact are separated out
okay alright so the way that you are
going to use this event model is you're
going to define event class and then you
are going to fire an event as event
producer and event listener in fact this
is the simplification as event listener
only thing I have to do is to observe
using it observes o notation that's it
you don't have to register yourself to
date and source anything like that okay
so that's the example of this so event
class is just a project class okay so
you can see this is the aloft event and
event producer is going to have injected
event object so here we are injecting
event object of this generic type and
then it's going to just fire using that
event object okay all right all right
now as even listener the only thing it
has to do is using F observed and event
it very simple okay alright so let's do
simple them home
so in this code this guy is actually
functioning as both event register an
event listener in a single class so this
is a login class you just login and so
when well let me just run the code first
so it doesn't care what username and
password they're using okay it will just
accept it and if I click Submit then it
will just return this back it's very
simple the other black code okay now so
this is the code now when it does
perform this the the login process is
going to fire
okay the servlet code will actually you
know the inbox so this is a login
servlet code and this code will actually
call the login method here okay so this
login method is basically perform the
validation of username and password in
this case accept anything and then it
will fire an event okay and and you'll
also actually received event so this is
the case I'm actually observing the log
in log in event using observes okay so
when I see the console you can see this
is observed okay pretty straightforward
okay now you can also qualifier event
with qualifier okay so here I'm not just
dealing with a regular even I but admin
qualified event type okay and here
producer will fire an event now event
consumer can specify
I'm not just receiving regular log event
but I'm actually receiving admin and
lovely man combination event object this
is a qualification you agree with that
all right
okay so let's actually do the next
so this is the case so we now horrified
with admin ok and then we fire that
event now we have a three event
listeners okay one is observing just any
and it's also actually using at any time
and then it's also receiving admin type
okay so this is a question for you how
many lock message should we see one
raise your hand
- okay three no one but just one person
over there okay
the answer is three okay so let's go on
this code
okay and let's see how many we got we
got three okay so let's see the code
again so again qualifier is Java type
right so same Java type concept should
actually work for the qualifier okay so
this guy should receive this event
because it's accepting any event type by
the way this is the same thing as at any
so these two are in fact you can think
of them the same okay and then of course
this guy should receive it as well okay
so we should receive three events all
right question yes so any is a game is
used when you want to receive any
qualifier type okay so enough example in
fact I actually remove this slide the
the suppose if you are receiving you
know some kind of if your next right is
basically idea of at any is you wanna
actually specify injection point and you
want to receive anything regardless of
what qualifier is used for that object
okay yeah so it is it is the same impact
okay question so the question is you
know are there any already involved in
this the even handling the answer is no
in fact that was actually some
discussion about in ordering but that's
not in the current spec but it is
actually being asked by the community
and you know CDI communities in fact
trying to define a way of specify order
of these event handlers it's something
that is being worked on alright
alternative so what is an alternative
being so if you're using if you're using
alternative ah notation right for a
being
what that means is that the beam is
going to be ignored when it is scared so
what's the purpose at alternative so let
you package you can in fact have a
multiple means multiple candidates
without causing and acute exception okay
so you might impact I have four
candidates and three of them you can
specify with at alternative okay that
means those three will not be considered
as a candidate
okay by CD at one time okay so when you
will actually use an alternative one
example is testing you might in fact
have a multiple mouth objects for
testing and you want to have all this
mala object with add alternative so they
are not going to be considered as a
candidate however during the testing you
want to enable one of those mouth object
for testing purpose now in order to
enable that model object there is an
obtain with the alternative you have to
specify that being in beans direction
alpha so this is the first example of
using beans that XML far nothing just
more than the indication of the
application archetype okay alright so
this is an example suppose you know I
have a testing code and I said it at
alternative what it means is that this
implementation class will not be
considered as a candidate right by the
CDA at one time now if I want to
activate this particular implementation
then I specify in the beans that XML
file then this guy will be used okay as
implementation class of choice okay
all right so let's try that
so we have to implementation class one
is CUDA import and then we have test
code in pole again both of those
implementation class is implementing
coder interface and in this user
consumer is asking for coder okay now if
I don't have this test code
implementation annotated with
alternative then you will we will
experience and begin the exception right
now because I set this implementation
with alternative this is not going to be
considered as a candidate so there will
not be and begin error so this one
should work it will choose this guy
right so let me run the code
okay so this is the same code I'm gonna
say a and shipped by true then it will
say C okay alright now for testing
purpose I want to actually use this guy
so now this is a time I am going to go
to my beans that XML file or here we go
means the XML file and I'm going to
enable the particular test
implementation ok now this will use this
ok so let me just read one the code yes
jlabel exit ooh it's working so I should
be able to this time
so this time if I say a and true it
should use test implementation okay so
this is from the testing code okay all
right interceptor I'm sure you know the
concept of intercept that we've used we
have used the Interceptor in you know
the previous Java platform however the
previous version of Java a platform like
a Java EE 5 have some issues in terms of
how it didn't implement the Interceptor
we'll take a look at in the following
slide ok so the issues are of non CDI
base interceptor implementation in Java
EE 5 the first problem is intercept the
implementation reference is a kind of
hard coded you see the code here and the
whole purpose of using interceptor is
that separation of certain thing applied
to your class right now your hard coding
that classes in your code which is not
good you really there the second thing
is suppose if you actually providing
multiple interceptors due to programming
errors in a in one place you are
probably using this guy is the first
interceptor and then using transaction
in the second interceptor but by
performing mistake in another place you
exchange you change them you change the
order right in that case it will
actually provide some different behavior
okay so there is there is a possibility
of different behavior without exiting
nourished ok so the second problem and
the problem is looks verbose it looks
very crowded so these are the issues of
interceptor schemes of Java EE 5 so CDI
provides a better interceptor schemes ok
so here the way you can actually do
implement interceptor is again you are
going to defy interceptor binding types
so here you're gonna use interceptor
binding you're basically you you're
defining law interceptor binding type
again you can think of it as a qualifier
as well and then you want to write
interceptor
implementation so here we actually
separating out implementation intercept
implementation from the user of the
Interceptor okay so here you're going to
provide lot intercept the binding type
and then you are going to provide
implementation okay so we actually
providing around invoke intercept
implementation and then you are going to
specify that interceptor for target
class
okay so target class doesn't know how
this is implemented implementation of
law could be changing without affecting
its code see the improvement right all
right now interceptor implementation has
to be activated in pins that XML file so
this is another example that you're
using means that XML file alright so I'm
going to just move ahead because this is
pretty straightforward now you can have
a multiple interceptors we have a
transaction transactional interceptor
here and we have a secure interceptor at
the meta level if you have interceptor
at the class level then that interceptor
gets applied to all methods okay if
you're specifying interceptor on a
particular method and that interceptor
will be applied on that particular
method pretty straightforward
now here you can specify order of your
question so question was you know is any
other cases I can use interceptor
besides the class and method and the
answer is no it's just class or method
okay all right so this is the case that
you can specify order in teens that XML
file so here I'm saying that security
interceptor has to be invoked first and
then transaction interceptor should be
involved next okay so there is no
ambiguity or error possible error on
order of these interceptors being
invoked in fact order of interceptors
being invoked is pretty important
I have you know has implication in terms
of its behavior all right so I'm going
to just move ahead
as well okay you can create a composite
interceptor here again the verbosity of
previous Java eBay's interceptors you
can actually combine the set of
interceptors to create a brand new
semantically meaningful interceptor here
I'm actually creating business operation
interceptor combining these security and
transaction interceptors and then the
code is going to use this business
operation interceptor okay question in
this case yeah because you have to
specify the order in the previous you
know the composite interceptors
okay moving forward
I'm sorry D so the order is that just to
specify the beans that X and alpha are
actually give you a wrong answer okay so
the order of the the interceptors still
being defined in beans not XML not in
the order of the you know that the
annotations sorry okay moving forward
decorator
okay so decorator is basically
implementing pequea pattern how many of
you use a stack J no one okay just okay
okay so aspectj has what is called the
instantiation so basically is decorating
into that you are basically adding some
logic to your interface okay all right
you don't have to create a brand new
interface instead you can actually add
business logic to the existing interface
okay all right so you can actually also
use delegate or notation to use the
original object right and again the
decorators must be specified in bins
directive alpha okay so let's see
example of this so in this case I'm
actually decorating this particular code
and it's implementing this quarter
interface okay so I am extra decorating
this interface meaning I'm actually
adding extra business logic
okay to this cause with this code string
so here I'm actually invoking the old
original object of quarter and I can
call that quarter object because I
specify with a delegator notation and
this is the extra business logic I'm
adding to it okay so this is decorator
and again you have to specify that
decorator in deeds that XML file so
let's see let's like to try that
so this is the same code that we have
seen before so I'm not just a and two
and in code so this is actually coming
from this C is coming from original
implementation okay and then rest of
this is actually coming from added logic
okay again if you see the code here we
have a decorator and this is the one
that I showed on the slide
okay so this is the original code or
object that just display C okay and then
these are the extra logics that are
added by this decorator okay all right
stereotypes stereotype is a notation
that groups are not patient okay so you
can in fact have multiple connotations
into a single stereotype okay so these
are the things that you can have inside
your stereotype so examples of this you
know suppose I have multiple qualifiers
like this and it looks pretty verbose
right and if I have to use the set of
these qualifiers in many different
places then it's a little bit too much -
you know it's kind of duplication right
so in that case what you can do is you
can actually create a stereotype like
this okay so I'm creating I created
stair type all the business component
and then I just use this business
component qualifier as a replacement of
all these combination of qualifiers
all right so pretty straightforward
concept alright so that ends my
presentation on CDR I I'm gonna actually
spend just less than five minutes on
demonstration of Jericho and then
hopefully we have about 10 minutes Q&amp;amp;A
on CDI or Jaipur whatever you are to
talk about how many of you ever heard of
jeroboam how many of you okay how many
of you are using terrible oh one person
okay so
so some of you know the concept of jerry
but jerry is basically productivity tool
so idea especially when you're building
enterprise applications is whenever you
make a change you want to see the
changes right away without the building
and be deploying or sometimes restarting
the server so basically saving 10 to 20
percent of your development time so now
then i'm going to show you is a spring
MVC application running over tomcat
I'm using Eclipse IDE but jlabel can
work with any idea of your choice
it works with any server be a choice and
support pretty much all the frameworks
out there whether it's a spring
framework spring me applause it can spin
security JSF CDR you have seen an
example of that EJB you know all those
things so this is a spin MVC application
called the pet clinic so I'm going to
make a series of changes and see the
changes right away again without B
building and with the pointer
application so I'm gonna click mine
owner and I'm gonna click Add owner now
if I click add owner the validation
logic is kicked in so these red colored
messages are from validation logic so
I'm going to disable the validation
logic of the first name right so this is
a validation logic so I'm going to just
comment out the validation logic of the
cat first name I mean via first name
field and save the change and refresh
the browser and you can see the change
is picked up and you can see in fact
you're able just pick up the change and
it just reloaded that class right now
I'm going to create a brand new map that
out of the six lines of code validation
logic of the last name and address field
so I call it my method so my effort has
been created as involved so I'm gonna go
to my method that has been created at
the moment I'm actually running in non
debugging mode but if I'm running in
debugging mode even if this method is a
brand new method that has been created
during one time I should be able to make
a breakpoint and should be able to do
source code level debugging okay that's
pretty cool now I'm going to make a
change of this you reject value method
of this last name so we check value
method is gonna be it is going to get
invoke when there is a validation error
on last name field so I'm gonna change
this some random value which I know it's
not a message it's wonderful so maybe
ABC which means this third string object
will be used as error message so I'm
gonna just you know I couldn't type well
so I'm going to just do DD DD thing and
then refresh the page and obviously you
can see is actually picking up the
change now I'm going to change messages
from the file to add is ABC because I do
not what my code is breaking
internationalisation so I'm going to
open message is the properties file and
then ABC
ok so messages bundle file is that it so
I'm not just a p/e
and I'm gonna say San Francisco chart
whatever save the change and you press
the browser you can see it's picking up
a change from messages one to five okay
and you can see in fact Jerry will just
reloaded this message is wonderful
because it detective change another type
of properties file I want to change once
in a while again without rebuilding the
deploy my application is love forge a
properties file okay sometimes I want to
see more fine grained debugging messages
okay alright so I'm gonna actually open
lock project properties file so this is
a lock for your properties but for now
spin framework web package the default
lock level is set to error which means
I'm not seeing diva level lock messages
I'm gonna change this one to debug so
that I can see debug level log messages
say the change and let me just clear out
this console so that we can see people
who have a lot messages and refresh the
page you can see now we are seeing ebook
level log messages from spinner
framework okay now if I'm done with
these people have a lot messages I can
change it back okay so I'm and I'm gonna
change it back this time to info you can
see the change and let me just clear the
sky and refresh the page now we are not
seeing any more people who have a lot
messages but you can see it area but
just reload it love with your properties
file because it detect a change okay
alright so you can see table can handle
the changes in Java code as well as well
known properties but what about the
frame of Pacific on rotation and famous
Pacific XML file in fact as a developer
I make changes typically framework
related okay so I'm gonna actually open
Spring Framework controller class this
is everyone or form spin controller
class which has request mapping a
notation so in spring favorite request
mapping a notation is used to map
incoming request URL to this controller
class okay so that is basically what I'm
using right now okay owner slash a new
that's basically what I'm using here so
I'm gonna change this value to some
random number give me some number six a
lot of six all right see if I press
ENTER as expected we get full four kind
of error because we don't have any
controller class that handles this
brand-new URL okay so we can actually go
to the controller class and change the
value of this controller to handle this
new URL okay and save the change and we
press the page voila it's picking it up
okay so now you can see Jerry but can
handle
frame up specific connotation okay so
when we say Jerry will handle any kind
of framework that means it understand
what it does you understand whenever you
make a change in connotations or XML
file it knows what to do so next time I
is in fact actually changing
it's an alpha so in spring famer you
actually declare all your beans in
Spring Framework context and creation
part right so I'm going to make a three
changes first I'm going to create a bean
spring bean and then I'm gonna declare
that being an XML file and then I'm
gonna inject it being a used a pin okay
all right so I am going to go to this
class I mean the package where all the
domain classes are located so I'm gonna
just create a brand new Java class
called my Geraldine
okay so my jlabel being class has been
created and then I'm gonna actually add
a very simple field called the name and
then I'm gonna create a getter and
setter method so source generate getters
and setters select name field okay so we
created a very simple spinning called my
Jerry would be now I'm going to declare
this mean an XML file so in this
application the XML file is called cut
clinic servlet Direction alpha so this
is a file so let me actually open the
file the screen so we have these three
lines of code that is at the moment is
commented out so this is the Declaration
of the beam that I just created
okay my J will beam right so I'm going
to uncomment these three lines of code
so what it means is that whenever I want
this beam I want the container in this
case pink frame or container to create a
beam instance using this class and when
it created beam instance I want it to
set the name property value of that beam
instance with this value okay so I'm
gonna change this one to someone of the
value okay now we are ready to use these
things so I'm gonna go to the same
controller class that we have seen
before
so I'm gonna inject this beam using spin
framer F or wired or notation so this is
two lines of code that I'm going to
uncomment okay and import the class so
basically I'm injecting my team using
auto oiler notation now I can use this
beam instance in my code so this
controller class has a set of form
method that is used to create a form
object called the owner class and this
owner class is the one that has the
first name and last name field that I
use to display this form page so what I
want to do is I want to use a name
property value or my bean instance which
is survey that you have passion to set
the first name field of this owner form
object so that is this line of code so
here I'm calling that name method of my
being to set the first name field
okay so I'm going to uncomment now I
save them all right now I'm gonna
refresh how many of you think it will
work all right how many of you think
will not work okay one person all right
that's good
so I refresh and it worked okay now my
last part of the demo is I am going to
change everything back to where it was
right so I'm gonna just undo all the
changes so this one la voce' and
validation
now as far as jlabel is concerned these
are just additional set of changes and
I'm making to the changes I made okay so
I'm gonna even delete a class that I've
created
okay so I'm going to be moved a class
that I have created they meet and then I
save them all
okay and then I'm gonna actually go to
my old URL and then it behaves nothing
has been changed and if I click a donor
you can see it's using old validation
logic okay so you can see terrible is
actually saving a lot of your time if
you actually have to make a lot of
changes during the day it's basically
saving about an hour sometimes two hours
okay
all right so that is end of my
presentation thank you for invitation
and hopefully to you see you guys again
some point</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>