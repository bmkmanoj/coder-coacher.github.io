<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Getting Started with Node.js with Bruno Terkaly of Microsoft | Coder Coacher - Coaching Coders</title><meta content="Getting Started with Node.js with Bruno Terkaly of Microsoft - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/InfoQ/">InfoQ</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Getting Started with Node.js with Bruno Terkaly of Microsoft</b></h2><h5 class="post__date">2012-04-19</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/hKQr2DGJjUQ" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">alright thanks again everyone for being
here I'm very excited I think of all the
technologies I've seen of the three
decades I've been an IT nodes grown
amazing it's just been a amazing ride
just I'm kind of curious how many of you
are JavaScript no JavaScript pretty well
most everyone excellent how about how
many of you've actually dabbled and
nodejs at this point and played with it
good okay so we've got our bases covered
we've got everything from kind of the
beginner topics all the way to the guys
creating is the node packages up there
on the node package manager site so I
think we're gonna have our bases covered
the way I want to gear the night is
mostly codebase fast-paced everything
I've talked about is on it is on my blog
so if you look over here you'll notice
that I've got this little section where
the network's slow I wonder why right
here I've got all my posts and
everything I'll talk about and more so
if you're interested feel free to
indulge so I'm gonna give you like a one
slide intro to node in a nutshell I'm
you all familiar with Java being in the
browser JavaScript that is well the
world has now moved this into the server
side as well this is all made possible
by the Google v8 engine which drives the
which drives this technology so again
it's JavaScript on the server so all are
you client guys are now server
developers I'm kind of in disbelief I
always thought you needed a compiled
language on the server but apparently no
it's doing really good you know Facebook
uses it Yahoo uses it and these
gentlemen will probably know if some
other sites that are using it so I think
you're gonna see quite a bit of stuff so
I think when I when I look at node when
I see all the stuff around it it's all
about this notion of concurrency it does
concurrency very very well and I'll
explain a little more a bit about that
essentially you're never waiting
there's always vacancy and there's
always a request
possible by the node engine so whether
there's a database or a web service in
the backend typically it'll take on more
and more connections so there's been a
lot of research about how many
connections and that's really how data
centers measure their productivity how
many connections can you support on a
single box and note is one of those
technologies that's scale super super
well this was recorded two years ago
it's got two hundred thousand views on
YouTube and it was max the the
videographer and I did this two years
ago so I would suggest to go look at
this as well after tonight this is the
creator of node it's about an hour long
the demo that I show you tonight is kind
of leveraging some of that so this would
be a good next step for you guys as we
move forward so with that said let's
just jump into the typical little hello
world so I'm gonna use my favorite
editor here VI and I'm gonna say hello
fire this guy up and I'm gonna start
kind of building this guy incrementally
so when you look at the require
statement here this is basically saying
I want to use the HTTP library and
overtime is a use node you'll install
more and more libraries and I believe
Michael is going to talk about this at
the end of the night I do have a deck on
this how do you install these other
packages so one of the things that
you're going to do after something like
this is create the callback so when
someone comes and hits your site this
create server gets called and you notice
here the two parameters request and
response over here to the right actually
I got my little draw tool these guys so
there's your request and response
objects and with those you can read
parameters you can write to the back to
the browser or whatever HTTP clients you
have so let's go ahead and put the body
into this guy and it's going to be your
typical hello world so you can see here
that there's different we're writing the
header content type here so this could
be you know RSS this could be a video
tag whatever it is you're writing back
and here you can see I'm just sending
the word hello world now we just got a
the listener here at the very bottom and
this is basically saying on on port 1337
on my localhost I'm gonna listen to this
guy
so we can save this guy and run them go
back to my command prompt and I think
this should look familiar to both the
most of you so go ahead and it's waiting
for me now I'm gonna fire up a browser
page to go to this there you go so you
can see here that indeed hello world got
sent notice by the way I did pass
parameters here if you look over here on
the upper right you can see the zip code
I'll use that and maybe a future demo
but you could have read that as well and
reacted appropriately so that's your
basic hello world nothing too fancy I
think it gets the point across of what
you can do with node and how simple the
syntax is let's jump into another topic
over here let me close this browser
session so note is kind of bad at
certain types of things and one of them
is multi-threaded type of operations and
in fact that's the one of the main
benefits of node you don't worry about
some of fours and mutexes and signals
and threads it just naturally does that
for you an i/o bound operations now some
of the gentlemen might talk to you later
tonight about how you can kind of work
around that there is some stuff here you
can find on the net here's one such site
where the guy not this side another site
let's say it's this site right here
where he gets into how you can leverage
the next tick to do kind of
multi-threading kind of things we're not
going to I'm not going to get into that
tonight but inherently it's not that
it's single threaded now what it is good
at is i/o so it's got screaming
excellent IO performance that's the one
area where it really really shines and
so that's the primary driver I think for
most people they're the kind of i/o
bound we're seeing a lot of traction and
I'm curious in this group people reading
MongoDB which of course returns things
in JSON format and
and and node being a JavaScript language
loves Jason how many of you are doing a
MongoDB and node together Wow good not
that many as I would have expected so at
any rate that's I think that's a very
promising technology right there one
more thing I might want to mention here
up that's the wrong one you want to say
nodes say hello when we're time Marty
running this guy and another one do I
believe yep so I wanted to bring up
fiddler really quick fiddler is a proxy
kind of lets you look at what's
happening kind of behind the scene so if
we go and do another browse to this
session you'll notice that fiddler
recorded that and the part I wanted to
focus on briefly is this bottom part
here the header so if you notice these
are parameters over here let's talk a
little bit about these parameters these
this header if you will so this header
is essentially got these different
sections so the first one is that we're
using the latest HTTP protocol and this
keepalive is one of the secrets it
allows us to keep kind of more
connections open and not have to open
and close them all the time that's given
us some good performance and this last
part basically says that the server
doesn't have to say how much output it's
going to provide the client it's
basically going to be chunked on a
demand basis so this is if you watch the
Ryan Dahl video he focuses on this a
little bit so just kind of heads up for
that so let's keep rolling with this guy
I've got another couple quick examples
to show you let's talk a little bit
about the following so note does both of
these HTTP and TCP I just showed you
HTTP I want to show you is TCP now
you're requiring different libraries for
that obviously and that's why you'll see
HTTP versus net now most of you know the
difference is between these two
protocols some of them consider TCP more
more efficient after all HTTP uses TCP
but then there are challenges with TCP
in terms of firewalls and
so on now I'm not gonna have time to
show this full diagram but what I want
to do is my final kind of demo here is
build out this lame chat server that
does tcp-based kind of chat application
and it'll have like a dotnet client and
this could be an android client java
doesn't matter a lot of the code will be
very similar but i don't have time to
show you how to do is this last part i
did it today but when I finally
rehearsed it it took too long but I had
this other HTTP client where I do a
restful call against it and it itself
does a restful call against the national
weather service gets an emic XML
document back about the weather scans
through that XML document packages it up
only the stuff that is relevant from my
client app and sends it back so I won't
get to the second part but at least I
can show you this lame chat application
right now so I'm going to cancel out of
this guy and bring up lame chat so this
is the kind of the demo that Ryan walks
through on his demo so I'm just gonna
start pasting parts of this in what does
it tell you when you see this net here
last time I was HTTP what does that mean
TCP so I'm creating a TCP server here I
also have an array of sockets that I'm
gonna maintain so every time a client
connects I'm gonna record that socket so
that I can broadcast future messages to
that socket so what I'm going to do
after that now of course is try to open
up the server and there you can see the
socket that got sent in when a client
connected a socket was created what do I
need to do with that socket is I need to
add it to an array and then later I'm
gonna write to it once I get a client to
send a message I'm gonna basically
broadcast to all my sockets
every time I receive a message so that's
this next piece right here whoops let me
just fix that typo so let's go to this
next piece of code so what I just added
in here now was the code for this
server methods so notice over here as
soon as I get a new socket I'm going to
add it to that array you see on line
seven so I'm like I said I need to keep
a list of all my sockets that are open
so here you can see the data event the
data event is when it when a client
sends some text so in a chat application
it would be a message and what I'm gonna
do is I'm gonna loop through all my all
my sockets and on line 24 you can see
that I'm writing to each one of the
sockets lines 21 and 22 is don't send
the message to myself right if I'm
writing a client app I don't need to see
my own outgoing messages and then
finally when someone disconnects that
generates an end event and we're gonna
go into our array and get rid of that
socket because it's otherwise a dead
socket once someone disconnects so the
next kind of step at this point here is
to actually engage this thing to listen
so I'm going to go here to the very
bottom and plug in my listen method so
here it's listening on port 8000 so
great we've got ourselves a a
server-side chat application so I'm
gonna go here and fire this guy off so
now it's waiting for my for my client so
let me fire up Visual Studio and just
create a quick little client application
here again this could be an Android if
you love writing a lots of code you can
do it in Objective C as well so I'm
gonna do a WPF application and this is
similar to Android to the extent that
there's a markup XML file where it's all
kind of declarative for the user
interface and then there's a code behind
so I'm just gonna go over here and build
my user interface like really really
quickly here the fastest user interface
ever built there it is you can see how
the connect button over here I have a
kind of a name button for whoever it is
that connects
I had the conversation text box you can
see that here I've got an outgoing
message text box and a send message
command as well so that's my user
interface what I want to do next is just
the code behind that that does all the
work for this so for example when I
click connect
this codes gonna fire off over here so
what I want to do first is add some of
these using statements which kind of
simplify my my writing of code it just
abbreviates a few things I'm gonna
declare some variables here that will
allow me to do a TCP conversation from
within c-sharp so I'm gonna paste in a
few of those variables notice I got a
TCP client and this server stream acts
as my where I'm writing and reading from
so when people are chatting when this
client is chatting it's sending outgoing
text through the server stream and when
it receives text it gets it here
so let's now code up the rest of this
Connect method over here and let's walk
through some of this code so the connect
is pretty simple it's going to go over
here and display the prompt it's then
gonna go and connect to that waiting
application that's sitting right here
port 8000 and it's gonna basically go
and get a handle to the stream so it can
talk to the world and it's gonna
basically say to everyone else who's
listening hey someone just joined the
conversation it's just gonna write out
hey Bruno is joining the conversation
this is like a thread that just loops in
the background and this thread
essentially is just reading bytes as
soon as it reads a byte it adds it to
the textbox with add message and I'd
mess it just goes to my conversation
text box right it's just going to this
guy right here and adding that text to
it and so pretty much when I send a
message it's just the same thing as
before except in Reverse we're writing
we're not reading so again this loop
here loops in death
as a separate thread reading and this
little send button here sends messages
so I believe pretty much this this
client is done I'm going to compile it
I'm gonna go over to the actual folder
where this guy's lives and fire them off
let's do one more
so I'll just say whatever Jim here I'll
connect and then I'll connect this guy
and he's having the conversation hello
to me pretty much no it's brokering that
conversation now one of the things I was
going to do if I had more time I was
gonna have you type in a zip code here
then it was gonna go to the national
weather service or I was gonna go to
another node application send that zip
code that node application was gonna do
a restful call to the National Weather
Service get XML Parcells temperatures
and then send that to all the clients
through the other running node
application but I'm at a time it's kind
of times up so I am gonna just wrap up
with a couple little like to dues for
you guys so let's do that real briefly
so I strongly encourage you to go to the
node package manager now if you notice I
use though I used a bunch of them and
the way this works is you simply go to
your command prompt over here let me do
that and you type in NPM install and
let's say you want to play with URLs
type that and then it goes in boom your
installed now in your code you can just
say require URL so if you go up to the
website you're gonna see a bunch of
different modules in fact tonight we're
lucky enough to have one of the creators
here the request module you wrote this
one so if you go to the NP SJS org site
you'll see these are the these are the
i braised you guys should all use so as
a follow-up and this is on my blog go
and start playing with these that's how
I kind I've only spent a few days on
node and it was amazingly easy so again
you can go and install underscore for
example and just before you do that
however you have to install the node
package manager so go over to NPM j/s or
go over here the distribution folder I
found is the easiest way to do this and
get the zip and just unzip it at that
point you have the node package manager
installed and you can say npm install
underscore and you're off and running
now what does this guy do why underscore
well our code tends to get gummed up and
so what these guys SiC came in and said
hey why don't we give functional
programming capabilities to note
applications and functional languages
kind of minimized the the notion of a
state they're not as procedural compared
to imperative languages so a lot of big
fans over there for it and if you take a
look at say just underscore itself it's
got examples for all these categories of
functions so think of it as a general
framework to kind of make you a better
node programmer in a functional kind of
way so that's just one example of all
the modules that you can get and again
we have one of the speakers tonight
Michael is going to talk to you about
request which is an extremely powerful
and popular one here and that's my time
everyone thanks for uh for showing up
thanks for listening to me I'm gonna
pass the baton to mr. Matt Harrington
thanks everyone</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>