<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Ember Components in 30 Minutes | Coder Coacher - Coaching Coders</title><meta content="Ember Components in 30 Minutes - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/InfoQ/">InfoQ</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Ember Components in 30 Minutes</b></h2><h5 class="post__date">2015-05-28</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/F8BCCPlVU5E" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so my name is Miguel Madero I am a lady
engineer at practice Fusion i have been
working on client-side applications for
for a while a over nine years or so
doing a lot of windows forms and wpa if
I even need some silver light and flakes
a while ago when that team was isolating
and and a lot of the panels that we were
using there were really similar to what
we are using today number today at
practice Fusion our core application is
completely based in in number we have
about 70 engineers developing judge this
product we have we have a few other
products but we haven't run 70 engineers
to developing this we have eight
different themes a working on 14
different subdomains and it's a lot of
fun to work day every day except
weekends but I'll that the reason I
mentioned this out practice Fusion is
because a lot of what I will be showing
you today is stuff that we're actually
doing on a day to day at work and some
of the components of your using there so
just small disclaimer some of these
things are not demo quality code this is
actual production code I won't be
showing a lot of code but a lot of the
concepts there a telly components in 30
minutes I'll have to apologize for the
title that I polish that I think that
was a stupid idea i was thinking like
covering Teddy and I get all rush it
who's keeping time see if I hold- to
show i'll definitely show you a lot of
components and we should all if all do
teddy if you guys are keeping time and
count then then i'll i'll buy you a bit
afterwards if I don't meet my teddy
components but let's say we will see
some components in parish schmick nuts
or or maybe I'll run over time and we'll
do it more than that so what do they
when you hear components what's the
first thing that comes to your mind what
what it in of components
web components what reusable elements
yeah what else we have their cells
contain isolation and encapsulation yeah
that's a good one the other ones were
good as well but I like that one and I
think encapsulation and isolation is is
probably the key the key attribute when
we think of components I had a lot of
arguments in the past either in github
or internally working projects where
people were saying well but what the
point I'm doing this thing if it's not
reducible well it doesn't matter if it's
not reusable the main point of
components is having some encapsulation
and we'll talk a lot more about that a
really composition is it's an important
aspect as well we could think of
components to create controls and
widgets but that's only one part of what
components are used for if you think of
single two legs and your text boxes and
that's only one type of components and
we will cover other types of components
as well over the web components is a big
part and hopefully it sometimes will get
closer to two that a the dream of web
components him it's also something that
it's sometimes easier to just write a
component than to to think of
controllers and route and and sometimes
we just get too lazy and we just do that
eerie you said you intentionally put it
at the bottom because we often think of
reuse as a maintain when it's it's
important but it's not the case so let's
just think of encapsulation you have all
this complex chemistry inside of your
component but at the end of the day you
just have this single interface of say
in this case appeal that you will
swallow we also think of the components
as your rubbish bin you will put
everything daddy inside and just closer
close the lid and I think that's that
that's a metaphor that I sold from from
palmdale
all right so who has read the number
components yeah almost almost everyone
cool so I had this hello world demo that
I will just skip because I don't know
how to do it time it's already five
minutes and I haven't shown you a single
component so I don't know if I'll do it
with Teddy anyway just just briefly I
know you guys have written components
but this is just like a quick recap it
all starts at the router with Amber it's
all driven by the URL we all know that
the router eventually maps to a
different route once you transition to a
route that guy takes over we'll set up
the controller will also do some stuff
with the model let's skip that set of
sets up the controller and eventually in
the controller it will set some say to
your to your components the component
will keep observing properties of your
controller or or or whatever the context
of that component happens to be and then
the component will send actions either
to the route or the controller or
whoever that outer context happens to be
a I like to think of the model as
something that is crossing the all of
the different roles in amber similarly
services and other details will be like
cross-cutting concerns him at some point
we won't have controllers so this is
just like a sneak peek of something will
change on amber 2 point 0 0 so component
will just replace this thing that we had
on the on the left so without a quick
note on on on number 2 point 0 a load is
changing you don't have to worry just
use components today and you will be
fine a the migration path there will be
easier if you start using more
components and there are a lot of
interesting conversations happening on
on github and if you want to know more
about what's going on on number two
point oh I'll highly recommend you to
look for the road to amber 2 point 0
and have a look at the different amber
RFC's they are they're really
interesting so a lot is happening on
entrepreneur 2 point 0 a lot of that is
around components and so as I mentioned
where widgets is one one of the
different types of components and it's
often the one that we think more when we
when we are thinking components I'll
show you some examples of widgets a we
also have domain specific components
I'll show you some some of these once
you're thinking of of these widgets and
domain specific components is even
though at the end of the day they're
they're both components implementation
is the same you should have your
template and you have your JavaScript
handling the behavior of this
conceptually makes sense to make this
distinction and I'll go a bit deeper
into that we could think of widgets as
these reducible pieces of letting of
LEGO pieces that you will be using all
over your app again and again and then
you have like the typical LEGO pieces
right you have your your yellow square
that that will go pretty much everywhere
and then you have your single red Lego
piece however ones you're building more
complex LEGO pieces like space shuttle
if we could think of the space shuttle
as your app you will have some domain
specific pieces that they don't really
play anywhere else whether you're using
lego pieces but you might need a turbine
or like this small piece of the of the
shuttle or the engine of the space
shuttle those will be the many specific
components they are not as reusable but
then there are still other pieces that
you will use to compose your application
so once you're starting your types of
components think of a what would be some
of the benefits of those so really the
main principle is the same steel
encapsulation one of the key benefits of
witches is reuse so you want to be using
all of these things across your app you
have a text box or a datagrid you want
to use it all over the place a secondary
benefit will be composition
once you're thinking the main components
separation of concerns and a composition
is one of the main benefits even if you
don't even if you are not thinking of
using your domain specific components
will make sense to think of this
separation of concerns i will show you
some examples in a second a anomaly
reduce sometimes you end up reducing
these domain specific components and the
stability is a huge one especially when
you have distributed teams and you want
them to be testing all of these
components in isolation so let's let's
go with a quick demo
who's it slipping oh all right so
apologies for the resolution that let me
see if I can do something about that all
right so this is this is a component
library that we built dessert these are
the widgets of the of the app instead of
reusable components these are our usable
square lego pieces that we use all over
the place instead of that one we have
things like and I will complete it will
let you search by we'll just do this
type of our complaint in our inner
component library a we always try to
give some examples and then we have the
code and the actual implementation we
could play with them in we have things
like a button groups most of our input
widgets have these three states they
could be date there on the normal state
it could be disabled or they could have
errors so we want to do all of this
thing consistently across our
application then we have others have
colors for example we shall allergies
inside of your product we we have the
severity look at a few more interesting
ones so we need to display where
pharmacies are inside of your product
and then we also need to give our
patients the option to have directions
from here is the pharmacy and here is
your house so our component is actually
really simple we just give it an address
and these week we'll just data bind to
your model or your controller and
similarly with the destination
we have a datagrid just because any app
nita a table and a data grid em so this
one gives us all of the nice features of
like a sorting and fix skaters and fixed
column so we can scroll horizontally and
vertically as well a in some areas of
the product we also have the option to
show and hide some columns base either
and user preferences or they could
toggle this him see and yeah we also
have some some support for infinite
scrolling and we do some magic there
just to make the make it more efficient
to avoid adding a lot of markup
so when thinking widgets are really
reduce and consistency are one of the
main are one of the main components or
one of the main attributes of this a
also we tend to do a lot of Dom
manipulation and we need to do with them
to do a lot of jQuery sometimes inside
of those components we try not to but
but then sometimes that that's exactly
the main thing that they're doing and
that that abstracting the rest of our
code away from internally they actually
speak the language of the view they
subscribe to click events and they they
create Dom elements and they create an
ally or they instantiate a jquery plugin
externally as you saw i think the Google
Maps example is a good one they they
just have an address and a destination
they we don't know anything about
whether is using canvas or how is
downloading the images and the
difference bright so whatever domain and
there is a bit of contrast between those
those two this is this is one one of the
sections of rap okay can you guys have a
wild guess at how many components are we
using their teddy maybe it has a Delvian
issue an easy way of putting a check in
there we are using reducing roughly 11
components just on this section on the
right that is that is visible and that
allows us to decouple a lot of these
things and once we are when we are
developing this we were thinking of each
panel at the same time we could look at
the medication list and then we could
develop that independently will give it
its own fake data it had some unit tests
for days and and then eventually
injecting that into the into the rest of
the app it's just a simple setting some
markup to your or some handlebar
expressions
HBS files and similarly composing these
components is really simple so in this
case we have a tool box that contains a
component called template search and
inside of that one we have these silly
tabs and then instead of the tabs we
have a frequent medications which is
another component then those components
are will interact with the rest of the
world and eventually when you select one
medication from here it appears over
over there but again testing the
interactions between those two well
testing the behavior of these two
components can be done in isolation and
we have simpler tests just to test that
the integration of these components so
that's great that gives us encapsulation
we also have composition a separation of
concerns is it's a bit more important
when it comes to a domain components let
me show you another example now I'll
switch back to the app this was clearly
not designed for this a solution let me
close some panels here yeah all right
actually funny thing
nevermind so the this area of the Abdi
encounter that does what the patient the
doctor will be interacting with when the
patient is in the room he would usually
be looking at things like vitals signs
what's the chief complaint in instant
about the diagnosis of the patient and
he looks at the allergies or he could
record allergies and similarly for
medications you'll be recording
medications that the day degree that I
showed you earlier and then you go down
this list and you have things like the
plan and and then eventually you have
this other area quality of care and then
you coverage perilously we show the
doctors are looking at this patient or
could refer you to this patient and in
super bill which has to do with with
billing and now we are we it kind of
makes sense for the user to look at all
of these things in the same in the same
area similar to how you go to Amazon and
then you look at your shipping address
and your previous orders in the same
place just because it makes sense
promises to give you this summary
however as I as I mentioned earlier we
we actually develop these things in
separate teams everyone has their own
their own areas and their own spaces so
components is a really easy way for us
to integrate areas of essentially the
component components that are developed
by by other engineers in other teams so
the super bill is coming from the
billing module and then referrals is
coming from collab and then medications
and other parts are coming from clinical
even those things that are coming from
clinical like medications allergies it
makes sense for them to be separate
because even though they are in the same
module they are still involving
different concerns
a so with domain components we actually
try to avoid the manipulation I feel
that we we building of widgets to be
able to completely avoid the
manipulation and then once we are
developing a medications component we
only focus on how do we get medications
how do we sort medications how do we
interact with other services to do
things around medications so that's
something we don't want to deal with
family we avoid using the view language
we don't think of even to their
components and they technically have
access to the markup we like not to
speak the language of the view we don't
think about clicks we actually think
about selections because we use this
high level widget and externally we are
always using the domain of the language
that the language of that particular
domain like we are discontinuing a
medication as opposed to they click
something so I in order to be able to
truly achieve this separation and I
think this has been a controversial
subject there have been a few
discussions about whether components
should be doing their own data access or
whether all the data access should be
done in the router or in the route or in
or some people do it in even in the
controllers what's your take on that
what do you guys think you probably
already know what I think but a bit of
both maybe so for us it can make sense
to make a strong separation between I
mean if it's a if it's a widget it
probably makes less sense for that to
have their own data access if it's a
domain-specific component it useful it
usually makes more sense for them to
have their to be responsible not exactly
of knowing how to gather data but at
least they know who to ask for the data
so they may not get their data directly
but they might go through amber data
they might use other services that will
the those services know how to get the
data a
cash or they actually need to go to the
backend and get these data if we don't
we don't give access to the the
components don't have access to the
controller so that's one of those they
could interact with other services or
amber data but not with controllers but
at the end of the day it actually makes
more sense for them to a thing for
example in the case of building if we
look at this at this application at this
area of the app all of that page we go
to the encounter route it renders
encounter controller and then all of
those things at some point actually a
few months ago all of that thing was
inside of encounter HBS it was a single
handle word same place that was doing
everything a crossing the mains and then
the encounter route was actually
responsible getting all of the data for
all of these different way parts of the
UI they were not different components at
the time so one thing is rendering right
you could say yeah all of the super
build stuff is rendered by a component
but then if the route is still getting
the data for the super building it's the
same violation of responsibilities and
the same crossing of of domains so at
least in our case it made a lot of sense
to have components knowing how to get
their data or who to ask for the data
does that make sense cool eh so quick
summary and that difference a so widget
usually the data is provided to those
widgets some exceptions might actually
be an outer complete it might make sense
for that one to know how to get more
data as you're filtering we judge they
do their own Bob manipulation we avoid
that in domain components and and then
for the main component when it comes to
data access they often just get goo it's
instead of getting getting their models
directly
cool are we doing on time
yeah any questions so far on the
difference between widgets and
components yep that's a great question
we reuse just a tiny bit of animation
and is usually handled by the widget
directly we have some jQuery we got rid
of recently of some jQuery UI we use
some CSS transitions and I have not done
a lot of that myself but I know we have
it in different areas of the product
yeah yeah yeah but we don't have a lot
of that it is most of that is rendering
data and collecting data we have some
subtle animations hidden there like some
panels are sliding in and sliding out as
you close them but that's minor things
and I mean often is user the widget that
is doing that for us yeah that's a good
question so we oh yeah sorry so the
question was what do we do with the CSS
where do we how do we manage that eh so
the answer is right now I think we're
actually doing a poor job at that often
we have one big file usually / vertical
and sometimes some some domains they
break that file into different smaller
files a but it gets a bit a bit messy we
are we're moving away we're actually
doing our CSS style guide and we have
the goal of not having any CSS we don't
have the goal of not writing any CSS
inside of the app and all of that will
be written in our a domain library in
our component library and all of these
widgets will have their own CSS and
we'll just be using classes that already
defined there I don't think water
everyone to get there but but I think
that's a good goal to strive er the
product is kind of big already and I
think I don't think we are going to get
to the point where we will completely
get rid of the existing one and then
there are cases where we might have
exceptions and we have some custom CSS
but we are trying to avoid that as much
as possible and then also something else
that is helping us a lot we are using
how's it go a convenient if it says max
or them I always get this to mix a but
essentially we argue we're juicing the
same name of the component as a name of
our class so if we have a medication
detail if we have a detailed pain which
is one of the widgets we have a dieta
pain and if that one has sub components
let's say the detail pain that I showed
earlier it has a toolbar toolbox then it
will be detail pane dash dash toolbox
all of those are scoped to that
particular component and then we have
that one to one between amber components
and and beam or smacks components in CSS
and then we see that also reflected in
the file structure so you do open the
components folder and then you will have
the same structure that the handlebar
same plates are ya oh yeah the question
is whether they are siblings or they
live on on similar structures we are
mirroring the structure but they are
done different sub folders yeah yep that
that's an excellent question we are
right now we have a single repository
and we have everything separated instead
of the same repo me show you here so
instead of the same repo we have all of
these different domains sorry it's hard
to share to it but we have things like a
CEO building a clinical collaboration
electronic prescriptions labs etc is so
they're all their own separate files
they are all actually compile
independently and right now so we have
been debating these out whether we
should split them on separate repos or
not some of these modules will
eventually at some point creating a
separate repos some of the changes that
are coming on number two point oh I have
to do with engines so we are sort of
waiting a bit to see what happens with
with engines before we do a move
from what we currently have a the other
part we actually split is our boot time
it was really slow so we actually
splayed all of the everything I had to
do with login our users going to do
anything with the app until they enter
their credentials so for different a
busy they might not have that that
luxury but for us it was actually really
easy to do just do everything is
required for for login including like
remember my forgot my password and
things like that and that that's
actually distributed to the clients
first so we went from like six and a
half megabytes to sending them only five
hundred kilobytes after everything is
Jeep and that's including a amber and
and a few other core libraries and then
everything else is downloaded in the
background and then we define all of the
routes only the router are necessary for
booting the app and then once we load
all of the other modules then we load
all of the other route and then we have
to do some synchronization there because
sometimes they might be able to log in
especially they have a password reminder
or they might be able to log in before
the whole app has been downloaded is we
just not needed to abort the transition
and when once they are down then we
continued a transition to the other
route hopefully engines will take care
of some of that we thought about
splitting that folder and then say now
now if the first transition is to laughs
only load labs but we don't really know
until they sometimes we don't know until
they log in because depending on the
role we might send them to one place or
another and it was too much work to keep
splitting it apart a
so Alan let me quickly go up like a few
slides all right so sorry I had a better
diagram that I've removed from from this
presentation so with with composite
components it actually gets a bit
trickier because this guy might actually
send it to another component and then
that sends it to another component that
sends it to another component often what
we found is that you need one layer one
layer is soft and fine the other thing
is that if we have this model this share
model that's actually the glue that is
putting the rest of the things together
so we could think of this as the
component will be changing the set of
the model and then another component
what is nested or separate or might be a
sibling a that other component might be
actually interested in the same data so
in the example that I showed before
where we have the medication list we we
add medications to the plan and then
they appear on this other component just
because they are both listening to their
they're both rendering the same array of
medications or they both know about the
same array of medications so that that
produces a lot of the communication up
yeah a so yeah normally will call the
store again and find those records
instead of passing those records down a
in a lot of what we are doing we are not
using number data in case where we are
using number data then yeah that will
work and then if amber data already
catch that record that means she's not
going to go to the backend and fetch
that record again the problem is when
you actually have a query and then
unless things have changed summer data
we don't cache your query it will always
go to the back in and try to get it in
what we have we actually have a we have
a layer in between whether December data
or I see Ajax and and we are cashing in
that layer so
if we let's say we loaded all of the
medications for a patient we know we
have them there and then every component
will request those and then we'll just
give them a straight straight from the
cash yeah I think having that legend in
between whether it is I mean whether
it's number data or something else it
makes sense.you just once you're doing
this is more important just to make sure
that you're not loading data more than
Tom you are not doing unnecessary server
server request I don't know why I switch
back to powerpoint i normally use
keynote a but yeah that's all I that's
all I have I actually had a few things
but I think that will take me until I
will have a few a bit more time some
interesting resources a the road to
amber two point oh there are some
interesting things happening with with
with components in amber two point oh I
think we could have gone a full
presentation Justin what's changing it
but certainly check that out that's
pretty cool also we have a good cup or
practice Fusion a lot of what I showed
today a being recorded right my at some
point in the future I'm not making any
promises the open source and release
over there a and and if it's not there
it will be my repo but we are certainly
releasing a lot of the widgets
especially that we just have lead a
domain specific components they it
doesn't make sense for anyone but but
our staff will the widget a lot of them
will be releasing as open source and a
few other things to check a you're
building components and your pure plan
on doing them or releasing a widget a
amber C like Adams that's a good way of
doing them and check also the under
RFC's that that's all I get that thank
you very much
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>