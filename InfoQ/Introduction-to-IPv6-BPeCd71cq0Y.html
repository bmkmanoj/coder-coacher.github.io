<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Introduction to IPv6 | Coder Coacher - Coaching Coders</title><meta content="Introduction to IPv6 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/InfoQ/">InfoQ</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Introduction to IPv6</b></h2><h5 class="post__date">2013-07-17</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/BPeCd71cq0Y" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">everyone as I said I'm Owen DeLong from
hurricane electric I'm going to talk to
you a little bit about ipv6 one of the
first things I'm going to explain is why
this is important this was in 2011 we
still had some ipv4 left in the iono
registry today we're actually well out
here we ran out in 2012 ipv4 is dying
it's been dying for a long time arguably
ipv4 was first put on life support when
we started using nap does anybody
remember when we started using that how
many of you how many people here
remember the network before nap a few
gray beards okay believe it or not the
internet used to work a lot better it
was without nap we added mat in about
1987-88 something like that and the
Internet has basically been on life
support ever since the way to get the
internet off of life support and and
continue forward and be able to grow is
IP version 6 okay the reason is ipv4 has
only 3.2 billion unicast addresses
sounds like a really big number of
addresses right there are 6.8 billion
people on the planet figure we're moving
towards a world where everybody has a
laptop a cell phone probably a desktop
at work and some sort of computer at
home and probably some sort of cellular
device that also needs an IP address now
add to that power meters gas meters
water meters all these oceanographic and
other scientific sensors and all these
other data monitoring applications
traffic cameras traffic lights well it's
pretty easy to figure out that all of
that plus 6.8 billion people using 5
addresses apiece plus infrastructure web
servers etc is more than 3.2 billion
addresses so we are way short of
addresses and have been for many many
years okay
ipv6 fortunately gives us 340 unda
Cillian addresses that's an even bigger
number that's 3.4 times ten to the 38th
for those of you that like scientific
notation for those of you that are not
so familiar with scientific notation
it's 3.4 and a lot of zeros 38 of them
to be exact ok now this presentation
contains a lot of text because it's
primarily focused on what changes
between the libraries for doing ipv4
only and for moving your applications
into a dual stack environment where they
speak both ipv4 and ipv6 and when you're
talking about code there just aren't a
lot of ways to make it into cartoons so
there's a lot of text and I apologize
for that in advance all of the sample
code that i'm going to show you is
available at hurricane electric at this
web URL if you've got a laptop or tablet
in front of you and you have internet
access you may want to view some of this
and follow along on your screen I
started out changing all the variable
names to make it easy to find things
that used them it's not as useful after
you've done this once or twice but it
can be a useful tool the first time that
way you can go through and look for the
old variable names and find the things
that need to change of course you go
through the compile repair recompile
process as usual and test debug retest
you're all familiar with that I'm sure
there aren't a lot of changes needed
especially in Java and I'm not going to
cover Java itself here because I'm not a
Java program where I apologize but one
of the primary changes in the C library
and it propagates through the most other
libraries is AF inet becomes AF inet 64
the address family sockaddr in becomes a
sockaddr in six structure and there's a
generic storage type called sockaddr
storage that is sort of a union of those
two structures mostly you get the same
structure members and constants it's
just the address size that changes there
are a lot of possible matches along the
way things you need to look out for user
interface components
IP addresses in log files IP address is
stored in databases any place you're
having to present an IP address to a
user or get an IP address from the user
parsing routines etc if at all possible
for parsing especially use library
functions and store things in a
standardized format UDP and ICMP are not
covered in these examples but they're
not that different from TCP that you
should have any trouble if you've dealt
with them in an ipv4 it'll be the same
set of differences for ipv6 link-local
and scope and interface identifier zar
new in v6 this is going to be something
very very different from v4 in v4 we had
only one kind of address we had global
unicast addresses and everything was a
global unicast address so called private
addresses in v4 are still global unicast
addresses it's just that we've changed
the human semantics of those addresses
to call them private addresses a router
doesn't know a private address from a
public address there's no difference in
terms of actual software in ipv6 there
is a software difference between link
local addresses and global unicast
addresses link local addresses will not
cross a router a router will never
accept or forward a packet to another
interface that has a link local source
or destination unless it is
malfunctioning yes there are broken
routers out there that will do that link
local is always Fe 80 / 10 although some
implementations treated as / 64 but all
of the addresses start with fe 80 and
are followed by the 64-bit suffix there
are also some implementation differences
on different platforms in the handling
of ipv6 v6 only as a socket option okay
somebody back in the day misunderstood
how v6 representations of v4 addresses
called mapped addresses were handled and
thought that they were a security risk
on the wire and
so the bsd community decided that v6
only would be true by default on all bsd
implementations and it has been thus
ever since and in fact some
implementations that are even more
broken will not let you set it to false
Windows has followed the BSD lead on
this so you need to be aware of that the
proper value is false by default which
means that when you create a v6 socket
by default it will listen on both v4 and
v6 and accept either connection the
software will see a v4 connection as a
v6 mapped address so your software only
has to handle ipv6 connections at that
point it doesn't have to treat v4
connections differently and the v6
address presented will be that the
client end is ffff sorry colon colon
ffff colon and then the v4 address ok so
now I'm going to get into the supporting
example unless there are any generic
questions ok refer the source code
examples if you have them available to
you the easy part migrating the server
you have to add it one more include to
your beginning of your file and that's
net I net / I m dot H sock FD can
optionally become sock FB 6 and that's
one of those variable renaming zwi
talked about again change your sock
outer ends to sockaddr in 6 update the
initializations of deaths in 64 the new
members change the arguments in the
socket call change the socket related
error messages to handle the variable
renaming and then update the sock
setsockopt bind and listen calls also
for the variable renaming don't worry
we're going to cover all this in the
code in a minute because I know this is
kind of dense right now update the
preparation for select also due to
variable renaming the initialization of
saqlain changes the call to accept is
updated to to deal with the renamed
variables and then I net n2a becomes I
net n to P so name to ascii becomes
named
presentation the client similar
reporting the server the less easy parts
you need a helper function gettype
Easter to front end I net n to P because
the different possible return structures
from get a tour info replace get host my
name and get served by name with get a
tour info this requires some effort but
the get out our info process is actually
a lot cleaner and it takes care of both
of those calls in one call now don't
forget to free the memory returned by
get out our info when you're done with
it okay now to make the text density
even better we have I charts ahead what
I mean by eye charts is some of these
slides have a relatively small font okay
so bear with I'll do my best to try and
make things obvious and point them out
to you so the ipv4 only version of the
sea client we have get host by name and
we have this I net adder call down below
and we have the get served by name to
look up the service all of that both of
these slides worth of code is replaced
in the dual stack version with this
small initialization and the single call
to get a tour info so you actually get
rid of a lot of extra code that way by
using this much simpler call in the ipv4
only version this is actually very dense
and I'm used to seeing this on a 17 inch
display the AF inet needs to change to
AF inet 6 as we mentioned the connect
call is modified and the inet n2a calls
are changed to inet n2p so the resulting
code with red changes to what's green
you can see there that the code is a
little bit shorter and it's it's
actually pretty straightforward these
are our helper calls to get IP stir so
and the the get IP stir function
definition is included in the
sample code on the on the website any
questions on on porting the server okay
the easy parts of migrating the client
sorry same variable name flagging mostly
update the same structure names and
calls get out our info will
automatically return both the quad a and
the a records so you get v6 and v4
automatically with one code base you
don't have to worry about it and again
we mentioned that helper function i
think these slides got a little bit
jumbled so that covers see any questions
on see before we move on to pearl
alright the the pearl porting example
pretty much the same as the the sea
example same basic software socket 6
gets added to the modules used that's
roughly equivalent to the additional
include in ipv6 in the in the sea
version the get star by name calls again
get replaced by get a tour info more on
this on the next slide socket and buying
calls we need to change the protocol and
address families and there are minor
changes to how we process incoming
connections by far the biggest change in
Perl is the change to get star by name
over to get at our info similar changes
to the seaport because it depends on the
same underlying libraries the sea get
adder info returns a linked list pearl
returns a straight list but offset 0 is
the beginning of the first return offset
5 is the beginning of the second return
etc so there's a five element tuple in
each section of the list that's returned
that's very easy to process in Perl
because you simply shift five elements
off the front of the array each time you
want to grab a new tuple there is a get
you and got out our info if you pass in
in six at or any you don't get in six at
or any back you get localhost back I do
not know why Perl does this it's not
broken that way in the C library but i
spent about an hour trying to figure out
why i kept
trying to connect to local host when I
was trying to bind anything and it
wasn't working so beware the old get
served by name get proto by name changes
into all of this in Perl to do the get a
tour info stuff part of that is that
this is including some other pieces that
are related but it was hard to untangle
it all so the changes look more
significant than they really are the
ipv4 version of the socket and bind
calls and the ipv6 dual stack version as
you can see very few changes primarily
PFI net changes to PF inet6 and the bind
call changes to this dollar sadder
variable which is initialized back here
and that's why this actually expanded
over here on the sockaddr sorry the get
host by adder as you can see that
changes to get name info and unpack
sockaddr six instead of unpack sockaddr
or sockaddr in which is the unpack
function for v4 and then I net into a
changes to inet into P pretty
straightforward am I putting everybody
asleep are there any questions anybody
okay I'm going to assume you're all
understanding this and that you don't
have any questions because I'm being
extraordinarily clear if I'm doing
something that's completely irrelevant
then tell me and we'll do something
different the Pearl client migration
very very similar to the sea client
again add the module socket six get at
our info replaces get star by name
handling of AF inet six in the
connection loop and convert the inet
into a sty net into p and finally handle
the protocol family in the socket call
so in ipv4 we kind of did this get a get
proto by name get served by name in ipv6
that's all handled by the get a tour
info call
in ipv4 we were able to recycle the
socket sorry for multiple connections
because it was always the same socket
type in ipv6 or dual stack we don't know
whether we're creating an ipv4 socket or
an ipv6 socket so we have to just create
and destroy the socket or we have to
create one of each and then cycle
through using the correct one back and
forth frankly it's low enough overhead
and you don't do it often enough it's
easier just to create and destroy the
socket each time through the loop so in
ipv4 we created the socket outside of
the loop and then we just did multiple
calls to to connect in ipv6 we have to
move the socket creation inside the loop
as you can see here multiple calls to
socket followed by a call to connect and
then we close the socket if it if it
failed any questions on parole at all
before moving to Python Bueller okay oh
good some laughter some people are alive
refer to the source code examples again
for Python it's pretty much the same I
didn't bother renaming the variables
because the Python port was really
really easy gotten replaced get star by
name as before replace the default fatal
error for a single attempt at binding
with an iterative loop to handle
multiple address families and minor
changes to how we pass us incoming
connections because in dual stack they
return a four tuple instead of a
two-element tuple the old way we had to
figure out our protocol with get proto
by name and our port number would get
served by name the new way we have to
call get out our info and get out our
info the way it works because it does
DNS and stuff it can return an exception
so because Python isn't very good at
ignoring exceptions we have to wrap it
up in this try and accept stuff to make
Python happy otherwise it bombs out our
code when DNS fails even though we don't
care about DNS the old way we created
the socket and then just kept
you know doing stuff to it in the new
way we have to put all of that inside a
loop and we need these try accept
structures because things can break in
order to handle the multiple protocol
families but other than the those
complications the the Python port was
actually pretty easy we changed this
host port tuple to host port flow and
scope and that handles getting back the
flow label and scope ID from the the
packet header on the ipv6 Datagram when
we get the incoming connection this was
parsing output from the accept call
which returns connection and address as
you can see the ipv6 compatible change
is the additional elements returned in
the ad or tuple this is used to make the
address presentable in debugging output
in user messages the client migration
was very very similar basically this was
the old way we tried to connect over and
over again until we either ran out of
things to try and connect to or we
succeeded in the new way we have to
create and destroy the socket each time
because we can't try and make a v6
connection on a v4 socket and vice versa
in addition there are minor
modifications required when the
connection succeeds due to the variable
names and the print arguments otherwise
no code changes in Python so Python was
really really easy now here's the very
good news for all of you as Java
developers for the most part in Java
you're going to be using a class library
to do all of this and you don't actually
care about any of this low-level socket
stuff and so you get v6 for free and
your application is already completely
ported in terms of the socket libraries
the bad news is you still need to
address all of those user interface
issues that I haven't talked about let
me give you an example of how you can
fail to do that okay there's a certain
company in Palo Alto that makes printers
you may have heard of them
hewlett-packard okay I have a
hewlett-packard 8600 printer it has a v6
stack on it I can get to its web control
interface / v6 I can print to it over
ipv6 I can create access lists
it to control which addresses can print
to it and not and those access lists can
use predefined IP addresses that come in
the printer hard-coded in v4 and v6 i
can add new IP addresses to the
available addresses to put in access
lists as long as the address i'm adding
as an ipv4 address they didn't put in
the user element user interface elements
necessary for me to be able to enter a
v6 address to add it to an access
control list ok you gotta update the
whole user interface any place the user
puts in or sees an IP address of any
form you need to provide them the
ability to deal with v4 and v6 ok any
place you're writing addresses to a log
file you need to realize that you may
have to cope with a V for a dress or a
v6 address any place you are writing
addresses out to a database you're going
to need to be able to write v6 addresses
into that database this almost certainly
means you need to update your database
schema unless you're using a very recent
version of postgresql where you've
actually used an IP address type in your
database that IP address type will take
both types of addresses most people that
I know that have created databases in
the v4 only world store them in the
database as in 32 you will not have much
luck storing an ipv6 hundred and twenty
eight good address in an in 32 field in
a database one of two things will happen
the database will complain or the
database will not complain but you will
only store one quarter of your bits
either way it's probably not good in the
slide deck which should be available on
the website afterwards yes no yes there
are these handy quick reference cards
this is the function replacement guide
left side you have the old function
right side you have the equivalent
replacement function the good news is
these work in almost every language
because all of the other languages you
is the C library underneath so the
function names tend to be the same the
same thing with the structure
replacement guide so now let's open it
up to your questions about ipv6 in
general yes because python is obnoxious
about exceptions it's just an artifact
of the language itself the question was
why is Python so much more obnoxious
about exceptions and the answer is
because python is so much more obnoxious
about exceptions you you would have to
ask the the guy that's in charge of
Python I forget his name yeah we don't
so ask Guido why python is so obnoxious
about exceptions in general it's the
reason I don't generally program in
Python well one of two reasons I don't
generally program in Python space is
having meaning being the other white
space is not code dammit yes
well there's four elements returned in
the tuple from Python and those are
instead of just the host and port that
we got in ipv4 the ipv6 header contains
additional parameters it contains a flow
label which is literally up to the
application what value it wants to put
in the flow label so it's a field there
that the application can use as the
application sees fit and then there's
the scope the scope will be either link
local or global and it indicates the
address type I'm not really sure why the
scope variable is considered necessary
since the scope can be inferred from the
address but it's included there and
unfortunately again a Guido ism you
can't just grab the elements of the
tuple you want or the elements up to the
last one you care about if you try to
read three elements from a four-element
tuple Python will blow up your program
you have to read all four elements from
the tuple or Python says and so more fun
with Guido any other questions yes there
are more slides on the transition in
general we they're not in this session
we have an upcoming class that's an
introduction of e6 it's not developer
specific it's actually oriented towards
general ipv6 knowledge and it talks
about the basics of ipv6 it talks about
the address structures and address
planning and how to enable v6 on a web
server and all a mail server and all
that fun stuff so but that's a that's a
paid class and it's a two-day class so
in this evenings format we're trying to
cover a relatively compact framework of
developer specific things yes though I'm
happy to answer other questions sure
sure we can do I can do that a brief
story of ipv6 so ipv4 was created to
handle a very different world ipv4 was
created to provide network
access to a network that had outgrown
the old protocol known as NCP NCP
provided an 8-bit address and it was
more than enough addressing for the
initial plan which was one address /
institution for their mainframe and this
was to support a few DoD installations
and some universities and a few research
and academic institutions it outgrew
that and they went to the 32-bit address
because that would be more than enough
to address all of these mini computers
and micro computers that were springing
up at these universities and research
institutions and government
installations that were going to be on
the internet and there was no concept
that the average person would ever be on
the internet or want to because after
all the internet at that time consisted
of FTP to transfer files and email and
we all know that nobody wants to use
email other than researchers and the
government this predates gopher gopher
was later made available on ipv4 and it
was the beginning of the end for ipv4
gopher waste Archie these were always to
start searching the internet this this
was the kind of early attempt to be able
to make content more readily available
to end users and provide static lists of
information and index it and apply some
library science to this growing and
burgeoning amount of data that was now
being made available up until this point
over what was known as anonymous FTP and
one anonymous FTP meant was you have
these archives sitting out in cyberspace
that you could connect to and you would
say username anonymous and your password
would be your email address and it would
say okay here's everything I've got and
you're welcome to download it it was a
very kind gentle kinder gentler world in
many ways trying to make sense of all of
that and find these archives was getting
difficult so we created some library
Sciences and we started seeing things
like go for an arch in ways these were
the precursors to what are now known as
search engines okay later somebody came
out with an even better way to represent
all of that information and kind
unify all of these different protocols
and it was a tool that later became
known as a web browser the original one
was known as mosaic and it was produced
by the National Center for
supercomputing applications in yes and
then the rest follows and that's when we
started having the average end-user care
about the internet and in the course of
less than five years we went from 99
percent of the people in the world not
knowing the internet existed to what
rock have you been hiding under if you
didn't understand what a URL was okay it
happened really fast but that meant we
went from a hundred million users
worldwide almost overnight to 6.8
million target users worldwide and so it
was kind of a rapid change that meant we
needed a new protocol we've actually had
ipv6 on the books as a specified
protocol for more than 15 years at this
point deployment has been rather slow
nat has heard us a lot in more ways than
you probably realize number one nat
hurts just in the ways that it breaks
the internet how many people knew the
internet was broken before tonight okay
you can actually judge how much somebody
knows about how the internet works in
detail in the under the hood detail
sense of the word by what they're amazed
about okay somebody that knows very
little about the internet and its inner
workings is amazed by all the things we
can do with it video and voice and
teleconferencing and web browsing and
shopping and and all of this different
stuff email instant messaging amazing
somebody who knows how the internet
works at its gory detail like me is
amazed that it works at all okay how
many people know that there is no such
thing as the internet not a single hand
one hand the internet does not exist
what exists is a whole lot of little
private networks and some large private
networks who have all happened to
agree to run the same protocol and many
of whom have agreed to interconnect to
each other and exchange packets in
various ways okay any one of those
networks can decide it doesn't want to
play anymore and disconnect itself from
the internet at any time any one of
those networks can refuse to admit
whatever packets it wants to refuse any
one of those internet users can decide
I'm going to use this guy's addresses
because I don't like him and I need
address space and there is actually no
legal force anywhere that really
prevents that what prevents it is that
his upstream isp will probably go dude
you can't do that and if you keep doing
it I'm going to disconnect you okay so
it is almost entirely run on cooperation
and goodwill and handshake agreements
the entire internet is ban dated
together by these handshake agreements
and goodwill between multiple
independently operated networks there is
no central authority there is no central
control they're our registries that
provide a central location for
coordinating numbers to be unique among
cooperating entities but the internet
depends entirely on cooperation okay
never before has there been such a large
endeavour in human history where
government intervention was not required
and mutual cooperation was all it took
yes okay so the question is how is my
experience going to change if I flip
from v42 v6 tonight and the answer is
you're going to experience a much
smaller internet you'll find that as a
general rule of the search engines and a
few other websites keep working and you
get really great performance to them and
everything else disappears the good news
is you don't want to do that and you
don't have to what you want to do is add
v6 to your current v4 implementation so
that you can run both protocols
simultaneously that way when people
start coming onto the internet as v6
only as they're already starting to do
in parts of Asia where they've been out
of
addresses in v4 for more than a year now
actually more than two years now but
you'll also be able to still talk to all
of the legacy v4 network that's out
there and still running on v4 only
places like Yelp for example yes well I
have good news for you and bad news ok
I'll come back to you so the question is
how does this affect my security model
that depends on NAT and private
addressing in ipv4 there's good news and
bad news the good news is it doesn't
really affect your security model if
you're depending entirely on that
because you don't have a security model
if you're depending entirely on that nat
is not a security mechanism ok nat is
mutilating packet headers and it doesn't
do anything for your security what
provides the security is the stateful
inspection that says does this inbound
packet match an existing outbound flow
that I've already seen or not now the
good news is that in order to do NAT you
have to have the stateful inspection
operation anyway so when you turn on
that you get stateful inspection kind of
along for the ride for free and for the
most part we forget about that but now
that we're starting to talk about the
differences between v4 and v6 it's
important to recognize that those are
two separate components and that
stateful inspection provides your
security and can be done without
mutilating the packet header you don't
have to change the address to do
Speights hateful inspection and in fact
back in the days before NAT we had
stateful inspection firewalls that did
that without mutilating a packet header
ok so you don't really care about hiding
your addresses nearly so much as you
care about not permitting packets in
that don't match packets you sent out
and you can do that with stateful
inspection in v6 just like you're doing
in before now the difference is you
public addresses on everything and if
you want to permit something to provide
a service to the Internet all you have
to do is create a rule set on your
firewall that says permit this through
even if it doesn't match ok
where do i get the address where do you
get your v4 addresses now okay but I bet
you got them from somewhere I'm going to
guess Nick BDN mill or nickasaur inet ok
so the successor registry in North
America to those registries is called
Aaron the american registry for internet
numbers and so if you have a direct
assignment or allocation from the old
days legacy address space you would go
to Erin to get v6 address space or you
can go to your upstream ISP like most
people do for v4 currently if you get
your address space from your isp today
you should get your address space for v6
from your isp tomorrow hang on let me
address his question and then I'll come
back to you guys so his follow-up
question is how do you do this at home
well if your ISP is ready for you to do
this at home it's relatively easy you
call them up and ask them to turn it on
if you're a Comcast subscriber you're
probably in pretty good shape in the bay
area in terms of being able to do that
if you have residential service and even
business service they're starting to
turn that on now as well if you are an
AT&amp;amp;T subscriber sorry they they haven't
really learned to spell ipv6 yet if
you're subscribing to somebody else it's
going to depend on what they say when
you call them up and ask I do encourage
you all to call up your ISPs and ask
assuming your ISP is not ready you can
go to tunnel broker net and use your
existing v4 public address from your isp
as a tunnel termination point and run a
v6 tunnel through our free service and
get ipv6 that way these gentlemen are
ahead of you but I will come back to you
yes comcast is not charging extra for v6
and they're doing dual stack so you get
a v4 and v6 address simultaneously well
there they're going to hand you a / 64
at least of ipv6 so you don't need to
worry about multiple v6 addresses you're
still when we going to get one ipv4
address unless you pay for pay extra for
that but
best of my knowledge comcast is not
charging for v6 addresses and they're
giving at least a / 64 to everybody I
think there was another yes well okay so
I'm going to try and be very very blunt
here the question is what good is ipv6
basically and the answer is do you like
the internet today on ipv4 do you want
to do without the internet on ipv4 do
you want to go back to a world where you
have no internet access okay well so the
ipv4 internet is shrinking as a
percentage of the total internet and it
will continue to do so and within five
years it's probably going to be near
nothing so if you want to continue
talking to the internet you're going to
need ipv6 the other question was i can
ping everything in v6 well if you don't
have a stateful inspection firewall in
v6 like you do in v4 then yes you can
ping everything if you turn on a
stateful inspection firewall it works
just like your v4 stateful inspection
firewall that you're using with nap the
difference is it doesn't mutilate the
packet header in that second step after
lining up the flows okay I think this
gentleman over here and then I'll come
back to you guys okay yes and and in
that case you'll have to go back to the
website and change your v4 address in
the tunnel configuration call your
provider and ask for a static address I
don't know what else to tell you I mean
we were limited in what we can do about
that right I mean
well or maybe you need to call your
provider and ask them when you can get
v6 and if they say never you need to
switch providers yes actually over here
was first yeah that's not what I'm
hearing from the ISP so I I want to talk
to you afterwards because there's
something not lining up here between the
story i'm getting from john birsel ski
and what you're saying to me and and
some things sound very very wrong
they're talking to Time Warner and
Comcast and AT&amp;amp;T and several of the
others about this multiple layer NAT
stuff they're all considering in a
nightmare that they want to implement as
little as possible that's no I know I
know that's not true because I know
several people at comcast that our v6
oriented okay it may be that you're
having a problem in this area and I want
to talk to you about that because I want
to make these people aware of it so that
we can get it addressed but I do know
that at a high level comcast corporate
strategy is heavily v6 and Comcast
management is fully body into v6 at the
at the upper levels so and I'm not here
to defend comcast I personally dislike
that company greatly but in this
particular case just like Microsoft it's
one of the few things they've done right
so you know I want to kind of keep that
going in the right direction if possible
so I'd like to talk to you afterwards if
we can offline because i don't think
that enters the rest of the group here
all that much and try and see if we can
get your problems addressed well any any
cable system is going to require docsis
three modem to support ipv6 docsis to is
long since dead it died five years ago
so if you're still running a docsis to
modem it's time to go to frys and spend
thirty dollars yes
yeah you basically get it for free
you're basically the class library
should take care of all of it the
question is you know if you've got an
android phone what do I need to do to
take advantage of v6 and the answer is
you need to find a provider and a phone
platform that both support ipv6 you know
he mentioned t-mobile as not supporting
v6 that again has not been what I've
been told by the people i know at
t-mobile so i do want to talk to him
more about that i know for example that
I have v6 on my verizon phone here and
it works perfectly well over LTE over 3g
I get a / 64 for the phone the mobile
hotspot works very well it does full
dual stack and no problem so I've been
very happy with that since i upgraded to
the iphone 5 on verizon and got v6
working there on the other hand my AT&amp;amp;T
LTE service on my ipad v6 fail utter and
complete fail and when i called them up
about it they utterly and completely
failed to even diagnose the problem
correctly in fact they went so far at
one point is to tell me quote we don't
support accessing websites over IP
unquote they did not have a good answer
when i said what do you support
accessing websites over okay so so AT&amp;amp;T
failed I'm sorry I heard an over here Oh
over-the-air yeah yes well so so if you
want to talk to vie for clients you need
a v4 address whether whether reverse DNS
is involved or not you can't talk to a
v4 client from a v6 address okay only a
v4 address can talk to a v4 address only
a v6 address can talk to a v6 address
there there there is different protocols
as i PX and apple talk okay you can't
talk from an IP x address to an apple
talk address either okay think of ipv4
and ipv6 the same way there i PX and
apple dock they're similar protocols
they support the same set of services
but they're different on the wire they
have different protocol numbers
different protocol version
numbers etc however you can run a v6
only mail server if you want to or you
can do what I'm doing and run a dual
stack mail server where my mail server
listens on v4 at 192 dot 150 92 and on
v6 at 26 to 0 colon 0 colon 930 colon
colon 2 0 0 colon 2 so or you can use
DNS to look that up as male host deal
uncom and he'll get both addresses yes
well no matter what language you develop
in you're going to need to support both
for some time the good news is in Java
the class library should mostly take
care of that for you except for the user
interface components and data structures
and logging and other things where your
application actually touches the
addressing so if you're writing a video
game you probably don't care if you are
writing a utility like the ipv6 toolkit
on my phone that shows me the interface
addresses and allows me to do dns
lookups and pings and things like that
then you're going to need to do a lot of
work in the application to support
presenting those to the user and
accepting them as input from the user
and logging them in whatever log files
you keep etc yes magical performance
increase the magical performance
increases fiction there is no magical
and performance increase associated with
IP version 6 the perceived magical
performance increase comes from some
people who have particularly bad ipv4
environments where I don't know they're
there in India and then added six ways
to Sunday or you know they've got
multiple layers of NAT inside their
office before they get to their ISP or
whatever and they bypass all of that
with v6 they see a not so magical but
actual performance increase that results
strictly from moving a lot of extra
hardware
of the way okay v4 is on life support it
performs accordingly yes so what he's
pointing out is that as carrier-grade
NAT starts to come into play and by the
way verizon is already testing this
under the euphemism address sharing
technology they have allowed their users
that don't want this address sharing
technology to opt out of their trial so
if you are a verizon user and you've
gotten a little letter about this
wonderful new thing they're offering to
improve your service with address
sharing technology I highly recommend
choosing to opt out you're going to be
lumped into a single IP address on the
public facing network with a whole lot
of your neighbors and possibly several
people up to three states away okay for
example as I understand the
carrier-grade NAT plan at a couple of
major cable companies they're going to
have an at center in denver that handles
11 western states okay so if you're
looking for yelp reviews and you're
using geolocation to figure out what's
near you and you're not using the GPS
data in your phone for the geolocation
but instead your IP address on the
public internet you may well get some
very lovely restaurant recommendations
in Denver never mind that you're
standing in San Francisco your IP
address is not okay the other wonderful
thing that comes with this as he
mentioned is that you are sharing an IP
address reputation with three thousand
five thousand eight thousand a hundred
thousand of your least known non
acquaintances which means that if
there's one spammer in those 8,000
10,000 hundred thousand people however
many you're sharing an address with all
of the blacklists will blacklist that
address and not only will the one
spammer in all of those people get
blacklisted but everybody will lose
their ability to do anything on the
internet as a result so that's going to
be a lot of fun with this address
sharing technology as well I believe he
was next
well certainly the question is is this
going to kill static IP hosting and the
answer is this is going to make static
IP hosting a whole lot more important
and a whole lot less available at the
consumer level so for example I have
taken steps to avoid that problem I have
lots of addresses at home I have
commercial grade service from multiple
providers I do BGP with my up streams
and I'm routing 768 public ipv4
addresses into my house that our mind to
move to any service provider I want not
everybody has that luxury and it's going
to be a whole lot worse for the average
consumer before it gets better and
that's a really good reason to move to
IP version 6 where you should get
relatively static addressing and you
should be able to get lots of addresses
and if your provider is not giving you
at least a 64 and more I delia 48 you
should be looking to change providers
yes sir that was the original design of
the protocol in my opinion it though the
question is weren't they supposed to be
giving 48 to everybody including
residential customers originally wasn't
that the original agreement or protocol
or whatever the answer is the original
design of the protocol supported 48s for
every n site and I and a lot of other
people still believe that's the right
thing to do unfortunately the RFC that
said this is what you must do was
deprecated in favor of an RSC that says
ISPs like to make money and they like to
do bizarre things to their customers and
where the IETF and it's not our place to
dictate that they shouldn't guess who
was at the at the meeting where that was
all approved so the answer is I think
you should still seek a 48 I think you
should seek providers and reward
providers that provide 48 but not all
providers are going to do that hurricane
electric provides 48 finding a
residential provider that does ipv6 at
all right now is hard enough finding one
that does
48 on a residential level is virtually
impossible and I don't know of any but I
do encourage you when you talk to your
provider to a ask them to provide ipv6
be let them know that if they fail to
provide ipv6 relatively soon you're
going to be looking for alternatives and
see let them know that you fully expect
them to provide a 48 of address space to
you and that you'll be leaking for
alternatives if they don't I think he
was first and then I'll come back to you
it really depends on the website of the
question is what percentage of web
traffic comes in on v6 for websites that
are dual stack it really depends on the
website Google's current numbers are
saying one to two percent there are some
universities in Africa that are seeing
sixty percent we're seeing numbers in
between those two and it actually varies
a lot from day to day so it's kind of
all over the map happy eyeballs makes it
really hard to count on those numbers
being meaningful anyway so in the back
mmm defi do you mean like TCP ports or
no they're pretty much the question is
is there any difference in the handling
of fort between v4 and v6 and the answer
is no TCP is TCP and it's pretty much
the same layer for protocol in v4 and v6
you can technically run tcp / appletalk
if you try hard enough and it uses the
same port numbers there too in the back
gotchas slide 7 implementation
differences in ipv6 v6 only socket
option defaults and availability yes you
either have to create a v4 socket and a
v6 socket and listen to both of them or
you have to set sock opt ipv6 v6 only
false if you're on a bsd platform or one
of the other platforms that chose to
follow the same brain death on a
rational platform ipv6 v6 only should be
set to false by default but
unfortunately it is true on many
platforms including windows and bsd and
mac OS yes behind the router yes yes you
should get a DHCP prefix delegation of a
/ 64 or larger to your router but yes
your router gets a 128 address for its
upstream interface of course it has to
well you probably need at least one
subnet which means you need a 64 because
a subnet should be a 64 in ipv6 we don't
count hosts okay we just give every sub
metal / 64 and that should be enough
room for pretty much any subnet you're
going to build anybody want to take a
stab at how many hosts you can put on a
/ 64 as many as you can afford that's a
good answer an internets worth that's an
almost good answer I don't know but
that's not a relevant answer okay the
simple answer is all of them okay
technically technically the entire ipv4
address worth of hosts squared okay if
you care about it in those terms if you
care about it mathematically it's a
little bit north of 18 quintillion
addresses you know 18 quintillion 360
a quadrillion and change okay so many
hosts that people ask me isn't it a
waste to use a / 64 for a point-to-point
link when it's only going to have two
hosts on it I find this question very
amusing and I respond to them well maybe
is it a waste to put a slash 64 on a
subnet where you're going to have a
thousand hosts and they look at me kind
of startled and they say well no and I
said well okay explain to me the
difference between 18 quintillion 368
quadrillion minus 2 and 18 quintillion
368 quadrillion minus a thousand you're
wasting the same amount of address space
either way the difference between two
and a thousand is completely irrelevant
there so it's okay the protocol was
designed to use 64 s for every subnet we
have more than enough subnet numbers to
handle the entire world and everything
beyond the world that we know for plenty
of years okay even with using / 64 s on
every subnet it'll be okay trust me yes
stateless address auto-configuration is
the term you're looking for so what he's
asking me about is is why a 64 and he's
trying to use that as a leading question
to get me to explain stateless address
autocom which I'm happy to do the
easiest way to assign ipv6 addresses to
hosts is what is known as stateless
address autocom step 1 configure a
router with an ipv6 address and turn on
stateless auto comp support on the
router depending on the router there are
different ways of doing this summer
outers it comes on automatically by
default some routers you have to set an
eui-64 address on the router interface
some routers you actually have to
configure router advertisements it
varies from router to router but once
your router is issuing router
advertisements the process of
configuring an additional
host on that network consists of two
steps one plug it in to turn it on it
will then get a v6 address and default
gateway information and if you've
configured your router advertisements
correctly it might even get dns server
information through stateless autocom
does that answer your question okay yes
well you should do the same fire while
setting that you use in v4 you should
set up a stateful inspection firewall
with a default deny inbound any okay the
question is if I sup v6 on my network at
home what kind of security do I need and
the answer is you need the same kind of
security that you've always needed in v4
which is a stateful inspection firewall
whether the default deny any inbound and
then you can poke whatever holes in that
you want if you want to set up any v6
services if you don't want to set up any
public v6 services you're done you just
leave the default firewall there in
place okay there there are unintended
holes in that you can spoof packets just
like you could spoof them through the
mat and v4 it's the same set of holes
we've always lived with them nothing is
new everything that is new is old
everything the de sold is new again okay
the question was what are the holes in
that and the answer is the same holes
we've all been living with envy for all
these years any other questions comments
rotten fruit grapes yes well so let me
take you all way way way into the future
so far into the future that we're going
to use technology that exists today
imagine you go to the grocery store and
you see a recipe you want to make for
dinner and next to that recipe is a QR
code you zap the QR code with your phone
and their phone recognizes that goes to
the recipe i want to make for dinner
application and that app contacts your
refrigerator and says these are the
ingredients we need and the refrigerator
has little weight sensors in all the
shelves and it has positional rfid
sensors so
can tell that the thing here is a carton
of milk and the weight tells it how much
milk is in the carton and it can tell
where the carton of orange juice is and
how much orange juice is in that carton
and how many water bottles and all of
that stuff and your cupboards can all
scan little RF tid sensors on all the
little cans of beans and peas and
carrots and whatever else you have in
there and so your fridge in the can and
and your pantries take inventory of
what's on the list that's there and they
figure out what's missing and they send
back the shopping list to your phone and
this all takes place in seconds well
you're standing there in the grocery
store and you now have a shopping list
on your phone that you can continue your
shopping with and have everything you
need to make for dinner that evening and
know what you had in inventory when you
started okay there's not a single piece
of technology involved in providing that
that does not exist today why don't we
have it we don't have it because we
don't have publicly accessible fridge
web servers not because it's hard to put
a web server in a fridge there are
fridges with web servers in them now
we've had those four years but because
we don't have ipv6 and it's very very
hard to put public ipv4 addresses in
households okay yeah the RFID tags are
still a little too expensive and the
weight sensors for the for the
refrigerator are still a little exotic
but Moore's law says we'll have those in
about five years at very very
cost-effective pricing so I'm not too
worried about that yes ah but this
didn't involve an I refrigerator cloud
service this was this was straight htps
from your phone to your fridge ipv6
allows that it gets rid of that need for
the man in the middle we don't need that
intermediate cloud service host in the
middle that's only necessary because of
this NAT crap okay if you are using that
you are not on the Internet yes well
multiple addresses per server does not
eliminate the need for ports they're the
kind of unrelated questions in the ideal
world I realize that nap muddied that
water by using ports as part of the
address but going in the opposite
direction using the address as part of
the port number or all of the port
number I'm not sure is a great idea
either well the beauty is that if you
the question is if you don't know what
your users are using and you're making
these changes how do you approach
testing and the first thing is by and
large your users are going to be using
DNS to get to your services so you can
do your initial round of testing by
making your ipv6 addresses only known as
ipv6 dot server name or something like
that which allows you to only have
people that know about it test it by
using that alternative name for the
server theoretically once you turn on v6
to the general public your users
shouldn't notice any difference between
v6 and v4 and they shouldn't care which
protocol they're using to get there they
should get the same user experience
regardless of whether they connect over
v6 or before the important thing is to
provide v6 access to your support
personnel and teach them how to
troubleshoot when a user is having a
problem thats related to which protocol
they're using and how to identify which
protocols your users that are calling in
with questions are using so that they
can help them as an example here's a
great way to stump the average helpdesk
call them up and say I can get to the
search engines but everything I click to
on the search engine doesn't work what's
wrong with the network well the answer
is that for whatever reason that users
network experience is showing working v6
and v4 is failing because most of the
search engines are available over v6 and
most of the things they're going to
click on through the search engine are
not but the user doesn't know v4 or v6
all they know is search engines work
everything else doesn't so
you need to prep your help desk for kind
of being able to look beyond the average
or obvious thing the user is saying and
try and find a systematic way to dig
into what could possibly be causing this
problem in a dual stack world here's
another problem you're all going to have
to deal with as developers we've all
gotten lazy as developers we all code
for single home hosts we all assume that
what we write code for is a machine with
a single network connection and a single
address and a single protocol that's
very very easy to write code for in v6
every host is multihomed every host has
multiple interfaces every host has
multiple addresses on each of those
interfaces and the networking
environment is much more complex and you
have to account for that in your code
you're going to have to take
responsibility for developing a better
understanding of how networks work and
what they do and how to handle the
exceptions that are possible and the
more complex network environments that
are coming or your code is going to go
by the wayside in the very near future
because it's not going to work as well
as somebody else's that does yes your
job is about to get harder sorry yes
I I assume OpenStack has a place to file
bugs I don't have a better answer the
less your API exposes about the
underlying Network the less ability you
have as an application developer to
compensate for what's happening that you
don't see DNS is a perfect example of
the kind of opacity that is harmful to
the application developer right because
when DNS SEC fails all you get back is
DNS failed you don't know that it failed
because it failed to validate the DNS
SEC or that it failed because the remote
server failed or it failed because the
recursive look up ran into a wall right
you don't have any visibility into that
so you have no ability to tell the user
anything other than I didn't get a
useful answer from DNS I'm sorry okay
OpenStack is another example of a
harmful level of opaqueness in an API
and other than getting the API developer
to correct that I don't have a good
answer for solving that once something
is opaque you can't see through it and
you know I mean I could say you know
take a bracing bit and drill a hole but
the reality is there's no real physical
thing there to drill a hole through so
yes it's opaque about what's time the
question is they have an API it's
relatively well defined it is apparently
incomplete and I said yes it is
apparently incomplete because it is
opaque about things that are happening
in the network that your application may
need to know about in order to provide a
better user experience yeah there are a
lot of API developers that like to think
that I personally think that if I
understand I mean number one the reason
that they're doing that is because they
recognize that most developers are
really bad at networking I'm sorry but
you are okay I'm a network engineer I
admit that I'm a lousy developer I mean
the code I put up here
I'm sure you guys could find 10,000
things wrong with it and tell me that
it's very poorly written and poorly
structured and all of that I'm sure all
of that is true I tried to make it
simple and understandable and I didn't
worry about it being the best code you
could possibly right okay I'm not a
developer I admit it okay I'm a good
network engineer you guys are great
developers I'm sure but your lousy
network people you don't design and
build networks well and you don't
necessarily use them all that well in
your code because you don't necessarily
have the deep understanding of networks
and how they work and what they do that
is necessary to write good networking
code okay this is just a fact of life
and it's a fact that we need to find a
way to change because the networking
environment in which your code is going
to be operating is becoming more and
more complex not less and less and as a
result opacity is going to be more and
more harmful in my opinion now because
it's becoming more complex and you guys
have done such a lousy job of dealing
with the minimal complexity that you've
been faced with so far a lot of the API
developers are going we really need to
hide this from the developers now and so
they're going in the opposite direction
to try and shield you from that
complexity and they're trying to make
sure that their API just does the right
thing no matter what the problem is that
sometimes the right thing is to tell the
user in detail why it didn't work and
when you create that kind of opacity it
prevents the code from having any
opportunity to do that so it's a
different philosophy and and I'm not an
API developer I'm sure they're good at
what they do but I think they're very
very wrong in this
I
yes it is absolutely and and it's
actually a collision course around
growing network complexity and growing
API simplicity and in my opinion the
correct answer is that api's need to get
simpler in their default behavior but
they need to have that flip down panel
that exposes the guts and allows you to
ask what happened in detail and its
really really hard to write api's that
do that and have them work well so most
API developers really really hate to
instrument their code that way because
it's hard and it takes a lot of extra
effort so I don't know that it will
happen or initially I think we're going
to have to hit a wall where people start
demanding it and we're a few api's get
trashed and discarded because they don't
do that and then it'll start going the
other direction I think this is one of
those pendulum swing things and I think
right now the API pendulum is headed
this way and the network pendulum is
headed this way and one of them is going
to hit a wall somewhere and then they'll
come back so he's asking about sdn for
those of you that don't know sdn stands
for software-defined networking and this
is a term which the definition is only
slightly less precise than cloud how
many people here can tell me what cloud
computing is okay one one person brave
enough to raise his hand how much would
you bet that I actually forced all of
you to give me a different definition
there would be at least as many
different definitions as there are
people in the room yeah so that's a nice
collection of buzzwords but it doesn't
really mean anything it's a great
bargaining brochure but when we're
actually trying to define
software-defined networking it doesn't
really help so the best definition I
ever heard for cloud computing is I know
my date is somewhere and somebody else
is taking care of it
I don't know where I don't know when and
I don't know how but I sort of know how
to get to it most of the time
software-defined networking is a lot
like that I don't know where my packets
are and I don't know how they're getting
there but I kind of know that if I put
this address on it and throw it in this
bucket it comes out over there somewhere
like it's supposed to and it gets to the
machine that I put in the address at the
front of it yeah a lot like miniature
golf software-defined networking is the
ability to program routers to handle
packets in ways the vendors never
envisioned it's basically having the
router expose an API that allows you to
do your own things to the forwarding
table and make the forwarding table
magic based on arbitrary crowd agrees
and and classifications of packets that
you yourself have created and dreamt up
it's a really really cool feature if
you're a network nerd and you have a
strong desire to tinker with the deep
inner guts of a router it's a really
really great buzz word if you want to
sell millions of dollars of hardware and
charge extra for it because it has these
features to allow your network nerds to
tinker with the inner guts of the router
other than that I think sdn is mostly a
buzz word that doesn't really have all
that much meaning other than you know
Cisco smelling dollars now I could be
wrong it could take off like cloud has
and be this multi-billion dollar
industry nobody can explain but you know
it's it's very nebulous it's very hard
to explain what it is and even the
people that are building it can't really
give you an accurate definition so I
don't know what the implications for
software-defined networking are from all
of this I don't think software-defined
networking changes v6 much more than it
changes before so I don't think that
it's I think it's a tangent
issue that's kind of unrelated to the v4
v6 transition any other questions now
that I've completely lost everybody by
following this rat hole no well thank
you very much for your time had a great
time hope you did too</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>