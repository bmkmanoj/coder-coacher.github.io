<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>HTML5 Multimedia with Bruce Lawson | Coder Coacher - Coaching Coders</title><meta content="HTML5 Multimedia with Bruce Lawson - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/InfoQ/">InfoQ</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>HTML5 Multimedia with Bruce Lawson</b></h2><h5 class="post__date">2011-07-06</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/McM8aiYNHLU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hi there San Francisco html5 user group
I'm Bruce Lawson I work for opera the
lovely cuddly Norwegian people who make
the Opera web browser for desktop and
phones and TVs and devices and obviously
as noticed I'm not in San Francisco I
wasn't allowed in by immigration for not
being nearly beautiful enough to wear a
red bikini and roll a bright rollerblade
around your Californian beaches but
hopefully this streamed presentation
will will do the trick just as well
anyway they're the subject for the next
hour or so is html5 multimedia where we
are and where we're going so way back in
antediluvian times in internet years
back in 2007 colleague of mine opera on
earth and katherine wrote to the what WG
working group the guys who were making
what we now call html5 and suggested a
native video element with simple API
whose API has got got more complicated
now but it needed to it's no more
complicated than it needs to be it has
special video semantics and basically
it's grown from there it's now in all
the browsers including IE 9 as is audio
the sister tag if you like that shares
the same API so pre html5 video here is
what we were dealing with this is
basically
the code that is vomited out by YouTube
when you hit the embed button and I call
this cargo cult code and the reason its
cargo cult is people copy and paste it
they copied our YouTube and paste it
into their pages you never wonder how it
works you never look at it too closely
you don't know why it works and this is
a to use a computer science term this
code is ugly okay it's it violates the
DRI rule do not repeat yourself dr why
because we're going to width and height
here and we're gonna width and height
here it also has the URL twice here for
example this embed element here doesn't
validate in any version of HTML prior to
html5 it validates now because it's used
all over the place it's really handy for
putting plugins on pages so it's just
made a legal part of the language but
fundamentally this code here is is nasty
and none of us I think like nasty code
so in the html5 world we get this now
there's a video element as you can see
there's a closing tag as well we'll come
to the reason why in a little bit this
is the source from the video here it's a
WebM file we'll come to the file types
later
excuse me and nearly everything else
apart from the source is optional
controls tells the browser that we want
it to give us a play/pause toggle video
seeking bar probably a volume control
these are different from browser to
browser but that although all those
functions are represented autoplay is an
attribute that you use oddly enough when
you want to autoplay a video you
shouldn't do this it's wrong and it's
evil to autoplay videos
if your web user is an assistive
technology user so for example they are
listening to the text on your page
synthesized by a screen reader so they
can hear the text and your video of your
kittens on a skateboard automatically
starts with its rock-and-roll theme tune
that your users will be mighty annoyed
at you because they'll be drowning out
their screen reader output however it's
there oddly enough for paradoxically
enough as an accessibility aid the idea
is that if you couldn't declaratively
set a autoplay people would as they do
now do it with scripts because it's
easier to type autoplay and scripts it
up people are likely to do that and then
it's trivial for browsers to have some
kind of preference setting that says
never autoplay videos it's much harder
browsers to apply heuristics and look
through all the scripts on the page to
find out where the videos are also
played and thus turned off so what
appears like an accessibility nono by
allowing you to stay autoplay actually
has the potential to be an accessibility
aid which is jolly nice next we have
poster now the poster attribute allows
you to specify an image that is shown in
a place of the video until the video
started if you don't give the poster
attribute the browser will give you the
first frame of the video but that may
very well be just a black screen or a
white square and not look terribly
enticing and encourage your visitors to
click and start the video so if you want
you can put poster if you don't it
defaults to the first frame next are the
width from the height in pixels if you
don't put these in then the browser will
defaults on the intrinsic width and
height of the video and if you
accidentally ordered libera
change it so that the aspect ratio would
be changed the browser won't stretch the
video but instead will letterbox it and
basically the stuff in the middle here
in between the tags is fallback content
for older browsers so so this stuff here
is only shown to browsers that can't
actually do native html5 video what I've
got here is the mark-up that gives a
link to the video and then the user can
download it and save it to the hard
drive and then click on that and view it
on an operating system media player
which isn't the same experience as
seeing the video in the browser but at
least the user gets the content and and
after all contents the thing your
website exists to deliver the content so
delivering the content is the job so
audio is exactly the same
you can't put a poster big there's no
physical manifestation of audio unless
you say controls if you don't say
controls your audio will play that
there's nothing at all just see on the
screen you can auto play just as you can
with video and you can have a fallback
content in the middle for older browsers
just like with video there's a few other
groovy things you can say so for example
on video and audio we can say loop and
that does what it says on the tin it
will loop around and we'll see how we
can use that in a towards the end of
this talk um there's also a preload
attributes our preload has three
possible States if you don't put any any
state at all of you to say preload then
it defaults to preload equals auto
preload none means that the browser
doesn't actually grab any of the file
until you click a play button
to tell it to go preload equals metadata
tells the browser to grab as much or
actually as little of the file as it
needs to be able to show you the first
frame if it's a video and to grab
information about what kind of codec it
is the maximum length etc this stuff
doesn't command the browser it's a hint
you could say in your markup doing this
but if the browser for example knows
that is on a mobile phone it might never
preload anything or if it detects that
it's on a slow Network then it might
change its pre loading behavior you can
hints but you can't actually tell it
what to do okay another really important
fact to bear in mind about html5
multimedia is that this stuff is now
native is part of the browser so
previously if you put a video or some
audio on the page or the plug-in what
the browser would do was reserve some
space on the page and then hand off the
data that it's got to the plug-in to be
dealt with and the plugins and the
browsers being different different
programs from different organizations
different vendors and wouldn't
necessarily talk to each other properly
so I don't if you've ever tried for
example having a drop-down menu in CSS
that has to go over the top of the flash
movie and quite often it will go behind
the movie because the movie seems to
have a higher a higher Zed index than
than your and your drop-down menu now
that's an example of where it's
difficult to control what's happening on
that area of space that the plug-in is
going to use basically when you when you
hand off to the plug-in it takes over
but in html5 video and audio it's all
part of the brow
so we get advantages so for example
keyboard accessibility is built-in it
plays nice with the rest of the page and
there's a nice simple API for controls
so here's a demo we fire up opera oops
this is the Opera incarnation of video
now when I hover over it or tab into it
so I'm tabbing now obviously because I'm
in a different continent you can't see
that but I'm tabbing and I can trigger
the video with the keyboard in it's
actually quite difficult to make flash
movies keyboard accessible or tab abort
- in browsers other than Internet
Explorer I can adjust the volume there
we are
now these controls appear when I hover
or when I tab into the video the there's
no scripting there's no images there's
nothing I need to do other than specify
their controls attributes in my markup
and Firefox very similar as or Chrome as
for Safari as well it's at Explorer
probably fault opera katasonov Giga
pudding by default
opera is keyboard accessible out of the
box as is ie 9 Firefox is as long as you
have JavaScript on and I don't think
chrome is yet but I haven't looked
lately but potentially it's a keyboard
accessible out of the box so here is
another example and what I've done here
is in my CSS I've said my video is
pixels wide excuse me then I said video
code on hover video is going to be 400
pixels wide so it's going to change
dimensions when I hover over it and in
the bit of css3 I'm just giving a
transition on that hover effect so it
doesn't abruptly jump of a thing half a
second so now if I hover over my video
it changes size now this may or may not
be a terribly useful effect you'll
notice as well that the video still
plays there's no interruption in its in
its playback maybe not the most useful
effects but my purpose here is to show
you that because this is natively in the
browser you can control video just with
CSS just like you can anything else
it's native it's a first-class citizen
of the web here's an example where in my
markup I say controls and then in
JavaScript I'm removing the controls
attribute from the markup I'm writing
out this button which is just a
play/pause toggle and when I click on
the button it sends a message to the
video to play and pause like so and
maybe that's not the most attractive
play pause let's bow a let's disable
JavaScript refresh and now you can see
that the browser default controls are
there because the JavaScript hasn't
removed the controls attribute from my
markup
let's re-enable JavaScript because I'm
going to show you a demo this isn't
terribly attracting of course without
some merely because rubbish design but
here's an example made by the brilliant
friend of mine Patrick mauka what you've
got here is an HTML form
and it's set to be 0.5 opacity and when
you hover over it or when you tap into
it it will be it will be fully opaque
and there's a slight CSS transition as
you can see and then if you can see this
web font here but this is just a css3
web font pulled in with the app font
face rule and this guy here which is a
volume control hopefully you can hear
that if I fire a dragonfly which is our
opera's web inspector or Firebug light
device you should hopefully see down
here that this that slider control is an
html5 input type it was range a new
input control notify that manifests
itself as a slider so what you've got
here is native video being decoded in
the browser we have the standard HTML
controls of buttons and form inputs that
talk to the video using a simple
JavaScript API and this is all backwards
incompatible because if you don't have
JavaScript
it'll just use the browser's default
controls so this is an epic win and if
your marketing manager or branding
consultant comes up to you and says
we've been bought out by Megacorp and
everything needs to be in corporate lime
green with yellow you don't need to
crack open your your flash authoring
tool and change loads of assets you just
tweaks and CSS just like you do with any
other webpage it's based upon web
standards which is pretty much rock and
roll right so it should be as simple to
make html5 video as it is to make this
nourishing Japanese pudding
that you've seen the advertising for it
should be a simple easy-to-follow
process unfortunately it isn't and the
reason it isn't is video codecs codecs
are formats in the same way that we have
different image formats like jpg gif and
PNG there are different formats for
video my boss the CTO of Opera and what
the guy who come invented CSS gentleman
called how come we only said in 2007
when opera proposed the video tag in
addition to giving video and HTML
elements we must also agree on a
baseline video format or the universally
supported it's important that the video
format we choose can be supported by a
wide range of devices and then it's
royalty-free royalty-free is a
well-established principle for w3c
standards so that was the that was the
theory there are three formats for video
on the web the first one that we'll talk
about and the positive the least
important these days is call dog for
euro and this is supported by Google
Chrome Mozilla Firefox and opera it's
free and open in inverted commas there's
no licensing and no royalties
unfortunately they aren't there aren't
many tools for it so if you want to
start making are in any kind of
industrial process you're pretty much
going to be using the command-line also
people who are cleverer than me about
video formats tell me the the container
format itself isn't terribly well
optimized for web that was explained to
me as the browser has to download quite
a lot of information just to get basic
metadata out of it but nevertheless it's
supported by all these three and it
works pretty well okay then there is
h.264 h.264 is the name of the video
codec you often see this bagged up in a
container with the file extension mp4
and this is our ubiquitous if you have a
consumer video camera
it probably records to h.264
the trouble is that it's patent
encumbered there are licensing and
royalties payable on it if well if you
are not charging money to view your
videos then you don't have to pay any
royalties if you charge money for people
to see your videos then you have to pay
a royalty to use as codec codec to a
group called the MPEG LA and advantage
about h.264 is that it has excellent
support in hardware hardware decoding
chip so on a phone or something like
that rather than nuke the battery by
decoding the video in software it gets
handed off to a chip that does hardware
decoding and this is this is really
useful particularly on on things like
your iPhone and this is supported at the
moment by Google Chrome but they've
announced that they're dropping support
for it and it's supported by Apple
Safari and Microsoft's Internet Explorer
9 then there is a new kid on the block a
web em and WebM is the name of the
container format it is our video codec
called vp8 vp8 was owned was developed
by a company called on two technologies
and they also developed the codec that
we met called OGG Theora now ulquiorra
was called vp 3 so the 8 that powers
WebM is five iterations better and
Google bought onto technologists or I
believe 104 million us and then they
have opened source to that video codec
so it is open and royalty-free
in inverted commas the reason I put
inverted commas around it is that I'm
not a lawyer and
can't actually state that as a fact it
is web optimizers designed for the web
and it gives you pretty good pretty good
quality for pretty good compression
arguments raged about what's better mp4
or WebM
however WebM is good enough
for what you're going to use it for
which is delivering video over the web
hardware acceleration is on its way if
you look at the the webpage web em -
project.org
you can see that chip manufacturers have
committed to supporting it and WebM is
supported by Google Chrome Firefox Opera
and interestingly if the codec is
installed on Windows then ie9 will play
WebM videos but the decoder isn't
actually bagged up as part of its at
Explorer yes so unfortunately this means
there is not one single format that we
can deliver in you can see this is
rather sad graph here interesting
politics that people who are most behind
h.264 stroke mp4 are Microsoft and Apple
and by an amazing coincidence Microsoft
and Apple are also part of the part of
the organization that licenses that
codec and therefore get some money from
people using it but on precise this is
merely an extraordinary coincidence we
have a similar situation with audio
formats to mp3 isn't supported by offer
and Firefox because mp3 has licensing
all the royalty issues in some
territories of Orbis is an excellent
codec for audio is the one of Spotify
use if you have you guys use Spotify and
that is supported by
for our Chrome and Firefox okay so we
know that there isn't one single codec
that we can use for audio or video which
is a shame actually the specification
originally said every browser should be
able to decode OGG Theora and of all
this but nokia and Apple objected to
that and no consensus could be found for
which codecs should be used so the
mention of codecs was dropped which
isn't isn't the Cataclysm because it
appears if you look at the HTML 4 spec
it makes no mention of which formats
browser ships should support images for
example but the market has kind of
worked that out the market hasn't yet
worked out which codec is going to win
for audio and video in html5 so the spec
has a special way of making sure that
everybody gets a video so instead of a a
source attribute on the video element
excuse me
we've got source elements which are
children of the video and here I've got
point of an mp4 for Safari and Internet
Explorer here I'm pointing at WebM for
Firefox for opera and Chrome and here
I'm pointing at an old video for older
versions of Firefox are there you should
put the mp4 first generally browsers
will choose the first source file they
know how to deal with so shouldn't
actually make a difference but there are
bugs in some iPads whereby it will only
look at the first source child so if the
first source child isn't the mp4 then
the iPad all those versions of the iPad
won't play any video so just put the mp4
first you'll notice here as well that
I've
a ger type attribute now this isn't
required if you don't put in what will
happen is that the browser will try to
download bits of each one of these until
it meets one that it knows how to deal
with but video files are pretty heavy
and each one of these would be an extra
HTTP request across a network which are
of course quite expensive particularly
on mobile devices so if you put the type
attribute and just tell it the mime type
then the browser will know whether it
should bother downloading that file or
not and you're saving yourself
extraneous HTTP requests and downloading
unnecessary bytes so everybody wins
there and then in the middle you can
still have your fallback content which
means that a clever man called croc
caiman who I believe is in the UK he
Frankensteined that horrible old cargo
called
youtubes tirely code and html5 code to
make something called video for
everybody so basically here he thought a
sum of five video elements with the
child sources and then in the middle
which you'll remember is for that
content he's got an object and he's
passing the mp4 file to a Flash movie
that he's got on the server which serves
as a video player and then in the middle
of that for people who don't have html5
video or flash then you can have a link
to downloading the video so everybody
gets video people with old browsers who
currently should only use flash video
will get flash video so they don't get a
worse experience but people with modern
browsers will get that native video
experience and hooray for that if you if
you need any help with this archived at
all it has a great facility whereby you
can upload the WebM version of your
video and it
convert it to the other formats animal
also host it and then on your pages you
could point your source children to - to
the file hosted on archive catalog so
you're not having to do the hosting
yourself but they'll only do that with
Creative Commons Licence media if you
can't or don't want to license your
stuff Creative Commons there's a service
called v d-v ID dot ly and they have a
free conversion and hosting service you
can look at that maximum one gig source
file and what you do there is you upload
the video to their website they
transcode it into lots of different
formats and then when a browser requests
the URL they will do various feature
detection to work out which one of those
video formats to send that particular
browser or if you're just doing a few
videos you can download Miro Video
Converter and it's a drag-and-drop GUI
skin and then you just drag a video onto
onto the Miro Video Converter to tell it
what destination format you want and it
will do the conversion but it only does
one at a time so you wouldn't really
want to be doing that thousands of times
personally I expect to see some new
CMS's coming to market or maybe
WordPress plugins for example whereby
you upload a video into your CMS and on
the server in the CMS it will do the
video conversions that's not rocket
science there so there is help available
to stop you able to do double encoding
and hosting it all yourself and I
mentioned that one of the most powerful
things about html5 multimedia is the API
and this API is the same for audio and
video by the way um you have this this
is the spec not terribly user-friendly I
have to admit so
here's how you control video with
JavaScript basically you you'd get
element by tag name for the video and
there's the video play pause volume
wherever you can get and set the volume
and you can get and set the current time
which is how you can jump to places in
the video for example and like every
good API there are events fired as well
so you get a bench start unloaded data
but it's playing when it's paused an
event every 250 milliseconds called time
update if it tell me when it's ended etc
each of the browsers fire those events
in slightly different orders and
different events fire depending upon
whether the video is in the browser
cache or whether it's local for example
so listen for the events and control
your players like by that there are it's
possible to get a race condition as well
not going to go into detail with this
but if you look at html5 demos comm
excuse me slaughter video this is a
website that's made by my co-author Remy
sharp and if you look at the code there
he explains the race condition he's
encountering and and how he gets around
this we consider it to be a little bit
of a spec bug but I don't think that
it's solvable now so have a look at that
another thing that not a lot of people
know is that you can attach media
queries to videos we all know and love
CSS media queries which drive what all
the cool kids are calling responsive web
design and because html5 doesn't like to
reinvent stuff
they must have pay if cowpats pilfers
and plagiarizes and steals excuse me the
media query syntax that's what's
happening here is that i am giving a
high res video to devices
with a wide screen and I'm giving
therefore a low-res video to devices
with a small screen there's no point in
having a really really great quality
video somewhere to be watching it on a
boring squatted square screen this works
in Safari and opera however you do have
to again double encode your video you
have to make IRS for a low res version
but this is doable now that's something
else that everybody wants is a full
screen video for a long time the spec
said you couldn't go fullscreen in case
people made moves that masqueraded as as
websites or something
WebKit has an enter full screen call
like that however last month WebKit
announces implementing the gecko
fullscreen API and opera like this
approach - the good thing is with the
gecko fullscreen API is it can make
anything fullscreen so a canvas game
could be fullscreen and an iframe could
be fullscreen for example it means that
we have to think carefully about what
you can do in fullscreen videos which
Keys you can use for example and most
importantly how you let the user know
that they're watching a video rather
than seeing a webpage but these are all
these are things that can be ironed out
so there is good hope for native
fullscreen video with an interoperable
API so video accessibility I started my
web standards career as an accessibility
ball and just because I'm now in html5
bore it doesn't mean that I won't walk
up to your parties and subject you to
accessibility tedium from time to time I
think the success of YouTube and
similar science has shown that video is
a vital way of distributing content on
the web now and it is obviously vital
that people who can't see or can't hear
should still be able to perceive the
content so minimum 5 works hard to make
sure there is accessible alternatives to
video however none of this is
implemented yet so the stuff I'm going
to show you right now is almost finished
being specified that I know that a
couple of the browser's are working out
how to implement it as we progress
through this presentation the thing get
progressively more and more nebulous and
further away from implementation but
first of all maybe you know maybe you
don't but inside your your video
container mp4 or WebM or whatever there
are there's a video convivial tract as
an audio track and there can be any
number of subtitles tracts that the
author has put in the container with the
audio and the video and what will happen
pretty soon I believe is that when
browsers open up the video container
file to grab the pictures and and and
the sound they will also see if there
are any subtitles available and if there
are they will play them which will be
jolly also you will be able to add your
own subtitles even if they aren't put
into the media container at the moment
is a bit of a chicken egg situation
where them doesn't yet have any
mechanism of embedding subtitles and
that's because they're waiting for the
html5 guys to specify the subtitling
format and then when the subtitling
format is specified then WebM will
support it so let's look at the format
what you will do if you want to add
subtitles because they're not actually
in the video container is you will use
the track elements and the track element
is a child of the video you can have as
many as you like here I've got English
subtitles and I've got German subtitles
and I'm telling the browser which
language these are in and what you can
expect of the browsers is that they will
give you some kind of some kind of
notification on the video itself there
are subtitles available and it won't
distinguish between ones you've added
with a track element or ones that are
actually part of the container file and
it will give you an opportunity to to
see those subtitles so the format at the
moment is something called web VTT this
is a new format it's loosely based on a
street format called SRT now there are
at least 50 other specifications for
timed tracks but they're writing their
own and the reason is is that as far as
I can tell they're trying to strike a
balance between subtlety and power
because if you have a super duper
subtitling language
it'll be so complex that real people
aren't going to write it and if nobody
writes subtitles and there's no pointer
to all them specifying how to display
them so here's a nice simple version the
specs actually changed since I sent up
with this presentation together so now
you don't even need the word file here
just a web of ett it quick it's a simple
text file utf-8 encoded this number here
is optional and these are hours minutes
seconds and milliseconds from the
beginning of the video and at this point
from the beginning of the video until
this point from the beginning of the
video
display this text and that's pretty much
as simple as it can be we find that you
know real people not web developers real
people out in the real world are using a
format very much like this to subtitle
their videos on YouTube which is why
that their format is is based upon that
it's nice and simple you can do more
stuff so webvtt supports positioning of
text you can say show show this 10% from
the top or 10% from the bottom you can
surround there is words with B and I for
emphasis you can color individual
speakers so that if if two people are
talking at the same time you could have
everything Paul Irish says being purple
and everything John folio says being
blue for example and that would be
useful
it supports vertical text for languages
like Chinese because of course the
entire world doesn't speak English and
equally well it supports right-to-left
languages like Arabic
it also supports Ruby annotations for
Chinese Japanese and Korean languages
and these are these are ways of telling
readers how to pronounce some
potentially unfamiliar or ambiguous
characters in those Eastern languages
these are built in because
internationalization and accessibility
are absolutely integral to the modern
web now currently no browser yet
supports webvtt and and respect isn't
completely finalized yet however we can
polyfill this I don't know whether you
guys in the USA have this product called
poly filler but poly filler basically is
is a way it's a product and you put over
cracks in the wall etc of it your
hardens and you sand it
and you're left with a smooth surface
upon which to paint so Polly filling is
a term invented by my co-author anysharp
but basically it's a methodology whereby
you code to the specification you code
to the standard and you have a small
poly filling script and the poly filling
script does feature detection which is
easy easy and built into html5 and so
this script I'm going to show you which
is written by a Frenchman who goes by
the name of Delft Ikki and it's called
player pla yr with the last vowel oh so
fashionably left out what this we're
going to do is fake track support in
JavaScript the first thing it does is
check whether the browser's natively
support track if they do then the script
just finishes and hands over support to
the native browser support if it doesn't
natively support it then the polyfill in
script takes over and does the job and
it will Ex a jar in the VTT files and
look at the timestamps and using the
medium elements api it will synchronize
the the text with the video and it looks
a little bit like like this so player
has made this nice
so players made this nice this nice
video skin for me however its noticed
because of those track elements that
there are two subtitle files and it's
getting the information about the
language from the source Langa tributo
if i switch it to english it's worth
pointing out that this is just text and
just text is fabulous and groovy because
of course just text can be indexed by
search engines and just text can be
easily styled with CSS the user can bump
up the browser defaults to make that
bigger and do with it as they will as
you could probably tell I was on Bondi
Beach there before Christmas I went to a
talk in Australia and obviously can't
Kurtis to my host site I subtitle this
into Australian as well
so you can see this is faking the
browser support but I expect it to look
it's really very very similar in
browsers this is a player like I said PL
a why are the source for this is on
github and you are free to to grab it
thank you to mr. mr. delphy key I also
want to point out a really cool script
here called media elements j/s that's
major elements j/s calm and this does a
similar thing in fact it uses some of
players code but not only does it fake
track support but it actually contains
within it custom flash and Silverlight
players that mimic the html5 API for all
the browser's so this absolutely rocks
and is it's thoroughly recommended this
one uses JavaScript sorry this one uses
the jQuery library is a little bit
bigger but it's doing loads more so it
really depends upon what you need to do
okay so not everybody needs to be text
equivalents but for example here's a
here's a web page from the the fire
brigade near me and they have a lady
video of a lady who is signing a video
in British sign language and what you
want here excuse me is it if I change
the position of the video here I want
the video here to similar to
simultaneously change so that her
signing is always synchronized with the
video like many things accessibility
related there are many many uses for
those things outside the arena of
disability so here for example is a is a
sourcing event with multiple camera
angles and what you would want here is
if you change the position of the video
here you
equally want these ones to to change as
well and the spec has something called
synchronizing media elements going on
with the concept of a media controller
and whereby you group elements together
and they're all slave to each other this
is much less mature than than the the
webvtt and the track elements but to me
as an accessibility bore it's really
really encouraging that we're talking
about this stuff now and working on a
standardised interoperable way to make
multimedia accessible out of the box in
browsers coming soon I'm sure actually
because because people are demanding it
so let's have a look at how mature all
this is now there's looping latency at
the moment in the browsers that is
getting better but my my colleague
Patrick Lau curve done some experiments
on on how you can do seamless looping
which is difficult at the moment there
are a lot of video issues on the iPad
some of which a solvable and some of
them are seemingly not not sold yet and
for things like the the iPhone Rennie
sharp my co-author has a really good
blog post on audio sprites because you
can't play two sounds simultaneously so
it's not fully mature yet on your your
media players on your operating system
you've got a lot more features because
they've kind of decades worth of
experience and this is all very new in
browsers but its fixtures are coming
through thick and fast people want this
stuff from the browser manufacturers we
know this and so we're fixing stuff now
one of the things that html5 was was
invented for was to compete with things
like flash and Silverlight i personally
think that competition is good and if
one kills the other one then that's bad
because that negates competition but
another people are still in the in the
the false dichotomy if you like there
the black and white mindset that it must
be html5 or Flash one one good and ones
evil and it depends upon your viewpoint
which is which a lot of the people who
are flashed flashes great people they
come up to me and say yeah html5 doesn't
have DRM digital rights management so
let's talk about DRM now this is a slide
that was drawn for me by this six year
old lad here his name is Jack Henderson
about the slide Jack's little brother
Noah goes in and out of hospital quite a
lot and so so six year old Jack decided
to raise money for the hospital that
looks after his little brother and he
had the idea that he would draw anything
that people are asked in return for a
donation and he was trying to raise a
hundred under pound sterling he's raised
twenty-two thousand pounds sterling and
and I wrote to him and asked him to draw
me a picture of the words dr.m because I
needed a slide and luckily Jack's dad
Edie is a web developer so he he
fast-tracked my my request if a
six-year-old boy knows that DRM is is
scary and horrible I think that tells us
all not to do it however I should add at
this point is my personal perspective
and does not reflect the opinion of
opera so when people say to me well you
know html5 doesn't have DRM I say yeah
and I don't have syphilis and I find
nothing to regret in either of those two
statements frankly I personally I think
DRM doesn't really work I think this is
a great visual imagery image of of DRM
but but people people want it
I understand that that that
organizations need to be able to show
that they're doing their best to protect
protect people's copyrights south for
Southwest this year I asked Paul cotton
who was one of the the co-chairs of the
working group and I suggested that DRM
wasn't actually part of the language
anyway there isn't html's job to protect
copyright and I suffice postulated that
maybe DRM was actually a format problem
if somebody wanted to supplement where
them an mp4 with you know a dotter DRM
web form app that only browsers with the
right keys could could play they'd be
absolutely welcome to but it's not part
of the languages job and Paul to be fair
agreed with that so we'll see how it
goes but if you do need it it's worth
noticing that Henry's civilan who is a
guy who works for Mozilla showed how you
could actually do DRM for video already
in html5 without any spec changes so if
DRM is your thing that's the link to
look at kids okay okay let's have a look
at the future now because templates
fugate's it's time times moving on so
let's look at the future the html5 spec
has something called the device element
which now has change its name and change
from an element to an API and it's
called get user media something new on
the scene is web RTC this is web
real-time communications so this is
basically a video conferencing in the
browser with JavaScript API x' it's been
the code has been open sourced by google
it's a project supported by Google
Mozilla and opera and it's basically
allowing your devices your your computer
with your permission much like the way
you have to give permission to the
geolocation API with your permission a
website can access the camera and the
microphone on your device from
JavaScript and there is an html5 spec
for peer-to-peer communication not yet
ready for primetime but getting there
and this will allow basically
peer-to-peer communication between
devices with audio and video it's not in
any browsers yet
however in Opera we do have have this as
you can see here I put it auto playing
video with nothing inside it then in my
script I'm doing feature detection to
see if I have getusermedia enabled and
if I have basically I'm connecting the
stream from my camera or microphone to
the source of that video element and
that is allowing me to connect my my
camera to a video element on the screen
so if you if you download a labs build
of Opera Mobile for Android you can see
this this fabulous demo and what this
does is it's a website it's not an app
it's not a native app it's just of
JavaScript websites and what it's doing
is accessing the camera and getting a
picture of this guy and it's doing
facial recognition and drawing a Super
Mario moustache where it should go
and I think there is a very few finer
demonstrations of technology so this
isn't doing the peer-to-peer
videoconferencing yet but you can see
the ramifications of this for augmented
reality for example if you go to this
URL here and download the build in the
speed dial on that build there are links
to demos and there's a demo which uses
getusermedia to get the camera into a
video on the screen copied into canvas
and then it uses the geolocation and the
orientation API to work out which
direction your
Kanyon and where you are and it would be
then of course the extension to that is
some kind of augmented reality whereby
it tells you the nearest subway station
or turn-by-turn instructions to the
nearest bank ATM if you go to your bank
to website or allow it to look your
camera these things are all all possible
if you want to code them and you can
download that labs build from opera
there so we've looked at we looked at
what's possible now we've looked at
coming soon with subtitling on the track
element stuff that's a little bit
further away with synchronized media and
and getting and doing real-time
communications so let's have a little
case study let's have a look at what the
power of html5 can forgive us now this
is by the way a painting mind my
daughter did for me on Father's Day this
is me on a unicorn with the Turkish
dancing girl killing Nazis with lasers
that are powered with html5 and and all
this can be yours if you come to the
html5 light okay so there is a marvelous
old old game from the b3t a guys who are
a wound website in the UK and this is
almost certainly nine or ten years old
now
rather good calm slash Buffy and this is
a Buffy's swearing keyboar so let's err
let's go there so this is Buffy swearing
keyboard now if I hit a for example I
hopefully you could hear that
there's his a ah his be I'm not gonna
hit C for obvious reasons but here's da
and you get the message but of course
this this unique cultural artifact is
all flash which means of course that all
you cool
and iPhone users can't use it so it
seems that it seems that ashamed for
this integral part of internet history
to be locked of a proprietary format so
I decided that what would be good is to
to remake this in html5 so my first
thought when I showed this to my
daughter and he recalls laugh and enjoy
pressing all the the rude keys the first
thing she said was well who's Buffy and
of course ladies and gentlemen it's a
tragic fact but young people of the day
don't know who Buffy is so then I got to
thinking okay so what if I'm if I'm
modernizing the code this I'll to
modernize the modernize of celebrity so
I started thinking we are Lady Gaga's
swearing keyboard yeah maybe
and then of course I realized you know
who is it who has excellent excellent
geek kudos as well as being down with
the kids and the answer was obvious
pixie Ian Hickson the editor of the
html5 spec so instead of Buffy's
swearing keyboard I'm gonna use hick see
I've got hick see as he attended a
British University the man of a
refinement and good manners and would
never swear so it's gonna be Hicks's
html5 keyboard that we're making based
upon Buffy swear in keyboard so the
first thing I've got is basically the
keyboard excuse me and this is just a
collection of of HTML buttons and
they're arranged divs one for each row
they're dibs rather than the other
semantic element because of course the
grouping is entirely arbitrary it's
visual there's no there's no logic to
the grouping so I'm giving them dips and
they're just just buttons then the next
thing I got is a loop of of Pixies hit
talking it's just a two second loop that
I've done
here it is you can slightly see the join
there so two-second loops that I want to
download a great big video so what I'm
going to do is basically loop the loop
that video while he's talking and when
the word is saying finishes I'm gonna
stop the video programmatically using
script so what I'm gonna do here is
we're gonna race through this code but
basically I'm looping through all the
buttons and I'm adding a new OGG file to
the end of my end of my web page where I
where I'm making this cross browser I'd
also add an mp3 file as well and
basically I've got a dog and a dot mp3
for the thing he says when I press the a
and then B dog CD dog etc alright now
here's the important thing what I'm
doing is I'm listening out for a button
to be pressed when the buttons pressed I
start the audio but all the audio are of
different lengths our lifts now for an
ended event and if the ended event has
come from the audio then I pause the
video so that synchronizes the video
with the audio to say that again I press
the button it triggers the audio the end
of the also triggers the video and the
end of the audio triggers the video to
pause okay so what I want to do is get
the words on the screen as well so I'm
using the data attribute any element in
html5 can have a data attribute attached
it can be data - anything you like it
would be data - text data - shear
strength data - spaceship size and it
passes information - script
now what I'm doing here is I'm passing
the the words he's saying off to the
script and that will be overlaid on the
pay
so I'm grabbing the the the value of the
data attribute there and then I'm just
over laying it on a diva which is
absolutely positioned over my keyboard
and I'm using a css3 font face so let's
have a look at how that works
okay so here it is now when I hit a key
you'll see Hicks he starts and when the
words he's saying finish he will finish
so let's go through it one by one
logically EDR canvas details in big
figure in figcaption geolocation isn't
really part of html5 header item block
JavaScript is lovely ki J local storage
menu and meter now output post message
progress absent placeholder Q element
Ruby section time utf-8 video when
workers year what's your use case
Zed index for CSS is part of html5
bitches ha and it's really nice and for
context XHTML to my ass now ladies and
gentlemen is hexyz swearing keyboard
made through the magic of html5
multimedia HTML elements css3
and the JavaScript API and thanks to
these guys for all their help thanks to
the all rights reserved corner takara
tomy for the Giga pudding video which
belongs to them by the pudding
Henderson for permission to use is scary
drmp to buyers book
thanks to my daughter for the html5 Nazi
killing Bruce on a unicorn picture and
by her dad's book which is here age team
introducing html5 second edition coming
out in September and with that ladies
and gentlemen any questions these are
your presentation thanks for getting up
at the wee hours in the morning - I just
never got a bed sorry to hear that
so questions for Bruce so the question
is Bruce he's asking Microsoft has
announced that they're facing out with
Silverlight do you know anything about
what they might be doing next just
announced they're phasing I don't sort
of a lot really I haven't seen that
announcement obviously I can't speak for
the wall for our friends in Microsoft
because I work for a run for opera but I
would imagine looking at what they've
announced for Windows 8 so that all apps
will be would be made in html5 that
that's the way they're going and that's
the right way let's hope that
applications on win Phone 7 will be
similarly open and not requires
Silverlight - but I'm afraid I can't
answer in any more detail than that
simply because I haven't yet told me all
the plans for the future okay thank you
we have another question just hold on
one second
go for it okay Bruce the question is is
there any way to do post processing on
video that's playing in web pages using
the video tag so you mean muck about
with the video in real time is that what
the gentleman is asking yes yeah no
problem at all what so the the video the
demo that I alluded to where we draw a
Mario mustache on you what you see on
the screen isn't actually the video
element at all the video element is he
away from the screen and what you are
seeing on the screen is a canvas and
then they said that video is being
copied pixel by pixel into canvas in
real-time and then we're doing analysis
of the pixel data in canvas to find a
face which is it's pretty it's pretty
trivial it's looking for certain areas
of uniform color with two dots which
would be eyes and then on the canvas
it's drawing the red square around where
it thinks their faces and adding the
mustache
so that's post-processing of the video
but that's done copying the video pixel
by pixel frame by frame in real-time
into a canvas and manipulating that
deeds that data there's a really great
demo by Paul oj of mozilla in which they
are the colleague of his is standing in
front of a green screen and they're
copying that data into canvas they're
checking for the amount of green on a
certain pixel above a certain threshold
they're making that pixel transparent
and they're putting a background image
on the canvas with CSS and it looks like
the guys standing in front of that
background image and this is all done
real time in the browser copying the
video data into canvas and manipulating
it that way
so yeah possible and there's demos
around that or a couple years old that
can show you how to do it answer the
questions yes thank you
sorry so we have a question online we
were wondering when you estimate RTC
will be available in major browsers or
the timeline for that as it says on the
website we hope it will be available for
Chrome opera and Firefox soon it really
is brand-new stuff when we were
implementing that that Mario moustache
demo in Opera for example we gave or we
collected lots of feedback on the
streaming protocol which we hope we've
backed into the spec so it's like a lot
of the
really bleeding edge to five stuff the
spec is kind of half there as we
implement it we collectively as we
implement it will get feedback on the
suspect and the spec will be tarted of
and there's a feedback loop going on
there but we hope it will be soon Bally
say that excellent thank you we have
another question in the room just hold
on a second have you heard of a
text-to-speech API that sorry could you
repeat that's for accessibility there
they are do that for me personally I
think text-to-speech is a job for intern
and on to the browser rather than API
personally there's many such things in
Opera we have a built-in voice
synthesizer there are some great screen
readers that you can get I'll advise you
try NVDA which is I think I said in the
presentation two blind guys in Australia
make it that's MBTA - project.org but no
I haven't heard of it of an API okay
thank you so he's asking whether or not
you can prioritize video streaming and a
web page a-- has other streaming
elements in it yes I'm afraid I'm just
not enough of a server monkey to know
whether it's possible on server to say
this thing gets higher priority but not
client-side no and there's a whole
swathe of things like adaptive bit rates
and things like that that aren't aren't
simply possible in html5 of yet people
know about them people are working on
them these deficiencies are facing them
because this stuff is very new rather
than nobody cares
about it and one of the things with with
building new languages like this is that
you you start off with the version one
get the foundation there and then with
off of that rather than try and get
everything perfect before you release
these things I'm sure we'll be seeing
those pop up in the next year or two but
no not easily yet as far as I know
someone's asking whether SVG will ever
become a first-class citizen in the
sarees then html5 arena I could be
annoying and puritanical and say no
because SVG is nothing to do with html5
but I'm not going to be annoying and
puritanical I'm gonna say yes it already
is a first-class citizen of the html5
arena
particularly when Internet Explorer 9
announced that it had support in fact
later on when I can dig out the link
I'll post a link which is manipulating
html5 video in real time using SVG
centers with an SVG filter you can do
edge detection nuking chance make things
monochrome you can invert the colors and
if you look at swiftly which is an
experimental Google web app that will
take a flash Swift that you upload and
it will vomit it back out in what it
calls a 50 ml 5 what it actually is is
SVG unfortunately it's it's SVG that
seems to be working WebKit browsers
which is which is a shame but
nevertheless is SVG so yeah SVG is is
here and finally several years after it
appeared on the scene it's ready for
primetime did that answer the questions
excellent yes I think it did thank you
okay we have one question online just
let me grab that okay g'day he's
is we know graphic we have a graphic
intensive app and flex flash which is
used by schools with old browsers we're
setting up a new team to create the app
in JavaScript html5 using canvas and
drag and drop what aspects of html5 need
to mature to ensure its robust I I
feeling that it's not the aspects of
html5 particularly need to to mature but
I've looked very carefully at how old
and how capable your target browsers are
because doing the stuff in JavaScript
can be seen you intensive and if you're
if you're trying to polyfill loads of
stuff so it's all gonna work in ie6
you're gonna have a hard job on your
hands is the is the honest answer okay
thank you bless you Vanessa thank you so
much for attending and listening and
thank you to Vanessa and Max for several
several evenings running up to this work
how on earth we were going to
technically stream it I'm enormously
grateful to them both the feeling's
mutual we thank you very much Bruce
thank you goodbye</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>