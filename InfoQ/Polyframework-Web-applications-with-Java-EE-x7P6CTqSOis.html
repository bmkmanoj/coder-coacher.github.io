<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>&quot;Poly-framework&quot; Web applications with Java EE | Coder Coacher - Coaching Coders</title><meta content="&quot;Poly-framework&quot; Web applications with Java EE - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/InfoQ/">InfoQ</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>&quot;Poly-framework&quot; Web applications with Java EE</b></h2><h5 class="post__date">2013-07-24</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/x7P6CTqSOis" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">alright welcome everyone to the session
poly framework web applications with
Java EE so we're going to talk today
about developing web applications that
are implemented with more than one web
framework while working under the
constraint that we don't want our users
to be aware of this we want to preserve
a consistent user experience in terms of
look and fear look and feel and behavior
of the application so I'm Brian leatham
i'm a senior software engineer at Red
Hat I'm the richfaces project lead and
today's topic actually comes out of out
of some work we've done for richfaces 5
where we've come up with a new component
architecture for delivering jsf
components using these standalone
javascript widgets and then enabling our
users to take those widgets and use them
in other web applications so I put
together a proof of concept of that idea
of building an application with multiple
frameworks using these these widgets and
that led to this presentation so a
little bit of a motivation for the
problem why would we want to mix web
frameworks well maybe we have a legacy
application and we want to take
advantage of some of these new things
we've learned about this week at Jack's
we want to use these new JavaScript
frameworks for developing web
applications for instance or maybe we
just had an acquisition we bought
another company we've got two disparate
teens with to suss skill sets we want to
be able to marry them together and build
an application or maybe it's just that
we want to use the best tool for the job
every framework has its niche has its
thing that it's good at and we want to
be able to patch these together and
build a cohesive application so in short
we just want to use the shiny new
technology
so to further motivate this we're going
to jump straight into the demo we'll go
through and we'll see what the proof of
concept of all this looks like and then
we'll go into the details of how this
was done all right so this is a demo a
web app running up on openshift it's the
same page implemented in three different
web frameworks using jsf with rich faces
another page using wit with a wry a
JBoss project that extends wit and then
in plain html5 page using javascript and
then aero gear to speak to the restful
back end so we look at the JSF page
first pretty simple page styled with
bootstrap we see here this pick list
component where we can select our cities
drag and drop one to the other and then
when we click Submit we update the
server on the backend and now if we look
at the grit or I page I'll go away let
me see the glitter I page picks up that
server state that we submitted from jsf
from the JSF page the page otherwise
looks the same styled the same the
behavior of the widget is the same drag
and drop same look and feel we don't
know as we went from one page to the
next that we went from a JSF page to a
web page similarly select somewhere
cities here click Submit and go to the
html5 JavaScript page it's populated
with the same same data same look and
feel the user again doesn't know that we
change frameworks it's also picked up
the same values from the server side
from the shared state between the web
frameworks so we can take this one step
further if I load up all three at once
if I change the value of one and I click
Submit you'll see the value update and
the other two frameworks so this is a
JSF page updates the the value on the
server and that change is propagated to
the to the quit and the html5 page so
you can see there's a lot of
possibilities here for building an
application in multiple web frameworks
and giving users a consistent look and
feel between them yet still having
shared state and responding to shared
events between the different frameworks
so back to the talk so in building that
demo there's essentially two sets of
concerns that we had to solve one was on
the client side we wanted to provide the
end user a consistent look and feel so
that one page looks like the next but
there was the further consideration of
having a consistent behavior we wanted
the JavaScript that the user interacts
with what actually gives the page its
characteristics its behavior we wanted
that to be consistent as well then on
the server side we have the constraint
of having shared state there's no point
in having multiple web frameworks as
beaches sharing state independently and
we're going to get into two conflicts
that way and then as an added benefit if
we can achieve some kind of common
programming model between the red
frameworks that is another added bonus
so let's look first at how we achieve a
consistent look so to do that I used a
CSS framework so just about every web
framework out there has some kind of
theming capability that lets you theme
the applications you build with that web
framework but as you go from one web
framework to another you're not going to
be able to share that skin or share that
theme between those applications so if
we fall back to using a third party CSS
framework that takes care of styling all
your HTML elements
and provides a way of extending that
style into your custom widgets custom
components then we'll be better off
right so it's reusable across frameworks
there's a ton of CSS frameworks out
there before you choose one for your
application I recommend you check out a
number of them they're going to
introduce different requirements into
your tool chain for instance bootstrap
the bootstrap compiler is JavaScript
based so it's going to work well in
environments where you are using
javascript foundation is a great CSS
framework but it uses sass which needs
Ruby to compile so you don't necessarily
want to introduce that if you don't have
any other requirements to use Ruby just
different things to take into account as
you look through the CSS frameworks for
the purpose of this discussion we're
going to pick on bootstrap I was
originally put out by Twitter it's
gotten pretty popular in the meantime
they got their stats on the bottom here
from github 16,000 Forks fifty thousand
stars it's a lot more popular than any
project i have on github just about
every CSS framework solves the
scaffolding problem they give us a grid
that we can use to lay out our
application we all remember from the the
web one point 0 days when we use tables
for layout we're not supposed to do that
anymore we have to use gives and and CSS
to lay out our page but we've all
wrestle with that in a multi browser
environments multi versions of these
browsers and trying to get that to wear
consistently so it's nice that the CSS
frameworks take care of that for us so
the bootstrap grid breaks the page into
12 columns and then you can put things
in each of these 12 columns and you can
span multiple columns we look at that
bit more closely we take a div we assign
it a row and within that row we can put
more divs give them a span followed by a
number class span for span 8 that tells
that tells us how many columns we want
to span in the framework so up here we
have some columns that span a single
column here we span two columns span for
span 9 and so on you additionally have
the offset class which lets you take a
class or is there an element and move it
over a number of offset columns so this
allows you to position things to a find
degree of detail on a page additionally
this grid system is fluid as you resize
the browser the grid can change size
this it's also responsive if you look at
your at a grid on a mobile phone where
you have a narrow screen with the grid
elements will align vertically so you
can see you can achieve the famous two
column layout if we use a span two and a
span ten class and put our content in
there it's pretty simple way of
achieving a layout we're always looking
for more there's more handles available
to us for responsive layout we can use
the bootstrap classes that determine
when we're visible on phones tablets and
desktops by simply dropping the CSS
classes on our elements we can toggle
the visibility for the different types
of elements all right sorry different
types of devices alright so this is all
just CSS there's nothing invasive about
this at all so in addition that a
scaffolding bootstrap takes care of
styling the basic CSS are sorry HTML
elements
you're your basic heading paragraph and
so on elements are styled with bootstrap
boost job will style our code blocks
bootstrap styles tables get a nice slick
looking table out of the box here we get
add the table strike class and we get
some nice striping across the rows of
our table and this is just CSS there's
no JavaScript involved in this we can
add a border to our table values by
adding the table bordered glass we can
get with the table hovered class we can
get a highlight of the row we're working
on bootstrap styles all our form
elements can give you rounded borders on
your your search components styles
buttons with colors to indicate state
and what's going to happen and bootstrap
gives us a large set of icons that we
can use in our application all right so
you see how using this stuff in a CSS
framework and bringing it into our web
framework as we bring it into the
different web frameworks they're all
going to be using the same style the
same approach when you get that same
look and feel take a final look at
bootstrap the components that it
provides so it gives us drop down
elements it gives us button groups where
we can collect these buttons together to
make it look like a single multifaceted
button use quite a bit in paging across
data tables we see that kind of a style
we get dropped down components so sorry
drop down buttons providing alternate
actions we get tabs tab components nav
bars breadcrumbs pagination
labels and badges to give feedback to
the user progress bars it's all going to
be there consistently styled for us to
make use of in addition to that
bootstrap is very easily customizable
and extensible so it's built using less
which we'll get into shortly we can
define these variables that bootstrap
uses and we can configure these
variables in fact if you go to the
bootstrap website you can fill in these
values and download a CSS generated
bundle with those values in there so
let's take a closer look at how this
works with less so less is a CSS
extension that's used to power bootstrap
if you look at this less example here it
looks a lot like CSS but there's some
constructs in there that we're not
familiar with if we've we're only
familiar with CSS so let's go through
those and discover what additional power
we can get when we use a CSS extension
like less so the first one and the one
that stuck out immediately is useful for
me was the definition of variables how
many times in the past I've been working
on a CSS file and I defined a particular
color somewhere and I was copying and
pasting it throughout the CSS file with
less you can define that variable or
define a variable to hold that value and
just reference that value throughout
your application so here we use the @
sign to indicate it's a variable and we
assign it a particular color value we
can even do math then on those color
values assign it to a new value and
reference that color value in a CSS
definition so this less in the above box
renders down into the below CSS it has
to render into CSS CSS of course because
that's all that the browser understand
so I don't in my opinion even if all
less provided was variables it would be
useful but of course does a lot more
than that less gives us mix-ins so here
we define the CSS class bordered and we
can use that with less as a mixin so we
can define this down here this for the
element of ID menu any anchor tag
underneath it will inherit this bordered
class if we put the dot border there so
it's going to pick up the border top and
board or bottom definitions of the
border class and we can reuse this mix
in anywhere we want an element of class
post its anchor element is also going to
pick up this bordered class sorry it is
bordered mixin so we've defined our
bordered mix in centrally if we now want
to change the color or the thickness of
that border we change it in one place
and then all our CSS classes are all our
CSS definitions that mix that CSS class
in we'll pick it up so it's it's dry
right we don't repeat ourselves that
brings that to CSS taking mix-ins a step
further we can pass parameters to our
make sense if you've taken advantage of
the HTML like a css3 property border
radius you know you have to define the
proprietary CSS attributes dash Moz and
dash WebKit it's a bit of a pain to
repeat that everywhere so you can define
where this this is straight from
bootstrap actually less particular mixin
you can define the border radius mixin
that takes a radius parameter and
applies that to the list of CSS
attributes there so when using the mix
in we then pass a value to that
parameter so our element with ID header
is going to pick up a border radius of 4
pixels anything with the class button
is going to pick up a border radius of
six pixels another useful feature unless
is the ability to nest classes so on the
left you see a traditional CSS approach
where we only want to style these
elements underneath the header the
element with ID header so everything
gets prepended with the pound header on
the right you can see the less
equivalent where we nest all those CSS
definitions within the definition for
header so when that CSS gets evaluated
the less on the right is going to
evaluate to the CSS on the left keeps
things simpler more concise more
readable less allows us to perform
operations in the CSS all right we set
the CSS sorry the less variable base to
5% filler then is base x 2 and other is
the addition of base and filler you can
essentially do color arithmetic we can
take the base color and add RGB values
to our color similarly less provides us
functions that can operate on our CSS
values right we can take a color and we
can lighten it here we see background
color is the base color lightened by
twenty-five percent here we're changing
the saturation of a color or converting
a value into a percent so the Express
expressivity available to us and less
allows us to be much more creative and
flexible in the CSS we write and allows
us to extend CS CSS frameworks to into
our own application into our own widgets
but of course it has to be compiled
right i mentioned that bootstrap sorry
les is compiled with javascript so the
less project provides a less JS file
that will compile
you're less source into CSS so you can
run that anywhere you can run JavaScript
including in the browser itself you can
serve in your webpage a less resource
along with the less JS file and the
browser will compile it and view that as
CSS you can compile it in your desktop
with with with node or any anywhere
really that you can evaluate JavaScript
and the Java world there's a couple
projects that rap last j/s with rhino to
let us call it from Java environments
the role forge a project does this for
less as well as a number of other
projects and there's a maven plugin
available for Row 4 J so you can
incorporate this into your build so as
an example of what we can do with less
and bootstrap I took this this is the
rich faces for accordion component I
just pulled out the HTML and JavaScript
and dropped it in this application I
think it's really cool it's a HTML
application and you can put HTML
Javascript widgets in there and then you
can interact with them I I can't get
over the fact that I can just click on
this thing and it's not a screenshot so
on the bottom we see the same HTML and
the same JavaScript but styled with less
and with bootstrap we didn't have to go
in and modify the HTML introduce any new
CSS classes we were just able to
override the existing CSS classes and
attributes with values inherited from
bootstrap so what does that look like
this is the less file the first thing we
do is import a couple bootstrap files
the variables dot less and mix-ins not
less these are some bootstrap values
that we wanted to incorporate in this
particular skin I nested all this in a
in a skin class so only the only
accordion elements that have the CSS
class skin will pick this up
and then you can see here I style if
you've used rich basis you'll recognize
the rich faces CSS classes up there and
so I overrode some particular CSS
attributes using variables pulled from
the bootstrap project so i picked up the
font size font family line height navbar
border and the definition of the color
white from bootstrap so the nice thing
about using this approach is I've now
styled this accordion element to look
like bootstrap and if i go and customize
bootstrap and drop that in my
application i'm going to be picking up
those changes in this style as well
right if I just done this with static
CSS values then I wouldn't be picking up
those changes as I modify bootstrap some
additional changes are to apply a border
radius using the border radius mixin
setting the the link color and some
other values so let's take a look at
this in action this is a
this is the less file here so I can go
and define say a new variable I don't
like this skin I need to use my my
corporate red color which is going to be
say DD 1122 right and I want my header
element to pick up that red color right
so I'll say put it at the end background
we're going to pick up that corporate
red I click Save and the less JS file is
looking for changes and it's not going
to let me down it's going to pick it up
no what happened
mm okay supposed to pick it up right
away so that that red it's not quite
nice we want to darken it a bit so we
can use the Darkin mixin oh sorry
function we want to darken that
corporate ed by say twenty percent save
that there we go i picked it up that
time but now we can't read the font
color so let's pick up the definition of
white from bootstrap right so the neat
thing about using white is if later we
decide that white is it's too bright we
want to use a gray will change that in
our central variables dot less file and
everywhere we reference thus the less
variable white is going to pick up the
adjusted White play with this a little
bit further let's override one of the
bootstrap variables that we imported
let's take the base border radius and
let's set that to say 15 pixels right so
you can see we rounded the corners
further on our little accordion element
let's take the base font size here and
let's add twenty percent to it right we
can't read it anymore we have to adjust
the line height let's also add twenty
percent there so you can see in working
with less and able to do these
operations directly within the skin file
can be quite quite liberating as you're
trying to fiddle with development of the
skin can I see a show of hands how many
people have a designer that they work
with that takes care of the styling of
their applications also you do yeah so
it doesn't necessarily apply to you
quite so much but a lot of us do our own
styling and it's quite nice to have a
framework like that has to work in
alright moving on so that takes care of
the look right that according example is
actually good segue into the next piece
that I want to talk about which is the
behavior we are able to give that
accordion element or so the accordion
widget from the ridge raises project a
nice bootstrap look but it's still the
javascript implementation and that
particular component is tied to the JSF
back end so if I want to have an
accordion component in my quit page I'm
not gonna be able to use that same
JavaScript so my widget is invariably
going to have a different behavior so we
want to be able to provide a consistent
behavior for our widgets between our
pages jsf is particularly vulnerable to
this there's a number of component
implementations for jsf and they each
provide their own JavaScript
implementations that are integrated with
their their own back-end so there's
there's no interrupt quit similarly
falls into this category there's a whole
lot set of wit components that you can
use a lot of them are implemented in
with wit some of them take to take
advantage of third-party libraries which
is the approach that we're that I'm
advocating here today but a number of
them are just using built-in quit
definitions to define the JavaScript
that the user interacts with and
similarly html5 applications there's a
whole set of widgets available there but
herein is the difference these HTML
widget sets as i call them they're just
stand alone javascript widgets that you
can use with any HTML this is our lowest
common denominator right what is a quit
application or a rich faces jsf
application delivering to anyone other
than HTML and javascript so if we get in
these standalone JavaScript widgets and
with our other web frameworks and we can
use them in our html5 JavaScript
applications then we're going to be able
to achieve a consistent behavior there
we go so the one I'm going to just hope
you picked on bootstrap i'm going to
pick on jquery UI today so jQuery UI
gives us a lot of widgets alright jquery
UI gives us an accordion widget we can
see already just clicking around with
this a behave quite a bit differently
than the rich races aquarium you can see
there's a transition as it changes
there's a gap between you accordion
elements that you don't see in the rich
faces accordion so there's there's a
different behavior in the widget just
from the different of implantation
jquery UI gives us tab components gives
us pop-ups gives us dialogues lots of
great stuff comes from jQuery UI
datepicker progress bar but it doesn't
give us a lot there's actually a limited
set of widgets available in jQuery UI so
to address that in the rich faces
project we've started the rich basis
widgets project so this is something
we're developing alongside our rich
faces five effort for lack of a better
word it's the set of stand-alone
JavaScript widgets that are rich base is
5 jsf components will use so these are
going to be using jQuery UI where avella
available and then we'll be composing
new widgets where we have requirements
to fill we want to be able to provide
enterprise set of widgets for developing
rich enterprise like active locations so
it's part of the rich raises project but
its framework independent these are
standalone JavaScript widgets they are
going to be using the jQuery UI widget
factory and styled with bootstrap
the neat thing about this standalone
javascript widget approach is how we can
couple them into the web framework right
so if we take a widget and we enrich it
with a lot of events so every time the
state of the widget changes or the user
interacts with the widget an event is
fired then we can easily bridge that
widget into any back-end framework by
listening to those events in fact this
has great ramifications on the
testability of the component that you
build for the framework because you can
test the widget in isolation in any
browser any version of a browser and and
make sure the widget works without any
requirement of having a backend present
and then when you put it in a back-end
all you have to verify is that you you
respond to the events properly so this
is decoupling of the client-side
behavior from the web framework is going
to give us a much more easily testable
and extensible component set so here's
an example it's the pick list component
we saw from the demo at the beginning I
wired in a listener to this pic to the
pick list widget you can see every time
the value on the right changes I've got
this little listener that just depends a
list element at the bottom and says hey
the value of the pick list widget has
changed right so I take London from the
left drag it to the right and we see
that the selected elements have changed
we respond to that event I can take one
element and reorder it and we respond to
that event so you can imagine in the
bridge code where we integrate this with
a framework all we have to do is listen
for that event and then we can trigger
whatever Ajax call we need to initiate
into our framework back-end to make that
work as if it was a native component
so let's move now to server-side
concerns we talked a lot about having a
consistent look and feel and behavior
for the user on the client side and on
the server side we want to talk about
having shared state between the web
frameworks and then we're going to talk
about a bonus that we get with CDI we
getting a consistent programming model
yes CDI is the solution so CDI stands
for context and dependency injection is
everyone familiar with CDI because he
show hands who's aware of CDI so CDI is
part of the Java EE standard it gives us
dependency injection and the Java EE
framework so what is dependency
injection is we want to retrieve a
contextual instance of a bean so here we
have this class called capitals observer
and we want to inject capitals bean so
we use the app inject annotation and
then all we have to do is put that at
inject annotation there and the
container will be responsible for
providing us the correct instance of
that capitals beam it will achieve it
from the right scope associated with the
right user it will take care of that
magic for us so the sea and CDI stands
for context context are related to the
scopes so the scope of a beam is is
pretty intuitive it's the life cycle of
a beam right so it determines when a
beam is instantiated and when it's
terminated and then the scope maps an
instance of a beam to a particular
client to a particular user so the
context then is just the implementation
of the scope so this is CDI it's the
context and dependency injection a lot
of scopes that we see that we're
familiar with our session scoped request
scope dependent scope application scopes
another
useful one conversation scope these are
available with CDI out of the box and
then CDI can integrate through CDI
extensions with any web framework and a
number of web frameworks provide their
own scopes so in jsf 2.2 we have the
flow scope and the view scope for
instance another yes so yes an example
what did I not have an example here yes
okay so an example of a beam that's been
annotated with the session scope you can
see that we have than access to the life
cycle of the beam using additional in it
annotations so here with the at post
construct annotation that allows us to
call some code after the container has
initialized our being and resolved all
dependency injection in the beam so we
can initialize the state of our beam
another piece of CDI that I find is
really useful and is often overlooked is
the event mechanism it should be called
CDI II we need an e in there for events
it's a really powerful eventing
mechanism that is going to allow us to
integrate the back end on the back end
our different web frameworks the
different beans and classes of our web
frameworks with a common eventing
mechanism so here I take my capitals
bean and I inject this server event
object it's an event object it can be
any pojo it doesn't have to be of type
event oh wait I got that backwards
yes thank you CDI expert in the back row
so we inject this this event class and
we use this to fire events so here on
this bottom line here we see server
event we're going to fire a new event
the event that we fire can just be a
pojo is no requirements on what that
class is so here we're firing a capital
selected event and then so you can see
firing an event is as simple as
injecting the object that fires the
event and similarly observing the event
is as simple as using the app observes
annotation so here we have two methods
where the parameters of the method are
annotated with at observes and we're
observing the capital's selected event
we have an additional qualifier on these
observers so that we can distinguish
between events that are fired on the
client around the server will see why we
do that when we get into looking at the
arai code near the end of the talk
so you can see with with CDI with the
context in dependency injection that can
be resolved in the backing beans of our
jsf application can be resolved in the
the java objects we use in our I
application and they can be injected
into the restful endpoints of our html5
JavaScript application that we've
achieved shared state between all these
web frameworks another piece we saw in
the demo was the different web
frameworks responding asynchronously the
changes and another web framework so
when I changed the value in the JSF page
we saw the awry and JavaScript page
update so the tools we use to use that
our richfaces push there's a push
element that you can use in richfaces
and your jsf pays to achieve that RI has
that built in with the Rye RPC and then
for the html5 JavaScript approach we use
the atmosphere framework so it's kind of
hard to talk about those in a slide so
let's jump into some code where's my IDE
okay so this is the oh can you guys see
that is that too dark okay that's better
you can see that so here we have the
easy project for the demo we saw at the
beginning we start with the with the web
resources we look at the JSF page which
faces bootstrap so this uses the rich
basis bootstrap project to define all
the bootstrap elements in the page and
here we see the call to the pick list
component where we instantiate it with
the value so it's pretty standard jsf
but it uses the rich basis bootstrap
sandbox project to achieve the the
bootstrap skin so just to remind
everyone where we
r
I don't know sorry polyglot holy widgets
okay so we're looking at the source code
behind this page here so here we see the
JSF definition of the tag that gives us
the pick list component it's very jsf
like right I mean we're using a
standalone javascript widget but from
the JSF developer's perspective they
have no idea they just right there jsf
tag they don't care how the behavior is
implemented in the browser similarly we
can look at the whip page it's just an
HTML page and we just define a marker
where we want to put the pick list
component and then we're actually going
to populate that pick list component
from Java code other than that is just
plain html5 taking advantage of the
bootstrap classes to give us notice the
ero and span grid elements that we spoke
about earlier and finally let's look at
the html5 bootstrap page it looks html5
the trap page it looks a lot like the a
ripe age it's just vanilla HTML and then
we have a marker here where we want to
put the pick list element and that's
going to be populated by a JavaScript so
let's look at the back end how does this
have to look for all this to work
together so the package structure you'll
notice has this client and server
package structure this is mandated by
the arai project arise really neat if
you haven't looked at it I recommend you
take a look at it arai takes the CDI
environment from the server and brings
it to the browser right so when you
write your jörg wit application with
the Rye you write everything in Java
you're right your client code in Java
and the CDI is the programming model
right so in the browser and your code
that's going to get rendered in
browser code you fire a CDI event that
CD I event is going to get fired in the
browser propagated through awry RPC to
the server and you can listen to that CD
I event on the server it's it's really
neat but it needs to know which java
classes it needs to compile into
JavaScript and it does that with this
naming convention on the package
structure so everything that's in the
client package is going to get compiled
using the grit oops is going to get
compiled using the grit compiler into
JavaScript in HTML everything that's in
the server package is going to stay in
the server package so let's look at that
at what we have in here our capitals
bean is annotated as session scoped
right so we're going to have a single
instance of the Capitals beam that is
going to be used by jsf it's going to be
used by awry and is going to be used by
the restful endpoint so everyone who
connects to this application is going to
get associated with with that particular
user a single instance of this beam the
capital's observer class we saw a code
snippet earlier in the presentation this
is going to respond to the events from
the application so we see in this first
observed capital selection client event
we're using the client qualifier to
observe capital selected events that are
initiated with the Rye in the browser so
using the or I using the wit compiler
we're going to look at the wit code that
fires that event and then we can respond
to it on the server side and what are we
going to do when that happens on the
client we're going to update the server
side being with the value from that
event when the server side value is
updated we're going to fire an event
that the Capitals have been selected and
this is going to trigger that server
sent event that goes back to the other
browsers and triggers for them to update
so a bit of a complicated back and forth
as the different clients need to
propagate their information of the
server we use CD I as a single mechanism
to collect all those events and then
propagate the changes back to the other
clients so here's our rest class this is
the class I've holds our restful
endpoints you see that the restful or
the class that provides our restful
endpoints is we inject the capital's
being into it so it's tied to the
session of the user other than that it's
pretty standard restful endpoints we
define the get and post endpoints that
are called by the aero gear pipeline so
yeah we missed that let's jump back to
that let's look at the aero gear
pipeline so aero gear is a project at
jboss that is looking at taking all
these new javascript HTML applications
built with node or angular or knock out
whatever framework you want to build to
build your client application you can
bring in aero gear as a way of
integrating with the jboss back-end
right so here we see a javascript class
that when we instantiate or we
initialize this class up to i'm going to
mix my metaphors here but when we
instantiate this javascript object we
first thing we do is we're going to
fetch the capital's to do that we use
the aero gear pipeline that is going to
be mapped to a particular restful
endpoint right so this here this
capitals pipe is the air gear pipeline
it reads from the restful endpoint and
we can use that to populate the pick
list value using the net pick list
method it looks for that that pick list
ID tag that we had marked in our html5
page and
initializes the pick list but the values
retrieved from that rest call so this is
why probably not done in an optimal way
but when you load the html5 aero gear
page you see that delay until the data
shows up that's while the rest call is
going on and evaluating the return
payload so that's what the Capitals rest
values for but it's it's interesting for
this presentation because we see that
see Dei is involved in there right we're
using the same instance of capitals
being that we're going to be using in
our JSF page right capitals bean has the
at named annotation on it so that when
we reference rate from the JSF page
we're using that same instance from CDI
so if we look quickly at the twit code
so this is the the capital object that
represents the capital that we're
selecting and moving around in this this
in this application it's in the client
cloud package so that means the quick
compiler is actually going to compile
this down into a JavaScript object and
if you inspect the JavaScript code
that's flying around in the browser
while you're running the I application
you'll see this capital a JavaScript
version of this capital class that we
have on the server those it qualifiers
so the pick list app itself we define
the arai application class if you will
is defined with the at entry point
annotation this is kind of like the
static whether the public static void
main that you have when you write a java
application you have to identify the
class that is used to start the
application and that's the entry point
annotation from awry so when it
initializes it similarly fetches a list
of capitals and then initializes the
pick list component
it initializes this RPC call on the
client to connect with the backend and
retrieve using awry RPC the list of
capitals so similarly when we load the
glitter I page we see also a slight
delay before the data shows up that's
the quit RPC call sorry the RI RPC call
evaluating so we're gonna go and then
finally the last one we'll look at is
pick list widget this is could probably
be done a lot more concisely actually I
know what can be done a lot more
concisely I when I develop the pick list
javascript widget I targeted richfaces
and I provided the widget API everything
that I knew I needed to get it to work
with rich faces and getting it to
integrate with wit and with the aero
gear back end I realized that I could
provide a more rich API on the widget to
make it easier to integrate with other
applications so it's it's the n plus one
problem as soon as you saw but for more
than one you solved it for many but
anyway so there's a whole bunch of glue
code that has to exist in here to
populate that Dom structure in the
you're using the quick compiler to to
create that pic list component and can
we see the CDI event in here and the
pick list at maybe so you notice in this
pic list app class the arai base class
we inject to this event object and then
we fire an event here we go event fire
so this submit button gets bound to the
button on the on the page and we click
that button it's going to fire a CDI
event so this is to me the neat thing
about awry this is client code right
this is a submit click handler for an
HTML button but it's server-side CDI
code how does
that work it's just magic right we fire
a CD I event when we click a button and
the client and we can observe that CD I
event on the server quit our I RPC
propagates that back and forth for us so
I probably over emphasize that point but
I think it's pretty magic and that's
that's it that brings us to the end of
the presentation so here's the Creative
Commons license on my presentation I use
the number of images with a Creative
Commons license on them so here's the
links for further reading I base this
presentation on a blog i wrote at the
end of last year you can check that out
the source code for all this is
available on github and if you want to
look closer at the ridge faces widgets
project if that's something you want to
get involved in we're just starting out
with that now stay in the loop here's
our here's the coordinates you can get
ahold of us mom my slides will be
available on my website even gotten to
be a slap
sup guys like every mind</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>