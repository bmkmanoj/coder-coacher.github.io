<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Tutorial: Android Application Development - Application Object | Coder Coacher - Coaching Coders</title><meta content="Tutorial: Android Application Development - Application Object - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/InfoQ/">InfoQ</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Tutorial: Android Application Development - Application Object</b></h2><h5 class="post__date">2011-02-14</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/jd_V7a6xhQc" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">okay so let's go let's let's review what
we did then yesterday so what we were
doing is we were still working on this
screen right and the idea was that this
this screen just to kind of put it in a
big picture where's our big picture the
idea was the disk reads this screen it
was gonna take user input and make a web
call web service call and update the the
cloud right and we said one of the
problems is that this may take a while
to execute right because it is a network
call it's subject to all the network
latency all that kind of stuff
so we said you know what we should do is
we should put it on a separate thread
alright so one way to do it is just to
use a standard Java threading and
remember when I said you know what's the
difference between Android Java and
standard Java I said you know for the
most part it's the same other than you I
set of libraries and some additional
stuff is new so the way you do threading
in Android is the same way you do
threading in Java however the problem
was that one thread updating other
threads UI right and the problem with
that you know yeah synchronization you
can you can do it yourself but you would
just have to you know wait on one thread
and notified the other you would have to
implement that back and forth yourself
so instead of doing that alternative way
was to use something called an async
task and so an async task was basically
a separate class so you were asking
about generics so this is sort of the
Java generics it's not a very typically
way of using it but it is what it is so
this is basically saying we're making it
an async task of string string string
okay what does that mean so that means
that we have three basically three main
components to an async task there's do
something in a background and this first
string means what would that what we're
gonna give it to do in a background is
gonna be a string you know you could
have given it like my other example is
like we do some do an example with the
Fibonacci sequence so the job in that
case is a number to feel Bonacci of 33
right that's the number in this case
it's do opposed to Twitter of status so
it's piece of text right so the
background the long-running job goes
into here okay so this is the job that
needs to be done whatever the result of
that job is is the result which in this
case it's a string right so that that's
what we're returning which refers to the
third parameter here okay so you're just
gonna the way you know it today is by
looking in the documentation yep yes so
so in this case the third parameter is
what's gonna go into as the input so the
output of the output of the job so this
is the background job right when bagger
the output of that job becomes the input
of on post execute so that's kind of so
this basically happens on a separate
thread when it's done gives us the
result and then we do something with
that result and in this case we update
the UI this was updating the UI
essentially right yes yes so that's the
part of the yeah that's by subclassing
async class you must implement those
methods just like me know by sub
classing activity you have to do this by
sub classing service you have to do that
you notice that is a pretty common
approach to programming in android right
so you subclass something and then you
override the default behavior and again
you know the source the documentation
was was basically to look at here and
you would just type a sink and there's
async tasks and I usually use this as a
reference like here's an example how to
do a background download for instance so
if you don't remember don't
try to memorize this but just kind of
like okay let's go it's done and those
generic x types that it's asking you
that's what it is so primes progress
result that's what those three things is
that in our case was simply yeah we just
made it that maybe I don't know what
yeah we could have made something else
for progress so for example I might have
had a percentage for progress but then I
would make this in future and I would
then implement that method for progress
and the quickest way to implement method
would be to go source override implement
methods and see it knows what's
available so there's the pawn progress
update and it knows that it's an integer
and basically just BAM
just drops it in for you and then you
could do something you know update
percent percentage right and there is a
there is a progress bar and yeah so but
it really depends on a usage like in
this case it's not like a file download
where I know it's you know 10 Meg's and
I know we're 50% done right the problem
with this particularly case is that I
don't really know I don't really have
information about the progress so if
you're sitting on the network waiting
waiting waiting you know short of
actually examining the tcp/ip stack and
saying okay we have a can shake okay we
have you know open stock yet we have
this we can't that right so that's why
in this example wasn't really conducive
to using the progress bar yeah so let me
so it's it's it's a great question and
to answer this question let me introduce
you to another tool you guys should be
aware of so as part of and each platform
you get sample code okay the sample code
you might not have
if you haven't then you would go into
available packages and repository right
and then you would find something to do
with samples so if you kept android
eight you would download android eight
samples right I so remember this tool
this is the Android tool you can double
click on Android in your tools directory
or you can click on the little little
guy here right right
so whichever way prefers if I click on
this guy here that's how we created a
VDS right you know that okay so if I
click on now it's see I already have in
samples for version eight installed
right so once you install the samples
what you would do is you would go file
new Android project okay you guys can do
this so if you want so family under the
project and now what you need to do is
you say create projects from existing
samples okay but you get a pic with a
target and then it it's got the list of
all various samples that you can pick a
project from right so just use the API
demos and click finish
I already have it so that's why it's not
allowing me to do it again but go ahead
if you guys get samples installed if
it's installed it should show up in
install package if it's not then it's
shows in the available packages so it's
called it's gonna be called install back
samples for SDK API something so for
example yes it's different than
documentation yes yes so documentation
will just and what this does is
basically here's what happens behind the
scenes in your SDK samples creates
samples folder where as documentation
creates documentation folder right and
documentation folder is essentially just
the offline version of this website did
dendritic all right so you have all the
references and stuff online I you know
that doesn't make sense if you're not on
slow connection or something but there's
no reason why not to use just directly
the website as well if you have Internet
yeah yeah I'll point out how to use yeah
that's what we were just talking about
async tasks how you would kind of like
use this as an example yeah yeah if it
doesn't show in available it should show
it should show in available packages if
it doesn't then you you you're not
talking to the right depository or
something click on refresh and to see
wine why it's not but should be showing
in the available packages otherwise
there's a network issue do you see it
now okay okay so once you guys can
samples right you gotta have samples and
that equates to having a samples
directory here right once you have that
directory that there's that's all the
samples right just post it down down
with all that code reasonably quick I
believe then you can add samples by
doing file new Android project selecting
the target right and then saying create
project from existing samples and then
adding the API downs right so once you
do that you click on finish and you
should have API demos as a demo okay I
believe a pre-installed it on a virtual
machine so if anybody's doing virtual
machine approach I think already had it
installed so either way you click on run
and it runs that sample or sample
application on your emulator you know
it's so
as it starts I'll explain why it's
useful okay so this is a sample
application right so what this is is
basically a a you know the kitchen sink
of various API things that are available
to you as an Android application
developer okay
so here's why it's useful this
corresponds to to the actual Java
packages so DuckTales into your question
about documentation right so if you
wanted to know for example there is
views like you were asking earlier about
progress bar well I would think this car
would think I would be like huh what's
available in terms of progress bars
right is there zillion in one widget and
we're not gonna cover zillion in one
widget and it's not our goal to cover
the land in one widget but our goal is
to explain to you how you would go about
figuring it out yeah so you would be
like a widget to which widget is a view
right everything is a view okay so let's
look under views okay and then you'll be
like oh look there's stuff on animation
and off to complete and button some
economic controls custom date widget
expandable list focus gallery grid image
view layouts list progress ah look
progress bars BAM okay so let's see oh
there's incremental progress bar smooth
dialogues in title bar hmm okay let's
see incremental okay so this one okay
this one works like that there's a
primary and secondary okay that's gonna
cool all right so maybe not what I want
but let me see what else is available
oh this one is this is the smooth hair
of a smooth one okay that one just keep
spinning maybe that's the one that we
want in this case write dialogue so this
one okay so please wait while loading
okay cool let's neat and then show in
the progress bar please wait while
loading right that's kind of cool too
right and then in title bar there's
toggle and then there's this one right
so
pretty good so like if I wanted to now
figure out how to use one of these right
and this is this is the same for all
Zeeland and one widget so what I would
do is I would figure out okay let's look
at the source but what would we look
there are two components to look right
well there's the D XML right and then
there's the Java so let's start with the
XML and you know I mean don't don't get
you know confronted with zillion one
option we're looking for a layout right
that's you know so I would look for a
layout and see the naming they named it
properly so it's something to do with a
progress bar progress bar let's see what
we find progress bar one two three four
that probably roughly corresponds to one
two three four okay so let's say we were
for example interested in let's say
dialogues this one right so let's say
that's that's a progress bar tree so
look at that to see how they did it cuz
I never used it they have no idea right
so okay so this is the bottom let's see
what's in the source code okay there's
just a button to just start something so
that's a button there's really not
telling me much okay I kind of heated
that dead under this let's look at the
Java now so it's going to source and
then let's see how the packages are
organized okay so this is roughly
corresponding to the stuff we saw the
first level right so there's a views
okay and let's see if there's something
to do seems like they're named properly
so let's see if there's something named
aha progress bar one two three four okay
so we were looking at three so let's see
okay okay so this is how they do it they
cannot progress dialog and then they
have on bottom say this is show dialog
right and then on create dialogue they
do something with a dialog and then
that's it okay hmm
okay so if I wanted to now like I've
never used this one before but let's see
can we now copy this idea so so so they
use an equal proper so it looks like
they use an equal progress dialogue
right they then on a button say show
dialog where should I come from social
dialogue is part of the activity so it's
a built-in method right okay and you
just give it a dialog key and the dialog
key looks like it's just some kind of ID
it's made up ID you can do 999 is a good
number it doesn't really matter and then
and then on that on create dialogue is
called let's see how does this work
so on create dialogue is called isn't
one of those methods that you implement
looks like sort of on create options
menu right it's probably one of those
part callbacks all right so let's let's
think about this if we want it in ours
yes so that so we find the button yeah
find the button and on click we say this
isn't you see this is an anonymous inner
class right like yeah yeah exactly so so
here's what I would do in ours in our
case so BAM I would go to start how to
say progress dialog and I would say
posting dialog something like that right
organized imports to import progress
dialog okay and so now I seems like I
need that integer said that that the
constants of process private is a static
final int dialogue ID and just come up
with two number 47 it doesn't really
matter right so okay so let's see what
else they did so they did that
so that's static ID that's the dialogue
and then we just need to at some point
say show dialogue for that ID okay
if I go here when do I want to show the
dialogue I want to show it when we start
our job right so let's see okay yeah we
can we can do it right here I can say I
can control space show dialog and then
the ID is gonna be the dialogue that we
have what was my ID
it was dialogue 47 right I made up some
number right okay so that's a show dog
and and then at some point you also want
to do stop or like that's probably
opposite of show dialogue and I have no
idea what it is right but so but when do
we want to execute it what we would want
to execute it after we're done updating
the UI so that we'll be in on
onpostexecute right so I would say
control space and then let's see what's
available to us that's opposite of show
dismiss dialogue how about that that
looks dismiss the dollar bill shown were
shut out damn sure I can do it before
the toast so to answer your question
about the documentation in the past
about you use the website for the
documentation more but if you're using
Eclipse you know just the fact that you
can do control space and then kind of
like look to the list
it's it tends to be quicker to find
stuff but that just DuckTales to the
same documentation that's available in
you know in here DDOT Android comm right
so I could have alternatively gone into
activity because all that stuff is part
of the activity and then look you know
control apps and search for show dialog
and there it is and you know kind of
found it this way right that would be an
alternative but the clips kind of brings
this you know couple of keystrokes
closer okay so you want to do this
before fine and it looks like the only
other thing that's missing is this
method oncreate
because that's how it DuckTales into
that I deem right so we need to create
this method now I could copy-paste it
through this example or I can go in here
and say okay we need this method for
dialogue stuff so where's my menu stuff
button stuff I'll put up with something
here and it says dial dialogue stuff and
so what I could do is I could do source
override implement methods and then find
something to do with on create dialogue
BAM there it is right so I could do it
like this okay except on that stuff damn
right and so it gets an ID and let's see
what are we supposed to return it
doesn't really tell me here so I'm gonna
refer to this so we're supposed to
return dialogue okay
so what we do is in progress dialogue
you know the new dialogue this sad title
I mean I could copy paste this if I'm on
it or I can even you know copy paste
something like this at this point
damn and then so we're not gonna return
this so we're gonna switch on the ID so
if the ID is that ID that we have which
is a dialogue ID right 47 so in case
it's that ID then we're gonna create a
new dialogue for this context create
some kind of title right posting to
Twitter right please wait while posting
right true cancelable true return dialog
and then think I need one more of these
and then I reformat it so everything
looks nice and that's it and
alternatively if nothing else happens to
return no meaning
we have some other dialogue that needs
to be created so um so that's that's
that
so I would also at this point I would
actually look at a little bit of a
documentation for the dialogue because
for example I don't like that this is
hard-coded in in English here right so I
mean we could do yesterday we talked
about how you could do get string
resources and blah blah but let's see
maybe dialog is already aware of
resources because sometimes some I have
some API actually knows of a resource
IDs so it's much easier like toast dead
right so it's easier to work with so at
this point that would be okay progress
dialog okay let's see progress dialog
oops wrong search box dialog there and
let's see dialog showing progress blah
blah blah
oh look you can pass it a theme okay and
so the it's a title message so set title
let's see set and set message so we're
not seeing set title and set message why
is that hmm
no it's probably comes from some of
their somewhere else up in the chain
right so this shows you only progress
dialog but doesn't show you everything
that's inherited from so for example
there's something called the Lord dialog
right solar dialog has has set message
and set title right for instance and it
seems like it's only a character so in
this case it's not aware of dir integer
IDs so you know you could you could deal
with that but for now let me just test
if this is working and see what happens
so the sting dialogue if I click on
update so posting to Twitter please wait
updated them it's exactly what we wanted
right so so so yeah so that's basically
an example of how that work and we use
the one with that so I call it so
basically the point was I use the API
demos as the kitchen sink of all Zeeland
in one widget that you may want to
experiment with and then I'll knowing
that that would it is implemented by two
things XML and Java you'll quickly look
up XML and Java and basically you copied
from from that right so for example I
didn't really see I wanted one with the
other title actually so because that's a
little cleaner so what I'm gonna do is
I'm gonna change this to four message
I'm going to just you know I'm just
gonna use the message okay cuz that's
how that the other one worked right and
and now I could actually define that to
be a proper I could define the message
in in a string right and I sort of have
to do it manually but it's a good little
repetition so just like we did here
there was another message so just
quickly I can do it like this if you got
what what wants a click new string and I
would say msg please wait while posting
and I'll say please wait while posting
to posting try something like that save
it and now back to my status activity as
opposed to doing this oh it's a cat oops
draw space
this dot gets strength uh-huh
so I'm inside of dialog that's why this
doesn't work right so I would need to go
up outside to the previous class status
terrific that's correct dot get dot just
get string and then research with the r
dot string dot someone of this message
please wait while loading and then you
do ctrl shift F to reformat it and there
you go so it's kind of proper yeah you
would have to turn convert you would
have to use get string to cut string
that this part of activity basically
converts a ID so you give it ID which is
an integer and gives you back the string
the localized string so you know it is a
little bit of extra work it's it's in
its it's the proper way of doing but
sometimes you know some people like like
they just don't care about that they
just want quick and dirty this is that
so you know making it work in multiple
languages is a tiny bit of extra work
but that's sort of the cost of having
wider audience so it's not that bad so
I'm you know I my job is to gonna show
you stuff to do prop or super properly
right I'm gonna get yelled at if I wish
to to in short cuts like that so
can you use other frameworks like spring
so spring would not be applicable in
this case I mean you can use every Java
framework if the spring is really
designed to implement MBC pattern and so
forth and so forth so you know the
answer is yes but in a particularly
spring would not be that that applicable
maybe parts of spring because all you
can also you don't have to use the whole
thing with spring however I think that I
think there's gonna be a need for more
frameworks like higher-level frameworks
there are certain things that are too in
my mind annoying in Java in Android
because we have to do manual binding
from like UI all the way to the database
and it ends up just being a lot of
repetitive typing and I think there's a
there's an opportunity to make make you
make may reward you for being consistent
you know because a lot of frameworks are
liked by convention so if you stick to
certain naming convention you get
rewarded because things get
automatically done for you so I think
there's an opportunity for very much
like that but at the same time it's
we're not quite there yet you know it
took us with Java what like seven years
to get the frameworks like struts first
and in spring and so on so it's coming
right but it's a good observation
if you lots of yeah if you lots of such
frameworks it is memory intensive that's
that's a possible concern yeah um you
know for example for example when it
comes to mobile stuff like you may want
to use a different database right we're
gonna talk about databases I think today
hmm well so for example one database
that ships with and reduce the sequel I
database which is a sequel database but
you may be like you know what sequel is
dead like I don't like sequel right so
old-school right so you may want to use
something newer like Java DB or Mongo
which are the modern sort of equivalents
right and in that case you would use
another framework in another set of
libraries and so forth a friend of mine
actually develops a it has a company
around creating a MongoDB based set of
framework that would be ideal for
Android because you just as you just say
object save yourself and you don't care
if it's saved locally on the phone or
magically went online to dub Amazon you
know cloud and saved itself maybe it's
doing both but it's doing it
intelligently so so that kind of stuff
is really cool
Mangala well it's based on MongoDB but
it's companies number labs yeah he
actually there's a talk that he did on
this on mark on TV at this point you so
he presented so this is him so learn how
to build mobile backend with MongoDB so
this part 1 and part 2 so this 2 so that
you know if you want to learn more about
that and I think it's free I think you
go to a monk or labs so that's a
cloud-based you know this and so the way
it works is you create a database online
so this is my timeline database for
example right you create your database
online and then you can set the
libraries and you can just bang plug it
into you know so it becomes just a URL
based so that's how I log in to Mongo
you know then I can then use you can't
see it very well but you know it becomes
sort of save yourself read yourself in
it's based on the cloud so it's a cloud
powered database it's kind of cool
cool concept so mongolab cool so that's
that's a there's just a little bit of a
new stuff on dialogue but it's very
similar if in a way to too many
so just to kind of review what you did
yesterday other than the async task
which we just did what we did is we
define menu so we wanted to basically be
able to click on this little thing here
and have this thing pop up here in the
menu right and to do that what we did is
we said we looked at how it's done and
basically it boiled down to a couple
things we get to define the menu first
right so menu XML which is pretty
straightforward it was basically you
know just like any XML file you start by
clicking on that button or saying file
new and with XML file right we've done
it many times so far so you clicked on
that you got the little you know the
little thing popped up and you said menu
and you typed in menu XML and keep that
a hit enter right and you got this file
and we added one item and so so many of
consists of menu items right each button
is gonna be an item right and I said yes
there's iliyan things you can configure
but in reality what you care about is
the ID right some kind of title because
we got to know where the text we're
clicking on right in some kind of icon
now icon in title where optional right
like you don't have to have an icon but
it's highly recommended it just gonna be
a box yeah and then you're gonna be like
okay I have a button which says nothing
on it so left button is this right
button is that you don't kind of don't
know right but you would need to know ID
so that you can say hey was left clicked
oh right was clicked right so once we
get that we in one reason why tossed in
the icon was because I wanted to show
you hey you know there's system
resources it's not just your pictures
that you googled it's there's also a way
to get pictures from the system right so
that's what we that's what we that's
what we did i i conce and once you
define this XML file which ultimately it
looks like this right there's just a
piece of XML we need
inflated XML is always useless by itself
right there's always a process of
converting the tax ml into Java
ultimately its Java right we're all
grunting Java with XML so ultimately
something needs to parse this and do
something with it
so what we did instead this activity is
we said we created a method that said on
create options menu it's just somebody
came up with that method it's kind of
like written in stone right it's a novel
right metal and then we got a man
inflator and we inflated from that
resource into the menu object so
ultimately this got quote unquote
returned it didn't get returned but it's
variants right and then when the menu
item gets clicked when any item gets
clicked you get information about that
item so first we ask ourselves well
what's the idea of that item then based
on that ID we do something right and
that's something that we did was to
start an activity so to start an
activity you say start an activity for
an intent ok so this is the first
introduction to sort of we talked it you
know about intents theoretically but
this is the first time we kind of look
at intense more in a you know in a real
sort of scenario so this guy written
your intent right one of the ways
there's gonna be another way which we're
gonna see later on but then what do you
do with an intent so in 10 just says oh
I have any tenth but then you gather
somehow send it and they're only a
handful of ways you can send an intent
you can say start activity start stop
service broadcast and intent this couple
that's about four or five things ways
you can do it so this is one of the
simplest most commonly use probably ways
start an activity so that signals to to
the system that you would like to have
an activity started and at some point
system is going to start with activity
and then that's that's what a system
sort of decides remember we talked about
the lifecycle of an activity
this is sort of what the system decides
okay somebody wants an activity started
but maybe it's already running maybe
it's already stopped so if it's that
that if that's the case then it's going
to come this way if this is the case
never been run before it's gonna come
this way so that's why it's up to the
system then to figure out fastest way to
get it up on the screen yeah yeah
exactly so that's and that's basically
how that works
yeah there's there's there are some call
bugs that get called when the back
button is actually pressed so yeah there
is some a couple some things you can do
is what so they're well I mean this one
is protected do you guys care the
difference between protected and and in
terms of visibility in job public means
everyone can call it you know and
protected means only the subclasses and
so on but in this case it it doesn't
really matter
protected is just as fine so yeah we
could make it public as well it doesn't
it's not gonna change anything so cool
so that's what we that's what we left it
off yesterday
so are you alright so each activity is
gonna have its own many options - so see
this is the one for this activity if I
go to the home screen it's gonna be a
different implementation of the table
tonight just nothing just nothing
happens right that's what that was
that's what we had earlier
so let's go let's for example see well
you just you need to not necessarily you
need to go into settings application if
you already have it running I could for
example the long press this and then go
to settings directly but there's a
settings application you need to somehow
start it you can think of it as a
right-click on Windows or Mac right like
so just in certain contexts that means
certain things like so for example if I
go if I go to so see in status activity
I have preference menu but if I go now
to preferences and I click on menu
another because you then implement it
which is fine because I don't expect
user to go from here it's kind of like
user typically expects to key the back
button yeah which is a great question
actually because we were just about to
talk about that stuff so where you guys
so yeah so we do have look if I go menu
and preferences and I look at my user
name it's stored I did this yesterday
Wow memorize even if I shut it down and
we started it's gonna be stored so where
is this data you tell me what do you
think this data is so SD card okay I'm
sorry
okay user data yeah any other it is I
you said XML so it's actually it's yeah
it's written user data partition in an
XML format all right so so remember just
a refresher yesterday we talked about
the file system and sorry I'll give back
to your question but there is this is
the user data partition we said all the
user data is stored here and we said one
of the most important places was data
data which is a private spot for each
app so each app has its own private data
data folder
and now if I go in there and look
there's Yamba incall Maracana Yamba
right and so if I open it
look there's a folder called shared
prefs so this folder here's that's a
short list there's only like five six
different things you can have so if you
click on it there's my short preferences
yeah
but so I would need to pull it and then
show you or a faster way for me would be
to to adb shell CD data data comm
Maracana Yamba right LS see these shared
prefs LS that's the file Oh everything
is skewed a little bit okay cat star BAM
there's there's my username password
into the text question so we're like
security folks usually free card they're
like whoa timeout you're keeping like
username password like in clear text I'm
like yeah is that a big deal because
keep in mind and this let me do LS -
hell yeah it's owned by its this is
owned by my specific user and group in
other words it's not world readable
right so in reality unless I was a super
user I would not be able to do this so
if I plug in just for fun my my phone
that they said it was just a vanilla
phone okay you know it's just a standard
Android and let's say I found it on the
street and I want it to you know it's
like you know it's gonna : to you you
you you losing your laptop leaving it to
Dennis or something and somebody finds
your laptop and says let's see what's in
what's on it right they can't log in
right but they can poke around the
filesystem they can't call the hard
drive connected to their PC let's do the
equivalent to that so now there's my htc
and there's my faster huh oh it doesn't
show you anything right so I
poke around SD card that's world
readable and I can poke around the
system big deal but data is actually I
can't see anything let me show you
differently so if I do if I open up a
new terminal and I say a DB there's d4
device right shell ok I'm connected to
my phone a lot slash data permission
denied right because because I don't
have root privileges on that device
right so yes yeah so you yes so you can
because the user allowed that on the
phone the user said allow USB debugging
is that remember but it still doesn't
allow you to poke around yeah it doesn't
work that way there's actually no there
there is no user it doesn't have the
same it doesn't have the password file
there isn't a password file there's
actually of a C code that sets up user
IDs it's a totally different way user
user mechanism works well you could you
could get the the D axis root access to
it but that would require you to change
stuff on system image which is read-only
so that's the catch-22 right there but
people do it and they do it by breaking
into the secondary bootloader which can
load the recovery image
so you can basically have a spooky
recovery image then stop the boot have a
system recover from a different image
and then that way you change and that
new image usernames and passwords and
all that stuff so it's been done but
it's not simply like oh I don't know the
password yeah interesting on a regular
device
you cannot poke you do not have
permissions to look at those large data
permission partition yeah because yeah
you can yeah you can do that you can
create a new operating system and put a
flash yes and then on the new operating
system you would have little Primula
prodigious yes that's exactly yes you
can an SD card for the most part is well
visible anyhow so even even simpler I
can just continue to connect the phone
and here's everything you know you can
see my music and you know stuff like
that right so yeah
cool so now that we know what the
username password is stored you can see
that there's just a file here and it
explained text right so you saw that
this battle how do you read this
username faster because that's what we
love to talk yesterday right we said
it's you know for now our username and
password is still hard-coded summer it's
not hard coded summer right so we're
still hard code all this stuff so how do
we you read it from another place yeah
there's actually there's something
called shared preferences okay and when
I saw the name of that it first freaked
me I'm like what do you mean I'm storing
my username and password in some shared
preferences whoa what I want to share
this right this is mine but share
doesn't means you're sharing it to the
world it means you're sharing it within
your application or more specifically
context right so for us that is this
picture
so we're saying shared preferences is
something that we're sharing application
wide right so anyone in this realm can
access it make sense which is it got
what you want
so I could put something like this
shared prefs private preferences crafts
is enemy and then get and then status
David yes you don't have to do this
because we're gonna rip it out get the
let's see get
shared preferences sorry that's not it's
not like that it's uh well let me just
look it up so it's default shared
preference it's one of those like super
long names
yes exactly
yeah so so basically your default :
default
yeah preference margin get default
Cheryl's there that's where it is and
then context when the context is going
to be this or more specifically it's
gonna be it's gonna be status activity
dot this and so so and again I said
don't do this because I'll rip it apart
let me kind of make this bigger so you
can see so organized imports to import
this activity they need to spell it
properly and reformat it like that so
this gives me access to the standard
shared preferences right so you ask
preference manager to get the standard
share preference for this context okay
now if I wanted to get user name and
password I would do something like this
string username would be crafts dot get
string and then it's simply what key are
you looking for and remember we had the
key as username right that was the key
that we stored stuff under okay and then
you can have a default one like in case
that one is not fun
and then string password would be
perhaps dot get string and then the same
key was password that's how we started
and you can kind of see that as well
here this is our key right
key key value key value right oh I know
it's not here because I didn't enter it
right so if I want look check it out so
if I go here and enter it HDPE cone
solder and Android the status dotnet
slash API click OK
and do hear and see what's in there so
cat star look it magically is now saved
the sea collie it does all that for you
right that's that's the nice part about
the support which we have okay so so
this would this would have worked and
now I could do something like
username/password
okay and then and then server and then
for server I would need also figure out
the server and that would be string
server and then same thing crabs don't
get string and then server and then
default value which you can come up with
something or nothing right
well maybe default would be Twitter
right you could say it in by default go
to I think it's I think it's like this
HTTP call slash API dot twitter.com I
think anyway we could do this and this
the reason why I did it
theorem is is it shows you the entire
job all on one page right so you get a
shared preferences and then from within
share preferences you get the values but
you asking get string get string get
string and then you use that to connect
it with it but let's think about this
we're gonna do something like this and
you're gonna have a chance to do this
but I don't like it doing it here the
reason why I don't like doing it here
it's every single time we're getting in
this object every single time we're
recreating connection to Twitter every
single time we're doing a lot of this
stuff and you guys keep asking like
what's a good way to kind of share or
data or exchange exchange data across
various parts right so there is
something like that and I didn't do this
before but because I wasn't aware of it
but now I am so there's a way to kind of
refactor this in such a way that we keep
it more central to our up
so there's actually something called an
application object okay which is an
object that is easily accessible to
every part of your app and if you look
at our picture back to our big picture
yes status activity needs connection to
Twitter but so does the update service
it tossed in its connection to Twitter
so wouldn't it be better to have all
this as opposed to copy-paste it you
know have it all centralized in
someplace that is easily accessible
exactly the entire to the object it is a
single term but it's and it is a
singleton it's gonna in its gonna be
called the application object yeah and
we're gonna get it we're gonna be easily
it's gonna be easily available to us by
saying get application object yes yeah
this is something that's specific to
Android and it's a matter of fact when
you look at the the and there's some
more stuff that we're gonna want to do
in this but when you look at the
manifest file there's actually a way to
specify how this is represented how the
application is represented in Java so if
there is a Java representation for
application we just haven't had the
opportunity to do it but that's where
the name comes from let's see what it
says so you can put a name of a Java
class it goes in there make sense yeah
so in the manifest file we're gonna say
this is gonna be our App epic
implementation so we can put a common
stuff in that thing that's a single term
right yep so we're gonna do this step by
step so I mean so let's do this together
so let's let's go into our package so
it's gonna be a Java class so just like
any other Java class what let me close
this couple things just like any other
job class what you're gonna do is we're
gonna go
and right-click on it and say new class
so we're creating a new class and I'm
gonna call it yum location so it's gonna
be an application object and just like
any other thing that we do in Android
you start by subclassing something from
the system right so extends placation
and then organized imports and that
figures it out right so now this is a
good place to put stuff that we want to
share across multiple parts of our
system right so what I've done so far is
a created a new class right so I want to
create a new class to represent an
application so just like we did with
preference activity status activity
whenever you create a new class you
right click on your package and you go
new class right and that just brings up
the little dialog and you just give it a
name and I called mine Yamba application
and hit enter right and that gives you a
blank that gives you a blank file right
like that and then what I said is I said
ok whenever we subclass whenever we
write something in Android you usually
start by subclass in the system
component so you start at the higher
level right so we first think in here it
extends application so we hear it
everything from the application object
only then we start doing some work right
and if you weren't sure what you can do
in here
you could go source override implement
methods and
we can do own configuration change on
create on low memory on terminate etc
etc right see there's some things we can
do when the application is created as a
whole right that may not be a bad thing
you know maybe maybe we want to do some
things when the application is created
as if all y'all implement that one so
this is gonna get called when an app is
created
remember app is created whenever one of
the main building blocks is needed right
so so it just like remember like a web I
said compare an application to a website
you may have a website and who says that
you know our users gonna come to the
main door user can come through any any
web page right it doesn't have to be a
main page so similarly in here who says
that they're gonna start here they are
going to start here they click on the
launcher but what if something is only
else dump them into for example Oh read
the timeline activity right away so this
could be an entry point exactly
so application is going to get created
whenever one of these guys is needed
right so this basically gets created
first on create and that's a good place
to do some stuff that's gonna be
specific to everything the system
basically says okay we need to launch a
Linux process on an application you know
application only first time only first
time in the application is needed so
your manifest file says look we have one
application we have one application and
currently it consists of sorry one
application
consists of two activities so any of
this activity
if started application has been started
for all of them she wanted an object
just for one activity well then you
would help do some business logic around
that but but yeah but in this case yeah
it's kind of like all the citizens of
application have equal access to
application object you know you can put
somebody out or then do special stuff
but as long as they're within the
application application this application
called the Umbra application then they
have access to it so on one thing that
we're going to want to do here is we're
going to want to define this shared
preferences here prefs
and I'll define twitter object here
Twitter and I'm going to import them all
right if you're not sure it's on the
source yeah control shift oh yeah I use
control shift oh and control shift F a
lot F is to format right so if you have
like things like math stuff like
formatting is all like screwed up and
whatever right like that you just do
control shift F and just fix it
so far so good
yeah okay so now that we have so now you
know I could do those things that I did
again so you know I typed it kind of
quickly here but now we're gonna do it
together so I'm gonna say crafts is
preference manager dot get default share
preferences for application context
let's see if I can just say this cuz I
think there's like this mall so you can
also say this because application is a
subclass of context okay so you can just
say this as well
right because application is a context
right you know what I mean by is a easy
as well so now we have our props right
preferences
now what I would what I typically do is
if you guys familiar with a lazy
initializing something yeah okay
so what I typically will do is as
opposed to defining Twitter
I would I would make this even private
right so people can't access Twitter
directly okay but I would provide the
method so I would provide the public
Twitter get Twitter so if you want
Twitter you say get Twitter right and
then in here we can say if you know
Twitter is now then we're gonna create
it right else we're just gonna return it
make sense so that's lazily initializing
we're saying you can't access this guy
directly but once you know you can say
get Twitter and then if it already
exists in other words it's not now we
just return it but if it doesn't we're
gonna get to create it
that's lazily initializing there right
and that's a good strategy because you
don't want to do all this upfront work
right because see the user starts up
this application there's a start
sublease activity there's a lot of
upfront work to do as is to draw the UI
and all that by the time the clicks this
that's like 15 20 30 seconds later so
why not worry about that crossing that
bridge when you get to it right so it's
smart to kind of put that on a back
there a back end of the of the job right
so I would say okay we've twitter is now
with first time around it's gonna be
right so I can even make sure that it's
now right first time it's gonna be then
we're gonna create a Twitter but we're
gonna need drink username right and
we're going to need password right so in
server so the username is gonna be
perhaps dot get string or the key and
key was username the default value could
be blank then you do the same for string
password profs the get strength
password and then you do the same for
for a server right and then we do
Twitter is new Twitter username password
and to a Twitter dot set API string two
servers so in other words you know by
the way do you guys know what Java doc
is right so you know you can just build
this like if you want to properly
document this I'm sure so would you call
like like this right press Enter when
eclipse figures out that this returns
something you now get to explain what
the return is right so what's a return
is um you know connection to two other
objects or objects representing if you
want to fully document it right and I
can say you know lazily
something like that right
if I wanted to document stuff properly
so in other words you know you guys get
the concept of a lazy initialization so
the first time around Twitter is now we
do the job but from their own it's not
now so we're just gonna keep returning
the same guy right
so far so good then follows this we're
just we're kind of like refactoring all
that we're pushing some of the
functionality that we already had in
here right you mean the entire method
you could
it's a read-only so it's not really a
big deal I mean you can do you can
specify synchronize but okay we think
about that I don't if it's necessary
because updating something I would worry
about it that's possible yeah I could
say public synchronized
just in case that I have both service
and and in the status activity at the
same time hitting this and like maybe
one is it like line here and the other
one is by that time lines here and there
book like overriding the Twitter but you
know in reality wouldn't really do much
they were just double initialize it but
like like little same value
okay so now that we have this then back
in here I can as opposed to doing all
this stuff you know
to weather a blah blah blah right I just
I'm gonna delete all that I just need
Twitter right such service is the actual
call that updates yeah so that I mean
but I need the Twitter so I now need to
say status activity dot get get
application dot and get yeah I need to
cast it too young location before ugly
spaghetti code right dot get twitter
yeah you can it's um and this is just
because we're inside of a sub and
instead of an inner class right but yes
well we're gonna be accessing Yamba app
from here if I wanted to clean this up
just to make it a little cleaner I could
have done young plication is this right
so this is the humble application and
then abstract get Twitter it gives you
to read that way
maybe should them name number
application to your map I save a little
bit typing okay so we have non click so
you know and so yeah so we just I can do
ab get get Twitter right
this is a status that's pass to it right
so there's gonna be the status that we
are updating the piece of text okay let
me take a look so that's gonna that's
gonna start that that's that's basically
gives you the access to the app and I am
Bob and then we do get today which is
that did you guys get that still so if I
run it and I say hello testing
refactoring click on update so please
wait
damn oh it's crash that's what you're
talking about right okay okay so let's
see class cast exception so so okay so
class cast exception post took Twitter
line 108 so that's why so we know that
something captain failed casting the
line 108 so let's take a look so opposed
to Twitter line 108 BAM is this line
okay so status activity does get this
aha
right so this fails right any ideas why
exactly exactly we just came up with
this class I could have called it Bobby
or Mickey or Tommy activity right I mean
how do we tell our app hey this
represents you right so like you guys
said it's the XML file so somewhere here
we need to define it so it's probably
gonna be within the application context
so let me see if I can is there
something called application let me see
if I can do control space
and it doesn't don't see it in this way
but I'm gonna do it like this if I do a
name and I say dot yum ba application
save it that should now so I went into
the epic the application name right
you could have clicked on browse as well
or you could have just went here and
it's actually okay so this is the
property application name as part of the
application so I could have done it that
way so now it knows that the application
that represents this application is a
it's class called Yamba application so
when you do get application you're gonna
get application as opposed to the
default application and that's why the
cast failed so if I run this again let's
see what we get testing after
refactoring update waiting waiting
waiting waiting status excited into
class for you know damn what
by the way one thing I just remembered
we should probably even if it fail to to
update you should also cancel the the
status right what but actually that's
gonna happen because it's gonna call
them post nevermind your spelling Konami
take a look
so this library is designed to work with
Twitter calm so unless we actually go
out of our way and say set the server
and change the API of the server to
point somewhere else the library that
implements Twitter by default uses
twitter.com
so what we need remember if you did not
put the server value it's going to apply
empty which basically is not gonna
change it from Twitter calm so what you
need to make sure is that you go into
your preferences and that you set server
to this and learning and read to status
of now flash API and the username and
password here I'll just dump it on a
screen because we can easily see it but
I all right here right I was but maybe
you're not reading it and selling it
then why is it hard that's weird
let me it'll work yeah learning and
reduces the net so let's talk about
debugging again so a lot of you you know
you have there's a not you your code has
issues here right we're not sure why
it's connecting to Twitter or to our own
server or why it's failing isn't that so
you have two choices you can fire up the
debugger there's a full-on fledged
debugger so let me show you that no no I
don't I'm not a big fan of that just
because it's extremely slow and blowed
it but for example I could put a
breakpoint here right and I could now
say run this in a debug mode so click on
the little debug you guys know how the
buggers work right it's it's pretty
standard right
so now this is starting another bugger
it's its weight so erm so debugging blah
blah mom click on update so this is now
gonna start my debugger see in Eclipse
damn alright so now it stopped at that
point and I can actually evaluate here
that password username and server are
what I expected there's the value of PSS
blah blah blah blah blah right so that's
one way okay
and now if you're happy with that you
can continue or do what that I'm sorry
you can say continue or you can detach
and so on I'm gonna disconnect now I
don't like the debugger because it's
like so bloated so slow just add
friction to my development here's what I
personally would do I would personally I
would remove that break point I was DS
Walker and I would say you know I would
say log table D tag comma and I would
say string dot format and it would put
some kind of format you know getting
Twitter with and then percent test
percent us at percent past for example
right and then I would say username
password server right
damn okay now organize imports remember
you got the import to property log so
it's gonna be the first one now what the
heck is tag I in a lot of other people
tend to define tag for the class right
so that you know you have a constant
called tag that's your tag you can type
in something here you can call it to
make you if that's call you want to tag
stuff but usually what I do is I create
something called private static final
string tag as a constant right any you
can make it whatever you want
not a bad name is the name of your
application right
okay or some people are gonna do as
opposed I yeah exactly you could do
something like this you could do yeah
application god get to get class dot to
get simple name right if you want right
so if you change the name of the
application I have to moon remember to
change it so that would be the most
proper way of doing it and so now if I
run it and now testing it without a
debugger testing with blondie updates
updating or doing nothing of its
actually but more importantly if I look
at my log you know there should be a you
know uh-huh
getting Twitter so there it is learning
and rate pass 2010 and at HTTP level one
right so that that's my preference
that's how I like to do it using the
using the log cat and I put this I
sprinkle my code with law cats all over
and then he can easily like just things
crash you have a log to look at you know
what's going on yeah yeah there's
something called yeah can you set the
level and all that there's some some
support here in the in the album and if
you go under application you can
basically set the bug of all or true or
false test on me and so on but there's
some changes with this particular thing
that I kind of scanned in gingerbread so
I haven't really quite read up on that
yet but there are some changes in
colleges by default now works so just
FYI yeah you're not so lab D is the
level II would be error I would be
influencing no whatever you set here
whatever you specify as the level is the
level so if you say I'm logging at a
debug level if I say error then it would
be error and so on
exactly it's always going to get locked
but then you get to filter how much
information you want yeah well but you
can turn it off there's a way to
basically subpoena suppress the some of
that some of those logging right so
that's exactly that that's a good point
so we skipped the break do you guys want
to take a short break and then okay but
that's exactly you pointed out something
it's missing so we're not quite done yet
so let's take a short break and then
we'll wrap it up so let me point that
out so look so you guys saw this worked
right like if I go now to to learning
Android status dotnet open it up you are
gonna see that their message is there
there was mine from test lagdi right now
if I go and change my password or here
I'm gonna change user name to something
wrong 99 okay save it go back let's see
does it
still work and it does it's amazing it
even works with the wrong pastor can you
do that so so the problem is that once
we lazily initialize it it stays there
forever and ever so we only do this once
but what happens when you give a wrong
password changes how do we do that
we don't account for the fact that
password may change and keep in mind
this is good nun this is in this case
how would you solve this what will be
your solution to this yeah I mean you
know the poor man's solution will be
like let's let's move this every single
time let's not do it please ELISA right
exactly so what we need to do is we need
to know when its tail when it changes
and you got it right so yes there's a
way to to provide the listener right so
we're gonna do that here in the upper
Tombaugh application it's a good place
so after I get preferences I'm gonna say
profs dot dot and is it register yes see
it's either set or register or something
so this hell of a long method name don't
type in just use the completion register
on shared preference change listener I
mean just in case you weren't sure what
it does right so and then it says what's
the listener so I'm gonna do that dance
thing again so I'll say this Eclipse is
gonna say this is not a listener I'm
gonna say let this be a listener and
then it's gonna add that thing on
implements on shared listener and then I
will say add unimplemented methods and
bam bam and then I have the matter at
the bottom right so this is
so I just said this yeah
meaning not meaning notify this when
you're you change just like with the
button just like with multiple things we
had so far right it's the same kind of
concept right what we did this with a
button when we did this with I don't
know if you did something else but we
know it's the same yeah we've done it
multiple call it a little dance we do
right so you say let this be the
listener it says well it's not you see
put your mouse over it you say you say
let yumbo application implement on share
preference changes no been added and
then says but it's still not a listener
then you say add unimplemented methods
and it adds that not it so what do i
need to do when preferences change right
which i would do how how about we just
make existing twitter object dirty
we can just say twitter equals no in the
next time when it's needed if it's ever
needed again it's gonna get new
preferences at versatile so we don't you
know we don't even care about changes i
can just you can I can just invalidate
Twitter all right that's what we are
doing here
so-called one preferences change
I'm gonna try the reverse I still have
the wrong password so testing testing on
listener so if we click on update this
should fail then failed click on menu I
change my username back to regular the
correct one right and then go back and I
click on update and now it should work
and I should verify it was when it was
when you edit it so when if I go menu
and then preferences and then password
so the reason why I chose one way or the
other is the that not well known
property on preferences this is password
equals yes so so basically the reason
why it shows as a password is by saying
but that's not yes but true so in
preferences where we define willapa
I'm sorry well so to make password
hidden we just basically specify and
root password equal true on the price of
property in preferences yeah it's not
one yeah it's not it doesn't work in
Eclipse okay so we're now done with
preferences right so we now have a so
what we've done so let's just kind of
review so what we've done so far is we
have this okay this works it posts here
it doesn't gonna separate read because
it properly you know you know that we
have preferences which can update all
the information stores it in a file this
guy is reading this via the application
by application object so we have all
this done well pretty much you know
we're done with you know 1 &amp;amp; 2 right
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>