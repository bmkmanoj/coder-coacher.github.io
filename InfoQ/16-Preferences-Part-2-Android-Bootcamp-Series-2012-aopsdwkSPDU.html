<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>16 - Preferences - Part 2: Android Bootcamp Series 2012 | Coder Coacher - Coaching Coders</title><meta content="16 - Preferences - Part 2: Android Bootcamp Series 2012 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/InfoQ/">InfoQ</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>16 - Preferences - Part 2: Android Bootcamp Series 2012</b></h2><h5 class="post__date">2012-02-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/aopsdwkSPDU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">we left to top this we did the delay we
implemented there's another preference
and we had it as just another text field
so it shows manifests itself as if I go
into menu preferences delay and it asked
me to type in some delay in in minutes
or seconds right it's not it's not that
intuitive what it does in how it works
so just a tunnel that change if we
wanted to make it into the list like
when this pops up be nicer to help hold
down that says 510 you know minutes half
an hour an hour that sort of thing right
so let me let's do that so to do that
delay would no longer be a edit
preference so I'm going to delete it but
it would be a list preference or
checkbox and now not a box it's multiple
ah les preference right so let's
preference still has the same things
like you need a key which is delay you
need a title which way now we have right
toggle delay you need summary well now
we have this summer it away do a summary
but what is missing is that we need
entries in entry values so this is
what's new now right
so far so good so entries are going to
be the names and the values are going to
be their corresponding values they need
to match in terms of the number right so
if you have five entries you should have
five corresponding values right on
they're going to be on you know this is
how to do the mr. Williams as as what
they call it a race so we can add them
as valid as values in here's new
resource so it's not the first one is
going to be a string okay does this give
me the option now it doesn't it doesn't
give me the option here what you want to
do is we want to do an array so since
that this tool doesn't seem to give me
the option to do that do it that way
what they're going to do is I'm going to
create a new values or I could add it to
existing strings like for example for
Strings you could add it to strings and
you could add here an array of strings a
day right
the Leigh names
so you can now add the values for these
problems right so freely any minute
every five minutes
every half hour what's up I open up
strings so that's drinks
didn't see what so if you got it so do
you I may look different because like I
said they did change differently but it
one easy way to do it is you can just do
it in XML right so just do it this right
so you're creating and you can use the
like you so just do control space
control space isn't working this UI it
did in the old one but they broke it
created a new feature but it broke the
old feature ok so this is what it's like
this is what I've added basically write
this in the array names I just got three
items I could either i guess for titan
made something like that
so far so good now you could do the you
could also do the the second one the
second array that we need so this one is
going to be the names part and that one
is going to go into here so entities
names so that's going to be our string
so it's going to be our array without
names right that's how it specified the
lie names
in
we now need to create the other one
which is going to be for entity values
now values again it be in a deal world
there would be integers I believe
there's still a bug with this last time
I did this there was a bug so for
example if i try to create a resource on
let me try this it may not work but if i
do values new android xml file i'll save
alice is going to be so it's going to be
values it doesn't really matter if i do
this integers and i quote so it's in
here now I could create an integer array
right so I could create any you guys
probably have a you I'd it looks like
this right okay so so integer array I
could say delay values save it now i can
say add right and i could add an item
okay and said now that title could have
a value now the values must match these
so we had minute five minutes half an
hour and nine so a minute is sixty
thousand milliseconds right then i would
add another 10 i would call it a 60 so
five minutes is going to be three
hundred thousand milliseconds right
another item half an hour it's going to
be so 60 times 30 you know 1.8 million
right correct yeah well no sorry we're
starting second term milliseconds
seconds all right let's get okay let's
do that in seconds alright so in half an
hour so that's basically 60 seconds x 30
minutes so that's one point that's a
couple of few zeroes right okay half an
hour and then i had i think one hour
okay so one hour is going to be 3600
seconds right I'm going to fix this i'm
going to take millisecond sauce so if
you if you know if you do you tool
doesn't work for you ultimately this
what i did i just created an integer
array and so now this integer array
could have lived in any file it could've
lived in strings.xml as well it's just
it's a little more appropriate to live
an integer section our own numbers xml
in other words the file itself is not
that important so far so good so so
that's basically that tonight if ago
perhaps and I do values I could try to
find those array and delay values and
bam I hooked it up
I'm going to just run this first fun
just to see if it actually works I think
it's going to work on this end but i
think it's not going to work when we
parse it we may have to switch this over
to strings all right so menu preferences
so it died
move
fine index of value hmm so let me say
say died and he died so I got one two
three four and here I got one two three
four so that's fine I want to see what
if I actually move this because i think
is dying because it needs strings
it's doing your a string array
this again
there we go so this is what I want it
right every minute every five minutes of
a half an hour every hour right so this
is much more intuitive to a user right
so if I pick for example every every
minute right go back when you start
service so they're just ran so we'll see
in like about you know a minute if it
actually runs if it runs in 30 seconds
then it's probably using our default
which is not good and if it doesn't run
at all it's also not good so
so we just does the 30 we just as the
30-second mark so then run to 30 seconds
we'll see if it's one minute anybody any
questions in the meantime about any of
this yeah that just ran yeah can I get
rhythm yeah so integers XML is not
something I use anymore so I can get rid
of this file I was just something that I
tried it doesn't work so it still
doesn't support the integers it's gotta
be in string right
again
cool so this is just basically we're
just wrapping up some stuff from a lunch
so from from before that got to do with
preferences so any questions so far
preferences or any of that but that
works yeah rd what are the tests that
the valley is a string value let me take
a look yes so all we did is we changed
the delay preference which used to be a
tag added tax preference right just use
a piece of text to a less preference and
let's preference bouquet for the most
part of the same it still has the key in
title right ring with reset key is the
key title optionally summary but what
was new is that it also needed to
provide entries a both named part and
the value part and I can't want it to
mix and match a little bit just to kind
of show you hey you can also do a race
as as resources right like think like
days of the week right or months in the
year that sort of stuff right so that's
why I kind of want to point out those
things okay um and and does it questions
works
yeah so what you did in string and
strings.xml we added to an array you can
do it via the DUI in the new tools you
click on this to create an array and
then you click on this to create an add
an item to an array right so that's kind
of how it looked like in the new UI
right so that's that's that's this
button created that so this creates a
basic string this creates an array of
strings this creates an item for a
string it's kind of intuitive they
actually did a pretty good job with the
icons in this case even I figured it out
these numbers are you don't really mean
it's just an index then you can ignore
it but ultimately it's all XML right so
you can always flip over to xml as you
can see it just looks like that
so our updated service doesn't need to
be adjusted because our updated service
was simply saying get me a preference
with foreign key delay it doesn't care
what type was that a pulldown was it
this was it dad right speaking of one
important thing that we didn't talk
about is where this stuff is stored we
briefly talked about it right so again
remember adb shell so adb shell is your
friend so you can now go to sleep data
data right calm dot example.com bah I
think right LS there's my share
preferences so see these share it
perhaps and less right there's an XML
file I can cat this file and there it is
so as you can see delay is just a piece
of text right store in there
so we define the delay array like this
right like what we just talked about
this is how we defined it we have
children 14 names wonderful values the
way we used it is because in the
preferences as opposed to using the edit
text we switch to list preference which
has name value pairs so the pasta just
saying typing some number it says would
you like five minutes 15 minutes an hour
and son right and one of the new
property one of the ways this preference
is different is that it requires use of
these two did you get a tell it what
causing the name names and it goes into
values that's</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>