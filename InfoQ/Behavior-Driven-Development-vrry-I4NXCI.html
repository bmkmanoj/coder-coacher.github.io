<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Behavior Driven Development | Coder Coacher - Coaching Coders</title><meta content="Behavior Driven Development - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/InfoQ/">InfoQ</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Behavior Driven Development</b></h2><h5 class="post__date">2012-01-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/vrry-I4NXCI" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hi my name is Gordon force as you saw
from the write-up I've been most the
last 10 years on leading agile
development teams and that's one of the
reasons why I'm excited to talk to you
about behavior driven development
tonight it's just go ahead and just jump
right in here about what it is a lot of
people have been talking about it mostly
coming from the Ruby community and now
it's catching traction in the Java
community as well and the first thing we
see here the for the the short
definition of it
it's about implementing an application
by describing its behavior from the
perspective of its stakeholders this is
from Dan north dan is the guy who first
started working on behavior driven
development about 2003 its problem with
better short descriptions I've seen but
of course it's much more than that if we
look here you know he goes on describing
it's a second generation outside in pull
base multiple stakeholder multiple scale
high automation agile methodology
describes the cycle of interactions with
well defined outputs resulting in the
delivery of working tested software that
matters it's a lot of that's a lot of
buzzwords there related to agile but
want to do is I'm going to kind of go
through each of these briefly and kind
of give you a flavor for what this is
and it's second-generation built on user
stories these are a very common way that
agile teams are defining their
requirements these days a format that
they're in the other one is extreme
programming especially test-driven
development acceptance driven test
planning in
Tiwa sonic integration CI covers
everything from you know are you using
an ant file or a Navin file to something
like cruise control or Hudson where
you're kicking them off on a periodic
basis and the completeness of your
testing and then finally domain driven
design now just a curious quick show of
hands who here is familiar with user
stories in extreme programming we're
actually using them okay that's pretty
good
how about domain driven design okay not
bad we'll be covering each of these here
the next couple of slides and to get on
the next one they're talking about an
outside-in methodology and this is
pretty common in a few different areas
but here we see from our definition
slide we have stories describe features
from the stakeholders point of view and
then developers deliver runnable tested
features software that matters it's
getting back to the XP concept of saying
that if you can't test some you know
software isn't done until it's tested
you need to be focusing on the test or
your story as a way to keep your scope
together what's also important is that
it also in a way describes a
relationship stakeholders need to
describe what's going on and they need
to describe it in a way that makes sense
for the company help prioritize that
help get that to the developers and then
the developers turn around they drill
down into features and their toolkits
then they can come back out and what I
mean development here it's not just Java
developers we also have web designers QA
people and your agile project management
staff so the first thing we'll go into
here is stories and multiple stakeholder
so multiple stakeholders should be
defining your applications behavior and
what I mean by should is that I hope
that they're directly defining it each
of them represents one or more business
domains within your company and each of
these domains has a particular
bargain or a particular language
associated with it and throughout this
presentation I want to give I'm going to
refer to an example fictitious
application I call on pay it's a online
payments application people used to send
money to each other kind of like PayPal
but if I define my own I don't have to
be District Li talking about PayPal so
here what we see is that what we're
trying to show here in this thing is how
the stakeholders are involved with the
on page story content and first we have
the product group now they're talking
about customer interactions they have
domain expertise also probably in
payments describing what it means to
move money around in different ways
people want to move money around they're
also very focused on service level
agreements SLA x' customers and
Merchants are very concerned about how
quickly does the site not only respond
to them but how quickly can they get
data out of it
sales is involved somewhat in
development especially if you're out
trying to aggressively market your
program early on you'll probably offer a
lot of discounts they refer to these as
sales programs and probably have some
features getting into that they're also
involved with SLA x' accounting if
you're moving money every day they have
to be in there reconciling it booking
the revenue and they also have a lot of
audit compliance if you're any size if
you're a public company these days
working anything to do with money you
have socks which is sarbanes-oxley
making sure you do everything
transparent make sure people aren't
trying to pull the wool over your eyes
like Enron did with a lot of folks in
SAS 70 is also another a similar set of
rules security is a much more important
topic these days it's getting more
important every year we hear a lot about
website hacks people going in losing a
lot of their consumer data especially
with payment sites and sony was another
big one last year and so for example at
first data we actually had a separate
Security office in charge of a lot of
this and so the terms you'll hear from
there are things like
authentication or a password strong
enough are we encrypting sensitive data
in the application so if somebody does
break in they can't read it anyway are
we keeping up with our patches so we're
safe from web attacks are we coding our
platforms in the way that makes them
less susceptible to web attacks and then
there's other PCI compliance that's
payment card industry it's something
main push by Visa it is probably
becoming the focus of much of these
payment companies actual work they're
doing is to make sure they're building a
more secure product and this is one of
the audits that tests that data center
folks are the ones who run your app so
there's monitoring have you written your
app in a way that they can tell if
something good or bad is happening
they're the folks involved with patching
if you're going to be bringing on a
bunch of new merchants or customers you
have the capacity for it and then this
is the ITIL it's the information
technology library it's a set of best
practices around how you should be
delivering your data center services
legal is user agreements fee language
they could be in there saying hey we
want to be able to update these in real
time influencing what's going in of
course they're writing those SLA
agreements making sure they're right
customer support they're really about
have you given us a tools we can use to
debug your app quickly and help out
folks or see if how their accounts are
because they're also pushed by some
pretty hard metrics and then finally web
design if you're on a web application
you're going to be describing a lot of
your features and whatever and what does
in UI elements specific to web design if
you were a desktop app it'd be more of
the UI GUI type of language but if we
can see here is there's a lot of folks
involved there's a lot of knowledge
there's lots of different types of
knowledge involved here getting this out
and these are the types of you know as
development those people putting
together features the challenge is how
do we come in and
work with all these folks and
communicate with each other and part of
it is we're expressing them as stories
now user stories have been around for
quite a while they're pretty popular
they were first created as a planning
tool they're saying how much can I
describe a feature and then estimate off
of it they must have a business value
they must state it
they must be testable we want to make
sure that you know if we can test it we
know we're done and they must be small
enough to fit in a sprint or iteration
and the sprinter generation is a common
tool in agile development or a term in
agile development to describe how long
are we going to spend on each
development cycle Sprint's lasts
anywhere from a week to several weeks
but it really is a focused time you're
going to get work done and work with
your in work with your stakeholders
these restore has had another big change
on it and they emphasize conversations
over specifications they want the
requirements to be in more of a natural
language Mike Kahn who came up with this
and kind of formalized it actually came
across user stories as a way to capture
and estimate work by mistake in the late
90s used in the company was busy
acquiring a bunch of other companies and
he was overseeing a lot of different
development groups and he was out
evaluating the new groups as they were
brought in and his own team he felt was
not being managed very well and what he
didn't like is that he didn't feel they
were doing requirements the right way so
we kept telling the staff can you just
go over and talk to those guys and
figure out what they want kind of write
it down and then just do it and when I
get back we'll start doing it the right
way again and things for him step keep
getting busier and busier and he never
really got back to these guys but they
kept this practice just writing it down
talking to their customers well what it
turns out is this team back that he had
originally was all of a sudden
outperforming everybody
they had stumbled all across something
had worked better than writing down the
traditional requirements back going
through all the sign offs and all these
other things they found if you actually
got out there and just work with your
customers and your stakeholders could
actually get things doing things would
occur more quickly and you were also
probably focusing on the things they
really wanted then something they didn't
feel they could describe well in a
requirements document one of the common
formats in here is you have a narrative
that describes a feature you may have to
break it up to more stories and your
acceptance criteria defines doneness and
we'll get to some examples here in a
moment but who writes them well the team
writes them and the stakeholders the SH
there they typically they describe the
features in the outcomes this is what I
want and this is what I needed to do and
somebody has to start and they usually
submit the first draft QA has a role in
that they can help identify testable
contexts they can look in there and
saying well if you're gonna deliver this
kind of feature in the past we've tested
it in this way or we have some other
datasets we can use so they're there to
help out the stakeholder to development
provides scoping estimates we need to
make sure what we're talking about can
be actually done within a sprint or do
we need to break it up into sub stories
and then all this are supposed to use is
ubiquitous language to blend terms from
multiple domain languages the domain
driven design comes in where Eric Evans
wrote a book around the same time this
came out describing that you can often
develop products that fit the users need
better if you're talking more in their
domain it could be a stakeholders domain
or whatever but we kind of have to reach
out to them and figure out the language
they use and then so if we're we're
reaching to a product person or an
accounting person we're learning what
they need to do an accountant comes back
and says hey I need to book revenue I
need to look at the transactions then
the developers can come back
and they can work with the web design
guy and they can describe it in a
language that only uses accounting terms
but also web design terms describe how
the features developed in eventually you
start blending this together where you
have a language kind of unique to your
product takes a while to develop but
it's here to describe it and it helps to
bridge the gaps and knowledge in other
areas between these stakeholders so
let's go ahead and just jump right into
a behavior driven story format very
similar to other story formats that have
been out there we kind of start off here
first with a title but a narrative this
is where we're describing the feature
and there's a template for the language
you can see it here in bold languages in
order to realize a benefit I as a role
one a feature it's supposed to be said
that kind of easily and casually it
shouldn't be difficult to come up with
and your some other facts about it here
on the other side that we've covered
previously then the next thing we're
going to talk about is our acceptance
criteria and these are defined in
scenarios there's one this is really the
big benefit behavior-driven development
has over other user story approaches is
they came up with a template for
acceptance criteria the template is you
could say it's its own domain language
of behavior development driven
development but it's fairly generic what
they says here is you know you give it a
title and then you say hey given this
set of conditions and you can add more
you can have more than one given when an
event happens I expect the following
outcomes and you can have more than one
outcome and when you get down to the
acceptance criteria these are the items
oops got backwards they're a little bit
but the this is the testable part here
we're going to be testing these
scenarios up here we're describing the
benefit what it looks like but it may or
may not be testable but we're going to
show how close we can come through these
scenarios and you can have several
scenarios describing how this should
behave so here's an example more towards
on pay and it's a p2p send money story
so p2p is a payments turn for a
person-to-person when you talk about
payments online payments are typically
defined as p2p person-to-person b2b
business-to-business c2b consumer to
business and each of those have a lot of
loaded expectations to a payments person
about how that money is moving in the
background and what types of accounts
they may have so this one would say hey
person-to-person money and here is it in
order so the first thing is the benefit
in order to spend less time paying my
debts in person or by mail as a person I
want to send money to another person
online so here the supposition that's
going to be faster you don't go to the
ATM machine I'll to write a check and
throw in the mail this should be an
easier quicker way to do it this is your
benefit so if someone says okay how do
you want this feature to work what are
the scenarios you see and down here we
have a scenario and it's payer has
enough funds we have another domain
specific term payer this is a person
paying the money in here is that given
Bob is logged into his account page
Bob's obviously a person has an
available balance of $100 when he enters
in the amount field ten dollars and
enters in the recipient fields sue at
localhost and clicks a submit button in
the send money form the non pay updates
the account page for Bob with a ten
dollar pending transaction to sue at
localhost updates is available balance
290 dollars and adds a payment
notification to the account page for Sue
in the notifications section so this is
pretty specific we're actually going out
and we're describing the action of one
person sending money to another right
down to the web design you a widgets UI
widgets on that page we have an expected
outcome we have some balances that are
changing and we're also talking about
different messages that should be
showing up in different areas of a page
this of course is the happy path there's
typically interesting a relatively few
of these and many many more negative
paths of all the exception conditions
and down there we have a hint that the
payer the next one is a pair doesn't
have enough funds but this is kind of
the basic template and we'll be using
this template as you see here throughout
the rest of the presentation this is
something that's going to stay with us
so the next thing we're looking at here
is pull based it's another one of the
buzz words up there in the second
definition pull based is an agile term
that describes how teams are behaving
teams and stakeholders in the business
is behaving push based development is
kind of the old school kind of the old
bad way we talk about things used to
happen it's to show up of the project
team and executives would come in and
say we need you to get this done and
it's all really and they would try to do
a lot of things to make sure what
happened quicker they may have a lot of
good reasons but things would just kind
of thrown at us thrown on us not even
like we're thinking about it pulling is
a way to describe a more efficient way
to work and it also enables scaling and
for this to work the first thing that
has to happen is the stakeholders
upfront spend some time writing some
stories and they prioritize them by the
business value business value is another
way to say very meaningful feature if we
don't have the feature it doesn't work
how do i prioritize the features against
each other may have a financial
component just may have a component that
says if we don't have if we don't have
it we're
the water or it's just a minor
enhancement so it's so we'll let them
pick that priority that the folks were
in the business will trust them and this
clarifies a relative importance of it
and then as they're planning out their
sprint and what they can do the team
commits to story delivery based on
priority and capacity they actually go
through that queue and they pick out
what it is they want to work on not what
they want to work on what they feel they
can get done and is high priority
somebody may have put in a story that's
just too big a scope you need to go back
and negotiate with them maybe create
some sub stories and those can occur
that way as well when you get good at
this practice you can create a deep
backlog and I know if I cover this but a
backlog is just this list of prioritized
stories more than one team can help you
may have some dependencies in there
maybe not all stories are can always be
worked on by two teams at once or any
group of stories but when this efforts
been put in upfront it becomes much
easier for people to or for multiple
teams to help and for others to help and
pulling here requires outside in
communication you remember that first
diagram with with the two circles in
order for this to work the time has to
be put in to communicate and share with
the teams what's important and what it
is I want this also has another benefit
is it's also opening up to the
developers that we want you thinking
about it too they're thinking about the
features they're thinking about how
complicated it is
and they're more engaged it's not just
pushing on them it's just not saying
just do it throw a speck at them and
walk away or throw it over the wall and
walk away it's beginning to facilitate a
communication the conversation often
folks will come in and evaluate other
agile coaches and consultants will come
in and evaluate a team based on how pull
are they and there's a basic pull cycle
they look at shareholders add business
value priority stories to the backlog
development pulls the highest priority
stories that can fit into one sprint
then development demonstrates completed
stories as runnable tested features to
the shareholds to the shareholders as a
software that matters and then after
this occurs enough the business can
actually pull a collection of these
runnable tested features and release it
as an application or as an update so
developments pulling out of requirements
out of stories seeing what it can do and
then when they're all completed other
folks can determine is this enough for
an app or for release ok so now we're
going to go back into more the testing
and the implementing side of it and this
is a very common diagram folks have seen
with test-driven development the test
event development is usually how most
developers were first exposed to extreme
programming and other agile concepts the
idea is that first you write a test
fails you code then until it passes
and then you refactor and you keep going
in this cycle now of course if you
reflect you you may break it and you got
a code again when this first came out I
think Kent Beck's book was in the early
2000s and folks really started getting
into it it wasn't uncommon to hear folks
would
we're seeing their defect rates
decreased by at least a third their
development time was going up and it
became a very very popular thing to do
and usually in here if you were to use
the tools the ones that were most
associated with it was a J unit and then
test ng came in soon afterwards
these are unit testing focused tools and
it became so popular that everybody
tried to do something else with it hey
if it worked good here at the unit level
or the object level where can we use it
next well behavior-driven testing is not
unit testing she was written for
developers it has a great job like we
mentioned I mentioned earlier it also
really popularized code by example in a
J unit test or what you're doing is
you're saying I'm going to describe some
essentially behaviors or some conditions
that the code must behave in order to
meet expectations using asserts and
other interactions and you go through
and you run your test but when you come
to take it to story testing the tool
gets a little cumbersome I know if
anybody here at experience trying to
take J unit to apply it to something
else one person what was your experience
like
okay that's not bad that's pretty good I
mean that's kind of what we had to back
in the early 2000s we wanted to test we
didn't call them stories but something
on that same scope and we wanted to
write a framework on top of j-unit it
took us roughly a man year to get the
first pass of it out it did pay off in a
lot of benefits but it's quite a bit
different and you know you find you get
into things here that you know tests you
know they really just speak to
developers tests names or method names
method names really don't mean much to
stakeholders that's an implementation
detail you don't want to bother them
about that
the most common J unit tests for enteric
sumed
one test or one method call per object
lifetime if you had several test methods
on a J unit test you want to create that
object several times so if you wanted to
build up complicated scenarios you had
to do it within a single method call
became a little cumbersome there and the
reporting it was great to have that
level reporting if you use an ant task
and have it sent to you out in an email
every morning but a developer had to
interpret it for you and this is kind of
weird and North was thinking in about
2003 when he was starting
behavior-driven development and he
really wanted to find a way to improve
behavior testing or story testing and
this is what he did he comes up with
something called the behavior driven
cycle this is actually a fairly common
diagram now within the Ruby community
where a lot of this work has occurred I
took it out of the r-spec book and I
mention it in the Begley ography but the
cycle here says you focus on one
scenario and you write a failing step
definition remember back in the behavior
driven story we had things called Givens
and ands and Wen's and then those are
steps okay so you start with a Gibbon
and the first thing you do is you write
a failing example of a Gibbon which
means you haven't really put
anything inside your method to implement
it or maybe you put in a fail call to
make sure it failed and then you do
enough coding there to get it to pass
and then you refactor it and once you
kind of get that working you step up and
you go around to the next step
definition so we saw from our previous
stories we could have seven to ten easy
step definitions in any given scenario
so just taking the test-driven cycle and
adapting it to stories here really and
here's a quick over look at J behave now
back here if we look I mentioned two
tools there's J behave there's ezb
there's another one out there called
coop cube for Duke it's cucumber for dou
P little Java icon guy cucumber is a
popular story runner in the Ruby
community easy B is been out there
there's not been a lot of development on
it one of the reasons why folks like it
is that it's relatively easy to use
compared to J behave J behave I feels
more mature it's the one to go with but
there's some initial complexity in the
beginning in order to get it working
well so in JB hey've it is a J unit
replacement for behavior driven testing
and it automates it and it does it by
first parsing out the stories that have
been written and supporting text OTD
which is open document text format this
is the format that Open Office uses that
Google Docs can save to that's why they
can support Google Docs and Microsoft
Word even has a format support for of TD
and on how compatible it is but it's out
there this is probably I think one of
the more key features here of someone
writing a framework that has their
stakeholders in mind because Microsoft
Word or Google Docs are the tools your
stakeholders use I don't know if anybody
has had experience here is anybody found
anybody from the business team who wants
to write anything on a wiki
right if you ask them write something in
a text file you find out that they
didn't use notepad and you're getting
all these UTF characters in that your
parser can't handle you can get into a
lot of bizarre scenarios and that's
where supporting this is helpful because
it's more the tools they use it's more
the tools they want to use we found back
when we wrote our previous framework we
did eventually organize our stories and
use cases on a wiki and the developer
system ended up putting them in until we
wrote a word macro I converted a very
simple format into wikis kind of back
that up executing stories synchronously
or asynchronously this is going to help
you if you have a lot of stories out
there and how you want to get them
moving and enables outside-in
development and it really does this by
allowing us to test the stories and
demonstrating them back to the
stakeholder integrates with a lot of
popular tools ant maven Eclipse but why
is J unit here in test ng if this is a
replacement
turns out J unit those two tools are so
successful that they are ubiquitous they
are everywhere if you want to easily
integrate into a new environment you
find a way to adapt your tool to run on
top of one of these also the J unit
assert is a common way to get in a
certain language without running into
Java's assert or other items like that
it defined a lot of it so one of the
better ways to view J behave is its
story Runner on top of J unit you can
use it in different ways which we'll get
into but that's a great way to think
about it and the other big claim to fame
said admits stakeholder readable reports
so if you're looking at a web testing
client this is something where you have
an application that's off testing an
external website this is what it's going
to kind of look like using J behavior
the J behaved library on top you have
your stories that you've written in here
or anything Green is something that the
developer needs to provide
you have your test runner you're going
to decide here which one you want to use
with J behave you can use J units can
use Springs use tests in G's I think
there's a few others out there oops
second and then you're going to need to
get your configuration here going you're
better is going to be the class out
there that goes in and kind of ties the
stories the steps and everything
together your story mats are going to
help define your reporting and then
where you'll be spending most of your
time is creating steps steps are
implementing those scenarios those
Givens
Wednes then zan Dan's in code and then
beneath that they'll make if you're
doing web testing one thing you can do
is you can call directly into selenium
which is a common web testing client and
you can even use it to drive a browser
you can drive Firefox you can drive
Chrome or HTTP unit more of the brand
les browser at that point you can also
use it for direct testing this way it's
much more in the way people have used J
in it in the past instead of going after
the test you're going right into your
application code so this is the way they
see using it first off what you want to
do is write your story configure and
veteran in your story mapper implement
the steps using the BDD cycle run the
story and look at your reports so first
thing want to do is get your steps going
and you want to get your first step in
place so if we look here here's a small
Java class
it's called p2p send money steps and
that's the name of the user story we're
going to try to get here and get it
implemented if you see here with this
given tag we use annotations to log this
part of the scenario to a method or to
associate it and if we were to look back
at the story we would say given Bob is
logged into his account page but here
we're sitting given pair we got a dollar
in front of it
that means we were able to turn payer
into a variable it's going to be helpful
later but since the first thing we're
supposed to do is write a failing test
we had to call assert fail and when we
do in so it's not too fun to run a test
right now I mean you know it's going to
fail it's not going to tell you anything
very meaningful but you're here you got
all this going and you say okay I'm
ready to go I'll write my code and I
want to log into the account page but
there was something the story didn't
have it didn't tell us how to log in
it doesn't cover registration logins
account funding or anything handling the
unexpected this is another big way that
agile differentiates itself from other
project methodologies is that agile
expects you're going to run into the
unexpected not everybody defines
everything perfectly upfront in even
though this one you might say is a
little obvious you might be something
else so how are you supposed to do this
first thing you do is you go back and
look at your options with with your team
you're still focused on delivering that
story you want to get that done and so
you have a few options out there you can
look at you can create a missing story
and implement to cover the gap if you
tried mocking missing services and data
bit anybody here familiar with mocking
what that concept is that's where you're
right other code you may eventually
throw away to help you get around either
spending more time trying to do it right
with incomplete requirements the first
time or if the service is just too
unpredictable you just want to make it
easier and quicker that's definitely an
option but you really don't want to do
the last one you don't want to return it
to the backlog you don't want to come
back and say
we can't do it it's there's already some
time to go review some benefit so when
you take it back up with your team you
can find out maybe somebody else is a
little bit ahead in their work
maybe you can get somebody else to come
help out there's other ways to see where
we could go so for the purpose of this
example we're going to say hey let's go
ahead and create that missing story and
implement it but we're going to do it in
a different way we're going to create a
new story I'm going to call it a
register people's story and we're going
to define it only to the extent we need
to make our original story work very
simple narrative in order to use on pay
as a person I want to register for on
pay and the scenario is here it's a
little bit different but since I was
only given three user elements in the
previous story the name the address and
an amount in my account that's all I'm
going to associate with this service
very simple I may have to come back and
refactor it later but it's going to help
me deliver this story and if you look
here we have a little bit different
nomenclature around the story we have
these angle brackets around these names
Jay behaved has a feature where if
there's a story you need to execute
multiple times and you can parameterize
it you can do it and it looks here at
the examples table and these franchise
names focus exactly up to those items
and Jay behave will automatically go and
run this twice using the values
differently in those rows so you go
ahead and bring that up
so here I'm a given a shot here I've
shown you what this actually looks like
in the IDE and different items here so
here we go we can scroll around this is
a J behave report and the first thing
they show you is of all the things you
went through you see your stories here
let me give you some nice stats we had
three scenarios we have Gibbons story
we'll cover that and we had 35 steps
covered in all those stories and they're
all green if you come over here you can
click on something called HTML and this
is where it gets very interesting make
sure this is large enough to read we can
scroll down okay
p2p send money so this is a story report
now as opposed to a J unit report this
is actually using the language we use to
describe our stories it's gone through
and it's read the file and it's put it
out we see first one here's our
narrative shows up and we can see some
scenarios our first one pair as enough
funds but we have something here called
given stories the given stories was our
registered people story we needed to
execute that first so we had information
about who's logged in the system in
order to log them in to say they could
be at their login page if we go down
here with the narrative here this is
what we saw previously on the story and
we can come through here and they can
see the example of it in the report
framework has put together this nice
little table down for us here so we
understand what the parameters are here
it is describing the execution of the
story the purple letters are describing
the parameters that are passed in our
things we've turned into variables the
green or is the text that the Jay
behaved matcher actually uses to match
to your steps we'll look at that code
example in a minute and we do it here
for Bob and we're going to do it here
for sue then we can come through and
here's the story we wrote the first time
given Bob has logged into his account
page has an available balance of 100 I
won't bother reading the rest of it but
you can see here we're pulling out these
different elements that we want to use
to actually test against our insight our
end example these purple items are the
items that we would send over a selenium
test client or we would try to use in
our direct code testing it's been
parameterised if we scroll down here a
little more we can see we have other
scenarios to find negative test cases
one is he doesn't have enough funds so
we're going to say we're going to put an
insufficient funds on your page or if
you don't if you enter a negative amount
we'll ask you to make it a positive
amount so here's kind of the high level
of the output of what's going on there
and if we get here into unpaid a couple
of quick comments here what actually
looks like one of the things you do when
you're writing a web tester is you it
typically is its own application it's
independent of anything else if you're
doing unit testing usually there's a
test tree underneath main source here
it's just its own app and these are the
classes we described in the diagram back
there talking about in bettors your your
the embedder is what's called on page
stories it's a simple Java class up
there nobody can read it on page story
maps is the story mapper and then the
steps where we actually kind of
associate the story to the code to test
is in a steps class so there's p2p send
money and register people so let me go
ahead and bring up with one of these
class files it looks like I showed you a
snippet in the previous
so here here what we have looking at is
here all the annotations describing the
different steps and here are the given
tags and how we're matching them in this
one here you know has an available
balance of amount amount is there I was
hoping I would have the time to actually
get a selenium client in there didn't
quite have a time but this still shows
you the flavor of what's going on you'd
write a j-unit test the same way once
you're inside these methods where it
says log and you can set up some
different values this is where you're
actually in starting to validate your
code or validate your web system
remotely the fact that we have some
class level variables here signifies
that you may have scenarios where you're
carrying state between steps not every
step is completely isolated they are
dependent especially when you're filling
out the form each entry on that form was
a separate step so you need to carry
that together in order to get a on click
event down here at send money payer
sends money to oh there's a better one
down there somewhere but this is oh here
this one here clicks on the button to
send it and you may you know find that
as you're going through here since these
are parameter ties are also reusable if
you have a case of 35 steps you may only
have to write 15 of these step methods
because they are reusable you can
parametrize something like a button name
you could do it for a test it's not only
sending money but it could be cancelling
the form or clearing the form so there
is some reuse here the log statement
here was just a quick way to make sure
everything was parsing out correctly
sure
No selenium was mostly out there about
how you could use J behave as a test
client
there's no selenium code in this example
the selenium code would have to be added
in later
all of the
interaction
nope okay that's one that's one danger
of mentioning selenium and they're not
showing a real selenium example sure so
the question is is Jay behaved handling
okay let me restart that there does
there's there's nothing in here that
looks like it's interacting with a web
server so is Jay behaved handling that
behind the scenes and the answer is no
it's not we don't see any interaction
here because I didn't put that in for
the example what you would see in here
is essentially would be a navigator for
your website written in java code using
the selenium library it would be doing
things like going out posting requests
pulling down account pages logging in
keeping a state and then you would be
using the parameters here like the name
for payer or the name for a mount to go
in and to add in two forms yes yes so
what's required to make it work is you
would need to put in selenium code right
there and use that library it's not
quite that slick sorry yes
okay so this is really a long file of
steps so up here is the first given and
this is given if you substitute the name
in here Bob for pair our first line our
first story was Bob is logged into its
account page so this would come in in
pair is logged into his account page
it's the way that would work okay so the
story let's go back to the story real
quick now I'll bring it up here in a
little larger format so folks can see it
so you're here
see it's yes so it's so it's right there
I mean one of the things I found helpful
was I would actually cut and paste this
scenario and put it in comment blocks as
I was writing the steps out because you
had to keep going back and forth and
back and forth into your point it is
just parsing the template here is how
you can get from a story into Java
methods and once you're in a Java
methods you can use state variables and
things in there or just instance
variables to help manage the
interactions between steps and tests and
functionality other questions yes
it does okay so he's asking this Jay
behave actually execute the steps or is
it just a notation for the objects and J
behave does execute the steps and when
in order to find the code to execute it
uses these annotations and you're
matching when we're back there on the
other page with all the green text in
the purple text it's actually usually
regular expressions matching on that
green text trying to line it up it's
doing its best job to go through there
and associate it and know it can be you
can use spring or you can use J unit or
you can use test ng as a way to run on
top of an existing framework so you have
your choice there it also supports other
dependency containers like Pico weld and
there might be ice the one for my Google
okay yes
right so the question is can you
distribute steps across multiple classes
and can you share contexts you can
definitely have different step classes
and what I've seen it used you typically
might want to focus your class around
those interactions you could share them
but Jay behaved is really just going to
match on them based on those just based
on those annotations the text within
them so if you're have a given in one
class and then in another class if you
have context between them then you'll
need to make additional calls between
the step classes in order to grab that
if that makes mistakes
what I'm suggesting here is that well
first off I'm not really familiar with
sharing contexts in J behave if it's
possible to be honest right up front but
the examples I've seen in the way I've
seen people use it they tend to keep
their context within a class doesn't
mean there couldn't be another facility
for it and it is possible that's one of
the popular things they use spring for
is actually to configure something
called a step factory and you could list
all your step classes in there or pull
them in and out based on a configuration
but it's essentially going to go through
there and pull them until it finds a
match or finds one that matches yes
okay so the question is did the parser
generate this Java file from the text
file and it did not so this is where we
so this is in a step file this is where
you try to line up using the annotations
the code you want to execute with the
text in that story file so it's using
regular expressions here with to match
the text inside the annotations with the
scenarios in the stories okay so there's
a couple of things here with the
question and the first one is a given in
a when work together and you know given
you have something and when an event
occurs you've obviously manipulated some
objects and now you have another state
I'll take that part of it first there's
two steps to it that's exactly what's
going on you're given is your initial
context it's your setup it's you're
saying okay if I have a story I have a
beginning and in to have a beginning I
need to describe it somehow I'm on a
page right maybe I've logged in maybe
I've done something else there has to be
a start to a story and that's what the
given does and it tries to do it
in terms in this example what a user
would see on their account page how can
I validate I'm in the right starting
position for this story the when
describes the feature describes the
action it scribes an activity here the
when kind of really takes off when we
enter data and hit click maybe you put
your Givens into the form then you do
your when when you hit the click button
you have some choice there you can spin
it a little differently it isn't that
strict but then the thenns are the
outcomes the VINs are the results and
you want to verify I had the desired
effect or I didn't or I know that it
should have been an invalid effect so it
is context event outcome kind of state
machine manipulation issue
types is given the second part was do
you think those verbs of or those words
of given and when and then are enough
that is I have seen it to be enough
there's certainly things you can't test
with those people can come up with
scenarios but it's drilling down to that
level to where you have predictable
setups events and outcomes and if you
can get to that level then these makes
sense but the fact you have an end in
there means you can describe a very
complicated set of Givens in a very
complicated outcome even a very
complicated when part of this gets back
to the domain driven design is that
we're going to take another domain that
maybe has a lot of complexity and we're
going to use describe it using this
template let's call it the behavior
domain or with UI elements and a web
design domain and we're going to map
that over there the best we can and Dan
North has been saying he's been pretty
successful with it almost every project
you come up with things that can't be
automated or things that can't be tested
but I think it's also a reflection of
how much work there might be to do in
order to deliver that feature in order
to describe it that specifically but
it's still a good question here and I'll
open it up for questions again at the
end is you know stories story tests
they're long lived with unit tests in
agile we kind of say well they're up to
the developer it's up to the developer
to keep them maintained and if they
choose to keep them maintained or not
you know we'll let them make that call
we aren't going to state it but if
you're in a story test you've written
something a little different you've
written something that is becoming your
is becoming a runnable tested
teacher it's the proof of it it's
something you need to keep long term
many folks end up using them for
regression tests automated regression
test suite can be a very powerful tool
for you they can also be you can take a
subset of those and use them for QA
build acceptance tests this is where if
you deliver some of the QA you want to
run a set of smoke tests or whatever
make sure the builds up to snuff make
sure you haven't broken anything and
since they're long-lived you have to
keep them up to date and there's other
techniques for brittleness too that help
and this is where QA can help looking at
scenarios make sure you're not mixing
too many domains together some of the
literature states no more than two
domains mixed in one scenario if you can
get away with that few but that's
something that can help out the other
one is testing low level code it turns
out that interactions between objects
are also behaviors and you can use
something like J behavior to test some
of your lower level code when thinking
about this you know there are some low
level tests I'd love to do in J behave
and there's some I would absolutely hate
to do in J behave so fortunately we have
more than one tool out there and you use
what fits but you would have the option
to use a behavioral 15 tool
and lastly here since we've kind of gone
through one cycle here of showing hey we
got a couple of features or a story
developed we're eventually going to go
back to the team and we're going to keep
doing this and we have you know
something here now a value that works
and so one things we can do here with
what we've developed is we can use it to
go back and help the the stakeholders
discover their their desired outcomes or
help create more of them and one thing
that's big is to help get them to
experiment or to get them to play around
with things and one of the easiest ways
to do that is to give them a demo
instance if you have some runnable
tested features even if it's not an app
you can still give them demo instances
out there and have them start playing
and using the product you could even do
it to the point to where if you knew it
was going to take you a few days or a
few weeks to implement a first set of
stories depending on your sprint length
maybe you have a case where you can work
with the web designer you can create
them a JavaScript mark mock-up and they
can start playing with it a bit in
deciding if this is something they want
or or can improve on and they can be
writing additional stories to keep the
backlog prime for the next sprint
the other way to speed it up and give
them a demo is a mock out such as a mock
up using a mocking library or something
like JavaScript instance so that's
really it okay</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>