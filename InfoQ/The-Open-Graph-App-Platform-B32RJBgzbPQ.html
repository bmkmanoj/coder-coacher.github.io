<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>The Open Graph App Platform | Coder Coacher - Coaching Coders</title><meta content="The Open Graph App Platform - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/InfoQ/">InfoQ</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>The Open Graph App Platform</b></h2><h5 class="post__date">2012-01-13</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/B32RJBgzbPQ" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hi I'm Andy cut right I work with
anything social tonight we're going to
talk about take a very high-level tour
of the Open Graph apps platform for
facebook so basically if there's an
emergency during this demonstration it's
such a high level that oxygen masks will
descend from the ceiling so you know
yeah I worked on that one all afternoon
thank you thank you very much ok so like
I said I work for anything social we're
a social consulting firm and ian's
explain to you guys what we do I don't
think one thing Ian brought up was that
if you're smart you get things done you
like working Ruby and rails you like
working on a lot of different stuff you
like interesting challenges we'd love to
talk to you I'm sure everybody here is
well employed almost everybody is in
this world you can reach me at this
email address and you can reach any of
us at this email me at this domain by
our names so with that let's move on and
talk about what we're going to talk
about so what is the Open Graph you can
really think of the Open Graph in two
different ways you can think of it in
terms of a data structure or you can
think of it in terms of the data it
contains and what it really means so as
a data structure it's really just a big
graph you have a restful view of the
relationships between people and objects
on Facebook you access it by making HTTP
requests
no you can use W get curl Facebook or to
rest graph whatever it is you want to
use and you get back json data structure
the simplest easiest to understand
example of how you access the graph is
accessing the current user so you need
these URLs you need an access token so I
think most of you hopefully are familiar
with FB with facebook development and
authorization if you're not we can talk
about that afterwards so you make this
call and you get back json data
structure so the graph is basically
easily understood as a set of URLs a set
of resources nested resources and the
nesting resources explain the
relationships between the things I think
importantly though the open graph is
actually about the relationships of
people and objects and actions on
facebook and in the world so the
facebook open graph is it's implemented
right now in terms of the things that
are in the graph that is the pieces of
your life because it is your life in
there it's my life anyway I don't know
about the rest of you the the way that
they've structured the graph is
basically in terms of a has a
relationship so friends you're going to
have a user is going to have friends a
user is going to have albums a user's
going to have groups and these are
relationships between you your friends
and things right so it's not really that
interesting you know it's just like a
box of stuff now here we see a URL again
back to the computer science world the
real simple way to access graph data
me friends this explains very clearly
the relationship between me that user
that you're working with at the time and
what it is that you're looking at
relative to the person so here we're
looking for the friends the other thing
that you see on facebook and everywhere
in the world these days is the
ubiquitous like button now one of these
things is not like the other yeah okay
okay yeah I'll be here all week so
basically like is not a has a
relationship like is more active your
when a person likes something they're
actively participating with that object
they're not simply cat they're not
simply gathering it or curating it it's
acting on something so you like a page
or you like somebody's political views
or you like some comment you know so
what the open graph is about is changing
the way that things relate to one
another and allowing you the developer
and your users to expand the source of
relationships and content within the
open graph so we see here this is a
graphic that I've shamelessly stolen
from facebook so please don't sue me for
copyright and we can see the traditional
sort of relationships in the graph so
you see this person is a friend with
this person this person likes Facebook
but you see some other stuff here this
person watches Netflix this person cooks
a recipe this person listens to Spotify
so if any of you have any sort of just
casual interaction with Facebook how
many of you guys use Facebook on a
regular basis
yeah okay good so okay who has never
liked something raise your hand ah kid
right on okay so so you understand now
you're starting to see things like
Spotify mog you're starting to see apps
like The Washington Post social reader
so these are open graph at platform
applications and what they're doing is
expanding the vocabulary of the graph
they're adding new relationships and
they're changing how people interact
with Facebook how they interact with the
sites and how they interact with one
another and that's a pretty exciting
sort of thing so you can what Facebook
is offering is the ability to define new
actions and objects so for instance
liking is an action you like a page for
instance right so I just like George
Takei right he's hilarious so what
you're getting is the ability to define
for your application and for your users
some way to add relevant information to
the graph to get them to interact with
the graph in a way that makes sense for
your site so again one of the things
that's really cool about the open graph
app platform is that it continues to use
the standard sort of wrestle resource
approach and it's very understandable
here we've got we'll talk more about
this this URL in a little while but
basically what we've got is a graph call
to the current user for a particular
action for a particular object so again
the relationships are explained very
clearly in the URL
they're made very plain in a restful
manner so the the the implementation and
architecture is really straightforward
if you've been working with the graph at
all this is really not a big leap
there's just a few key concepts to
understand and you should be up and
running pretty rapidly so the question
is why would I want to do this well your
content is going to get splattered all
over Facebook you're going to get that
that sounded good didn't it so you're
going to see your activities in you're
going to see your vocabulary you're
going to see your objects you're going
to see your actions up on your up on
your users timeline you're going to see
it posted into the friends nudes feed
you're going to see it posted into the
ticker and all of these all of these
postings have links that are live that
will drive back to your site and they
also provide an ability for you to
actually drive authorization when the
user clicks the link so that if somebody
visits Reds profile and clicks a link
and is driven through your site the
authorization dialogues are
automatically going to pop up with the
appropriate permission requests which is
fantastic okay so now at the end of the
day what you're going to get is more
traffic to your site which is really
what everybody here I think is about
well maybe not maybe you're about
helping kids learn math maybe you're
about helping people volunteer maybe
you're about helping people contribute
to charities maybe you're about
improving somebody's life in some other
manner so actions and objects give you
the vocabulary to be
able to do that so you could build an
app for instance that helps people tutor
children so you would tutor that would
be the action and you would have this
object a child I suppose I don't know if
that really that's not it's a great
relationship but you can imagine
applications that would not just be
profit driven but would be descriptive
of the sort of goals that you want to
achieve political social whatever so
there's a lot of things that can be
achieved and there's a lot of things
that I'm sure people here can imagine
that they might want to build that the
Open Graph app platform is going to
allow so okay now to make this a little
more concrete we're going to look at a
demo that I put together and this is the
most fantastic demo on the face of the
planet so let's take a look and this is
parse com now I know everybody loves
plugs right there it's the it's the
perfect dog there's no question about it
okay so what we have here is the new
vocabulary in action so the first thing
we're going to do is login and we're
going to see something interesting here
this is the new enhanced off dialogue so
this makes securing permissions from
your users I think a lot less scary it's
a two-phase process the first thing
you're presented with is the basic
permissions and then if you request
additional permissions you'll be
presented with a second dialogue so
we're going to go ahead and say happy
happy joy joy let's log in and here is
the second half of the dialogue I've
added this I don't really need published
stream permissions I just threw it in
there to demonstrate this one of the
things you want to know
is that you can selectively veto they
have line-item veto power now so you
need to be prepared to deal with the
situation where a user may authorize
your app but not all the permissions
that you expect to get so don't assume
that and then another neat thing is that
you've got an ability to explain why you
want these permissions and then you can
see you've also got a little more real
estate to sort of fancy up the app to
make it look more like it belongs to
your application which is pretty cool
every day I go to look at this it
changes right now the Open Graph app
platform is in a lot of flux there's a
lot of bugs and they're actually I'm
finding them very very responsive
they're actively paying attention this
they're working hard with the community
to make sure that things got fixed and
in fact this didn't work until this
morning so which is really cool I was
very happy about that yeah because yeah
that's what you want to you want to wake
up and find out that your demo isn't
going to work right that's that's great
okay so we're going to go ahead and
allow that okay so all right now i want
to hug a pug so let's see we've got
we've got Marty and pissy and Eddie and
everlasting so we'll go with pissy ok so
yeah yes isn't she beautiful she looks
great in a bikini so what we've got here
is are the two major components of the
open graph we've got an object which is
a pug and we've got an action which is a
hug ok so let me put this down a second
and
okay so i'm showing you this that we'll
talk about this some more later but
objects have meted properties and it's
important that you define them
appropriately and Facebook has a bunch
of tools to help you do this correctly
it's really not that difficult just a
matter of spitting out some properties
so we'll talk about that more later ok
so right let's hug pissy hey you hugged
a pug ok so aren't you happy now don't
you feel better you feel better I feel
better I know I do ok so what happened
ok first of all we're gonna have to
reload the page and there we go so
puckers tests recent activity we hugged
pissy so that shows up in the user's
timeline and then if this user had any
real friends it would probably end up in
their news feed as well but Facebook has
determined that in fact Mike Smith isn't
really a real person and does it do
things with them that I'd like them to
do so and we can see here this would
drive you through if a new user came
through this would drive you through the
elf dialogue and you can see that you're
going to be driven back to the site and
this is going to occur throughout the
throughout facebook so you're going to
be able to drive a lot of traffic to
your site this way so ok and in all
honesty that's not really pissy that's
Marty I just don't we have one picture
so and that's Eddie by the way so that's
riously i love my bugs okay so enough of
that crazy stuff ok so how do we do that
ok it's it's it's impossible you can't
no it's it's really really
straightforward this so for any of you
guys that have in gals that have been
working with graph API or with the
facebook java script sdk this code
should be pretty familiar for those of
you have it the FB api this is a this is
a provided by the Facebook JavaScript
SDK all we're doing here is making a
post to a restful resource again really
simple really straightforward where
we're associating the current user me
with an action oh gee sleeping hug hug
hug equal document location not href
which happens to be the URL that i want
to associate with the object and that's
it I mean that's the only additional
call you have to make for this stuff to
work so all the rest so all you need to
do is drop in you know 10 lines of code
here in the world is going to work for
you so really really great so all right
now let's let's talk about the major
pieces so there's objects actions and
aggregations really really
straightforward stuff okay it's best I
think that grasp them in terms of what
they are to us objects are nouns actions
are verbs alright so the object you've
got a pug in our case so the actions are
in our case hug so in the Washington
Post social reader you've got read write
in an in Spotify or mog you've got
listen and you've got songs and in some
of the Facebook demo apps you have for
instance recipes and you have running
and you can start to imagine that
there's all kinds of objects and actions
that you could add to the graph and make
your application much more compelling
okay so one thing here aggregations that
this what this is is an element that
shows up on the user's timeline and it
basically as so
associate object action pairs in set
context there's a variety of layouts for
this which you can control through the
facebook admin tools for the application
this is a gallery layout and it lists
the bugs that were hugged by a
particular user in October in order of
how often they hug the pug and clearly
pissy is the winner here right I mean
she's the kid is right so okay so now
nouns and verbs make sense to us but
they don't necessarily make sense to the
graph API and they don't necessarily
make sense to computers per se so
objects we earlier looked at the header
right and we saw these meta properties
and you can see this is completely
unreadable but i'll talk about it surely
so the objects are literally a resource
accessible via HTTP facebook is going to
call and validate every one of your
objects they have a specific user agent
so you can recognize it and feed them a
page that you might want to give them
that doesn't require an authorized user
for instance right so but has all this
data so you can see again we've got a
URL really simple straightforward that
identifies the particular instance of
the object and let's talk a little bit
about the meta properties so there in
this blurb are the absolute minimum
requirements of the meta properties so
you'll see things like for instance the
Facebook app ID that's assigned by
Facebook that has to be associated with
every object in your application or on
your site then we've also got the og
type so in my case oh gee sleeping pug
pug so all instances of the Pug object
share a type
now the interesting thing beyond that is
these other properties like the image or
the description now you can imagine like
on my site that you would want users to
be able to upload their own pugs so
other people would hug them or they
could hug their own pugs right so the
question is how does an object get
created well an object has to be defined
through the Facebook tooling the object
definition you can think of that really
like a ruby class or C++ class and then
the instances are published so here we
see pugs eight so we can imagine plugs
75 plugs 12,000 you know or you could
have an SEO slug here or something
whatever you want right so the user and
yourself would cooperate to create an
instance of the object so you the plug
might have a different picture the plug
might have a different description the
plug might have a different name the
another another really neat thing about
the objects is that you can add cut you
can add custom properties to it so for
instance plugs come in three flavors
they fawn black and brindle so yeah I'm
obsessed with bugs so you might want to
be I'll you might want to allow the user
to specify what color the object is so
you can also for instance imagine in a
recipe or a cooking application that you
would want to say this is a vagin recipe
or you might want to say this is a
vegetarian recipe or this is a
dairy-free recipe or whatever so there's
all kinds of ways to associate
properties and stuff with a particular
object but again an object has to have a
real instance it has to be crawlable oh
so and then one more thing that
developed this last URL down here
there's tools that will allow you to
actually ask Facebook whether this
object is properly formed and once you
get the object you know that the ten
plates going you get your view set up
and you get your Hamels set up usually
this is not worth a lot unless you start
to see some weird problems but here that
we're asking facebook to tell us whether
pug number six is properly formed so and
that can be really useful during
development as you're starting to try to
build this thing okay so actions what
our actions again verbs but they're
really I like to think of them as edges
connecting the user to the object you
know in terms of a data structure so
again these are defined by the
application developer with Facebook
tools there's there's no URL like there
is for the object per se when you
initially create the action but this is
going to actually once the user acts on
the object you're going to actually end
up with an instance in the graph so
there's not only an edge there's a there
is properties associated with the action
edge that you can see and another great
thing about the actions is just like the
objects they you can associate custom
properties with the actions so in the
Facebook Applications the demo apps one
of them is a running app so you would
say for instance I ran for five hours
right I mean I don't know who runs for
five hours and I mean but you can
associate any variety of properties with
the actions so these are very extensible
data structures that make it that are
going to make it very possible for you
to build really imaginative applications
so okay and the next stuff so really not
going to go into a lot of details here
this is like I said a real high level
tour there is some setup stuff there
it's mostly just for those of you who've
built applications it's really
straightforward to define the
the properties and to configure the
application but there are some land
mines so I want to be able to help you
start so in addition to the little bit
of JavaScript that you need to add you
need to watch out for three landmines
first of all the Open Graph application
all need the enhanced off dialogue so
you need to make sure that you set that
up you need to create at least one
aggregation so it's possible it has been
possible in the past I don't know if
it's still possible but it has been
possible in the past to actually create
a Nagra create actions and objects
without an aggregation if you don't do
that you can't do that anymore oh but it
will but you still can build the app
right so you can find yourself in this
situation where the app mysteriously
doesn't work and it's completely unclear
why well it's probably because you
didn't create the aggregations so you
need to create at least one aggravate
aggregation and then one more thing when
you're creating the aggregation you have
to create the preview object first this
is the worst dialogue I have ever seen
so this this is how you create an
aggregation so what do you want to do
here should tell me which button you
want to click OK yeah yeah thanks thanks
Brian ok so you want to click the thing
up on the upper right pre so you want to
do what it says it says there's no
preview actions ok well that's the first
thing that's the upper right ok I'm
going to go ahead and click that no
don't do that the first thing you want
to do is create a preview a preview
object so just click add new and accept
all the defaults you can go back and
edit this stuff later so don't worry
about it its it's fungible don't worry
about it just to get started just do
this click the preview object add new
click accept all the defaults
so then you're going to want then you're
going to create the preview action and
the interesting point the interesting
thing up here is the last line here
where it says joke reference sample joke
this this box right here is a drop-down
and when you click on it it'll drop down
and it'll show you the sample object
whatever object type it is you created
in this case it was a joke I was
creating another app to rate jokes so in
this case it's a sample joke and you
need to make sure you populate that
properly so just take what it tells you
click OK and you're done and at that
point you're now going to be able to
actually use your action and your
objects in your application so questions
the first question was permissions yeah
can the user controller permissions yeah
you all know that Facebook is really
working hard to battle google+ and also
to keep up with all the complaints from
all over the world from governing bodies
about privacy issues so I think we saw
initially when we logged in you may have
noticed that there was a default public
button they can select they can select
so that it doesn't show up at all so you
could imagine like for instance you
might have an application that is for
alcoholics right that want to quit
drinking right they don't want to tell
people that they're alcoholics they
don't want that published right so that
won't show up right they can selectively
disable what is shown and then in terms
of analytics they offer insights and
they offer insights on an object level i
believe so really the the i haven't
really delved a lot into the insights
yet and I don't want to speak to that
there is some there is some
documentation on there about choices
about you would make about how you would
relate objects to one another that
affect the insight ok well thank you
very much for sticking around in
listen into my pouch</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>