<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Life After Monoids | Coder Coacher - Coaching Coders</title><meta content="Life After Monoids - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/InfoQ/">InfoQ</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Life After Monoids</b></h2><h5 class="post__date">2013-03-01</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/xO9AoZNSOH4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">um sometimes sir I'm just gonna talk a
bit about how we can how we can use some
some concepts from abstract algebra in a
programming context and how I've done
then how it's useful
so I'm actually the co-author of a
library called numeric numeric
programming library called spire along
with Erica shine so that's kind of a lot
of stuff to talk about will actually be
using examples from here it's a good
thing to check out yeah something I just
want to start by just talk about a lot
of motivation for giving this talk the
main thing is I'm just seeing some of
these concepts come up more often now I
mean obviously inspire itself we we have
a little sub package devoted to bunch of
type classes for abstract algebra we
also have a lot of other stuff but I
mean it's kind of one of those packages
I haven't only been able to talk about
when I talk about spire because you know
not speaking the same language as a lot
of other people so I want to get
everybody versed in in the language of
of these kind of concepts I'm also
seeing in a lot of other libraries like
algebra through Twitter which focus on
large-scale analytics and they they have
a lot of type classes for abstract
algebra concepts and needs for for big
data which is cool breezes is a library
that's focused on NLP and machine
learning and they have a lot of this
type of stuff as well and there's also a
basis which is already seen by chrish
socks which is seems to just have a
whole ton of nifty things in it but he
has some of these things as well and I I
figure you know let's try to get the
word out to the broader audience and try
to get people all talking about the same
thing so my talk is actually just gonna
basically I'm gonna talk about a few of
the basic ones I guess I'm on mono age
groups rings fields and modules and
vector spaces and you learn what those
are in a second
but I'm gonna try to basically show each
one with an example and try to hopefully
convince you that these are abstractions
you want to use through these examples
so I'm gonna start by just saying that
you know there's a lot of problems that
although they don't necessarily look
like it at first are actually out
Rick so we're just talk about mono it's
because they're incredibly basic just
quick Paul does everybody here know what
Amano it is looks like almost ah that's
awesome
okay so basically it's really
straightforward you have some
associative operation you can fly the
two types a and you get neo and you have
an identity and this identity basically
means if you apply the identity on
either side of the operation you get
back with the other value was so you can
kind of see that down there
this is annotation point the little
operators you see like that pipe plus
pipe that just comes from spire we we
had operators for all our type classes
so I mean you have them on away but you
can just do a pipe Plus pipe and you get
your your associative operator so not
only did great just because there's just
tons of them I mean a lot of things a
lot of things are basically associative
just have to look hard enough obviously
the easiest ones are strings and listen
cat and eating them
your general concepts of numeric
addition and multiplication you know you
have an identity a zero or one you can
add or multiply and you get that same
thing it's associative pretty much any
associative operation you can just lift
it up to an option
none becomes your identity and and you
got that as well there's also a lot of
fancy data structures I think algebra
probably has a bunch and there's a talk
today which I imagine will talk about
those things yeah but what about mono a
design a they're kind of interesting cuz
actually you represent really they're
basically a well behaved fold so you
think what fold like as defined in
secant Scala you basically start with
some element and then you can apply a
but an operator to all the elements and
you get one out so it reduces it down to
a single a single element and what I say
well-behaved is full doesn't promise
that you're going to go from left to
right or right to left
all promises is that it's it's gonna
apply them in generally right order so
if I mean an associative order so I have
an example in a second but basically
what fold really wants is just a mono
way so my abstract over that we're
really talking about is a mono is it a
good way to represent reduction and we
do that in our free Cod code base so to
kind of give an example you know you can
you can go from the left to right I like
fold left does
right to left like right does or you can
split it up into two compute them
separately possibly on different
machines and then combine them at the
end and as long as you maintain sequence
you're good scholars parallel
collections library their fold actually
requires this however it's left to you
to make sure it happens if you have a
mind wait at least you can you know
that's gonna be correct I don't know
it's clearly most of you already know
but them I'm gonna go into groups so a
group is really just a mono II but it
adds this notion of symmetry so you can
always go back and get an inverse of
something so for everything there's an
opposite thing on the other side that
lets you go back to where you started
and this is really cool because there's
a lot of interesting example let me
obviously you have your regular numeric
stuff but things like permutations if
you have a permutation you can always
get a reverse permutation of the Rubik's
Cube you know if you if you think about
it like you're holding it you have a
rotation this way you can always go back
and you can look it all the way around
or you can change the orientation of the
Rubik's Cube and if your operator is
basically just concatenated these all
together then you actually generate a
group and you can always get an inverse
for everything so to give an example of
a group we're gonna go with that have
this catalog and so the catalog is
basically we can add or move out into
the catalog but the main thing is that
we actually store in an append-only
database so we can never actually remove
something from the database we can only
say we can only say what's happened so
it's much more it's a more constrained
problem
so anyways our main goal is really to
summarize the items in the catalog and
be able to do that with this notion that
you know you can't actually remove
things so basically we'll start we have
this nice little catalog here we may
have one method on it reduce which
basically takes a mono and will reduce
the elements however it requires a
function that map's a set of events and
so basically our catalog is just a bunch
of events but when we add something we
have to say we've added it remove
something we say we've removed it we
don't have to remove it we just say what
we did and so we have this kind of
notion of symmetry here which we're
gonna try to exploit where we can both
add something and remove it so we're
just actually doing this with with them
on I'd say we wanted to count all the
items in the
in our catalog then what we might do is
you know we have to give it this little
map function that that knows about
events we basically have to say well if
it's ad routing it wide one if we're
removing it will take away one and then
everything will work out but we kind of
have this notion of symmetry here we're
robbing either I don't want to removing
one it's not very explicit and so we
have this minor but really you don't
want a mono I really want something
that's that I can represent that so we
want a group and so we're gonna abstract
over that symmetry and we're gonna
instead of instead of taking them on the
way we're gonna take a group and what
that lets us do is that we can instead
just our map our function at maps values
from A to B just only has to worry about
a it doesn't have to worry about this
idea of adding or removing things we can
completely ignore the fact that this is
a dependent only database the only
things we have the slight restriction
that has to be a group instead of a mono
a for a reduction so if we wanted to
count all the items we can just
basically say you know reduce and we
just map it to one and this little
method here will take care of the actual
finding the inverse and everything
the operators at the end it that inverse
just comes from spire so it's a more
concrete example we'll look at a movie
so basically you have a movie which has
a title and a length and you have this
catalog of movies and so I'm just
actually going to hopefully this works I
kind of show the example in here so
right so together movies and we have
this reduced method basically we want to
do is go ahead take a movie and if you
want to counter prisons but I think we
just one look at account of all our
movies in our list movies are just
generated randomly I'll put the code up
after the conference I'm an interesting
thing is you know there's a say we want
to find the instead of finding the count
of it we wanted to find the mean so
what's the average length of all the
movies of the length of the movie
because we have that field available to
us that's what I was just direct
products quickly yeah it's a little
unfortunate
yeah so if we wanted to get the the
average length you know we can get the
total length by basically just taking
movies getting away
so let's go
so I'm just me I get the additive group
for double because doubles are actually
it aren't they they have is ambiguous
when you say groups yeah I inspire you
have to explicitly say that we taking it
the length and we ever account from
before so we can just divide them and do
that however we're doing two reductions
over the movie set which probably isn't
optimal well what's nice is we can use
something called direct product so
direct products basically means that we
have a to temple to Temple of where each
element is comes from a group then
basically we can create a new group and
we just perform everything element wise
so you know if you have like so if you
have a create a group out of this group
it's your zeros here oh and we're adding
it we just add the left side and the
right side separately and so we can use
this in a reduction do you actually
generate they get back to temple so
we've only done one reduction now but we
actually have back both the counted some
and now we can just actually do the
reduction by itself or we could just
start compute the mean by dividing them
sweet networked okay so skip over this
okay so okay so now I'm gonna talk about
actually just just creating your own
groups as well and so we're talking
about this idea of stat so instead of
wanting to get the mean length you also
want to get the standard deviation maybe
the count everything you know we kind of
want to do this so basically we have is
this this nice way of collecting stats
so if we have a sum the square of the
sons are the sum of the squares of the
elements in the list and the count then
we can compute the mean the variance
which is which is nice you can see here
we have a nice little constructor for
just creating a stats out of a double
which basically has one item in it and
so we can create a group out of this and
I'm like I get too far into this but
basically we can just have a direct
product again with three things so we
just sum
each one separately our zero is just the
same zeros and all of them and our
inverse is just the inverse of each of
them separately so we can use this in
our reduction okay you never think so we
can reduce this and we get our stats and
get the mean I can see here that are the
average movie lengths this is 100
minutes plus or minus you know 15
minutes is a good way to go okay so
that's gonna cover four groups but now
I'm gonna talk about the other thing
that being precise which abstract
algebra lets to be very precise is that
we get to ask only for what we need
so our first just introduce the concept
of a ring a ring is just an abelian we
have an abelian notion of ignition which
is an abelian group the building just
means is commutative so X plus y is the
same as y plus X we just have this
notion of multiplication which by itself
is a mono however we also have this idea
of how we can how these two operations
interact with each other and their
distributive if you know remember you
know primary school you know
multiplication you can you can if you
have 80 times you know X plus y then
that's equal to e times X plus eight
times over a very basic stuff but that's
tends to be a useful thing yeah so
anyways the main thing is that the ring
is really a very basic notion of a
number the sort of canonical example is
your set of integers right I'm gonna
multiply we can add them we can really
divide them so we don't even know so we
just ignore that aspect of it so scull
also has a kind of an idea about this
where they have this tech called numeric
and why this relates back to us thing
but asking for what you need but problem
with the America is that it asks it
requires a lot so it's not just a ring
like this is how you would for instance
define
scholars an American scholar re-inspired
it's not just a ring it also needs
notion of an ordering it also needs to
be signed and not all rings are like
that and and sometimes you don't want it
have to be constrained that way and
generally I find that if you have to put
sisters or something like that in your
permutation or unsupported operation
it's a bad abstraction so the main thing
is I think we're asking too much so to
give an example of this we're going to
talk about convex hulls so basically
it's technically it's the minimal convex
set Canadians at a point however what
you can think about this if yeah if each
of these points was instead of nail and
a board and we had an elastic and we
stretched our elastic around the points
let me let it go it would snap over and
would form this nice convex hull here
you can see and so to create comics all
we have a very simple algorithm there's
one called the Graham scan and the main
thing is we basically sort the points
like a lexicographically so along the
x-axis first and the y if they're equal
right so we get this nice ordering know
what we do is we build the hull
iteratively from left to right so we go
one at a time so we can go from one to
two we got our Hall it's just that we
add three in there we have a problem so
what we want our how to do is to always
turn left as long as we're always
turning left as we traverse it we have
we have a convex hull so what we do is
every time we see a right turn we get
rid of it so a right turn we get rid of
it get rid of and you can see here we
just iteratively slowly and build up
this this convex hull and we get the
lower hull here we can reverse the
points that do it again we get the upper
hall it's a really nice add-on it's
faster just requires sorting it also
requires a way to actually determine the
turn or the point so as we go from P to
Q to R we need to be able to figure out
we made a right turn or left turn
so actually doing this turn is the sine
of it's proportional to if you take the
sine of the of the area of the triangle
but we take the sine of that then we
actually get to turn and so again the
orientation of the triangle we take the
sine of that we can get that because we
don't actually need the exact value we
don't have to divide by two or anything
so we can actually do instead is just
use multiplication and subtraction and
as we know that's just a ring we don't
need to have division here so that means
is that we don't need to ask for
anything more we don't - for scholars
this idea of new American anything we
can just create our own with a ring
which is nice so I'm gonna give a quick
demo of this so have a nice little way
to generate points
I do believe I need a number
no it's always gonna generate a whole
bunch of points here when this I should
halt I would get the size because it's
things like it see is you know so get
this this convex hull here most kind of
interesting is because only ask for a
ring we can also do it with you can do
it with integers as well you have a
convex hull of integers which is kind of
nifty how he said so really a lot of P
number z' but other interesting there's
a lot of other neat examples of brings
one of them is you know the polynomial
is a univariate polynomials for instance
in this in an example I'll show you I'm
gonna actually create our points as
polynomial
this is just a class I created for these
examples just represents polynomials as
a map addition of polynomials is just
how you think about adding panels and
same with multiplication it's very very
straightforward just create a few of
these oops
and so uh I mean our comics algorithm
itself actually requires an ordering so
we can't create behind the convex hull
of a set upon all move obviously but we
can't find the turn and we get back a
polynomial and what's cool about this is
that you know we once again because we
didn't have to worry about the actual
merit type we get back this thing but it
turns out that what we actually get is
if you think about those three points as
basically being points in motion
described by a polynomial you can think
about our variable being time then when
we get is a polynomial that describes
the orientation of that of the triangle
formed by those three points in time
over time which i think is pretty cool
so it's it opens up things that you
wouldn't even necessarily think are are
useful to you so by asking for only what
you need
you'd get to let users do what they want
really so the other thing I'll talk
about is this idea of basically just
ignoring the details so it does great
back to what we had before which is that
by asking for for what you want like a
ring you you don't need to actually
worry about integers or doubles or
anything else like that you just worry
about yeah basic properties of what you
want
so we'll probably mention fields fields
basically add division to your rings so
the multiplication is now in a viewing
group once again just needs commutative
and so inspire we actually just leaved
we define reciprocal in terms of div
because most types are much better at
defining div but we'll see why so if you
obviously you split as a add division
and and so the sort of a simple example
this is line intersection so for
intersection line so we represent mind
says in a general form and basically we
have a very simple way of getting
intersection of line don't worry about
the code too much the important thing is
that we have this division here at the
end and this division means that we need
a field but it also makes it kind of
interesting because if we required just
doubles so basically no doubles have
division then we'd have to worry about
era rounds because now unless D is a
power of two you pretty much the best
you can do is an approximation to the
actual intersection at that point which
may not be what you want maybe you want
have exact ones so we know if precision
matters then that's that's you don't
want to lock yourself down to using a
specific number type on the other hand
if precision doesn't matter you don't
wanna lock you user to using a really
precise type so you know if you don't
care about you can just use double if
you do care you can use some like
rationale which is a number type in
spire and it's not just a problem with
with floating-point we also have integer
overflow you know I mean if once again
if you if you by not tying yourself down
to a particular type of number if a user
sees overflow they can stick a big int
in there instead if it's a ring yeah
okay I also briefly talked about vector
spaces so so we go back to our notion of
groups turns out vectors or groups as
well as a group as well so you know you
can add vectors together and you can
subtract them using how you exactly how
you think would happen so the vector
space just basically adds this notion
that we have the scholars the scholars
inside the scalars too much Scala inside
the so the vectors basically a bunch of
scales scalars and the main thing is
that we can distribute these so if you
multiply if you have to a vector
addition so you have u plus W at the
bottom sorry for the people you can't
see then we can multiply it by some
scalar and we can actually just you know
you have this nice law here and inspire
we have this idea of times from the left
and the right you don't need to worry
about that the main thing is we have
this scalar multiplication and we have
it with a star going it calls a scalar
so to give an example do a catalog again
we'll see how this can be possibly used
a vector space and a catalog which seems
a little crazy at first but basically so
we have our same old catalog we have
this reduction with a monolid and we
have our events except we have a
different we've added a new field to our
events now we have a count so we aren't
just adding one item we're adding a
bunch of items or removing a bunch of
items from from a catalog you know of
course groups still work if we if we see
that we have and things we want to
multiply together or and and things were
adding together we can just you know
fill with
they're in times and then and then fold
over that obviously that's not very
efficient so to solve a problem we can
actually look at modules I'm just going
to introduce this very quickly a module
is basically a vector space but we
generalize the scalars to only Y in our
ring so we don't need division you do
lose a lot in terms of it doesn't say I
have a basis um but for us that's not
too important but the nice thing is is
that basically I'd like keep asleep
asleep asleep we can return that into a
five times V so basically if we want to
reduce with modules what we can do
instead is basically we take another
function it snaps a to B and instead now
we just use this scalar multiplication
to to to handle the counts itself so
give an example I have
cut
all right so we have this new thing
called an inventory and so the inventory
is basically a bunch of products here
and so this is sorry kind of terrible
but basically the products that anything
is probably have this idea of volume and
so basically you just want to get our
volume so as it turns out using our new
produce function we can actually just
take our product and we can put in stats
and so our statistics our statistics is
actually a vector space actually
partially nothin so we actually define
the module here
I actually defined it as a vector space
it's also a group so that's why the
other example worked but anything is we
got to get back this thing and once
again we can just get the mean of the
volume and all of those stuff
it's okay I think it's interesting and
so this is already wanted to go over I
think there's a lot of interesting
examples more or less I think I was
gonna say talk about some more
information it's all the examples in
this used spire so you're interested in
the other stuff I would suggest checking
it out there's an example sub project I
was a lot of cool examples for instance
one of the reasons why for instance ring
we don't have an idea of the quality
with rings is one examples is a the end
of morphism ring so if you take a group
all the endomorphisms from that group to
itself with just a homomorphism from a
type two at the same time we can form a
group by doing plus the addition is
doing this we apply the endomorphism we
add the two together at the end and
multiplications composition and what's
really cool is if we actually do we do
the anymore facin group over integers we
actually get back a group ring that's
isomorphic to the integers which is
which is a nifty o-ring of integers
obviously also other ones for vector
spaces are some nifty examples for
k-means and random forests Erika Shyam
also has an example of this idea of
clean closure which I don't quite
understand but it's really awesome
there's a whole bunch of stuff but it's
definitely checking out if you want to
learn a bit more about abstract algebra
there's that the first link there is
actually a set of it's kind of a book
slash Elektra notes by a guy and it's
free so it's it's a good resource it's
also a book I like algebra by earned but
I mean that's here kind of deal open the
floor to questions
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>