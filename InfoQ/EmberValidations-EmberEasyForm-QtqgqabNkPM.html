<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Ember-Validations &amp; Ember-EasyForm | Coder Coacher - Coaching Coders</title><meta content="Ember-Validations &amp; Ember-EasyForm - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/InfoQ/">InfoQ</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Ember-Validations &amp; Ember-EasyForm</b></h2><h5 class="post__date">2014-07-01</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/QtqgqabNkPM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">alright so I'm introducing not
introducing I'm going over to libraries
I wrote almost year and a half ago I
presented these at the first quasi ember
conf ember camp but I actually wrote
them the night before so my presentation
was not very good but now I've had
plenty of time to flush them out even
though they're not not when old yet so
amber validations in ember easy form
they did a good job of introducing made
Brian Carter hola CEO dockyard blah blah
blah so emirate validation zemer easy
form are best of friends they are
complementary libraries but they're also
independent they can be run
independently a better way to think
about them is that ember validations
only concern is about the model layer
whereas ember easy forms only concern is
about the view layer so before I move
forward I want to actually go over and
establish two rules that I looked at
when at building out these libraries and
the first one seems pretty obvious
although I'm very shocked by how many
people violate this service I'd
validations and share your data
integrity not client-side validations if
you are validating on the client but
you're not validating your data on the
server stop what you're doing and go fix
it it's somebody will poke around and
they will find a way to inject it into
your server into your back-end and
you're like how they get around my
awesome client side validation because
you're building an ember application you
now are exposing the API to everybody
the other role is that given the first
rule clients have validations only role
is to actually guide a user into how to
submit data you should not be used for
anything else and that goes for form
submissions whether you're using
validation is to actually if you're
building out some more like gooey
components that actually are respond to
valid States then the view layer it
should present a guide for users to
actually push them to submitting data
properly so ember validations itself
it's hosted here on the dockyard github
repo we build all of our Travis CI
greens on two builds com that was put
together by when our dads Robert Jackson
he was manly he did the same thing for
ember so the the Ember sorry builds
ember.js calm was done by Robert as well
however there is a something's wrong
with Travis I saw it the other day so
the Emperor validations is Travis is
great except for when it stops working
you have no idea why because you can't
actually access the access that so it's
passing locally for us but if you want
to use ember validations right now with
the latest release of ember please grab
a gist that I compiled locally if you
just go to gist github com /b Carter
illa it's like one of the first ones on
there if you don't feel like memorizing
that number so to those okay for
everyone to see by the way because
that's essentially what they're looking
like yes okay so here's a very simple
ember validations example we first start
by mixing in the ember validations
traits into our object that we're going
to validate against here I'm using an
object controller but later on I'll use
regular amber object and then here is
the validations rules so that's
essentially all you're going to be
mixing in or actually the only changes
it go making directly to your your
objects you want to validate against the
validation rule set itself is comprised
of properties so these should be
properties that are directly accessible
on your object that you're validating
and then each of those properties has
rules so the rules are going to map back
to the classes for the given validator
and then excuse me the values for each
of those rules will be
options passed in this case presence
doesn't I'm not taking a route rather
not submitting any options to it so i
just have the placeholder of true which
is just for conciseness there's a little
bit more complex validation example so
in this case I actually can override the
message for the presence validator and
there is a light internationalisation
esque library built into mr validations
in fact if you're using James Rosen's I
a tenon library it would prefer
validations will properly prefer that
instead so you can internationalize your
messages so here's an example of passing
different options there for the length
validator we have a minimum option the
readme has a full list of all the
options for all the validators so i can
packs it as a maximum as well or range
age just in mccarren sorry numeric
allottee and that has its own option so
if you're looking at these in your
saying that these look a little familiar
then you might be a rails developer or
you might have a backward background in
rails and that is because I have a
background rails I I was still doing
rails doing rails since 2006 so my
brains been saturated with active model
validations active record validations
however the the thing here is that in
oops sorry I want to see these first so
the validations that I've included into
amber validations are what I call the
common validations absence acceptance
confirmation exclusion format occlusion
length numeric allottee and presence so
the validations were they say that
really fast okay the validations that
are included here are fine but when if
you're familiar with the way that rails
does it this isn't really ideal for
applications rails will validate the
validate your data when you opt into it
so if you save your record ill run
through validations if you are checking
to see if the records valid will run
validation so these are validations that
you are that you're just opting into
they're not happening automatically
that's because in their request response
cycle the end user doesn't care if they
happen when you're actually setting the
properties to given data or read before
the response comes back because all the
user cares about in the request response
cycle is at the end I have a full
payload of the proper information
however an ember land we're concerned
about the client we're concerned about
actually showing a more interactive
experience if you have a little widget
on your on your page and and you cook it
too often the users not supposed to
click it off we don't want developers to
have to go in and kick off the
validations manually to actually show
that invalid state so given that ember
likes to auto update all around it ember
validations itself is employing on the
model layer I want to be very specific
on the model layer live validations
meaning that when data changes for a
given property it will kick off the
corresponding validations so better
understand how a more valid ations
worked rather the individual validator
classes work under the hood and what I'm
going to be getting to a little bit
concept of validation graph I'm going to
break down the base validator class that
all validators will derive off of or
extend off of so in the anit function
the first thing that you notice is that
the validator instances themselves so
these are classes and when it we
actually build the validators it will
create an instance of the validator so
it's not going through and just grabbing
this validator every single time we're
actually working off in an instance and
each of these instances have their own
errors array this is because certain
validations could perhaps actually
generate more than one error message the
property that you're passing in or that
you're defining the validation off of in
the validation hash is being pushed into
the dependent validation keys array so
the real
why this is done rather than having a
specific property is because there could
be validators that are concerned by more
than one property for example the
confirmation valid bit confirmation
validator imagine you have a password
confirmation and you change your
password confirmation it's are you
change your password field and you go
change your password confirmation field
if you change the first field when you
get the second field to being equal to
first field is it should be observing
both field so if you go back up and you
change the original password field the
confirmation validator should fire again
and should now show invalid so we want
to be observing all of the proper
properties for each validator as
possible so if you want to write your
own custom validators that are very
complex you want to observe more than
one given property you're going to push
those on to the dependent validation
keys array and then when any of those
properties change or notify property
change on those properties the validator
will run the call function so in the
base valid air this is empty by default
each of the other validators we'll see
in a second the presence of a later will
extend the sound this is the function
that actually gets run every single time
your valid air fires finally each
validator has an is valid flag the is
valid flag is actually checking to see
if there are any messages in the errors
array so the if you're not familiar with
computer properties number I definitely
shouldn't read up on them they're
awesome but the computed empty computer
property we pass it this this array path
it will actually go through and make
sure that the array is empty and if it
is is valid it's true if it's not as
valid as false and episo facto so we
know that our validator is our
validation failed if there are any
errors in the message sorry there any
messages in the errors rate the
president's validator here I'm just
going go through one of them but this is
a simple example extends off the base
valid air you'll notice that there's a
local namespace I started out by name
station local and remote
no there is no support for remote
Valladares yet the unit function will
first call up the super chain so we want
to grab everything that the parent class
has then down here it will actually set
up the message type grabbing the message
or render the message rather from the
ember validations message property so if
you've dug into rails validations the
blank you can see a bit this guy right
here that's i use the naming conventions
off of the validation messages from
rails so if you want to change the that
message somewhere up the chain in the
Ember validations I tin and library or
support or in Jim's Rosen's you would
change it on blank finally the call
function is again what gets run and if
the validation fails it pushes the
message on to the errors object so if
you have a far more complex validator if
I were to show you the length validator
you'd see multiple places where there
are potential for messages to be pushed
on to the to the errors objects because
there could be multiple it could be
multiple configurations for the ability
or fail so this starts a tie into what a
concept that I've been talking about for
a little bit called the validation graph
and the validation graph is an idea
where you have you can build up very
complex validation scenarios amongst
different objects that are related to
one another very very quickly in ember
validations so to get a bit
understanding of how that works when you
actually mix in the umber validations
nixon into an object and that object
instantiates it creates its own
validators array that all validator
instances get pushed onto oh that's what
number two is so created the array
pushes the instances the values on that
and then the object that not the
instances of the validators but the
object that you're actually valid
it has its own is valid flag and that
will observe the aggregate property of
valladares dot at each is valid that's
not a valid path but gives you the basic
concept that it will actually filter and
find if there are any is valid flags on
any of the validator instances that are
false then the object that you're
validating is false if they're all true
then the object that you're validating
is true here's the here's a base very
sorry water down example of this I
didn't actually assign variable names to
these but imagine that the top amber
object is an owner object and the bottom
one is a dog object and there is a
relationship between the owner and the
dog dog or sorry the owner has one dog
so down here the dog object has its own
validator validation rules and so if the
name is not provided that dogs is valid
States going to be false up here in the
owners validation rules I provide a
property that references the path to
that relationship instead of passing in
a hash I pass in just true Emma
validations if it sees true instead of
instead of an object it will make an
assumption that we're dealing with a
relationship now and what happens
internally is that it will grab that
relationship object in which case is the
instance of dog it'll push that on to
the validators array reason this becomes
important is because the validators
array only cares if each member of that
array has an is valid flag doesn't care
if that given member is an instance of
validate or not so you can have a nother
ember object pushed into that array that
has its own validation rules and then
that ember object could have other
objects that are also in there so you
can start to imagine that you can build
out a very deep what I call the
validation graph very very easily so
here simple animation describing this if
you imagine that each of these blue
circles are given object and each of
these blue circles have their own
validation rules so this may represent
this tree here the relationships amongst
different objects and if one
all the way the bottom if like this like
has a length valuer that is not
satisfied that validation state will
bubble all the way back up to the top so
this allows you to build a very very
complex when I call validation graphs
very easily it's actually worked out to
be pretty pretty cool so amber
validations that's that's the gist of it
there's there's a good more detail in
the readme on the github on the github
project but some known issues that exist
in the projects as I'm sure people have
questions about because these are the
ones I get all the time no uniqueness
yet one of my devis has a PR pending
right now on implementing unique Nick's
I was holding off for a long period of
time only because I was hoping that the
Jason IP i spec would have some opinion
on this but it doesn't seem that be the
case so I want to wait any longer the
other side of it was I did not want it
library to have any opinions on how the
remote API should implement uniqueness
or my one of my guys came up with a
pretty good solution for this so this
will probably get pulled in ending
getting around to it handling
server-side errors so client-side errors
fine number validations but what happens
if you're using ember data and you are
you submit your data and then the server
responds the 500 or responds back
whether its own set of validation errors
I there is no good answer to this that
I've come up with yet at least but I
think that if we look back at one of my
guiding principles of the beginning was
that the validate client-side validation
should only be used to guide your users
to to using your application it will
help resolve this so imagine if the
server does throw 500 we want to be able
to show that in some way we should be
able to render that properly what if you
have a property on the server that
doesn't map directly back to a property
on the client perhaps you may be able to
resolve that in a serializer and
actually map it back yourself but what
if it just doesn't exist what if it's a
very specific
server-side property that is as no
concept on the client how do we actually
properly display or how do we actually
even allow the user to resolve these
errors on the on the client one thing
that we've been kicking around is
actually having a base property that
gets mixed in from member validations
and then this is just used for
presentation purposes of here is the
errors object that was returned back
from the server we're not going to
actually consider this as being part of
the validation graph we're not going to
prevent it from being an is valid or not
valid not valid state but if the user
needs to be guided in some way that
would be your opportunity for doing so
but again not done yet I keep going back
and forth on where the proper place to
mix in your validations are most of the
time I think controller is the proper
place the controller is the context in
which you're interacting with your data
if you mix validations into your model
that essentially locks you into a global
validation global validation rules for
that given model but when you start
working relate with relationships you
can't go from the model layer up to the
control layer inside Ember so it becomes
a little tricky actually handling the
direction of that data between ember
data models for example and need some
updating I wrote again I wrote this a
while back and it shipped in kind of
building on the tech debt and it's using
the old ember build systems so bunch of
Ruby stuff in there we're going to yank
that out pretty soon and move it over to
broccoli all es6 modules and once that's
done then we'll probably start doing
some rapid updating of it I'm hoping
that we can roll out if I can resolve
number one and but I get something in
there reasonable for number two we can
get at one point o loud eventually soon
okay so every easy form the complement
of ember validation
again rails influence if your rails dev
you're probably familiar with a gem
called simple form allows you to build
out more complex valid sorry for markup
very very very very succinctly and easy
form is influenced by that the user
experience in farm conversion opinions
of easy form it comes from a research
article that Luke Wroblewski did for a
list apart back in 2009 so how easy form
actually works with the user experience
for EM of ala dacians is that it takes
what W did in that article and the he
took part like the multiple ways in
which users can enter in data and which
one actually yielded the best conversion
rates and seemed from the article in the
data that he had the best conversion
rate was if you are not presented with
the error until you tap out of the form
elements and then when you tab back in
as soon as you correct it it goes away
and then a suit as long as you're still
in there if you make another mistake it
comes back until you tap out in resets
I'm going to I'm going to show that to
you I know maybe my description doesn't
sound fantastic but i'll show you a demo
of that in a little bit so here's the
syntax for a very basic form with easy
form it takes a form for block helper
you pass in the context you're going to
be working with in this case just using
this so you can pass in model or any
other any other object again easy form
does what works with ember validations
it's not married to it I mean I know
there's the hugging of the tiger earlier
on but all it cares about is an is valid
flag in an errors object so if there is
another validation library out there
that is exposing that type of API it
actually should work as well easy form
will detect those properties and will
set things up
so anyway that will spit out this markup
so you get some I guess one person's
opinion on what would be a semantic
markup for a forum and one thing you'll
notice right away is why is there a form
element for a single page application
what purpose could this possibly hold
it's because we have a submit button and
the form element is actually a view and
we're capturing the submit action submit
event rather and then we send the action
up to the actions hash in either for you
to handle on the controller or the route
it's submitted as a sorry it's sent as a
submit function so all you have to do is
to find your own submit function sorry
submit action the input is in here and
i'll probably just mess this up at some
point in the next few minutes but so
type text for input is the default the
conventions that I employ that I put in
for easy form again we're brought over
from simple form in rails and strings
are of type text and i'll show you in a
minute that if you define if you set
your input as type text it'll be a text
area I know that sounds look confusing
still 3 1 point 0 so I'm open to debate
whether or not that should be there if
you've done your own labels inside Ember
I'm sure you've run into frustrations
with how do I actually get it to link up
to my input element because those IDs
are programmatically generated for you
there the Ember grids some solutions
that you may have come across is
actually because label can be a block
you may be just wrapping your input
inside the label but what if your design
calls for something different your label
it doesn't make sense to wrap your input
and label easy form hails us for you
automatically it will grab the quid for
the for the input rather for the
property I'll set it up as a four
attributes on the label which of course
matches the ID on the input so that's
all set and finally there is a span of
class error that is in there as well and
that's where all the error messages will
be rendered out to you
can add a hint if you'd like so on the
input yours do hint equals and passes a
string and it will give you this span of
class hint inside the inside the input
div and here's the type text sorry as
text so you can change the type of the
input it defaults to string which gives
you an input of type text but if you
give it a text string as the type up
here it will give you a text area again
confusing I agree there's all the
different types that easy form will take
so string default check box select
password email Earl URL everyone
pronounce it tail color search number
date realize together there's no range
in there so low hanging fruit if anybody
wants to submit a pull request I another
nice thing is that it will actually look
at the property name and it will try to
give you will try to intelligently give
you a the correct input type so if you
have a password property or something
that has password in it for example
password confirmation it just does a
regex on the property name seizo is
password and then it will give you an
input of type password does this for
other ones as well email URL color tell
I don't remember why i set the regex up
to it has to start with tell but i'm
probably because tells pretty short and
could be anywhere else in the string but
i did like that and then search and
finally property value if your property
has a given value it will try to be
smart about setting the input type
properly so in this case we have a date
and we can see that easy form actually
set the type for the input as it as a
date type on the options here are the
ones that it will try to match against
our numbers dates and bullion's
bullion's will render a checkbox there
are no radio buttons in these
form that's not my fault because there
are no radio buttons and ever so don't
blame me I know there's a bunch of
different solutions out there but none
of them seem to have made it into the
core library yet you may not like the
the order of the elements that the input
helper renders out so you can actually
change the input / from inline helper to
a block helper you pass it the proper
name and then you're going to actually
give it a full you can't see it because
it's Reds kind of a great color but
there's actually says input dash field
and labeled ashfield in there whereas
the previous examples had the label
render above the input now we've
reversed that and so it respects the
order in which you are defining it here
so we have input first and then we have
label second and the four helpers that
are used internally our input dash field
labeled ashfield error dash field in
hint dash field there is no field for
equivalent just yet on actually not a
very good one on easy form field for
inside simple form was a way for you to
actually build out semantic markup for
relationship objects as well but now
that the with helper inside amber has
been fixed it's going to be easier so
the reason why I was holding off on it
is you can pass in a single object as a
relationship we can pass in an array of
objects of the relationship the array
objects is easy to render out we just
pass in each and then we can define the
item controller for the each however
with doesn't did not previously have an
item control our declaration on it I
added it about four or five months ago
then when someone found a really bad
error and so I held off on implementing
it inside easy form and or its wait for
that I already get fixed and I think
it's going to be fixed for the next
release of Ember it
was the patching landed like yesterday
Eric to disco and need some updating as
do all my library's no valid state so
this is something I really want to add
in if imagine on each year input
elements sorry the containing give that
if you're typing something that's
invalid it shows the validation error
message you may want to show like a
little red X or something and as soon as
you fixed it you may want to show like
green checkmark yay I just haven't added
that in I think to be really cool so
that's it for my presentation we're
hiring in Boston if anyone wants to move
to the sunny shores of Boston dockyard
we're all so we're full stack
consultancies so we do design we do
project management we do build out as
well and probably startups we handle it
all and as Leah mentioned we're also
organizing we good ember in Boston
that's our crazy tom stir logo that Tom
said was exciting cause of nightmares so
that's it thank you guys very much</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>