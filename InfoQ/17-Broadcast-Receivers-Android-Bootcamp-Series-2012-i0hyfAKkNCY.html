<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>17 - Broadcast Receivers: Android Bootcamp Series 2012 | Coder Coacher - Coaching Coders</title><meta content="17 - Broadcast Receivers: Android Bootcamp Series 2012 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/InfoQ/">InfoQ</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>17 - Broadcast Receivers: Android Bootcamp Series 2012</b></h2><h5 class="post__date">2012-02-24</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/i0hyfAKkNCY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so we're creating a boot receiver right
a brand new booty server okay so just
like before whenever you start a new
receiver or any main building block you
extend something from the system yeah
organize imports or ctrl shift oh and
then add unemployment methods
so this is now our template for running
a running the broadcast for writing
about vodka 20 now what do we want to do
in this on receive method this is the
one that wakes up once the system is
finished booting what is that you would
like to have done start a service
alright so how would you start a service
ok sure new intent or the command used
to start a service start service for new
intent and then you type in some kinda
intent we used to use this comma or
let's say update their service service
both class and this doesn't compile
with that I want to start it almost on
its service the system boots up I want
to start a service switch off his own
always running you know how like when
you boot up your phone and if you look
at the running services like I showed
you guys yesterday I had a gazillion
services if you if you recall let me see
if I can pull the thing up again but so
applications running services
and let me do this oh I need to plug in
both sides of the table what a concept
that is damn oops another strong I
wanted to show you this screen right so
so i have google voice three services
facebook one service ended open one
service google+ room service i did not
start it services trust me they're just
there right there just get started so we
want to be one of them play with the big
boys right so how do we do that so
that's that's exactly what we're doing
and it's going to be like it's going to
be a couple of lines of code so why is
this not compiling history we still have
to register that's correct I mean your
pecan kids know that you do yes yeah
well do that what else yeah so where
does this where the start service come
from context so an activity and
activities and services are context
receivers have context so it's a
slightly different relationship you
still everything still available to it's
just that you keep done inherit but you
it's a has a relationship right so the
context is given to us right here
context just design something
differently okay so as opposed to saying
start service we say context dot start
service and also supposed to
passing this would pass context that's
the only difference I think Oscar yeah
yeah we're going to do that in the end
SEC second so so far what we are working
on is this part of the equation so we
are saying what happens when this wakes
up we can now define we cannot subscribe
it to subscribe for anything the context
represents the context in which
something is running so it could be an
application that's application context
it could be an activity which is usually
than the same context as the application
context
yes depends on what you subscribe to all
right if you can then be subscribing
part yet we've only done have one half
of the equations of yeah yeah yeah we
haven't registered so one thing that I
would also do is it would add the law
cat here just because otherwise we don't
know that this actually happened so just
say log Dodie com well actually I don't
care about this i'm going to cart put it
here
it's just to be calcium visual
confirmation that things are working as
you can see this is just couple of lines
of code
Oh
so far so good
so what what we do next is we need to
register this broadcast receiver right
so what do we register it manifest
father and so that we register
everything in a manifest all right so
just like with CAD activities services
and so on we just add a receiver at all
space receiver control name and the name
to read dot boot receiver
now the way we register for something is
via intent filters so basically system
when system is done booting what's going
to happen is system is going to
broadcast an intent it's going to go to
the top of the mouth and say I'm done
booting right the guys could get
notified about that are the ones who are
filtering for that message right you
might have seen an intent filter here
but we haven't really used it before it
was kind of given to us by the
boilerplate code so now we're actually
going to use an intent filter to filter
for that message that's how I subscribe
right so what I'm going to do here is
I'm going to say control control control
space intent-filter okay and then within
intent filter i'm going to do control
space action and control space name
yeah so it's the action that triggers
waking off of this broadcast to be a
broadcastreceiver by intent filter so in
other words action must match like
action could be anything it could be
Bobby right but you would really then
have to have a broadcast it says bar so
how do you know what broadcasts are
available but one Kwazii useful place is
to go to android developer android com
and type in intent and go to the
documentation for intent and here you
have some of the common types of
broadcasts or intensive the system sends
all the time right these are actual view
actual attached action pic mostly to do
with you I broadcast actions action time
take action time changed action package
installed action you know power
connected action shut down on the sides
and then there's also a boot complete
somewhere I did yeah you think this is
alphabetical so that's the one yeah so
there's the there's the message the
system is going to send to the world
once we're done pulling right so what
you need to do is you need to copy this
left this value letter by letter so make
sure it's not boot complete its boot
completed all right pop it and paste it
into your home
so far so good now this is one part of
the equation the other one is that we
must check if we have permissions to get
this notification so the way it works is
the system is going to send this
broadcast message only to those who are
allowed to get ya so if you're not
allowed to get this message notification
nobody's going to come to you and say
hey I got something for you but you're
not allowed to know about it so I can't
tell you what that something else it
doesn't work like that it'd be too much
information okay so in the case of
activities if you try to do something to
not allow to it just breaks because
you're explicitly trying to do something
you're not allow to but here because you
know you're on the receiving end even
telling you that you're not allowed to
receive would be too much information it
will be a security problem so you you if
you don't need to know you don't know
right so if we want to know and thus we
want to make sure we have the right
permissions so to do that we you go to
documentation and it says you must
called receive boot completed permission
in order to receive this broadcast so
now if I click on that that's a Java
constant I need the actual permission
which is this long text it says boot
receive boot completed right suit copy
pasted Zandra intent and then I will
need to add that into my progressions
something like that so we're going to
ask the user to give us permission to me
that we should be good
Oh
so to test if this is working what we're
going to do first is we're going to
install it don't forget that because you
just change the code you need to push
this code into the device because
installing a tonal device analyzes the
manifest file and actually says oh look
this guy has a boot receiver and we need
to notify loved one so make sure that
you run your code if nothing else is to
restore it to n2 inside
ok
so far so good so what we would want to
do next is we would want to finally shut
this guy down it's not my favorite soon
as you guys know because it takes the
time okay and now you want to start it
but you don't you want to study in a
particular way you started just by
powering it up in other words not from
some snapshot not from some running some
app you just want to turn your phone on
the equivalent of that right so that
would basically look like this you have
to go there you would say I wanna start
this guy you can start okay I don't want
to wipe user data arc and I do not want
to launch him from snapshot just want to
launch it just power it up
take some time so let's see so I cannot
even unlock this phone right they
haven't done anything let me see the
logcat first
okay so let me see a distance like our
auditor service right let me see adb
logcat boot sewer star star sounds on
the first three are not our booth
receiver the last one is say work
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>