<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>22 - Lists &amp; Adapters - Part 1: Android Bootcamp Series 2012 | Coder Coacher - Coaching Coders</title><meta content="22 - Lists &amp; Adapters - Part 1: Android Bootcamp Series 2012 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/InfoQ/">InfoQ</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>22 - Lists &amp; Adapters - Part 1: Android Bootcamp Series 2012</b></h2><h5 class="post__date">2012-03-02</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/LAPIzskHlEs" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">okay so just to kind of walk you through
it so basically what you said usually
what you do is you start with an XML
file so I'm gonna say I'm going to click
a little a plus create a new layout I
put a timeline xml it's going to be a
linear layout damn finish there it is
right I said world's simplest to i right
so there's our you are there's our large
text and then I'll put another it
doesn't really matter you can put medium
text any kind of tax to the heart if I
couldn't care less about that then I
said make this one be make this one take
all the space right bamm-bamm done and
then make this one be centered BAM
Center done okay so we got we got the
world simples too i right piece of text
here and piece of text here right this
is going to be a titled it's going to be
some output eventually save it now the
we will need a corresponding java class
right so right click new Java class and
I'll give your name timeline activity
right to be consistent you basically say
extends activity just like before right
organize imports and then the only
method that we universally almost always
care about is the oncreate right on
create BAM done and you put that
infamous line 11 you can copy paste you
can call this is basically hello world
you can copy paste it right I'm not
doing anything new just that in hello
world this was already given to us and
now we just get to away created but
again if you can copy paste it so r dot
layout the dot timeline oh right and
like i said before whenever you create a
new main building block you got the
register it okay so that
means dropping in a one-liner here
somewhere you can just basically
activity name dot timeline activity
that's it you're done and if you want to
launch it you will just put it in status
data we already have oh we don't have
the button for it alright let's add a
button for it first not preferences but
menu menu and we had an item right and
we call it item timeline give it some
kind of title again you can just quickly
say new string timeline timeline and bam
bam save it and then in status activity
we need to just launch it so status
activities going to have that big case
statement so somewhere here you say case
r dot ID dot item timeline you say
something to something and in return
true and that doing something could be
as simple as startactivity porn for a
new new intent this timeline time line
up line activity dot class that's it so
those are the fast i modified then you
run it
you click on menu look there's time line
and one there's our world's simplest you
i right
super goddess okay you guys need some
time so when you look at it when you
look at the xml file this is really i
mean like i said you can pick a team
here and like this doesn't really do
anything this is just more about you
know pretends to kind of give you an
idea what it would look on the real
device but what team you're really going
to use really depends on uh on what your
flight yeah yeah and what we did you
know our main thing we said team dot
light so for example i could copy-paste
this and apply that theme are we applied
it to i applied it to application so my
entire application is going to light
young and for and what i did also is in
the status activity in the other so if i
look at layout in the status that we
apply it style to a bunch of these
properties right so if you look at it
here what we did is we applied that
title style to this one and background
blue to that one right it feels like
exactly so here i could do the same
thing say this title is going to have a
style that so then i can take out the
gravity i can take out the appearance
right so i got style and i think i'm
gonna leave late well technically i can
take out layout within height as well so
layout width and height and I'm not
gonna need the ID so I'm simplifying it
quite a bit so anyone the background to
be blow just like we had in the other
guy I could day I could copy-paste that
line and put it into my code as well
like that's now it would look more blue
ish
right now I'm possibly not the best
choice of college but ok so now that we
have this wall simplest do i right i can
again i'm going to close all i really
just wanted to have the new timeline
activity where we can actually do some
interesting stuff right this is now back
at the level of hello world right so it
wouldn't be nice if we were able to read
the data from the database and put it
into that you i right I mean that was
the goal that's our design that bizarre
back of a napkin design that's what it
says create this timeline alright we
mostly got it now reader data and dump
it into the screen because right now we
just we can verify the data here by
going into psycho light like which
normal users we can and we can verify
the data here by going into log D which
normally is you can't right so if i look
at my timeline activity again a couple
of minor cosmetic things i wanted to
change the text here to actually be the
tags it tells time line and then this
text it could actually be empty right I
don't need any text here because this is
going to be my output so I'm going to
yank out the property for text however
I'm gonna care about its ID because
we're going to be presumably
programmatically now setting the value
of this text right so I usually call
this one text underscore outdoors luck
is short for output you can call it what
everyone okay
so now in my mind activity what they're
going to do is I'm going to do just like
what we did on Monday I'm going to
define the text view text out this is
going to be our output control shift
talk to organize the imports right and
then you locate it after what used to be
a line 11 do one way you inflate the you
the picking the stuff so i'm going to
say text out is going to be text view
find view by ID r dot ID dot and then
you find your text out and this point we
have our output
now how do we now find deep are we going
to get our datum what does the data live
updated lives in a database and what's
our abstraction for the database stylist
datum yeah cool so status data cares all
this like methods to help us get a job
done and it's got this great method
called insert but there's no there's no
read reading method right so what we
should do is we should create design
another matter that's gonna return the
data so that method is usually called
alcoholic query and there's a reason why
I'm going to use that name because later
on it's going to match some other names
namely content provider so I'm going to
create public we want to return a list
or an array it doesn't really matter
only a list list of status wearing
organism port right so query is going to
return a list right and we're going to
have list of status list is going to be
a new array list
something like that you guys are
familiar with you guys no more generics
are and all that jazz right no I quick
overview so when you say you don't have
to do this look Bam Bam Bam right stop
up you don't have to do this you can
just say I got a list right and and
that's fine and then it since it's a
list of anything it's really a list of
objects because object is the mother of
everything in Java now the problem with
this is that you could like accidentally
put the wrong thing in like maybe you
put studies tax as opposed to our status
so compiler can't really check for you
for that so Java 5 which is you know was
introduced back in 2005 but since seems
to be like new to a lot of people for
whatever reason i introduced the concept
called generics right where basically
you are boxing what can go into this
list so by saying it's going to be a
list of status that means that only in
only twitter status can go into this
list you can't put elephants or
locomotives or anything like that right
it's got to be a twitter status but
everything else is gonna cause a compile
compile time error right so it's just a
much better way to do things
so so that's a so that's what you want
to do there cool so now that we have the
list we need to figure out how to query
the database well there is something
called DB dot query right so just type
in DB dot actually we should prefers get
a DB so DV Yelper don't get readable
database right and i can say DB dot
query and that's going to give you one
long method around there
so DV don't query says okay what's the
what's the table name that you want to
to get I'm going to say it's going to be
a table because we already have that
what columns do we want well if you put
now it's going to give you all the
columns selection and selection arcs if
is if you're doing a where statement
like where ID equals 47 or something
like that we're not so I'm gonna put now
and now for that group by do you guys
know what group I is in sequel some of
you doing okay good I don't I'm gonna
put now having you guys know what having
is all right it's usually people don't
know what I'm talking about I just put
now now now so essentially this is
equivalent to set to select select
select star from status yeah yeah you
could we could order by creating that
sure we could say order by and then you
put sorry we don't need order by we just
need the column created at but we wanted
descending yeah so yes we can do that
just make sure don't forget this little
space here because otherwise it's going
to be all the bike crazy a desk and it's
going to get confused right so remember
to put that there
so far so good um okay so so now that we
have what is this DB to query do so this
is equivalent of select star from status
order by this created a descending now
what it actually returns is something
called the cursor okay so we actually
get something called cursor cursor so
you get an object called cursor yeah
what cursor is is an iterator so we can
now iterate over this cursor okay so
basically what we can do is we can do
cursor dot move to first
again and then we can do a while how we
can or we can do a do while
actually that's the while while cursor
move to next that should actually not
skip it should position the first so
this method will turn follow through the
cursor already passed the last entry
move the cursor to the next row weather
moves ok so they should they should be
fine so let's do a while this we're now
iterating over all the instances of the
data so essentially what the cursor is
going to correspond to is a one line
aight one record in the database right
make sense so cursor basically points
the entire blob of data but it you
iterate when you say move to next move
to next move to next you're basically
going to next next next row so it's done
this way so you can deal with the
infinite amount amount of data right
because it's just a pointer to some
possibly very large data set right now
once we are inside of this this thing
what we can do is we need to create a
new status ok and from from this cursor
all right so we're going to create a new
status from a cursor so remember cursor
corresponds to a unit off something from
a database now I could um what I could
do is I could do it all in here but it
may be cleaner if we do a little private
method here just to kind of like to a
helper so create a little private status
wrong person
so this is going to extract right so
this is going to start
so basically we need to need to
basically return see user yeah there's a
Jason approaches well um that kind of
sucks that can create an empty cursor I
mean let's take a look at this so status
there is no constructor and there is no
factory method
Oh
let me say the best approaches
user text so this in this place the
documentation says so user ID and
created act and sucks okay um okay so
let me see this I actually got
deprecated so um think about is you want
to return you know what let's just do
this let us return a query here let's
look like this we're not gonna do the
cursor we're gonna just returned a
cursor here I'm gonna I'm gonna already
design this you can take this one out
okay I just do this we're gonna return
cursor here keep it simpler and then
we're going to do that logic in the UI
so just keep keep the alright because we
can't we can't do the I'm gonna return
we can create a cursor we can only get
it directly from the service
unfortunately so it's fine we're just
not not going to deal internally with
statuses we're going to be able to
cursor so we're going to basically get
they open up the database for eating
query it and return the cursor done good
now in timeline activity we're gonna get
at cursor and the fun cursor here
there's there sir
so cursor is going to be we need to get
status data right so so yeah I'm going
okay and then get application right dot
status data dot query it gets to the
cursor so this is our view this is our
output this is our data right now what
we want to do is we want to populate the
output with our data okay so to do that
we can iterate over the cursor here what
I was going to do in that one in
maternal nice list i'm just going to do
it here instead so say well cursor move
to next right we're going to do
something so this is not iterating over
that data
so far so good
so what we can do is we have this text
out that's just a text output what you
can do is we can append to it we can do
text out dot append and then some kind
of text right now that text could be
something of this nature string dot
format and let us say who said what
percent as calm space percent us right
so within that and I need to figure out
who said what let me temperatures to try
to less confusion just going to define
the variables here a shrink user right
and string text right so that's who said
what so what's going to go here is going
to be user context right something like
that make sense now the question is how
do we get a user and how do we get text
will remember that user that cursor at
one point is actually represents the raw
of data so if I go if I go to my sequel
light and I do a select star so select
star from status yeah this is my this is
the entire cursor points to this entire
blob of data the entire table dump right
one particular during one particular
iteration through that cursor points to
one particular row so a particular role
may look like this this is ID this is
time-stamped this is the username this
is the actual text of the message exam
so now too
get the username this guy here that's
basically zero one two that's a second
item right so I could do something like
this cursor dot get call a get string at
column two and four texts i could say
cursor dot get string or country yeah
yeah so I'm getting to that yeah
now the problem with this approach two
and three is that it's extremely unwell
right it doesn't mean anything to anyone
it's really easy to mess things up if
you ever change your database schema
this you gotta remember to change this
and it just it's just a poor programming
so a better approach would be to do
something like this cursor dot get
column name get column index for column
name and a column name would be column
would be status data dot column user
right and then this would be you know
this would be column index for school
name sales data context right then
presumably those are constants so we can
we can do that outside of the Lupin and
so forth right
but I know this is not optimal and these
kinds of things could be done outside of
the loop and this can be done outside
the loop but I don't really care about
that too much it just for legibility
I'll just leave it like this for now
we're gonna rip this apart anyway but
you know for now it's fine so basically
we are getting our UI right we're
getting our data and then we are
iterating over our data and getting the
username and and the user the text piece
and appending into our UI right that's
it so if i run this is that i may want
to do like a backslash n here so that it
actually doesn't know more glue on the
same line so if i run this
you
yeah I go to menu timeline there's the
dump right guys so we got our data who
this is the only new thing instead of
security status data was just basically
doing we're returning this we just got
this method called choir
yeah so yeah so what are the problems
with this right now yeah for one you can
scroll so I mean it's good for the first
you know eight and a half messages or so
so you can't really you know you could
want way to solve this problem would be
to just print everything in a smaller
font you can't you can't scroll no well
okay I'll take a look at all so that yes
there are problems there there are
problems with this one right so we're
going to solve them next yeah but but
first we wanted to do the simplest thing
possible just dump the data iterate over
it and dump it right bamm-bamm that's
what happens great well alright any
questions or comments</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>