<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>JavaFX &amp; Scala in the Cloud | Coder Coacher - Coaching Coders</title><meta content="JavaFX &amp; Scala in the Cloud - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/InfoQ/">InfoQ</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>JavaFX &amp; Scala in the Cloud</b></h2><h5 class="post__date">2012-09-26</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/g_-_78qcsAA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">my name's Steven Chen I work for
oracle's a Java evangelist I could
follow me on twitter at stevens ave and
my name is andrew phillips so I I work
for a company that cement is evil and
the deployment automation but I spent
too many evenings and early mornings
working on J clouds which is an
open-source Java cloud library and we're
gonna we're going to show you guys the
combination of some technologies you
might not traditionally think as being a
match javafx technology which is a rich
client user interface technology scala
which is a JVM language that many people
love some are proficient in very few are
proficient in I'm not proficient in and
the cloud which is a lot of hot air
literally so what do we get we take
javafx Scala and hot air obviously we
get we need a sound effect for this
thank you guys sure we don't really get
that that's not like but maybe we get a
cool conference app maybe we'll see
we'll see if we can make something come
together all right so the way this talk
is arranged as we're going to introduce
these different technologies show you
guys hopefully something new you don't
know about each of them and create an
application with an architecture that
looks kind of like this so we'll have a
cloud we're going to use Amazon ec2 or
Amazon s3 in this case their storage
engine we're actually going to have a
cached database file in the cloud it's
not a cloud DB it's just a cache
database file we're going to use J
clouds which is a java api for accessing
different clouds it's it's a kind of a
cloud agnostic what should we say about
Jake I don't know and I like to think of
it as the kind of jdbc
for cloud stuff because the idea is to
abstract away the individual things of
individual cloud providers and to give
you portability but we'll talk about
them and Jake clouds works really good
from Scott so this entire application
end-to-end will all be written in the
Scott language for the application we're
going to have Derby which or Java DB
which is an embedded you can the right
at network or embedded mode we're using
as an embedded database very lightweight
datastore which is going to be inside of
our JavaFX application and we're using a
skoloff X which is a scala binding for
JavaFX so it's all end-to-end scala
circumflex is the one of the many ORM
frameworks object relational mapping
frameworks for scala the good thing is
about the new language like Scala you
get to reinvent every possible wheel
that there is including ORM and
everything else and then you have like a
million things to choose from like you
did at the beginning of Java and
eventually that'll all crystallize out
but you know yeah the Wild West is a fun
place to be all right so why when does
this architecture actually make sense so
we're we're kind of for this application
we say that this is an efficient
architecture and this makes sense but
this sort of cloud storage of a cache DB
doesn't always make sense so when does
it make sense if your data is mostly
read only so in the case the conference
application the assumption here is we
have a large set of data it doesn't
update all that frequently maybe a
couple times a day at most and we don't
really have a lot of updates going back
to the server we had a bunch of updates
we need to synchronize between different
people we probably want to take a
different approach or augment this with
a rest interface in addition and also
this approach since you're actually
moving all the data to the clients it
assumes small to medium data set size
now about 10k records is where this you
know starts to break down if you have a
big data set you're not going to want to
take an approach like this but this is
not the total DB size so for example one
of the applications I worked on recently
was for a huge data catalog retailers
could see the whole data catalog so
they're obviously not going to want to
download it bit by bit like this vendors
can only see their data so it would be
quite reasonable for them to actually
have a full view of their data cached
locally and operate on that and then
synchronize it with the cloud
periodically so our conference app has
3k records and these are relatively
large records full session titles
speaker bios etc and it compresses down
to 3 30 kilobytes for a full database
just standard zip compression you could
probably get better if you used a better
performing zip algorithm and let's
remember not too long ago that was the
entire amount of memory that you've had
available on all your portable devices
so we're lucky we're in the future yeah
we're talking about modern yeah I know
modern it's like are out of memory more
than 72 k youth grant anyway yeah modern
modern phones my first computer was less
powerful this so okay so that's when it
makes sense now let's talk about why
you'd want to do this so some of the
advantages of this are offline operation
once you've sucked down your cache DB
either as part of your application or
kind of an initial cloud pull you can
operate completely offline do filters
queries anything you want to against the
data set and it's fast and local very
responsive since all your DB queries are
local you don't actually have to wait
for any server hits on page reloads or
refreshes or paging through data and you
get extremely high availability and
scalability basically for free amazon s3
has is designed for about how is that
for nine ninety-nine point nine nine
percent availability which is pretty
good you'd have to actually spend good
money if you wanted to get that level of
reliability in your own architecture and
it easily scales up to hundreds of
requests per second with no effort
if you're careful about how you do bit
hashing and s3 you can scale it up to
millions of requests per second anyone
anyone curious about how bid hashing
works on s3 okay let me it was a little
slight digression so the way the way s3
is composed is it has a bunch of storage
servers and when you initially create a
new bucket in there it gets allocated on
usually one of your storage servers and
each storage server can easily handle
you know hundreds of requests per second
it's not going to give any hiccups but
then when you start going like a
thousand requests per second on a single
server your performance is limited
although they they have thousands of
these storage servers so you obviously
don't want all your data is sitting on
one server so if you're careful with
your file names for how you store things
in Amazon basically they're hashing
algorithm works off the name of the file
so if you name your files in random
spots in the ascii range first character
second character third character you
will get your data partitioned across
multiple servers giving you much much
higher throughput than you could get on
a single amazon s3 estes that would mean
name of the blogs i take it yeah boss so
anyway a little bit of trivia but um
with proper use of s3 you can scale up
to even better than hundreds of requests
precise just a curiosity thing from my
side is that something they guaranteed
to support over time or is this just
it's using abusing an implementation
fact that we have now what's its it's
been documented by the s3 folks
originally it was part of their
professional support program but they've
actually talked about it in public and
the people are nurse really reverse
engineered it but at the point at which
amazon announced to start talking about
it people essentially build applications
against s3 this way now okay a little
bit of trivia about s3 so the last
advantage and you know some of us some
of us have budgets is cost how cheap is
it to build applications like this
so three thousand users with our 3 330
kilobyte data model well it's free up to
1 gigabyte an amazon one gigabyte of a
bound traffic per month and you're
you're and the free tier so that's
that's great we like free so 10,000
users would cost you twenty eight cents
a month which is about a pack of gum so
if you if you have a moderate traffic
application you know that like think
about a conference if we put the
conference application out for like Jax
we're probably not going to exceed
10,000 I don't think so but we're still
short one I can come now you can scale
to a hundred thousand users how many
people have applications web
applications which serve a hundred
thousand users here okay so you probably
but for your company yeah okay I mean
like a hundred thousand you're actually
getting two real corporate business
applications and so a cup of coffee do
you have my shoes your company spend
those serving costs about a cup of
coffee how much does your company spend
on coffee probably probably a lot
probably also especially if it's a nice
brand name comb good perks okay and then
you know a million users which you're
getting to be insanely scalable sighs
you're you know copy the video game I'll
tell play any of you and take you down
to starcraft if you want that's about
the s about the only video game which
actually um am somewhat competent up so
I mean this is this is assuming you know
you have the 330 kilobyte data size for
about the size conference app if you
have a larger application your
scalability will be different based upon
the size of the data you're storing the
cloud and also depending upon the
frequency of updates every time you push
an additional up data people are going
to download more data so you have more
s3 costs but you can see that this is
relatively cheap back end for
applications compared to setting up any
moderately sized computer
resource for actually doing the rest
interface or some sort of processing
you'd pay an order several orders of
magnitude more on serving costs for so
basically your users pay for the server
the computing power by buying the the
phone that yeah we're this is this is
the green architecture yeah we're saving
on computing and server costs all right
so let's let's show you guys kind of the
different components of the application
so we've got from late from the big
architecture you've got the user
interface so all because this is all me
that and we'll talk a little bit about
the database how we hooked up the RM and
then cloud I'll talk a bit about the
cloud and i will show you some of the
code the code the code the hall code for
this application i think i counted it
over the weekend and I was under 200
lines of code so you know a simple
application but it gets you gives the
idea that using technologies you know
Scala javafx and J clouds you can write
real applications with very very little
code it makes your code efficient and
maintainable all right so javafx 20 this
is the what is javafx 20 slide rich
client framework cross-platform
animation video integrate with web HTML
technologies 2d acceleration and some 3d
graphics it uses a prism pipeline which
gives you excellent graphics performance
on your clients and your favorite ID
NetBeans clips ontology and I should
also comment on why why javafx in this
particular use case so one of the one of
the attributes of a cloud computing
model is typically what you'll do is
you'll pay by usage so you'll you know
you're either pushing out in this case
storage or in other cases you're
computing costs to the cloud and you're
paying by how much you actually utilize
those services memory storage bandwidth
and cpu with javafx this is a client
stack all of the processing happens on
clients you're doing a lot of the UK
Europe you can code Java and a lot of
the business logic directly in the
clients you can use local databases
local storage for caching results in
doing things on the client so what it
does is it pushes a lot of those costs
down to the devices desktop or mobile
devices and you're taking your costs
away whatever caught whatever processing
and network costs you can push down to
the client reduces your cost of
ownership as a cloud user and if you
don't want to tell your customers that
you're just being cheap you can tell
them you're being green yeah griz
instead of warming up the environment
during the warming up their customers
pocket which you know they're going to
do that anyway because they're gonna
play games on their phone so you might
as well put their processing power to
give you rather have Angry Birds or a
real well I think they'd probably prefer
Angry Birds let's not go into that but
for some use cases it's nice of a real
app running on your phone anyway okay
and this is the y scala slide so what's
Scala first of all it's 2001 starting
2001 by Marty adder ski it's both a
functional and an object-oriented
language it compiles to pure byte codes
and in this case we're using it as a
straight substitute for java you could
write the same application in java it
wouldn't be 200 lines it will be more
like a thousand plus but you can do
exactly the same thing with you know
straight java code java technologies
we're using scala here as an accelerator
to make the code shorter easier more
maintainable note that it is possible to
have a pure object oriented and also a
function language at the same time I
always loved those two bullets yeah yeah
no it's it's it's it those are very
historically very different language
domains I remember Ben I when I started
on a little segue when I when I first
became a Java developer I was actually i
was at carnegie mellon i was working on
a project called the g'deon project and
we were building we were building a
interpreter and compiler for an apple
language called darwin
I knew anyone heard of that yep okay
some people know about that which was it
was very cool stuff and it was close to
Java syntactically actually on that
project we focusing on tooling so we
decided writing a whole language just to
get tooling working wasn't worth it so
we switched to Java that's how I ended
up on Java but the same time I was
taking ml classes ml as a functional
programming language and the guise of my
project they um you know these guys were
were Darwin whispers or Darwin jabbers
they just laughed him you know that
functional programming stuff that'll
never completely impractical it's not
going to catch on you can't write
relapse with it blah blah blah and you
know look at scala object oriented and
functional on top of java plus minus
believing the various flame threads that
are out there claiming that you can't do
that but you know let's let's leave it
ok so some of the reasons why we like
Scala static type checking so some of us
some of us really like that the Java
compiler it tells us when we make
mistakes because we're not very good
programmers and you know scholars great
it it tells us like those puzzlers would
actually feel it most of them something
the hope that the reason the positives
exist is because you know there's
closures we don't have to wait too long
was it twenty thirty to something like
that such offer I in or whatever I think
it is Java aid now but yeah okay and
declarative so you can express the UI by
describing what the UI should look like
this particular flies to the wastes
Calif X applications look and then lots
of cool language features and place'
conversions give you kind of this
dynamic behavior like you wouldn't a
scripting language operator overloading
lets you kind of redefine user
interfaces create dsl's and deleted in
that specialized or some cool little
language features which i use in schol
effects so i punted on this yesterday
this is my last um borrowed slide from
yesterday's deck is anyone curious how
these work since i mentioned it twice or
you go for you okay
implicit conversions by the ways that
one of the things I like about the orb
in general is that of course since it's
a JVM language ultimately you can do all
this stuff a lot of this stuff in Java
let's do it after that I think that's
more interesting so you guys know how
implicit conversions work in scholar
what they are anybody yes you can put
your hands up you won't get chopped
there's no sniper sitting in the back
how about you have you ever seen what
implicit conversions look like okay so
so let me try explaining as you help me
yeah because it hurts your brain a
little bit to think about this so the
problem one of the problems they pose a
conversion solves is like in a language
like Ruby you just you just add methods
like you could take the string class and
you could just add a method what's a
good example of a string of a string
let's look at a string method we could
add oh I Noel trim our trim our trip
find loss but one whatever let's say we
wanted to add our trim two string method
in groovy you just go along it to add a
method in and that that is completely
not typesafe because how does your
compiler know that these methods are
being added into arbitrary points in the
program right so scholars approach to
this is what you do is you create a
class called enhanced strength and
enhance string extend string actually it
doesn't have that doesn't even have to
get on stream so but enhance string has
a method on it called our trim and that
will you know take a string trim off the
right side and the enhanced string
accepts a string in the constructor
usually so it takes a string and it does
kind of a delegate so what the implicit
conversion will do is you create a
posting diversion from a string to an
enhanced ring wherever you call stringed
our trim it will create a new instance
of an enhanced string call the archer
method on it and then return the result
of that all without you actually having
to write the code all you do is string
dot our trim
and it magically like conjures up a new
enhanced string object calls the method
and the returns it so I mean when you
you in Java I've seen this pattern far
too many times is I don't know you get
something back from the commons
collection library and you need to
convert it to something else so all over
the place there's a to some no to my
string to my collection to whatever in
front of the thing that you actually
want and that just clutters of your code
and essentially implicit what functions
in this case are just a way of getting
the compiler to do this thing for you if
you have something and it doesn't quite
fit it looks for a way to basically
apply a function to the thing to convert
it to what you would need and you don't
see it so it allows for a lot of glue
stuff without cluttering up your coat ok
so anyway typesafe extensions all right
so look at some code you got you guys
can all read that right we're all
software developers so we should be used
to reading small things on the screen
all right so on the left is our java
application see we actually we should do
a java version of some ago on the right
is a scholar version this is the job
this is the UI code and we um we
actually the Scala version cuz cuz you
know I use this funky brace convention
where I put a brace on every single why
I think I'm I'm breaking some Scala well
breaking I mean the Scala goes back to
sew some rules not it's not very Scala
like taking a lots of braces out but you
know a lot less characters yeah so
almost half 1200 semicolons emitted and
let's take a look at what the sum of the
Scala code looks like so this is the
application for those of you done schol
effects applications this will look
pretty familiar you extend JFX app which
is the base schol effects class i'm
creating an estimate model will talk
about the model on a second but here is
the stage that's your window width
height create a scene i'm using a stack
pain for the top level in that setting
of Phyllis's you know very basic stuff
and you notice the nice declarative kind
of nested structure it kind of looks
like the user interface we're creating
at the stage the scene is in the stage
and then we're going to add additional
elements for the foreground the
background as children of the of the
scene loading an image is really easy
here's the Java one logo popped off of a
resource file the image class is a
reusable image object the image view is
what you actually put in the scene graph
to to display it and the nice thing here
is having that separation you could have
one image in multiple places and it
would only be loaded once you could crop
it resize it do different things with
the images via the image view class but
then have a single image object backing
all of those creating buttons so we're
going to have some buttons new I think I
saw some buttons in our picture yeah I
remember there there were one or two
there and that you can see here we have
an action handler on the button which is
using closures so we talked about scala
closures so rather than having an inner
class and a lot of code we can simply
have a small closure that on action is
going to execute this code modeled
filter and then pass in the item from
the drop-down and the text and a clear
which clears the filter for us it'll
flush out the value in the text field
and then clear the filter using the
model method so not a lot of code this
is actually the slides are actually like
most of the code and the application
will flip through it quickly when we
show the demo all right and last bit of
code for now is Scala table conversion
so this code didn't exist before but the
actual the table implementation of
skoloff X didn't exist on Saturday so
you guys are seeing at the jocks
conference seeing the first
implementation of a table table view in
schol effects you saw it here first
people yeah this is this is a cue to get
at your phone zone tweet tweet tweet
week skyline effects now with table view
support
so if you notice not only is it
relatively short to write you have your
tables and table columns and then you
just hook it up with a list of speakers
and it automatically observes the list
and pulls back data but it's also type
safe so the actual fetching of values
for the first name and the last name
uses a function which takes a speaker as
an argument and returns the string back
from it because that's the generic type
of here these are speaker two strings
and for the unknown Scala proficient
people the underscore is just an
anonymous argument so that just saves
you from having to write s colon speaker
speaker don't first name so pretty angle
another 25 characters in something I've
got it pretty concise and this this
avoids you having to if you were doing
this in Java code you would need
anonymous inner classes very very long
generic definitions for all this stuff
the equivalent table code in Java is
quite well verbose so that's the user
interface we're going to talk about the
database but let's let's pause here for
a sec so anybody have questions about
the UI code or anything we presented so
far I think we need more coffee more
coffee surprised they didn't then bring
like a little stash of coffee in and
it's awesome specially yeah yeah whoo
yeah we'd share though no I know I all
right so we're going to talk about the
database model next and then finally
clouds and then you'll have a complete
application for the database we we used
as i mentioned java DB Apache Derby it's
a good choice because it a it ships with
the JDK so if you have the JDK you
already have Derby installed very very
small footprint 2.7 megabytes
it's standards-based so you can use jdbc
java sequel and it's very very easy to
configure if you're on java 6 jdbc for
just dropping the jar file in your
classpath is enough to configure and set
this up so very easy to use and we're
going to use it together with circumflex
ORM this is one of the many Scala object
relational mapping tools available and
the reason we chose it is a nice
convenient short syntax for defining
your model objects seems to have a very
good community and several leases are up
to 20 no and there's other choices for
doing ORM and scala but this is the one
which we selected and it's quite easy to
use alright so Derby config that's the
circumflex database configuration for
Derby we give it the driver we give it
the connection URL the username and
password don't really matter that much
as a local embedded DB and the default
schema for Derby is app if you don't put
this in then um circumflex does some
funky stuff and you pull out your hair
so don't forget that line it actually I
think it assumes the default schema is
default which is a keyword in Derby and
causes sequel errors okay and a speaker
domain object so the nice thing about
the the way Oh RMS work is you can use
your pojo or plain old phone a lot oh so
so both sounds wrong a thumbs bit too
much like hobos you can use our plain
old Scala object add a little syntactic
sugar to it to define what your columns
are define your primary key and your
relation in this case where we have a
self-referential object which we can
then use to refer to the different
columns inside of our table and this
this doubles as both the the object
we're going to use for storing our data
so our model object and also our
database definition you can also use
this to directly create
tables inside of Derby and no by the way
as you can see up there the string
lastname now has a function called bar
car on it so that is one example most
likely of an implicit conversion going
on there because obviously VAR car is
not one of those standard methods you
have on string that's down the Java
straight line I think it yeah probably
isn't there the end though maybe Java 20
Java 20 yeah but well by then weather
will still be using bar car is another
sorry for the bait they all right and
then to query the databases is very
straightforward so this is using the
criteria ap is inside of circumflex so
the first case we do speaker criteria
list that gets us all the speakers you
can also use a select style syntax as
well circumflex supports a little dsl
where you can do select speakers from
table speaker and that works as well but
i chose the criteria api because it's a
little bit shorter and more fluent and
same thing like in this case we're doing
a light query against it so speaker dock
criteria dot add field like % filter
string person I'm guessing that's SQL
injection safe yeah yeah so if you do
feel like drop you know foo colon drop
table app whatever yeah it cannot work
at Walmart it's not PHP folks yep
although you could do funky stuff with
the filter string of course using a like
syntax abuse but yeah yeah and then you
load all speakers into filtered speakers
and if you remember from the UI code the
UI uses filtered speakers as the list
which it listens to for changes anytime
we make a change to filter speaker it
automatically updates the UI so we don't
have to go and you know manually go to
the table and change the results and
update the UI this just what it
magically binds it using the cool javafx
observable lists so that that's that's
that's it for DB I mean there's not a
lot that's how simple the app really is
we do want to note that occur oh well
use the clicker yes so first of all in
in the in the interest of fairness I
should say a big thank you to Steve
because he's been very good and said we
a lot of the times for things like the
code but it's actually him so most of
the code I comes straight out of the
amazing brain is Steven chin over there
I but i'm getting my paybacks no no
payback well we'll come obviously so
we're gonna we're going to post this on
github right after the event so check
out my blog Steve on Java calm and
probably Jay clouds alive attention as
well it'll be part of the J clouds
examples sweet and and that's when my
period of time comes Landrieu is gonna
get a get full pay back helping me do
that now ya know you can you can only
know you can only push out the evil day
for so long wait a minute it's coming in
any case so yes obviously many thing
thanks Steve and of course also thanks
to all the jack sponsors thanks for
having us all that kind of good stuff
right so the cloud part of this so I
guess there's a few things to mention
here and Steve mentioned a lot of these
already cloud is awesome I'm not that
that's really supposedly how it's
pronounced I always feel kind of bad
when I have to say that but anyway you
know we we talk about these why is this
interesting well what are the four
things that we're looking for here we're
looking for an on-demand service that
you can kind of do yourself you don't
need a bunch of specialist consultants
to get your raid array setup in order to
store stuff it's scalable obviously well
we're talking about 330 k blobs so we
don't really have that much of a problem
with as Steve said if you use the
hashing algorithms you can really get
some very nice scalability out of here
and it's also measurable so this is one
more where the cost thing comes in in
terms of pay for what you use rather
than just paying a fixed rate in the
respective of what you're actually using
so what's J clouds while we discussed
this a little bit up front it's a it's
essentially a mullet multi-cloud library
it's like jdbc for the cloud of course
there's multiple different flavors of
offerings you have in the cloud and
we'll talk about this a little bit but
the idea here is to make it very easy
from Java to talk to various cloud
services and to give you full freedom
around do I want to stay relatively
cloud
I'll stick in the same ways do I want to
say d be agnostic and maybe switch my
back-end database same goes for the
cloud here on the force you know it we
have a it's Java it's a Java library but
it has a closure binding this relatively
large closure community around it and
thanks thanks to mr. Jim we also have a
scholar binding ish thing but the force
scholar makes Java really easy to use
anyway it's tested across a whole bunch
of different cloud providers i think
there's about 45 cloud providers in
there right now and that sounds like a
trivial thing to say for an open source
project but you'd be surprised certainly
out there in the cloud world if you look
at some of the other libraries around
there the amount of real serious
integration testing that is done and can
be done even is um how should I put it
leaves room for improvement and yet
there's a big community and in fact I
can test I can well this morning is sort
of testament of this community because
we just had a meetup in San Francisco
yesterday evening and I drank rather too
much so you know if I start slurring my
speech then that is because of the
vibrant J clouds community so in this
particular talk we're basically going to
be looking at blob stores blob stores
it's just what it is you know you take a
blob of data binary data text date or
whatever and you store it somewhere and
then you get things like you know you
have a traversable hierarchy and you
have versioning in some of the newer
blob stores and so on so that's one of
the very simple things out there they're
generally not relational in the sense
that you can't really filter or query
them very nicely and that's one of the
reasons why in this architecture we're
doing that stuff using a local embedded
database but for storing data and
potentially very large quantities of
data there's a lot of good solutions out
there I think Jay clouds now supports
about 5 or 10 different blobstore
providers you know ranging across a
whole bunch of companies obviously s3
we're using here but a 0 obviously has
storage rack space has some cloud files
HP cloud so there's a whole bunch of
different ones to choose some compute is
the big another big thing many more
providers out there right now that's
about images your virtual machines ec2
OpenStack that kind of stuff Buddha blew
up an image run stuff on it boot up five
of them whatever load balancing
some other thing that that's coming up
more and more cloud providers and now
supporting a kind of load balancing API
where you can say I want to route
traffic between my multiple clouds
there's a few networking things and so
on in the s of course as more and more
providers start to offer features that
are in addition to these three then the
community basically decides what we end
up wanting to add we try to provide two
choices let me just look at the time I
don't want to spend too much time
talking about this let's talk about the
blobstore very briefly this is
essentially what we're going to be doing
very recognizable from any kind of
interaction with any context based thing
such as a database for instance but yeah
you basically create a connector a
context to the provider that you want to
talk to you in this case you're going to
get a blobstore API and there you can
decide whether you want to have an
agnostic cloud agnostic blobstore api or
whether you want to dive down into the
provider specific API then you just do a
bunch of stuff and then you close the
context at the end so it's a nice
closeable pattern which in Scala also
works pretty nicely you know even java 7
obviously will support when is it auto
yeah yeah oh so cosmo java 7 supports
this pretty nicely too so you can you
can cut some croft out of your code
doing that there's a well I took mention
this briefly already basically in the
cloud world there is a sort of
distinction between AP is and the actual
companies providing implementation of
these AP is some of them started out as
a single company thing s3 being a very
good example it was originally a product
obviously offered by amazon and then a
lot of other providers have come out and
basically said we're s3 compatible to
the point where without it ever being
ratified as an DTMF standard or dmt f or
whatever it's essentially an api and you
can choose one of multiple different
providers that will give you s three
interfaces to interact with your
blobstore and obviously AWS s3 is one of
them Google storage which is in kind of
weird state right now is not the one
that's scale up there's a whole bunch of
different one so there's extensions to
the s3 API as well and that's one of the
things Jay clouds tries to do it gives
you various you know different options
in the sense that you would say I just
want a base blobstore I don't really
care what the provider is and then your
maximum
portability but obviously also you have
a well you have a least common
denominator type choice you can dive
down and say I want a provider that
gives me an s3 API and then you can add
things like I wanted to be in California
I wanted to be in North America I wanted
to be here there or whatever you have a
bunch of choices that will guide Jay
clouds into choosing a provider for you
but of course you can also drilled I
write down and say I want you know us
West 1s awss 3 I think that's pretty
much what we're going to be doing as
well here in this one so this is just
the code version of what we discussed
right now you create a context at the
top here you see where we're selecting a
specific provider there's also this is
scholar there's a type-safe version of
doing this as well if you want to do
that so you pick the provider metadata
there'd be a definition right of the top
here which would say something like
provide a meta data equals AWS s3
provider and then you say well I want to
log in using these are my credentials
and you can get them from a properties
file or whatever and then in this case
from my context I want to have a
blobstore context which for AWS s3 is
pretty much is this one of the only
things you can get you can't get a
compute context from awss 3 because it's
obviously a blob store but if this where
you see to then you would get a compute
context or something like that then we
we do something with it so you can see
here we're getting a blobstore API there
are two types of AP is for all the Jake
hugs things there's a synchronous and
asynchronous API so obviously this is
the sink version where if you make a
call it'll wait for something to come
back and the async one does what you
would expect it makes a call get to your
future and then you can either ignore
the result or you can decide to wait for
it or check it at a later stage and then
here we're just downloading a blob from
a specific location and then getting the
input and I think that returns a input
stream and then you close it at the end
so not too many funky things going on in
there just going to skip through some of
these before we get into the demo well
obviously we talked about portability
there there's some interesting gotcha is
there in the sense that a lot of people
claim to have for instance s3 portal for
compliance but
only ever goes so deep because of course
amazon decides to add any feature to s3
and then there's this couple of weeks /
month flag where people try to catch up
and say oh no we now support this as
well obviously why would you use Jay
clouds over just using the native SDK
the chips with Amazon you can download
the Amazon SDK and use that straight off
well yes but then you are definitely
stuck with Amazon and some of these SDKs
are pretty well I can say this quite
honestly they suck they're badly written
they're not very good there's something
about threading and then being
enterprise-grade here you know making
sure for instance in blob stores if you
do a multi-part upload you can write all
that code yourself if you want split it
up with the chunks and decide but you
can also use what one of the Jake lads
abstractions which is just a blob map
where you just put ten things in a map
and then say save and it'll basically
create a thread pool behind it do
parallel uploads of all those things
wait till they've all uploaded and then
give you the results something like that
and then yeah well let we talked about
performance there's a bunch of tuning
options for tweaking the pool size is
tweaking the timeouts tweaking the back
off policies and that kind of stuff plus
you can run on the GAE which is not
necessarily a huge concern for a lot of
people anymore but some time ago that
was a big thing you can use it in osgi
if that matters to anyone whatsoever but
more interestingly there is a an
integration with an osgi container
called carafe Apache Cara for carafe
which is turned into a very nice
command-line interface for doing
operations on your cloud accounts
basically a nice command line to start
instances in easy to start instances in
rackspace HP pod get your blobs list
your blobs all that kind of stuff which
which is nice to have across a whole
bunch of clouds we talked about the
clojure binding there's the synchronous
asynchronous spit which I can proudly
say was something Adrian who's running
around I think outside somewhere thee
the father of Jake lads if you like
invented and is then being copied into a
lot of the SDKs that that the providers
themselves ship and yet we run a bunch
of quite expensive integration tests
sometimes to the point where actually
there are some providers who say that
you know for them the definition of
whether there
cloud works is when the J clouds test
pass which is definitely the wrong way
round it shouldn't be that way but it is
the way it is I talked a little bit
about location metadata that's a really
interesting thing and that's it sort of
a bit of a 20 use case to some extent
for a lot of people they just want
something to be stored and they don't
really care where it is but you get a
whole bunch of you know you get the
disaster recovery use case I want two
copies of my data to be stored further
than so on so much apart because if one
data center goes down I have a recovery
option you have the option when you say
well for legal constraints my data can't
leave a certain geographical location
which with if you're working for the
state of California means that you can
store your data outside California and
so all these things kind of play a role
there's more metadata things their speed
and how fast is the network connection
to this thing because that has a
performance impact and so on so J clubs
does a really nice job I think of first
of all exposing this metadata about a
whole bunch of different providers and
then giving you the ability to query it
and do clever stuff based on that I
talked a little bit about the multi-part
stuff yeah you know it's not fun to
write and it's not fun to test and it's
something that's stupid if you have to
that yourself it's like trying to write
your own sharding when you do a database
algorithm and yeah of course our
communities a big thing is we have a
whole bunch of committers with drinking
problems and and no no there's a lot of
big companies involved as well I mean
catch them later for some good yeah
there's not just individual startups but
but there's also a lot of of the big
provides HP's contributing to the effort
so there are a lot of their HP cloud
stuff works at you and so on so to find
the home place to be so winner with that
I will hand the magic warm over to see
and so mine yeah so we've managed to not
actually show any working code this all
this whole presentation so that could be
a good thing when you just trust us
right obviously high level of audience
trust or it it could be a problem
because maybe the Sun this stuff doesn't
actually work maybe the cloud is down
you never happens except last week and
then some time before that and then yeah
big amazon
so this hi this is some of this is the M
skoloff Xcode you can ignore that but um
the code right here so conference model
conference you I DB utility Jake lad
detail that's that's the actual
application code that's that's it about
four files not that much code not
IntelliJ still required for scholar
development to a logic sense despite
type saves best efforts to make Eclipse
semi performance so uh if you look here
this is the conference you I class and
it's it's you know same thing I showed
basic application structure loading an
image i will rectangle here just for
visual flair and then the the buttons i
mentioned so you know filter clear
reloads an extra button i have it on
slides and our table so you know exactly
the same code you guys have seen this
hall file is will probably save another
eight characters by removing the
function call around company in these
things because i guess they're read-only
i can i can i can do it let's not break
things that's not touching but just to
say in scala you don't know no so that
does require all that is required whoops
go hide behind the it's a i will explain
it to me like it's a circumflex ism it's
a circumflex ism oh okay because in
general if you're not using circumflex
then of course in scala you can you can
it off you can live off the convention
is if something doesn't have side
effects you're just getting a value you
shouldn't care whether it's a method
producing the value or whether it's just
a field that you're reading and in fact
unlike in java fields and methods should
share the same namespace so in scala or
in Java you can't or you can have a
field and a method with the same name
and obviously by adding / ends or not it
decides which one's a call in Scala if
you need a value last name which is
defined as a string you can actually
implement that value using a method
called last name that returns a string
okay and then if we look at the actual
speaker class yeah what we show in the
slides if we look at what else have we
got here TV utility not much yeah
there's not much oh it's just about
useful actually we don't we don't even
use this code this code was a one-time
load of the database in the cloud okay
so that's not even used yeah that's
that's that's about it and then we have
we have also have the J cloud you till
class i'm not going to show that class
just because it has my amazon s3 keys in
it right now but i'm going to strip
those out and we post it to github so
it'll all be good soon yeah okay so
that's that's it and we we click run and
we cross our fingers is the cloud up
stuff is happening Oh warning oh no no
that's that's good it was a joke
warnings they're meant to happen one
thing's I'm in no wait oh and then
there's a round of applause at least
from me very cool and so you want to
talk us through some of the bits in the
UI yeah so this is a table view and it
shows all the guys you can actually
adjust columns just drag drag and drop
columns around resize stuff try not to
crash your user interface filter and
filter all the gremlin The Groundlings
back what did you do is Steve I I blew
up my own you blew up the UI I blew up
to you okay well let's try it again
Australia so for the video people there
that never happen now we try to get it
points yeah it's darah at any point I
think stop right let's do that again all
right let's see if we got I am let's see
if it gets any way I was just I was just
showcasing the the fast startup time of
the application you were indeed yeah now
we're let's see if we have any Wow Oh
see this is what years no engineers
Steve it's fun this is a nice one yes it
does work sometimes when when you are
not looking yeah yeah just like a demo
just like it I'm by the way it's meant
to be right that's it's like a customer
demo initializing pool use traditional
equals
no there's no air there's no errors oh
well whatever but in any case so you can
see the buttons obviously so the the
four filter part is the clear buttons
the reload button I guess the thing at
the top is the image that you were
loading I am talking to keep the crowd
occupied while Steve pipes stuffin tries
to reload it again and he's wondering
all right so third tries to charm us
yeah the time let's try one more time
that's right one more time pass qi
startup time we're showcasing to sui
start yes for the second time the other
point so games the way its finest hour
it says there well her first name is not
gonna be channel ya know okay filter
doesn't work doesn't work that's fun I
wonder what happened anyway well I i
know that when he showed me it was
probably the coffee that I had this
morning with a probably in any case
that's why we have some homework to do
but Steve's looking through the cook I
wonder what it is should we try and load
it locally maybe the cloud is down
what's your warrant well this looks okay
shouldn't shouldn't go so we can we can
blame it on the cloud let's just try it
well try we'll try the local below the
version uses the zip file you see here
sequel dot zip and loads it from there
instead so this of course should not
make any difference but probably it will
or not no it doesn't oh well it doesn't
it's a you I think it see you I think
yes that's a good thing I love I'm a
service engineer so I can always say as
usual awaits you wiping and today is no
exception be a good thing it's a good
thing Andrew prompted for the applause
after the UI popped up the first night
and we're going to post the code on
github eventually what so you guys can
spot the air now actually what we're
going to post a working version on
github but essentially the
functionalities you can choose any of
the fields from the drop-down
and then you can filter if the filter
button actually worked you could
actually click and filter on those it
looks like it looks like the buttons
actually aren't firing and you shall be
can you show where the drop-down is
populated because I'm just wondering
that's always 10 actually this is cute
so if i'm annoying be the drop-down yeah
actually uses the model object from
circumflex so we refer to speaker daudt
first name speaker daudt last name put
those in a buffer yeah and that actually
populates the menu okay so but if you
add a new if you add the new what am I
trying to say if you add a new field to
Speaker I decided in there okay but it's
all types Eiffel yes that's car okay so
if you guys would like to contact us we
didn't have this on the first slide but
you can feel free to send us emails
directly at stevenage in oracle com or
andrew j clouds org feel free to hit us
up with questions if you have it about
the technologies we showcased scala
javafx j clouds any designs also follow
us on twitter we'll both be posting
later today once we get the code
uploaded to github so you can try it out
yourself and we're going to do a full I
think we'll probably do an SVT build for
this so you just be able to command line
deploy the entire thing with all the
maven dependencies so I go for it you'll
be able to see what life is like when
somebody tries to reinvent a build
system how is empty I like you too yeah
all right so thanks for coming yeah
thanks very much
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>