<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Android Application Development Tutorial - Android Service Example | Coder Coacher - Coaching Coders</title><meta content="Android Application Development Tutorial - Android Service Example - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/InfoQ/">InfoQ</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Android Application Development Tutorial - Android Service Example</b></h2><h5 class="post__date">2011-02-22</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/yfWsp9IHX1Y" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so next thing that we're going to do is
we're going to talk about services right
so remember service is something that
runs in a background it's always on and
when you started and it basically just
keeps cranking in there and does
something so let's look at in our case
what we have actually look at the life
cycle later but let's look at in our
case what we have so in our case we have
this guy so we said we want a service
that's going to be pulling from Twitter
every so often right and then it's gonna
store that data in a database eventually
so far so good
that's what we that's what we want to do
so to do that we're gonna start by
creating a service
okay so how do you think we create the
service you've never done it obviously
so what do you think will be the steps
hmm yeah file new and then what are we
so XML and Java yeah that's correct
so I mean you guys are kind of getting
it but in case of a service there isn't
really we're not really augmenting it
with XML this I don't think of you know
in quiz kiss of activity we had a layout
for a UI so here we don't really have
anything tonight that comes to mind so
we're gonna start by saying file new
close all this stuff so we're gonna
start by saying file new class but make
sure you do it inside that your package
is selected so new floss and then I'll
call it updater service all right
so make sure you this is selected and
make sure
finish so first again so just like
before what we do need to do once we
have a class exactly we extend something
from the framework and in the case of
activity its activity in case of service
its service and then organize import and
then it's gonna say service is a common
name so saying whoa whoa whoa timeout
which service Android service bluetooth
service Java security service what do
you think yeah it's gonna be don't
Android service so and then it's saying
okay Cod you know it says you know this
is an underlined read you put the mouse
there it says okay you got the
implements and methods and you whenever
it says you got to implement the methods
pretty much you always say add
unimplemented methods yeah so now
there's a dis method on bind which for
now you're gonna ignore for a very long
time we don't care about it you know so
yes so there is something called a
binder which is used for inter-process
communication IPC which we'll talk about
later on but it's not it's not really
it's something it's really advanced and
you don't really care about it this is
if somebody else wants to bind to the
service on our ongoing basis and what
it's usually used via a IDL for
inter-process communication so it's
another application another process
talking to this process all together
which is not something we're doing right
now so for now we're going to ignore
this
and we're going to do something else
instead of it so if you look at what we
had here on a lifecycle of a service I I
said you know there's own create on
start and on destroy those are the basic
three things right so you know we can uh
we can we can do we're gonna do this
slowly so I'm just gonna create these
three methods on create start and
destroy I'm just gonna print a little
log cat so that I know it happened and
then we're gonna see how that works so
we're gonna do this like in small
increments right so I'm gonna go source
override implement methods and then on
create on destroy and on start we don't
really need on start if you want we can
take if you want to keep it simpler we
can take it out yeah we can so let me
sort thing gonna do is I'm gonna move it
just sits in chronological order so its
own create on start and then on destroy
right so I have it like that on create
on start on this right what are you
saying sorry yeah there's different yeah
yeah there's different methods they do
different things you know just as before
if uncertain you can always do service
this app service and that tells you you
know various things there are different
ways to use a service but the way we're
using it some like is one of the simpler
ways initially some create on start and
start command on destroy so you know
that's kind of stuff
so what we're gonna do is I usually
always have that private static private
static static final string tag you know
and it's you know service the class get
simple name or simply update their
service right same thing
so I usually define that guy all the
time just because I'm assuming I'm gonna
be logging especially with things like
service which you can't see it's very
useful to watch them by having them tell
you what they're doing right because you
can't see them they're invisible like
electricity sorry okay
so you know what I'm simply gonna for
now say log dot d tag comma on created
that tells me that it's at the end of
the file organizer import import log and
then I'm going to do that off log D tag
on started and log D is destroyed so I
just basically added at one line or the
local little tag just to say you know
hey you know there's something going on
that's it
so first a girl so to create a service
to create the service you know we define
a service we subclass system you define
it create in your class subclass system
class and then implement some that is
same as an activity right you know we
have a service now it doesn't do much
it's perfect right if we want to do this
organically incremental right like
little gear you know it spins it doesn't
do much but let's see it see it spin
first before we plug in other gears
right exactly so the next step just like
what the activity is to put it into a
manifest file so all the main building
blocks you gotta put them in usually put
them in the manifest file there's an
exception for that but we'll get that
there later so I open up the manifest
file and I can simply just do it like
programmatically so I can go into my
manifest file and is to simply do within
the application block to say service and
renamed equals dot updater service
that's it
if you want you can make this shorter
it's not necessary
same here you can make this shorter
right so see I mean we have an
application it's got three things now
one activity second activity and one
cells
yes yes
so all the main building blocks go into
the application tag yeah so they're all
part of the yumbo application they all
have access to my application etc so
first a good okay so now that we have
the service defined here what I want to
do is I want to do I want to integrate
it back into my application what I mean
by that is I'd like to be able to see it
start stopped you know and that sort of
stuff cause constant integration right
it's another one of the agile principles
right constantly integrated back so how
do we how would we integrate it and one
simple way that I could do it is we
already had an options menu so we could
just easily add two more things to the
man you say start stop right so that
would be a good good easy way okay so
we're gonna go back to option tour menu
so we want to add two more things so
which file was that that we defined the
buttons yeah many dot XML and it's gonna
be basically the same thing you did
yesterday you know you're gonna add
another item not a grow but item and I'm
gonna say item service start
all right item service start create a
title for it for title I'll create a new
string I'll say string title service
start service right and the hardest
thing is going to be finding the image
which image to use with graphic to use
yeah I'll help you guys out with that
I'll go find it for you while you're
doing that good because I like going
poking around the internet anyway so I
go to that site called Android draw
yeah there is
yeah there is but it's we got to figure
out which image to use and there's
something called there's something
called that I usually use before I see
media play and I see media pause these
two so I use these two icons again it's
up to you you can go crazy with those
icons but they're good enough right so
I'm gonna say here then add for Ike
Android column drawable to point to the
system resource and then I see media
play so this guy config you know added a
one button
so far so good
so yeah yeah 12:00 12:15 launch
something yeah okay yeah we're yeah and
it's good because we're what we're doing
now is gonna be small increments so it's
not gonna be like one big push there get
something out wait I'm gonna grow this
organically okay
so ever got this new item right you just
got to do again the same one again right
well just be careful one thing I notice
people get stuck with with the clips see
and now I wanna I want to create a new
item and I'll go click Add damn it's
like whoa there's no item there's a
submenu that's because it contextually
had this selected so that's you know
it's a kind of eclipse is not very
intuitive about that so make sure you
create a new element to the top and then
select item because that's what you want
you want three items you don't want sub
menus and crazy stuff like that right
you know what at the end of the day this
is XML just open it up in notepad I mean
yeah I may not so service start title is
gonna be new title Bam Bam title service
and then icon was Android above /ic me
the F pause and ultimately I can show
you guys all of them like this right so
that's that's what I created everything
that's what many looks like
I use an icy media pause there's no real
stop icon all right then find it when I
look for it back in the day I'd look for
it
I don't know what it's sense for but
it's icon yeah could be yeah yeah I see
the icon they have asses for I think
status so they have this the stuff that
goes well into the top and the
notifications that images that go well
into the menu and so on and so on so
they're they're sized properly for those
purposes so so now that we I mean now
that we have just defined I mean I can
already run it and reinstall the app and
we should see the menu
come up right it's not gonna do much but
see if I click on menu just by merely
updating the menu XML just by click now
click on menu and there are three things
right 1 2 3 and you can click on stuff
it doesn't do anything because we don't
have a way to handle it but at least it
shows up right
okay so I don't got that so far yeah
exactly so it's yeah so we have
preferences and start starting yeah okay
so how do we now do something when it's
clicked hmm yeah which file well
remember status activities where we
handle the button clicks yes well that's
the actual service we're gonna be
starting but the question was where do
we what do we handle the button clicks
you know yeah so we already we remember
an options item selected and we we
actually went out of our way yesterday
to put switch statement although we only
had one button back then so we really
didn't need it but it comes really handy
now because I can really easily add
support for the other two so case r dot
ID dot and then item service start damn
do something in break and in case our
dot ID dot I necessary stop do something
and break you might have noticed how now
we already have like a few IDs right so
it's useful that they're named in a
certain way that's what's trying to
point out yes sure yeah exactly that's
really helpful so the question is what
what do we do to if we want to start a
service type of service yeah it's gonna
be an intent so we're gonna be creating
an intent it's gonna be very similar to
this right and the way we're gonna send
an intent is going to be similar to this
so as opposed to start service is going
to be a static there it's gonna be start
service right so you can go start
service for an intent
and you intent from this to that so up
to the risk of us yeah and then stop
service is the same thing
I don't see no option you see which one
or not option anthem selected so yeah
I'll take a look at that but that's the
one that we added yesterday when we so
did anybody try to run this and does
work okay so yes if I run this now and
what I'm gonna do is I'm gonna watch it
on my locket which I always you guys
notice like here my locket always on all
this running right and same is with the
emulator so it's much quicker that's way
to develop so I can I can basically just
you know watch what's going on actually
I need my menu button so menu right
start service and bam there's my
notification start stop right and then I
can say menu stop service and there's my
it got destroyed right these three
things yes
yeah the system is going to this decide
cut took position and given the space
you can group them that what the submenu
is yeah so you can group them our group
to me as well well there's also
condensed versions so if you have a long
name you can have a long and a short
name and then if there's a real estate
is going to use the long name it's not
it's gonna use the short one so you can
kind of configure it but let's try this
what if I start a service so there's
created started but now I started again
so did you have it started I'm gonna
start it again notice that create
happens again so here we have create
start
sorry and this is start so in other
words create is only created once but
start is create it started every single
time you say starts are start so you so
that kind of gives you an idea what this
but like so many pointed out there
they are Singleton's so there's only one
instance of this service you can't start
five of the other services yes it was
already started yeah exactly
and now if I do stop I stop it and if I
do stop again it doesn't do anything
because it's already stopped right so
that's basically what I wanted to point
out so we now have a very basic service
that doesn't do much right it's just a
service it just starts and it's running
I notice this look if I go now and say
start BAM so it started let's go to
let's go to our to our settings right
application running services and you can
actually see that the service is indeed
running it's there it's running always
on always running right I can now start
it look look if I click on it and say
stop
notice the death actually stop the
service settings application running
services right that's that's the
services so just something that's now
sitting there in the background not
doing much what's that
you guys are not seeing the actual log
so are you logging a log into the right
clock I mean do you have if you'd see
one of the two things I mean either
either this is never actually being
executed right okay let me see yes every
once in a while a DB is gonna lose a
thing so what you can do this is this to
do a DB kill server right and that kills
the server and in the meantime eclipse
is gonna start like doing this like I'm
a man trying to recruit trying to
reconnect the inn so on and but then you
saw a DB start server and that basically
reboots your connection between your
device and your emulator so now eclipse
is happy you may have to that all the
zone always running locket is not so
much as running anymore because we kill
the connection see that's easy you just
do a DB lock yet again then we're back
in business
yeah then that's a different problem
I'll look into that but so far are you
guys looking into is this making sense
to run in terms of what services are how
they started now our services started it
doesn't do anything at all so our next
step is gonna get it to loop and after
that we're going to get it to to do
something else to pull data from Twitter
and so on okay
but now let's do it with 12:15 so that's
when you typically do lunch so a
lunchtime good okay so let's go and
until 1:15 okay so what we did it before
lunches we basically so we're doing this
service that's what we're working on
right and the job of the service is
gonna be to periodically go and pull
something online right it's gonna pull
some data in and it's gonna then do
something with that data so like so we
now know how to start it we know how to
stop it
but in we saw we saw that the trying
right - those are bubble because start
and stop it right starting stop service
so if I started I can verify that indeed
it's running I can see it starting and
then if I stop it I can see that indeed
it stopped okay yeah so now what I would
like to do next is I would like to have
something run periodically okay so how
would you do this this is a Jolla
question how would you have something
just around periodically timer this
timer scheduler cron job you can also do
you can just simply do a thread in them
say thread out sleep there is something
called alarm service yes you could do
you could do alarm service and use that
to wake you up every so often that would
be that would be you know a different
way of doing it so the reason why alarm
service may be better is that you can
then schedule a whole bunch of other
things to happen at the same time such
as Network calls so in terms of the
battery performance you would want the
you would want something to get you know
tricky the network at the same time so
let me let's take a look at that really
quickly so service alarm alarm manager
it will gives you access to that and
basically the way you use it is
the so set the repeating right so you
can schedule a repeating alarm right and
you can basically have it send intent
back to you but this is you know it
introduces a whole bunch of new stuff so
that's why I don't typically use this I
just go with the regular thread at this
point but that that would be an
alternative way of implementing there's
no our marriage is one of the system
services which we haven't talked about
yet well we'll talk about it sometime
we're gonna look into pending intents
and stuff later on but for now let's
just do a simple simple thread so to
schedule something that would run every
so often I would simply create a new
thread okay and then I'm gonna with the
wrong method and then I'm gonna start a
thread you have it sleep for some amount
of time and then and then do the job and
then sleep and so on right so here's
what it's gonna look so I'm gonna create
a class updater so there's gonna be you
know all the thread so extends thread
right and it must provide the the run
method right so inside the thread I need
to provide the run method and there's my
wrong occupied so yeah this is again an
inner class yeah it's not yes it's an
inner clock it's a class within a class
right since it's only private to this
thing right it only makes sense within
within this context so in here for now
what I'm gonna do in Iran I'm gonna
simply do something like I'll say log
dot d tag comma and then update
like that right and then after that I'm
just gonna say that uh you know sleep so
I'll say this dot sleep for some amount
of time and we can create some kind of
constant that's gonna be our constant
amount of time whatever that is so I'll
say you know we can come up with
something so price or say static static
final long delay and it's a number of
milliseconds so let's say we're running
every for now 30,000 milliseconds which
is 30 seconds but later on we're gonna
change it into something that is a
little longer just so that you can see
if it's working for now right we could
also make this configurable I'm sorry
yes whoa later I mean at some point we
could evolve it to be configurable via
the preferences right right so you can
specify how often you would like to good
so I need to surround you basically need
to add surround Wed try/catch block here
because this can be in this can be you
know in interrupted right because at
some point maybe we just shut down maybe
it maybe or like interrupted we're done
for the sleep right
it's a milliseconds yeah
so it's threaded sleep because it's a
static method so we can just just as
well do it like this well yeah so we can
we could do this yeah exactly so now we
can you know that we are running right
we're running something and then we're
gonna sleep right ideally we would want
this to happen over and over again right
so yes you're exactly right so I can put
this in an infinite loop
so surround Wed while while true right
this would be an infinite slope and so
so um that basically means movers
sleeping but we said sleep for ten
thousand is for ten seconds but five
seconds seeing somebody to walk us up
that's a clove oh I was in the middle of
asleep that's an in South exception
right
all right so I'll say I'll say do
something something sleep and then here
were interrupted so that's basically
what's going on okay it's so far so good
so now the question is when do what how
do we create when we create this god we
started going to stop it we just define
it here right do you guys got it
I don't care guys you save it compiles
and buddy can make em it has any errors
or anything that saves can pause okay so
now if I define I'm gonna define a
global item or service so I'll say
private updater updater right and then
in oncreate I'm going to create it so
I'm gonna say updater is new updater
right so that creates a new object
and then in Sparta could start it I
could say updater dot start that starts
it right and then I'll destroy I will do
the opposite so I'll say updated stop
right or interrupt if their tread is
already started and you start it again I
don't know that's an interesting yes
yeah so let's see that's why we have
everything we can test with see if I run
it so many start to start it see it's
running right what's happens if I say
menu start again there's an exception
right yeah
so you know I mean I what kind of what I
could do is I could yes yeah so with so
yes we could do both things we could
consolidate start on create and on start
into one create right that's one way
second way is we could create a flag and
we're going to need this flag anyway so
I'm gonna make it create a public
boolean is running right and by default
it's false right
right and so what I'm going to do is or
updater start I'll say is is that is is
but I'll check I'll say if so if it's
not running then we're gonna do this
right make sense so I'm start the
updater okay I can do the same thing if
if this is running we're gonna we're
gonna stop it
on on on destroyer and start stop right
so this should be saying oh synchronized
so that means that only one that
basically makes this method a critical
section it means that only one thing can
be in this method at one time because
you don't want accidentally it's really
unlike it's very it's hard to you know
they produce but it potentially we could
have one thread be here then another
thread be here and then one is changing
it to two but the other one is just
checking it was read before this one
exactly it's it's it's it's a possible
error yes
so if I go menu start create it started
running menu start again
nothing many stop and supported the
operation and that's because I need to
interrupt it first right it's not steady
as it reduces throat ready to interrupt
you got a dude red dot I think in it
interrupt it first right I think need to
be interrupted first with I'm not sure
just a flag yeah yeah so it's not gonna
be a wild true it's gonna be while while
is running yeah exactly so that's where
it is so then we can we can basically
say well updater service is right
yes
so start running starting studying
drawing
start again it's fine stop destroyed it
stop nothing so I mean just to test it
what I'm gonna do is I'm gonna make the
time period much smaller I'll make it
three seconds as opposed to 30 seconds
okay so let's do this okay so menu start
so truant and so menu start again
nothing still it's still three seconds
it's not one and a half seconds right in
other words we don't have to started and
if I do stop stopped right and we should
actually probably set it to null as well
when we clean up so when we do destroy
up day there is not right to help
garbage collector
Death Comes the garbage collector
and so now if we if we're if the
responsibility for is running is in this
guy now that I think about it we could
also make this a property of the thread
itself not the property of service right
and I could make
we enjoy it some syrup because when you
make it using content yourself it's your
starch to mess with in Android so put
those message in the queue and student
lives refers to the certificates it will
be something already learning so sorry
assassins created some another green
signs that are just kind of going to
start so we have to worry about other
synchronization status to be alive with
the triple this yeah yeah both the
interns are here
yeah the intents are going to be
synchronized so we yeah cuz cm sir
in other words serialized so they're
gonna have em so
okay so is that you guys get them to
work periodically so if you do menu
start clean up domain you start do you
get it
like running every so often
yeah okay that's different so what we've
done is we just move this basically this
variable here we're checking we're
starting it setting it to true when run
kicks off while is running we do that
right in case we are interrupted we we
make it into a false and we have an
x-axis or method returns is running so
far so good
questions comments
so what do you mean by stop stop service
are you talking about something else
okay okay so one thing I'm gonna do is
I'm just gonna give this thread a name
by saying public updater
this is not important but super and then
I'm gonna give it a name up there this
is just gonna basically give it a name
and what I mean by a name like what
would we care about the name of the
thread here's what I want to do remember
our status activity I still have that
start/stop debug tracing yeah let me I'm
gonna enable it just for our short just
to demonstrate and you guys don't have
to do this so I'm gonna enable it to
organize main ports cuz that Big Dipper
goes missing
damn run it and so let's see what
happens
okay so hello with service I'm gonna be
super slow no I'm gonna click on update
okay so this is updating got Twitter
blah blah blah posting done ok update it
I'm gonna now click on update service
I'm gonna start it I'm going to let it
run for a little bit yeah 2 3 4 5 times
or something I'm gonna click many stop
service ok and I'm gonna click home so
that I stop the actual generation of the
of the file right so what I'm gonna do
next is I'm going to go to my desktop
alright I'm gonna do ad beef pull so
it'll be cool as the card young trace
right dot there it is and I'm gonna do
trace view young but trace and let's see
if it
okay so here's couple things on a show
you so notice that we have a hell of a
lot of threads write a whole bunch of
threads find the threads you can ignore
we don't really control them right now
in order to keep thread right but this
is our UI thread important right this is
what this is the main also known as the
main thread
okay that's the one that we do not want
to block right this is ours updater
thread this is our updated thread this
is what runs updates from the Twitter
and this is all our post to Twitter
thread async task remember right see I
changed the name the thread that's why
it shows that's the only reason why I
wanted to change the name of the thread
right so if i zoom in here for example
okay so notice that this is this is the
async task this is what the async task
is connecting online and doing the the
update see so this stuff here is the
actual work of going to the online
service and attempting to post but it's
not blocking the UI thread and it's also
checking back on the UI thread every
soft and that's why we kept a little you
know yeah cuts yeah exactly so are you
our status activity is going to be
responsive okay so far you guys get that
we already saw that but now what toner
zoom in is this area here where we run
the something on a separate thread so
see this one two three four five six
those six things should correspond to
one two three four five yeah let's try
possibly I don't know exactly but we can
take a look you know so there's this you
can see really a three second intervals
right as a matter of fact you can we can
kind of time it right so so see this
should be we may not be exactly three
seconds this is 15 seconds this is 15
point for not sure but if i zoom in in
any of these
zoom in zoom in right you can clearly
see that this was print
so there's log print native right so
this is the log part right what is this
this is this is a threaded sleep VM
threaded sleep thread sleep Yamba update
ready to run right
sleep sleep right so you can tell the
dots that is the actual job of them that
this is the run method right and so we
have that we have those like everywhere
right so that's so that it's kind of
connected right got it
see that's what I wanted to show him so
that is indeed running on a separate
thread so it's not blocking our UI
thread so far so good
normally before when I used to teach
this class what I would do is I would
let it I would forget about this whole
other thread we would actually do it and
then it'll be like wow why is it turning
so slow I would actually create a
problem and actually so I'll show you
how it's slow and then we would go and
fix it this time and I used to use
something called Lu handler and looper
so I would I would basically post a
message on a handler and there's so many
ways to do this right so but I found
that to be a little harder to explain so
this is a lot easier usually because
it's all stuff especially if you know
Java should be easier so anyway that is
the low thing that I want to show you so
I'm kind of comment I'm going to comment
this out again so that I'm not stuck
with imports say ok oh I just mean yeah
I just made a constructor here yeah I
think you can do that in async tasks I'm
not so sure actually but if I did so
public
whether I'm a basic that supports that
but super maybe not yeah I'm very
probably the way I just don't know if
you talk to my head you know not sure in
here so on destroy basically checks if
it's running and then interrupts okay so
far so good so now that we have this by
the way if you're on a guest guest net
you can just access my computer directly
right now that we have this guy working
right it's spinning it does something
all the time right what is that it
should go well the next thing that you
should do is pull from Twitter right so
what do we need to do that we need a
Twitter right so just do something so
we're gonna do something here right so
so we need to connect to Twitter and
gather data okay so we know how to get
the Twitter right that's gonna be in you
pointed out we came to get
education context right sorry get
application dot dot get I need to still
cast it application so using get
application context Oh
and then I don't need to do yeah that
gives me amber alright so Anna can get
get Twitter all right but cars that
Kalpa me that's the same as get
application right well begin application
returns application get application
context returns the context but this
gives me oh I see what you mean
ok yeah so that's the difference okay so
back to the yeah so you're saying is
opposed to doing all deaths right I
could have said said get application or
I could just go out get application and
because it is an inner class but it's
really property of activity so that's
why yeah I just made ok simplifies it a
little bit right cuz it's kind of just
being explicit get application hanks see
right now you're not sure where what
where get a profession comes from it
really comes from from the activity so
what I said is go out there and then
reach in right is a but in this case we
can do it shorter just like this which
is implicitly since it's in inner class
to the security to work as well so sure
sometimes there's something to be said
for shorter so now leave it like that
okay
so this will get us Twitter that's not
the problem
right this is gonna figure out how to
login and all that mumbo jumbo right
yeah you know get username password
server whatever so we already have this
framework infrastructure right now the
question is how do we get data from
Twitter right so let's take a look we
have no idea so let's look at je Twitter
library and there it is and they can't
you were asking how to be look at Java
Docs so they have their own Java Docs
somewhere here like this and we would
look at Twitter and try to figure out
what's available and there are all these
different things that you can build to
Twitter so you can you can be friend you
can you can break friendship I love that
you can destroy can you destroy a friend
no you can't you can destroy a message
you can follow you can stalk right okay
so do you know what Java dog is right
okay
so they just publish their Java doc in
the library we're using is Jay
twittering so so if you if you go to
your favorite search engine whatever it
is and you say je Twitter right it comes
it's got probably you can click oh now I
feel lucky if your search engine is
Google and then inside of here they
happen to publish their Java doc if they
didn't publish their Java doc you could
just Java doc on their jar file and get
it right so but this is just tends to be
use so anyone this car I got to Java doc
it lists everything since we are getting
the Twitter here right you know I would
click on Twitter to start there to see
you know you can meet the documentation
but we're lazy
so so far loggia did get direct messages
get favorites
get followers get friend ideas get
friends
hometown mind-blower so so this is the
one that I typically use get France
timeline returns the 20 most recent
status is posted in the 24 hours from me
and my friends that's what it says all
right so that sounds very familiar very
similar to what we're seeing here public
public timeline so me and my friends
basically so do I have any friends
shy is my friend you know so that's
people who got we invited themselves
right so if you guys go invite yourself
become friend that is our universe right
so you you know that is just as good as
anything else and c-clips knows about
jay Twitter's like didn't even have to
read the Javadoc I could just do dot and
you can be like I want to wanna break
friendship know I want to get Frank oh
yeah do you want to get friends how do I
get friends it'd be interesting if you
could specify criteria as well take a
bit like thin and beautiful and and Sun
okay we really want to get the timeline
where is it get friends time
let me break this down into two lines
it's not hella confusing to you so
whether Twitter is that right and now
I'm doing Twitter dot get friends right
so far so good now what do I do
so this returns if you'll put your mouse
on it it tells you or the documentation
is clean it returns a list of statuses
right so this is actually a good example
of generics you were asking for generics
yesterday so I'm gonna create a list of
statuses and I'll call it statuses
that's what I get back okay now when I
do ctrl shift o to organize my imports a
status is an overloaded word like
there's like so many things in my class
path that you have the name status it
says which one right so is it async task
status is it SSL engine status is it
Wi-Fi status or is it Twitter status
it's Twitter status right so I'm gonna
import it so first ago
again
so we gotta our bodies statuses what do
we do what do you want to do next
yeah but we're doing things secret
incrementally so for now let's just
print it out so just log deed right
right we're doing this in a small
increment sounds good
okay so you guys familiar with the for
each loop right so for status status in
statuses right this is the java 5 for
each loop that allows you to really
quickly to iterate over all statuses now
I have a status and I can do something
and I just say I'm gonna print name and
status like sort of like Joe SADS death
right make sense just like federal I
want to get it like this this is Joe and
this is what is said right so I still
log the tag comma string format and my
format is gonna be simply percent as
calm space percent s right and then
status dot so let's see what we got
available in status now I can look at it
by eclipse or I can flip over go into
documentation and look at Twitter status
and see what the cap to the status says
and here's what we got in terms of
Twitter statuses so when it's created
the ID in reply to retweet count source
text and user right yeah so we don't
I almost I'm not gonna care about three
tweets I mean you guys can do that as an
extra bonus you know but I don't really
care about that so source sources for
example if it's posted or via the web
via mobile you know so it's that little
thing that says when you look at it here
on when you look at it here it says from
J Twitter live from J Dilla duo from Jay
to the lab right
make sense yeah that's who the sources
so that's the source so but we really
care about user user and text however
user is three text is easy it's just a
string but user we further need to look
at user and user is whole bunch of stuff
following followers friend count
Nihon name display names that's probably
what we want make sense so I'm gonna do
status dot user dot name comma status
dot text
anybody's tried it what okay let's take
a look that okay I'll take a look that
so if I let me see I'm gonna clean this
up and I'm gonna let say menu start
service BAM
so getting tweets BAM here the list okay
three seconds later BAM get the list
again three seconds later
gets list again so the point is done to
it every three seconds because it's
gonna be hella anoying that this is
where Twitter shut me down and like
because you know we do it every 30
seconds time ten people you get like a
lot of traffic all from the same user ID
an IP address and all that so they shot
me down first then I moved to identica
so they shut me down next and now I'm
hosted at you know status dotnet so when
they started down then I'll have to you
know think of something else in the
meantime I'm gonna simply change that
hard-coded number to 60,000 so that's a
minute so far so good on everything and
all this so we are in that case pretty
much done with our service for now okay
we have a service so we have this guy
just gonna recap we have this guy we can
start it and stop it by pressing some
buttons here right we can starting and
stop it it we to leverages our
infrastructure so it knows how to get
Twitter how to create preferences all
that jazz right and that kind of talked
us into your how do we share data so
it's obviously sharing the day
with the rest of the platform right it
knows how to pull data from Twitter and
it transparently every soft and wakes up
does the run wakes up does the run and
so on and we verified that it does it on
a secondary auxiliary thread so as such
should not be blocking anything else
okay so that's all nice and dandy so
we're pretty much done with that down
next job is gonna be to stick that into
the database and so that later on we can
read it from the database yes yes
no it's no no no it's not when you press
a button when you press a button here
you're pressing that button in this guy
here this guy is basically firing an
intent to the system so imagine that
this is the upper echelon of Android so
this is where the guards are right and
it sends the message there then gods
decide to call on create on start on a
service which that spawns a separate
thread which actually does the polling
from Twitter yeah the buttons scan will
be the status activity yes yes so the
button is loaded by status activity so
status activity loads the the button
right so it it it has the the menu
where's the yeah create so this creates
the menu this this handles the menu so
this is what's actually processing the
clicks so yes the UI processes the
clicks but then it's fire soft and
intent right and that brings the bag the
picture that I had yesterday that they
can explain some of the stuff to you
guys and the picture was called bloopers
dong dong so it looked like that so
basically as something happens as UI
event happens we just put a message on
the queue so that looper Dundas says oh
this message is for activity oh this
message is for service so that's kind of
that upper echelon of Android right it
figures out how to disperse messages
right you do this you do that but
they're different guys service is now
going to the cloud to Twitter and
connecting activity is your scanning
user process
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>