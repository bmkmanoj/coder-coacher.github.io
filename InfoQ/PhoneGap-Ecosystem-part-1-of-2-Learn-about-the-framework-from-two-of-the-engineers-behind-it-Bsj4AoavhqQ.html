<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>PhoneGap Ecosystem (part 1 of 2) - Learn about the framework from two of the engineers behind it | Coder Coacher - Coaching Coders</title><meta content="PhoneGap Ecosystem (part 1 of 2) - Learn about the framework from two of the engineers behind it - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/InfoQ/">InfoQ</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>PhoneGap Ecosystem (part 1 of 2) - Learn about the framework from two of the engineers behind it</b></h2><h5 class="post__date">2011-06-15</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Bsj4AoavhqQ" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">I'm Jessie I'm here to talk to you today
about phonegap you're all developers
here so we're not going to do any of the
reasons why why we need phonegap or any
of that sort of stuff we're going to
dive into some more of the the technical
aspects of the the platform in general
so I'm here and shaz is here with be
shah's is going to do some demos towards
the end go canucks I don't know if
there's any canucks fans out there
there's one at the back on Twitter on
purple cabbage Shazzer on is Chaz Ron
lucky guy so here's a complicated simple
diagram that explains what phonegap is
essentially your JavaScript CSS and HTML
is packaged by phonegap into a
chromeless browser on whatever device
you're developing for and then it's
deployed to the mobile device in this
case we want to illustrate as well that
the mobile device could actually be a
car or a TV or a desktop computer these
are all things that are sort of on our
radar for the future so phonegap maybe
you know sort of a misleading name given
what we expect for the future so the the
mobile landscape is constantly changing
these are some numbers apparently from
november of last year Apple is saying
that they're a little bit bigger than
that but you can expect this to all
change quite rapidly who knows what's
going to happen with Windows 8 coming up
it's really hard to pick a winner at
this point android has made leaps and
bounds iOS is constantly doing amazing
things rim is is sort of going up and
down with their
or their blackberry and so it's hard to
really say what the future holds as far
as mobile the big discussion I like to
be topical so that doesn't really make
sense with native versus web but at
least it was news yesterday so a big
discussion that we always have is do you
develop native apps or do you develop
web apps and we sort of think that
they're the same thing because the
browser is native it's it's native on
every single platform that it runs on so
this allows you to write your
application using web technology to run
in that browser people complain about
browsers not being able to do certain
things it doesn't necessarily mean that
they can it just means that we haven't
gotten to it yet so here's an example of
an application that was written with
phonegap that's running on on four
different devices there there's a an
admin portal behind where ship tracking
information is is entered and that
information is then displayed across all
of these different devices I should
point out that this wasn't actually an
easy thing to do with the different
screen sizes and resolutions and
capabilities of these devices but it is
possible and you can expect at least
eighty percent of your code is going to
be reused across these devices so we
have some big contributors involved with
phonegap because we're completely open
source where MIT licensed we've had some
some really big parties step up and
start committing code IBM for example
has four full-time employees dedicated
to working on phonegap and committing
code almost daily there's also some big
parties talking about phonegap palm has
done some really some really nice
tutorials on how to use phonegap with
webos so it's good to see that some big
parties that are using phonegap if
you're not sure if phonegap is right for
you you can ask alcatel
this is the the list of platforms that
we currently support iOS is certainly
our biggest Android is a close second
and there's there's some contention over
over third place and it's it's all that
changing landscape so it's really hard
to know what's going to be the the next
big thing but if you're using phonegap
you're protected because your code is
still going to run we recently
deprecated windows mobile we had to stop
working on blackberry 4.2 because our
developer was going to leave it was it
was that bad to develop for so there's
also some some prototype platforms some
things that we're working on windows
phone 7 now that we finally have our
hands on mango is probably going to be
the the next one to come along the
browser IE 9 on the phone is supposed to
be a lot better so we haven't really dug
into it completely but will will be the
first to tell you when it happens so
being open source we do everything in
the open so here's some links if you
want to keep track of what's going on we
do our planning in in the open on wiki
phonegap com you can see what we what we
foresee the the near future and the
distant future to be there and our
mailing list is extremely active in a
it's a very helpful community as well so
I'm going to talk to you about a bit
about what the phonegap technique is so
this is this is the part that's
developed in native code that's
virtually the same overall technique on
each individual device so all of these
devices have some sort of browser
component so we instantiate a chromeless
version of that browser then we
implement some sort of JavaScript bridge
code a way to
transfer data from javascript to the
native side and we implement a way for
the native side to push data back into
the JavaScript side so by doing this in
in keeping the exact same protocol
across all the different devices you can
experience reuse of your code in the
JavaScript side so here's an example
phonegap exact call from javascript this
is calling into native code so there's a
success callback or a fail call back
there's a service this could be
something like accelerometer there's an
action this could be something like get
current acceleration and there's
arguments which could be something that
needs to be passed to that particular
command so the way that the iOS phonegap
exec works is the same as the earlier
slide we create a UI webview this is how
native code can call javascript directly
they like they're they're extremely long
method names this is objective c string
by evaluating javascript from string
so this is a call from JavaScript to
native what we do essentially is we
create a URL that contains the service
it contains a callback ID and it
contains some arguments and the
arguments are the command that we're
actually calling the the method on that
and any any other arguments that we need
to pass along that's all then you are I
encoded and string ified with JSON and
pass through and document location
equals URL so the native side can catch
that and realize that it's a command
because it starts with the the gap
protocol and then we can tell the
browser not to try and navigate to that
page and just pull out that data
document dot location I shit you not i
should mention that these are partially
brian larousse slides so that's a little
bit of his attitude in there and it
didn't seem right to take it out but
I'll try to say it with the same
enthusiasm that he says it with so in
the android world it's almost the same
except for it's the complete opposite so
it's also it's been more of a winding
road because of the fact that android
seems to change a lot of things in every
version of their their sdk so you can
get access to a browser instance by just
importing WebKit they have this really
nice way of of binding between native
and JavaScript just add JavaScript
interface so that's a little bit better
than the the document dot location stuff
that we had to do in iOS but
unfortunately somewhere along the way
android 2.3 all of a sudden a Mueller's
emulators weren't passing this
information correctly and there was all
kinds of errors possibly it was
happening on some devices too so being
clever working around
Dave Johnson from nitobe realized that
cookies were actually shared between
JavaScript and native and could be read
by both sides so the way that Android
Java Script communicated to native in
4.2 is by overriding prompt so cookies
was the way that it was until 2.3 he
came along and then we had to find
another way to do it and the way that we
actually came across that was by
overriding the call to prompt from
JavaScript so whenever the prompt was
sent from JavaScript native could
intercept that so that was the override
that we did overriding prompt I shit you
not so calling javascript from native we
originally did load URL which
essentially just changes the location of
the webview to JavaScript colon slash
slash and then some arguments so that
we're actually calling a function within
JavaScript but one thing that we noticed
was happening it took a long time before
it actually turned up but if the user
was interacting with the keyboard at
that moment that we made a call into
JavaScript all of a sudden the keyboard
would disappear and the text field would
lose focus so surprisingly it took like
a year before anyone pointed it out or
anyone noticed it coincidence I hope so
what we ended up having to do is
implement a small callback server so
essentially what's happening is in the
callback server we're pulling and and
using xhr to pull data from the callback
server so we learned a lot along the way
with Android and you should never
underestimate the ability of developers
to put their head down and just get it
done
blackberry with the webview they have a
nice fully qualified name space that
they chose to use net rim device dot API
browser dot field too for some reason
thought browser field that's okay we can
live with that blackberry JavaScript to
native so from blackberry you can call
script engine at extension phonegap
plug-in manager and this is essentially
binding JavaScript to the native side so
plugin manager will get methods called
directly from javascript to call from
blackberry native to javascript we just
call execute script and it runs our
JavaScript so symbian uses a bridge some
some of these these platforms are
getting more lightweight they're getting
more used to the idea of things being
web pages so really a lot of the Symbian
stuff is already in JavaScript so really
we're just making a small shim to call
the functionality that's already there
in the browser web OS is the the same
thing webos everything that you write
for a typical mojo mojo to application
and Enyo as well is going to be in
JavaScript already so there's really not
a lot to do except for manage the
protocol and make sure that it's
consistent with the other devices
interestingly nodejs is available on
webos to which is pretty cool I think so
other places that we plan on on getting
a phonegap running the data is actually
already working using the same sort of
iOS document location changes QT is is
coming very quick get it actually does
same sort of thing it's going to be a
very lightweight shim Windows Phone 7
has the ability to bind c-sharp directly
to the browser components so these won't
be difficult problems to solve so first
of all we're dealing with all these
different devices there's there's also
another area of complexity that we're
finding ourselves having to deal with
and that's all these all these different
groups coming up with what they think is
the perfect API for calling device
functionality so this is another area
where phonegap is going to help you
because you're going to be calling a
consistent API across multiple devices
and it's going to be very standardized
and we're we're keeping all of these
different device api's in mind so that
we're future-proof is our hope so device
API is defined sensors and data so
sensors are things like GPS or camera
data contacts media so the the API
designs are a little bit all over the
place the standards are changing almost
continuously and we're working to to
help because in a lot of ways the best
standard is working code so a lot of
times when when we feel that the
standard has changed in a significant
way really all we're doing is changing
our interface a little bit to match the
standard so there's also browser api's
so this was actually built into the
browser as of iOS 3.0 and interestingly
we had already implemented navigator
geolocation get current position with
the same arguments before because we had
followed the standard so we were
essentially able to just pull out our
code and let iOS do its thing because
they follow the standard and so did we
interestingly though there was a bit of
an issue because they weren't expecting
uiwebview to be doing this sort of
functionality and and they weren't
really aware of phonegap so if there's a
prompt in an iOS phonegap application
that calls get current position it says
would you like VAR x 3985 283 /
index.html to know your location so
they're actually looking at the the full
device path to the page and using that
so we actually ended up having to to put
our API back in and then duck punch
there's two users so here's another
example of someone defining a standard
so we saw here we're using navigator
geolocation here we've decided oh well
let's let's throw this functionality on
window so here we have windowed on
device motion so this is this is code
that you would write and behind the
scenes your code would be called when
that when that event happened or that
property changed so it's a little a
little bit different way of defining
similar functionality we I think we
prefer the Navigator dot way of
attaching our code instead of this is
sort of by convention you must supply an
on device motion method on your window
in order to get that so there's there's
lots of standards committees we're
watching the WAC this is the way that
that they think it should be defined so
device ap is Don accelerometer get
current acceleration so a little bit
different there there's also browser
media api's which are sort of all over
the place audio and video are it's
really hard to find any consistency
between the different platforms html5 is
definitely the standard that will all be
using going forward
so even if a browser doesn't provide
html5 functionality and a lot of ways
phonegap is providing it to them through
our api's so here's a sample from the
adapt media capture this is this is a
the html5 way of doing things like
capturing images movies audio from the
microphone static images and soon you'll
be able to use all this just by defining
your you're correct tags and it'll all
be bound to the JavaScript for you
here's the adapt way of accessing a
sensor in this case it's the battery and
watching power or the network so here's
the list of AP is that are defined by
the DAP there's a list of AP is defined
by WAC and there's also the the web ish
SDKs for symbian webOS samsung bada so
everyone is doing things differently but
their target is ultimately JavaScript so
that's good for us there is the current
phonegap API and those are all the
things that you can access across all of
the devices consistently one thing that
we learned from all the all the
different standards that we tried to
pull together and all the different
devices that we tried to pull together
is that our individual pieces of
functionality need to be very pluggable
and and standalone so one thing that
we're working on is making sure that
every single piece of functionality for
example accelerometer is implemented as
a plug-in so right now we have some
JavaScript that changes per device
that's actually implementing the
accelerometer API and then native side
of course is going to vary on every
single
vice so what we're aiming to do is
actually have the accelerometer
javascript be the exact same piece of
JavaScript that runs on all the
different devices and the only thing
that changes is what happens after
phonegap exec so this will allow us to
consider everything to be an individual
plugin and it'll run by itself and this
way we can pick and choose what
functionality we want in our
applications instead of right now even
if you're not using accelerometer you're
getting the accelerometer code and
there's no real way for us to prune that
code out so that's that's the reason for
wanting everything to be a single
standardized plug-in and this will also
open up the door for build tools and
plugin discovery so people can
contribute plugins and we can we can
build them automatically because we know
that they follow a certain format so
this is a plug-in interface in Java code
so on the native side we have what we
call a plug-in result and this is how
we're going to pass data back in we have
some properties on the plug-in whether
it's synchronous or not this is really
only available on on Android most of the
other platforms can't perform any sort
of synchronous calls so that's probably
something that's not going to live there
we're probably all going to live with
the asynchronous way of doing things
which is probably a better way because
we remain responsive the entire time as
well so there are some some lifecycle
events there the on pause on resume and
on destroy are all things like the your
your application being switched away
from or return to or completely shut
down so these are all things that we
need to be aware of on in the plug-in
and on the the JavaScript application
side and then of course there's the
activity result so this is what's going
to actually be passed back into some
sort of functional
it's going to actually do the work of
the plug-in so this is the the
JavaScript interface so this is a
definition notification so notification
dot confirm is going to take a message a
result callback a title and button
labels and it's going to call phonegap
exec with the arguments the way that
they need to be and this this type of
phone gap exec is going to be completely
consistent across all the different
pieces of JavaScript like notification j
s so som some things that we still need
to do we need to work out how we're
going to discover new plugins we're
working on a way of packaging the
plugins and easily installing plugins so
something like the way the way node
package manager works or something along
those lines where as long as everyone's
falling a consistent standard it'll all
work identity and Trust is a little bit
harder to work out but we've got our eye
on that and we're working on it so we
consider when we when we get plugins
resolved that's when we will be at our
one point oh so we're currently at
version zero point nine point five point
one so we sort of been creeping closer
and closer to one but these are the
things that we really want to have
before we can actually say 1 point 0 and
realistically 1 point 0 is more of a
marketing thing than anything else we
could have said that we were at one
point of a long time ago we could say
we're at version 9.5 to us developers
that's actually how it feels but anyway
the way that we foresee the the plugins
to live in the world is there's what's
called core plugins which are things
like accelerometer
things that are used across all the
devices and sort of functionality that
you can't live without and everything
that is already in the the phonegap API
is considered a core plugin then we
foresee the the more plugins which are
partner plugins so things like PayPal so
if we if we do a partnership plug-in so
it would be endorsed by both parties and
that would you know establish some sort
of trust over who committed the code and
you could you could use that without
worrying about things then there would
also be the whole community doing
whatever they want managing plugins in
their own repos and you would you would
be on your own there as far as trust so
what we've learned is that all of these
devices tend to have a browser they all
have an SDK of some sort and they expose
some bit of native functionality all
browsers have locations so the easiest
way to actually pass data from
javascript to native is through that
location so any device you can
potentially create that bridge so
developing for mobile web I'm just going
to brush over a little bit about it but
one thing that people ask us a lot about
phonegap is what do I use for my UI do
you have a UI framework or any of these
sorts of things we actually leave that
completely open we haven't gotten into
the Dom at all but we do we can make
recommendations and also our mailing
list is you know you'll find people who
are using jquery mobile or sencha or
jqtouch and experts are evolving all
over the place so the mailing this is a
great way to get information on that so
I don't really have to tell you how to
write a button since most of these
browsers are
are using web kit you'll find that the
the css3 is pretty good so you can do
all your gradients and rounded corners
but you will still have to do that
yourself or use a dom framework for you
I JavaScript as we all know the language
of the web there are some quirks WTF j/s
is a site started by Brian LaRue of
course so and he he documents things in
JavaScript that don't work the way that
you might expect that they would
configurations this is something that
we're moving towards for each phonegap
application this is this is our way of
defining what functionality you access
on the device what what metadata goes
along with with your application so this
this is a another part of our one point
oh this is how you will specify that you
want to use the accelerometer but you
don't want to use the compass and
packaging will help along that way too
so specify your splash screen what your
icon is all all of these sorts of things
so that different tools can build your
application and it all works
consistently so tooling everyone who
works on phonegap sort of has their own
preference we don't push you down any
sort of path like sort of the way
appcelerator recommends that you use
their aptana they don't actually force
you but that's that's the way that they
recommend at nitobe we between the 16 of
us we can't agree on how we all work so
we don't really expect everyone else to
to jump on whatever we say so we're
completely wide open as far as like I
des essentially it's all JavaScript so
it works with all the tools that are out
there
so you can compress your code with
whatever you want you can use whichever
IDE you want there's textmate bundles
for phonegap there's Eclipse plugins for
phonegap Dreamweaver actually in CS 5.5
they they've made it really easy to
develop with phonegap you can do it
right from there there ide and you can
see a live preview of what your UI is
going to look like and press the build
button and it spits out your app running
in the the emulator so speaking of
emulators uh there's lots of them
there's one for every device iOS
simulator is probably the best it's the
fastest certainly there's also ripple
which is a browser-based way of running
your phone gap application I believe
that's simply for Chrome that's a plugin
there's also WebKit nightlies you can
build your own emulator as far as
debugging this is the the part that Chaz
is going to be touching on soon you can
you can console dot log across any
browser you can you can run most of your
code directly in a browser assuming that
you you don't you focus on your UI and
you do some sort of proxy to your actual
phone gap calls so they're not changing
location all the time so you can you can
rewrite phonegap exact it's your one
point where you would have to return
some data and then you can run
everything else in the browser and test
there and then there's winery and I
pointed out that it's not New York
City's winery weiner it's actually web
inspector remote we call it Weiner it's
kind of an unfortunate abbreviation or
it was intentional but this this was put
together by one of the IBM guys
and shaz is going to do a demo of it but
it allows you to inspect your code while
it's running on a device or in the
emulator so that's pretty cool as far as
what libraries to use there's lots of
lots of diamond libraries out there you
can use any one of these xui is Anna
Toby creation Zeb dough is a mobile work
alike for jquery everyone knows what
jQuery is an yo there's there's talk
that it may be open sourced at some
point so you can you can use it for more
than just webos enya was very rich UI
framework testing libraries you can use
whatever you want dominator j/s and
thumbs jsr Michael Brooks from nitobe
thumbs jas allows you to simulate touch
events with the mouse so that's one
thing if you're using touch start and
touch end you you have to think about
these things when you're in a desktop
browser as far as getting some UI
elements and getting something up fast
jQuery Mobile is is come a long way
sencha touch is probably the richest
that's out there there's also dojo
mobile and Joe or great frameworks if
you need to store data between runs of
your application you can use lawn chair
which is Brian LaRue or purse sjs some
other concerns that we've had along the
way it hasn't been easy always there's
still some problems that we're working
on one of the biggest is the the tool
chain itself so if you're if you're
developing for all the different devices
out there this essentially means that
you have to install six gigs worth of
SDKs and tools and you have to do it on
two separate operating systems so this
is this is sort of a problem
so what we decided to do was we put
phonegap in the cloud because we love
buzz words so Chaz is going to be up
next he's going to come in and
demonstrate how you can use build bone
capcom to build your apps so essentially
you upload your code and it gives you
apps just like the the graphic there
thank you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>