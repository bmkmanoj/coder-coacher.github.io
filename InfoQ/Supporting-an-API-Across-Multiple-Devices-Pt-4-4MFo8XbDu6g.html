<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Supporting an API Across Multiple Devices - Pt. 4 | Coder Coacher - Coaching Coders</title><meta content="Supporting an API Across Multiple Devices - Pt. 4 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/InfoQ/">InfoQ</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Supporting an API Across Multiple Devices - Pt. 4</b></h2><h5 class="post__date">2011-12-02</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/4MFo8XbDu6g" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">I am a Greg Braille from effigy um we
talked a lot about api's I really I got
into this late and I kind of read the
assignment and I'm going to talk about
really the technology aspects of some of
this stuff and when I thought about
optimizing ap is for many devices what I
really thought about was optimizing
api's for devices um it's interesting
that Daniel talked about how they're
customizing api's it netflix for a lot
of different devices and i want to talk
a little bit about the pros and cons
because sometimes yes you do have to do
that and sometimes depending on your
audience you know that's like a
secondary concern so first I wanted to
talk about some of the problems those of
you who are building apps for mobile
devices especially and what I say
devices I think of not computers I think
of iPads and iPhones and all that great
stuff um these are problems you guys are
familiar with devices are slow compared
to even a halfway decent laptop these
days a really good phone is still slow
so some of the things that people who
have come from internal development
worlds have learned things that they
don't worry about when they're building
an app for consumption by a server or
something that runs on the corporate
network become big problems when we get
on to the internet when we get on to the
mobile network and when we get to the
mobile devices like the speed of the CPU
or the speed of the network yeah LTE is
theoretically very fast if you're
standing still 3g is theoretically
pretty fast if you're standing still and
not on the train or the airplane or
driving your car so you know you have
all certainly noticed this effect I
don't need to tell anyone who has a
smartphone that the network is not as
fast as it as it is in theory or as fast
as the network in your office or at home
on your cable modem programmers are in a
hurry I've heard some people say that
programmers or lazy programmers are dumb
programmers aren't lazy and dumb
programmers are in a hurry I do plenty
of programming and you know I've been
struggling for instance recently with an
API from a big company that does
database functionality but it's not
really SQL and it's a REST API but it's
a little funky boy it would be nice if I
could just
and have it working and not have to
think too much about it all programmers
are like that um you go to a room full
of enterprise programmers and say yeah
you know download the wisdom to pile the
soap and reach the XML and they'll say
great you go to your partner who's
developing the mobile app for your
iPhone for you and yours you say the
same thing and they'll say the what the
wisdom the XML sam'l what sam'l they
want to hear about JSON they want to
hear about oh off sometimes sometimes
they strangle you if you say that they
want to hear about rest but they then
they have for our debate engages about
what it means when use the letters rests
together and that's I probably out of
scope for today's presentation so we
want to keep that stuff simple other
problems developers see our public api's
tend to be pretty inconsistent the
Twitter API is infamous they've actually
have made great bounds in their
operations you're not seeing headlines
about Twitter being down like you used
to but you know getting my timeline
yesterday took a second a second is a
long time for an API call sometimes it
takes multiple seconds that's a pretty
long time private api's are even slower
and this is something we encounter all
the time at apogee we work all the time
with companies who have internal systems
and they want to expose api's sometimes
they want to expose them to the public
sometimes they want to expose them
privately like Daniel does in many many
cases these are built on existing
enterprise systems existing enterprise
systems were designed to be accessed by
people sitting on desktop applications
inside the company servers inside the
company over fast networks in very few
cases were they designed to be accessed
by 50,000 mobile devices running over
slow networks or 50,000 of anything so
and we've even been working with some
companies recently to launch the mobile
api's who have newer back-end systems
and even then once you throw in a
database in an app server in a couple
different layers of technology or an
older more mature industries five six
seven layers of Technology between the
API and what is actually the data that
the API is serving up we've you know 500
milliseconds is sometimes a good
response time we've seen api's that take
30 seconds to us
bond and it's awfully hard for a mobile
developer to build a usable app if when
they open up the app and it tries to
load the home screen if one API call
takes 30 seconds and if as Daniel
describes some of the API sometimes you
make five or six now you're in now
you're in a lot of trouble other thing
most api's talk too much even new public
API is designed in the age of the
internet using JSON my Maya Twitter
public timeline is 45 k in JSON and it's
64 K and XML and we all talked about
using JSON because it's more compact
well you have more compact most of the
data in there if you've ever used curl
or the output in one quick plug the
apogee API console for Twitter to look
at the content of a Twitter API call
you'll see that for your most mobile
apps you don't need most of what's in
there that's not just the case for
Twitter that's the case for an awful lot
of api's again a lot of time the
database structure was designed for use
by internal systems or the API was
designed to include all the information
anybody might want to use whether
they're building a complicated business
to business app or whether they're
building the simplest app for the iphone
well that becomes a you know a little
bit of a problem now and again compound
the things we said before devices are
slow networks are slow programmers are
lazy and now you're not developing an
app with a good user experience now
you're wasting a lot of your users time
and you're struggling and you're
fighting and we've all had the
experience of launching an app on the
iPad for instance and I can name one
news organization who's had some trouble
with that and just you know after a few
seconds you don't want to use it anymore
and that's you know time is money in
this business and I think you all know
that better than I do so app developers
none of this is good for you for the API
team who is providing the API if that's
the side you're on can you make this
friendlier for your developers whether
your developers are public developers
who you don't know are people in the
company either you've got to make it
friendlier for their developers or the
developers are going to take it into
their own hands and do something about
it Daniel described two other doing a
lot of customization at Netflix
that's because they worked with a lot of
device providers who have specific
requirements we have other customers
like this one device provider will say
yeah love your API but you know it's a
multi-million dollar contract and you're
going to make it look like this you know
then your number two says that vendor
number three says that vendor number 50
says that all of a sudden you need some
sort of layer where you can customize
those API responses so I'll go quick
about these tools in your arsenal data
transformation and caching yes JSON is
simpler for most developers and they
smile when you give it to them most
developers nowadays when you give them
XML they either scratch their heads or
they prepare to dive into XML parsing on
some of the things some of the best
practices we've seen out there in both
public and private AP is you can have
parameters on the API they'd say you
know give me the smaller version or give
me the bigger version google has a very
clever thing they've put in their API is
called a partial response it's just one
parameter that says these are the parts
of the API response that I want that
allows the mobile developers to choose
on their own how much of the API
response they actually want to get back
rather than having them to do some sort
of you know manipulation also you know
be ruthless you can always have more
than one API you can always have
different API calls with parameters one
that returns everything one that doesn't
compression I'll be really quick on this
my infamous 45k JSON Twitter timeline
compresses down to 6k using the
compression feature that's been built
into the HTTP protocol since forever and
is supported by nearly all clients for
some reason a lot of servers don't turn
compression on they don't support
compression why not you're dealing with
mobile devices the difference between
getting 6k over the network and getting
45 k over a slow mobile network I'd
actually love to do the math on that and
I think next time would present this I
will I think that it's going to have a
real effect on your user experience and
on the bill you pay for bandwidth by the
way to your hosting provider if you're
the people hosting the API caching I
mentioned the 30-second API call that's
a customer we worked with the while back
we've seen some recently you know maybe
the backend can handle a couple hundred
transactions a second which is good if
you can produce a system that does that
but maybe you actually need to handle
eight or nine or ten thousand
transactions a second we're working with
a customer like that right now caching
can be the answer to that if the if the
API data and you've already have caching
you have cashing in your CPU you have
caching on your disk you have caching
hopefully in front of your in database
you may have cashing in your app server
the great thing about API is is that you
can put things in between you know we've
got you know two companies here on the
stage who sell something in between
there are also a number of open source
solutions for caching caching completed
API responses is great because you don't
have to change the server you don't have
to change the client but now you've
reduced all of the response time of your
whole back-end infrastructure you can
cut seconds or tens of seconds out of
the response time for an API call
through caching obviously caching cannot
just be local cdns are great you can put
api proxies in a lot of geographical
locations amazon is great for this you
can also actually use a CDN the netflix
api we've talked about the API but at
the end of the day the API returns you a
link to a video because that's why
you're using the API is because you want
to watch something that's in a CDN you
know no brainer there but it always is
worth mentioning so that's that's the
quick and dirty you know technical
version of this but you know the point I
wanted to make was you know by designing
your API with the needs of developers in
mind if your developers are open
developers and you don't know them or
whether they're private developers and
you do you actually have the opportunity
to make the whole experience for the
user of the app a lot more effective and
that's my 10 minutes so thank
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>