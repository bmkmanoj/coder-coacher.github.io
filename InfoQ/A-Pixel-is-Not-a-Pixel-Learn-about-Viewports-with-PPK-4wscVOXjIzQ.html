<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>A Pixel is Not a Pixel: Learn about Viewports with PPK | Coder Coacher - Coaching Coders</title><meta content="A Pixel is Not a Pixel: Learn about Viewports with PPK - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/InfoQ/">InfoQ</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>A Pixel is Not a Pixel: Learn about Viewports with PPK</b></h2><h5 class="post__date">2012-04-13</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/4wscVOXjIzQ" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">thank you um yes it's the first time I'm
going to do this talk this is also the
most complicated topic I've ever tried
to get wrap my head around before we go
any further if I'm talking about the
visual viewport and density-independent
pixels who has some clue what I'm
talking about
Oh quite a few and that's good this is
the very first time I'm going to do this
presentation ever in fact
I finished the slides 2:30 this
afternoon I have to run here for some
meetings so I have no clue how it's
going to go I am still trying to get a
feeling for how an audience wants this
complicated topper to be explained and I
think I'll just start and we'll see here
where we go and if you really really
really don't follow it any more let me
know after and I'll probably make some
changes to this presentation and I have
to turn on my presenter and there we go
as an example sides I'm going to use the
site of our conference in Amsterdam
Robles and Darnell because it's the
responsive web design I know best you
can follow along if you want you can use
it either on your laptop or on your
mobile or tablet of course it's a proper
responsive design that works absolutely
everywhere but for most of this
presentation I'm going to assume that
there is actually no responsive design
here and that we're actually looking at
a simple desktop optimized web page that
is suddenly shown on my mobile device
because that's the main point I'm going
to make here when Apple started the
iPhone and even before that when Nokia
became serious about web browsing they
knew that their mobile browser on this
tiny device had to be able to show this
websites made by people who didn't even
know about mobile and suddenly haven't
optimized their site so a lot of
decisions they made hinged on that a
normal desktop site without any more
mobile component must also work
decently on a mobile device okay so what
are we going to treat today we are going
to start with the three kind of pixels
we're having we're going to continue
with the two viewports we have a mobile
then we talked a little bit about
zooming and especially how it's totally
different on desktop and mobile then
we're going to talk about how to access
all this kind of information with
JavaScript which is basically five
property pairs and they are already on
my site they've been there for two years
but I'm going to retreat them anyway and
finally we're going to talk about media
queries and about the meta viewport
um who here has heard of the meta
viewport most people not everybody
interesting okay so pixels what's a
pixel there w3c says that's a pixel and
I cannot quote it because it's too
complicated definition it has something
to do with the angle of sight right a
pixel is a certain amount of degrees in
your angle of sight which basically
means that a pixel on the phone is much
closer to your face and should be
slightly larger on a desktop at slightly
larger on a TV this definition comes
from the back in 2000 when WC had no
clue what it was doing
it is completely unusable and mobile I'm
afraid because if you think about it
suppose you have a definition of a pixel
that says okay it has to have a certain
angle in your sight that means that you
cannot zoom because then the pixel would
grow and that's not allowed because and
becomes larger than the allows angle so
the specification gives us no clue
whatsoever what's going on basically we
have to distinguish three kinds of
pixels to CSS pixels there is the
independent pixels and device pixels and
I'm going to explain all three to you
we'll start with CSS pixels basically
CSS pixels is what you use in your daily
job right if you say this element is
width of a hundred and ninety pixels or
a padding-left of twenty pixels or
whatever then you are talking about CSS
pixels and you use it normally naturally
without thinking about it then that's
good again because we have been using
this for for ages and ages on desktop it
must also probably work on mobile but
there are several caches on mobile
remember this if you're ever in doubt
CSS pixels are what you want and the
point here is that CSS pixels are not in
any way related to two device pixels
that is - the true physical pixels that
are present on your device
they aren't abstraction layer because
the size of a CSS pixel may be increased
or decreased for instance by zooming um
here's the site this menu has a width of
190 pixels that's how we defined it in
the CSS what happens when we zoom in on
that side it's still 190 pixels but each
and every pixel is slightly larger
that's what I mean by CSS pixels CSS
vehicles can grow and shrink according
to them the way the users assuming right
now now on desktop we can kind of take
that for granted
right on desktop we say yeah the users
jewels which means everything becomes
bigger and that's exactly what what
needs to happen because usually use the
zoom because they can't read the text
too well and need a slightly larger font
right basic accessibility so that CSS
pixels device pixels are basically the
actual physical pixels present on your
device um basically you can't change
anything about there about it as soon as
you buy a device it has a certain amount
of pixels horizontally and vertically
and that's nothing you can change about
that I'm going to expand this part on
the iPhone we all know that the old
iPhone the iPhone 3G I still have one
here my pocket uh so use it for years
after it was released it has a width of
320 pixels which has kind of become the
magic touchstone of all mobile web
development because the iPhone so very
popular so we all know that we make sure
that our website work properly on the
iPhone etc etc that's the wait a minute
ha
this is the metal fume hood and we'll
explain it in detail later I'm going to
just briefly go into something I'm
saying here a device with what is this
device with it's basically the number of
device pixels on the device and this
construct is used in order to make sure
that your site is narrow enough to be
shown pleasantly on the device and
indicate of the iPhone at least it has
to be from 1120 pix wide but have also
seen phones that work better with a 240
it's a dry etcetera in any case up until
2 years ago or so this was directly
related to the number of device pixels
so on the iPhone your side of
perspectives of 320 pixels however then
came to Retina display basically this is
part of trends apples take on it is a
most visible but we're seeing the device
vendors cramming more and more pixels
into the same space because it just
gives a nice or display a better this
way in theory now you would say ok so
the iPhone which was the first phone for
I think has more pixels twice as many in
fact so the Met of you put with the
natural viewport width that's given by
device width should also double point is
here that would break sites right first
we have every desktop then Apple came
along and said ok in order to make a
proper mobile site for the iPhone you
have to use basically the meta viewport
I showed you just now which restricts
your sites of 320 pixels if Apple will
suddenly double that to 640 pixels then
many sites would break and both
developers and consumers would become
angry at Apple so that was absolutely
impossible to do so we have a new iPhone
with 640 actual pixels physical pixels
on screen but we still want to restrict
our websites to 320 pixels and
that's why the density-independent
pixels coming basically Apple said okay
we are going to pretend for the web
developers sake that our stream is still
320 pixels wide and basically what they
created was another abstraction layer
density independent pixels have nothing
to do anymore with physical pixels they
are yet another abstraction layer in
between the actual physical device
pixels and the CSS pixels that will work
with every day okay this is a very
complicated definition it's the best I
could come up with and basically it
comes down to for the iPhone itself we
go under than 20 pixels what we have to
see here it's not this was a necessity
we as web developers do not want to be
confronted with the true breadth and
width of the immense amount of devices
we have around the world and their
actual physical pixel count because we
would go absolutely crazy so that's why
a lot of vendors right now are
implementing density independent pixels
what's basically say okay you have CSS
specs that you work with if you
absolutely have to know more about the
device we will refer you to this
intermediate layer which will give you a
reasonable answer that you can actually
use in your daily work it all sounds
very complicated and frankly it is
pretty complicated so the definition of
this device width has changed slightly
because if thou means the number of dips
and no more the lot number of device
pixels so no more physical pixels we add
an extra abstraction layer because we
must in practice on the iPhone and the
bottom of course when Apple wants it
your site is still restricted to 320
pixels which means in practice that on
an iPhone 4G or higher one device
independent pixels covers for actual
device pixels right two times two
and this will continue if Apple creates
a super Retina display or so with even
more pixels the device-independent
pixels will remain constant at 320 so
with all these kinds of pixels in mind
what do we actually need as web
developers I already gave you a clue CSS
pixels are by far the most important
part for it for us we have to work in
CSS pixels I'm going to explain a little
bit more about how they work but
basically you have to keep in mind the
idea of a pixel that's obviously this
wipe and it can grow and a constraint
and your entire website will grow or
shrink with it density-independent
pixels are kind of important because
they figure in the meta viewport but you
don't really have to think about them
device pixels finally totally and
completely unimportant to us well except
of course with the latest fashion now
that the iPad 3 years out of creating
super high density graphics for the iPad
3 because it has such a high density
display from a design perspective that's
of course wonderful but I'm a bit
worried about the networking side of
things I mean I have an iPad I have a 3G
connection and I want the loads just a
random site because I'm on the training
board whatever and that site sees I have
an iPad 3 and since we images that are
basically four times as large as a
normal image of right 2 times 2 what is
that going to do to our mobile
connections my problem here is that the
Retina display is as far as I can see
the absolute indication of Moore's law
because components are getting cheaper
and it was very clear from the outset
that Apple was waiting until the moment
in time they could sell these components
in the iPad 3 for a market confirm price
but Moore's law does not go for mobile
connections mobile connections are
dependent on bigger things like cell
towers and spectrum questions and
bandwidth questions that are not true
influenced by Moore's law so basically
what we're seeing here at this place are
getting more even more finer and finer
and in the end it will mean that the
graphics will be so immensely huge that
we cannot divert them at all over a
mobile connection yet I don't know what
the solution is here I'm just saying
that there might be a problem here that
well think about ok so what kind of
pixels do encounter in practice as I
said in CSS everything is CSS pixels
that's really simple in JavaScript and
those trafficker properties that's
Express speak there are expressed in
pixels
most of those properties are actually
also CSS pixels because that's what we
need to know as web developers right we
are not interested in how many actual
physical device pixels is this div
spamming we want to know just the offset
width of the div and that is in CSS
pixels there are a few exceptions to
this rule the most important one of
which I'll treat later on
sometimes it's device pixels or dips I
mean we've already seen an example of
that the meta viewport width
device-width right it's used to work
with device pixels in networks for dips
ok I'm hoping I haven't confused you yet
because we're going to go deeper this
was just a kind of a gentle introduction
to the problem and also because I
actually needed to define CSS and device
papers and dips few boards what is a
viewport basically the viewport is a
total amount of space you have available
for your CSS layout and we all know
instinctively on the desktop that means
the browser window right if we do
nothing special our elements of a divs a
piece and a body and our HTML are go
splat spam exactly 100% of the browser
window and we've internalized that
message and we count on it intuitively
and this is going to be a problem on
mobile because I'm about it's different
the desktop though the HTML element has
an implicit width of hundred percent
right it's a block level element that
any block level element has an implicit
width of a hundred percent which means
it spans the entire viewport which means
it spans the entire so we left the site
again what is the viewport simply this
nothing surprising we've worked with
this fact for years if we give anything
a percentual with this for instance has
to be having width of 34 percent 34
percent of what off the browser window
we all know that and we're all count on
it but it doesn't always work that way
on mobile because a mobile stuff is lot
more complicated basically because the
screen is a very narrow on most mobile
devices are carefully crafted layouts
will break horribly and remember a
mobile browser must show all websites
properly even if it's only for desktop
even if the developer has done nothing
about mobile
that's what Apple wanted to achieve and
that it has basically achieved that with
the the bag of tricks I'm going to talk
about now so a website has a two column
layout and the designer has decided to
implement that by giving the main
content block a padding left of 34% and
this is all positioned absolutely right
it's one of the many choices you can
make
in order to create this layout now on a
disap browser this works absolutely fine
you can you can kind of gently flow with
the exact screen size and if you change
the width of the browser window this
this will remain roughly one-third of
the browser window and well it's all
liquid design we've known this for years
and were absolutely fine
now suppose we are going to show this
site on a motor on a mobile browser and
neither the developer nor the browser
vendor has done anything whatsoever we
get this and this is how Holy Ones
thirty-four percent sure but also takes
you literally said okay one third of the
screen there is basically empty and it's
reserved for this column but here we
still have a one hundred and ninety
pixels absolute with and of course in
them there is going to be huge overlap
this is exactly the thing that Apple
wanted to avoid when implementing its
browser this is exactly what we have to
be afraid of on mobile because it's it's
just different we have to think
differently we have learned to think the
froofy of the past two years but I think
we should understand a little better
what we're talking about so that's why
I'm here that's why I'm giving this talk
in the case this does not work I hope
you will agree with me so what is a
mobile mobile bruh have offenders do
they Spacek elise plip the viewport
concepts into two we have two layout
viewport and that's that is the viewport
that we use for CSS such as the padding
padding left 34% was fourth year so if
there's a padding left 34% who say
that's 34% of the layout few boards
which is not necessarily equal to the
screen size so basically this is what
most mobile browsers do when they
encounter a purely net desktop website
once you've zoomed in to a proper level
you get something like this only part of
the site is visible in the screen of the
phone and the rest is off screen you can
of course scroll zoom and do whatever
you like but the point here is that they
take a so called layout viewport which
is like somewhere between eight hundred
and thousand pixels it's an interval
definition of the browser if we don't
quite know what's going on
then we're going to say okay the roots
of our CSS basically the width of our
HTML elements it's going to be somewhere
between a hundred and a thousand they're
influenced s 960 I found a lot of
difference between the various Android
devices not surprisingly and the other
browsers stayed roughly in that
neighborhood so this is the layer and
fuel board and it basically solves our
problem the problem that we're having
the problem that I cited Luke horribly
squashed if you'd squeeze it into a
mobile display so that's a layer of
viewport the visual view boards it's
basically the part of the page the user
is currently seeing white both by the
way I mess with the CSS pixels are get
back to that edit so basically we have
the layer and few ports which is used
for CSS and the visual viewport which is
just what the user is seeing the trick
here of course is that you can increase
or decrease the size of the visual view
boards by zooming basically you see it
should see the layer few boards as the
canvas of the elements I think think of
a painting that you're looking through
through a small hole right and you can
increase the size of that hole slightly
and decrease it slightly which means
that's it you see part of the painting
and you can move to a hole around but
you can never never see the entire
painting that's a bit how you have to
think about the layered viewport and a
visual viewport the layer of viewport is
the actual painting the visual viewport
is a little bit that you can see and you
can influence the width and height of
layered feel put a bit but not so much
when a mobile browser loads a website
that is not mobile-optimized much as
possible so don't forget roughly this
effect why do they do that as far as I
can see this is a UI decision we want to
show the user as much as the situs with
time of course it's completely
unreadable but at least the user can say
okay I'm interested in the main text or
in the navigation or interviews or
whatever and then zoom in so this is
what most mobile browsers do with a non
mobile optimized website basically
secretly what's happening here is that I
make the visual viewport equal to layer
few boards well I hope you started to
understand the whole meaning of the CSS
pixels I'm constantly talking about
basically you can
kind of yeah increase and decrease them
until you find a cute resolution for you
to look at the site so the page is
unreadable but you can zoo which brings
us to zooming what you have to realize
here is that zooming on desktop is
completely totally utterly different
from zooming on mobile and kind of
guessing most of you intuitively
understand that but so let's dig into it
a bit deeper if you saw on this top of
the browser window a you zoom in which
basically means that that are less CSS
pixels that fits in the browser window
which influences your layout a bit
it kind of depends if you have a
relative with or relative having less
that's because see in the example in a
moment then it tries to kind of tries to
keep up with what's happening but with
elements with absolute with are going to
grow and shrink this is of course one
who wants but it's good to really
understand this on a deep level so
example this is a site normally just
let's call soom 100% it has meaning on
desktop but it doesn't really have
meaning on mobile as we see in the
moment I'm going to zoom in and watch
carefully for two bits this is the part
that was 34% white and this was the
element that was 190 pixels wide look
carefully what's going on the 34% is
still pretty much accurate there's a bit
of zooming going on of course
excuse me a bit of rounding going on of
course so that is actually a slight
difference to where this border is but
this part of the site still takes pretty
much one third of the screen and this
part two thirds because it's relative
unit obviously
however these this element with with a
hundred and ninety pixels starts to grow
and now you can agree or disagree on the
exact amount of that well
it's a good idea if design or not a
designer thought it was so we did it
but it's what basically is going on here
again is that the CSS pixels themselves
have grown so that hundred and ninety of
them now take up more of the screen
after computer let's go to mobile on
mobile
zooming basically increases or decreases
the size of your visual viewports here
again we have the website on Nova and we
seen only part of it if you zoom in it
may appear better layer of changes about
the doesn't really nothing is
recalculated right in the previous
example on desktop we have to start
recalculating stuff oh it's a padding
left 34% okay then the brother has to
start to be calculating how many actual
pixels that are and has to repaint a
page that's for the expensive on mobile
because mobile has slower processors
than desktop never forget that if you
can avoid a reflow or repaint in the
browser please do so in addition the
whole UI concept of zooming is
completely different on a mobile device
I'm going to make this switch again
basically what we're seeing here is that
all the CSS pixels in the entire site
are blown up that also happens on the
desktop but on the desktop they be the
start and end points are still
constraints on mobile the site just
grows on and on and on so basically you
know it starts to go off the protection
screen and I mean in theory you can zoom
a lot I mean I've done one zoom dist
when the iPhone you could show me in a
lot I could still zoom in enough so that
a fund of one pixel just a font size one
pixel was still clearly readable in zoom
zoom and zoom and zoom if the arre that
means that the site becomes enormous in
practice what's really happening of
course is that your CSS pixels are blown
up and up and up
so on the desktop if the actual
viewports becomes less light when
measures and CSS pixels right because
less CSS pixels fit into your screen and
um mobile it's just a visual viewport
the hole through which are looking at
the painting that changes which makes
the whole concept of zooming or mobile
totally different
and besides is that's the important
effect of not forcing the browser to
recalculate all kinds of CSS stuff the
visual field board now contains less CSS
pixels if you look at it from a visual
viewports perspective just from purely
the screen and what you see it now
contains less CSS pixels but the layout
viewport does not I hope the other
sentence because it's pretty complicated
and I'm not totally sure if I'm
explaining this the right way but we'll
talk about that you would be us okay now
some JavaScript properties in order to
really read out all this kind of stuff
actually the situation has improved
markedly here when I started my research
about two years ago I did my first
research on this and basically there
were only three browsers that really got
this right namely Safari by Apple
blackberry even the old crappy
blackberry got defied and Nokia
meanwhile a lot of other browsers have
ever implemented these java script
properties properly we'll get back to a
full list later first screen up width
and screen of height what does it mean
the width and height of the tree but you
have to realize that this is in either
device pixels on the desktop or in dips
on most mobile devices so basically what
you're seeing here it doesn't say very
much and even back in the day when I was
only concentrating on the desktop I
could see absolutely no point in reading
as the screen size why would you want to
know that the thing you want to know is
how wide is the users browser window
that actually gives you correct context
for your website but I mean the whole
thing of reading up swing weights I've
never understood it but you can if you
will and you can also do it on mobile
and even works properly across most
mobile browsers but remember I'm
studying 20 mobile browsers at the time
so if I say most I mean 18 after 20 or
so and the two remaining ones are very
obscure ones document document elements
client and height this is the width and
height of the layout viewport so
basically without any intervention on
the iPhone it will be 960 pixels wide
and on androids somewhere between 800
and a thousand it's this and this is
measured in CSS pixels because it's the
basis of all your CSS calculations right
if you give your padding-left of 34
percent it's going to be 34 percent off
the layout viewport it's kind of useful
mostly because of media queries which
I'm going to talk about later so let's
forget that for the moment but yeah this
is future information and now it comes
to the real important part windowed of
inner width and windowed of inner
Heights this is the width and height of
the visual viewports expressed of course
as CSS pixels this gives you vital
information namely how much of your site
is to use are currently viewing how much
of the stuff can you actually see right
now and I think it's by far the most
important properties not only in this
precipitation but maybe even in the
entire mobile space because I think
personally that zooming is going to be
the next big UI thing from of our
websites we can do so much and many
interesting things with with zooming at
once created an example and it didn't
quite work properly but it was 2 years
ago when the browser's did it cooperate
blah blah blah blah but I tried to make
a kind of a newspaper site and I said ok
I divide the screen into form
on the top left we have the main article
on the top right we have domestic news
foreign news sporting whatever that
quarter of the site of as domestic news
is in turn divided into quarters to
which you can zoom into which contains
again a main article and some subsets of
domestic news same for foreign central
sports basically you can zoom in to the
article that you actually want to read
now I'm not sure if this is in any way
practical it could be that it's totally
unsuited to newspapers but I still
strongly strongly strongly believe that
zooming is going to be the next frontier
we have to I mean we are basically
waiting for some totally brilliant flash
of inspiration from somebody is totally
unknown by you right now and who says
yeah we're going to work but zooming
you're going to do this brilliant thing
with it but everybody will see it and
say wow yeah you're right so basically
that's why I'm working on the technical
infrastructure right now once that
person comes along with this brilliant
idea I want everybody to be able to read
out the zoom level in the brand and all
mobile browsers I might be wrong here
it's just a theory but I hope you will
continue thinking about it document
document elements offset with M height
its width in height of the HTML elements
the width is of course usually the same
as with the layout viewport right
because the layered viewports
constraints the HTML elements the
heights may be a lot longer though
because an HTML page may scroll Scroll
scroll forever
this too is expressed in CSS pixels and
it's occasionally useful I mean I
haven't really found a killer use case
for it but occasionally it can be handy
to figure out basically how big your
page is becoming it would be interesting
mostly for statistics and analytics for
instance you want to prevent your user
for falling too much on a page and then
you can read out how much the users
actually have to scroll on that page and
then they have to send that information
back to the server
do something with it it can be useful
finally a window the page x and y offset
this is basically the current scrolling
offset of the base this works exactly
the same as from desktop on this couple
you can use these two properties too and
they simply work in mobile browsers by
the way all this information is on my
site so you don't have to write down
everything you can just go to the
viewport section of my sight scoring
office of the CSS pixel sense useful so
as I said as far as I can conserve this
system was pioneered by Nokia and
Blackberry because back in the day when
the black does anybody remember the old
Blackberry browsers was 5 or low way
yeah oh they're not too many good
the other ones a few of you missed
absolutely nothing it was the most mousy
browser ever it has a so-called
proprietary rendering engine and in the
mobile space proprietary rendering
engine is code for crap rendering engine
but even that's all Brassica of this
right because even the engineers of that
old crap browser saw that zooming was
going to be tremendous tree importance
so that the nokia browser the nokia old
Nokia Symbian browser was a bit better
than the BlackBerry browser and that
really good but a little bit better and
here to denote honestly is decided of
this system and not sure how much they
were influenced by each other but I am
reasonably sure that they both
influenced Apple because the iPhone does
exactly the same does it right
um the other platforms were a bit slow
on the uptake Android really supported
this only from version 3 onwards Android
is a problem in the mobile browsers
fearlessness
in any case I'm not sure if there any
hardcore fans hardcore Android fans in
the audience if you are you might want
to cover your ears well because what SM
do not not like what I'm going to say
Android has use fragmentation problem
that's nothing new but it's going to get
even worse in the near future
ok a little Side Story about Android
what it's a fundamental problem with
seeing right now in Android early on
Google said oK we've got a free
operating system we wanted people to
have phones in their pocket that use a
free operating system because they
basically wanted to sell that consumers
information to their clients right if
you're not what is it if you don't pay
pay for it you are the product so Google
wanted to push it out it's gonna
basically gave it away so I'm so agency
in Motorola LCE the minor ones etc and
they did all kinds of crazy stuff with
it I mean in the early days I did some
testing of various Android devices next
to each other and what I found was that
all the Android vendors changed the
browser a little bit why because they
could and that's imported you may laugh
about it but that's actually very
important for both device vendors and
operates at carriers in the US
I should say carriers device vendors and
carriers want to be distinguished from
the other device vendors and carriers
some soon once it's UI to be better than
HCC's and HTC was it uui to be better
than some source right so they are going
to change stuff in theory that could be
great you know some competition and
Indians on you I will win in practice it
doesn't work that way
in practice as you think and practice at
the both native and what developers get
totally crazy because they have too many
different kinds of devices to support
and especially HTC I mean I at certain
point I just stopped following all the
stuff that HTC brought out and
market because there were too many
devices out there so fragmentation
fragmentation fragmentation what was
Google's basic reply to this okay we're
going to be more strict from Android 3
onwards we are going to be far more
strict in how you have to implement the
hardware and especially UI I remember
how surprised I was about a year ago
came into this company and we're going
to swap some devices and said yeah we've
got to Android 3 tablets here oh cool
give him a Samsung and can't remember
the other one doesn't matter
they were completely the same UI was the
same and the hardware was really the
same the only difference was the home
screen because either the one have some
Samsung Apps and the other had some apps
from the other guy now this may seem
great to you developers it's certainly
great for Google and consumers could
conceivably like it too but it's
absolutely disastrous for the device
vendors and for the carriers because
they are not distinguished from each
other anymore right if the Samsung
Android tablets is exactly the same as
the HTC Android tablets why should I
care which one I buy that's over some
sort of ice you see absolutely do not
want because they want to be remembered
by the consumer as a good brands right I
mean it does way beyond sales their
whole brand image is in danger here and
the whole device market is in danger of
becoming commoditized it doesn't really
matter if you would buy an HTC or a
Motorola on LG or whatever it's all
Android and either you like it or you
don't
but still it's all Android so what we've
seen here is a basic tension between
Google developers and possibly consumers
on the one hand and device vendors and
carriers on the other house and I'm not
sure how that tension is going to be
resolved in the end something will break
somewhere
basically there are two broad options
either Google relents to say okay
nevermind about UI here do whatever you
like
all the device vendors and the carriers
are going to move away from Android or
even worse they can say okay
Google doesn't allow us to do as we
and then we'll go through branch of our
own Androids we take a two point one or
two point two and we go to fix it little
bit them hats or more stuff to it and
then we're going to bring out devices
with that it's already happening in
China the Chinese device vendors YY and
CTE are already doing this Amazon is
doing it of course with the Kindle Fire
and it's only going to become worse in
the future when it comes to androids
fragmentation you ain't seen nothing yet
really this side story what never mind
oh yeah in order to explain that android
support only from three-arm which is
another problem I have with Android I'm
sorry I have to vent though another
problem I'm having with Android is that
they don't care about the web evidence
the browser will see a work with the
Android browser extensively but so many
okay and I hope you liked it exactly
that's what I mean as far as I can see
the Android browser is starved of
resources as IE used to be before I ate
and basically it gets better at the
glacial pace and so slow and then the
next version some bugs are still not
resolved bla bla bla bla bla is getting
boring and it is in danger of becoming
the biggest mobile browser out there
right because Android sales market
shares now around 50% in the US so in
theory if all those people are going to
surf but yeah I'm going to do but
suppose they did then you get 50% 50% of
your mobile visit will be Android and
mobile faces as a whole otherwise so 20%
of all your website visits may be
Android think about that for a moment
it's not what we want so that's
basically explain why it took Android so
very long to support this system but
they do now and again I'm not talking
about Chrome for Android here because
chrome people of course do care for the
web and I expect to see some
improvements we once Chrome takes over
as the default browser
if it takes over I'm not totally sure
what's going to happen but I hope it
does
I nine unfinished film does not support
this entire JavaScript property system
as far I mean I kind of expected I tend
to support it
Microsoft is in totally different
position than Android first of all
Microsoft has already made this mistake
right it's got 86 and they knew that
they have to basically change the game
did you ever wonder look at i6 which was
a pretty good browser when it came out
it wasn't updated enough don't gotta
reset supposed to be better right I did
some testing yeah I think it was better
but it's got a really good processor now
I ate same story yeah it's a bit better
nice safe and its support is enough yes
fine okay cool yeah an update yeah sure
and then come say hey nine and it's here
and then come right Tenon's goes up to
the roof because my 10 is a really good
browser as far as I know I'd still have
to test the latest review please but I'm
really liking what I've seen here why
does he this certain acceleration why
did Microsoft decide after I ate that
they had to dramatically improve their
browser
the answer is because of mobile that's
Matt doesn't care it isn't about desktop
anymore it's about mobile Microsoft knew
that they absolutely had to have a good
mobile browser in the users pockets or
it would be out of the mobile game and I
mean I'm carrying a Nokia Lumia now
that's my temporary u.s. phone it's kind
of okay in the browser yeah yeah it's
not bad it's not bad I've seen much
worse mobile browsers sure sure but it's
not really good either
so this is what Microsoft is clear
seeing and they're upping the game
drastically and I expect I tend to be a
significant improvement both on desktop
and on mobile over a nine so that's
basically why I expect I tend to support
this stuff not supporting it just
doesn't make sense
hmm otherwise browser compatibility is
pretty decent across the major browsers
I'm talking about that okra gets it
right now something badass gets it right
I've heard of the Samsung Dolphin
Browser one - Oh more okay some have
good good something dolphin is a pretty
decent browser actually as far as I'm
concerned is the third best mobile
browser there is message of course
affari second best blackberry third best
samsung golf in Opera Mobile and I mean
these three BlackBerry's Samson opera
are kind of the runners-up to Safari now
as far as I'm concerned
basically what we're seeing here is
Apple up the game apples again you have
to have a good table browser nowadays
and some companies took that very
seriously and others such as Google such
as Android it's not right anyway we're
not talking about mobile browsers here
by the way I'm I'm going to talk about
mobile browsers in extensively tomorrow
in the workshop so if you want to hear
more come around what are we going to do
now yeah
document the document element of client
with which is a layered viewports / we
load up in with which is the visual
field board this gives you the current
zoom level of the user provided of
course that both properties are
supported great well this you're not
interested in the zoom level I have not
really found a reason to be truly
interested in zoom level well maybe for
statistics and analytics yeah that could
be but you really want to know here is
how much of the site is of useless
currency seeing right the size of the
hole is using to look at the painting so
I suppose if you want to know the visual
view bored with visual view but within
Heights are by far the most important
things that can read out when it comes
to viewport
okay let's stop briefly about media
queries and then especially the two most
important ones on mobile with any device
with there are many more but these are
about viewports remember this width is
one once
forget about device width I'm going to
explain you excuse me I'm going to
explain you why device width gives the
width of the device screen in device
vessels and in fact on all browsers at
essence and that's quite a few it's
equal to swing up with but as we saw
just now screen up with is not really
important we do not need to know the
width of the screen and device pixels we
don't care we want to know how wide the
browser window is or alternatively how
wide the visual view board is so this is
the device with a media query on desktop
and it gives you the complete width of
your screen whatever the width media
query gives you with a few boards in CSS
pixel and then of that's a lot more
interesting to us unfortunately there
are a few zooming problems on desktop
and I am NOT going to go into them
mostly because I haven't studied them
well back in the day when I did this
research I saw there were problems with
basically the viewport in the browser
window especially when when you zoom in
and out of the site but I haven't really
started them careful either so I am NOT
going to give you details there are some
problems with media query is equal to
document.documentelement.clientheight
yes in all browsers and I tested quite a
few and I was totally surprised by this
when I started out I was completely sure
that at least one of the 20 boxes are
going to test would fail dramatically
but they didn't remember some browsers
make mistakes here some browsers just
give you a wrong number for the for the
width of the visual execute width of the
layout viewport but they repeat the same
error in the media query so
the value is still exactly the same on
this rapid it's and this is of course
the source of what we see him out with a
responsive design on that you're going
to open air you come to increase and
decrease the width of the browser window
and you see the sides moving around
they're changing bits with breakpoints
or stuff like that
the technical foundation is the with
media query ok what happens on mobile oh
well well of course the actual screen is
far smaller than on desktop when we talk
about device creates less we don't care
I mean this is a device with a mobile
again in device pixels or more likely in
dips
that's the independent pixels why do you
want to know this you don't with the
width of the viewport what does having a
mobile with the two viewports the
layered viewport so basically we're
seeing here that the layout viewport
which is used to layout your CSS and
especially your percentual widths and
stuff like that
the width of that layered viewport is
given by the width media query so I'm
saying it again with this immediate
where you want but still if you look at
this picture that doesn't make sense at
all right because they are not
interested in this either you want to
create a nice website that nicely fits
in the screen of your mobile device of
your users mobile device and we usually
don't care about the width of layered
viewports except in one case and I'm
sure some of you are saying it's coming
the meta viewport this is the meta
viewport we saw briefly at the start of
the presentation look at it again look
at its ugly syntax oh my god I mean this
is much nicer right this is what opera
proposed and as far as I know the Opera
is still the only browser that supports
this I would like this in my CSS this
amount it's you know we have to be
forced to because we must use this this
is the key to successful mobile site
building remember
Plus with media queries okay so what
does it do exactly basically what you're
telling the browser to do is to adjust
the size of the layout viewport without
doing this delay a few water somewhere
between 800 and thousand pixels that's
done to accommodate desktop websites
that haven't been optimized for mobile
that's all if we did not do that they
would look horrendously ugly on a mobile
device but with this meta viewport we
can tell the browser okay I want you to
adjust the size of layout viewport now
you can give a pixel value here you can
say 380 I am actually saying 380 in one
of my tests because 380 is not a natural
value in any browser and I do want to
have a test for unnatural values but I
feel that I don't really see the point
what we really need here is device with
which basically means the screen size
and dips it used to mean the screen size
in true device pixels but then reading
at this place similar displays came
along and we had us to keep that value
constant so the event that's invented
density-independent pixels so basically
first we have this without the meta
viewport you can kind of use this site
right it's absolutely not impossible but
it's not a nice experience and with me
with meta viewport we finally arrive at
a to destination a responsive mobile web
site of course what we do here is not
just using the meta viewport we use
quite a few media queries to restructure
our CSS firms right it's one column now
and the whole left column has
disappeared the fact we have two new
links here and there's a link to the
menu blah blah blah blah blah you can do
that by means of media queries you can
give extra instructions to CSS but those
media queries themselves depends on
giving the website the correct width
which correct width the width that the
device vendor things
is most proper for it which for its
device and that's important support I
think the BlackBerry
actually has 320 just like the iPhone
but suppose it were to be 350 then the
device with issue 350 and because
blackberry has extensively tested this
it would be the proper width for your
websites to be rendered on a mobile
device so it gives you this gives you
exactly what you want and remember the
device vendors cannot afford to make
mistakes here right if they do their
home their whole experience of their
mobile browser is going to fail
miserably and they don't want that
because they understand they need a good
mobile browser as far as I'm concerned
there's little reason to use other
values and device with maybe we'll come
up with a few in the future but right
now I'm not seeing any just use device
with and the trick is you now basically
tell the layered few boards to become as
white as the device and the width media
query which uses the layer fupas nothing
seems full of life basically now do with
media query shows us exactly what for
once it shows us how white is decide
going to be on this device how why does
the device vendor think the site ought
to be in order to be shown properly of
this device you'll find that information
now in theory you could say okay but we
can also use device with here right
because it gives exactly the same
measurements it's kind of to wish but
only when the zoom level is a hundred
percent and this is complicated first of
all we have the difference between
actual device pixels and Apes we have
some zooming related issues and
basically my advice is not to go there
and leave with instead and forget about
device width we are not interested in
physical pixels that's the thing you
have to remember we are only interested
in CSS pixels we want to know how many
CSS pixels fit on that screen we want to
know how many CSS pixels are left what
user has zoomed in that's the stuff we
need to know
so I'm going to give you the trick meta
viewport again with equals device with
in combination with media queries I'm
kind of guessing you already knew that
for whom is this completely new a few
who first of you knew that I hope you
understand why this is the case that's
basically what I came here to talk about
I want to give you a further
understanding of what's going on in this
space and again I admit this is
complicated stuff I hope I explained it
well enough if you don't understand that
it's probably my fault and not yours
because I'm not 100% sure yet how I
should explain this complicated stuff
anyway we've reached the end of my
presentation
Oh after about an hour that's good I
will put these slides online I hope
tomorrow or something and you can find
them on course more torque and people
came on Twitter thank you for your
attention
so I'm very concerned about web
accessibility and one of the things that
we see very often to address certain
accessibility needs is putting content
off screen using CSS negative margins
and whatnot and we're having issues with
that in mobile browsers and I was
wondering if you could comment on that
what kind of issues faced with
definitely invisible know that they're
showing up they show up yeah not always
but sometimes it's right would have seen
an example of that okay I know but
basically it's with detection then -
line and on line or something I didn't
tell you sorry okay any other questions
could you talk a little bit about with
media queries using pixels versus EMS
because we're seeing behavior that's
really odd in Safari that you don't see
in Internet Explorer
9 or firefox for example if you use
pixels when you when you on the desktop
oh really I not totally sure about the
desktop but the whole idea of em's it
was launched fairly recently and I think
it's an excellent idea basically the
message is instead of the pixels use EMS
in your media queries because then you
can kind of say okay I want my lines to
be no longer than 40 to 60 characters
which is basically optimal for
legibility so in principle I'm all in
favor of switching to EMS I still have
the tested in the browsers I didn't have
time yet to test it but as far as the
issues on desktop umm didn't relate to
zooming the issues yes there are issues
with zooming on desktop yes and I must
admit I forgot the details basically
what you would expect to happen if you
zoom on desktop right there's more CSS
pixels in the same physical space and
you would expect it to media queries to
react to that they don't always but I
don't know the details I'm sorry this is
something that just haven't researched
yet is there if the orientation of the
phone yeah on the iPhone you mean yes on
the iPhone this is a 320 device pixels
rebus doesn't matter theoretically if
you did this you would expect the screen
width to change to 480 it doesn't in
most other older devices it does change
properly so right if you do this the
official width of the screen remains 320
pixels now first of all and totally saw
that Apple did this deliberately I can't
even think of a few reasons why this
occurs consider suppose it would switch
from 320 to 480 then it would mean that
your entire CSS would have to be
recomputed and recalculate it right the
padding left 34% is now going to mean a
different amount of CSS pixels and
that's costly in terms of device
performance and apps Apple is is mean
Apple and performance
it's really a match made in heaven Apple
absolutely wants to protect users from
basically a battery train every single
time you switch orientation if you have
to recalculate all that stuff it
basically means that the browser has to
do some pretty costly following
repainting recalculating etc that's one
the second reason I'm seeing is that the
effect can be quite ugly because you do
basically this and then you see the
whole website suddenly changing and from
a pure and UI and graphic design
perspective that's quite ugly so as far
as I can see those are the two reasons
that apples have no we're going to be
very strict on that I'm going to change
we're going to keep even in landscape
mode we're going to say it's officially
320 pixels wide it's density-independent
pixels right you can do whatever you
want
more worryingly is that in recent device
I see other device vendors do the same
now our solutions and we have the
orientation media query which is
basically portrait or landscape which
can help you but it's not supported by
all browsers there are maybe a few other
tricks that you could use on the iPhone
and only on the iPhone really out the
outer with window dot outer with helps
but I haven't figured out I mean it
doesn't do anything in any other browser
should have to be absolutely certain
that your excuse me that's you're
actually on an iPhone so the problem is
solvable in theory but we should wonder
whether we should first of all it's
technically quite complex to solve it
and secondly there is a reason Apple did
all this I mean there are some very
weird things going on there Mobile
Safari but as far as I'm concerned Apple
has made a deliberate choice to do that
for instance event bubbling right who
here knows what event bubbling is a lot
okay if you don't know ask your neighbor
basically I have let's say that we have
a complete web page here and then this
line is a paragraph I click
on that paragraph and then the processor
said okay is through click event on this
paragraph and after that goes round to
the body and to the HTML element to the
document and at each level it looks okay
is there a click event involved here and
if so I execute it that's normal event
handling has been supported ever since I
for now on mobile safari that event
bubbling doesn't go up further than the
body it does not reach the HTML element
it does not reach the documents I have
no clue why I don't know and I hate
that's right I'm the guy who's supposed
to solve the browser bugs let's say I do
not have to solve it and this is totally
weird
one way of solving it is setting an
empty over event was actually an on
click event handler on the paragraph and
that events have a may be empty so just
an empty function as a click event
handler on the paragraph it bubbles up
correctly to the documents the other
solution is we're done much much weirder
in fact it's the most weird solution
I've ever encountered in my long and
checkered career
you said cursor:pointer on the paragraph
in CSS yes it's at you know the mouse
cursor becomes a pointer if there a
mouse cursor and mobile safari no there
isn't but still if you said
cursor:pointer then the event bubbles up
I mean wow I did figure out that myself
somebody actually had to tell me because
it would never occur to me to try to use
CSS to solve a JavaScript problem and
again I don't know why Apple did and I
hate it I'm still kind of hoping that
some at some date somebody let me know
but these are the kind of weird things
we insert see in Safari and I'm
absolutely convinced that they are there
on purpose probably related to
performance and battery life I think</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>