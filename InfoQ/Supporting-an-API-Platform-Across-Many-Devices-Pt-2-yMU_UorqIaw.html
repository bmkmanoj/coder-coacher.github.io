<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Supporting an API Platform Across Many Devices - Pt. 2 | Coder Coacher - Coaching Coders</title><meta content="Supporting an API Platform Across Many Devices - Pt. 2 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/InfoQ/">InfoQ</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Supporting an API Platform Across Many Devices - Pt. 2</b></h2><h5 class="post__date">2011-12-02</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/yMU_UorqIaw" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">my name is Daniel Jacobson I'm from
netflix i had the API team there today
I'm going to talk primarily about
internal audiences and api's I'm also
going to harken back to my earlier days
about a year ago I joined netflix prior
to that I was at NPR I added up the tech
group there and among other things I
launched the API so I'm going to talk a
little bit about that primarily focus on
Netflix so starting with NPR I wanted to
talk a little bit about the API program
and the distribution of audience is
relative to the API so on the left over
here those are the total number of API
Keys distributed by audience so what you
can see there is overwhelmingly the
distribution of of those keys is going
to the public developer community and
the small sliver of that is going to the
internal NPR developers and a slightly
bigger portion of that is going to
member stations and some other partners
but on the right side you can see that
overwhelmingly the consumption is pretty
much the reverse NPR is dramatically
taking up the majority of the the
requests and so just talk a little bit
about what that means there are a bunch
of these kinds of apps that are out
there in the marketplace that
third-party developers have built put
together those are representing the left
side the overwhelming number of keys and
the overwhelming percentage of
consumption is done by npr's website the
player mobile devices and things like
that so this is really a case where I'm
the API at NPR was pretty much fueling
the overall digiti digital strategy and
then it was an offshoot exposing this
stuff publicly so that other people can
do some interesting things with it but
the interesting things are really a
small percentage of the overall value
proposition so similarly if you look at
netflix the distribution is pretty much
the same two differences one the numbers
are overall bigger so more traffic
coming into netflix and also the
distribution is much more
dramatic so clearly Netflix is
overwhelmingly taking up the majority of
the request the actual distribution is
about ninety nine point seven percent
from internal use and point three
percent from the public so the netflix
api launched as a public developer
community api and that was the entire
purpose so that's that point three today
but at one point it was pretty much one
hundred percent and then over time and
evolved to be more of an internal
strategy where we have hundreds of
devices mobile devices Wi-Fi enabled tvs
consoles etc all running off of this and
the public api is now representing still
that small percent but still a consumer
of it overall so as this translate into
translate into overall value proposition
for NPR over a year span what we saw was
a hundred percent pageview growth across
all the platforms in that year eighty
percent of that overall growth was done
through mobile development and those
kinds of apps internally consumed a very
again very small percentage of that
growth is public developer stuff
similarly with Netflix this kind of
track overall traffic increase going
from less than 1 billion requests per
month to today more than 1 billion
requests per day that kind of dramatic
increase is also a result of internal
leveraging of the api's so what does all
this mean I mean these are all
interesting metrics I like to equate it
to an iceberg where that part at the top
the little chunk that is highly visible
above the water is really the public API
world it represents a small portion of
it but it's also highly visible it's the
kind of stuff that you can learn about
other companies twitter has a public API
Facebook Netflix and PR all these
companies know about it or have it you
know about it through there but the
reality is that the big mass underneath
the water is really representing the
overwhelming traffic for many of these
companies not all but that is a trend
and with these
do particular companies I've been at
that is absolutely the case so
understanding your audience is key to to
the overall API strategy some companies
are going to have an audience that is
very much public and you're going to
want to leverage that for these two
companies very much an internal
consumption model so what that really
translates into is understanding how you
need to design your organization to
support those audiences and the API
which is going to support them
understanding how to design the API to
meet their needs how they understanding
how to allocate resources to support all
of that and things like that so
understanding your audience is really
the first step and then all these things
cascade from there for Netflix going
back to this very clearly our audience
our key audience is going to be our
internal consumption our device partners
and our internal developers so those
developers they build these devices we
have a bunch of internal teams who are
either directly managing these partners
or they're actually developing the U is
for these devices and the way that our
entire organization is structured is
that we have a whole bunch of different
engineering teams who specialize in
different things some of those
engineering teams are specialized on
presentation layer some of them are
specialized on metadata and algorithmic
output and the kinds of material that is
used in order to create a great UI
experience on these devices and sitting
in the middle is my team the API team
and essentially this is what it looks
like we are consuming from all these
sources and we're piping it all out to
all these devices and so as you can see
here the organizational structure is
kind of a cornerstone to the way that we
operate as an engineering team and I
would say that very much the API is core
to the overall DNA of the engineering
culture within Netflix and that's really
important facet when you're
understanding with the audience is make
sure that you understand where the API
is positioned within the orc accordingly
so again the the netflix api as it
currently stands today was originally
founded in the thousand flowers model
where
the public developers that is the
current design of that API and I
mentioned that it's no longer the
primary audience so what we're doing is
we're revisiting that question saying
how can we redesign our API so that it
better serves the constituents that are
most important to us so basically
today's API is no longer the right tool
for the job so when we look at the key
goals of this redesign what we're going
to do is we're going to try to optimize
for performance for these devices which
includes reduction of overall
transactions because that's the most
expensive thing as you're interacting
across the web and reducing payload size
and just trying to streamline this
though so we can improve overall
performance and then the other thing is
to improve overall innovation speed so
that we can put the hand put the power
in the hands of our UI teams so they can
better better innovate more quickly
without us being a dependency blocking
them from certain certain things so
going back to our overall growth chart
tremendous growth what we're saying
there is no 37 times I think was the
number over the span of an 18 month span
billion requests today sounds great
right everyone super impressed with the
number right but we're not and so if you
think about NPR going back to them as a
website provider among other things a
billion would be a tremendous
achievement they would love to have a
billion page views per month or per day
or per year probably and they would want
that because of AD impressions so if you
have a billion page views you're getting
a billion ad impressions which converts
into dollars and you know it adds to the
bottom line that's a great model the
problem with AP is is that the output
looks like this or like this and you
can't really monetize it in the same way
and so having this degree of traffic
increase doesn't actually increase
revenue what it does is increase cost so
what we really want to do is we want to
revisit that we want to look at
improving the overall transactions
between the client apps and the netflix
api we want to get more to this model of
you know
could it have been a hundred million
instead of a billion could it have been
less than that or at least less than a
billion we know we can do that and what
that's going to do is it's going to
create all kinds of improvements in our
overall server infrastructure needs the
kind of staff and and total number of
hours dedicated towards maintaining
their servers things like that and and
hopefully the result will be improved
performance one of the common themes
that we have as we consider this
redesign is actually abandoning rest
which is probably not a common round and
may may not be the wise choice for many
but for us we are looking at a different
way to decrease the overall network
transaction cost so our current model is
we have a bunch of those client apps we
have a bunch of these api resources we
need to get that data to those devices
and the current model is essentially
they in a very synchronous manner
request one thing after the next and
draw it across the HTTP wire which is
that line there and each of those
transactions add up it might be a couple
hundred milliseconds each whatever it is
but they add up and that basically slows
things down so our new model is going to
this custom tier where in essence the
devices will make one transaction across
the wire and then make a couple
transactions that may be dependent on
each other and then a bunch of
asynchronous calls to just go out and
fetch data each of with each of these
lines is probably going to be in the
order of maybe ten milliseconds and then
deliver it back across the wire so we're
looking at really collapsing the overall
time required in order to get the data
and deliver it back and there are a lot
of benefits to this custom endpoint
model of which are on that sheet of
paper there that I can't remember you
have to hurt over here um so things like
the ideal state is one network
transaction as opposed to 15 or 20 or
however many are needed we want to have
dynamic ability for the UI teams to
update this so having this isolated
scripting tier enables all the UI
teams independently of our development
cycles to get this stuff up and live and
innovate very rapidly do a/b tests and
things like that we will have very
targeted payloads so bite counts will be
substantially lower will allow for
custom formatting so some of our device
partners have very proprietary XML
structures some of them have JSON
hierarchical or flat and JSON models and
having this ability at the scripting
tier it gives each of the UI teams the
ability to tailor exactly what they want
for their specific device so ultimately
this is one of John mutters slides this
is his API billionaire's Club we're on
it but really our goal is to not be on
it so we're trying to eliminate
ourselves from there well we want to get
there by other means like overall growth
of the company not chattiness and so the
goal there you know the underlying goal
is really that we want the API and the
overall interaction between devices and
our API to be much faster which will
result in happier customers yeah</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>