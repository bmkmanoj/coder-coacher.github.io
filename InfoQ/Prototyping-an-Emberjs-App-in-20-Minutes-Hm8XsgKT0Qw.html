<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Prototyping an Ember.js App in 20 Minutes | Coder Coacher - Coaching Coders</title><meta content="Prototyping an Ember.js App in 20 Minutes - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/InfoQ/">InfoQ</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Prototyping an Ember.js App in 20 Minutes</b></h2><h5 class="post__date">2014-04-24</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Hm8XsgKT0Qw" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">for those of you I have not met my name
is Eric Bren I'm on the amber Corps team
I've been lucky enough to be working on
ember and with ember for the last almost
three years now and I am in the unique
position where I get to actually like
make my living doing ember consulting so
it's been really fun amazing ride and
I'm really proud of what we've done with
ember and I want to share that with you
guys today hopefully in a quick 20
minute live coding demo so so yeah let's
dive in so what I would like to us to
try to build is a little like our do ask
since my friends here are hosting us and
I always troll them about being backbone
guys and not using ember I figured why
don't I show them how easy it would be
to build something like our do using
ember so yes yes unfortunately this plan
has you know kind of not worked out
exactly because my old roommate and our
host Jason no longer apparently is
writing a backbone code anymore he has
switched to Erlang which most backbone
engineers share a similar fate I believe
but anyways I'm here to share it with
you guys instead so here we go so we've
got we've been working really hard on
getting a great command-line interface
set up for you guys if you guys are from
the node world can you guys see this
okay if you're from the node world you
probably have high expectations for ease
of use and so basically what we are
working right now on enabling and this
is still in alpha but basically there's
a number command now
and if you're from rails you'll probably
this will probably feel like you're at
home
ember new amber - are do so we're gonna
hit this and then it's going to create
our our file structure that we're
expecting ember is convention over
configuration you know yadda yadda yadda
so then we are gonna hide all the amount
of the all the HTTP fetches that NPM is
doing for us underneath the hood with
these three little dots and hopefully
this will complete within 20 minutes
what's that
ah sure so we're installing the NPM and
of course like the Wi-Fi is gonna go
down or something
alright great and now we're installing
our client-side dependencies via Bower
as well so now we've got something
called ember RDO I'm going to open this
in sublime so we've got our folder
structure here and I'm gonna go ahead
and start the server ever server Oh God
oh yes of course I'm running it I'm
running another version we're going to
load this one up on port 4300 and voila
alright great so here we are up and
going alright fantastic so so what
happens when we when we loaded up the
server we're at this page what are we
looking at well if you're familiar with
if you've done server-side development
you probably imagine well there's some
kind of application template right well
guess what you're right so inside of app
templates we've got an application HBS
template and here's where our h2 is
coming from right so we're gonna build
our do so what is already on Eid well
let's see it's got a side bar right so
let's just create a side bar real quick
we're not gonna put anything in it yet
and then we're gonna create a content
area where we're gonna put you know this
outlet mustache that you see is
basically where the dynamic content goes
right so we've got an application
template we're gonna have a place where
like depending on where we are in the
application that content for that route
is gonna go here so we'll create you
know some kind of like main class or
something alright and I don't really
write CSS so there
with me I have lucky I get to just write
JavaScript so so here we are we're here
we've got live reload built in the ember
CLI so it just refreshed for us behind
the scenes now I just want to really
quickly look at the Dom it's gonna look
a little ugly basically we've got this
div here we can see our sidebar we can
see main right so so we know we're
working here we're going to do the heavy
rotation for those of you who don't know
let's look at our deal real quick
there's like heavy rotation here right
and so we're gonna have a bunch of
albums so let's go ahead and add a link
to heavy rotation and amber comes with a
default route called index so you know
just like there's an index.html you know
when you're dealing with static files
Amber's got an assumed index route so we
can link to index without doing anything
and we can also create an index template
here and then if we go to our up here we
are we're in the index right and if we
look at this link here this link
actually amber since we're using this
link to helper amber actually knows what
the URL is supposed to be for this link
so it'll actually generate you an h1 a
tag with an href with the proper URL
here we'll see in a minute as we start
deep linking you'll see the href build
up depending on the model data that were
actually linked good as well so anywho
so let's get our list of albums going I
in preperation decided to just go and
capture some JSON from their API and
basically copy and paste it in so we've
got this we've got this problem we're
like okay great we need to get data from
an API somehow how do we do that how do
we get that data from you know a dollar
Ajax call into a place where it's
accessible by our template well we've
thought about this and we've decided hey
you know what there's this problem of
async and
we you know would it be great if there
was this standard place that you could
basically just return a promise and that
when that promise resolves Amber's gonna
know that it can transition so amber
does like automatic loading spinners and
stuff for you and it works like deeply
nested in the UI so if you return a
promise that and before it resolves it
will like tell your app to go into the
loading state and show a loading spinner
we can try to get to that I'm gonna try
to just skip it for now
but basically you know embers got this
idea of configuration convention over
configuration so the idea is if we've
got an index if we've got templates
named things like application and index
then we're likely going to have other
objects or other files name the same
thing and one of those files that's
really important is the route definition
and so basically what we're going to do
here is we're pasting in a bunch of JSON
at the bottom here but this is the meat
of the the problem here so we're going
this by the way is using es6 modules
ember CLI builds in the six module
transpiler so you can use the future
module syntax today I'm not going to get
too into that but basically we reduce
this kind of export defaults kind of the
example the equivalent of module dot
exports equals so like single export so
we're exporting a subclass of ember
route and we're returning basically data
dot results so there's this JSON blob
it's got a result property with an array
of albums so model this this model
method or we like to refer to it as a
hook because embers got some default if
they hit behavior you don't actually
have to implement it unless you're doing
something custom bob yadda yadda yadda I
can't really talk too much about it but
basically the model method is where you
return the data from your API call and
like I said before that can be either a
synchronous return like we are doing
right here we're just recent graciously
returning data that we have in memory
already this could be also something
like return dollar Ajax
and since dollar dot Ajax returns a
deferred Amber will like hook into that
deferred and it will wait for it to
resolve and do all this magical loading
States for you yes what's up I'm sorry
so so the idea is that you have a URL
right and you need to what when you're
fetching model data what you're doing is
you're actually deserializing some form
of state of your application that's been
put out to the URL right so the idea is
like you're at albums album slash album
ID whatever foo right so this is the
thing this is the hook who's like hey
what are the query parameter what are
the parameters from the URL I want to go
fetch the data that is relevant to that
area to that part of the application so
throw away everything you think you know
about MVC's yes so well said so so try
not to like make judgments based on your
preconceived notions of like rails MVC
or whatever back-end MVC you have so so
yeah just we're we're short on time so
bear with me and if you have questions
we can handle them at the end so the
idea is this route object is responsible
for mapping URL to model data right and
it's also kind of responsible for
telling the application what it should
do based on the URL changing in a way
right so you went to the slash you're in
the application we're going to assume
that the application needs this data
everywhere and so that's this is the
application route we can tell that
because it's application j/s to find in
the routes folder and enough talking
let's look at some code working so we
are returning an array basically right
and what we want to do ideally is inside
of our outlet here inside of our index
template ideally we would like to
iterate that array right so inside of
the template this is going to be that
array because we're automatically gonna
be passing that model into the template
it's going to be the context of the
template and so now we're just gonna
like I don't know try outputting name or
something and let's see what happens
all right great we've got some names how
about we output the elbe mark
so this is a little janky we're gonna
use this thing called bind adder it's
going away with this thing called HTML
bars don't worry about it you'll be able
to just eventually say source equals
icon like this like you would with plain
handlebars or a mustache in general with
ember due to some data binding
constraints currently we have this
helper that does it instead but it's not
that really that big of a deal so
basically this is going to say set
source the source attribute of the image
tag to whatever the value of icon is so
those are called so when you have a hash
it's called the block helper and we'll
so the idea is here it means that we
have a block inside of it and that we
have to close it whereas something like
linked to does not have a block it does
not have a hash does that make sense
it has a it has a block form as well
this is a shortcut for basically doing
this right so it's the equivalent
alright so I save this file it magically
reloaded boom we've got album art cool
right now what is our do do well we want
to click one of these pieces of album
art and go to the track listing right
all right great
how do we do that well as you may guess
we've got this thing called link to
right so we're going to say link to
album and we're gonna pass the album
because so inside of this each year
we're iterating the array right so this
out in this context is the array now
we're inside of the each the context of
this inside of the each is the current
iteration of the array right so we're
saying link to the album and we're
passing this which is the current album
object right and just to give you guys
some clarity we've got this there's our
array and then here's what an album
object looks like basically right this
whole big blob of JSON whatever we're
using the icon
we're about to end up using this tracks
array here which is gonna have a bunch
of tracks so alright link to album this
let's close off our link to cool cool
cool so let's see does it work no it's
not going to work why is that well
because we're trying to link to
something that we haven't defined as a
valid route yet so how do we do that
well we go to this file called router
and we've got basically if you're
familiar with rails or some other
back-end things we've got this nice
little DSL it's gonna we're gonna call
this thing called this thought resource
it looks better in CoffeeScript
it will look better with fat arrows and
es6 basically we're gonna name a route
called album and we know we're
navigating to a specific album so we're
also going to do is define the dynamic
segments for that URL as well so we're
gonna say the URL should look like album
slash album ID right and so now you're
refresh and hopefully it works great it
does we've defined our album look at can
you guys see the bottom here let me just
inspect look at what else amber did for
us we've got an a tag with a proper href
generated for each specific album in the
list so we didn't have to do any work to
do this the nice thing as well is like
this is not breaking the web so if we
come and click one of these things we're
going to deep link to that place right
it works just like a static website
where it would that's really important
to us on the amber core team we want the
web to like we want our JavaScript apps
to behave just like server generated or
static HTML apps would write or not will
not apps but sites so anyways cool we've
got this thing we can click here but
nothing happens why does nothing happen
well because we haven't defined a
template yet and so we've got this
naming convention thing you know this
album name that we've provided here is
now going to be the name that kind of
becomes the convention for naming
everything related to this right so the
what we can do is we can go just create
an album template here so we're going to
create album dot HBS just say
from an album refresh we click and it
doesn't work I know why there's some bug
I need to look into I'm just going to do
a magical incantation for a second
something is not working correctly with
this version of ember CLI it normally
ember automatically generates like so
I've been saying there's these
conventions right ember generates the
things that you don't define yourself
automatically so the idea is you don't
have to like add a bunch of boilerplate
to a file like this this is boilerplate
that I'm adding because something broke
that's causing this to not work
correctly but the idea is you don't have
to implement you don't have to define a
class ember will code Genet for you
we call it active code generation and
you know then you just define it when
you actually need to override something
some of the default behavior that
otherwise would be generated for you so
here we are we're at alumns a 375 131
seven right we've got our template it's
working great awesome
so let's display some information about
the album and so there's something
interesting happening here that we're
about to get an error about you might
have noticed like navigating from the
pit from that page from the the heavy
rotation page directly to an album
worked but when we actually refresh or
live reload decides to reload the page
it breaks why is that well there's
something interesting going on here that
ember does for you
and the idea is when we call linked to
we're actually passing the model object
to that route for you right so the idea
is ideally if you already have the album
data why would you go make an AJAX call
to get it again from that route right
you don't need to we already have it but
what happens is when you're when you're
at this route and you refresh the page
or you were sharing a link with somebody
and it's going they're navigating
directly to this page well we don't have
that album data loaded already because
you didn't come from
that path previously right so the the
the TLDR is we need to help ember
understand how to fetch this album now
the cool thing is that if you use a one
of the like ember data libraries such as
ember data or my version of it ember
model you actually get this really cool
and crazy default behavior where we're
like we actually look at the dynamic
segment and we're like it's album ID so
we're gonna look for like the album
model and we're gonna automatically find
that for you by the ID in the URL but
since we're starting simple and we're
not doing using a data library like that
or anything we're just going to
implement ourselves and as you may guess
the the place we need to implement this
is the album route right because we're
directing we're going directly to an
album and we need that album route its
corresponding album route to load that
data link to yes so there's a convention
for how models have like basically it
expects models to have an ID property
and that's customizable so if your
models are special or you don't want to
munge them to you know be like the
convention number expects there's hooks
that you can override called serialize
and deserialize that basically get the
model object and then you return
basically the ID that you you know from
the model so yeah that's how it works
it's just we've agreed that like seems
good that an ID property is the place
you put that and because you agreed to
that convention now it just links just
work automatically you don't have to do
anything fancy so you know what we just
realized that something broke this seems
bad we should probably write some tests
or something right I this is probably
not going to work let's do it anyways
alright let's write a let's write a unit
test for this oh my god let's actually
cheat a little bit because I wrote this
before like a minute ago before I got up
here
so let me just steal my boilerplate a
little bit all right so we want to write
an integration test that basically
exercises the application and the cool
thing about this is that they run in the
browser so we don't actually need any
like infrastructure or CLI stuff we
actually run them in the browser for you
so let's try doing this this is not
gonna totally work is it ah all right
let's see cool oh great CSS is broken
seems good let me fix that real quick
I think this is just a quick hack
there's something wrong with the load
path alpha software people live live
coding with alpha software could you
have done anything stupider Eric yes yes
I can and maybe I will still alright so
cool we've got this thing running it
failed for some mysterious reason let's
find out why so so let's just I don't
know why it failed actually why did it
fail
okay expect one okay true all right cool
so um now let's real quick let's just
like see if we can make this do
something cool uh so you might be able
to see like this little window here is
actually like where the app gets
rendered while test run so if you set
breakpoints and stuff you can actually
see you can like stop the application
inspect the state of it you can actually
interact with it the application is
literally rendering into like a div that
is 50% zoomed it's kind of cool
so we're gonna visit so basically the
idea is if you've ever used capybara or
something like that this is kind of like
that the DS there's kind of like a
little help dsl for writing these tests
so we're going to navigate to an album
but we know that like navigating to an
album or battery on time five minutes
holy alright
abort so we're not gonna write tests
because
because we're cuz
because because we're Cowboys here right
so alright let's let's do some cool
stuff actually you know what let's stop
writing code we only got five minutes
let's actually me walk you through the
code that I wrote like ten minutes ago
so that we can see some some of the cool
stuff that we were able to do with not
much code
so I guess real quick this is what tests
look like you're like okay I want to
navigate to an item well visit this URL
click some selector right and then one
all the async finishes this is kind of
crazy it actually abstracts async from
you you are writing a synchronous
looking test and it actually completely
deals with async ajax everything for you
underneath the hood you don't have to
care about it and so basically you're
like visit slash click a button you know
this is basically clicking an album and
then we're just saying okay there's an
h1 that contains frozen sounds good
right then
this is ember testing which is a
framework that I wrote it's built on top
of QED unit it's basically a set of
helpers fork unit and it actually has
adapters for mocha jasmine etc so you
can use whatever you want but I
recommend if you're gonna build a number
app you should use qunit if you want BDD
style testing you should use cue unit
BDD which my good friend Brian Donovan
over at square wrote it's awesome if you
like mocha or expect Jas like you're
gonna like unit BDD anyways that stuff
said let's get back into the app code so
let's just look ahead at what we built
so I I'm gonna refresh this well yeah I
guess I can just show you the test real
quick to like they run really fast
actually the slowest thing about running
these tests right now is like I'm
actually waiting for the RTO API to
respond so like it's actually talking to
our do live for playing music and stuff
so we're gonna get to that so we click
frozen great we've got all these like
play buttons and stuff right and we got
links to a specific track right we've
got this little buy button here that
doesn't really do anything let's look at
the code for this stuff so we were about
to implement an album route
and basically what we're going to do is
we're gonna say oh well we already
loaded all the data in the application
route so let's go get the model for that
we know that model is gonna be from the
application route is gonna be all the
album's right and then we're just gonna
use this like array convenience method
called find buy and we're just gonna
basically say find the element in this
album with the ID that matches the LM ID
params right which comes from the URL
and then inside of the album template
we're gonna just like loop over all the
tracks from that array and then we're
doing something really cool here this
originally was we were gonna walk
through we were just gonna link to a
track and then we were gonna see this
page which basically was just doing some
dumb little HTML stuff then we were
gonna build this thing we were gonna
build a web component like called our do
player and so what this is going to do
is be this isolated you know reusable
thing that we could drop into any other
application and basically the only thing
that our do player needs to do its job
is the track ID of the song we want it
to play and so let's just look at that
really quick because it's cool so what
this little play button here right and
this time is the audio player rendering
so let's look at what the audio player
template looks like so basically we have
that we were gonna if we were building
us from scratch we'd start off with a
bunch of with a couple buttons here for
play and pause and then this thing this
mustache which is using this helper we
would have also wrote if we had more
time called format time and so format
time just to give you it's some stupid
logic it takes seconds in and it creates
a string this is probably garbage logic
but basically it creates like a zero
padded time right like you would want so
we're using that to format the time
we're gonna have a play button and that
when we click it it's going to trigger a
play action on our component and so our
component definition has this action
called play and basically this is where
like your you could imagine like this is
where a jQuery or in this case our do is
JavaScript API it's just a script tag
that I dropped in to the HTML
basically it exposes this global r dot
player dot play and so i can pass in
here the track ID and the track ID is
what we got from our usage of the
component inside of the template right
so we passed in track ID inside of the
object definition this is like a view
definition you can imagine in backbone
or i don't know what you call them
contribute maybe their controllers i
have no idea i think their views uh so
we're saying now the track ID great
we're gonna pass that in as the source
and then we're gonna toggle this
property called is playing and the cool
thing about that toggle there is that
this is going to change the button
that's displayed right so when we toggle
is playing from false to true we're
gonna go from a play button that you
know plays a song from our dioz api and
when we hit pipe pause we're gonna set
that toggle back and stop playing it as
well so just to show you that we're just
basically calling our top player to
pause nothing fancy there's also like a
little event listener here that's
triggering that's basically helping us
keep track of what the current time is
as reported for by the RTL player so
what else let's see that might be just
as good a time as any to wrap things up
yep yeah so so here we are we're
exporting we've got a single export and
we're exporting a subclass of member
component and so basically all we're
doing here is we're saying like we
expect with this kind of documentation
and default value specification right so
we're expecting a tracked ID to be
passed in or expect we're setting the
default value of his playing to be false
we're setting the current time to null
and then we've got a method called
player position changed we've got some
we've got this actions hash which from
the template is basically the place
where we can define these actions here
that we can call so that you know on
default this is like on click here
and so when this action when we click
this button we're going to call play
inside of our component and we're also
going to do some cleanup here like when
the element gets pulled out of the Dom
we're going to destroy the event handler
that we had set up previously in case we
didn't pause after playing right so yeah
any other questions I guess I'll just
answer questions while I yeah well I
will tell you how alpha I spent most of
my time preparing banging my head
against getting ember CLI working so so
it actually works if you check out the
master if you check out ember CLI master
it works apparently like a dependency
change of ember CLI which had a
deprecation and that caused to break so
basically it's like alpha software
layered on top of alpha software so
that's the X level that's the level of
expectation that you should have playing
with it the idea though is that within
the next several months this is going to
be stable and eventually instead of when
you go to ember.js comm getting a big
button that says download a starter kit
which is a zip of like static HTML that
requires you to not be able to use it
doesn't have a build system that
compiles your templates for you and all
this stuff instead of that you're gonna
see NPM install ember CLI right and who
knows maybe we'll even have our own like
ember binary that embeds node so that
you don't even have to install node
first right so yeah we just want to make
things as dead simple as possible we
part of the problem with you know the
reason why there's not a CLI story right
now is that we wanted to focus on the
the actual Ember project itself not
build build tools right and so it
actually turned out that we ended up
having to do we've waited long enough
it's actually to a point where people
are like like you
or saying hey I want to try ember but
it's so hard to get started there's ten
different you know ways of doing it
because there's ten different ways of
doing JavaScript client-side apps what's
the easy way that is supported right and
you know so I don't so my first
experience with ember is not like
banging my head around getting a build
system set up instead its banging my
head on the learning curve and if you
find yourself banging your head on the
learning curve good news I've got a
training class coming up on May 1st and
May 2nd
so king of segues so that said we're
doing in San Francisco Chicago New York
you can check out my website AirPrint
comm if you have any questions I should
wrap up though probably yeah yes so
great news
it comes with ember and it we now just
documented the hell out of it so if you
go to the testing guide here boom this
all landed like a week ago
so enjoy there is a treasure trove of
information here if you have any
questions or you have trouble in general
you want to play with ember you're
trying to get it figured out feel free
to email or tweet at me I want everyone
I want to know what the things that
people are running the problems people
are running into if you are running into
problems so please let me know because
we're always trying to make things
better so that we can all build better
apps faster all right
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>