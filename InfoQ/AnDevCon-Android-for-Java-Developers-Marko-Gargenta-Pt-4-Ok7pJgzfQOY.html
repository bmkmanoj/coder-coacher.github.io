<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>AnDevCon: Android for Java Developers - Marko Gargenta, Pt. 4 | Coder Coacher - Coaching Coders</title><meta content="AnDevCon: Android for Java Developers - Marko Gargenta, Pt. 4 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/InfoQ/">InfoQ</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>AnDevCon: Android for Java Developers - Marko Gargenta, Pt. 4</b></h2><h5 class="post__date">2011-03-09</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Ok7pJgzfQOY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so let's let's see so basically what I'm
gonna do here is control lead this
there's a non combinational fuse so now
what I have that file is bar trace to
analyze it we use traceview and then
llamado trace so this is the tool that
shows you what's going on with your we
had the execution record again so couple
things you can see that the whole thing
took about 10 seconds right secondly
what what we have here is another thing
to notice is that we have one thread
here which is also known as the UI
thread or main thread okay that
everything is running on you can kind of
ignore this binder trust because this is
not really us doing anything so
everything is happening on this one
thread okay and this is true for
services activities broadcast providers
you know broadcast receivers content
providers everything onto the same
thread that's why I gotta be mindful of
this so what you are looking for it is
things that take forever right so for
example there seems to be something that
is sort of long lasting here I can zoom
in and you can see that these are all
bunch of methods here this is something
else
so let me see this is one task no that's
not what I was looking for but we can
basically look for things so this is you
collections you can also search in here
so we you know we can search for things
that are running so activity on Clegg
this is what we click on click this is
where we are doing Network stuff right
so this seems to be the network related
activities right so so this is basically
the ideas that we can identify the
potential bottlenecks right on on for
for this particular thing now we can't
adjust a failure so it wasn't really
blocking for that long of a time okay
but the point is that this is
everything's running on the same time on
the same thread one single thread okay
there's our exception and that this is
where we're trying to get online okay
we're not getting any connection in this
case so what you that that's execution
of single thread now you guys notice
that that's running slow so what we
would want to do is we would want to put
this on the second on sector and the
secondary third so how would you do it
oops how would you do that in Java what
would you do here to make this runs
I mean if one you knows one simple thing
would be you could say new thread a new
thread you can basically you know do dot
start you can put a run method in here
right public void run right and then you
can basically move your long long
running code into into here it's
something of that nature now the result
is something that we need to basically
so that's exactly what it was that's
exactly what was that I was getting at
so the problem with this is that once we
got it once we get it to run is that it
would fail because because the well IKEA
exactly mean I could put the toast into
here but that's exactly what I didn't
really want to do in this case this
refers to the inner class itself so I
need to say status activity status
activity got this right to get around
that and and then final does this
doesn't need to be or I can just move it
in in this case right that or just here
and that's all that so this everything
compiled everything from files right but
if I run it this would not work because
I'm trying to update UI from a new non
UI thread so that's the problem and like
you guys said it needs to be
synchronized at some point so let me
kill this trace view so we're gonna
reattach that you could but you're
basically then recreating you know
you're doing a lot to work but actually
so this did now put it on a separate
thread okay but it's not it's not
sailing yet okay and it's not gonna be
able so there we go it finally crashed
so if you look at the crash log
the problem is that the multiple
problems but so can create handler
inside threaded because not called the
super that is one one of the problems so
essentially we cannot update the UI from
the non UI thread okay so yes we could
do some manual work to synchronize the
threads and seeing merge them together
join them together but there's sort of a
built-in mechanism for that in the
built-in mechanism is something called
async task so let me show you what that
looks like so I'm not gonna do this call
thread start a new thread thread start
business because it's not really what
you're working for us reformat okay so
what I'm gonna do here is I'm gonna
create a new class and I'm gonna call it
I'm gonna post to Twitter expense async
task an async task sort of has three
components it has what you're passing in
is the work what the intermediary result
is and then what what the final result
is at the end of the day so I could say
what we're passing in is work is close
this status so it's gonna be a string
and if you guys can see let me put some
space there so it's gonna be a string
we're not gonna have any real progress
report because we don't get so the
second parameter is for a progress
report right like if you're downloading
a file and be like 75% done right but we
don't have that data it's not like
Twitter is telling us I'm almost done
posting right it doesn't so I'm gonna
avoid it and the final one is gonna be a
string that basically says we're done
with obtaining the this is the result
right
worked or tale work so we organized
imports to include a sync task and let
me do a done implemented methods BAM so
the main method is doing background so
what is that we want to do in the
background
it and that would be to your
long-lasting job so in this case the
long-lasting job is gonna be this right
so that's that's what potential it takes
a long time to process so I'm gonna cut
it out I'm gonna put in here and then
whatever the result is I'm gonna return
so return result so that's that result
right so whatever the result is is gonna
be returned now the input is gonna be
the status that you are posting so this
is really status so but it's it's a it's
an array of arrays right so that's why I
have to say status zero right now that's
my long long-running and then you can
have this to other methods that are kind
of useful one is onpostexecute
that that gets called when if the job is
done and the other one is done a
progress update so like I said we don't
really have a progress update so I'm
just gonna say onpostexecute
right and this is a good place to get
that result and do something with it so
that's something that I'm going to do
with it where is that toast wine so I'm
going to cut that line from here and I'm
gonna basically say you know so now you
get a change this back so that's that
result make text so alright so it's that
was actually correct that's exactly
correct yeah so this gets run on a
separate thread this gets run on the UI
thread so that's why in this call we can
do anything we want to the UI in this
call we cannot touch UI but this is
where we put the long-running code stop
stuff right so this is now fairly safe
for for long running tasks right it's
gonna spin around
okay run for a while so so what I'm
gonna do is now
as a really need the final a cure
anymore so what I'm gonna do now is I'm
gonna do I'm gonna create that class so
post to Twitter right and I'm gonna say
dot execute and I'm gonna pass status to
it yeah so this is now running on the
long-running task and by the way I gotta
move this because it doesn't belong here
anymore because we're going to see
anything I'm gonna put it at the bottom
of this so let me just kind of walk you
through this before we run it sir so now
we are saying post to Twitter some kind
of message that message is now an input
to to here right okay which is what we
now use to actually do the long work
with okay now when we are when we're
done with all that the result the result
is that result or this result right it
doesn't matter which one
ultimately it's result that gets passed
into here and that's the result that
ultimately we're going to print out on a
screen alright so so that's so basically
on one hand we have the input which is
the status right it came from the job
and that's what's running here on the
other hand we have the result that is
coming out of here why why is this your
daughter dot yeah that's it that's how
they designed it so I could then use
this to run multiple statuses another
status update right so you can have very
bullying arguments let's just call the
API is because presumably we only say
like post and then two three five jobs
at once right is this kind of making
sense to ever so hopefully this sort of
like a sugar coated nicely packaged way
to do you know multi-threading
multi-threading the operational region
when you need to do it on ahuna
UI thread as well
yeah absolutely can you return something
other than a strength yeah I would need
to change so so this guy corresponds to
this guy okay
this look this one it corresponds to
something we're not using on progress
update but this guy corresponds to the
this guy which is the result right which
corresponds to what the input which
corresponds to that rate which
corresponds to the input that we have
here right so that whatever so if you
want to quickly return along for example
I don't know if you want it see now this
is wrong and this is wrong right so I
could basically change this too long and
you know I'm not gonna do it but that
would be you would need to change that
and that would work what is calling on
superimposed execute do presumably
whatever is is need so let me see I may
get away without having to call it I'm
not sure sometimes for some on on
methods on create on lifecycle methods
you must call super so but in this case
I'm not sure if it actually does
anything so let's just run it and see
what happens
I took it up I believe I don't I don't
even hear it in this case that's a java
thing that's a java thing yeah but i
mean it's an android framework so i
think is yes right because it's specific
to the UI it's specific to synchronizing
with the UI thread so it's definitely
circular from multi thread update see
dim proxy that worked really fast right
and you know it's we're waiting to see
if it's gonna pass or fail again it
doesn't really matter but we just need
the data back
socially and that should be done
sometime soon I'm expecting a toast
it could be just a tree I mean the trace
is really changing the game here because
it just takes a while so trace stopped I
let's say mean I might so let me see if
I have the latest trace 1617 that sounds
pretty recent right so I'm gonna analyze
this trace I'm gonna assume it worked so
let me this time around and gonna do
this I'm gonna use the command line to
get a trace so I'll say adb pull right
because what you can do both it
so as the card number the trace dot I
could be - yeah so that's my file so I'm
gonna say trace view that file see what
we got
alright so see now we have a different
picture and the notable difference is
this is this here right and you can you
can tell that that long lasting job got
pushed to a separate thread right so
that's that long lasting job so you know
zoom in here and you can see that these
are mostly you know niÃ±o I or calls so
there's you there's our there's our
twitter calls twitter dot you know start
and etc so there's the network URL
encoder so those are definitely our net
network all right i net address and so
forth so but as you can see it's turning
in a separate track that was the that
was the whole point so is there a way to
queue up requests on an async task and
so you only have one not really that i
know but they get it but but what you
can on alternative to async task sort of
you know it's not really enough
alternative another way of doing things
is to create an looper and then you get
a new you can basically post job
to be done later on so you can queue
them up using the looper because that's
what it is it comes with a queue so if
you spawned two threads is there a way
to know which one you're getting the the
status back from I believe this is
supposed to be synchronized with one
another so this this is gonna call this
so it's within the same object pretty
sure about that so this this guy is most
definitely going to invoke this guy in
the same object yes it's absolutely
possible to second one to finished
before the first that's absolutely right
and but they're gonna call their own
respective methods it's not gonna be the
same data right so which one I mean it's
you know they could they could identify
themselves somehow right so we could put
some kind of identifier and you know it
could it could say this or that I
believe you can actually put a
constructor in a in a post to Twitter
sort of like a thread and give it a name
so as opposed to being async task not
number one I'm number two so you can
identify that way right or simply you
can give them a counter or something
right so it could be you know static
counter and you can just check it out by
one so yeah but they're two separate
objects calling their own respective
methods and you had the questions
respect to this now there was a question
an interesting question about timers and
services in support so there is a you
know when I did in in yompa when I did a
updater service when I did an update
their service that's the service that
wakes up every minute for example so
here say I give it a name
just for Java purposes so I know which
thread is what which thread right but
you know in this case I don't need
anything fancy as an icing task I just
basically have a separate thread that's
running in a background and it's pulling
data from Twitter right it's running a
separate thread so it's not blocking UI
thread but it doesn't require any
synchronization with the UI thread does
no need for a cig task right okay so
this is just a plain old Java thread
nothing fancy about it however this is
this is not very efficient because you
know I have there are couple of reasons
why this is not very efficient for one
it's a process that's always on always
running okay secondly so it's taking
some memory even though I may not be
doing anything at all secondly it's not
very smart because it's got a time or
it's got a life of its own in terms of
the how frequently it wakes up the
better way to do that would be to use a
to synchronize my own going online with
systems going online the reason for that
is the battery right so firing up the
radio is very expensive I mean if you
there are stats on the consumption of
battery I forget what the tests in units
micro million and first or something but
you go from like 10 to hungry and 10 so
it's order of magnitude more power
consumption when the radio is on so one
of the things you want to do is you want
your app ideally to synchronize with
everything else in the system when it
goes online right so when Gmail and G
talk and you know whether app and widget
and all that need to forget information
it's much cheaper if everything
synchronizes fires up the radio doesn't
have any shutdown right so to do that I
actually use something called an alarm
service well I - to say hey wake me up
on certain intervals and it doesn't have
to be exactly a minute but
approximate approximate sort of
I'm spent because in this case we don't
really care about the specific time span
approximate is good enough right
but the druthers synchronize it with
those system calls in then that alarm
what it does is it sends an intent and
then there's something called an intent
service which I have so I think yam by
eight is actually using that so so I go
from regular service to an intense
service so what happens here is I have a
new kind of service intent service which
basically has a method called on handle
intent and as opposed to worrying about
this like wake up every once in awhile
blah blah blah
he basically just says when when when
each time wake me up and do the updates
it does the updates right so so
basically the service itself becomes
much simpler but it requires an alarm to
wake it up every once in a while which
is a system service which is a different
kind of ballgame you know different
ballgame but that's you know it's
something that we need to kind of worry
about so we need to register it to the
alarm service and so on so so does that
come answer that question so that
there's a different approach altogether
so the updater service is registered at
live in your app when you see
that's a good question I'm not sure this
code does it so oh I know I think I do
it actually in the boot receiver yes so
this is what I just did
so basically when the system puts up I
say all right let's get the alarm
service and let's tell the alarm service
to in exactly repeat you know very there
is so many intervals to send a pending
intent so it's an intent that you sent
for the future right so you have an
intent and you can send intent but you
can send an intent you can also leave an
intent to be sent in the future so
basically I'm giving this alarm and
intent to send
the future to do something right in that
pending intent is basically get service
you know and in opted to call the
updater service with a pending intent so
that's what it does
if you're doing an animation you
wouldn't do intense
probably because intents are
asynchronous right so it it really
depends but yes so this wouldn't be
really appropriate because you don't
really know when it's gonna happen right
that's a big difference between an
intent and just a function call which
could be a remote in your IPC call but
those are blocking think so so that's
why you wouldn't do anything so if I
would pay the wall I would basically do
it programmatically so you would just
you know loop through it and say hey do
this right not necessarily you know it's
not necessarily blocking that's a good
question let me show you there's a
there's an example that I also have in
there called compass let me show you I'm
gonna run this on a my physical well I'm
gonna run Disney emulator first but
after that I'm gonna run it I'm a
physical phone so this is all compass
application that you know it's on the
emulator is not going to do much but it
basically just shows the compass rose
right so on the physical phone because
it's a lot more interesting and then I'm
gonna let me turn you know close these
and I'm gonna turn over to this I'm
gonna pull up the buffer so you can see
this is my compass right so it's kind of
point supposed to be pointing know what
I mean it's not the most accurate thing
in the world right but as I'm moving the
phone it's rotating right and it's
actually pretty smooth on well
relatively smooth on here right so you
can kind of see what is so
I have to do a refresh because it's a it
just grabs the screen buffer yeah it's
just pulling the buffer it it doesn't
update in real-time but you can kind of
see in the in the real-time so let me
show you the code for this because that
can answer all these questions so what
happens in compass is it also
demonstrates a custom component so first
of all so we have an activity it's
listening to a sensor so first of all
notice that I do not have any XML in
this case you guys we're asking do I
need an XML to create a to create the UI
are you absolutely don't as a matter of
fact I even deleted the default ones
from here because there's no layout in
here so I do not have any layout I did
programmatically I say set a Content
view for this app to those in rows is
something that is custom it's it's a
custom component here
it's a widget that doesn't exist in
Android right I created it so in just
like in Java it's it works very
similarly so if you wanted to create
your own custom widget in Java you would
subclass component right in Android you
with some subclass view right in this
case I want more higher up so I separate
this image view because I'm dealing with
an image and I said you know the image
resource too so in this case this was
another question you guys get see in
this case I'm pointing to just drawable
there's no drawable - you know high load
medium density I just have one trouble
now what I also so basically just like
in Java what I have here is I have
ondraw method so just like in java
c-can't when you want to have a custom
component you override the draw method
right there's the same way you override
draw method and
say you get a canvas and you get to draw
on that canvas I think you've gotta get
too graphic straight or canvas I forget
so say my dear
so graphics or canvas is your basic sort
of canvas you draw lines and circles and
dots and pixels and things like that on
it so here what I'm doing is I'm on draw
I take the canvas I get its width and
height just to figure out the middle
point and I rotate it around its middle
point so I think the canvas I rotate it
around its middle point and then I do
whatever the parent was gonna do anyhow
draw on that now rotated canvas that
that was my logic behind it you could
have also can't drawn like you know Rose
if you wanted to do some math and stuff
but you know I wasn't my I didn't really
care they just found an image from the
internet and used it great so so that's
it
that is the draw method so the roti the
cameras drawn it okay
now the guy that's driving all this so
this guy just puts the canvas it this is
the only one component we have is that
the content view is going to be this
rose so here I'm getting a sensor
manager this is a system service I
subscribed I subscribe to it in onresume
I unsubscribe to it on pause remember
when we talked about this here I said
sometimes things are expensive and you
want to do them only here right that's
why if I just processing that sensor
data there's just like a so much data
are you sure you want to listen to it
all the time right
so I basically subscribe on in on resume
and unsubscribing on pause so the only
time I'm actually cranking through the
data is well unvisible alright so that's
why I go in in on resume okay and I go
out do the opposite in on pause it's
it's like the same way if you do
location or whatever just the name
change is supposed to register on
register or maybe listen on less than or
whatever it is right but same
my dear same concept so you know I
registered notifications I provide this
as the listener right so when the sensor
gets changed
I get the sense of event I figure out
the actual you know no GPS but angle of
the sensor orientation and I say I set
the direction in that rose object in the
moment I said the direction the rose
object that orientation I also
invalidated so this is now back to your
head to answer your question is this
gonna run is this gonna block so this
invalidate inadvertently cause on draw
same as in Java right so in other words
component doesn't say draw me component
says look I'm not valid anymore when you
get around fixed me up right so the
component just invalidates itself just
flip the switch that's super fast says
no longer good need to redraw add some
neck next cycle whenever that next cycle
is it's gonna redraw but this is faster
than actually posting you know during
tense right because it's yeah it's just
within a component itself you could
invalidate from another thread given
that you get access to it and all that
means everything mm-hm yeah there's an
interesting if you guys do any NDK work
there's an interesting example that is
using the plasma it's a it's drawing but
it's drawing in in C and so drawing and
C presenting in Java and as soon as in
this place it invalidates it so
basically it's creating an animation
just by the sheer factor of invalidating
itself forever right and kind of
demonstrates how quickly it can how many
written frames per second it can it can
do let's go plasma it's a demo in
indicate
so that's that's how this works
one thing that they wanted to show you
also in terms of you know we're one of
the so we talked about we talked about
this linear layout there's some other
layouts like table frame and so on I'll
get back to this but one thing that I
wanted to show you since we're talking
about debugging you know that we talked
about logcat debugger is just your
standard debugger trace cue there's a
tool called hierarchy viewer and it
works like this so I'm gonna kill this
one again all these tools are in your
tools directory let's see if it's gonna
work all right that's loading data so
what I'm doing now is I'm attaching to
the currently working device and I'm
looking at its its its hierarchy right
so let me show you like this
so let's see
let me show you like the enemy :
just use them older because I'm I'm used
to the I'm used to this hierarchy here
slightly older but so basically what I'm
looking is the structure of my UI right
and what we're seeing here is basically
what is going on on the screen now the
screen that I'm attaching close this
screen so super simple right we have the
phone window right we have single frame
and we can't the throws right but if if
I go to a in a bigger screen like a
bigger application like for example home
application right then things are much
more complex and if you want to see how
much more complex it they are you can
basically click on load hierarchy viewer
here and it's going to take a while but
it's gonna load up this hierarchy and
it's gonna show us the structure of this
and the point of this tool is to
basically provide you with a way to see
what your UI looks like because that's
one of the things that you want to
optimize the most right that's what you
get most of the bang for the buck when
it comes to you know efficiencies and
all that for in terms of running code
right so we talked a little bit about
threading now it's the optimization of
of the UI so as you can see we have a
fairly complex structure there's like a
lot of objects going on in here you can
kind of see that they're good gazillion
objects going on so this this is a tool
that basically helps you with analyzing
what your your or some of the else's app
may look like when you develop UI right
more specifically if I look at the our
app let me see if it's do we have it
running Yamba demo so it's fairly simple
now you know and I can now load
if you are this one and I can see what's
going on and what what you want to do is
you want to eliminate things that are
unnecessary for example unnecessarily
nested layouts things like that
especially if you kept them instead of
all less in other words you know loop
and and so forth so there's a couple of
years ago remaining ghee whose keynoting
tomorrow he wrote he did a talk called
turbocharging new UI so it's a it's a
very good talk for any sort of stuff
related to this and so it was a talk at
Google i/o so you can easily google it
but I recommend looking into that and
now my I forgot about the trace trace
view but that's that's basically why
it's everything is running extra slow at
the moment which I should probably
comment out so that we don't have that
anymore going on so there we go so this
is our UI right so it's you know it's
it's fairly fairly basic so you can
double click on a specific window and it
shows you what that window looks like
right you can look at what is this part
of my window and you can see just that
part right you can double click on up
you know what is that part that's our
button right and so you can analyze the
the UI this way you can find
inefficiencies and fix them and usually
you can fix it by using a smarter layout
so I kind of stuck to the very basic
layout like I mentioned in this case
with the linear layout right but you can
also use some more intelligent layouts
such as a relative layout which makes it
easier to for you to use a single layout
for more complex UI as opposed to
nesting layout within a layout within a
layout so this
hierarchy here so not so there's nothing
you have to do about enabling disclose
they're basically in your tools director
to expose them to eclipse are not using
Eclipse in this case so I can been using
eclipse this is a separate tool on just
launching from a command line there
there's no button for that they know in
Eclipse but who cares right
you double click on a on actual
executable in your tools directory yeah
so profiler there's a way to profile
right from here so you can basically do
a certain profiling right from here from
the devices in in the eclipse in the
devices directory so that's that's those
are couple things that I wanted to cover
with you so we talked about hierarchy
viewer trace view the async tasks we
have any any other question sending any
things that you guys were interested in
I can I was going to show you some more
cosmetic stuff but I wanted to kind of
leave the last 15 minutes or so for any
Q questions and stuff yeah I use a tool
to connect Morel device token yeah
so that tool is DDMS so there's no
special tool okay again we're agnostic
to the device so as long as it devices
you know enable for USB debugging right
I can see the same tool I can click here
and say give me this screenshot of my
camera later
so this is my emulator or I can say give
me a screenshot of my device and this is
my physical device so you don't really
care about the physical device in other
words you don't really need a physical
device unless you're doing things that
are not very well supported for example
sensors is not supporting them on the
emulator at all so that's where I kind
of need it so sometimes so connecting
the physical device sometimes you need
the USB drivers I I didn't because I'm
gonna Mac but you may need a special USB
drivers for to connect specific devices
so you can download them as well as part
of the you know Android tools every once
in a while what is pretty common is your
eclipse uses connection to your emulator
okay and what I see people do is they
basically shut down the emulator any
story that will do the job however it
takes a long time to do that right it's
you know creates friction in developing
restarting amulet right I try not to
restart an emulator ever right so an
alternative to restarting an emulator is
to basically do something like this so
you can do ADB kill server right so that
is going to shut down the connection
between the ADB on your desktop and day
to be on the device and you can do ADB
start server start server so that
reboots that connection and you know in
Alan or three half the time
three-quarters of a time that's gonna
fix the problem right so that's that's
useful because it saves you time yeah
can you do this in Eclipse can you start
stop is there a button for that now that
I know yeah not sure if you can reboot
directly from eclipse
okay you can um so now that they know
but right now it doesn't so let's see if
you're connected to says it's online but
yeah it doesn't know it doesn't stop
process that stops a specific process I
can go select the processing kill and
stop it in the debug Jim yeah I'm not
sure but I'm kinda used to just doing it
on a command line so you know there may
be a button for that so receivers so the
world's simplest receiver probably is
that boot receiver let me show you
actually let me show you another example
altogether how about this one as soon as
receiver cuz that's only you guys can
easily relate to and I will need to
restart my emulator to to demonstrate
because boot receivers started in boot
right so I'm gonna run it run this on
the I'm gonna run this on the emulator
now I'd be nice if I can actually fake
sending an SMS to the to the emulator so
but you know what this time around it
may actually work because I think it was
failing because the dnt up 3G lost time
right so let's see so I installed it it
doesn't say anything got installed it is
no it's not running because this app
unlike I did this ad doesn't have any
activity I'll support it so open with
text editor not sure why it's not
supporting see I have an application
that all it has is a receiver and it
basically says filter for SMS received
this is my publish this my subscribe for
it I'm registering this receive
with the system-specific just for to
receive that right that's that's my
register now when the system gets gets
notified its gonna call this guy SMS
receiver which is a simple piece of code
here okay now what happens inside off on
receive I don't want you to worry about
it those are intricacies of actual SMS
processing and such are not important
okay but simply you know we are
registering it here we're saying let
there be an SMS receive a receiver let
it filter for this system intent called
action called SMS received through which
we also have to have permission to
receive right and when that gets
received this is gonna get triggered
walking up here so let me see if I can
demonstrate this by going into the DDMS
and saying let's send this guy an SMS
message from five four five one two one
two
and I'll say hello there we can send
okay so there should be two a
notification scared this is mine okay
this is systems you see that so the
toast was mine and I actually I may also
have a system message I'm not sure no
this is the thievius system notification
it's going to open up the SMS in the
system - does a toast
I had a version that also does but it
opens up messaging and so forth but
basically one broadcast two receivers
the system SMS and my SMS right make
sense so very simple would it be
possible to supersede SMS consume it a
octave code varnish the streets
broadcast message so I'm not sure if you
can actually by definition broadcast
messages to go to everyone
so could you basically consume it from a
group everyone else you have no
guarantee of the order per se so but I'm
not sure there's a API to actually
consume it and remove it but I
yeah broadcastreceiver and what the
alarm alarm so what's the difference
between a broadcast receiver and alarm
so alarm is a service it's one of the
system services there are many system
services such as you know Wi-Fi service
telephony service camera service sensor
service you know Bluetooth service
center location service different
services would provide different they're
part of the app framework and they
provide different functionality right
very specific to that each of those
domains alarm service is a service that
it's kind of think of alarm service as a
cron job okay so it's a cron job so you
just say every five minutes every half
an hour every once a day do something
send an intent Bam Bam Bam
right so it's very periodic and so forth
broadcast receiver is very different
it's it it's it's a basically
publish/subscribe so it's dormant
doesn't run doesn't exist may never get
woken up but if a certain condition is
met in the system so there's a there's
an intent for which it subscribe it gets
woken up into something it's very very
different sort of functionality so it's
as a booth and then you care about
regular service which is sort of maybe
like doing prank in the background like
something like that yeah yes you can
so there's a there's a sample code as
well that they have so for example if I
have this where am I
so me to put on this where my program
lately this hasn't been working but let
me see on the emulator so I have a
little program that says okay what's my
location and it tries to figure that out
by default it doesn't know it's waiting
it's waiting for GPS so one way to fake
it is to basically go here and you can
say
send the coordinates and that tip
technically should start the GPS open up
the GPS and we would get those
coordinates but for some reason it
doesn't seem to work on on this device
right if I run it on my physical device
we can see the different result because
it it should well I'm not gonna get GPS
Oh target I know for some reason it's
not connecting it to my device so it's
it's offline apparently I'm not sure why
but that would give us a different
result on a physical device so yeah you
can fake it in theory but it doesn't
work that great sometimes so in terms of
the intense
so basically broadcast intents are
delivered to everyone that exactly match
that so an intent is simply a piece of
text we call it action but simply a
piece of text right it may say you know
what did we have in this case in the SMS
example so this is simply the piece of
text the action that we are filtering
for Android provider telephony SMS you
see and it needs to be exactly hundred
percent this match for it to be
triggered right so that is in case both
broadcasts now remember I said there are
couple of ways to send intent so you can
say start an activity so you saw that
because that you can have competing
handlers as well right so on receiver
side you don't really have a competing
everyone gets it
yeah I had two SMS sent two guys got it
right system in mind on activity side I
say start home well if I have a
competing homes which one get started
and that's what you the system as the
user which one would you like to handle
this remember we had that pop up and we
said try the sample one right so
similarly yes so that's basically how it
is kids can so it's totally different
way it kids can move in that way not
really you can
you can be you can be explicit about the
activity that you want to start and in
that case there's no ambiguity there's
no resolving it because you are spelling
out the class name of the activity so if
you want to start a specific activity
you should do that right and that that
was my you know that's kind of like what
I was saying in that example with the
intense you know if I'm inside of a
Gmail and I want to open up a message
inside my Gmail I'm gonna be explicit
about which message I want to see so
it's not it's not I'm not wandering
around thing trying to resolve it so I'm
spelling it out there's no ambiguity
there so did you guys learn anything
Neal was this like informative so I you
know there's I'm gonna work on getting
the videos up there's also I have a ton
of more videos that cover in time five
days seven days sort of training online
it's all free so you can you can view it
and I'll try to get the slides and
everything up you know as soon as is it
get online and so on oh please fill out
the</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>