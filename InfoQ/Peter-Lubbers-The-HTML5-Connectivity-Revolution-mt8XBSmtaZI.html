<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Peter Lubbers: The HTML5 Connectivity Revolution | Coder Coacher - Coaching Coders</title><meta content="Peter Lubbers: The HTML5 Connectivity Revolution - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/InfoQ/">InfoQ</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Peter Lubbers: The HTML5 Connectivity Revolution</b></h2><h5 class="post__date">2012-05-02</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/mt8XBSmtaZI" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">alright so when I get started to have a
lot of lot of stuff to talk about it's
honor to come here and really excited to
talk about the connectivity features of
html5 my name is Peter lubbers this is
my license plate that pretty much sums
up what i do i work for causing a small
mountain view-based startup work on
WebSocket platform and also on html5
training and besides that I started two
years ago to San Francisco html5 user
group how many of you are part of the
San Francisco html5 user group okay well
it's free to join I'll show you how to
do that later apart from that this Carl
pointed out they I wrote a book that's
now in the second edition and i'm here
with we have a small booth at the
exhibitor hall there and you can come in
and check that out if you have any
further questions I have to sort of trim
it down to 25 minutes so if you have any
further questions you want to see the
code behind some of the stuff we're
talking about please come in and check
it out we'll be here all day and
tomorrow so somebody wants to ask me to
like the cool licenses html5 and that
sort of gave me that idea to get the
license plate and I was glad I picked
that up in time shortly after somebody
else from locally here actually picked
up the HTML 5.0 one so it's been kind of
a race to get the latest if you are in
Texas everything is bigger there that's
a thought you would get a kick out of
that all right so want to talk about the
connectivity features of html5 so in
this conference you'll see lots of
presentations things about web
applications WebGL various other parts
of html5 and I'm going to zoom in a
little bit on the html5 connectivity and
I'm going to do that in the context of
web applications
to start with want to just go back a
second and talk about well how did html5
come about in the first place and it was
actually in 2004 not far from here it
was a w3c meeting in which the there was
a the topic was whether HTML should be
augmented for web applications and it
was actually voted down as you can see a
14 28 vote against improving HTML for
web applications and so promptly two
days later the web hypertext application
technology working group was started and
they started working on a specification
called web applications 1.0 which became
html5 so you can see that a application
development is much it's very much the
core of html5 it's making applications
with features that up until now we're
only really in desktop programming
languages like Nick Java and C++ all of
those things you can now do in html5
html5 can be broken up into different
feature category categories there's
these different areas and some of it is
you can debate for quite a while whether
it's pure part of html5 or not we're not
going to get into that but I'm talking a
little bit about it in a larger umbrella
term of html5 including all of the
things like WebGL and geolocation what
we typically refer to as the newt
category or new and exciting web
technologies if you zoom in on that
you'll see that each of these areas has
seen an explosion in growth I'm going to
post these slides the that we posted on
the on the DEFCON 5 all of the
presentations are going to be there so
you'll see this may be a little bit hard
to see in the back but each of these
areas if you look for example with local
storage or caching and and storage
there's you know multiple api's for
local storage there's a new cache
altogether so all that stuff has seen
just the enormous growth and with those
features you can really start building
cool application
now these features can be used today and
the first thing you want to do with that
is actually of course finish this
present in this conference all the
sessions but then after that you can go
back to work and really start building
html5 applications it's ready to be done
today right you can first of all go to
can I use calm or mobile html5 dot org
to see where specific features are
supported you'll see the modern browser
support over seventy-five percent of all
these features already but then there
are also the ways to make those features
work so for almost every feature there
is a way to make it work in older
browsers if you need to support those
and that's pretty typical and modernizer
is a tool that can help you with that
and they have an incredible fallback
space it has literally hundreds of fall
back so there's really no reason to say
well html5 is not ready yet we can't use
it and thinks that are as complex this
web socket that we'll talk about later
have been emulated in pure JavaScript so
you can actually use it so none of the
features i'm going to talk about our far
future there they're really here today
now html5 one of the design goals is
that it what they say paves the cow
paths that means it makes it easier to
do things you're already trying to do a
good example of it would be the rounded
corner to border radius property in css3
where before you have to use images to
create rounded corners and now you can
simply say border radius 10 pixel and
now you've got it you basically say
you're saying browser you know how to do
this take care of that for me and that's
very similar and I would say one of the
biggest areas where cow paths have to be
paved was the connectivity area things
like comet technologies and figuring out
how to get around the same origin policy
and a browser pretty hard if you look at
the overall html5 connectivity features
you can see that there are a lot of
things going on and then
tire connectivity in real time area by
the way is a pretty invisible thing
there's there's nothing visual until you
for example take the data that you get
into the page and display it in a canvas
things like that but you can see that
inside of pay so the first first myth
about all of this is that we're going to
be serving pages over WebSocket that's
that's not going to happen we will
continue to get web pages from an HTTP
or perhaps a speedy server or some sort
of caching edge network but then within
that page we're using javascript to
create other connections these are
possibly long-lived socket connections
server sent events connections or XML
HTTP requests with level 2 there's a new
way to to spread it across a much larger
back-end and cross document messaging
allows you to do in trap page
communication two parts that are
actually not on the same origin so
there's it's really a very powerful set
of tools that you have available and so
we're going to talk about now you might
say well what are you talking about all
of that stuff that you just showed me I
could already do and I would agree with
that it's possible but this is one of
those things where html5 makes it easier
it paves that cow path it says all right
it was very hard to create let's say a
bi-directional what looks like a socket
connection where you can send and
receive at the same time sure it's
possible with techniques like comet you
can kind of see that the name you know
you need comet the spell complexity if
you've worked with that stuff it's
really really hard to make it work and
now the api's are ridiculously simple
it's a it's a great way to to move
forward and then with these fallback
libraries I talked about that are on the
modernize our page you can actually make
these things work and not worry too much
about it code against the html5 api's
and not worry about you know the back
falling back
alright so again to come back a moment
to the application parts of it in a
traditional architecture because you're
so constrained you're constrained by the
same origin policy you're constrained by
a variety of factors it was just easier
to build everything on the server side
and just push it out and and then make
incremental updates maybe pull the
server for incremental updates in your
in your web application and these and
that's why application servers became so
big because they basically translated
all of the stuff that the web
application wanted to do for the poor
little browser that was unable to do all
the things that a desktop application
could do and so what I'm talking about
today's is it also it's not just a bunch
of features and sure that's cool and i
can tell you a lot more about those
features and the exact code snippets you
might need to build things with it but
it's also a new kind of architecture
altogether in which you do a lot more on
the client side it doesn't mean
everything and it doesn't mean your
business logic is going to reside on the
on the client side now but you have
powerful graphics you have local and
offline capabilities you have device
access you have sockets and utter
connectivity and if you start taking
advantage of it just a few of those
things then you can build applications
that are not just on par but in a way
even better than desktop applications
all right I'm going to come back to this
in a little bit and want to start with
the the smallest of those four features
that I talked about and that is cross
document messaging it's a simple API
that allows you it's called the
postmessage API that allows you to send
messages it's sort of an interrupt
browser communication API you can use
post message to send a message to for
example content that is on an iframe on
their same page and you may notice a lot
of the social the third party social
networking widgets that you pull on the
page Facebook like buttons and so on
they all use iframes and it's actually
quite hard to communicate
to an iframe from the main page if that
main page or if that iframe content is
coming from a different origin an origin
is defined as the scheme host and port
combination so with that with that the
browser locks things down it is the same
origin policy but that that policy was
that's as old as the goes back to almost
the very first browsers it we've sort of
outgrown that right we need more
connectivity to two back ends that are
not on the same origin we can't put
everything on the same server and so
having this way to communicate to other
other areas on the page yet at the same
time allowing to lock it down using
origin based security is this new
feature and you do that by using the
postmessage API and then listening for
messages now the next feature I want to
talk about is the XML HTTP regrets that
you could say is the Ajax API you can
make ajax request that's been around for
a long time but in html5 it's updated
it's called xml httprequest level two
and there are a couple of features you
can send binary data now you can also
track the progress better but the most
revolutionary part of it is that you can
now make cross-domain XML HTTP requests
and that's very powerful because you can
make back end connections to what
previously had to be put behind an
application let's say some sort of
portal server that aggregated all the
content and sent it out with this from
the same origin now you can actually say
all right I make it back end connection
for one source and another just by
myself like I don't need to go through
that and there's a separate standard
that's called cross-origin resource
sharing that is applied and it's
basically a server protection feature
where once you start opening it up it's
very powerful but of course the first
question is like well how is that going
to be secure you may have used things
like Jason P which is very very opens
you up for a lot of vulnerabilities
because you're basically
running script from a remote source
that's the only way you could get around
this in the past and so now it is
possible to do it in an elegant way and
there's a core specification effectively
that way the way that works is with HTTP
headers your browser that's capable
since an Origin header the server has a
list of like a white list of allowed
origins that it allows access to its
services from server sent events is
another API that this think of it as a
one-way stream of data it's a
formalization of what a lot of people
would call comet sort of a server-side
push but now it's an it's called the
event source API you create an event
source API object you listen for
messages there are a few other things
you can do in about five lines of code
and I can show you that in the in our
booth you can create a client that very
that asynchronously listens for messages
and the only downside of this is that
you can't at the same time talk back for
that you would need WebSocket that we're
going to discuss in a little bit more
detail so it's imagine you create a
connection to a server sent event server
and you then start listening for
messages this is great for broadcast
news feeds taking maybe UDP back-end
data sources and pushing them out to the
to the web in a very standardized way
over HTTP the next feature and that
that's the one will take a little bit
more time on is web sockets and web
socket is a new API defined by the w3c
but it's also a brand new protocol
that's really the powerful new thing
it's no longer using that the
restriction it doesn't the restrictions
of HTTP don't apply to it anymore it
really allows a browser now to open
effectively a socket connection to a
back-end server if you have a desktop
application you want to to talk to a
chat server you don't first sent the
desktop Java client through an
application server to then talk on your
behalf to a chat server you talk
directly to it you
import and you connect the same is now
true for web sockets or finally the
browser doesn't need that extra help
from the application servers anymore it
can make a direct back-end connection
and it can do that over port 80 and 443
which are the default web socket ports
that's actually quite powerful because
the desktop application is often limited
by whether those ports are open in many
corporate environments that's not so
easy to to get done and 80 and 443 you
can usually go out because those are the
default web ports now there are many
benefits the first thing is what would
you use this for you use this for any
sort of real-time application but also
for anything that needs a bi-directional
connection so a great use case for that
would be things like messaging in the
browser or chat right a chap is the sort
of classic example where we might both
be talking at the same time but with
HTTP they're really locked down because
it's what is a half-duplex protocol you
can't talk in both directions at the
same time it's almost like talking over
a walkie-talkie right you you hold the
button down you can talk and then you
release to listen with WebSocket that's
completely gone it's a single
bi-directional socket connection so you
can imagine the kinds of applications
that could use that there are too many
to mention here first benefit is a huge
reduction in unnecessary network traffic
you're talking about the order of five
hundred to a thousand to one in some
cases with the the Comets architecture
which is the the one in blue here you
have constant polling of the server
you're constantly making HTTP requests
and and the server response that has an
enormous amount of overhead and you can
trim that down but you can't get it down
to you know to very much below let's say
500 bytes per per request the other
great thing is you have a huge reduction
in latency and this was a study that was
done by the
Getty application server guys and it
shows that the latency at scale is
reduced by like an order of magnitude
because on the left side is the the
latency measured in hundred millisecond
bands on the right side is the
comparison with web socket and I urge
you to take a look at this offline but
the band's there are 1 millisecond at a
time it's a huge reduction and right
away able to go from 20,000 connections
to to 200,000 still with with very very
low latency so that's that's a I think
especially when you start scaling up
your application to to web scale then
you're really going to need different
techniques and there are already so all
the browsers are supported but there are
already a ton of WebSocket servers and
this I just recently said okay let's
let's make a list of all of them and it
took a while as you can see there's just
a enormous amount of stuff out there and
these are all anywhere from an
experimental project to a
production-ready server so you can see
all the browsers support it there's a
ton of server support it's really ready
to use today but we haven't talked about
the most important benefit yet and
that's really extending WebSocket the
WebSocket is kind of like TCP okay you
have the communication pipe what do you
do with it now on TCP you would you
would very quickly right use some sort
of protocol libraries and the ability to
layer higher level protocols is really
the aim of web socket so you can use for
example an XMPP JavaScript library to
speak xmpp or the jabber or chat
protocol similarly you can use it to the
talk about pub/sub protocols like
stomping amqp also the VNC protocol
which would be like the remote desktop
protocol things like that are very easy
to build on top of web socket and once
somebody has done it other people can
use it and there's a ton of libraries
already out there a lot of open source
stuff like XMPP client libraries and
Tom client library project it's kind of
like and later on you may go to some
canvas talks you're probably it's
unlikely that you'll be using direct
java script calls for canvas as well you
might do like move to in line to and
stroke then then you've drawn one little
line and that's not going to help you
speed up the game development that you
might be all about so you would use
physics engines you would use additional
things off the shelf to build your
applications that's what basically this
is about you you can layer higher level
protocols on top of web socket and
that's where the real power comes in you
can see it actually in the core protocol
there's already a way to add later on
it's not in any browser yet but
additional protocols that you can pretty
much immediately asked to upgrade to for
example chat would be an example of that
where browsers might natively speak XMPP
or chat right away ok demo of this is
right here so extending WebSocket to
speak a messaging protocol I give a
little demo here so insert the quick
ritual dance to the demo God's here and
all right so this is my iPhone I'm
actually controlling the slides this is
a little project that Peter moskovits
from cos Inc put together where I'm not
sure if you're familiar with Prezi
that's a flash-based presentation tool
somebody else said what we can do that
in html5 they created impressed jay s
and then peter created what we call
press 0 which is an extension to that
where you can control it using
WebSockets so if you go to that URL you
can view it that you were able to see it
so you can you can view it and I can
control it and basically swipe my finger
across it and Peter's viewing it so
that's the viewer I'm actually this
entire presentation was done using html5
impressed
yes presso using web socket sorry Yeah
Yeah right now for a good effect right
and I'm basically controlling that with
my iPhone so using web socket with a
higher level protocol in this case it's
like this stump it's a publish and
subscribe protocol I'm actually not just
using raw WebSocket i'm actually using a
higher level library says connect to a
message broker that you know has all the
specific topic that i can subscribe to
and we can show you much more about the
lower level details of this and in our
booth but just a good example of the
kinds of things you can do especially
when you start getting device access for
example i could also on an iphone easily
grab the device orientation coordinates
and we created the little app with that
the one will show you later is the race
card we have going in our booth which is
taking the device orientation
coordinates and transferring them okay
all right one other quick demo wanted to
show you is this one here this is an
example of html5 in action you have
WebSocket data coming in on the bottom
there at the hundred messages per second
that's something you could simply just
not do with the Commodore old techniques
for that are based on HTTP on the left
here you have a canvas implementation so
these are two canvas graphs using the
our graph library to to plot the graph
for gold and silver prices then I have
things like drag and drop that I can use
and I can buy and sell and then on the
bottom here there's like a server sent
events client that gets news data
streaming into the page so all of that
possible courtesy of some of these new
communication techniques and then
combining it again with utter html5
api's is really where the power is right
the connectivity features we talked
about they just give you sort of the raw
data coming into your page in a very
standard and
efficient way but now you need to do
something with it and that's where you
can use these other AP is that the utter
html5 ap is all right so I think I'm
already pretty close to running out of
time let me just quickly throws in there
I'll take the questions offline but for
all of you if you're interested in the
book actually this coupon code that is
here and I'll tweet it out as well is
actually good for any a press ebook of
course you should buy this one but it's
actually good for any a press book this
whole month and a couple of additional
resources i will make the powerpoint
available in up on the DEFCON 5 website
and that's basically it
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>