<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Embracing Failure on the Front-End | Coder Coacher - Coaching Coders</title><meta content="Embracing Failure on the Front-End - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/InfoQ/">InfoQ</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Embracing Failure on the Front-End</b></h2><h5 class="post__date">2014-08-27</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/YqTrm8BWwPY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">thanks very much for staying until the
very end of the day on the Friday
especially for a talk it's about failure
and that's that's what I'll be talking
about today and to give you a little bit
of context the reason I'm going to be
talking about failure today is because
of the company I work for called Pedro
duty and although I have a front-end
experience and background Pedro d'y
makes a product for on-call engineers
and that product what it does if you're
not familiar with it is it's the thing
that wakes you up in the middle of the
night when bad stuff happens among other
times so obviously on the engineering
team at page or duty there's people are
always thinking about failure at how to
manage it and particularly how complex
systems fail what really inspired me to
do this talk though was that those kind
of best practices in operations teams
and what they're thinking about is just
starting to trickle into the front world
so going to go over a couple of quick
things the first thing is and we already
all know this that it's inevitable that
your JavaScript app will break even if
you don't break it the browser will
eventually break it for you I think
there are some great ideas from
operations team so that we can borrow as
a community to make our apps more
resilience I want to throw in just a
little bit about the theory of complex
systems failure and also for a more
practical note talk about some open
source tools and services that I think
ultimately help you make more resilient
apps and then finally in closing talk
about why that's important at all so
here's your standard Google trans graph
I'll tell you that one of these is
JavaScript the other one's a mystery
lion if we had more time I'd take
guesses but just go ahead and do the
reveal one is failure and one is
JavaScript good news is javascript is
twice as popular as failure and that
that speaks to two one important thing
that's most the time your apps aren't
failing the thing you use the people
think people are interacting with most
of the time or hopefully it's not in a
failure state but that can't you really
can't get around a larger fact this is
the first part of three parts of theory
behind complex systems failure from this
fairly well-known paper by dr. Richard
cook
who specializes in a medical system
failure which is also another complex
system but it recently took off in 2012
when he gave a talk at velocity and it
kind of has scanned somewhat of a cult
status and I really encourage you to
read the paper it's only three pages
long and it's mostly bullet points but
we know these complex systems are very
hazardous and the bad things will happen
so what does that really mean in the
front of world I think traditionally it
means JavaScript exception everyone I'm
sure has seen this dialogue before the
dreaded internet explorer 6 exception
dialogue in a may you never have to see
it again but ultimately what's happened
is in the past few years there are all
of these services they you put a little
script snippet on your page Paul Irish
not surprisingly has the most
comprehensive list of all of these
services but the end result is you get
something like this you get a list of
JavaScript errors they typically have
some sort of spark line and you can kind
of track it over time the problem is
that window on error is very noisy if
someone has a misbehaving plug in or
something you know you'll get all these
weird errors including network errors
and things that really you didn't cause
it's something else going on still
useful but ultimately it's going to be
it's this list will never end and you'll
keep getting new ones because of the
second part of the theory that any
change will introduce new forms with
failure that unless we were able to
completely freeze the entire development
buyer and everything interacts with our
code they'll always be new cases of
failure they're going to pop up so I
think we can do a lot better than that
than just window on arrow tracking
unfortunately there's this really
interesting tool called phantom mist has
anyone heard of that before cool cool um
so what it is is it's the Phantom j/s
it's phantom jus which is a headless
webkit browser and ultimately the really
interesting thing is it's a CLI that
gathers metrics on a page you pointed
that really really interesting project
if anyone on the core team is here
that's done this I really have to say
really really great job on doing it but
how it works is pretty easy you have
it's a command-line tool so you can give
it a cookie if it's behind a session or
pay wall or something and then you
choose an output in this case I'm
choosing stats D which is a really
simple metrics I
raishin protocol developed it etsy and
flickr i think but all that does is this
fake URL here it's going to hit it with
its with this headless browser and then
tell me a bunch of really interesting
and detailed metrics about how that page
is behaving at that point in time
without me needing to like insert any
scripts or modify the page itself since
it's an actual browser that's hitting it
so what that ends up doing is you have a
really easy workflow and in an afternoon
or an hour or two you can set up a
really cheap and easy kind of metrics
dashboard for your site's there are
obviously commercial tools that do this
as well for you a new relic I think is
one of the best-known ones but it's also
very easy just to do this on your own
for free you've seen the cloud server or
even your laptop a cron job that kind of
runs phantom asst it's some interval and
I'm using data dog is kind of my
dashboard tool or my metrics aggregator
to kind of see these trends over time
and then the third part is you can
configure alerting so when something bad
happens when your errors start to jump
after a deploy or in the middle of the
night something terrible happens you can
actually get an alert that's you know
suddenly your front of metrics have gone
south and then that's leaves me the last
point then you can get woken up like 3am
just like your operations team so this
is my little data dog dashboard this is
this took about 10 minutes to create I
have all these famous phantom asst
metrics that are being sent over stats d
to date at all which is this is the data
dog interface and you can drag and drop
these these different metrics which is
pretty cool I just chose a couple one is
you know the number of JavaScript errors
on the page pretty useful the number of
Ajax requests the time to first byte of
the slowest response the size of the
HTML body the counts of assets not
gzipped or the largest response and
total number of bytes and there are
dozens and dozens more of these so you
can completely customize what metrics on
your dashboard are interesting one one
thing that I think github did really
well and they wrote a blog post it's
like there is they actually integrated a
tool like this into their actual
developer site so there's a toolbar that
pops up it gives you similar metrics if
you were browsing github internally and
they talk about that more at that link
last part for this kind of dashboard
which kind of ties into pagerduty sorry
for the the plug year but you can define
an alert um so in this case I have all
these metrics I have this pretty
dashboard but then using this learning
component I can actually say if the
throwing that the counts of JavaScript
errors exceeds some threshold over some
amount of time then it can actually fire
off something and actually tell me
wherever I might be and it integrates
with a number of learning tools
including of course the company I work
for and you can really choose any metric
that you care about to be alerted on and
it data dog makes it very easy I should
note though that although data dog is a
commercial product and there is a free
tier you could potentially build this
yourself with them with you know open
source tools like graphite but I chose
state a dog because I'm lazy you don't
want to really have to set up my own
graphite instance so last part of the
theory is that failure free operations
require experience with failure that
you're never going to be I mean as as
you find new cases of failure you get
better at managing it and you create
more resilient apps that's kind of
definitely part a big part of pagerduty
culture we have this thing called
failure Friday where every Friday we
inject failure into our systems the fun
thing is you can actually do that with
front-end code two people have taken a
chaos monkey and started to port it to
the front end chaos smokies the
well-known netflix projects where they
actually kind of injected chaos and
their back end and you know things
things started to break they're like oh
we need to fix this since we can
understand our systems better this this
first projects is a pretty
straightforward a kind of jQuery
extension so you load it on your page
you can say okay so with this said that
this Jason configuration object i'm
going to make fifty percent of all my
ajax get requests just completely fail
but the really interesting thing that
comes out of that is it prepares you for
a bunch of failure types typically you
wouldn't normally do during your normal
development workflow CD and failures
obviously a big one
your API back-end going down on a single
web page app you know connection failure
particularly with mobile web apps
someone goes into a tunnel they'd lose
their connection kind of how does your
app react to that or even things like
bad ssl certificates and there are
probably several more as well so there
are a couple other strategies that are
even easier if chaos monkey browser
doesn't you know that's too much the
really interesting thing is in Chrome
Canary devtools there's a new tab in the
emulation part or you can actually just
take the network offline at any point so
that's just super super interesting
particularly for anything mobile related
because the network connections far more
fickle and all you have to do is toggle
a drop down and you lose your
interconnection and the cool thing is
you can also actually choose slower
connection speeds in your Wi-Fi
connection so it has that kind of
network latency thing if you're a mobile
developer apple has the thing called
network link conditioner it's just like
that but it's built into chrome so it
makes it even easier um lastly I'm kind
of torn whether this is actually really
important anymore but it's always kind
of funny to see what happens when you
turn off JavaScript there are plugins
like quick JavaScript switcher they make
this even easier than before
surprisingly for some like tops five
sites in the United States things look
pretty bad even on Amazon like this was
two days ago like there's all this weird
CSS that just appears to the top of the
site which i think is a little bit
sloppy for a first side that gets as
much traffic as Amazon does um I think
that kind of brings us back to the
different things we can learn in dealing
with failure in our apps it's really
critical even if you're a front-end
developer to measure errors and key
perform at metra formance metrics over
time so you get a really good at you get
an idea of how your app is changing and
whether performance is going up or down
and ultimately trying to identify
deploys and code changes that affect
these metrics and for the performance
stuff if particularly stuff that phantom
asst a grits that's critical because a
JavaScript app that has really terrible
performance is the same is a JavaScript
app that doesn't work at all especially
now it is
and even if you have all of these
metrics coming in and you actually know
like oh whoops you know my the size of
my request just doubled you really have
to annoy yourself to fix those things
because it's not necessarily doesn't
seem broken after they happen but
they'll just grow worse over time if you
just don't nag yourself to address it
immediately and that's where some sort
of a learning solution comes in
including the one with the logo on this
this this slide and then of course that
forces you to find these remediation
steps to make sure these air states
don't happen again and then ideally you
can get experience with failure without
a waiting around for failure to happen
in the first place it's much easier and
better to know what happens when your
app goes offline before a customer or
client notices or before your CD and
goes down and so that's part of
injecting failure in your system is
trying to identify you know those cases
before you really have to and at a
convenient time for you thanks very much
that's my talk on failure</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>