<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Better Code Review | Coder Coacher - Coaching Coders</title><meta content="Better Code Review - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/InfoQ/">InfoQ</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Better Code Review</b></h2><h5 class="post__date">2014-08-19</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/rHVlFOB5BpU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">I'm doc Reitzel I run that company
ministry of velocity
we do consulting
things like yours get better at
refactoring at object-oriented design
and functional programming in JavaScript
in Ruby and then go
we also help teams get better at
interviewing and communicating and doing
code review which is kind of changed
over the years the dude in this picture
is doing code review in a really classic
sense this is what I used to do in the
90s at my first job it's like 40 feet of
dot matrix printer paper and steel case
cubicle dividers and khakis I don't know
I'm kind of dating myself here but what
I'd like to what I like to do is kind of
explain what he's doing he's he's
sitting there and he's like marking with
a red pen all the things that are wrong
with the code that's in front of him
then he you know we do is bundle it up
and pass it off to other programmers so
they could go and fix it your team might
have a more modern workflow it might
incorporate github or somebody makes a
series of git commits on a branch and
then bundles them in to pull requests
and all the team members leave comments
code gets cleaned up and everything gets
merged back into master so obviously we
don't need anything else because we can
just click the collaborate button on
jsfiddle and we're done right
so actually in-person code reviews work
a little bit better then the next level
up compared to poor request they're
faster you get more direct feedback when
you're face to face and you kind of
avoid those moments where you're
wondering about sarcasm and its role on
the internet but if you've gone down the
road of doing in-person code reviews you
might have experienced weird tension or
awkwardness kind of this this gets hand
waved often says oh well you know
engineers aren't good at talking to
people but we know it could be better
that's what we know right now I've been
a consultant over for over a decade and
a half depending on how we're counting
I've done maybe a few thousand code
reviews each of them is kind of special
in its own unique way when you're junior
and pairing with someone more senior
though could have used feeling judgment
even high bandwidth mechanisms like pair
programming can't really stave off that
feeling have you ever felt this way
here's obby he's a senior developer at
pivotal labs he says that can
used expression on my pairs face when I
say something stupid is a really
fortunate part of pairing I'm glad one
of us was listening he's putting a
positive spin on it but there's some
tension here so in order to understand
more about what's going on I'm going to
simulate a code review for you these are
really contrived there are two roles I'm
going to talk about the reviewer and the
author and for this example I'm going to
be the reviewer and that cats just going
to hang out looking fuzzy for a while so
here's a basic backbone view if you have
written a back went up lately you might
appreciate some about some of what's
going to happen if you haven't it's just
your average JavaScript atrocity um
what's going on here okay all right you
shouldn't be using IDs I hate seeing
this always use templates and render
okay you're really junior and you
probably don't know this but this isn't
idiomatic JavaScript oh my gosh how can
we make these functions better okay that
was really intense even though it was
just you and me and some really bad code
something's happened let's talk about
with the reviewers headfirst you
shouldn't be using IDs here now of all
the days I've been on a client project
in last year maybe a handful of them
have gone by where you know I've I've
heard something like you know like this
and it comes up pretty frequently this
is called being right instead of talking
about the merits of the code on the
screen the reviewers of using objective
facts or rules or information from
outside the current discussion not the
code on the screen so enforcing
standards isn't the most efficient use
of time also we've got continuous
integration build failures are annoying
but the upside there is that there's no
judgment in contrast having someone come
over to you and say there's a bug in
your code just feels kind of
uncomfortable yeah okay so consider
adding these tools you know if
formatting comes up a lot you know
forecast style guide you know make your
house style thing add linters if code
just doesn't look right
all right just kind of merge it in like
funk the build if you know somebody's
got IDs in there
ad code climate or sonar if complexity
or big methods need to be called out
frequently you know I've got somebody
writing a lot of long methods a lot of
if statements and here you go here's
here's a couple of tools you can use and
if testing is important to your team and
tests aren't being added you can
introduce blanket j/s and kind of give
coverage here the important thing is
that settings files don't feel judged
okay let's look at another thing the
reviewers said always use templates in
render now we're it's like always and
and never our generalizations always use
templates and render is really confusing
I mean what if you have to set the inner
HTML and it has to happen and render so
this is pretty tricky whenever I hear
never do X or always do Y my brain goes
on the defensive and the worst of times
I'll think of all the edge cases that I
could be you know moving around in the
worst of times they'll try to justify my
code and say something like well this is
just an experiment
uh as the author you know this doesn't
build a lot of confidence not in my
abilities and certainly not in the
process so here's a better approach just
ask reviewer can you show me what you
mean this does two things it lets the
author establish rapport with the
reviewer and then the reviewer feels
trusted you know they have space to
explain what they'd like to see in the
code more importantly that the
conversation moves away from the author
and maybe some of the author's personal
failings and back toward the code on the
screen itself okay so looking at this we
can see automatic semicolon insertion
what seems to be a heartbleed style if
statement and possibly jQuery issues so
the reviewer chose to respond a very
specific way though as a junior
programmer you wouldn't understand this
isn't idiomatic JavaScript this is
called labeling so the author will
remember being called a junior
programmer for the rest of their career
and there's no way to unspeak those
words and the damage done could be
permanent however the reviewer might be
trying to say something valuable and
just choosing kind of the worst way to
say it
so as the author what we can say here to
steer the conversation away from
personal comments and
Oxford code is simple question again
what changes should I make so this code
is more idiomatic alright so how can we
make this better this might not seem
like a terrible question now that we've
gotten some space we're looking at it on
a screen kind of like makes sense you'd
see this in a book but in the moment
when I was going through it my tone of
voice my presentation all because
something happened there's something
that's suggested by that I was talking
about the consultant that I work with
and we came up with a pretty clear
motivation here it's like school right
the reviewer wants to guide the author
by asking you know Socratic question and
this feels familiar
it's the guessing game so their author
wrote this code and the code review
process itself implies that there's
something bad in deliberately hiding
expectations the reviewer is creating a
gulf right so there's code review on one
side the reviewer is creating a gulf
that the author needs to bridge you know
pressure is being put on the author
who's in the middle of this come up with
a right answer or else that's combined
with the reviewers knowledge of the
codes inadequacy in response the author
might just defensively tune out instead
of being open to feedback during the
code review it's easier to kind of just
stare out the window the hard part here
is frustratingly detecting when you've
tuned out so regardless of how you do it
if you feel like you've tuned out the
best way to re-engage is to talk about
it I'm confused about what that means
where should we start
okay let's step back from the
nitty-gritty details for a second
code review itself is very formal even
to the point where people write books
and talks about it we use forms of code
review and interviewing we use
whiteboarding the number one thing that
people are used to we use pair
programming interviews like can you know
certain values of you know the Silicon
Valley normal company as we found out
getting your code review can be kind of
nasty
times so how you know when you've had
enough how do you know when your brains
about to shut down you do a gut check so
what happened here is your body is going
to tell you that you're under a large
amount of stress and your body's also
inconsistent but there are some signs
you can notice the first most obvious
sign is physical discomfort I usually
notice myself fidgeting and I usually
don't do it unless I you know
something's up
like I'm giving a talk in front of a
bunch of people your body might have its
own expression silence is another form
of physical stress if you and your
coworker are just staring deeply into
the code and not looking at each other
and not talking something's up and what
I notice is that you know not that I'm
in this silent moment that I'm snapping
out of it I'm waking up out of it and
I'm not really sure how long I've been
there
finally you can just feel tired during
my first job where I was doing code
review on a full-time basis I fell
asleep pretty consistently at 11:00 a.m.
sharp
the constant drumbeat of physical stress
kind of wore me down
day after day okay so you're feeling one
of these signs great there's only one
way you can handle this and that's
change your current physical situation
Remagen break out of this moment say hey
here's what I'm feeling I need to take a
break
for example while my back is killing me
I need to put my feet up for 15 minutes
I need to go walk around downtown San
Francisco and step in some group of
unknown origin I'll be back in a few hey
I'm feeling really tired I need to go
get a seven dollar cup of coffee
one way is you know that some teams
handle with stresses by encouraging at
work drinking drinking won't make stress
go away that's that's the first thing
but Twitter will get very upset at the
consequences sometimes you can't
disengage from the situation after you
come back from a break if the reviewer
isn't backing off and you've had enough
it's time to call it a day and there's
something you can say here too let's
pick this up again tomorrow after that
you can go home you can work on
something else but the code review is
over
okay I'd like to end on a high note I'm
leaving with a lot of information today
it's 15 minutes these things are really
difficult to change all of them take
practice I've given you some tools for
recognizing when a reviewer is kind of
angling for something that's further off
the map that we want to be being right
it's an appeal to an external authority
just use see I just use automated tools
to do this
first and foremost if you don't have
these tools that the conversations keep
coming up and is mechanically analyzable
don't argue just drop it in
generalizing it's use of absolutes
labeling is the act of excluding the
author from head of the engineering team
in general playing the guessing game
which is getting that author to exclude
themselves by not knowing what to do
there's some signs you need to take a
break
physical discomfort silence exhaustion
and these are just the signs that I
notice for me you know your body's
language way better than I do finally
there's some ground rules during a code
review that I feel are really important
both the author and reviewer should be
following these talk about the code I
bring it up again and again for a reason
codes under review not the people use
self-directed commentary that means kind
of sentences that begin with I feel I
think avoid talking about the other
person so sometimes it's not avoidable
sometimes you you are asking for an
opinion but using the word you should
trigger something like hey is this word
appropriate here am i pointing like
criticism unfairly at this other person
all this is really gradual you start
being aware of these behaviors you might
start practicing this stuff at your work
but you probably won't notice changes
right away because it's just like with
meditation or yoga or something gradual
like this when you're better at it
you'll know because it's easier than it
was six months ago thank you for your
time
you
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>