<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Android Development Fundamentals: What I wish I knew when I started | Coder Coacher - Coaching Coders</title><meta content="Android Development Fundamentals: What I wish I knew when I started - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/InfoQ/">InfoQ</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Android Development Fundamentals: What I wish I knew when I started</b></h2><h5 class="post__date">2012-07-18</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/h3gPo7qFOFw" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">I'm going to talk about Android
application development fundamentals and
in the context of that I'll try to limit
how much code I'm showing you I'm going
to try to focus on concepts lines and
circles simple stuff so it should be
graphical for the most part so really
quickly what we're going to talk about
is we're going to talk about seven
different things seven different parts
iterations the first one is going to be
about activities and Android UI then
we're going to talk a little bit about
intents and the navigation etc then
services that run in the background
content providers lists and adapters
broadcast receivers and finally the
little app widgets that you see at the
top of the screen so that's basically
you know the plan so we're going to hit
seven different iterations now I need a
context for this and you know it's if I
just talk about something that's
abstract you may not be able to relate
to that so the context for this is going
to be an application that I use for
learning purposes it's called the Amba
it sends for yet another microblogging
app it's basically a twitter app i just
can't use the word twitter so what it is
is over the years have used different
example apps so here the restaurant app
the golf score app this or that but then
I settle on this app because it's
something that is very it's very
comprehensive so it basically points out
all the key aspects of Android app
development that I find significant in a
very natural way so that's the reason
why I like it and secondly most of us
understand how Twitter works even though
you may not be using it you understand
that you can see what your friends are
doing and you can post the status update
that's about it okay very simple don't
need to explain it too much let me show
you this app in you know in a nutshell
so I have it running here on my emulator
and it looks like this and the source
code for it and everything is available
for free I like point out where later on
but basically this is just a list of
what my friends are doing and keep in
mind we're testing this against not
real Twitter but our controlled
environment because Twitter would really
soon kick us out if we were doing what
we're doing in class in a classroom
developing this so we actually have a
controlled environment that runs at
Lambeth Maracana comm so it's a it's
basically adhering to the same Twitter
API but it's just our own private server
so we can you know keep it fairly open
keep in mind that a lot of people all
the people reading my book everyone
knows the username and password so it's
very public so there's a lot of people
learning and posting stuff here and also
the occasional spammers trying to sell
insurance and whatnot so just like so
you know sometimes weird stuff shows up
so that's that's the app oh one thing
that today I'm showing the app is the
screen where we are going to post the
update so this is the screen here should
be coming up so this is the screen where
I can post an update and I can say hello
from what's the name of this room no
probably emulate our emulator is very
slow
let me just I'll say hello from Illinois
and I'll click on update so because I'm
not typing that slowly just it's really
slow so what it's doing right now it's
posting to the cloud then hopefully it
works out we'll find out but this is
actually making a web service call as we
speak and at some point it should tell
us if it succeeded or not I'm at the
mercy of the network connection and
other things like that so we'll find out
shortly in the meantime what we're
basically doing is we're building we're
going to build this app or design this
app and okay so it says posted
successfully so I can verify that two
ways I can go to that website and
refresh it and I should say if that was
posted and there it is right and I can
also go back here click on refresh and
pull it from the cloud as well and if
everything's fine
it should show up somewhere here as well
sometime soon again it's taking a while
but there it is right so that's that's
basically the nutshell of the app right
so we're now designing it and we're
using a graphical language that sort of
I came up with because one doesn't exist
so really quickly this box the dotted
line hopefully you guys can see it in
the back represents my app or more
specifically application context so in
Android an application is not not much
more than just a container for your
components right so they're basically
components the four components
activities services providers and
receivers will I'll walk you through all
of those components and your app is just
basically a container for them so the
app itself is not that significant the
components are right so the application
is just a loose collection of these
components that's what's kind of
interesting about Android you can quite
easily move them around from one app to
another and so forth so one of the very
first components that you're dealing
with is something called an activity an
activity is roughly a screen represents
a single screen of your UI so in my app
this would be one activity for example
right where I see the list of my friends
this would be another activity that I
can basically use to post something or
update my status so this entire screen
is my activity so that's that here and
basically what it's going to do it's
going to make a web service call to
Twitter service and so that's the
picture of that activity now what's
interesting about activity is that it
has a very complex life cycle and this
is probably the most complex out of all
the components so I'm starting with
activities because they're the most
easiest this is to understand their
visual write the only visual component
that we have on but the life cycle is
other complex I'll walk you through this
really quickly so basically at the
beginning of the day you you click on I
want to start my application you're not
starting an application you're starting
an activity within that application
right the application doesn't matter
remember so starting an activity within
that application so you are usually here
in the starting point so your activity
doesn't exist
then what happens is you go through a
number of so-called lifecycle methods or
callback methods right so the system is
going to invoke these on a transition
from starting to running right so system
is going to invoke those methods what's
important for you as a developer is that
you do not control the state of your
activity you have no input in that
however you do control what happens in a
transition so you can basically say hey
and route from starting to running I
want to add some code in for example
oncreate that's usually one that you
universally care about so right now your
activity is in a visible state or
so-called running state what that really
means is that it's on the screen
interacting with the user so you can
only have one activity in this state at
any point in time only one can be in
focus
interacting with user at some point user
wants to jump to another screen so what
happens is your activity is going to go
via on pause to a pause state then it's
going to get to on stop and out very
quickly it's going to end up in a stop
state again you can have many different
activities in a stop state right you can
think of them as basically a cache
they're just basically a bunch of
activities are sitting right now right
there in your phone in the background in
a quote-unquote background so they're
not visible but they're live in memory
the reason why the system does this is
because the step from called starting an
activity to bringing it to visible state
is very expensive there are lots of
things that need to happen you need to
launch a new process allocate memory
draw the UI lots of expensive
computationally expensive things need to
happen so as opposed to just throwing
that away as soon as you leave the
screen the system keeps those activities
in a stop state so when you want to
later on get back to the running state
these steps are much cheaper this would
be cents to a dollar in terms of the
actual execution time because you
already have it loaded in memory just
need to redraw it on the screen at some
point the system is going to decide that
certain activities that they're in stop
state are to be
it and this is going to destroy it on
its own so this is also it's what's very
interesting about Android is you don't
have a quit button I don't know if you
notice but you can't quit an application
right
unlike in your Microsoft Windows when
you're done with Word or Excel you go
and you close it and the reason why are
doing it that is because it takes a lot
of resources right so you as a human are
managing the memory of your machine so
Android team felt that machines should
be managing the memory of the machine
right so it's sort of they chose the
automatic versus the manual memory
management sort of like you know the
argument for a stick shift versus
automatic transmission right yes humans
can do a better job but is it really
worth your time at the end of the day an
Android team felt it's not so that's why
there's no quit button it's all done
automatically so that's really kind of
like a high level of the activities this
there's so many layers of understanding
this picture I can spend probably half a
day just on this and keep coming back to
it but I'll move on and then later on if
you guys have questions we can we can
address it I just I I know most of you
are not developers and I don't want to
you know spend a lot of time on the code
but in a nutshell
whenever you're developing something in
Android you basically extend something
that already is given to you from the
system and then you keep overriding
these methods so this is my own create
own start on stop and so on right so
remember how I said you do not control
which state you're in but you control
these transitions you fill in these
blanks right so this is lines and
circles and this is what the code would
look like right so basically you would
say I want to override in oncreate I
went over I don't start etc cetera and
you get to provide some useful bits and
tidbits in inside of those functions
that's just kind of how code looks like
in terms of the life cycle methods so
those are the life cycle methods that we
just mentioned so on create only zoom on
start stop destroy so there are a
handful of those for an activity and
it's one of the more complex ones
there's some other ones that are related
to menu etc but are not as significant
whenever you create one of these main
components you get to register it
you register it in a manifest file so
each app has a single file called the
manifest file and this file is sort of
the big picture of your entire
application it explains what the
application has as components what
permissions in it needs etc etc so it's
usually about one to two screens in
length I think we looked at it in this
case so for example in Kelo world I
email look like this so basically this
is my manifest file and it says I got an
application and that application has a
single activity inside of it and this is
the name of that activity so it's XML
it's usually about 1 to 2 screen sizes
so not that big ordeal but it's
important that you have to register each
application component so so now we have
an activity and we want to build some
kind of user interface right so now in
in Android there are two ways to build
UI not just one so one way is to do it
programmatically right so for example I
want to build this UI right so I have a
couple of components here I have the
counter that's going to you know go down
as I keep on typing I have a button
right and I have an area that you know I
can type in right roughly so you know in
Java I could say button my button equals
new button button dot say text update
button dot set color white button dot
etc etc I can basically programmatically
do it second way to do this is to do it
in so called in XML and let me show you
what really quickly what that would look
like but it's basically so this would be
my same screen done in XML it's going to
take a little while to open up just
because the tool is slow let me see if I
can show you like this so there's my my
screen in XML and what you notice here
is that the tool is sort of like it's
kind of like the Dreamweaver rate for
HTML you drag and drop bits and pieces
right like if I wanted to add you know
stars I could just like add you know the
rating stars there or move it down that
sort of thing right if I wanted to add
the picture of a guy I can like add
there etc so it's basically you have
this like very easy drag-and-drop kind
of environment and and that basically
just update generates some XML for you
behind the scenes so there are two
approaches to building UI and usually
what we do is we start in XML to
describe our UI and then we go to Java
and we tell we explain what the UI does
so there's a button XML is really a good
tool to say what the button looks like
it's white it's big it's round that sort
of thing but it's not a good tool to say
what the button does
right so Java is really good to say what
the button does open up what you know
web web service and post to Twitter so
so that's kind of how we use the two
different way approaches to get a job
done efficiently right so the point is
that you have two different approaches
to building a UI do you are just like in
other languages is based on layouts and
components so this is pretty similar
with java's AWT in swing if anybody is
familiar with that but basically you
have when it comes to building a UI you
have so-called containers things that
can contain other things and then you
have the widgets that are the final
elements so for example you know on this
screen you know I have a container this
would be my big white box right and
inside of that container I have various
components component one component two
and component three right so these are
final components they don't contain
anything else that's basically the logic
for those of your kuhmo design patterns
it's the composite that better pattern
or composite so so that's basically
lists we call them layouts and views
just a different lingo for containers
and components but same thing
fundamentally so we're done with the
first screen we can post to Twitter now
what we don't have in the previous
iteration is we don't have a way to
specify user name and password it's
hard-coded somewhere in the code so the
next iteration is to add yet another
activity so yet another screen so we
already have this one where I can post
to Twitter but I don't have a way to
update my username and password
and also I need a way to store that
username and password right now I would
also need something that glues these
things together so I'm going to create a
main activity with an action bar that's
going to provide for that navigation
ability to jump here or ability to jump
here okay so what that looks like is
basically it basically looks like this
except this will be blank right imagine
that this is blank so this would be my
my main activity where had the button
where I can click on this and jump to
that guy right so now this is that guy
or I can go back and I can jump to this
guy that we are yet to build it's just
hidden under menu preferences so I can
jump to this guy and I can update my
username password and that's going to
store it locally okay so that's what
we're building next now to understand
this jumping around you need to
understand something called intents and
it's something that's you know
purpose-built for Android so intents are
basically events or messages they
provide the glue between this remember
how we said everything is loosely
coupled these components right so
intense provide for the glue between
those components so I'll give you an
idea here what it does so for example
imagine that I am in Gmail app right I'm
reading my email so I am looking at my
my activity my screen that lists my
messages and I see there's a message
from you right so I click on that
message that sends an intent to open up
yet another screen where I can view that
particular message now that message may
say oh you know you know check out is
this news article so I click on link and
that now goes to yet another app web
browser and within that opens up the
activity so it sent another intent to do
that so I'm reading this web web story
web article and what it says or check
out the video that goes with the article
so I click on that link and that now
opens up YouTube app within which it
opens up the activity for viewing the
Tayler video so basically all along what
we've been using is we've been using the
intents to basically jump from one
activity to another to another to
another and yeah user just completed a
task user doesn't really care a jump
from an app to an app to an app to an
app right just like when you surf the
web you don't really care that you're
jumping from a website to a website
you're just going from a web page to a
web page right you can also go back
right you can unroll this disco path so
that's called doesn't intense and that's
called a task now intents can be both
implicit and explicit well and this is
an interesting feature so an explicit
intent would be if I'm Gmail and looking
at the list of messages and I want to
open up a particular message I want to
open it up with a specific activity so
I'm going to spell out the name of the
activity that's going to use to be used
to be able to open this message because
it's something that's internal to Gmail
it's nobody else's business right now
when I'm in this viewing the reading the
email message and I want to open up a
web link well that's more of an implicit
intent because anyone capable of opening
up a web link should be able to compete
for that action right so the user may
have the default web browser that comes
to the Android but the user might have
downloaded Firefox or Chrome right so
they should have a right to say hey I
can also handle that request just like
on Windows when you you know download
the Chrome browser or Safari or Firefox
and you no longer use IE so the same
thing happens on Android and that's what
allows for basically having multiple web
browsers or SMS clients or other apps of
that nature on your device that can
compete for the same user user action so
intensive pretty powerful in terms of in
terms of that an intense can do a couple
of things they can start activities so
in this previous case I only showed you
how to start activities but you can also
use them to start start/stop and bind
services or send broadcasts so those are
about you know a handful of things you
can do with intense like I said they can
be explicit or implicit I don't want to
go too much into code but explicit one
would spell out the name of the
that it's going to implicit one with
more use so-called action something of
that nature but again
code is easy to figure out once you
understand the lines in circles I'm
going to keep that the keep that very
light now when you send an intense
somebody needs to in ten filter for it
let's call some of this as I am
interested in that intent it's by
creating an intent filter and intent
filter is basically just you know a very
simple XML it says this this something
filters for an action with specific name
so if you have an intent for a specific
name like open up a web page then
whoever adds the intent filter that says
I can open up a web page would get asked
to compete for that action and the user
would ultimately choose Firefox or
Chrome right so that's called that works
so now that we have intense we need the
action bar and the action bar is
basically this thing here more
specifically this thing that we have
here so it's got buttons that I can
click on for example and complete some
action if the buttons don't fit on the
menu here they could go into the menu
that you get under pressing the menu
button right so that's the action bar it
used to be just the menu but since API
level 11 we expand since honeycomb we
expanded it to basically be a little
more feature-rich to enable it to have
the action bar you have to have at least
API level 11 you have to specify minimum
in SDK version etc so that's not as
important but as long as you guys know
that's available to you there to add
action items just to kind of give you a
flavor for it it's basically just a
little bit of XML so if I want to add a
action to save something I would
basically say I want to have an item
that has there an ID icon title and show
if there's room with text so that's
basically going to add a little button
there so it's a couple of lines of XML
code to add a button right
or in ice cream sandwich they take
action bar one step further so they
actually allow for so-called split
action bar so for example I have more
buttons here I have four in total but
they don't fit on my screen just because
I'm on a small device they aren't right
now hidden under the preference under
the menu button so if I press the menu
button you can kind of see them emerge
here right now an Ice Cream Sandwich you
can actually specify a so-called split
menu so basically you can get another
one of these at the bottom like that so
it's always on visible so that's that's
a new feature of Ice Cream Sandwich but
it's again part of the action bar you
can use the icon also for the navigation
so that app icon there could be added as
a navigation so in this case it doesn't
do much but you could use this to mean
for example clicking here goes to home
or something similar just like on a
website clicking on a logo typically
takes you to the home page so you can
easily add that feature as well so now
that we have a D now that we have the
the action bar and the Preferences so
far what we've built is we've built a
way to specify user name and password so
specify user name and password and then
a status activity where you can update
your status and you can ultimately
update your Twitter service with your
status but you don't have a way of
getting the data from the cloud so what
we're going to use for that is we're
going to use a background service so
we're going to look at services now and
this service is job is going to be to in
the background occasionally go to the
cloud check if we have new tweets and
basically pull them down from the cloud
now it's pretty straightforward
so so service is our background
processes I put them on their quotes
because the word background means
different things to different people
i what I mean by background I just mean
you can see it I don't mean it's running
on a separate thread or a process right
because by default services are not
running on the same thread of process
they're actually running on the same
thread as your UI and
and that's that's something to deal with
so let me explain the need for services
so for example I want to build a music
player let's imagine a building Pandora
or something similar right so obviously
I need some kind of UI I need a place to
pick the station give it thumbs up
thumbs down fast forward rewind that
kind of thing right so I need the UI and
I could play the music from this UI
that's not a big deal the problem is
that that UI as you learned earlier with
activities can be wiped out by the
system at any point in time system feels
that it needs more resources it says oh
here's the UI that is not visible I'm
going to just dispose of it destroyed so
we do not want to own playing of the
music there because it could be just you
know destroyed at any point in time so
what we do is we actually create a
service that now runs in a background
and it owns the actual playing of the
playing of the of the music so the you I
would simply start a service as far as
we are concerned the uik disappear
that's not a big deal
in the future if the user wants to get
back to it we just get back to it and we
to use it to for example stop the
service and so the service now owns the
actual playing of the music so service
gets a much simple life cycle then
activity so basically initially it
doesn't exist
you start it it's running you stop it it
gets destroyed the point is that you as
a developer control it much more so than
the system so the system is not going to
randomly stop your service it doesn't
happen as much as it does with
activities that are not visible so
that's a big difference
the service just like activity again you
start by subclassing something from the
system and then you know overriding
specific life cycle methods just like
activity just like we did with the
activity there's a different flavor of a
service called intent service that is
that does the work on on a worker thread
in other words it doesn't block your UI
thread so that's kind of the big
difference between the two but from
programming standpoint as opposed to on
start command you just use on handle
intent so that's about the only
difference there
from code point of view service
callbacks we mentioned those on create
start and destroy that are significant
and similar ones for intense service and
create on handle intent and destroy
again I'll give you all the slides later
on as well soon just so you guys know
once you whenever you create one of
these main building blocks or activity
services providers receivers you need to
register them to tell your app Kay I
have this component it's part of you now
and again it's either a simple one-liner
XML or it could be as complex as you
know a couple lines of XML this
basically says this service is
responding to the particular action here
okay so now that we have the service we
basically have a way to pull the data
but we're not doing much with that data
so what we would want to do is we would
want to store this data somewhere and to
store the data we want probably a
database but we also want to abstract
the type of a database we're using and
for that we're using something called
content providers so content providers
are basically we get another one of
those four main building blocks and
they're used to basically abstract the
data access to data if you remember for
those of you who are in previous talk
and I talked about security I said how
each app is in its own sandbox one app
cannot see the data of another app right
that's that's the basic of the security
model in Android but what if you do want
to share the data right what if I what
if I'm walking down the beach and I take
a snap a photo of my daughter playing
and with a camera app but now I want
that same picture I want to email it to
my parents you know with a with a gmail
app or I want to post it to Twitter or
Facebook with respect you know those
apps right so I obviously want to share
that data right so and so the content
providers enable that they're basically
interface to data so when it comes to
data there are only four things you can
do to data insert update delete and
query right that's it so that's exactly
what the interface looks like
you can insert update delete and query
and you're kind of piercing that
security hole with us for API is to
allow access to data
the system uses content providers all
the time so for example all the contacts
are exposed as a content provider all
the media like pictures for example or
cetera are content providers settings
etc etc just going to give you an
example so if I'm writing if you're
looking for the address book or contacts
you're not going to find one app you're
going to find two apps right so
basically we have one app called
contacts that has the UI so this would
be the user interface right this is
where you can see your people right but
it doesn't have any data if you look for
the data there's no data whatsoever in
that app there's another app that has no
user interface so there's nothing visual
about it it's going to be really hard
for you to even notice you have it
but it's there right and it's got all
the data so so this one basically just
asked for data from that one so with
this loose structure allows for is that
somebody somebody could come along and
build another address book like for
example HTC does this it builds sexier
version of your default apps right the
address book on HTC Sense looks much
nicer but it taps into the same data
source so you don't have to have
multiple databases you can also have a
mashup of this data so Facebook data and
Twitter data and Google+ data and your
own people data can all be meshed up in
sort of a holistic view of a person so
if I look at the information about Bob I
know everything across all these
different social media and so on so
that's possible because of this type of
an Luz architecture our content
providers have a very simple life cycle
you on create then you use one of those
four things you can do tour data and
then you won't destroy it this is the
implementation now the implementation of
the content providers is probably the
least fun out of all there's just a lot
of code and and you know again you start
by subclassing the system content
provider but the code for it for
implementing content provider is usually
not that pretty
now luckily as an ad the
we're usually more on the using existing
content provider side then creating your
own but just so you know if you're
creating your own there's a little bit
of a code involved the callback methods
we talked about on create on insert
update delete and query a registering
content provider just like anything else
you gotta register it with the manifest
with the Android manifest file one thing
that you also need to specify is an
authority that's kind of how it
advertises itself on the system so that
other apps can find it in there there's
a short list of predefined authorities
for things that are ready baked into the
system such as you know contacts
settings media storage etc so that you
know how to load them up as an app
developer so so now that we have the
data so we got the data from Twitter via
service the service stuffed it into a
content provider behind the scenes
content provider happens to be storing
it in a database but we don't really
care about that for the rest of the
system is agnostic to the actual storage
right now that we have the data what we
want to do is we want to build a way to
see data finally see what my friends are
up to so we're going to add a so called
fragment here for timeline and then when
you click on it it can show you the
details of that particular message so
basically what we're working on now is
remember before I said imagine that this
is blank well now imagine that it's no
longer blank right so we are filling in
this part we're adding this list here
and more specifically if I click on a
specific item in a list I can see the
details of it
right so that's what we're building this
is the details view so one thing that I
like introducing here is the list in
adapters so so we have the data on the
device and imagine that imagine that I'm
building like Gmail app right so if
you're like me you may have maybe 10,000
email messages in your Gmail account
it's quite easy right over the years and
so on so so now we are connecting the
data source of 10,000 something
to a screen that can have one to let's
say ten items on it so you see the
problem we have gigantic data source
very tiny little screen and a slow
Network in between so what's your
algorithm going to look like are you
going to go and pull all 10,000 and just
render the 0.1% or something so it
probably not right so you need some kind
of intelligent way of doing that and yes
you can build your own but Android
already provides a data center called
adapters and adapters are basically an
intelligent way of connecting large
amounts of data to tiny little screen
and they're going to automatically
figure out how to pull the next next
next and wait as you scroll it smooth
and reuse the objects on the on the on
in the view side and basically make it
really efficient and highly scalable so
that you can basically connect the tiny
screen to any amount of data so that is
do a pretty smart job about that another
thing that I mentioned earlier is
something called fragments fragments are
relatively new often misunderstood they
only introduced in the tablet version of
Android the honeycomb so basically so
far you guys know about activities right
so activity like I said is a screen this
is an activity so details activity it
takes the entire screen and if I go back
I go to another activity it takes an
entire screen right so that that's fine
if you're dealing with a tiny little
screen which phones have but tablets
don't right and big screen TVs get even
more real estate to work with so Android
needed a way to figure out how do we
create reusable components so that we
can have a single application one single
application that's going to look
fantastic on a tiny phone a tablet and a
big-screen TV and when I say it's going
to look good I don't mean it's just
going to blow it up on a big-screen TV
right or put it tiny in the top left
corner we don't want that either right
so we want to we want to intelligently
and do that so fragments basically allow
us to have a different scenarios in
other words a reusable UI so for example
in a case that you've seen so far I had
a main activity that had
timeline fragments so this is the list
of my people then you click on one and
it takes you to another activity where
you can see the details that's what you
just saw previously okay now if I'm
running on a if I have more real estate
in a particular device why not have main
activity open this component than that
component side by side on the same
screen right so two different screens
same screen but reusable components this
timeline fragment in this timeline
fragment are identical details details
so they are reusable so to illustrate
that let me I'm going to just flip my
device from portrait to landscape mode
so if I rotate it I certainly have more
real estate space and the app is going
to take advantage of that so you can
basically see how I now have the same
tile timeline list here but details are
no longer a separate screen to jump to
but I can basically click on this and
it's going to open it up here make sense
so I'm reusing all this UI and the app
is intelligently going to redraw rip
draw itself depending on the type of a
device that we are running so it's a
single app that should look good on any
form factor more or less so those are
fragments that's exactly what they just
told you about fragments so they're
pretty cool a lot of people don't don't
get them but but they can be very very
useful especially as we're getting to
bigger and bigger screen sizes loaders
are basically intelligent way to load
data
so sometimes loading the data can take a
while like if I'm loading from Twitter
I'm in the mercy of the network so it
could be that I have no network in which
case it may sit there for 30 60 seconds
until it times out right and all along
it could be blocking my user interface
so I would be impossible for me to even
touch a button or something because it's
still loading the data so loaders are
basically an intelligent way to do that
asynchronous way using a loaders you
basically have something called the
loader manager and enables you to do
that
now all these features loaders and
fragments that I mentioned they're
relatively new we do not have them prior
to honeycomb so prior to API level 11
right but as you guys may or may may or
may not know in terms of the end roid
universe about two-thirds of people are
still running on gingerbread or below so
lots of all devices so presumably you
want your app to run on a lot of
different devices the good thing is that
these new features are available to
older api is via a compatibility library
so you can basically just throw in a
little library into your app and
suddenly it's going to be available to
older apps as well all the platforms as
well so it's in other words you're
expanding the capability of older phones
via a library so that's a good thing
so our second last iteration is to
basically add a broadcast receiver here
to automatically start a service so for
example when you boot up your phone you
don't have to remember to go and start
your Facebook and remember to go and
start a Twitter you know in your Gmail
and so forth they're automatically going
to be cranking in the background falling
to data so by the time you open up the
UI you have the latest data so that's
that's an example for for our case for
broadcast receivers so broadcast
receivers are basically a dormant piece
of code so it's a piece of code you
write that you register for some event
that can happen in the future you say
Android system I care about some kind of
event it could be it could be battery's
running low and I want to turn off Wi-Fi
and Bluetooth it could be the boot is
completed I wanna start some apps SMS
arrived network is available network is
not available etc etc so you basically
register it for events when those events
happen you get notified so it's
basically a publish/subscribe mechanism
or observer observable pattern for those
of you who know patterns so that's
basically what what broadcast receivers
are they're very simple to implement
so you basically extend the broadcast
receiver and you have a simple method
that you implement called an receive
and that's where your doorman code is so
that's the only method on receive and
this is how you register it so again you
can register it via a little bit of XML
or you can do it programmatically which
is just a little bit more code so the
final part of this picture of this
project is to basically create an app
widget an app widget is the thing that
let me show you it's this thing here it
doesn't live inside of your app it's
part it ships with your app but it runs
in I think I have it on one of the
screens a bit of slow I think it's in
this one it's right there so there so it
runs as a you know this is my little
widget here it simply says this is the
latest tweet right so it shows on the
home screen for instance but the point
about it is that it doesn't run instead
of your app it runs instead of an
another app as a guest that's why I drew
it here outside of the dotted line right
so that's the app widget and app widget
is essentially implemented as a
broadcast receiver so it's very similar
conceptually to receiver
so basically when there's some new
information you it gets pinged and then
it gets to do something there's an
additional file the metadata file that
comes with it that basically specifies
its width height so with height and how
frequently to update it so basically
what I'm saying is this widget is one by
four units there's a concept of a unit
you might have noticed when you use
widgets and somewhere it's defined
there's a number what the unit is mean
you look it up there's a table and
that's why this number 72 and 294 came
about I calculated based on some
documentation and and then I say every
10 seconds basically please update it
this is just the code I'm going to pass
over that so that's basically the what
the
the widget looks like at the end of the
day so essentially that's that's you
know that's the whole story of building
a what I consider an average size
Android app that is touching on
activities services providers receivers
and it's illustrating all the things
that I consider significant in Android
in terms of you know a standard app
development right so the code for it is
available at github Maracana Yamba so
you can download the entire code it's
also what I use for my book learning
Android so it's you know each iteration
corresponds to chapters it's very well
explained and I'm actually updating the
book right now for Ice Cream Sandwich so
so that's basically you know also
explanation of that the slides for this
are available at Maracana dot-com just
search for architecting Android apps and
and you're going to find it oh thank you
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>