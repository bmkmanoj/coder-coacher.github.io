<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Beyond HTML5: Device API's &amp; PhoneGap | Coder Coacher - Coaching Coders</title><meta content="Beyond HTML5: Device API's &amp; PhoneGap - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/InfoQ/">InfoQ</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Beyond HTML5: Device API's &amp; PhoneGap</b></h2><h5 class="post__date">2012-05-03</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/14MhSnFJ3dc" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">yes we'll just get into it does
everybody here know what that little
robot is in the middle if you do put up
your hand only a few people cool I'm
gonna teach you about that little robot
tonight so my name is Brian I'm gonna
talk to you guys about device api's
which I think are the kind of next thing
beyond html5 I'm also going to talk to
you a little bit about html5 that's okay
and I'm a huge fan of courage wolf and
this has kind of become my mantra as a
software developer because there is just
so much to chew on when you're a
software developer especially today and
the courage wolf is kind of like the
Internet's answer to the motivational
speaker who here has heard of the
courage wolf most of you have if you
have not then you got to look it up it's
alright he's gonna make an appearance
again later the courage wall basically
tells you what you can't do and you're
going to do it so we're gonna talk about
api's and how they work and before we
get into how API is work we should
probably talk about how API is became
what API czar
so if we go back in time and think about
communication and telecommunications it
sort of started with the Telegraph
before that we obviously was language
and we would speak to each other but
that was course and it didn't work
really well the only time we had really
distant communication was semaphore that
was good for about 30 miles over the
distance of a horizon where you could
flash a light and through that came
Morse code and then beyond that came the
Telegraph where we could actually
transmit a message over great distances
and this had huge military importance
and had huge psychological importance
because all of a sudden we could we
could change how people thought over
huge distances before that if you didn't
have a really fast horse and the ability
to read and write you were you
didn't know anything you only knew what
your neighbor knew and that that's
interesting so this particular device
was like a much later version of a
telegraph earlier they were just those
little tapi guys and it's interesting to
think that this thing is even 200 years
old you know this is very recent times
so we've come a long way beyond the
Telegraph there was a telephone
Alexander Graham Bell was credited with
inventing it which is he didn't
but he won the patent and if you go to
Wikipedia you can read about this it's
really interesting because a whole bunch
of people actually came up with the idea
of a telephone at the exact same time
and this is really common in history
it's not unique to have an idea it's
unique to implement an idea and
Alexander Graham Bell won the patent so
we give him credit for actually
inventing it but he probably didn't
there was a lot of guys that did and his
telephone actually kind of sucked but
that doesn't matter
no one cares no one remembers it his
legacy lives today in his name and in
AT&amp;amp;T after the telephone we had the
radio and the radio was really cool
because this was true hacker culture the
original radio was completely open
unregulated it was very indie there were
small towers that people could connect
to all over the place not even towers it
was just individuals and it could be
anything it could be comedy it could be
music to be somebody talking and so
radio was awesome for a time and then
after World War one it became really
apparent that radio was a huge
opportunity for communication between
governments and their military and it
became regulated and as a result I think
RCA was created Radio Corporation of
America and they regulated the living
 out of it you can't own a radio or
create a radio unless you go through
channels that are controlled by the
government essentially that radio was
the first RCA radio so that's
interesting and there's motion pictures
and motion pictures were another area
that was fraught with a lot of different
inventors at the same time and no one
really could nail down who created it
but Edison took a whole bunch of early
credit for it if you look at this
awesome picture there's an orchestra in
front because they didn't figure out how
to synchronize audio at the same time
this is barely a hundred years ago which
is super fascinating in current thinking
because then we move to television which
comes next
and this dude this British dude I can't
remember his name but he's one of the
creators of television there was more
than one at the same time and some of
the earliest televisions weren't even at
all electronic they were completely
analog that little crystals circle in
the middle there is the television
itself and it would play about 20
seconds or something like that what an
amazing thing to have happen and that
kind of like brings us to today where
now we can share any information at any
time anywhere that we want and it isn't
just over computers it happens to be
through our phones and that's sort of
what this whole talks about this is the
significance of device api's and we're
within like the last 200 years we can
now see the time where communicating is
has become effectively zero so web
technology is changing really fast and
everybody here knows that if you're at
the html5 Meetup
it's not news all right work on the
phone gap project I've also done other
things that I'm not super proud of and
things that I am proud of
WTF JSX UI launch hair you check out my
Twitter or whatever so we're gonna go
through html5 very quickly and I'm sure
this audience is super familiar with it
but there might be things or not it's
worth talking about and then we're going
to go through device API s which I feel
are the kind of next generation of api's
and then we're going to talk about
what's up about device API is
because there's a lot of that too and
that's why it's not here yet so html5
can I get a cheer of some form you're
here it's like it's like Thursday night
you might as well be stoked you're here
so I'm from Canada and this is our html5
code arms
and this is one thing I totally do not
enter so I recently moved to the United
States and I don't get this so
imma be like oh hey nice to meet you
brought yeah you work at the full gap
team
nobody god they're like you can't it'll
be like yes and then they'll laugh at me
why do you guys do that I don't
understand what's wrong with our mooses
arms here anyways so it's anatomically
correct but it looks super awkward he's
feeling all bum the Bears coming for him
the beaver doesn't give a anyway so
html5 has kind of come to mean nothing I
think I think the message has gotten
watered down and so very quickly just
like roll it around html5 camera around
2004 through an initiative the what
working group it's a web application
technology working group these guys
basically browser vendors got together
and they said okay XHTML is going
nowhere and it's going nowhere super
fast and we have to also keep in mind
what happened before and html5 was a
result of that html5 actually didn't get
any major adoption until Steve Jobs
wrote a letter about some other
technology to some other big company and
after that letter a lot of people
decided that html5 was the way to go so
html5 is kind of two parts it's its
markup and it's api's and so there's a
declarative side to it
XHTML is still cool you can do that if
you want to do that you don't have to do
that and unless you're a Java programmer
you probably don't want to do that so
yeah you can still write crappy mark up
without any quotes and Frank frankly I
do too
you now have a standardized parsing
algorithm so there's one way to parse
HTML 5 which means that we get to have
the same bugs across browsers there's a
bunch of new elements there's structural
elements there's text level elements the
time thing that was funny there's some
form elements which are actually really
useful
and then there's embedding elements
which are really interesting to me
personally canvas element let's just
paint pixels video and audio elements in
theory would allow cross-platform video
and audio and then there's a new input
type which I love how the w3c is all
about semantics so they have a type
equals no sense but so you get all these
different types which are actually
implemented in mobile really well it's a
bunch of chromatic api's we can drag and
drop there's web workers which give us a
kind of analog to threading server-sent
events sockets cross document messaging
you guys are probably familiar with this
stuff offline happens just like and
we've got the Navigator offline api
which i think is horrendous it there's a
talk it will be available really soon
it's by a guy named Jake Archibald his
whole thesis was that the app cache is a
douchebag at J s comp and he presents it
very well that link will take you there
and I'll show that link after web
storage is a nightmare
I've create a library called launcher
which helps web SQL is going away web
SQL seemed like a good idea
who likes writing SQL statements this is
giant string nobody
so that's on its way out indexeddb is on
its way in which is basically the idea
that we can store JSON objects and then
there's various file API is I think
there's something like six or seven
different standards for that cool so
HTML means new shiny we get more
expressive tools and rich contents
first-class offline web is still nascent
but feasible as the courage wolf would
say dies your porn
screaming behaved in blood okay so
device API is that's what we're here to
really talk about so this is about going
beyond html5 you guys got the background
you already know what it's all about
device API is I would classify them as
headless and so they're not things that
you can look at they're not things you
can see when we were developing PhoneGap
early on we decided that the UI was
something the web did really well
there's probably a lot of debate to be
had about whether or not that's true
but if you think about the web when it
comes to a lot of different screen sizes
a lot of different dimensions and a lot
of different devices it's scaled fairly
well device API is were the real problem
to us ultimately we felt that we didn't
have access to the things that the
native platforms had access to that we
wanted to make a real difference and
phones are particularly interesting
because they have a whole lot more
sensors than a typical computer so we
divide them up into three buckets
sensors data and outputs and so sensors
are like geolocation accelerometer or
GPS accelerometer your camera that kind
of thing
data would be things like your contacts
your file system your media itself like
your your songs your movies that kind of
thing and outputs would be things like
your screen your microphone or you saw
your speakers that sort of thing so
those things are truly cross-platform if
you think about a phone you have or any
device you've got they've got those
things and those things don't
necessarily require UI although they may
and so that's what device api's are all
about so what aren't the only ones that
thought about this stuff and in fact
there were a lot of people think about
long before the PhoneGap team was
there's a group in Europe called the WAC
which i think is aptly named there
it stands for wholesale application
community the WAC defined a lot of stuff
around device api's before they were
realized and the WAC is achill II a
consortium of carriers in Europe
formerly they were called Bondi and a
lot of those guys make up the current
DAP at the w3c w3c DAP was formed in
2009 a year after PhoneGap came about
the DAP stands for device API working
group DAP is really similar to their
goals are very similar to ours and the
widget working group is actually quite
similar to us to Mozilla recently got
involved we have anyone from Mozilla
here not one person from Mozilla at the
html5 meetup weaksauce all right that's
fine
so Mozilla recently is anyone here her
to boot to gecko alright yeah
over half the room a lot of people lying
that's fine so Buddha geckos Mozilla's
initiative to build an operating system
for phones and they've recently got
involved and they said yeah we like all
these api's but they suck so we're gonna
do our own thing create our own little
group and then we're gonna contribute it
back and that's basically Web API and
they're totally right it needs to be
done this way they're implementing first
as opposed to standardizing by committee
first web api is interesting I'll show
you some stuff from there too and then
finally there's a patch in Cordova which
is PhoneGap and that's whom I represent
the PhoneGap project started off and we
really didn't know what we were doing we
were just doing some stuff and we
thought it would be cool if phones could
you know have a web browser that was as
capable as the actual native platform
that was running on when Steve Jobs
announced the original iPhone said it
was all about the web he said the web is
the platform and everyone went no man we
want to write objective-c and which they
didn't but they thought they did and so
then they got their SDK and everyone's
like oh this sucks but whatever so we
created PhoneGap just to address that we
wanted the web to be the platform - that
was the idea and and so all these groups
believe in the same idea where the web
is a platform but what that platform is
going to be is what we need to figure
out there's a related concept of device
API is that I want you to be aware of
and this isn't actually important for
you to know and this is just something
that you need to know it's something put
in the back of your head and then forget
maybe really quickly so carriers the
common carrier the carriers are your
friend they are the people that you pay
money to have access to the Internet and
they're creating API is now to carry
api's are typically limited to that
carrier and they're typically around
Billy messaging and location services so
there's a group related to the whack
that's working on this and the whack is
working on this too
but also the carriers are spinning off
their own api's and so they have billion
api's where you can imagine if you a
good example Verizon recently launched
an app store and if you build an app for
Verizon's Android app store you can rely
on their carrier api's to do in-app
purchase billing on Android on Verizon
only so if you do that you get the
privilege to pay them 30% of your profit
and the bill will show up on someone's
credit card along with their phone bill
so there's carrier api's they exist they
also have messaging API so you can
direct message people which may or may
not be useful if you're only targeting a
particular market with a particular
carrier this might make sense let's face
it it's generally a duopoly in any given
country so carrier api's could make
sense
and then finally location services is
another angle so your carrier not only
knows where you are they're willing to
sell that information to developers good
news okay so installable web apps is
another concept that's worth knowing
about this one gets shown sometimes
people don't like it
I don't love it either I think it's a
bit of a bummer term it's a term worth
knowing
it's definitely related to device API is
how it works is pretty simple it
suggests the idea that there's a
distribution model it suggests that the
API or the phone the app is installed on
the phone so it's not being hosted it's
not it's not living on a server it lives
on the device and it suggests a security
runtime model w3c widgets tried to
address this it it does in some forms
there's a permissions as a permissions
element on a config.xml which is a part
of this Chrome Web Store also tries to
address this it has its own config JSON
Mozilla web apps actually don't live on
device they live through the cache
manifest on device but they have an
analogue to this and then finally phone
got billed if you think about it might
be the idea of install the web app so
phone got billed as a cloud-based
service that we have for PhoneGap which
I'll show you more later so installable
web apps keep that in mind it's the idea
that the web
runs on the phone okay here's our first
API you've probably seen it before you
haven't seen it written like this
so the w3c doesn't want to hang
everything off window and navigator so
they created a geolocation namespace
thank God and there's some interesting
stuff going on here so they've got their
own namespace suite and then they ask
get car position and it's it's almost
like a question and saying get kerb
position if you can cuz it invites the
user to have a modal dialogue that says
do you mind if this web page knows where
you are and then there's a success and a
failure callback but I don't like typing
so I was called win and fail and I'm
totally on the comma first bandwagon so
so there you go and that's our app
pretty simple stuff PhoneGap implemented
this after Google gears but we were the
first before any browser now this is
generally available that's a really cool
thing
spatial services aren't the only thing
that's coming in device api's we're
seeing now the vibration API so PhoneGap
has a vibration API in the first example
we're gonna vibrate for a thousand
milliseconds or one second the second
example we're gonna do the exact same
thing in the third example we're going
to kind of pulse it will vibrate for a
second it'll vibrate it'll go off little
vibrate for half a second then it'll
vibrate for two seconds
my gratuitous slide about vibration API
is you were all thinking it anyways it
doesn't matter what are you gonna do
with a vibration API this is the part
where I tell a story about a guy named
Rob Ellis so Rob who I hope is watching
when we first created PhoneGap this was
one of our earliest api's it's not
because we're perverts it's because it
made sense and it was a simple API to
create and then we thought well what can
you do with a vibration API besides the
obvious and we were trying to think of
something cool he's like I know I know
we could recreate this game cuz we
already had the accelerometer working we
could create this game where you got to
shake your phone and the longer you
shake it you'll
if you're leveling up it'll vibrate like
what level you're on so if you're on
like level 10 it'll vibrate ten times
and so you can imagine what that game
look like it never made it into the App
Store so there's a bunch of geospatial
API is available now accelerometer
gyroscope magno meter I always think
these things sound like superheroes or
possibly like superhero abilities
they're just geospatial api's they let
us know where we're at and so Apple
forced their hand on this there was a
whole bunch of different standards than
Apple came out with their own but
generally this is what you're looking at
if you're gonna implement anything
that's using device motion pretty simple
acceleration including gravity really
does read a lot like objective-c
which is fine so this is where stuff
gets interesting those are those are
kind of boring api's those things don't
really manifest in our user interface
they have huge impact socially but
whatever so now you have a web browser
and it knows where you are where you're
moving your rate of change possibly even
what floor of the building you're on no
big deal also turns out your browser
really soon is going to be able to turn
on your camera and look at you or
straight out the front so media sensors
or the media capture or the media
streaming API is our brand new business
and this stuff is super cool so there's
two sides to it there's a declarative
side and there's a programmatic side a
declarative side is actually fairly well
realized you can use this stuff today
and a bunch of different browsers you
essentially say input type file one
image is it's going to invoke the camera
application on your phone this is
awesome because there's actually an
implicit permission here the file API or
input type equals file was like our
earliest kind of inkling into what
permissive API might look like this is a
really big deal to think about as
developers because if we're letting the
browser access our location and our
cameras and then possibly our contacts
in our file system there's gonna have to
be some kind of runtime security model
and we have to think about how that's
work declaratively if we declare a hey
here's an input and when this person
clicks it then we're gonna ask them do
you have a question yeah it'll work on
Chrome for sure I can't speak for Apple
I have no idea oh so the question was
will this ever work on iOS in the
browser
I imagine eventually it will it'll work
in PhoneGap through the programmatic API
I can't speak for Apple I don't know
what they're doing with their browser
why don't we save the questions for
later let me well ok give it man all
right do it do it all right but can
someone grab me a beer if this guy's
gonna ask me a question that's my tax
parched oh man you're killing my
presentation here just let me get to it
D sure all right so moving on input type
file implicit security model you can get
at any device that's on your whatever
your runtime environment so there has to
be a programmatic analog to this we
can't just have a declarative analog or
a declarative API because we're gonna
want to get at the actual pixels that
are being captured and it's going to be
through a streaming API and this is
fascinating so right now there's a
lot of people pissed because there's -
WebKit prefix and CSS and people are
pissed because there are a lot of other
browsers and WebKit on the mobile web
which is fine the developers are only
focusing on WebKit because they're only
focusing on WebKit we're seeing a
proliferation of sites that have a
substandard experience for mobile on
alternate browsers on
in operating systems and so if you visit
a site like pretty much any site in
fennec which is Firefox's mobile site
mobile browser for Android is gonna look
like even though they implement a
lot of API is that you'll see in Mobile
Safari it's the same story for opera and
so opera just recently decided to draw a
line in the sand and it
they started implementing - WebKit
prefix on CSS and so this is divided the
community obviously this is a problem
it's a huge problem because it's not
fair to opera and it's not fair to
Mozilla and it's not fair to the open
web that developers are choosing to
implement against a particular browser
when the idea of these beta features is
that they're for testing and so whether
it's right or wrong I'm not here to
debate all I want to point out is now
that shit's coming to JavaScript yeah so
and this it's not yeah this is it's
gonna get real and so I don't know what
the answer is
I really don't I'm just here to point it
out and so getusermedia
the idea this is kind of like the the
programmatic API this is where it's
evolved to in order for it to be vetted
completely everyone's implementing in a
different way to do it and they now
brought vendor prefix in into the world
of JavaScript suite so you're gonna see
code that looks like that more and more
for sure Rick Waldron wrote a little
library which is completely we're
checking out this is a gist of it and
really I just linked to like the main
part so I went in and I really wanted to
try to get user media on on my laptop
and check it out and so I spent the
better part of the day playing with it
and I can assure you it is not ready for
primetime but it does work it does kind
of work anyways I'm gonna go to Chrome
Canary so
you go to about flags and chrome so
first of all do you write front-end code
put up your hand every buddy
here writes front-end code
do you have Chrome Canary installed
every one without your hand what the
 it's all chrome canary cuz there is
a lot of cool to do here so if you
go into Chrome Canary you can enable or
disable a whole bunch of media
streaming is what I'm interested in if I
could spell enable media encrypt media
no no no enable media stream so this is
the bad boy once you so you go about
flags in Chrome Canary or chrome dev
channel Chrome Canary is where it's at
though and then if you go to West Coast
logic hacks media capture in theory I
would see myself right now
I gotta restart chrome good call bail oh
no I failed twice I just start my screen
recording again
all right chrome canary it was closed
down for Chan doesn't media capture
stuff
No
why you bummed this is the demo God's
getting angry really like ten minutes
ago it was a way cooler demo when it
worked alright so if you have by any
chance if you have Chrome Canary and you
go to that web page there's a pretty
good chance it'll kick up your camera
the whole canary build both of them you
mean maybe that could be it that could
be it yeah
do I blame QuickTime I'm not gonna blame
alright so listen we're not gonna waste
our time with this there's other
for you for me to show you you should
have seen well I'll show you what you'll
see so you should have seen I bet you it
is QuickTime man now I'm all like
suspicious
I am debugging there's no where should I
do like mobile software development is
best I have no idea what is wrong why
does he drink so much god he's Canadian
okay so what you should see there's a
video element right here you can see
being highlighted is a drip beer
everywhere and then I've included a
little mini shim which is not the
problem and then we're gonna call
navigator getusermedia we're gonna say
give me the audio and the video it
should turn the camera on immediately
and begin streaming it into that video
element and that's really it when it
works all right so yeah we have vendor
prefix in now infecting JavaScript suite
and we have the beginnings of the media
capture API which I'm sad that demo
didn't work but that's okay so we're
stoked on media capture because we
actually got to start prototyping that
stuff a couple years ago on the phone
gap project I'm gonna show you some code
there too which will probably fail
objective but that's fine
web RTC s sort of the new hotness and
the idea behind WebRTC is real-time
streaming video an audio through a Web
API this stuff is is definitely going to
be a big deal you'll be able to
implement your own chat server in basic
markup there's other API is that are
worth knowing about connection API kind
of met it's early life on PhoneGap we so
first of all what the else some
Java guy I'm certain of it anyways so
that right now we can check navigator
online and we're gonna get a boolean and
it may be wrong but that's fine because
you can be connected to a network but
not necessarily be doing anything on
that network and this is a lesson we
learned in the PhoneGap project so we
created all these awesome network states
that we can introspect through the
native API s on all these different
platforms so not only can we tell if
you're online we can tell if from a
Wi-Fi or if you're on 3G or
edge connection this is really useful
and content negotiation if you're
dealing with a video type of
implementation where you need like
either high quality or low quality you
can choose how to negotiate that content
based on the connection type only
problem is and this wasn't actually a
problem in Canada it was a problem here
in the United States in particular with
AT&amp;amp;T we realized that carriers lie like
you're on 3G 2 kilobytes an hour so the
carrier connection isn't the way to
introspect this we need to actually do a
round trip of our own and ascertain how
many kilobytes per second or actually
flying along the wire so this API will
change but this API is in kind of
prototype phase in the DAP and and it's
in PhoneGap today but we've realized
that shortcoming it's good to know if
you're online or offline but it's pretty
much useless if you're online and you
can't transfer any data and so
connection API that's something you can
look forward to another one and I love
this story because this one's awesome
battery API it's sort of interesting to
think about the idea of having the
ability to know if a phone's about to
die we can do a whole bunch of stuff we
can backup data we can make we can
prompt the user and say hey listen
you're about to go offline do this
important thing that will save the world
the only problem of the battery API is
it drains a battery like a
and so you are constantly pulling the
battery we need a better API for that so
we've got it in PhoneGap but we look at
it we're just like this one's just a bad
idea all together so if you're pulling
the battery you're using the battery and
you're killing cycles using it so
probably better to have a things are
about to die event as opposed to a pole
constantly event app life cycle events
this is something that's only in
PhoneGap and is just landing in Chrome
can't remember what Chrome has but
there's like a tab tab active something
like that if a tab is active or not this
is fairly new new thinking but imagine
so in PhoneGap we've got something
called device ready that's when our
bridge is available or the foreign
function interface
Queen the code that's native and the
code that's that's not once the device
is ready in think of it as firing like
just after Dom content loaded or a Dom
ready so you're ready
then we've got pause and resume this is
when you're either background it or not
which is also interesting and useful and
it's it's relevant to the desktop
context sometimes you're on a tab
sometimes you're not there's no point in
wasting processing power if someone's
not looking at the pretty animation
you're creating contacts API is one of
our earliest api's we were really kind
of goaded into doing it people really
wanted contacts in the browser and it's
a powerful idea because your contacts
are probably a real social network the
actual social graph lives on your phone
the people you really talk to I mean you
don't really talk to anybody that's on
Twitter or whatever so we implemented
this API we don't love it it's got some
weird stuff there's a I love that
there's a typo here but who cares so
you've got an options object why we
didn't use an object literal it's
probably because there's something
called web IDL which is the bane of
JavaScript but whatever you pass it to
your contacts fine method you get a
success and callback object and you can
read the contacts off the phone this
exists today in PhoneGap and an boot to
gecko powerful idea filesystem API so
there's there's a few there's the file
API there's filereader api there's file
writer api and then there's the file
system and directory API I'm not sure
why it had to be like that that's how it
worked out it's asynchronous and so
you've got a lot of calls that have a
lot of callbacks and so you go through a
lot of async ceremony to read and write
files the good news is we can read and
write files off the filesystem file
reader existing in Chrome the file
writer is yet to happen PhoneGap has
this and it actually extends it with
some other ideas called file transfer
which allows us to broadcast files
across the network so useful stuff
probably begging for a UNIX e wrapper
anyone here wants to write a micro
library so I've talked a little bit
about boot to gecko I actually happen to
have on the phones we're super bullish
on this device we believe deeply in the
idea of webOS we're waiting for the day
when that is open sourced fully
booted gecko is Mozilla is attempt at
the same idea this is a web browser
that's first-class operating system and
it introduces what they're calling web
api for now and web api tackles all the
problems that PhoneGap had and a whole
bunch of other ones because they've
decided to go for the whole thing
they're doing an entire operating system
they're doing in the open so there's
things around telephony and SMS screen
orientation which is an interesting API
settings so like you could have settings
across different apps why not have the
unified API for that instead of using
local storage resource lock so resource
lock is things like if I'm playing a
video I don't want to sleep the screen
make sense and so we might want to allow
the browser to do that kind of thing
power management API so like literally
to be able to control the brightness in
the ambient light of the screen
well connection API would be the kind of
future of the networked API sensory API
could be things like proximity sensor so
as your phone gets closer to your ear
we'll know it's actually touching your
ear and then a whole bunch of other
stuff so this needs to be checked out
because everyone here is really excited
about html5 and you should be because
that's exactly what's happening right
now this is good technologists what we
really want to know is what's gonna
happen next and this is a excellent
window to that future so there's another
window and I'm not here to pitch you I'm
just here to show you this so
recently PhoneGap came into the Apache
Software Foundation and when we joined
Apache they told us that we had to adopt
a new name that was agnostic from all of
the trademark infringement and problems
that we may or may not have so Apache
Cordova is our new name and Apache
Cordova is the open source analog of
PhoneGap and Apache Cordova means
nothing different than PhoneGap itself
PhoneGap is a distribution of
Apache Cordova sometimes people struggle
with this idea it's really simple
there's WebKit there's chrome same
so patchy Cordova is the open source
realization of PhoneGap and our whole
deal this year has been plugins
we've never fully documented how we
implemented PhoneGap itself and we've
just started to document that stuff
PhoneGap - we're gunning to release
around July 20th I'm not gonna make that
full promise but it's gonna happen in
that timeframe and when that happens the
plugins API will be fully documented and
anybody will be able to compose a
PhoneGap of any device API as they want
and so today if you go to dock stop
phone gap comm you can see whoa where's
the edge what's up here so you can see
our latest kind of like set of API s and
they're all device api's that we care
about those are just plugins and so we
implement these api's for every platform
like we've got the camera API and you
can take pictures using javascript suite
a javascript and then there happens to
be you know a few quirks here and there
platform the platform not many so all of
these API is that we offer run on iPhone
Android Blackberry and to some extent
webOS Symbian cute well they also all
run now on Windows Phone 7 but we
realized really quickly that a lot of
people wanted to build their own api's
and we didn't want to build all the same
api's they wanted to build and that's
why our plug-in API is coming out
because we think that there's a whole
future of device API is that we haven't
figured out yet and so we're just going
to enable people to do that for
themselves so should we give her a go
should we should we give PhoneGap a try
is actually want to see some code
probably
okay so this is Xcode it's apples answer
to eclipse same fight makes me want to
cry so I'm gonna I'm gonna show it to
you guys from the beginning so we're
gonna go a new project and you get this
once you install PhoneGap you get a nice
kind of little dialogue it's like new
cordova based application you get the
little Cordova robot it's a cute little
guy we give it a name like whatever
and I'm gonna uncheck automatic
reference counting
I'll just do this on the desktop it'll
generate a little project for us I'll
pluck whatever we're gonna kill this
Xcode that's alright the first time we
run this guy no really the first time we
run this guy it'll fail and the reason
for that is we use Xcode templates to
generate this project and Apple didn't
document Xcode templates and so yeah I
can't find the WWE folder which is a
huge bummer but it's okay cuz we still
generated it it's on the desktop we just
have to tell it where to find it
just also to say that I need to find it
there it is whatever
ww folder and so ironically when we
created PhoneGap we thought it would be
so cool to have a WWF older because
apache did and now we're part of apache
which is kind of cool so here's a
PhoneGap app in its fullest realization
so lets fullscreen that if eclipse could
look like itunes it would look like this
alright so this is w w folder and this
is the one thing that every PhoneGap
project shares they all have a w w
folder and it may come as a surprise to
you that in that w w folder you put HTML
CSS and JavaScript in ours we got a
bunch of comments and a bunch of crap
then we got an h1 hey its Cordova sweet
and so if we run this bad boy it's gonna
compile it's gonna kick up an alert and
say hey it's Cordova and so we built an
app for iPhone in a few seconds which is
pretty cool this same codes portable to
Android Blackberry Windows Phone webOS
simian
wherever so yeah so that that's cool but
that's just iPhone what if we want to
get it on a blackberry say that might be
something worth doing we can go through
the exact same song and dance and we can
kick up an Android emulator but we've
only got an hour so we can't wait for
the Android emulator start so I'm
instead going to show you on an actual
phone it's so true so just say such an
easy joke it's like punching a baby in
the face all right so I know chrome
canary do not roam care has been failing
today on remembering my passwords all
right Hilda PhoneGap calm just pummel
the network with a hundred tabs of
strange pornography and the other stuff
yeah all right so this is build-up
PhoneGap calm and this is where I get
cheesy I'm like we put PhoneGap in the
cloud it ain't like that so here's the
thing
you can run PhoneGap yourself on your
machine but you'll have to install two
operating systems and eight SDKs and
you're gonna have to learn them all and
that isn't my problem that's totally
yours if you want to deal with that
problem in a much more sane fashion you
can use build up PhoneGap comm where we
put PhoneGap in the cloud you can give
an app any name you want who cares
and then because we're nerds you can
create a git repo and push to us you can
get us to pull from your git repo or you
can upload a file if if you're so
inclined
komm brown Roux hello duck get so I've
got a HelloWorld on github and yes
there's an error with iOS I have to give
it signing keys but I've just queued a
whole bunch of servers to compile an app
for me
and then once that app is compiled we'll
just go to this one here because it's
easier
we give you QR codes to install it on
your target device which is pretty handy
so so I've done that but I didn't do
with that hello app I'd actually did it
with a different app and I was playing
with media capture earlier today and get
a photo share client so I built I built
uh I thought a billion dollars for an
app was a pretty good deal and so I
thought I would build an app for for
taking pictures and so this app relies
on our camera API which predates the
media capture API the media capture API
kind of came out of this thinking and
the idea is that you can use a camera on
a in a web browser on a phone not a huge
leap so well jump in here and this is
the magical incantation that makes it
all happen this is kind of thing with
async programming you have to work your
way from the bottom back up and so
ultimately what we're gonna do is take a
 picture to get there we're gonna
have to click a button and so the snap
function it's gonna go hey take a
picture and if you succeed in taking
that picture call this upload photo
method and so over here in the upload
photo method we're actually using our
file transfer API to go to this
horrendously named Heroku app and I you
know I don't know who's working at
Heroku but deep flower 8 3 2 1 so if you
go here we've got this cheesy photo
sharing app and this is where things get
risky because now everyone in this
audience has this URL and
yes if you have an internet-connected
device you too can upload a file so I
can go here and let's take a look at
Brian LaRue's picture folder very very
briefly there's a lot of good stuff in
here
I gotta be super careful actually that
one's good I don't think I would
followed the semicolon debate it works
ok you get the idea so that website
works but then check this out so I've
got this client out that posted that
site by the way is also in github if you
go to github
Brian the Roo get a photo share it's not
ghetto photo share client but get a
photo share like I haven't touched it in
a while eight months it's sad it's a
little tiny node app it's got two
methods it shows pictures and it uploads
pictures that's all it does
it's Edie Shaw working the keyboard over
there there's some heinous stuff being
uploaded to that site right now so okay
whatever you people are doing to my
website I don't want to know but I so I
took that ghetto photo share app the
client app and this uses that precursor
in the media capture API and actually
anybody here could install this if you
can get your get your camera on that not
an iOS the Android only you would have
to give me your your signing keys I'd
have to provision your device cuz
Apple's awesome so awesome that they do
it that way so there's p2v2 all-union
take a picture sorry man
you going for the Windows Phone the
iPhone it won't work unless you give me
your signing keys
I would question the logic of doing so
PTV where are you I want to show you my
I'll show you my phone because I've got
this okay so there's my photo sharing
app on my iPhone and then if I hit
capture image it calls the snap method
which invokes the camera application
which then I can do something
interesting you guys it's super not
interesting good enough
and then it's gonna take its time over
the network and it tells me image
uploaded successfully depending on what
happened now back in my photo sharing
app
there you are no one else uploaded
anything that's amazing
you didn't see the URL log it up that's
good okay so that's cool that that's
just on iOS though we shouldn't do the
same thing for Android right
trust me this is still faster than their
emulator I'm sorry there's anyone here
from Google it's true though okay we're
not gonna do a system update not yet
and this guy was called ghetto photo
sure yeah g-get - so kick up that up and
it's kind of the same out same code and
we click our button and yes my user
interface skills are poor fantastic took
a picture it claims it uploaded it
successfully we go back to this page and
there it is so that's cool I can't
believe no one else is uploading
anything there it is your window
so same sort of like song and dance will
work for Windows Phone and Blackberry
the media capture API is not complete on
webOS and Symbian but that's okay
because very few people here except for
Ben have a webOS device no one's
laughing they're all like that hurts
still it's gonna open-source soon man
wrong slide deck okay so that's that's
PhoneGap in PhoneGap build just a very
quick recap for everyone here we have
the ability to turn on the front facing
camera on a device we can access all the
contacts on that device we can also
email them silently I can back up all
your data before battery dies we can
synchronize that data we know what
building you're in and in fact we even
know what altitude you're at so we could
probably guess what floor you're on and
in which direction you're traveling so
there's some challenges in device api's
security might be one of them
big part of freedom is privacy and
there's also permission so we might want
to allow people to do this stuff but a
modal dialog that says hey can I access
your location might not be the right way
to do it because once you've said yes
website you can access my location this
one time you might not want to let them
do it more than once or you might want
to go back and know which websites
you've granted so this is a huge issue
for the w3c
there's also capabilities and so if
we're writing an app that depends on the
fact that you have a front-facing camera
what if you have a device that doesn't
or what if you have a device that might
have a front-facing camera when
something's plugged in but doesn't at
other times and so you have to be able
to negotiate what capabilities the
device has or you know what drives are
available or whatever we have to
introspect what devices are available at
what time performance is still a huge
problem we don't want a battery API that
drains the battery makes sense and so as
the courage wolf would say that
just doesn't kill he was going to die I
think that was like my way of saying
that this isn't the end what we're
hoping for is that people will help us
work on this problem for the web to be a
first-class platform there's a lot long
way for us to go the web versus native
debate is silly it's not whether or not
the web can do something it's just
whether or not we want to get to it and
these problems can be solved PhoneGap
gives us a platform to prototype it so
does boot to gecko so does webOS so yeah
there's a lot of stuff to be done and we
need help</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>