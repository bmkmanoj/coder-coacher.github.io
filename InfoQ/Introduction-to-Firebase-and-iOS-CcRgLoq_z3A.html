<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Introduction to Firebase and iOS | Coder Coacher - Coaching Coders</title><meta content="Introduction to Firebase and iOS - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/InfoQ/">InfoQ</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Introduction to Firebase and iOS</b></h2><h5 class="post__date">2015-12-04</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/CcRgLoq_z3A" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">thank you all for coming out tonight my
name is David Easley i said i work at
firebase and tonight i want to talk
about something a little bit important
before we get going so it's monday i
take it that none of you are big
Cincinnati Bengals or houston texans
fans or otherwise you've been watching
Monday Night Football but if you so
happen to be following the game through
any capacity let me know if Andy Dalton
scores because I need like eight points
and my fantasy league to win and I'm
playing against my brother so like that
would be really cool especially no on
camera that I beat him so I'm really
looking for those bragging rights but
tonight I want to talk about how what
firebase is and how we can make apps for
fire be how we can make apps for
firebase so I'm going to be doing a lot
of stuff in this talk and I'll send this
link to and these slides out later but
this right here is a great article that
I all kind of narcissistic to call it
great since I wrote it but the websites
right Wonderlic com if you've heard of
rain wonder looks calm you know they
have just amazing iOS tutorials and I
was privileged enough to have them let
me write an article for them and so it's
all about getting started with firebase
and it basically covers this in like way
more of what I go in tonight so if
you're really curious this is this link
will get you there so tonight we talk
about firebase and how we can use
firebase to build apps fast and it will
build powerful apps fast and then scale
and so to really talk about this I want
to go to a story of one of our customers
that's been really interesting so one of
our customers is sky news and they're
one of the biggest news companies in the
United Kingdom and they had a really big
challenge last year and they had to
cover the UK's general election so does
anyone here actually from the UK ok so
the way elections work in the UK is so
much cooler than the way they work here
in the United States so the way it is
the United States like it's kind of
confusing and all
like boring like every four years we
have the presidential election and every
two years we have midterm elections
where all the representatives go up for
election but only like a third of the
Senators and it's confusing and it
probably explains why not why not
everyone votes but in the UK it's so
much more cooler so if that more cooler
but all right it is super cool so every
five years everybody gets fired like
absolutely there's not a single person
in the house of parliament every five
years so like this isn't even just like
oh haha you're kind of fired no they
like make you pack your bags and leave
like the entire office is empty so
there's pretty much no one running
Parliament's for 25 days so if you are a
member of parliament you have 25 days to
convince everyone that you should be
elected again and what's cool about this
is that the entire house of parliament
is up for an entire scramble so this is
like the equivalent of like The Hunger
Games for politics like everyone is
fighting for power and if you're a voter
this is super cool because this is
really interesting and you get it's a
total fresh start for your for
essentially the entire house of
parliament but if you're sky news this
is a pretty big problem because you're
provided with a short time frame to
build an app that covers the election
and this happens every five years so
like what are the chances that your app
from five years ago is you know still
good today I mean five years ago they
weren't even making apps and they came
to us because they told us we want to
build a system that beats TV I want to
give everybody a better way in the
fastest way of seeing election results
and provide our users with the most
immersive experience because it's not
enough anymore to just be on TV or have
a newspaper or whatever you have to go
to where the user is which you know
we're always on our phones so they built
a mobile built a mobile web app that
essentially was this map with all these
hexagons representing each district in
the United Kingdom and when the polling
it's changed the map color would change
in real time and you can click into that
and you could see all of the real time
voting and each district in real time in
d and overall all in real time and this
is went over really well for them
because on Election Day it would end up
being the most watched general election
in UK history and millions of people
came to their website that warning and
at any given point in time you could see
500,000 people all I got concurrently on
their app and all of this was powered
through firebase so they were able to
build an app and just focus on their
user features and not care about writing
networking code writing server code or
maintaining any server deployments and
just focus on the things that matter and
build it fast on a short time scale a
time frame and then scale out to
millions so that's really what I want to
kind of keep in your minds tonight
that's that's what we're looking to do
is we don't want to be bogged down by
lots of networking code or lots of other
things you want to just build the things
that the user cares about so firebase
has three main features that allow you
to build fast and scale and the first is
user authentication so the centrally not
writing any of your own login code and
using firebase to do all that for you
and then also there's the real-time
database which is a lot of the magic of
firebase this is cloud hosted so there's
no setup involved for you and there's
also static hosting which is great for
building single page applications as
well as app landing pages and so now
we're going to focus on mostly user
authentication and the real-time
database so throughout this we're going
to be building a grocery list app and so
everything that I'm going to be showing
just think about the data that it would
be in a grocery list app or think about
how you would integrate this into an
appt yourself so we'll start with the
real-time database and this is this
really cool graphic is one of my
favorites so essentially the way the
real-time database works is is that when
you have a farm ASAP and it updates the
server
database every single client so every
other device that is listening gets that
update pushed down to them and
essentially what you need to focus on is
how it gets pushed down to them it's not
a request response protocol so things
like pull-to-refresh they don't exist in
firebase apps because the view is always
up to date so we don't have to do any
requests out to the server we're getting
updates delivered to us and so the way
you connect to a firebase is you and
still we have an iOS SDK which you can
install via cocoa pod so if you're a
cocoa pods user actually out of
curiosity you raise your hand if you use
cocoa pods good people love cocoa pods
all right so after you've installed the
SDK you have access to this fire base
class and this is where actually the
majority of your firebase code is
there's not like a ton of types and
classes to learn this is this is
actually like ninety percent of the time
you'll be using this class and to create
a reference out to a database so
essentially a connection you create
initialize this class with a URL and
this URL is given to you when you create
an account and this essentially points
at a location in firebase so my name of
my firebase is grosser app and then my
location I'm pointing at is the grocery
items so I can actually stream or save
data to this / grocery item since I made
a connection to it it was important
understand is and this is truly like
once you understand this magical things
start to happen you if you know that all
the day that's being stored in firebase
is just a JSON object and that's really
it and so since this is JSON object
every single piece of data in the
database has its own URL so it's all
completely restful so let's take a look
at a piece so this could essentially be
the data in a firebase database so we
can see at the very top there's comments
on each level of what the URL would be
so on the top one we can see that that's
the root and so if we wanted to get data
from there we would get data from
everything else underneath because
that's the tree but maybe we just want
to get the grocery
items well / grocery items are all the
grocery items and maybe we just want to
display a page of the milk well /
grocery items / milk just gets you to
the milk and you can see it even maps
down to each individual property name so
if you have a piece of data in firebase
it has a corresponding URL and when we
plug these into firebase references this
is how we can save and sync data and
there are multiple ways of creating
firebase reference and you can use a
full string to get out to the data or
you can programmatically call child by
appending path to create child
references that go to the child
locations so that's how we actually
store data in firebase and that's how we
create the reference but saving data is
pretty simple so in this case what we're
doing is we're creating another firebase
reference and then we're storing it at /
grocery items / milk so we're just we're
just connecting out to the milk and so
what we want to do in this case is we
want to say that it was completed we can
call set value and we pass in a
dictionary and the key value is
completed false and then now we can say
that this milk hasn't been bought yet
and so that's saving data it's pretty
simple and the real magical part of all
this is syncing data so we're so rather
than connecting out to one item we're
going to go back up the tree and we're
going to go to / grocery items and at
this point we're going to synchronize
data and to synchronize data we call the
method observe event type and we can
specify what type of events we're
interested in listening for and so in
this case we're using the value events
and the value event is sort of like your
catch-all so anytime anything happens
something gets added deleted changed
really anything you'll get back the
object in its new state and this
Couture's to you in a snapshot which
just isn't just your data it's also a
lot of helper methods that help you
iterate on your data or get metadata
about your data and if you do want the
data its you just call the value method
and it returns to you as a dictionary of
string any object this is for swift
obviously
so this is really cool like you know you
guys are actually believe it or not like
what I've been up here for like 5-10
minutes you're pretty much firebase pros
like that is as simple as it is so like
come on slow clap let's do it all right
so that's pretty much like that is the
most of stuff you need to know like I
have a JSON database I can save data I
can sync theta like I know how to bill
if you know how to build an iOS app you
can go really really far with that so
with having a great connected app though
like what happens when the you know
connection drops like there's usually a
lot of times when we when the internet
goes out on our apps we can usually
present them with a screen being like
oops don't have internet come back later
but with firebase apps it's a lot
different so we have full support and
offline so how your app would work
online it works pretty much the same way
offline but at a local level so all the
same synchronization events all the same
saving all that still works but it works
off of the local disk so can even
survive through a pre starts so if your
app suddenly goes offline all those
rights all those all those rights all
the synchronizations they still happen
and they all save to your device's local
disk and then when it goes back online
that's when it synchronizes with the
server and then gets you right up to
date like you were never offline and to
use this feature it's not so much
something you have to be aware of its
really baked in to firebase itself you
just have to say that you want to opt
into it so you essentially say
persistence enable is true and that's it
you have an offline enabled app and you
don't have to do anything other work on
it so at this point we have seen all the
stuff we have to do to you know read
data sync data make things offline but
we saw that when we structure data
everything had its own piece every piece
of data had its own URL and if you can
use that URL then you can use that URL
and then you can use that URL and you
can use that you're okay sorry I wanted
to have an Oprah moment influence
but essentially it's publicly available
for everybody so how do you secure that
because we're only writing client-side
code so what what prevents me from just
sending a delete request to the root and
just totally wiping out your database so
we have our own way of securing things
so if your data is JSON then we have
rules that map to that data structure
that are also JSON and they can say what
can be read and written to your database
so we call these security rules and
they're essentially annotations on your
JSON data structure so right here we
have a key for foo and foo essentially
is would be / foo on your firebase and
there are three types of rules there are
read rights and validates so read is you
know who can read it and write obviously
who can write to it and validate is what
does this data have to look like to be
written and so in this case where every
single one of these has to evaluate out
to an expression so true or false and
we're saying anyone can read it anyone
can write it but if you're going to send
data to foo it better be a string and it
better be less than hundred characters
and that is enforced on the server level
so there's nothing anyone can do on the
client level to modify that at all and
you can see there's even that special
variable right here which is new data
and that is the actual data that's
trying to be posted to your firebase so
that's how we secure apps but security
is kind of hollow unless you can log in
users so next we're going to cover how
we can handle authentication at firebase
so there's multiple types of
authentication we have email and
password and we also have third-party
providers like google facebook twitter
and github so that handles a lot of your
OAuth flows and out of curiosity how
many people have written their own oooff
server before that's why you're all so
happy it's not fun so this is also
pretty simple we create a connection out
to our firebase and so far based
database and we don't have to supply any
types of like paths of child paths at
the end because we just need a
connection we're just logging the user
against that firebase database and this
is email and password and all we're
doing is we're logging in someone by
passing in an email and their password
and when the server gets back to us
it'll either return to us an error or
the user so we can guard against that
user and see if regard against the air
and if there's an error we could log it
do something off of it or if that error
is not there we have an authenticated
user and that's what the off date is
actually a type called f off data that
contains all the information about the
user so if it's email and password you
will get their email and you'll have a
unique identifier for them but if you
choose any of the social providers
you'll also get you can pass in scopes
to get in social data so depending on
how flexible this the social provider is
you could get back their email you could
get back I think Facebook you can do
stuff to get back friends and so you can
get back other information with Twitter
you get back their twitter handle and
stuff like that and what's great about
this is once we can login users now we
can write really robust security rules
so this is a really small snippet of
security rules but it's probably one of
the most commonly written in all fire
based applications because essentially
what this rule says is that if you want
to write data to the users node you
better read or write data you better be
that user and that's all it is that so
it's great about this is that we say
okay we're secreting rule for users and
then we have this dollar UID and that's
essentially just creating a variable I
could call out whatever i want to but
dollar you IDs just makes the most sense
and then now i can check against a
special variable on the server called
off and i can say if that you ID which
essentially is kind of like a route
parameter so it's variable to whatever
users / whatever they're trying to
access if its users / that you ID equals
the currently logged in user on the
server you can read or write to it and
that's absolute user base security and
just small
mount of code and what's great about
that too is that that's all the security
code you have to write you don't have to
write anything else is like I used to
write lots of back ends where we would
write security code and like 16
different places and then we'd have to
update the rules and you'd be like okay
let's weed them all out and then you
know one never ends up being like all of
them so this is just one place to
there's one place to write your security
rules yeah so the user is synchronized
against the so the user is synchronized
on the client and the server so it's the
same identity throughout both so you so
it's so if you don't have to worry about
keeping track of multiple identities are
you talking about being like logged in
through like a different accounts so
yeah you could create a location that's
just maps who so if you want to login
through like four different providers
they've like we have a sample on every
platform of how to do that it's pretty
simple to do you just save one common ID
for all of their social login IDs and if
it matches that when you're trying to
let you can write a rule that does that
as well and it matches who they are so
you could so feasibly you could log in
with every single social provider and
email and password and it would bring
you to the same data with the same
identity yes you could do that yeah yeah
the rules get a little grow a little
more and you do that because you have to
write more checks but it's still totally
possible and it works more or less the
same way as this so now that's pretty
much how like the the fundamentals of
firebase it's reading data writing data
structuring your data and logging in
users and it's and that's pretty much
how you do but we kind of did that by
itself in a vacuum we didn't really look
about how that actually applies to
firebase I like however eyes their iOS
apps so if you're an iOS developer
you're pretty much spending every day of
your life with you I kids and a lot of
them probably then you know the number
one ask question for firebase and iOS
and stack overflow is how do I
synchronize data to a uitableview
because pretty much ninety percent of
the app store is a UI tableview
controller so it's pretty much we're
building all day long and doing this is
really easy so we just subclass the UI
tableview controller
create a firebase property and we create
our data source which in this case is
just an array so beauty you did load
this is where we would create our
firebase instance since you can't rely
on in its with the view controller you
can do all your initialization
initialisation stuff and viewed it load
and then what we can do next now and
viewed it appear this is when we start
synchronizing data because we don't want
to synchronize and viewdidload because
you may not be on the screen all the
time in viewdidload and you want to be
very cognizant of the users battery life
so if you'd only synchronize when you're
actually on the screen then you're being
a good citizen so in this case we're not
using the value event when we're
observing we're actually using the child
added event and child added is different
than value so with value every time
anything changes something gets added
something gets removed a property gets
changed you get that entire updated
object back with child added it's an
event that's used for maintaining lists
so every time something gets added
underneath a path and firebase you'll
get just that single item added which is
really great for when you want to see if
something gets added to a uitableview
and in this case whenever a new item
comes in we can create a grocery item
from the dictionary we append that to
our local data source we create the NS
index path that the UI tableview demands
of us and then we just insert it into
the table view and then in real time
that gets added to our table view and
this essentially eliminates
pull-to-refresh because your table view
is constantly up to date and so if you
thought that was hard which we did at on
firebase so we actually went out and
built a library called go back a library
called firebase UI and so you can see
this up on github it's get up calm sauce
firebase / firebase UI and essentially
what this is is bindings for UI kit and
firebase so you create something called
a firebase data source and you pass in
the datastore we fasten the firebase
reference and your table view and at
this point then but the data source you
just call populate cell
with block and what this does is it
returns to you your UI tablecell
uitableviewcell and your data from
firebase so when they're paired up
together you just populate the cell with
any changes and this works for every
single and we synchronize every event in
firebase so there as you saw you sell
value you still child added there's also
child changed and child removed so
there's different ones and we actually
keep track of every single one behind
the scenes and that keeps your UI
tableview and completely up-to-date and
there's even other ones for for
uicollectionview as well another thing
is a segue so essentially when we login
users we want to be able to say I logged
in now go to this page or go to this
controller so we really want to be able
to trigger a segue after we sign in and
to do that we essentially could create a
ID action we say login did touch and at
this point what we'll do is we'll login
that user we can guard for an error but
if it was successful and we got a user
back we can call perform cycle with
identifier and go to our desired view
controller and one thing you might
notice here is in the sender we usually
want to populate that with data we
actually don't have to put anything in
here we don't actually pass in the user
and that is because when we intercept
the segue and prepare for segue we can
we grab the destination view controller
and then we can populate it with ever
properties you need but you can see here
we have refs auth data so whenever a
user gets authenticated with firebase
who they are is available on every
single reference you create no matter no
matter how many you create or which one
or credit that Authenticator you're
authenticated user is always there as
long as you're logged in so the last
thing last service to talk about is
hosting so far base has a hosting
product for hosting servers for static
hosting and since it's all static like
HTML Javascript CSS image files we can
actually back these by a CDN so it
doesn't actually really matter where
your website is in the entire
world it will be served by a local pop
in that area so if someone is in New
York or someone is in India it'll serve
from the closest pop from them and this
is for every single file that's hosted
through firebase hosting and also it's
pretty cool is so firebase requires all
ssl traffic to be used we don't there's
no there's no hgp it's always GPS so our
hosting service gives you a free ssl
certificate that you don't have to set
up just right out of the box and this
works really well when you're trying to
build a single page app or whether
you're trying to build an app landing
page and my favorite part about actually
using firebase hosting is the fact that
you can do it all from the command line
and its really like you know two lines
of code to do a deployment the first
thing you do is you would call firebase
and nits and that's just that's kind of
a one-time thing sets up your firebase
it'll tell you when it's done and then
at that point you can call firebase
deploy and that right there just sends
it out and you're pretty much done once
it finishes uploading that's all you
have to do so another thing I actually
was one of my first projects on a first
joint firebase was redoing all the
documentation so we're kind of a
documentation first company so when you
go out you see all this and if you're
excited and you want to build something
on firebase the documentation at
firebase com is not really going to let
you down we are kind of like obsessed
with making sure we have great
documentation so if you go too far
viscom / docs you can see that we have
whole doc sets for all the platforms
that you can write with firebase and if
you go into iOS there are multiple ways
of figuring out information we have a
five minute quick start so I'll just
teach me how to install it and do some
of the basic things that I taught you
guys tonight but if you really want to
get a deeper you can click on our guide
and this will take you through one
through eight of how to do pretty much
zero to 60 with firebase so if you went
through this entire guide you would be
like a pretty advanced firebase user and
a lot of times when you learn of a new
technology you rely a lot on outside
tutorials
because the documentation is all that
great you're not going to really find
that a lot with us we have a lot of
information on her stuff and even to the
point where you have a full API
reference we have a lot of example apps
and pretty much throughout wherever you
go and then our website we just have
every piece of information we even have
an entire guide that teaches you how to
use firebase with watchkit so if you
want to build Apple watch apps so next
thing I want to do is kind of show you
how show you kind of like the magic of
firebase so if you go up pull your
phones and go to this URL you're going
to go to a mobile web app and so I'm and
I'm going to open up an iOS app so while
this is on two totally different apps on
two totally different platforms we're
going to see some of the magic and this
is pretty much the grocery app that
we've been building throughout the night
all right oh I can see it's Eva so this
is my app right here and that's seven
right up here I can see that including
myself that there's seven eight this is
in real time I'm getting updated when
people join the app and then now people
are you know asking for bananas milk and
I can ask for stuff you check things off
you can swipe to delete so now this is
essentially you see there's no need to
pull to refresh this is an iOS app you
are using a web app that essentially
does the same thing and it's a
cross-platform real-time experience I
like that someone putting you I OS app
with firebase thumbs up from me now this
is the code for that let's go back into
here
so from there if you really want to like
like I said dive deeper into all this
the rate Wonderlic tutorial pretty much
teaches you how to build everything that
you use in that app and actually a lot
more and goes really heavy into the
details so provides you with a good from
start to finish guide so I'd recommend
checking that out and so eventually
essentially what I've been trying to
show you guys tonight is that when you
build an app with firebase you can get
these things you can get these services
like authentication and real-time
database and hosting this is all the
server infrastructure and all this
networking code that we don't want to
worry about because at the end of the
day you're never going to hear a user
give you a five star app review and say
to you like while this app is so good I
can tell it uses a lot of databases it's
really great like you're never going to
get that but if you ever do get that app
review like email me with a snapshot of
it cuz I would love to see it like
essentially writing having server
infrastructure and networking code is
kind of like being a field goal kicker
in the NFL when you kick that field goal
at game-winning field goal everyone's
like congratulations you did your job
but when you miss it they pretty much
cut you from the team like the user
deletes your app so we want to spend our
time focusing on the things that matter
rather this is a user facing features
rather than dealing with server
infrastructure and the stuff that scales
so that is my talk if you have any
questions you can obviously ask me them
right now or if you don't want to come
up and say anything I am underscore
david east on twitter i'm a javascript
private variable so if you want to say
anything at all to me you can tweet um
you there so thank you all so much for
coming out tonight and I am totally
ready for your questions</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>