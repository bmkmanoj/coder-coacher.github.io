<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Digital Assets: Lessons in Securing What’s Next | Coder Coacher - Coaching Coders</title><meta content="Digital Assets: Lessons in Securing What’s Next - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/InfoQ/">InfoQ</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>Digital Assets: Lessons in Securing What’s Next</b></h2><h5 class="post__date">2017-12-11</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/hR0_QwBk_c8" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so you all decided to come in join me at
the weird talk today so this is a talk
on digital assets and Before we jump in
can I get a quick show of hands for who
works in finance today fantastic who
works with digital assets as we're gonna
talk about him today at least a few
people let's hang out afterwards or
those those are the other people you
want to speak with who owns some
cryptocurrency or digital assets awesome
we've got about a third of the room so
you participated you've got some skin in
the game and I'm gonna talk about some
of the lessons that I've learned over
the last three years up until a few
months ago I ran infrastructure and
security at coinbase one of the largest
companies in the space in the world and
one of the big themes and a lot of the
work we did was how were securing our
assets and I first jumped into the space
about three years ago when I went from
the government to work for coin base and
when we started to think about security
there in our FinTech space I look back a
little bit for how security had worked
for a longer period of time and finance
and traditionally we don't see very many
whole entire banks go out of business we
often saw financial instruments started
based on the physical space that they
could occupy so we might see money
loaded into a car could go back enough
in the world of finance and you could
only lose so much it at any one point in
time and so we might see events like
this happen every so often or we would
see bits and pieces of funds lost but we
didn't see funds lost at the rate we see
them in more recent digital asset
companies this is a screencast of what
our exchange of coin base looked like
called G Dax and money moves really
quickly in the space we can store an
arbitrary amount of money in most crypto
assets on just a few a few bytes of data
stored in RAM and that can move
irreversibly instantaneously across the
world and so we're leveling up the
stakes and security just a bit when
we're talking about how we're protecting
the funds were storing in a crypto world
so that led me to work at coin base and
over the three years that I was there we
built up quite a few new capabilities
for our company in the period I was
there we went from running
one country to about 32 countries as of
yesterday we've got 8.1 million users so
this number is shooting up really
rapidly now over the period I was there
we exchanged somewhere north of six
billion dollars and we deployed hundreds
of times per month to production so we
were still moving really fast and as I'm
sure all of you have seen the space is
still evolving really rapidly now
there's been a lot of renewed interest
in the space over the last couple of
months and as much as I wish this was
based on the fundamentals I think a lot
of what's driving some of the more
modern interest in the space is you see
how some of these assets have performed
and this talk is not gonna be about
investing or speculating I'm just gonna
talk about the tech but I think a lot of
what's attracted this interest did you
see Bitcoin up over 500% in the last 12
months right that gets some eyeballs on
it that's why you see this on TV
litecoin up even more almost 700 percent
Charlie's done a really good job
continuing to grow that and the big one
that I'm sure many of you are aware of
is aetherium 54,000 percent so I'm not
gonna ask you to raise hands but if
anybody here has done well on aetherium
drinks are on you afterwards if you want
to invite everyone else out out will
fall what I think is further making the
space exciting now is these were all
their own cryptocurrencies these are
their own block chains that took a long
period to bootstrap and build a whole
network around but what's happening now
is aetherium as a turing-complete
cryptocurrency that allows you to deploy
smart contracts upon it it's provided
new standards for you to launch new
assets on top of the etherium blockchain
and so this is a snapshot from a site
called ICO alert that shows some of the
new upcoming or recently published
initial coin offerings you might have
heard of and many of these are built on
the ethereum blockchain is a simple
small smart contract this might be a
couple hundred lines of code at most and
this allows people to very easily and
much more inexpensively bootstrap new
cryptocurrencies now what these look
like
many of them are compatible certainly
not all but many of these are built by
being compatible with the ERC 20
interface which is a set of functions
and events that you can mirror today if
you launch a contract
right a small piece of code this piece
of code can look like a small piece of
Python written in a language called
solidity that written in a language
called serpent that compiles down to the
etherium virtual machine or another
language called solidity which compiles
down to or which looks like a JavaScript
like language at compile is also down to
the a theorem virtual machine this is a
snapshot of solidity here and you can
mirror this to implement your own token
on the ethereum blockchain you could get
something up and running in probably a
couple hours worth of time rather than
the weeks or months plus the compute
power it would take and this leverages
the network and a lot of the security
that aetherium already brings and that
security it brings is at the protocol or
network layer not at the application
layer or verifying the goodness of the
contract you've written so this is what
is lowering the bar to the initial coin
offering we've seen some really large
ones recently some of the interesting
new currencies that are being built on
top of aetherium are things like augered
which builds a prediction market and
brings its own rep token built in an e
rc 20 like interface not it not exactly
that this is one of the early ones
and this'll provides a prediction market
to use the reputation that you build up
over time in this contract to ascertain
the goodness of future predictions
you'll make I think this is a really
interesting project or another one
that's come out recently called Gollum
Gollum is known as the worldwide
supercomputer and this uses uses another
token like interface to allow you to
exchange and bid on compute resources
which you can expose through a
blockchain and these are all done in a
fully distributed trustless globally
incentivized community which i think is
incredible that this can be built on top
of an open sensor resistant network for
one of the first times looking at some
of the other funding from the other side
of this that's been coming into space if
you look at venture investments and this
comes from Nick Tomino at his site the
control he took a look at where
traditional venture funding is coming
into into crypto companies over the last
12 months and there's about 140 million
dollars in venture capital that's been
poured into space but in
funds that have been raised for things
like the initial coin offering where new
tokens are being launched and raising
new funds on the blockchain through
other exchanges where you can exchange
USD or Bitcoin or aetherium for these
tokens over 300 million dollars has been
brought in the space in the last 12
months so this is now more than
traditional venture investing and we're
starting to see this community
bootstrapping itself now just so we're
absolutely clear though this talk again
is not about any of the the financial
fundamentals of the space so every time
this comes up there's always someone who
has a strong reason for why you
shouldn't invest in etherium if anybody
has something that they really want to
get off their chest why don't we take a
couple seconds feel free to shout it out
why people shouldn't be putting money
into the space right so things like this
is speculative the risk is through the
roof we don't have formal verification
of contracts we've seen lots of scams
we've seen crypto crypto historically
will be broken at some point when new
breakthroughs and mathematics come
through so I again this talk is really
only about the tack if you have any
complaints please direct them to the CEO
of these distributed networks
so I think where we're at is much more
akin to what the internet looked like in
1996 okay there were a lot of great
ideas coming out there were a lot of new
projects but when we look back from
where we are today with hindsight being
20/20 we can see a lot of these projects
have faded away or been merged or
acquired and so only a couple of the
projects we saw in 1996 are still a part
of our lives today and I think this is
really true to where we are in the
crypto space right now there are a lot
of great ideas that I think will inspire
great things that come ahead
but I'll be surprised if many of the
tools we're using and excited about
today last for the next 15 or 20 years
so the thesis of this talk then is like
tcp/ip digital assets which are now
accelerating through the initial coin
offering or the barrier to launching
strong protocols is lowering and
lowering our extremely powerful open
networks and I'm excited to see what
gets built on top of them I think like
finance where we're now storing value
real hard dense digital value on these
tokens these naturally bring attackers
that want to take that money people
would like generally money around the
world that's one of the universal things
that brings us all all together for
better for worse and if we're gonna work
in a world where we're now storing
millions or billions of dollars on our
servers we need to take security
extremely seriously and lastly unlike
unlike before this is no longer an
internet where we have information that
we can freely copy and move around and
we can take a snapshot or a backup of
that we can recover these are funds that
can instantly instantaneously
irreversibly move across the world and
the cost of a single breach as we've
seen many many times over the last few
years can lead to the end of your
enterprise and I would love to see more
people in this room building great new
ideas on top of one of these block
chains or helping to further the
community we're in here but I also don't
want to see your ideas taken over
because of a simple security mistake and
to start with I think it helps to look
back on where some of these mistakes
have really taken hold and what this has
looked like over the last couple years
I'm sure everyone in this room has
probably seen what happened with one of
the biggest mount this was in 2013 where
there was a internal breach that led to
a loss of over 800,000 Bitcoin at the
time about 600 million dollars
we've since seen a lot of other
compromises in the space many of which
have led to the complete overnight loss
of what would have otherwise been a
large enterprise so security has really
been hitting the space hard and these
breaches have not slowed down like I
would have hoped they would we've seen
over 40 digital asset companies over the
last three years be completely wiped out
due to it - - a security breach of some
time and there's been a project that has
started to catalog these breaches mr.
magoo or ryan McGeehan has a great
project called the blockchain graveyard
where every time there's a new Bitcoin
company that gets popped or winds up in
a graveyard he catalogues him here and
and roughly indicates how they were
compromised and puts them into a
different bar here you can see the
primary breach a that's led to these
losses our traditional server breach
applications vulnerabilities are not new
to anyone else in finance here insider
risk has started to become a much larger
threat in the space and we're gonna talk
a little bit about that to take a quick
tour and what these have looked like for
one of my favorite breaches and in a bit
of a dystopian sense or one of the most
interesting with our security hats on
we've seen really determined attackers
in the space not just looking for a
vulnerability but actually building up a
relationship with employees they had a
company to gain their trust so that they
could exploit it we saw one compromised
that started with an invitation to
participate in a professional event this
looks something like inviting them to
speak at a conference write something
that seems like a great thing to do I
certainly enjoy sharing ideas I think
we're all on that same page but this
precipitated a series of building up a
relationship leading to a point where a
malicious Word document was sent to an
employee that contains some malware
inside of it that dropped a malicious
binary on their machine and they then
took several months from there to pivot
through there and by
learn how to get to their production
network and ultimately breach their
production servers leading to a loss of
millions of dollars in Bitcoin this is a
breach that someone spent about eight
months working through and in those
eight months this person left with
several million dollars so their return
on investment here for an eight month
spearfishing AMP campaign was probably
far beyond most of our sellers in this
room so these attackers are doing better
than a lot of us here okay
one of the other large breaches that we
alluded to before one of the pieces that
precipitated that was an insider that
was malicious this insider spent many
months manipulating internal records
that allowed them to slowly bleed out
finances from inside the company leading
to a loss of over 800,000 Bitcoin when
this was first leaked or when this was
discovered this was somewhere north of
600 million dollars but at today's
exchange exchange rate this is now a
multi-billion dollar breach right we
don't see this very often in traditional
finance but this has becoming
commonplace unfortunately in the crypto
world now one of my all-time favorite
most interesting security events that
has occurred in the space I sort of hope
we don't see anything this interesting
for the next couple of years was the
distributed autonomous organization or
the Dow and could I get a quick show of
hands for anyone that knows what the Dow
is or what happened there okay just a
couple of people the quick story on this
is the Dow was a really ambitious idea
on the etherion blockchain this is one
of the earlier token like assets and the
Dow was a way for people to send money
into a smart contract on the ethereum
blockchain in turn for the money they
had sent in they received voting rights
for the pool of money that had been
collected with the idea being that
people could democratically vote on how
these funds were redistributed to make
adventure like investments in other
crypto companies over a period of
several months over a hundred million
dollars was raised by the smart contract
again with no single a centralized party
that owned this this contract this was
all built on this fully distributed
decentralized trustless network and this
included some methods inside of the
smart
tract again we're looking at solidity
here that allowed you to vote and from
this vote you can then redistribute
shares a certain constraints around
quorum and what it meant to unlock those
the those those funds that can be sent
to another aetherium address well it
turned out if we scroll a little bit
further down this contract there were
some other ideas in here that allowed
you to take money out of this contract
and move it to another doubt like
contracts you could split that doubt and
the code that was written even though
this was only a few hundred lines of
JavaScript like code there were some
quirks in here one of the quirks was in
the function here withdraw reward form
you had the ability to pay out and if
you look inside the payout function you
have the ability to call another
arbitrary function and someone really
clever realized that you could chain
these together and in that arbitrary
function you could pay out again and
this allowed someone to start chaining
these together to recursively call a
withdraw a reward for two payout to go
back around to call payout again and
back around and you can see where this
is going and they were able to pay out
multiple times and this was interesting
because this was happening before the
debit actually occurred on the paid out
variable there so what this allowed
someone to do was drain the doubt this
is where there were over 100 million
dollars raised so the the brief timeline
and what this looked like was at the end
of May the crowdfunding happened this is
where about 150 million dollars at that
current exchange rate was raised on June
8th there was a proposal submitted to
the Dow that was used to later initiate
this recursive exploit a few days later
someone in the community one of the core
developers I realized that this type of
vulnerability was possible and someone
even looked at the Dow and said hey this
looks like that vulnerability but the
conclusion was incorrectly made that the
Dow was not vulnerable well some
attacker out there that can see this
trustless distributed network realized
it actually was a few days later the
attacker who would put quite a bit of
money inside of the Dow voted to fund or
initiate that proposal and two days
later 3.6 million aetherium or 3.6
million after
were drained from this contract at that
rate it was worth about 77 million
dollars at the time in today's exchange
rate now that if dream has gone up this
54,000 percent over the last 12 months
this is over a billion dollar attack
right these attacks have to stop if
we're gonna think seriously about the
world using more of these digital assets
but what happened after this was
incredible so later that day the
etherium founder of italic Peter and one
of the one of the very strong presences
in in the community proposed to freeze
those funds and again this is a
trustless distributed network he does
not own this he does not have full
control over the etherium network but he
does have a lot of influence and in the
very wise words of Charlie Charlie leave
a light coin founder we were talking
about this the day of to figure out what
we were gonna do as a company with us
and in Charlie's words we were gonna
find out what it meant to be a truly
decentralized currency with the question
being are we gonna let this attacker or
will this attacker be able to get away
with all these phones or is there
anything we can do so what the etherium
group did was later that day they issued
a soft fork for the etherium mining code
that froze the funds in that account and
one of the ideas that came after this
was they were planning on reversing the
transaction and consider a lot of the
early aetherium developers had put a lot
of money into the into the dow - so they
were certainly incentivized to get their
money back - so the first thing that
happened was they froze those funds this
was relatively uncontroversial and it
started to roll out and the next thing
that happened was a change started to
roll out and this rolls out by nature of
a proposal or a software update being
made and the etherium developers
requesting that miners start upgrading
to this new piece of software that would
freeze funds and they cannot force this
but they can certainly strongly request
it and what an upgrade like this
normally looks like is there is a pool
of miners running some version of the
etherion mining software and they're all
running on the same network so they're
one roughly homogeneous network when a
new version of the software is proposed
we slowly started to see new miners run
this new version of
software but it's still compatible with
the old version and how these normally
conclude is miners willfully move over
to this new software will continue
updating and while continue to be one
aetherium or one cryptocurrency but what
actually happened was fascinating the
people running the old version of me
theory mining software where the the
stolen funds were not reversed where the
attackers still had access to them he
could still move them about freely some
people strongly believed in aetherium
not censoring this person's transactions
and so people kept running the old
version of the mining software and not
contributing to this new world or those
funds were reversed and so what this
meant was we now had two versions of
etherium there was an etherium world
where those funds were frozen and then
reversed and there was a old world where
those funds were stolen and still free
to move about and what happened after
this in the financial markets for
digital assets this is a snapshot of
pelone e^x they later that week listed
at theory enclose a wholly separate
currency that you could buy and sell in
exchange and what came of this was two
new currencies and I've never seen this
happen in traditional financial market
before where there's one currency that
splits into two and both of those retain
value and if you held money before the
fork you know had a little bit of each
fund on the other side and so there are
some really interesting properties that
are coming about in the space from there
were replay attacks that happen after
this something we see a lot in theory we
don't see as much in practice and we saw
two new currencies come about this took
us a long time to figure out how to
properly credit our customers and was a
completely unplanned event for us so I
really believe that digital assets are
introducing brand new security
challenges in a way at a scale that we
haven't seen before so I'm now gonna
walk through some of the lessons I
learned in my three years at coin base
for how we protected our assets and how
I think new digital asset projects can
think about effectively securing what
they have so the first six things I'm
going to run through are here the first
big point that I think we all need to
grapple with is dealing with the humans
in
Network so I totally get the value of
cryptography and strong protocols and
formally verifying the cryptographic
transactions that are happening but
anytime we're working on a crypto
project that's going to matter there
will be people that need to use it and
if people are interacting with your
protocol they need to be a part of your
security model too
now how we think about securing a system
with humans we can take a few approaches
right we can put more visibility into
our network we can watch our people we
can watch what they do and I think this
works for a variety of applications but
when you can digitally access millions
or billions of dollars and instantly
move them the best you can hope for in
some of these scenarios is watching your
money move out from underneath you so I
think this is not always the right way
to solve a human problem in a crypto
market the next thing we can think about
doing is building more sophisticated
security modeling and bringing more
analytics into our networks so we can
look at when something roughly anomalous
has occurred but again this is typically
looking at after the fact when inaction
has occurred can we ascertain the
goodness of that transaction and this
may again only help us see when funds
have left our network so I think it's
worth taking a step back and thinking
about how we secure really sensitive
assets that we don't want in the hands
of any one individual and something that
we modeled our program after was how the
nuclear codes and our nuclear warheads
are protected in the US and for how
these what I think extremely secure
assets are protected whenever you see
the president moving about he'll always
be followed by a military personnel
carrying what's called the nuclear
football or carrying this satchel that
carrier will be walking around of this
always by the by the president now the
president will then have the gold codes
inside of his his person and this is
especially interesting when there's a
president that some of you may or may
not want to have these nuclear codes
there's been a lot of politicizing
around the the dangers of this but
depending on who's president there's
always someone that's afraid of it for
him to activate these nuclear codes
there's a message that's then sent
through
Joint Chiefs of Staff and they can elect
to continue that forward on to a dual
person system and any nuclear warhead
that will actually fire that missile so
there is no single person in this chain
that has the ability to wake up on the
wrong side of the bed
god forbid fall into some state of
mental illness or have some other
problem that doesn't allow them to think
clearly about this asset that we really
want to protect so I think that real
value is protected by consensus right we
cannot have any single person with
access to millions or billions of
dollars in our network that can
instantly run away with that in a world
where we're seeing these highly targeted
and sustained phishing attacks or
building up relationships so that we can
implant malware on servers inside of our
environment we need we still need to
consider that administrators also count
as single point failures it is not safe
for me or you or the founder of some
large digital asset company to have full
access to your network and so the
solution that we invested so heavily in
at coinbase was building out a three
phase consensus model now we want to
balance this with productivity for our
staff we want people to feel like they
can have a big impact in any part of our
environment so we want to make sure
anyone inside of our world can propose
any change that they would want they
want to change a piece of software if
they want to change a part of our
network a part of how the company is
working they should be empowered to
propose any change they want in a
codified manner once that proposal has
been made however we want to separate
the achieving consensus from them and
once consensus from multiple parties has
been achieved we want to finish with an
application stage and one of the tools
that I'm sure many of you are using that
I think implement implements this really
well is the DVCS toolkit and with how
this is implementing github with the
pull request model we can really easily
tie in a proposed apply can achieve
apply consensus and then apply the
changes that have been proposed across
any of any of your environments so what
this looked like for us was a bot that
we use inside of github that was
integrated with some of our other
internal tooling that allowed anyone to
open up a pull request
you can change propose any codified
change across our environment once that
proposal is made there's a bot that says
hey this looks great but before we allow
you to merge this or before we allow
this change to propagate through the
rest of any of our systems
we're gonna need multiple other
authorized parties to approve this and
only once we've gotten the appropriate
amount of Plus Ones or
lgt I'm saying it looks good to me will
we allow this to be merged to the master
branch
it's the bots in the monitoring and the
signatures that we have on this that
would then I'll allow this commit to be
deployed or propagate through any other
parts of our environment and that's when
it could be applied for the third phase
of consensus so here we have this model
where we have two people turning their
keys we've now removed any single point
of failure but made our staff feeling
power that they can make any change
inside of our environment and still move
fast now there are other places where we
can apply this model and so we've
extended this to other development one
this is a tool called code flow this is
a project that we were working hard on
open sourcing I hope to see this open
source in the next few months
this is where we managed all of our
deployments and so we would accept an in
this stage a docker compose Yama file
that defined how we wanted to launch and
manage our containers so we again wanted
all of our staff to propose or make any
changes it's really have an impact on
our environment but before you can make
in the chain make a change when you
would click the Save button here this
would say this is great we're now going
to treat this as a proposed change set
this isn't live in production yet and we
force some independent party to look at
the change set proposal and they would
be able to approve this so again anyone
can propose we need multiple people to
apply or again turning the keys this is
something you can also apply into the
products that you're developing so this
is something we'd exposed publicly
rather than us holding on to all of our
crypto keys for our customers we had
also exposed a multi-party system
through our vault tool that provided
three keys one key that coinbase
controlled one key that we held the
encrypted bundle for but you held a
password for that you could remember and
a third piece of crypto material that
you downloaded and you store it on some
safe box and any two of those three
shards could come together to unlock the
funds that you were storing that'll that
provided resiliency in the case of total
compromise you would still have access
to your funds or if we were a completely
offline you could still have your funds
there was no single shard that could
take them away and this again allowed
any to two of three of those components
to unlock your funds the last piece I
want to mention where we apply this in
some of our really sensitive crypto
environments was using em event
cryptography or Shamir's secret sharing
this allowed us to create a set number
of shards n and set a threshold where
any M of those shards could unlock them
so very similar to that last two or
three application this is something we
were able to generalize to where we
stored our hot wallet in more of our
keys one tool that implements this
publicly I think quite well is vault
this is a crypto tool that's come out of
Hasek orb and what you can do with vault
is when you initialize the vault and
this is a place where you can store key
material you set the m and n thresholds
on what are needed to unlock this vault
for future operations so what we're
doing here is saying there are three key
shares that C and in this case and the
threshold is two so when this vault is
sealed we cannot unlock it unless the M
of those n have come together to sign it
and when you first create the vault
these are the three shards that are
being exposed here they're also now
integrated with key base if you want to
encrypt these directly to a PGP bundle
and send these out so you don't need
everyone in the same place in a secure
machine from these three shards when we
want to later unlock the vault if we
look at a vault status here it'll say
the vault is currently sealed and we
need at least two keys to a mahkum we
can then paste one of our keys into the
vault and you can do this over a network
connection so you don't need everyone to
be in the same room and you can see the
vault is still sealed here and after
this after a second key is pasted into
the vault will have achieved quorum this
will unlock the vault and again this is
now turning two of those three keys to
unlock in this bundle that has more
secret material inside and they're using
Shamir's secret sharing here as well
that allow us to rely on ash Amira's
perfect secrecy properly if
properties which has been well
researched and something we've relied on
quite a bit so the first big lesson here
is to remove human single point failures
and use this idea of consensus
engineering to move fast without this I
think it's very easy to move cripplingly
slow or security can easily become a
blocker inside of your environment the
second lesson I want to talk about is
secure foundations this is I think one
of the easier things we can do that's
often overlooked and a great stat that
precipitated this for me was reading the
Verizon data breach investigation report
in 2015 and in the 2015 G BIR where they
look at thousands of real-world breaches
to see how companies are getting owned
in the real world and what they found
was 99.9% of the compromises they were
seeing so the vast majority of them
we're seeing companies compromised
because there was a vulnerability that
they were running in production with a
publicly available exploit that had been
made available with a patch for over a
year right so they're being compromised
in a way that they really don't have to
and this is not just some foreign
company these are the places that we all
work these are things that we are all
messing up across the industry and this
is a place that I think we can really
improve I think this is especially
important when you think about if you
can't update or upgrade or keep our
servers patched and we don't have a
strong foundation it doesn't matter what
we build on top of that we are going to
get compromised so really focusing on
the foundation before we build higher up
at all is critically important and one
of the things we did to reinforce us was
by implementing what we called our 30
day plan
and what the 30 day plan said was that
no servers inside of our cloud
environment were allowed to live for
more than 30 days we were constantly
rebuilding all of our VMs inside of our
environment this is a snapshot one of
the KPIs that we tracked well looking at
the median age of all the servers inside
of our environment it was typically
around 24 hours in this snapshot and
we're somewhere between two and about
nine days for the median age of a VM
living inside of our AWS environment in
this place and this was a metric we
shared loud and proud and a lot of our
internal tool
so developers would see this regularly
service owners project owners or goner
Swede see this and we would track
different percentiles we would look at
where we're starting to close in on our
30-day limit one of the things we did
that helped us from how we dark attacked
at our network was by only running
mutual mutually trusted containers
together one of the early design choices
that we made was to run with docker
containers inside of our environment but
we weren't yet ready to trust isolation
between our containers for those of you
that are able to make our security track
on Thursday that's run by Diogo the head
of security at docker so we can talk to
him about the progress of making and
they're doing some really good things
there but what we did was we then only
ran these containers separated by a
hypervisor inside of AWS all on their
own auto scaling groups and so we would
separate across the different services
we ran so we would run a web and API and
have men and our SATA tears all in
different auto scaling groups and we
wouldn't cross pollinate on the machines
vram so every time we deployed with a
Bluegreen deployment we would bring up
new VMs we would tear down all of our
old viens so we'd always come up fresh
and we can really easily roll our whole
entire environment in just a couple of
hours with this so whenever I deploy
rolled out this is a snapshot of the AWS
auto scaling screen it would look
something like this where you'd see all
the new boxes that have come up healthy
and we've torn down all of our old
machines so constantly constantly read a
point and this is really important
because reconfiguration is rarely
deterministic for those of you that are
logging into machines and updating and
upgrading and changing and migrating
packages those are rarely processes that
you can be completely sure about what
your end state will look like and you
easily see configuration drift right how
many people have ever seen a system
administrator makes some small change in
a box because it was more helpful for
their workflow and that has some
downstream changes that's the kind of
thing that makes it really hard for us
so by constantly rebuilding that's the
best way we've found to keep a clean
environment so do not reconfigure
rebuild your environments constantly
update upgrade patch and be very clear
on what you're running inside
I think it's also important that this
has to be an implementation detail of
your infrastructure this is not a level
of complexity that you want to expose to
the rest of your engineering staff this
is something that needs to be fully
abstracted so you can continue to focus
on your product not about how your
infrastructure is designed so this is
something we abstracted through our
deployment tool again called code flow
so that brings us to the second lesson
to deterministically update upgrade and
fully understand your environment and
said differently don't be the lowest
hanging fruit if everybody except this
guy is updating their their environment
and we're all running digital asset
companies with millions of dollars on
our servers you can bet who's gonna be
the one that the determined attacker
will want to spend their time on so
don't be the lowest hanging fruit the
third piece is to design for change so
we spoke a little bit about how the
internet has changed over the last 20
years or even over the last two or three
years you can see dramatic changes and
what's happening in the internet and I
think we're seeing a very similar pace
if not faster in this world of digital
assets where we're still seeing great
new ideas and also large values so the
industry is evolving really quickly
we're security typically takes a large
role in many enterprises I think it
often starts to feel like what the CIA
proposed in their field sabotage manual
so for those of you that have seen this
there are some great quotes and this is
something like a 50 page manual for if
you find yourself in time of war on the
other side of the line and you want to
sabotage it in enterprise they have all
sorts of great tips for that things like
making sure you always have three people
that need to approve something for all
of the cases even when that's not really
necessary or to make sure people are
taking extra caution for things where
they might not really need to apply it
and to have as many committees as
possible and I've spent some time
working in the government and this rings
true for how I think that starts to feel
over time and it's really important if
we are going to survive in the crypto
work we're doing we cannot move this
slow today or the only thing we can be
sure about is we will not survive for
the next five or ten years when we
really want to see the space grow so
what I think we instead want is we want
to create a world where we can evolve
really quickly so you you've all seen
this
one of the ideas that III think ties
this evolutionary and economic world
together well for me is from this person
named Joseph Schumpeter who was in
earlier economists and he looked at
capitalism and thought that it could
only evolve through the idea of creative
destruction
so rather than incrementally involving
he sees capitalism evolving through new
new enterprises new companies new new
products destroying things that have
existed that have existed before us and
for some of the larger more successful
enterprises I think we can see that we
can see them launching new products that
cannibalize some of the things that that
they've run before them this is
something we spoke about when when G
Beck's launch where we saw that
cannibalizing a little bit of coinbase
but that ultimately became a really good
decision for us long term over the three
years that I worked there when I started
there were a lot of players in the space
many of which were not there by the time
I left very few of these companies
survived and what I think is really
interesting too is a lot of the
companies on this board here have had a
major security event but they've still
survived that so security does not need
to be an absolute thing do not let it
strangle you your company you may see
some some security risk and that can be
an OK thing you can survive as long as
that risk is well managed what that
evolution looked like for us is starting
with a company where our original goal
was to make Bitcoin easy we then realize
that security was important so we
focused on making Bitcoin safe and easy
we then pivoted again to become a
Bitcoin wallet and I'm just showing
snapshots of our homepage here but there
were a lot of internal changes that
happen behind the scenes over this
period we're growing from one monolithic
service to about a hundred services
inside we then launched this whole new
product line called G Dax which is our
institutional exchange and we then
started to grow rapidly now up to about
8.1 million users if you refresh this
page at the end of the week you might
see 8.2 or 8.3 so they're going faster
than they ever have today and this takes
us through the cycle of moving really
quickly with a high degree of confidence
so that we can evolve so that we can
survive and one of the first thing
that's
starts to stand in the way of that is
rigidity and rigidity to me takes the
form of security policies that don't
allow people to adapt or security
policies were designed that starts to
look like snowflakes where this has been
someone's opinion someone has said
something they haven't really written it
down in a place that other people can
see it so you start to inject more
humans in the process right and that
starts to bring this fear of change in
any time you're afraid of changing or
redeploying or radically redesigning
your service because you're not really
sure the implications of that that is
something that to me needs to be
addressed head-on so something we did to
tackle this directly was to codify and
automate everything discouraging
whatever possible written security
policy or things that would require
people to manually walk through more
process so we used a lot of besides
codifying our applications which are
naturally why we're all at software
development conference also codifying
our infrastructure was really important
for us that that allowed us to codify
things like our our firewall rules or
some of our security posture a security
policy here we're using AWS cloud watch
events or you can tie the state if it's
config you want to codify a Debus cloud
trail being turned on so that your
security policy is fully codified and
people can trace back to comments and
source code for how things are created
and configured one of the tools we
created on top of this is now open
source called geoengineering
that allows us to validate our terraform
configs by ingesting this into a Ruby
DSL that helped us move a little bit
faster and so in the last 12 months that
I was there we used some of this
automation to launch almost a hundred
fifty thousand servers in our
environment we deployed 13,000 times
this year with a relatively small
engineering team and we created 45 new
services this I'm especially proud of
where all of the traditional security
reviews and the slog that it would
typically take to get new services out
the door we were able to accelerate
quite a bit and we did this while we
were exchanging now up to and well over
a hundred million dollars a day through
our infrastructure I'm very proud of
that
the other side of this that I think is
necessary to drive and make sure you're
evolving in the right way is is defining
the right SL eyes and really looking at
the metrics that define what you're
trying to achieve so we spent a lot of
time on making sure we were measuring
the right things and measuring them in
places through tools like Kabana here
using the elk stock that everyone on the
team could see and they could trace back
down in the query and they could kind of
start to tweak it or explore the data if
they wanted to learn more about it and
for those of you that haven't seen
before the the service level indicator
is a metric that you're collecting but
the service level objective is the
measure or the bar you want to hit and
what helped us make sure we kept a high
degree of quality and we removed that
rigidity from our environment was by
monitoring this bar and whenever we fell
below at the level we wanted to meet we
would spend time to fix our quality
before shipping new services so we
constantly improved what we were
creating so I think it's really
important to set ambitious goals set
ambitious SL lows just like the product
team gets to celebrate when a new
public-facing product shifts a lot of
this work and start to feel a lot less
glamorous when you're talking about
updating and upgrading and patching so
we set really ambitious goals for how do
we update all of our servers and then 24
hours or how do we roll our whole
environment in a 24 hour period to so
that we can have the same kind of
product celebrations when we launched
new parts of our security program inside
of inside of the team so for lesson 3
designed for fast change assume
everything you're building now will be
fully out of date or deprecated in the
next couple of years and with that
assumption codify automate and make sure
your team is prepared to go through
those changes the the fourth lesson here
is tiered storage so in how we're
storing data in a traditional web app we
often have two or three tiers where we
have our application tier and we might
have our data tier behind it and this
works fine and good when we have
multiple levels of protection but we
still have all sorts of security 0 days
like ghosts or wanna cry recently
imagemagick
or image tragic or heartbleed that will
lead to or the possibility of compromise
for some of these assets so we have to
think about storing the crypt of funds
that we have in a world that's not fully
dependent on our online systems so the
three tiers that we designed around were
hot warm and cold storage for all of our
crypto assets and for the first year for
how we were storing our hot funds this
looks something like a separate very
lockdown very well protected server with
a very low attack service area that was
storing the minimum amount of funds that
we needed for our daily operations and
some of the traits of a good hot storage
system are having the minimum necessary
operational funds as long as their
companies is still growing you probably
don't need all of your customer assets
on the funds at all time so this Frost
was roughly about 0.1% of our funds
these services should be should be
operated separately and you should
intentionally evolve slowly here we want
to introduce as little risked or hot
storage tears as possible we want to be
resilient to an application compromised
we invested more here in pen testing and
professional security reviews because
this has been such a small amount of
funds these funds can be insured and
that allowed us to have a good hot
walled hot waltz here for the next year
for our warmth here this looks somewhat
similar to hot except our funds are not
always connected to connected to the
Internet we can easily and quickly
connect them but they're not natively
connected and this can look something
like a tracer wallet something that you
can store in a safe and the in the
office or you can store in a protect
protected place and you can plug in when
you need it but you are protected from
any more sophisticated compromised and
some of the traits of a good warm
storage system are funds that you need
for infrequent events this might be
every month or once a quarter you need
to access these funds this should be
disconnected and not online but easily
easily connected and also physically
protected again so there's no single
human point of failure the last year for
cold storage comes from an interesting
property for most of the crypto assets
we work with where rather than storing a
symmetric password where we need that
password to access our funds we're using
a cement
cryptokeys that have a public key and a
private key and the public key can be
exposed and shared widely just like PGP
so that anyone can encrypt or send funds
to your public address but you need your
private key to send those funds and so
building on top of that we can keep our
cold storage completely offline but
still make our public keys accessible so
we can sweep funds to our public keys
when we need to and these are some of
the traits of a good cold storage system
and have worked on a few of these this
is where the rare event function lips of
the vast vast vast majority they should
be generated and accessed completely
offline so never touching a server
that's online at all reducing risk as
much as possible they should easily
accept new funds through that asymmetric
property these need to be offline with a
loud process so when people are using it
when funds are being accessed we want to
notify as many people as possible so we
have time to physically intervene if
there's anything more malicious
happening and also implementing in
double blind Emma Levin protection so
this would also use something like
Shamir's however we don't want shard
holders to know who other shard holders
are to protect against things like
collusion so there were a couple of
snapshots we shared of one of our cold
storage generation procedures if you
zoom in on this paper you're not going
to see any real data these were then
broken into printed pieces of paper that
are resilient to any electromagnetic
event also on flash keys freeze of
access in stored and safe deposit boxes
around the world so lesson for being to
keep the majority of your funds offline
so that the rest of your security
program is only looking at that point
one percent which is insured in case of
any larger catastrophe the fifth lesson
I want to point out is disaster recovery
so has anybody ever seen this and one of
their machines okay great so this is a
snapshot of cryptolocker you never want
to see this this is a sign that your
data has been encrypted and someone's
trying to ransom you probably for a
Bitcoin to get access to your data again
so one of the things that we spent a lot
of time with is thinking about how do we
recover
when there are other exploits or things
that may have been sent to our network
and so when someone in your environment
comes to you and says hey we think there
might be a compromise we think we found
a vulnerability it immediately
introduces that risk that someone has
injected something bad into your
environment so when you've been hit with
a new exploit and you're not sure if you
can trust your data if you even still
have access you have to ask yourself the
question of when are you ready to come
back online and this can be a really
hard question to answer
so one of the things we did was making
sure we had many-to-one cloud accounts
and this is one tier of our disaster
recovery so as your cloud accounts start
to grow make sure you have one place
with keys that are stored entirely
offline that has snapshots for all of
your backups stored and you can use
hardware tokens so you can physically
protect access to these these
environments again and we went through
several of what we called scorched earth
exercises where we pretended that there
was a big compromise in our environment
and we used all the security automation
I've mentioned before to rebuild that
environment and we used well-defined
metrics and very public dashboards to
watch us burn down in the last lesson
I'm going to talk about is battle
testing so we've done all this work we
now want to make sure are we really
ready to survive through the through a
compromise so one thing we did was
having a very public bug bounty program
we spent hundreds of thousands of
dollars encouraging white hats to submit
vulnerabilities to us and you're
starting to see these grow throughout
the rest of the crypto ecosystem and the
last thing we did was we we ran tests so
we we only know that worse prepared as
the testing that we've gone through as a
team and so this took the form of
several red teaming exercises internally
where we would simulate real compromises
let the team know roughly a timeframe
when these red teams would occur and
some of these looked like some of our
alerts or messages starting to fire the
team starting to respond in real-time
looking at what these events look like
and having pretty detailed simulations
for to make the team feel like we were
actually going through something
malicious this was an actual message
to the team during one of them
requesting a five million dollar ransom
to get our data back but the team
instead was able to work through some of
the other tools we put in place and it's
so important that when we're going
through these testing these tasks these
look and feel like a success for your
team so when these tests occur I think
they need to feel something like this
see if the sound works all due respect
sir I believe this is going to be our
finest hour all right so some of you
have probably seen Apollo 13 when things
get bad that this is something they're
prepared for this is something they turn
into one for the team and these were
things we were able to celebrate as an
organization we always turn these into a
party at the end we always brought the
team together through these and the last
lesson before we close is for all of
these things ultimately you need to do
what fits for your organization I've
seen small startups focused on really
complex zero-day a nation-state
protection before they've even found
product market fit and the security can
easily slow you down to the point where
you can't ship a product and you never
survive so you really have to take a
critical look at doing what fits make
sure you build a product before you
focus on building out a whole security
organization
so to recap I think digital assets are
accelerating faster than ever before
I think these novel assets need securing
most of these will evolve significantly
and for the security you apply apply it
judiciously happy to hang around and
chat for a little while after thank you
so much for participating</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>