<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Mobile App Development for Rails | Coder Coacher - Coaching Coders</title><meta content="Mobile App Development for Rails - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/InfoQ/">InfoQ</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Mobile App Development for Rails</b></h2><h5 class="post__date">2012-01-12</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/ue90DoGLYmI" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">all right so hello everyone my name is
Ivan and I'd like to talk to you guys
today on how to get started with mobile
and I'm particularly quickly and quickly
get up and running with mobile and rails
so we're all a bunch of developers here
geeks and you know how it is you're
working away and you're deep down into
code and you got your you get your
Gredos on and you're really deep this
time you're so so deep you're in you're
in the zone and you're in flow oh yeah
and stuff's getting done you know GTD
all that good jazz and someone taps you
on the shoulder and it's your scrum
master and it's time for your favorite
thing in the world your sprint planning
meeting oh boy you're exciting oh and
this time someone got a great idea
hey let's go mobile yeah that's a great
idea
let's go mobile well all the cool kids
are doing it man like investors are
saying you should get on your back all
about mobile and Mashable's on mobile
mobile and TechCrunch is talking mobile
and you're your mom and just I'm
mastering your cats on mobile these days
like they're everyone's on mobile all
right ok so let's talk about mobile then
well what I like to do first is start
with a question that is what is mobile
all right well what is it well well
nowadays mobile is kind of like this guy
and this guy great one big happy family
except there's really one more like
wondrous relative that exists who seems
like the off forgotten bastard child of
mobile which is this guy well today I'm
gonna show you how to get started in
rails with these guys namely because I
think it gets you the most bang for your
buck in terms of reach and you can get
stuff done very easily and quickly and
get some down the door without having to
do
with certain annoyances okay
so let's get started we've got our
existing site and we got to figure out
how we want our users to enter our
mobile site so so do we want something
like this and unless you're billing for
like two decades ago you probably don't
want something like that or how about
this say no to that - and well how about
this and you know like good mother of
Sauron please just don't do that all
right
you should know we're really gonna
simply just go with this great rolls off
the tongue makes the boss happy
let's go on so before we get into all
the nitty-gritty code we'll have to
consider certain flows here let's start
with this Alice what happens she's
probably just give the user the mobile
site all right
and of course user goes ww pretty
straightforward go to the full site
great all right moving on users on the
phone goes MDOT so you're on your fancy
mobile you got MDOT and well this should
be really no different for the desktop
straightforward voila
then let's consider this whoa okay now
what happens here now what should we do
well
should we show the full site like a
helpful link or should we go straight to
the mobile well I i I'd say let's just
go ahead and just do this though we have
to consider one little thing here if the
users on the mobile site and clicks on
the desktop link what happens she should
be able to go to the full site so you
can see the the big goal overall Nora
glory all right so let's get in some
code anticipating that all right so my
first when I first set up I
configuration in rails so we'll go into
our config directory and add a new mime
type which will be used the mime type
here will be will coincide to our
template format that will add later and
you can add iPhone and iPad or whatnot
in this - oh sorry please tell me if you
can't hear me
so you you can can add iPhone an iPad or
whatnot hit here you'll see later this
will correspond to our file names and
also I'd like to add this regex
where we'll check against our user
agents to see whether or something a
request comes in from handset or not
this is this is pretty much the same
thing as mobile what mobile foo has here
and I use mobile foo like a while ago so
I haven't checked I checked a little bit
back thing I think they I had some
problems with them like using the gem
before but I think they've since like
been fine so you can probably just go
use mol foo and have this epic list from
there and which would probably fine okay
that's that's done let's go move on to a
model alright so I typically like to
keep a source attribute here especially
on our part are your main models kind of
this usually like make sales people
happy later because they want to know
where stuffs coming in from and and
things so they like to have their pretty
graphs and staff later which is great
and also useful later for for adding in
a little like this message was sent from
like mobile or this was sent from
such-and-such so you can grow your
mobile usage and show everyone you're
doing mobile stuff alright great well
let's move our controllers digest here
but the main point here is really
differentiate going to the MDOT site and
hitting the site with the mobile device
so so you can fear like there's we right
now we're adding to both these filters
so we're just gonna for us both the MDOT
and mobile devices to go straight to the
mobile site alright well look we also
have like this case and all we have here
is really to handle this situation yet
we a line before and otherwise use we'll
never be able to get to the desktop view
and I'll usually have something like
this in one of my one of these
controllers it doesn't really matter
where you put it that's how you want to
handle it but that way your session very
we can get set and you can just set
staying on desktop without having to
like go in this endless loop of anyway
so let's make a mold controller right
all right wonderful rails now you can
start adding a bunch of actions and like
this keep going you add some more
functions and add some more routes and
then you can actually just control and
update the user and really so good I can
kind of hear just voice in the back of
my head that the the gods may not be
happy about this and that I may be going
to geek hell if I do continue on this
route okay crap like this is not really
the way to do it and in fact like what
you really should be doing is like not
having like epic giant controller and I
learned his lesson a few years back when
I actually done this exact thing and in
Java actually in like a framework a lot
like rails in Java and I had written
this epic mobile controller with five
thousand lines of code in it and one of
my colleagues came up to me and said
like you know I think you're gonna hit
like the Java class size limit on this
learn from my mistakes don't do that
it's it's it's more you need to do that
so really like your controller really
for the most part you really shouldn't
have to do anything in the controller's
actually like unless we're very specific
needs you shouldn't have been messed
with your controllers in in order to add
mobile templates so right let's move on
add some mobile views here we see the
mimetype action that we configured
earlier namely we can see in our
extension here and I just add a mobile
stylesheet specifically for mobile here
and then we we have our views with same
mime type again again same file
extensions we have a separate template
for mobile and those we actually have
separate assets from all I please don't
like try to like take like existing big
assets and like just change the size on
to him like please like Photoshop them
get your design guide like shrink them
because like like as you guys already
know like your browser does a pretty
poor job of handling that plus you're on
mobile there's bandwidth considerations
all right so wait well let me
here a bit about what we just did though
assuming you'll be adding a new mobile
template for every existing template
that you have you can't have like this
situation where like it's all or nothing
we get a get a handle per action and a
lot of times you may not be ready to
take all of your like mobile or your
existing templates and convert them into
mobile yet in which case you probably
need to set up your your action your
application controller do two per action
handling and a lot of times for instance
like with email links where you guys
have your genius phones and you'll click
a link and you'll like you know what
will happen is the app will see that
your mobile your mobile request and
you'll it'll try to render a mobile
template in a black normal template barf
so probably want to do it on per action
basis if you don't have all of your
templates ready for mobile so in that
case we get rid of this line in our app
controller and we add this on the pro
action basis specifically wherever
wherever we've already created a
template for us I put a note here that
like that I found that the biggest
bottleneck I have doing mobile web film
and has simply been visual design and
not really technical issues most of the
technical issues that have that I've had
to work with like have typically have
already been solved for building the
desktop or whatever like non mobile app
before making the mobile stuff alright
great
you got a mobile website up but you
really want to impress your scrum master
and she's alright
alright so you can concentrate on pure
content without fussing with too much
visual design there's no silly needs
reporting which means it just works on
all devices
I know it's amazing isn't it so the only
small caveat is it actually costs money
I wouldn't say it's very expensive there
like it's about a penny per message to
probably be a lot for a small startup
but that's the price you pay for having
epic reach and nowadays it's really so
easy to get up and running quickly on
with what we'll be setting up today
which is this let me go on a small side
here
another story just back when I was
working at this company and we had we
had we would have months and months of
negotiations with all these carriers and
we had the amazing biz dev guy Sean Kane
dad that would have these fantastic
deals you do but like it was always a
pain in the butt to do do all this and
on the technical levels always paying
the butt to deal with all these
different api's integrate with and plus
there was the getting of shortcodes
provisioned was a hassle and different
carriers would have different
requirements some would be load testing
done before going live so I'm really
grateful that there is a service
nowadays like this alright some coding
yet right configuration get some get
some ya know file setup we we take these
settings from some twilly O's website
after we we get set up and we I'll make
a initializer to load that configuration
file great so I like to build these two
classes which is the Twilio controller
class in the device class and these
these end up being my two primary
interaction points with Twilio the
device will will store phone numbers and
later iphone android ids and whatnot
when when we get to a point well when a
bit our maker epoch api and dual
controller is where we'll have callbacks
for twitter is to send incoming texts
from epoch phones all right all right so
i also use the device model for for
sending outgoing messages and you notice
the different types and there's
different types here iPhones in mobile
and whatever and there's different
identifier strings and we got a very
simple example here by typically move
the Twilio call here and I put in a
private function to make stubbing easier
for specs later so this I don't do it
but what like I typically whenever I
make any external API calls out I'll put
it into a prior function and during
testing I'll stub that function out so
just like I have to do with it during
testing alright so this is where it will
interact with your app fight for
incoming texts your callback URLs you
set on their site
and if you notice that the device model
is here we we use this to look up users
associated with the phone number and
it's pretty straight for I think there's
maybe a little bit more like I I don't
store the Plus on on a device phone
number here it's however you want to do
it alright so this is this is kind of
cool I I really enjoy the testing
frameworks that rails has here he's our
spectrum factory girl and this is what
I'd really like this because it
basically documents tutorial API for me
wow why write this so I don't have to
check back on the docs all the time and
I think put the testing framework really
like shines here and I was really
ecstatic when I little do this cuz back
when I was at Bebo I didn't really get
like it was it was kind of painted but
because I had like maybe eight different
carriers I was integrating with and all
the interact with my API and all these
different ways so this is like for me
like awesome I love this really that's
it for like SMS messaging like the rest
is really logic between your app and the
vice and Twilio controller classes like
SMS integration is really pretty darn
simple nowadays especially with rails
and really really incredibly easy and
fast with things out the door hit that
deliver button pivotal in from master
and be a cool kid doing mobile</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>