<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Tutorial: Android Application Development  - BaseActivity | Coder Coacher - Coaching Coders</title><meta content="Tutorial: Android Application Development  - BaseActivity - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/InfoQ/">InfoQ</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Tutorial: Android Application Development  - BaseActivity</b></h2><h5 class="post__date">2011-04-04</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/VN3srmr70iY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so let's do just a little refresher of
what we did last time let's make this be
the entry point the main activity that
we that we are coming into okay so this
is gonna be our main thing so what do we
need to do for that to make that happen
yeah I think you're in the right area
you're you're on the right track yeah
so if we wanted to make something else
be the main activity right so let me
first of all I'm gonna close all so
start fresh right and we are working on
a number so what we're gonna do is in
the manifest file we simply need to move
the those couple of lines of code which
we'll explain later on shortly when we
talk about broadcast receivers but we
need to move this couple of lines of
code right from status activity to time
line activity so what I'll do is I'll
I'll make time line activity be sort of
the top one o'clock I need to since I'm
closing it I need to close it like this
right so that I can move those lines
into it right I'm gonna basically just
take those lines of code and move them
into that make sense
okay so that indeed well if we start now
Yamba that indeed will make the time on
activity beta the the main entry point
however that doesn't solve our problem
see now I don't have the menu and that
that's back to your question how do we
make the menu available in the other
activities so what did we say enables
the menu what was what were the steps to
enable the menu right so we had the on
create options menu and on yeah own
objects item selected yeah so what we
could do is one of the two things if we
wanted to make the menu available
throughout right we could then put that
menu in a base class and in here that
base class that make sense
you guys understand what I mean by that
so you could make our own base class or
not so let me just I'll do it like that
but just to kind of show you so for
example I could have
so let me that that code is right here
in status activity okay and I had I had
that code that says many stuff right
remember those two methods on create
options menu and on opt options menu
select it right so what I could do is if
I wanted to make this I mean that's
that's available to everyone I could put
this in a base class such like this I
would create a new Java class okay and
I'll call it I can call it for example
base activity so this is what we're
gonna put some common stuff okay
they're based activity and now basic
tivity extends activity organism ports
right so basically just to kind of draw
what we're doing so before we had an
activity okay and then we had status
update inherit from activity okay that
was our inheritance from before so
status update is a activity okay now
what we are doing we still have a status
update okay but we're saying let's keep
status update inherit from base activity
okay and then we'll have base activity
inherit from activity right and now what
we can have is we can also have our
timeline
activity inherit from base activity so
that that way we can put the column
stuff in here make sense so that's all
we're doing so so see now if I go to
status activity I can I can make status
activity as opposed to extent activity
can six that's base activity okay so now
I'm back at square one right
and I can go to timeline activity and do
the same thing in say timer activities
not just activity but it's our base
activity organizing ports and now status
activity those couple of things that we
had regarding menu so the menu stuff I
can yank it out of here I'm gonna cut
all this stuff out right so it's gone
save it organized imports save it and
then base activity now has all the menu
stuff in other words menu stuff is now
going to be available to everyone that's
well not specifically timeline and
status activity oh yeah I caught a copy
just the menu stuff yeah now it doesn't
compile because it doesn't know what
Yamba is for example right so it's clear
so we're still not done right it doesn't
compile yeah
cut paste it yeah I cut pasted it cut
pasted the menu stuff so those two
functions methods right the on create
options menu and on options menu items
selected yeah
well they could so that's that's the
question so now the question is
obviously this is not compelling because
it doesn't know a young but I have two
choices I could say here you know you
could say application get application
you know and kind of do it that way
right so that would work right or I can
actually move the definition of Yamba
from here so cut it out of here put it
into the base activity it so that Aaron
who uses base activity now has it right
and then I would need to also copy the
the implements the at the oncreate
method in base activity so that we
actually implement you know define
number so that thing that we did here
now it doesn't need to go here so I'm
gonna yank it and I'm gonna put it into
the this this place here
so now Yamba is defined in base activity
and it's as such available to you to
everyone else subclasses it right yeah
so I don't need to define it here and I
actually notice that there's one place
that we did not use like for example
here this becomes obsolete as well
because now I have Yamba so I can just
refer to yumbo here right so on create
on status activity stays the same I just
took out that one line were we defined
yeah
so timeline activity is now broken um
and let's see what the problem is to be
public on create and the timeline
activity now doesn't need young boy
anymore doesn't need it because it
inherits it it just makes it all simpler
tiny bit simpler but sensible right so
basically what we've done is we moved
some base activity so base activity is
now where we keep the common stuff and
the common stuff that we keep is Yamba
here so Yamba application and options
menu options menu right so now everyone
else that inherits from it namely
timeline activity and Status activity
are getting that from from basic tivity
but since base activity is a activity
it's just your get all that stuff from
there right so that's that the two kind
of things that we you know the Yamba app
stuff and the options menu stuff hard to
read but that's what it says here cut it
so that's that is the common stuff so
you can kind of see it so that's the
Yamba app and we define it here right no
big deal and then the menu stuff is the
menu stuff that we defined below
ctrl F or applet that usually works yeah
search
so
right so on timeline activity if we had
this one be protected but if we're if
we're sub classing from a from this guy
and this one and these guys define
public so if this one was defined
protected
okay then would this one could be
protected as well right it just that we
can't make something more visible you
can make it less visible they can make
it more visible right
so yeah yeah either either one is fine
so yeah but if I mean I'm sorry yes yeah
yes
so the key was if you want to if if on
create in base activity was public then
subclasses would need to be at least
public at least and in most its in this
case the same because you can't have
more visible than public right but if
it's protected then subclass could be
protected at least protected but it
could also be public right sure that's
fine for our purposes that's fine yeah
this yeah yes okay so we now at least
have a placeholder to put all the common
stuff in right so now if I run this I
should start with my timeline activity
and it should have a menu support how
it's gonna happen is yes we now have a
menu but we don't have a menu for the to
jump into status yes right so we need to
add yet another menu support in this
case for status exactly so your job is
to create many support for status how do
you do that right so we're gonna start
by updating our menu XML not layout but
menu menu XML and we already did added
five things so you know what's what's
yet another one to add right it's no big
deal
so another item and just like before
item item status right title matters I
think already have title for status
status update
that'll status update it may be too long
but we'll see I stands out and then icon
is going to be a tough one
to figure out and I'm gonna visit my
website called Android drawables and
it's screaming penguin which did access
to this and then I'm looking for some
kind of icy menu something right because
I see many Rd icons that fit very well
at the menu and do there's like email I
see I see
what's that so for example I see many
compose maybe a good one right let's see
so at Android : drawable slash I see my
compose except this one doesn't work
because this research is actually not
public so we cannot use I see many
compose it's not available to us what we
could do in this case is if you really
truly want to use it you can always copy
this image and put it into your into
your exactly into your resource but I
could use something like I see menu
added let's try that one yeah then so
clean this so I see menu edit seems to
work and what I'm gonna do is I'm gonna
reformat it here so my XML looks good
and then I'm gonna actually move it
above so it's gonna be right next to the
timeline so the order matters right so
I'm gonna start with timeline then
followed by status update followed by
preference is followed by start/stop
service and so on and so on
how do you know it let's see what
happens
Mannie Pam status update perfect looks
it looks good right except we don't have
the handling for that menu right so now
what we need to do is we need to handle
that menu right
so to do that what are we gonna do
exactly so now we go to base activity
and yet in here order doesn't matter it
so here we add yet another art ID dot
and then item item item status update no
status notice how remember how I said
this is gonna be this list is gonna grow
right so that's why you want to kind of
be mindful of what you put in there how
you name it that's why you know it's
relatively easy to find stuff right
thank you say star stop start activity
new intent this karma status activity
dot class that's it right that should
work now
so so the ordering in XML is gonna
determine yeah it the order of this so
this is number one this is number two
this is number three and so on right so
so that's the order of those things so
that correlates to the order of these
items here or if you if you want you can
look at it like this you can even take
it here and like move it up and down
just be careful because if you move it
to check this out if I move it up first
it moves it into the into some one of
these so it becomes sort of dislike
parent-child relationship and then you
gotta move it up yet again so down down
so you're gonna do basically twice to
move it one up so that's why I prefer to
just do it in accent in XML but you can
use it this way Zurich to as well that's
that's a good point so so so thank you
so that's a great point so that's
another comb work for you guys let's
switch what the menu looks like in case
that that you know there the menu
changes how would you do that so what if
we wanted to change the we wanted to
toggle what this looks like so if the
service is already running we're gonna
you know say stop services if it's I'm
sorry okay so how would you do that how
would how would you merge these two into
one that's intelligent
right so we already have a flag remember
so okay so let's yeah so let's let's
let's do that so that's our next
exercise so how do we now do that so
first of all remember we have already
have a flag it's just a flag we have its
inside for in for me it's inside of
Israel yeah is running right right so
what would you what would be a better
place to put this flag yeah how would
you get it how do you how do you have a
service how will you get bring the
picture back up this Oh what happened so
let me open up the our pictures and
another thing I'm looking for I'm
looking for this image
say this is our picture so we this guy
internally knows if it's running or not
but huh and now we have a base activity
which is sort of the parent of these two
how do we have this base activity access
that guy to check if it's running or not
what's a common brings back the question
of how do we community communicates
between various components right
we could do that but in this case we
could also just move this flag up to the
Yampa application because they both have
access to my application right right so
so what I'm gonna do is I'm gonna open
up Yamba application and I'll move the
flag here I'll say public I'll say
doesn't have to be public it can be just
default visibility but boolean is
service running and I'll set it to false
okay
right and and then update their service
as opposed to using this flag so I'm
going to delete it which creates a whole
bunch of problems then I'll simply say
Yamba dot this service running is true
right so whatever I had reference to is
running I'm just replacing with with the
Yamba is service running I'm sorry yeah
feathers and gathers yeah you could do
that that would be the more yeah you
could do that as well in Android that
would be the proper way in sort of op2
to basically make it private here sure
so I could make this private okay now in
in Android this is this is a rule that
we often break but I could make this
private and then what I could do is in
my amber application I would say source
generate setters and getters right and I
would say for each service running I
would generate public
and I'll do it at the end so yeah so
basically that creates your setters and
getters right that's what you're
referring to right right so I could have
done that
save that organize reinforce say that
and then here as a poster saying is
running I would say set is running to
true I could you know what I don't like
the name get is running also is is
service running and status everything
okay that's me that's good it's service
running so this becomes just a function
call or method so that so I would say
here young but such service running to
false and then this becomes obsolete and
and that's that right so we are done
updating that so actually I do have an
error right here so so it's not updated
is service running but it's it's Yamba
but except this one doesn't know what
Yamba is so i need to remove the amber
from updater up to to the service right
make it make it Harvey's ability so I'm
gonna add it here
so hold on one second we just hang this
up and move that to my own create that's
my number and so now this becomes as a
post of it they becomes young but that
is restraining rank then one more yeah
but that is service rank there we go
so that compels um sorry you were saying
so just to kind of like recap I mean
whenever I refactor I kind of lose you
guys because I'm going up and down the
code a lot but fun don't try to copy it
you're gonna get lost okay it's not
gonna work if you're trying to copy this
is not a typing exercise fundamentally
what we're doing is we're just shifting
the the variable right as opposed to
make it before it was just a flag that
was living inside of this inner class
called updater right we had something is
running I moved that all the way up to
Yamba so Yamba now has a private
variable sets is service running right
make sense and setters together so i can
actually access those dead variables so
it's it's private I need setters
togethers to have access this is just to
be a proper all P code but to me I would
have skipped this these steps so in
interesting of making the code shorter
okay
it's breaking though these principles
but it's something that we do in Android
all the time it's just it's it's pretty
common to access variables directly as
opposed to worry about this you know I
find this others togethers if they're
just straightforward they're not adding
any value they're just noise to me
that's how I said but you can argue that
all day long right so but nonetheless I
did them so there they are setters and
getters so now update our survey
is simply has Yamba reference to my
application reference is it here okay
and then what we are doing is we're just
asking Yamba now is it turning or not
it's the same flag it's just that I
moved it up to the to the mothership as
opposed to keeping it local okay so so
the way you should do this is you should
try to understand it and you should try
to then fix errors by by using your tool
okay so try to think figure out like
click on your tool figure out what's
going on as opposed to just trying to
like copy paste because it's you know
for me because it's not gonna get you
far but it's confusing especially when
I'm moving between two three files and
doing it you know across like the screen
and so on okay so let me know if I can
help you with that okay so now that we
have that we that we have the you know
is running as part of the Yamba
application what we can do is we can
change how the menu works so that you
only have one menu for these two things
right right make sense
so as opposed to having start service
top service I'm gonna have one that says
toggle service or something like that
right so I'm gonna go to menu and I'm
actually gonna I'm gonna create a new
menu item and then I'll comment out the
other tool right so I'm gonna say I'm
gonna say item toggle service right and
by default it could be it could be the
initial ones title start service and it
could be the icon the same as the start
service initially right
make sense so any comment is too out so
I'm gonna reformat and then so we start
and service stop these two I'm going to
comment out okay so they're commented
out so don't appear so we have menu
status profs purge and thoughtful
service right make sense look I just
simply deleted all commented out start
stop service and I created the new one
which is basically identical to start
service just change the name just
because start service is not applicable
as a name it's a bad name now right so
as opposed to calling it start service a
call it toggle service right so that's
it right so now that we know that we
have the toggle service so now this is
no longer you know no longer applicable
right so basically as opposed to start
and stop service I'm now gonna have dot
toggle sorry item toggle service and
then I can now ask myself you know if
yum dot is service running right
so if service is running then we're
gonna stop service right else we're
going to start service
so that was easy we just basically
change it so now we can basically say
okay we know that one that this one
button got click toggle service right
and that's gonna start stop service and
as a matter of fact if I run it this
should work right now it's not gonna
look good but it's gonna work so let's
see because we have our our tracking
okay so time on activity created so look
if I go if I go menu just this is now it
says start service but it's really my
toggle service so it so there it started
a service bam bam updater running right
anytime but now if I press that button
again which mistakenly says still start
service now it actually does stop right
so it does do what we meant it to do
it's just that it doesn't update the UI
right so how would we now
programmatically
change this to alter the UI because
right now it should be it should say
portal and it should like to swim to
swap between start and stop right right
so but you know what mattered and where
so this is gonna get called when many
options item is selected this one is
gonna get called only first time when
many as being opened well my name is
being created so we need to figure out
is there if there's there's another hook
that we can have to handle many
see--let's going to override implement
methods and kind of see there it's gonna
be something to do it on right because
they all started on something something
right
on menu opened okay so if you don't have
enough documentation here alternatively
you could look at detangler comm right
so let's and so I would look inside of
activity and I would look at what's
available so again I'm looking for on
menu stuff on many open code when a
pentose menu is open by the user an
option menu created closed or prepared
options move to display there okay so
this one may be the one that you want on
menu open called when panels menus open
but the user this may also be called the
many is changing from one type to
another for example from one icon menu
to an expanded menu this may be the one
that you want right so now I can we
gathered the menu right so now what I
can do is I can implement this method on
menu opened right and programmatically
toggle in there so I'm gonna add it so
there's my new coat for own menu opened
right let's see what does it say called
on panels is open featured apparel that
many is in the many that is opened
default implementation returns true okay
so we're just gonna return true ok
feature we don't care about this but we
do care we now have the menu but we need
that menu item because we want to flip
that toggle from one to another
depending on what it is right so what
I'm gonna do is I'm gonna say menu item
Dogo Dogo item is gonna be menu dot and
then let's see what how we can find in
menu that item what are we having here
is there a find view
get item there's a or find item find
item takes the ID so it's gonna be our
dot menu dot our I'm sorry r dot r dot
ID dot ID dot i toggle service damn so
this should give me the menu item right
the main find item returns menu item
that's correct so you know kiosk
necessary so now I have that toggle item
and now I need to figure out what to set
it to so I can say if you know Yamba is
service running then we're gonna set it
to one thing else I'm going to set it to
another thing right so if service
running is we're gonna say the toggle
item dot set which type of things did we
care about set title right remember so
now what we are doing is we're basically
programmatically changing what we did
manually here right so we manually here
set title and set icon
right now we're programmatically gonna
flip flop those two things right make
sense so what I'm doing here is I'm
saying I'm saying you know set title to
r dot string dot and I already have all
the titles created so if service is
running then I'm gonna set title to
title service stop right and talk talk
and the other one that we cared about
was if you remember the other one that
we cared about was the icon so right so
I'm going to say toggle item dot set
sorry toggle item dot set and then icon
okay and so now the question is what is
the icon that we're gonna point to
what's that yes but well no I want a
flip-flop
I want a flip-flop between you know if
if service is running then I'm gonna
point to stop service icon which is the
little pause if it's if it's not running
then I'm gonna point to the play but
godlike points to this thing because
we've if it was our local resource we
would do our double dot right but in
this case it's not our local resource
it's an Android drawable so how do we
point to that have you seen this before
we haven't so just like just like if you
want to use so just like our ad string
points to our own values here string
right points to around something in here
right
and just like and at Android drawable
points to the system one right similarly
to access this from Java you would say
our dots drink and similarly to access
system one is supposed to do in our dot
robe or you say Android dot R the Drobo
and you can you guys keep sort of seen
that Android dot R sneak on at you when
you hear the problem with your are not
existing and you do organize imports yes
so I mentioned that there's a common
problem right so here it would be
Android dot r dot drawable dot and then
i can I see man I see that I see me the
so if we're on its running I'm gonna say
pause right and then if it's not running
I'm just gonna do the opposite I'm gonna
say play and all that right then so
title becomes title service so if it's
stop start right and then as opposed to
I see media play I say I see I see me
the play
so this should toggle so if if our
service is running we're gonna show one
thing not running we're gonna show
another thing so let's see how that
works
so if you click on menu sit start
service and let me let me let's see here
on the on this so start service BAM
starts the service yes sir we started
running bla bla bla but if I click menu
nice a stop service so if I can see it
click stop service it stops at right so
start so this also gives us an indicator
service is running or not so it's a much
better UI right so for that just to kind
of summarize what we needed to do is we
needed to move some of the
responsibilities of of is service
running or not up to the yumbo
application because that's a that's a
place where we can share the data
between all the various components right
so that's the first thing with it we
move the responsibility of the
application next in our base activity we
we said let's programmatically now
change the menu so I kind of wanted to
add this to the mix because remember you
know we've done all the many stuff using
XML but you could have also done it
using Java right ultimately XML becomes
Java right so this was a good example of
how okay we now programmatically find
that I toggle item and then we figure
out its title and icon programmatically
which is equivalent of what we did
statically here by writing it into this
align items here yes so the auditor
service will updated state so on start
it will figure out it will is service
running
yes so we do it here when we actually
stop the thread so we do it here when we
stop the thread so we set it to true
right so yeah we're doing it you know in
a very very much inside of the thread so
yeah so that's why you can't have a
runaway thread we would know about that
right so we're not doing it in the
controls of we're not doing it in here
or here but we rather drilling inside of
the actual updater which is a thread
that actually does the update so that is
the that's basically the toggle adding
the toggle feature to in the base in the
base activity right so that gives us
that button now simplified a little bit
and it gives this timeline activity that
we can click off okay now here's another
problem that I have check this out
forgot timeline activity menu status
update menu timeline activity menu study
subject I mean it works right but check
out the back button Bam Bam Bam Bam Bam
right so there's a lot of stuff on there
you see the problem well so the depends
on what you would expect would you know
I would expect just to flip-flop between
activities not to the least stack them
on top of each other right does the do
you guys follow not really okay so I
mean from a user standpoint right okay
so let me let me do this again so if I
start the activity the updater service
all right so I'm starting it from
scratch brand-new just started so now
going back to home brings me back to a
home which is what I expect right so now
if I go and restart it from the task
manager right so I restart my yamba
application there it is so now I'm gonna
go to status activity and I say to
myself you know I don't really want to
start this activity I want the the
timeline activity now if I go back
that's exactly what what's gonna happen
but what if I didn't go what if I didn't
go back so when status activity now I
use a menu in the same timeline activity
ok so now what I have on my stack is
look look at this back back
I have it I have it click multiple times
right you see the problem ok so how do
we solve this problem so basically what
we want to do is we want to you know yes
we could override what the back button
does that's one option but the other
option is also we can specify how we are
starting an activity how we are sending
an intent in other words so let's let's
look at intent and see what options we
have because we're now looking exploring
intense all more so there's a way to
specify a flag for 14 10th right so when
we are when we are creating an intent
let me show you so there are certain
flags we can specify so let's see flag
activity brought to front this flag is
not normally said by application code
but itself but set for you by the system
as described in the launch mode flag
activity clear top if said the activity
being launched is already running in the
current test and instead of launching
you is
dictating all the other activities on
top of it will be closed and this will
be delivered to the top as a new intent
so that's that's one option flag
activity clear when tasks reset if said
marks appointed ask dudes that there
should be cleared when the task is reset
exclude from recent forward result
multiple tasks new tasks will become the
start of a new task of this history
stack so so so there are basically
various flags that we can we can attach
to to to this right if said if set is an
intent pass the start activity flag will
cause the launched activity to be
brought to the front of its task history
stack if it's already running so so
these are various ways we can basically
control that I think the one that I used
before is flag or the order to front so
if set is an intent faster activity this
flag will be will be or cause dicted to
be brought the front of its tasks mr.
stack hmm single select it will not be
launched if it is already running at the
top of the history start so that
dictator will not be launched if it's
already running exactly so that may be
good that may also make sense to do
because if if it's already running that
we don't want so in other words check
this out so I don't want this so oops me
so if I am here in a go menu timeline
whoa just launched it again right right
so how do we do that how do we attach
this these intents so we can basically
what we're firing this intense is here
right so I could for example when I do
dot timeline was said add flag right
and I could add a flag you know one of
those intent intent dot dot flag flag
activity single you said single top
right right so that is definitely one
the one thing that we could do with it
is if it's really running that one would
not be started right but we could also
do add add flag because I can add more
flags right I can say intent dot flag
activity the law bring to front or the
order to front right and so on
so for example that that makes sense for
this one for the other one that we get
status I may just add reorder to front
and force for reference and they just
say reorder to front something like that
right we've reformat but on it let's
let's see what happens this time around
so if I do menu then I say time line
nothing right so if you go menu time
line again it's not gonna go back see
bag goes to home which is exactly what
you want so that's good okay so yeah but
so now if I say menu status okay the
same menu status back brings me back
here which is what they want right but
if I go so that's that's too let's see
many status and now menu time line so if
I go back into status which is fine so
I'm pretty happy with this behavior okay
did you guys get that so you can
basically control what there's a concept
of a task right like you know user is
doing a bunch of stuff you can kind of
be in all these activities are getting
stacked on top of each other so you can
control what the behavior of that start
the new activity is we're gonna start a
brand new one or is it gonna bring the
existing one back to the in fact to this
right so we now have all this in a base
activity right so what I did is I just
attached a couple of flags like single
top and reorder to front where the ones
that I chose but they're whole bunch of
flags and you would find their behavior
you know we even see what they do by
going into the into the intent section
of the documentation right
make sense
I'm gonna cap it with this oh all that
you don't let you catch up with this so
before we had this static right so
everything here in the menu was defined
statically inside of our menu dot XML
right so now I get one button for start
one button for stop we said how about we
have a single button and then we
dynamically he will dynamically figure
out which icon to use so I just simply
renamed start stop in to toggle right it
should be since it does it's not a start
it's not to stop it's both depending
right so you have to kind of change the
name so you get rid of stop and rename
start to toggle and you're done okay and
and then inside of the base activity we
did the research to figure out which
which callback gets called and we said
aha on many open is called you know so
yeah I could put here you know called
every time well it's not our method so
I'm not gonna use the Java doc because
that's improper but just as a reminder
called called every time menu is menu is
opened right so that gives us an
opportunity to dynamically now change
that toggle button so I find it just
like this line is the same concept as we
did in find view by ID right so we find
that and then I figure out okay what
should we show should you show play or
pause right so they say okay is the
service running if it's running then I
saw stop pause right if it's not running
I show up play all right
that's that's all that this did yeah so
what we did yes so what we did is we
made base activity the mother of
timeline activity right and and status
activity
so both status activity and timeline
activity are now children of
basic tivity and we moved common stuff
into here so which includes all the menu
stuff so that now both timeline and
status give access to this as well as we
give it the access to Yamba so that you
know just simplified it so that any of
them can just say Yamba dot as opposed
to find it and all that yeah so that's
sort of and as I said I draw it as you
know we now have activity right and then
base activity right as a subclass of
that and then we have our status
activity as a subclass of that right
like that and then we have our timeline
activity as a subclass of that right so
that that's what we did there what I put
in a basic parity so like I said Jumba
and then on create just gets Yamba right
and then all the menu stuff which
includes you know on create options
items on options items selected and the
new one which is on open our menu items
right so that's basically what we did so
and ice like I said this one you know
called only once first time menu is
created created many many buttons menu
is clicked on right creates the menu
right and this one is called every time
user clicks on menu item right that's it
so that that is what our base activity
looks like so four six well and then
again I didn't you use the you might
have used the API for a text but I
actually so this like you said set icon
sets the icon in this case we are
pointing to a system-wide arm so the
only difference is is opposed to saying
our dot you're saying Android dot r dot
so that's the only difference when
you're referring to the sister
them white resources so you just use the
Android dot r dot everything else is the
same
okay so this basically summarizes the
entire base so we did beta we very facto
right now whole bunch of stuff in this
base class so you guys learn about beta
how to how to do that this is more or
less just object-oriented programming
not not so much Android stuff right but
this was very much an Android thing
menus how to how do you handle menus
dynamically right and it brings back the
whole thing of like look we're just
inflating XML and then we can do
modifications in Java as much as we want
and another thing that was new here was
was also how we handled the menu stuff
by attaching various flags to our
intense right bid there was something
also those sort of new because so far we
just used intents as a plane like just
sending an intent over and really
thinking about that too much okay so
that basically now we now refactor our
code to look pretty decent so you know
keeping it whole and complete yeah so
we're gonna take a break now and then
after the break we are going to do
broadcast receivers sound good
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>