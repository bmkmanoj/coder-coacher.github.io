<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>CoffeeScript for Rubyists | Coder Coacher - Coaching Coders</title><meta content="CoffeeScript for Rubyists - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/InfoQ/">InfoQ</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>CoffeeScript for Rubyists</b></h2><h5 class="post__date">2012-01-11</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/EOpG-yqMfHE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">as Ian said I'm Brian Moriarty I've been
well I'll give it an intro about myself
in a in a couple slides but so thanks to
rocket space for hosting this and
actually those other two topics sound
really cool so I'm going to try and get
through this quickly if I do talk fast
it's because when I time to my talk
yesterday was 18 minutes and they gave
me 15 minutes so I hope they're not
going to buzz me but yeah I have too
many slides some of the slides are for
reference and so I'm going to skip
through them really fast and if you're
if it's too fast for you to take notes
don't worry about it because the slides
will be online actually they are online
so Who am I I've been programming since
1982 that's not born one that's the
first thing I programmed on with my
brother Mike who's sitting right there
twins I'm the former lead engineer on
the quickbooks user interface right now
i'm the co-founder of a new little
startup and i'm also an independent
consultant and why am I talking about
CoffeeScript so basically a few reasons
I like concise languages and I've been
doing CoffeeScript for about six months
and I've been doing it in a rails 3.0
app as well as the rails 3.1 app so many
of you know that coffee script is like
the new hotness but that it's it's built
into rails 3 1 but you have to figure
out how to get it into a rails 30 appt
so i'll show you how to do that oh yeah
i just told you what i'm going to talk
about but also how to install it using
it in a pre rails 3.1 app also dealing
with legacy javascript so that's one
question that comes up a lot is if you
have legacy javascript in your app then
do you have to can you mix them and if
you can't then how do you move it over
is a lot of work etc I'll talk about
that
and then and then why Ruby programmers
might like caca script and a bonus thing
one thing that I like more about
CoffeeScript and Ruby I'm a big Ruby
aficionado and cough is Chris pretty
cool actually this talk is not I won't
be evangelizing coffeescript because I
like it but I don't I'm not like totally
in love with it it'll be more
informational and let you decide so
first what is coffee script it's a
language it's a programming language it
compiles to JavaScript and so it runs in
the browser as JavaScript after it's
been compiled white space is significant
the compiled JavaScript output is pretty
printed and you can call javascript
libraries from coffee script and vice
versa there is no like CoffeeScript
interpreter in the browser at runtime or
anything like that since it compiles to
JavaScript before it ever reaches your
browser it just works that way part 1
installing it so there are four steps to
installing it this is the part that I'm
going to whip through because it's not
actually very interesting to hear about
it's more about reference you need to
install node which by the way you don't
like you're not like running a node
server on your server or anything like
that this is just about installing
coffeescript install a node package
manager and install CoffeeScript and
install jazz to coffee so here are the
steps per node and the brew installer
was out of late last time I tried it but
I think it might be up to date now
install node package manager blah blah
blah install CoffeeScript don't forget
the dash G because this installs it in
globally so it'll be in your path which
comes into play the next one installing
j estacado vez cryptic CoffeeScript
converter and if you do npm install dash
G js2 coffee just like that it will
install a version that was new as of
last July so I tweeted the guy last
night he's in the Philippines and I said
hey could you update the node package
manager with the current version and so
he tweeted me back about 30 minutes ago
and he said yeah ok I'm on my way to
work because he's in the Philippines so
maybe by the time this talk is done you
can just do NPM install j estacado
but if you did it straight from github
you will get the newest version part 2
using it in a pre rails 3.1 app so oh
yeah sprinkled with drawings from my
daughters and myself this is this one is
not mine so barista this is how this is
well I'm sure there are other ways but
this is how i'm using CoffeeScript in a
rails 3 point 0 application and the
documentation for barista says
theoretically you can also use in my
rails to point X app which I guess means
they didn't actually test it or
something or maybe they've tried it once
so you just put this in your gem file a
hamel if you're using hamill it has to
go in before barista and then if you're
on Ruby 18 you have to say Jim JSON and
then you say Jam barista and then bundle
install this is also not the interesting
part but then look you can do coffee
script so you put your coffee scripts in
app / coffee scripts and use the dock
coffee extension which is different by
the way I didn't say je esta coffee dot
coffee is different in rails 31 with
with sprockets in the asset pipeline UJS
coffee and in barista is just coffee so
if you eventually upgrade to 31 you got
to rename a bunch of files but who cares
it's not that hard the generated
JavaScript goes into public /
JavaScript's in the right sub folder if
you had put it into a subfolder of app
coffeescript it'll go into the same fold
subfolder there you if you're using
hamill you can also put CoffeeScript in
line with colon CoffeeScript which
barista sort of injects into hamill for
you so there are three well maybe more
but three deploy options that i know of
with barista the default one is once you
just install it every time you run your
web browser locally it will recompile
whatever has changed whatever coffee
files have changed and output them so
it's kind of seamless in the development
environment you're just writing
coffeescript and hitting refresh in the
browser and it's there you can deploy
those if you want that's what my team
has been doing until we recently got set
up on the second off
and the second option is you get ignore
those generated files you add the Ruby
racer to a gem file which for those who
don't know what the Ruby racer is a gem
that gives you access to the to the v8
JavaScript engine so you install you put
that in your gemfile and you a Drake
barista brew to your Capistrano strip
script and that will then run the
compiler on the production server
instead of locally on your environment
which is kind of good because then
you're getting the same consistent
version of the compiler every time I
install it I mean every time you did
play it or you can install the ruby
rayes run production and generate on the
fly there I guess I probably rather do
the second one dealing with legacy
JavaScript so J esta costs ajs the
coffee you give it an input file which
is JavaScript give it an output name
which is coffee and it works does it
need a beautifier well no because coffee
script is like hamill or Python white
space is significant so Jessica fee has
to pretty print it in order for the
CoffeeScript to actually work so it
looks pretty nice after it's done and is
there a coffee to jas well I said think
hard because what is coffee script it's
a language that compiles to JavaScript
so actually CoffeeScript is coffee to
jas okay three second intermission
beautiful painting actually that's a
photo of lucerne that I ok nevermind
part 4 why rubyists might let
coffeescript aka the fun part and take a
water break so coffee script has good
stuff from Ruby it has some good stuff
from JavaScript it has some good stuff
from Python but from reading through the
documentation it seems to be most
heavily influenced by Ruby there is a
lot in there that rubyists would like
hence the talk so I'm just going to dive
into these and I want to do is just like
one slide
topic and some of them are super small
so I'll just go go back go through
quickly so semicolons are just like Ruby
in other words you don't use them or you
can in the middle of the line if you
want parentheses are a lot like Ruby
they're optional and in this case the
the implied open paranthesis extends all
the way to the end of the expression
they're required if you're not passing
any parameters because unlike Ruby in
CoffeeScript there are no symbols so you
can't just use a symbol when you mean a
reference to a function you have to
actually you know you do it like you
would in JavaScript so if you're calling
a function with nope no parameters then
you use parenthesis stabby proc is a lot
like Ruby 19 oh by the way so okay the
cartoon what is that anybody it's a
stabby croc so so the parameters come
before the stabby unlike Ruby 19 and
this is the way to define a function
there is it's not like an alternative
for something else this is how you
define a function in in CoffeeScript so
here's an example of Fibonacci and if I
can click on it up at the top there's
the result I was well that was actually
executing real CoffeeScript there
because i'm not using keynote or
powerpoint this is using show off
written by Scott Chacon of github and
it'll execute CoffeeScript right there
in the presentation so that was pretty
cool when I found that so there's other
stuff that you'll see in this example
that I haven't talked about yet but I'll
get to it when you're defining a method
they are the rules about parentheses are
kind of the opposite of when you're
calling a method unfortunately so if
there are no parameters to the method
then you don't have to use parentheses
in the function definition going back
you see this one again fib equals
premises ms debbé and there's no
parentheses on this one I'm defining a
method called Claire fashion clearance
ease if you want
string interpolation interpolation is
just like Ruby so run this you had me at
hello you can do here docks which also
have string interpolation if you use the
double quote version of the hair doc
you're here doc syntax you can see it
here here's three quotes so it'll notice
where the line feeds are it's not it's
ignoring the white space to the left
which is nice it because it's because an
indentation is is significant in
CoffeeScript so this is something that's
more like Python and Hammel then like
Ruby ending a block you do that just
with white space so white space as I
mentioned is significant in CoffeeScript
so the end of that if expression is
right after the the next line and result
is a method that just ends down here
default values for arguments this is
just like Ruby page equals 1 variables
are declared at the first time they're
assigned this is this is exactly like
Ruby and it's very different from
JavaScript CoffeeScript has no var
statement so you just assign a variable
when you're ready to use it and it
compiles to declaring the variable and
assigning it to reference a variable in
two methods you have to assign it a
value outside store and retrieve are
both methods here and if you want to
access that variable that cash variable
from website both you have to assign it
outside both in fact the documentation
even mentions Ruby this behavior is
effectively identical to Ruby's scope
for local variables speaking of
variables there are no Global's in
CoffeeScript that was intentional so all
the generated CoffeeScript goes into an
anonymous function like that your code
goes here and if you want to access
something globally like across files you
have to attach it to window so it has a
post pics if just like Ruby
it has unless and post-fixed unless just
like Ruby everything is an expression
just like Ruby so the last statement of
a method is an implied return just like
Ruby and so it's starting to feel
familiar isn't it starting to feel kind
of comfortable there's no ternary
operator that it doesn't have the ?
colon syntax but just like Ruby if them
else in a line or across multiple lines
even is an expression so you can do
something like this language equals if
server-side and Ruby yells coffeescript
and that's the equivalent of the ternary
? colon and those birds are turns and
there's three of them so it's a ternary
of turns thank you thanks so the I got
one so the for loop syntax is just like
really for movie in array do something
with it ranges are very much like Ruby
that syntax is exactly the same and like
Ruby two dots includes the last element
and three dots does not and like Ruby
that doesn't make any sense it seems
backwards but that's the way it is so I
say it's they're a lot like Ruby because
they're not nearly as rich and complex
as ranges in Ruby this just compiles to
a big long array 1 2 3 4 5 @ sign
property or attribute is just like Ruby
it's a shortcut for this dot property
then is also just like Ruby if you want
to have a one-line if-then statement you
could also have done this as an Turiaf
has key but this works especially well
for if then else the existential ?
operator so this is like rubies nil the
normally in CoffeeScript the if
expression syntax means exactly the same
thing that it means in JavaScript so
that means it's not null or undefined or
false or empty string or 0 or not an
just like JavaScript but if you want to
say is this thing neither know nor
undefined like like the equivalent of da
tell you it's you would put a question
mark on the end you can put multiple
assignments into a single statement
similar to Ruby the only difference is
that you put brackets on both sides or
you put back is on the left side and the
right side you can swap variables this
way you can call a method that returns
multiple values you can do splat or
assignment to assign like all the rest
of the values into an array things like
that all right the suspense is over with
the one way coffeescript is even better
than Ruby ? dot this is awesome till
it's like rubies try syntax or the and
am gem but much nicer much better syntax
then try so if you call if you do ? dot
on null or undefined it doesn't raise a
type error it just returns undefined so
like if I execute this whoops execute
this expression it says undefined
instead of instead of raising an error
type of person ? name returns undefined
and on the next slide this is why it's
so awesome it's great for function
chaining person is just an empty object
and oldest kid equals person to kids ?
bracket zero ? name ? first and that's
not going to raise an exception that's
just going to return undefined so that's
pretty sweet in conclusion there are
lots of other things I didn't mention
even though I talk about a lot there's
an optional yamo like syntax for literal
for object literals there are splats for
variable arguments there's other cool
stuff and these are the things i use to
reference this by the way full
disclosure i stole a lot of this info
straight from CoffeeScript org I didn't
just invent this but like the examples
and stuff coffeescript org is great it's
got tons of documentation here it is and
can see it's really really long and has
this awesome little try CoffeeScript
thing where you can type into it and it
compiles it to JavaScript so that's cool
and j estacado org has a two-way
playground not just one way so I can
type JavaScript and it'll show you the
CoffeeScript or i can type coffeescript
and we'll show you the other JavaScript
and then barista Thank You the boldface
thing in the middle there be Moriarty
github.com / CoffeeScript dash talk
that's where these slides are if you
want to go back and reference the stuff
about barista and about how to install
coffeescript and Jessica fee and all
that stuff it's right there and cartoons
by me and Rosie and Elizabeth my
daughters thank you very much</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>