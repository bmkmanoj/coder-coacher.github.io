<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Using Webpack to Streamline Modern Web Application Packaging and Deployment | Coder Coacher - Coaching Coders</title><meta content="Using Webpack to Streamline Modern Web Application Packaging and Deployment - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/InfoQ/">InfoQ</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Using Webpack to Streamline Modern Web Application Packaging and Deployment</b></h2><h5 class="post__date">2018-02-16</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Odlb0BOGp7o" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">all right my name is Kevin gross
nicklaus I'm gonna talk to you today
about webpack introduce you to what web
pack is we're gonna spend an hour like I
said it's gonna be very demo heavy I'm
gonna show you I'm gonna give examples
different projects everything I'm the
show today I'll share a github repo with
you first thing you notice is I have my
contact information up here if you were
in the last session with Spencer
much like him and many of these other
speakers here I'm more than happy to you
know respond emails Twitter DM is
anything if you walk out of here and you
say man I wish he would have talked
about this or he alluded to this but
didn't give a demo of it or what should
I be doing next shoot me an email and if
I don't respond right away I apologize I
get a lot of emails because I share my
email a lot so it's not because I'm
ignoring you sometimes things fall
through the crack just ping me again and
say darn it I asked a question and I
will definitely get back with everybody
who writes me I also have cards if you
want a card but it's to get that email
so to kind of level set in how many of
you have used web packing anybody here
would come in here with experience good
so a number of you actually that's a a
growing number it's becoming more and
more popular I've given a similar talk
or included web pack and talks that I've
given for a couple years now and 2 3
years ago if I'd asked that question
you'd have got one person it was
something people heard of we I work for
a company called architect now in st.
Louis we're a product development shop
so we build mobile apps web apps we
build help people launch software
products web pack is a big part of what
we do we're also an angular shop so I
will admit that lately
all of our angular apps are using
angular CLI anybody here use angular in
your CLI a number of you I'm going to
demo that if we have time at the very
end but still users web pack they just
hide web pack from you if you use the
CLI so we spent many years writing our
own web pack scripts it wasn't a
full-time job by any means as you're
gonna see in this talk somebody or as
you probably know the many of you that
have used it web pack is nothing you
code in it's just a tool that is part of
your development chain it takes your
assets that go into a web project
whether it's JavaScript mainly but your
CSS your sass your images it manipulates
your ass
as part of the development process we
use webpack heavily every day as we code
developers have it running web dev
server and we edit code in our favorite
editor and we see the results in our
browser we immediately refresh when it
comes time to do a deployment web pack
is part of that we publish it runs a
different pipeline it compresses things
minify things and then it pushes all of
our code into a smaller set of files
called bundles and those bundles are the
things that ultimately go out to our web
server in production or stage or
wherever they may go so we got really
good at web pack and by we I mean one
guy on my team not me
web pack was brought to my team I have a
young kid working for me he's 24 he was
the youngest we just hired a younger kid
they're getting younger and younger and
I'm getting older and older this kid was
a web pack expert is and he set up web
pack forests taught us all how to use it
and honestly we had a pattern that we
just went a new project starts we take
the web pack config files and move them
it's nothing that we modify
significantly and that I would assume is
very consistent with how many of you
many of you who use web pack and how you
use it nobody sits and tweaks it every
day if it doesn't do what we want it to
do somebody figures that out and makes
it I'm gonna explain all the concepts of
web pack give you some demos today but
ultimately whether you use it or not if
you go back and decide that this is
something that's going to benefit my
team you're somebody who's going to have
to figure out how to set up these config
files get the process tweaked and
working and then distribute it to
everybody else what else from a
housekeeping standpoint I have an hour
I'm gonna be happy to answer questions
as we go but I'm gonna dive right in
if you those of you that got here early
I know the screen is not super huge
given the size of the crowd in the room
but I apologize I'll try to make my
fonts and everything else as big as
possible I'm gonna do stuff in command
line web pack has a very nice website
some very nice images I always show this
image web pack is a module Bunder
bundler many of you and my team was the
same way prior to using webpack we still
did these things these things are
important as part of your development
process we use grunt we use gulp other
scripting tools so we had other ways of
achieving these goals webpack came along
we quit using those other tools and we
achieve those goals using this tool
webpack is a command-line tool
it's a command-line tool that you can
type parameters into or you can give it
a config file that is a module that can
do everything we're going to do both
today but webpack takes pieces of your
web development stack when I say pieces
it takes assets that have dependencies
javascript typescript your CSS images it
runs them through a pipeline or it's
configuration and it outputs a smaller
number of assets so it doesn't lose
anything it takes everything this big
mess they have on the on the left and it
bundles them into smaller packages why
do you do that there's a number of
reasons efficiency it minifides things
less chatty websites when you look at
one of our websites that we've built
using an angular or react and web pack
is a big part of that process if you
open up your development tools in Chrome
or whatever your favorite browser is and
you look at network traffic instead of
getting a whole bunch of downloads of
JavaScript if I can usually look pretty
quickly and tell if somebody's use
webpack on the server because what comes
down is a smaller number of three or
four bundles I don't see a lot of
individual you know files come down from
the network and it tells me a little bit
about how they built something web pack
is nothing you install on your machine
web pack is delivered via your favorite
package manager we use node we use NPM
nodes package manager so in most of our
projects this is I just opened up a
package JSON I assume any of you
familiar with node anybody familiar with
node out there and NPM so that's that's
how web pack comes down it's a dev
dependency you don't actually deploy a
web pack anywhere it's part of part of
your process you'll see a whole bunch of
things here web pack web pack dev server
some helpers you see the term loader
plug-in all of these particular things
go into my demo today but web pack is a
small command-line tool that is very
extensible so the people that built web
pack really just built this thing and
they came up with this concept of
loaders and they came up with this
concept of plugins and entry points and
outputs and we're going to talk
terminology
other people added to the ecosystem by
writing these plugins and creating
plugins that do new and more creative
things than the original web pack you
don't just ever use webpack by itself
you use webpack in addition to other
things so I've got a sample here that
just uses a few of these copy loaders
we'll talk terminology when we get into
it but I also have a little sample
Visual Studio project here that just got
some simple files this one happens to be
called file one j/s it's a JavaScript
file and it is very complex one of the
simplest files you're probably see today
just does a document write and say
JavaScript file 1 is loaded I could
deploy that J's file out to a web server
and add a script tag to an HTML page and
have that JavaScript file come down and
execute accordingly instead I want to
show web pack you know it's loaded I
just typed web pack didn't do anything
it just said you got to tell me what to
do so two terms you're gonna hear a lot
if you get into the weeds of web pack
and what we're talking about today one
is input web pattern entry sorry entry
web pack you point web pack at a file or
files in your web project and say this
is the starting point now what the
starting point mean to you it's not a
URL or a default page if somebody
navigates to the entry point is really
the starting javascript file or asset
that web pack is going to start its
bundle search from what I mean by that
it's going to scan that file for it is
that file have any dependencies ours
here does not other ones we're gonna
show in a minute do have dependencies
it's gonna look through that file and
say this file depends on this other file
this other file I'm gonna grab this file
and the other file I'm gonna scan the
other file does it have any pendency
it's gonna walk every line of JavaScript
in your application and see what they
require and when I say require we're
talking modules JavaScript modules
common J's system J s the new Ekman
script module system whether you know it
or not anybody just sit in the
typescript class right before here that
typescript class he used the import
keyword a lot typescript you import one
filed it depends
another file through the import keyword
I say import this class or whatever from
this other thing that is a me declaring
a dependency so a lot of what I'm going
to show today is going to use typescript
I'm a big typescript fan but here's the
simplest use of webpack I'm going to
type web pack and I'm gonna give it an
entry point my entry point it's a it's a
path here but ultimately it's this file
document right I'm gonna give it an
output so I take an entry webpack does
its thing and it generates an output and
I've got this open there's an empty
folder here in this WW route if I hit
enter web pack is going to do its thing
this seems like overkill yes for one
line of JavaScript I get some output
here it says I ran web pack I happen to
be on version to 100 beta 21 that might
be old I've given this demo I really
haven't updated my web pack in a while
on this particular sample but it says I
took this file and I generated an output
let's go look at what it generated if I
look at that file I have it open in
Visual Studio code I just pointed it at
that folder this is that file some of
you are wondering what on earth that was
one this tool can't be efficient it went
from this one line of JavaScript to 75
lines of JavaScript is what web pack did
this code that is in this output Jess
this top part is nothing I wrote web
pack injects this and adds this to your
output bundles web pack keeps track of
all the dependencies and writes this
little boilerplate code here for you to
make sure everything ties together and
runs you don't ever mess with it don't
play with it don't edit it it's volatile
it's going to get you race next time
you're wrong run web pack way down here
at the bottom is my one line of
JavaScript document right
it keeps a big array notice this is in
an array it's a array of functions that
it just calls back and forth from one to
the other and I show that day in a day
out we never look at this code this code
just runs I'm showing it more here for
you know purposes of explaining how the
process works to see it a little better
I have
second file I have file - file - says
I'm from file - and it has they require
this require is me declaring a
dependency it will pull in the contents
of file 3 and file 3 he just says I'm
required to be here now these are very
very simple examples so I could show it
if I run that same command line and just
pick a different entry point the only
difference between an entry point 1 and
entry point - file - as a file - is not
stand alone
the webpack command line I mean if I
want to visually look at it tells me hey
I actually bundled two files together
into one output file so instead of my
output file has now changed this is the
bottom of my output file it now has a t1
lines here I'm just reading the line
numbers but it has document right I'm
required to be here this one says I'm
from file 2 and it's calling webpack
required the zero-based array of that
other function so it handles all making
sure your methods get brought in and
your other files get used so that is the
simplest way to execute webpack give it
an input tell it where they tell it
where the outputs go it's going to do it
we never use webpack like that it would
be tedious to command-line process all
of that stuff instead we take that same
concept and we create a web pack config
just like anything you the nice thing
about this config files I could commit
it to my git repo and it can be used by
my build servers all my other team
members they get latest you know
somebody configures this once and it
gets versioned with everything else I
can go get a particular branch or a
future branch or whatever the web pack
configuration that's current with that
branch comes down with it so this goes
into our projects and this is how we
configure it the config the way web pack
works is they do their config as a mod a
class that they put into module export
this is the simplest version here I can
have an entry and output these are just
two properties or object properties
of the the output entry tells me where
my input file is I have the one back to
file one output I give it where my
output it's gonna go simple enough
this essentially accomplishes the exact
same thing I just did the longhand way
in the command-line so in the way to do
it this way is instead of giving the
command line and input or an output I
can just give it - - config down here at
the bottom and give it a particular
config file we generally have two config
files maybe more in our projects we have
one for development because we might
want a particular web pack configuration
that the developers use while they're
coding and while they're working on a
project when it comes time to deploy we
have different things we want bloodpack
to do so we just have a development
production web pack config file we as
I'll show you later as we get more
advanced we do share a lot of codes so
there's some common web pack stuff we
put in we import it into both
development production so we don't
duplicate so we can specify in endpoints
terminology again entry and output this
I'm gonna truck along so I'm get a lot
more demos in so some of this stuff
again web packs one of those things you
struggle with for a short period of time
you have to figure it out this is I want
to do this the angular team I bring this
up because many of you said use angular
we got to work on my projects we had the
same web pack config setup for every
project you know we might be working for
completely different customers doing
completely different stuff but the
general technology stack was the same we
just said all the projects up with
similar folder structures so that web
pack just knew where to do with
everything and it was a best practice
and it worked why reinvent the wheel the
angular team kind of came to that same
conclusion they really promoted web pack
they said if you're building angular 2
you know when typescript or whatever
hang in a for an hour just angular
there's just certain web pack settings
that you should use that really work
well with the typescript and how we set
things out so when they wrote their
command line interface angular CLI they
said let's just build web pack in with
best practices already set
and all the right folder structure and
everything else so that people don't
have to reinvent the wheel if they want
to write their own web pack they can but
for the most part out of the box create
a new angular project web pack is ready
to go so that's an example of heavy
Rives they did that knowing that they
don't care how you use angular everybody
can be building different angular apps
but using this tool
they just baked it in and if you want
you can get the config files out but you
don't generally this example is a little
bit more complex thing so two more time
we got entry we got output another term
you're going to hear with webpack is
called a loader I don't know why they
came up with this term it's a little
confusing but in the web pack ecosystem
web pack is extended by loaders loader
is a file that there is a think of it as
a I don't want to use the term plug-in
that because that's another thing but
loader is a step all the file individual
files that are found as web packs
running through your project are passed
through loaders so one example is
typescript I can have a loader for
typescript if it finds at an asset in
your web project it's a dependency and
it has a dot TS extension its typescript
so there is a typescript loader it says
okay this is a type script file pass it
through this loader and then take the
output and the output of that loader
process is what gets bundled what would
you use a typescript loader for it
compiles the typescript so it takes the
input the dot ts file compiles
typescript down to J s and honors all
your TS config settings and then the
JavaScript that is the output is the
thing that gets bundled so every
individual file if it's a SAS file it
will run it it'll compile it down to CSS
if it's a there are some loaders that
are just raw that just takes the input
and passes it through every file you
want to go into your output bundle is
has to have a loader what does that look
like there's a section here called
loaders I have a regular expression I've
got a loader for HTML I've got a loader
called awesome typescript loader this
one there's a test this is the regular
expression for the file name this is the
name of the loader where do these
loaders come from they are also things
that come down via NPM so if you find
somebody write a blog post about you
know
to set up webpack and they got a loader
they're gonna have to tell you the NPM
name and the version and you're gonna
have to go add that back down here to
your packages config so I have whoops
package that JSON I have awesome
typescript loader I can use it by name
it will find those loaders in your
packages folder that makes sense so the
trick to web pack is knowing what a good
entry point or multiple and knowing on
the flip side what loaders you want to
use I've got a test down here for images
and fonts these are if you look at that
bottom regular expression
these are file types that are generally
static files on a web project I
basically there's a file loader that
just moves them over and this is the
simple three three loaders or so there's
not much in a production I'm going to
show you some of our production web pack
stuff later it's got a lot more we might
have ten depending on the file types and
things we want to do loaders run per
file so that's probably know the term
loader web pack runs and per file I've
never written one myself my usage of web
pack is just finding ones there's for
most web scenarios there's already an
ecosystem of these things that do
whatever you want you likely could write
them very easy the next term is plugins
plugins happen after all the loaders or
all the assets have been found all the
loaders have piped whatever they need to
do on a profile basis plugins are kind
of the final step in the web pack
process plugins move things around they
they do different things I've got one
here called copy web pack plug-in this
is just copies files I give it a you
know move all the files from this folder
of this folder if the plugins step would
be you or your team or whoever on your
team doing all the final file
manipulation for how you want your stuff
set up so in this case I have a copy web
pack plug-in that just moves images to
another images folder it is worth
pointing out my structure here I guess I
didn't point this out earlier we
generally never develop our projects in
our dub dub route we build a kind of a
we follow most the real
and the angular conventions all of our
actual assets in our code goes into a
source folder it's very difficult to see
here in visual studio but it's
highlighted in my solution Explorer we
have this source folder all of our code
all of our images our setup goes there
when we run web pack takes all that
stuff runs its loaders generates its
output moves files whatever we tell it
to do it does those things and moves
that content into in a visual studio
world what would be my dub dub route so
there's that pipeline or that pipeline
as it's doing that manipulation the
output of all that manipulation goes
somewhere else and that means that my W
W route is very volatile and delete it
on a whim we never commit it to get it
doesn't go anywhere those files I just
rerun web pack and they're all
regenerated so we delete it all the time
we even have steps in some of our web
packs it'll just delete the folder so we
don't end up with you know files that
are hanging because we remove something
but it got regen or we remove something
and the file just kind of hangs around
and goes replaces so we don't put
anything here and in the demo I've got a
source test files I've also way down
here got dub dub root there is a file in
there because I've ran it a couple times
so if I run this one I've got a type
script file this is a simple as type
script file as you can have I've got a
type script file that imports a class
called person so this is a dependency
that person is sitting here person dot
TS is also in there I declare it and I
set some names and then I write it out
very very simple type script but it is
tight script
it's called file v if I run
clear this out
webpack gets a little tricky to debug it
they do a very good job about outputting
if I would have any errors in here it
would all show up in red but you know we
read pack runs a lot for us so we
constantly keep an eye on it we keep a
console open setting it up that first
time you're going to go back and forth
many times I don't want to belittle the
frustration you're gonna run into and we
make major changes it's not like we just
know what to do we find what we our goal
is and somebody might go in there and
spend an hour to tweaking it and getting
it to work once it works we never touch
it again we've got it set up for us but
we do spend time looking at all these
red error messages like why isn't this
found or what did I do and the logging
isn't terrible but this particular build
actually took in my typescript whoops
wherever it went
opening a lot of files for I apologize
it took in my typescript it found file
this one it went and found its
dependency because it knows when it
parses typescript that this import
person is a dependency so when I say an
entry point in a typescript world you
give it the using angular example a good
entry point would be your app module
your bootstrapping code for an angular
app you pointed at that since that
module has dependencies and all the
imports and all the things that it will
walk your entire angular app pull
everything together into one big file
which might seem weird many of you are
thinking why would you want everything
in one big file I can minify it I can
version it
I don't code that way my code is still
all broken out into many separate
individual typescript files but my
deployment and as I'm debugging it's
very nice to deploy it that way not only
does it pull your typescript in it pulls
in all your component front and all your
HTML so everything is bundled and I'll
show that in a second what does this
output look like though I've got bundle
way down here my compiled typescript so
this is what typescript this particular
thing compiled looks like it declares
something it's got exports and you know
it writes it all out again I don't
generally other than when giving a talk
like this pay particular attention to
how this goes in it it works very well
but it is all compiled
and all the dependencies were found I
even had a sample images folder in my
source under source so all my assets my
CSS my images icons anything that copy
webpack plug-in that ran at the end
moves things for me so another web pack
plug-in that I kind of just brushed over
loaders all my loaders were found have a
loader for HTML it just moves my HTML
over I have a web pack plug-in called
this is another example of something you
can do
gone are the days at least in my world
where I spend a lot of time in my route
HTML page or pages adding script tags I
don't go add a new type script file over
here and then add a script tag so it
comes down this HTML web pack plug-in I
give it my route HTML page and it adds
the script tags for me it moves it into
my output and adds the script tag so I
do I just get the path my index dot HTML
this is the simplest index that HTML
possible this is just whatever Visual
Studio creates note I have no script
tags
I have no CSS I have nothing this is I
could I mean in our projects we do add a
title and we set it up a little more
than this but we don't add the script
tags what happens is the end of that
particular config this step says this
particular says use this as your root
HTML file whoops
sorry keep scrolling index dot HTML move
it from wherever I point at into my
output next to everything else and add
all the script tags for me so if I look
back at this index that HTML that was
moved over it looks the same as the the
default one the only difference is now
there's this script tag down here that
says type text slash JavaScript sources
bundle dot J s so if I've got more than
one output which I'll show that and talk
about why we do that it would add
multiple script tags so it can add your
CSS up top it'll add things wherever you
want them to go so that is just a web
pack plug-in somebody wrote to solve
that particular issue
this one is identical so one more quick
thing I'm gonna get I'll switch gears
get a little bit more advanced to show
you some like my day to day development
process and how I code I've got a web
pack this particular file name is web
pack dot file v dot prod another thing
that you can do at the end another
plug-in I'm showing just some random
plugins that are common in my world but
I'm also using them as examples
hopefully giving you some sense of why
you would use this tool and what they're
for I I told you earlier we have one web
pack set up for developers as we're
coding we have another one that we use
during the build process we're big into
automating our build cycle or continuous
integration I got a build server the
build server gets latest of all the code
out of yet it will run all the web pack
to generate all the assets on the build
server so we script that so this happens
automatically one is the production or a
sample of production the only difference
in the other is it uses this web pack
that optimized that uglify j/s this is
very common in all of our build stuff
what happens here I will run it
this thing runs it does basically the
same thing whoops
except that added final step that added
final step whoops wrong one minify x' it
removes all comments and it minifides my
project this is one long line of code so
now I've got one line of code all
comments have been stripped we have a
plugin we use in production that removes
every document right it removes all of
our divide it'll literally scan our code
if we've left debug code in our
JavaScript that's fine for development
we never want that code to go live so we
remove all of our law our console logs
and everything like that there's webpack
plugins that do an amazing amount of
very cool things for your project this
one is the most common at the end of all
other plugins minify my code so my
JavaScript is my type scripts been
compiled all my assets have been pulled
together I didn't show it one of these
examples file for pulls in some HTML I'm
going to show this elsewhere but there
if in an angular react world will react
you always have your HTML little it'll
do all of your tsx and JSX management
for you it'll it'll do all of these
things as part of this build process it
will embed it'll run you it'll compile
your sass so let me like I said switch
gears here's a little fancier project
I'm just showing you a simple UI as
angular really simple angular project
that I've used in another demo so I keep
it around it's written in angular 4 or
just angular again I keep using the long
term
if I look at my network traffic and
refresh whoops this is my development
process how I work I did NPM start the
biggest thing that webpack does for us
is not all that cool stuff but the thing
that affects my life day to day is that
that cool stuff how do i code and look
at what i'm building and have all this
web pack do its thing and not introduce
any errors I need to be able to debug
right I need to be able to run code
change code see the output
add typescript work on my web project
web pot web pack comes with one of the
things that you can install is the
second one in the list here web pack dev
server so they include a nodejs web
server that will basically like run web
pack with the setting to use that it'll
run all the other stuff the loaders the
plugins the inputs the outputs all the
things that I talked about it'll do that
and in the end it won't just quit it'll
sit there and watch my folder it'll
attach all of the stuff that it just
output to that web pet it'll do it in
memory so when I use webpack dev server
no files are ever written it attaches my
code to my browser and lets me sit here
and change and I'll show this where's my
console not that cons I got a couple
consoles open here so if I sit here this
is my code my browser for this little
project it's an angular project web pack
is sitting here it ran you see it's a
little fancier I've got a couple inputs
and outputs I'm gonna show it did
vendors I did index.html there's one
called vendor scripts and main are the
names of my outputs and I'm going to
talk about this because we generally
don't bundle everything down to one file
we leave it three or four for various
reasons but if I change my code anywhere
this particular file my home page this
is a that home page I don't know why
kevin smith i changed my name to gross
new class right and i save i switch back
to this guy
it just says web pack bundle is now
invalid whoops and it just well I
switched years it switched and now I
didn't refresh for me it has my name if
I try to get that right Kevin Jones and
I save it rerun runs everything again
should refresh my browser make sure I
saved I did not know I did and it
refreshes my browser automatically so I
get the benefit of web pack and I get a
very handy development environment so I
have an editor all my team sits around
on their favorite web editor we don't
use Visual Studio as much as many people
think we use webpack we use Visual
Studio code we use all kinds of
different they're not web heck we use
webstorm sorry editors whatever your
favorite web editor is we also keep a
command-line tool we keep a command
prompt sitting there at all times
lots of ide anymore are building that in
if you use Visual Studio code or
webstorm they actually have terminals
built into the IDE and they will
automatically a lot of you even know
about web pack and they will run and do
this but so I code over here I keep my
browser if you've got multiple monitors
this thing attaches web pack so I tell
you we have a development in a
production web pack config the
development configures the one that says
open my you know use this development
web server and I pick a port and it
keeps it open at this port if I go to
inspect I'm a big chrome fan it works
well during development it's not the
only browser we target if I go to my
sources this is I'm just looking at the
source this is my angular app down here
there's a section called web pack it
actually if in development when you're
that dev server it does everything in
memory so it doesn't eat up this space
or it makes it faster it attaches it
down here I can still get to all my
source I could still see all of my
typescript find that home page that just
done do anything I can still set
breakpoints let me find somewhere
there's code so I just hit a breakpoint
even though webpack is running I go back
over to my editor change my type script
debug use all of these tools webpack
reruns and everything comes in here very
nicely so I the development process is
very efficient if we're doing
server-side api's we're a big dotnet
asp.net core API and Azure we've got
Visual Studio running our API sitting at
one port we've got webstorm doing our
front-end and reactor angular and
webpack is the guy that's building and
packaging everything when it comes time
for me to deploy this particular project
well let me look at this config file
first this particular project I've got
for JavaScript files so we as just a
matter of practice have kept all of our
web pack settings and configs stuff in a
file and a folder in our projects called
config
different people do it in different
places but we've got prod and dev dev
being the one that has in it this open
browser plugin it's got dev server stuff
at the bottom I tell it what port I want
to listen at so down here it said
there's a section for dev server whoops
my mouse wheels getting away from me I
apologize what port it'll do its history
port is setting we have an open browser
plug-in that means at the end of the
plug-in don't don't manipulate files
anymore go ahead and open a browser so
that we don't have to constantly do that
then we set up the dev server and that's
in our death and our production
deployment we don't do that we just want
to generate the files we generate my
physical files and we're going to push
them somewhere and then people are just
going to navigate to them
we also share some common code
we have a webpack common we've just got
a lot of little utility classes and set
up that we don't with it's the same in
production and Deb's so we use those
here we put them in a third file makes
our life easy we set up some constants
and stuff like that this is worth noting
I told you earlier some terminology
entry and output we have four entry
points this is where webpack gets really
cool it it it it trims our trees it
pulls in all their vendor stuff vendor
TS vendor dot TS is one of my entry
points what I mean by vendor vendor is
angular or react or any other
third-party libraries I didn't write we
pull in all these things from NPM we
have this vendor dot TS where I do
import and in this particular example I
pull in all the angular stuff those are
my core angular things I'll pull them in
once I bundle even though I'm using
angular nobody that goes to my website
sees angular anything come down they see
a vendor TS or j s that vendor dot j s
is one big file that has all of my third
party stuff bundled minified everything
else for it on the flip side I do
polyfills if you ever get stuck in cross
browser hell polyfills are some great
polyfill libraries out there that will
basically backfill IE we really only use
polyfills because I II anymore and some
outlying things but polyfills are
javascript libraries that when loaded
will detect the browser and ensure kind
of standards compliance across multiple
browsers we don't mess with it much but
we include polyfills as our own thing
CS we point this at my main sass file my
a CSS file this does all of that and
then my app so when somebody navigates
to this particular app five things come
down index dot HTML and those four files
and it seems weird but it works so if I
come here how does this debugging work
because the dev server knows to attach
the map files to map source code back
and forth if I run this go to network
run
oops hit my breakpoint but this is what
came down oh there's six
so I dang it
keeps hitting my breakpoint refresh it
no Bricklin I hit breakpoints everywhere
sorry there yeah refreshed the only
reason it did it twice is because I'm
making an API call so this first one is
the API call there are some WebSocket
things here that are the web server but
I've got polyfills vendor app in main
and then some angular stuff down here my
API callback in jazz that was not me
that's just happening because of the
node web server but my app is all
bundled you what what about all this
HTML stuff in here I mean this thing
actually has markup that markup is
embedded in that markup is pulled into
those bundles so I just searched for
KCDC because I knew that I had used this
in the title of that page this is that
minified I'm using Visual Studio code it
does word wrap so that's the reason it
all is not there does not look like it's
one line it technically is one line
because it's been mana fide all of my
markup everything is bundled and
minified it strips out all your comments
it does not strip out this vendor is
angular it does not strip out your
license information so with angular it
does keep all the copyright data it and
honors all of that but all of these
things are different pieces of angular
each each of these is likely a different
file and all of the angular builds so
here I've ran a production web pack it
built app polyfills vendor and all my
CSS is in there what is this mess
another nice thing that you can set up
web pack to do is in your output switch
back to visual studio in my output down
here wherever my output is my production
output I can say I don't have to give it
a specific name I can say file name and
it will use the name of the input so
this is a
like a tag I could just call this I
guess in this case I got four inputs so
this is the name of the input and then I
put that bracket hash it will actually
run a CRC get a hash for that individual
file and add that to the file name it
will also do that same thing when it
adds the script tags another advantage
of having the script tags get add it
that way
why is that good because it it defeats
all of your browser caching issues so if
you just have an output file called
bundle j/s and you release a major new
version of your app bundle dot j/s is
now better because you fixed all the
bugs and added all the better features
but that user doesn't see them because
inevitably they're using some browser
that just keeps that javascript file
forgets to update it then you have to
tell the user hold down control or clear
your cache or do all of these things
when we deploy as part of our name for
our output files we put the hash in
there have webpack do that and it solves
it the next time we push unless the file
contents were identical that hat and one
semicolon different set hash is going to
be different so the next time they go
they don't really care what the files
are it's all behind the scenes stuff but
for me I am assured that the browser
will not cache that file unless it's
identical so it all works out very well
it's another little odd piece that web
pack does for us so it bundles
everything into a small number of files
and it names things it injects things it
strips out all of our debug code it
makes it very small when I say it makes
it very small if I look at these scripts
this is that folder app polyfills and
vendor i've got 180 K 100 K and 1.1 Meg
for the vendor and I could probably trim
that down as well I've just left I went
in and told it pulling all of angular so
it took everything related to angular
and bundled it into that file now
assuming I don't update my NPM package
this file I eat the cost of downloading
at once every time I deploy assuming I'm
using the same version of angular this
hash and this name is always going to be
the same right so once they've
downloaded that the next time they you
know
I edit my code in Addison feature the
only thing that's gonna change is this
app this is the only this hundred 80k is
all that's gonna come down so we
actually get extremely efficient
throughput and extremely efficient use
that that caching is one of the reasons
we break into multiple outputs see what
I'm saying if I if I would put I could
put all these in my app j/s but then the
issue is every time I change one line of
code I know this other file isn't
changing so I'm trying to move as much
stuff that I know is static into a
single file output and be efficient
about that and you can move these around
the nice thing about webpack is remember
that first thing I showed you it at 75
lines of boilerplate code it is
extremely good about not duplicating any
code it knows that it put all the
angular stuff in this file so it didn't
put it here even though here depends on
it
it keeps track of all its dependencies
as its building all of its outputs and
even though the outputs go into multiple
files it still knows you know at some
point in this app we're calling into
this file vice-versa I don't have to
worry about any of that webpack takes
care of it for me we write code in much
the same way that we've always written
code we really fundamentally don't do
anything different what we write other
than we have to know what we do
different is we keep a web browser open
and we sit sit here and change you know
use our editor and we write typescript
react we do web type projects webpack we
from project project we just take the
settings we know we have to keep a
command-line tool open I prior to giving
this talk I went and created a little
how many of you use angular a bunch of
used angular CLI I used angular CLI to
create an empty angular app when I do ng
serve I just wanted to point out that
that is how they bundle their stuff they
do in line bundle vendor bundle Styles
bundle main bundle polyfills we had kind
of followed the angular convention back
before they built it into the CLI that's
why ours was named the same thing we've
been doing it for years
when they came out to see Li they just
embedded pretty much what we had already
been using so we kind of just quit using
our own and started using theirs they
didn't do everything exactly the same
but honestly there's was better for
number of reasons so when we create an
angular app we pretty much keep them but
the process is the same instead of me
running web pack with the config file to
you me running the web pack command line
I do ng serve which is an angular
command line deal notice that is web
pack behind the scenes it keeps this
browser open and it sits and watches
it's got a file watcher so if I did edit
code anywhere in my source folder I
edited this if I save and go back to my
browser it autumn it beat me to it but
same basic thing we use webpack whether
we this is Visual Studio code do what I
don't actually know don't read her
question was what goes into the inline
bundle we we do vendor we do styles we
do main I don't know what they I
couldn't give you a good example nothing
here whatever it is it's zero bytes so
they admit it but it didn't pull
anything in but they're following the
same thing if I turn around and want to
do a whoops
it's ng prod
when they build they have a built-in
build script that does the same thing in
G serve I forget what the build generate
my lack of of using this it's all built
into our process but they do the same
kind of web pack that we do when you do
a deployment build using the angular CLI
they minify it they bundle it they add
two hashes they kind of follow the exact
same set up and that our build servers
with just part of our build process when
a build is triggered whether we do a
commit or whether it's scheduled at 8
o'clock at night on project X a build
server out in Azure and Visual Studio
online will get all the code for a
particular project as part of it it'll
compile the the API the c-sharp code
it'll compile the manage code and dotnet
it will also get our web project and run
angular CLI or web pack directly to
build all the assets it will copy all
those assets into the dub-dub root
folder and then we'll do a dotnet
publish out - as your VMs or a series of
VMs and then users come down we've
started to set up our projects a bit
differently we don't actually create a
visual studio so a visual studio project
a web project and put our angular stuff
in it or react
we keep them just in their own folder
and then all of our dotnet stuff has
managed projects and has CS proj and all
the other stuff that goes with it so we
get to the point now where those two
things don't intermingle when web pack
runs it gets its output we copy it into
the dub dub Roo to our asp.net core
project but we don't actually do our
development in Visual Studio that way
questions yes
Jay does tree shaking there's a hole so
it will eliminate anything that isn't
used which is nice we use a tool called
n swag to generate we pointed it a
swagger API it'll generate all of our
typescript proxies and all of our model
classes if we don't use them they're not
brought in so I can have ap eyes that
are huge but if I never use all the
inputs or outputs down in the
client-side web pack I'll just not embed
them it does it automatically just with
the it's if I point this at an entry and
something isn't found it doesn't bring
it down right so think of the it's
walking the module tree which is an
exercise in tree shaking anyway it'll do
there's a plug in the angular people use
for ahead of time compilation so when it
gets done it'll actually take all your
JavaScript that it just minified and it
will compile it down to JVM bytecode so
your compression we do binary
compression as part of our output so
that the sizes get even smaller than
what it comes out you can turn stuff
like that on or off but it's a it's one
of those things like I said it's
hopefully today you've got some of the
core concepts many of you are using it
maybe you learned something you can go
try but it's one of those things you
don't play with every day I got guys on
my team they're experts at it
I've got other guys on my team that have
no idea they know how to use it every
day they know how to do an NPM start and
how the process works but they have no
idea the plumbing that's making it
happen you will see more tools I know
webstorm does a great job Visual Studio
code does Visual Studio is going to
start to support it more it's becoming
so popular that the asp.net core team is
looking at a lot of ways to make this
type of development using that more
native to that tool because right now
you do have to have a command line you
have to leave Visual Studio and do other
stuff and you're using Visual Studio
just as an editor and they're losing
that war just being an editor they got
to figure out more they can do to the
web people that develop like this I know
we're out of time I'm happy to answer
more questions like I said email me come
up take a card we use this a lot so
thank you guys for coming and spend an
hour of your day in this particular
session</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>