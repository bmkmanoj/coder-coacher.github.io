<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Multi Client Development with Spring | Coder Coacher - Coaching Coders</title><meta content="Multi Client Development with Spring - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/InfoQ/">InfoQ</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>Multi Client Development with Spring</b></h2><h5 class="post__date">2013-02-20</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Q2fcO_F6N3o" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">that's awesome it's gonna be good you
should keep clapping awesome alright um
right then so my name is Josh long you
can tell because it says it that's my
website that's my Twitter handle how
many of you are on Twitter just by the
by okay I'm expecting at least 20 more
followers come on guys on it get on this
email if you leave this room more
confused than when you came in you have
recourse there's my email please take it
down Josh dot long at springsource calm
and very happy to hear from all of you
if you have questions about any of the
open source bring portfolio projects
please don't hesitate to reach out to me
okay okay um yeah stuff i've written who
doesn't have four books on spring i'm
working on my fifth with manning those
are a couple of them that one on the
right that's free spring 04 / route you
can get there Riley book open source
right on go Riley on the contributor to
several projects that spring source
including spring vacation batch and the
original Hadoop stuff and they also get
activity workflow engine and other
projects that I haven't even bothered to
put on there some of you may know me now
actually from this roundup and put
together every Tuesday on spring source
store gets called this week in spring
that's up today by the way and it just
basically collects all the blogs
tutorials videos in the community like
yourselves that are of interest or
perhaps you know blogs and tutorials
from spring source that all work itself
right all in one place they don't have
to trawl the thousands and thousands of
blog posts that I do every week for you
alright moving on so quick recap how
many of you guys are using spring just
out of curiosity okay how many of you
are using spring too okay three right on
3.1 3.2 oh so awesome I love it
3.8 exactly yeah no that's cool man &amp;amp; 4
is coming soon so that that'll be
appropriate um well no okay so you guys
have a kind of a mixed variety here i'll
go ahead and sort of recap some basic
things indulge me if you've heard it
just stick around I promise we'll get to
the more interesting bits gotta you know
equalized okay all right first things
first why are we here spring is a
framework what is a framework Bob Martin
provides the best definition he says
that software entities classes modules
functions etc should be open for
extension and closed for modification I
think that's very very important right
because spring is just a library and you
can plug in the bit that you want and
keep the rest the other reason you we're
here is because bring provides a lot of
value helps you to avoid reinventing the
wheel this is an important important
thing guys if you wouldn't believe how
many problems you could solve just by
spinning in a few minutes looking
through the documentation for spring and
all the other various spring projects
and there are many I'm not gonna like it
can we turn the light down a lid or
something it's were trouble right so
anyway we have lots of different modules
and they all built on top of the core
component model the core spring
framework we have support for batch
processing integration Big Data Hadoop
rich Internet applications web services
I mean just name it we probably had
something that can help you and if you
build on top of the course spring
component model you're now sort of
insulated from the underlying platform
and that allows you to build your
application and move it portably and
cleanly from one environment to another
in the sort of battle days before 2005
when we had dinosaurs people were using
spring because they wanted to get their
application away from the dinosaur like
application servers how many of you had
the displeasure of using websphere show
of hands show me on the doll where it
touched you okay we all we all did it
once in college we've all tried it
websphere and there is a better way and
that's been true for a long time now
right but increasingly we're seeing
people making the exodus not just from
big application servers like like
websphere but to more nimble more able
platforms like the cloud right
seeing people move to vmware you know
corporate owner of sprinklers by the way
TM vmware is a very own cloud foundry
and various other cloud platforms and
this has just been sort of like the
trend right in general we're seeing
people using spring more now than we are
than we did before because there are
more platforms with more variety and
with more sort of new ones two
challenges moving on let's get back to
this okay in the core spring framework
we have the core spring framework and
then above that you have the web modules
the web support this is core HTTP
centric machinery this is somewhat recap
if you've already seen this that's okay
just hang on tight I promise if you are
using servlet if you're using server 30
and spring 31 for example we have this
little nicety this is a the ability to
configure a spring web application
completely in Java you just create a
class this is the equivalent to web that
XML okay this is a web directional
replacement you're just our mrf web that
XML put this class in there and it
automatically get started up when the
server the three container gets started
up and here we can programmatically
register the spring MVC dispatcher
servlet and set up the annotation
context the application context and just
get off you know go to the races with
our stuff there are other little utility
objects that come in the core web
machinery kind of packages right we're
not talking about spring MVC here this
is still just the underlying web stuff
right and this stuff is really cool I
mean this is like for me it's actually
kind of nice because you just kind of
trawl through these little packages you
find these great little gems and this is
this owes a lot to the fact that spring
was originally written the original code
the very first lines of code in spring
were concerned with the web right they
were concerned with building web
applications before it was a
general-purpose dependency injection
mechanisms and so on it was a web
framework okay so there's a lot of great
utilities in there if you're just using
a regular servlets and JSP which you
know I hope you're not but if you are
these guys can be very helpful for
example you can use the delegating
filter proxy to manage and manage a
regular POJO and then expose that as a
Java servlet filter for example
after using the 12 per request into a
filter this can be very useful for
things like authentication that need to
happen once in a request processing
chain and then you can just you know get
it you get a mutex so it doesn't happen
again lots of convenience classes if
you've used regular strugglin or some
other web framework with spring you'll
no doubt have ran into a web application
context details it's got a static method
that you can use to get a reference to
the application context if you give it a
reference to the servlet context so you
trade in one for the other very
convenient hopefully you've you're not
you know running on top of raw core
servlets so hopefully your moot using
something high level and in this regard
spring has always provided a very good
support as well from day one we've had
support for struts and javaserver faces
well you know when javaserver faces was
available we had it as well in the
course bring packages we have javaserver
faces one and two struts one are all
provided in the core spring distribution
when other frameworks what other
framework ship good gravy one other
framework ship they also provide support
for spring in their packages right so
tape history for example as for many
years provided a spring module and
wicket has spring support and stripes
and all these other different web
frameworks also provide support for
integrating with spring so there's no
reason to go it alone right if you're
using some of the web framework and you
want to use a get access to your spring
back stuff that's fine we also have a
good support for gibt and flex in fact
our flex support is remarkably good not
that anybody uses flex anymore but if
they did this is the way to go you know
I of course I'm a wee bit biased having
spent the better part of the last eight
years working with spring MVC variably
spring MVC is now I'm going to go ahead
and say it's the most entrenched sort of
most widely used java web framework
there's lots of different ways to
measure it but most of them seem to
confirm that it's a very simple content
right HTTP request message comes in goes
to the front controller this case the
dispatch
servlet the dispatcher servlet scours
all the configured controller beams that
are registered by spring MVC looks for
the one that can handle the request
routes the request to the controller and
then the controller does some sort of
business logic packs up the results in a
model object basically a glorified map
sends that map to the view or it can be
rendered and then sent back to the
client right basic model to MVC this is
old stuff we've seen this from you know
struts right this is like old old stuff
here's what a modern day spring MVC
controller looks like it's a little
underwhelming right it's just a little
class you have the app controller
annotation that's a spring MVC
annotation if you want to tell spring
MVC you know if you want to give spring
ABC something to do you need to create a
method a handler method and that method
will have metadata on top of it request
mapping in this case that myth that
annotation specifies metadata about the
handler in this case it specifies which
URL this handler corresponds to so
whenever somebody brings up that browser
page with that URL this method gets
invoked you can specify specifics you
can say okay I only want HTTP GET
requests rat it to this method okay you
can ask spring MVC to provide references
to certain objects for example you might
at you might want access to the native
httpservletrequest for example to
extract the context path but I recommend
very strongly against this practice
whatever you can write your code in such
a way is to decouple yourself from the
low-level raw HTTP server up stuff right
let's spring MVC extract the various
values for you in this case we're using
the at request parameter annotation to
extract and have injected this parameter
now this controller written dust lee is
imminent unit testable you can take this
into j unit market do we need to pass in
method parameters and so on no problem
and then in your controller it works as
well and of course we have support for
SEO friendly or bookmark a bowl or
whatever you wanna call urls so here
we've got URL of my ford / curly bracket
ID card
bracket that curly bracket ID bit is a
path variable it will be extracted at
runtime and made available as this
argument the path variable ID long ID ok
so if somebody passes in five in that
URL that gets passed into the method for
you to handle up until this point oops I
forgot one last thing you also have the
model right we've got
model-view-controller you need the model
this is where you stuff data didn't made
available for rendering in the view
right so assume you're in the model
you're in the controller you've done
some sort of business operation looked
up some sort of data you need to make up
that make that data available to the
View for rendering in the confirmation
page okay here you inject the reference
to the model say model add attribute add
customer you know using a customer
service object you've injected from
somewhere else okay add that attribute
and then that gets it made available for
for dereferencing inside the view those
far we've used a public string you know
whatever right process the request and
we've always used the same string these
strings as return values our view
strings they're used to resolve a view
and they're plugged into a strategy
called the view resolver you can plug in
your own view is all burn but by default
for example this will be render a JSP
page look for a JSP page at the root of
your application and so fix it with dot
JSP so if the JSP file is called to home
that JSP this will get rendered but
that's not the only way to do it you can
programmatically return a view object
directly okay so you can just short
circuit the view resolution process and
programmatically build your view for
example if you're doing xslt or PDFs or
spreadsheets or you know things like
that where doesn't really make any sense
to resolve some other view right you can
also just stream data back if you like
very common use case it's okay so that's
just absolute core basics like if you've
been under a rock for the last 10 years
you know I've updated it with spring MVC
two point five basic bits but let's just
we're just recapping okay just bear with
me let's take a look at the demo here
I'm fully aware that most of you have
worked with MVC in the last ten years
I hope wait just just to be sure how
many of you have worked with MVC in the
last 10 years oh yeah right now good
stuff so I'm inside of the spring tool
suite this is a free as in beer and free
as in Liberty open-source IDE based on
Eclipse it provides all the youthful
plugins that you'd otherwise spend hours
pulling your hair out downloading
configuring and sacrificing goats to
make work when you get the fresh cuts of
Eclipse right it's already got all that
stuff so you don't need to worry about
it the only thing it doesn't have is a
little button for speakers so they can
change their font size readily and
quickly without just pain okay so this
is a very very basic spring MVC web
application on the left here you guys
can follow along at home if you like you
go to github com Josh long and it's cold
adds to the tension a walking tour of
all of spring dhum go ahead and take
this code if you like it's got a whole
bunch of stuff not not the least of
which is the stuff we're going to look
at tonight it's got big data it's got
messaging integration web services rich
clients all sorts of good stuff guys
please take a look at it let me know if
there's anything you don't see well
represented there ok so this code this
is the control x this right here is the
absolute absolute simplest possible
spring MVC application you know what's
up my friend just get that look in his
eyes it's the absolute simplest spring
MVC application oh I'm sorry take that
back now it's the absolute simplest
spring MVC application possible ok it's
a configuration class you can tell it
because this says at configuration and
it's got at Naval webmd see this starts
up and installs all the machinery for
handling spring MVC controllers and for
processing and springing to see requests
and then from there it has a whole bunch
of defaults out of the box this little
configuration will give you based on
whether you have the appropriate
libraries on the
Hathorne I it'll give you support for
jsr 303 validation form validation data
you know wrist full payload validation
it'll give you support for file upload
if you have comments file upload or the
servlet 3 javax part that part API it'll
give you support for restful web
services based on JSON or XML if you
have jack's p or jackson on the
classpath it'll give you a default asp
rendering strategy it gives you a whole
bunch of stuff stuff that you know
between you and me I wouldn't want to
have had to configure myself using
struts 10 years ago do you guys remember
struts me either oh god that was a
horrible thing I remember like if i
could get file uploads in validation and
internationalization working in one
struck tap i was a rock star I mean that
was so hard to do ten years ago you know
and now it's down to just one class in
an annotation kids today they don't know
anyway um the nice thing about this is
it's useful out of the box very saying
good default but you need to add you
need to tailor something as befits your
application right this is going to
happen and the nice thing about spring
MVC is that it's imminently tailorable
you know you can fine-tune and tweak
every little part of it I would start
where are you with that right this is
the web MVC configure adapter it's in
base class that implements an interface
it has no ops right it's just an
abstract class of no op no op
implementations nothing in there and
these are just call backs these are just
called I'm going to go ahead and import
my service because we need that and
these are just call backs and then from
there you can override the callbacks as
a as is appropriate right so the first
thing you'll notice I've done is I've
overridden a couple things down here
I've overridden a configured default
servlet handling this tells springing me
see to go ahead and turn on the default
servlet you guys may not know about what
the default servlet is because it's
never really it just sort of works in
some cases right the default servlet is
the servant that renders things that
don't have a servlet map to them
otherwise right so if you make a request
into a server container for like you
know /to bar and that isn't mapped to
any servlet at all who enters that well
the servlet container
right but how it didn't I don't remember
registering the servlet container sort
of it you know there's a default servlet
all sort of the containers have them
however in their infinite wisdom they
made these default servlets valent they
bound them to different teas you know
you can look them up through magical
keys and ways of like jane di in some
cases magical keys and others it's
changes from server to server so if you
still want to take advantage of this
really really good you know friendly
default Riblet it's already there and
it's prime for spitting out resources
from the file system oh yeah then you
should you know this is this is good to
have you don't wanna like throw it away
but it's bringing me see needs to find
it for you and it knows how but you have
to turn it on so here's a is an example
of turning it on right and the other
thing I want to do is I want to make
sure that whenever somebody goes to this
directory it just renders everything in
that directory straight up straight on
through I don't want to have to write a
controller to render JavaScript files
right that's ridiculous just pipe it
through I've got images and JavaScript
and CSS render it right and then finally
we're adding a in an interceptor and
interceptors the spring MVC equivalent
of a component but it has an idea of all
the managed beans in a typical request
processing chain so it knows about the
life cycle of spring MVC controllers so
it's a lot more integrated they know a
regular filter I've also added struts
now not just apache tiles this is
old-school I know you guys have seen
tiles before tiles just lets me
compartmentalize my user interface and
we'll see why that's useful later once
I've done this once i've registered
these two beans now this is regular Java
configuration style for beans if you're
using the XML right now you can cross
compile that to xml you can say bean ID
equals view resolver class equals the
return type of that method and then the
object that's configured is the return
value right so this object is what's
registered under the application context
and maida vale made available for
injection it's called Java configuration
and it works whenever you see at
configuration it's the same thing as
using an XML
questions on that because some of you
may not have seen that before okay
moving on now once i have it at
configuration class up and running i can
create a very simple controller here's
an app controller and this will handle
you know working with customer data it's
a very simple sort of canonical thing
we've done it I'm sure all a thousand
times somebody goes to forward slash
it'll call this method it'll pass in the
ID cast it make it available as a long
give me a reference to the model i can
add data to the model here using my
service and add the ID as well to the
model and then that gets rendered I'm
sorry that gets forwarded to the view
which in this case is customers forward
slash display that's using a view
resolver remember that so that's going
to look over here go back here go back
to web app web imps oh boy customers
display right and then we go I've got a
very very basic old-school HTML three
you know just table HTML table not a big
deal you can see I've got da no sign
curly bracket customer that first name
last name that whatever I'm
dereferencing the properties available
in the model object from my view okay so
far so good very very very very very
simple that's absolute like you know
2008 level spring-mvc we're all on the
same page move and I we have to move on
see I know you guys didn't come here for
that but to help it helps it's helpful
to recap the make sure all on the same
page because there's a lot of stuff to
talk about and some people get you know
two different points in the road and
they don't they don't follow and we have
a little bit more looking backward to do
before we can look forward but it's
important to him to contact to
contextualise it right many years ago
before electricity and dinosaurs there
were amber and green screens and these
things roamed the earth like dinosaurs
just really really dumb dumb so dumb I
mean we're talking
oh boy insert needless US political joke
right here really dumb guys just dumb
dumb dumb terminals he's had all the
smarts on the server the clients
themselves the terminals themselves had
no smart whatsoever very dumb you know
and they did the job but something
wasn't quite right right because each
each terminal had its own rendering
mechanism and so each application if it
was gonna be written correctly had to be
rewritten for each kind of terminal it
got really really old really quickly and
then a marvelous magical thing happened
right around nineteen ninety right this
gentleman named tim berners-lee in his
laboratory at cern on a next machine
this is a next cube i don't know if you
guys can see the label and the lighting
in here but it's a a sticker on what was
on the back of a next machine these are
the machines that Steve Jobs sold after
he left a / well it was ousted from
Apple and the 80s okay these are amazing
little machines only 50,000 of them sold
and great machines like the predecessor
to OS 10 you know and so of course it's
natural that in the ivory towers of
academia and science a guy like Tim
berners-lee would write the first HTTP
browser and the first HTTP server okay
and this sticker this says the sticker
this says this machine is a server do
not power down that's so awesome you
know that means I mean that means that
means that if you were there if you were
lucky enough to be in this laboratory
like minding your own business running
around shuffling papers and you didn't
see that sticker and you know you could
just like trip and fall over and unplug
the internet you know the whole thing
uh-huh you have no idea how much I want
that I want so bad to be able to go
somewhere in the world and find the big
plug I know we don't have it anymore but
if we did oh my god kien watch the whole
thing go gray would be the most
productive hour of coding ever you know
but anyway so that was that was the
internet right HTTP but not the end of
HTTP and that's awesome and it worked
very well and the only problem was it
wasn't really very good for
client-side applications we still had
all the smarts in the server and really
really really really stupid clients and
this reminds me of a cartoon and for
those of you can't read it I'll read it
point it's what I'm here for so Dilbert
goes to his boss and he says I'm grossly
underpaid I want to raise to which the
pointy-haired boss response Oh Delbert
Delbert Delbert what what what responds
Dilbert people don't work here for the
money they work here for the challenge
and dill responds well if challenges are
more valuable than money then why don't
you give me your money and i'll give you
my challenges and of course the boss
thing expensively and says I must kill
him before and affects the others you
know this is what I feel like has
happened the last 10 years a lot of
people have really gotten it in their
heads that they want the challenge they
want the hemorrhoid you know I don't
know I mean I want the money so I when I
look at the problem of having really
stupid clients really stupid clients the
right response is not to put all the
smarts on the server is to make the
clients smarter in short javaserver
faces this is no way to run a railroad
guys and this cartoon proves it I think
I've tied that all together cohesively
you'll see my point if you don't that's
okay um either way we shouldn't be
trying to shove all that server-side
state all that client side Sade into the
server into the session doesn't belong
there in the first place and we didn't
have a really good alternative up until
about two thousand and four then a
magical thing happened right around 2004
I figured the specific date but at one
point it was called Dage two marrow and
JavaScript and then the next day was
called Ajax right you guys remember when
Ajax of born yeah that was a very
confusing day the only thing I can think
of in recent memory that happened when
I'm not even that reason the only thing
I can think of that it even close to
that situation was at some point in the
last 50 years I think I was like
Switzerland they had people driving on
the left side of the road and then they
switched to the other side but it
happened over one day so if you didn't
get the memo and you were on the road
the next day who the home at of coffee
is going to prepare you for that you
know I think that's what happened i
think at some point we all just woke up
and realize that you cannot
keep doing this it's not going to scale
you know so people started building
these really really smart applications
I'm you guys saw Google you know Google
Maps do you guys remember the first time
to play with google maps at
interactivity that dynamism people
started building really really smart
applications things that had very
sophisticated using your faces and lots
of functionality all rendered on the
client and these made these applications
right here boss come on oh yeah so these
these made the applications you know
really really fluid a whole new level of
fluid and I've never seen anything like
that and I think we can all agree it's
been pretty good eventually people
started you know hacking these browsers
making them do things they weren't
supposed to do and eventually these
things were sort of rolled into the
standards bodies right and eventually
the standards body w3c and various
others sort of formalized all this into
something called html5 in html5 wow that
has been an umbrella worth using you
know that has been a technology platform
that a lot of people are getting into
we've got things for media and audio a
3g and you know 2g and actually and just
amazing amazing things you can do inside
of a regular browser nowadays you know
and because these applications are
getting richer and the special effects
are getting more dynamic of course
you've got utility libraries like jQuery
but you've also got you know MVC
frameworks you know whole you know
sprawling MVC frameworks that help solve
the problems of NBC on the client some
of them include backbone.js angularjs as
one as well it means lots of right and
it doesn't matter which one you use the
takeaway is that really the client-side
state belongs on the client and it's not
hard there are good tools you can do a
lot of things javascript has gotten
ridiculously fast JavaScript has gotten
amazing people say well how fast is
JavaScript how good could it possibly be
bella te ll ard org /j is linux some
insensitive clod had the gumption to
write a emulator to boot linux in
javascript taking advantage of the typed
integers and type numbers in javascript
so it actually x emulates x86
instruction sets in boots linux entirely
in memory
in the client there's no surface height
of state at all guys if you can boot
linux it's over there's nothing you
can't do you can do anything it boots
Linux so that's how powerful javascript
is there's no reason to be using windows
forms or applets or flex or any of that
stuff just it's booting linux come on we
can do this so and by the way that thing
if you do get a chance to play with it
it doesn't take much bandwidth although
i don't recommend trying it now since i
might need my Wi-Fi um you can if you
get a chance to play with it you can go
to the core or the root shell there and
there's a see file in there you can
actually VI of the C file make changes
to it and then GCC the C file and run it
all inside the browser memory so cool so
awesome okay so we clearly have really
really really smart client you know
we've fixed it we finally fix it
normally took us you know eight nine
years but we did we fix it we have smart
client so the problem is okay i still
need some server side stay right Shirley
how do I communicate I need business
state of typing else that's on the
server I need to talk to that and so
then the question is well how do I do
that most you know most naturally I
think as an industry sort of coalesced
on this idea of rest right rest is a of
course for those of you who are not
keeping up the term rest was a proffered
by Tim I'm sorry by Roy fielding it is
2,000 doctoral dissertation it has a lot
of good ideas but basically use the
verbs that HTTP already provides from
manipulating state and map those state
mutation verbs to the life cycle of your
data put another way when you create a
database object you think in terms of
crud write create read update and delete
well it turns out HTTP already has verbs
lat so if you just think of customer
data in your database and then when you
look at that and you think of these read
update delete and create operations in
your service side just then also imagine
HTTP endpoint right and it's very easy
to see why rest sort of just fits right
because it provides a way to do the same
thing as we could do before it is a
different mindset you now have to think
about things in terms of resources on
the web unique resources you have to
think about things
content negotiation you have to think
about directory structures and things
like this but on the whole it's a very
easy model to get used to right and this
brings us back around to where we were
which is spring MVC today okay
spring-mvc it turns out it's a really
really good platform for rest really
good really convenient so simple even I
can do it that's something you can build
restful endpoints that are easily
consumed by all sorts of clients not the
least of which are your browser's that's
good on the client for java objects for
a bit you know if you're a java client
or not and you're not JavaScript but
your Java and you're talking to some
other rest service spring three point 0
in the core api's provides a little
handy little object called the rest
template this is a test question guys
take take note so there's a there's an
article the rest template the rest
templates very very powerful it provides
one liners for making calls across the
web to http resources okay it supports
marshaling so you can actually marshal
XML and JSON objects and back and forth
if you like or we can just deal with
abstract resources you know here's a
couple of examples okay this one on the
top is the one that always trips me out
do you guys remember like decom and ejb
and yeah well it means back in the day
we all thought we could just drag and
drool these components onto a palette
and something we'd have access to the
shopping cart for new gb or something
like that never really kind of happen
right but i think it kind of did right i
mean this is we have now three lines
here and we're embedding or reusing or
object linking and embedding whatever
you want to call it we're doing all that
to the most powerful search engine in
the world and three lines we've managed
to add the most powerful search engine
the world Google to our application free
of charge as it happens there's a quota
but still not a bad deal this is very
much the sort of simplicity I was a week
before I was looking for 10 years ago I
would love to be able to just this is
what I wanted I want to build a dragon
drool and get that you know so the
result is I got a rest input I got a URL
it's got a queer a path variable it says
curly bracket query curly bracket I call
a rest implicit project passing the URL
I tell it
I expect a string result back as opposed
to a RSS feed if I'm looking at RSS feed
or an image if I'm looking at binary
data or whatever and then the third
argument is a variable argument list so
that third argument could actually be
five or six arguments right and that
that query in this case springsource is
what's substituted into the URL the
curly bracket query okay and then that
made that request is made and the whole
body is bundled up for me exceptions or
handles all that stuff it's bundled up
and given back and giving back to me as
a result you can imagine doing something
slightly more complicated here's in a
fictitious hotel booking site that uses
the rest template to you know look up
the information for a hotel passing in
certain IDs you know the rest template
as I mentioned has convenient one-liner
methods for all sorts of options all
sort of the calls you know delete and
gettin head options and posted put of
course if you feel like the method you
need isn't particularly well represented
among these high-level methods there's a
generic fall through pair exchanged and
execute to give you an example of how
little i use those though and how little
i expect you will use them i have no
idea what the differences so they're
there but they're probably not going to
need them the first six will be just
fine so this is a simple spring MVC
controller back to where we started it
doesn't look all that different from
what we looked at just a little while
ago in fact in fact i would check i
would struggle to pick out what has
changed but that's okay I'm that's what
I'm here for guys I've got this because
I changed it that one little thing is
that is a return value where before we
return strings and views and maybe a
responses of some sort here we're
returning a basic domain object
something that's intrinsic to our system
and we've annotated it with two at
response body this is just a pojo you
could get it from wherever you want
right all I'm trying to do is to say
yeah I've got this customer data it's
got records I'm going to go ahead and
punt on solving the problem of actually
rendering it in a way that a client can
deal with but I know that this is what
the client wants so here it is and
spring MVC can you please Marshall it as
appropriate right look at the request
look at what the
and then return it in such a way that it
can be useful for the client um I can do
the opposite right here I can say ok
well I'm a server-side endpoint and
whenever somebody posts a request to me
I want that request data to be unwrapped
and converted into this Java object for
me it'll automatically take the post
payload and convert a clear Java object
understanding of course that if it's
invalid whatever you'll get on the
client side you'll get faults and all
that right ok so that's yeah you can do
both read and write write very easily
from rest this is the same thing as we
looked at before except instead of
returning a view you're just working
with object you're working with data
right going back and forth as a client
and as a consumer and of course all the
other stuff is there as well so for
example pass variables and all that
stuff are still there the more astute of
you which is say all of you i'm pretty
sure but the more suit of you will
notice that I've gleefully ignored one
little thing which is the the browser
doesn't support the common browser today
doesn't support HTTP put the HTTP we
delete you know anything but getting
post basically so all this good stuff
about rest kind of goes out the window
when you've only got two of your verbs
available to you right and that's
actually that's true but we have or
ground it's very well well known walk
around right it's called the hidden HTTP
method filter you've put it in your
configuration your web that XML or in
the application initializer that we
looked at earlier and it will sit there
sift through all the results that are
coming in look for any of them with
underscore method as a request parameter
and if the underscore method is there
and the method is like you know put or
delete whatever it'll route it to the
appropriate spring MVC controller so
this way even if you posted the payload
and you intended it to be to be a call
to delete method it'll get routed to the
right method right controller method so
this way you have now all all your verbs
available to you from JavaScript for the
cost of two okay now then
let's see so going back to the code I've
got a different controller here we saw
the regular custom controller that works
with regular jsps and stuff here's a
more rusty version of it I've got
actually up here this headers thing and
which I'm telling springing to see that
only clients that can accept JSON or XML
are allowed this is sugar I can actually
do I can use this other one here i can
say consumes equals then i can just
specify that if i want but i like the
product e hello there i like the you
know explicitness of that okay and then
i have different methods here that are
going to be used to handle actually
working with the data so for example the
first one is i met today you know once
posted to can be used to update customer
data I have another one down there that
it can be used to retrieve customer data
so if anybody goes 24 / customer 4 / 5
they can retrieve my data and then of
course another one to add data right I
didn't create one for deletion just
because it's bad karma for demos to
create something that's open on the
network that deletes my test data so I
don't do that but although but basically
it's the same thing as we looked at
before right just a controller with a
bunch of that request mapping annotated
methods we don't have to change anything
else and then once we've done this we
can actually see the data in action so
if i go here customers 7 you get that
which is a fail there you go so there's
my first restful payload right I've gone
to HTTP colon for / for / mobile NBC 31
cod foundry com fort / customer for size
7 and I've got an XML representation of
that customer data this time in this
case being plucked from a database okay
this data is for ID number 7 if I go to
this little client and this is why I'm
using Firefox I know it's passé but
somebody's got to use it and they have
this great little client and there are
many but this is my near and dear
favorite okay it's called the poster you
plug in the URL here specify a hint a
header so in this case I'm going to
specify the
accept header I'm going to specify that
I can accept application JSON and i'm
going to go ahead and reissue that call
this time I'll get back a JSON payload a
JSON representation of the same thing
okay so this is like really really
really powerful right very very simple
way of working with data try doing that
with our mi you know or korba who you
know just it won't be fun right um so
take that and of course I can do more
let's see if I add that all right who
wants to be famous give me a first name
don't always your hands at once now what
Stephen with an e 0 e oh I think okay
Evie &amp;amp; goo d and you're gonna stay go
here Smith cool dig it customers so
that's going to go to the customers in
point here and I'm going to put that
thing and it's going to fail utterly and
completely because i forgot to specify
the content type application JSON and
I'm going to put and then I get a
confirmatory dialogue telling me that he
has been added to the database and he's
been given an ID of number 14 we can
confirm as much by having this all
sorted out right before the talk instead
of in the middle of the talk but since I
didn't vmc apps sorry folks post quiz
i'm going to log into the Davies here
all that that happen in the background
postgrad user number three what you
think okay number two for those you
haven't seen this by the way this is the
vmc command line tool it's a little tool
to work with the cloud foundry open
source cloud I use it because i'm lazy
and I have a lot of demos and I'd much
rather just have them up and running
the time so I don't have to worry about
it you guys should use it because it's
easy stuff but this is also really nice
this is a vm see command line tool I
think it's a very friendly command line
tool if you'll note we actually created
a tunnel here to punch a hole in the
cloud and talk to the remote services
managed by that cloud and then we're
we're asking it to give us username
password and you know schema connection
string information that we can use in
our visual tools like PG admin or
whatever it has done us one step further
right it has one more thing it's not
only given us the information we need to
be able to proxy into that database is
offered to start a command-line tool for
us on our behalf this is really really
cool I don't know I mean this is like
you were petting a cat you know and then
when you were done petting the cat the
cat went out and found you another cat
the pet you know very very friendly very
hospitable cat so number two and then
drops me into the shell here slept off
from customers or on that there you go
so there's Stephen okay been added to
the system here okay so that's a very
simple example of how to use and work
with restful end points from the browser
right just using a browser and have to
install any special tools really just
basic services of course the question is
well I've got you know I've got this
cool wrestle endpoint but what's it oh
yeah
yes yep I'd put the ad valid right there
and it works just fine you bring up a
great point and I'm sorry i glossed over
this the handling of anything edited
with that request body and that response
body in this case that response body is
handled by something called the HTTP
message converter this is an interface
you can plug in your own by default
based on conventions we have support for
Jackson we have supported for Jack's be
we have support for you know Rome RSS
feeds we have support for so you can do
atom in our RSS we have support for
buffered images for example when we
download a JPEG you just do you can say
I want buffalo min job with that
bufferedimage that class we have a lot
two different types and you can plug in
your own right so for example there are
lots of different recipes out there for
plugging in a JSON p HTTP message
converter there are recipes out there
for you know I cattle and all that stuff
just you just get whatever
implementation you want and plugged it
in right then so okay we've got rest
what what's the use of rest was a used
of all this cool stuff if we're just
building web application that works in
one web page that just talks to the same
host we're back where we started we have
one app it's just a very fancy very
smart client but still still just one
app right the real value of rest is in
as an enabler it decouples your user
interface from the web application when
your web application just becomes a
restful service endpoint hub and now
you're free to start building
applications that are appropriate for
each type of device right we live in a
new world a very interesting world you
know we are probably all using Android
how many of your Android okay how many
of your iPhone it's okay I have to be
shamed ya know I mean most of us are
probably using one of those right let's
be honest especially in the sort of
ivory tower bubble system that is
Silicon Valley we have those devices but
Android everywhere until I'm here to
tell you except for parts of Scandinavia
where Nokia still clings on tightly you
know and except for parts of India we
have like blackberries
they're everywhere this is the two big
21 you know these are everywhere so if
you're going to build an application
today you probably should target those
two first native building native totally
I'm with you on this okay this is
absolutely this make sense ah there are
other platforms out there though I mean
come on who's rocking a blackberry it's
okay Toki with friends anybody there's
always one guy in my audiences but like
you know BlackBerry's are out there
can't afford to ignore them we know
they're out there so you shouldn't
deprive them of your application windows
mobile windows mobile up until like six
months ago I used to liken it to the
Higgs boson particle I was convinced
that it was theoretically possible that
they existed but there was no proof and
I'd never actually seen one in the wild
so I wasn't sure yeah exactly it's like
very quantum you know and and they've
actually discovered the Higgs boson
particle so really there's nothing that
is mysteriously absent as the windows
mobile but I'm told it's out there and
you would do well to support them as
well if you can okay and for this we
have something called spring mode spring
mobile is a solution to return a
response based on the type of client
very simple I'm going to show you a
little little sliver of the
functionality of this provides but the
basic idea is that you know you build
your native solutions for the top to it
maybe even for blackberry for those you
know and then and then you let the rest
of those clients consume html5 form
factor specific and form factor
appropriate user interfaces I'm not
saying you should build the most fancy
application possible but build something
that can be used in these devices in a
convenient way right so that way they
can still access it it might be a
degraded version of your user interface
but it's still a huge approve you know
somebody to decide to bring up your
application tomorrow on their car you
know the computers are today you know
that is cars are running applications
this will still work hopefully you know
so
spring mobile is this guy all that
introduction for that one little line
its registry that ad interceptor new
device resolver and we're interceptor
okay once that interceptor is there it
sits there sort of filters all the
requests it doesn't filter it augments
them okay then reaches every single HTTP
request coming into the service and
based on a strategy it looks up the type
of client that is requesting it you can
plug in whatever strategy want we have a
simple one based on heuristics for
detecting you know tablets and phones
you know big big big screen devices and
all that stuff you can use things like
WF URL which is a sort of a very very
dense database of every kind of Nolan
type you can update that if you want you
can do what everyone I mean you know
anything you want and that information
is made available and the request
attributes are provided to all the
controllers in my case I'm using that
information inside of tiles right so
you've got for those of you who remember
tiles it is a good template engine and
in particular it gives me a little bit
of indirection I need to conditionally
render a response based on the type of
device here i'm using broad strokes and
so I'm rendering one template in the
mobile directory if the current device
attribute in the request is has the
mobile flag set to true okay so that's
you know Java being in direction there's
a current current device attribute in
the request that the device interceptor
has added right based on the request if
it's mobile some kind of mobile for
whatever divot definition of mobile this
implementation of the resolver is using
it'll look inside the mobile directory
for page JSP otherwise it'll look in the
standard directory okay so if you look
at my my directory structure I've got
two folders layout and then mobile
layouts standard and inside of mobile
I've got a regular page here in fact
this page the thing that's interesting
about this page is not so much what's
there as what's not right most of this
is just commented out you can see it's
very underwhelming it's a couple towels
attributes and some basic HTML
rock types and all that stuff and that
much else right and then you go back
over here to my standard page and you
can see I've got you know dressed to the
nine took out CSS and dojo and lots of
JavaScript and complex Dom nodes and
everything right look at all that stuff
and one will get rendered based on the
conditions right that's specifically
what I specified in that device resolver
so for example going back to my
application here's the application as it
is by default this is the dojo one right
I've gone to my application mobile
indeed 31 that cloud foundry com and you
can see I've got dojo how many of you
have used dojo it's like 56 years old
it's more than that right 2004 so it's a
very old JavaScript framework I don't
recommend it at all it's just very big I
mean they're Linux kernels that are
smaller now so yeah that's really really
really big don't use it it's very fat
that's why I specifically cited because
it'll you know burden your web page in a
way I can't really I just can't know so
don't do it this look at this page it's
very big you've got more than a megabyte
of JavaScript being downloaded on every
request it's got all sorts of things
like these accordions on the left that
pop out and move around and do all that
sort of stuff if i type in a number and
hit go it shows me a pop-up which is
pretty pointless and it does me another
one and you know all this stuff is sort
of against the grain of mobile devices
you don't want accordions and pop-ups in
a mobile device this is a completely
terrible user interface for a mobile
device or for even even for a tablet you
know so if I go to mobile music clap
intercom and I do ID equals seven same
thing as before this is a shortcut for
what i just did you know get that and
then i go to the android emulator i
happen to have running here doesn't
everyone keep an android emulator
running on the laptops yes it does yes
it does I am convinced that no one at
Google's ever use the emulator it's
awful watch this actually you'll see
this nonsense oh good it's already pre
cast but normally when I do this talk
there's three I've got three keyboards
in front of me
three and the one that works is the one
that requires me to point and click
really nah it's a cool so I'm going to
go back to alt choose equals go back to
ABC num 1 2 3 27 sent the money yeah
okay go okay so you can see I've hit the
URL it brought the same application same
page except in this case I've gotten the
sort of you guys can just scarcely see
and I imagined it says information on
the customer number 7 first name last
name print some information and the
basic footer ok so the same URL same
application same everything is just that
the response is different based on the
type of device so now you have a good
fall through experience you know even
for your fall to experience you should
be doing something much better than this
of course this is a demonstration please
don't ship anything that horrible um but
it works right that's good but like I
say you should still build stuff for the
native Native volunteered devices and
this is a very interesting market right
like I said you can't afford to ignore
Android it's everywhere it's number one
platform by far soon it'll outpace
computers like you know modern desktop
PCs all we ever you know imagine more
androids and Windows Mac Linux and
everything else combined you know I
phone itself of course is still
continuing continuing on very strong
very very cool technologies chain there
as well so i definitely recommend you
build native where appropriate and for
this we have something called spring
moult spring android spring android is a
lot of things it's a little library that
we provide that works on top of dalvik
not java dalvik dalvik is the language
that runs on top of the Android virtual
machine yes anything
that is there's a couple of things
related to like site preferences and
cookies and stuff but it's basically how
to correctly handle different how to
render appropriately based on the type
of client accessing your server side
resource okay so it's a server side
story okay that's well there's more to
it I just showed you this you can all do
you can also do like language you know
switching and all that stuff as well but
but yeah that's that's where I would
start and it's very easy there's not a
lot that you know let's bring Android
any other hand is a similarly light
library that you can use on the dalvik
virtual machine dalvik for those of you
who don't know is a language that looks
exactly like Java and runs and execute
exactly like Java but for legal reasons
isn't job so we're just going to call it
dalvik okay spring Android provides lots
of cool stuff it does not provide
dependency injection this is a common
thing people ask us and there's a reason
that's it lots of good reasons the
Android runtime kind of gets in the way
of the life cycle for these objects if
you have a screen or an activity as it's
called an Android Android needs to be
able to own that whole process right
there's no way for you to provide a
pre-configured object and just say run
you know so that gets in the way of
something like Springs ability to
provide references to other dependencies
to provide aop to provide all the
services that it needs and that people
have come to expect there are solutions
but then they're not really my cup of
tea some of them require compile time
leaving things like that which is kind
of grody right others require base
classes which is like wall you know
based on to take a shower you know it's
gross so I don't want those dependency
injections and we didn't want to provide
such a story if if and when we can
provide a better solution we will I
expect that Google will provide
something at some point presumably it'll
be a JSR 330 compliant which case it'll
be very much to what you need and what
you're familiar with it with spring and
more the point in an Android application
you probably don't have that many resort
need to be managed so that's okay it's
not really a big deal but what is kind
of a big deal is communication with
these restful services right that's the
use case that's the the gap that's sort
of painfully missing from Android so we
provide a version of the rest template
that works on Android okay and the rest
template can be used with a lot of the
same kind of with a lot of the same kind
of the styles as you would the regular
rest simpler that we looked at before
but we don't support Jax be because Jax
be itself depends on API is that aren't
available on Android so we use something
called simple XML so you can do XML
object marshaling or you can use JSON
object it's the same idea right you can
use the rest template and make calls to
rest for resources from the Android
device and if you want to work with a
social provider like Facebook or Twitter
you can use the spring social twitter or
facebook for example binding or any of
these speaking social bindings they work
from here as well you can do oooff as
you can act as a client for OAuth using
the rest template as well right these
are all supported very nicely with
spring social and spring Android so
there's a lot of power here but it's
basically about connecting your
applications to the backend business
services that you've worked so hard on
establishing alright so back to Android
here go to the application j pers freak
out click on my little spring crm go
ahead and enter the ID here daddy's
number 7 remember now I'll to tell you
guys a secret I like to be called Josh
hi but when I was born my dear sainted
mother she would call me Joshua and she
only called me that when I was in really
big trouble like really big and I knew
whenever she was calling me Joshua was
about to hit the fan you know so i don't
really like that name but we're going to
go ahead and use it to drive home the
point can go ahead and click Save
and oops so you can see up here by the
way in the old session number seven
drops wrong reconnected now number seven
Joshua right so from one wet one out web
application from one breast will end
point we've managed to build and work
with data from an H to be you know basic
curl like you know visual colonel client
called poster inside of Firefox we
managed to use it from dojo that big fat
html5 record unity thingy web
application we managed to use it from a
very basic low-level form factor
appropriate user interface on the client
for phones and Android and you know
blackberry and things like that and then
we managed to build a an android client
I agree it's not the best android client
but it does drive home the point to also
work with that data and to see that data
right what I have not done here because
we don't have you know well first I
didn't bring the longer version of the
talk but also we don't have that much
time what I haven't done here is secured
this restful service using something
called like Springs spring security
OAuth right I can secure it with all off
and then all clients consume the restful
services by providing all off tokens
this satisfies the question of how do I
guarantee that the right people are
accessing my web services but on that
this is actually this is a very you know
you can see with just by exposing rest
you've opened yourself to a whole bunch
of different types of clients and I
think I think that's it I think that's
good do you think I should have talked
to anything else alright guys if there
are no questions thank you so much and
have a wonderful evening
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>