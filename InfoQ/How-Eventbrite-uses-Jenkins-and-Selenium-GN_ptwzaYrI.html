<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>How Eventbrite uses Jenkins and Selenium | Coder Coacher - Coaching Coders</title><meta content="How Eventbrite uses Jenkins and Selenium - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/InfoQ/">InfoQ</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>How Eventbrite uses Jenkins and Selenium</b></h2><h5 class="post__date">2012-08-13</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/GN_ptwzaYrI" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">I didn't know i was talking until about
two hours ago so um I had Jason the
writer of selenium and then also coast
gave right Harold Jenkins over at my
office months ago and they said that
they would actually give a talk only if
I talked also about how i use it so me
and I'm gonna get a shoutout to John
trooping put together some slides about
what we do and actually the way we build
our application how we release it what
we do as far as our dev QA stage
production environment so uh joshing
thing we actually to help me put these
together or actually did the talk with
me so this on going solo um some of this
information is actually changed and
after going to the slides I realize I'm
kind of boring so if you actually have
any questions as we go along feel pretty
scream about it's mostly about Jenkins
and actually how would your employer use
git or a Python shop but I'll just go
through the slides and then at the very
end maybe I'll ramble on a little bit
more or yeah I guess that's basically it
so Who am I why do you care about what I
have to say why do you steal I work at a
company called that prank systems
engineer there one of the things that
we're talking about is Jenkins since
William this is actually part of our
testing and my developer know so I don't
necessarily use this in like you a no
but one of the people that I am is when
our stuff breaks at three o'clock in the
morning I'm one of the people get to
woken up and in the office when stuff
doesn't work they come to be to figure
out exactly what went wrong so I go
tools for them to make things work
better oh this is a good demonstration
or not really demonstrates per se but
what we do so that's hey so who is a
vent right rear cover yourself States
you probably know about who we are
because if you came to this event use
the bell rang we're ticket please we saw
lots of tickets um 59 million i actually
just updated that from the two months
ago when i did this presentation of x 52
million so we've done a few sales since
then 190 envoys 54
years so if you think 50 engineers
that's 50 people to complain or cause
problems on our site so tell you how we
actually try to keep that to move
international customers we actually in
seven different languages that's
actually more than seven different
countries yeah languages can be a bitch
sometimes so our cycle when you read
weekly release our releases are on
Wednesday so if you actually come to our
site on Wednesday there's some sort of a
problem that's usually because of me or
the stuff actually hasn't gone out
properly but that hasn't happened any of
you right so I guess I'm do my job we do
daily bug fixes because the fact that
even though we try to test as much in QA
as possible there's no way to actually
replicate real real users because really
users do stupid things I click buttons
constantly I haven't really figured I
have a I believe that um so daily but uh
bug fixes so I don't think I actually
talked about this but maybe a quick
little backup or Python shop so we use
fabric to view our deployments we're
using Jenkins to rabbit and get home so
we're get Python yeah a flow I like this
I made it myself as a developer he write
some Python I checked in to get we use
get up actually use those a few
different git repositories I personally
don't use github but we have about nine
different repos they're all of those
have different branches based on what
exactly we're doing some people have
their own personal branch which usually
I work out of for our tools that are
completely seven from the company but we
do basically different products as far
as the psychos the main one which i
think i have in there but a lousy coder
leader so basically get developer
actually has this idea he's got the code
code base has been around for about six
years do you give 86 years stuff might
be a problem but usually I sleep goes it
pretty well check sitting to get Jake
gets automatically pulls that down and
then it starts writing some tests which
is the unit test up here and then after
it passes unit test it goes over to
selenium sliding I runs at a sexual
if its real user which can access
completely replicate and then it
actually goes a resusci labs which does
more tests and then it goes back to
Jenkins then actually we have a real
development process so one of the things
that we've done that I thought pretty
badass was we actually have our
deployment schedule or deployment tools
to work every single environment Thunder
have you ever worked in a place where
you say oh for dev what I do is I do a
git pull then oh and then when i go to
QA they turn up then what you would have
staged what we do is so on it's so for
artists actually fabric across the board
so there's a slight difference one
actually gives the development depending
upon which development and firemen are
in but like in the lord of that if
anyone's interested we have ours a local
dev develop which actually is with our
github repository that's using product
that i can't remember yeah and then
basically rollout and eventually goes
out to the end user which is production
this cycle is we always today rinse and
repeat we go in weekly basis and
sometimes at a daily basis based on
books so you guys to show the flow there
it is um builds virtual environment this
is actually really worked really well
for us because the fact that we're never
up to date with everything as I like to
wish that I was virtual environments or
a great build Python as the virtual end
which totally kicks ass the nice thing
is you can actually push this out to
every different server and then if you
want to roll back it's just the matter
of a symlink we basically we try to keep
everything in house so that nothing
actually can be bright from the internet
and then of course there's a naming
convention so and stick with your naming
convention because make sense this one
right here is actually the of this is
our quarterly so we were actually given
name event right 7050 which actually the
Jenkins covered this
I into it so this could actually
increment based on how many problems QA
is actually having it's off the master
branch then of course the Shah this is
we can actually track down to figure out
exactly what's anywhere and who's doing
what questions you guys some yellow
stuff out I obviously don't want anyone
interested in this stuff maybe slightly
yeah how did you get the shot until you
actually committed it though I mean you
can't give the name of the branch so
laughter that's good so we don't assign
this it's actually done by Jenkins so
what we do is we can accept the very but
it's not a good show what note is a good
shot so what happens is where it says hi
checking my code is the very last part
and the master gets the shot that's what
we pass over the Jenkins to pool all
this information so Jenkins will
increment the number then I'll get the
shot and then you can actually back you
know make it go back and forth got it uh
technology play so we've got a lot of
stuff in fact this is so high thoughts
going extra stuff out of there we used
to django which can be fun if you like
or ins my sequel rabbit cuba do engine X
mangu there CSS PHP there's Java that
were using javascript um what else we're
using reddits now we've got some other
big stuff that are coming in what
scallop no no yeah I don't know whatever
it's thinking about getting Erik I just
got to talk about that but no just
maxing the processes so yeah so there's
a lot of stuff with a lot of moving
parts the soldier is actually asking a
question earlier about development and
getting actually all those tools out
there and that was your question but one
of the ways we do is we can actually
just turn them off so the best thing to
do is actually put yourself in a
situation what happens if mod was not
there well you want your stuff to fail
gracefully so what we do is actually
dead know all those requests so when
they actually pull down the code if you
can't find mangu then it actually puts
the standard whatever
things and that's another way you can
also test your code make sure that it
works without certain things and then
basically two things you really need you
need your platform so in our case would
be Python and then my sequel in our case
but whatever actually your data is
actually there then everything else is
kind of like icing on the top so for
instance if you can't search your site
should go down because people may want
to search but they want to the core
stuff so what we do is basically just
make that all break so how's the
printable well so if it's if it just
doesn't work that's another thing we're
also our own systems on amazon so at any
given time our machine needs to break
and die so we have to make things are
redundant and also at any time that
network traffic I remember a couple of
months ago they some new engineer
basically rerouted all of our IV so
doing something crazy so we couldn't
find any of our servers latency was
horrible yeah yeah good ol answer but
edit that please so um yeah so basically
like that shook the parts of the code
that at any time could actually
disappear the main important thing to
feel your data that also the application
runs on but everything else search
recommend or you know all that can
actually go away at any time so you just
said you to make that feel redundant I
think it's one of the coolest things
actually wish I would have built it and
if anyone ever offers me a job to write
stuff to kill machines I'm totally gonna
take I think the chaos monkey was told
her out and they've actually just
recently open sourced it and I call it
the chaos monkey I downloaded it but I
haven't had a chance to play with it
certain of Python so I'm pretty excited
about that yeah
like doing architecture absolutely
moving parts in to be seen you in each
other and then hedging your apps and
wiring their fee on servers talk to you
enter
well that so the question is how do you
hope basically how do you make your
application be able to work without
being able to talk to everything at the
exact same time is that kind of to sum
it up yeah so it is basically coming up
what depending on what needs are like
for instance search recommend your email
these are things that if somebody comes
to our site was to buy a ticket they
don't actually need to get an order
confirmation right way if they come to
our site to buy a ticket they don't need
to know which friends are actually going
to an event right away or they don't
need to search for events that are
exactly the same in that general area
right away what they want to do is buy a
ticket so what you want to do we want to
do it you guys have to go because to
make sure that the you're basically your
bread and butter the most important part
of your site is always available now the
other things like for instance when you
come to our page there's a request for
another service that's another product
that's on our site if it goes and does
that request that's not able to connect
to it it doesn't flip out and just die
and that's actually one of the things
that they use that we try to actually
look to see which of your friends you're
going somewhere and I don't know if
anyone's in my work with Facebook
sometimes this stuff doesn't respond so
but yeah so like that would be a perfect
example so if it goes and tries to
connect to Facebook and says hey what
friends are actually using this event I
can't respond it'll actually respond to
say you know do something else more a
generic or stock sort of a an update for
instance there one of the things that we
do is if you go to the site and there's
a problem with a certain area that's
actually recommended we have actual
default recommend recommended events so
that if they can't find the ones that
are actually in your area don't pull up
a generic set things that we've actually
placed and then which case your
experience exactly the same go go that
actually does look cool but doesn't
exactly fit me this time really really
we're running around the background what
everything's broken that entry
yeah this is basically what we were
talking about earlier as far as the flow
goes um building deploying our main
sites general flow basically we have our
core because the test we do smoke test
which is basically just hitting the code
without using selenium q an appointment
and then basically our promotion we use
fabric fabrics pretty cool and then
simile simile king is we basically just
predict the package and this is actually
really important something that we
didn't do for a long time and then we
finally fixed it it was barely just a
matter of time but the very first time
which is actually q way we say this is
something that we really want to present
and we want to push out to production
make sure you won't build and that one
bill will actually go from staging to
state sorry folks way to stage and to
production there's absolutely no change
no human interaction between the two the
promotion is actually what we give it to
of what we push out onto the servers
what does this do for us if there's any
children human interaction between the
QA and the production stuff to break so
this point we know whatever moves on QA
whatever loves staging is exactly what's
going on production and there's no
differences that's really saved us a lot
of time fingerprinting yourself the Shah
of downstream job blood that's kind of
boring let's get that smoke test yes we
all see you sauce labs South Slavs
basically is selenium flip video it's
pretty cool pretty easy to set up
so sauce collabs is so it's written by
Jason trying to think of you last name
he gave a talk actually at the office
about building a robot using Python and
using some of the same ideology that
selenium was built out of but it plays
angry birds this is pretty cool actually
yeah so what they do is basically they
do figure selenium is an open source
project that became a product called
sauce labs which you can use their
service to run your selenium tests on
and i'll come over to your site actually
test everything and you can actually get
videos of the test as they're actually
happening so ever the problem is people
would actually say i clicked here here
then an error any sort of exception
it'll actually video capture that be a
video accepting an email that says hey
here's your problem where you have to
find in the video they'll also do cool
stuff like running on like eight
browsers in parallel and in multiple
languages you can set ups and five
minutes from them so that you can get a
lot more test run in a short time is
that what I said with video yeah no I
like I said I put these together like
six months or four three two I don't
know two months ago at the top is one
miss Dale um see public embarrassment
that actually works really well for our
coders so basically anytime there's any
sort of a problem with their code may
actually get it all the way out to the
QA environment and you know who's asking
the entire teams to say this is broken
and the person actually goes wow I
wasted all your time and I apologize for
this so it works pretty well I don't do
what you want yeah so the promotion
process we're just be ready Dev you bro
its QA promotes staging and then
promotion to prod which is basically our
lease how are those did not promote it
so you can't actually get anything out
production if we have in each with
problem unit test anytime in the smoke
test fails it won't actually work
there's no way to even release to QA
which is pretty nifty so we put a lot of
marks on it so you can't actually cut
corners one of the things is really
important for us
is sleeping I hate being page four
o'clock in the morning by doing this
kind of stuff it actually really allows
me to sleep and I like that so our
staging environment is built just the
same size as production is really more
load test one of the problems with our
QA environment to split it off and go we
started doing the agile groups which is
basically like 20 different groups of
Engineers doing something independently
and then coming back in QA is testing
each of those different groups
individually but then when you put them
all together that's a lot of times when
things can break so what what we do
there's a load testing you basically use
a junior slide the hell out of it wait
for the things to failover I don't want
to answer that I like it we do a copy of
production there we take all the
important information out of it we copy
that over to you are and you know we
actually just use our selenium tests we
so there's a different group than this
would actually the answer better by the
QA team but we have a suite of tests
that's something like 500 different
tests we hit so it like creates users
creates a ticket deletes ticket it
creates user invites user to you know
anything everything you can imagine it's
using a jmeter that's one of them that
knows so they basically just slam how I
try to get as much so we've got
something like oh at any given time we
have about 15 servers a spit up which is
one of the excellent the next things
about Amazon spit up 15 server splint
and halibut an internal off so that's
where QA does get old scar so basically
we don't let anything go by if any of
this stuff doesn't actually work
no that's actually it what do all of
them to past everything one of those
tests the gold stuff actually it's given
by Jenkins which is pretty nifty the way
Jenkins is set up use have different
different tests work to do and whether
or not a pass it can actually get
promoted so it actually will stay in the
bottom state so it actually can't get
over to stage and tell that that part
happens and that's all done we actually
manage it so they're difficult era bout
permissions and stuff but like I said
before this is actually all exactly the
same so a developer can actually take
you to go and push that out to his
environment because he has rights to do
that and everyone can actually use the
GUI interface which is what Jenkins does
Jenkins bills is a tar file it's
everything that goes out to or
production would be your production but
we actually only give access to the QA
team to go out to staging and then
that's it that's it then after that it
goes into the operations team then we
push it out to production gold star yeah
so we've got a little bit too different
i think there's actually 10 different
products now so we have corn david
analytics eb analytics century anything
everything that we can we basically
wouldn't get up because version control
rocks yeah it lose me guys because I'm
fun um walking on resource controlled by
Jenkins so basically as far as the task
oh there there queued up so Jacob
fortune of the Rose anyone here actually
using Jenkins you guys like it it's
pretty sweet yeah yeah so it works out
pretty well we have a three node cluster
might actually have two tops couple
warrants it just because the fact that
everyone wants to test constantly done
understand why they do it locally before
they check it look whatever that's off
you other have a good time at the
yeah so we have the provisioning and
built logic with our code so let's talk
about some of the issues so fully
multiple branches so one of the things
that we have right now in that we
basically release off of our master
branch so what Jenkins one of the big
problems is you actually have to get to
key figure eight for each of you to the
branches that you want to use so we use
masks so anyone that actually wants to
do a task these to actually check or
merge all their changes into the masker
that can be kind of a bitch jo exactly
so that's the whole thing is they also
have to manage what they're doing it's
not as easy as just hey yo git commit
I'm going to walk away people sometimes
do that and they get an email because
that's the entire engineering staff
public humiliation totally works branch
lacroix be used to failure yeah are
carving artifacts takes forever
wonderful well thank you very much
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>