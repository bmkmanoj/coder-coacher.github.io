<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Adding Device Capabilities and HTML5 add-ons to Your Web Application with RhoElements | Coder Coacher - Coaching Coders</title><meta content="Adding Device Capabilities and HTML5 add-ons to Your Web Application with RhoElements - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/InfoQ/">InfoQ</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Adding Device Capabilities and HTML5 add-ons to Your Web Application with RhoElements</b></h2><h5 class="post__date">2012-08-14</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/TWbVMZZJA9U" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">my name is Darren Campbell so thanks for
coming
I'm a the operations lead and one of the
senior software engineers on the Bo
elements side of the project I'm based
out of
Basingstoke UK as you can probably tell
by the accent and I've been involved in
the product for while since its
inception really at row elements one and
then I was heavily involved in the
product the previous product which was
Pocket browser you may have heard
mentioned on the the predate experience
so I was involved for that two years as
well as since I joined Motorola so
session today is adding device
capabilities and some of the html5
add-ons to your web application
unfortunately though the font was too
big to fit all of that on the on the
title there so I just I just summarized
it so quick recap of the contents then
what we're going to go through in this
presentation so this is really aimed at
those people who are maybe somewhat
familiar with rare elements one and
looking to move their web or hybrid app
to relevance to so I will just cover the
briefly the installation I think most of
you if not all would have installed Romo
bar suite but you may not be aware of
the Shedd runtime or what that is so
I'll just go over that and then go
through I've got a little example web
app and just add some local storage web
SQL capabilities to it as well as some
barcode scanning using some of the
device capabilities there go through
some of the other elements API is not
just barcode scanning and then also some
cross-platform considerations so if you
want to move your app to an iPhone
you've heard a lot about the native
applications over the last day maybe day
and a half but hopefully I'll be able to
concentrate more on the hybrid side
so first of all then hopefully most of
you will be familiar with this I I won't
I won't go into too much detail but this
is just the differences between a web
app a hybrid app and a native app so
you've had you've had it drilled into
you how what a native app is a native
app runs on the device you would create
that with the Rose studio or your own
idea or the command line if you were
that way inclined so the example I've
just put some examples down the bottom
there would be any kind of apk on an
Android device or an IPA on an iPhone
the other side of that is a web app
where you don't use any of the device
capabilities and you can run it in any
browser you choose so we'll be using
Chrome in this demonstration or Safari
Firefox even so examples Google Calendar
all this lots of other examples just the
first one to come to my mind
and then hybrid is somewhere in the
middle so you've you've got your web app
that you are again using some of the
like the barcode scanner or the imager
or the card reader on the device but
you're not necessarily a full native app
you know an apk or you're still getting
your your files from a web server be it
on the device or a remote web server
fire HTTP okay so installing I won't
labor this point because I know a lot of
you have well all of you have already
done this but I wrote these slides
before I came to the first session so
download my mobile suite from support
central you there's also links from
launchpad which again you've had drilled
into you over the last day and a half
and still lit on your PC so it's all
your Mac so it's about a 500 Meg
downloads to get all of the Ruby and
even installs get if you get if you want
to install that as well and very studio
so that's where the size is coming from
if you're only interested in hybrid apps
or if you're not interested in the
native side then you can just go to the
Start programs
roll over mobile suite runtimes for web
apps from the start line or some so
available on Mac I'm not sure where on
the Mac because they've never given me a
Mac to play with and if you if you go
into that folder you'll find in there a
couple of cab files one for Windows
Mobile one for Windows CE e and an apk
and those are analogous to Romans one
you'll have you installed them on the
device it installs tip on Windows
program files row elements and you you
configure your start page in your
config.xml and you can use those in the
same way you did vote elements one but
the advantage is now that it has a later
WebKit engine and we've done other work
to where additional api's for the
plugins so oh and then i've already
covered the next to there copy the
appropriate one time and it will behave
identically to Roman's one for web apps
okay so strange design walking around
the back the example web app then this
is a web application that was originally
created by Rob Galvin the the man who's
in charge of Launchpad at our Barcelona
event very similar to this we had a an
application forum in Barcelona and the
idea of this was to just like show her a
getting started application and it
included barcode scanning and local
storage so he actually created a blog
one of the very first blogs on Launchpad
so if you you're interested in creating
a similar application yourself you can
follow his blog but what I've done I've
taken his application and cut out the
device capabilities and then we're going
to put those back in in a slightly more
structured way in this presentation and
I've just got a demonstration now of the
web application so I'll move out into
chrome so like I said because this is a
web application you can run it on the
device or in your browser without
further considerations so you have to
maybe not use your imagination so much
so I want you to imagine your outer
session just like this or an event just
like this and there's lots of different
sessions going on at the same time what
I haven't done is to add the data for
all of these sessions so the data might
seem a bit out of date is because it's
all taken from our Barcelona event so
imagine if you will on the door as
you're coming in there's a person there
with an emcee 75a in my case or it could
be anything could be an ET one if they
want to look a bit sexier and as people
come in they want to count how many
people are coming into each event so the
use case here is that you would select
your session from your drop down here so
let's say we were you we were attending
the introduction of new development of
the new development platform ah I've
been using this for testing yesterday so
you see there's already six people in
the event let's try and find an event
where there's no one in introduction to
the MSP framework why would anyone want
to go to that so there's already already
0r0 people in this event so people are
coming in the door they're trickling in
and I've got my person on the door and
they're they're clicking at attendee for
everyone that comes in and then I can go
to I run to another event a rugged RFID
reader slightly more popular and I'll go
back to the introduction to the MSP and
it's remembered that there were five
people so the whole purpose of showing
you this is really to show you that it
remembers that there's five and the way
it's remembering that is through local
storage and I'm going to show you the
very small bits of code in a minute to
to show how that's achieved but what I
will also show you first is this
application running on my MC 75a so have
it here I'm always scared to touch it
when I do these presentations because
invariably it loses ActiveSync
connection because maybe there's some
hardware issue I knock it or something
but always scared during live
demonstrations but I'm just going to run
row elements up and
I've previously configured it and this
was working perfectly last night I've
previously configured it with the
config.xml pointing at my web
application which is just stalled on the
device I haven't tried to be clever and
put it on a server because invariably
ignore the pocket browser license as
reference there that's what happens when
I manage the licensing site as well so
you see this application running on the
device as well and we can click and go
down to MSP framework again and
obviously this is on my local PC and
this is on the device so these numbers
aren't going to be the same because
they're not they're not them on
different devices this is local storage
and we can again at attendees and it
works exactly the same as on the desktop
browser please hold your applause till
the end ok so what's it done there so
local storage if you're not familiar
with local storage the best way to think
about it is a name value pair which is
stored on the device so you essentially
all you can do is get or set for these
name value pairs so there's there's two
ways I've used local storage in this
example the first is if I just bring it
oh I'm very spoilers if I bring up the
device again so there a laser pointer on
here so the first is for this drop-down
so there's a local storage name value
pair to indicate when sorry to indicate
which of the sessions is selected and
there's a separate name value pair for
each of the sessions to indicate the
number of attendees so I'll just show
you the this is the code which executes
whenever you add an attendee whenever
you press the add attendee button so
locate items that s ID is the combo box
drop-down I currently selected item and
then get item for re - is so the the key
the names of the the count of attendees
in each session are just re - and then
the session ID that it gets it does some
error checking it adds one to it and
then outputs it on the screen so I'll
just in fact it might be a bit more
impressive if I show you this running in
Chrome so you can actually see these
local storage is if you press ctrl shift
J or I'm sure there's a better way to do
it I think you can use this spanner icon
up here developer tools and then it's
developer tools so I mean I'm probably
teaching a grandmother to suck eggs here
I'm sure everyone's seen this console
before this is very similar to the
Firebug console in Firefox and you see
under local files here you'll see I mean
a lot of this is my test data but all of
the sessions on the left-hand side
they're session ID which is this row
here so currently 32 5 and that's that
and then this is a accompanying
screenshot which is just an earlier
version of the test data ok so that was
pretty much non non interesting from a
point of view of okay so the people are
coming in we're pressing out attendee
and then at the end of the day what are
we going to do well we're we're just
going to walk up to some survey person
and go through each of them individually
and say oh there were five people in
that session there's six people in that
session it's pretty much something you
could have done with a bit of pen and
paper and just mark ticking down people
as they arrived it's not very personal
but now I'm going to describe better
implementation which helpfully involves
scanning barcodes so this if you look at
your badges everyone's got a little
barcode on the badge I don't know what's
in that barcode but for the I mean I
wasn't invited to this AIPAC developer
conference but they had a QR code on
their name badge so the idea there was
you could go around and you meet someone
and rather than say can I have your
business card and you don't have them on
you for whatever reason which happens
numerous times the other day you can
just sit up scan my badge and you have
the rather awkward let me just get down
here and scan your badge from my phone
and we had a similar thing at the
European so the AMIA bus conference in
Barcelona so this is when I was invited
to so this is my card from Barcelona and
you could scan it and that contains your
name and your organization and probably
a couple of other things as well like
forgotten so now this implementation
we're going to create now will rather
than someone come in and you press add
attendee someone comes in and you say ah
let me scan your badge
which in this somewhat arbitrary world
is a far superior implementation and
then that will improve increment the
counter and will display their name on
the screen as well as well as their
organization so you can scan their badge
and set up hello Darren Campbell from
Motorola Solutions welcome to the
presentation so if we wanted to we
wouldn't even need to have the name on
the badge so you wouldn't have to call
it a name badge anymore a barcode badge
so let me take so what I'm gonna do it's
live demonstration time I have cheated
somewhat in that I've completely
annotated a little of my code so this
I'm gonna make the changes live so this
is the ad attendee button I'm just going
to take this off of the page and then
I'm going to add a field which will
receive the name and organisation after
scanning
display okay that's fine yep okay so
that's all the changes I need to make
and I will talk about these changes in a
bit better detail in the coming slides
and then copy that file to my advice
and then hit refresh because it's just
running off of the local file system and
it immediately refreshes and you'll see
at the moment it doesn't display
anything because the it will only enable
the scanner after I'd select something
out of the drop-down so I enable
wireless LAN infrastructure and it says
really scan and the moment of truth so
I've come into the room I've got my card
everything stays connected excellent
Darren well that's just
I'm sure you could code around that
Darren Motorola excellent so I've got
some additional so on my desk at work
back in the UK there is a set of printed
out cards as well which I somewhat
similarly forgot to bring with me so
you'll recognize some of those names
here from other people who from who
didn't quite make it here today because
they weren't invited but Adam Blum
you've you've seen him he's the former
CEO of row mobile so he'll come in and
birthday these around the right way
because I actually created these
barcodes myself hello Ben Kennedy you
may have seen been on launch pad ah
there we go Ben Kennedy MSI and James
Molly Smith we've all seen a lot of him
he's at about three or four
introductions at the various sessions
why is this not scanning must be a
problem with my PC can't imagine that
possibly being a problem with the device
this scan someone else well you can
imagine how this works
oh that's getting frustrating now ah
darvid it's SS Jamboree
so he's you may see him on launch pad as
well he's he works with me that he sits
behind me in the UK and he concentrates
mainly on our Android port so there's a
there's a demonstration of our new
amazing barcode implementation so if I
get back to the attendee so we've added
some scanning so I'm I'm gonna presume
that a lot of you in this room are
familiar with doing something simple
like just adding basic scanning to the
webpage so bear with me because I do
want to make this absolutely clear for
those who are not fully aware of it so
whenever we selected the drop down or it
may have even been on page load we we
execute this function enables scanner
and what we're doing here is two
separate things and you saw Rob Galvin
do this if you attended his session
yesterday in Ruby but we're doing this
in JavaScript so pre-existing on the
page you don't have to do anything else
is a JavaScript scanner object and
there's a number of methods and
properties that that scanner has and
they're all in the documentation and
I'll show you that in a little while but
we're doing two things here we're
setting up a JavaScript event to receive
the scans data and we're then enabling
the scanner so enabling the scanner is
putting it in a state where we're able
to press the yellow trigger and it will
do a scan it won't if you want to make
it scan without having to press the
yellow trigger you can do what's called
a soft scan but we're just enabling the
the default functionality here and the
decode event so this think of this is a
callback that you received from the
scanner is receiving a JSON parameter
and I've defined it down here so it
receives the Jason parameter and it just
calls another function with the the data
associated with the scan so there's
about four or five different
parameters that come that come back in
that call back one of which is obviously
the barcode data you also given the time
that it was scanned that we're going to
use shortly the the symbology that was
scanned so these are QR codes but you
might be scanning a code 120 a code 39
of three of nine and that's that's all
the lines you have to do in order to
enable the scanner in fact you don't
even have to have this top line if you
don't specify a callback
then it'll output the data in what we
call wedge mode which just sends
character sends characters to the screen
as key presses so similar to data wedge
if you've used that okay so this is the
function that was cooled in our callback
just for completeness so on add attendee
was exactly the same code as we used in
our original web app this is the local
storage adding it to re - and then the
session ID get V card info is a function
that I can't claim that I wrote Bob
Galvin wrote it and that parses out this
this QR code on the badge and and
returns whatever you basketballs so FN
is the full name not function and August
the organization's so that's why it was
coming out with Darren Campbell :
Motorola or MSI and then the there's
just some HTML there to add the add the
information to the screen incidentally
the full code of this will be posted
I'll do a blog on launch pad so that you
can follow it it maybe that's not too
familiar from the slide that's sorry too
recognizable from the slide or I go too
fast or too slow so that was very useful
the previous example enabled us to say
hello and then whoever we are I think
it's David a still on the screen hello
David a hello Darren but what it would
be useful to do is to store in some kind
of web SQL database on the device as the
people come in and then you've actually
got a hit
three of when they arrived if they were
late and if you wanted to you could load
this to a server at some other point so
rather than have to you know take your
take your device physically to some kind
of muster point you it would just all
happen automatically
I don't know via Ajax or something so
this is where we're going to get to so
I'm just again going to go into Oh
spoilers I'm just going to go into the
code and add those bits of code so DCC
is my initials incidentally if you
wonder why I'm searching for that okay
so we're still going to have the scan
output which is ready to scan and so
rather than display the scan data which
is hello welcome to the conference then
we are going to insert that scan data
into a web page sorry into a web SQL
database and this function here load
data will not sure where are we session
changed so what this okay so whenever we
change the session in the combo
drop-down then we'll so reload the
people who are in that session so I
think that was the only two changes I
had to make yes so just copy those over
again yes
refresh
it's always awkward I never know how
much like coding to do versus seeing
that the full result is boring if you're
just watching me code but then maybe it
feels like I'm cheating a bit if I'm
just editing you know deleting
previously written code or commenting it
out anyway so this is the new with the
new logic which adds people to the web
SQL database so I've deleted all of my
databases often device so there's no one
in any of the sessions at the moment and
well let's let's try scanning some
barcodes so I'm in there because I
didn't actually go to this one in
Barcelona but will pretend I did so I
scan it it says that name company and
time in and then we get some more people
join though these are these bothers it's
made them a little bit bigger than
they're more likely to scan so we've got
you can't even see what's going on okay
we've got Adam in there we've got Ben
again and they're not just a bit
superfluous scanning for I'll pretend
that it's useful okay so you see here
things to note probably ah so they're
ordered by the time so descending the
way they came in and I'll show you the
code for that in a minute and it's
persistent it's on the device so let me
change this to a different session so
there's no one in this session at the
moment I won't stand a load more people
but if we go back we'll see because of
the load DB function that I uncommented
it's loaded our attendees from the web
SQL database on the device so this is a
really good way of storing application
State for example let me just take you
through the code and then I'll take you
through why you might want to do this so
the code then we're just going to be
writing some web SQL see if you attended
the session yesterday on row Connect
that's obviously only applicable for
native app
occations it requires more setup and it
is a lot more powerful obviously because
it's doing all the syncing for you
automatically
so the purpose of me telling you about
this is to really let you know the full
capabilities of the product and just
what's available in html5 so this is the
table creation down here so if you're
familiar with SQL syntax it's exactly
the same we're cooling this on page
loads so it initializes the database
which just creates it physically on the
device maximum size of five megabytes
excuse me which is the industry standard
in WebKit implementations and we you can
modify the maximum size in our config
file should you wish and this is common
syntax for all of the web SQL interfaces
the fact that you create them so you
create the transaction and then you save
function TX and then it's an anonymous
JavaScript function that you give you a
SQL and then you give it a function to
execute on success which in this case
does nothing and a function to execute
if there's some kind of error and I'll
I'll come to that in presently but I'll
just take through the rest of the
examples so this is if we insert data
into our database this is when we scan
the barcode this function gets called so
the syntax again is it's the same as SQL
insert into the take this is the table
name incidentally and then these these
are populated with the actual scan data
like I said part of the callback was the
time of the scan so that would be the
time on the device which luckily no one
pointed out was completely wrong wasn't
Chicago time at all it's setting up for
clock we're not all going home yet
and then this F n DB load data will do
the Select out of the database you
familiar with this if you've done any
SQL and then it's ordering by scan time
descending which
made the order but the most recent one
at the top and I've taken a lot of the
code out here but if you're familiar
with any kind of any kind of retrieving
data from a database in code then you're
familiar with record sets and you go
through the records set for the length
of it and output the stuff to HTML I
probably don't need to talk that through
in the presentation but like I say this
will be available on launchpad I'm not
sure when when I'm back in the UK I
leave tonight but it will be there soon
okay so a bit of a side note then on
logging and debugging so first of all
let me it's probably best if I show you
this in code if I remember what was the
function called are we log DB is okay so
here I have two functions which are
essentially doing the same thing so you
remember I made up a little bit bigger
don't know how to make it bigger
zoom zoom in
sorry about this very unprofessional
there we go okay so we've got two
functions here which are essentially
doing the same thing so on error if you
remember was the error function that we
provide every time we do a web SQL
transaction and re-log is just a log
function which we can call from within
our codes to say I am here or retrieving
value from database and what is I can't
claim I can't claim I did this what
Roberts done quite cleverly he has a
variable which is is row elements and
that enables his function to be a bit
clever about knowing whether it's on
sort of whether it's running in Chrome
or Safari or whether it's running on the
device so all he's done for the lower
elements he's just done a regular
expression find on the current user
agent which will return motorola WebKit
if we're running on the device in BO
elements or it will return something
else if we're not so just an example
here of using the the pre-existing
JavaScript function generic to log and
you can configure that to log to either
a file on the device or to an HTTP
location you can send them as HTTP posts
and as long as you've got something
listening for HTTP posts at the other
end and we've got an example app then
you can you can do it that way it's a
lot easier than copying the log file off
the device and plopping on your desktop
and then searching through and then
consult log log to the browser console
that comes out if you're not familiar
with it comes out in this chrome window
under console see there's two two things
here it's just complaining that it can't
create the tables and the reason for
that is because it's already created
there might just didn't do a load of
logic to test whether they exist or not
there are any warnings anyway and that
the logs would come out there if
anything else went wrong
okay so if again if you're not familiar
I'm presuming a lot of the people in
this room will be familiar with this but
just just bear with me whilst I describe
it
there's the debug console in Chrome or
like I say or Firebug or Safari has the
same as the chrome actually part of
WebKit rather than something that Google
has made as the chromium interface if
you go to scripts then you're able to
see all of your JavaScript on the device
so for example if on refresh I wanted to
add a breakpoint in there and then when
I hit refresh you'll see great points
hit and I can look at the state of
variables is where elements oh yeah okay
so Israel elements is false because duh
it's not running in raw elements and
yeah so incidentally that is row
elements this is the Navigator this is
using regular expressions to find
Motorola WebKit and saying the global
variable it's row elements so that gives
you a rather nice debug interface in
JavaScript I'd I encourage you to play
with that if you haven't played with it
already
I believe the same is offered for the
very simulator as well I believe but I
don't quote me on that okay so if you
look at the original title or the
original brief I was given for this for
this presentation I also was asked to
mention application caching and so I
shall do that now application caching is
is a really powerful thing it's so the
use case is imagine I am a worker on the
fringe and every now and then I get
connection I lose connection I get
connection so it's a way of making our
devices work in an offline mode or semi
connected mode so the idea here is
you've got your your web application or
your hybrid application on a server
somewhere that we can only connect to
periodically the first time we connect
for that server there's something called
a manifest file as part of the
application
and we've defined this attribute in our
in our app sister excuse me an HTML
attribute and it just says where the
manifest is WebKit will behind the
scenes using its power go ahead and
fetch that manifest file and that
manifest file will be a list of all of
the files required by your application
this is something that you write so you
have to manually maintain it and it's
reads all those files and it says ah
okay that's my application and it
downloads that from the server obviously
we have connection at this point and so
I'm walking around oh I can't walk
around with this because I'll it's
active stuff but I'm walking around with
my device and then I'm out of I'm out of
range and then all of a sudden I my
application rather than giving me a bad
link or give some other kind of timeout
it will just use the files which has
been cached on the device that I listed
in my manifest so the user doesn't
notice whether they've gone in range or
out of range or not as far as they're
concerned it's a seamless experience
they're carrying on they're scanning
their barcodes on their well whatever
their job is in their warehouse and when
they come back into range is when you as
the application developer have to be a
bit more clever so his his an example
then of when web SQL would be useful so
in that situation where I've gone I've
lost connection and I've started
scanning barcodes well previously
imagine what I was doing was uploading
them to a server can't do that anymore
I've lost connection so if you keep an
eye on the whether you're connected or
disconnected and we have an API for that
then instead of uploading them you could
save them into a web SQL database or you
could put whatever data you want in that
database associated with the scan and
then when you regain connection you can
go and do a select on the database and
then upload it with whatever technique
you were previously uploading it when
you had connection so I'll talk it's a
talk through example because I didn't
want to start setting up a network and
having everything go wrong there but
that's an example of a manifold so
that's an example of a manifest file
very small one there's any two three
files in there you'd also have all your
images or any resources in your
application the only change to the
application it doesn't have to be called
dot minf but this is essentially just
pointing at this manifest file and as
soon as that's posed by WebKit that is
this tag here it's parsed by WebKit
it'll go off and do the needful
downloading all of those files and
there's more information about this
online on the html5 doctor this wasn't
actually originally my slide so I take
it that that's a very good website to go
to
okay so how are we doing on time
excellent okay so other elements API so
you've seen scanning you've probably
seen scanning to death because that's
what we always use as the example it's
what I know Rob was using yesterday in
his presentation and whenever you talk
to anyone at Motorola they'll always
pull out scanning because we call it our
bread and butter on the team this well
that's what it is that's why we're
that's why we're here because we're
selling scanners and oh and software now
but yeah so this is I just wanted to
walk you through the the online
documentation so obviously you could
look at this yourself but I did want to
talk through very briefly so that the
link for this is doc Stavro mobile comm
at the moment eventually we may be dogs
eventually we may be bringing this into
the launchpad fold but certainly in the
short term medium term this is what you
should be using as your primary resource
so anyone familiar with row elements one
will be hopefully familiar with the
compiled HTML help file that was
installed as part of the installation
now that no longer exists environments
to all of our documentation is online
with decision we've taken for a number
of reasons one of which was because I've
been asking
all online for years it was a bit of a
mess that we didn't have it online
because we find an error that this has
happened to me we find an error in the
documentation and we have to wait for
the next release for it to actually be
fixed that was really poor but now so if
you look down the left-hand side here
these are all of the API is available so
API list is just an alphabetized list of
everything and if I go through down here
you'll see like battery will cover
briefly shortly which shows the battery
indicator and these are this is the
entire set of api's that were available
in row elements one plus the set that
have now been brought into the fold by
the Rhodes acquisition so you'll see
camera which is come from the road
stable and FC all of these have come
from the Rhodes stable and well
obviously very rote controller so that's
an alphabetized list but if you don't
want to use the alphabetized list if
you're not sure what you're looking for
or what they're called then we Rob I
can't claim that I've done this Roberts
also group them again so to use our
favorite scanner as an example barcode
and you see oh no not barcode that
wasn't scanner it was barcode let's get
back down to the scanner I'll come to
barcodes shortly I do want to pick that
out special as a special mention
so scanner again very familiar to anyone
I'll stand here in this white space
anyone who's seen row elements one so
the syntax you can either use meta tags
to access the existing scanner object
you can use Java scripts which is what
we've been using in our examples do I
have it down yes and but now in elements
too you can also use the Ruby syntax so
this is the syntax that you saw Rob
using yesterday and if you've got any
any questions about the differences
between JavaScript and Ruby then you can
refer to this top section the most
important difference is Ruby uses a
capital letter that's how it it has to
have a capital letter at the start it's
modules where as JavaScript for well for
backwards compatibility really is the
reason it's particularly different it
uses a small s up there so that's one
difference another difference is Ruby
doesn't have brackets after it's right
up there doesn't have any and so this is
common for all of the api's which have
come out of the row elements table again
you may have seen this in bonus one
methods are listed at the top they don't
have any any properties associated with
them certainly there's no parameters and
parameters are name value pairs you can
think of them so enabled and then you
specify the scanner that gets enabled so
you might have more than one scanner on
your device scan one scan - this is how
you enable the non-default scanner and
then there are a lot of properties
associated with the scanner I was saying
yesterday it took me all day to write
this and this isn't even the decoder
properties okay so at the bottom then
the events associated with each of these
api's a decode event here you've seen
we've used decode event the data and the
time and Bluetooth scanners have a
separate event to say whether they're
connected or not incidentally that's
this isn't the this isn't the cs3070
that that's a separate API that's just
through through bluetooth where this is
talking about the Bluetooth RS 507
scanners and ring scanners that you have
associated with a number of our MPA -
platforms and then there'll be some
general mock remarks at the bottom of
each of these pages and some examples
yes of course examples we are in the
process of rewriting a lot of our
examples it's it's probably do the
products get it working with top of the
priority and then slightly below top
priority was actually get some Ruby
examples in there so you'll see all of
these are the re one examples and
working on some Ruby examples for the
row elements API so I can remember where
I was going with the presentation so ah
okay right now we're going to add a
battery icon to our application so just
to walk through how we would do this
let's just find the battery API do I can
see it in the alphabetized list let's
try and be clever and see if I can find
it in user interface it is its battery
so all we want to do oh no oh yes it
worked okay all we want to do is to show
the battery and move it to a different
location so I'm going to be using the
JavaScript so I'm going to be using the
JavaScript for this because well one
I've got a hybrid application so I don't
have any Ruby they might in my app but
if I have got a native application I
might want to do this in my view because
I don't consider this part of my core
business logic or I just want to do it
on a specific page there's any number of
reasons and you might just want to do it
in JavaScript so if I go down so we
don't want to use that method because
that's for some smart batteries but
we've only got a dumb battery in this
terminal so what we want to do is to
make it visible and to set the some of
them well let's just let's just show you
that would be easier I think so well my
gosh it's so big DCC
here we are DCC for this is the last
time I'm going to be doing this so if is
row elements show battery and I'll show
you the code for show battery on the
next slide I think it is let me just
copy that over to the device
okay so it's refresh now this is huh
here we go okay so yes oh I've lost some
power bar okay so this is a battery icon
you may have seen it rotating it looked
quite cool actually that it's not
supposed to do that it was just doing
that because it was executing the
JavaScript on the following slide so
this was a demonstration yeah I went all
out here and I actually downloaded the
the skin but then it ended up being
quite smooth so I didn't like doing that
for the rest of the screenshot okay so
this was the show battery function in
JavaScript so all it does is set a
number of properties I went through
great extremes to find this this is the
hex code of the color that's used in the
application I can probably show you the
application side by side not really much
to say about this really this is a
string obviously and this is number so
these go on the right hand side of the
properties and up just makes it point
upwards and so though all of those
properties were self evident in my
opinion and you've got those from the
help documentation okay so I did want to
briefly talk about how you could bridge
the gap between native and hybrid so I
unfortunately I couldn't get to the
beginning of Jeff per embers talk
yesterday but I thought I'd cover it in
this talk as well this isn't this isn't
an in-depth how to access web apps from
native apps this is just one slide in
passing Chuck's of knowledge at you
native apps are run on a web server on
the device so you have all of your Ruby
code in your web server and your view is
over here being rendered in the Motorola
web kit and they're communicating in a
client-server relationship you can think
of it that way certainly for view to
controller
communication it's it's client-server so
this is let's say so imagine we had the
scanner example and this is very similar
to Rob's examples that he had in his
presentation yesterday so he enables the
scanner this is in rubies our Ruby
controller in our native application
enabling the scanner all decoders here
and this is the way we configure the
scanner or sorry this is the way we
configure the the scanner cool back the
decode event if you will it is for Ruby
so we just give it another Ruby function
down here you see Capital West scanner
like I mentioned earlier decode event is
the event name and the the actual
scanner callback is defined here rather
than receiving all of the properties as
a JSON function there now returned in
true Ruby fashion as a ruby hash in this
forum structure so we can now access the
the data and time from that hash the
interesting part of this code what more
interesting part was obviously it's all
very interesting the webview executes
j/s so webview exists as an object in
the native application as something you
can use to interface with your HTML page
and you can say don't navigate I believe
if you look at the documentation the lot
of the api's are there and you can also
say execute j/s so which is JavaScript
obviously so there's a display message
function in our view that is taking this
data and it will well presumably display
the message I haven't actually gone to
the trouble of listing that here but
what about if we want to go the other
way so in our view in our view and on
our client that's not on the server we
we have a JavaScript function enable
scanner
now we don't cool scanner dot enable we
want to tell our native application
enable the scanner so the way we do that
is to use this this Ajax call here
dollar get
and the Ruby sorry the native
application is called scanning example
in the app directory on Indy in the
hierarchy that if you've been to the any
of the presentations yesterday you would
have seen and enable the scanner just
for completeness from the previous slide
I use the same name enable the scanner
and it doesn't take any parameters and
that in a nutshell is how you go from
the server sorry the client to the
server I had someone asking me yesterday
well isn't this gonna get confusing if I
enable the scanner in my JavaScript and
then I do some Ruby here and I cool out
to JavaScript and then that comes back
into Rueben he was saying this would get
really confusing and I was saying yes
well that that is a very confusing way
to do it and you wouldn't want to do it
that way this this isn't a regular use
case to be to be cooling between the two
if you've done a native application then
you're going to be writing your business
logic in in the controller you're not
going to be writing business logic in
the view it's this this is a an
exception rather than a rule
okay so finishes that portion of the
presentation okay right so
cross-platform consideration so I again
this is something I wanted to mention
briefly so you heard from from marketing
from Mark from from everyone I'll say it
as well this is really write once run
anywhere the software what you're doing
here with Romo bar suite but you have to
have some basic common-sense
considerations here so iPhones don't
have laser barcode scanners so you can't
say to an eye an iPhone application
enable us an obscure symbology can
postal sorry if there's anyone that uses
can post them in there but it's it's not
one of the major symbologies we use so
if you have your application that says
to an iphone to enable it the iPhone is
just going to go there understand that
similarly the the MC 75 here doesn't
have NFC so you're gonna need to be a
bit
clever how you write your applications
if you're going to be porting to a
number of different devices so primary
resource service information here is
this online compatibility guide and
probably easiest now I have a link on it
if I pull it up in my browser so this is
constantly being maintained so here you
are at the top here we have the various
different platforms so you can consider
these are the elements one applications
and these are the applications that have
been brought into the fold that sorry
platforms that have been brought into
the fold by the combined product not all
of the api's are available on all of the
platforms for an example I'm going to
cover now is scanning so scanning is s
so scanning in terms of scanner dot
enable and scanner dot decode event is
only available in the first will it be
useful if we had a I'm not gonna set
frame for that like frames there be
something up there on the the et1 and
Motorola the CA windows mobile devices
here but you say to me Darren Darren I
want to have Barker's scanning on my
iPhone as well and I say yes when you
can because you write once and you run
anywhere but you're not going to be able
to use the the scanner on the iPhone yet
in 2.0 what you will want to do one of
two things probably what I would do I
would have and like is is moto device
there's a couple of ways to do that in
hybrid there's the generic OAM info and
in native there's another way of
determining if it's a moto device can't
remember off the top of my head that's
one way and if it is moto you could use
the scanner if it's not Motorola you
could use the bar / barcode here we are
so you see barcode is supported on every
single one of the devices this is
something that's come out of the road
stable and so it's very cross-platform
but because it's so generic if I just
click on the on the help for here
you'll notice it's it's not quite as
functional so whereas before you
remember that list of enormous list of
parameters I said took me all day to
write well now we just have take barcode
which will show a little that the camera
on the iPhone it will bring up the
camera and you can scan the barcode like
that and it will send it to your
controller and I believe there's a way
to specify which decoders I can't see it
but regardless I mean this this is the
the completeness of the help file so if
you just wanted something simple just to
take any barcode maybe it's a primarily
a consumer app for example then you
could use this barcode API otherwise I
would I would suggest that you use the
the is moto device and then the scanner
for Motorola devices and the barcode for
the the iPhone and the BlackBerry okay
and finally there oh that's good timing
wasn't it and finally I just uh Rob
asked me to put a slide in for best
practice advice so like I say I've been
on the product now since the inception
of row elements one which was so we've
actually had our WebKit pull out there
for a number of years so enough for a
number of years for a number of months
and so I was just so excited and so
and so we've had customers using the
Motorola WebKit and I've been involved
on the product since Pocket browser so
I've seen customers using it with
Internet Explorer which is what we
previously used to use in Pocket browser
and just constantly complaining that the
rendering was poor so we we fixed that
and now what's happening is customers
are mentioning no names are loading
enormous Dom structures into the
application now it's it's WebKit it's
it's fast its html5 whoa on Windows
Mobile which we've not seen before in an
enterprise environment but these are
still this is not an ET one the ET one
for example has a one gigahertz
processor whereas the es 400 has a 600
megahertz processor for example you're
not going to get exactly the same
performance from those two devices
because they're not the same so just a
couple of things here to really try and
avoid enormous Dom structures and the
device just use Ajax just get the bits
of the pages in as you need them avoid
using frames this is it's not a hundred
percent necessary but I I'm a web
developer as well as everything else I
try and avoid using frames I think it's
bad practice and if you get a call back
via from the scanner for example that's
going to come to your top level frame so
you're going to have to write some kind
of logic to route that to the
appropriate frame to be honest it's a
not heck of a lot simpler without
wishing to use nobody words to just use
like a div tags or some other kind of
layout to to create your application a
little bit nicer and the other thing
you've heard a lot about jQuery Mobile
and sensor and how you can use these
these frameworks to make your app look
like and what was the example yesterday
look like a an iPad on an e t1 well
that's that's great but what we're not
going to be able to do is have an iPad
on an MC 2180 that's like one of our low
end value tier devices quite popular in
in India
at the moment I think it's selling
really well but it's a low-end device
you're not going to be able to run beefy
frameworks on those low-end devices so
just just it gives some considerations
into it into some of those points</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>