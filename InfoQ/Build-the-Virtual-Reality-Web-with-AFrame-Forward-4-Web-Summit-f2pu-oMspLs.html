<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Build the Virtual Reality Web with A-Frame - Forward 4 Web Summit | Coder Coacher - Coaching Coders</title><meta content="Build the Virtual Reality Web with A-Frame - Forward 4 Web Summit - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/InfoQ/">InfoQ</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Build the Virtual Reality Web with A-Frame - Forward 4 Web Summit</b></h2><h5 class="post__date">2016-04-26</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/f2pu-oMspLs" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">everyone my name is Kevin and I'm a
developer on the mozilla virtuality team
and before i start talking about a frame
which is a library that allows us to
build vert reality I first want to talk
about immersion so while vert reality
sounds new it sounds shiny the pursuit
of virtuality has lasted thousands of
years dating back to the very first cave
paintings these were the very first
immersive images that gave did
inhabitant the sense of entering another
world and since then the medium
immersion has only evolved throughout
human history from those cave paintings
to art to books and up until more
recently video games and video games
over the last 30 or 40 years have really
pioneered the art of immersion and fast
forward to 2016 and the very first
version we already had set our shipping
earlier this year Samsung gear VR
shipped and in a matter of weeks
oculus will ship their very first
headset to consumers and then soon HTC
and Sony and Microsoft will join the
arms race we never really needed virtual
reality goggles to experience immersion
we've all read a book that we've been
totally sucked into or we've been
totally engrossed by movie or we spent
hours on and playing video games and
feeling as if we were in another world
games like minecraft or movies like Mad
Max or books like Harry Potter Harry
Potter but how many of you have here by
show of hands how many of you have tried
a virtual reality headset all right so
let's almost half the rib and how many
of you have tried web VR all right does
it feel you so this talk is kind of
extension of the future of immersion
panel so for those of you who have tried
virtual reality headsets you've know
that the sense of immersion it gives you
it trumps all previous forms of 2d
mediums the sense of emotion that can
give you is very hard for 2d memes to
touch that level you've I've seen
reactions like this it's I've never seen
anyone have
reaction to a 2d medium and I've
witnessed this firsthand I give a lot of
VR experiences to my wife and I've seen
her come out of headsets with tears
literally streaming down her face and
because she's so overwhelmed and
enthralled by the sense of immersion and
in one case I gave her a Samsung gear VR
to try out and it was an ocean
experience where you float on the ocean
and you try to find marine life so I
found some dolphins I gave it to her and
say hey check this out and then a minute
later I hear a scream and I'm like
what's wrong they're just dolphins
what's so scary about dolphins and it
turns out was like no I saw a shark and
she's like in the blankets and all
scared and stuff and it turns out she
accidentally switched to the shark
experience so I've seen emotions of joy
and fear and sadness and surprise that
mercury has brought us so with this new
sense of presence where does the web fit
in to virtuality
4GS right now and we're kind of talking
about the future web and there's not
much more future than talking about raw
reality so we're a web fits into this
and how we can all start playing
virtuality today is what my team has
been working on for the past over the
past year and a half so Moz VR is a
small research group under Mozilla and
it will start over a year ago by Josh
carpenter who's sitting in the room and
they want to answer is the web viable
platform for virtually out for virtual
reality and it's a web of a viable
platform work for virtuality and yeah
how can we enable that so our
engineering director at Firefox flatbuki
Javitch and Brennan Jones a software
engineer over at Google they both
collaborated on a initial spec of the
web PR API and they got together and
they released initial nightly versions
of Firefox and special builds of
chromium and this was kind of starting
gun for what VR
it allowed people to start playing with
every are instantly
so this is just a web page a web page
that you could just reach out and grab
and touch and kind of feel like you're
in this 3d virtual space and one minute
you could be flying over the Arctic
Circle and the next second you could be
hovering over a mountain pass so we can
all so it's possible to do today but how
do we start doing it it requires a lot
of graphics knowledge and beauty
knowledge and for what developers it's
just too hard to create web VR
experiences the skill gap to create a 3d
experience
it's just joint from the skill the skill
set that what developers have you need
to know a lot about shaders and graphics
and 3d programming and that's not
something that web developers encounter
an encounter often so what most
elaborate reality team want to do is
want to unlock this group of millions of
web developers and give them the
creative potential that a small group of
really hardcore graphics programmers
have today so rather than writing lots
of three.js code and having to have lots
of knowledge about graphics or 3d
engines and such like that instead we
wanted to do something like simple
something like a box or a sphere or a
obj model and this is something we're
all accustomed to as what developers and
web designers it says HTML syntax and
it's just that's just as basic as it
gets and then we can just pass
attributes to these elements so we can
give depth shape to the box we can give
a color to the sphere or we can specify
a path to some 3d model that was
exported from blender or Sketchup so
last holiday we released this library
and we called it a frame so a frame is
an open source framework that allows us
to create virtuality web experiences and
you don't have to know any WebGL to get
started and even more you most cases
don't even have to know JavaScript and
interesting to note
logo is written complete in a frame just
in HTML
since then the community has well
received this new library they've been
creating really cool things and everyday
women go to work people are sharing a
new thing and we try it and we get
really excited
most of these scenes they're just using
markup no JavaScript at all from people
that don't even know JavaScript and they
create scenes such a strong such as
visualizers or tunnel riders or even
copying minecraft they've created using
elements such as this so a frame comes
out a frame comes with all the box
elements that allow you to get up and
running really fast and these elements
such as a image or a video sphere or
geometric primitives such as a box they
can be manipulated using just vanilla
JavaScript that in these interfaces that
we already know so you can do your
standard query selectors your get
attributes you can do set attribute or
you can add event listeners and Kriol
months and as a result we can use all
the libraries frameworks and tools that
we all know and love or yeah so can you
use jQuery it works with d3 and it works
pretty well with react a frame also has
an animation system and this is sort of
based off the smile spec and we have a
web animation spec so you specify an
animation as a child of the 3d object
and you just get animations from out of
the box and this is we're using we're
using tween jeaious under the hood and
also worthy to note that we have an
asset management system under works so
in 3d programming and game development
it's important to have all your assets
loaded up front so you're not trying to
fetch and render not trying to fetch and
load assets while you're rendering
because that's a big profit
so we trying to address that concern
because the number one priority in
virtually re on the web
performance so that's a lot of
information taken even though it's
pretty basic and pretty high level what
we can get started with this is a live
coding session so we can go over to vim
here and I have a boilerplate setup
that's cut off it's that big enough okay
so oil please setup and it's we're just
note that throughout this presentation
I'll be talking about our next release
of a frame which would be coming up it
would be called Oh - oh and I'm using
time a beta special built for this
presentation because I want to show off
features that it's not yet released so
we have we start with a scene and a
scene is just the container for our 3d
world it does a lot of magical things
such as setting up the renders and the
VR renders and the render loop and if
needed default camera and lighting
systems so let's start off with adding a
sky which is which will act as our
background so we can specify a source
just like as we do with image tags and I
have a image already taken I did a trip
to Hong Kong a couple months ago and I
brought around 360 camera so I have some
pictures already ready to be win virtual
reality is here okay so this is just
looks like an image but I can't cheat
just pan around here and look around
this environment and this is just one
line of markup so you can have 360
photos in just one line and the 3GS
equivalent would probably with VR at
least 150 lines also to note that I
didn't realize that I needed an HDMI
cable with the prison to do the
presentation and oculus rift also need
an HDMI cable so I couldn't really
demonstrate VR but you can imagine if I
moved this headset over here and I
rotated it the camera would rotate
- one with the with your head alright so
one problem is that I don't really want
to face this way I kind of want to face
towards the point of interest here so
this is all a right-handed coordinate
system and if you can imagine that what
positive y-axis is pointing up the
positive x-axis is pointing to the right
and the positive z-axis is pointing
I think outwards so if we want to rotate
this guy we just rotate it in this kind
of direction and that would be about the
positive y-axis so what I can do is I
can just add a rotation and this takes
an X Y and the Z value in degrees so I
want to rotate it 90 degrees
save that and now we're kind of facing
in the general direction we want and I'm
just gonna tilt the horizon a bit just
to get it a little bit straight so I'm
just gonna modify the role here by a
negative two degrees and that's a little
bit more straight next thing I'm gonna
do is I'm gonna add an object design so
in what development and in web design we
make heavy use of images so let's try
adding an image in so I have an image
already and I'm just gonna reposition it
this is also with an x and y XYZ
coordinate back negative 3 up negative 3
that's probably PNG file that's what the
moment that is truly what development so
I'm just gonna skip that for now since
it doesn't seem to be rendering but I'm
also gonna try to render a 3d object
file so I grabbed a 3d object file from
3d warehouse and since Lunar New Year
was a couple days ago
I'm gonna kind of celebrate the New Year
by celebrating the year of the monkey so
I have a monkey file set up a monkey
object and I can specify the source and
point to the monkey 3d file and then I
I'm also going to quickly specify the
color here and I'll explain the syntax
later on so I'll just give it a kind of
reddish color or brownish color and I
can actually specify how many wit is so
that will affect how the light hits it
just close attack so that doesn't look
like a monkey and it turns out just cuz
I grabbed it straight from the online on
the internet it doesn't really fit well
within my scene so I need to shrink down
a little bit what can you use what can I
do is I can use a web inspector just as
we do in normal web development I can go
through the scene it's a little bit
small but I'm just going to select the
obj model that I just did and I'm sure I
try to scale it down with the scale
component so I can do scale and I'm
gonna make it a thousand times smaller
and now we kind of see you a little
monkey statue and that fits very well
with our scene so I'm just gonna save
that value
so thousand times spawned x-axis the
y-axis and the z-axis all right you know
the clothes a Dom inspector
so in Chinese a year the tradition is
that you give lucky money to people in
order to with some prosperity and we're
gonna do this same with the monkey the
monkey is kind of holding a pot out so
we're going to try to give it money so
we're going to try create dollar bill
using a box and it was convicted box
really thin and really long and we're
gonna try to position it within the pot
it's gonna depend on critical accuracy
here ii do a box and i could specify the
def to be four I got these values I'll
hopefully memorized Swift should be very
thin and then the height to be about
half a depth and I need to position it a
little bit outwards
thank you posit on okay so kind of see a
sliver two-dollar bill because it's not
rotated in the correct direction so I'm
gonna tease a tool that one of our team
members have been working on for the
past couple months it's kind of going to
go back and forth and find the right
value save it and fiddle so what we have
is we have a bookmarklet I'm just
clicking a bookmarklet in my bookmarks
toolbar right here call it editor and
then it checks a button to the bottom of
my page and I can actually click Edit
and go into sort of a WYSIWYG tool and
zoom in and out so if I want to rotate
this box I can just kind of click the
box and it brings up handles which I can
use to drag the box around so I can try
rotate the box here so that it's kind of
facing towards the camera a little bit
more and just to show that it's actually
live I can move the monkey around using
these handles and if I go back into the
view you can see the monkey has kind of
been translated so that's pretty cool
I'm gonna take those values and save it
into my HTML file
okay and the monkeys not really happy
with this little piece of gray slap that
doesn't really have any currency value
so I'm just gonna give it a texture so I
can specify an image as a texture and it
will be mapped to the geometry so I have
a image already called money and I'm
just gonna specify it as a white color
so the color of the material doesn't
bleed through and then we have a dollar
bill so the web PR doesn't really work
because I only have one HDMI port so
this would actually be a good
opportunity to show off you you could
try it yourselves right now so what you
can do is after I get back in here since
the web is meant to work everywhere is
we're all accustomed to that the web
works on desktop the web works on phone
and just as we are with VR it also works
on the phone with a frame so we're using
the web BR polyfill to enable this and
I'll just let you all try it for
yourselves so I posted a link on my
Twitter no Kevin with an underscore and
that will link to the live version of
that site and you'll actually be able to
move to phone around and view it in 3d
space so I'm gonna give everyone a
minute to try that and I'm just gonna
stand over here for a bit
or if you have a laptop could also pull
it up and try it as well so for those
who do got it working or for those who
just it works cool so for those who do
it working or for those who are just
kind of sitting and chilling if you move
the phone around you can see yourself in
moving panning around the 3d scene and
this is what Google cardboard kind of if
it's kind of compatible with you can
press the goggles and get a stereoscopic
view you could pop into Google cardboard
and then you could kind of view it and
so over 360 view
responsiveness responsiveness is awesome
all right so that was a high-level
overview of a frame I'm going to start
talking more about the internals of a
frame and how it sort of internal engine
of it or the core system of it so if we
want to bring 3d in virtual reality to
the web we're going to need to adopt 3d
and game development patterns that have
been established over the years so a
frame exposes in any component system
pattern and this is a pattern common
Gaytan to game development it's used in
Universal game engines such as unity and
what it does is it favors composability
over inheritance so what this means is
instead of building a class for every
single type of object that you want to
create you just kind of create your
reusable components such as color or
light or engine or tires and then you
kind of snap together these components
like Legos and build current like build
objects so if we wanted a car we would
just take the tire component and the
color component and the light component
the engine component and we were
configured components and then we put
them together and if we want the bike we
would just exclude the engine and say if
we wanted a boat we just exclude the
wheels and that's kind of an abstract
way to think about the indi component
system in more definitive terms the any
component system is where entities are
just placeholder objects in the scene so
you can imagine them as an object with a
bunch of little sockets and then we take
these components and we plug them into
the sockets in order to the modify the
appearance the functionality and the
behavior of it because without
components in the system the entity
doesn't do anything and it doesn't
render anything and this allows us to
really reuse code and be able to make
more types of objects using just a
limited number of components so all the
elements I show you before like a box
that actually expands to a entity which
is our representation of the entity in
markup and all the elements all the
attributes that we showed before such as
width or color those map to component
properties so the width would actually
be a would actually map to the
geometries components with property and
the color maps to the material
components color property just see this
more in action we can compose an entity
so we have an entity myself does nothing
if we want to give it shape and
appearance
we could add the geometry and material
components and each component has lots
of different properties in themselves so
it's very customizable if we want to
have it do more things we could have it
emit light or play sound and if we want
to get crazy
we could pull components that other
people have created and just use them on
our entity so if someone made a face of
it we could add physics to make it have
it be affected by gravity or maybe
someone created an agro component that
makes it attack the player or maybe it
can explode or vibrate and with all the
components that we expect people to
create and all the numbers of components
in the ecosystem if you permutate all
the components are out there you kind of
a virtuous become a virtually infinite
number of types of objects that you can
create and you don't have to and this is
kind of contrasting to an inheritance
inheritance system or a hierarchical
hierarchical system where for each class
you extend from a different class and
you pull in lots of different classes
and then you end up having a big tangle
of hierarchy so to see the inside of a
component and how its created I'm going
to explain one of our most simple
components which is position so we can
use a frame to register a component and
then we just pass a position name or a
component name and the component
Nishan so the anatomy of it is it's the
schema that's the shape in the data of
the component and that defines the type
of the data how many different
properties there are how the data is
deserialized and serialize to and from
the DOM and the Physiology or how the
component works you can define it with
life cycle handler methods so you can
define an update handler method which
uses the data to manipulate the 3d
object so the component has a reference
to the element and then that element has
a reference to its internal three j/s
objectivity I don't know if I mentioned
it but a frame runs on top is like an
abstraction layer on top of 3GS so we
just take the object or YZ position and
we pass the data in so most components
will be interacting with the 3GS API a
frame comes with a bunch of standard
components out of the box
and bottom cells those are fairly useful
but if you find something that a frame
can't do or is limited because the core
team hasn't developed a component for it
you can just write your own component
and within the last two months we've
seen people write a handful components
that enable a lot of cool things our
community has been really really our
core and they've really dug down to the
system and they just get really excited
and they just build cool things they
don't let obstacles get in their way so
they feel come they build component such
as proxy controls that allow you to use
the phone on your face and then you can
attach a gamepad to it using WebRTC or
WebSockets rather and lots of components
for different types of geometries and
controls and components to explode
things collide things or load 3d objects
so the component ecosystem is kind of
the core tenant of a frame it enables
permissionless innovation so compelled
components and that enable other
developers to
create really cool scenes and they kind
of just drive each other so we saw the
syntax earlier it was kind of like a
style like syntax where you specify it's
kind of CSS we specify a rule and then a
value and to some people that you kind
of like cringe at that and but with new
libraries you kind of introduce new
concepts I mean when reactors came out
people were like that's HTML inside your
GS that's like PHP all over again but
this is kind of an elegant design you
can actually just specify to overcome
the longhand syntax you can just specify
mix-ins which take components and store
them and then you can use them later on
so if I have a mixin called green and
then mixing called ball later I can just
use an entity green ball and here's what
a composability story comes back into
play you can compose these makes sense
and creates to create different types of
objects and it creates it's actually
kind of like English so you can say
green ball or shiny ball shiny green
cube shiny green ball shiny yeah so with
just those four low and you can create a
handful of different objects and I can
imagine with this mixing system since
that's kind of like analog to the style
element where you specify inline CSS
I can imagine later on we could have
something like style sheets so you maybe
later on we could specify mixin as what
we now specify as a selector and within
that selector or rule group we just
specify components and here's a like a
basketball component so maybe in HTML
I just specify mixin equals basketball
and this is what we're all accustomed to
as what developers we like to separate
the concerns between the presentation
and the structure of the Dom and in this
case we're separating the presentation
appearance the functionality the
behavior and we're separating it from
this three structure at the scene so
that was a really quick run-through of a
frame and it's important to note why a
frame is important it's gonna enable the
web BR ecosystem to create content and
because we don't really know what's
gonna be in the future what they are we
don't know what 3d browsing is feelin
look like in the future so we need
content for people to validate ideas and
iterate and see what works and see what
doesn't and also a lot to note that a
frame isn't the first of his kind
there's husband other markup or
decorative like libraries out there
Tony priests easy are ml was a very
first of his kind and it was 20 years
behind his time because it was so early
and then that manifested now into glam
and then there's also inspirations taken
from library such as X freedom and we
just wanted to kind of do our own take
on it and kind of introduces any
component system which we think is
really nice so with this we're hoping to
enable this massive what developers to
create tons of content and we want to
learn from the web developers because so
what developers they're going to create
the interaction models that we don't
know about yet we don't know what's
gonna be the next hamburger menu we
don't know what's going to be the next
drop-down accordion menu and maybe in
the future maybe it'll actually be an
actual hamburger you can actually have a
3d scene and you can just open up the
hamburger or play an accordion for the
drop-down menu so together we can kind
of before I get into that we I'm gonna
draw up some links up here you know do
some time for people to process that we
have a really active slack community we
have over almost 300 people in less than
two months and they're all actively
sharing things and bouncing ideas off
each other and asking questions which
it's really nice we have the official
a-frame site and the a-frame github repo
and then the team site is atmosphere
calm
so if we keep developing the featured
webs maybe one day we'll start to get
science-fiction and I forgot to mention
this before but the strengths of the web
why are we talked about virtuality with
the web it's not doing virtuality just
in the web just for the sake of doing in
the web it's not just JavaScript just
for the sake of JavaScript the web has
inherent strengths that could really
benefit the medium VR in the future
strains such as the ability to publish
anything you want the ability to go from
world to world without any gatekeepers
the ability for us to really easily
really really easily develop content and
just as today we click on a link and we
jump from page to page you can imagine
one day we might jump from world to
world and the current state of VR today
is it's a lot of different headsets from
a lot of different companies they all
have their own siloed ecosystems and all
these apps in the ecosystems they have
no really or no real awareness of each
other
if VR is more webby we can start to
converge on something that's been
described in science fiction within the
past 40 years the Metaverse so the
Metaverse is this idea that we had to
share clout the virtual space that we
can jump into and interact with the duty
environment see each other and be able
to hop from world to world and with the
web
that sounds pretty natural hopping from
world to world so if you combine the web
and VR you kind of naturally get
something like the Metaverse and it's
been tried a couple times
Janus VR and our space are doing
something very much like the Metaverse
and they're producing a really cool
product and but they don't have to
really worry about web standards so they
can move really fast for a frame we
can't do that to think about the future
of the web so yeah so everyone can go
out there today
and grab a frame and try to start
building the virtuality web get on slack
talk to us and together we can maybe
make science
I got about a couple minutes I can
answer her questions if you have any
yeah okay so she asked how did we map
that texture to the dollar bill in the
monkey example so in we have a three J's
absolute we're going to three yes so all
we taught to read yesterday was take
this image and map it to this mesh or
this this polygon and underneath that it
just the shader just takes an image and
it does lots of deep down magical stuff
to kind of map it around the the object
that answer your question there okay
well what's interesting is I've only
been doing this for about four months
and that's kind of test to how easily
this makes 3d in virtual reality
development so so that hasn't been done
yet but I can imagine someone creating
something like bootstrap or they release
a library that has law default make
sense and a lot of nice default
appearance and then I imagine people
could just be able to portals down and
similarly with Style Sheets I imagine
the future people will be able to share
these groups and mix-ins with each other
but for now I haven't seen that yet so
you you kind of write your own mix-ins
you know you want to interact I've seen
is that the question so yeah you could I
didn't show it off but we do have a
cursor component which shoots a ray
caster and what a red caster is it kind
of shoots a laser from the middle your
head and if you whatever it intersects
with whenever you trigger a click event
it will trigger a click event on the
entity and there's also an interaction
model called gaze based cursor and what
it does is if you stare at something
long enough it will trigger a click or
also called fuse space cursor so that's
a way to click without having to need a
mouse
it's something to add for the
interactivity oh yeah
so leap motion there's a video earlier
that it shows that it can be done with
what VR so you could actually just reach
out and touch things I think they're
working
I think leap motion controls will be
coming to a frame pretty soon people are
writing components for it so you could
actually just map all five fingers and
detect collision events with objects in
the scene alright the question session
is five minutes over so every once I
don't want taking one's time so
everyone's free to go thanks for coming</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>