<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Ember Data: Tips, Tricks, &amp; Lessons Learned | Coder Coacher - Coaching Coders</title><meta content="Ember Data: Tips, Tricks, &amp; Lessons Learned - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/InfoQ/">InfoQ</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>Ember Data: Tips, Tricks, &amp; Lessons Learned</b></h2><h5 class="post__date">2014-06-13</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/HL2bMjndviE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">alright there's a link to my slides on
the Twitter account Chris we CH are is
oh yeah I know about me I started
learning JavaScript a JavaScript
framework called sprout core about a
year and a half ago and while there are
some things that I really liked about
sprout core that's the data bindings the
computer properties and all that sort of
stuff there's a lot that I didn't like
about it and that was the UI widgets
that provided it was really too rigid
and when I found out that ember came
from sprout core and got rid of all the
stuff I didn't like and improved on all
the stuff I did like I decided to learn
a little bit more about amber
not long afterwards I met some folks at
blurb joined up and my quest for ember
lore began in earnest blurb helps you
make books books that look great you can
design in a book with pictures upload it
and get professional-looking books
hardcover if you want there's a book
that co-worker in front of mine made he
loves cats nothing but the best for his
cat highest quality paper okay you can
print one copy you can print a thousand
our target market is indie authors and
we've got over a million paying
customers got traction quick survey
which view used ember so far just play
around with it all most of you great
used ember with any sort of REST API
back-end not necessarily in Borgata
played wrong with ember data itself mmm
all right own adapter wrote governor
adapter you're okay and
temper dated in production I wish had
some swag to give you folks all right so
baby you've got a maybe you've got the
freedom to create a new ember app a new
API or maybe you've got a pre-existing
API you want to create a new app for it
or maybe you've got an existing app and
an existing API in each of these cases
you have a couple of different
possibilities you have ember data but
you also have a couple of different
alternatives you have an ember model you
have amber persistence foundation you
can roll your own and if all else fails
you can always commit suicide these are
ordered from the most opinionated to the
most flexible now amber of data is
probably the most developed of all these
solutions and it's the one that's
supported by the ember core team so
going forward it's what the core team
probably expects you to use in future
versions of your app I'm kind of person
who's fascinated by the concept of time
at one end of the spectrum you've got
the pyramids things that seem to sift
they've been around just forever and on
the other hand you've got cherry
blossoms or Sakura and Japanese which
symbolized the brief and tragic life of
the samurai on one hand the spectrum you
have pearl six and on the other end of
the spectrum yeah amber data
hey Google Trends you can see the blue
line there is ember takes off really
quickly and gets off to a good start and
bird data is newer and slower to mature
but you can see in the past year or so
it's made a quite a bit of gain they're
old versions one thing you want to keep
in mind as you're looking around the
internet for hints and how do you debug
your app September 1st 2013
that's when Emperor 1.0 beta released
before that there are a lot of
differences in ember and there were a
lot of breaking changes that happened on
that particular date so if you have a
lot of blog posts you're looking through
if you're looking at a blog posts
written older than that there's a good
chance that what you're reading is out
of date and we've actually spent many
many hours of looking through stuff
trying to figure out why didn't work
only to find out that the underlying API
just changed and it was just invalid an
overview of those changes from a high
level point of view ember data is
promise based now so if you haven't
brushed up on your JavaScript promises
now's a good time it's also a
transaction list before that there was a
concept of a transaction where you have
to commit any sort transaction
transactions disappeared don't worry
about them don't think about them
anymore and if you want the gory details
go to that one URL and you'll see a
whole transition guide to go from an old
version of your app if you want to
transition to a new version of ember
data ember data itself is not that big
it's about eleven thousand lines of code
that's about a quarter of the size of
ember itself it's very well documented
and I invite you to look through at some
point it could actually save you some
time if you're familiar with the actual
code the ideas a bullet from the github
repository don't look at the single file
version the github repository is broken
down to a you know nice modulus es6 and
all that easier to read if you choose
ember data this is what you get you for
your money you
the caching you get methods to find
objects in your store and you get a save
method to the post those changes back to
your REST API two roads diverged in a
yellow wood and sorry I could not travel
both and be one traveler you know story
so if you're working with ember data
you've gotten a lot of choices to make
you can choose camelcase snake case
plural name singular names you need to
model this and you wonder what to name
your controller you might think well
with all these choices why not take the
load the road less traveled by I'm sure
you had good intentions ember and ember
data is an opinionated framework so
convention over configuration follow the
convention soon UK because that'll make
life a lot easier for you what that
means is if you have a new REST API you
design your REST API according to the
active model serializer that rails uses
it's designed to work hand-in-hand with
that so you'll need to make almost no
changes if you use the modern default
rails if you want to see the details in
the rails side look at the first store
URL the Ember side there's details on
the second URL and one thing you want to
keep in mind is not to nest your
resources instance if you have say a
blog application you've got posts you've
got comments so you have posts posts I
do
don't put comments after posts and you
come inside you have to get put comments
as a separate route URL and if you do
that it'll make your life a lot easier
if you have an existing REST API there's
no need to commit suicide you just
override the default adapter override
the default sterilizer and let me show
you some code okay this is API
github.com it's the contributors for the
ember data project and I'm hitting here
with a browser a get request to this URL
and this is a pretty fight Jason
of you so we get an array of objects a
lot of objects a lot of contributors and
each object if we expand it out see a
whole bunch of attributes total rates
and we want to focus an author here
that's what we're interested in now
think of this from an ember data point
of view you're mister ember data or miss
ember data and you're looking at this
array of objects and you want to take
this Jason and turned it into JavaScript
objects try and figure out what class
should I make this I don't know what
class is this it's an array of objects
but I don't know what to make what type
is it so that's what we have to fix in
the Jason that's what we will do here
this is a one page at that I made it's
just a simple Q unit thing includes just
the basics jQuery ember data and Q unit
create ember app create arrest adapter
and this is me overriding the default
rest adapter say specifying the host
specifying the URL here's my very simple
model it's a contributor consisting of
an ID which is taken care of by ember
don't ever specify this ID yourself
ember takes care of it for you if you
specify it in your code ember will be
very bad at you and login which is a
string here's where the work is done
the serializer so the seer eliezer takes
the adjacent payload now you remember
there's a whole huge array there I want
to take the first five just simply
because it's easier to deal with for
demo and there's here I'm just picking
out the ID the login and the result is
going to have a root node of a
contributor this is this little line
here the contributor is what tells oh
sorry that's C
yes all right this code is going to be
online it's linked to it for my Twitter
account so you can oppose later if you
want like that all right so that line
there the contributor is what tells
ember data this is a contributor object
this is what class to make all right so
when you run this you get the array of
five objects and turns out the
contributors name is this guy if you're
interested in delving into the idea
behind all this there are two URLs here
um
Gason api org and also hate OS okay onto
tips if you have your ember application
hosted on one server and your api is
hosted on another server ordinarily you
have your browser security policies that
prevent you from going from one to the
other so one can't talk to the other you
can enable cores on the server side to
get around this problem problem is that
IE 9 does not actually work with course
so you have to have a workaround we
ended up using this person's solution
and one thing that you have to keep in
mind is that you have to load this
person's library before you load ember
data and other libraries what this
person does is that this library hooks
into the Ajax calls and redirects it
into its own implementations but ember
data actually saves a reference to those
Ajax calls if you load it in first so if
you load an ember data first you'll save
a reference and the stub library won't
be able to hook into that and it won't
work so you have to load that extra main
code first and then load your amber data
code right test-driven learning when I'm
first learning a new framework or a new
language is something I like to attest
my understanding ordinarily you don't
write
code for libraries or frameworks that's
the other person's job but what I'm
first learning a framework I find that I
have a lot of bugs in my understanding
and to fix those bugs and to find those
bugs like to write tests and I'll show
you a couple of those tests later on
I'll illustrate this one principle
member data is asynchronous and what
this means is that data doesn't
propagate through your application
instantaneously the order in which
events happen is not the order in which
your application sees those events
imagine you have six different queues in
a supermarket you get on one line first
but if you're on a slow line somebody
gets them through the express lane you
get in first
you get processed first same with Amber
and I'll show you an example of this in
just a bit but first movie quote I am
not formed by things that are of myself
alone anyone happens to know which movie
that's from right
it's from the movies stroker keep that
in mind when you're designing your
killer app okay query the data store and
what do you get you don't get your data
back you actually get a promise what's
that promise resolves do you have your
data not quite you actually have a proxy
for your data and that proxy provides
all the things like caching and the
ability to save your data back to the
API now let's go back to the code all
right here's the asynchronous test save
a reference to the store I create a
simple helper function here to test the
fixtures contents here's the first ember
run loop it
sets up a test user sets up my
controller sets up a view and here's the
kicker right over here
I set the test users login name to bar
and I tested immediately afterwards and
the model itself changes I test the view
immediately afterwards and the view is
actually still the old value it hasn't
updated it yet if he only gets updated
here in the next run loop so here's an
example two things that happen in one
order but your application sees them in
another order keep that in mind when
you're debugging if you don't realize
that can happen you can spend a lot of
time trying to figure out why things or
why race conditions are happening and
all that sort of stuff fixtures normally
you think fixtures load at the same time
the application loads right so when you
do a query for your data you expect that
the fixtures would give you your data
back immediately
that's actually not the case the makers
an ember figured out that well if you're
doing this in in real life in production
when you hit the API it's going to have
a little bit of a delay before it
returns you your data back so when you
do the fixtures the fixtures actually
try and mimic that behavior there's this
I think a 50 millisecond delay is that
right yeah and you can adjust this delay
to give you back your data at whatever
you know time you want and it's designed
so that you have your tests work
asynchronously the same ways it would in
production another thing that comes up
in front of time is you've got this cue
unit code and you can't access your
model or controller or whatever from the
cue unit code because it's defined
wherever you originally defined it in
Europe and it's accessible from grabber
maybe but not in the key unit test you
can access it from app underscore
component underscore underscore and
there's examples of that in the sample
code I provide this is a visual as
of the github commits for ember data it
is told in the lay of the Feyen that
Baron came stumbling into doriath gray
and bowed as with many years of woe so
great had been the torment of the road
but wandering in the summer in the woods
of Nelda wrath he came upon lúthien
daughter a thing all and melian at a
time of evening under moonrise as she
danced upon the unfailing grass in the
glades beside a scaled ruin an all
memory of his pain departed from him and
he fell into an enchantment for Lucian
was the most beautiful of all the
children of Aluva thar so let's go take
a look at some amber data source code
I'm going to focus on three classes the
active model adapter then active model
serializer and the inflictor these are
the classes which if you have a custom
API you'll be overriding and so I want
to focus on those and here's the amber
model adapter es6 modules amber data is
now I think all es6 amber itself is
transitioning to ESX something to keep
in mind as you're deciding which kind of
a module system to adopt in the future
okay this determines what path you're
going to get based on what type you get
passed in so you see it's has to do with
canalization underscoring pluralizing
all that some stuff about Ajax errors so
if you have questions about how the
active model adapter works and what
differences it has over the standard
rest adapter that it inherits from this
is what you look at it's for a short
active male serializer
this is where things like polymorphic
types and normalization is done and if
you have if you have a polarization that
you need to override the behavior of you
go to the inflictor you don't have to
actually extend this there's an API
where you can specify that certain
things have you know certain other
plurals and and so forth so those three
classes are what you want to focus on
where to get help so you're coding along
and somewhere down the road you get
stuck you pull out your JavaScript
console you pull out your Ember
inspector but you just can't fund the
problem it happens you're trying you try
and try and try and try and try and try
but nothing seems to work
right before that happens stop by and
ask for help and Burdett sorrowful a
bunch it helps everyone when you ask so
ask yeah I'd like to thank friends and
co-workers who helped with this
presentation together especially a
stolid madison who introduced me to the
Ember universe
thanks and I'll take questions I can't
promise I'll give back answers but
listen okay so the question was you have
a custom API and you already have
pre-existing JavaScript code that sort
of processes that and you want ember us
to somehow to talk to that yeah I guess
you could either morph amber data
adapters and sterilized into that but
that really is sort of like rolling your
own already it seems to have already
rolled your own basically so I think in
that case it's yeah it's done deal
anything else
right thanks again for your time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>