<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Using Node.js for Everything | Coder Coacher - Coaching Coders</title><meta content="Using Node.js for Everything - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/InfoQ/">InfoQ</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Using Node.js for Everything</b></h2><h5 class="post__date">2014-08-05</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/wsuygCu_oPY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hi I don't have a lot of times
it'll be quick and someone will be
useful and some of them probably won't
that's just how it is my name is Charlie
key I am one of the cofounders of
modulus at modulus we do no js' and
MongoDB hosting for and we make it as
easy as possible that's it I'm out okay
no anyway so this is a story about a
company and our love for JavaScript and
it started in around 2011 so in 2011
before modulus existed there were three
guys and we wanted to make a game so we
wanted to make a game and there three of
us I was the guy in the middle other two
co-founders not quite as good-looking I
mean it's it's all right and we wanted
to take JavaScript and put it everywhere
javascript was this thing at the time
that was enabling people to build really
interactive great products and we wanted
to start with a game and we wanted to
use it on the front end and on the back
end so how did we get there well we
looked at the front-end JavaScript
always been there and we we've been
using that for a long time so what do we
do on the backend well we looked at this
and we looked at the world and we said
okay we want to do a multiplayer game we
want to do real-time nodejs is the
answer so we started diving in and at
this point in time node was at zero six
eight
when we finally pushed an application in
to production and that what that
application actually looks like it still
is running today which is amazing in my
mind because we have done nothing with
it it is a multiplayer tic-tac-toe game
that you can still go play with your
Facebook and this is basically what it
looks like and it's all in real time it
gives you notifications when you when
you take a turn just we wanted to test
it out we wanted to play around and
build something this was built and still
has not been restarted on the production
server in over two years so node can run
in production
so we started we started building things
and this was again before we had really
dove into what it would look like to
build a platform around this and we
caught some very good lessons super
early on and that first one of these is
while no isn't particularly hard to get
up and running you know node file you're
running servers there you got everything
you need however every now and then
we're mostly perfect but every now and
then we write a bug and when we write a
bug it causes something to break and we
get an error and node the best answer is
not to just catch these errors and keep
going actually the best answer is if
you've got an uncaught exception let it
bubble up and actually let the
application close you can catch it you
can use process to catch the uncaught
exception go log it somewhere and then
let your process die gracefully and let
something like a tool bring it back in
this case maybe p.m. 2 p.m. - is a
little bit newer it's got some nice
tools it has a the ability to see how
many times you've restarted your uptime
all of these things are important
forever is a similar tool they're great
they're on NPM go take a look at them
I'll have all of this up later on
SlideShare so you can grab links to all
of this so great ok we can actually
crash something restart it and keep our
application running but what happens
when we actually want to figure out what
happened with the problem so how do we
debug and debugging a node is sometimes
a black box sometimes not but one of the
tools that we found very useful is
called node inspector and I'm going to
give a quick demo of it so first of all
here let me alright first of all if you
have not seen a node application this is
a very simple express node application
it has some static files and what's
important here is actually you see on
line 12 app get is just a request on fun
it's going to return 42
but we want to actually debug this a
little bit so all right there we go
so I'm in here I've got my application
I've got my app j/s we can actually
start an interactive debugger here by
installing node inspector first and then
now we're just going to run an
interactive debugger and if you're used
to JavaScript on the client side this is
going to look very familiar it's the
same inspector that you can use on the
client side but now we're actually
running a node.js application and
looking at it so I bring up my file
you'll see the same code if we look at
the base application it's just serving
up a little bit of fun but like what
like I said we have this slash fun so we
can actually put a breakpoint here and
we can actually hit server-side code so
now we've got server-side code and we
can actually look at the request the
incoming request we can start to dig in
and really actually use this to debug
your applications and find where we've
got problems going on this was another
first very big lesson that we learned
was how do you actually figure this
stuff out note inspector so now we've
built this proof of concept we figured
out that we love node we love JavaScript
so what do we do we decide we're going
to go build a company around this entire
process of taking application running it
building it putting it up and to a
server and running there collecting
analytics on it and that's where we came
and ended up with modulus so fast
forward about a year and we've got
modulus sitting here and it's doing a
lot of different things this is actually
a small bit of our architecture today up
on the top you'll see we call our
website the management part where you
actually go in and do things we call it
aperture and on you have a command line
tool which most developers are going to
use we call it fulcrum they're talking
to a
single API that handles all of the data
management and then things happen on the
servers in the backend when you go and
push an application so we actually take
that application we put it on multiple
servers and deploy it there and figure
out how to do that so that's their stuff
back there and then there's the actual
machine that's running an application
there's stuff there and then on the
other side you actually have a running
application so what happens when we get
a request where is it going to go how
does it get to your application all of
that all of it written a node there's 50
plus pieces of micro services that are
all very much small self-contained
purpose-driven written node they have
been working wonderfully we've taken the
node approach to a lot of what we do we
take modules very serious we try to
break our stuff into them and we use it
wherever we can and a lot of people say
there are use cases where you don't want
to use node and a lot of people say
there's very few use cases where you
shouldn't use node well we've taken a
different approach and we've said all
right when we come across something that
we shouldn't use node we won't gladly
we've really only come against one it's
SSL decrypting SSL is not great and node
it's a very CPU heavy intensive thing
and everything else we found that node
has been fantastic for so we we have our
website it's all written a node it got
backbone on the front end node on the
back end and we go and build this out we
learn a lot of more lessons along the
way one of the first for those using NPM
today please do not use asterisks don't
use them there they will kill you in the
future when trying to update your
applications when putting those on
different develop machines all of that
will be a big deal in your future we
actually recommend using a specific
version and then coming up with the
process on updating that version along
the way even while all NPM modules are
supposed to use Samantha
versioning and some urgent semantic
versioning supposed to make it so you
can upgrade to certain versions without
actually having a breaking change but
what that means is the developers of
those modules have to follow semantic
versioning they don't therefore we can't
trust right now that it's going to be
correct if we're update to a
non-breaking change version so we have
taken a very strict approach ourselves
and said we've got a specific version
that works and we'll weary evaluated
every basically every other release and
look at it and see if it needs to be
upgraded that way we're very specific on
what dependencies are in our
applications and if we go and try to run
it on a server how's it going to run in
what versions of the dependencies are
actually there the other big one is web
applications we use a lot of web
applications use session data on a
regular basis and if you if you can
figure out a way around that having a
stateless application is huge it's it
means that you can take that application
you can run it a number of times on a
number of different servers and easily
load balance across them
that means you've become an instantly
scalable production level application
now I know that's not always the way it
can be therefore if you do have to use
state and there's some great tools out
there Redis is one of those Redis is a
great end memory storage solution
that is backed by disk we don't worry
about the disk but Redis is a great tool
to get great performance out of carrying
state across your application and we
actually use it in a couple different
ways we actually use it to for our
sessions store and that means that we
can also have our other applications web
applications that aren't just our main
interface use that same session store
and carry session across multiple web
applications it makes it a nice quick
easy thing
all right so now we have our web
application and behind that sits this
big thing that we call Congress Congress
is important it it takes care of all of
the data and puts it into its data
stores and pulls it out and is our
single API that we use for managing that
layer so when you go to build an API and
it's one of the typical use cases in
nodejs we've used Express pretty much
since the beginning we've experimented
with several different things we've got
some stuff using happy but Express
Express is a great tool for building
api's it is fast it's easy as I showed
it before it's very simple to just build
an API build routes and return that data
happy is a newer version of an API
framework it's built by the people at
Walmart so you know that it's actual
production ready it's running humongous
amounts of traffic every single day
through the Walmart system and they've
built it from the ground up to handle
that amount of traffic and to have a
very easy to use straightforward
framework and they've got a lot of
pieces around it for logging and all of
the for logging validation it's got
everything you need kind of just sitting
there in different modules happy is the
main one rest if I rest if I I think as
a very straightforward quick easy get it
done have your API available type of
thing all three are great choices
there's a lot of other frameworks out
there today crack and Jas is is a great
larger framework and then again there's
many many many other ones so we go and
build this API again we're learning as
we go along and the biggest things that
we found are horizontal scalability is
is imperative to being able to build a
fully production ready will say
enterprise whatever you want to say
making that making sure you can scale
horizontally and what I mean scale
horizontally I mean actually run your
nodejs application multiple times and
then be able to balance load balanced
traffic across those multiple instances
of your applications this means that you
can basically put your application on
multiple servers and you're going to be
able to scale it that way without having
to buy a bigger and bigger machine and
eventually you run out the other big
thing we learned you don't need to
reinvent everything we're engineers we
love to build everything we love to
build everything from the ground up but
if you're out there to build a product
to build a solution don't start from
scratch
NPM zaire we've got over 70,000 modules
animam registry today it's growing
faster than anyone any other package
management system in the world it just
recently passed maven for the number of
packages there's probably a package for
what you're looking to do now take your
time research it make sure that it's
properly maintained and that people are
working on it but it's there's probably
something there to help you out it's a
great waste very great place to start
start testing from day one pick it I'm
not going to preach about which
packaging I mean testing system and
framework you should use pick one just
start testing write test it's a big deal
it'll save you time in the future it's a
little bit of a pain to get started with
but it makes it so much easier no js'
specific streams if you're not if you
have started playing around with no js'
and you haven't got to dig in the
streams yet take a little bit of time
they're important they're one of the
core pieces of what nodejs and how it
was built they make a lot of things
harder on some aspects but what they do
is they enable you to have anything that
would be memory intensive to run through
a stream and we can reduce the overall
memory footprint that we we've got on
our system at any one point in time it
it's it's a big thing there's a node
module called stream adventure which
will guide you through a
all tutorial on how to use stream
starting from the very beginning to
actually being able to catch and process
them along the way and lastly keep it
simple we again
engineers complex we like to make hard
systems to understand and it's just
ingrained in us we've we ran into this a
number of times
every time we overly complicated a
system we found that we had to go back
and reinvent something and change it out
and if there was a problem we didn't
know where it was queues all of these
different things we can keep it we can
keep it simple and it it's reliable then
we can go fix it as we need to slide on
many things this will be available on
SlideShare this has got the links for
most of the things I've talked about
including all of the different tools and
this will be available later today then
that leaves about four minutes for
questions that was fast
thanks guys
yeah
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>