<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>AnDevCon IV: Architecting Android Apps | Coder Coacher - Coaching Coders</title><meta content="AnDevCon IV: Architecting Android Apps - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/InfoQ/">InfoQ</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>AnDevCon IV: Architecting Android Apps</b></h2><h5 class="post__date">2012-12-07</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/x7gUSunWBSM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so before we get study they're just
gonna want to get an idea how many of
you are a Java developers familiar with
Java too much ever how many of you have
done some Android development ok Morton
kilo world I've got it cool ok so so
basically this talk is going to be about
targeting Android applications I'm gonna
tell you all about myself first my name
is Marco garganta I am an Android
developer before that I was a Java
developer i was in java before it was
officially Java back in the day and I
kind of got interesting ended early on
and studied Vincent development and then
started doing some training on Android
and since then i created a course for a
Maracana called Android boot camp it's
basically a five-day course that takes
you from knowing Java to about being
able to create just about any Android
application later on I bought that
course into a book called learning
android yeah and actually I have some
copies of the book here so i'll be doing
all book signing afterwards for the
first 20 people that show up so just so
you guys know so that's a little bit
about my background I frequently speak
at that and I've gone this is a I think
my third third year and then another
talk later on as well an mb k so we're
going to talk about what it takes to
build an Android application basically
lines and circles for more from the
architectural standpoint I'm going to
try to point out things that are sort of
unique to Android wear Android departs
from other languages like Java or other
programming experience that you may have
so with that what we're going to do is
we're going to basically talk about the
part one is going to be about activities
in the UI how to use activities properly
then we're going to talk about intense
action bar and how to basically connect
things together then we're going to talk
about services in types of services
content providers what they are and how
to use them lists and adapters
broadcast receivers and find a little
bit about what app widgets so into to
kind of frame the talk i have an
application that they use as an example
application so that you can kind of
relate to different things we're talking
about so it's not as esoteric as it
could have been so the application that
we use is called the yamba Yampa stands
for yet another microblogging
application it's basically a twitter i'm
just going to use the word put it
because its trademark so what what i
like about this application is that it
basically in a very natural way
showcases all the different parts of
android app development that are
interesting such as how do you build you
I how do you do background services how
do you deal with the data how do you
make the web service calls etc etc so
we're going to use this application is a
context for further development for this
talk and we're going to basically build
this application at placed in lines and
circles through seven different
iterations and I'm going to explain
those iterations soon but first let me
just kind of put your show you what that
looks like this this app is available on
github and i'll give you a URL to that
later on but essentially this is that
many applications so basically you have
a list of tweets just like you would
expect it to do so there are lots of a
motive you know tweets from from people
all over the world that are using a
reading learning android book and
following the book alarm so there are
lots of students using this application
we are we basically have our own service
so we're not using twitter because
twitter really quickly shuts is down due
to the rate limit when we have a lot of
people using it with the same username a
password for instance so we have our own
service that we run into em but moroccan
calm but basically adheres to the same
twitter api right so the idea is this is
designed for learning so we wanted to
get the friction out of the way and
that's why we're only separate service
so basically what i can do is this
application is i can see what my friends
are doing i can click on an update i can
basically say hello from and the account
for example click on the little update
button this is not actually posting to
the cloud so it's making the website
so it may fail because we have a spotty
connection but it says it succeeded
right here so if i go here and refresh
this page there's the post that we just
got combat from from death application
so the application actually posted to
the cloud and we're able to verify that
by pulling from the bot so i'm going to
go back to my screen here I'm gonna pull
from the blog and see what we got so
basically there's a post if we just
posted yellow commander Pott right so
that's a simple application that we're
going to basically talk about our talk
about the music as a context so the
first part the first decoration is
building UI and working with activities
so basically in Android development you
hear these four main building blocks
that you use to build just about any
application so these are activities
services providers and receivers so it's
the combination of these four things
that makes up any application so the
first one the one that's the most
obvious is an activity i'm using this
graphical language here but basically i
just quickly explain what you will audit
is the dotted line you're kind of seeing
here that represents our application in
in android an application is really just
a loose collection of these building
blocks activity services providers and
receivers so basically we're going to be
drawing a bunch of these components into
this box in making and that's going to
make up our application so that's what
the dotted line is it's basically the
app context the gray box here represent
our and that's going to be where we
basically type in the status update
yellow from an def con press the Update
button and that actually makes the web
service fall to the cloud and close the
message right so like I said a very
first thing that we're talking about our
activities and I mentioned that
activities are roughly screens right so
they basically represent a single screen
that you have in your application are
now your application can have multiple
screens at the same time and you can
have usually one screen that's the main
screen the entry point into application
it's sort of analogous to a website
getting multiple web pages and having
home page so you saw a couple of screens
in this application you saw one screen
here where we can basically see the list
of our you know the tweets from our
friends we can basically click on the
Update button and we can which is
another screen and you can follow
something we can go back go to for
example preferences screen update
preferences and so on so it's basically
like a mini website with multiple pages
now what's interesting about activities
is that they are the most the most
managed by the system's system considers
them fairly expensive and as such it
basically manages the life cycle of the
objectives what that basically means is
that you as a programmer you don't
control the states that your activity is
in right which to some of us is sort of
a new way of thinking because most of us
sort of are used to having a main method
and our main function right and kind of
kicking everything off from there in
other it doesn't work that way so it's
all sort of event driven so something
else is basically poking our application
and calling the methods on our
application so initially what happens is
your activity is not running right so
basically you click on a button you
start the application for the first time
that consequently starts your main
activity the entry point into your
application and your application then
goes to what we call a running or
visible state that means that it's on
the screen interacting with the user you
can only have one activity in this state
ever all right so there's only one
that's actually interacting with the
user at one point in time in terms of
memory management and priorities and
such discipline if it gets all the power
right because we want as if the
experience for the user so at some point
the user is going to go from that screen
to another screen it's going to briefly
go to a ball state and that activity is
going to end up in the stopped state so
basically we can have many activities in
this state at any point in time right
they are basically sitting there waiting
to either get resumed and brought back
into running or killed at any point in
time it's basically up to the system to
decide when to get rid of
a certain component this is also sort of
interesting because most of us are not
used to having the system just randomly
kill processes and get rid of them were
sort of used to memory garbage collector
killing killing memory or freeing memory
but not destroying processes and this is
exactly what happens in Ender's it so
it's a fully automatic mechanism for
getting rid of your European code from
from the process space the reason why
it's done this way is that these steps
here the path from hold starting an
activity to going to actually making it
visible on screen tend to be very
expensive there's a lot of stuff needs
to happen here we need to start a new
application usually move dalvik instance
we need to load whole bunch of classes
we need to basically pop you inflate the
XML for the UI we need to display all
that on the screens it's a very
expensive so process these steps here
tend to be much cheaper so that's
basically why the the operating system
keeps all the activities all screens in
the stopped state so you can bring them
up back whenever it feels like or it can
destroy them if it feels that no one can
use one thing that I want to point out
about this is that the names are sort of
misleading the fact that this is called
the running state it doesn't really mean
that your code is necessarily using a
lot of CPU so you could be just sitting
there waiting for user to input
something on consequently the fact that
something is called stopped it doesn't
mean that it's not doing anything it's a
for example if you came a game that's
still you know listening to sensor data
and processing them then that activity
is actually quite CPU intensive and it's
using a lot of battery right so those
are things to kind of watch out for so
you as a developer basically have
control over these callbacks on create
start/stop resume destroy and so on and
that's why you can basically intelligent
to turn things on or off in control
within which state something is though
so for example if I wanted to use GPS
and I know it's expensive and I want to
limit to just this state I will
basically turn it on in on resume
because all the paths into running later
on resume and I
turn it off in on pause because all the
roads out of that state leave for our
cause so you kind of have this control
to control the transitions but not the
state's themselves now activities of the
most carefully managed start of all the
components so I kind of started with the
hardest but the reason why i did so is
because they're the easiest to grasp
because their visual everything else is
not visuals it's all harder to kind of
wrap your mind around these are the call
bags that we talked about so create a
resume pause start stop restart destroy
and so on so those are your life cycle
methods now whenever you create one of
these main building blocks you have to
register it you do this in the manifest
file it could be as complex as this so
it could be as simple as that it
basically some online xml that basically
says ki have this new component the
point is all the main building blocks
activities services providers and
receivers must be accounted for in the
manifest file so that the system knows
you have it now when it since we're
talking about activities and they
represent you I I just wanted to mention
that when it comes to you I they're
basically multiple ways to build you I
in Android this is also sort of
something that's unique about Android so
you have two ways you can approach your
development one is decorative and by
that we mean you build UI using XML it's
actually just drag-and-drop tools it
looks very similar to you know to using
something like using something like
Dreamweaver for example so for example
if I open up one of my layouts here
maybe a my status activity you kind of
get this really friendly drag-and-drop
tools where you can just pick the button
whilst floats up from the from the set
of tools and you can just for example
take something drag it and drop it and
make the use of it for example so that's
the decorative approach the end the
result of that is basically a bunch of
XML sort of similar to HTML now the
other approach is programmatic so
basically you program your elements in
Java just like for those of you who use
a WP or swing the concepts are very very
similar so basically and Rodolfo
two approaches the best way is to
basically use them both so let's take a
button for example the fact that the
button is blue and big and has rounded
corners and font of size 25 for example
well that's very easily described using
XML so the Dreamweaver like tools in
Eclipse are actually very useful to get
you going with that you I really quickly
right on the other hand what happens
when you click on about me you can't
really describe that an XML XML is not
that I to open it so that's where Java
kicks in it becomes a very good tool for
doing so so basically this dual approach
makes UI development rather be quicker
much quicker than it was in plain old
java for example just like in java your
UI is based on a composite pattern so
basically you have layouts in java we
call them containers and you have use
java use them call them components right
but basically by assembling these
components you build a UI for those of
you know with the web it's kind of like
a dom tree in your HTML the next part we
have in building this this application
in this architect in this application
would be to basically introduced a main
activity so the main activity is
actually going to be the entry point
this is going to be our new home page
before the entry point was here but you
can't really easily go anywhere from
that screen where you can just post your
status right so the application before
in part 1 was basically just a single
page and there was no place to go from
there so what we're introducing now is
we're introducing this main activity
with so called action bar which is
basically this part of your application
up here when you can basically add but
buttons and things of that nature to
help users navigate through
communication you can think of it as a
navigation in a website now what's
interesting about the navigation is the
use of intense so in android we have a
concept called intense which are
basically lightweight messages or events
and that's that's how we communicate
between this loosely coupled components
so this is true for activity services
providers and receivers the basic
connect using intense so that enables
that lewis architecture to begin with so
for example an intent could be to jump
for if I mean in one application so i
draw applications is this vertical
stacks right so if i mean an application
called gmail and i'm inside the one
activity where i can see the list of my
messages then clicking on a message may
take me to another screen where i can
see the actual message in gmail right so
I'm reading this message and I see
there's a link to a web story web
article so click on that that now jumps
to a whole new application a web browser
and opens up an activity in which we
render the HTML page any there I may see
a video and I click on that and that may
take me to a YouTube for example where I
can actually see that that with you so
essentially i see user just completed a
task but i ended up going through
multiple applications and even more so
activities along the way so it's very
similar to surfing the web yes run can
you go from a web browser to a native
app and so so basically in android you
never you go to another activity right
so even if you went to a web browser you
went to an activity inside of a web
browser so it's just like like I use a
website as an analogy right so if you
guys like for example if you go to
cnn.com can you actually go to cnn.com
website well you can't you can go to a
page within cnn.com website the website
itself is just a container for a whole
bunch of pages it doesn't make sense to
see a site you see a page within a site
it may be the homepage right so
similarly if it's a web app or a web
browser or anything like that if I'm
jumping from one screen to our next I'm
simply opening up another application
that and inside of that I'm seeing
another activity does that kind of make
sense link in a browser can refer a link
in a browser can be an intent yes yes
yeah there is a way to do that so
basically links in a browser can only
cause opening Cosby and
basically cause opening an activity for
example any any of you dealing with a
lot altercation you kind of have to deal
with that so you kind of jumped to OAuth
to add egg to get your application then
you got to get back to your application
it's tricky but its global so that can
be done yes and one point I wanted to
make about the intent is that they can
be they can be explicit or implicit
which is kind of interesting so in this
case I'm spelling out that opening up a
message in gmail is going to cause
Gmail's internal activity to render
right so I'm being explicit but in this
case here I don't care which browser
handles the web the opening up their URL
right it's its users preferred browser
so if the user has Firefox or Chrome
well that browser is going to open up so
we're being in political just we just
want a page opened up alright so that's
anything about Android because you can
basically using that approach you can
replace applications so you can have
multiple SMS clients or most multiple
calendars etc which is unique to it as
an operating system um you can use
intends to do just again full of things
start activities start stop buying
services or send a broadcast so it's not
like the whole bunch of other things
that you can do with events and intent
just kind of like briefly on the code
and it then simply may look like this
where you spell out that you're going
from this context to this activity so
it's kind of like a HTTP link right it's
not really a prominent to but you can
kind of think of it like that or another
way to specify an intent is to basically
specifies so called action now action is
nothing nothing more there are piece of
text right so basically it's a piece of
text if you're saying I want to call I
want some action handled well if you
have some action that you want handled
hopefully somebody is handling the Dutch
right so there are a whole bunch of
system actions such as you know open up
a dialer make a phone call take a
picture etc but you can also create your
own actions or action handlers or
so-called intent filters so intent
filter is basically where you say
alright I'm going to be the guy who
candles that action so basically
somebody is dialing a number somebody is
answering that phone call right yin and
yang so otherwise it's not gonna it's
going to knock your match so intent
filters are the opposite of intense so
now that we know intense and all that we
can introduce the action bar which is
basically the navigation so action bar
is your glorified the menu system in the
old phone still scheming behind the
physical menu button if you remember in
the newer devices that don't hear
buttons it's the action bar at the top
but our from coding point of view it's
basically the same thing so action bar
was basically over fold in API 11 I
honeycomb and and that's when they
introduce no physical buttons and the
new navigation at the top but that's
basically just kind of a big change from
user standpoint the code is the same so
if you ever worked with menus it's not
not nothin nothin lowly changed other
than there's a new parameter that says
do you want to show it is in action and
you can control which button is actually
show up which don't since presumably you
can have space for just about everything
that allsafe is limited so now we have
the third part of this is basically to
create a service so so far we talked
about activities is the main building
blocks and I'm actually there are four
of them right so service is the next one
gotta talk about so in our context of
Yamba application or Twitter application
so so far we have a way to post to
Twitter right no big deal now we may
want to occasionally pull from Twitter
so basically we may want to have
something that is cranking in the
background always on always running and
periodically going in tracking hey are
there new tweets right or what's my
friend status well whatever that
something is that you kind of need done
in a background so in our case in this
example that's the motivation for for
introducing a service so we have a
service as such component that's what
it's designed for so basically
periodically goes and pulls the data
from Twitter and figures out what
on now services like I said our
processes things that run in a
background I'm putting background on the
quotes because it's it's a it's a it's a
trap the word background means different
things to different people what I mean
by a background is I mean you can see if
there's no UI to it what I don't mean by
a background is that it turns on a
separate thread yeah so it's not like in
the UNIX terms background process none
of that as a matter of fact your
services by default grand on the same
thread as your UI so for example if my
twitter app was actually pulling the
data and while I was pulling the I
happened to get a slow connection I
would notice that in my UI but it could
be really hard to figure out why the UI
is sluggish and it will be sluggish
because of something that's happening
every once in a while and you can say so
n it depends on the network so it's a
really hard luck to find really hard
thing to profile so be kind of mindful
of those things that your services run
on the same thread as your UI by default
so an example of a service would be a
music player right so say we want to
build a Pandora or you know Google of
music whatever it's called and obviously
we need the UI we need somewhere to pick
the station give a thumbs up thumbs down
and and so on but at the same time we
don't want to own the playing of the
music here because this could go away at
any point of time remember activities
just get this post by the system as it
feels like right we want the music to
keep on playing so what we can do is we
can actually own the plane of the music
in service right so this guy comes start
the service goes away later on this guy
reappears stops the service and goes
away right so that's basically the ideas
the services are way less managed than
activities so the life cycle of a
service tends to be much simpler right
you for the most part started you for
the most part stop it right so that's
basically a simple service that's how it
works now service gas services can be
bound and can be unbound bound service
deserves much more complex there
are using something called binder and
aidl there's going to be a talk later on
today of about how how to do that I'm
talking about unbound services which are
much simpler so they what that means is
that the life cycle of a service is not
dependent on the life cycle of a client
so the client can go away come back the
service people to keep some cranking
right so that's basically a service
lifecycle callbacks for a service are
pretty simple much shorter less than
activities you create creating destroy
is basically Universal pretty much right
so that's what you do something
initially that's very clean it up and
then the main method in this case would
be on start command that's we do your
actual service for now this is a service
I want to introduce the intent service
as a cousin of a service which is
basically a type of a service that
happens on a separate thread as a matter
of fact so as such I really like it
because it it's designed so I don't need
to worry about dealing with putting
stuff on a separate thread and dealing
with a non walking UI and getting rid of
application on responding airs and so on
and so on so it's very useful a type of
a service it's very similar it just has
a different method on handling pen
that's where you do your work the
background work and it's truly in a
background it actually happens on a
worker thread but for the most part it's
a similar use just like activities once
you create it you have to register it
sorry int answer is yes sir yeah
what I'm saying with here is that for
example if I'm refreshing my tweets and
in this very example so when when i
click on when i click on this refresh
button what that does it actually causes
this to run and this in my refresh
service and that's where i actually do
the pulling from twitter now I we are
subject to a very slow network right and
we can't control those external
parameters so but as you notice my UI is
responsive like I can keep on doing
stuff in the UI and it still doesn't
possibly refresh the tweets right you
know so but the UI is not being blocked
the UI thread is not being bought by the
fact that the network is running slow
camula they're slow that's another point
altogether but yeah you can kind of see
that there's when the activity goes that
intense service is not going to go it's
unbound so the service is going to
survive activities yeah in 10 service
closing yes that's true as well so
intense service once it's done it with
this job it actually did die soft but
that's independent of the life cycle
exactly as long as this job is not done
it's going to exist when this job is
done this gets called out magically and
the service goes away but again it's the
independent of whoever called it yeah
can if then service be used for playing
music as well not necessarily so
basically the way I see this if this
service is good is useful for doing one
large job in a background right
refreshing a tweet every once in a while
this service is good for an ongoing job
that you did you want you know people
going like you know like periodically
sending a card beat to the mothership or
painting something or owning the playing
of the music which is not heavy weights
task it doesn't doesn't take a lot of
resources from service for example
itself so there they use for different
purposes so the question is is the one
big job or a smaller
ongoing work technically nothing
prevents us from playing music here well
it doesn't but when you when when you
are done starting the music player this
is going to go to a destroy so then the
question is who's got a candle to to
that actual music player who can shut it
down you could end up with a lot of an
object that doesn't have a reference
type so that's something to watch to to
watch out for a good way to for example
use intense services that need to do
something periodically like refresh
tweets but that that is a big
heavyweight job is to use alarm so long
with that so basically you schedule an
alarm that is going to hit a pink
disservice every you know once an hour
or so and that's why you can also align
the death alarm with all the other
things that are doing networking if
that's actually a very good way to
handle optimization for battle yes you
have a question is it better to use
intent service or an async task that's a
great question because both are designed
to help you was handling non blocking
the UI thread async task is something
you launch typically from an activity
and the nice thing about async task is
that allows you to basically update the
UI once the task is done so it's all
about synchronizing the work that needs
to happen or a separate thread and then
updating the UI back once it's done
because that that synchronization is the
hard job and that's what async task of
solving so it's mostly about the UI like
I'm downloading a whole bunch of files
and then I want to tell the user when
it's download right that would be a case
for a async task intent service is I
don't care about updating the UI I just
want something done in a background
there's no need for me to ping the user
and it's a service so it doesn't even
have access to the UI yes there's going
to be a talk on concurrency tomorrow by
blame my Blake Mikey the discuss is
exactly this type of types of difference
it's going to be a good talk so can in
10 service live on a subjective degraded
yes they're unbound so the life cycle of
the service and the activity is
disconnected
oh no not if it's not going to live
through the power down but it's going to
survive the light the life of the
activity that's starting it or whatever
sorry yeah if you're tracking GPS
coordinates depends on what you're doing
again so if it's if it's something
that's a heavyweight work and you want
to do it like let's say once an hour you
just want to figure out the location log
it somewhere go away there's no UI
associated with it you could use an
intent service along with an alarm
manager so you set up alarms to ping it
to basically a pending intent to kick
started every hour so right and that's
what I use in this example in the other
case you could also use a service and
basically get it so as opposed to
getting many instances of intense
service you can have just one instance
of a simple single service but inside of
it you're manic managing the trailing
yourself so you can do it both ways it
just depends on the type of a job you
right the service is the main thread but
you would have to manage the threading
yourself so like I said you still we
still need to worry about not walking a
new item it's just that this was
designed in such a way that they already
did it for us you'd stick stuff in here
and it is on a separate thread so so
that's that it's kind of like
pre-packaging all that hard work for you
yeah so the question is called the cut
is your alarm service work if you have
pending alarms and the activity that
that's or whoever set up the spending
alliance disappears it really depends on
how yourself your pending alarms right
so typically you know it depends you
make one dat alarm to go off even though
the ever set it up is it is gone that's
that's a legit request yeah so it don't
mix you guys don't mix activities in
applications you have if you have a
service your application is not close
the application exists it's a container
for your service it must exist right so
your activity can go away and if we have
an unbound service that unball sorry
survives because it got its got a
separate life cycle cancer came in 10
service can local service start
intensive
anyone can start anything right anyone
can basically a service can start
activity activity can start to send a
broadcast the broadcast receiver can
kick off a series it's just intense so
anyone any of those four components they
can launch intense and fire up other
other things yes so it does it to two
separate questions when you click on a
back button what happens is your
activity is just merely going to just
state so it's not closed it's stopped
it's alive it's cranking whatever it's
doing it's just in the state all stop
it's a quasi-state but it's in memory
it's in process it's actually doing
stuff at some point it's going to get
disposed off but we don't know exactly
when the service is going to be
independent of that so it's going to
keep on running if it's a nun bouncer it
says if the activity is destroyed like I
said the life cycle of activity has
nothing to do with the life cycle of
service if it's a non bouncers so this
whole thing would never ever even exist
gone you can delete it from the phone as
all I method it's the service is going
to keep on cranking because it's got a
separate life cycle in case of a nun
bouncers bond services are different
yeah you can we can talk about it after
it first so so moving on to to content
providers so basically this is what is
this is where we are in terms of the
architecture it so right now we have
that main activity it's got a way to
jump to to a status activity we can post
to twitter we also have a service that's
periodically pulling stuff from further
but we now need to do a store the data
somewhere now you could store it
directly to a database but the better
approach is to actually store it in
nicole's content provider so a content
provider is yet another main building
blocks so activity services content
providers and a content provider
basically is your interface to data it
hides the fact that it as a matter of
fact uses data we service is going to be
dumping data into the content provider
the fact that it's using a database or
possibly even going to another cloud
that's not relevant right so it's
basically becomes an abstractions to
your data so content provider is
basically a universal
right it's provides your standard insert
update delete and query method it
normally uses a database but that's by
no means at all right so if you can use
any any type of persistence in to get
one or or none for that man so basically
the problem we're trying to solve with
content providers is that active
applications are sandboxed right so each
application is a island on its own one
application cannot see anything about
the other application that's the basis
of the security model and engine so
basically let's take an address book for
example so you don't have one at this
book application actually have to write
so basically you have one that has the
UI there's an application called condo
enjoy good contacts that has your user
interface it's got no data that's not
where you people are there's a separate
application that you can't even see
because it doesn't have any you are all
it has is a content provider with its
internal database storage and basically
this UI application it does insert
update delete and query into that
application right so basically when it
comes to data those are the only four
things you can do to data right instead
of deleting query and content provider
provides for that connectivity for that
decoupling of the data in the UI so for
example if they you know somebody else
comes along and writes a sexier version
of of an address book with another you I
what that application can also tap into
the same data source right or say for
example you want an address book that
actually figures out Bob's you know
facebook status and Twitter posts and
latest G+ update as well as the phone
number and the email and all that stuff
it gets a more holistic view of ball
frega right so you can do it using this
architecture it's pretty couple them now
Quantic providers gave a very simple
life cycle you basically just call
insert update delete inquiry against so
the question is about is it all as
database inside yeah
does content provider have a database
content provider is an interface with
data to a data source and it's up to you
how you're going to handle that
typically people use database but it's
so typically you would use a database
and Android has a built-in sequel I'd
database and they happen to make the API
to a database very very similar to API
to content provider so it becomes a very
simple elegant proxy or depends on
firing point but it could be an elegant
proxy to just to the database exactly it
could be easily integrated with Davis
but by no means content provider has to
use a database and certainly not the
built-in one it could use a flat file
could use a cloud the web service or
anything you can come up with yes but
it's basically an interface store data
yeah the content provider tends to be
somewhat harder to implement especially
if you want to implement it properly to
handle all the you are eyes and things
like that so it's got only basically
it's got us for format formatted
sensitive delete and query there's also
nicole gets type and so on but
implementation of fun provided ends up
being usually a lot of code for that
reason for speakers of handling all the
various you mimetypes and enjoy come on
you still need to register it one thing
that's slightly different about on the
providers is that you get to provide the
authority this is how it's going to
actually be known so this is how you're
going to be able to find it so so that's
a little bit about the content writers
now well in the in the next sort of
iteration where interracial five of
seven so we're getting there right so
basically now we got a service that's
periodically pulling the data from
Twitter it's stuffing the data and
accounting provided only provider
happens to use a database for its back
of main mechanism but nobody else in the
system knows about the tract right what
you want to do next is we won't actually
display the tweets you know what the
status with our friends are doing right
so what we're going to do is we're going
to use
less to basically display all the data
so Android provides something called the
list 0 list view or last activity or
list fried but the problem that we are
trying to solve is the fact that let's
take gmail for example if you're like me
you may have maybe 10 10,000 messages
right if you take all the archive
messages pretty reasonable you have a
lot of data that's my data source right
now what I'm trying to do is I'm trying
to display that on a screen that can
display maybe 10 items so there's
certain logic that you need to do to
intelligently provide all the data to
the user but not by sucking it down or
doing some agitation or something like
that and that's where adapters kick in
so that's basically an Android solution
to this problem it was a question right
so the question is when would you use
content providers first has just go
directly to a database it's a good
question I used to just go directly
toward a this is like why many but why
even bother about importantly it's going
to provide especially like animation to
do them right it's a little bit of a
work and I also told you to the Contras
provide only makes sense if you actually
want to expose the data out right so if
I'm not exposing the data out why would
they care about content providers and
that's a legit question and sometimes
you know this could be easier to just go
there and just kind of do that and not
even worried about this guy especially
if you don't need to Kevin need to share
the data I actually came up with the
legit reason to have it in iteration
number seven in part 7 when we talk
about averages because we actually need
to not expose the data outside of your
own conflicts so that's a legitimate
sort of motivation for it and but also
lately the tooling the the framework has
got much better about supporting content
problems what we're going to talk about
loaders a little bit later and loaders
work very elegantly with common approach
so they make goo loading the data very
inefficient on a separate thread
asynchronously yeah the other so those
are those of the reasons why you would
want to do it that way it also helps
keeping everything loosely coupled
because your application hopefully it's
going to become some
significant and bigger and you may want
to actually start ripping it apart into
separate apps maybe you have the data
app and the service app and the UI app
right so I'm seeing that happening out
there so those are the motivations for
actually using it even in smaller
projects now so the question is about
observing content providers content
providers and going to talk about Wulder
so all of it they make life simpler much
simpler but if you want to know what
changed an American I mentioned there's
a way to the proper way to implement the
content provider is to actually when
something changes you send the URI
exactly to the item that changed the
problem is that it's painful to
implement properly and often people just
cut corners and just return the default
URI and then you have no idea what
changed so the problem is really the you
know developers implementation of the
content providers but but if it's in the
same process you can use alone either
you can basically use the observers and
that simplifies things alone so so
another thing that I wanted to mention
are fragments because now we're
basically want to build is so that it
actually looks good not just on a small
screen but on a big screen as well just
to give me an exit an idea for the
fragment is basically fragments are one
introduced in API 11 and they correspond
to a simple to a reusable pieces of you
i right so basically what we have here
is in one case i have a small screen and
what i would do is i would put my entire
status activity well my entire list of
what my friends are doing on one screen
and then you would click on it and you
would go to another screen all together
in case of a tablet and they actually
came more realistic but i may want to
put the same components next to each
other so fragments are these reusable UI
components right so basically you can we
use the same component just packaged it
different so that's one way to kind of
think about it and so that way your
application can look great on both a
small phone a tablet and a big screen TV
right and i don't mean look great by you
know just on a big screen TV just
blowing it up or putting it on top left
owner I mean actually
using it really responsive UI to build
it in this example for example you know
let's let's think of the portrait mode
as not having carrying a small screen so
I can only see the list of what my
friends are doing and I would have to
click on update button to actually send
an update but let's say I had now a
bigger screen I'm going to cause by
simply rotating the screen and in this
case I have more real estate it's the
same screen but I let's imagine it have
more real estate so basically I would
put one fragment here and the other one
here and as a matter of fact the Update
button is no longer necessary all right
so that's an example of reusing this UI
I'll just repackage two differently in a
case of a bigger screen right that's a
fragment fragments were that's what we
talked about on the fragments along with
loaders came basically an API 11 APR 11
honeycomb and loaders are basically a
way to load the data so the problem that
the loggers are solving is that you make
it a ton of data so loading the data
becomes a job that could block your UI
your UI thread right so what you want to
do is you want to do it asynchronous
right so this is the notice of sale
solving the same problem as async task
as is intense services there doing a
heavy lifting on a separate thread in
notifying you asynchronously of work out
right so they work in conjunction with
the content providers to use them this
is sort of crowd using an application
and now if loaders in fragments and all
these cool new things were relatively
new API level of 11 API 11 and as you
guys know about fifty percent of the
market out there is still using 311 so
if you want to support all their apps
older devices what you can do is you can
use the support library you can
basically package these things inside of
your app so that they were so your new
code works on devices as old is 1.6 so
that's pretty cool thing where the
support library compatibility
packaged if you can do that the final
second last thing that we have are
basically broadcast receivers broadcast
receivers are simple that's a
publish-subscribe mechanism to say for
example this very first service I want
it always on always running right when
you turn on your phone a whole bunch of
things start you don't see that but
Facebook started the gmail story the
Google+ started whole bunch of services
started when it turned on the pond and
so one way to do that is using broadcast
receiver so basically you you subscribe
to a intent broadcast in this case boot
completed and you listen to that then
you know you do something for example
start a service when you get notified so
it's basically publish-subscribe
mechanism in ankle it just yeah this is
an illustration or starting our service
which is pretty typical for example find
out when an SMS arrived or when your
phone is running low on battery or
anything of that nature so a life cycle
is fairly simple you writes a piece of
code used register it for some kind of
intent and then when that intent happens
you get a notification right so it's a
publish-subscribe well observer
observable pattern right so so that's
basically what it is the implementation
is super simple as well there's only one
matter on receive what you want happened
when you actually get woken up right you
need to register it just like services
activities and everything else you need
to register it's the medical stuff on so
one thing that the one convention gets
sometimes computer people get confused
is that unlike services that are running
they're actually cranking in a
background right work is to receivers
are dormant they're not doing anything
they're just sitting there until they
get trick right so that's a key
differentiation between them they're
both things you can't see but one is
running a service the other one is
sitting there waiting for a notification
I am broadcasting that all right the
final part of this is basically the app
widget so i need to you know i need i
wanted to showcase your showcase a
reason why we need a contact
so I figured I'd introduce the widget so
you guys know there's a lot of things
that you put on your home screen right
what they actually don't live there your
code you write them but they'll run
inside of your process they actually run
as guest in your home Home screen right
so basically one way to expose the data
or the only way to expose later would be
to actually peers the hole in your
security of your app and provide insert
update delete and query to the outside
world right and so for that reason we
use a widget as an example of how you
use a comment outside dotted lines you
can see this is sort of how you
implement it they're very similar to
receiver system just watching to
implementation but it sounded different
than the nurse evil and basically you
would get a widget like that that you
can put on a phone screen that's now
listening to the data from your own
content over and that would be the
reason why we need a content provider
going OTC Cola directly so I'm going to
skip to this so basically in the summary
I wanted to come introduce the activity
services providers receivers as new
constructs that are new and different
and unique to enter it and basically how
you would apply them to a to building an
application and I use the Umbar as an
example application which i think is a
really good sort of illustration it's
very comprehensive in terms of how these
different bits and pieces can play
together but architecture is you guys
know it's more than you know it's part
part science right so there's always
going to be there always going to be
different ways to implement something
and it's only in the longer and it's
going to you know you can see which one
was a was actually a better choice but
as long as you know what these
components are and how they interact
with one another you know you should be
you should be able to make good at good
choices in in your design and again keep
in mind you know just going to pin stuck
in lines these circles as opposed to
just worrying about the code once you
get designed down using lines circles
the code it just basically comes out by
itself so that's that's the easy part
this is a again my name is marco
garganta this is a result going to be
available
on mark an adult film as well as all
provided to end up from guys as a some
kind of PDF but just so you know it's
kyle posted within a day or so yes well
thank you guys i have some books care
for signing so please feel free to come
by and hopefully you learned something</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>