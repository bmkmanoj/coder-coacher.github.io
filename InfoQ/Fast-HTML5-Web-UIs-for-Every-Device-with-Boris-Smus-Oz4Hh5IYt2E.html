<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Fast HTML5 Web UIs for Every Device with Boris Smus | Coder Coacher - Coaching Coders</title><meta content="Fast HTML5 Web UIs for Every Device with Boris Smus - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/InfoQ/">InfoQ</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Fast HTML5 Web UIs for Every Device with Boris Smus</b></h2><h5 class="post__date">2012-04-11</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Oz4Hh5IYt2E" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">everyone can hear me everyone can see me
hello Internet hello people the talk
today is about fast you eyes for many
devices cross-device fast you ice so
first I guess I should introduce myself
my name is Boris I work for chrome
developer relations I'm an engineer
they're mostly I focus on Chrome for
Android these days so my interest is in
mobile broadly not just Chrome for
Android so we'll be talking about that
and I'll be demoing some things in
Chrome for Android I'm gonna try to make
this as interactive as possible so if
you guys have questions interrupt me if
there's too many questions I will
interrupt you so how's that cool alright
so there's two parts to this talk the
first part will be about cross-device
bit so we'll talk about what that means
how to do that well how to do that not
well and then we'll talk about fast you
eyes for a lot of touch devices and
other types of devices so firstly why do
we even care about mobile I'd like to
motivate this a little bit and also
questioned some of these terms but
anyway you've probably seen this graph
already pretty much every mobile web
speakers like hey look we're gonna all
be using mobile web devices very soon
and actually interestingly enough
there's a trend pretty much consistently
across the board where people use mobile
devices a lot more than desktops during
weekends and during holidays so actually
the first time there was a crossover
according to some Google stats was in
December of 2011 so combined with
holidays and weekends we actually saw
more mobile usage than desktop usage in
a lot of properties
but well sorry yeah yeah whoa okay cool
sorry I'll try to do that and still look
at my slides from time to time so the
thing is mobile is really a weird term
it doesn't really mean that much as far
as I can tell like does it include
phones probably does it include tablets
maybe does it include TVs the probably
not cars anyway and what's the opposite
of mobile also completely unclear like
is there a term someone knows I've been
searching for one opposite of mobile
yeah so desktop like deciding through
laptops alright anyway I rest my case
but I think we can define it as an as
what it is not i think is clearly not
this thing so a lot of web developers
are still thinking about that as the
platform that they're targeting and this
has got to change that's that's that's
definitely clear because today the web
is viewed by this sort of spectrum of
devices so pretty much any consumer
electronic thing you get like even a
kindle will have a web browser and I'm
like I mean like the old school ones
with the e-ink displays so and this
trend is only going to increase right
like we've got all sorts of crazy stuff
coming down the line and I can't even
nobody can even predict like what but
the next thing after touch will be so
here's an example of some interface that
hopefully HTML will be around for
gesture-based things and i'll just show
you a quick whoa to show you a quick
video of the kind of stuff that I'm
particularly excited about so here's a
quick demo video from a HCI research
conference this is just like to kind of
get people thinking it's a little bit
it's not really relevant to probably the
things that you're building today but
I'm sure it will be one day so these
kinds of interfaces are still like very
much in academia world but like there
clearly coming at some point and maybe
not this one and maybe not some other
one but anyway just like be excited by
this stuff I hope you are I am so even
though there's this huge diversity of
devices I think we can still generalize
and point out a couple things that are
definitely difficult with mobile so if
you thought that supporting ie ie seven
or eight was hard I think you're in for
an interesting experience so although we
have pretty good mobile browser like the
modern platform support mostly it's
webkit-based so you know on the surface
it seems okay well it's all WebKit so
that's fine we'll just right for WebKit
but in practice it's a whole bunch of
different web paid versions it's a whole
bunch of device specific things that
people add on top of WebKit so this
story is quite difficult slow CPUs so
this is also unlikely to change
drastically in the near future like
we've got basically ordered magnitude
slower machines in your hand then on
your desktop so you need to figure out
how to best leverage that and also
alternative input so right now it's
touch in the future it might be
something else and these are these are
questions to solve and I'm not just
throwing these things out actually kind
of this is what I want to talk about
today so we'll hopefully cover all this
and debugging is terrible but you
probably well I'll save it if you don't
know what I'm going to talk about okay
so starting with many devices and
platforms the question you're probably
asking is like you need to decide which
ones to support I'll talk about various
trade-offs here but before I do that
let's talk about some design questions
so you're designing for some users
hopefully you have that user in mind at
least to some extent like you might be
thinking what what are they using like
is it a desktop is a phone so maybe
you're naive approach is hey just like
build for one build one version of your
site for all the devices just serve it
so this is great right you just write it
once you're done but basically you've
completely neglected the differences in
usage of this site so someone that's on
a mobile device and someone that's on a
tablet is probably using their
electronics very differently from
someone on desktop so even actually
within the form factor or sorry within
like between like desktops and full of
sort of um tablets and phones a lot of
people on Android and iOS have been
creating customized versions with
drastically different versions of their
UI so Flipboard is an example of this
they have a completely custom a phone
version that they recently launched with
be intent of like supporting single hand
use whereas their tablet version is
optimized for two hands and it's a it's
a very different experience just because
of the way people use their app this is
another example show you it's similar to
flip board I think it's more for videos
I actually haven't used this so but the
bottom line is yeah if you have one
version your UX will suck so the
alternative extreme is just like make a
version for every device you want to
support so you'd make an iOS version for
ipad for ipod touch you make an android
touch or android tablet version and
enter a code version etc etc and serve
the customers so the problem with that
is it's going to suck for you you will
create good experiences but as developer
you're going to end up doing the same
thing over and over so i just mentioned
you know android and iOS there's some
complications here with like making a
single version for both platforms but
let me let me dive into platform
specifics first so
platform-specific basically each
platform like iOS provides a human
interface guidelines is it's a set of
standard widgets that define the look
and feel of your OS right and the
framework that iOS provides Coco it
makes it really really easy for you to
like basically the quotas fall into a
pit of success so you're doing like the
basic things and then you end up with a
UI that looks kind of like it looks like
it fits on the platform right and so
this is the intent of like native
platforms and some people take the
approach that hey like we can just use
web technologies to emulate platform
native Native UX the problem is you
basically you basically screwed yourself
over entirely right the whole two
benefits of using the native uxr that it
was easy and that it looks consistent in
the platform so now you've done
something that's very difficult and it
looks like crap on any other platform
except for the one that you just
developed for so I don't mean to insult
the work of this developer Chi I think
he he did a very deep case study about
implementing an iOS look alike and fuel
alike version on the web I'll just open
it up and show you its if it loads
anyway it basically was a feat of design
and engineering to replicate all of
these iOS metaphors from you know things
like recreating the CSS gradient
perfectly to like setting to making it
feel right so to like you know setting
the screen size correctly he also did
this thing where he'd oh really deep
into buttons so the way buttons work on
iOS you like there's there's a touch
target and then there's a release target
and they're actually different so you
can like tap on the button but then
release outside of the button anyway
it's you're in for a world of pain if
you take this approach and then you have
to do it again for every other platform
so this I'm going to posit that this is
not the web way and that we can embrace
what's good about the web and and not do
these things although it's a great
exercising and good on Qi for
persevering so um there's a trade-off
here that I'm trying to allude to which
is that the more versions you create
better each version will be but the more
effort it will require from you so the
there's some milligram that we need to
find and oh I also have this slide so
one other thing about platforms is they
differ and they differ in sort of subtle
ways that you know it's very difficult
to say well basically screw this
guideline over so the guideline here is
you can see there's a difference between
Android on the left and iOS on the right
the main difference here is you've got
your menu bars positioned in different
places and this is this isn't an
accident it's actually by the guideline
of the platforms so iOS says hey we've
got a physical button on the bottom so
you won't really be likely to
accidentally push one of these one of
these buttons that are on the bottom
because hey it's a physical button
so you're going to feel it there's
tactile feedback whereas I'm Android
you've got soft buttons so we want to
place the menu as far as possible from
those soft buttons so that if you
accidentally hit back or if you're going
for friends but you accidentally hit the
back button that's like a pretty drastic
mistake to make so there are differences
and and you know the there is a
compromise to be made here but the
difference is between device classes
like phones and verse establish are
smaller than differences between
platforms so I guess what I'm
recommending well I'll get to what I'm
recommending it's basically a compromise
so if we create desktop versions tablet
versions and film versions I think will
be somewhat further along than just
creating versions for everything or
creating one only one version but we
need to distinguish between them somehow
right so one thing that's been really
great for the community I think lately
is media queries so how many of you have
actually used these in your own sites in
production cool so you probably know
what they do but the basic idea is here
you can say basically you specify
conditions that evaluate in CSS so
you're saying here that if you're
dealing with a screen device and the
width is a greater error sorry it's
smaller than this value then specify
this style and here we're saying if it's
between this threshold and this
threshold that I use this that which is
being truncated here and similarly here
you'll notice I'm using these variables
actually this is a really sweet feature
that just got at it as CSS it's in the
pre-release of scss you can now use
variables in your media queries which is
great and just in case you in case you
haven't seen this stuff in action
oh I should unfold screen the point of
this stuff is at least on the desktop
it's a little bit contrived i guess but
i'm on mobile if you're getting thanks
Peter if you're getting a serve the
content on a smaller screen you'll get
this version but if it's a larger screen
you'll get a different version this
isn't very dramatic but let me load up a
something where it's clearer so here
think vitamin has this layout right but
if you were to see it on a tablet let's
pretend this was the size of a tablet
you'd get this and if i was to if I was
able to resize this smaller you would
see that it's a completely different
layout so that's the basic idea of media
queries you can do more advanced things
as well like detect orientation so you
can see if you're in portrait mode or
landscape mode and change the CSS again
so yeah I recently discovered that you
can do this this used to be completely
non platform friendly basically it was
available on iOS as of like 4.3 maybe if
i'm not mistaken and android will didn't
support this at all so now chrome Chrome
for Android chrome is not currently at
the default browser you can get it from
market in if you have an Ice Cream
Sandwich device right so there are some
limitations though right if we're just
customizing the CSS of our site we're
dealing with the same Tom for every
single version so that means the phone
has the same version of the dumb the
tablet has the same version and the
layouts may actually be drastically
different so what you end up with is a
lot of CSS hacks to like position things
in the right place where if you were
tape if you were able to customize the
Dom you would have to do this way less
there's also no way to load like
additional scripts or functionality if
you want to have like form factor device
class specific
but I'll go more into that in as in a
second and also the other thing is
you're serving the same version
basically if you want to optimize your
network transport somehow so you know
like certain devices are really good at
this kind of thing like you want to gzip
in some cases but not choose if you
don't have that flexibility here either
right so you can do media queries in
JavaScript there's the thing called
match media and this lets you basically
run any media query in JavaScript and
see if it matches the current state of
your browser so here sorry we're running
this media query here and this will
evaluate to true if it matches that's it
so we can we can detect essentially
between these device types if we want to
take this approach by just having the
logic like this really really
straightforward just like is it a touch
device if it is then we see is it small
then we serve the phone version if it's
big we serve the tablet version if it's
not a touch device we fall back to
desktop but the question is where do we
draw the line and a lot of the time I
think people that are in this space are
developing entirely for iOS this is not
good for the web iOS has historically
been fantastic browser and I think right
now we've really picked it up at Google
and we're actually stepping up with
chrome for android so I'm very like
hopeful that we'll be able to create a
competitive offering so I think that you
know assuming that everything is an
iPhone or an iPad is not the right
approach so we need to consider other
devices so here is a little graphic I
hope you can see it but basically it's a
list of a bunch of random devices
including iOS devices with their respect
screen resolutions so here is an iphone
there's Galaxy Nexus the Galaxy Note a
bunch of tablets here and you can see it
that it's a pretty wide spectrum it's
pretty wide gamut of devices so some of
them are kind of also like they straddle
between the two form factors like the
Galaxy Note I don't know if you've seen
it it's like a five inch device so i
guess some people just want a big screen
but other people don't want to hold a
giant thing to their ear so it's a
trade-off one thing to note here is CSS
pixels here are actually not screen
pixels so for example the iphone when
iphone 4 was released there was a retina
display in it and what that basically
means is it's double density so instead
of 320 x 480 the resolution is actually
640 x 960 but CSS still reports it still
pretends that's 320 x 480 just to not
break the web so everyone else has taken
the same approach and now a lot of
android devices are double density too
but it's just not branded as retina but
it's still double density like for
example Galaxy Nexus its native at
resolutions actually 720 x you know 1280
so anyway it's good to know that even
though it doesn't really affect you in
this particular case you'll probably
shoot you in the foot at some point so
the other complication is that all these
devices are also capable of landscape so
now we have to think about not just the
width but also the basically the max of
the two dimensions and what you get if
you look at that is you get this like a
bunch of squares and we can right now
with today's landscape roughly draw the
line at about 6 46 50 pixels and say
okay it's bigger than this it's tablet
if it's smaller to phone so this is the
kind of heuristic that we're
recommending right now the chrome team
is recommending for doing client side
detection so basically to implement the
code that i showed him it very beginning
but well a couple slides back we can
implement eck touch support by just
saying okay well we'll defer to
moderniser Paul and Farouk have already
done the heavy lifting of trying to
detect touch support in a cross-browser
way so modernizer if you're not familiar
it does this thing where checks featured
support on your current browser I it
doesn't always work and there's been
some false positives before like
sometimes an unstable version of a
browser says it supports touch but
actually doesn't but these are outliers
generally this is pretty good and with
small we just use a media query here at
650 so that's cool but the threshold
will change new devices will be added
you know this is a work in progress
anyway so the other approach is servers
head detection so this in monospaced
font is a user agent string someone know
offhand like what device this belongs to
this is my favorite archaic part of the
web it's just so incredibly messed up
how the UA strings have been just
constantly added to over the years over
the decades but anyway does anyone have
like a good idea maybe yeah I mean it's
a good guess I mean the thing that kills
me is that there's like so many mixed
messages here right if you look at it
from like a non web veteran perspective
it's like okay well it's Mozilla's was
probably firefox android okay maybe it's
android browser but then we have WebKit
it's like Apple WebKit really and mobile
safari so and gecko here so it's just
like an amazingly arcane piece of
Hurricane artifact here but anyway it's
hard for me too
what this is but luckily there's people
that have like spend a lot of time
solving this problem and there's device
databases out there that kind of help
you along the way one is device apolis
another is Werfel we're full harkens
back from like the days of you know
feature phones and wml I kind of thing
so it's really legacy stuff for example
wuerffel's basically to database based
on an XML file and the xml file is 20
megs just like 20 megs of XML so it's
like I don't know I did way too much xml
stuff back in the day and it's it's like
a nightmare 20 megs of XML but anyway I
should stop knocking it I guess the
other limitation though is it doesn't
explicitly say what device for class
you're dealing with like you get a bunch
of information like does it support mp3
doesn't support auth Orbis but and like
the screen sizes but it's just so much
information that I think it's
intimidating for developers to get
started with this and we definitely need
a better solution which I can't really
well propose well we'll see what we can
do there are later solutions though that
aren't as robust so detect mobile
browsers calm as an example it's
basically it's well I can show you now I
won't show you but the point is it's a
regular expression that's implemented in
a bunch of different languages and it
basically it says okay is this a mobile
browser or not a mobile browser and it
doesn't distinguish between tablets
either actually it's kind of funny I
think I'll show you okay so
there's this section here and if you
care about tablets it so that they're
not detected by design right but to add
support you could just tweak your rig x
it's fine just like go on your code and
tweak it so this is the current answer
and it's like really unsatisfactory I
think so I'm hoping that we can get a
better one soon right or if you're very
particular you know exactly what you
want you can just implement your own the
point is this approach is kind of hacky
it's ugly there's problems with user
agents so not a big fan but let's talk
about trade-offs so with the client
basically there's three options right
you can load all the content for all
devices so with what I'm saying here is
you load the images for your tablet
version on your phone just don't
distinguish at all and and then have
some JavaScript that decides which
things to actually use so this is
problematic because you download all the
stuff so you're wasting bandwidth that's
throughput and you're also keeping a
bunch of things in memory that you don't
need really you could you could lazy
load extra content with like dynamic
script loading a dynamic CSS loading
again this has latency overheads because
now you're requesting every single asset
with an xhr something like this so again
not great or you can redirect to a
version so you could say okay well I'm
going to have up front a detector thing
that says is it a tablet phone or a
desktop and then you redirect to some
URL and at that point you've got a whole
new reload and like given how bad mobile
networks are right now that might
actually be prohibitive but anyway I
haven't done the math on this stuff I
haven't done any analysis so I'm just
saying like these are the considerations
whereas on the server all you do is you
have some reg ex that runs and then you
just turn the right version and you
serve exactly the right content exactly
the things you want
give to every device form factor so I
think mmm it's pretty clear that from a
performance perspective the server based
ugly you a parsing is actually the thing
to do and I mean a lot of a lot of
Google properties are actually doing
this mobile gmail for example they use a
variant of Werfel in order to detect on
the server and they serve they basically
serve the customized version and they
have they go very granular so they serve
very different versions depending on
your device for feature phones etc but
I'm not proposing you do this because
it's just so much overhead but you might
your client might care in particular
about some old version of some browser
yeah this slide says what I just said
except much more eloquently okay so the
one thing to consider still though is
that even once you're in a form factor
device class you want to scale well
within it right so devices aren't like
all tablets are not the same there they
come in different aspect ratios
different resolutions so you want to use
like percent based layout flexbox model
maybe maybe not we'll talk more about
that so don't it don't assume that
you're dealing with a 1024 x 768 iPad
right oh yeah so right now it sounds
like I'm saying okay cool we don't have
to build 9 versions but we can build
three versions and you're like okay that
sucks I don't want to build three
versions I want to build one version
yeah cool
so the answer to that I think is
basically you're doing it wrong if
you're you're writing three versions at
this point so hopefully you've got some
sort of reasonable abstraction in your
code you've separated your models from
your views you're using backbone or
ember some other hot JavaScript
framework there's been a nice
Renaissance of this stuff lately so
there's like at least four to choose
from but I think most people are using
backbone so whatever if you like
backbone go for it and the whole point
of that is you separate your
presentation from the model so you have
like a separate layer for views for
handling input and for rendering output
so what what you can do in in this
scenario where you have an MVC is you've
got your regular MVC down here right
that looks familiar probably if you're
if you've dealt with NBC if you've not
um yeah there's a lot of good talks out
there so you should check them out and I
definitely recommend it but all you do
is with your detection you can simply
swap out these views and you say okay
well I'll make a phone view that handles
the input and draws all my layouts it'll
make a tablet view and they'll all work
with the same model and same controller
so maybe you'll have like a more complex
setup where you have multiple
controllers that way then you can decide
like which control which features do I
need on each platform so anyway here's
an example roughly of how this might
look in say amber jas so here you might
have like common code so you have a bjs
and I'm simplifying here you would
probably want to separate models from
controllers etc etc but here's the main
logic of your application right then you
have some detector and maybe a loader
somewhere in there and and then you have
like your views that include maybe a
template ember uses handlebars of you
this might implement a whole bunch of
different views
and some CSS styles and you can load all
these things dynamically like the code
for it isn't even that scary pretty much
I've included everything except for the
template which is actually kind of scary
the case of handlebars but you can you
know easily lazy load all this stuff and
it works pretty well so this is the the
client-side approach that I think is
interesting and I've tried this for a
couple apps it seems to work ok so that
is that but again just to recap most
people are using server based detection
still and I'm not sure if that will
actually change ok that's sucky thing
number one that I hope is less sucky now
maybe so sucky thing number two is that
CPUs are really slow right so we have
like mmm one tenth of the speed say in
your arm in your Android phone compared
to the dual quad-core thing in your
laptop for example but you still want 60
frames per second everywhere right
because that's that's you know you want
a good experience especially on mobile
actually things the way native apps are
shaping up if if web is to remain
competitive we need to have good
experiences and we need to like from a
UX perspective compete so how do we do
that basically I try not to do anything
on your cpu try to offload to GPU
rendering or a call native API is not
like PhoneGap native API is but like
stuff your browser handles for you and I
I hope you guys recognize this thing
anyone recognizes thing anyway sorry
it's an animaniacs reference anyway
we'll get there
okay so one thing that is really
expensive as it turns out is scrolling
so it's just been I don't know I was so
surprised that scrolling is hard but it
actually really is working with ang team
it's non-trivial so the way you do this
and I guess by scrolling what I mean is
you want to scroll separate parts of
your page not just like scroll the whole
thing but like if you want a div it
Scrolls independently from another dip
so you do this with by setting the CSS
property overflow to scroll or auto
which will scroll if your content is too
large for the div or whatever element
there's also a way to enable native base
scrolling so as of iOS 5 you can do a
WebKit overflow scrolling touch and this
will let you just flick and do the kinds
of gestures that you expect if you're on
an iOS device and it just just works I
mean there's some caveats it doesn't
work in all cases there's known issues
etc and on Android of ICS and up both
the Android browser and Chrome for
Android support native scrolling by
default the behavior is slightly
different you don't have like the
bounce-back effect you don't have yeah
that's the main thing I think there's
like also inertial differences but this
is it's much better than just the
jarring feeling of okay I'm in a browser
so when I scroll it behaves completely
different there's no like momentum it
doesn't it feels like you know a
second-class citizen thing so this is
the approach that you should be taking
forcing GPU this is really tricky
actually there's no explicit way to do
this unfortunately I really wish there
was some more explicit API for just
saying okay this part I wanted on the
GPU but there isn't so your alternatives
are either you use canvas which is
hardware accelerated by default and even
think you can get it into software mode
but
this is both on iOS and on Ice Cream
Sandwich and up our accelerated canvas
so that's good we actually perform very
well on the benchmarks that we've run
against I'll show you some of that and
then there's css3 transforms with a Z
coordinate this is really like it's
really ridiculous the way this works but
unfortunately the way you get yours
you're like div or whatever element into
the GPU as you say transform it and you
pass in the identity transform which is
you know in this can be a translate Z or
it can be a rotate or something but at
this point it's the browser knows that
you're trying to do GPU stuff and also
demos of this in a second I just I want
to batch it together because you know
we'll have camera pane and stuff the
other thing is layouts so there's a lot
of things that the browser supports
natively that you don't need to create
JavaScript for any more fixed headers
and footers is a big thing so this used
to be something that frameworks like a
jQuery Mobile would do and what they
would do is they would say okay well
whenever you scroll we're just going to
reposition your header in your footer
well just like we'll run some JavaScript
and like put the header at 0 and put the
footer at 0 but now with position fixed
you can just do that and the browser
handles it and there's no JavaScript
overhead for that so that's great and
it's available I think as of iOS 5 and
also in Chrome for Android and the
Android browser there's also the Flex
box model which sets out to be like I
really nice super easy to use layout
model for a pike layouts or basically
you have not just content flowing but
you have like a nap with you know maybe
multiple columns some of the some of the
columns scroll etc unfortunately the
spec right now is in pretty bad shape
well it's in good shape now but the fact
that it
recently got updated with a completely
uncompetitive backwards incompatible
version is kind of setting us back a
little bit so we had display box which
had some like subtle performance
problems just by design and it's been
updated now just like late last year
with a v2 of it and it's now implemented
in Chrome it's not yet available in
Chrome for Android but it hopefully will
be soon so once it is i think i'll be
more comfortable saying hey you should
just use this but for the time being
you're kind of stuck without it okay so
let me just show you a quick demo of the
flex box model just to explain why it's
good and then i'll show some demos on
the device okay so this is flexbox model
so you can see that you've got a
standard kind of header and a
three-column layout the cool thing here
is you can see instead of doing crazy
float hacks and like you know position
or maybe positioning manually all this
does is it says hey I'm in a box oh
sorry I'm in a flex box layout so I'm
going to say this will be the second
element in this layout and by the way
this layout flows horizontally so here
I'm saying okay the main section is flex
box and it it lays out horizontally and
then the children here we can say this
is the index of this child in this flow
so basically it's completely semantics
and there's no like weird things that
you need to do to get this kind of
layout working right and now is the fun
part where I attempt to show you things
with this great camera
okay so I talked about CSS transforms so
I've been working on a like small little
demo of that and I'll just show you on
iOS just for fun but oh ok that's pretty
glary let's try this okay so this is
just a Content flow can you guys even if
at all alright cool so basically the
effect that i was going for is like a
smooth transition almost like a flip
board like effect and what this is using
is it's using CSS 3d transforms
responding to touch events and it's got
a perspective transform it to so kind of
a you can you can really see the
fluidity of the kind of thing that you
can achieve using this approach and this
is all you know pretty much it's all
being done in the GPU behind the scenes
because you know i'm using the transform
z hex so kind of nice feels pretty good
so that's one of the things and another
thing is right cannabis performance so
i'll just show you side-by-side um a
test suite this is actually written by
the guys at in the IE team and this is
their infamous speed reading benchmark
attic and what it does is basically it
scrolls a bunch of text as fast as it
can and this is getting like 35 frames
per second which is pretty good and
chrome does well as well so both of
these modern browsers are hardware
accelerated so let me just show you
right so that was just network latency
basically t-mobile you know so yeah
pretty good getting 50 frames on the
android and 35 on iOS so we're getting
there and this is a huge priority for
the team just performance on mobile
devices so we're going to push this
envelope even further all right so let's
talk about input basically right now
phones and tablets have almost
universally switched to touch input this
this is very different from the previous
mouse and keyboard and let's just
quickly step through why so here's like
an old-school keyboard and mouse right
you'll notice that there's two distinct
devices and they have like completely
separate purposes right so with touch
you only have you have basically one
input method and all you know is when
attached begins when it moves and when
it is released whereas so for example if
you let's take scrolling for example
scrolling with the mouse is either
you're doing it with your mouse wheel
which is very easy to detect or you're
dragging a scrollbar with touch you like
clicking and scrolling are very like
it's a non trivial thing to distinguish
even something so basic right because
it's basically from the recognizers
perspective your finger is coming down
and then it's doing some stuff and
thence coming up so this is like a lute
ly different model to program for and in
early phones I guess we had like more of
a keyboard and mouse metaphor where you
know like the blackberry would have a
physical keyboard and then it would have
liked a little people that you would
move around so as we move to touch
though it's
really quite different and it basically
would touch it's all about gestures and
just things it completely didn't exist
so let me just show you something that
again I'm into here's a cool demo lieu
of an iPad app and this is just
multiplayer pong if it loads I mean it
still multiplayer pong just might not
load alright well we'll just let that
okay cool it's like totally not worth
this wait time though okay so you have
like a multi-touch display and four
people playing on on one touch device
this is cool you couldn't do this at all
before so I'm hoping we can bring more
of these kinds of experiences to the web
because it's frankly completely awesome
and there's there's other similar things
but I won't show you them in the
interest of time but I would like to say
that it's not just about being
completely awesome it's also about being
like just the way you why is evolving
it's very much more gestural these days
and we need to on the web keep that in
mind so one thing we don't want to do is
pretend that touch events are just mouse
events because they're not it's
completely different we don't this is a
bad idea like okay it's not it's not a
mouse because there is there are many
actual differences like there's no
harbour state when when you move your
finger around on in the air there's no
way that that your finger is being
tracked right so if you're relying on
hover State you're doing it wrong
there's multiple fingers right you don't
have a single pointer it's many pointers
and also some things that aren't
currently implemented on the web but are
implemented in a lot of other
environments are shape so it's not just
oh sorry I don't know why there's a Z
coordinate
but it's not just XY coordinates it's
also the shape of your touch like are
you pressing hard is it just a small tap
these are different things and in the
future we'll have you know haptic
feedback and pressure potentially so on
the web there's a spec recently actually
surprisingly recently this was
standardized about a year or so ago
before it just used to be some de facto
standard but essentially there's three
main events touchstart touchmove and
touch and so when you touch down then
the event fires I mean it's pretty
straightforward and there's an event
payload touches is the array of all the
touches on the screen target touches
just includes the ones on the element
that you've bound to and change touches
is useful for like say you've got a
touch end and you want to know which
finger was released you have multiple
fingers on the screen at the same time
it will include that information the the
thing that's really lacking here is
there's no gesture API there's no
gesture API that is open and available
across platforms Apple has one but it's
not being standardized I think for some
patent reasons or something but
basically there's no standard way to do
this and I'll talk more about that in a
sec so one actually compelling reason
for you to use touch is clicks are
delayed on every mobile browser so if
you're relying on click the event that's
going to have 300 millisecond latency
right there and people can see that
immediately the reason for this delay is
basically the browser needs to decide is
there a click happening or are they
trying to scroll or is it a pinch zoom
and these events aren't actually
revealed to you as a developer but its
internal to the browser so the
workaround is to use such end instead
and here's where we go into like this
territory where it's kind of a big deal
to implement so it's a sep
read there's a separate study here or a
separate link to an article but how to
do this but the basic idea is use touch
end and maybe you're attached end target
will be slightly bigger because you know
you're the button and the release target
may not may not be the same but this
this article goes into that detail okay
activestate so this is something that
triggers when your mouth is down on
desktop so you've you've clicked on a
link but you haven't released it yet on
touch this is not by default available
so this kind of sucks and there's a
workaround which I really dislike
because it just seems like a hack but
I've tested it across several browsers
and it seems to work and here's the code
do that so with this code basically
you'll actually get the CSS selector to
fire when your fingers down on the link
I don't like it but whatever also you
might have a single page you I or you
might be doing some very complex gesture
stuff and it may be useful to disable
zooming and scrolling because by default
the browser just takes these gestures
and does what it wants to do with it so
it'll like you know resume the page if
you if you do a zoom gesture so the way
to do that is you set your viewport to
know scale and you you can just prevent
default on the touch move that will that
will basically prevent any mutation from
the browser's end ok finally sorry this
is pretty technical but essentially with
multi-touch if you have like many
fingers on the screen at the same time
you can imagine there's a lot of events
that are firing and they will fire very
quickly you'll start will start to fire
at faster than 60 Hertz and there's no
reason for you to be rendering faster
than 60 Hertz because there's no
perceptible way that like the user won't
see it so the solution is to the couple
be touch input recognition from the
rendering so here's a really simple way
to do that basic
the canvas here is listening for touch
moves every time there's touch move it
will save the touch array and then
there's a separate timer to render and
here I'm using set interval which is not
what I would be recommending for
desktops but right now
requestanimationframe is only available
on Chrome for Android of all mobile
browsers so I can't really recommend
this technique nerdist but hopefully
soon everyone will be implementing a
request animation frame and that should
be basically what that is is it's a way
to say run this code if you have cycles
to if you the browser have cycles to
render things and it's the recommended
way to get good animations going so
check it out there's good resources
about this but for now it's not really a
mobile thing okay so now that we've gone
over all this gory detail stuff I'll
tell you that some of this is solved for
you this frameworks like sentra you
probably don't want to think what you
might want to use center but then you're
using all of sentra just generally how
it works there's also gesture
recognizers that are standalone like
hammer is and if you don't get the name
it's kind of cool it's actually about
hammer time and you can't touch this but
anyway so you can also simulate touch
events in the desktop and bear with me
this is like a total plug for my little
pet project but basically let me show
you a quick demo so one of the things
with multi-touch if you're doing complex
gestures it's really hard to debug on a
mobile device so one possible solution
is use magic touch which basically lets
you simulate events from your Mac from
the trackpad on your Mac
and bring them directly into the browser
so i'll show you a quick demo so this
requires installing an NPAPI plug-in
driving in scripts but I figure it makes
for a cool demo so i'll show you anyway
and then running this tongue same thing
so here's a tracker and all this does it
shows the fingers that on the screen and
I'm running the tongue saying
application so what all i'm doing here
is i'm touching the trackpad so if you
want to do some you know we're just your
thing you can just use this and all it's
doing is its emitting touch events for
in your desktop browser so this I find
quite useful and some people at Facebook
are now using this so that's cool but
yeah right there's another there's a
really silly thing I this is like just a
small sample of this game doesn't even
make sense but it's like fruit ninja but
with browsers I'm not sure anyway it's a
stretch and you're you're supposed to
not get the blink tag for some reason I
wrote it so I should probably know
what's up but anyway you can see it's
multi touchy so that's cool I'm just
waiting for the blink tag to come up so
that I can accidentally get it and it's
yeah all the errors are 4 40 okay so I
lost anyway sorry right but I would
actually like to show you some demos on
a device so let me just quickly switch
over
so the first demo is one written by a
guy called Seb Lee and it is a
multi-touch game controller oh okay test
okay so you can see that basically
there's a little asteroid Z thing and as
soon as I put my finger on it creates
like a virtual trackpad or a virtual
touchpad and then the other finger act
as a shooting thing gun so the I feel
like the camera isn't really showing the
latency but it's pretty good here like
it's really responsive and it feels
pretty much native at this point this is
Chrome for Android and it works very
well in iOS as well so examples like
this are things you can't do without
multi-touch and it's just it's clear to
me that this is a great thing for the
web I think and we should be embracing
it and doing more cool stuff with it oh
and right as i mentioned sencha also has
gesture recognizer similar to the one
that hammer jazz provides maybe i'll
save that just in the interest of time
but basically instead of handling
instead of decided figuring out where
the taps were and recreating your own
touch stack etc you can just use hammer
ojs and be done with it
great so mobile debugging the story here
is has been pretty bad historically so
recently well there's debug console in
iOS basically you can turn on debugging
and you'll get all your console logs I
would put it on the top this isn't great
if you're debugging through console logs
you're probably doing it wrong so
there's actual remote debugging in rims
playbook but unfortunately I don't know
anyone that has playbook but I wish I
did it's a great device there's also
winery or wiener depending on how you
like to pronounce things and it's a
cross-platform debugging like solution
it doesn't actually let you debug but
you can like inspect elements and look
at Network stats pretty basic but I
debugging used to suck it's actually
like way better now with chrome for
android yeah so the question was are
there plans to support chrome on
previous versions of android i guess
like gingerbread or honeycomb and the
there's no plans at the moment the
current platform offers some good
hardware accelerated support just like
low level stuff whereas previous
versions of android don't really offer
that same quality of hardware
acceleration that we'd like to see in
the browser so unfortunately not at the
moment other questions alright cool
sorry that's it if you want to like ask
about other stuff like that video
question just find me later I'll stick
around for a little bit thanks guys</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>