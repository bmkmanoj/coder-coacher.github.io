<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Hybrid Apps for Android and Google Glass with CSS3 | Coder Coacher - Coaching Coders</title><meta content="Hybrid Apps for Android and Google Glass with CSS3 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/InfoQ/">InfoQ</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Hybrid Apps for Android and Google Glass with CSS3</b></h2><h5 class="post__date">2013-07-11</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/2OaaZXlgDDo" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">here's what I'm going to do I'm going to
talk about and show you some demos of
how you can use css3 2d 3d graphics and
animation in conjunction with a little
bit of JavaScript a little jquery to
create hybrid html5 applications that
you can deploy on android devices and
Google glass so how many people here are
mainly or exclusively Android developers
okay not that many so the other other
people html5 sort of hybrid so what do
the rest of you do
iOS oh really ah well I do have some
good news the new second pre-release for
xcode 5 and iOS 7 now supports tablets I
just found out that today so I'm going
to be downloading it soon and the stuff
that I'm doing you can run on you can
use phonegap to create these apps for
iOS devices as well just that for today
it's more we talking about how it
pertains to glass and so how many people
are feel comfortable with css3 and that
sort of stuff ok a few so for a lot of
you is new all right well I'm going to
start with the first thing that I
deployed to Google glass so this is pure
css3 and how many of you have seen this
before from a previous demo that I've
done well good ok so obviously there is
the animation part and then there's the
graphics and then there's the actual
construction of the cube so the cube
consists of three phases their div
elements we're doing some transforms
which I'll talk about in a minute the
graphics is linear gradients and radial
gradients and then the animation is
based on something in css3 called a
keyframe now you know what a selector
looks like so a keyframe basically is a
thing we're inside you define things
that look like selectors but they're
based on percentages from 0 to 100 and
in each one of those you can put
whatever stuff you want to put in there
so for example in this one let me see if
I can get this without hosing it so this
is the key frame it's um as you can see
it just called it upper left actually
have several in there and then you can
see at zero percent 1020 etc etc they're
all these transforms again just some
more details there's matrix is kind of a
generic type of transform excuse me and
then there are the
the ones that create the effects and a
little bit discombobulated here with
this but okay so this is the HTML page
as you can see there's practically
nothing there there's a reference to
this CSS style sheet and then there's
that outer div sorry just ignore that
that's the other demo sorry so in CSS
land in 2d there are four transforms
rotate scale skew and translate now in
3d you can actually sort of create the
counterparts in three of the four cases
there's no skew but there's rotate scale
and translate and basically the
advantage of the having 3d transforms in
CSS is that you can use the GPU and
that's where all the power that you get
from your device and in order to ensure
that in guarantee that you're going to
actually invoke the GPU there's a kind
of a no-op that you can do which is
called translate 3d 000 if you don't
have that you still might be actually
using the GPU but you're not necessarily
guarantee that you will so now that you
know how to get the GPU work and you
might think well it might because of
these things can be very
compute-intensive you might actually
drain the battery well it turns out that
you might be doing calculations more
calculations but it's actually in less
time so for example if you're using the
GPU it could be a tenfold increase in
speed so we drain the battery 10 times
faster but it's only in say 120 at the
time so it's actually would have what
you would get if you're on without the
GPU that sort of makes sense so more
stuff faster in much faster much less
time for the calculation so that way
always your during the battery I'd be
pointless to have the GPU so another
example this is just frivolous fun I was
learning CSS at the time so I wanted
I'll always like dice I don't gamble but
for some reason I just always end up
doing something like this
very similar effect that as the first
example so okay now there's a limitation
to what you can do with css3 there are
some things that are more conducive to
doing if with a little bit of jQuery how
many people use jQuery great so either
jquery or javascript here in this case i
used jquery so this actually works you
see if not that good at it let me see if
i can do just showing you this
originally okay god anyway this is css3
the paddles are divs that bouncing ball
is a div so you said border-radius the
fifty percent and there's a little set
up kind of a clock tick if you will with
set timeout and then it just does a
little bit of JavaScript to check if
it's too far to the left to the right
and it reverses the order if it is and
likewise vertically and so then when it
text it checks for a collision if it
hits the paddle and it adds a point and
if not it checks if it's the wall and it
bounces that's basically it the key
point for this is that getting the
collision or getting the position rather
so that you can detect whether you're up
go around the paddles the way that i
found that was best done for this
because all the stuff that i tried
didn't work you're going to stack
overflow nothing worked jquery-mobile
gives you exactly the position that you
need whenever you're doing a touch event
or a mouse event so this works because
of the fact that jQuery Mobile has
virtualized the touch events and the
must events and those methods I'll have
a V in front for virtualized so this
will work also on a tablet and have the
phone as well that it works in a
orientation originally I had it hard
coded just to get it to work but then I
was trying to get to port this to google
glass so then I had to handle the
orientation so that basically forced me
to do the JavaScript which I sort of
hate doing to get the orientation right
and the resizing and all that stuff so
the first
parts done now getting it over to Google
glass you can since if in case I didn't
already mention it basically any android
APK can be ported to google glass so
this in an APK poured it there fine now
the question is how do you handle the
movement of the paddles there's
obviously no touch and no mouse voice
isn't going to work so I'll give you a
hint it's sensor in android there are 13
of them what it might work I haven't
finished it yet so we're in the process
of doing it there you go why would the
accelerometer work because with your
head movement when you move across you
can detect the change and then you know
get the the data comes in and then do
the arithmetic adjustments and then you
figure out when you're lined up to the
right and the head movement up and down
so you move the paddle on the left and
the right so if you see somebody doing
this they're probably not listening to
you so oh and by the way there's you
know copyright stuff and I mentioned
this in the other event I think up until
10 years ago happy birthday was actually
under a copyright so every time you sang
it you actually broke the law now
there's a game that was done it was it
30 years ago similar this so this is
like it's on glass so I've called it
Gong just to make sure we don't get into
any copyright type stuff so anyway so
this is kind of fun just to do in terms
of a learning experience and this isn't
the primary purpose or Google glass of
course but it just shows you that there
are ways to do things on google glass
the question though is what are the
semantics of sort of touch over really
type sort of functionality there's voice
driven commands but how do you handle
something where you want to have some
kind of a menu without the verbal
commands now you could do something like
some sort of movement where you there's
no
essentially the person is looking at a
spot and within within a delta of that
they're essentially not moving and then
if it lasts a second it's sort of that
could be like a long press kind of thing
but I mean you can interpret things any
way you want but does that really the
way people would is that an intuitive
way of what people would want that to
mean I don't think it's quite even
Google doesn't really have an answer in
terms of figure out the sort of the UI
related navigation sort of stuff except
for the voice commands so one thing I
wanted her I can move around right I
won't knock anything okay so back to the
stuff about the transforms it's you
would think that sort of converting all
of your 2d transforms to 3d transforms
you get the performance because you got
the GPU everything works fine right
should problem solved not quite because
there's a reflow and repaint that
happens all the time and in fact anytime
you scroll resize change the Dom you're
always going to be doing essentially
potentially trading a reflow which then
means you're going to recap the
browser's to recalculate the layout of
all of your stuff and then a repaint is
when the colors and so forth have to
also be calculated and that happens when
you know things like opacity linear
gradients radial gradients drop shadows
all the fun good stuff can trigger a
repaint which is a result of a reflow so
I'm not going to get into the details
you can check google and find articles
if you get to that stage where you need
to use or be concerned about performance
with css3 related functionality so the
question is why would you be using css3
or not instead of say Android or iOS any
thoughts before you answer you can do
transforms in Android the Android
graphics package has a matrix class and
that has those four transforms that I
mentioned you can also do some 3d
effects in Android using
I'll give you a hint it's a class that's
in Android hardware and the ideas
probably the same in iOS there's a
camera class and with the camera class
what happens is that you can essentially
as you move the perspective the point of
view you can then calculate cordon is
like the x y&amp;amp;z coordinates that class
also has things like rotate and
translate so you could take that the
matrix and then you can start moving
around and getting some 3d effects with
that so it's possible in android I
believe the same is true with iOS as
well however the big difference
obviously is that with css3 it's in the
browser it's not compiled it's not
compiled code you can modify it very
easily and you can train people who
don't have a technical background to
create those effects now another point
to keep in mind in case you're
interested or exploring with css3 you
can also define selectors that reference
SVG files now that gives you a lot of
powerful functionality because css3 is
very good for the graphics animation but
it's not designed for doing sort of
arbitrary kind of shapes you can do
rectangles ellipses and triangles you
can get into some other kind of unusual
shapes but if you want to do like a
chart a 2d graph or a feed 3d graph
Bezier curves sort of arbitrary polygons
you could do that's VG an SPG you could
have a pure document you can have an SVG
document where you have a cdata section
this XML so for character data inside of
that you can have JavaScript so you can
programmatically at runtime dynamically
create elements and append of the Dom do
all this kind of stuff and so in an HTML
page you can have css3 you get an SVG
you can have canvas so with all of the
graphics effects 2d 3d and animation so
it all works together pretty much if you
can think of a scenario you can probably
do it it's just a question of how much
work it is so if you're going to be
working with creating html5-based hybrid
applications and it's the kind of use
case you know not first-person shooter
obviously but some sort of scenario
where you want to create some very nice
aesthetically appealing visual effect
you can do that with css3 fairly easily
even if you don't have a strong
programming background so just to kind
of move along I wanted to show you
something this has some jQuery in it and
let's see what it does is it moving okay
so this is kind of a trying to the
jquery CSS method is your friend is
fantastic because you can set all these
properties CSS properties now in the
earlier example when I showed you the
bouncing ball the one thing I didn't
mention is that in order to change the
location of an element you need to set
the top property and it's a numeric
value appended with PX / pixels that's
the vertical and then set the left
property that gives you the horizontal
direction so this one here is um they're
all dead elements so what happened was
essentially I went through a loop and
every other 720 of them and every tenth
one i added a animated animation effect
based on the keyframe that I defined in
another CSS file so just so you can
think about that when you see let's see
that again so this is a polar equation
it's called a Hong coid whatever that
means okay so finally I want to show you
the this is the kitchen sink example
this is the one where I just sort of
through in everything linear gradients
radial 2d 3d transforms rotate seal
perspective I through and stuff I didn't
know what it was at that time I
basically didn't like CSS but then I saw
that graphics stuff and I drank the
kool-aid and that was about two and half
years ago and then it's like every time
I saw CSS stuff it's like oh yeah yeah I
like this so there's like clipping and
everything that it completely changed my
way of thinking I flipped a bit inside
basically and so I'm still not that good
at CSS actually but it's if you want to
get sort of more comfortable with it one
thing you have to do is learn the box
model is very very important otherwise
it's all it's going to seem like this
very sort of like tenuous foundation and
kind of sort of hack at it and make it
work and then you're afraid to touch it
because it might break something that's
how I used to write C++ code so it's
sort of the same haunted feeling
sometimes but if you get into that learn
the foundation part if you have to
that's what I recommend and also
understand the relationship between CSS
and the box model and the Dom how that
kind of works and it all works together
and you know what it is in rocket
science you can all learn this so if I
can do it you could do it so that's just
a simple set of things that I did now I
want to show you some other stuff that
adobe has done has any been work with
OpenGL great so for the rest of you a
very briefly quickly simplified sort of
a description opengl is this pipeline
oriented architecture where the output
of one stage is the input of another
some of the things it's it's it's very
machine friendly not necessarily human
friendly so the terminology can be a
little bit confusing for example vertex
shaders those are the those are the
things that you use is the code is looks
like see and it's actually the place
where you apply kind of transforms the
sets of points that represent triangles
which is the triangular ization of an
object so these calculations are done so
that output is finished it goes to the
next day then it goes to the fragment
shader which may be intuitive for you
it's not for me it's that place where
the actual pixel values are calculated
for each of the points in the transform
set that's OpenGL kind of sort of so
adobe creative something called shaders
and it essentially gives the power of
sort of OpenGL in CSS where you use a
custom tag and inside you specify a
vertex shader which by convention is
ends and vs and then fragment shader by
convention ins and fs and so you get the
power of all that stuff without doing
any of that code and if you've tried to
do opengl or
webgl you know how non-intuitive that
stuff can be there's a guy who forgot
his name the guy who did the jellyfish
it has anyone seen the jellyfish example
it's done in WebGL guy wrote it entirely
in WebGL these floating jellyfishes it's
just the sine wave he said but I mean
it's all the other that's the easiest
part all the other stuff that he created
the effects does all this WebGL he said
read the tutorials learn the staff lyric
and then forget about doing it manually
use the libraries so one of the things
that you can do is and they don't exist
yet in for Adobe hopefully they'll come
out soon use the tools that they have
one is called a filter factor which I'll
show you the link so just to give you an
idea I mean this is kind of a basic
thing you can do that already right
moves over the hover you can rotate this
thing it's not working perfectly the now
this is one as you can see vertex shader
it's kind of indicative of what it's
using now take a look at that this is
okay try doing that with Android or with
iOS and getting it right quickly and
easily as you can see this is the kind
of stuff that you can do that makes the
the website of doing things a lot more
fun I think my favorite still this one
here this is working how well does it's
connecting kind of weird here
can you see that okay that's CSS so what
they're using under the covers is
they're using shaders and so forth but
there that i think what i saw was
there's some Bezier curves that are
involved it's not super you know when
you're up close you can see it's it's
imperfect isn't the jaggies are there so
you know don't be disappointed you know
now but I mean in terms of creating the
effect itself the code is actually very
simple and here's the can you see that
the link at the top that's where they
have the there what do you call it their
filter lab so what you do is there's
just a bunch of stuff that you set and
as you do this it changes sorry about
that it's not showing up to it but as
you can see the bottom do you notice I
was changing the code okay so all of
these effects that all the things that
you're tweaking up here twiddling around
it automatically generate some code for
you and people have taken WebGL code and
just slammed it in there and it works
both ways apparently so that's going to
save you a tremendous amount of time if
you get the effect that you want just
take your code and pick the code that
you get there and paste it into your
HTML page and you're done so that's the
super whirlwind tour and I just want to
get back to a little bit of flip through
some of these ok so the matrix you saw
the matrix method it's every 2d CSS
transform can be represented by a three
by three matrix the 3d transforms can be
represented by a four by four matrix so
what happens you saw the code before
there was the matrix thing and then
there was rotating all that stuff
basically what happens my understanding
is that all the transforms are converted
to their matrix form all of those
matrices they have to be four by four in
order for compatibility so essentially
the three by three has to be represented
as a four by force you can multiply them
all together the browser will then
perform the computation so that there's
one
tricks for each one of those things
obviously it's not going to recompute
every time so this is a slight trick
question which one renders faster the
one where it's got the one single matrix
or the one where there's all of the user
friendly names like rotate and scale and
so forth the key word is renders they
render in the same amount of time
because the only difference is the
computation to get from the multiple all
these matrices to the single matrix so
at the beginning when there's a delay
and so forth you know users don't know
what it is right that's where the delay
is taking place so that's where you're
going to see some performance
degradation as well as also with the
reflow and repaint in some cases so now
that's the form as you can see it
doesn't go real wide as it goes column
wise so it goes a1 a2 a3 a4 a5 a6 on the
bottom row is going to be 0 0 1 that's
just the way this method works so the
identity matrix how many people have
work with matrices okay how many people
enjoy working with matrices good I'll
buy you a beer later it's been about 20
years since I've worked with them but so
this is the identity matrix the bottom
row is fixed so one and one the diagonal
is the key thing to remember when you
change the diagonal values that's where
the scaling takes place if it's bigger
than one is bigger if it's between zero
one is smaller so oops so there is an
example of what a matrix would look like
if you're going to do some scaling so
the scale thing looks like this not so
bad right for those of you haven't
worked with them sku sk so often the X
first row and then down below the Y
that's where you get that the skiing
effect that you saw before not so bad
translate you know at the end there
pretty simple so the rotate
unfortunately is the one that's a little
bit not so intuitive essentially it
involves calculating the sine and cosine
of an angle
and I showed down below it's the cosine
of an angle and sine of an angle so
basically that negative sign that you
see there if you move it down to the
other side the weight is right now
that's a rotating counterclockwise
that's positive if you move the sign
down below it's going to rotate in the
other direction just in case you need to
know so i showed you that let me get
through blah blah okay so another thing
within Android you can do again you
don't need to do this in the Android dot
graphics package i mentioned there's the
matrix class and there's the bitmap so
when you get a reference to something in
your main dot XML there's a PNG
somewhere you get that bitmap and then
for that you take instantiate a get an
instance of a matrix class and then
apply a transform whether it's scalar
rotate and so forth so you can create
these effects as well and then also with
a camera class get the 3dfx and okay
just I don't know why I put this in
exactly but who's working with spherical
coordinates to the rest of you need to
work with that probably not i I'm gonna
go through it spherical coordinates in
there two minutes or should i skip it
it's up to you okay let's see if I
remember basically there's two triangles
and in the plane you got say the X&amp;amp;Y
coordinates and they calling the
hypotenuse w so it's like this here's my
lame stuff so this is X this is y and
this is w this angle is a now by
definition the sine of an angle is this
y over w just the definition the cosine
of this angle is this x over w just the
definition so you multiply both sides by
W and you get one and two right okay so
now take this triangle and put it in the
plane and then go x
why and then Z so that's X Y Z that's a
point on a sphere which by convention
has a radius of our so we have another
triangle right the base is w the height
is z ipod nurses are the angle is it is
be so once again we'll have this
triangle so the sine of this angle B is
Z over our the cosine of B is this which
is w / are once again multiply both
sides by our and you get three and four
take equation number four we got an
expression for W and substitute into one
and two you'll get rid of W and what do
you get you get the spherical
coordinates of the point XYZ and the
Cartesian 3d plane based on the radius R
of the sphere which you obviously need
you need the angle in the plane
obviously and then you need the
elevation angle that's it so how long
did that take since you wanted me to do
it under two minutes so that's the
hardest part now spherical or
cylindrical coordinates what would you
do it's the same so you have it in the
circle except Z is unbounded right and
then if you want to do helical it's the
x and y are the same and then Z is going
to be the value of the angle so it
rotates in a spiral that's it I'd say
it's pretty simple so what are you going
to do are you going to use spherical
coordinates and all of the Android
classes and methods and the camera class
to do your stuff or if you're in a
situation where it's feasible are you
going to use CSS 3 i'd say the answer is
pretty simple if you want to be able to
drink beer and be productive i think the
answer is clear so with that in mind the
graphics that i did today most of them
are in that project css3 graphics and
canvas and so on and so forth and how
are we doing on time okay so Kim a
couple more minutes and now I think this
is the
oh the quasi obligatory shameless plug
few of the books that I'm working on the
if you're interested in WebGL I highly
recommend Tony Parisi's book he's the
co-inventor of X 3d and vrml he's also
the court organizer of the WebGL group
in San Francisco and if you want to do
more about CSS I highly recommend
Vincent Hardy he's on the w3c
specification for css3 very sharp guy as
is Tony and also tab Atkins for CSS and
if you want to do phonegap Brian LaRue
we're sort of at a time I didn't mention
how to create the hybrid applications
I'm not sure or people interested in
finding out how to use phonegap real
brief yes no sure okay so here's what
you do to create those things this is
what i did with these examples create an
android application in eclipse or
android studio you go to three things
first there's this main.xml that's the
layout file it's actually called
activity underscore main these days
within your versions you got to replace
the default contents with a web view
which is like six lines that you can get
do a Google search it's the same code
just slam it in there that's step one
step two go to the generated java class
which is your main activity which
contains an on create method which
starts by invoking the super class and
then it gets a reference to that main
class and since it's a web view we're
sort of already on our way to what we
need to do after that you got to put in
like six eight lines of code again to a
google search it's all related to an
instance of a web view and you set some
parameters are kind of JavaScript ish
kind of things and at the bottom using
file protocol you specify an HTML page
which by convention and this is the
third step go to the top of your project
under the assets directory create a
triple w directory and put all your
stuff there HTML javascript
everything there's sort of a fourth step
if you need to get internet access
because you're you know going to a CDN
you need to give it internet permission
androidmanifest.xml but the coding part
those those are the three steps so then
you just run and deploy and you're done
so another point is that it doesn't just
have to be HTML you can specify an SVG
file which works for Android 4 or higher
pretty much all versions of iOS and so
why would you use phonegap what I've
described to you is sort of there's no
hardware access if you want to get
access to the camera and the
accelerometer and the gyroscope and all
of those sensors you need something like
that if you're not going to do it in
pure you know android or iOS you need
something like PhoneGap because it
provides a JavaScript bridge that gives
you the methods that access the hardware
functionality so what you can do it's
available on six platforms so Android
iOS Windows blackberry I don't remember
all over all of the different platforms
so you just install it and then in Iowa
and Xcode it shows up as an icon so you
just click on that you start your
project if you're in Android to pick
well one way it is commonly done from
the command line you run this shell
script it creates the project and then
in eclipse or Android studio you import
the project and then you know copy it in
and then that then you're done so that's
phonegap and I think that was sort of
the end yes it was anyway thank you very
much and I'll have another</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>