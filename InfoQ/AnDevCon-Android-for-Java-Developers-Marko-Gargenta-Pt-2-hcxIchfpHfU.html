<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>AnDevCon: Android for Java Developers - Marko Gargenta, Pt. 2 | Coder Coacher - Coaching Coders</title><meta content="AnDevCon: Android for Java Developers - Marko Gargenta, Pt. 2 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/InfoQ/">InfoQ</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>AnDevCon: Android for Java Developers - Marko Gargenta, Pt. 2</b></h2><h5 class="post__date">2011-03-08</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/hcxIchfpHfU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so we left it off with intense right so
intense is again something that's new to
android it's essentially a an event or
an action that that we're creating so
and intent is how you start an activity
how you start a service stop a service
send a broadcast any of those sorts of
things are intense so let me sort of
give you an example of how you would use
intense from a user standpoint just to
kind of give you an idea what it is so
this is a typical what we call a task
right so I get a read I open up my gmail
so by the way this box is correspond to
applications so this is one app this is
another app this is another app they're
totally separate their actual separate
Linux processes and so forth so I had
open up a gmail application and i am now
viewing a list of lists of my email
messages that I have right so this is my
activity this is one activity that I
have again an application can have
multiple activities right just like a
website we have multiple pages so
something people usually confuse those
two things the activities and
applications so i have one activity
called message list solista my messages
right and I see you sent me a message so
I say great I want to view that message
i click on it that click generates an
intent right that says open up this
message so it that gets handled by
another activity that's also part of
this application gmail right but it's a
different type of activity it's not
activity that actually displays the
message right so I can all view the
message so this was the intent that I
made from one activity to another within
the same app right now I see in the
message you said Oh check out this great
link right so i do that i click on
the link generating another intense
which now pops up a web browser totally
different application in a totally
different memory space right within that
new application we open up a new
activity called via web page activity
right so now I flip-flop to a third
screen when viewing that web page right
any that's web page there's the link it
says hey look there's you know there's a
great video that explains you know this
thing right so I click on that and that
now creates another intent and opens up
YouTube to view the video so what they
did is they basically created one intent
another intent and another intent right
to basically create it to jump from
screen to screen to screen to screen
right four strings in total across
multiple applications does that make
sense so that's essentially what an
intent is it's a it's a construct it's a
very high level messaging construct it
says let something happen let you know
start start an activity for instance
there's only a couple of ways you can
send a and intent it's sort of you can
say you know start an activity or
start/stop a service or send a broadcast
that's about it right there's a couple
of couple of approaches like that now a
couple of things some things that are
interesting about intense is that they
can be implicit or explicit and I think
this is sort of an important thing here
so an implicit event is when you spell
out who you want to handle this you say
I want such a such class like a Java
class to handle this action right and
that's the case what I did here so gmail
when it says when I said view a message
gmail said this is the specific internal
class that's capable viewing message to
start this internal class right so we
were quite implicit in that case so we
were quite explicit in that case right
spelling out what what we want to how we
want to handle that right now when I
said open up a web page right this
is more of an implicit intent we're
basically saying here's an action that
requires viewing in a web web page
anybody who's capable of doing that is
fair game right so basically multiple
apps get to vote and say I can do that I
can do that alright so this in turn
means that a user can replace any
application on the device and this is
something that's sort of new to android
interesting to enter it as opposed to
iPhone or any other me know ecosystem so
in Android the user can replace pretty
much any part of the system quite easily
right so all these things are sort of
loosely coupled and that makes it makes
it very powerful powerful from users
point of view right and it's very unique
on Android in other words you've got a
buzz word all apps are created equal
right so so this is sort of equivalent
to it does anybody still use Internet
Explorer so if you use Windows you get
internet explorer it that's your default
browser right but then at some point you
say I want to download another I wanna
download in a drug browser to download
Firefox Chrome Safari whatever that is
right and then what happens is the
system says okay you're not your default
browser would you like me to be right so
at that point Firefox or Safari or
Chrome become a default browser works
exactly the same way on Android so let
me just kind of show you there's an
application that ships with the SDK it's
part of the samples and it's actually a
replacement home application you know so
see this application here that's
actually a entire that's actually a home
application we just see why it's not
opening it let me do this I'm going to
delete this one for some reason it's not
seeing it so I'm going to add it from
samples if you have samples installed
you can do new Android project and you
can say I want to choose a project or
you get to pick a target so 2.2 you can
be saying I want to choose a project
from Sam
I'm going to choose the home right and
you're just like on finish you just
closed all this because it's not
relevant so at this point they have a
form application I'm going to run it
again it's very placements for this this
is the home app right so it's starting
it's installing it notice when the code
goes black by the way 10 seconds I just
take some time we can sorry home is
installed right it doesn't run it's not
a type of application that you press on
to run it's a different type of
application it gets started by this by
this little button here right so there's
a different type of intent that starts
home right so let me show you this I'm
going to press on this thing here and
since now I have multiple possible homes
in other words i have multiple possible
handlers for an event or intent the
system is saying which one would you
like to handle this rate so there's my
built-in home that's the one that comes
with default android of open source
version android and this is the sample
home right so this is the equivalent of
you downloading firefox for the first
time in saying i'm not a default browser
so i'm going to click on home to start
it to show you the sample home but at
the same time check out how long it's
going to take to start one two three
four five six seven eight about eight
seconds eight nine seconds I don't know
why it's not resizing properly but
that's a different story so this is a
different home screen home at right I
can you know I can go and find my apps
and get sort of stuff right and by the
way so that's how long it took to start
first time let's say now we go to the
young buck for instance let's say I want
to go back to home check out how long is
going to take now to start 12 it's much
quicker right right that's because
second time around we
with that we came from here back into
running as opposed to stop running doing
all this again right that's that's sort
of a visible example how cashing
stopping stop state actually it makes
things run faster okay so that's the so
in terms of the intent that's call you
that's that's the difference between
explicit intents and implicit intents
right in that's Carl intense basically
create a task and that's one of the
building blocks that you have available
to us any questions are intense so how
how manipulative are intense so intense
are simply the thing that you can do too
intense is you can attach a certain
amount of data so you can attach a
little bit of data but that day they
sort of very primitive so primitive on
name value pairs I kind of compare
intense to a URL like you know when when
you say dollar sign ID equals 47 you
know your url so yes you can pass some
data but not a lot and not very
structured under the name value pairs
but not if we it's not really designed
for a workflow per se right it's more of
a intent in action that you would like
to happen so it's not so much for
scripting sort of steps yeah it's not
yeah it's not a good not yet exactly so
well we're going to come to we're going
to see a couple of other building blogs
that you have at your disposal that are
better for sharing data in tents are not
designed for that another thing that
they kind of wanted to point out not
that it matters at this stage of our
conversation but in cancer asynchronous
so if you ever look at making sort of
remote procedure calls our pcs or IPC
inter-process communication using a IDL
sort of more I'm going to talk about
that tomorrow but but that's sort of
more of an advanced topic how you do
this process to process communication
across the boundaries
but you're doing it synchronously in
other words i'm making a call and i'm
waiting until that thing happens right
they say do something I'm not moving on
until you get your job done and then I
get the result in move on so that's more
of a blocking or synchronous call this
is asynchronous it's really fast you
just say let something happen and then
you know the caller keeps on moving on
does its job and then at some point that
something happens because it's left
somewhere to be done you know there's a
queue and a looper that processes that
yes yeah it's actually there's there's
something called a looper each thread
has a looper and the looper pics things
from a threat from our cue so there's a
queue of these messages so that's how it
happens internal so any other questions
intense yeah so the next thing that we
have is services this is another one of
those you know droid does from the
commercial as opposed to I am you know I
phone doesn't so you can have background
services so you can have things that are
running in the background right
essentially a service is just like an
activity it just doesn't have any UI it
just you can see right it's some work
that keeps happening in the background
one example of a service that i cut ur
cap that's kind of visual and people can
relate to would be a music player so if
i have a music player app so this entire
thing is my application right so if i
have an application like this of course
i need some kind of user interface so i
need to be able to pick a song press
play you know press next see the cover
art told it's going to stop right but i
also don't want to own the plane of the
music from the activity itself because
the activity could be wiped out at any
point in time right it's just needs more
memory and this is in the background
it's going to get destroyed so what I
would like to do is I would like to own
the plane all the music from from within
a service so service is going to be
started it's going to be running in the
background and it's going to have a mind
of its own it's going to keep on running
this guy can get wiped out gone destroy
no longer in memory this guy keeps on
crying right now when I say this guy is
gone from memory I don't mean the
application is destroyed I mean the
activity is destroyed so the activity
object is gone the application is this
is still running so we so it kind of
people get confused about that but
application is sort of like a
placeholder for all these different
components that we can throw into it and
they're kind of loosely coupled with in
so as long as you cap at least one of
these components still inside of the app
the app is going to be around in other
words the Linux process the dalvik
virtual machine they're going to be
around yeah activities according to you
I view I'm not sure about iphone so yeah
but roughly I mean you know from
physically so you know me I'm going to
turn this off I'm going to say don't ask
me again and use the standard but did so
so this is an activity you know if I go
and start my my Yamba this is an
activity right if I go to preferences
this is an activity so every single
screen is an activity so back to
services so service is basically just
something that runs in the background
service has a different life cycle than
a activity and it's much less managed by
the system so essentially service is
starting so it depends on create on
start and then it's in what we call the
running state right and that means
services or alive it's doing something
in the background until you say stop
service in you destroyed so the key here
is that you as a developer you get us to
send an intent saying starter service
stop the sirs unlike activity there's no
stopping activity right with a service
you can actually start in the connector
stop so you can a little bit more of a
control over that in the system is going
to interfere a little less
with what services the assumption is
that services are more of a lightweight
things right because they do not require
you I so presumably they don't do a lot
now granted it doesn't mean that it's
going to stop you from you know
downloading a whole bunch of data or
listening to GPS or anything expensive
like that from within a service as well
you can so you can write that code but
the assumption is that you know the
service does not have to do anything
massively expensive run in the
background yeah so far I've been talking
about unbound services these are the
services that you have the mind of its
own there's also a concept called a
bound service when you something binds
to a service remotely that's what I'm
going to talk about tomorrow that's
something that's a IDL or IPC mechanism
so inter-process communication so
different ball game altogether but so
the easiest one of them is the unbound
services and that's what we've been
talking about yeah so if the service is
doing the running and you start a second
service to run it again does it start a
separate thread all together it doesn't
think the service is already running the
service is starting on already reduced
and this is going to do nothing so in
other words let me rephrase that service
that there's two methods there's on
create a non start oh it's actually on
start command but own start has been
deprecated they renamed it but basically
if the service does exist at all in
memory all create Iran's number one
right if the service in on start runs
subsequently and then we say the
services in the running state now if you
say start a service that's already
started then all create is not gonna run
but on start well so in other words if
you wanted to do something every time it
started you can but you don't have to
but it's not going to create a separate
thread it's not going to create another
object or anything like that it's the
same object it's a single tone
essentially for for service in another
key thing that we're going to we're
going to be talking about this later on
but a service is actually running inside
of a saint red as the UI so everything
runs by default on the same thread which
has its own implications right so in
other words if you're doing like for
example one example the service is going
to be on polling data from from a
network on periodically like I'm going
to Twitter to see if I got new tweets
well the network could be slow or is
slow right so that means that blocking
when a network call may take 2 3 5 10
seconds 30 seconds timeout never happen
right in during that time our UI is not
going to be responsible so the user is
not going to be able to do anything for
half an hour half a minute while waiting
for the network really bad design right
that's where you get the application of
responding anr errors which what they're
going to talk about yeah yes you can
create a separate thread in there
multiple ways of doing that as well so
we'll talk about that yeah go ahead
service can yes service teams will now
be done with what it's doing another
thing that I wanted to just point out
that's a good point the fact that we say
running here it doesn't mean that it's
really doing a lot it could be just
loaded in memory and sitting idle very
long resources right similarly in acting
activity the fact that I said this is a
spa state in other words it's not
invisible the activity is not visible
doesn't mean that it's not doing
anything similarly the fact that it is
visible doesn't mean that it is doing
anything it could be sitting idle in
waiting for user input right
consequently it could be not visible but
actually doing a lot listening to GPS
downloading data and so on doing
processing expensive stuff so be mindful
of that in idea world you're not doing
expensive stuff when not in a background
and and so on because of you Kelly
if an activity started service activity
goes away right and the service is still
going to be running that's the case of
the music player so this guy is
disposable it's just our UI but we don't
want the music to stop playing yeah the
service is a single thing so so if this
guy comes back again so now it's alive
and it says stop or start service it's
talking to the very same service exactly
its uses the same service yes question
about yes so if you send it any intent
to a service yes it receives the intent
via one of the lifecycle methods such as
on start or specifically on Star Command
so just just like a activity a service
has you know onstar don't stop those
sorts of methods and the onstar command
takes the intent intent is the incoming
so you know the intent you can easily
get the intent that they've started it
yeah so you can gather data by in then
you can sue get get extras from them so
so far everyone killed on services so
this was the example of an unbound
service the service that has a mind of
its own this would be an example of a
bound service which we are going to talk
about I'm going to talk about tomorrow
the internals presentation but so this
is where we are using something called a
binder and we're using something called
a IDL to make something called into pc
call from one process to another right
that's call you let's call a lot of
system services work so for example
location manager sends to manage a Wi-Fi
manager telephony manager Bluetooth
manager collectivity management all
these managers ice net system services
work that way yeah but that's a
different ballgame so we're going to
talk about it more today we're going to
talk about this
bouncer is you will see an example of
that so moving on oops maneki that the
next component the next building blog
that we have something called a content
provider yeah question so in case you
have an application that only has
activities once the process is this once
the last activity is destroyed the
application the gazes throat is what is
correct yes that's correct so as long as
so if i can again if the concept of an
application so this is the application
so even though the activity is gone as
long as this guy is still alive the
application needs to exist we need the
Linux process we need a dalek virtual
machine in order to run this so a
question is basically what about memory
and all that so the system tends to
manage services hello les right because
it considers it's a lifestyle it
considers the service to be more of a
lightweight component and a user the
user can actually manage services by
going into menu so basically settings
application and you can go into your
applications setting and you can see the
running services and so the user can
actually kill the services so you can
see that i currently have young BOTS
service running it's consuming 5.9 megs
of ram and if i don't like it i can
click on up you know destroyed and
destroy it so is the sexual resources
here so yes so tipsy there's a there's a
process with one process one service
brian currently yes yeah so the the
process so everything runs inside of the
same process you know I think I think
sort of of application is sort of like a
pizza right so you have your pizza dough
right and then activities services
providers sort of receivers all these
main building blocks or just stopping
soon top of it right so you need the
pizza to be able to put the topping on
top it
as long as you have at least one topping
you require the go right so that's sort
of you know so even even though this guy
is gone as long as these guys around we
need the dough to hold it together we
need a process yeah yes yeah yeah it's
gonna it's going to it should gracefully
terminated yes so it's gone from here
and later on we'll see in the log but we
can actually monitor this we can see
what's going on in any other questions
yeah it is possible yes so you cannot
yes it is possible that the service gets
destroyed without on destroyer get me
being cold yes and yeah we can we
simulate that I can kill dodge nine the
process right just blow it away and in
you know yeah that's totally fine so
there's actually on terminating the
application which is there but for some
reason is documented that it never gets
old so there's this great method that
just is never being cold for some reason
yeah it is oh not calling on it so I
basically leave the memory leaks it's
possible it's I mean eventually the
garbage collector is going to clean all
that stuff up I'm not so concerned about
memory leaks as much as living resources
open such as the database connection so
those are those are more of a concerns
yeah so moving on to content providers
so this is another main building block
and basically what the content provider
is is a component of that that is
available to you that to share the data
so like we said earlier that in tents
are not a good way to share data made
more of a here's an action
thing content providers are more for
sharing data and they're basically an
interface okay that's one way to think
about it it's just basically an
interface that provides your basic crud
functionality creates retrieve update
and delete right or more specifically
insert update delete and query right so
the way I kind of do it like this so so
you can kind of see how it pierces so if
this is the the process sandbox right
this is our process sandbox our
application we are piercing that process
sandbox by exposing this for AP is
insert update delete em query right and
essentially that usually just proxies
down to the database so typically you
would back your content provider with
the database but that by no means that's
the only way to do it right your data
source could be anything it could be the
cloud or file system or you know
whatever but contact either is basically
a way to share data across applications
the system itself uses quantum providers
quite a bit examples of that would be
conflicts right media stores settings
and so on so let me just show you an
example first in the then it may make a
little more sense why you care so here
is I have two applications and this is
actually a real scenario this is how
your android phone behaves right now we
have two apps we have one app which is
the contacts app this is the one you
guys see and you go and see a look at
your contacts application this is the
one you actually see and it's called
contacts it's got one activity it's got
multiple activities but lets you know
for simplification purposes it's got an
activity to manage contacts this is the
visit of the UI but it's got no data
this app has zero data it does not
actually have a database whatsoever now
on the other hand there's a totally
other up totally different application
called contacts provider right so
separate app in a separate process with
a separate Linux ID everything totally
separate and it has all the data
but it has no UI ok so it's exposing its
data by Odo's for insert update delete
them query to anyone else right so what
we're essentially doing here is we're
lose the coupling or decoupling these
two apps as opposed to having one
contacts app with everything we're
separating this into the UI and the data
yeah it's not a service content provider
is a content provider right it's
confusing with a service because it's
not visible right and so I knew I often
get this so you guys are going to see so
not all the components are visible right
content provider is invisible process
right but it's used for sharing data
service is also an invisible process but
it's used for running some kind of code
right it's more of a you know go pull
tweets every once in a while ago pool
tweets every once in a while right
that's a service content provider is
insert tweet up query tweets right it's
more of a data sharing mechanism as
opposed to total running process metrics
but they're both invisible components
that capital sits among memory in the
background yeah qantas provider app does
that mean its own is running it's
actually it doesn't mean that it's
always running but it's going to be
running when it's needed so it's going
to pop up the process going to get
created it's going to serve its purpose
and it's important it's going to get
destroyed that's also done magically and
we don't really need to worry about it
too much yes I'm going to actually what
we're going to do so I'm keeping this
super simple lines and circles concepts
right get you guys to understand
concepts then I'm going to show you how
to assemble these concepts into a nap
the yamaha right we're going to actually
walk through the diagrams how to do this
then i'm going to show you the code
right but just that you know i'm showing
you the code is just going to kind of
like it's going to confuse you with just
intricacies of code you guys know job
that's not my concern right you know
that that's easy I'm trying to kind of
get the lines lysis circles clear first
and then we all get to the code
we're kind of doing very much top-down
sort of approach ok but so the main
thing here is that these are two
separate concepts or conquer apps with a
Chinese wall between them with only four
little calls poked in that wall for
Easter w delete and query ok and we're
loosely coupling components this way so
that they can get recombined in multiple
different ways right so that is content
provider yeah so the calls themselves or
synchronous here so it's get me the data
and I'm waiting for the data to come
back but it's synchronous because it
doesn't typically any I think you have
10 seconds to perform before anr pops up
application understanding but typically
it's a faster it's a faster call it is
synchronous and these are the things
this sort of thing as i said is using
the system a lot so for example if you
guys can like an HTC phone right you
probably have sense UI on top right so
as opposed to using the standard android
contacts app it's got a much sexier
address book right the reason why it's
possible to do something like that is
because they basically just replace this
they replace contacts app but it's
tapping into the same data source so you
can have multiple address books they're
going to have the same data right or if
you download the facebook app or if you
download the twitter app it's going to
tap into existing contacts so you miss
mashing all these different data sources
to create this like rich sort of
environment for example i mean take a
photo with my camera well that doesn't
go into the camera data it goes into the
media store so that my wallpaper is
aware of that so that my gmail can
upload it didn't share so that my
facebook can also share it and so on so
that's that's the example of that yeah
so the question is what kind of a call
this is I'm not sure I mean it isn't in
a process called but I don't think it's
handled the same way its standard IPC
aidl call it scandal so I'm not sure
exactly how that
these two apps don't have to be related
whatsoever I'll show you actually we're
going to delve into the file system and
i'll show you count the fastest in this
this relates that they're totally
different from each other and so on now
if you apps do have a way to control
permissions so i may say look i'm only
going to expose to guys who have a
certain permission and so on right but
but the protocol is open right just like
the protocol for me to access for
example bank of america website is open
its HTTP but the fact that that Comerica
is going to serve me data or not is is
really up to the business logic that's
implemented on their end so in other
words we can control the access to some
business logic via permissions if we
choose to put the protocol itself is
fairly open yeah is there such a kyoto
query for the question is about
acquiring for common providers there
isn't really a way to do that you access
content providers via content resolver
so you can think of a resolver as sort
of up as a something resolves it but you
basically pass a URI to resolve and
those are published for all the system
once and then you can create your own
okay we help yeah getting from one
pocket provider call and other content
provider absolutely yes so this gunk and
provider now it says okay you're calling
my query method rate so where am I going
to get the data well it could be as
simple as you know go to the database
right in which case this call becomes
almost a one-liner proxy if that's how I
choose to implement it or it could be
you know there's a cloud and I'm going
to do some fancy logic and go to the
cloud and get that so in other words do
a network call or I could do another you
know go to another content provider and
so on so let's go you know like even on
on android phones you sort of you know I
had a person into my contacts list but
suddenly the photo is from the Facebook
and it's got Twitter information it's
all sort of intertwined into this like
really rich sort of person centric
experience
of my people right that's that's because
of of this mashing of data that scared
it's possible content providers scale or
cal put that because they provide
sharing of the data yeah does this does
this reference need to be a separate
thread it could if you expect it's going
to take a while to get back saying
because this is a blocking calls if you
think it's going to take more than a
couple of seconds it should be on a
separate typically typically doesn't
because it is typically loading the data
from a database and typically this
database is relatively small because
they're just a cache image of something
that's in some other larger cloud
database but it depends on a nap yeah
the toilet zipper is up in this
particular case their supper
applications oh yeah you could cap yeah
you could have a content provider here
and you can have this guy talk to the
content provider it just content
provider needs to make you know it's
used when you want to expose data
outside okay outside of the world that's
actually a good point because as a
developer as an application developer I
find that you really care about writing
a content type okay because you're just
writing a rap you're actually leveraging
other people's counting for assisting
converge you rarely need to expose you
and data to dress the world unless
you're building like a suite of
applications or something like that
right but you typically don't care about
exposing today so you technically mostly
use an account for either other than
provide content yes if stood exactly so
if you're within the same application
there's really no reason or there could
you know whenever you want to add
decoupling there's a little cost to that
there's a there's a benefit of being
flexible to reorganize the components
but if it's your application your own
domain your own world there's really
maybe no reason for that extra level of
abstraction you know so maybe easier
just to go directly to the database
and call it a day so it just depends but
it is an important component because it
lets you tap into the wider set of
system available data so browsers
browser bookmarks all the media stuff
all the system settings all your
contacts everything is served by default
in the system content providers alright
so the final component that they have
and then we're done with the components
is a broadcast receiver so yet another
invisible component can see it so
broadcast receiver is basically a
published cry mechanism so it's a piece
of code and you say okay I have a piece
of code so that's my receiver right and
i say i want to register for certain
system event i intent right you say i
want to register for it and when that
something happens you get notified okay
so examples of intense could be the
system finished booting up as semester
right battery is running low you know
network is not available network is
available you know all sorts of things
like that our broadcasting broadcasted
in system all the time the system is a
very chatty place right so you may say I
want to listen for certain things and I
want to do something when that's on the
captain's right so so it's a
publish-subscribe mechanism so it's
different then then a service because
your code is not running this piece of
code here is dormant is just sitting
here doing nothing not even not even in
memory it just simply told somebody to
get a phone call when something happens
and it only gets woken up triggered when
that event I intent happens exams so so
that's basically what the broadcast
receiver is can you park yes you can
also broadcast your own intense yes so
you can just you can just broadcast your
intense as much as you want here so let
me let me show you now that we've done
we kind of looked at octane
it is intense services content providers
broadcast receivers let me show you how
that epic that yamba application would
sort of come together using this Lego
blocks that we have available to us so
and you know this is basically this is
what I wrote in my book this these are
you know the chapters 6 through 12 or
something so it's you know step step by
step so that's what it mirrors and and
by the way I keep men I keep mentioning
the book it's coming out this month but
if you want a free draft version so
that's going to be available later on
this one if you want to free version I
don't know how long it's going to be
available and again this is just a draft
it's learning dash android com and it's
that's going to forward you to some URL
that's much harder to remember than this
one it looks like looks like this so
your choice would function prefer but
what it's basically the entire book
before it got published this was the
o'reilly open feedback things so what we
are talking about we basically we've
talked about like chapter 24 and now
we're starting about i'm explaining
chapter 5 essentially and then we're
going to get to chapter 6 soda so that's
lovely what it mirrors if you're looking
for additional information just just so
you know so let me show you so first of
all why do they pick this this
application so when i was looking for a
lot of example based learning right like
you're building something in it that's
how you learn yeah your question yes so
broadcast receiver is yet another
component and just like anything else
it's a topping on top of a pizza so as
long as you you don't if you don't have
an application it needs to start up the
linux process it's a lot of Dalek on top
of it it's a lot of the content the
content the broadcast receiver execute
the code and then dismantle if it's not
needed anymore everything by default
captains are one single thread yes so it
so this
on the same fell as you you I and
everything else and you have about I
think 10 seconds to process it before
A&amp;amp;R so for back to yamba so basically
the couple of reasons for this
application is that it's something
everyone can get what twitter app is so
i don't have to explain too much the
features and so on but the main reason
what take this as a sample is because
there's a natural way of organically
growing it so we're doing small steps at
the time right and and it's all this
whole and complete so in other words
they can do a little bit show you how it
works and it's all incomplete doesn't do
a lot but it works right since it can
naturally grow and it's also an
application that in a sort of a natural
way touches on all these different
components i used to kept different apps
i used to get like a sudoku game golf
cart app and they tend to be more
focused on just one aspect of android
this one is sort of very comprehensive
so that's why I kind of like it as an
example at not not that I use Twitter or
anything like that man so the part 1 of
this this is what we're going to do
today we're going to basically build a
activity so we're going to build a UI so
this is a part of us one activity one
screen so we're going to talk a little
bit about you I because that tends to be
one of the things that you guys get the
most stuck on and in then we're going to
post to take da in a process the event
and we're going to post that to the
cloud and we're going to verify that
that works so and by the way I got the
network connection going so I can back
to Yamba just to kind of show you what
they have in mind this is essentially
what we're going to build so that
website that I told you cumin access
well there it is the young BOTS Maracana
com this last post is was ten hours to
gradually yeah so if i go here and I say
student which is double check this is
password oops okay and that the you are
and that we are pointing to to that API
okay so if i go back to two status
update hello from and great so this is
posting it's a tan technology so it says
it failed yeah I tried but but that's
yeah we're going to look at all so we're
going to debug this widefield so it's a
as part of it as a part of this
application actually it's meant to fail
as a couple of times but then we're
supposed to learn about the tools the
debugging tools and then fix that so
we're going to look into that so that's
the first part of that so in this
picture I only have one activity super
simple next what they do is I add
another activity because the reason the
reason why this is not sufficient is
because so far I car in this activity of
what card code my username and password
so it's not very useful so I need to
provide a way for user could change
username and passwords it's a good
reason to care of another activity but
this also introduces a whole bunch of
stuff it basically requires us to have a
way to go between the activities it also
be used in tents ready to jump back and
forth we also learn about the file
system and how to share the data between
the the two activities so there's
something called shared preferences and
how the content or the context is shared
between these two components okay so so
that's that's part 2 part 3 is we now
have a we now have a way to pose the
data to Twitter right but now we we want
to have a way to pull the data from
Twitter so what I propose in my design
was to basically have something that
works in a background service it's
always on always running in periodically
goes and says do you have new tweets if
you do
pull it down right so basically every so
often wakes up goes online pulls down
the tweets right so that's a service
that also introduces a concept of
application because in this point we are
applique ting some code for example how
to connect to Twitter we needed here but
we also needed here hmm that sounds like
copy pasting of code not a good idea
right so for that purpose we introduce a
concept of an application object so it's
something that actually is very useful
because you can share things for the
entire application so these components
are loosely coupled but they also live
in inside the same comp context which
gives him give that gives them some
privileges right so that's part 3 part 4
what we now do is once we have the data
in here we need to do something with
that they'd also introduced the database
so we actually learned how to work with
databases okay part 4 we now finally can
display that data so we can actually
show what people are doing what our
friends are doing by creating yet
another activity so we can have a you
know an application with three
activities a service and a database at
this point so you know it's got toppled
moving parts right we also in this case
introduce the base activity to share
some of the common functionality we also
leverage the application again to share
some of the things that are common to
the entire application and then we add a
little more complexity to it by saying
well you know what wouldn't be nice if
this update service that needs to be
always on always running was actually
starting at boot right automatically so
that I don't have to worry as a user to
go and say oh I need to start this and
start that that'd be kind of annoying
and useless rate so we introduced a boot
receiver which basically is registered
for notifications when the system is
bullied and it starts stop a service and
so this is a one line of code
essentially just BAM start service so
now that know that complex I also say
well what about if the network becomes
unavailable for example I'm flying right
I'm going across the country well I'm
not going to have not
connection for four or five hours so so
it'd be pointless to keep on trying to
fire up the radio in what is the battery
if the network is not available you know
that's if you can turn off your phone of
course but it wouldn't be nice if we
just said hey when the networking system
knows when the network is done when the
rhetoric is down tell us so we'll turn
off updates right and then when the
network is available we're automatically
going to turn back on the updates right
so that's that's what the network
receiver in this case do and then
there's also receiver here that has a
purpose just in the context of timeline
activity so that's another example that
so at this point we have quite a bit a
bit of stuff going on and ultimately
what I wanted to do is I want to
introduce content providers into this
big picture but I didn't really have a
need for it because like you guys said
earlier like I said earlier usually use
content provider you don't necessarily
provide content provider so if I'm using
a content provider there's no real
reason to use it within my own
application since you know it's much
easier just to go directly to the
database tray this is our database so
why would they need a content provider
sounds like extra you know work for
nothing so kind of thinking of what you
do about that in and I came up with a
good reason to need the content provider
and that's if I want to care a whit or
widget an app widget meaning something
for a home screen you don't talk about
the love wedges you click on a
homescreen well that's actually a
different running a different app
process altogether right that runs in a
different process in a film screening
process so for that to access data you
need to expose that data so here's
another natural yet logical reason to
actually use a content provider right so
that's why we now introduce a content
provider which in this case just uses
the data from the database and it shares
the data with the witch so that's kind
of called the progression of this app
right and the goal is though this was
more to kind of explain you know
architecture of an application right so
you know given goes
main building blocks this is how you may
put together an application right does
that kind of make sense at the level of
lines of circles right i mean like we
can you know i can i can show you alone
not if that you know that is is clear i
can kind of show you a little bit of you
know what the code may look like right
but but you know once you understand the
lines and circles the code it doesn't
get it's not that complex right at the
end of the day it's just java code right
so so just the kind of like for example
so this is yamba so remember that
manifest file well here's the manifest
file for that application manifest fall
is not really going to explode beyond
couple of pages you know for medium size
that it's you know you it's a place we
declare your main building blocks and as
you can see i'm mom saying we haven't so
this is my application number right
we're saying i got one activity called
timeline activity the fact that you
don't need to worry about what these
lines say but whoever has these lines is
going to be the home page the entry
point into the app right so if i move
this from one activity to another it
will make that activity be the entry
point make sense now like think of it as
all talking whatever you give it to
that's the entry point so I'm saying
here's another activity status activity
here's another activity preference
activity here's my updated service drone
it cranks in the background this is my
boot receiver and it's registered to
receive on boot complete right so as you
as you guys can see it's just a little
bit of xml code it's not really that big
ordeal and that's basically my
application and then i'm also specifying
couple of permissions here i'm saying i
need the permission for internet and to
know when the system is booted and to
write to external storage and and that
sort of stuff right that makes sense so
so that's that's that's what the
manifest file would look like
now you know if I look at the Java code
for instance like remember that booth
receiver that that yet it's going to get
notified here it's going to say good
receiver so when we win we get boot
completed we're subscribe this is how we
are subscribing for boot completed
notification right so when the boot
completed happens this guy gets woken up
so how does it get woken up well it's a
looks like this I mean it's really I
mean you don't be almost done even need
this really the only line of code that
is important here is this but basically
there's again a callback method it's not
on create but it's on receive so all
these main building blocks sort of they
know almost don't worry about too much
about the intricacies of the code so
there's certain patterns that are repeat
themselves so remember to write an
activity you start by subclassing in
activity to write an accountant boot
receiver broadcast receiver you extend
the system received right and then you
implement on receive the same for
service to create a service you extend
system service and then you fill in the
blanks right so in this case this is the
blanks that we're filling in right it
doesn't really matter what the details
are but essentially all it says is you
know start a service in case that we
that we need to start a service yeah
yeah yeah so the super of Omri save is
not is not needed in services and
activities you must go super but in
receivers and the providers you don't
need to call super and it kind of has to
do with see there's something called app
context so which is basically the
context of your entire application so
this is my entire application this is my
you know pizza and everything else is a
topping right
so this is my appt context to get every
component can get a candle of the
context quite easily and as a matter of
fact activities and services are context
in other words they're subclasses of it
right so you know they inherit
everything but providers in receivers
they they don't but they have it readily
available so it's a is a as opposed to
help exok as opposed to iza yeah so
something so something is going to send
the system is going to broadcast good
completed in this guy because it's
registered it's going to get that
notification something is going to
broadcast network up network down and
this guy's going to get a notification
for that reason so um so so yeah so
basically what happens is a notification
isn't intense so in 10 gets broadcasted
there's something that then handles that
intent right so something basically
takes it in 10th it says oh here's
anything that says food is completed
right and it handles it by saying okay
who do we who do we need to notify that
boot is completed so there's a short
list of people right one of them is our
own boot receiver there could be other
people who are not in components that
are interesting that so we're on that
list so it says okay we're going to call
the receiver the way you call the
receiver is by calling its own receive
method so the only entry point into a
receiver is on receive just yes so it is
no there's no such thing as a
notification if you're thinking about
the notification with the capital n that
is just basically that's a UI component
that's more about this kind of thing
that's what goes into the drawer that
there's there's a notification that goes
into this drawer but that is a different
thing that it's not related to this yeah
that that is a second sort of a UI
thingy that pop something up into the
drawer if an application and process the
same thing well they're not
the same thing but you need a process in
which the application is running right
so there's you know application with the
capital a right there's an object called
application so that gives you certain
capability know certain capabilities and
that's something that every component in
your app has access to so that we in
this case I have the context but they
also have an application object which is
readily available to around so I use
this to hang off any you can golf of any
data that I may want to share like
shared components but all this is
running inside the same process right
the same Linux process you could have
you could have multiple applications
running inside of the same Linux process
so it's not necessarily one-to-one
relationship it's rare but it's possible
they would have to use it or share
context yeah what are they on it should
have been issued it should have been a
there should have been this HTTP Yampa
Maracana calm / AP i-- so that's where
the API is for it so yeah what we'll
we'll figure out what's going on with
this sometimes sometimes when I'm behind
the proxy the emulator needs a special
settings but I don't know if that's the
case in this case we'll find out not too
concerned about it any any other
questions own sort of the design of a
nap what that looks like so a lot
devices trickles huh it's busy okay so
so with that let's let me let's talk a
little bit about user interface and kind
of discuss certain things there because
that's that's one aspect of you know
just like I showed you guys like in the
code
like you you know this is plain old java
so you would understand a lot of things
here yes there are certain Android API
is that you can tap into but a lot of
this stuff is a plain old java like for
example if i'm starting a service
updater service right you know you know
a lot of these things so just like for
example here this is my thread that's
running the updates well this is more or
less plane or plain old java right so
I'm not too concerned about those things
once you understand how they fit
together it becomes like okay just
here's your place holder filling the
blanks type of thing but but you I is
one thing that we took sort of a
departure from standard Java by yanking
out a WT in swing and replacing you
something else so that's kind of what I
want to talk about next so so to do that
let me here's what I'm going to do I'm
going to actually start we're going to
create a new young application so that
they have a place to actually show you
all this stuff so I'm going to do fall
new Android project i'll say yum the
demo for example i'm going to pick an
api a target for example 2.2 doesn't
really matter and then I'm going to say
application is demo demo package name
calm more example activity I'll start
with this so basically what i'm going to
do is I'm going to start this first part
here which is creating this status
activity this is the piece of screen
where you type in something you say
hello from click on update close to your
Twitter account that's that's what we're
going to do it it's Paul and complained
it's all contained it's small enough and
manageable and we can see it working by
logging into the website so so I'm going
to start by creating with that activity
so here's my activity status
minium sdk version doesn't really matter
okay so that creates a new project here
all together so that's my new project
we're back at square at hello world
right so what we have so far is gay
little world now so now we have a
placeholder to do something so let me
let me start by talking about a little
bit what you I so you can kind of see
what what we're doing here so there are
a couple of ways of doing you I in
android there are basically two ways one
way is to do it decorative so you can
declare your UI in something like XML
right so you write xml code the other
way is to write procedurally so in other
words you are writing Java right and
it's very similar to writing aw to your
swing coat okay similar constructs maybe
different API so the best practice is to
basically start here start with XML get
it as far as you possibly can right and
that's at some point switch over to 22
job right so XML tends to be a really
good way to describe your UI right java
tends to be a really good way to attach
business logic to your UI to say so you
hear you say well the UI looks like hear
you say what the UI does ok so make
sense so we're going to start in this is
pretty common we're going to start with
the XML so I'm going to open up that
page that resource which is layout main
in this case you may want to rename me
into something something else as a
matter of fact let me do this so what
I'm going to do is I'm going to rename
just to demonstrate something i'm going
to rename this file to to something else
such as status because main is going to
doesn't really tell me the story it's a
status layout for my status
tivity screen I'm going to change the
name so in Eclipse you don't care about
a name you have refactoring name and
that's supposed to do as you know
intelligently rename all the references
and all that so i'm going to change this
simply remain xml 22 status xml but you
just broke everything right so some
things that you expect to do if you if
you use eclipse for java development and
you expect some things to works in a way
you may be may disappoint you some point
20 times so in this case what happen is
remember how I said this this file our
right is automatically automatically
created whenever anything in resources
changes right and then this guy is using
our to get to this right so since we
changed this are automatically changed
but this did not okay so that's why now
this is broken so and more specifically
our reference to our layout may no
longer exist because it's a new are with
the new it got compiled and so forth so
you could do dot but at least Eclipse
knows what what's available so you just
fix it quick little steps in save it
keep saving your files it's a very
important thing so so that's that's
basically the that's going to be our
activity but we're going to leave Java
second I'm going to focus on this first
okay so this is my little screen and
some of you said and by the way this is
all so new but see how the widgets that
I get here are different depending on a
version of tools that they set here so
if I roll back 2 3 2 1 going to hear a
slightly different look and feel so keep
that in mind because they change the
widget's bottom gingerbread and
honeycomb so they look different okay
another thing
in that you can configure it here is you
can configure the size of the screen so
see for example the big black box that i
have here is now in portrait mode I can
say landscape mode and that's supposed
to switch this to landscape but it's not
yeah that's fine and also here I'm
supposed to be able to change the size
of a screen oh I see it's not got it how
can so thank you that I was on the
depression that there we go so I can
basically change this and so on and make
this appear as if it's you know specific
device now I don't really care about
this too much because the way we're
going to DUI is that were totally
agnostic to the actual devices right and
that's how you should think about you I
that's you know when people talk about
the fragmentation of Android means
different things to different people but
one of the things that we have so many
different devices in terms of their
capabilities so they have different
screen sizes screen shapes screen
densities etc right so I want to build
an app that's going to look great on
panel you know HTC tattoo maybe and as
well it's going to look great on my
google TV at home right so you want to
basically going to scale up and down
properly that's that's our goal let's go
up we want to design things so that that
way we don't really care what it's
getting deployed on its going to look at
so usually when I work on a UI I like to
set things up sort of that I open up my
properties window here and I also open
up my my outline here on the program on
the show view and I like to get my
outline here as well and I use
and lay them out like this so that they
have this it takes so little get to
death and another thing that I'm going
to do is I'm going to change the team
here from Team light since it is black
on white as opposed to white on black
the reason why I'm doing this is for you
guys in the back you know you can see
much this much better it because of the
contours of the projector this is not
going to reflect in the running code yet
there's another change that they need to
do for the running application but at
least for the development it helps us
for now right for the third for if I
want to actually make this change in the
running code I actually have to do it
here and don't worry about what it is
right now because style theme light so
Android stels team light so that should
now reflect it in a running application
so I've did that in a manifest file
don't worry about that too much but
that's basically i'm applying a theme or
a stylesheet to my entire app and the
only reason I'm doing this is because of
the projector issues with a contrast ok
so let's let's do this step up step by
step so we're going to build we want to
build a UI that may change the this to
look like this and let me go back one
screen so so once in a while it doesn't
it doesn't it doesn't rotate properly
thats the emulator never mind so let's
just keep it like this this is the UI
that I want to build so how many
components which components do you see
on the screen and how many components do
you see on the screen you can see you
can see the outline so did we see the
mother of all we see the big box that
represents our application right so that
is one component ok what else you see
the button we see the button ok so
there's a button there ok we see that
there's a label here piece of text
excuse my scribing here and we see
another component here which is where we
enter enter text rate so we see so one
two three flora components in total
right this is not the world's simplest
you I but it's very close to the world
simplest you i right so it's very very
minimalistic so you want to build this
so I usually lay this out in stages
first I throw all the components into my
screen then to that's pass one pass to
usage as their size past three is adjust
their properties and so on so I kind of
do this in like multiple passes through
the UI so what we're going to do is in
here I'm going to go and I'm going to
find these widgets and they're gazillion
widgets here right so as you can see
already have the layout the mother of
all right that's this big box here okay
but I don't have the piece of text which
is also known as the text view which is
the missive yeah oh I do have a piece of
Texas right here well we can keep that
as a piece of text so the next thing
that I would need is the edit text which
is the text that you can add it so I'm
going to drop that in here so that's my
second component and then the third
component the hair is a button so I'm
going to just drag it in and I'm going
to drop it so you can kind of verify
hearing the outline that you do have
four components I hit the mother of all
and then it's got three things inside of
it right make sense so for those of you
who have experience with that ability in
swing this sort of corresponds to
corresponds to the so this is sort of
the hierarchy of corresponds to the
containers and components it's a very
same model right so layouts are what we
would in Java would call containers but
containers are components it's a
composite pattern right and then
anything in Java that you can put
anywhere on the screen is a component
and in android we call them widgets or
views okay but widgets not to be
completed not to be confused
which that yet go into the home screen
nothing in common right so totally
separate thing so they're technically
widgets but they also all called years
so you know your dicks that's why it's
added to you text to you except it's not
buttoned view it's just button and it's
not add attack well it's actually not
that if you edit text so there's some
some inconsistency in terms of naming
right for those those components but
that's what old view is it's basically a
component so you can verify here that I
have you know the mother of all and
three kids now inside it now if I want
to adjust one of these so first thing
that every single component if you look
if you select it and click on properties
you're going to cab gazillion properties
here okay and eclipsed by the way it
happens to be probably a better
documentation than or anything else for
what what is what property that's right
so so for example if I you know if you
put a mouse over specific property it
tells you what what property is now
there keep that out of all these things
there are certain properties that are
more important than than others and for
some reason that slide is not here so
let me just pick it up from Sony home a
second you see I have a slide basically
it tells you what those properties are
and it is just for a second all right
here we go so these are sort of the more
important properties in a landslide zone
or them went missing the only two slides
of the missing but basically the the two
properties that you universally always
care about our layout within layout
height that's it how I then how tall
all your widget is right you always need
to specify this okay so let's take a
look at that so for the button those two
properties would be at the bottom right
so yeah the other miss and sometimes
it's hidden here so be mindful of that
so misc may be collapsed so you might
want to open it up so but they're
they're right here and lay out where the
layout I'd are are basically the height
and weight so for example for with if I
wanted this to stretch all the way I
could specify something like 200 pixels
that's kind of off so let's do 300
pixels and that's still off so at some
point you would get it right but this is
not the right way of doing it the couple
of reasons for that so let me first of
all talk about units so these are the
units that we have in android pixels you
guys know pixels inches some of you know
millimeters points so these are the two
these are the new units that we have an
Android again DP and dip is basically
the same unit and it stands for density
independent pixel so it's basically a
pixel that at condo 60 DPI one pixel
equals 1 DP so in other words in other
words don't use PX ever again just use
DP and you're good there's absolutely no
reason to use pixels again right because
they're useless since the screen
resolution not the resolution but
density changes so just replace PX with
DP and you're you're good to go so you
can you get the artifact if you dream
stuff it's based on pixel I'm I would be
based on our well yeah you could because
there's a rounding right possibly
there's a potential rounding errors
that's so you could get a panel you know
one pixel off depending on grounding but
you could also do everything based on DP
if you're doing absolutes
can you do it throughout intro screen
size yes we'll do that but we're going
to do that using were tan hi Phil parent
web content on SP is like DP but Tony's
for scalable fonts if you want the phone
that actually adjust the size compared
to to to you know use a choice so for
example i may say let it fund be 30 DP
but if user wants to scale it up because
user can't see user can say i want
everything extra-large the current EPA
3sp may actually translate into 45 PP or
something right so on in other words one
better here would be to as opposed to
click on a deep PX i use DP okay but
that's still not smart enough because
now it's not going to scale its if i run
this app on my google TV it's going to
be a title button in a top left corner
right then i have a big screen TV right
so not what you want so what you want to
use for layer to it and layered aight is
one of these two things and I say to
butter you can see three so basically
there's Phil parent match parent in web
content so Phil paramesh parent is the
same thing match parent is the new
version of Phil can't so so that's
that's what it is on but basically what
they're saying modi's component these
statements are saying is wrap content
says make the button as wide as it takes
to wrap its own content in other words
the button is going to take as much
space as it needs to wrap its own
internal contacts into internal content
here ok plus we know some some padding
in all that stuff but that's not that
important right now ok so that's one
possible option the second possible
option is to specify fill parent or
match parent again same thing which does
take all the available space right so
it's taking all the available space
that's available on this so this is now
this is now going to scale properly like
for example if I let me
I rotate my screen so I'm going to go
from portrait to landscape and see how
the button again fill the entire screen
right make sense so that's so i got my
button right i mean i could do the same
thing for height grab content or fail
pair and parent them now i have a
gigantic button right so so you guys get
at those two properties feel parent trap
content that's what you want you want to
exclusively use those to pretty much for
all your weight and height and width the
height is which you always universally
care about okay they do not change them
on the new version of the android
developer tools actually has these
little buttons here so you can kind of
press this and kind of do that okay but
again the tools are nice but if you
start doing anything tiny bit more
sophisticated you run into limitations
of these tools so that's what I kind of
I'd rather you guys understand the XML
right it's kind of like teaching you
HTML yes you can build a website using
Dreamweaver but you can't really do
anything serious with Dreamweaver right
so at some point you gotta understand
the XML or D HTML in that case right so
that's why you know I'm kind of using
maybe the longer approach here alright
so let's look at the next component the
next opponent is this guy here so how
much space do we want so it's already
feel parent for wealth right so how much
space do we want for height so my
choices are filled parent match parent
feel mad much paint or wrap content so
right now it's tiny I would like it to
be big so we'll just feel parent or
metric ramp it then so here's what
happens so what the app so what happened
wasn't look up to my button the button
is gone right so the button is actually
at this point here below it got pushed
out right it's still there but you can
see
get pushed out so here's what happens so
we're using a layout layout unlike
unlike Java in Java you get a container
and that is you applied a manager on top
of that container right in that that
manager had a policy how to play
components in android container and
manager you want right so you just have
a layout a layout is both a container
and it also has a certain policy to it
so in this particular case we using
something called the layout linear
layout which looks like this so
basically it either lays components next
to each other so that would be you know
one two three four so in other words
left to right or top to bottom one two
three four it's pretty straightforward
one of the simplest layout managers
right so that's a linear layout so in
this case I have a linear layout and I'm
saying layout these three children right
so linear layout says okay text how much
space do you need let's talk about ho
chi twice only rate such as web content
all right web content that much real
estate gone comes to a second child and
says how much space do you need in this
guy says I want to take all the
available space right so this child
basically took all the available space
from the parent right so by the time the
third kid comes along there's no more
space left right kind of stops being the
youngest kid I knew that so so so that's
that's what happens so in other word
order matters in this case so what do we
do right god how do we how do we fix
that I mean I could now say well what
about going into you know going into
pixels and DPS and all that but that's
really not a good solution that's a hack
right so the good solution is to
basically use a third property that we
have here on the list of important
properties which is called layout weight
and layout weight is sort of the easiest
way to explain it is years you're saying
how pretty you are as a component so
zero means I don't care about anyone
elses needs one means i'm totally
yielding to everyone else right now and
it could be anywhere in the middle so
that's kind of car you can cap
components fight for space one can say
sixty percent one can take sixty percent
a 140 and so on right so you can be
flexible in dynamic at the same time
right so it's kind of like setting up
the springs on components so in this
case what I can do for this edit text is
I can say oops i can say layout wait one
meaning adhere to anyone else's needs so
we're still saying daddy daddy I want
all the space right but we're also
saying a most we're going to be mindful
of younger children as well younger
siblings as well right in there now we
have a UI that is reasonably good
representation of what we wanted to
accomplish the piece of text big box
button at the bottom right so it's
pretty standard so there's piece of text
big box button button button at the
bottom yeah ah no it doesn't it doesn't
have to like for example if the button
if the button also said feel parent so
for height itself ill parent but it said
so now button pushed all the previous
kid right but now it says one now there
5050 right now if button says yeah
adhered to others but then we'll more
greedy than others now button is
actually squeezing the other guy out so
it's got weight of half in this guy's a
weight of one so this one is yielding
more than this guy so that's it's
currently it's going to be inversely
proportional to two percentage that it
takes because you're specifying a yield
as opposed to essentially the how much
you take so that's that's sort of how
that works yeah
yes it can only be a number between zero
yeah yeah integers are overloaded in
android so that's another thing we'll
talk about in the world of job
everything is an object right in the
world of Android a lot of objects are
just basically ends so an integer means
many different things so hype safety is
sort of broken right in the interest is
in exchange for speed i presume so we'll
talk about them um so now that we have
that reasonably well laid out the
another thing that you want to mention
is gravity in layout gravity so I want
to send to this piece of text ok so the
word for alignment is is gravity now if
you look through this gazillion
properties you're going to find two
gravities you're going to find layout
gravity and gravity they do different
things so layout gravity specifies how
to lay out this box ok within its parent
ok so if i want to lay it out Center it
laying out this box within its parent
it's not really going to do much
centering it because it's already so big
that moving it to a center want you can
see it right there is no margin rate
versus gravity which basically says how
to lay out the content of the box within
the box itself which is what we want
alright so that's in different in other
words if one doesn't work use the other
one right but they do different things
so in this case it's gravity and you can
just click on center for example and
that's going to Center it so that's my
piece of tech skills right and so now we
have that looking reasonably good ok so
now the third pass that I want to do is
on it I want to fix the text i want to
change all this text i don't like this
hello world city Kalos status activity
business there right I mean I want to
say update status or something so you
know one of the properties that's
important is a property called text so I
can go find it right then I can change
it I can say update update status to
this right ok that worked but this is
not the right way to do it so the right
so this will work it will work only when
you when it comes to it will work to
certain extent because it's not a
certain certain market certain places
are enforcing that you do these things
properly so you might as well start it
improperly from together the proper way
to do it is just like we separated java
from resources ok we also want to
separate resources from resources so in
other words specific resources are
separate from other resources so this
research that I'm working on status is a
layout right it lives in layouts folder
in it is concerned with the layout of
the screen that's it that's its job
that's its only concern so it's not
concerned with text so what we should do
in this case is we should actually refer
to a piece of text in stein in the text
area which is strings.xml right so the
proper way of doing it would be to refer
to that in the way we do that is by
saying so who's my text property so for
text you would say at string / so let's
drink means go look at the strings.xml
this is how you refer to an XML file
from XML file as opposed to from Java
remember from Java used r dot 34 right
the arc loss but from XML we don't we
use add string / and then the name of
that particular string so I could for
example open up my strings.xml and see
what's available and
something called app name and it ready
has the value yamba them in other words
it looks like that right apt name
younger then so I could now go here and
I could click click on this and you
could say add string / apt underscore
name BAM yeah number them and it's
misspelled in all that trade so I can go
here I can now fix this yamba get saved
remember important and now that reflects
here as well right so so this this is a
this is one way of doing it and you can
see how as you're doing a lot of this
piece of tags this in really quickly get
really annoying if you get to do this in
every single piece of text so it Clips
actually provide some useful shortcuts
here so for example if I want to create
a new piece of text yes I could go here
and create it and then refer to it and
type it and hope look for no typos and
so on or I can actually use the load
button which by the way still doesn't
work in you burn too and some other
platforms for some reason you can click
on new string you can quickly specify
you get this great new android string
property I can specify the string name
so for example this would be titled for
the update status right and I'll say
update status so that's my piece of text
right I'll explain this stuff later on
and that injects a new string into
strings.xml it's right there and I'll
just pick it and that is added and it's
referred to properly so the dot 0 dot
there's old auto button I think it's a
shortcut from Brock for browse or
something right see that so that way you
do not have to get this file open again
strings.xml right it just Eclipse
adjusts it magical yeah
so how do we account for what help
that's a great question and we should
let me let me show you than that and
then we're going to do lunch so the
purpose of doing separating strings from
layouts is that you can have multiple
competing sets of resources in other
words you don't have to have one layout
for this screen you can get five or ten
right depending on what kind of
screening on a target you also don't
have to have one set of texts you can
have multiple sets of text for multiple
languages so let's say for example I
wanted to create a version of my
application for a different language so
I would create a new xml file now I
clicks provides a useful tool called new
android xml file and it comes up with
this dialog box and it knows that it's a
yamba danwon 06 strings.xml and it says
well this poverty exists but what I can
do now is they can say I want to specify
one of the qualifiers and these are the
various things you can qualify your
resources based on right and they not
all they make sense in all situations
like for text language does make sense
so I'm going to say language is one of
the qualifiers and then you enter the
two-letter iso code of the language of
targeting so say for example i'm
targeting French right so I do fr and
notice what happened all this all that
happens is if clips creates a new folder
called values dash fr instead of just
values that we currently have currently
we have resources values it's proposing
to create a new folder resources values
fr right if i add more stuff like for
example i say how about the wanna it's
not just french but that won't French
for Canada because you know they speak
differently there than in France great
so so right now notice that the
directory is now values dash F ardÃ¨che
r-ca right and you can go crazy with as
you can
specify what can be seen a night more
than a specific kind of pixel density
touchscreen keyboard available not
available yeah data but it may not make
sense for strings for Strings this does
make sense right but you can also create
alternative resources for screens where
the common one would be I want to
provide the layout for landscape mode or
I want to provide the layout for Google
TV and so on yeah so that's how you
would do that and then the system based
on the current configuration will figure
out with the best fit is right and if
it's not available it would go to the
default version yeah yeah so yes the
question is do you have to provide all
the copies of the strings no you're done
so basically it says oh I noticed that
the user is in French Canada let's see
if it's available if it's not it's going
to go to the default but if I was in
France it wouldn't even use the French
candidate who just use the default so in
other words tries to find the best match
yeah alright so let's do I know it's
noon I know you guys want to get your
your lunch before everyone else so let's
do and I think it's 130 is when we start
again right okay and then we're going to
continue with this this the fun stuff is
just starting up so</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>