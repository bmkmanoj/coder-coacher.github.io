<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>The Stairway to Pleasantville: Logic Programming in Scala - NE Scala 2016 | Coder Coacher - Coaching Coders</title><meta content="The Stairway to Pleasantville: Logic Programming in Scala - NE Scala 2016 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/InfoQ/">InfoQ</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>The Stairway to Pleasantville: Logic Programming in Scala - NE Scala 2016</b></h2><h5 class="post__date">2016-04-15</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/SPz4MJZD2Gw" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">my name is Stuart Stuart and I'm from
San Francisco I work for a company
called driver where we do genomic
sequencing of of tumors and do analysis
on that my talk today is on logic
programming in Scala and a little bit of
history so this is all based on mini can
run which if you haven't heard of it
it's a it's a logic programming dsl
written by a volume bird it's it's
embedded in scheme the nice thing about
it is it has a it has a small purely
functional core so it's very easy to
take and just poured over two different
languages and there are there are many
parts of it and there if you look on
github you can find three other ports in
Scala so um specifically I learned this
from the book the reason schemer and my
implementation is based on the paper by
Jason hemen on micro cannon which is an
even smaller core great so what is what
is this exactly so what is a will do i
mean when i say relational programming
or logic programming and so a relation
if i could look let me get that out all
right so a relation what we're a
function might have you know a couple of
inputs and and some output like say say
cons or let us okay so here i'm defining
an XY and Z and if you're the cons X if
your accounts one onto the list to three
then you'd get that result there is e so
a relation is is very similar except
that instead of two inputs in one and
one output you have just three different
inputs and all it says is that those two
are related by mighty cons exon 2 y then
you get so that you get the results Z so
we can we can run that and run here i'll
let you know more later but that
basically does that searches for
solutions
oh so konso is my relational version of
that same thing okay and there there are
there are results great so I'm going to
go on and go straight into the basic so
you don't have you don't have too much
time to Dora to run through so uh here
here's a here's our most basic go
constructor it basically says that our
variable Q is the same as three so if
you run that and get all the possible
results it says okay three is a possible
result for Q here we have we have a
disjunction we have either Q equals 3 or
Q equals 4 and result as you might
expect here Q equals 3 and cubicles 4q
cannot equal both those so as you might
expect the stream of results will be
empty and we have a we have a shorthand
for that we could just fail here is a is
a goal that always fails and similarly
we have succeed which is a goal that
always succeeds so here these things are
all goals and I'm just composing them in
various ways so you'll see a a new thing
here when I want to see there there is
this that's underscore 0 and what that
is is a is a placeholder for for my for
my variable Q which is unbound so if
this dream is returning all possible
results that you know all possible
values of Q that that satisfy this go
succeed then then Q could be any value
which is why which is why it stays
unbound and you get that underscore 0 so
you know you could have many more
and there we have five different unbound
variables and no matter what value they
had you know this is the school would
succeed great so going just a little bit
more over you had that okay um this one
here all is just a conjunction so it it
returns goals if all of those all of
them calls on that all the states such
that those three goals hold so here we
are relating s to T and as we see so s
and T here are related you see our
originals yeah these are let me go to
something simpler to it all right so
give an IQ and on our if we say Q equals
R
sorry oh yes thanks great yeah so there
qrr are bound to the same variable and
you can see that one when the reified
and you know otherwise they would have
just been distinct so I can try a quick
example of how to how to use that so
here's a here's a regular append you
have here your list a B it's written a
little bit differently than you might
normally want to but that's because I'm
going to translate that here so we have
so we have any of a couple cases so the
first case here is that our first list
is empty so on if if it's empty then
it's also true that let's be is empty so
all right and the other case we have we
have a we've introduced temporary
valuable variables here asn Rex i'm
going to introduce those so there exists
logic variables a.a.s and wreak such
that all of the following cases hold so
we have a constant a AS IS la the
recursive case we have a pen dobe and
we're going to relate so if to pursue
case and then we have our output is a
Const onto the recursive case so con so
a person case is our output great and we
can test that out I'll just
okay so we can append one on two and
uh
alright and I'm just like it out of
there
all right in
all the list of sorry and oh yeah sorry
there we go I i was doing cons for some
reason all right I'm i penned a list of
one great so that that's interesting but
um this is a relation so we don't have
to have our queue as yep but we can put
Q here in the beginning and our result
can be one two three and it will solve q
to be the list of one um that would help
me earlier so and and we can do anymore
think so we could have QR to whoops
outside and this this gives you all
possible and different solutions for for
that um and we have generally we could
just
and here this gives you the shape of all
possible and all possible solutions so
here you have a list of you know for
logic variables and some arbitrary other
large variable and it consists those
four on to that which could be an it
could be some other list but we just
don't know what it is yet okay um how
much more time do I have I should have
just enough five more minutes everything
goes as timed so here i have an example
problem so we have we have a case here
this is from sick p if you recognize it
and we have Marianne's amorous father
has a bunch of friends and they all have
daughters and they all they all have
boats and they've named their daughters
after the friends is boats and they give
you some clues here and yes figure out
who who owns what boats and specifically
they're asking who is born his father so
the nice thing about this is that you
can just read this kind of straight off
one by one end and it's very declarative
and it if you were to solve this
normally you might you know you might
boot force overall if an end them and
just filter for the cases but the search
threat but that's not quite as efficient
as doing it this way and and this one
abstracts your search strategy out so
i'll go ahead and start for that so we
have I have two little helper functions
here so I daughters and fathers is
modeled as a list of them as a list of
names and as our daughters and yachts
and I have that a
a father and daughter are related if if
the father and daughter stainless a
share the same precision a list so Mary
might be the first element list and and
then that means she is more more static
s'mores first here so we were looking
for Laura's father it already knows that
there are five different possibilities
if it were Parker's daughter Lorna would
be in the fifth position and we don't
want no it's what's what the rest is
there so so let's let's just start
reading the problem ran Moore's father
so okay has a yacht in Egypt and and so
does each of its four friends so
ok
and they all have daughters so now at
this point we see okay now at least
knows that the lists only have five
elements and we know some things about
those and we have a few possible
candidates let's go on so each of the
five is as has named his yeah at one of
the daughters so let's permute oh yeah
it's daughters hope and now we have many
more possibilities coming up let's just
keep keep reading through that so we
have mr. Moore ansa Lorna so owns more
Lorna
and how old on the roseland melissa is
owned by Colonel downing the learn
Alyssa which also happens to be
barnacles daughter so barnacle there we
go and now this next one is a little bit
more complicated so Gabriel's father
owns the app that's owned by Parker's
daughter so we have a mysterious
Gabriel's father and Parker's daughter
and what we know about those Southsiders
capitals father Gabriel of course
hopefully and I'm hope Parker Parker's
daughter and those two are related and
that let's see careplus father owns the
boat named after Parker solder great so
let me um actually fix that look like
type check great
cool and at this point we only have four
possibilities that doesn't seem quite
right because I think we've exhausted
all of these are one of the yachts which
one is that so barnacle oh great so
barnacle owns the Gabriella 0 comma
there we go and downing the father great
so yeah you can see that was a very easy
a translate um didn't have to do any
search strategy and it's it's what 12 13
14 lines of you know very declarative
code so it's it's very complementary and
kind of fits fits into scala this is a
lot easier for someone who's already in
functional programming to to translate
you know as you saw with the Pendle it's
very easy to translate functions into
into relations however that is great so
I'm I'm out of time I think I will leave
you some resources there is a raisin
schemer this is and there are various
other implementations and I don't think
there are 0 there is a lot of work to be
done on this um you know this equality
constraints finite domains and so forth
types if you if you're watching closely
you'll notice it will notice some
Annie's in there I do have a type
version but the syntax didn't quite nice
yet so on that it does have loved work
before it's more useful with that thang
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>