<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Dart: Your First-Class Upgrade to Web Development | Coder Coacher - Coaching Coders</title><meta content="Dart: Your First-Class Upgrade to Web Development - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/InfoQ/">InfoQ</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Dart: Your First-Class Upgrade to Web Development</b></h2><h5 class="post__date">2013-07-29</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Yiq_MdAdZ7c" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">great thanks everyone for coming my name
is Seth Ladd I'm a developer advocate
with the Google Chrome and dart team I
got into Dart because I have a
background in structured programming so
my experience is actually a lot of Java
a ton of Java Java and spring so it's
really cool to come to kind of a home
crowd audience that's nice
then I got into Ruby on Rails and then
lucky enough to get this gig at Google
and chrome but at that time I wasn't
really a JavaScript ninja or anything
and so programming the browser for me
was a huge learning experience come to
find out that I really really enjoy it
but at the same time I really missed the
programming experience that I came to
grow up with and expect that is really
productive tools and refactoring and
ability to work with classes and
libraries and Static types and all this
stuff so I really missed that but I
loved working on the web and so when the
star project came along I got really
excited because it allowed me to get
that programming experience I think most
of us in this room really love and feel
productive with and still target what I
would say is the most exciting and
ubiquitous platform out there the modern
web so today this is all about what's
new and Dart your first class upgrade to
web development I was like to just
figure out how many people are building
mobile apps today so just iOS or Android
okay how many people would say you're a
server-side developer okay cool all
right good and my power is not really to
hold on
yeah there we go otherwise it's gonna go
to sleep every five seconds there yeah
okay cool it's just interesting you to
see the demographics out there because
dart has certainly been appealing to
developers all across all these
different platforms and so we get a
really good mixed crowd so that's and
that's good that's that's what we want
to see
okay so first what is Dart well darts
much more than a language it's also a
set of rich core libraries really
productive tools great web programming
experience a very fast new virtual
machine but probably most important to
understand dart compiles down to
JavaScript and runs across modern mobile
and desktop browsers so almost
everything maybe everything you're gonna
see here today compiles down so you can
run it across the modern web today I
might be talking about some server-side
dart code though the question was why do
I say almost Dart also runs on the
server you'll see some of that a little
bit that you'd obviously wouldn't make
sense okay so I want to start off by
painting some pictures about what
motivates us and some of the reception
we gotten from the dart project so I
like to talk about this is a real life
story someone that had talked to us
about their experience Huston he works
in a bank he works he writes a lot of
internal apps for his internal customers
so he was telling us what's a typical
scenario here so his boss will come to
him and say hey we need some reporting
app he start building a new new web app
all right so he's like no problem first
thing I'm gonna go get is requirejs
because I need some sort of modularity
next I need to go get backbone because I
need some sort of client-side
architecture then I need to go get
backbone marionette because I need some
sort of additional functionality
backbone doesn't have then I need to go
get jQuery because every single web
project needs jQuery and whether you
need it or not some some other
dependency requires jQuery and then you
need moderniser for feature detection
and then you need moment j/s to be able
to parse dates and deal with date
formatting and then you need des
templates because you need to do some
sort of client-side templating system
and then you need to go get phantom j/s
because you need to do automated browser
testing and then you need to go get
Jasmine because well you need some sort
of architecture to write your unit test
okay so now he's almost ready to get
started then of course each one of these
has a different set of docks with
different ways of writing docks hosted
at different sites in different formats
it's alright you're going to go read all
about these and learn each one of these
in a completely different way okay and
now he needs to integrate all this stuff
and make it actually work together which
is worse than it probably sounds because
there's some duplicate functionality in
here so not only does he have to wire in
all the libraries together he needs to
then decide do you want the collections
library from library a or collection
library from library B alright well
after all that literally says I just
want to write web apps so then he was
happy to report to us that he found the
dart project and he could replace that
teetering pile of different technologies
with simply the dart SDK and three other
packages you can get from our package
management system and his quote is
things are consistent and clear and so
that really made us happy because that's
exactly the kind of programming
experience we want to give you guys when
you want to build your a totally awesome
web app but that was an external
developer working with a small team
needs to write a lot of apps what's the
word what's the report back from our
internal customers well inside Google we
write big and complex apps things like
Gmail Google Docs these things are huge
hundreds of engineers working off across
multiple time zones up to millions of
lines of code these are big so we've
built in Google lots and lots of layers
to deal with this complexity like we
don't want to build things like Gmail
with vanilla javascript in HTML so we
needed to build things like grid or
Google web toolkit we needed to build
things like closure and close your
compiler in closure libraries we need to
build templating systems like soy this
is all you know it all basically works
but what we found is that we don't have
the productivity that we really desire
no jokes some of the edit refresh times
that some of our engineers are
experiencing are on order of 24 minutes
imagine 24 minutes from when you make a
change to when you can actually see that
in your browser that's less than
productive so we need to find a better
way to build web apps this is Google
surely we can do better
so this isn't the first time we've tried
to approach a problem and this isn't the
first time others have tried to approach
this problem
things like CoffeeScript might give you
a better say syntax on top of
traditional web programming efforts like
typescript might give you better
structure over traditional web
programming things like gwit might
improve a bunch of things but they don't
you know some people might say it's a
step back in syntax dart in our opinion
is the first effort that actually
addresses and improves all of these
different dimensions structures syntax
semantics tools core libraries and very
important to our extra internal
engineers is the iteration times web
development is fantastic you can make a
change and hit reload and then you see
that change we want to make sure we
continue to give that change even if
you're dealing with the million lines of
code and so in dart you're not required
to compile anything to see these changes
okay so before we get into all that
what's new from over the past year in
the dart project I want to give you guys
a lightning tour of the syntax the
structure and semantics of the dart
language and libraries to kind of put
you in the headspace here what this
project is like so let's look at the
syntax I like to say it's ceremony free
first of all this very familiar right
class curly braces semicolons it looks
like most of languages were writing with
every day it's also a terse language
when you get to build a new language you
get to say what are some of the things
that are maybe a little bit more
ceremonial and fix that a good example
here is constructor parameters if the
constructor parameter name matches the
name of your field name you can simply
say this dot strength in this case this
is a lot better than doing this that x
equals x this that y equals y repeat
repeat repeat it's that kind of ceremony
that I think we can do a little bit
better on now this is one of my favorite
features and that with methods you can
name a method pretty much ever anything
you want which is great you can clearly
convey your intent but constructors are
traditionally always named the name of
the class now in dart we give you name
constructors so in this case here you
can create a new bear hug and it will
set up the state for that hug in this
case strength 100 big hug
okay in dart we have Oh
operator overriding so plus/minus etc
etc in this case here where you take a
hug and we add it to our current hug and
return you a new hug in jar we also have
optional named parameters now a lot of
great scripting languages allow you to
have optional parameters or name
parameters in dart we also allow you to
have default values for those named
parameters in this case here if you wrap
the parameters in curly braces then it
becomes optional named and we've get in
a default value of 1 another really
awesome feature of the dart project is
the one-line functions so in this case
fat arrow here fat arrow here says it's
just syntactic sugar for curly brace
return expression curly brace this is
really fantastic because in dart as you
would in a lot of web programming deal
with a lot of callbacks or one-line
small little functions in response to
some action so you want to be able to do
these things very tersely
and finally string interpolation as well
in dart the dollar sign here then
variable or you can put an expression
there and it's just a little bit nicer
than having to do string concatenation
of string builders you can certainly do
those things if you want but we've got
string interpolation built right in so
you see this kind of real sweet spot
here between the heavily structured now
would say ceremonial languages like Java
or C sharp and on the other end of the
spectrum you have the highly dynamic
languages like JavaScript or other
dynamic scripting languages like Ruby or
Python darts somewhere kind of in the
middle there pulling in features from
both so that you get the structure you
need so you could start with tens of
lines of code all over two million lines
but also the terseness and set of the
free from ceremony you get from the
other scripting languages now dart is
its own language it's not just CIN
syntax pasted over traditional web
programming dart brings its own
semantics as well and so we want to turn
more of the wat moments that you might
encounter with traditional web
programming turn those into a atomic
dinosaur rock nuclear explosion moments
so version on your left bad version on
your right good so here's some examples
of what dart cleans up so only true is
truthy everything else is false very
simple very simple rule to understand in
dart there is no unn
fine there's only null so eliminates
that whole confusing confusion there's
no automatic type coercion in dart like
you might get in traditional by
programming with double equals or plus
etc so right there eliminate a bunch of
those kind of questions the
unfamiliarity okay so this is the pop
quiz part this is dart code now what
would you expect as a logical sane
straightforward developers that you guys
are I have a string I'm calling da
missing there is no missing getter on
string what would you expect right okay
well you would get an exception a
logical error at that point at runtime
saying string has no instance method
missing this is different than
traditional web program which returns
undefined and keeps on truckin which
leaves you to find bugs very far away
from the original cause of the problem
like I want to know that I called a
method that doesn't exist right at that
point
here's another pop quiz what happens if
you access an array out of bounds out of
range of an of array well as you might
expect a logical error Ranger right
there okay good
I'm sure we've all run into the problem
in traditional web programming where you
did something like this and you get back
undefined did I put on too fine in there
I pass on to find three three levels
down where did it go right at the call
side problem okay this is a little bit
trickier so let's see if we can walk
through this variable scoping in Dart
this is dart code here so I've got a
top-level variable called foo and then
inside my bar function I have an if and
then a new block here foo is set to
inside then I want to print foo now what
do you think will happen when I run this
program which what gets printed top
level top level gets printed because in
dart things are lexically scoped logical
sane
easy for you to statically analyze easy
for the tools to statically analyze so
hopefully you can see that you can give
to our code to pretty much any developer
out there and they can look at it and
learn it in under an hour very
straightforward very logical so this is
the kind of trickier one right of the
previous one we talked about lexical
scoping in dart also this is lexically
scoped it's a common thing you have to
do in
traditional web programming is you
always say this equals that so you can
get a variable that's scoped just to
your function even if the callback that
you're working on which in this case
right here when a button is clicked
you're going to fire are going to run
this function here which will call this
side atomic dinosaur rock in dart you
actually will call the atomic dinosaur
rock on this the object that you would
expect that are under or wanted to call
so these are just examples of how things
work a little bit more logically okay so
that was the syntax we talked about the
semantics let's talk about the structure
we talked about functions and classes
already and we'll look at some of the
others and a little bit but I want to
focus here on libraries a nice
improvement over traditional web
programming today in Dart you get the
concept of libraries but they're very
they're much lighter weight than the
concept packages in Java in dart here
you can just simply define a file as a
library you can import libraries that
come from the core SDK you can import
your own files which themselves or
library so right there you've got the
concept of modularity and the ability to
namespace but inside this file here you
can define as many top-level constructs
as you want you can define multiple
classes in a single file you can define
a top-level function in your file giving
you a very flexible way to organize your
code you know long have to put one
public class per file if you don't want
to do that okay so that was the
Lightning tour we're gonna look at a lot
of the new features but make sure you
guys if you have any questions stop me
and ask and I'll be happy to answer it
interactive there's always good so with
that said let's look at what's new in
the language okay so this is really
common in web programming today here
we're creating a new button well a and
dard you have actual constructors in
classes so we can give you a constructor
for button element that's kind of cool
but then you're always setting up the
IDE of setting up the text you're
setting up the classes you're adding on
click handlers and then you add it to a
child well in this case here a button
the variable names repeated six times
it's a little it's a little much on my
eyes so I think we can do better
well since about this time last year we
added the concept of method Cascades
this comes to us from small talk and it
allows you as developers to pretty much
any API now becomes
fluent style API this is an API design
popularized by libraries like jQuery
where you want to just contain these
guys together this is pretty close to
chaining this is cascading and right
away you can see we've eliminated the
need to repeat button over and over and
over and over but we can do a little bit
better than this we can actually
eliminate the need to create a new
instance or sorry a new variable
thanks to cascades even though we need
to create a new object and then
initialize it we can do this all in line
this is kind of a convoluted example
here but you can see where I can say new
button element dot dot ID equals foo
right where I want to use the object
from the expression new button element
this is great when you have to create a
new object initialize it with a couple
of parameters or values and then pass it
to some function or or or method okay
moving on so one of these things is not
like the other in that you have
top-level object you've got a class and
you're called persistable and a class
called hug I'm sure this is sort of
familiar a lot of us we've probably had
to extend from some utility class at
some point
well obviously hug is not persistable
right if you look at the is a
relationship hug is not persistable you
just want hug to be persistable and you
don't want to improve your inheritance
tree well it turns out in dart that you
can do this thanks to the concept of
mix-ins so when I take persistable make
it a mixin I don't pollute my tree I
have object I've hug extend directly
from object and I can mix in the kind of
functionality or behaviors that I want
in my class so here's how you would do
this so almost any class itself can be a
mixin you have to extend object and you
can't have any constructors then you can
become a mixin so here's abstract class
persistable notice how it defines save
and load but it leaves to JSON up to
whoever is gonna mix in this class then
it's easy to apply the mixin here
extends object with persistable
okay so now hug actually has the
abilities of persistable and it becomes
very easy to use the methods that come
from persistable so this is really cool
I like this another new feature we've
been working on is metadata annotations
a good example here is at deprecated
this should be pretty familiar to a lot
of Java developers out there Dart now
has this as well your tools can read at
deprecated give you feedback writing the
tools again plays into the story of dart
is very toolable and productive language
now this is cool but you yourself it's
very easy to define your own metadata
annotations so I'm gonna use this new
the new feature we're working on here
lazy load libraries to illustrate how
you yourselves can create your own
annotations that the tools can then
consume and do interesting things with
so here we're going to declare that the
library my Lib is a deferred library and
we're going to do that by signing it to
a Const variable called lazy then on my
import of that library I'm going to
annotate that import with the at lazy
metadata annotation now again this at
lazy is just a constant object so you
can create any con Sobchak here and then
we're gonna use our lazy loaded library
here by saying lazy download returns a
future when the library is loaded then
execute a bunch of code now our tools
like dart2js which takes dart code and
compiles to JavaScript can read in this
file
look at these annotations say ok so you
want one javascript file here but then
you want the lazy load library another
javascript file so that you can send
down the initial small one and then when
the user's ready go request the second
javascript file this is great for
deployment time allows you to say okay
maybe they don't need this functionality
right at the initial load so I'm gonna
mark that as lazy and they'll pull it in
pull it in later ok so what's new across
the dart libraries well the question we
got all the time especially when
initially launches this is very cool I
love it but can I access my JavaScript
libraries answer is a resounding yes
now we had to build a system that allows
dart to interoperate with JavaScript in
two different worlds one world is the
world we're compiling all your dart code
to JavaScript so you've got one
execution engine and you need to mix
these libraries together the other world
is when you have two different virtual
machines a dart VM and say v8 in Chrome
and you need to be able to have objects
in one VM reference and talk to objects
in another VM now this gets a little
tricky when you deal with garbage
collections so we had to come up with a
way to do this
in our world
via proxies that allows you to
interoperate with existing JavaScript
libraries or use dart functionality in
your JavaScript libraries and not have
memory leaks that was really important
to us so here's an example of dart code
that interoperates with JavaScript and
then the bottom version is the kind of
vanilla JavaScript and what I want to
illustrate here is how similar these two
chunks of code are this is an API that's
sort of based on the Google
visualization API so in the dart version
on top you reach out into the Jas
context you go get one of those
top-level objects like charts API then
you might have an array of data well in
the dart world you want to efficiently
construct and pass around that array of
data so you're gonna wrap it in a JSA
ray then you'll create a proxy on top of
the javascript object that living in the
other world here in this case bubble
chart and then the really cool thing
here is chart draw data looks the same
in dart as well as JavaScript and the
nice thing about this is the editor and
the tools won't give you any warnings
about types or anything them you can see
you that j/s proxy is really what you're
working on even though you're pretending
that the proxy is a chart and notice how
you can call draw on that proxy no one's
complaining this is the this is the
terse and it's the ceremony freeness of
the dart language okay this is also
quite new and very very useful to
framework authors mirror based
reflection the neat thing about our
reflection system we call mirrors is
that it can work on source code as well
as during runtime so we use the mirror
system for instance to generate our dart
Docs very similar to the concept of Java
Docs we also use our mirrors at runtime
to do things like delegate methods or
ask and runtime you know what feels
we'll do a class does a class have so
speaking about that you can reflect on
classes as well as instances at runtime
and you can introspect like you might
imagine what's the name of this thing
what feels does it have what parameters
does this thing take as well as you can
invoke dynamically other founding
functions or methods on those objects so
as an example let's create a logging
proxy that uses mirrors to delegate down
all calls to some
delegate while logging every call to any
possible method on that delegate so dart
has library so first off let's import
dart mirrors next we're going to get a
mirror from some delegate object using
the top-level reflect function and then
no such method so darn has no such
method in that if an object receives a
call request the request for a method
and he doesn't implement that method
he will then delegate to no such method
now the default implementation no such
methods be like I don't you know I don't
have this method but you can override
that and do anything interesting that
you would like so we're gonna capture
all calls to this proxy here we're gonna
log out simply print out hey foo was
called and then via that mirror object
we're going to delegate the original
call back down to the delegate so this
works in the case of creating a class
greeter and in my main method I'm going
to create a greeter that's actually
logging proxy that wraps the greeter and
I'm gonna call hello now remember he's
gonna hit the login proxy first logging
practices saying ID I don't implement
hello I'm gonna call no such method
gnosis method says great I'm gonna log
this out and then I'm gonna delegate it
down to greeter and you get hello
printed out so that's our reflection and
in metaprogramming and we expect to fill
this out even more and more over time
okay this is really cool
now we all know that the web is an
asynchronous world the web works on an
event loop and to keep your UI from
blocking while you're doing interesting
things you have to deal in this kind of
callback world or maybe you deal with
with web workers well as you probably
know the more and more callbacks you
introduce the more deeply nested those
callbacks get and it gets very confusing
fact that has its own special name
called callback hell well in dart we
think we can do better in fact we can
think we can put you on a beautiful
beach out there when you're dealing with
async programming so to illustrate here
let's look at a before and after this is
dart code and can certainly write write
dart code like this and do stuff take
some sort of function and then it has to
deal with errors I'm gonna pass in
another anonymous function here to this
named parameter here well we could
definitely do better thanks to futures
the version on your left is just
straight-up callbacks the version on
your right is an object-oriented Const
around expecting and receiving a value
in the future now once you have an
instance of future that is an actual
object that represents a callback or a
value later you could then work with
this like many other objects and becomes
an easy API to wrap your head around in
this case here when the future is done
then run a callback and if the future
has any error catch the error like this
is very close to the async of this
version of try-catch well we can do even
better because futures chain so the
bottom right hand is the model that we
use a lot in dart programming do stuff
returns a future chain then then chain
catch era this really looks like
synchronous try catch code even though
this is purely async all right let's
look at this in action because that was
kind of a simplistic example but this is
something that's not all too unfamiliar
everyone knows the Internet is all about
getting cat pictures so let's get some
cat data but then we need to go turn
that in a cat picture and then we need
to go rotate it and then we need to go
draw it and you want these things that
happen in that order but all these are
asynchronous right so in traditional
form you'd probably have to nest them
down and now it's getting a little sore
in my eyes and then god forbid you
should add error handling in here so now
it's got a lot of repetition this code
is very hard to read well we can turn
this into the future version and things
get a little bit more clear to
understand each one of those functions
or methods now returns a future and due
to chaining I can chain those futures
and this is really cool notice how I can
put a catch error at the end that
handles any error or exception handled
in any of the previous futures so
instead of duplicating a lot of work you
can go ahead and ride off of the
chaining capabilities of futures futures
also compose a good example here's if I
want to get two pictures I want to wait
for both of them to complete how would I
do that callback well I've got to have
some counter and then understand which
callback was finished first and the
check am I done with all of them future
has a nice static method wait and hand
at any number of futures and when all
those futures are done then then then
catch air so object-oriented constructs
for one-time events we built it right
into the core library and then all of
our asynchronous methods and objects
across the core libraries now use future
of course as you know the more you bake
it into the platform
the more all the other third-party
dependencies of libraries can work in
the same way so now you don't have three
or four different proposals for how do
we do future based API is and dart comes
out of the box okay and explain that
so futures are really cool for one-shot
callbacks but we also the concept of
streams for repeating callbacks good
example of the future might be go
calculate some Fibonacci number and get
back to me when you're done
streams will be hey I'm reading bytes
off of a socket so let me know every
time there's some bytes you know give me
that give me that data or every time
there's a click
give me a stream of clicks to come off
so let's see this in action
speaking about clicks actually let's
look at on keypress so imagine I want to
get notified every time some impres is a
key in some text area on my web page
here so I'm going to query for that text
area say ok on key press that returns a
stream well streams are great because
you can chain them transform them filter
them in this case I want to filter all
key presses I only care about the keys
on the keyboard not the not the odd keys
here but then for every one of those key
codes I actually want to turn it into a
string so map the incoming series of
events from key codes to strings
and again map is returning another
stream in this case I only care about
the first one so here I'm turning the
stream into a future which is neat so
the very first event now future wait for
that then print it out this is my first
character so kind of like futures in
that if you bake it in the platform
everyone else can use it and once
everyone else is using it we get this
great ability to kind of transform and
pass one stream to another and
everyone's talk in the same language ok
so what's new in HTML so a lot of this
stuff has been in the core libraries but
I want to show you how you would
actually use this stuff to build modern
web apps with Dart so I like this
example here because if you know what
the JavaScript version of this looks
like you'll know that it's a lot longer
and harder to understand but this shows
you a bunch of dart features that we've
already talked about all in action right
here audio : true video : true these are
named parameters now imagine this was
get user media true true no one in this
room would know what those true this
special Flags means so these name
parameters are fantastic to give you
guys the ability to actually read this
code and the fact that they're actually
baked into the the language the tools
can give you code completion on this
so when getusermedia is complete then so
that returns a future so now I've got
some media stream and I want to create a
video element method cascades in action
go ahead and create the video element
set it up and then here's the usage of
streams here unloaded metadata listen to
listen to all events for on loaded
metadata so this is great and the neat
thing about this is the Dom that is the
API for the browser looks and acts like
dart code so if you know how to use the
core libraries and the language of dart
you know how to program the browser and
that was really important to us okay
another good example here this is really
cool so who's lately sent over XML over
xml httprequest right almost no one so
we dropped xml it's cleaner but it also
shows you how we've simplified Ajax
programming much like jQuery did for
JavaScript you just get it out of the
box with dart
so here HTTP requests that request set
up the method set up the request headers
again future when that request is done
then get the requests where I can print
out the body or do whatever and then
catch error for any errors that might
have happened like a 500 from that from
that Ajax request another good example
just making Dom programming feel like
dart code okay so this is some of the
primitives those are how we've improved
the actual api's of the Dom but there's
a new whole suite of really awesome web
technologies coming down the pipe
collectively known as web components
that are going to fundamentally change
the way we build web apps web components
is a family of specs they helped give
you actual encapsulation something other
platforms have had forever but on the
web we don't have today imagine today if
you wanted to use some sort of framework
it's going to give you some CSS you
would put that CSS at the top of your
file now that applies to your entire
page when in really reality you just
want the components from that framework
and you don't want those components to
be mucking around in your page you don't
want those components styles to be
overriding the styles in your page you
also want the ability
of real data binding between the models
in your application and the fields and
Dom properties in your page again
something that a lot of other platforms
had forever well this is all coming to
the web and it's on standards track and
we have cross browser support for it but
it's going to be a little while until it
lands everywhere well the nice thing is
dart provides you all the polyfills in
the compilation required to write with
this new awesome world of web components
and model driven views and still deliver
it across modern browsers today since
dart has think Apollo the JavaScript
anyway we can go ahead and compile this
code the way you want to write it down
into JavaScript for you so let's look at
an example here data binding data Bunny
here the top is the dart code well we
can use those annotations again and say
ah class person he's observable so I
want the system to watch for changes in
and out of my class person or all
instances a person I'm also saying okay
I have a list of people and I want that
to be observable as well so give me
event notifications if my list gets
added to or removed and then down here
is the little snippet of HTML that we
care about here we have a button and we
say if the button is pressed run this
dart expression here ad person which is
the same ad person is right here and we
have here the UL and we want to create a
template here saying for every P in
people and then double curly braces is a
way to do data binding inside text so
data bind to whatever the value of P dot
name is and also bind it to the text
field here okay so let's see this in
operation here I'm gonna pull up the
dart editor now you'll get this with the
open-source dart SDK it's a completely
rebuilt experience based on eclipse but
there's also will go into it but there's
plug-ins for a lot of other browsers as
well
do do that's do I care about this no I
would like to show you people here we go
okay so here's the here's the same code
and I want to show you this in action
here so if I run this here you can run
your dart apps from dart editor in both
dartium which is a bird version of
chromium with the dart VM installed or
you can compile a JavaScript and pop it
open in your favorite browser
okay so we're gonna add a message here
and so it added a person into that list
and because the list is observable he
adds a new Li right here automatically I
didn't have to write any of that code
well it's all blank here but remember I
have two-way data-binding between the
form field here and what's up there so
hello Jax that's all live to again live
two-way data-binding
I didn't have to write any of this code
and to write any code for like on change
handler do this or I have to write ahead
code like hey if something gets added to
the list remove it or tell my rest of
the system the jar webui project gives
you all this stuff so that's pretty cool
but we can do even more I talked about
encapsulation so that was just that was
the basics of data binding but I want to
actually create reusable components
thanks to custom elements a member of
the family the web components specs I
can create a custom element extend the
actual lexicon of HTML and encapsulate
the structure the behavior and the style
of this custom element so what does that
mean well okay these a little bit
outerwear but I'll show them to you okay
so how do we use an actual custom
element well the version on the bottom
here div is click counter I'm actually
sub classing div I'm saying this is a
div but it's also a type of dip of click
counter now where did that click counter
come from well I can use the primitives
built into HTML anyway the link and I
want to import this custom element here
click counter into my page well what
does this look like okay I can define in
a custom element using the element tag
again HTML exists and I've got tags so I
can reuse that stuff remember I said
that custom Ellins encapsulate structure
style behavior the structure of this
custom element here is defined in this
template tag the behavior of this custom
element is defined in this dart file
because dart is object-oriented I can
say create a class counter component
extends web component and this is the
behavior that's associated with the
click counter and remember I use it here
and I've got count starting count okay
so let's see this in action as well
clicks HTML run as dartium
okay so as I click this this
this whole thing right here is the
custom element but remember all I used
in my page was div is click counter
because the custom element defines his
own structure that you see in a page but
the encapsulation boundary here is this
element here we call the host element
this div here so all its kind of going
on under the covers now of this div is
hidden from your page which allows you
to create these reusable components that
no one else can kind of muck in or touch
where these components can't muck up
with the rest of your page now they
become reusable they become extendable
you can package up these custom elements
and darts package manager and reuse them
so now that web web development actually
it gets interesting ok cool so the
question is this start specific no again
the web components data binding custom
elements this is all stuff on a
standards track that is being worked on
by multiple browser vendors we just
happen to be able to give you all this
new shiny today even though browsers
don't actually implement this stuff yet
because we're going to compile all this
down into the actual vanilla constructs
of javascript in HTML 4 you know
everything here works across the modern
web today because we compile all this
down into vanilla javascript in HTML
I'll give you an example that if you cut
and paste us into a browser right you
need to include the libraries that make
that work but here's a good example I'm
going to run this as JavaScript to just
illustrate this point now this is
regular stock stable Chrome he doesn't
know anything about the all the fancy
new data binding stuff he doesn't know
anything about Dart but you can see it
all works because I've compiled it and
give all the polyfills right we have I
brought along the implementation with me
and as the browsers implement more and
more of this stuff I can drop some of
the baggage that's required yeah ok go
back ok cool ok so what's new in the
tools in ecosystem well we saw chromium
we saw darn iam there and the feedback
we get from our developers is that
dartium is really fantastic and allowing
developers to completely cut out the
compilation step they have very fast
iteration
cycles through the vast majority of
their development and that they stay in
the editor they stay in dartium thanks
to the dart VM just reason that dark
code and runs it at the very last say
20% of their development they then and
start invoking dark to je s compiling
their app to JavaScript and testing
across the wild now we saw the dart
editor which is one way in which you can
write dart code dart editor is great
because it allows you to do refactoring
and code completion and jump to
definition and find in projects and all
that stuff that you would want to do
with any sizable application but the
good news is you don't have to use dart
out if you don't want to we've got
plugins across a variety of different
editors like sublime Eclipse as an
actual plugin vim and then even intellij
and webstorm have a dart plugin as well
so hopefully your favorite editor has
ability for you to write productive dart
code but if you don't want to go get an
editor and if you just want to try out
Dart
one of the latest things that we've
launched is try to dartlang.org we've
actually taken so here's firefox which
of course doesn't know anything about
dart so this is all compiled to
JavaScript we've actually compiled dart
to J's that compiler with dart to js' so
in here you've got the compiler running
as JavaScript and live here you can edit
your code there we go and try out the
language try out the core libraries even
trialed HTML programming without ever
leaving your browser this is really cool
it even works offline we have app cache
installed so it's a really low barrier
way for you to just see what dart is all
about ok moving on in the tools and
ecosystem stuff we also have a full unit
test library full mock library this is
an example it's a whole talk on on
testing in mocks I wish I had time to
give but it gives you an example of just
how terse and ceremony free the unit
testing is we also ship a headless
Chrome which allows you to automate
browser-based testing off of say your
continuing it continuous integration or
testing environments a good example of a
partner we've been working with drone
dot IO is a hosted continuous
integration service that knows about
dart has our headless chromium has a
dart VM and it connects all up to a bit
bucket and github so you get this great
cycle of writing and dart deploying the
dart testing and dart testing in your in
your headless browsers and all
just works more or less out-of-the-box
we've also been working hard on a
package management system it's a great
way to get the ecosystem up and going we
affectionately call ours pub because he
played darts in a pub and with pub you
can download manage upgrade and install
third-party dependencies and packages on
our central hosting service
pub.dartlang.org you'll find packages
for MVC frameworks templating game
engines physics engines you name it
database drivers it's great to see the
community get so involved so early on in
the dart ecosystem evolution but there's
already a ton there for you to try out
this is also really cool we've been
working with Adobe to see what we can do
if we can take the great editing
experience of safe flash Pro which is
great for animations and timelines and
great for creative folks but who want to
target the web so they love the tools
want to target the web they also loved
ActionScript 3 but dart is very familiar
to ActionScript 3 developers and dart is
coming to Chrome and dart compiles to
JavaScript so you can use tools like
flash Pro authoring them actually write
dart code export the whole thing down to
Dart which then of course compiles to
JavaScript or runs right on the VM this
is really really cool we see a lot of
interest from ActionScript 3 developers
who say hey man I want to know what to
do next but I love my tools and I love
ActionScript 3 what should I do
dart they're finding is a totally
natural answer and so this is gonna be
available I think by the end of the
month ok cool so that's a little bit
about what's new with the tools let's
look about something that's really near
and dear to our engineers hearts size
and speed the guys who co-founded the
dart project also co-founded and wrote
v8 Chrome's fast JavaScript engine they
also wrote and helped work on hotspot
the thing that made Java fast so these
guys know speed and these guys have
speed like in their sites at all times
so you probably asking yourself ok great
but I thought the web was fast enough
right are you telling me the chrome is
already fast well certainly we saw a
whole Renaissance of more interesting
apps come about because of v8
reintroduction of speed to the web ones
v8 was introduced you see a bunch of
other browsers get interested in speed
and then enable the whole slew of really
amazing apps like Google Docs and here's
Google Maps for the presentation
software I'm using right now really cool
multimedia experiences here like Oz and
the thing we did with Cirque du Soleil
so we've completely pushed the
boundaries of what's possible on the web
well it turns out that what if you could
double the speed again of your browser
what kind of Renaissance would you be
able to bring forth what kind of amazing
experiences would you be able to help
your developers produce if you could
double the performance so yes
web is fast but we could definitely make
it faster but it's not just about Oh
making your multimedia apps run faster
which of course is important but it's
also about this everyone's got one of
these in their pockets maybe even two
maybe two of these in tablet and
probably this time next year will be
primarily developing for this now this
has a battery it doesn't have one of
these I don't have the luxury of being
able to keep this plugged in every CPU
cycle counts on this guy because you
don't want your users not install your
app because it drains your battery and
this is really important as we move into
a mobile world if you can get from what
used to take 4 cycles down to one cycle
that's a huge improvement in battery
alone not let alone of course actual
felt performance ok so let's look at
what we've done to help make things
faster and smaller
well dart2js has been doing a tremendous
amount of work using the static and
analyzable features of dart to help
produce small and fast JavaScript here's
the example you take your application
you run it through dart2js it performs
tree shaking minification type
inferencing and spits out not only the
javascript code but also a source map
file which allows you to stick inside
chrome dev tools and debug what they
deep like the original dart code and map
that dart code back to the JavaScript
code that the browser is actually
running which is really really cool so I
want to show you an example of the
JavaScript code that we output when you
compile dart to JavaScript it's almost a
one-to-one it's really good these days
here's an example here we've got a class
we're importing a library now this isn't
the I to cut out some boilerplate that's
we
we don't care about here but for the
feature the code that you write here
almost on one-to-one so the code you can
sort of read this and actually help
debug it but of course you want to ship
down as small as code as possible
well dart2js ships with minification out
of the box so here's an example of the
previous JavaScript code that you saw
which is generated by dart to GS and
then minified here because dart suggests
can do a whole program analysis he
really understands the structure of your
dart app more so than say mini fire for
JavaScript and so you can produce very
small minified code we also talked about
this concept of tree shaking
minification works great for the code
that's produced how do you make that
smaller but what about when you have a
very large application say an
application that pulls in very large
libraries well if you look at any
JavaScript library today the primary
marketing material they have is how
small they are
right you've got jQuery comes in a 30 K
30 K gzip minified and you may only be
using 10% of jQuery should be paying for
the other 90% and then you've gotten you
a whole competition Zepto nano femto and
all these well I want to get in a world
where I only want to pick a library
based on how good it is and what it does
for me not how small it is because as
you reduce the size and now you've
pushed out features and now I get to go
to another library and go get that other
feature well in dart because you can
statically analyze the whole program you
can say okay these are the actual
functions and classes that your program
requires I will prune out everything
else so here's an example here let's say
you write the code in blue it imports
the library and yellow you only call one
function from that library but notice
how there's a blue function that you
wrote you never call it there's a
function in yellow that comes along with
the import then you never call
well dart2js understands tree-shaking he
can look across all libraries you've
imported all code that you've written
all paths through the system say well
actually you really only need main
functi and func acts this is awesome now
my tools are actually helping me okay so
that's a little bit of dr. Jes and when
he's doing to make things smaller and
faster let's talk about the dart VM and
what we're doing there to make things
faster so a good way to think about why
you see like why a new VM and why much
better performance in dart VM is to
understand that the language designers
are also
VM engineers that helps that there's a
designing a language and libraries that
they can implement very efficiently
things like explicit and Static
structure in Dart you scan through the
code you parse it the program doesn't
change after that in JavaScript the
program executes as you load it and
potentially it changes as you go so it's
very hard to optimize that and gr do you
have real arrays real classes it's all
the literature is all about how do you
optimize object-oriented VMs it's
already have direct calls you don't to
walk a prototype chain to figure out who
might handle this and by the way did my
prototype change at runtime out
underneath me and do I have to do and
throw away all my optimized code etc
that can't happen in Dart in dart you
can globally track field types this list
goes on and on but the analogy here is
the version on the left here is kind of
traditional web program today we've got
a lot of baggage just like 10 plus years
of stuff going on here in JavaScript
engines but in dart you're kind of
zooming along with the tiny little
suitcase with wheels on it so that's
cool the other nice thing about
introducing your own VM is not only can
you design a language that runs really
fantastically on it but you can kind of
give developers keys the unlock whole
swathes of transistors that today you
cannot access and it's a real shame and
this isn't just for a super beefy you
know CPUs even cell phones today I have
whole swathes of SIM D instruction sets
that you cannot access today and we want
to give developers access to the whole
CPU again it's not just about pure
performance it's about battery too so
here the dart VM unlocks the sim D
instructions this is something like 25%
of this hold of this arm CPU you can now
access in Dart so what does this mean in
real life well here's some recent
benchmark numbers that we've been
tracking blue is dart VM yellow the
middle line is dart code compiled to
JavaScript I'm sorry the yellow line is
is handwritten JavaScript code and the
Green Line is dart code compiled to
JavaScript now you can see the blue line
significantly faster and sometimes 2x
faster than the handwritten JavaScript
code it in some cases and still very
early with these numbers the reason I'm
showing these is to show you the
trajectory Ron we think we can do better
than this
but look at deltablue that benchmark
here the compiled to JavaScript version
the green is slightly faster than the
handwritten JavaScript code now this is
we're not going to expect this all the
time this shows you sometimes what can
happen when you do a whole program
analysis look at the program rewrite the
code in a way that's friendly to
JavaScript engines better and smarter
than developers would actually lay out
their code it's a lot like what's what
GCC is doing for your C code right you
write code for humans GCC's jobs and
make it work fantastic on CPUs dart to
J's code dart to J's does something
similar he looks at the dart code and
lays out JavaScript it's fantastic for
JavaScript engines smarter than you
probably would in yourself but that was
all on this you know beefy MacBook Pro
with 87 cores or whatever so but how
does this translate down to phones again
sensing a theme here well a happy to
report that you see the same kind of
performance characteristics and gains we
need to pull your apps on phones as well
and this is an interesting benchmark
here and body because it's able to be
accelerated by sim D those instruction
sets that we can now provide you in this
case we get a almost two-and-a-half
performance increase running on the dart
VM thanks through both the design of the
language in the VM but also the Cindy
instruction sets over the handwritten
j/s code and to see this two and a half
times performance Delta on mobile where
every CPU cycle counts every battery you
know cell counts it's pretty significant
to to our users but this is only a short
talk and dart is a complete ecosystem
there's tons of stuff I wish I had time
to chat with you guys about there's a
whole server side story in dart as well
the dart VM runs on the kalam on the
command line as well as inside browsers
so much like node shows you how you can
write JavaScript that runs in both
places or gwit runs in both places you
can run dart in both client and server
again the the testing stuff is really
really rich as a whole mocks expectation
had list up there
our whole concurrency story we didn't go
into it all it's an isolate based
concurrency concurrency system no shared
state threads so very much safer and a
ton more so how do you try dart weld art
as an open source project it's on Google
code and github you can download the SDK
and the editor and our version of
dartium all everything on darling
org we're active and again Stack
Overflow and github Twitter Google+ so
we're hopefully where you are so it's
very very easy to reach us and we love
the feedback it's still we're still not
yet at 1.0 we hope to hit 1.0 this year
but it's still a lot of time for you
guys to give us a few dick what do you
need what other higher level libraries
do you want what kind of API is that you
need to write those apps that users are
demanding we really want to hear that so
if you take anything away from this talk
I hope that you learned that dart good
language it's a stable language now we
don't expect to introduce any backwards
breaking changes good libraries and
stable core libraries we don't expect to
introduce any backwards breaking changes
there either dart compiles to JavaScript
which means you can write a dart out
today and get it to work across the
modern web dart is an evolved platform
to we're no longer kind of technology
preview anymore we're getting ready for
a 1.0 we've also been out since October
2011 so we've gotten a lot of feedback
internal and external so what you see
here is an evolved from a lot of great
feedback in real life usage and also
Google and chrome are committed to Dart
we've got important internal clients
using dart today we've got on track to
get dart VM into Chrome which is another
great signal of commitment and so this
all leads up to darts ready for your app
now is a good time to start using Dart
try it out for an app you might be
launching in about six months or so
reach out to your community and let us
know how it's all going hopefully saw
that it's familiar it's productive and
it's ready for you guys to use and with
that I'll say thank you very much for
spending your time with me and I'll hang
out for questions I think we have a
little bit of time for questions here
and if not I'll be around but thanks
Evan for your time and I appreciate it
thank you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>