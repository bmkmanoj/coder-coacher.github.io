<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Tutorial: Android Application Development - Publishing to Android Market | Coder Coacher - Coaching Coders</title><meta content="Tutorial: Android Application Development - Publishing to Android Market - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/InfoQ/">InfoQ</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Tutorial: Android Application Development - Publishing to Android Market</b></h2><h5 class="post__date">2011-04-11</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/FDpawCaXNjo" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">okay so this is a fresh emulator so i
just installed this so i have i don't
have anything in my timeline by the way
first thing that I would like to do so I
studied it a virgin device it's a user
first time installing the app ever right
so what'd be nice to do is to tell user
to go to set of preferences because they
wouldn't know okay so let's just do that
minor change so since timeline is are in
an initial start starting point right
what i could do is in timeline activity
I could check if if we have the in keep
in mind that we are in here we got the
yamba thing I could actually check check
if preference prefs for Francis been set
right so I could say something like if
yamba dot prefs dodge get string for
example and then I can look up for
example user name it was a user name
right string huh so in other words i'm
checking so we kept yeonbok here because
we are subclass of base activity right
so i can say if yamba preference gets
shrink and and then I'm saying let's get
user name and if not found return now
and if it is indeed returning now that
tells me that we don't have preferences
set so then I could simply say start
activity so we bounce the user from to
basically to perhaps activity bus right
and I say a return because I don't want
to do all the others work in case so I
started activity for new intent so i new
intent and then to this right ok
organism ports to import intent so this
is going to bounce us 2 to that in
important and please it wasn't nothing
but in newton important ok well i spawn
seconds means messed up
ok
so why is it syntax in 10 cannot result
parenthesis where it doesn't make sense
and then cannot be resolved our fallen
anyway now it works okay I nothingness
yeah but I mean I did import it so
anyway it's just a lot think so so
basically I'm checking the preference is
exist if it doesn't it just bounced to
that so let's test that that will think
that will feature so again first time
installed the app you know let's see BAM
see first time it gets me up to user and
I could do a nice little I couldn't even
do a toast to make text this and then
i'll make up some text and then duration
could be toast dot long dots show let's
see how that works and then for text i'm
going to need to put in strings so i'm
going to create a new message so call
the other messages are created so string
name equals msg create set set up traps
please enter your user name and password
and server to use some i got right so
now if i say refer to our dot string dot
message set up traps back for my biz to
look nice run it and so let me see
yeah hold on one second so let's see
please enter username password BAM okay
ah so so how did I get it oh I restarted
my emulator and when i restarted it
there's an option to wipe user data so
that's kind of like wiped all the users
data study from scratch it's gonna I did
that on and so that's one that yeah so
that's one thing that they did second
thing that I did is you could do is you
could uninstall the app but let me try
this again so learning android password
is PA SS 2010 and server is HTTP colon
slash slash home slash slash learning so
when I wiped it I'm not but what was
where was it crashing so that so
basically you're starting you study the
service so you know you can track that
crash okay so you know service should
not be able to start if the if it's not
set up what does that ok so now here's a
problem let me let me tell me see a
blank screen right once is blank screen
menu timeline let's see if we actually
have data so if i do a TB lock yet it
looks like you did get the data if I
actually go to the toe adb shell data
data comm Maracana young databases
sequel I three star dump damn data is
there there's nothing here what is going
on
but if I restarted it's going to be fine
check this out so if they restarted
because it the first time do we just go
into the preference and now we come
every day annoyed yeah exactly so oh
it's not restarting because it says
nothing changed I gather you know just
do a new line so that actually changed
the code so it's rebuilt it and actually
started it's one way to do it okay so
there it is one right so why didn't it
work first time it now works and it's
like you said it's because we did not
let's take a look at our timeline
activity where do we load up the the
when we load up the the data in what
method
right and how many times does so we do
it when on creating how many times does
own create to happen once in Oran only
once so let's look at this what happened
so first time around activity never
existed you don't create the captain and
we said oh yeah but bounced to some
other activity to set up you set up
stuff right from that point on it's like
as if won't create already happened so
even the hour our timeline went to
running stop and pause now right so when
we got back from here and we said
restore it we we basically when we
restarted it caused this to go back this
way that's why I was empty right so so
basically the solution to this is just
to reengineer this a little bit what we
should do is if we want we could
basically have the adapter and all this
stuff set up here what I'm going to do
is I'm going to move this code that
tracks right I'm going to move it down
so that we we do it at the end when
everything is set up so in case we come
back we come back to the original one
right now I could move the creation of
adapter and all that stuff to which
method on start or on restart right so
because we would buy dearly let's say
let's assume that we want to refresh
every single time we're going back in
here back in here we want to refresh
right but what we could do is as opposed
to doing that I could implement the on
refresh so I would go over I'd implement
methods and then in activity i would say
on resume
right oops why's it doing all that on
all of them it's crazy just just one
time I yeah we'll take a look at that
that means that yeah sure i will take a
look at that in a second okay so a non
resume what i would like to do is I
would simply like to refresh my my my
cursor right in case there's something
new so as we keep coming back to this we
could actually have the cursor be
refreshed so here's how you do it
there's something called cursor
dot-marie query and what that does is
basically refresh is the cursor the data
he freshers the cursor for any new data
so as you because your activity from now
on once it started so once our timeline
is started you may go back and do this
many many times right so as opposed to
doing checking the data here which only
happens once i'm going to check the data
on resume yeah that's another way to get
so now if I rerun this that should work
let's check dams that that seems to work
I can go to timeline so it doesn't start
a new one I can go a status update and
go menu timeline brings the original one
back go back go slow actually it goes to
the homepage anyway so so that's that is
those are that and I change the icon by
the way for Miami application so there
it is this my new young application icon
right I just did a Google search so what
so icon depends on whatever manifest
file points too so the manifest file it
says what application looks like and
then their icons defined in your three
drawables so there's icon icon icon so
what if you want you can change this
tree or you can just define one and so
on ok so now since we're sort of at the
logical break point I want to kind of
show you what it will take to publish
this app right I want to put it on the
market right so just for fun so I'm
going to go this well found the icons so
I'm going to go to so mark is it market
android com right yeah I do hear it so
you sign up for a developer account it's
like 25 bucks and there's my numba
application i currently have it right it
ok so I'm what I'm going to do is I'm
going to provide it yeah i was just kind
of showing that really good at the
sweets what if somebody actually bought
it oh yeah I mean yeah you can charge
with everyone so i guess i can make and
publish it right but they now change
there's some things that they changed on
the on the market so that you actually
have to upload a whole bunch of stuff in
here so here if if i try to upload a new
file so to choose a file so i'm going to
go to my bin direct
yeah so if it exactly so if i go and
upload it that fails market is not
accept a picket sign with a debug
certificate so so far what we've been
doing is we've been signing everything
with what's called a debug key right so
that's why you remember i mentioned that
that's sort of in the development
everything gets signed automatically by
the debug here so if i wanted to sign it
with a real key i would go into eclipse
right I'm going to go so we chose couple
these things and we'll go yamba right
click Android tools and then i would say
experts signed application package just
project yamba instead asks me if I want
to use existing key store or download
the new one and I think I want to use
the i think i have a uh when you see
where my second existing keystore a new
one I have a key store and what do I
keep it is in dot Android rioted some
home of Scone dot Android and there's I
think its mark on a key store okay let
me see what password is try something
like that okay uses a stinky and the
password for that right or you can
create a new key right but you get to
create your own key in a keystore okay
destination APK so i'm going to put it
into the Yamba package into bin and i'll
just say young babe they're signed you
don't what do you mean you're all back
if the try password password but I don't
think that there's a key so you get to
create your own key so now i have
created a new team so I'm going to treat
another files i'm going to choose that
file signed click on upload again and
let's see okay look so this is what's
happened it happens so now it checks my
my version number and says well the new
apks version is one an android must be
higher than the old APK version which
was too so i gotta i can use some
updating an existing one right I can't
have that version number anymore so I
gather go into my manifest and I got to
change this version number right here to
at least three now this here is not
important this can be anything you want
right I'll still call it version 1.2
right but this matters okay alright so
we're now changed that I repeat this
process and rip tools export sign the
application package yamba use existing
key enter my key code exists existing
key and form a key code password
destination I'm going to use the same
destination which is mark on Sunday
Yamba signed then export it go here
choose the file bam bam upload okay BAM
so that I it uploaded a new version 3
okay it figured out this APK requires
two permissions you can see which one's
internet and write external storage um
it figured out that it requires one
feature for touchscreen okay so it's
basically this is very secure
yeah when it's in the market yeah yeah
so now what it's asking me for is the so
screenshot screenshot 0 of at least q
must provide two screenshots so how do
you get a screen 0 0 or at least two
okay let's go at their high resolution
so I think this is now required I must
provide well let's see if that's going
to let me so title yam but yet another
microblogging application for is an
educational app demo cynical to use
various features of android recent
changes updated the j weather library
because remember the old weber is
actually broken so that does the aunt
want some of the report it does is an
error as well the occasion type type of
the application is an application
category so sure i guess is their
education no it is damn or something
price free i can set the price if i want
copy protection content is is all ok all
locations my phone number contact
information public let's see ok so high
resolution application icon this is new
this field is required so now i need a
512 by 512 now I don't know how I'm
going to get that I do get a image here
but it's only 128 so I'm gonna try to
open it with this I'm going to try to
scale it I am Not sure I was like yeah
ok so I'm going to say save as source
112 112 so now I have it to a file so
I'm going to choose that father to just
quickly upload it and I'll just go with
that for now I don't care publish ok now
131 install the installations so now
that's that's published right so now if
you go and into your market ok you
should be able to find it on your device
right yeah yeah so so if I go ah let me
so what I'm going to do is I'm gonna
enable my my settings so it might be
bugging so you guys can actually see my
phone oops so development USB debugging
so I'm going to enable it ok I'm going
to connect my my physical phone ok and
then I'm going to go to a market so so
what I'm doing now isn't going to ddms
to show you that that on the market if I
search for it there's my app right I can
click on it and that looks like this now
so young boys yet another microblogging
app blahh oh blahh recent changes right
and you can't see because the windows
too big but it says the bottom update or
uninstall i'm going to click on update
and it's this is the warning this
application will replace the currently
installed application
existing user data will be saved however
remember how we did a poor man's job of
updating the database so I don't know
exactly what's going to happen it's
gonna probably blow away the database
because actually it doesn't track them
the version numbers now here's where
it's asking it says this application
access the following storage income in
network so this is how it's telling you
as the user are you okay with this and
it's a binary yes-or-no so if you did
this if you do not allow it then it's
just not going to be able to go go ahead
with it so I'm going to click OK and
this is where it's actually refreshing
is being downloaded at some point you
know it's downloaded and sailed the let
you know means sexually downloaded you
know second so at this point let me so
it says that it's successfully that it
says down there it's successfully
installed and if I now open it color I'm
going to go open it refresh so that's my
screen there's my um Bob I'm going to
click on it and I'm going to refresh see
this time already had used as yet I had
some data from before and that's why it
didn't go to my preferences because I
did an update as opposed to you know
whatever but I might probably what i
have is not even it's from the old
version so i don't even know yeah you
know i generally I wasn't really
concerned about keeping other people's
data to to secure but at the bottom
there's now the menu as you but you
can't sit now let me slip you flip it
like this so you can actually see it see
what happens my phone got stuck
let me do it like this okay so there's
the application rotate their there you
can all see it so menu and so if I if I
do menu you can see that rotate there's
many all that stuff is there i'm going
to say preferences so refresh there's
preferences right and i'm going to
quickly update my using so learning
android password is probably okay uh-huh
what's missing is the server right so
the server information is missing so i'm
going to set it up so a server is HTT so
HTTP colon slash slash learn throw it
dot stud2 dot net / AP I done right so
that's what it is now oops not don't
save it rotate it so that's what the
what that's what that is I save it I go
back and click on menu in start service
rotate so now presumably you know
presumably we found data but this
doesn't get updated automatically okay
so we need to we're going to need to
figure that out okay what's going on
with that so well we'll look into that
next again that's broadcast receivers
you're gonna come in candor but so far
does that make sense call to publish an
application to the market right so so
any questions comments
okay so if i run it here so does it work
in terms of death refresh that so it
happens on them on the on the home page
and all that on the main page timeline
activity
notice this did anybody notice that so
when I'm scrawling what happens to my
background what's that it is Pierce why
is that so this is a this is an attempt
to kind of optimize the UI so basically
while I'm doing this it actually resets
the background to just a solid color to
make it to redraw faster okay and
there's a way to tell it not to but this
is the default behavior exactly so
basically to disable that what we need
to do is we need to in our timeline
layout for our timeline at for our list
we need to assign the color for the cash
so let me try this so basically what I'm
saying by default it's gonna it's going
to try to be smart about how to check
how to optimize our colors and and
that's the default behavior if you want
to change that we've got to basically
override that sony music this is going
to work aha see if you set that cash now
it ignores that it's actually keeping
the background is this yeah that's a
little a little feature no reformatted
so it's like set so it's Android cash
color hint
so far so good on that
feel free to download the the app from
the market and filter to give it five
stars thank you five stars and then at
some point you're going to charge to
find a box for it of course that's the
maximum that's why I charge to kind of
bucks but the world I put that I am
published it I didn't think was fair I
think it's thirty percent right yeah
cool okay so that's about publishing so
let let's next look at broadcast
receivers so we published our app now we
need to do some changes
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>