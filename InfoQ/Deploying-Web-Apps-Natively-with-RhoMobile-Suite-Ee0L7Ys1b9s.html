<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Deploying Web Apps Natively with RhoMobile Suite | Coder Coacher - Coaching Coders</title><meta content="Deploying Web Apps Natively with RhoMobile Suite - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/InfoQ/">InfoQ</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Deploying Web Apps Natively with RhoMobile Suite</b></h2><h5 class="post__date">2012-08-14</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Ee0L7Ys1b9s" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">the session is is about deploying web
apps natively so if you're expecting a
different session you might be in the
wrong place if you are expecting this
session then you're in the right place
my name is is jeff / amba and i'm a
senior manager of software solutions for
North America here at Motorola and
primarily we're going to be talking
about today fairly briefly is what about
the scenario when you already have an
existing web application and you want to
take that existing web application and
you want to create a native application
out we've had multiple sessions where
we've talked about raw elements and the
role mobile framework and how we're all
about using web-based technology to
create these native applications now
we're going to talk about the scenario
where you have an existing web app and
how you can use the role mobile sweet to
to create native applications so let's
start by you know discussing the anatomy
and a little bit of history with regards
to web applications we're not going to
spend a whole lot of time here I'm not
here to give you a nin depth history
lesson on web applications but I just
want to do a little bit of level setting
and talk about the different varieties
of web apps that we might be talking
about again just so we have sort of some
common definitions and at least you know
where I'm coming from when I'm talking
about web applications so so early on in
the days of web applications and in fact
even today you can find web apps that
are primarily just static content
they're very simple they have no data
back end integrations they're just
static content HTML CSS JavaScript you
know very simple very direct now again
early on in the days of the web web app
developers soon realized that hey a lot
of times these simple applications are
just not enough
we need to integrate with back-end data
we need to expose that bet data and so
the early method was really to use what
we're called CGI scripts right later we
started to get a proliferation of
different frameworks for writing very
diverse in integrative web apps right
you have asp.net java servlets and JSP
pages Ruby on Rails PHP we have all
these platforms now for running back end
web apps right and of course the latest
sort of evolution as I like to refer to
it is web to do where you really have a
nice clean separation of concerns where
HTML you know really is about exposing
the structure of your data where your
your business logic is in your
JavaScript and your styling is separated
out into into style sheets and and what
you'll also find is just some
technologies like like html5 and offline
data storage now taking this web to toe
technology and having it being brought
to mobile right being able to operate
offline so let's talk a little bit about
the three-tier architecture or Model
View controller that is you know really
become a best practice in terms of
architecting your web applications now
this some this diagram you know some
people may debate whether this is true
model view controller but I think for
the purposes of our discussion here
we're really just trying to show whether
you call it three tier or Model View
controller or whatever is just that
there's a clean separation between your
view or your presentation layer your
controller or your business logic and
your data or your model right just show
of hands how many people here are
familiar with the Model View controller
design pad yeah
pretty ubiquitous okay so let's talk
first about porting static content right
again we talked about one scenario being
that we just have static content HTML
pages javascript CSS so let's talk about
that scenario first off so first let's
take a look at a row elements project
layout and if you were in Rob's Rob
Galvan's earlier presentation he went
over this a little bit I don't want to
redo too much of what Rob did but I just
wanted again make sure that everyone has
a level set of what we're dealing first
off in a role in this project underneath
the project name you have two primary
folders that are important for you to
know about when you're porting your web
application so the first one is the app
folder and the app folder is where you
are going to put dynamic content right
content that's typically data-driven
content that's going to be generated
rather than static okay and this is also
where you were you delve into the the
Ruby MVC framework right then you have
your public directory and the public
directory is where you put your static
content and another thing that Rob
mentioned earlier that I want to
reiterate is the way to think of row
elements on the device is that it
behaves like a web server so it's like
having your own personal web server on
the device and any you know you guys
being interested in web applications
you're probably familiar with with web
servers you typically have this public
directory where you put your static
content so again public folder for
static content HTML CSS JavaScript and
the app folder where we go down into the
Ruby MVC framework now static content in
the public folder is arranged you have a
CSS folder for your style sheets
JavaScript folder for JavaScript images
HTML
you don't have to follow this paradigm
this is sort of put there for you as a
default organizational paradigm if you
want to wipe out these these folders and
put your own structure in you can do
that in fact what I'm going to talk
about first in terms of us taking our
static web application and bringing it
into a row elements project is you are
going to basically take your files right
underneath your public directory and
you're simply going to copy it into our
public directory okay and I'll show you
a demo of that in a few minutes of me
take I took a pure html5 app that our
training department wrote and dropped it
into the the public directory in a row
elements project now after you copy the
files there's only two other steps that
you have to do to enable the project to
to be run native okay the first thing
that you need to do is you need to go
into the row config text file and you
need to reset the start path now by
default the star path is going to go to
the app folder and it's going to bring
up the start page which is indexed ER be
ok so what you want to do is again this
is the scenario where you have a static
web app you know a web app with just
static web resources you want to point
to that as your start path so in my
example here it's in public and it's got
an index HTM page ok yours may be
different and again feel free to utilize
whatever structure underneath that
public directory that you want the other
thing I will point out to you is that
right now there is a bug in Rose studio
that if you open row config text in row
studio and change the start path and
then save it and go to run it rose to do
is overwriting the star path back to the
original one so there's a very simple
workaround just open the file in a text
editor
make the change in save it it's only if
you make the change within row studio
that it overwrites it that bug is going
to be fixed with our next point release
but right now it's just a little
something to keep in mind in case you
run into it okay so step one copy the
files step to set your appt entry point
step three is to remove the default
toolbar so by default we provide a
toolbar in our apps there's a very easy
way to remove that which is just go to
the application darby file in the app
directory and you either uncomment or
add the following line which is a tad
toolbar equals now by default it should
be in that in that file commented
comment it out you would just uncomment
it but in case it's not there just add
that line now I will also point out
another thing that you can do i
mentioned copying files into the public
directory and that's the way that's the
way i ported this app that I I was
telling you about the the training app
that that I poured it in you can also
choose to to cash or files right so I'm
just going to bring up the fact that one
of the new Russians they knew one of the
core features of html5 is the ability to
take take files and cash them locally
all right so you can create a cache
manifest file you can identify files
that that you want cash locally right
and then what you can do is you can
actually take your work start path and
point it to a web server external web
server that's serving up those pages
okay so a little bit of flexibility here
again my preferred methodologies just
take the whole web app of static content
copy it into the public directory but I
want you to sort of think about the fact
that that you also have some of these
html5 techniques at your disposal as
well okay
so now before we get into porting the
dynamic content what I want to do is
just take a quick exercise I'm going to
show you how I took that that training
appt and ported it into Rho studio and
just show it show you it running in a in
a couple of different ways so first I'm
going to pull up Rose studio and
actually I have I'm going to have two
instances of Rho studio running i'm
going to have Rho studio running on my
mac and I'm also going to have it
running in a virtual machine running
windows 7 and i'm just i'm going to show
you this because i want to show you how
you can take this one web app and how it
runs on a couple of different platforms
and looks the same okay so this is my
windows 7 virtual machine this is the
the application definition that i
created and it may be a bit hard for you
to see the files here but again all i
did all i did was take that entire web
application and copy it wholesale into
the public directory I made those two
other changes that i told you about with
the with the start path and removing the
toolbar and created a run configuration
and here's the application running so
again this was a neat little html5 app
that our that our training department
created okay and this is this is seeing
it run in a windows mobile emulator and
I can also tell you that we took this
app we compiled it to native windows
mobile and we had this running at at the
National Retail Federation show in
january so in case you're skeptical of
what this would look like on Windows
Mobile this is in fact what it would
look like on Windows Mobile we had it on
a device and it was just taking the
three steps that I mentioned to you and
and then building for target of windows
mobile now we're also going to take that
same definition where I took that same
definition excuse me and I put it into a
project on my mac and i just want to
show you it running in in my mac my
iphone emulated rather
so we'll take a moment or two for my
iphone emulator come up but again what I
wanted to do is I wanted to show you
sort of the look and feel of this this
pure html5 web app that that was ported
to native both for iphone and windows
mobile in in some very easy and
straightforward steps so just take a
moment while that's coming up this is
this is by the way a good illustration
of why the row simulator is is so great
you saw how quickly it came up in my my
windows virtual machine and it'll take
you'll take about a minute or so for it
to come up for my mac mu or my iphone
emulator to come up so the i think the
question is you know can you run the
iphone emulator on my windows virtual
machine so so the answer is yes and no
so you can use the row simulator to
emulate an iphone on a Windows platform
but you can't run the iOS emulator on
Windows platform so here's here's the
app running on my iPhone simulator and
I'm just going to I'm going to take the
emulator and I'm I'm going to change the
orientation
to give my machine a moment it's it's
weighed down a little bit with a couple
of development environments and virtual
machines running but at the top of my
screen in a moment I should have a an
option related to the the iOS emulator
rather than wait how that will come up
in a little bit while while we're
waiting for that I'll just show you that
the again here's the the application
running on iphone again with no changes
right it was just the exact same
application dropped into the public
directory to small changes compile for
the target so again at NRF what we had
was we had a motorola device running
Windows Mobile we had an iphone and we
ran them side by side again the same app
that was pure web app ported for native
ok ok so that was porting static content
right so you know that's kind of a neat
trick right it's nice if if you have a
web app like this like this training app
that I showed you where you have all
static content it's all HTML CSS
JavaScript but you know let's be honest
here typically your web apps are going
to be more complex a lot of times
they're going to involve some back-end
data integration right very often the
real world scenario is that it's not
going to be that easy I will have
server-side logic data definitions
generated HTML so let's let's take a
look at these pieces one by one and see
what our approach is in a more
complicated scenario so first let's talk
about some web app considerations first
of all is that typically resources are
referred to using relative URLs right
and this is important because remember
we're talking about having a
own little web server kind of running on
the on the device so what we want to do
is we want to stay away from absolute
URLs because they'll continue to call
out but if you've architected your
application with relative URLs which I'm
sure you all do but I just wanted to
state this then you should be fine in
terms of moving the application from
your public directory into ours ok
second is let's talk about business
logic right so typically if you have a
web app with dynamic content your
business logic is probably going to be a
combination of client-side JavaScript
and back-end server type pages right so
it might be in in PHP pages or asp asp
net ruby right you probably have some
level of business logic in these
server-side pages and finally data now
analyzing the data in your application
and the flow of your data is the most
fundamental aspect of architecting your
application I didn't I didn't give too
much of a background about myself before
we started off but i'll just let you
know that you know prior to becoming a
product manager at motorola i spent a
little over seven and a half years out
in the field architecting and deploying
mobile enterprise applications i can
tell you that over that time you know i
discovered as a best practice that when
you're architecting an application you
always start with the data you always
analyze the flow of that data almost
before you do anything else understand
what data is going to be in your
application visualize how it's going to
flow throughout that app and into your
back-end systems so some of the
questions that you need to ask right are
what data can be cached locally and
nsync right of the data that's used in
that application that web application
that you have is it appropriate for that
to be brought down to the device is that
reasonable or you know what data has to
be communicated
real time with the server ideally all
the data can be brought down to the to
the device but there may be instances
where you have to have a real-time feed
what ap is do you use to access your
data right are you using raw sequel
statements to access your data from your
from your back-end systems right or from
your from your business logic right do
you have an object relational manager
that you're using you have custom
Enterprise backend API is like Pappy's
or something for SI p that you're using
right how are you getting at your data
the reason I say that you need to
understand this is because remember part
of what you're going to be porting your
dynamic web application to is our
structure and our format so you need to
understand what you have in your web app
and and what it's got what it's going to
be targeted towards so let's talk about
architecting the app a little bit right
let's start with the analysis phase
right again what resources need to be
local okay what resources do you have to
have on your device do you need to
operate disconnected I think we at
Motorola feel that a true enterprise
application is one that functions
offline as well as amla or in what we
call an opportunistically connected
state right but you have a web app was
that web app architected to be offline
was it architected to always be
connected and do you want to change that
it may have been architected to be
always online but one of the reasons you
want to bring it to mobile maybe that
you want to enable this sort of
opportunistic connectivity okay so let's
talk about about the design right one of
the design options that you have is that
your resources may be accessed from a
back-end server or locally on the device
or a mixture of both right remember we
talked about
the fact that you can think of row
elements is having your own web server
on your device so what this means is
that you can point to resources locally
on the device using URLs or you can
point to external URLs you can mix and
match right so you don't have to you
don't have to make a sweeping decision
about where your resources are going to
resign which gives you a lot of design
options but also means that you have to
take that into account you have to
understand you know if you are using
external resources how does your
connectivity relate to them do you if
you are using external resources do you
want to then put that in a cache
manifest and and cash that look or do
you want to just bring it down with
other resources if local data is desired
then you may need some sort of sync
technology like row connect those of you
who are here with with Adam prior to
this presentation you saw some of the
great features that row connect has to
offer but regardless whether you use
Road connect you will probably want some
sort of synchronization technology if
you want to bring that data locally
right because you will want to operate
in that opportunistically connected
scenario right and the other thing is
that in terms of design and Adam also
talked about this local data tends to
make apps look more responsive right
because you are grabbing the data
locally from the device and typically
that's what you are waiting on in a web
app right you're waiting for data from
the from the server so again this has
been a theme I've been talking about
over and over again right you have your
own personal web app server when you
talk about row elements the structure is
modeled after early ruby-on-rails for
those of you who are familiar with the
current version of ruby-on-rails ruby on
rails has really evolved into you know
quite a robust and at times complex
environment right now
raw elements is quite a bit simpler
right sort of traces its roots back to
the early versions of Ruby on Rails and
and basically what you have is you have
view templates which utilize embedded
Ruby they're indicated with the
extension dot e RB you have controller
files right in those controller files
you have Ruby classes with with methods
and finally you have Ruby models or data
definitions that are also Ruby classes
okay so this is a this is the Ruby
model-view-controller framework and this
is these are the sort of targets that
we're going to address as we talk about
taking your web application and bringing
it into our structure so again this is
this is sort of the fundamental
structure you'll have a folder with your
model name and then within that within
that folder you will have those three
types of files so let's first talk about
porting the user interface okay we've
already talked about the fact that you
can utilize static HTML as it's your
static HTML you can take and can drop
into the public folder okay now
dynamically generated HTML what we would
want you to do is we want you to take
that and convert it to our metod movie
templates ok so again you may generate
you may generate dynamic HTML using
asp.net or JSP or PHP or something like
that we do this on the device using
these Ruby templates they tend to be
very straightforward so in other words
taking your dynamically generated HTML
if it's done like I said either in
asp.net or JSP or whatever it's probably
going to be a fairly straightforward
conversion right here's an example of an
H one of our embedded Ruby templates you
can see that for the most part it's just
straight HTML there's a little bit of
embedded Ruby script and typically what
is there
or is to do things like loop through
data sets and pull data out of variables
and we also have a couple of examples of
helpers but helpers do things like
generate the URLs for you so for example
you can see that in this anchor where
I'm setting up the the reference right
i'm using a helper called URL for and
what I'm doing is I'm passing it an
action of show and an ID from my product
object okay so again what this is going
to do I could certainly have hard-coded
the the URL right to point my internal
resource on the device but this is a
helper file to make it easier for you
okay so you can specify the action
specify the ID and it's a little bit
more flexible and generic when you when
you create your code but in general like
I said there's not a lot of complexity
of these these templates right again for
the most part you'll use the the
embedded Ruby to do things like loop
through data sets and pull data out of
from out of variables okay so let's talk
about data so again if you want local
local data on the device as part of your
native application you can use our Ruby
models as Adam mentioned in our in our
previous discussion and robbed it as
well our Ruby models are very
straightforward to set up we've got two
types of Ruby models we have a fixed
schema where you actually can specify
the attributes and then we have property
bag which is extremely flexible where
you don't have to specify the schema
ahead of time whatever attributes you
pass that model it saves and let me just
say that that this is an incredibly
powerful way of defining your data
definitions a lot of you may be used to
other forms of data definition where you
have to not only
specify all the attributes but also the
data types and if you get anything wrong
you're going to spend a lot of time
debugging it so it i think it's it's
actually kind of great that that's
specifying your data models and using
them in row elements is actually very
straightforward and it also takes away
some of the effort that you'd have
importing your web app over right now
the the backend server logic right can
either be called directly or converted
to to Ruby controllers okay your
JavaScript libraries can give can also
give access to local data so in other
words you don't have to use our Ruby
models for your data there are also
JavaScript libraries which give you
access to the sequel light database and
roll elements i would suggest using the
ruby models because they're very
straightforward and so easy to use and
and and really seamlessly integrate with
the rest of the platform but again i
don't want you to think that you have to
use them if you want to use some other
javascript framework that gives you
access to the local data you can do that
i mentioned the dynamic are fixed
schemas that Ruby model support and I'll
also say that the data that you have in
our Ruby models is accessible through
our object relational map okay this is
fantastic right because it means that
you're not writing ross equal to get
your data so again a very convenient and
easy way to to get at your data that's
been ported locally okay the Ruby models
themselves as I said they're pretty easy
and straightforward they support two
types of data string or binary objects
okay so you don't have to worry about
all of the data types that you may need
to be you know defining and mapping and
support right
so let's talk about business logic now
reporting business logic your business
logic from your web app can be retained
in JavaScript if you if you currently
have your business logic in JavaScript
you can keep it there that's fine your
back-end server logic can be called
directly so for instance you can make
you can make Ajax calls to your existing
your existing web app server or you can
take that existing business logic and
convert it to Ruby controllers or client
JavaScript right so again remember that
you you probably have some business
logic right now tied up in ASP pages or
PHP or in a Java servlet right so your
your options you can still call that
server if you have connectivity or
you're looking to migrate that right you
probably you have two choices right
either put that into a ruby controller
and Ruby controllers again are very
straightforward we'll take a look at a
sample class or you can put it into
JavaScript okay but but your back-end
logic if you do want to be able to have
access to it you know disconnected you
will want to move that to your um you
know to some sort of mobile form either
JavaScript or our Ruby controllers Ruby
controllers are called on the device
through a URL paradigm and this is also
something that that Rob Galvin talked
about earlier right so few you know a
few examples here first of all a typical
you know template for the URL you're
going to be going down into the app
directory you'll have your business
object name specify the action name
which is also analogous to a method and
then you can attach the ID as well okay
so so I'll show you an example of how
this how this plays out now so here's an
example of a URL where you have appt
product show one two three four five and
what this translates as
show me the product right with the ID
equals 1 2 3 4 5 any of you that have
done rails development this is second
nature but but this is if this is new to
you this is just a very structured easy
way of calling into your controllers in
your business logic so here's another
example where the URL is just app and
customer and what their are our
conventions right that we adhere to so
if you just specify the business object
name or the model name what you'll get
is you will call the customer controller
right and you will call that index
action index is sort of the default if
you don't specify an action so this is
also an example where you don't have to
specify an ID right now specifying an ID
will pass that parameter to that method
but you don't have to you don't have to
use it you don't have to specify it so
let's take a look at a sample controller
class I said that the Ruby controllers
are pretty straightforward right ruby is
an object-oriented language it's it's
not all that different from other object
oriented languages like C sharp or Java
I am by trade primarily a Java developer
you have a class definition that
inherits from some classes that we
provide and basically what you'll see
here is that is that you have a couple
of a couple of methods to find here that
we call actions okay so these two
methods index and show these are these
are methods but you you saw in the
previous example how we specify these
actions based on the URL and in fact
right in in the comments above each
method you can see that there's actual
an actual example of what the URL would
look like to call that action okay any
questions about that does it all make
sense okay
alright so now we talked about the steps
that it would take to port the app right
we broke it down into porting the user
interface reporting the business logic
and then the data definitions we talked
about some of the steps and
considerations ported the app now what
do i do first of all once you have the
app definition in row studio you can
take that single app definition that you
have and you can now build for the
native device targets that you want to
support so you can make a build for
windows mobile make a bill for iOS make
a build for Android we're not going to
go through defining the build process
that those are separate tutorials and
separate classes we have tons of
documentation on that once you do your
build once you you have your native
executable from that definition then you
can use whatever mechanisms that you
want to deploy native apps right we have
a tool called row gallery that you can
use but if you if you use something like
Motorola's MSP or afaria or you know if
you want to put it in the apple app
store all of all you have is you have a
native app package that you can do
whatever you want with it so for windows
mobile you would get a cab file for
Android you can get an APK etc etc and
then share and enjoy your web app so in
summary static content is very
straightforward and easy right it's a
it's a straight drop into the public
directory that we have and again keep in
the back of your mind that that row
elements is like having your own web
server on the device dynamic content is
trickier right there's a lot of
considerations to to bear in mind when
you're porting your web app there's no
silver bullet there's no magic button
that you just push and everything comes
over right however what we do have is we
have a really great structure for
porting data models business logic and
view templates because we have that MVC
separation odds are that you might be
using that same design paradigm so you
will already have your code broken up
into its user interface its business
logic and its data models right so all
you need to do
understand what we need to support that
and typically our requirements are
fairly lean and straightforward you can
convert to our Ruby based MVC framework
you can utilize HTML and JavaScript or
you can mix and match you can take some
of your business logic put that in
static HTML and JavaScript or you can
take some of your business logic and put
it into our Ruby MVC framework or pieces
of both now it's one of the great things
about our framework it's very flexible
you have a lot of options in terms of
how you want to do that treat the
applica local web server on the device
and first and foremost start your
analysis by analyzing the flow of data
in your application great well thanks
very much for for coming once you guys
go
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>