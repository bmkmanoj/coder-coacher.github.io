<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Put Some Backbone.js in your Apps | Coder Coacher - Coaching Coders</title><meta content="Put Some Backbone.js in your Apps - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/InfoQ/">InfoQ</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Put Some Backbone.js in your Apps</b></h2><h5 class="post__date">2012-11-15</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/jM8KE_Fa6JI" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">we're gonna talk about putting some
backbone in your applications we're
talking about backbone jazz today my
name is Sid Maestri I am the platform
evangelist at stack mob and what we do
at stack mob is we are a a platform as a
service for mobile developers to help
you build deploy and grow your mobile
apps with a full-featured back-end
we provide you an SDK you drop it into
your project and magically you've got a
data store in the cloud we support both
native and JavaScript and in fact our
JavaScript SDK is built on top of
backbone as an extension which ll show
you near the end of the presentation my
talk today is about the nuts and bolts
behind backbone and these sort of
underpinnings if you aren't familiar
with backbone then this is this is gonna
be a great session for you if you've
been building apps for the last year on
backbone the first half might be a
little bit sort of the fundamentals and
you're familiar with them but the ending
part where we talk about stack mob might
be of interest to you so I hope I have a
mix of something for everyone today so
for the agenda we'll take just a quick
overview like MVC as a landscape what's
out there different frameworks and what
your options are to evaluate them models
collections our views and templates
how do routers work and then at the end
how you can put a little data storage
behind it with stack mob so the
landscape this is a nice slide I found
online or light a nice image that shows
three different libraries but as you
know we we are awash with JavaScript
libraries so many to choose from so
little time I had heard of backbone.js
probably first and then I started
hearing about all these other libraries
and and I was actually a little bit
leaning towards checking out spine
because I had heard a podcast
where the author was talking but then I
joined stack mob and sort of my fate was
sealed that I wanted to to dive into
backbone but I think it's important for
you to look at you know do some
evaluation I think that these all have
different approaches to a similar common
problem which is using a model view
controller pattern on the client to to
separate our concerns to help you have
more modular reusable code so I would
recommend if you are still in the
evaluation stage to go and check out
addy osmani z-- to do MVC project on
github he's actually taken our hello
world app which is I guess a to-do app
now and he's implemented it and other
people are contributing and they're
implementing it in all these different
MVC frameworks so you can actually see
how the pieces fit together and figure
out which one has the philosophy that
that you agree with or that best fits
your project so for today I'm gonna be
working on a basic wine tasting app as
you can see there's just one field so
it's kind of like a to-do app but I have
an affinity towards wine so I made it a
wine tasting app and we're gonna start
with just like I said the basic building
blocks and we're just gonna keep adding
more and more features in backbone until
we actually have a fully functioning app
so MVC I'm sure most of us are familiar
with Model View controller but it's a
way of separating our data from the
views that our users interact with and
in between the two we've got this
concept of a controller that will take
input and we'll we'll pass it sort of
pass it from the view back into your
model so for example I have a form I
press a button that's in my view the
controller takes the data from my view
from my form let's say and then pushes
it into my model for me
and then here's where the important
piece is the model doesn't tell the view
what to do and the view doesn't reach
to the model and know what the model has
to display what the view does it's more
passive it it's basically listens for
changes and this is how backbone does it
it says anytime the model changes the
view says I want to update myself I want
to refresh my or rerender my view and so
it keeps it separated and keeps it
decoupled and makes it reusable so that
same model can be reused in different
views and if you change your model your
your you don't have to worry like you're
gonna break your view because it's
reaching and talking to it when you want
to get started with backbone you're
gonna include several libraries
including a jQuery as well as the
underscore library the reason why you
include underscore is because backbone
is dependent on that it uses several of
the helper methods to do manipulation on
arrays and objects so you need to
include that library so let's jump into
it the model right with our model we're
talking about data that's the matrix for
those of you younger folk oh great movie
the other two not so good but the first
one was great so here we're we're
defining our model and as you can see we
have a wine model it's equal to backbone
model dot extend and there's nothing
else to it that's our models been
defined at that point and then we wanted
what we want to do is we want to create
an actual instance of our model so I
create a variable called first wine and
I'm setting one property on it its name
we could set multiple properties but in
this case we're just setting one so I'm
gonna jump over here to all my little
demo code here and there it is there's
your model the white screen of
nothingness will be seen a little bit of
today because there is no view right
it's just our model but with our nice
web inspector here we can actually go in
and we can grab the first wine and we
can output it to our console and when we
expand it we see
you know some different methods and and
in here we see some attributes which are
nice so we can actually dig in there and
dig into our attributes and find out
what the name is something that backbone
provides it's really nice is a method
called to JSON so if i do first wine to
json and now I hit enter actually get a
JSON object back which has my name and
and tells me what's going on inside of
it now we also get some additional nice
little helper libraries like we can say
first wine and I can say get and I can
actually go and get the name so we have
a nice getter right right there we can
also do let's set up we can say set and
let's say we want to set the year so I'm
going to set the year to 2009 okay now
just set a new property on my on my
model and when I output it and take a
look inside now we get our name in our
year and of course you could update the
name in a similar fashion if you'd like
to
so what are the options there's lots of
options you can definitely dig into the
documentation one thing that you might
want to do is you might want to set a
default so you could set the default
value so if I create a new instance of
my model it will by default be two buck
chuck I might want to have a method on
my model so that when I call the update
name method I can pass in a name and
then it sets it a little bit of a
trivial example I guess as far as
methods go but I think it illustrates
the point pretty well so collections so
this is where we talked about observing
right instead of having our view
watching all of our models and having to
listen to all these models instead it's
a lot easier if we just have our view
watch a collection and that way if any
of the models change in that collection
it's gonna fire that change event that
the view is looking for and observing
and then the view knows it needs to
update itself so collections are
basically a grouping of models right
like rows in a database table and so
when we want to define our model we
simply define our collection we simply
define a model first and then we take
and we define a collection I'm just
doing it as a plural wines and the model
is wine and there's one additional
parameter which is the URL and the
reason we have that is because backbone
wants to be restful it wants to have a
restful endpoint behind this collection
so that when I add something to my
collection it will be persisted
somewhere if you don't want to do that
then you can just do what I've done
which is just put a pound sign there and
it won't go anywhere it'll essentially
just live in that session for that that
browser window and when you close the
window or you refresh the browser the
collection and the models will go away
but that's the whole purpose of that URL
parameters to have that restful back-end
and I think that's why our JavaScript
engineer went with backbone for stack
mob
so I'm going to initialize my my
collection here and when I initialize it
I'm going to actually pass in some some
objects to to populate it off the bat so
I'm going to go ahead and create that
but actually before that I won't do
something real quick I actually just
want to create my my model here manually
so I'm gonna say wines equals new wines
so I just create a new instance of my of
my collection and now if I actually go
ahead and output that to a JSON we get
our empty array which is what we're
expecting right we've just created a new
instance of our collection it's going to
be an array of models and so we haven't
populated it now if I go into my example
for collections number two here it's
actually pre-populating it and then
outputting it here too to our console so
I've got two two models in my collection
I've got a Robert Mondavi and Cakebread
sounds good
and with our collections we're gonna be
able to loop over our collections and we
want to populate let's say a list very
popular with with our mobile
applications is our master detail view
so here I'm pulling out my wines that
I've added and I'm doing the each method
and I loop over at each time I loop over
it it calls a function and it passes in
one argument which is the actual model
that I'm that I'm iterating over and I'm
just pulling out the name out of that
and so here it creates it loops over it
outputs the names nothing too fancy
there and you can add methods onto your
collections as well so you can say for
my new instance of wines I want to
listen for anytime the add method is
called and when that happens I then want
to call this function and say that the
collection has changed
oops for what
okay so now it's now my collections
change so let's go ahead and take a look
at our wines right now so I've got one
object in there and if I wanted to I
could go in here and I could actually
manually add one more go in here
oops
oh sorry
okay so now I've added it and I get my
message and I add again I add again and
now when I output it I've got four
objects in my array but maybe I want to
remove something maybe I've decided that
I want to go in and pull that first item
that I put into my collection I want to
go ahead and delete that so how do we go
about doing that
we simply I'm going to create a variable
called my first item because I want to
grab the first one out of my array and I
say wines at I'm going to grab with the
one in the first position and let's go
make sure we grab the right one here so
there's clove becauce and I decide I
want to get rid of that so I go wines
remove and I pass in my model there and
when I pass in that model it's gonna
know that I need to remove that one and
now I've got three am I in my collection
so now let's get into the important part
which is our views right this is where
we're actually gonna start seeing things
onto the on our screens and something
that I thought was a little bit of like
not a total light bulb but a little bit
like okay yeah that makes total sense is
the fact that when we talk about views a
view isn't the screen on your browser a
view is any visual element so a button
can be a view a list can be a view your
entire screen can be your view so when
you're building your apps with backbone
you're going to be embedding views
within views and when you update things
you might be removing a view and
replacing it with another view perhaps
so it's always good to think about any
element visual element can be a view and
it kind of helps you break your app down
and architect it so here I'm creating a
very basic view here and there isn't
much going on but it's still nice to run
it and see what's going on inside in our
console so here I've got my my new
instance of home and I want to actually
create it so I'll say
my wine app is gonna be equal to a new
home view and when I help put the the
wine app we see okay we've got something
called a L here we've got a CI D that's
our client ID we've got another L I'm
not sure why of course and what's going
on here so this is one of the things
that I get I think it's lost in all the
tutorials that are out there about
backbone is the concept of what what is
this AL this element property and this
is what I consider like an empty box or
a bucket that you're going to be putting
things inside of and so if I go into
wine app here and I just output what the
e L is it's a div so it's an empty div
that I'm going to be putting things in
and you might ask yourself well I didn't
define it though right I that code in my
slide deck this is all I defined I
didn't define this element well it gets
created for you by default and it's
gonna be the default is a div and so
when you start looking at these sample
apps that are built you may see that the
the element has been defined and
sometimes it's not so it's always good
to sort of check that out and see what
the what the author is doing with that
example but back in our example we can
see there's also another one which is
our dollar sign Al and this is our
jQuery representation of our element so
you'll be using this as a really a
shorthand for appending data and filling
your box so you'll be calling dollar
sign al quite a bit and you'll be
appending HTML or other sorts of data
and actually placing it inside of your
div element okay so now we're gonna do a
talk about rendering okay cuz it's kind
of a multi-step process you you figure
out what your element is and then we
want to render it and as you'll see here
there's our dollar sign element we're
appending some HTML to it and we're
returning this the reason that you want
to include the return this statement is
because that will
allow you to chain your methods together
and actually pull information out of
your view after you've rendered it maybe
you want to render it and then pull that
element out of it and append it to
another div in another view perhaps so
I'm gonna go and run this example here
and so there's my home view and I'm
gonna try running the render method here
and now when I look inside my element I
can see that I've got my HTML has been
appended to it but it's still not
showing up on my screen right I still
need to there's one piece missing
there's another step missing and I need
to to figure that out so I'm gonna just
do one more thing here just to see what
happens if I call and I render again and
now I'll put my element Oh
that's not doing what's supposed to be
doing that's okay go back
so we don't want to have to manually
render our views every time we call them
that seems like extra work so with
backbone you can use this initialized
statement in any of your views and
you'll see this a lot you'll see this
dot render and this will just take care
of that step that I did manually in the
previous example but what if I don't
want to I don't want my box to be a div
let's say I want my box to be the entire
body for my page or maybe I want to
target a class or another HTML element
you can definitely do that using
backbone here I'm setting my element to
a specific HTML element the body and
inside my render function I'm actually
emptying it out first and the reason
you'll do that is because if you don't
you end up re-rendering the same content
into the same element and you don't want
to keep rear-end during multiple times
especially if you're listening for
events that are being triggered multiple
times
so here I go to five and voila
were so excited we're seeing something
on our white screen now so those are the
those are the the basic steps for
getting your view up there but what if I
want a ListView so in this situation I'm
doing and I'm setting it as an unordered
list and I'm emptying it out first and
I'm appending a couple of list items
there and then in this code I'm actually
taking my home view and I want to create
a new instance of my list view and I
want to append it
well actually I want to take it I want
to render it and I want to grab the
element out of it and I want to append
it to my home view
so here I've got my my app and I've got
my my view being rendered inside there
my ListView being rendered inside there
and it's being appended on there
automatically for me
no templates okay so this is where it
this is where things get better I think
as far as why you want to use backbone
is the fact that you can use templates
now there's lots of different libraries
out there handlebars mustache lots of
different JavaScript frameworks actually
underscore.js comes with a basic
templating engine and so that's what
I've decided to use in my examples here
today and this helps you separate your
designers and your developers if you
need to your designers can focus on
creating these templates for you you can
dynamically load them into your apps and
use them when you need to and this is
what a basic template looks like we at
the top we've got a script tag we give
it an ID so that we can target it and
inside of it we have a list element and
you'll see it's got a like a percent
sign equals some like handlebars uses a
little curly double curly break braces
for for designating what is a variable
and what needs to be substituted
but essentially you pass in an adjacent
object and it will substitute whatever
values in your templates you've doesn't
you've designated as a variable that
needs to be replaced and then down below
in backbone
I've actually defined what my template
for this page is going to be by
targeting the item container and
grabbing the HTML from that and passing
it into the underscore templates method
well good and then we go and we grab our
element for this view and we say append
this template and then we pass in our
object here it's just passing in a value
of hello hello backbone
and there it is so we did those first
two lines we added and then we added a
third one using the template which you
know that's kind of okay that's not
super exciting what happens if I could
go and actually grab those wines out of
that collection and I could loop over
each of those pass it as an argument
each of those models take the model wine
to JSON pass that into a template and
append that to my list view now it
starts to get a little more interesting
and so here it's it's passing it in
there but my view still is a little bit
I won't say stupid but he still doesn't
know what's going on
in another couple slides you're gonna
see that we need to have our view listen
for changes in our collections so he can
update himself but before we get to that
I wanted to introduce the concept of
routers now routers were eventually were
previously called controllers in
backbones yes but they didn't really act
like controllers completely they sort of
were well more like a router where it
just kept information about the state of
your application and so that you could
actually target different routes that
would then load different views or take
different actions so here's an extremely
basic app router that has three
different endpoints the the root of your
app the the ad or the close and the way
you get to those routes is you just put
a pound sign at the end of your URL so
it would be localhost pound you know or
index dot HTML pound add and then that
would load the ad view and all it's
doing is it's just adding the the ad
view to our home screen
I'm gonna miss that meeting alright
alright so here I am I've got my I've
got my wine list I've got this nice
button over here that you probably can't
see too well but it's it's targeting the
hash tag and so it's targeting the end
route and I'm putting out some console
messages just so I know where I am in my
app so I click that it it hits the ad
view and then the add view adds itself
to the home view I actually have a
little fragment of HTML that I'm
targeting and I'm saying just append
this view here and when I hit the cancel
button it's actually calling a closed
route which is then just refreshing the
the home view and removing that add view
from there so that's all it's doing
nothing really fancy yet okay we covered
that okay and how do we start this whole
thing off because backbone actually can
keep track of your history so as you're
navigating forward and backwards in your
app backbone can actually keep track of
that history so that the back button in
your browser works properly and so
inside of a document ready tag I'm
initializing my app router and I'm
setting the backbone history to start
and this is I was talking about being a
fragment so that create new wine in that
whole form that is a view right there
that that's being targeted if I jump
back to the browser it's kind of nice to
look in here in the inspector and
actually see the HTML that's going on in
there
okay so here I've got this head cannot
this container I've got a header I've
got this row and I've got my my list
over here but my rows only do in a span
for I've still got some space on the
right side and so what I'm doing is I'm
targeting this row class and I'm doing
an append to it so when I click this
button it appends a span eight here and
inside of that is my actual template now
I'm not dynamically populating any data
in here yet but I definitely could and
this is my my add form and it can also
be my edit form if I want and this by
the last key piece of backbone
information and that's the concept of
events and the fact that you can
actually set to listen for click events
inside of your view so or or keypresses
or whatever kind of events you want to
listen for here I'm targeting a button
and when that add button gets clicked I
then want to call an add method that
I've defined this isn't something that
backbone gives you it gives you a lot of
latitude to define your own methods but
things like initialize and render those
are standard backbone methods but we are
we can start adding our own methods in
our own applications so here I'm doing
an ADD method so if I go here
back to the console and oops
and I come in here to my router and I
click add wine and I say hello and I
click the Add button now it's just
outputting
that value to the console and now this
is where we tie it all together we
introduce our models and collections
back so that we can actually store the
values from that form into our
collection and have the view listening
for those changes and update the just
the list on the left without touching
the rest of the page so here with add
I'm simply create a new instance of my
wine model and I'm using the add method
on my collection and then I'm clearing
the form here I'm doing a render so I'm
taking my ListView and I'm passing in my
collection of wines into the ListView
and then I'm rendering and appending it
to this span for and the reason why I
pass in that collection this is again
something that you have to sort of
remember and wrap your head around is
that I'm passing that collection so that
I can then bind to listen to any event
changes I can listen to a change event
but in this case I'm listening to all
events and if I hear any events coming
from my collection that it's changed
then I want to render this ListView
again and as you can see below I'm
simply clearing out that unordered list
and then looping over my collection and
populating it using a template so here I
add a new wine let's say hello I click
Add goodbye
and it's merely just appending those
into that list and it's updating itself
as it hears the changes occur so I
talked about fragments this is just
again the ListView is simply a view
within a view and it's listening for
changes in the collection and updating
itself and so when you look in the big
picture backbone isn't really a doesn't
follow the traditional model
model-view-controller pattern where it
actually has a separate controller it
actually has a lot of the controller
logic built into your view so it's sort
of a Model View controller or MV stars
is what they like to say and so how do
we hook this all back into a back-end
and persist our data without having to
write a lot of server-side code worrying
about our our back-end and our databases
and setting up our schemas and things
like that and so with stack mob where I
work we add an extension to backbone
where we add a JavaScript library and
after you add that you can initialize
the stack mob object with your public
key and once you've done that then you
can start defining your models and
collections to actually have a back-end
so this is how I would modify the
example that we were just working on
instead of calling backbone model dot
extend I call stack mob dot model dot
extend and I set the schema name to
wines and then same thing with my
collection I set it to the stack mob
collection and define my model and when
I initiate my new wines I can actually
call a fetch command and it'll go to the
server and pull down all of my my
current wines that are up there and I'm
running this on a local local PI Python
server here and so if we go back here if
i refresh this view oops sorry
if i refresh that app I was working with
before all my data goes away but if I go
over here to this to the one I'm running
with stack mob it actually goes in
fetches all of my wines when I first
load them up I can go in here I can add
a new wine I'm a chemist vineyards fan
and it adds camus onto my list there for
me dynamically and I added one other
feature I added the update route and
what the update route does is it
actually gets the ID from that gets
passed back from stack mob and actually
appends it to my URL so I go update
pound and then whatever my idea is and
when I hit the update route I'm going
into my collection and pulling out that
model and populating my form element and
so the JavaScript behind that when I
save an object I'm doing a create
instead of an add creates is how you
create a new object and when you do that
it hits stack mobs restful endpoint it
comes back with a success or error call
back and inside of that success is your
model including an ID and when you add
it to your collection it's now then
available for you locally in your
collection
and and here you can see this is where
my templates been modified I've actually
created a different template this is has
an update instead of an ad and what it
has is the wine ID being populated from
the JSON object along with the name and
also down here below you can see I'm
passing in when I call the update route
I passing in a parameter called e and
that is my ID and I just do wines get E
and it knows that it's going to get it
by the ID and pulls it back out of the
collection and passes it as a model to
my my update view and here so you can go
and grab any options you can pass any
option that you want to define to your
views so here I have one called this
options model that's getting that model
that's being passed from my router and I
sign it to a local variable this dot
model and then I can call a save method
on it when I save any changes to that to
that actual wine listing and when I call
save it persists it to my server and
then again we get a success and callback
handler now I actually have crammed
about a 90 minute or more course that I
did into this 45 minutes but I did do
this whole course on udemy on backbone
j/s it covers everything that I've done
here today but it also gives you some
more information about backbones sort of
stretched out a little bit more of a
screencast you can rewind it watch what
you want you can download all the
examples that I showed you here today at
this udemy course and there's my contact
information if you want to shoot me an
email after the fact or hit me up on
Twitter and ask any questions
so thanks for coming everybody</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>