<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Android Overview at Silicon Valley Code Camp | Coder Coacher - Coaching Coders</title><meta content="Android Overview at Silicon Valley Code Camp - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/InfoQ/">InfoQ</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Android Overview at Silicon Valley Code Camp</b></h2><h5 class="post__date">2011-10-09</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Dmryci-ZunQ" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so what what I'm going to talk about
today is how to build an application
that is essentially a little Twitter
application okay we call it t amba which
stands for yet another microblogging
application and that's basically what
they did in my book are basically
explained in details how to how to build
this app through multiple iterations so
we're going to talk about writing this
app in first and then at the end I'm
going to talk about code to write a
similar app but for the tablet so this
is the version of that app running on
honeycomb as well so i'll talk about the
differences along the way because
honeycomb is just it provides couple of
new things that it's not all that
different most of the best practices are
still the same between the two platforms
so so let me tell you a little bit about
this project called yamba hold on a
second I think I messed up with a screen
say which one it is so so we're going to
talk about this in a context of those
applications so i'll show you first what
those applications do so that you can an
understanding of what components article
talking about so you know we're going to
start top-down talk about the app first
then boil it down to lines in circles
sort of the back of a napkin design then
we can get to the actual code but
they're not going to just jump into the
podium and confuse the caracal to you so
with that let me just show you a little
bit about these apps so this is the the
tab the version of young power the
Twitter app for the regular phone
basically there are a couple of screens
there's one screen where you can see you
know the timeline what you what you
people are doing you can come scroll
through it you can you can see the
timeline there's another screen where
you can update the timeline you can say
for example here low from sv code
camp and what this does it attempts to
post it to the server and it depends on
a connection if it's going to work or
not typically a PSA a feedback so in
this case failed to post it could be any
number of network issues firewall and
stuff like that because it's running
instead of the emulator but if it does
work it normally goes to a tool to a web
server and in this case the web server
is actually not twitter com but we
actually use a our own controlled
environment which is basically adheres
for the very same API as weather but
because if we do stuff like this in
never loses the same username pass it to
them really quickly shots is down so
that's why we wanted to kind of create
our own private twitter person if we can
do testing but it's exactly the same API
so these are the posts from people all
over the world that are basically
building lumbar as an exercise following
the book so that's the screen number two
and then there's one more screen in the
skull thing and that's the screen where
you get to set the preference is pretty
standard in an application so you can do
you can you know update user name
password that sort of thing so these are
the three screens that exist in this
application other than that they're also
there are some services and things will
happen behind the scenes which you can't
really see but for example this is
supposed to go online and try to pull
the latest data and update your local
your local database again so suppose
that kind of makes sense in terms of the
functionality of this super simple
applications yeah so now in the context
of that application we're going to look
at a couple of things that that we can
so for one thing that we we have our
activities so these are what they call
the main building blocks or the sort of
the Lego components if you use to build
non-jury that right so an activity is
dropping a screen so each of those three
screens
is an activity right so we came an
activity for listing the timeline
activity for updating the timeline and
the 14 preferences as you sort of to
compare opportunities for something you
may know I usually use websites right so
an activity would be like a web page is
to a website on typical website you
usually have a home page the main entry
point so do we eat with Android so we
usually have so-called main activity the
entry point but it doesn't have to be
the only entry point to the application
just like the website doesn't have you
don't have to enter a website to a home
page only what you need to know about
activities is that they're carefully
managed for the system so opting to see
a rather complex life cycle what that
means is that it's sort of your
programming in a container environment
okay how many of you did any app works
or network excellent work in Java and
your does I so then you know what I'm
talking about so basically your code
doesn't do what you tell it to do but
your code rather response to the events
that happen that that are involved by
the system so it's sort of like an
event-driven programming so basically
what happens is at the beginning of the
day your activity doesn't exist and you
know the user says I want to launch this
app and along with that the activity
gets created at that point it's its so
called running its visible we can only
have one visible activity in on the
screen at any point in time this one
gets all the preferences in terms of
memory in terms of you know CPU cycles
all the stuff because we want to get the
sort of fast speedy experience for the
user at some point user may flip the
screen go from one screen to the next so
what happens is this activity gets
paused really quickly and then stopped
okay so many many activities output
output many here and this is one so many
activities are a mastaba state
essentially seeing
cast now the system is at its discretion
decide to kill an activity just wipe it
out get rid of it you do not have a lot
of saying that okay so that's why it's
different you don't say AB quit by the
system decides when it wants to dispose
of something sort of like garbage
collection Java right you can suggest
you know system ogc but it's there's no
guarantees for that so it's kind of
similar you can suggest that an app is
not our clinic is not going to be needed
but they're just a suggestion it's not
necessarily going to adhere to that but
at some point the user may actually want
to get back to that activity so that's
why we have we can go back into running
state okay so the reason so so basically
you as a developer you control these
things you control the transitions you
have the power to put something here
okay that's all you can do right you do
not control the state that your
activities so the system is going on you
know transition or activity from a state
of state so it's kind of like a finite
state machine you're knocking away so
the reason why this is not the way it's
done is that these steps from starring
to running that tends to be fairly
expensive if you think about it you need
to if it's a brand new application fee
to launch a linux process you need to
start a dalek virtual machine you need
to load your classes you need to you
know inflate your XML layout you need to
start your Java so all these and draw on
the screens all these things are fairly
expensive operations so so there's a lot
that goes on go at the start up of a
single screen now because it's likely
the user is going to come back to a
scream that's why we don't want to just
get rid of it we want to kind of keep it
around so that in case the user comes to
it again that transition transition is
much faster so basically this step here
tends to be sensing a dollar when it
comes to sort of getting back to the
Sunstream that that has been one of the
initialized so that's a little bit about
activities
heavily managed by the system and a lot
of optimization goes into them another
component that we care that's important
in Android app development that you
wouldn't keep gather Java are intense so
in den so basically events or messages
that happen asynchronously between these
components there's sort of the glue
between all these main building blocks
so I have them as an example I use this
simple simple pattern so imagine that
imagine that you guys send me an email
and it says it's some in gmail so this
is one app right so I mean a single
application so you send an email and so
I'm in an activity in a screen that says
this is a list of messages right and
some doing the lesson I see that there's
an email from you so I click on that
particular email and what happens next
is we fire an intent to launch another
activity another screen that's going to
show that particular message I am sure
we fled from one screen to the next okay
now this is going to work slightly
differently on Hanukkah but other than
that everything's the same so so that's
an intent that that made it happen right
so now I'm doing the message that you go
sent me and there's a lady to your story
about the Android taking over the world
so I click on that and that fires up a
browser so now I'm you know the 20 other
application this is a whole other app in
a different process with a different
permissions whole different sandbox all
that stuff but to a user it doesn't
matter these are just pop up on
obviously right and so right now we're
on web the activities we're viewing that
particular story about Android taking
over the world so so in that story goes
a link to a video so I click on that now
that launches a whole other app in this
case so YouTube for instance and we now
can see that actual video of the land
was taken over the world so essentially
the user ended up doing jumping between
one two three applications okay but at
the same time the user went from one to
2nd to 3rd to 4th activity okay so this
is called a task as the user create
generate the task you can go back back
back now to come back to where you start
so that's that's roughly what what the
intents are all about now one thing
that's important about intense that is
that they can be explicit or implicit in
other words what i can do is i can say i
want to launch such and such activity
and spell it out right which is the case
that we do here right so when i say i
want to see the particular message I'm
spelling out convert a beard okay
whereas in this case when I say I just
want to open up a web page I'm not
stalling out how to open it up is I'm
just saying I want to handle this with
something capable of rendering HTML so
it could be a Firefox it could be at the
built-in browser it could be some other
browser so in other words multiple apps
can compete for the same for camping the
same of theater right so that's that's a
feature of android that's going to call
and unique that's the you might have
heard a buzzword all apps are created
equal that's what allows for that
capability to cap apps compete so you
can basically have multiple home screens
multiple you know SMS client to address
books a second so that's a little bit
about intense next which we can we have
about four or five of these main
building blocks so just hang in there
and then we're going to get back to
young back design young by using this
building blocks so one of the things
that you know end route houses services
background services so these are
basically things in turn in a background
quote on quote background of double
click on that soon but imagine that
you're writing an app like a music
player but Pandora or something of that
nature so you do need the UI you need
some some way to you know say I want to
play this song and give it thumbs up
thumbs down fast forward what
okay so you do need some kind of you I
that would be an activity right but as
we know an activity can just want be
wiped out by a system at any point in
time right well I would like to play the
music while doing other stuff right so
for that would be impossible our design
in this case would look something like
this so we would basically create an
activity here so this would be our UI
okay and then that you I would merely be
used to start a service so the actual
playing of the song happens right here
in the service so it's owned by the
service so this guy can be wiped out
disposed off right but the service is
going to keep on crying in the
background okay now I keep keep saying
quote unquote background that's because
there are in antiquity services run on
the same thread as your UI so we be
mindful of that you actually if you
could suddenly takes a while you
actually may want to put them separate
thread to truly put in a background soho
also receives is something that's
invisible doesn't have any you are again
but also service cares a much simpler
life cycle so a life cycle of a service
is start stop or start destroyed right
and what the point about that is that
it's less managed by the cyst so what
that means is that you as a developer
have more control our service so the
system is not in most cases challenge is
going to come and wipe out your your
background past right so that's that's
what you would do is services for ya so
so that's one of the pretty common main
building blocks this semi called remote
services don't worry about that too much
on content providers are a way to share
data across apps right so I keep saying
how applications have their own sort of
star in their own sandbox so one app
cannot access the data from another that
what if you wanted to share some data
right be my twitter app what if i wanted
to provide their tweets to to send
somebody else in on the device so
content providers provide that system
uses them quite a bit so system uses
them for example for sharing a media
for sharing settings for sharing
bookmarks for sharing contacts things of
that nature system uses it internally
quite a bit but not but not externally
developers tend to usually be users off
but not office of content providers for
the most part so this would be an
example of how all that may work so for
example in this case what we have is we
have the address book so this is your
address book and this is an activity in
other words it's a UI right and but this
this address book doesn't have any data
so your contacts app doesn't have any
data there's another app all together
called context provider that has all the
data right so that's where the data lips
so basically we're separating the
concerns we have one app but is you I
the other one had good status so they
lose the couple of them well what that
allows for is for other apps to pop into
this data right so I could have some
other application all together another
address book that now it taps into the
same day or I could hear multiple data
of providers mash together so thing for
example you call your context provider
being matched with your facebook with
your twitter with your linkedin and so
forth and providing more of a holistic
view of of the info of a personal Bob
right so that's something that's
possible and that's what you know people
take advantage of that quite a bit so
for example if you camp HTC device you
probably have HTC Sense on it well HTC
Sense provides a much sexier version of
an address book then to standard
angulate one right so that's this is
exactly how it works they basically
rewrite you I create another app and and
tap but that'd be the same data source
so that's that's the what the content
provider is and finally we have
something called Rosa mr. receiver and
produce the receiver is basically a
published five Magnus so basically you
have some piece of code and you want to
subscribe this piece of code for some
event when something happens I want to
know I think that something could be as
hello sister get booted battery is
running low we're plugging into power
network is down at work wassup that sort
of stuff right so when that event
happens because your subscribe to it you
get published a notification and that's
when your code wakes up and does
whatever it does so it's you'd stand it
you know pub/sub pattern boil down into
andrew again so these are these are
basically our main building blocks so
now in the context of that we're going
to look at you know how do you use this
now to build something and that's
something in my case is that application
called yamba and so over the years you
know doing doing a lot of these
trainings I've got different example
apps I used to have a pseudo cool game I
have the restaurant app I had golf at
different apps and I was looking for
something that's sort of comprehensive
touches all the different parts of
Android you know in a meeting meaningful
way so that's what I kind of settle for
this with an example because I find it's
very very very natural way showcase is
hard to use lots of different parts of
features of main building blocks around
it so what we're going to look at this
car we how I built it in this case 27
iterations and by the way all these
several iterations correspond to seven
chapters in a book sits all look every
information is whole and complete so
it's kind of nice and easy chunks of
code and at the same time the code is
available for free so I just wanted to
make sure you guys know that it's at
github or github.com / Maracana and if
you go into learning learning android
Yamba so just go to github com /
Marikana and I'll make sure I copy paste
that for you later on and i'll post it
to a place we're going to where you
going to be able to find it started with
this with one hand so okay so all i'll
make sure you guys get all this
information later on as well sure so
this is a these are some various
artifacts that we're going to generate
cool so let's take a look at this
so in this is the first iteration all
right and what we do in the first
iteration is we're going to build a
capability to post to toilet you're
going to get a single screen type in
your status update you know I'm in the
self evaluate can't at them click update
and bam it goes into to all your friends
right just in terms of limitation
because there isn't really a graphical
notation for parameter that kind of came
up with my own so just to kind of
explain what it is the dotted line
represents our app ok so this is
application more specifically its
application context in Android an
application is sort of like a very loose
term you can see an application you can
see application components you can see
an activity you can see a service and so
forth but you can't see in a application
application is just sort of holding you
know holding place for all your main
building blocks it's kind of like the
pizza though right and then you put
toppings cover ok so that dotted line
looks like into though in this case for
for my app so what we have here is we
have a single activity so this is that
screen where you get to type in what
what you do and you then click post and
this makes a web service call to the
cloud ok and that's equivalent to this
this is that's that screen okay that's
all the first iteration that's the first
thing that we design one of the design
principles I want to like us i have in
this is it at any point is fallen
complete so you can start things are
working they may not be doing much for
their working right it makes sense so so
that's iteration one in the previous
iteration in the information one we
cannot username and password hard-boil
right so you didn't really nobody ever
should how to login I just card for the
other job so that doesn't make it very
useful to anyone but you right so in the
second iteration what we do is we
provide another activity in this case of
preference activity where you get to
change or user gets to change
impossible so that's basically so what's
new is this activity here and also
what's new is that we now have a shared
file that both of these have easy access
to so these guys writing to it this guy
is rating from right so so that kind of
show us how you know these main building
blocks at some points they can
communicate via our part it basically
have a secure place where they can store
information that's within that pizza
though right so nobody else can see it
other than performance of the
application so that's our second
iteration in the product creation we now
introduce a service so the service is
going to periodically go and check
Twitter for updates right so you can set
some time interval every 5 10 15 minutes
go pink the cloud and see what my in
friends are doing all right so so
basically the service is doing a pull in
this case right it's pulling the data
periodical it's a good example of how to
create the service to do that gonna stop
at the same time but we notice here is
that the code for connecting to whether
you need it in two places you need it
basically in here because this guy needs
to connect it with your pull data but
you also need a team here because this
guy needs to know how to post it with
all right so at the same point we now
have an opportunity to go along with
Roddy factor so the question is what do
I keep you know some kind of job objects
that are common between components and
where do I hand him off of because this
the same building blocks are sort of
self-contained pieces right so what do
you how to store what you put some Java
right and just happens that there's any
called an application up so that
application you actually has an
application on Pacific a empty but it's
a good place to come can arm some job so
in this case I make that application
object on the actual Twitter
connectivity right the Twitter class and
so that's that's a little refactoring
that we do so we move that you know
knowledge from
here to there right so this application
object is readily available to all the
main global box so you can easily access
it from Emanuel right so that's that's
what we do in this case so far so good
you guys following we're confident with
us so iteration of perform oh by the way
iteration number three we can verify at
this point we're calling complete
because we can see that the data is
actually getting here you can print it
out right we're not in user can't see it
Nora stored anywhere but you know we can
verify that so far things are working
right so in the next iteration for what
we do is we now create a database so we
actually have a local database for this
app to store this data so basically that
data that we got here we can now insert
it into some kind of data structure
database sequel I didn't cheat also
illustrates call you know Andrew
provides the framework for secure
database and how that works and so forth
and notice that the database is also
within our dotted line which means that
nobody else can have access so that's on
and we can that data based off of the
Yampa application so it's now readily
available planning on the quads our data
within our context okay so now we can we
pull the data we got the data stored you
can shut down your phone cutting back on
the data is going to be there but you
can't see this data it's not visible
anywhere so so that's basically you know
that's the end of this iteration in
terms of death that's what we're at
without by the way well let's go to
iteration five and I'll ask the question
so now we have a screen we finally built
our third screen which is probably the
most important one the timeline activity
so this is the exit this is the place
where you can see what your friends are
doing right it's cool did that
corresponds to this screen right
timeline you can see you know what your
friends are doing ok so we finally built
that about activity and so that activity
is basically getting the data from the
status
from the database that we have locally
now one question I usually ask people is
widened which is good do this directly
or let me make sure you understand that
this line is not related why didn't we
just go do this directly we caught it
right which we come to spoil the
database but then every time I want to
see what my friends are doing i would
have to deal with the network lakers
right so it maybe i would have the
latest data but that would ya it took
back a little slower right this is what
you would typically do with the weather
right if you just did a web application
that's why you know web applications
don't have a capability to run sort of a
service and all this more complex
architecture then we can a simple
architecture but more of a lag before
they show a show stuff on the screen
will it make sense to send the data
connection to the screen and to daily
basis at the same time so basically do
something like this right yeah hold that
thought for another slide we're going to
do something like that so you know I'll
explain that in a second yeah so so now
so now we have a pretty decent picture
things are working you know you start up
this application you make sure you start
your service your service is cranking
every 5 10 15 minutes it's pulling data
data is getting into the database you
can see the data on the screen you can
go change your username and password you
can update your status you can post
their to Twitter next time service runs
it's going to put it back into the
database and then show it to the screen
as well right so everything is nice and
dandy right so in the sixth iteration we
now improve it by a broadcast receivers
so you notice all in every iteration of
kind of using one of those main building
box so we started with activities that
introduces service then introduced there
now introducing the 10 it reduces the
database and the application revolver to
distant broadcast receiver remember that
publish-subscribe mechanism so this
service here
you know in that it's responsible for
Paul M to tweet right now if i turn my
phone on I would have to remember to go
and start it right what that doesn't
that's not very useful i mean you
imagine if you put on your phone you get
to remember to go and fire up the
updates for twitter and for facebook and
for gmail and for and whatever you are
using right that would be a pain
wouldn't be much nicer if we just
started by itself well you can do that
by up broadcastreceiver it just happens
to the system has a broadcast message
that says I'm done buning right so what
you can do is you can create a receiver
that says I want to know when you're
done booting because I want to do
something like starter service right so
that's it's a very simple example is
basically two lines of code on line to
say hey I want to subscribe to won't be
not the notification that you dump
pudding and another line that says okay
that point when you're done I want to
start a service right through the couple
of lines of code so it's fairly simple
so damn it notifies that it's finished
booting it goes it starts a circus again
similarly you know my service that keeps
pulling from Twitter it doesn't know if
the network is on like if I'm if I'm
flying and I forget to turn off my my my
phone not whatever happens it's not
going to be able to connect to the cloud
it is not with that fall right so so I
create basically another receiver here
which listens to metal cup network down
events and does the opposite to the
service when this network is down start
to stop the service and vice versa right
so that's a couple more lines of code
but it's very useful and preserves
battery greatly yeah you get a question
as is there a battery yeah so the
question is when you turn on the
broadcast receiver does it use any
battery and so on so no it doesn't
because it's this is a dormant piece of
code right it sits there it's not
running there's no process or anything
it's just somewhere listed as that it
needs to know that wants to know certain
things so it just basically it is
statically registered itself somnolent
assistant we women SMS arrives and
that's it it should shut up and what
that something happens damn it gets
activated and then it does whatever it
does but it's usually very quick so it's
very very efficient on a battery unlike
a service which is actually running it's
a process looks cranking in the
background right the service is also
something that's alive right so good
question and now I cab back to the
previous question that you cared about
the you know so the update there's a new
tweet you know somebody just posted
something on Twitter so our service ran
on you know on its interval 5 10 15
minutes and now it knows about it week
right it knows that there's a new tweet
and it does you know it puts it into a
database and everything's nice and dandy
however user is currently looking at the
actual list of tweets in the user is way
to see if there's anything else but
there's no way for this activity to now
that there's a new tweet how does it
know to go and pull for the updates does
it also kept an eye on its own service
into its periodic updates that that
would be highly inefficient so what we
can do is you can send our own broadcast
it says new tweet right so not only the
system can send broadcast but we can
send our own broadcast as well so it's
an auditor servicemen it knows that
there's something you fire self India a
broadcast intent
the service so the activity in this case
has a receiver sort of built-in that
says I want to know that there's a new
trade now so this is kind of different
than previous scenario is because this
intent comes from the service itself
okay and it's also different because
this receiver is not statically
registered but it's dynamically
registered meaning this receiver doesn't
need to be worrying about those new
tweet unless the user is actually
sitting on the screen looking at the
first thing who I update the screen
unless it's not visible right so so
that's kind of like a different sort of
a way to use a receiver so we explore
both both ways in this example so far so
good on this well okay and the final the
final iteration is I got everything
working everything's happy now I want to
put a I wanna create a widget as in you
know one of those widgets you put on a
home home screen right and i want to
show on you know the lightest weight so
what I do is I can i create at widget
not properly the twitch it is that it
actually doesn't live in our process a
widget so are our remote remote views or
guests in another cross another
application namely comb application or
launcher right so do you like them they
don't run within your own sandbox
they're on inside and somebody else's
process namely at home screen so what
that means is that if something turns in
a different map wants to access my
tweets that running my app I need to
pierce the security call and I need to
make them available so that's where
content providers elegantly solve that
problem right so we now expose the data
by a content provider so you can t
providers a simple instead of the belief
inquiry right so in this case I would
just implement a query so that you know
your your home screen widget keep
wearing for the latest things and that
solves the problems so that not all
straight stuff so basically this you
know 70 traders who basically showed you
know all those main
blogs at Android currently uses in an
elegant sort of way so so far so again
on this um now like I said that's a that
looks like that and when it's running I
can show you that in code as well if if
you guys care about that just to kind of
give you an idea what things look like
obviously you know we're not going to
learn all the you know api's in a couple
of our in you know less than an hour but
let me just kind of give you a flavor so
so this is a very simple version well
let me let me do this so it seems like a
lot of you are java developers and so
how many of you program is swing or a WT
ok so glad to probably web development
arcing like that all right so so in Java
we have a swing or nwt that's basically
how you build you I in standard Java
give it the biggest difference between
android java and standard Java is the UI
so everything that we had with respect
to a double engine swing we don't have
anymore so so basically the way we do
DUI in android is that we use android
total klutz to work together a xml a
description of what the screen is going
to look like first so this is my screen
he likes them all right it's you can see
that it's got you know there's a big
text box and there's a piece of textin
you know i can i can make it smaller or
make it wider i can make this button
blow up and take all the space or not i
can drag four stars here you know you
can do things like that it's not like a
WYSIWYG dragons or property markets at
the end of the day what happens behind
the scenes is is you just generated some
kind of XML again so that's it that's
XML right it's on
you know similar to HTML in terms of the
complexity so what you do next is in
your Java you inflate that XML into the
dollar memory space and that's kind of
what were it's different than swingle
owt so in so in the status activity what
we do is we now have this line here said
content view and this our layout main it
basically points to resource layout I
saw your layout status status rates is
basically a pointer to that file there
which is that father should just showed
you the texan alpha right so so
basically at this point what happens in
this line is that we parse dynamically
of this in XML file so for every single
element so linear layout we're going to
create a new job of new in your lab
right new text view new rating bar new
button right and then for every single
attribute in XML we're going to assign
that as a property to java right
somewhere it's going to be button my
button equals new button button set
width button God said text button God
sets text size button dot says satellite
I set it right so the end of the day
your XML really is transformed into job
right so you're still just programming
in Java but that's where it's look
slightly different than what you might
have experienced before yeah
yeah it's going to get all these classes
exist so there is a class there's a Java
class somewhere in the framework called
linear layout button etc yeah and so go
to you in other words you can do pretty
much same approach you didn't swing so
you could do everything in Java forget
about eczema on it is a taxonomic is
much easier right so we get this dual
approach to you I we basically described
the UI and XML because it's a good tool
for that but then we implemented in Java
right so you know in other words if you
take a button for example to describe
that the button is blue has round
corners that sort of stuff XML is great
because it's you can drag and drop
WYSIWYG do all this kind of stuff in
nice nice tools but to say what the
button does XML is not to go to Java it
right so that's that's kind of its a
girl approach so we describe it in one
I'm sorry do you have different look and
feels as in as in swaying like motive
and stuff not really but another thing
that we do have is we have ability to
apply a style or a team to do to a UI
and style so teams are equivalent to a
CSS think of them as the CSS so for
example if I just wanted to flip this
from being white and black to being
black and white I will just pick a theme
God light and bam now I just flipped
what the look of the entire thing is
right just by swapping quote unquote CSS
stylesheet it's really a starter style
property yeah
yeah yeah yes exactly and thanks thanks
for that point so at some point yes so
we need to so we now inflated this XML
at this point we have all that java
stuff in our memory space right how do
we now get a kangaroo it how do we point
so how do I make a change the touch a
listener to a button or some like that
and to do that you have this thing
called find view by ID right so that's
kind of how you locate a specific
element that you inflate it from job and
then you get a variable so there's my at
this point i got my edit texted i have
my you know button and so on and some so
my button i can attach a listening to it
and so on so for those of you familiar
with dom doc right it's kind of like
like in javascript you kept a fine fine
element by 5i ID right it's the same
idea right so that's all too fast that
doesn't take along a long time to locate
something in memory this tends to be an
expensive call although it's
innocent-looking fault but it does a lot
of sort of processing parsing XML and
creating a bunch of java objects so
that's why you want to kind of be
mindful when you create your XML because
you don't want to nest of overly nest
like layout within a layout within a
layout to create a sudden you know
appearance because all those layouts are
going to become objects and object
creation is something that is always
expensive in Java I think which means
slower 29 right so be mindful of that so
there's some other layouts that help you
with that so far so good yeah so is
there a way to actually generate code
from XML that's good question i haven't
seen that but it should be fairly
straightforward I mean somebody could
write this trip to do that via the
generated code from XML are no i don't
okay now it should be possible if you
decompile the Java code you could see
the generated for this yeah you could
you could you could do that however
you're not going to see any any anything
different because this is the CFS at
runtime so find you by idea actually so
this line is actually processed at
runtime it's not a compiler on you know
specific it's um it's not an assumption
to compiler it's actually it's a good on
time it gets processed so so that's a
little bit about you know a UI in
android so we we build that's all that's
basically what that first iteration
looks like if you want to know a little
bit about services services Oh usually
pretty straightforward so it does in
interracial three so a service is pretty
straight forward it basically you know
you override certain methods so what
you're going to notice in android you
don't start from scratch alone start an
empty plus usually subclass something
that comes in the system so like
yourself if you want to create the
service first to surplus the system
service and so forth yeah there's a
question
stay at the is there a transition
diagram for service yeah diagram for the
for the sorrowful good one but all the
activities have the same trans in estate
say that Ivan yeah all the activities
are going to go to this state diagram
and by the way when you write this
activities like you know when you write
activities services receivers providers
if you guys get the lines and circles if
you get the design principles getting
that to a Java it should be fairly
straightforward I actually kind of wrote
you know because you kind of suck less
the same atoms over and over again ah ok
a little temper set of templates so that
you can kind of copy paste that and it's
it's been recently just published under
bookshelf it's called the main building
blocks tutorial so the incident for
example for activity you know if you
have an activity template so I say these
are the commonly operating methods this
is called typically would write an
activity filling the blanks that sort of
stuff so the jaw is sort of you know
there's not a lot of thinking to convert
the lines in circles in to do your
design into Java so don't worry about
Java too much it's straightforward now I
wanted to I know initially we're going
to talk about tablets now so come by how
many of you you care about the
differences in tablets and all that
stuff property ok hope you ok so let me
now show you so that was the design of
the version that i did of young before
for the book and so this is the other
one that's running inside of the annual
ethics and let me change this is cool
feature easy to see
on the projector so it just flip the
coin flip the skin style right on so
basically this is a now thought it's
connecting to develop to whether in this
case it's not using my a llamado
tomorrow Colonel Gumm there's a there's
a different there's another reason why i
don't use twitter com in the previous
example and that has to do with the fact
that will it no longer allows simple
authentication in other words you cannot
login with username and password anymore
you need to use OAuth how many of you
know a lot okay so just because it's
it's not commonly it's you know it's a
cold other tangent about follow a lot
worse and so forth so that's our team
bother implementing that in the previous
example but this example does use OAuth
and that's what it's actually talking to
the real weather so what what i'm doing
here is first of all i have is one of
the key features new features of tab for
tablets is that you have fragments right
so this is a this is my activity in this
case in this application i have a single
activity just one activity that's it all
the other components it used to be
activities are now fragments and I just
football team inside of the screen on in
I'm not sure my UI is the best design UI
but yeah I use this area to flip-flop
you know the fragments right so for
example if you want to update something
now this is not something is not doing
well well if you want to change
preferences for example it crashes so
let's see so so that's what it looks
like that let's go change the
preferences right there so it basically
i'm using this area for that so it's a
single activity multiple fragments it's
a different design all together that's
that's a big deal on and i can show you
that in the code the way i have done it
you just closed all here because it's
not related BAM so this one I need to
actually change the workspace
unfortunately that's going to take a
second so one difference is the
fragments another difference with
honeycomb is the status code the action
bar so we no longer to use a menu we cab
the menu sort of here so you don't have
the button to press to open up a menu
like you have on a phone it's been a
typical phone you will get menu and then
it shows up here ok so instead here you
have it showing up here so I can do like
a search I can press this to post a new
message this is a refresh and this is
you know preferences changing 15 and a
couple things I've done um so so that's
a that's what's different from you I
standpoint however from programmer
standpoint this is automatic so in other
words if whatever you did previously for
many it's just going to look different
you don't have to do any programming
changes it's the same menu file right so
pretty in the previous example we
defined menu menu aggies yet another xml
file that looks like this resources menu
so it's an xml file where you define you
know your items let me show you an xml
so you can actually see the whole thing
and let me make font bigger because we
can't see it so let's say 18 it should
be fine again that works so um it is
basically a bunch of items so it's
exactly the same as the previous
versions same code there's one new
attribute and that's this attribute says
you know show as action Ephraim so in
other words you can you can
specify if you always want it to be
shown or if you want it to be shown only
if their space or never show it or so
always a from or never and what that is
going to result in is that you're going
to have certain things appear behind
this dot 0 dot right so you kept going
to expand and see it that's the only new
new thing when it comes to the menu
other than that the other new thing is
something called loaders so we had in
the previous version we had to basically
use adapters to load the data for this
list and with honeycomb we now use
loaders so it's a slightly different
paradigm and I'm just going to show you
really quickly so first of all my code
here back to fragments my code here so I
have a single activity that is
responsible for everything everything
else is a a is a fragment and if you
look at the layout it's actually much
simpler so so notice that i have very
simple activity or single activity it's
got one fragment that's the fragment
represents the timeline that's the stuff
on the left hand side all phones are
doing and then this is the placeholder
where I'm dynamically going to attach
whatever other fragment I want okay so
with fragments they're sort of this
video reusable pieces of you I they're
not quite activities but you attach them
to talk tivities yeah
so can you think of them as this as a
pain like those uh that is I will jostle
so you can think of them as a pain but
they also cab a they do have a little
bit of a lifestyle life cycle as well
sang to them so to attach them actually
you have to create a transaction which
you don't commit and all that so they
they're not just a static piece of you I
so there's a little bit of
initialization and clean up that happens
and so on yeah I can you think of
pregnancies wedded widgets are designed
to live in some of the else's container
so they're what's called the remote view
app widgets so they they became
differently applet is basically so
here's what happened here's what the
fragment was designed for I'll take
email for example Jeana right on a
standard phone I have a list of messages
and then I click and then I flip keep
the other message where I can actually
see what's going on with that particular
message now with tablets we have up more
real estate we have bigger screen so we
can now support multi-pane sort of email
right they can both see will the list of
messages and particularly the particular
message so that's what they were
designed for and so they're basically a
reusable components that live inside of
an activity thinking you can redesign
them you can also support to multiple
devices for example if I if I might if
my app is not deployed on a phone and i
have a small stream i can go to a model
where things are on top of each other
right with the same UI so it becomes a
reusable you I so in this case this
fragment is is declared here statically
right it's just hard coded whereas in
this case this this is going to be a
place called the worm dynamically
attach one of those and it took a little
while to figure out how to do this but
basically what I could if you click on
compose or if you click on preferences
or if you click on one of these I have a
single method caught it says go ahead
and show a fragment right and you
specify the path to the fragment or the
package so that's going to point in this
case for example for my sim preferences
that's going to point to my preference
guy right here okay so now let us show
show do show pregnant do so show
fragment does this it basically gets the
fragment manager begins transaction the
flip side of that is you committed that
transaction it's you need to you need to
start stoppable transaction on and then
you want to basically pop pop it from a
backstab if it's already there you go
and you can design this differently but
I didn't want to I game on my back
button to flap-flap-flap inside of that
area so that's why I pop everything off
the stack right otherwise if you could
go back button it'll be just going back
within that one little area because you
can also give the stack for your
fragments so you open open open
fragments and you go back back back it's
just going to roll back those fragments
so it depends on what kind of behavior
we want for your back button yeah so
basically I check if the pregnant I try
to find it so fine fragment by tag you
can find it by tag or ID the tag in this
case is the actual package name so I I
find that easier and then if fragment is
found if it's not found then we're going
to instantiate and add it to the back
step yeah otherwise if it's found we're
just gonna we're going to set said that
as the fragment and we're going to
commit to committed transaction that
actually shows it okay so that's that's
just a little bit of a code behind that
some example yeah
android has its additional levels so
when you think of android when you think
of embrace java it's basically it's java
standard in addition minus UI and some
other stuff so pretty much you get
everything else you have the networking
di yo the you know all that stuff you
just don't have swing gate ability
that's been replaced with its different
UI and you know you're missing like
reflection a couple minor things like
that but everything else is there no
they're not this is fragments are not
part of a son this is additional this is
a package called Android dot so so
that's the standard android framework
yeah give me the other place can use
JRuby or other languages it's a great
question let me uh let me just point out
there's a slide there's this life for
that so so this is sort of this is
called a standard Java right it works
right you can write Java code you
compile it you run it from JVM in
Android we write the very same java code
we compile it with the very same JC Java
C compiler but then we recompile it with
dalvik executable we get the dalek byte
code and then we run it on top of Dalek
virtual machine ok so so these steps are
new right what that basically means is
that anything that compiles down to java
bytecode is for game so if you have some
libraries kuna for example my j twitter
library it's found some random java
twitter library dropped it in and panic
get super powerful dalvik it works
you're agnostic to the fact that this is
garlic anything will work in terms of
other virtual machines to answer your
question on so anything that can compile
down to JDM code java bytecode it will
work so we're seeing a lot of traction
we will
with Scala that's an interesting one
giant in JRuby are also interesting so
people are doing doing about more and
more that but that kind of work the
other resources of the cotabato are you
do to me oh it's terribly based loosely
yours with everyone suppose leaves joint
is it emitter and the JV team so and we
actually so we're on san francisco
android usergroup and java user group
and couple of the user groups so most
recently we had the top from one of the
core contributors that's what you're
referring to right so so check it out
maracana com instead of all talking
about those yeah
so the question is about fragments and
handling the events so you can have a
fragment candle event or you can pass it
up to the activity certainly depends on
who is first of all subscribe to 50
other listener in your fragment you're
going to get a notification right you're
going to get a callback and then you
have a chance to handle it so there's
usually the API depending on what kind
of event it is but usually return true
if you consumed it false otherwise so if
you return false then the normal
processing is going to continue which
means it's going to go up to stack to
activity to be handled and so on so
that's usually the API is based on the
listener observer pattern so you
register your button to want to know and
you're you get a call back on on click
for example and then your own click says
true means I got it event and I can't
hold it I want to consume it nobody else
needs to know about it right or it says
false meaning it got event it didn't
care about it and just love the normal
execution happen which would mean that
now it goes up to the parent in this
case activity so make sense
is there reason you don't want to can
relate to the fragment and um well
sometimes sometimes you may kiss and
some common functionality that you want
to keep in the activity and then more
specifically or functionality in a
fragment so in my Twitter I you know
example for example you know there are
certain things like menu processing
there's going to be a part of the
activity because it belongs to the whole
thing but maybe a specific fragment
modifies the standard menu and adds a
button to it so in that case it's going
to want to know about many clicks but
it's going to ignore all the activities
many clips is going to care about it on
so that would be only for example
there's a version of bauxite mining
fragments need to be in a transaction
where clinic is going to be in
transaction on activities are actually
are actually not transaction is the
transaction is managed by activity
manager so the system level they are
inside of a transaction somebody may is
somebody else but God the van Dermot
manages their their life cycle with
fragments we are sort of those gods
right so you get to dynamically
attachment be attached deities so but
I'm not what a presenter so that's sort
of why there's a need for a transaction
I'm not one percent or White's somewhat
complex in my mind the way the designing
so I'm not under some for about of them
other than ever could change the UI
between the type of our screen you have
like phone versus this when you want one
simple way would be to create just use
alternative resources so for example in
this case again layout which is my
default player I could have layout gosh
X with the extra-large right and in but
i would just in that case in my main
would look different right it would not
be kept this layout so in other words i
will just be a multiple
office of this layout for different
sized devices so you can do that using
the standard alternative resources yeah
would my twitter app run on tablets um
yeah absolutely i mean we can uh we can
do we can launch it since we have both
good things is the binary going to work
so if you can you want to keep one
binary you should get one by that is the
best practice that's back buckle a
question you know you should get one
binary that just accounts for the
differences in screen and it's the only
difference if you got main.xml file in
my case yeah you could say my minimum as
in case one point six and I'm up
shooting for 3x yeah you can you can do
that so and in fragments or supported
fragments that are created for the
honeycomb but are supported in
Gingerbread and annoying fry herbalism
there's a backwards support so you can
have fragments today on a lot of devices
yeah I'll back
so what are the best practices
so so how would you make it a say a look
the same same give the same finally
basically bakula same so same banner
with the native look and feel um again
you can just do that by providing
multiple xml files you can email call in
a connector it's going to match for the
best best fit so you can specify your
constraints on the xml files so that's
why they will do it like for example if
I wanted to you know just really quickly
if I wanted to create my new resource a
new layout right like for example I have
a layout not going on timeline here if I
go file new android XML right I cannot
specify say time timeline xml something
oh this is a duplicate it says it ready
exists but I say yes but this time
around I want to account for a scooter
size for example or screen height or
orientation so I can figure size like
extra large I believe xx-large is a
tablet right so so now I could just
create an alternative version of my file
so I would basically now have two copies
of timeline XML and one would be for you
know one type of screen yellow for the
other but your Java code maintain stays
the same that's a beautiful nice thing
about being able to split concerns right
between java and xml so you can now
another timeline which will now be
designed for you know a different so in
this case is for thala tax w absolutely
yeah ocean
you
I just want to move things dynamically
inside of a UI like this I work with one
thing yeah absolutely yeah yeah so you
guys so that stuff that we've done with
with Java inflating the XML so for
example time on an activity right so we
had this to inflate from XML by this
part of this okay again cuz jolla you
don't have to do that you can still do
button my button equals you know new
button button God subtext right just
like you do you think I'll see you can
do everything then I make you want half
percent yes back to Talia you have a
question here one any other questions
yeah do you need a separate XML for your
orientation it really depends on what
your app is so certain applications are
going to look good regardless right but
if you for example if my app when I turn
it upside down there's no room because
the keyboard covers house stays or
something then yes you would you would
account for that by creating a different
layout yeah yeah if you decide to write
your own if you get your own aw people
baggage alone if you can't awti things
don't exist on the principles are the
same so you still just like in a TT you
get a container in component model in
android we just call it to layout the
view model but it's still a composite
pattern right so the principles are the
same arm and you could do the same
things just with a different April I
didn't awt you couldn't you couldn't
take over the legacy of it that would
work but uh but if this provides even
more because of the XML infighting yeah
um by the way before you guys totally
leave I just wanted to point out that
this is where the slides and video are
going to be later on so that's the
shortener just this thing here so if
anybody cares about there's all these
artifacts that have been talking about
i'm going to make sure i toast it its
reliance is placed over and supposedly
we've got a QR code bodies but we spoke
at the community oh we are okay um so
yeah I'm sorry well I'll just keep on
talking until people everybody and
questions yeah exactly if you're
absolved developer the biggest
difference is the UI in the paint
building blocks basically that's what my
talk was about today like as a Java
developer you need to understand the
main building blocks so I'm tivity
services providers receivers those lines
in circles if you drew right and you
need to pick up a little bit of a new
API but doesn't mean that it's pretty
straightforward it takes you like about
three to five days to master Android
with your solid jollity off
tools in terms of contest your
application is there are tools there's
there's something called traceview which
will allow you to trace the execution of
encode it comes it's part of sdk so look
for traceview you need to generate a
trace file between point A and point B
and then you can analyze it for CPU
consumption memory consumption deserts
up it doesn't do battery for battery
there's a battery service so your
approach keep it as a way to report how
much it's using and then you can analyze
it but again you need to augment your
coat with the reporting stuff for you I
there's something called hierarchy
viewer it's very useful tool to analyze
anybody's you need to sort of the
application to analyze our nest its UI
is and it's basically you know you I you
get the most bang for the buck
optimizing and in this store helps you
see how you know do you have unnecessary
asking of you know classes or business
of stuff views right so it's very useful
talk
justice I'm not that sure I don't know
much about that i'm kind of like
agnostic to that it just kind of works
yes all right thank you guys appreciate
it hope you learned something</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>