<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Python for Beginners: Reading &amp; Manipulating CSV Files | Coder Coacher - Coaching Coders</title><meta content="Python for Beginners: Reading &amp; Manipulating CSV Files - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/InfoQ/">InfoQ</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Python for Beginners: Reading &amp; Manipulating CSV Files</b></h2><h5 class="post__date">2014-03-18</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/mlt7MrwU4hY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hi I'm Greg sadarski and I teach Python
at new circle today we'll be doing a
little bit of Python programming this is
for anybody who's interested in
programming and has never done
programming or maybe you've tried to do
a little bit with Python or you're just
interested in to what basic programming
skills can give you I'll give you a very
simple situation we have an event that
I'm holding for an organization that I
run and every year I get a lot of
attendees and I have all their names and
their email addresses in a file a CSV
file which you might might have heard
about comma separated value file so I
get my CSV file I have all my attendees
there and next year I run the same event
and it's even more popular and I get
even more at Indies but after the second
event I think how that was actually very
interesting I saw more people but I'm
not sure who they were I didn't have
time to know it oh yes Jack was there
but Jane wasn't and that would be sort
of a manual task I don't want to be
doing that anymore in looking at lists
so let's program our way out of this
problem and it will be quite easy with
Python and you'll see and I and I feel
this is a very simple elegant small
thing that will should whet your
appetite and make you want to do more
programming and more complicated tasks
which of course Python allows so let's
go right into it I have two files here
the two CSV files you see on the screen
there's attendees one dot CSV on the
left part of my screen and just right
next is attendees - dot CSV so that
would be the first year's attendees and
the second year's attendees I'm just
looking at it kind of far you know just
looking at the screen you see a bunch of
names that well some of them look
similar and some aren't but really this
is the point if this was if this list
was very very long you would you this
would be a horrible task that you would
never want to do manually so just to
give an idea it's it's about a hundred
lines long so one event had 89 people
and the next one had a hundred so it was
a blast a big party sorry you missed it
so let's just go through through those
files and and just understand what
Python allows and how does it work and
where is the magic and how much
we have to be doing things to get some
result so I'll assume you have Python
installed but it's fine if you don't on
a Mac it's a little bit simpler you can
just switch over to your terminal like
this and I'll just enter Python just
like the snake so Python
there we go and I'm already programming
I'm just whatever I will be typing now
will be actual programming you're a
developer just by writing six letters
and enter so that's that's exciting on
the windows it's a little bit more
complicated you would have to go to
python.org well actually I'll just do it
right No so let's just go here and the
website has changed very recently so it
looks great so you can just download and
go into Windows and the latest - point X
point X release will do fine so you'll
have a little bit more steps and but at
some point you will get a screen and you
will get a prompt so these three greater
than signs and you'll get to write
things and it will it should work if
you're not sure if this is Python or
some other programming language well
actually just first you know let's just
try 2 plus 2 and that works okay so
we're dealing with a computer that is
answering your questions so this is an
interface that's useful but just writing
for writing very short single line
commands if you want to do some tests or
it's a good way to explore but it's not
the best way if you want to write a long
program for some reasons but don't mind
that just Python is installed it's
running we're happy so let's get started
and actually write a program let us do
some basic things just again just to see
how this kind of works and you know just
to get a feeling that it's the computer
is on our side and it's it's simple to
get started and you don't have to write
this whole program and then hits you
know hit run and hope it works and if it
doesn't decide that you'll never be able
to do this which is not a good
conclusion so let us just actually print
some nice message so I will I will type
this so print and then I'm using single
quotes and I might be using double
quotes doesn't make
difference and I'll save this file and
call it tutorial py so I've got a file
I'll jump into my terminal now if you're
in Python you're kind of stuck a little
bit so to get out well you could shut
down restart but that's that's too
drastic I would just go exit which is a
command and then parentheses opening and
closing and then press Enter so now
you're out of Python and on your Mac
you're in your your shell so to run the
program it's actually quite easy so it's
Python but let's pass it a filename so
in this case tutorial dot py there we go
so you see the output of the program
appears in the terminal so you see the
hello is there and that's the hello that
I had written so what's happening on the
Python side I'm using the print command
which is I would assume the very first
command you'd want to be able to use
because else really it's kind of hard to
see what's going on in is there any
output and a print command is all code
is littered with print commands that's
perfectly fine just use the print
command as much as possible when you're
beginning ok good so we've got some data
that's been printed this is a string so
it's characters letters I could there
could be spaces here I could be writing
a whole sentence so that's just a whole
sentence there we go
let's save the file I switch over to the
terminal I run it again there you go
I've just printed a whole sentence
literally so ok that works as well now
there are other things data types that
you can manipulate so this is a string
it's built up of characters there's also
integers which is this digits so I could
print the number 4 and I guess this will
work it'll just print 4 you can do like
simple math as well plus 8 should be 12
hopefully yes it is okay that's good so
there are some data types like that and
there's another data type which is
actually quite useful and that's a list
so things are getting a little bit more
complicated but this is where it gets
interesting a list is well that's
actually the what it is it's a list of
things so whatever data that you want to
store and conserve like a string or some
some digits
integers you can group them and hold
them in one list and actually you can
assign a name to that list so what you
would call a variable so we can create a
new list and that's actually quite easy
just by using the square brackets and
then for every element that you put in
you just separated with a comma so if
you have three elements and I'll just do
word one and then a comma and or two and
then the comma and word three so I'm
just writing this list it has three
elements and the print is still very
it's it's very happy to print that list
I'm switching over to the terminal there
you go just printed a list so this is
baby steps we're getting somewhere very
interesting great so we've seen strings
we've seen lists of things we should be
also I guess assigning these you know
these these data objects we shouldn't be
just printing and forgetting about them
so let's give them some names or assign
them some variable names I will be able
to use later on in our code so for
instance this list I might call it L so
L and I'll just write equals so I'm just
saying hey computer this is a list it's
a very important one I want you to take
great care of it I feel for its
important list we've gone through a lot
together let's assign it to the letter L
and later on I can do pretty much the
same operations I used to do so I can
print L and that will work it's exactly
the same output so baby steps but we're
getting there great now to read a CSV
file you might and there are file
operations in Python so you are of
course able to open files and go through
all the lines and do different
operations and it really depends on the
type of data at the type of file that
you're getting is it a JSON file or an
XML file or CSV file there's there's a
variety of formats or an excel file in
XLS file and you will usually want to
pick a tool that's adapted to the file
type that you'll be working with
so CSV
a very good simple relatively standard
format just by the way just to confuse
you a little bit CSV format even though
the C's should stand for comma sometimes
you would see tabs or semicolons used to
separate elements and it's weird because
we don't do tab separated value files
like TSV but but that's all good so CSV
is generally data that you can look at
as a human it's not a weird format and
it's just separated by commas exactly as
I have here in my two lists so let's use
a module that comes with Python and that
is called CSV and we'll have to do a few
things so will first tell python that
hey i'm going to be using this module
I'm kind of you know you're letting
Python know and there's a good reason
why you have to explicitly import and
that would be the keyword I will be
using these these modules and actually
it's because there's a ton of these
modules that some of them are part of
Python some you can download and install
on your computer and if everything was
available all at once you would have
conflicts and it just doesn't make sense
so by default Python provides you with
very few built-in functions that you can
use print is one of them and then
whatever you need you just import it so
let's just do that right now let's
import CSV and the once we've imported
it's available it's a bit strange
because you know the text editor is not
giving us any clue to that bit but we
know import CSV we wrote the line so
that's fine now let's do some other few
steps first we have to open the file and
there's a command for that in Python we
should typically use to open the file
and then read the file but we'll do
things a bit differently we'll open the
file which just lets Python know that
we'll be using this file and then
instead of reading it ourselves which
Python would have allowed us to do will
will tell CSV the module can you take
care to open that file and read it and
kind of understand what the file is
about so let's do that
let's open the file so the open command
is available even though if I hadn't
imported CSV and let's pass it a path to
the file that we want to
in this case attendees dot attendees one
that CSV things can get a little bit
more complicated on the windows and on
Mac if you were going to have different
paths this is a very simplified example
but the simplest thing is if you keep
your Python file and your CSV file in
the same directory and you're running
Python in that directory things will
work just as I'm typing them now but it
can be more complicated because of paths
don't worry if it doesn't work right
away
so let's open the file and let's assign
this Open File to F so f is now this
file just by the way if you open a file
it's rather important to close it so
let's just write it right away just so I
don't forget so to close the file we'll
call a method on the file object so f is
it represents this object this this
instance of a file being open so you've
opened the file and says ok and what I
do with this and you go okay this is
great and kind of looking at the file
and say ok now I want you to close it so
this command of kind of pointing to an
object and giving it instructions like
calling a method you do simply by naming
the variables so in this case F and then
it's dot and then passing the so typing
in the method name so close and then you
have a choice of arguments that you
can't pass but close doesn't take any
arguments if you have any questions on
that you would go simply to the
python.org official documentation ok
we're really close I assure you so we
have these two lines we're opening the
file and we're closing it a bit later
nothing much is happening between them
so let's actually pass our file object
to the CSV module to the CSV reader is
what the documentation tells us to do
and this will create a CSV file object
which is the CSV file but parsed so the
seasoning module took care of opening
the CSV file and actually you can give
it some tips as to oh by the way this is
a tab separated file or a semicolon
separated file and it has a lot of
options but by default it will work just
fine with this very simple CSV file that
we have so let's type CSV that's the
module that we've imported and let's
invoke
the reader function so we'll just pass
it the F command inside the parentheses
so as you've probably seen open just as
here when I'm opening a file or reader
is the name of the function that we're
calling it and we're passing a few
arguments so in the first case and open
we're just passing the string right in
the program in the case of reader it's
simply the file object good
so the CSV reader we want to conserve
the fact that we read this file object
and now we have a CSV file object so
I'll just write CSV on which koreff and
now we have a variable with containing
the CSV file object beautiful so we have
the CSV file object and what I want to
do is iterate over it consume all the
rows that the CSV module has read for us
from the CSV file and to do this we'll
loop over every row and we'll just print
it out so to use that a new will use a
something new that we haven't seen as of
now and this is the 4 this is 4 so 4 is
the way for you to iterate over a loop
so let's write 4 and then let's make up
a name that will be used within that
loop and that will represent every
element of the list so for row in you
have to type in and actually you see the
coloring indicates that this is a
language just basic syntax and then I
will iterate over CSV F which is sort of
a list you can you can think of it just
as a list so the CSV module read my CSV
file created the CSV file object and now
all these rows are available to me to
loop over them so I'm ready here you
always have to include a column at the
end that's just the way that you have to
write a for that's the syntax and how it
works
so let's print print the row and I'll
move this over and I'll just press this
beautiful so I'm getting this long list
of rows that are being printed to my
terminal and amazingly this is exactly
what I have in attendees one so you see
there's a list of rows so actually every
time the for loop is iterating there's
one
oh that appears every time and if you
look a little bit closer you'll see that
every row is actually a list and it has
three elements which is first name last
name and email an email is the third
element that's how we would probably say
it if we were just talking between
humans but for the computer the email is
the second well we will be using square
bracket 2 square bracket so let's
actually do that so row contains a list
of these 3 elements let's only print out
the email address let's do that right
now so I've had a square bracket 2
square bracket I'm saving this file let
me move it over here and let me clear my
terminal and print these again ah
beautiful so now it's only the strings
only the email addresses that's great
so I'm really really close now right the
only thing that I would have to do to
complete my task is to take all of these
email addresses and let's put them into
a list let's keep that list around let's
do everything we've been doing for the
second file so attendees 2 dot CSV will
do the same step we're actually copy and
paste code it's not the best code
organization method but it will work and
it'll be clear so we'll do this for the
second file and then we'll have two
lists and we will see that we can do
some magic that will allow us to see
what's different between them so let's
do that right now all right so I have my
email addresses that are being printed
out let's create a new list and empty
list so I will might call this attendees
one and just like this and this will be
an empty list so square bracket square
bracket I can move it just down here it
doesn't matter really that much at this
point and instead of creating the email
I will add it to attendees one so
attendees one dot append and this is the
method for a list if you want to add an
element to the list that's pretty useful
and will then append the email address
so I'll remove my print and as you see
the inside of the for loop the
instruction simply has in this case I
have a tab but you might have a space
or two spaces or four spaces so the
indentation needs to change so that
Python knows that this line 10 is within
the 4 and you don't have to have a curly
braces like in many other programming
language so indentation will give Python
all the instructions that it needs great
so we're printing the email addresses
let's now print attendees 1 so I've
created the list on line 7 I'm iterating
over every row adding the email address
to the attendees 1 list and then I'm
going to print this list so I'm going to
save this here and I will print a go
ahead and run the tutorial beautiful so
now you get this very long list it's a
bit kind of hard to look at now because
it's just like very long and it's
wrapping along the terminal but I'll
Lemus all the email addresses are there
so this is great so attendees one I'm
done I have my list of email addresses
from my first year my big party this is
great so I'll just remove the print
because we know it works and see how I'm
just peppering prints everywhere but you
know I'm confirming that everything is
working so I have this now this code and
I'm yeah I can just you know kind of
move it here and I'll just paste it
which is sometimes dangerous because you
paste and then you forget to change some
things but I'll just I'll just do this
very tentatively so the second file I'll
be opening so attendance to CSV now I
will be creating another list called
attendees to I will be iterating over
the rows and I will be attending I will
be appending to attendees too so we've
copied the code we've changed all
attendees one references with attendees
too so this is the file name this is
just the name that I've decided as a
variable I could have called B but it's
more useful to have them as clear names
so let's run this program and see
exactly now I have a second list now
just to make sure I haven't kind of
forgotten something or maybe I made a
mistake which is quite possible let me
print the number of emails in each list
and to do so I'll use the the Len le n
as in length function that's built in
and you pass a list to N and it gives
you a number which is the number of
elements in the list so let me print the
number of attendees the first year and
right after I will print the number of
attendees the second year
let us run this program beautiful so
eighty nine attendees the first year and
one hundred attendees the second year so
this is this is wonderful this is just
great I mean this is really exciting
this works we have both variables we're
this close to getting our list of emails
of people that in a second year but
weren't there the first year so you know
new attendees is what we're looking for
so we will not do it just a little bit
of what kind of change a little bit just
what we have as data so what now we have
a list and Alyssa is very useful it's a
you know these elements are in certain
order but there's another way to store
many objects in Python and that's called
a set s ET and it's a bit different
there's no ordering and a set cannot
contain duplicate elements so it's a set
is just a set of elements so you have
the letters ad and Z but you can't have
many A's and many of these it'll just be
a DZ and there's no order a list has an
order as said does not what's useful
about sets though is that you can do
these calculations of you have one set
and you have another set and what is the
intersection between the sets or what is
unique to one set but is so what is in
one side and not in the other set and
this is exactly what we're going to do
right so let us actually take attendees
one and attendees two and let's
transform them into a set so what I'll
do is that I'll still be using the name
attendees one but I'll write attendees
one and then I'll create a new set by
calling set and I'll pass it attendees
one that used to be a list so attendees
one is now a set I'll do the same for
attendees to show you like this so then
we have two sets and we will go and use
a command that's available on these sets
to see the difference between them so in
the documentation you can see that there
is a method called difference so you
would call difference on one set and
pass the other set and as you see the
equivalent which kind of gives
good idea is s minus T so s is the
larger set that's our second year minus
T which will be our first year and the
difference will be those who have
attended only the second year not the
first so let us go into the terminal and
actually I'll write this in my command
first so attendees two dot difference
attendees one and I will print this so
this is the resulting set I will go into
my terminal aha
that's it so now we've got the list and
these are the actual email addresses of
those who have attended your two and not
your one so hopefully this code is
relatively clear it's very short and you
can kind of understand what each line
does of course you would not have code
repeat that's not a good way to organize
code you would have a function do
something and maybe you would pass it
arguments if you would want to do that
something differently so for instance
opening a CSV file and returning to you
a list of all the email addresses in
that CSV file might be a good function
but for now this is just a very clear
example so Cheers
we've done it this works in a very few
lines of Python when we're able to open
the CSV files and loop through the rows
extract the email addresses create these
two lists then we converted them to sets
and then we saw the difference between
those two sites so only the attendees of
the second year's bash and not the first
year so if you're interested in learning
more new circle of offers Python and
Django online and in-person training you
can check out their website I'll
actually be teaching one a both Python
in Django courses so I hope to see you
then in the class or online and I hope
you have a good one Cheers
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>