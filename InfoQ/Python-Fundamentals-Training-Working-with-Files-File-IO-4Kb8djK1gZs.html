<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Python Fundamentals Training - Working with Files: File I/O | Coder Coacher - Coaching Coders</title><meta content="Python Fundamentals Training - Working with Files: File I/O - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/InfoQ/">InfoQ</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Python Fundamentals Training - Working with Files: File I/O</b></h2><h5 class="post__date">2011-09-30</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/4Kb8djK1gZs" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">okay so before you plunge back into your
lab assignments let's talk about
something new for a little while so
error handling we haven't talked about
error handling at all yet but what if
you are writing a program and something
goes wrong and unexpected something goes
wrong Python supports try catch
exceptions which is kind of the modern
way of handling error conditions if
you've programmed in older languages you
might be familiar with styles that
involve catching a return value that's
special that indicates an error
condition and checking to see if an
error occurred and handling it Python
has exceptions and I look to show you
the syntax and then kind of talk about
what they're for and kind of the
philosophy behind them so we've already
seen some errors usually this is
inadvertent but basically anytime I do
something that's not allowed you see
some sort of error message it says trace
back and a few of you have gone a couple
files deep and so you see now trace
backs that follow your execution path
like what functions have been called
trace backs are kind of useful to see
how you got where you got but the key
bit about the trace back and sorry let
me not quite maximize it right we keep
it about the trace back is the last line
here and it says name error name Q wer
is not defined and name error is the
name of the exception that occurred
exceptions are pythons name for
exceptional conditions that are probably
errors and we can handle and inspect
exceptions possibly recover from them
and at least do something different if
an error occurred and exceptions also
totally break program flow which is kind
of a good thing so let's let's handle an
exception
to handle exceptions we use the try
multi-line statement I'm going to do the
same thing that I'm doing here which is
call a function that doesn't exist and
try get on except block which is also
multi-line statement it ends with a
colon and the code under the except
block will only execute if there was an
exception in the try block
you
and I can't do that
nothing happens as I expect there's also
an else condition so we have actually
I'll do it again from fresh we have a
try block and accept blocked
an else anybody want to speculate on
what an else does yeah so else is going
to execute if there is no exception
oh and i defined quark earlier nice and
there's also a finally block
it is not so this is not actually a go
to this is a multi-line statement that's
part of the language grammar so it's not
it's not a it's not a label for a go to
just like if or just like while or just
like for it's a multi it's a multi-line
statement that is a key word yep so this
is this is a new piece of syntax and are
introducing for new keywords well three
new keywords one key word being used in
a different way finally any thoughts on
finally we have try except we'll run if
there are errors else will run up there
not any errors finally we'll run no
matter what dammit
and then the last piece of complexity to
trying and catching errors is our except
clause can specify what kind of errors
it wants to handle and you can have as
many accept clauses as you want so you
can have an except clause that catches
one particular kind of error and we're
about to look at files so say we try to
open a file and we fail we could have an
except clause that handles an i/o error
it's a predefined kind of error that the
file handle will throw we could have
another except clause that handles some
other kind of error we might have a
permissions error so the file actually
exists but would have permissions to
read it and there's a different
exception we could have different
problem resolution or error code
messages depending on what kind of
exception we're catching and let's go
ahead and catch an exception and let's
okay look at that error again name error
is the name of our exception class and
I'm just going to copy that and try to
call the non-existent file and accept
name error and we can also optionally
catch the instance of the error if we
want
no you wouldn't so that's a that's a
good point because it okay so if
everybody heard yemm's question so this
print always runs if I just move that
down a line and uninvented it would
always run right it wouldn't run in the
case of an exception because the
exception will end the program if it's
not handled so if there was an exception
the stuff in the finally clause will run
before the program exits so if I'm
wanting to do and so for instance
finally is basically used to clean up
resources very frequently let's say I've
opened several files I'm processing them
and there's some sort of error whether
there was an error or not I still want
to close the files and release their
file handles so finally will always run
no matter whether I'm all screwed up or
not and it's typically used for cleaning
up of resources yep the resource post
that I had up the other day list the
built-in exception types which you can
see in the Python documentation and it's
a rather lengthy list these are all
classes which we don't really know what
that means yet but there's a ton of them
you yourself can cause an exception to
happen deliberately by raising any of
the built-in exception types
with the race statement so if you have
code that checks for error conditions
we're not talking syntax errors are
things that raise errors themselves you
use the race statement to cause an
exception and I said earlier exceptions
are another way of broken braking
program flow so let's just see how that
works I'm defining my function I'm going
to print one going to raise an index
error and I'm going to print too I'm
going to try to call foo and accept
anything I'm going to print three and
you notice it didn't ever print too so
the way pythons air handling mechanism
works is if you raise an error that is
not caught in the current context it
returns up the stack of calling context
until it is handled and if it's never
handled it into your program and I say
continues up the stack you can think
about that as namespaces foo itself as a
namespace python handles that by using a
stack implementation but who is the
namespace I raise an index error and
there is no catch in that namespace so
it ends execution of the current
namespace and goes back to where it was
called and in that context there is a
catch it always propagates upwards
through the calling context until it
finds a handler and if it doesn't find a
handler at energy program yes and you
might one small note here we've been
using cystic set to end programs
obviously you could raise any error you
wanted and it would end your program as
long as it wasn't being handled but
there's a built-in error a built-in
exception called system.exit that you
can raise to end your program and my
ipython is catching it and not letting
me close but if you put ray system.exit
where before you import a system called
cystic sit there actually the exact same
thing the implementation of system exit
is too
cause this exit so the general the
general Python approach towards errors
and exceptional conditions is it is
easier to ask for forgiveness than to
ask for permission so one approach to
error checking is you have a function
that operates on three or four different
operands and it's important what range
they have you could spend some time
making sure that each is in the
appropriate range so maybe you do some
division you could first check and make
sure that you don't divide anything by
zero because we can't do that right
Python says go ahead and do what you
like and if any errors occur afterward
it's easier to ask for forgiveness and
your function itself doesn't necessarily
have to implement any error handling
mechanism because the containing context
will get the error if your function
doesn't handle it and can then handle it
so instead of having error handling code
that is dispersed widely in your program
you can have more centralized error
handling code that kind of breaks
through your normal program execution
flow and it typically just lets you have
less air handling code their classes
when we get to we'll talk about how to
make new classes but you can make
classes that extend the base error
there's a base class for all exceptions
and yes you can define your own custom
exceptions you can also pass your own
message to an exception and that message
gets attached to the exception and gets
passed back up the context so we showed
all the parts of a try-catch there's try
except else finally in real life very
frequently you will use try with on
accept and a finally block I almost
never use else which is just continue to
act which is there was no error and I
only use finally when I have resources
that need to be cleaned up so most of
the time it's just down to try and
accept it's considered bad Python style
to have a bear except because that
catches all errors which includes syntax
errors so if I write a script and that I
Python might not let me do this let's
see yeah I Python let me do this let me
do it in MX and run it
mm I have to carefully craft it
okay so except is catching every
exception that could possibly be raised
and I might think that it's kind of
obvious that there's only one possible
error
but in fact I'm wrong the actual
exception that's being raised is I'm
referring to a variable it's not
instantiated because I'm catching any
possible exception that could be
returned so their exception classes or
having an exception statement that
inherits from the base exception are not
a good idea in general you want to be
aiming at specific exceptions and you
can find out what the specific exception
is by executing it and noting the name 0
division error
and now you'll notice I ran my program
again the air that's actually occurring
is again I have a name that's not
defined and it is not caught and handled
by my except Clause and it's causing the
end of my program so no bare except
clauses usually you only use try and
accept you can make your own custom
errors it's worth looking at the list of
built in Python exception types because
they've got one for most every instance
that you would want including things
like runtime error which is for sort of
generic errors may be that our data
dependent things like index error or
sometimes use to say I'm getting
something that is out of range or is not
a key but I wanted
look up there is the same way at runtime
I got some sort of key that I didn't
expect so I'll raise a look up air okay
errors fairly straightforward exceptions
fairly straightforward has anybody used
languages that have try catch blocks
Java does I know we had some Java
programmers know PHP does nowadays but
probably not yeah it's kind of anything
to PHP it's a different way of thinking
about how to handle errors it's
typically less verbose it's a little
confusing that it breaks program
execution but really frequently that's
what you want anyways very frequently
when you're making guards around
functions you're going to return anyways
you can't bother to execute all the rest
of the code when you don't have the
appropriate error conditions so I'm try
and trying and catching flows pretty
well in how much programs are structured
so you have to manually yourself decide
to take that approach there is a
built-in logging module and we'll
probably talk about it on the fourth day
it's kind of on my list of things to
talk about and again if you look at the
resources page the standard live logging
module is a little bit verbose I believe
it's a copy again of a of a java
implementation so it's a little bit
complicated to understand and this is
actually the best piece of documentation
I found on it it's pretty configurable
you can have logging channels logging
channels can be connected to loggers
that output the various things like say
email or database and you can configure
what sort of errors they respond to so
you can log everything to a single
channel and only email like critical
errors for instance and yeah you could
wrap your entire so if you wanted to do
what you're just suggesting you could
use try catch blocks in your code in
places where you can potentially recover
from errors which is sometimes sometimes
you can do some sort of cleanup or say
oh I got a zero divisor i'm just going
to return 0 here that's a special case
like normally i'm going to divide by the
divisor but in this case arms can return
0 so sometimes you can recover from
errors you could wrap your main block
inside of a try-catch
that catches anything and log any errors
that occur
mm-hmm to catch the so the first thing
is the kind of error is the class name
of the error that's been raised
exception and the second thing that's
optional is the instance of the
exception so exceptions are actually
objects they're instantiated from
classes we haven't talked enough to know
exactly what that means but that means
they the class name is kind of important
it tells you what kind of error and then
the instance may have a custom message
attached to it let's move on to talk
about namespaces and importing we've
kind of been dancing around how Python
manages modules and packages a bunch of
you have imported from your scripts
you're encouraged to do that in the last
lab we're using the hiding behind if
name equals main syntax to allow you to
do that namespaces first of all we've
discussed function namespaces and module
namespaces we've even discussed the
impact of importing
so we've been saying all along that
they're basically two namespaces there's
a local namespace and there's a global
namespace once again I've kind of lied
to you in the interest of simplicity
there's actually a local namespace and
what we've been calling the global
namespace is actually your modules
namespace so there's not a single shared
global name space for all the modules
that exist we can create new namespaces
by creating functions classes and
objects as will find in a little while
and we can impact our current namespace
by importing in four different for
different ways for different ways so the
import statement Python looks in
predefined locations that are determined
by your Python installation on most sane
operating systems there is a slight
packages library that is in your system
directory if you have a Python that's
installed by your system so UNIX and Mac
OS people have fairly same setups for
Windows I think it's actually default
like on your windows box is going to be
C Drive Python 27 / lib there's a bunch
of Python and PI C files in there and
they're all accessible to import
automatically most python installations
also will look in the current directory
automatically for importing things and
aside from that you can manage your
environment basically where you look for
things to import in a bunch of different
ways you can manage it manually the
sistah path variable has every place
python is looking for packages right now
and it alarms me somewhat to see that
user bin is there it's looking in egg
files which we will talk about at some
point but egg files are basically a way
of zipping together a python
distribution so you can do a single file
distribution of a package and then it's
looking in supriya to find locations in
lib the python directories and most
significantly dist packages or things
that you bunt to my OS installs
and you can yes manipulate the sister I
could at the start of my script say so
stop path dot append it's just a list
and now it's got an extra location and
any Python files that are there I can
automatically import by saying import
they have to be files that end in dot py
to be imported you can't specify the
full file name when you import and as
we've discussed they have to be files
whose name is a proper Python variable
so yes you can run a Python file with a
dash or space in it but you can't import
it Python lets you organize modules into
hierarchical collections called packages
and the rules for packages are pretty
straightforward a directory is a package
if it contains a special file and the
name of the special file is Dunder and
knit pie so underscore underscore in it
underscore underscore pie yep so
packages can be modules in a
hierarchical folder layout but it only
works if there is a underscore
underscore in it underscore underscore
pie file so let's check that out a
little bit
so in my current directory I have a
bunch of Python files my current
directory is on my path by default ah
forgot a directory called my package and
my package has a Python script in it
called food up I there is no module
named my package
another is so what changed i just added
a special file to the directory that
indicates the python this is a package
you don't need to do anything else that
a nip file is empty there's nothing in
it you can if you want to put Python
code in the unit file and when Python
imports a package what it actually
imports is that a nip file and that a
nip file can be fine the layout of the
modules contained in a package if it
wants to and potentially hierarchy with
Lee arranged i could put more
directories in my package and what that
gets you then is there's four ways of
importing things actually let me go
ahead and put some code in through there
if we'll talk about that in a second so
let's talk about the import statement
we've been using import without kind of
explaining how it works or the various
ways you can use it we've done straight
imports so I can import my package and
what does that statement Do I've created
a new variable in my locals called my
package that variable is of type module
and you'll notice that the file is that
a nip file that's it as far as affecting
my local namespace if I want to refer to
things in my package I have to
explicitly say my package and is there
anything in my package nope no foo my
package is the anit file mine it foul
doesn't define anything so I've got no
code right my package
it's just a module the from statement
can preface an import and I did
something new my package it itself
doesn't have any code but it does have a
module inside it so i'm importing a
sub-module and food does have you know a
little bit of code attached to it and
when I did that from my package import
foo how did I affect my local namespace
i have only food there is no my package
I just have foo so this means you can
store your modules in dotted hierarchies
and people can import them with short
names if they like this helps to avoid
the whole clashing library names problem
and there's two other ways I can import
not only can i put a from module import
module i can do as and a new identifier
so you remember earlier we were using
date time it's like the very first
script and we could do import date time
and then to get to the now function way
to date time which is a package daytime
is a class inside that package now is a
function that belong to that class which
is kind of long we could do from a time
import date I'm not shorter
they could do as DT which I usually do
when i'm using the daytime module so
I've given it a new and shorter
identifier can we import now directly
doesn't work because
datetime is not a module it's a class so
from a module I can import anything I
want like from my package which is a
module I can import foo foo is a module
and from it I can import x.x was just a
integer variable and now I didn't import
the module at all I just grabbed one
piece of data from it so importing
normally is used to say import a module
it can be used to say from a module
import something else which is not
necessarily a module but can be it can
say from a module import something with
a name then it can also be used and this
is the dangers and non hygenic version
I'm in Python I have no locals just the
built-in ones i say from my package that
foo import star and star in this case is
in the glob wildcard sense and it
imports everything from foo which is a
module into my local namespace and you
notice there's now an X this is
dangerous
because you don't know what you're
getting and it could clobber your local
variables everything else package module
and modules contain variables variables
can be classes that can be just you know
X with an it you can import any variable
from a module you can only directly
import modules and a package is just a
module that contains other modules so I
keep on saying packages but a package is
just a special kind of module so date
time it can yes mod there yes
technically a module technically
everything in python is a class and you
can potentially extend an override their
behavior but in the case of modules we
do not sow a module is a particular type
in Python just like a function as a
particular type that has predefined
behaviors so functions predefined
behavior that special is its a callable
you can call it the modules predefined
behavior that special is you can import
from it a class is something from making
objects ok and a class is really just a
function we'll get to that there's not
really very much difference between
classes and functions in Python except
what you do with them so we'll get the
classes on day three but at this point
think about classes is just another
complex type like a dick door a list or
a function or a promotion yep ok so if
you just do import my package without
any dot or forward slash make sure
you're in make sure you're in the
current work you're in the right working
directory and you can do that I believe
with OS CWD
there's 3d have to look in my nut shell
to know I don't if anybody's been
checking out the docs on Python just got
a pretty good search function
and that's not what I want get CWD
so if we wanted to reorganize our
classmates file which we aren't going to
do yet we could start to think about it
as library code versus actual program
code and any general purpose functions
that we have we could put into a
separate file would be the advantages or
disadvantages of doing that like why
would we bother structuring things in
packages and modules cleaner more
organized yes oh that's like the main
number one thing you should think about
in terms of your code and files
shouldn't be big if you've got 1200
lines of Python code you probably ought
to break it up into multiple files so
that you can group similar functions
because there's no way that you can page
down and understand all that and there's
a few other metrics for sizes that I
sometimes I've got a couple of automated
tools I run on some good basis for
customer sometimes they tell me just how
much work we have to do to get things
perfectly clean but say you're you have
a file that defines 50 functions again
even if the short functions you may not
be able to kind of grok the entire
purpose of all those functions and if
you can group them in any sort of way or
categorize them in any sort of way it's
kind of a benefit to you our program
isn't really big enough to profit from
such grouping and categorization when we
start talking about testing which we
will just shortly and see how it as we
test up there are some other advantages
to moving things into separate packages
or separate modules you can just test a
particular module and we might not want
to test the main logic of our program
but we might want to test all of our
helper functions and helper classes and
objects when we get that far and moving
them into separate modules lets us
easily decide what pieces of our code
we're running tests on and what pieces
we're skipping testing for correctness
so we'll have automated testing that
says here's all the function should work
here's an example of it working in the
output I should get back run it and see
if I do get in fact get back that output
that's doc test and that's the simplest
form of testing and we'll talk about
unit tests either tomorrow or on day 4
depending on how far along we get and if
you're not aware testing is kind of all
the rage in the programming community at
the moment if you work on a project of
any
significant size it's really wise to
have tests and tests basically
demonstrate the compliance of your
program overall and what tests do for
you is let you be more agile you can
change the implementation of a function
if you've got a lot of tests for it
because you can run all the tests at the
end and say hey I changed how this works
but what it does is still exactly what
it did before and otherwise if you make
a lot of changes to functionality let's
say you have a function that runs way
too slow so you're going to use a
completely different algorithm but you
still want to accomplish the same task
when you're done have you now introduced
new bugs into your program without text
you don't know if you've got an
automated testing suite setup you can
feel free to edit your code more freely
without worrying about the cost of
change because you've already accounted
for them so it's really popular right
now even to do test-driven development
which is write your tests first note
that they all fail and then start
writing your program by making your
tests pass no we have some automatic
ways to run the tests yes usually not to
generate the tests there are some tools
automatically kind of generate the stubs
for your tests depending on what
framework you're using but yeah you
usually have to fill in the test
definitions yourself because it's it's
basically restating the logic of your
program as we'll see okay so let's do
one more concept and then we can start
playing with our lab again I'll see what
time is it actually yeah let's do one
more concept and those of you who are
ready to move on in your lab will have
something to do and as of you who aren't
I will come sit with you for a bit so
files working with files we haven't
talked about files at all so far I'm on
page 24 of your docs at section 10 if
you're interested but basic file input
and output Python has a library that is
a thin skin over the standard see
methods of manipulating files so it
should look pretty familiar to you if
you used any other programming language
that does a similar kind of thing and
let's just run through some of the bits
and pieces
I'm using ipython which will give me in
fact let's give myself a file to work
with okay I have a sample text file here
that is just a directory listing the
open builtin accepts a file name
argument it can be relative path so it's
based on where I currently am or an
absolute path and my pie Python shell
does autocomplete on the file system as
well so now what have I got I've got a
file object it's just a normal variable
no special syntax but it's a type file
that specifies where the file is it says
mode are when we read and write from
files we can open them for a variety of
things the default is to open them for
reading we can also open them for
writing if you open a file for writing
it empties the file and starts you at
the beginning of the file so you usually
only open files that don't yet exist for
writing if you want to edit a file
there's mode a4a penned and the file
object will let you move to a arbitrary
position within the file and write data
the other thing to be aware of is that
you open files with either a text or a
binary mode and this is a cross-platform
deal if you open files in text mode
which is the default I believe that
right yeah which is the default um
Python will automatically handle newline
characters for you because it's assuming
you have a text file that is separated
by carriage returns if you open it as
binary Python doesn't take into account
the new lines
so what can I do with my open file i
have read revine and read lines let's
look at red lines first it's a function
and it returns a list where each item in
the list is one line from my file and it
is the whole line including the trailing
carriage return see the slash in at the
end if I run it again I got nothing the
file object is inherently file pointer
based so when you open a file object it
has a position and it starts out at the
top you can move that point around
explicitly by seeking to a specific
location or you can move the pointer by
reading from the file and if you read a
single line it moves a single line if
you read all the lines it moves to the
end so I can do an F dot seek to the
beginning and read a single line and
I've got the first line in the file
so you may be very tempted to write code
like this
ah
print the line not the file notice that
there's two blank lines in between each
line print appends a new line to the end
of its output by default and there's an
embedded new line in each of the lines
cut a seat you can suppress the new line
that print passes by appending a comma
to the end of your print statement and
what that is actually doing is passing
none as the last element in the tuple to
print print in Python 2 is a statement
that takes a tuple unemployed tuple of
objects and I can say print 125 it's
accepting multiple parameters if you
like if the last one is none it'll
suppress the trailing newline so there's
a null argument at the end and therefore
it's not printing it's suppressing the
new line if the last thing you pass it
yes so I still get a new line because
there's one embedded in my file and I
was about to say you might be tempted
write code like for line in F dot read
lines don't do that seeking back to the
beginning here
at least yeah don't do that revines
reads the entire file into memory and
creates a list with all the entries so
if you have a really big file that you
want to loop through like say you open a
2gig txt file and you say for line and F
dot read lines the first thing we will
do is read two gigs of text into memory
and then start looping very slow it
would be better to say for F and I gotta
remember to seek each time I move to the
end of the file for ln f dot revine
hmm I'm thinking about that
ah right I'm making it iterate over a
single line
no actually what I want to do is the
assignment and I thought I can shortcut
the assignment
there we go so I knew I'd done this the
stupid way before so this way is more
efficient and I've written code that
does this I'm reading through the file a
line at a time and looping I can't do
with a for loop have to do with a while
loop have to initialize my line and red
line at the end the file object itself
is iterable and the real way to do this
is for line in F just F
it's using an iterator it's reading the
lines one at a time instead of slurping
them all into memory and this is the
fastest and friendliest way to loop
through a file so close which we'll talk
about in a second encoding which we
probably won't talk about file number is
the underlying operating system level
file handle number there is not and that
kind of makes sense how could you tell
how many lines there on a file well
you'd have to read the whole file and
count the slash ends so if you're going
to do that
we can tell ourselves by grabbing the
array of all the lines or we can loop
through an increment a counter but
counting the lines in a file would
implicitly move the file pointer around
yeah if there was a like f dot count
lines that would move you to the end of
the file there isn't any way to tell
without reading the whole file how many
lines that are in it that I was
referring to the memory offset in the
file yep depends on your operating
system very sadly so yes it is so in
general i am using seek to go back to
the beginning of my file and that's
pretty much the only thing i ever used
seek for if you're writing to a binary
formatted file you might be using seek
and calculating offsets yourself but if
you're writing to a binary formatted
file of some kind you're probably using
a library that speaks to it directly so
for instance if I'm reading and writing
from an excel file I don't read and
write the binary file and figure out
what data structures are underlying it I
use a library that speaks to excel
natively if I'm and in if I'm using a
database file like a DBM file I don't
manipulate around pythons capable of
that but it's kind of annoying work I
use a library that speaks do it directly
typically so in any of my file opening
experience on my day to day day job I'm
only directly using the file object when
I'm reading and writing text files and
if I'm reading and writing binary files
it's probably some sort of well-known
format that has a library that doesn't
force me down to the raw file file
object so we know almost enough to be
dangerous let's look at writing if I do
F dot right right now just write
something it complains my file is not
open for writing I can specify the mode
as an optional second argument to my
file and now if I do read it says it's
not open for reading and if I look at my
file it's empty opening a file in
writing mode empties it and assumes that
all you're going to do is put stuff into
it
let me recreate my file
yes it is we're writing for that matter
and if I do a pen mode oh yeah a pen
mode is going to move me to the end of
the file not truncating the file but
it's still opening it for writing on
last thing to know about files so most
we haven't talked about much about
memory management because python has
automatic memory management file objects
shouldn't be left open once they're done
with they do have a protocol to
automatically close themselves so for
instance if you open a file within a
function and the function execution
ceases and the file variable now goes
out of scope it will pipeline will
automatically close the file for you but
for instance if you are opening files
within a loop it's possible to
accumulate lots of open file handles
what your OS may or may not like so it's
worthwhile to explicitly clothes and a
common use of try and accept blocks is
to make sure that you have a finally
that closes your file no matter what
else happens so if there was some
exception in reading that's fine but
let's make sure that we close our file
so I'd like you all to play in the
interactive console with the file object
and then the next thing we're going to
do for our classmates file is start out
reading our initial data from a text
file and I'd like that text file to be
in CSV format we're not going to use the
built-in CSV library to read and write
from it but we do know enough to parse
CSV we have a split on a separator which
is going to be a comma and pull up the
instructions
so lab nine once we've finished with lab
8 i'll leave all the instructions that
kind of circulate with load the data
from a CSV txt file and csv is a common
data interchange format and it should
look something like this so comma
separated fields and I'd like to add a
menu option to save and write data and
you can hard code the file name to start
with we'll change that at some point in
the future but let's start your program
out by reading from the hard-coded file
and add a menu option to save so if you
select the menu option your file will be
written to with any changes you've made
your data structure if you don't your
changes will be lost dot read and so you
just to recap what we've said about
files here we operate on files by
acquiring a file object and we get that
file object by calling open open takes a
file name and optionally a mode with
read being assumed so if you're going to
write to a file you're going to have to
specify your mode is w and valid modes
are our w and a and you can also a pin
be to any mode to specify that it's in
binary but you won't need to do that
since we're going to read and write text
once you have a file object you can read
from it if you've opened it in read mode
and you can read individual lines you
can iterate over it and you can write to
it or write individual lines if you've
opened it in right csb stands for CSV
stands for comma separated values so CSV
files are files that use a delimiter
character to separate fields and each
row typically represents one
row in your data and comma specifically
CSVs or commas but sometimes people make
CSV files that use a semicolon ares at a
breeze into the delimiter character and
all spreadsheet software will freely
import an export from formats like csv
mts v separating the fields lines are
separated separated by a new line so you
could have spaces in your data and the
important thing is basically to choose a
separator that won't appear in your data
which is why sometimes people use tabs
if your data contain commas then the
additional complexity is you have to
quote your data appropriately and
there's a built-in library that handles
all that complexity which we will switch
to using at some point but we're going
to start out wrangling our own CSV and
pretty much all you need to know for CSV
is how to open and read files which
we've covered how to split lines of text
so you're going to end up with lines
that look like this and actually they're
going to look like this
you can split them by a separator
character which would get you a list
you'll notice that that / in is still in
there if you want to get rid of that /
in this string type has a bunch of
functions on it including strip and
strip strips leading and trailing
whitespace by default or you can specify
the character you want to get rid of so
just calling strip on line returns a new
line because line is an immutable type
without white space and new lines are
considered white space no so the idea is
to load the CSV into the exact same data
format you've currently been using so
you should create you've got a data
format called names or classmates or
something like that that's a dict you
need to loop through the lines of a text
file reading each line splitting it into
first name last name and roll and adding
it to your dicked still keyed by first
name is fine so we're going to build our
dick dynamically instead of specifying
it statically in our code and when you
get to the writing part we're going to
loop through the values in our dipped
we're going to open our same text file
and write mode which will erase its
contents and we're going to write and
you'll want to use right lines
and write lines except say sequence of
strings as in a list of strings it
expects the strings already have the new
lines in them but it will write them all
to a file so you're writing operation is
simply going to be add newlines to your
list of values and write your list of
values to pass your list of values to F
dot write lines</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>