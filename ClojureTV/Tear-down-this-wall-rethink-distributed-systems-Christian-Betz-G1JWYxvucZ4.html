<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Tear down this wall – rethink distributed systems - Christian Betz | Coder Coacher - Coaching Coders</title><meta content="Tear down this wall – rethink distributed systems - Christian Betz - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/ClojureTV/">ClojureTV</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>Tear down this wall – rethink distributed systems - Christian Betz</b></h2><h5 class="post__date">2017-08-14</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/G1JWYxvucZ4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">yeah thank you and good afternoon
welcome to have you back after lunch
yeah I'm telling and I'm telling
something about distributed systems I
had have had to have this reference if
the gyro closure is in Berlin and that's
where the table titles coming from
because because I think we have too many
walls in our distributed systems and I
think most of us develop distributed
systems in any in any fashion like
because I would like to take the
broadest possible definition of a
distributed system for the sake of this
talk and because I'd tried to strip the
example I'm using later on down to
something everybody can relate to hope
hopefully so a distributed system here
is like em two or more components
running on separate computers
um connected over network to exchange
mesh messages to coordinate their
actions like it's not two components
running running everywhere not connected
or not talking and let's not what I'm
what I'm talking about and this most
simple example like I could I could come
up with is a simple to do application
running in the web browser with one
service back-end for example to be a
story or to do the house in in memory to
get rid of the database as we close a
conference include a community of course
we use include script and closure for
the for the front and end for the back
end for sake of of having complete
example I say we were developing reframe
but it really the the talk is about the
the ideas that don't hang up on the
techniques or the the libraries I put up
there and from from the simple example
I come to this I think most of you know
it's a picture like this it's an
architecture diagram and yeah the thing
I state here is let's architecture
diagram has one big drawback it it shows
it visually shows a border like here and
we as an industry are so tied to this
notion that we even align our teams
along this we have we have some front
and developers and some back-end
superheroes like maybe it's the other
way around nobody knows exactly maybe
some of you remember Conway's law who
stated that organizations are deemed to
rebuild their organizations
organizations and structures in the
systems they are building but we're not
having a single architecture when that's
having a picture like this most of the
time we as developers are working with
our systems this is more or less a
deployment diagram this is a production
view of our system but we as developers
wanting to have rebel driven development
wanting to have test room development
for us the border isn't in the right
place and I say we should think of
distributed systems as one big system
and as far as far out as possible so and
drill back in on what you know current
context is the thing we really really
want from our from our architecture and
i-i-i highlighted some of the components
and i I grade out others because in
revel driven development
when I want to see stuff in the front
end application happened like I added
to-do item or I delete one um I want
things to happen in the back end
I don't want to develop the front and
then see if it sends the right message
on the API and on the other inside
developed in the backend to react on the
on the API only I want to and most of
the time I want to do stuff in the front
end and see all my message going back
down to the to the server on coming back
and see the whole cycle um this is not
just an idea I'm coming up with for the
for the conference I'm developing
closure systems for for six years now
and one of my my first mistakes
developing exodia system was hey we're
doing unit tests for everything we're
doing a unit test for functions big
years ago we didn't have clearance back
so I was unit testing each each block
and each function and I even even larger
blocks but when we changed for example
the order of of arguments of a function
at a point where we very broke but but
chain it just occurred to us in an
end-to-end test running the completely
complete system and this is this is a
thing I'm trying to address here and
respect makes it a little better a
little easier because if F therefore for
functions and stuff like that but the
basic idea stem cells from there and
even even if you have another context
even if you are a front-end developer
you should also have the possibility to
work on what's your concern and not have
the whole architecture in the whole
distribution
and in mind so in another another focus
for example I just want to mention I'm
not not drilling into it you could use
deaf cars to develop just the front end
in itself and let's let's basically what
I'm trying to achieve when we are
developing our software we're doing
software services so we are having a
front-end application having multiple
services for this and the the basic idea
of of what I'm saying having contextual
architectures to drive speed of
development to to ease the life of our
developers and this is true for for a
simple dashboard application but is it
also clickable to much more complex
systems this is a project where we're
also working on you see that advisories
box over there Integris takes us apart
in a moment and where we don't deal with
WebSocket connected stuff but this is
what you what most of you would say
there is a distributed system different
services in the backend communicating
over some event bus here Kafka
and when we only started developing some
of these services we were trying to find
the right granularity is I'm a big fan
of separation of concern and micro
service architecture is like the same
same thing on a different level though
the service which does exactly one thing
and other thus missing really good but
the problem problem is and we heard it
yesterday we have a little problem with
dependencies and remember the picture
from from yesterday dependency hell or
acai all of the place that we had we had
it all so we try to avoid it from from
the beginning because we knew of the
problem because of course all those
smaller parts share common code they
share the specs for example for what
what advisory is in the first place or
you see you see s3 in two boxes so they
share library to to connect to our to
our data storage um and to to avoid this
we grouped several things together
breaking that micro-service pattern or
breaking that a small concern and what
I'm what I'm proposing is a way in the
closure ecosystem like them I'm coming
to that and in a moment a way in the
closure ecosystem to come up with the
possibility to get rid of a dependency
health problem for that special use case
so we can really build smaller features
and like rest a like or like rattle
driven development and test room
development is another thing which I
think makes our systems more robust than
our architecture better because what
what I'm what I'm happy what I'm having
here's the secret could be really really
simple it's just a generic feed reader
taking any feed and putting it locally
in our in our infrastructure in s3 this
has to be really really robust and the
services after that under our control so
we could restore them we just have to
make sure that the reprocessing events
on the on the event person and stuff
like that so I think it's it's better
for for the stability of the system and
better for development to break things
down but again developed a thing as a
unit and um
I I began with showing you that
architecture diagram and stating that
the diagram leads us to see a border
here and I think part of the problem is
coming from from that kind of diagrams
where we see those little boxes and try
to fill these boxes and try to put them
together and the the language where
we're speaking is really desired that
the determining of the way we sing and
the graphical language here is not the
optimal representation but fortunately
this is no language this is an enclosure
we can get away of these boxes and put
stuff the way together the way we want
it it's just like functional composition
no matter where we draw the function
from if it's from this library or from
from that namespace so enough of the
general idea I think you get the picture
of what I'm trying to achieve and I want
to switch to the second part of my of my
talk house culture clothes are helping
us first of all and really really
obvious is C IJ g LJ g which is with
clone script and closure in that in a
simple example we're we're seeing and in
the in the larger example of but what we
as a company really are doing we are
with this combination of languages we
were enabled to use the same language on
both platforms because in the end the
pictures right in the end software is
deployed to different computers and in
this case in the different platforms but
we have parts we share like so respect
for Advisory's um
and there G there G is our friend I'm
really can't stress is enough especially
for everyone who's developing a library
because the refrain guys really did a
great job here because they enabled this
front-end technology to run on the JVM
in large parts and they even develop
reframe tests where you can run your
tests in the JVM so actually that's the
biggest step in in this special example
to bridge the gap because you're running
on the same on the same system you're
running in the same context so this is
the test case just run RF test this
refrain refrain test and we're actually
rebuilding the structure of what is
happening in reframe with dispatching
events and waiting for other events to
happen and the interesting thing is what
happens when we dispatch this event
normally we would handle this event code
call a web server a WebSocket or create
a WebSocket request wait for what don't
wait for response depending on whether
it's a request which is symptoms arising
for us asynchronous and come when the
answer is coming back we're processing
this answer and here we can you can
directly reach from the dispatch
function if we switch out small parts
directly reach into our business logic
completely ditching the WebSocket
messages we gain because you see a lot
of problems where you're where you're
sending stuff from your back-end which
just isn't the right granularity for the
interface or you're asking the wrong
things from your interface and when you
when you are developing a new system and
developing
the API and adding new business logic to
your to your system this is this was a
great benefit however I'm not the only
one on the conference saying spec is
spec is a great thing on the on the last
closure D and like March of something
here in Berlin the even had talks from
an English guy who said they are
generating swagger definitions from from
closure spec what I'm trying to stress
here is we don't need to to spec what we
what we had as a border before we need
to spec the WebSocket message as we
exchanging of course and we need to
document it for for others to use our
services but if we leave this part away
and reach directly into the into the
business logic or directly into into the
app state of the front-end we should
also have specs for those and the
interesting part is we're reusing specs
or all over the place because of course
that the for example an advisory ID is a
special format it's the same both on the
front and end in the WebSocket and in
the backend that's that's really a thing
I can't stress enough to really expect
on all the levels where you have
possible breaks in your in your colony
in your in your architecture and one of
those breaks is like the part where
where we take out the WebSocket and put
in another communication mechanism the
same is true if you take out Kafka or
rabbitmq or whatever and and connect
services directly together and here
protocols for the wing we can define the
the necessities we expect from from our
communication protocols into closure
protocols and use this to exchange the
communication mechanism we're building
our systems based on unmount you've
heard that also yesterday by the I think
by the Indonesian guys so it is
relatively easy to switch components
with stayed back and forth with that and
yeah I'm just seeing my time I'm so much
faster than in any test run I did these
lot of room for for questions and and
the biggest the biggest gain we got
something we just learned in the in the
beginning of this year um we were trying
we were trying out stuff with line
modules for another project like two
years ago we had lines sub modules
everything was like this is okay but
it's not not the way it should really
feel and the thing is this dependency
held problem we switched from a
different project with different git
repositories to a mono ripple and this
gave us the possibility this and line
monolith together gave us the
possibility to explode the number of our
of our projects actually and to really
have one project for one concern this is
absolute gorgeous
because what line monolith has what I
didn't find in any other place and
that's why I'm really like both those
scared and was really looking forward to
what you told yesterday about dependency
mechanism because we're trying to yeah
temper with the class pause here because
line model is giving us the ability to
say please
run a rattle for this project this
project this project and this project
and leave the rest in part because this
is the context I'm currently developing
in this is my father the most amazing
thing I've seen and it's really just
just working like this
so during during development this is
actually what we see as developers and
this is actually what I want to see and
it really does my speed because I would
like to you to to find your own borders
and team down like not not was the exact
mechanisms I showed you here but I'm
pretty sure you have your own your own
Boris and your own ways to work around
because if you if you find a unified
context or a unified model of your
system and take out all the smaller
parts you're really interested in you're
so much faster and it's so much more fun
to work on a complex system yes that's
really great so the other option has
come to enough so it's 20 minutes I'm
finished sorry for being being way
faster and I did I did stuff on on def
cards I did stuff on spark if you're if
you're interested in any of that on
again I can go on in the question
section because there's there's another
interesting thing because of grant
developed a spark library powder keg and
and I'm maintainer for sparkling and the
different approaches to to actually
reach the same goal so you can see it
here so if you have question on that
feel free to ask also thanks a lot</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>