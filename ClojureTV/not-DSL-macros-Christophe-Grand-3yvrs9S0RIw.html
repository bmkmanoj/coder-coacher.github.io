<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>(not= DSL macros) - Christophe Grand | Coder Coacher - Coaching Coders</title><meta content="(not= DSL macros) - Christophe Grand - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/ClojureTV/">ClojureTV</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>(not= DSL macros) - Christophe Grand</b></h2><h5 class="post__date">2012-12-16</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/3yvrs9S0RIw" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">I so I'm going to introduce you to our
white t SS with a which results in too
much to macros so in my experience
writing TSA is our the main thing the
main yo I do all the time is using
macros macros to merge macros everywhere
the first stupid things that's stopping
you from practicing I i tend to serve
hey hi hello i'm going to do the macros
and it's going from marcos like already
let's use them you have two problems and
so my experience with what if she says
are with typically within a lie this is
an HTML completing of the transformation
library we stash which is HTTP routine
library and Kathy which is not finished
yet which is the power generator doing
all this work I I spot some pattern that
I'm going to try to to make clear and
convince you to to follow this was all
at least chair my parents and I we won't
work through an example which is a
magnet dsl and there's a more vintage
version available data the diversion
which shall we work work useful we will
be where way easier to understand that
the one which isn't given how let's go
so what Gothel dsm indeed in pressure we
have already some TSS in the interim
wedge itself it's a war to focus card
Middle Ages so we have disability
progression sweet flowers red last in
the most affectionate arrows syntax
wrote friend has conditioned many many
small part of the language where the
usual evaluation would don't apply and
outside of the language we are also many
Murray's which try to develop a kind of
dsm we have a treasure to you crucial to
our which is a kind of a scalene
preserve crowd which protodeck approach
is extracted from commercial so it's the
looting and the HTML generation step
from computer not sure which is for
utter matching and having you tell you
that already talked about so first we
have to every almighty the dsm TV a dsl
is something which is limited in scope
it's in no way a general purpose of
operational definition and we did not
want to even a deterrent complete
language because it will be two out made
them to out to implement and we already
have three comfortable disclosure so we
just have to make things better for that
specific needs but we don't have to
print out anything which is already done
enclosure and I permit I'm only going to
talk about eternal dsl that is
yes I'm written in the earth language of
not gsm which had they are all syntax in
the opponent problem so i think that the
the thing that we separate to tss from
api the defector napi be committee said
as soon as these this happy i provide
616 of competition for forensic
assistant it can be both logical data
and the other in DCPS is our the party
under inner eye being clarity they add
earth to reduce incidental competitor so
when we tested for me something is the
dsl as soon as you have a 60-40 notation
that's all I can say this kind of a
blurry line because when the DPI become
becomes a IDs any spy glory absurd
as from end of the continuum we have
just a testament to me even a
recommended that you are like doing the
direct specification for for our to
represent request Wisconsin HTTP it's
kind of easy and at the other end of the
spectrum we have the big macro which is
doing all evil scenes which is our
parenting for course of comedy valuation
which is ranking the users crazy because
the Easterner is no no we're out Roger
con la neta said I made several
iteration while I was working on Roger
on Owen right I even would say brought a
bit tentative templating engine before
before nine and at some point I was
quite happy with the knife of the users
help stop content was surprised they
complain because they wanted to select
all which are kind of CSS a toast
leticia to be perfect because they
wanted to be able to comport great was
part of damage on it wasn't easy it
wasn't easy because I well as using
macros so I work abroad in a moment my
bus back to support i will call 11 I've
of the quarterback would they went to
Sasuke base and the TMP at the DAPs take
about the same the kindly and treasure
trail which were cutter back this one or
maybe as metal back panel meal and the
lodge insane at the serious story with
rejection the user contain that it was
20 23 was part of the s-curve very easy
one the they asked happy way wide of the
continent but part of the way while
still
the board oh excuse me
so I see that at this resistant our
support pattern the pattern is that use
of imported using what the policy will
evolve say either way to effectively
what the domain specific things you know
shorten certain way where they want to
use up all the usual treasures term so
they want values they don't want a
language they want to meet specific
values so to meet the reset the recipe
for for this a success or at least for
not feeling completely a dsl East web at
first some nice values and data types
run full of strong functional core of
ABI around is data type and even sure
you can add server close at the end to
make things better but you first add to
our wet foundations before putting my
paws on top of you we really want to
limit the complexity both for for users
and also in the implementation for for
us the demeanor of the API so to limit
publicity the first step is to link up
like I said before you are not going to
to win to win bound or anything which
already exists and treasure so you are
not going to implement control flow or
even introduce your own the at work
lexical banging you are going to have to
peel back and what pressure provide the
order part of meeting complexity is to
leave in syntax which is very close to
saying goodbye to my code so you have to
use closures you have to use existing
data types at their best way if you are
not happy la happy with the with the
result you can always add some macro
later to make it less relevant at least
you will observe some coke so some
strong co on which to to build you your
macros and if users are happy pleased by
your macros they can always go go back
to your functional code and add them
self so since we are going to leave in
scope and syntax we really have to start
easy very simple so no vacuum oh I think
the better I know you are at odds with
the diver I will rain again smack balls
because macros are often used in a way
which which relates to premature
optimization and macros give you too
much work for your for your own good so
when it tottenville just with data and
when
questions about data the first thing to
do is to take the existing closure data
types and try to map domain-specific
semantics on top of them and when when
you run out of closure data types that
you will have to implement your own data
types with def regard at that time but I
want to warn you against not not giving
target specific semantics with distant
symbols because first as he tours of
recent suppose I'm not uh not really
dramatic nobody likes to put everything
and it will avoid confusion or so with
data on if you had the road map or a
Toronto graffitti so stay away from our
recent summers and keep them to clearly
convey to the reserve that as soon as
they see a parent or fishing pole they
are bringing back into pressure on to
regular kajal kajal territory plan yes
sir Vacaville California which are going
to complain that they will mark a little
bit like I said back to our cattle
prometi optimization
I seen several times in doing your
primitive solutions for macro so in life
there's a chrome it where I count the
number of factors by twice the same to
make the same Kermit made make the
selectors class class and pursue below
for a simple design which heard me to do
internal better or twisted optimization
strategy using simple simple placing and
so on the net wizard is that I are
removed after the macro they are
something which is better and faster
have the self the Dynamo on the JVM has
taught us that dynamic then we stuff can
be two such stuff so that will foolish
legitimate use cases for ipod this
useless is our control flow and backing
to walk around the the new mac pro
limitation still be able to enter
material
you have to work and evaluate things
into closures of delay when insects and
the to work your own binding it's it's
more difficult you have to decouple by
deed form the rest of you of your dsl
from the fashionable so to take apart
the divining part you will add to design
a version of your dsl which not use
binding the scattering which is going
not to tell here it's an eighth and i
want to look at it binder X to the wet
is much here but just to say here I want
to keep this valuable for for later use
so if you have to version of YouTube a
beauty of your dsl one we just calculate
and one which is batting you can easily
create a function which is going to turn
specification of the of the binding or
biting spec to Catherine Spain and in
the same way we can easily extract all
the back and forth for from the banking
specification so here is a equity ii
quantity called one match macro which
which could be used in a bad pattern
matching library you see that the
pattern the pattern is written the
binding people in the banking language
because since we are going to if we want
binding we count working on that pole so
it's always a macro is going to take a
binding form so pattern is the binding
specification value mr. is the value to
mushroom at the battle again against her
body the same Teresa execute if the
match succeeded so capturing is the
first fraction that I that I'll talk
about it this is a function which is
going to turn the fighting pattern to
catalan pattern so much sure will be
checked or pressure code which will
evaluate to move to plain old values and
mature will be passed to capture which
or web which also is a plain
old-fashioned so it's here that we see
the eight Oakland part between capturing
and binding we have the white outside of
the white light we have the
polyfunctional
my Pradas part of the language done
under wipe out the debating itself so
somewhat have managed to put the banking
stuff out of the national poll well now
I'm going through the example which is
the SF or wagons where cases are already
by themself dsl but an internal error
has been an external dsm so the AG
requirement for this esa is to be able
to compile to compile it to the closure
ostriches relaxes which had the java
rejected the java pata project and what
may not be obviously useful to why
already gsl it's it's an easy temper
because many people throw our reg
networks and many people also a step out
of that being able to to compose a regex
to me was battered a mentor so we are
first to ask what a more basic very
basic building blocks for a text to me
is at least to a little old to have
sequences alternatives hurry carriages
and the white card I what color I'm in
the dark character in account so I suit
that the first thing was to map own it
to existing pressure that arrives so
here we leave to map retailers sequence
ethernet switch carriages repetition and
worked up white card to put two
projectiles four little words it's easy
is going to be strengthened characters
sequences where sequences there's these
vectors but I had already said that I
don't want to move to use it do so we
are we're left with with several vectors
a tentative being not other good fit for
process here for current for car
character ranges I'm somewhere to
abusing the map because I representing
each each wait in the van entering the
map with the key being the
to the lower the deranged in the van
impe the Ichabod at this point we have
one out of Fresno types so we'll add to
you all file types but we will
reconstruct the distal by using factory
so for repetitions I use a factory and
whip it and for white card it will be a
simple blog which is any to evaluate to
do not waste general pattern we need the
simple function which is going to be
right when you exit eight texture data
structures the specification and it's
going to come by so it's a two-step
process first we take the w which
represent who oh my ex and then we
compile it to patent string and then
pass the baton swing java pattern
compile to create a natural pattern
object since we are mainly dispatching
on one type durable the most obvious
thing to to to to increment method is to
define better serve as a protocol
traction here we are wait expectation
with which is a protocol with with will
excuse me
with just one one function well in the
food source code which is very open
dieter the the example is a bit more
complex because I pursuant to systemic
groups in Vegas ensure they are more
there are more protocol functions to
this protocol so here is the simple
extension of the this protocol to the
basic plot your data types first ring
and character is easy we simply put them
for personal vector we ask for the
diversity resulting padded of the sub
component and join them together is
about the same thing about set except
that sets the test phase with five and
the wax into into a group it will move
to
that have a president's problem and then
get some that are simply generating
equal to or the character range they
should have some special character
escaping but it was too long for this
line from here now we are already your
work we have already working TSM we can
while we can create or value with any
contrived well we want and we will be
able to compile it here and way I'm
raising many of the things that are
simply defending the carriage 029 month
then I am well we're using it this you
can't do that in their individual
relaxes and you wouldn't have been able
to do that I mean that's using your
macros they're not using in that
shooting value it because your your dsl
specifications after the first class
that you can pass them around with the
locals and so really I can correlate and
then inside the weekends put everything
together or create like in the single
example create the
pieces of my reg ex is my way get
outside of the village school anyway it
will walk in for cases I can't even go
as far as to twice by the same thing
with using into an interposer aunty it
will still work so now we well well
prevailed out to infamous repetitions
and the white car to infamous repetition
like I said we are going to need a new
time so i define a new tab which is a
reputation and then its factory function
which is wicked I'll record it and I
excelled repetition to the world of X on
the radius possession protocol to
repetition and that's all what 99 line I
I have handed repetition to the to the
desert so you
the TSA is pretty open it's not close
the the user can and is it it can enrich
and from any for this special case any
either the son of its kind doesn't the
no Qwaser one card which a bit by the
same which happens by the sackers so the
city's it's a one-shot the best thing to
do is to use graphite created and to why
this obvious implementation of pattern
which is to return dot for the white car
so you now that we have both or
functional call the data types we can
easily define helper function and users
can define a convention they can add
they can add incest for example here i
show how a user can implement a journal
avatar which is going to whip it reacts
by interfacing find a surrogate in the
middle of it between each repetition
this is something something which cannot
be done in red in actual officer pcr p
relax
Victor insanity a new language which can
be expanded air it's easy to excel at
the center thing to to note that the
wizarding red X is only slightly shorter
than the way Xcode so we are getting
some some gains on the under gravity of
leticia ever on the search button such a
small example as total total pro as reg
ex decent but the full truth about every
function is that Apple functions are cut
off my clothes for your DSS but aqua
which are executed at one time because
they are no pressure McCune adjuster
macros of your dsl and if we continue
this disk empezaron you may notice that
where's the main function which
heavyweights specification to natural
rejected is somewhat like evolve the
last thing to do is talk is to close the
rule because we want to if we want to be
sure that we will be able to pass regex
ago around or whether specification
around we have to either way to
canonical eyes them so we have to make
reg ex differential it important such as
if you call twice really food it won't
matter
it will allow you two to get two
together can any collateral for a bit in
the same way that when you call seek on
a collection that you get on a fraction
maybe you already are se but you don't
know if you have a c-corporation so
europeans seek instead seek is it
important consequence who has no
probability it takes you to be sure that
you are valid and this is the same the
same rationale behind making the reg ex
or the main function which evaluates
your dsl to make it in a patent so now
quickly how one can add static
optimization once everything is working
in the free in a fully functional way
with no macro we can try to add some
static optimization by spotting patent
specifications which studies we have no
free valuable no fishing poles and so on
the receiver with who
this is to work through you that I type
and to and to search for possible but
you have to work on yet recognized you
one function so as to be able to put
that that you know Jake whip it whip it
is part of the dss or if it repeat that
appears in the specification you can
automate it because we know it babe but
you have to be sure that you are not
going to confuse my repeat with the
Riveter jajaja remember with the local
or in the user as a guest the as well as
we did you want to organize in all cases
so the rule is to never compare symbols
with compared bells you have to weather
but by checking that first that the vast
is not shadowed by luca and when you get
the reservoir you simply compare the
value expected is if it's a rather to
know about that work
under that you can go for the heart and
the frequent by a result from constant
fragments so as you not have to even
make them each time that's
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>