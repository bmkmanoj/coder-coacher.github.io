<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Bozhidar Batsov - The evolution of the Emacs tooling for Clojure | Coder Coacher - Coaching Coders</title><meta content="Bozhidar Batsov - The evolution of the Emacs tooling for Clojure - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/ClojureTV/">ClojureTV</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Bozhidar Batsov - The evolution of the Emacs tooling for Clojure</b></h2><h5 class="post__date">2014-11-20</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/4X-1fJm25Ww" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">good afternoon everyone thanks for
showing up I was a bit worried that
after Colin's presentation everyone
would have migrated to cursive and I
would have no audience but I'm happy to
see that this is not the case thanks
again
I'm bullshitter obviously but you
already know this I'm pretty sure that
you have trouble pronouncing my name so
you can call me but that's how my
friends call me but I was known as book
way before I became a software engineer
so this is this has nothing to do with
the quality of my work or at least I
hope it doesn't yeah
so I feel that I have to tell you
something about me and this is that I'm
a dark knight of the order of he max I
spent all of my free time trying to
improve the image ecosystem for for
everything not only for foreclosure
development perhaps you've used some of
the things that I do
Emacs is pretty exciting and I hope that
I'll manage to convince you about its
merits but why am I here I'm here
because I walked my train of thought so
I don't like travelling that much but
there is a serious reason for me to
enduro 22 our journey from Bulgaria to
here and this is a disturbing a
disturbing data that I saw in the state
of course our survey there is a question
there which is what is your primary
cause a development environment last
year
48% of the respondents said that this
was cider this year the percentage is
only 42% and I find this very disturbing
and
yeah and very troubling mostly because
the cider that you had last year is an
order of magnitude worse than the cider
we have today and I thinking to myself
there must be some logical explanation
perhaps the competition got way better
this year and cider is not competitive
enough and of course the competition
really improved white table is great to
cursive is obviously a pretty cool to
itself but I know that I know that we've
been doing some pretty amazing things
ourselves and I'm pretty sure that cider
is still the top culture development
environment out there the critics would
of course disagree with me they would
say that cider sucks big-time cider
breaks on every update I know for a fact
that this is not the case
cider breaks on every second or third
update yeah they're telling me that
cider has become booted and so but it is
actually way faster than it was last
year people are telling me that the
setup is overly complex but this this is
the reaction in me because I know that
the setup is not that much more complex
than it used to be I can assure that
cider cider is doing great
and after my talk
yeah you're looking at the glimpse of
the future the results from next year's
survey if I don't perform well it will
be something like this but I will
improve ciders performance anyways I'm
here mostly to tell you a story a story
that happened in the not so distant past
in a galaxy that you occupy currently
and this is the story of the programming
language dynamics in the past two
decades there were dark times dominated
by Java PHP and dotnet obviously
something was very wrong with the world
lisps were out of favor and out of
fashion
and many people were claiming that lisps
are moribund and they have no value they
have no place in the world but in 2007
everything changed with the appearance
of a gentleman and a scorer trained in
the art of lisp whom as you know created
a lisp
known as cosier and we're all here today
because of his great work
kosha 1.0 was perhaps the best 1.0
language one could possibly device but
it had one serious problem it was a
language that was supposed to be used to
develop software and there were zero
closure depth in the environments at the
time so how were you supposed to develop
software it was very hard I don't know
how many of you were using closure back
in the day but I can assure you that it
wasn't fun and this was the situation
for these P environments in general
because there was no interesting lists
there's also no East interesting
developing better Lisp integrated
development environments Emacs was the
final platform that nurtured the
development tools community and there
was a - for communist development known
as slime the superior
Lisp interaction mode for Emacs compare
this with name wipe eclipse or IntelliJ
IDEA doesn't sound that superior right
so this one too had plenty of features
features that you'd expect in a modern
idea but you'd not not expecting
something like Emacs the features are so
many and so complex that I cannot
obviously go for them in any detail but
seconds wider features so many features
what is very important for us as closure
developers is that so I'm had a very
modular architecture there are three
components in its architecture an image
list Wyant communicating via a remote
procedure call protocol with Common Lisp
server known as swamp and this song
server has different backends for the
different Common Lisp implementations
like SBC l armed bear Common Lisp and
etcetera etcetera and what is even more
important and interesting for us in our
tale is that there were backends for
things that were not common lisp there
were several scheme backends there was a
JavaScript back-end
a Ruby back-end and in 2008 the Emacs
community thought of closure back-end
force while that allowed us to leverage
all of the great features of suam
without having to reinvent the wheel
without having to go through the five
years development process that suami had
endured so far in scores of existence so
we put this magical Swonk Hoosier
back-end and all the power all the
features of swine were at our disposal a
star was born immediately
sois most recognized as the premier tool
for closure development of course there
are no other two so perhaps wasn't that
big of an achievement but still
a Cinemax user I was very happy that the
interest in closure drove a strong
interest in Emacs from many new users
who wanted to develop enclosure but he
had nothing else to use besides wine
which was very convenient for me
fortunately swim and closure didn't play
together very well mostly because of
some closure I don't know how familiar
are you with swine but the code base was
hacked rather quickly initially and mm
really improved
ever since the I'm told that the code
base was so complex that nobody even the
original author realized what was going
on there so for many years only critical
books were fixed nothing clearly changed
and we had various problems for instance
every time that the swamp protocol
changed in swine swamp osha would break
because there was no one who could
quickly update it we decided to freeze
the version of swine bundled with swamp
OSHA but this created a problem for the
camelus developers because now their
code was breaking all the time some of
the features in slime weren't as nice in
the cozier version as in the camelus
version for instance the debugger was
inferior the value inspector was
inferior find usages was not exactly
find usages
but fortunately people didn't really
notice this and have you ever heard of a
swamp organ Swonk is not really an
extensible bit of software which is
which is very problematic but what is
most problematic is this that swine is a
tool for common list development and
obviously we want to build a better tool
for closure development in 2010 the
rules are like at the end of the tunnel
another esteemed gentleman and score
just say Marek
started work on something known as the
networked repo server an ambitious
project whose goal was to create a
common foundation on which we can build
any sort of development - and other
tools that need access to a remote
closure environment but the idea was
mostly to replace custom software with
some closure and the backends employed
by enclosure for NetBeans by
counterclockwise for Eclipse etc
et-cetera with a generic to a generic -
that provides some operations that are
common to every development environment
like loading a cooler file evaluation
evaluating color code interrupting
evaluations reading input and what was
great about and repelled compared to
some closure and repo
I was developed with accessibility in
mind it has support for extension verse
via middleware if there is a feature
that is lacking in the core distribution
you can quickly develop it yourself and
this doesn't even require knowledge
hidden Common Lisp which is great in
2012 the inevitable happened
we started work on a Emacs replacement
for a swim that was going to use the an
repo server and that was going to be
targeting exclusively Kuja that was
going to give you features that were
impossible to implement in swim
this project was known as an repo well
and quickly became popular when popular
one prominent hackers like few hegerberg
expressed their love profound love for
and repelled
swamis retired I'd say retired before
its time because the initial version of
well wasn't very ambitious and was
working many essential features for
instance it like pretty much everything
except interactive code evaluation and
therapy
there wasn't even a highlighting of
compilation errors there wasn't a way to
browse your code or look up
documentation although those features
were added relatively quickly there was
much work to be done there were some
unfortunate architectural decisions like
our funders of exit of evaluating 100
lines of code code as string
interpolated into the Emacs Lisp program
this doesn't end up well as you see soon
we've made some assumptions about the
environment in which and repo I was
running for instance code completion was
based on a non portable Java library
which didn't work for kosher script and
this was nasty
and our implementation of the encoding
protocol between the server and the
client was so flawed that so many people
have the reason to hate us I hope they
don't because we recently figured this
and were nice guys anyways I was I was
very impressed with n Reaper well
although I recognized some of the force
I knew that it was step in the right
direction I was one of the first
contributors to the project and in 2013
I was appointed its maintainer when the
original maintainer Tim King didn't have
any time to work on the project anymore
initially I was very very ambitious I
decided that I was going to create the
greatest development environment
ever but I wasn't aware how much work
that would that would be I'm aware now
I'm a perfectionist at heart and I'm
obsessed with Oh
details the original name of the product
of the project buttered Mia wood because
it was very hard for ordinary people to
discern between a client named and repo
and a server named tantrum named and
repo many people thought that this was
the same thing just was getting book
reports about an repo the immigrant I
was getting book reports about the
server so the first thing I did was
rebranding the project to cider the
closure integrated development
environment and repo which later
rebranded again to the closure
interactive development environment
reimagined because we used a lot of
imagination working concider so what is
the difference between our original
approach with an repo well and the
improved approach we took down the road
with cider which cider we decided that
portability would be would be a high
priority we want to target kosher script
and closure from a single codebase so
this meant we had to push as much of the
logic as we can into portable and repo
middleware we call this cider and repo
rather uninspiring but still it works
this is also the primary point of
criticism recently that now you have to
install this middleware collection
otherwise cider won't work but I can
assure that the benefits far outweigh
the costs we'll go through some examples
for instance this used to be the code
for jumping to a variable definition I
don't know whether you can read this or
not but this is a huge string of closure
code that is in white in the Emacs Lisp
application and this is evaluated by the
apples
server unfortunately this code makes
some references to some Java namespaces
which means that jumping to a variable
definition we work only for closure but
wouldn't work for a poser script and
obviously the code looks like a bit
messy when we refactor the code and move
the logic to middleware this function
became radically shorter and this thing
started to work for closure script which
is win-win in my opinion portable kuya
so during the course of the past two
years we've managed to to obtain most of
the features that you loved from swayam
we have the interactive evaluation we
have compilation notes we have code
completion which is way smarter than
swine's completion ever was we have
definition lookup we have documentation
hook up we have a very inspector we have
function tracing we have macro expansion
that is very very smart and it is
optimised for closure it is very nice
but what is much more important is that
we have plenty of new features that our
closure specific and two are impossible
to - swine for instance we have Java
book support for which I think that most
people are unaware the same command that
is used to obtain the documentation of a
closure variable command C command D D
yeah I know it much comments lots of key
bindings well the same command works for
Java symbols as well and as you can see
we are getting the Javadoc
of to uppercase within Emacs this is not
shelling code to a browser this is very
cool we can jump to Java definitions as
well this was something that was
impossible back in the day but now yeah
how we can jump to Java resources I
think that this is this even is legible
it works and we have implemented the
number one feature that is requested for
closure that we that is never going to
be implemented in closure I guess sanity
preserving stack traces consider this
bit of code
normally it would produce such a spec
trace that I couldn't fit it on a single
slide it had 32 stick frames I think
plenty of frames but insider you can
filter out only the frames that you
actually care about for instance most of
the time we care about only frames
related to closure itself and with them
we get something much more readable much
nicer much more helpful pretty cool or
at least I think so
we've added some really good test
integration because testing is important
as sanka as Uncle Bob would say you can
run the tests of a test namespace or
directly from the implementation test
implementation namespace and it works
really well gives you some decent
feedback but unfortunately all the fonts
are messed up sorry about this we have
we've added a namespace browser you can
quickly go through the verse in the
namespace check the documentation their
source code I think that this is a very
helpful very handy feature we've added a
quad browser another tiny but helpful
feature we file it integration with the
grimoire documentation system when you
find the standard documentation
are lacking you can simply hit control C
control D G okay maybe this is not
simple to hit but still the results are
not that bad
you get the grimoire documentation in an
amongst buffer not shelled out in an
external application and I think this
this is a very helpful very useful
feature we have other features that are
also nice we have an N repossession
manager you can get some information
about the state of your server from
cider itself you can kill sessions
describe sessions you can do anything
you want with sessions we have some very
smart namespace rewarding that is
internally implemented with Stewart
Sierra's tooth namespace library I think
this this is a feature that pretty much
nobody is aware of because I constantly
see people adding their own extensions
to implement this may be discreet the
non-existing manual yeah
it is on the roadmap we finally have
cause your script support not everything
is working in a closure script but the
majority of features are obviously the
most important things like code
completion code navigation documentation
hookup et cetera et cetera
are working but unfortunately not
everything is working we're working to
make it working and we have actual
extensions that people that are not may
have written for the project and I think
that this is a first for any closure
development environment we have a
refactoring extension that is capable of
many of the things that Colin
demonstrated in his talk for instance we
have the ability to find all the usages
of a symbol and rename them
in a single step and this is done using
the gvm code analyzer so it is extremely
precise we have a profiling extension
which is really nice we have some
session tracking extension and
everything is based on on the standard
10 rep our architecture an editor
agnostic piece of middleware was a very
simple Emacs front-end every every
culture developer can very easily
developed extensions for cider because
the book of the work is done by closure
code which were supposed to understand
to produce in huge quantities and demons
book code is very very simple I'll show
you something later this evening I hope
that by now I have managed to convince
you that cider tastes way way better
than slime yeah as a kid and I want this
first-hand experience experience do not
eat swine it's not tasty but I admit
there are some issues there are things
that are missing we're still lacking a
proper debugger this is my number one
concern and I hope that this is
something that we were dressed next year
I have some ideas now I only need some
free time to implement them I want to
integrate find usages directly into
cider but I first want to give some time
to the refactoring middleware to mature
because this will be a significant
change there will be breakages and i
don't want you to hate me we we do need
a proper manual because we realized that
documentation is important we cannot
expect that everyone will know details
of the implementation that we failed to
document a manual is coming very very
soon
I'm certain it's coming in cider
1.0 which if everything is going
according to my plan should be coming
around Christmas next year yeah
but in the context of cornstalk you
might still be wondering why should you
use cider or why should you use emacs
when you can use an idea obviously ideas
are mighty and powerful and editors are
primitive you're editing text without
the proper context and it seems this
this is a bad idea but here's my view on
ideas when you're opting to use an idea
this is pretty much like buying a house
in a nice neighborhood
the house is undoubtedly pretty and
functional but it is the very same house
that your neighborhoods and his neighbor
and her neighbor and all the people down
the block
there are very few opportunities for you
to stand out to do things like you'd
like to do them because you're nasty
neighbors will well make problems for
you I know this on the other hand with
Emacs you're getting something pretty
basic you're getting
yeah you're getting a foundation but you
are the architect of the building that
will be built on top of this foundation
you can build something classic and
simple you can build something or other
modern if you're like me you'd be doing
something epic and I know you Americans
would like to build something massive
you'd like to reach to the Stars and you
can do this cinemax you can create the
development environment that is uniquely
customized to your workflow to your
preferences to yourself and this is very
very precious and very understated
nobody likes to talk about this to
discuss this but this is the essence of
using a tool like VI or Emacs the power
to make it your own and of course we
amongst users know a thing or two about
building productivist workforce after
all we started building one thirty years
ago and it is considered the archetype
of everything that fought what violence
why the best common lisp environments
they don't have any equivalents in the
ideal world we have gazer that is
arguably the best scheme and track it
environment and we have racket mode that
argues that is a better development
environment than Geezer
we obviously have cider and we know that
cider is tasty and co we all love it
right we've developed many many
utilities to make our Lisp editing more
enjoyable more productive like parodied
who hasn't heard of party right we've
built a better party smart parents with
gotten even better pilot pox edit we've
built stuff like rainbow delimiters and
rainbow identify us and we have sex
before which is rather unknown but
pretty cool
and although
work we've done had had quite the
community impact because everyone on the
cider team cares deeply about the entire
cider the entire closure community we've
tried to make as much of the code cider
and Emacs agnostic for instance here's a
perfect the cider and repo middleware
that provides most of the advanced
features in cider is the same middleware
collection that powers the ice fireplace
how cool is this
people think that we hate each other but
we actually cooperate brother Jose the
refactoring repo middleware can be
leveraged from any other editor and I
hope that other editors we leverage it
soon so we can make it even better the
complement Weber a that provides our
super smart code completion was improved
quite a lot after it was included in
cider and it is on its way to become the
premier code completion library it has
already replaced the legacy cooler
complete and pretty much any meaningful
project except a reply
but with we have a poor request for them
so closure complete is on its deathbed
we've we've developed the clgs tooling
library that provides some
infrastructure functionality for closure
script environments we have code
completion VAR introspection and stuff
like this there it can be used anywhere
when you need cause a script to link the
profile library was created with the
goal to be used by cider but it is
portable it can be used anywhere
and we've made plenty of improvements to
n repo down the road because I think
that a repo and cider were its first
adopters
found out about we uncovered many books
we fixed some of them and we hope to fix
even more
we've improved some of the built-in
middleware and we plan to add more and
something that people don't usually
think about we have a very open
development process if we have one
advantage over cursive this is this
chillest rated by this screenshot
cursive has one developer and no source
code that you can check improve or help
with what happens if Colin decides to
stop working conclusive everybody that
decided to use it will be screwed the
next time IntelliJ IDEA gets updated and
the program is no longer compatible with
it on the other hand cider has 85
contributors and Counting although I do
a lot of the work there are many people
that could pick up the slack if
something were to happen to me I can
promise you that I will never abandon
the project because I love him axe and
tile of cousre and I really want to help
all of you to empower you to to make
your lives a little bit better but if a
bus were to hit me you can be safe that
your investment in cider will not be for
nothing
still we'd like to have more help
extending cider now is easier than
anything than ever
a Saito do you write a simple middleware
a simple quiet bit of code to provide
the bridge between the middleware and
cider and you're done
sky's the limit and Steve Jobs would say
there is one more thing that I'd like to
share with you and this is that the wonk
delayed cider eight
zero was just released it is a massive
improvement over 0.7 and I have good
reasons to believe that it is the most
stable release ever whatever this means
you you should definitely check it out
play with it and give me some feedback
so we can sort out any bugs that might
have slipped in so this is everything
from me there will be a much more
interesting unsession
at 7 p.m. in which I'll be doing a wife
demo of cider and I will answer all your
questions I will discuss all your
problems and I want you really to help
me out with figuring the direction of
the project going down the road if we
don't work together there is there is
little point of working at all so this
is all for me thanks for having me it
was a pleasure being here</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>