<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Priyatam Mudivarti - Responsive Grid with Garden CLJS | Coder Coacher - Coaching Coders</title><meta content="Priyatam Mudivarti - Responsive Grid with Garden CLJS - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/ClojureTV/">ClojureTV</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Priyatam Mudivarti - Responsive Grid with Garden CLJS</b></h2><h5 class="post__date">2015-04-21</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/-jnJGNDoSXc" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">my name is Preetam and i do a bunch of
things mostly api is back and as well as
user interfaces I have my own tiny
studio and I do all coder and closure
script good luck with that and today I'm
gonna share some of my learnings mostly
clothes clip as well as what I've
learned from print design the last
year-and-a-half sort of my journey was
of both was together so it's an
interesting journey
so why grids before I ask that question
how many of you are a professional is a
professional designer over here do you
get paid for writing CSS ok so please
give me feedback I don't get paid for
writing CSS but that's something I've
taken upon so my learning was basically
coming from friend design as in speaking
to indie publishers in small press or
what why there's different than web
design and grids was an architectural
pattern that they had and I kind of went
into a rabbit hole for about six months
went into a couple of conferences spoke
to typographers spoke to graphic
designers and I thought that the stuff
that they build is just way better way
better and I asked myself why can't I do
this in CSS why can't I do this incest
in fact they are some of the best
designers build these things in sass and
CSS in fact they do it pan code and CSS
and I wanted to ask myself if McCarthy
was the answer or the beginning of
understanding list reading his papers
who is that person in grids responsive
design and typography turns out as this
gentleman I have some work office at the
end and he has seminal work it's a book
out called grid systems it's amazing and
I would recommend it but I have not a
web designer I hear you guys say that
right it's not that bad it's it's okay
do you know CSS hey I know CSS but we
have many choices when you're doing
responsive design and grids more than 50
libraries in fact I just
together a little repo on on my github I
just was exhausted and so I asked I saw
Chris Kyler and other folks speak about
in their blogs and they just don't care
about grapes they just hand-coded I said
okay fine we'll hand coded to so
question do you understand this language
this is more from a print design someone
who's not into CSS like probably a
creative director in InDesign telling
this is what they want and guess what
this guy would say do you recognize this
in fact I do have an answer for that
it's it's a single function took me
three months to understand how the hell
I could do this but when I figure it out
it just made sense in clojurescript this
is based on Chris Kyle's blog I took his
blog played around with it
his example I said what would it be
enclosure script if I were to write a
simplest possible grid it's a single
function this will give you basic six
column grids can we make it better I
asked myself obviously we this first one
to make things better we want to keep
improving so I went ahead and created a
few functions I copied shamelessly a
bunch of libraries I like grid ISM which
is pure CSS library it's 600 lines it
took me four functions I think six
functions and this is how the spec the
API looks like for me when I wrote my
functions I just create a grid with a
list and i spec it up I just stop coding
and I said I want to create a grid on my
own and the next one is typography and I
said what is the best way to do
typography viewport based typography if
if you if you're not familiar with it
it's basically taking the measurements
of your screen 500 pixels by 400 and
actually a runtime figuring out the
length it's just a single function lucky
/ you know climbed with and then
actually adjusting the size of the type
font size it's better than pics
better than pixels better than
percentages this stuff is not used by
many CSS libraries because the math
calculation is core but it's
up-and-coming it's now in CSS ie 9 above
so I said how can we do this and code is
great because Madison bit again a single
function so I was really convinced that
I need to pay attention and I picked up
garden and I want to show you a few
demos so this is just an HTML page you
might recognize if you use bootstrap we
always start with a few things and then
we figure out how do you put two columns
and things and right now it's not
responsive it's just single color right
so we'll see now this is an example of
garden I use ohm just for demonstration
you don't have to understand ohm all
it's doing right now is it's mounting
this basic widget absolutely basic
component this is just HTML syntax
called h1 and let's mount the component
okay it's working and I'm using fig
wheel behind the scene that is auto
compiling claudia script and garden so i
can see hello garden it is working but I
haven't inserted my styles now in CSS if
most of us are used to inserting styles
on the head correct it's not dynamic
we can't insert on demand on through the
browser or why by imports close the
script everything is a function so I
just insert it into the down what just
happened was there was a style sheet
called Styles this is just a function I
wrote and my Styles is simply this guy
CSS take a list create minimal grid
remember the one I showed before it was
a single function let's just say that
creates classes for the grid and that's
pretty much it so all I'm saying is
create a minimal grid give this class
pixel this is my gutter so I created
this and this creates a CSS so this not
may not make sense didn't make sense to
me so I wanted to
here what it were it meant so that's
what it is
so this function here insert styles
inserted the style sheet returned by the
value in this function whatever this
return that entered into the head and
this you can see this in chrome same
name space that make sense
instead of taking a string putting into
the head I'm actually using functions in
the JavaScript environment in the coda
script environment and now we're on
demand when I need it
in my case I'm mounting the component
saying hey insert the statute recurrent
you know corresponding to the component
and I did it and here it is I can test
it this is the CSS and this is
straightforward so this is a basic
example want to show you something
slightly more complex transcripts can
get complex
usually you would expect errors
okay here you so before that again
I'm unmounting it there's nothing over
here and when I mount my widget so this
is an example of a grid that were used
to in bootstrap right it's possible to
create this in a again like I said four
or five functions it wasn't that hard so
as you as I said earlier I started
reading about grids went into typography
and then looked at how hard is it to do
grids and it really turned out to be
simple for the basic part 80% of it was
basic and as you can see this is
responsive mobile first it works so the
question really goes in my head is that
can we do this better obviously I was
interested in coming up with my own tool
kit so show you what that means so I had
a look at the source code most of you
are familiar with this probably a little
bit bootstrap I just great spaced on
gutters mostly based on margin and it
bakes column padding so the hierarchy is
basically container row and column by by
some smart math of having the the nested
contested columns within the same margin
they make make sure that as long as you
stick to the container row column
hierarchy in your markup things are fine
the problem with this is that you have
to stick the container row column
have you seen markup it's for both right
and that's the problem
with bootstrap even though it is a
really good book of greater
implementation and there are other folks
especially designers who are not happy
and obviously they want other solutions
they've created things like Suzy which i
think is fantastic if you're a designer
and sass you have a safe space workflow
but I found it hard to read the source
code has things little magical context
basics
engine is hard so I said you know I want
to learn like I learned closer I wanted
to start from the basics and print
design had amazing things to to share
things like base language how do you set
your page with the context how do you
have lines how do you said the line
height there are a lot of these things
that I didn't know before a couple years
ago and everything was there 50 years
ago 100 years ago it was all in print
design and everywhere and if you think
about media queries the idea also came
from print design which is really saying
that they can take a big paper a1 paper
which you might have known fold it into
half and fold it into half and keep
folding it into half and there you have
your media queries for example you can
make a 16 column grid down it to eight
columns down into four columns and now
you have two forty two to five six zero
that make sense since these are very
simple concepts and designers have
implemented this and I want to show you
what that means this is exactly based on
the last slide you can see the columns
right design is invisible until we
actually see it eight column grid and
then if we in this case it falls into
four columns right it's fantastic and
the way it's implemented is
straightforward you just split your
media queries based on the by half
engine based on the breakpoints so I
started asking myself leaders concepts
there's basic concepts as building
blocks how do we start codifying these
in a library from scratch without having
a big framework allowing letting us do
that and again I started but we just
lost that
so I started in that route and as you as
usual things are not easy the 80% of
things are easier but the rest of not
rational things are not easier so then I
started looking into the concepts again
and getting inspired by other posters
like these and they looked so simple and
nice and there were a lot of questions I
had in mind that designers also pointed
out that if you want to really create a
great system with typography based on
how you want it
you must really understand a lot more
than columns and rows things like
without columns can you create like can
you create gutters by space between them
not I don't want to go into this because
I want to focus this talk more on garden
and I think most of you are so let me
just step right into garden because I
think if we see the how we can express
these things a lot of these concepts
would perhaps make sense at least to me
that was the case so garden things were
expressed everything as data structures
how many of you use hiccup here great if
you like hiccup you like garden I just
think CSS is expressed in data
structures that you can now namespace
them right
what vectors are just selectors if you
have grid with before and after you just
have just declare them as a selector
maps are declarations declarations are
map so your CSS rule sets become just a
vector of vectors make sense are just a
depth dry make sense you just return the
map right there is no concept unlike in
SAS you have to have mix-ins
there are make sense with parameters
there functions it's the there you're
like recreating language features in SAS
and less over here you're not really
recreating it so media queries are
existing but the mostly the most
important feature I like was
abstractions because
if you ring things like storm Map Reduce
these are all abstractions that makes
our life easier CSS doesn't really have
abstraction x' beyond what SAS provides
you know mix it mix ins so I started
asking myself remember the question I
had earlier what does a lambda
programmer answer I I have a higher
order function he says I actually ended
up coming up with that and it sounds
silly but I'll show you how that looks
like this is the DSM and we will get to
the demo in a bit there is a demo I want
to show you where entire page is built
with this concept can anyone read this
and have a guess of what this look what
this might mean just take a pick there's
no right around wrong answer
say that again what what do you think it
is doing yeah taking a header it's
scaling its type I I hope that the
language is simple make serifs make
sense brand fonts grid create columns
free so ice so this was my goal when I
started off it took me a while to get
there and I'm still struggling how to
get it right and the way I had to create
this was actually creating by separating
selectors selectors and declarations
what that means is you have like H once
you've got like body copies like you
always have these nested selectors and
we always put the selectors and
declarations together what if we
separate them what if we have what they
do as something else in my case it was
it was basically adding media queries
and what they are or something else and
I compose them what it what it really
means is M selectors n declarations we
don't have to write that many
combinations if we separate them you can
write a higher-order function that
composes them it just like ring
middleware it was a crazy idea it
actually worked so in my case I write a
make make serifs which is a which is
returning a function and it's doing a
bunch of the
scale type is also doing the same thing
it's like middleware and I can now
create DSS like this the goal is that an
engineer would be doing this and
hopefully I will get this to a design or
at least they can see and read this so
let me jump straight into the demo
because I think that makes more sense if
we see in the demo we unmount
have you used home anyone just basics
yeah
I'm not I won't cover Y Omega this is Oh
using ohm just one single feature that
is sharing state in app state and if you
think of having a global atom - -
put your state that's good enough for
now because there there's so many other
things on this we will just look at
basics so in this example I want to show
you how how you would start designing
let's say you want to design a magazine
and hopefully it will look something
like this but it's basic right and my
goal is that I start with the concept
and I start putting the markup and then
I want to start start styling things so
in this case I'll say I want to put a
logo and see how it looks there's a logo
right there that looks good and and here
I want to start putting more things
that's an image any guesses who the
images who's that
it's coming that it's coming there the
problem with this is if you I haven't
shown the responsive side of things it's
not responsive yes it's not responsive
and the second thing is I haven't
enabled the styles so let me enable the
styles okay I put the grid on now the
grid that I used before now it is
integrate there you go so as you can see
all the stuff I said before might have
not made sense it didn't make sense to
me - and a lot of things have cluttered
I like that with me initially it doesn't
make sense and I start playing around I
start just imagining things and then it
started making sense because you know a
lot of things I explore because within I
have an idea and then I kind of want to
bring put a language together like a DSL
then once I have it I start you know
using that so in this case that was my
journey so I want to create a journal
that look really nice with nice
typography and settings but I didn't
want to play in the CSS land I want to
play at a higher level this is just for
me because if I'm successful in this I
can probably share with others right so
in this case as you can see I added the
grid styles then I added the typography
base and hopefully it looks a little
better hey it looks slightly better
right as you can see this is kind of 10%
maybe close to InDesign which is where
I'm actually competing is because I want
to preach at that level CSS is verbose
you constantly keep coding constantly
keep changing you change something over
there the single exchange something here
this thing breaks correct you agree with
me so if I can now control at the
component level at the field level and I
add remove add remove mount unmount both
components not just data which is what
react has in a push forward nothing is
an example fantastic example but also
the content itself you know websites are
build with content not really data we
are putting data there now but text is
content text is data right a lot of
editorial magazines they view text as a
creative part of work I am a writer
so I think text is very important
illustrations are important these are
part of what a magazine or a journal or
any good website have right so why don't
we start treating them as data not just
putting them in strings and making
calling a designer at the end of your
workflow hey can you just style it up it
doesn't work that way right so in this
way I was able at least in my early
prototypes I'm now able to add things
declaratively and things won't break as
long as I am adding things incrementally
figley lets me do this if you haven't
heard a fig wheel I totally recommend it
I think Bruce is giving it up later on
it's totally awesome Wow so let's go on
one step further and these are clearly
these are like own concepts you're just
swapping atoms but what we're doing here
is taking the content here in this big
Adam and I'm swapping the content and
these content are styled as well so what
I'm essentially doing with a simple
library that I am working on is I have
created a big global map of styles like
based declarations of font settings and
I have created a style sheets at one
place so the goal is that I have my base
style sheets the style sheets
fundamentally are kind of in place but
they have to keep changing with
configurations so my goal is really
write that first keep changing a config
and then keep repeating it until I like
my typography I like my grids I mean I
changed my grid structure as well tweak
it change the content isn't that what we
want in a website I think at a higher
level that's what I found is that it's
this kind of workflow didn't exist and
this is I think the beginning at least
to me so you can see here now so let's
say this is our example and I don't like
this content and I am trying to change
this someone else came and then you're
your developer and your creative
director a copy editor or the CMS guy
came and said hey we have new content we
have
swap it can you check how it is how easy
it is for you to do it does anyone have
a quick fix you have a working site it
shows a bunch of things right for lack
of a better word and someone came with a
new piece of content they say can you
show me how this looks no matter what
CMS you use how hard is it or how easy
it is tell me your easiest one and tell
me your hardest one that's right that's
that's what happens most times in this
case
thanks to ohm and this is a part I will
cover in my I'll switch back to slides
at the end that if you start integrating
this kind of workflow with something
like react based components could be
reagent it could be ohm I think it
depends on your choice what you're doing
really is your you're now combining
Styles content as well as a frame or a
library like like you know react based
library you're kind of merging them
together there is no distinction to me
at least when I'm playing the designer
hat
I don't want to play that distinction
because I'm constantly battling with
making the perfect API and making the
perfect design I think that that's a
dream that I don't want to fulfill I
want to integrate both right so in this
case I can just say swap and for those
of you who've missed it so this is a big
state right it's just an atom just a map
literally a map content title
I'm literally declaring what my
structure looks like and I copied
another one for a demo new state right
and I'm saying that swap that atom into
this did it happen oh that one
reset now let's hold for a minute here
so this is a fictional magazine
obviously I have changed my template
with the styles with a different content
and my goal again you might be thinking
how is this related to grids my goal is
actually having a grid and typography
test those things for my content right
everything else is secondary if I if I
playing that role right so in this case
I'm able to now view different things
hey we have a new guy too and I'm
testing now all these three things in a
much more declarative way I don't know
about you but I get excited about this
things I get really excited and I don't
think it this things would have happened
if you know if not for ohm and obviously
taking that paradigm to the next level
similar paradigms to things like garden
style sheets I don't think it would be
possible right and I think there's some
exciting things that can happen if we
take this one step further for example
in this page you might be wondering
where am I getting the style sheets
right the style sheets are right here
let's clean this storyboard and this is
namespace the way closer script does is
it takes the namespace converts into
objects obviously and here is my
abstract I can see my app state right
and let's see where is my Styles so
everything is a function here so is in
here I do a little crooked thing but I
think it's working for me at least
I'm literally inserting the stylus for
the component on I will month and for
those who are new to react it's just a
lifecycle protocol that says if you're
mounting a component do some things in
the homeland it's like you know start a
channel things like that people do other
things like no Jake no using other
necessary things here so in my case I
say hey I styles are my resources I'm
mounting the styles so if you want to
see how the styles are I can actually
see what the styles are generated right
here it
let's see how that looks finish
mesh down yeah so I'm actually in surf
styles and then let's examples
storyboard same this may seem we're both
but this didn't exist of six months
eight months ago because Claudia script
was still coming up and let's see that's
Horrible's that's an object my case
where did I go what did I do wrong
page styles' okay
I'm gonna give up this one because lack
of time but you get the point that
function is actually creating it's it's
a function which has all the sides for
that component and I'm inserting that on
down what this means is it is now
possible to have different computer
spread your page intersections and
components in the react world each
component can bring its own style and it
can mount them as resources this is not
possible in JavaScript line until for I
think five months ago with web pack
which is a whole different story you
heard of web pack yeah web pack does
some crazy stuff it brings in resources
and then you can bundle them in a single
javascript file well we don't have to
resort to that level in Clodius quit
because we have a namespace right we
have a namespace we have a function and
if we can organize your components and
have their own style sheets you can tag
them along and if you can control with
something like a protocol here then they
could be managed this was not possible
in CSS you just put in strings and I I
just really like this concept and
obviously you can do other things like
for example I just don't like this I
want to preview my last date and boom
I'm up to my undo last date and this is
obviously the own own feature you can
now switch States with the exact same
content before and imagine now you're
previewing before going to staging these
are all serious issues production issues
that were kind of solving and using deff
several tools but I haven't found
anything that I was convinced so with
this now with mesh with with garden with
something like Omar reagent I can have a
workflow that essentially is letting me
preview different content and different
styles together for a design heavy
website and that pretty much is my goal
with for you know expressing style
sheets especially when you're looking at
grids typography which really comes down
to showing content right
so we've covered a little bit of foam as
I said it can store styles in appstate I
can store content in app States
component can manage them obviously like
most things garden biggest issue would
be using closure script itself if it's a
big hurdle I know that I'm just taking
it upon me and I just want to make sure
that I can build something and probably
share something with you folks soon I
have put a library up with some of the
concepts I shared it's on github it's
super early there's way more things that
I haven't covered about grid
asymmetrical grids things like
calculating pixel values based on calc
and other things it's actually not
impossible it just takes time and I
think we can get there I've ported about
three SAS libraries took me a few weeks
and I have never written a library SAS
library before so I just was easier for
me because garden things are much easier
units are easier math is easier
everything is easier in garden because
you don't have to deal with converting
things and I just want to cover one
slide before I open for questions is
that there are features that are not in
CSS and as I believe most of us are here
because we want to try out new things
right and if there are not many features
let's not stick to what's out there but
let's perhaps try to explore what garden
provides include obscure provides and to
me composability is very important
something I learned and started
appreciating in back in ring like
middleware so if I start using the same
concepts of composing styles that are
not tied to my selectors I think where
we can possibly open up some sort of
plug-in system similar to post CSS and
other things I think it'll be very it'll
be awesome rather than downloading an
entire framework you can download
literally functions or like small
libraries to do one thing and one thing
only this stuff is just exciting it is
happening in post CSS and
p.m. I think we can do that too and also
rebel driven design is great and that's
my library out it's it's super early
it's just up there because I want people
to get excited whoever is into both
sides like me
I just wanted them to try it out I think
FB shouldn't stick with God
we should go FV all the way and that was
my selectors concept so I do want to end
with this saying that last year I spoke
at closure where San Francisco was my
first time I was speaking on
clojurescript my goal was to actually
design pages and compose pages that was
kind of my weird goal and I think I'm
like two steps forward than that it took
me a year to get there I wasn't able to
do everything and cause prepare to do in
five languages today I'm able to do most
pretty much everything in photo script
on the front end with design and there's
a long way to go and and I want to share
this story because it's really hard to
do anything in coda script until you put
your head down and I was able to do it I
don't have any background and Lisp or
print designs for that matter and that's
where I want to get and that's the
gentleman who I think revolutionize how
grits is grits is not columns and rows
it's actually geometry I want to thank
Joel I think he's done a fantastic job
and that's it open for questions
I haven't heard of that now I don't know
that the react team is trying to express
everything in JavaScript but it's not if
it's not data structures then things
okay
I'm not familiar with that though yeah
we'll check it out
hmm
you can debug style sheets in Chrome I
actually should have shown it it's a
function and in Chrome well let's not
waste time but I'm happy to show it
offline it's a function so all the
source is mounted in Chrome in their
source map support and clojurescript all
the latest closure script so put a
debugger in Chrome
I am debugging style sheets in chrome I
don't know if that answers your question
but it's so I debug I debug the function
depending on the function if it's
returning my entire it's returning
selectors and declare declarations the
whole rule set then I can debug that and
I can in the repple just say CSS because
CSS is gardens function of converting
string so that's how ID bug so I go into
that and second were in the string but
if it's debugging a mixin which is just
a bunch of declarations then yeah you
have to kind of go up the chain and see
the place where it's actually resolving
into this stylesheet I mean it's a pain
but the tooling is really bad I think
that's the problem with closure script
for an anon coda script folks is that
people who are into this there are a lot
of tools but I think folks in Ruby land
designers especially have are have a far
more stable system I think we we have a
lot of things to do over there yeah but
we can get there we have no questions
and that's it thank you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>