<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Mobile Apps with ClojureScript - Jearvon Dharrie | Coder Coacher - Coaching Coders</title><meta content="Mobile Apps with ClojureScript - Jearvon Dharrie - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/ClojureTV/">ClojureTV</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Mobile Apps with ClojureScript - Jearvon Dharrie</b></h2><h5 class="post__date">2015-11-16</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/GDA-g6Ca_dQ" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so thanks for coming to building mobile
apps with closer script the title right
now is learn once write everywhere I
stole that from Facebook which is what
they say about react native it's a
clever title
so as a Philadelphia resident I am
obligated to have this slide so thanks I
was pretty excited when the con said
they were coming to Philly I didn't have
to travel and I could come to closure
conch this is a picture of Statue of
Rocky you should go visit it and take a
picture like all other tourists but do
don't get a cheesesteak it's overrated
and if you want to hang out you should
hit me up or if you have any questions
about what to do in Philly say hi on the
slack or in Twitter so I also want to
have the slide closures awesome
I don't do closure everyday it's
basically a hobby project or hobby
codebase and sometimes I'm I find myself
frustrated but when I figure the thing
out it's amazing like closure this is
not only teaching me a new language
closure is also teaching me a lot of new
software patterns and ways of doing
things so if you're not excited about
closure you should you should get there
so how many people went to the talk
before this about closure scripts cool
they've almost the entire room so I also
started dabbling with closure script
around 2 years ago and I had the same
problems with documentation and tooling
and I did a poll today on github stars
and closure script has actually
surpassed closure in stars I know this
number it doesn't really mean anything
important but it just says that you know
closure script is gaining popularity and
it's good for the overall closure script
ecosystem so a quick tidbit of why I'm
up here my name is Robin I really like
programming I do it outside of work
mostly all the time and currently I'm
really interested in listen closure and
a little bit of background about this
talk and
we're gonna cover so I've always wanted
to ship a native app or an app on a
mobile device for one of my many ideas
but I've never been able to and earlier
this year I learned about react native
and all the cool things that's capable
of so I decided to try it out and then I
learned also that you can do this with
closure script so I've been researching
that and this talk is somewhat mirroring
my sort of flow through the ecosystem
first we're gonna cover a little bit of
history of how this tool came about and
the problem that it solves then we're
gonna cover react native and then we're
gonna cover clear the script I'm gonna
react native is the most important thing
to cover today because all you're gonna
be doing with closed script is
converting your react native code to
closure script so let's get started so I
decided to do a demo first
so grab your attention and this is an
iOS simulator running a tiny app a tiny
demo that I built which is wrapping a
blog and this is a ListView a navigator
element and you can click in and you see
the little transparency and go to
another view and it renders some text
and it renders the title of the blog and
then you can go back so for those of you
that use iOS you're familiar with this
pattern and this is what react native
allows you to do basically render using
the native elements on the device or use
the elements from the device so history
so in 2007 the iPhone was released and
as a picture says Apple reinvents the
phone like they do all other devices and
this changed the device in our pockets
right we can we it was a rich ecosystem
and we can use applications that did
things and the phone was pretty fast and
powerful you no longer only made phone
calls on your phone and you might have
gotten ideas of I want to build this a
habit be great if I can have this
my phone so in 2008 Apple released the
App Store which allows you to publish an
app that you built using the tools that
they provided so let's say you know you
did CrossFit and you came up with a
CrossFit app and you decided to build
this and you're excited about it and you
wanted to ship it over the weekend but
you quickly probably realized that you
had to learn objective-c which looked
like this and I tried learning Objective
C before and I just couldn't handle it
it was just too verbose and I didn't use
it in my day job so it was taking up
extra space so let's say you did learn
Objective C and then you realize you had
to learn Xcode another idea right so now
you can transfer your IntelliJ or
eclipse skills to Xcode you have to
learn about you know how to hit play to
get this thing to build where all the
shortcuts are all that stuff so let's
say you learn objective-c and then you
learn next code and then you came to the
cons and showed a fellow attendee a
CrossFit app and then she's your fellow
attendee it's like I want to use this
but she had an Android phone and then
you realized that you need to rebuild
your your codebase using another
language and you can reuse any of the
other any of the logic that you had
there you had to use total different set
of tools so people got annoyed with this
and they came up with some solutions one
of the solutions was you basically build
a web app and you render it using a
native experience or not an Ava mobile
experience which rendered very tightly
in the screen there are some problems
with this it didn't look natural it was
very hard to accomplish for all
different types of devices and this is
the New York Times New York Times office
does a great job with their UI so people
you know do really like this so they
switch the phone gap which rendered your
mobile site into a UI webview of your
specific platform and this gave you a
sort of a native experience across the
devices right but it wasn't the true
native experience and it was still
clunky so this wasn't perfect and then
there are tools like Ruby motion which I
actually bought that promised a native
experience and it was
but when I use her in motion it was
still it wasn't right it didn't feel
right I still I knew Ruby but it's it
didn't take away the Objective C syntax
or the sort of need to know if Objective
C so I quickly did a hello world and
then I gave up because it just didn't
feel right and then earlier this year
react native was released which is a
tool from Facebook that promises the
best of all worlds and you might be
wondering what that means so react
native allows you to leverage the native
platform which means you basically have
it you have an API that calls out to the
native device that allows you to use
native things so for example in my demo
I was using a navigator iOS view which
is provided to me by react and then
react has a framework that calls out to
iOS to know how to render this navigator
iOS navigator iOS element so we're able
to use things on the phone with only
rendering the same thing on every device
so what I want to render in Android I
also use a navigator element and it'll
look the way that Android should render
it tooling so as developers Roo we are
very we like our tooling and we work on
it all the time but if you're doing
something with Xcode you're not getting
the same sort of refresh flow that you
would be getting in a browser but with
react native you can get this because
you don't need to recompile the app you
need to refresh your JavaScript using a
key combination and your app is you see
the changes in your app so let's say you
you want to change the color of
something you change the color and then
you hit command R and you see the
changes right away no need to rebuild
you also get developer tools so since
it's a JavaScript app you can use Google
Chrome and you get to debug in the
chrome console and you also get to use
the react developer tool which allows
you to interrogate react components you
also get to use the best editor in the
world which is Emacs
I'm just I'm just kidding you can use
any editor that you want you can even
still use Xcode so in order to
understand where react native comes from
you need to understand react and react
is just a JavaScript library for
building user interfaces it provides
declarative views which folks really
like because it takes away the
complexity of the UI it also provides
components so now instead of thinking of
your app is just you know a UI you sort
of component eyes your if that's a word
your your UI for applications so you
kind of have a profile component and you
have a user list component and you think
of things in this way you separate
concerns instead of separating
technologies so this is what a react
component looks like and this is
rendering HTML so the important
component here is the development we're
rendering a development and - you're
doing the same thing here when you do
this and react native so this is what a
react native component looks like
instead of rendering divs and spans
you're rendering elements provided to
you by react native which is examples
our view and text and view you can think
of you as a div and texas spans and then
if you look here and you'll see a styles
and the javascript object that's how you
enter CSS and your CSS is just a
javascript object so image : and then
you pass in your object with your styles
and the flow for react native is similar
to to the java to the web flow so you
have a component then you have you send
the component to react native and react
native has a a bridge which allows you
to render to other types of devices so
this idea came from when people were
using react they realized that react
knows how to render to the Dom and
that's a sort of a middleware layer and
what if you could swap out that layer
which is the bridge with for other
devices so for example Netflix users
react native for building
TV apps and DVD boxes apps so they
render they use react react not react
native but just react and they have
their own version of a bridge so in the
future you can imagine rendering to
other types of devices using your own
type of bridge any questions on the
react flow now so we're this close skip
come into this so with closure script
you could interrupt with JavaScript
right so you can write JavaScript inside
of closed script but you probably don't
want to do that with with react we
closed get provides wrappers around
react and some of these wrappers our own
which you can see here this is rendering
a react component with iOS you can also
use them next which is I'll be covering
and you could also use reagent so you
don't have to do this stuff manually you
basically include one of these libraries
in your application and you use the DSL
that it provides so you might be
wondering okay so now I can use a
wrapper around closure script or around
react
do I have to compile my clojurescript
separately and then load it onto the
device and then run in Xcode but being
awesome developers that clear scripts
developers are Mike fights develop a
school called am blue which is a rebel
into the iOS javascriptcore so
JavaScript core is the way the iOS
allows you to execute JavaScript on your
device so basically you load it into
JavaScript core you run your your code
and then you're able to execute
JavaScript core I mean JavaScript so
ambling does two interesting things it
for the first thing it loads a folder
using web dev in your application in
your application sandbox and this allows
you to hot
the your clothes kept compiled code and
automatically refresh the device
so as you're programming you can you can
see the changes that you're making on
the device another thing it does is it
opens a TCP connection with your device
and you're running repple and it will
compile your code and send it to joust
into javascriptcore on the device and it
will get it back over tcp connection so
you're able to execute code in the
repple on the device so you can change
your application state you could run
your methods and all that just like your
regular clothes script workflow will be
like and we'll cover a demo on this
later so now you have am Blee and you're
wondering okay I have AM bleed do I have
to set this set this up manually or is
there a tool that allows me to do this
so steps in something called Nadel so
Natal is a npm module that bootstraps
your closed script react native project
so you basically you run nail the NIP
and give it a name and that gives you
this folder structure so this is just a
regular line again
fuller structure you have a project clj
and SRC folder and out in a target but
the interesting thing here is the native
folder
and in that native folder is where your
react native specific code lives I
haven't in my playing with react native
I haven't had to touch that folder yet
so that's just boilerplate code so now
you have a project and you want to do
these things so nail allows you not to
be repetitive so it actually wraps am
bleah and also some xcode functions so
let's say you nail in it then you want
to launch that that project so when
you're doing this workflow they try to
tell you not to use Xcode and you're not
supposed to use Xcode nothing not
supposed to it's supposed to eliminate
Xcode
but I found that I've still had to use
it a lot especially for debugging so
sometimes I run into a scenario where
I'll write not correct clear the script
and they'll crash the repple and I have
no way to recover from
so that's something they're working on
so I leave as Xcode open and then I just
hit play over and over and I have a clgs
building in the closest code so once you
launch a project you want to be able to
reload your code and that's where naval
ripple comes in so you run Nayla ripple
you connect to it it'll list all the
available devices and then the last
command that probably no one uses is the
Xcode command which is opens Xcode with
your project loaded so I have a demo and
sort of the workflow that I've been
using so here you can see can everyone
see this so this relies on envied notes
I use NPM so here I run nail Xcode so
you know I open up the project then I
connect to the repple and here it's
going to list all the available devices
that are available for me to connect to
so this is the simulator but once your
iPhone or any other device is connected
on your Wi-Fi network you're able to
connect to it so you don't need to plug
in or anything like that it just uses
multicast DNS to find all the devices on
your network that you're able to connect
to so that's gonna list them and then
you just type the number that you want
to connect to and you're connected so
here I can actually execute closer code
on the device it returns a value so
another example that we can use is let's
say we're programming so I have you max
up in here and then the person that
wants to SAP the client what's the
change do borns to zoo babies right so
we're gonna find zoo barns
that's newborns here the resolution is a
little messed up and change it to zoo
babies and you would see that's
automatically refreshed and zoo babies
shows up so you can imagine a workflow
where you know you're making these
elements and you have a style guide and
you're basically building EUI with a
refresh workflow similar to fig wheel I
see someone is working on a fig wheel
version of ambling but I'm not sure what
the status of it is so now we can also
play with state and all that other stuff
but let's take a look at some of the
code so this is um next how many people
have played with them next cool what's
your thumbs up thumbs down what do you
think comes up so next is version two of
ohm so let's look at the base component
of off your react component so as I said
before you're basically just translating
react native code to closer script which
doesn't sound like an ideal situation
but that's pretty much what you're doing
so down here you'll see I have a helper
function called navigator iOS which is
basically creating it's similar to Oman
you're saying Dom that /div navigator
iOS is just saying give me a navigator
iOS element and then we're passing in a
closer script structure which is just a
map and we're going to the react page
and finding out what options it needs it
needs the initial route and a component
and a title and then up here is where
the helper function is can everyone see
the helper function what's over here
so close script has amazing Interop
capabilities so we're reaching out into
the react namespace which is the
JavaScript include file creating an
element and the element is a now
i OS file and then we're converting so
CL Jade's era which is is a helper
function provided by closure script to
convert closure script data structures
to JavaScript objects so we're basically
creating a react element here
any questions around this so far anyone
not try reacts plane it no ok so once we
create it we could pass in other
components and this is a post component
that we're creating and we're doing a
similar style workflow so there there
are two ideas here and one is I've been
toying with this since react keeps all
your separation all your code in one
component I've been toying with the idea
of having a Styles sort of data
structure or keeping the styles in the
component itself so up here so I have a
Styles map up here that I've been
referencing but I've also been playing
with let's see with the idea of keeping
all the styles with the component itself
I'm not sure which one I'm gonna pick
I think the reactive way is to keep the
styles with the component but I'm not
sure yep so any questions around the
code or ohm next in general know
so should you use this so I've been
running into a lot of problems that I'm
not sure if it's because of clutter
script or my gap of knowledge with coda
script I will definitely recommend using
react native because it's basically
writing HTML and CSS and getting
something on your mobile device very
quickly
the path to excitement is quick sorry
but there are there are lots of issues
this users react native in general is
very new it was only released this year
and Android compatibility has only been
released and during the summer so some
things that you might want to use will
not be supported and that's where
objective-c knowledge comes in so you
have to find a friend that knows
objective-c or you will have to build a
module in objective-c to use this but
the documentation I react native is
really amazing and it walks you through
and how to build one of these some of
the things I've been running into is
basically having ohm next or ohm in
general talk javascript objects to other
to the components that are being
rendered so I've been having to write
raw JavaScript or interrupt JavaScript
so there's this element called touchable
highlight that requires anonymous
function as one of its options and to my
knowledge CL Jas and omen support this
so I basically had to write interrupt
JavaScript and pass in an anonymous
function myself so you sometimes there
forces you to sort of learn the innards
of closure script and this is a good
thing because you know the tool that
you're using but the closure script part
of react native is gaining a lot of
traction so now the fig wheel tool is
being built there's a Android demo or a
demo app that's that was released so
we're getting support for it but if
you're not if if you're ready to build
an app I was
using react native but if you want to
contribute back to closer script I would
suggest using it and helping out the
community grow and those are some of the
things I've been running out running
into so I have this uh hold on where are
my slides any questions around problems
that I've run into Oh Pam
so there's a tool called go be built by
the same guy that built am bleah
and if you want to see how that works
you should look at go be so I have not
run into any limitations on CSS yet
because you building an app that talks
the native experience right so you're
not going to want like CSS specifics or
do you have an example objective-c yeah
it really depends on on what your needs
are
especially performed for performance I'm
not sure how that will work but there's
always the like if you use it and you
get into a bind there's always the
option of going down to objective-c
that's what some other people had their
hands right
I think it does so for example so that I
think there are two aspects that affect
my judgment one is the ease of getting
something on the device and other tools
just didn't provide that and then an
example of native is when you click down
here you get the same transparency
effect that you would on an Apple device
so I think it's good good enough the
best tool for the job
any other questions I don't I've been
using em next and I really like it I
like the ideas that are coming out of
ohm I have looked at reagent and it
looks simple and easy to use but I just
don't have the time to learn another
tool but people do have strong opinions
about it do you have an opinion
so I have not tried the Android
experience mostly because of time there
is an Android demo with react native
well closure script react native and
there are lots of Android demos with raw
react native I'm sure it's very good
similar to iOS any other questions about
things I've run into no all right so
shout outs so Mike bikes is a really
smart man he's very helpful
he's been answering a lot of the github
issues that people are following them
that I have been filing and also in
slack and the closure script community
close scope of community has been great
on slack and just in general when you
have a question they help you out so you
should tweet Mike Fikes and tell them
how awesome he is
and then resources that I've been using
so mainly I've just been reading the
react native Docs because I like to say
again I've just been porting react
native elements to closure script then
CL j sr n is a site that aggregates all
your close script react native news
that's happening and new developments
and then the slack I don't remember the
slack I think it's close Arian slack but
they recently created a closed script
react native chat in there and it's been
pretty active and a little bit about me
I have offered to pair with people at my
other talks and no one ever takes me up
on it but if you want to try this stuff
I am willing to help you you can find me
on twitter @drive on twitter people that
are in here and if you want to hear
about that stuff about react native and
closure you should listen it's turning
complete and turning that cool so yeah
that's my talk
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>