<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Bringing Phased Array Signal Processing Indoors to WiFi Networks | Coder Coacher - Coaching Coders</title><meta content="Bringing Phased Array Signal Processing Indoors to WiFi Networks - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Microsoft-Research/">Microsoft Research</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>Bringing Phased Array Signal Processing Indoors to WiFi Networks</b></h2><h5 class="post__date">2016-06-21</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/qQFN7h0mx_U" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">each year Microsoft Research hosts
hundreds of influential speakers from
around the world including leading
scientists renowned experts in
technology book authors and leading
academics and makes videos of these
lectures freely available
you
it's a pleasure to have Kyle jemison al
Jameson is an associate professor at
University College London in the
department of computer science and he
does pretty interesting work in
cross-layer sort of physical layer and
cross layer sort of work so yesterday
you saw some of this work by Getty who
is sort of showing you how completely
new stuff can be done if you modify the
physical layer and so on so this on
similar team but you for example see how
you can track so you must be well aware
of GPS which lets you sort of track
people outdoors for example the first
stock that he's going to talk about is
how you can modify Wi-Fi access points
to track devices to a granularity of a
few centimetres indoors where GPS
signals don't penetrate for example
right he'll also talk about some more
things that he has done besides locating
devices such as how can you enable
security using things like multipath
unique multiples characteristics in the
environment and so on so I'm sure you
guys will enjoy this a lot because
there's a lot of new stuff that you'll
see here yeah I'll just hand it over to
Kyle Ino
ok thank you very much
okay so everyone hear me okay so today
I'll be talking to you about kind of an
arc of work that my students and I have
been undertaking at University College
London for over the past two to three
years and the general theme of the work
is bringing a phased array signal
processing indoors to wireless networks
ok but first a little bit of an
introduction so I'm sure many of you
know you know London for many things but
let me explain to you where I'm from in
the context of the ARPANET so the
ARPANET this is a map of the ARPANET
back from 1973 this is the precursor to
the internet that the u.s. army designed
and this was how the internet looked
back in 73 when it was just oh you know
20 or 30 nodes okay so I grew up in the
u.s. I got my degrees and my PhD from
MIT and Massachusetts Institute of
Technology over there in the upper right
hand corner then I moved over to London
down there in the lower right hand
corner which was the first site outside
of the US on the ARPANET and what people
emeritus professors in my group did was
they connected the u.s. ARPANET to
London over satellite links that you see
there in the picture so we were the
first place outside of things and so
that's where I'm from
okay so today I'll be talking to you
about array processing phased array
processing and this is kind of these are
the examples that really inspire my work
this is the inspiration that I get
phased rate processing if you don't know
what it is it's basically taking signals
from an array of sensors and these
arrays of sensors turn up in all kinds
of different contexts right so now we
have we have examples like Radio
Astronomy where the array is this big
set of satellite dishes spaced out
hundreds of yards apart it's used in
weather radar it's using the military in
the Navy especially naval radar and then
in terms of land-based radar as well
it's also used underground to detect
earthquakes detect and localize
earthquakes and seismic events
underground so it has such a broad
applicability and so much power in this
in this type of signal processing that
we'll look at today the other broad
theme of my work is opportunistic
overhearing okay so what can we do when
we have these array sensors
opportunistically overhearing
transmissions that go on be it outdoors
or indoors in a Wi-Fi network so this
example I'm showing you here is from the
search for
the missing aircraft Malaysian Airlines
370 went missing months ago the search
is still ongoing and the most promising
lead we have right now in the search for
this aircraft comes from
opportunistically overhearing just a few
small transmissions that the aircraft's
transponder transmitted as a routine a
diagnostic data back to its to the
airline company okay and a London
company Inmarsat their satellites picked
up the these these transmissions these
diagnostic mechanical transmissions and
we have our best guess as to where this
missing aircraft is today and then the
search goes on so these two themes array
processing an opportunistic overhearing
what I'm going to do today is try to
convince you that these are useful not
just outdoors in these contexts but
indoors in the indoor wireless
environment in wireless lans that we've
been talking about in this summer school
okay and to do that i'm going to tell
you about three pieces of work that my
students and i have undertaken over the
past two or three years first I'll talk
about array track the system that does
very fine-grained highly responsive
indoor localization of Wi-Fi devices
indoors next up we'll talk about using
array processing to enhance Wi-Fi
security some follow-on work to a Rach
Rach and then finally I'm going to tell
you how you can realize both these
systems and other very interesting
phased array systems indoors on
commodity commodity Wi-Fi access points
so any of those Wi-Fi access points you
see up there on the walls today that are
deployed phaser it's a system that lets
you realize these algorithms right there
okay so let's begin with a rate rack
okay so the set up to a rate rack is
that we need precise indoor location
systems for your device your your your
mobile phones your tablets and so on
your your glasses perhaps today outdoors
we have GPS it's great for navigation
gives you meter accuracy but the minute
you go indoors GPS starts to fade
significantly and it really doesn't work
unless you're right next to a window and
even then it usually doesn't work
indoors so imagine what we could do with
precise and very very rapid indoor
localization
on the glasses or the or the wearables
or your tablet or your mobile phone okay
so we could do augmented reality now for
real so you could look at things in the
environment and your glasses would know
exactly where they were and you could
and the glasses could tell you things
about what is nearby or who is nearby if
you're a customer shopping for products
in a supermarket perhaps you might like
to have information about the about the
food that's in the supermarket pop up on
your glasses or your mobile as you're
browsing on the store right certainly
many supermarkets Tesco in the UK other
supermarkets are very interested in this
libraries museums there's a lot of
interest in fine grained location to let
people know what they're looking at in
these types of places problem is current
indoor localization technologies for the
most part they're not accurate or rapid
enough and they require this calibration
step which is basically what you do when
you're setting up the system it requires
a human being to go and walk around and
carrying a phone and can't with a known
location calibrating the location system
right so many of you will be familiar
with
the work that Victor ball and his group
at Microsoft Redmond have done on radar
which was one of the pioneering indoor
location systems system called radar and
it was it's the technology is still used
today but it does require this
calibration step as too many other
follow-on works from radar you know
localization is a very well studied
problem and so people have looked at
using ultrasound and la and the camera
for localization but what we're
interested in doing is doing this using
just the existing ap Wi-Fi ap
infrastructure right and these solutions
that rely on technologies like
ultrasound they require this dedicated
infrastructure to be installed in the
building that you are interested in
tracking people in okay so as I say it's
a very well studied area and the general
trend as we look from work back to 1992
the general trend is that we are getting
better and better accuracy indoors for
location so back then we were talking
about meters of accuracy for Wi-Fi based
location this is the active bats in the
badge system at Cambridge University
well another one of the pioneers with
the victor ball with radar horas system
came and refined radar and we have these
image based systems but the system I'll
tell you about today array track is one
of the most accurate to date even today
and we were able to achieve a median 23
centimeter accuracy indoors just from a
couple of packet transmissions so let me
tell you how we go about doing that
if the observation that we start with
with a rate rack is that ApS you are
getting more and more antennas why is
this right so you've been hearing and
you will hear in the summer school about
my mo technology so my mo technology is
using multiple antennas to either stripe
data across the link formed by those
many antennas on both sides of the link
or to increase the reliability okay so
this my mo technology started out you
know around that the theory was was was
solidified back in the 90s and my most
are getting deployed in the late 90s and
the 2000s and it's been a it's been a
it's been a great success right so it's
been standardized in N and AC as you've
heard and it's increasing throughput and
reliability to no end
really the reason is that you get you
get synergistic winds with multiple
antennas okay you can do a MIMO with
multiple antennas across one link right
and make a faster or more reliable link
but what AC does is it does my mo in
order to share the wireless medium
between different clients many links
okay so this is more and more reason to
add more antennas because with more
antennas you can do both you can make
better links and you can share the
medium with more clients okay so the
observation coming back to a racetrack
the observation we make with array track
is that access points are are already
increasing in terms of the number of
antennas they have and because of these
MIMO links and spatial multiplexing
sharing they have every incentive to
keep increasing the number of antennas
at ApS we already see 16 antenna ApS
today okay so what can we do with all
these antennas and here's a little bit
of theory for you that you'll be
familiar with
if you studied some array processing
yourself in your electrical engineering
program so what we have here is a client
sending a frame a short burst to the AP
the AP here has multiple antennas let's
just take two antennas to make things
simple okay
and the client is at some bearing theta
to the AP and he's transmitting with a
carrier wave that's typically two point
four or five gigahertz in the case of
Wi-Fi and what we see is that when this
signal reaches the first antenna it
travels some additional distance you can
imagine the the transmission as a planar
wave really it's propagating you know in
a perpendicular front okay arriving at
the AP and it'll travel some additional
distance over two antenna to that I've
highlighted here in green
okay so reaches antenna one first
it travels that additional green
distance and reaches antenna two and the
observation that these algorithms the
signal processing algorithms make is
that additional green distance is
related to the bearing theta that the
transmission came at the AP since his
angle of arrival of the transmission at
the AP and when we when we look at the
signal at the baseband this is
representing the phase in the amplitude
of the signal as a point in the complex
plane
you can represent the received signal at
antenna one as this X here and then
antenna - we'll see another signal
that's been rotated by that additional
distance and the relationship between
the additional distance it travels and
the phase is related to two things both
the wavelength of the signal which we
already know lambda and the bearing that
the signal arrives at the access point
so we have this nice little rotate a
nice little relationship between the
phase difference of the two signals at
antenna one and antenna 2 the 2 received
signals and the bearing of the client to
the access point and that is the essence
of how these angle of arrival algorithms
work so if we are in a line-of-sight
environment the phase we measure is
going to directly tell us the client's
bearing to the AP and this is what
mostly happens outdoors when we don't
have so many reflectors say where where
airplanes in the sky we don't have so
many reflectors around this relationship
is is nice and simple but indoors the
situation is more complex it turns out
that this general principle can be
generalized to environments that do have
multipath reflections and this is called
the music algorithm it's classic it's
back from 1979 and it allows us to form
these AOA spectra angle of arrival
spectra from transmissions as they
arrive at an AP and what this graph is
this is a polar plot and it's telling
you based on these phase measurements
between pairs of antennas and now in
general for the music algorithm we we
have and we need more than two antennas
to resolve multiple multipath
reflections of the signals that are as
it arrives at the AP ok but once we have
multiple antennas the music algorithm
will give us an estimate of the power of
the ink
signal as a function of angle at the AP
so this plot is telling us that somebody
transmitted to the AP and energy arrived
from this direction this physical
direction and that physical direction we
have some side lobes here okay okay so
now we know about AOA spectra now let me
give you the high level view from a
thousand feet of how a rate rack works
okay so it's a it's a listening system
where clients mobiles they send just a
single packet and they don't have to be
modified at all no changes on the mobile
side okay that's important because you
don't want to convince the world to run
an app on their smartphones necessarily
a client sends a single packet and then
all the nearby APs over here so here we
have that opportunistic overhearing
theme come in they over here and they
compute angles of arrival and they
compute those AOA spectra send them to
the back-end server server the backend
server then thinks about associating
each one of these aoa spectra with the
mobiles transmission so matching up
which came from which packet because
there's packets flying about all over
the place
right and then the backend server then
estimates location based on the spectrum
on the pseudo spectrum okay so the key
step here is location estimation and
when we began this work we thought that
naively we thought what wrangle a should
work okay indoors okay but there's two
serious problems that we run into with
triangulation and that's this multipath
radio reflection indoors okay so the
client transmits something and nearby
objects in the environment in the
wireless environment reflect walls doors
even people reflect RF signals to some
extent okay so that energy arrives at
the AP and if we're using just
triangulation the other thing that
you'll notice is the direct path the one
we're interested in that gives us the
right location to the client that may be
blocked or it might be even completely
obstructed so now when the AP computes
the pseudo spectrum that direct path may
the reflections may dominate the direct
path giving up throwing off our location
estimated estimate so we said okay how
often does this happen all right so we
got 30 so Chris Wi-Fi clients and here's
where the work kind of turned very
experimental and that's what I want you
to kind of notice about how we go about
solving the problem you know we know
about multipath but really how often
does this happen indoors and the only
way to know for sure is to go out and
build it and do it all right so we got
put 30 so Chris clients in our in our
office space and you notice the AP is
out here in the open plan area and
clients are in offices and they're going
through multiple walls two three four
walls until they reach the AP and the
signals bouncing around all over the
place right so if we look on the pseudo
spectra at the location of the peak that
is biggest right if you're just doing
triangulation you'll take the biggest
peak okay that's on the y-axis here and
then the ground truth bearing of the
client to the access point is on the
x-axis so x equals what y means we got
it right and you see that about 20% of
the time right multipath is throwing us
off okay and by the way we did this on
the rice warp version 2 platform which I
think you guys will be experimenting
with later on in the in the summer
school
okay so how we going to overcome this
problem
well the observation is that we can
combine pseudo spectra to overcome the
multipath right so we know the pseudo
spectra from many ApS not just one and
the observation is that the multipath
reflections if they throw off one ap
they're unlikely to throw off another ap
in exactly the same way okay so if we
have a candidate location X here that
we're interested in in testing whether X
is where the client is okay we can draw
lines to each ap and that will give us
points on the pseudo spectra that yield
the probability that the client is at X
from AP ones perspective and from a P to
s perspective and so on okay so we
compute that probability as their
multiplication multiplication of those
likelihoods and then we build a heat map
of probability in space
okay so darker is more likely here's the
clients true location and here's the
first day P okay the first day P just
tells us bearing so the heat map is
radio has this radial pattern that you
see here but once we add another AP you
see we triangulate in on the clients
location but also you see we the
multipath effect and if this multipath
effect is strong enough we'll miss
estimate the clients location down here
because this ap sees a reflection in
this direction okay but we keep adding
here we added a third AP and this was
enough in this example to cancel the
multipath and make the true location the
location of a track gives us so we got
the location right okay so the
observation is that multipath tends to
cancel out when we add a PS but the
direct path
tends to jointly reinforce across that
multiplication of probabilities so
that's what we leverage in rate track
and that's why we get such good location
accuracy the other thing we did was we
looked at doing it to further improve
accuracy was we looked at the effect of
moving a client ever so slightly on to
packet transmissions okay so here's the
first transmission and you see that the
first transmission will bounce off
certain objects in the environment okay
but not others just by virtue of their
of their placement okay so you can do is
do some ray tracing thinking here and
you'll notice that the transmission will
bounce off certain objects when the
client is here but if the client were to
move slightly it would bounce off other
objects okay however the slight movement
of the client means that the direct path
okay to the AP which is these two lobes
right so the AP is computed here to
pseudo spectrum the red one from the
first transmission the blue one from the
second transmission okay and the slight
movement of the client means that the
direct path has changed very little but
the different objects the different
bounces means that the the reflection
paths changed quite a bit okay so the
takeaway observation that Gaea my
student noticed is that the direct path
tends to exhibit more stability than the
reflection paths when clients move and
transmit so he came up with this
algorithm to cancel even more multipath
when we have two packet transmissions
what he does is he finds the the peaks
in the first red a Oh a spectrum he
finds the peaks in the second a wave
spectrum
and then he suppresses the peaks if
they're not paired up with each other
okay so but here you see the direct path
is paired with the direct path and the
other suitor spectrum so he keeps that
but the multi paths are not paired so he
removes those peaks and we're left with
a direct path peak okay so motion based
multipath suppression is the other
technique okay so again the system
building component so we realized the
whole system on warps eight antenna
warps so Chris clients these results I'm
showing you are 33 clients one floor of
an office space lots of non
line-of-sight propagation lots of walls
we've got the ground truth using
architectural drawings in the laser
measure measured out the ground truth in
terms of accuracy the red curve is
showing your rate tracks accuracy median
twenty twenty three centimeter accuracy
the blue curve here is showing you the
accuracy that an Oracle algorithm would
achieve if it took the right set of APs
okay that didn't have multipath if it
just somehow knew okay so this is not a
real outlet it's not a real system the
blue curve but it's showing you kind of
the accuracy possible in the data and
that's pretty high so median what five
centimeter accuracy over one floor okay
very high so we don't know how to
extract this accuracy but it seems like
there's even more accuracy possible all
right and here we're showing you
accuracy results using fewer ApS so
these are six AP results how well does
it work with five four three ApS
degrades slightly down to like one meter
median accuracy
yeah
so average a few meters a few meters
yeah but through walls but that's a good
that's a very fair question yes yes so
we do so this system did 2d localization
the system I'll talk about in the third
part of this talked it does a little bit
of 3d localization these results yes are
planar yeah there's another question
yeah in some cases yes there were no ApS
in the line of sight but we did have
enough attenuated direct paths for the
reinforcements to happen but in general
yeah the more line of sight so line of
sight is a is a is a continuum right so
in general yes the more line-of-sight
you are the better you'll do and these
situations you refer to they're they're
from they they make up the tail of the
distribution so in the worst case we
were one meter accurate with six ApS
music that's right we didn't use rip
music we did use spatial smoothing which
you might also be familiar with yes I'll
talk about that actually at the end and
then after we can talk about that that's
exactly what we do let me press onward
just for time so I'm gonna play you very
quickly I'm gonna play you a video where
we actually show a red track being
realized on the phaser platform so this
here is the phaser platform that I'll
talk about later commodity Wi-Fi free
antenna access points so this is the
next version of the system we deployed
them on the ceiling and here you see the
live results
the box is 1 meter we have four ApS here
phones on the table the red dots here of
the location and John is going to pick
it up and tell you how he moves the
phone over to the other table and you
can see it being tracked here live and
in real time so that's the rate track
running a top phaser okay let me keep
going because I'm running a little bit
short on time second system I'll tell
you about is called secure array okay
and what we said with this system was
okay we have this angle of arrival
information at all our APs
what if we use these as fingerprints
since they're so unstable can we use
these as fingerprints to improve Wi-Fi
security okay so we went and we looked
at what do we do with for Wi-Fi security
and for the most part it's at the link
layer in 802 11 and is protocol based
and if you look at kind of what has
happened WEP was the first protocol
security protocol for 802 11 it was
introduced back in 1999 and it was so
insecure you know internet research
researchers knew was insecure basically
the moment it was released and it's been
cracked and is is no longer in use it's
been there their attacks that crack WEP
in seconds basically okay so then cisco
introduced an improvement to WEP called
leap two years later it's cracked dubbed
PA was standardized in no three four
years later it was cracked
wpa2 was standardized in 2007 and now
just recently we're starting to discover
flaws in 802 11 W
another name for wpa2 okay so this is a
history of protocol based security being
introduced and then exploited and
cracked okay so what can we do
to break this and I would submit to you
the answer is to use a physical layer
approach in conjunction with protocol
based security so let me tell you I hope
this will become clear how how I propose
to do that
by the end of this section but the
observation that we make is the AOA
spectrum has these properties of being
very unique and very stable ok unlike
other measurements that you might take
in the wireless domain like the channel
impulse response ok and here's why
right so if client a transmits yeah
access point as you know gets this AOA
spectrum because of multipath
reflections in the environment and
client B transmits the X at a different
location the access point will get a
completely different
AOA spectrum why is this because the
reflectors in the environment are
different for client B than they are for
client a just because of the angles just
visible of location really of the two
clients so multipath like MIMO multipath
becomes an advantage here in making the
AOA spectrum unique and stable okay
and if we're within this short period of
time called the channel coherence time
typically its milliseconds at walking
speeds and and Wi-Fi frequencies if
we're within the child coherence time
the channel isn't going to change very
much right it's going to be quite stable
and so these a way signatures will also
be stable so we thought to ourselves can
we use AOA spectra as client signatures
to flag active attacks when clients
transmit and try and and break the
process security protocol running at the
access point okay
so our friend model is as follows the
client the attacker rather is going to
be at a different location than the
legitimate client and the attackers can
be transmitting a tour to 11 frames in
some kind of active attack and will even
give the client an omni or a directional
or will say that the attacker can have a
phased array antenna so that he can
transmit energy in whatever directions
he likes okay to try and fool the access
point but notice that even if the
attacker has a phased array what we're
measuring here is angle of arrival at
the receiving axis point not at the at
the attacker or client so the attacker
needs those reflectors to be in exactly
the right locations to match up and fool
a check against a check of a check
comparison of two pseudo spectra and
that's just very unlikely to happen okay
so here's our algorithm we take the set
of peaks in each of the two signatures
from packets AOA signatures from packets
that we want to compare and we calculate
a similarity metric between those two
peaks between those sorry between those
two AOA spectra and the metric is
looking at the magnitude of each peak
normalized given that each peak is some
angle distance away from the the other
okay so we have two signatures we want
to compare say the red and the green so
we line them up we take the peaks and we
see the here the red and the green Peaks
are completely different angles so the
metric will be zero now let's compare
the red and the blue packets right we
see one peak here that matches very
closely and some other peaks in the
blue packet that don't match so these
this pair gets a higher metric okay then
we use a threshold test
so if our metric is under some threshold
eita the the signatures are going to
match each other and we say that's from
the same client if they're if the metric
is over some threshold a de the seizures
will differ and the system will say that
these two packets are from two different
clients okay so this is allowing us to
say whether two packets are from the
same client or not the other effect that
we have is remember our relationship
between in the phased array between
physical bearing to the access point
theta and the measured phase difference
PI sine theta now when we have estimates
of theta you might ask yourself what's
the sensitivity of that bearing estimate
to a small error in the measured phase
Omega and it turns out that if you take
the look at the slope of this of this
function the sensitivity is is highest
when the client is at the end and fire
to the linear array and lowest when the
client is broadside to the linear array
okay and this matters in terms of
distinguishing angles so we want to
equalize the sensitivity so we have
another step where we introduce a random
phase perturbation to both measured
signals and compute a new similarity
metric that averages the resulting
metrics from each of these phase
perturbations and that's our final
metric in secure array
so what we see here is this perturbation
process takes attackers packets that
look rather similar because the attacker
and the client were broadside mostly to
the array and it maps them to pseudo
spectral AOA spectra rather that look
quite different and received low metrics
okay so this allows us to be more
selective in terms of flagging attacks
right yet it retains you know it retains
suppressing the false alarms when the
when the client is transmitting and
we're comparing the clients packets with
itself okay so how does this fit now
yeah
right right yes so we need to do it when
the client in such a small period of
time that the client is essentially
stationary that's the wireless channel
coherence time I was talking about
before so let this example will will
make it clear let me take this question
as well
yeah okay so there's no there's no
calibration needed for two because the
AP isn't actually determining physical
angles of arrival it's just comparing
the two aoa spectra okay so on the other
hand the the comparison between these
two packets needs to happen to happen
when the client when a legitimate client
is essentially stationary okay so what
we what we rely on is that we rely on
the comparison we only make the
comparison within some small fraction of
time delta T that in this case is one
millisecond so essentially the client
that will be stationary for that one
millisecond and we can correctly not
give false alarms if the client to say
walking and I'll show you
I have results actually for walking
speed mobility right so this attack is
showing you how this whole thing
integrates with with 802 11 wpa2 okay so
this is the cutting-edge 802 11 security
protocol but it has this deadlock attack
it's called the dead D authentication
deadlock attack that an attacker can
mount during this four-way handshake
when the client is first connecting to
VAP okay so when the client is
connecting to the AP all these frames
are unauthenticated by 8:00 or to 11 I
all right and so the AP is just trusting
that these are these frames currently
are from the client and the attack
involves injecting adi authentication
frame right in between messages three
and four of that handshaking protocol
okay so what would you need to mount
this attack well we ran number of runs
of the authentication protocol in our
test bed and we measure the time between
messages three and four okay so this is
in between the AP transmitting message
three and receiving message four and in
every case this runs in less than one
millisecond so the attacker would need
to transmit or one frame at exactly the
right time or transmit a string of
frames in order to inject that D
authentication packet at within a one
millisecond window okay that's within
the wireless channel coherence time and
that means that Sakura array can make a
comparison between the signature of any
D authentication packet and the
signature of the fourth message in the
handshaking protocol and if these two
signatures match we know that that the
message actually came from the
legitimate client if they don't match we
know that it didn't come from the
clients and the and it came from
somebody who has no business sending a D
off message in the name of the client
right and we can drop that D off packet
and Ford the attack
now you might be thinking to yourself
okay that's fine but what if the
attacker has directional antennas okay
so there's another attack that's popular
on 802 11 I dub PA 2 in which and this
is actually people carry out this attack
the attacker gets two directional
antennas and transmits frames on both
okay on a one directional antenna he
aims it at the AP and he tries to jam
the reception of message for in the
handshake okay thinking to himself okay
well you know I'm gonna replace message
for with my own message okay and the way
he does this is he jams the reception
and then with his other antenna he aims
that at the client and he records a copy
of EA Paul message for right and then
replays that copy later right so he's
essentially intercepted it's a kind of a
man-in-the-middle attack where he's
intercepted the message from the clients
replayed it and transmitted to the
access point the thing that and and or
before then he injects a D
authentication packet to break the
protocol so now he's essentially he's
he's hijacked the connection set as is
set up between the client and legitimate
ap and nobody knows any anything better
what we what we do though is we see that
when we when the attacker jams ea Paul
message for secure array can detect that
jamming because in the angle of arrival
signature once secure array we'll see
will be the super position of the client
and the attacker Freyja transmissions at
the AP in terms of angle of
arrival right so it's just energy going
out and being received by the AP and so
that received energy adds up and music
picks up that addition and shows us the
superposition and so secure we can
detect this superposition and
distinguish it and flag this attack as
well right so very versatile use of
angle of arrival so now in terms of
evaluation and seeing how well this
works I'll show you two results you can
look at the paper to see results in the
case of mobility and also varying number
of antennas but today I'll tell you
about overall for attack detection rates
and then I'll talk to you a little bit
about what will happen if the attacker
is very close to the client
okay so again a test bad evaluation we
we had this time we use many many
positions in our test bed looking at
warp work platform and here's the
receiver operating characteristic curve
this is the attack detection rate
against the false alarm rate of the
system okay so attack detection rate
this is an attack was actually ongoing
and we correctly flagged that attack and
false alarm rate was a legitimate client
is transmitting when we made the
comparison and how often did we raise a
false alarm okay so for the our OS ROC
curve a perfect system will be a curve
that goes up to the left hand corner and
over and the lower down we are the worse
and no the log scale here on the x-axis
okay varying the threshold moves us
along that ROC curve so we picked a
threshold based on experimental data of
0.7
and in terms of just comparing raw ãoã
signatures we have this blue curve here
secure array with the perturbation
scheme gives us this red nice red curve
here where we're achieving a less than
0.01 false alarm rate and a near 100%
attack detection rate okay
so you might be at wondering how well
does this work when the attacker moves
very close to the client to Sam the
attacker and I put my attack device
maybe a phone in the legitimate clients
backpack and attack him that way right
so we now we change the distance between
the client and the attacker going from
three meters down to five centimeters
and we see low error rates low miss
rates and false alarm rates all the way
up to about 10 centimeters even five
centimeters our our our miss rate isn't
too bad right so we can so this
multipath specificity is coming into
play at distances of just five
centimeters and that makes sense in
retrospect because the wireless
wavelength that 2.4 gigahertz is 12
centimeters right so the channel is
going to change quite a bit at 6
centimeters half that wavelength so in
retrospect this kind of makes sense
alright so in the five minutes I have
remaining I'm gonna tell you what I can
about phaser which is bringing these two
systems a rate rack and secure array to
existing Wi-Fi APs
and this is work I did with my students
John and Jia and staff Graham John was
the guy you saw in the in the video just
now
all right so phased-array
signal processing so people in the
research community not just me but other
researchers in the in the research
community
Shambala cata at University of
Washington Dena kitabi at MIT we've been
we've been pursuing many many
applications of phased array signal
processing so Sean's been doing some
some great work on indoor radar for
gesture recognition I told you about
secure ray and array track and what we
worked on here with phaser is how can we
bring these applications to every
existing Wi-Fi AP and deploy them right
now okay it turns out array processing
is really challenging on these commodity
ApS so you get your links to safety you
take it has three antennas or two
antennas with so few antennas that are
going to really limit the fidelity of
these music algorithms that we use but
it doesn't just stop there right so
these these oscillators on these
commodity ApS they're completely
unsynchronized so remember that to do
all this phased array processing we were
measuring phase at the baseband it turns
out that the oscillators that run on
these radios they also alter phase when
they down convert the signal from the
rate from the RF bands to baseband over
here
okay so just a fact I'll ask you to take
on on faith that these oscillators
change the phase so when they when you
power up the radio these oscillators you
can think of as a spinning clock and
their frequency locked meaning they're
spinning at all the same rate but
they're not face locked so they're
introducing these random phases Phi 0
and Phi 1 okay what that means is you
can do my mo using this setup great but
you can't do the phased array processing
to determine the physical angles of a
rifle if you have these random phase
offsets so that completely breaks it
completely breaks phased array
processing and the third challenge is
what somebody in the front row lent
mentioned was elevation differences
between ApS which are normally up high
and and clients and these these
elevation distances differences distort
the readings okay but it's more than
that so when you we look at when we look
at this the signal we receive from
multiple Nix the first thing we thought
about was okay hey let's let's take
multiple Nix multiple Wi-Fi cards in one
AP to give us more antennas okay the
challenge we immediately found was these
Knicks are going to measure the channel
at different instances in time so the
packet comes in and card one has one
view of the of the signal in the time
domain here and car two has a completely
different view of the signal because
it's it's locked on to the packet a few
nanoseconds later than cartoon locked on
a one locked onto the packet
the other challenge we have when we
introduce multiple NICs
to an AP is that the oscillators are now
between Nick 1 and Nick - now they're
spinning at different rates they're not
frequency locked right so again this
breaks phased array processing
completely and then finally if we look
at the rate at which the Knicks are
sampling the signal that sampling rate
is different between different Nick's
because they drive the sampling clock
typically off the RF clock as well so
the approach we take the first part of
the phaser platform is a multi card
synchronization architecture what we do
is we sacrifice one radio chain per Nick
and we have a shared antenna
up in the upper left-hand corner there
which gives us a phase reference between
Nick 1 and Nick 2 Radio 1 or Nick 1 and
radio 1 on Nick - and once we have that
phase reference we make this observation
about about shifts in the time domain
and phase rotations in the time domain
and you'll remember from your Fourier
math that if we shift a signal in the
time domain that becomes a rotation in
the frequency domain that's dependent on
the subcarrier the ofdm subcarriers that
we're looking at so these cards are
giving us frequency domain information
and likewise phase rotations in the time
domain become phase rotations in the
frequency domain so that we observe if
we can correct the phase in the
frequency domain we can now synchronize
up these Nick's ok so that's fine we've
synchronized one radio from each of the
two Nick's but we still have this
problem of the oscillators on one Nick
not being starting up with random
phases and giving us problems for phased
array processing so we want to find this
set of random startup phases and then we
can accurately measure the phase so what
John came up with is this algorithm
called Auto calibration and it basically
works as follows
you have an AP overhearing a few
transmissions they might be from other
ApS and the assumption is that we know
the location of the other APs
or they might be from clients that we've
localized maybe that the other ApS have
cooperated to localize a client and the
AP that's coming up is trying to uh know
calibrate okay so if the client if the
AP overhears the transmission that it
knows the location of it can then walk
through possible sets of phase offsets
as you see here in the animation and and
compute pseudo spectra using those
candidate phase offsets okay so that's
the red pseudo spectra here that you see
more thing so this is walking through
different phase offset from each of the
two pairs in a three antenna Nick and
then it can measure the similarity of a
pseudo spectra with the true bearing so
right there it would calculate a high
metric very similar to the metric we
used in secure array and then it'll
combine so that that gives us that gives
us one preferred set of phase offsets
for that ap and there does the same
thing for a transmission coming from a
different true bearing okay and jointly
computes the most likely set of phase
offsets okay so the observation again
similar to array tracks observation if
we overhear transmissions from at least
two sources the multipath propagation
that we have will likely cancel and will
likely be locking on to the right
is offset I think I'm out of time but
I'll quickly go over elevation
compensation so this was the picture
before with planar world where a client
was transmitting to an access point and
we were measuring phase difference with
an elevation component what the antennas
of the AP will measure will be a phase
difference due to the azimuth the
bearing of the client to the AP but also
to to the elevation difference between
the client and the AP and we've
highlighted this elevation phase
response in blue here the upshot of that
is instead of now surah instead of now
AOA spectra or pseudo spectra what we
have at an AP is something called a we
call a pseudo map which is likelihood
versus angle and range okay so these are
heat maps with the AP here at the center
and brighter is more likelihood so with
no height difference we have a radial
pattern like we saw before with a ray
tract but as we have a as we introduced
a height difference one transmission at
an AP gives us this kind of bending
probability of clients location right
very interesting patterns so we
basically we've basically done the math
to compute the added phase due to the
elevation and test the number of
candidate elevation locations for a
client running a rate track in parallel
over those candidate elevation
elevations for each client
and the result is we get a significant
improvement in accuracy of array track
so this is a right track now the results
are much worse in terms of absolute
location error because we're now we're
at five gigahertz
and we're using five antenna APs
but we get significant improvement in
the average location error with that
elevation compensation all right so let
me wrap up here so I hope I've convinced
you that phased array C array signal
processing is useful indoors with these
three systems that are bringing it
indoors a rec track secure array and
phaser and we're going to make these
systems available to you for
experimentation and I think the takeaway
question I want to leave you with is
what can you build with phased array
processing once you are using systems
like these what applications can you
think of that kind of look across the
layers of the networking stack and and
do some interesting stuff so thank you
for listening
it's okay I'll repeat the question go
ahead yeah yes yes so the question was
insecure array were using a signature
and what was the signature exactly and
the signature is an AOA spectra right
and is repeated so we add like five or
so phase perturbations to the AOA
signature and we use each of those to
compare so the signature itself is a
perturbed AOA signature zero phase at
boot up or things like that is there a
fundamental reason why it has to be
random things there so the question was
is there is there fundamental reason why
we have a random phase offset of boot up
no there's no fundamental reason it
would well okay so it would be difficult
and inexpensive for AP manufacturers to
calibrate the the array of via their APs
because that would require knowledge of
the ApS antenna arrangements right and
then feed that in down to the baseband
so it can be done and if the may P
manufacturers choose to do it yes they
could release products that give us zero
phase on boot-up but we would still need
to run you know some kind of elevation
compensation basically but they the
problem is they don't have the incentive
to do that because for my mo they don't
need to do that right so my mo will work
with random fixed initial phases just
accept if you undergo distribute my own
in which kids are getting the same
program
so even distributed my mo yeah what you
can do is you can receive okay and then
you can turn around and transmit and you
want to transmit beam form but since
you've taken a channel measurement on
the receive side you can turn around and
transmit and
see that those random faces will cancel
in that case so this is just measuring
you know from out of the blue a signal
that you need to have that calibration
step so it's it's it's in a sense it's
nitch right in terms of my mom yeah so
just regarding another application for
your face today so you mentioned you can
detect collisions easily yeah and I
guess Bhaskar was talking about
collision is a big reason why rated
updation fails and so maybe collision
notification is an application yes
absolutely yes so people have looked at
various various physical layer baseband
signal signal get looking at the the the
trend as collision notification as well
but yeah a Oh a is another option yeah
don't know what the source of the signal
is absolutely
second thing of course diverse ocean
and if you have a previous history
yeah
so anyone looking for a research
research topic better collision
detection using using time series and
AoE analysis right there lines colliding
with AP which is do you know that case I
don't know their angle of arrival works
with self interference cancellation
right so we need to combine them to
combine AOA suchan's work on self
interference cancellation and Bhaskar
Zurich yes yes that's interesting how
the idea body yeah yeah yeah</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>