<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Using Windows Azure Mobile Services in Windows 8 Apps | Coder Coacher - Coaching Coders</title><meta content="Using Windows Azure Mobile Services in Windows 8 Apps - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Microsoft-Research/">Microsoft Research</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Using Windows Azure Mobile Services in Windows 8 Apps</b></h2><h5 class="post__date">2016-08-08</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/JuchClVSwh4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">each year microsoft research helps
hundreds of influential speakers from
around the world including leading
scientists renowned experts in
technology book authors and leading
academics and makes videos of these
lectures freely available
all right I'm gonna go ahead and
introduce our speaker for this evening
Nicola welcome Nicola hi hi guys I guess
you can't hear me oh you can ok so we're
going to talk about building windows
store apps and we're going to use a
Windows Azure mobile services who here
has actually used Windows Azure mobile
services or Azure in general who's been
to the portal ok so quite a lot of
people actually half of you so my name
is Nicola mental if I'm part of the
windows 8 Technical Evangelist here in
corp so I'm I work unlike Jeremy
actually stay here and he travels
throughout in the States and that's my
alias my email and you can find me on
twitter if any questions just do that so
agenda for today we're going to talk
about Windows Azure mobile services
we're going to talk about how you can
use middle mobile services data use how
to send push notifications how to use
auth use the scheduler and how to use
diagnostics and scale we also go into
these little coding we're going to build
an app and show you how you can actually
face your app with mobile services so
what is mobile services it was built to
actually make it really quick for your
mobile applications to connect to a
back-end service so you don't have to
waste time and you can push your apps
really quickly to your customers it
provides a very easy way to store your
data into into the cloud and provides a
very nice rest api on top of your data
so you can use that to do to communicate
with mobile services and actually we
have a very nice SDK for Windows Store
and windows phone 8 iOS apps if you
interest in that and Android is also
coming you have a question we give you
an ability to write server logic we will
call server logic it's actually a way to
intercept grud pipeline and enter your
own business logic between all the great
operations so if you want to on each
insert in this table if you want to send
a push notification or send an email you
can easily do that with just having some
JavaScript logic server logic on your
mole services are we going to look into
how you can do off so you can
prevent data access to only authorized
users and you cannot you can authorized
users through Microsoft account a
Twitter account the google account and
facebook account i'm going to see how to
do that as well mobile services also
gives you a very easy way to send
notifications to Windows Store
applications even Windows Phone and iOS
for Windows Store uses the wns service
so you can easily send toast
notifications live tiles badge
notifications even Ronald occasions they
recently just added a scheduler so all
your scripts that you did they were they
used to writing on for all your great
operation sneak an outright them to run
on a specific time and even you can you
can run them on on demand and you can do
things like backing up the database on a
specific time sending emails accessing
remote services like Twitter and getting
data from Twitter or RSS etc and i'll
show how to do it as well we have we
have a set of logging in diagnostic
tools we're going to go over so you can
see how much you've used of how much
data you views how much it is pushed out
how much time you've used and you can
log your your you can do some logging
through your scripts and then i'll show
you how to scale your applications scale
them out and scale them scale them up
Sookie scenarios for Windows Azure it
was intended for for as back-end service
to mobile to mobile applications
currently we have SDKs for Windows Store
apps windows phone 8 applications iOS
and Android is coming very soon there's
actually been a lot of people actually
written their own SD case because of
mobile services use a rest api so they
just build that sdk for rental platforms
and then it would give you a lot of the
features that are very common for all
your applications so you don't have to
recreate applications for your
applications you don't have to recreate
how to send push notifications on your
service mobile services just does that
for you and i'll show you how to do it
real quickly and then we rapid
development you can create applications
you can create you back and really
quickly and push your application to the
customer very quickly so i like the code
why I love my job I get
code a lot so I'm going to go in and
show you actually go to the azure portal
and show you what that reporter looks
like how to create a mobile service how
to hook that up to your windows data
applications and how do we actually send
and receive data so let's move on to our
portal so this is the windows azure
portal and here you can see we have the
different services that your offers and
right now I'm in the mobile services tab
currently have three mobile services so
to create a new mobile service I'm
simply is just going to go to new and
create and can give your name to the
mobile service so I'm just want to call
it why I'm stamou and that should be
available and here this allows you to
hook up to an existing sequel database
or you can create a new sequel database
on Azure I already have a database but
if you don't you can easily create a new
sequel database and this one we created
for you and you can set up a username
and password through this wizard yes dr.
George excuse me the possible look up to
educate obscure yes yes ok the question
was is it possible to hook up to a table
storage oh yeah and I'm going to use an
existing one and let me just use my
credentials ok so that's going to create
an azure mobile service and the
interesting thing here is you get with
the free with the preview you get up to
10 mobile services and you can actually
use one database for all all your 10
mobile services and the way as our
handles that it creates a different
schema for each one so you can have for
example each other mobile services can
have tables with the same name and they
can all exist on one database and that's
that's good for if you don't want to pay
for multiple databases on Azure you only
have one for all your mobile services it
can all be done on the one that's that's
the reason why you can all deal 11 so
you don't have to pay for multiple
databases yeah but if somebody wants to
let's say that application is really
popular they want to scale it out then
they will not create their own dedicated
database and they can actually increase
the database and I'll talk about that
soon so our application has been so our
mobile service has been created so this
created a database I mean hooked up to
the database created the rest ap on top
of it so this gives us a link that we
can actually hit and talk to it there's
there's nothing there right now we're
going to add some data but it's live on
on Azure so when we go inside we
actually go to the getting started
screen and here you can see you can
choose what platform want to get started
with and Android is coming soon but
these are the three that SDKs that we
currently have and then you have an
option of the connecting existing store
app or creating a brand-new Windows
Store app if you already have an app you
want to connect you simply just follow
these instructions and it's very easy to
get started within like 30 seconds and
today we're actually going to create a
new Windows Store app so I'm going to go
to this so first thing you have to have
visual studio of 2012 we have that you
have to install the mobile services SDK
and it's just a quick download and
install and I've already done that and
then second for this for this startup
app we have to have a to-do item table
in a database so if we just if I just
press this that would just create the
the table for us and just go set up so
if we go back here and if you go to your
data you can actually see we have a
table called to to your item let me go
back and then here I can choose what
language I want my application to be for
this startup you only give you option of
C sharp in JavaScript but if you're a
native developer or vb developer the
mobile sdk actually supports all the
languages but for just to getting
started to an application that you can
get from here is only in c-sharp and
javascript since most of your C sharp I
think that's appropriate we could you c
sharp okay so let's download this
project I'm extracted
02 and here we go and I'm going to open
it in visual studio so this project is
actually been already set up for our
platform has already been cooked up to a
mobile services and you can actually run
it right away let me run it and show you
what it does so it's a simple to do
application oh the solution is too small
okay i guess i have to go to higher
resolution give me a second i think i
have to go to the highest cuz that's the
two options they gave me I'll increase
the font for visual studio okay let's
run that okay so it's a very simple
application you have two columns I can
insert a 2d item so i can say item one
save Adam to save it automatically gets
updated on the right column you can see
all my to-do items and if I want to
complete it I simply complete it and I
can refresh the list so it's a very
simple application you get off the bat
and all this data is already stored on a
mobile services i'll show you in a
minute and let me show you the code
first see how everything works so let me
increase the font on here first real
card actually i can just let me go to up
dogs a mold of cs and you can see this
yeah can anybody not see this okay so
the first thing that you notice here in
a plugs a mold of cs we what we have we
have this class this a reference to a
mobile service it's already been
populated with a uri to the mobile
service and also with our api key so we
can actually attend to get against our
mobile service so that's already been
done for us if you starting with
existing app you just copy this from the
mobile service portal on to your app so
it's the static variable so you can use
it throughout your app anywhere so let's
see how it's been used in the main pages
of zamel das es oops wrong file
so the first thing we have a class of to
do items so this class will will will
map to to an item in our database so it
has to field it has a string text and a
boolean which tells us if it's complete
or not so it's a very simple class and
then in our main page subs amel we have
a reference to our table actually mobile
services so we simply to get this
reference we simply call apt on mobile
services they'll get table with the type
of the item that we want and since we
already defined dude item above it and
then to insert just a single to-do item
it's only one line of code we simply
await insert a sink and we just pass it
the to-do item if we want to get item
read an item also one line and we can
actually do some pretty interesting
queries through link so we can do you
know I want the items that are
completely they're not completed and
this sexual gets executed on the server
it's not anything on the client you only
get file the items that you want and
then to update item also just one line
just call up data sync and then delete
is not showing on here it's also just
one line delete a sink you have a
question no sorry okay let me show you
what it looks like on Azure so if we go
to a data and we drill down to our table
we can actually see that we have the two
items we just just created so I was
automatically done and that was just few
lines of code and we already hooked up
to mobile services okay let me go back
to the slides
okay yes modify that serves not that
table so so you sayin it yeah man using
a good way what if I want to have a
3some yeah you can have any different
structure i'm going to talk about
dynamic schema the way it works actually
sorry the question was how do you create
your own structure how do you create on
class for for mobile services um you can
create your class and the way dynamic
schema works is when you send your class
your your object to mobile services it
looks at all the fields of the JSON
object it talks to Jason it looks all
the fields it automatically translates
that to your database and creates the
column automatically as it needs to
create them and i'll show you how that
works soon okay yeah they're in your for
Kenyans
how do you oughta create database how do
you oughta create a table yeah so tables
we want the developer to actually
created manually we don't want them to
the tables to be generated dynamically
so each time so if you notice before I
downloaded my applications I press that
create my to-do item table that
automatically created this to-do item
table for me if I wanted to create a new
table I can just simply go here give it
a name and that will create on a table
and then i have a class called table in
my in my code that i can have different
kinds of fields yes servicing like you
change your structure yeah so then a
schema is smart enough to actually just
modify the database it's not going to
remove any columns so all the old items
we've already inserted are going to stay
the same but if you if you insert a
different item that you've changed the
structure of that name is kima will look
in your item and I dynamically create
all the columns that it needs to put a
new items that you've added new fields
we've added any questions yes sorry
right now well I so I want to know if I
saw this right when you first created
that database and had nothing in it Oh
column gets no call then the columns
were created as you ready exactly that
and you can turn on that the name schema
on and off go here sorry
configure here we go so you can go to
enable dynamic schema so if you turn
that off and if you try to insert a
let's say an item that has fields that
are not already created columns in the
database it will just drop you out and
won't insert it it would just say sorry
I don't know what this is I can't insert
it into the table I don't have any
columns for this so this is useful if
when you're developing so you can create
this and you turn it on and when you
release your application you can just
turn it off so if somebody gets the
whole wapi key and tries to insert items
and you don't want them to hell I madly
create a bunch of different columns you
had a question um I was wondering at
this stage in the application the
database has no notion of which user
created so we're gonna talk about odd
soon yeah go back to my slides okay so I
already talked about the different
schema that mobile starts our crates so
you can have multiple mobile services on
one same database subi if you have a
mobile service apex a noble service appt
why any day boat have the same table the
day just uses that schema to create both
tables in the same database and then if
you're if you want to manage your data
yourself in sequel use a sequel Azure so
you can just go to the portal or the
sequel portal use sequel management
studio and you can use the rest api and
there's a new CLI tools that we just
released you can create tables
dynamically and start at the map you can
get through your comment line and then
when we created mobile services the REST
API that's on top of our database
calculator automatically so we already
saw how that works and I already talked
about dynamic schema so you can turn
that on and off so we can create also at
what I'm going to show you right now
he's going to how to create the scripts
that it can intercept a grid pipeline so
you can add a script your logic in
between your crud operations so if I
want on every insert if I want something
to happen with some kind of logic let's
say I want to send notification tell my
user so I want to validate data I can
easily do that on mobile services i'll
show you how to do that right now and
then there's a lot of supported modules
that come on when you want to create
your business logic or your server logic
we have MS sequels so you can write
queries sequel queries directly on on
the server we have the request module so
you can do HTTP requests to some other
services outside of of your application
select Twitter API you can do we have
the console module which allows you to
do logging so you have consoled warned
console Doyle air we have the push
module which allows you to do push push
notifications or send push notifications
and then i'll show how to use that soon
we have the tables module which is very
powerful I think it replaces the my
sequel ms sequel on module you can do
really rich to JavaScript queries on all
your tables and can get different kinds
of data for my tables you don't even
have to use ms sequel and then status
codes are used to respond to any
requests and that's a actual ms sequel
query they can right now you can you can
write it or you can use tables and
actually get the table and see I just
want these so you don't expect you to
actually write this yeah and then the
pipe mapping of right now we're still in
preview so we only have these these
types so when they translate from json
values all numeric values translate to a
float and then all boolean values
translate to a bit datetime bellies
translate to a date time offset and
strings translate to an bar chart and
then we expect you add more more types
as the service gross and by GA bisect
you have a lot more okay so let's add
some server logic on our application so
we can actually evaluate some data I'm
going to go back to my portal and I'm
going to go back to the data and drill
into my cable my to-do item table and if
you notice on top there's a script tab
so if you're going to script you can
actually see all the different operation
right there so you can have on each
operation you can actually add you on
logic and so I want to do on my insert
operator request I want to let's say
validate that the text on my to-do item
is more than 55 characters so actually I
have that over here hate coating on
stage
here go so basically simply we grab the
item and we say we want the text to be
less if it's less than 5 simply respond
with a bat request and you can have a
custom code so say text is too short
otherwise go ahead and execute the
operation and that will insert it into
the table so you can do operations
before you've insert something to check
you can do it after if you've inserted
so it gives you a lot of flexibility to
do basic this is JavaScript yes things
both in telephone ojs said you have all
just modules they already come with you
is that camera see this ok so let's go
ahead and save this and that's it it's
already live on on Azure so I'm going to
run the application again and let's try
to add an item that's actually let's try
an add-on that's five characters let's
add an item that's less than five
characters and that crash with exception
and you can see here I'm not sure if you
can see it but here we have our our
custom text that we said text is too
short so you can handle this in your and
your client side but the validation
actually happens on the server side any
questions yes support those are not
familiar with javascript is there like a
collection of these are the colonies
validation that you need to do yes if
you go if there's a really nice guide
here like for example if you click on
here it's going to give you how to use
scripts there's different modules you
can use modified the request modified
the response there's a lot of actual
examples that you can use and I think
it's actually pretty complete it helps a
lot any questions yes listen so matter
how do you know it's but there's some
version of intelligence but it doesn't
work that well they expected by the time
that I hit this thing hits GA that it
would actually be a lot better but right
now is not the greatest we don't know
okay so let's go back to our slides
let's talk about push notifications who
here has actually used push
notifications on Windows 8 apps other
than Jeremy okay good so the wave push
notifications work is what you see here
in the green is what actually been given
to you already sets are being created
for you and what you see in the blue is
something that you have to do yourself
so you have to create the app yourself
yeah so in mobile services you have to
write the logic to actually just send
push notifications so the way the way
push notifications work in general is
your application first of all has to
request a channel URI from the
notification cloud platform this channel
your eyes is is unique to your
application and that's how wns actually
knows where to send this notification so
when you have this channel URI you
actually send this to mobile services
the mobile services stores this channel
your ISO knows where to send push
notifications so you just register that
with mobile services yes confusion is
being so the generalize that specific to
the application or the instance of the
application like it specific to the
instance each year is specific to the
instance of your application your
application has a package ID which is
specific to the whole application and
when you request the channel URI you get
one unique your eye for each specific
application so thus application my
machine will have different channel your
ride in your application yeah is that
they're different and then when we
mobile services decides that in UC Santa
push notification either by by a script
that you've written or by a scheduler
script you've written it would attend to
gate with push notification service with
with wns service let's say hey I need to
send a push notification and would tell
hey this is the channel yura I want to
send this notification to and then wns
will actually handle take that and send
it to your application and then
notification cloud platform will go
ahead and render your toast or update
the live tile and do whatever what kind
of application you've sent to do that
with what mobile services we actually
mobile services allows you to send toast
notifications up do lifestyle updates do
badge updates and you can actually serve
on
if you wanted to and then to
authenticate with wns service i'll show
you how to do this end up in ezra portal
you have to enter your your wns
credentials your client secret and
package s ID so it knows what had
authenticated wns and then simply in
your code you use the push namespace and
actually this is wns is for Windows
Store but can actually use a PS and for
iOS and for windows phone there's a
different name space to send push
notifications and then here I'll show
you what what kind of functions you can
use here but you can simply say send
toast text 0 1 and then you sent what
the text is and it just sense it for you
yes services or is it globally you just
talking like those that is always
visited one so just yes the wns is just
one service that's comes let's buy
microsoft yeah so let's go ahead and I'm
going to add a push notification it's
time we insert an item I want to send a
toast notifications to each one of my
applications that have been registered
so I'm going to go back to to my code
i'm going to i need to create sorry so
is that one familiar with the portal
here the windows 8 application portal
anybody not familiar so this is we're
actually submit your applications when
you've created it so you go here you
login and you say i want to submit an
app and you do that and you say i want
to say that first thing i have to give
it a name so this allows you to actually
register your application name and you
need to do this in order to get a
package ID you know to get notifications
so I'm going to reserve this name so i
don't have to submit my application now
and I just reserve my name's and nobody
else can can take it and I can keep that
for a year but this allows me to
actually attend to get my application
with wns with a package ID so this is
already gave me a package ID and I can
go back to visual studio let me stop
this for running okay
and if I right click on my project I can
just simply go to store and associate
out with the store and I can just use my
developer credentials
and this will give me a list of all the
applications I've registered here's a
the one I just registered and then this
automatically will set up my package
name the package ID to what I have in
the store so automatically do all the
work for me so I'd have to go to the
package manifest and copy all this
values myself I just associate it and
we're done on this side then I need to
go back to Azure and actually give it
our credentials for push so you see
there's a push tab above right here so
you just need to provide your client
secret and package s ID so he knows
where to send a notification so how to
attend ticket to do that you will need
to go to your life portal for
applications sorry let me get the link
for that is this one and here you can
see all the applications you've
registered so I simply go to the
applications that i just registered i
can go to edit settings API settings I
can see my client secret at my package s
ID right here so i just simply copy this
so this is just one thing you have to do
this once to make sure you can
authenticate
and let me just save that and we dealt
with that part okay so let me go back to
my code and I'm going to go through the
three steps what I just talked about
that I need to request the channel your
eye and store that too in my mobile
services so in my apt examined CS each
time I run the application so in the on
launch method i need to do i need to
request the channel your eye and then
send that to mobile services now i have
to have a way to store the mobile
services so i'm going to create a new
type called channel so a new class it's
very simple it all it has is just a
string of a URI and this is just a way
to keep track of with all the different
your eyes it's just a way of mobile
services to keep track of all different
your eyes for the app instances and then
here I can just do a channel request so
what this does code what what this code
does sorry actually let me resolved all
these things and of course have to make
this a sink because i'm using a weight
here we go okay so what we do here is
first we just call push notification
channel manager and we just say hey I I
need a channel your eye you just give me
one and we store that in a CH and then
here what we do we and we create a new
channel with that CH we first check to
see if we've already created one if you
have you sent one before so we check our
local settings on our machine CA is this
application run before basically and if
it hasn't we we simply say ok insert the
new channel ID into our new table so I
call mobile services get table so I get
the channel table which i'll create soon
haven't created it yet and then I'll
simply say insert a sink to underneath
the channel ID and then I store it in
local settings so I know next time I run
the application that have already
created and channel ID so i don't have
to insert a new one and then if i've
already created one and i've already
pushed it to mobile services I simply
updated with the new uri your eyes
update they expire so you have to make
sure
each time you run the application you
you updated in your in your service or
even better you can have a background
service that does that for you okay so
let's go back to mobile services and
we'll go to data and I just need to
create the channel table so we can
actually store our channels and I'm
going to go inside actually show you
that this doesn't have any columns right
now so I'm going to go and say so you
only have one column and will you will
see after i insert a first channel it's
going to create a column itself okay so
one last thing let's add our script so
on the insert each some instant to send
a push notification and let me walk over
this code so on insert we execute the
request so we insert the item first and
then on success we call the set
notification item switch time we insert
an item we sow notification and the
sentra fication function it grabs the
channel table so here we use the table
module I mentioned before and we just
get an instance of the channel table and
then for each one of the channels there
in our table we simply call pushed at
wns centos image and text 03 so it's
who's familiar with with toast templates
or laptops tablets most of your not okay
so let me show you actually what this
what i mean by toast template 304 yeah
it's confusing if you go if you search
just resistors for toast catalog or
Windows 8 toast catalog you can actually
see all the different tools types you
can have so here's the name for each one
so you can just see here I want if I
want one that has an image and has three
lines of three strings or if I just want
with no no image so you choose the what
the right one you want and then mobile
services I just called the toast image
in text 03 I give it the channel URI I
say super awesome to-do item inserted
here's the text to and then I have a
image that i have on blob storage I just
send I just give it a URL you can have
image stored anywhere and then if that's
successful i log it
it's not successful I just login error
let me just run that and let's run our
application one more time ok so we run
the application and that grabs channel
your eye and stores it in mobile
services and then each time I add an
item now we should get a toast there you
go super awesome to the item inserted
yeah your question what is the limit 0
to know for the maximum number of toasts
can said it's something there's actual
limit to how many toes you can send
there's three max they can show so if
you keep sending him it's just gonna
three of them we're going to show up and
then one's gonna expire anyone's going
to show up and then users going to go
and say the sable notification and you
just basically no idea user out of with
notifications yeah that's not a good
idea let the toast notifications are
meant for I believe only in emergencies
or for like rare occasions for just
common notifications it's easier to use
a live tiles and i'll show you how to do
life tell us that later also but if you
if you're not familiar lifestyles i mean
if you go to your Start screen I'm sure
their applications that you know just
keep changing the data maybe i'll show
you how to do this on application yes
well you're broadcasting to all your
registered channels yeah forever they
feed into
pacific users yes I'm going talk about
talk right now and when you authorized
users so they can authorize with a
different service what that you can you
can capture that user ID so you can keep
track of which user ID and say okay this
user IDs register is as wants to get
notifications for this one so grab all
the channels that are with this user ID
and send application of these channel
yours yes you have the code snippets
file share got somewhere there's
actually a lot better code snippets
online if you go in Windows Azure calm
and I'll show you the location where but
all these things i'm showing you right
now there's actually very simple similar
examples online i'll show you where that
is okay so let's move on what happened
okay nope not that okay so let's talk
about off actually right now so moles
service allows you to provide
application to user through a Microsoft
account Facebook Google or Twitter it
gives you a table little permission for
each one of the crud operation so if you
want to limit I only want on users that
have authenticated with Twitter to
insert an item you can do that easily
and i'll show you how to do that and
then you can get more granular control
by using the user low level modules and
user user ID module for each one you can
keep that in keep track of each one you
can say if this user is an admin allow
them to do this if not kick them out so
let's go ahead and have twitter
education to our to our machine to our
application so first what i need to do
is when you create a new when you when
if you want to allow users to actually
log into your service you have to
usually have to go through and create an
application on that service for example
here on twitter you have to create a
twitter application so you can get an
API credentials and I've already done
that before but if you want to do it the
instructions around a sure and it's only
takes about two minutes do n it's free
it's the similar instructions for
twitter facebook google and microsoft
account so here what i need to do is
when i go to back to my a sure
portal and go to the integrity tab it's
right next to the push tab and here you
can see I can add all my application
credentials here for each one of my for
each one of the providers and right now
I have twitter so I'm just going to copy
the Twitter grand chose real quick copy
the consumer secret let me save that and
that's it on this side that save and
then I'm going to go back to my code and
in my main page that Sam about CS each
time i navigate on the page i want users
to authenticate so but before i do that
i actually want to show you what happens
if i try to insert an item actually
forgot one thing sorry if we go back to
a portal i want to limit what users can
actually insert an item so if i go back
to my table a to-do item i can go to
permissions right here and i can say for
insert permission right now is set to
anybody with the application key so
anybody that's for this application they
can insert items but if I just do a drop
down I can say I only want authenticated
users to insert items and can do the
same thing with all the other operations
this will won't allow anybody to just
insert an item and let's save that and
let's start the application which I
already have and then let me add an item
and we say an authorized so we got an
error unauthorized so this is something
you have handle in your code so in order
to get the user authorized we have to
log them in so what we simply do it's
one line of code or simply say I mean
add the sink here we go so you simply
say logging the sink and then you
answered your provider they want them to
log in but if you can see there's all
the you can you can't see them but it
says the first ones Facebook Google
Microsoft account on Twitter so you can
choose which one you can have mobile
multiple ones too so here I just deal
with Twitter and let me run this so this
was just one line of code
to get the user so we run the
application automatically takes us to
Twitter to actually log in so let me log
in and then I logged in so let me add
item and there you go adam has been at
it oh and we got a notification thanks
guy I added that to the main page
zametov CS so on the UH navigator method
so each time we navigated to the page or
we start the application in this case it
executed this line saying hey logging
the user I want to authenticate the user
you easily a dedicated with pop of the
dialogue religious right now it will ask
you to log in again it doesn't persist
the login so you have to keep plugging
in there's ways to persist the login but
they're more complicated yeah yes if you
had done this with a Microsoft account
you'd be working with the credentials of
the machine would you then log in
automatically or would you see this you
up you can this two ways if you just
simply create a Microsoft account you
can do it it's going to be the same way
you have to log in each time or you can
use the life SDK in which case it grabs
that credentials from the Machine and
just passes the token to mobile services
and logs the user in as the user that's
logging to the machine the first time
you run is going to ask you if you want
to give it permission and all that mumbo
jumbo but after that the user is going
to be logged
any questions let's move on yes can you
use that authentication token later in
your app that first up it doesn't do
with data services like you just use
that as your authentication and let's
say you wanted to do user specific
things in your app to don't wait to the
service itself yes you basically when
you authenticate you get a user ID and
you can pick this user ID and store in
your table and when user inserts you can
grab this user ID and associated with
this item they got inserted so you can
keep track of which users instead of
what item which users on what item what
users have registered what kind of
service so you get the idea you get to
use you can do whatever you want with
the user ID yeah and of course you can
use it to get data from the service as
well to your scripts okay let's talk
about scheduler so schedule was actually
something that just got added about
three weeks ago I believe it allows you
to run scripts on a schedule so you can
do it every like 15 minutes or you can
do it every third day of the month or
you can do it on demand and some of the
examples and this is a long list but
some of the more the better examples is
you can probably push data or even back
up your database at specific time you
can pull and aggregate third-party
services like get Twitter tweets or get
RSS feeds and load them into your
database you can do processing like you
can resize images you can send post push
notifications sent the emails you can
send text messages and there's a lot of
examples on Azure com where you can
actually see how to do all those things
so let's go ahead and create a schedule
I'm going to go back to my ad your
portal you go back here and go to the
scheduler tab and right now I have
anything so I'm going to create us a new
schedule and let me name this guy just
pull Twitter now set up to you 15
minutes
and let that create okay so now let's
create it so let's drill inside so we
can see that it was never run and then
what next one is never since it hasn't
been enabled and to enable it would just
simply press the enable button and then
to run it on the men we can just save
one once inscribed on it immediately
right now if you go to the script tab
you can see that it just has the default
script it's a console don't warn if i if
i run this it's actually just going to
add a log to the to the to the log and
you go i can actually show you the log
right now so if you go to logs you can
see all the logs for all your services
and this is stuff I've done before but
this is the newest ones you can see
you're running a running an empty
scheduled job of this creep or job pull
rather than the stable job so that's a
raised way to debug your scripts so
let's go back to our scheduler and
actually add our script and I have the
script here so this script goes out to
Twitter of course you have to remember
to have the same name of your function
as your scheduler so this script goes
out to Twitter and grabs the latest
tweets that have my handle as part of
the tweet and gives me only two of them
so we can we can use Twitter API to do
whatever you can use any other services
and then here for each one of the tweets
we call the sentra fication method and
the certification method grabs each
tweet and then grabs the channel table
and for each channel it sends a tile
notification or a life tile so here we
use the scent I'll white small image and
text of four and similar as it with the
toasts location which nope something
similar with as with the toast
notification there's a whole catalog of
beach and it's a lot bigger so you can
see there's a lot of different things
you can send
just an hour on that thing and we go
back to measure so and if which one it
just sends a live tile to our
application now I'm going to save this
and before I run it in order to receive
a wide live tile which I'm doing here my
application will have to have a white
tile logo and by default it doesn't only
has the small logo the square logo so in
order to receive the white tiles I have
to set up at an image so go back to my
manifest and simply just add an image
here for my white tile I already have
one I just did this one in paint here we
go and let me run this application and I
don't want log in right now and which
measure here we go so let me run this
script and if we go back here here's our
application and then we see it as a
tweet that just popped up as a life tile
and so if you notice I didn't write any
code to update the the lifestyle that's
a previous application i was testing
this with huh install that so I don't
write any code on the windows side on
the windows client side to update the
lifestyle and before I write any code to
sentosa fication this is all handled to
wns and the notification service that
runs on on windows any questions yes the
server side code yes if you as I
mentioned before you have the console
method module so you can say for example
I think he already has it here no but
here for each one I can just say console
dot log this works
and if I run this 3c the first
there we go so I can go back here and
then if you notice on top you have logs
at the end so you can see all your
previous logs each time you've done it
and channel expired of course so I have
older channels and the table but here
you say for each tweet I have two
channels I just call this work any
questions ok let's go back to earlier
slides ok let's move on to your
Diagnostics logging scale for
Diagnostics we give you a very easy way
to to monitor your API calls how many of
you've made your how much CP time you've
used and how much data you sent out for
you use as I mentioned for logging you
have the console module so you can do
Arish logs and warnings scaling so if
your application gets popular and you
need to scale it up you can scale it out
to a dedicated vm in the the shared in
the free mode you get it it's shared vm
so you share a vm with multiple users
but if you want to have your own
dedicated vm you can easily just
purchase a vm and move your mobile
services to that and then you can scale
it out to multiple instances and then
same thing with with your database you
can scale out to your own database and
then you can scale up to any capacity
you want ok let me show you that in the
portal actually so in dashboard if you
go dashboard this is the diagnostic part
so I've done some API calls and thanks
so you can see actually hear the red is
the API calls I've done 18 here 18 there
and then here I've used two point five
eight seconds cpu time sent out for you
kilobytes you can see some other
information here if you go to the logs
i'll show you this you can see all the
logs free applications so if something
goes wrong oh wait something went wrong
you can find out it gives you I think
gives you a line of code and everything
too not this one but some of them do and
then in scale so this is where you
actually scale up your application so
right now it's in free so that's the
default you can move it to reserved and
here of course it says I've removed the
spending limit
my account you have to pay for VMC have
to purchase your vm and while it's in
pride preview mode it has a thirty-three
percent discount just like websites so
you keep that in mind if you need to do
that and then here you can scale out
your your instance at maxis three right
now but that could increase and then for
the database you can increase the size
or you can get it out to a larger size
and your own yes duration excuse me the
DB use Federation relation scale to the
chart sorry you have a lot large set of
data will it all sort of one
unfortunately it doesn't migrate the
data when you when you move into your
own to a dedicated database so you have
to probably write your own script at
this point to migrate the data to the
new database getting my vision was a
little bit big so yeah I think I can
talk to you after this any questions
is anything else that I'm not actually
really sure i can i can ask somebody but
we'll talk out yeah okay and then if you
want to use mobile services it's free
but if you don't have any of these
subscriptions for example you probably
have to pay for the database and the
minimal database you can purchase is a
100 megabytes and as five dollars a
month but if you have one of these
subscriptions you get databases for free
so mobile services is free and then here
I'm sure most of you here have an msdn
account so if you go to msdn you can see
you have five database units yeah
and we go in summary so we talked about
how do you connect your application to
mobile services how to store your data
how to read service scripts
authentication how to send notifications
how to use the scheduler diagnostic and
data logging in data and and diagnostics
and how to scale applications here's
some useful resources so Windows Azure
com has has a lot of good information
has a lot of the samples and a lot of
tutorials that our team here has I
created a lot of videos that you can go
through if you have any questions you
can use Twitter or your cloud Nick
that's one of the main guys on nan quan
oh sorry in DP Corp that actually deals
with mobile services so a very good
resource if you have any questions
normal services Chris Reisner is also a
very good resource for if you write your
application iOS or Android and demos are
here I can actually show you which
this is the ad the training keep kit
which actually has a lot of good
information about how to write your
applications but let's go to a Windows
Azure develop and you have a lot of
tools here and you can just go how did
you a start would push how to do
application etc any questions think
we're done right now yes so back to the
authentication you mentioned the
authenticated user gets an ID and I'm
imagining that the subject that you're
storing in the table would have an ID
property and you would set the ID
property we can do is actually when you
go to mobile services in the way the
recommended way to handle that as we
find it why is this not working ok so
the best way to do it so if I go to data
and let's say I have a script go to do
item so on to my insert script before I
insert my item i can simply sorry script
insert so let's say I want to keep track
of they user ID so what I can do I can
just say item user ID and this creates a
new field on my on my item I can just
say equals to user ID so the user item
that you see up there is actually the
authenticated user that sent and that
has an ID and I can just store the item
I can just create a new field on my item
and that why don't we create a new field
a new column it hasn't created and you
store the idea of each user read
operations will be filtered by my user
ID yes we can say user ID is this do it
yeah you can even if you do it we want
to do it on the server side if you want
to read you can say for any plenty
request you can say only request these
guys that have this user ID so it's
going to pass your user say only the
user that pass me that requested this
only give them these this objects yes
heat up a little bit about strategies
for organizing your application so for
example if I have another line with
mobile service but yet I'm also
targeting both Windows 8 tablet what is
8 phone iOS how best to kind of organize
that and also manage for example the
skinning part but the scary part
skinning the UI part o the UF part yeah
I'm mobile service is this logic yeah
I'm the SDK moment service SDK for
example Windows Phone and Windows Phone
8 and Windows 8 is very similar and you
can put that in one same module that
will communicate with Windows Azure
however for if you want to say the UI
that would have to be separate for each
one of your applications so you can you
can have a shared that module for your
mobile services probably data for your
backend stuff but then the UI part will
have to be done separately question is
really is it the same instance of this
local web service that is applicable to
send push notifications of the phones as
well as know so you could have to keep
track of the channel arrive for each one
excuse me so when you send for example
let's say you send a channel your eye
for windows data application you have to
specify that this is a windows 8
application so and then when you store
it in the table you just can have
another feel that says that says this is
a Windows 8 channel URI and this is a
windows phone channel your eye and then
when you send notification you can use
the different namespaces and under push
you can do push that wns for windows 8
so you can just check okay is this a
Windows 8 you are I send it to this use
this method is this is a windows phone
here I use this method it's just a if an
else statement basically whatever you
saying up my phone app on a full project
i'll be using the same credentials that
offered us a few things action so it
knows that it needs to got the same it's
exactly this basically using that's just
the API key can use it from any any
machine that actually used talks to it
by rest so you uses REST API sand just
passes that API key each time yeah so is
there a way to spin for example
the incoming requests to determine
whether it's a Windows 8 tablet
horsham busy purely by looking at you
i'm not sure i have to find out so find
me after and i'll get you information
yes the channel the last reverent know
yes they expire so that's the reason why
each time we run the application we
update the channel in our table to the
most recent one so the most effective
way you will want to do that is probably
have a background service on your
windows 8 just runs occasionally and
just grabs a new channel your eye and
then updates it in mobile services how
did the server each expedition it
doesn't know if you notice when i went
to log basically just have to do that on
your on your client side so you keep
track if you've already sent a scent
it's not channel your eye and your local
settings so i already showed how to do
that i think if we go back here so here
I'm saying okay if I already sent a
channel URI and if I haven't I simply
insert it if I have and I update it and
the way i do that i use local settings
so if you haven't used local settings
what local settings allows you to do is
just it's sort of like a registry you
say i want to key if i want to save this
value under this key here in local
settings and that's persistence
throughout your life cycle of your
application so if you close your
application and open up again this will
stay when you're after you have to find
it so if you already defined this you
only have to update it if you have Navin
to find it it's the first time you run
it so you just push it and then you can
have a scheduler job that actually goes
through each one of your shell your rice
and checks if they've been expire or not
and then just purchase the bell data you
check
you just have to keep track you have to
for example you can add here on my class
I can have another feel that just keeps
track of when it was created and channel
your eyes usually expert after 30 days
so you can just check if it sold in 30
days just go ahead and brush that data
if it's if it's expired there's no
really way too I don't think there is
but I can find out to actually check
just by the URI but that would just skip
over it and because the next one sorry
how do you watch the Big Unit we just
wrote the immigration so that doesn't
have to enter it again
sorry sir what's the what's the
recommended radio store information like
I used on you insurmountable ever again
can you repeat the question excuse me
can you repeat the question yes the
question is what's the best way to store
the user information on you talk about
mobile service on top on mobile services
or on the client right now if you
answered and I oh my gosh / shiny open
an app in our login password you know it
doesn't ask me each time I insert an
item it asked me each time I start my
application so throughout my application
it still keeps the user logged in if you
want to keep the user log keep logged in
through out if you want them login to
persist throughout your application
there's ways to do it it's a bit more
involved than I can do it right now but
there are ways to do it and I believe
the only way to do it is with Microsoft
account at this point you can just
automatically yes if you use the life
SDK you can actually use that SDK to log
in the user and then pass that token to
tmobile service and each time you boot
up your application you can just grab
that token and pass it to mobile service
and that will automatically log in the
user you don't even have to prompt the
user all you have to do it once had a
questions
okay so we're done here
so if you got any questions can come up
but I think that's a end of the public
transmission yeah</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>