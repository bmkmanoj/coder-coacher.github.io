<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Operationalizing Predictive Model | Coder Coacher - Coaching Coders</title><meta content="Operationalizing Predictive Model - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Microsoft-Research/">Microsoft Research</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Operationalizing Predictive Model</b></h2><h5 class="post__date">2016-06-21</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/FoxgnYDSr4Y" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">each year microsoft research helps
hundreds of influential speakers from
around the world including leading
scientists renowned experts in
technology book authors and leading
academics and makes videos of these
lectures freely available
you
so this should take all of about 15
minutes and actually it's very
interesting how long it takes really to
John's point there i mean one of the
things that we're really trying to do is
change this whole ecosystem and allow
people to once they have a good model to
go ahead and publish it make it very
easy to publish such that the model is
accessible from applications that you
may build or potentially sell that model
as it from an end point perspective and
if i take a look at the steps there's
the steps here we've already covered the
first square which is the provision of
work space right and that's what we did
we first started the day we got a
subscription and we created a work space
to get going recall that the first
presentation that when i spoke we talked
about this workflow and up through now
we've been in the middle box there we've
been building the ml model we've been
getting preparing data from various
different resources we are building
experiments we're creating an updating a
model we're evaluating model results I
think John's last presentation was I'm
very atypical of building the ML model
so the last thing to do is publishing a
web service and there are a number of
steps that we're going to do we're going
to first we're going to use where we're
drawn left off we're going to pick up
that model that exercise we're going to
create what's called a scoring graph
then we're going to add in and out port
ports what really what you're doing
there is you're defining the inputs into
the rest api and the outputs to that
rest api so it's your request response
basically and then we're going to with a
click of a button publish it to a web
service and ryan right from there the
ashram ml what it's going to do it's
going to create a web service and then
after that we're going to do some
massaging
of some of the help that gets
automatically generated and then deploy
to the production so it's four steps but
it's actually just a few modules
actually in the exercise so why don't I
go ahead and demonstrate that real quick
yeah let me just pull closer and login
okay you're the email and this is the
deck here but let me go ahead and I have
to log in to Azure Mel again just give
you one second here
okay come to the portal
so look good
okay and let's see I think this is the
one I have a number of workspaces set up
here okay yep
so so this is kind of weird John John
had left off actually in John's exercise
what you'll see in the PowerPoint
presentation is where we actually
experiment across three models and svm a
linear regression and a busa tree John
did too and I think in here I didn't do
the boost the tree that he did but I
have the two class support vector and
the two class logistical regression
model so the first step is is that you
know we've gone through this exercise
and we've made a decision about which
model is performing the best so we can
go ahead now and eliminate some of the
some of the other models as well as some
of the modules that fall underneath that
help us determine which module was the
best one so we're going to do that so in
my case what i would do is let's pose
the SVM model was the best model so I'm
going to go ahead and delete a number
I'm going to delete the the two class
logical regression model and the things
underneath and again what I'm trying to
do is create by goal here is to create a
scoring model so let me go ahead and
delete these things it a couple more
here
ok I have that then the other thing too
that I want to do is up here just for
this particular experiment in the
missing values scrubber what we did was
we identified here that we wanted to
create an indicator column we wanted the
the service to go ahead great one so
what I do here is say do not generate
because we don't want that indicate a
column to kind of show through through
the rest api so let me do that and this
should i'm going to go ahead and run
this and this should more or less look
exactly like when John have first
started out but fairly close to and then
after that what I want to do is then
capture the training model here and
actually save it off because that train
model is the model from which I'm going
to go ahead and build that web service
API so let me just let this finish
running it ran ok and then you see this
training model here if you click we pull
it out to the side here and also let me
expand this a little bit it actually it
wasn't there right here I'm going to
click on this and there's an option here
that says save is train model just going
to go ahead and save that and let's kind
of call this my census trained model and
hit ok now what will happen is that as
it's saving it it created basically
another submenu here and you can see
that it's called census trade model ok
so let's go ahead and save this entire
experiment and we're going to call it
how new service which is called the
income redic terr ok
still creating that scoring model so now
what we want to do is we want to use
that train model that we had saved to
create a scoring graph so I'm going to
go ahead and take this train model and
drag it and drop it on top of here and
then I no longer need a whole bunch of
this stuff anymore again this was
utilized for me to evaluate which model
would be best so I'm going to go ahead
and eliminate a bunch of these things so
I'm going to limit this I'll imitate the
train model I'm going to also eliminate
the left scoring model here the
evaluations the sweet parameters boom
boom let's see if I eliminate it enough
here let's hope I didn't eliminate too
much this were quick okay sorry so we
got let me just take a look here we
don't need these either uh this corey
one here yeah yeah let me just take a
look let me just let see what I god I
got the adult sense a yellowed census
income i got the missing values I got
project columns yep I need this scoring
model let me let me take those two and
bring this one back up here and bring
the census trade one
yeah one of the features that is coming
is that you won't have to create a
separate experiment to do the web
service it'll just be a different view
in the same experiment it'll sort of
infer what you need so you won't have to
do this whole take my training thing and
do it continue it it'll just sort of
create a different view yeah yeah that's
good that would be really great maybe
awesome exactly yeah cuz yeah he is
you've got this tree model all you
really want to do is any debris
processing and scoring yep yep good good
good um the other thing too we want to
do is we project the columns you want to
add one more column here to exclude and
that's the income value remember it was
the income that we were predicting so we
don't want to use that as an input so
let me go ahead and just add in come
over here and hit okay so let me just go
ahead and run this this looks pretty
good so far
it's good good so the next thing I want
to do is declare with my input and my
outputs are to the web service and I do
that by selecting right here this is my
input data set into the scoring model
and if I click this here i'm going to
set that as my publish input and then
similarly on the scoring module right
here if i select this i could set this
as my publish output yeah the train
model is just the learned parameters
right the scoring actually does the
predictions okay okay that makes it yeah
yeah go ahead and run this
okay that's quick so the next step
really would be published as a web
service so let's go ahead and do that
we'll go down here and click down here
and would you like to publish it so yes
and what's what's occurring right now is
it actually went ahead and it took that
model and evaluated the inputs and the
outputs it created a request-response
endpoint on a web service it generated
that web service and put it in a staging
area it also created a batch execution
API interface as well as some
documentation to so folks who are
familiar with for example utilizing the
web api to point oh that's an asp.net
for example you can automatically
generate a lot of documentation such
that anybody who pings that site can get
an indication of what that might be so
let's take a look at that real quick so
this is that basically the dashboard to
my web service and if and you'll notice
here to that I'm now hovered over the
web services tab right here and this is
the dashboard and that's the name of the
experiment that I named earlier the
income predictor I could provide a
description for this service and I'll do
that through the configuration again
this is the API help page for the
request response and the API help page
for back batch execution so let's go to
configuration here and in configuration
this is where I can provide some
additional information to primarily
affect the documentation of the site and
so for example here's the display name
and description if I want to add that
it's not configured yet for production I
have to flip the switch 1 i'm ready but
you know i remember here's the input
schema then i'm going to be requesting
on my rest api and here's the output
you'll see for example down here is the
final the scored labels as well as the
score probabilities so lets you try to
do one thing here for example if you
remember we scan the data or
a little bit fairly quickly a little bit
earlier but the education genome is a
bit cryptic for an end user so i can
actually go ahead and type in some
description information that i might
want to provide in the help page so
let's just kind of call this education
look I spell it right education occasion
inu and I know for example masters
equates to a value of 14 in the column
because that was through scanning the
data and a bachelor's degree eek weights
to a value of 13 there you go and I
could save this so now if I go back to
the dashboard and take a look for
example at the API help page and the
request response here I'll see all kinds
of information and this is what would be
public to somebody who wants to call the
application I can get have a no data
interface I have a post that describes
basically what the request might look
like I also have the request headers the
request body so these are all kinds of
inputs here so this is a sample request
and how I might package that up here's
my response and response headers and
some common rest api error codes so
these are the values that i'll get back
in my response and then it also
generates some sample code though
c-sharp Python and are so I could
technically go ahead and cut and paste
this and put this right directly in my
application and should be getting up and
going pretty quickly so let's um go
ahead and test it and we'll see how it's
working how about that the next thing I
want to do is go back to the dashboard
here it's right here and right here you
see this little hyper link called test
and it's going to generate a pop-up so
let's just type in some values here
let's say this person is 40 years old
has a master's degree you can kind of
see right above that edit field is where
i entered the description of the
education emu so here what I'll do is
I'll enter 14 the person has a master's
degree never married and again I'm being
very specific about the values that I
enter here and that's only because I've
had the opportunity to kind of scan the
data you'd obviously do a much better
job in providing guidance to end users
or what valid values might be but you
know what I'll hit never married and
some of the unmarried is my current
relationship race let's put you know
white male believe capital gain and
capital loss blank for now and let's
just kind of say that I work 60 hours a
week so what it's doing is actually
making a call to the rest service it's
testing it and returning back of value
so if I click over here and I take a
look at the details and what I get
returning back is the values that I had
submitted in there and also the outcome
so greater than 50k with a sa 1559
percent on probability yeah
traffic control say and user cannot
invoke this there is more than seven
times a second you know what I don't
actually so the question is is is how do
you put like for example governors on
the website and integrate that I'm not
familiar about how I might lift this and
put this into an environment where I
could do that as kinds of things so this
part of the service was done in a quite
a highly scalable robust way and they're
designing for thousands of calls a
second right for example the website
psycho flow does not allow you to call
to query more than five times there's
some there's some services like weather
services that i put a governor on there
that you can't call the same service
from the same IP say no more than like
10 times a minute well in some cases
that could be legitimate right yeah well
you might have to do is maybe host
basically a web web service in front of
this that has some of those governance
is put device including authentication
and authorization and stuff well you
said the magic word depth indication you
know there's all these api's are key and
you may or may not want the public to
column or you may want to say look you
know it's going to cost you to have this
key and and you know we that in in some
cases actually we're sort of announcing
today that you can actually publish to
be as your data market with these things
and there you can put a cost schedule
for actually you can say you know every
AP alcohol it's going to cost you money
or you may say the first X thousand are
free and then beyond that it's going to
cost you money and so again it's sort of
key to an account so you'd actually need
I'm sure would great if the marketplace
can keep your nazma to help you pricing
you yes yes that's all it's all there
it's
yeah and so I'm giving away part of the
four o'clock talk but the there will be
another button that says publish to the
azure data marketplace in which case you
can monetize these if you want to but
and also have help documentation links
to sample apps for calling it all that
so it's a much more complete publishing
solution and it's strata today I think
they're announcing that you know
Microsoft is publishing 15 services
today based on this anyway yeah so
that's it with the workshop we kind of
reach through it today it's a much
smaller crowd and easier to manage
though it you know thank you very much
for taking a good amount of time out
during your day do you guys have any
comments or feedback that you want to
provide we're going to meet again at
four o'clock and I think John's a lot
closer to the product team and we can
just discuss basically you know futures
as well as take input from what you've
seen</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>