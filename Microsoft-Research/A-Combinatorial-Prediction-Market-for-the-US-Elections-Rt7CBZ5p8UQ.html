<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>A Combinatorial Prediction Market for the US Elections | Coder Coacher - Coaching Coders</title><meta content="A Combinatorial Prediction Market for the US Elections - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Microsoft-Research/">Microsoft Research</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>A Combinatorial Prediction Market for the US Elections</b></h2><h5 class="post__date">2016-08-08</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Rt7CBZ5p8UQ" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">each year microsoft research helps
hundreds of influential speakers from
around the world including leading
scientists renowned experts in
technology book authors and leading
academics and makes videos of these
lectures freely available
it's a great pleasure to welcome
Sebastian hi who's done a lot of work in
auctions he was at Yahoo and he's now
delighted he's now to the New York
Cambridge lab but now you can talk about
something not auctions but prediction
markets say Sebastian welcome and over
to you thanks a lot Peter okay so this
is to talk about a comet or prediction
market for the u.s. election so and this
is joint work with my colleagues at
Microsoft Research New York City Miro
Dave Rachel and Dave panic and this this
span is actually a lot of the expertise
is represented in the New York City lab
expands ideas for machine learning all
the way to empirical economics okay so
so the two thousand in november two
thousand twelve the United States held
their presidential elections happens
every four years as I'm sure you know
and the two candidates were the democrat
barack obama the incumbent and the
republican challenger Mitt Romney so
just to remind you how the elections
work in the United States it's not a
popular vote it's not a majority vote by
the whole the whole country what you
have is each individual state elects a
winner and the winner of the entire
election is a basically way to majority
this state so each state has a certain
number of so-called electoral college
votes which is roughly proportional to
the population of the state and if you
win that state you you obtain all those
votes and the winner is the one with the
majority of the electoral college votes
okay so if you've been in the US around
in an election year you'll know that
there's incessant media coverage for at
least nine months prior to the election
and you have a whole parade of experts
on television
trying to figure out what what the
candidates chances are because of this
system of the different states there
they pay a lot of attention to
individual stage especially what's known
as these so-called swing states where
the probabilities where the chances of
of it going to either candidate are
almost 5050 so there's a lot of
discussion about individual states and
the entire election and so like as for
example Ohio is a very big swing state
and so there'll be a lot of discussion
about Ohio and you get all these experts
and what we wanted to do in this work
was run a so-called prediction market to
provide predictions as to the the
outcomes of not just the entire election
but maybe an individual states and also
the innovation in this work is we also
allowed for predictions on combinations
of states and the advantage over say
your your common expert is that where
we're putting precise probabilities on
different possible events okay so for
this talk what I'm going to do is well
so I'll tell you about this prediction
market that we built the engine behind
it and so that'll be the computer
science portion of the talk and then
i'll i'll show you the interface we
built on top of it and that we actually
ran prior to the elections gathering
some users and and i'll wrap up by
giving you some results on into how the
market actually performed sorts of
information aggregation okay so let me
get into the details now so in a
prediction market the basic unit that
gets traded is called a security and you
should think of a security formally as a
proposition that becomes true or false
at some point in the future okay so an
example of security here would be Romney
will win the state of Florida in the
elections the elections happen that's
either true or false and now traders
will come to the market and buy shares
of this security at some price so for
example 45 cents per share and the idea
is that for each
have the security if you hold it until
the event actually happens then the
payoff is going to be binaries either
zero dollars if this if it doesn't
happen or one dollar if if Rama does
when the wind floor in the election so
obviously if it's a 01 pay off the price
will have to be somewhere between zero
and one and if your risk neutral
basically if you believe that the
probability of Romney winning Florida is
anything higher than forty five percent
here you an expectation you'll get a
positive profit from buying that
security okay so that's the very simple
idea and in the process of buying the
security you will move the price up
closer to what you you actually believe
the probability to be so that's the
basic idea now in a combinatorial
prediction market we don't just have
these securities but we also have
Commodore securities and formula you
should think of that as a security where
the payoff is a function of several
common variables so actually one
probably the most most fundamental comet
oriole security is actually the outcome
of the entire presidential election so
here because of this electoral college
system the winner of the election is a
function of the winner of each of the 50
states some weighted majority other
options for comfortable securities might
be for example you could have the
security or a bet on whether Obama lose
Florida which is a very important swing
state but also but still win the
election or you can have bets on
combinations of states for example Obama
win something between 8 to 10 of the
northeastern states and the idea here is
that by using confidential securities
what you're getting is not just
individual probabilities but also joint
probabilities right so in principle that
should get you to better information
aggregation predictive performance but
another very interesting aspect of
getting joint probabilities is that that
then means that your market can quote
conditional probabilities and that's
very interesting from just a an
informational standpoint one of the
things
that people what are the kinds of
questions people really ask when they
debate what how each candidate is doing
India in the election campaign our
condition probably so for example one
one might ask what's the probability of
obama winning given that he wins the
state of florida to get a sense of how
critical florida's for obama so you
can't get that out of just out of just
independent markets but once you start
to get joint probabilities you get
conditionals and you can start to answer
these very interesting questions about
given given ohio or florida what's the
probability of Romney or Obama waiting
so the way we implemented the market is
we use this what's what's known as a
market maker so a market maker is just a
centralized the entrance entity that
commits to quoting a price for any
security or event that you might want to
trade on okay so if you come to the
market and you want to see you say you
want to bet on a combination of obama
winning Kentucky and Florida some odd
combination the problem for the market
maker is to set a price for that
security so that so that a trade can
happen and also how to update the prices
one straights happen so obviously there
has to be some kind of function where
the more shares of the security are
bought that means more and more people
think it's it's likely the price ie the
probability of that event should
increase so in here basically because
we're using all these binary pay our
securities you can think of a prices
always as equivalent to probability so
the per the current market prices should
be should be viewed as the consensus
probabilities across the different
events so I'd like to situate the the
kind of market we're using among the
whole space of markets that we could
have used conceivably have used because
it's not the most conventional type so
there's a two dimensions you can think
of in terms of running a market like
this you as I said what I described as a
market maker where the centralized
entity but what you're probably much
more familiar with and what's standard
in say financial markets are exchanged
so in exchange is in an exchange
basically the exchange just matches
buyers and sellers together so if
someone wants to trade on Romney winning
Florida you have to find someone willing
to sell Romney willing for Florida and
someone on the other side willing to buy
it whereas the market maker is a
centralized entity and on the other
dimension what you have are two
possibilities again you could run
independent markets so even though many
different securities I events might be
related so for example the outcome of
presidential election and the outcome of
Ohio Florida are very closely related
but you could just treat them
independently and not not worry about
whether the prices are properly related
to each other in the other in the
spectrum you could run a so-called
combinatorial market maker where this is
a market maker who tries to correct
prices and make sure that the price is
at any point in time are always valid
marginal probabilities for some
underlying probability probability
distribution so you should think of
these prices for these different
securities as marginal probabilities of
some probably distribution over some
massive combinatorial space here which
you can enumerate and these marginal
problems have to satisfy certain
relationships among each other and in
principle comment or remark maker would
make sure that those relationships are
exactly satisfied so the difficulty with
a comment or market maker whether you
guys use an exchange version or a rocket
maker version is that it's actually
intractable to to competition
intractable to exactly make sure that
the marginal probabilities are always
kisses to each other or or coherent is
the word we use on the exchange versus
market maker side the reason we're using
a market maker is because well because
we're using common we want to do
combinatorial securities if you as soon
as you use comfortable securities and
exchange is a non-starter because
remember exchange matches buyers and
sellers but now if you allow for very
very unique or weird bets for example
Kansas Ohio and Kentucky if you have
some knowledge about that event you want
to trade on there might not be some some
seller on the other side willing to
trade with you make a bet with you on
that specific trade so therefore you
want to use a market maker to to to
solve this problem of coding prices for
any possible trade and in the this way
facilitate to trade the trades so that
there's actual information aggregation
happens the risk there though there
there's a cost of that in exchange
there's no risk in terms of losing money
as soon as you go to market maker
setting in a sense you're subsidizing
the information aggregation and there's
possible possibility for revenue loss
and a lot of the literature on the
computer science literature on comet
Oriole market makers at least tries to
prove theorems about how at least try to
bound that loss show that it can't be
worse case unbounded so that's the
landscape here so as I said what we're
doing is a comfortable market maker but
where we do something in between
independent and combinatorial markets so
because this is intractable here what
we're going to have is something between
so we have some decent lost bounds but
we're going to try to correct prices if
they're inconsistent with each other to
some extent but not to the fullest
extent because because that's
intractable so we're going to have these
constrain generation approach that that
does some information propagation so the
fundamental challenge in control market
making is this problem like i said of
making ensuring that prices are coherent
and from a trading standpoint what what
it means when prices are coherent is
that there are arbitrage opportunities
an arbitrage opportunity is by
definition an opportunity to make a
guaranteed profit so whatever the
outcome might be a armitage opportunity
is a tray that gives you a guaranteed
profit and that happens exactly when the
prices are not valid marshal
probabilities I'll give you an example
in a second so the industry standard is
an independent markets and when I say
industry standard I'm thinking about
prediction markets like bet fared in
trade these are prediction markets out
there out of Ireland I think that offer
bets on political events and they offer
bets on related political events but
they just treat them as independent
markets and the disadvantage there is
that well when a trader takes imagine
arbitrage opportunities they're really
not incorporating any new information
the system that you as a centralized
market maker couldn't figure out already
if you had the proper computing power so
our approach is going to be two separate
pricing and this arbitrage removal so it
turns out so the two basic operations in
a prediction market you can think of our
first of all a price query a trader will
come in and just ask for a price quote
for a certain event and then the next
kind of operation is actual trade and
from what we saw in our run the price
probably price queries versus trade
operations the ratio is about ten to one
so people are asking for price is much
more than they actually trade so what
that means is that we wanted pricing to
be very fast and this question of then
correcting any kind of price
inconsistencies can be done in parallel
after the trade happens and we can we
can correct them gradually so we have
fast pricing and in parallel we have
this constraint generation approach to
remove these arbitrage opportunity
opportunities and so the idea is we're
going to divide up all these events into
very small groups where we can do
consistent pricing fully carbonyl
pricing because the groups are so tiny
maybe if size four so we're going to do
consistent pricing within these small
groups and then there's a question of
how do you then propagate information
between groups to a correct prices so
let me go into the details of that so to
explain our pricing
approach let me give you some background
into the standard a carbon trouble
market maker out there it's intractable
but the stand but this is the starting
point for our design so the starting
point is this so-called long logarithmic
Marcus scoring rule by Robin Hanson what
we have here are our securities and
remember security is just a payoff
function depending on the outcome the
state of the world it's going to be a 0
1 depending on whether the associated
proposition is true in the in the
realized state of the world and what we
the the information that the market has
at any point in time is its market state
which is simply the amount of
outstanding shares of each of those
securities that had that has been sold
that have been sold and the market
makers problem in a sense is to
implicitly because you can't write this
this whole probably distribution down
but to implicitly infer a probably the
probability distribution over States of
the world given the current market state
the number of outstanding shares so this
question of how do you want a map from
your current market state to probably
distribution over the world and the
right so the and the prices will be the
exactly this probably distribution so
the way the LMS are logarithmic market
scoring rule maps from states to beliefs
is as follows a lot of you will have
seen this style of probably distribution
before basically given the market state
theta the probability of event is just
proportional to e to the basically a
weighted combination of all the
securities that are true for that state
of the world right so the higher the
theta is associated with 5j being one
the higher the probability of that
corresponding state of the world but so
the point is this is just a mapping from
you know theta 2 probably distribution
so we want it to be proportional to that
so we need to normalize and this is the
normalization and that's where the
intractability comes in so this this
this normalization term involves an
exponential number of possible outcomes
possible states of the world
so you certainly can't evaluate it
explicitly and even now even
algorithmically this is a this is short
be hard to evaluate so Alamos are ya
many gurus did you just say what does it
mean for a security to be true uh yeah
so security yeah formerly security is a
you can think of it as a proposition to
become that is either true or false that
that I turns out to be true or false so
the example here would be security is
defined by the proposition Mitt Romney
the Republican will win the state of
Florida that will become true true or
false at some point and so true means it
will have to pay off of one and zero
means and false Mesa has a payoff of
zero so security formula is a payoff
function over States of the world so our
approach is like I said let's break up
all the interesting outcomes into small
groups of related securities very small
group so that where we can do this kind
of lms our formula explicitly because
they're so they're so small so for
example you could have some security
like Romney willing Florida and that
Groot in the group here with good cysts
of Romney winning Florida or Romney not
winning Florida so this or Barack Obama
in Florida so those are two
complementation complementary securities
if those were your only to securities it
would be very easy to keep the prices
consistent right so the price of the
first one would be this is the just the
LMS our formula you know and this is the
normalization term it involves Walser's
to securities very very fast and now so
fine so we can we can group related
securities like this like a singleton
and its complement together in
individual groups and price them
consistently within those groups and the
problem is now how do we correct prices
across groups so we want to relate these
the securities in these different groups
together and for that we wanted to
detect violations of the laws of
probability or ie arbitrage
opportunities and and correct them so
let me give you let me explain this a
little bit
a little bit more details so I've been
saying that you to correct prices you
want to eliminate arbitrage
opportunities here's an example of
arbitrage opportunity very very naive
one let's say the price ie the
probability of a and B are related to
the product to the price I either
probability of A or B in this way so
this is a this is a violation of the
Union bound okay if you looked at took
prices probabilities so this this can't
the dish this tradition hold and and and
this kind of inequality actually gives
you a an arbitrage opportunity so it'll
tell you if you buy one share of a one
share of B and sell one share of a union
B because this valleys long laws of
probability then in any outcome of the
world with that trade you will have made
a positive profit so this is the exactly
the same thing incoherent prices yield
arbitrage opportunity so we want to
eliminate those arbitrage opportunities
so let me give you more detail even more
of an example here so suppose we have
these two securities here a related to
these propositions or events a and B and
C and a not b and c and let's think
about the possible prices we can assign
to those two securities so independent
markets would just give you this would
be the set of possible prices that
independent markets would assign because
they're independent so they just the
dell assign any price between zero and
one to those two events okay now let's
say the prices of the singleton
securities are or like this the
probability so C point 98.8 be point six
so obviously obviously these are related
so in particular the probability of a
not be NC has to be no no greater than
the smallest of these okay so that'll
give you these bounds actually so you
have let me see better here so the small
list of
um oh sorry yes yes okay let's look at
we're looking at the y axis here so the
price of a B and C can be no greater
than any of these individual ones okay
so we have this go straight already that
it can't be more than point 6 because
the smallest here is point 6 you can do
the same on the x axis and it can't be
more than point for because the the
smallest is the complement which is
point for okay sorry that restricts the
set of prices that and this is
restriction that independent markets
don't take into account there they're
more there are more relationships so the
sum of these two is the probability of a
and C and therefore it can't exceed
point 8 which is the smallest of a and C
so you get this extra constraint so in
this particular example this is this
that's this actually this polytope here
is is the actual realizable polytope of
probabilities that a that these two
events could have given these
probabilities here now in practice this
Paula taupe is extremely complicated so
you can't find all these inequalities
defining it so in practice will have
something more like this right where we
will have found some of the constraints
but not all of them okay so that's what
I mean one way I say proximately
coherent we're much better than
independent markets but not necessarily
fully coherent because it's intractable
to be fully coherent so what are this is
how so how does our algorithm actually
work now so now suppose that someone
bets against the outcome be happening so
buys B complement what that means the
price of B is going to go down according
to our formula and you'll get this
situation here so now our current prices
will now allow a lie outside our
realizable polytope so what we have to
do then is we have to detect that they
lie outside and and all we do is
basically just project our prices on to
the politie this is question of what
metric are used to project the metric is
based
a basically a relative entropy metric
the intuition is that you want to the
original prices have information and you
want to keep as much as that information
as you can while correcting them so that
they so that they're they're coherent ok
so you so that's exactly projection
operation just find the prices that were
closest to your original incoherent
prices and for that we have they
basically this is a convex optimization
problem so we have a a convex
optimization algorithm that's actually
running the in parallel always
projecting these these prices after
trades happen and prices change so for
the elections so let me talk about I've
been a bit of abstract let me talk about
the actual groups we use through the
elections and and the actual constraints
we were using so for the elections these
are the groups we created so for each of
the 50 states we had for example Obama
to in Florida or Romney to in Florida so
very small could we do consistent
pricing with in here we create all
groups of two so this would be for
example the outcomes of Florida Ohio so
there are four possible outcomes and
that we just didn't rate all of them and
when we start to go to higher order
conjunctions we can't do this in your
mediation trick anymore so all we do is
we create groups of two again we have so
we'll have a and B and C and it's
complimentary disjunction okay so we're
doing coherent prices within these
groups and the question is how do we
generate constraints the the inequality
is defining this realizable realizable
palto to correct the relationships
between the prices across these groups
so first of all these are the
constraints we use very very very simple
because these are first we have
constraints the relate the singletons to
the pairs and these are just
marginalization constraints if you sum
up all the the pair's it should it
should equal the Marshall probability of
singleton that's fine and now we have
the relationship between singles in
pairs we won't we
we also introduced constraints that
relate these higher-order conjunctions
to the singletons and the pairs so for
example what you can do here is if you
look at the probability of a disjunction
there's the so-called bonferroni
inequalities it turns out you can lower
bound it by the probability of all the
singletons and you subtract away also
the probability public pairs so this is
a quality you get out of probability
theory and actually you can get a whole
set of these because you don't have to
take all of the literals you can just
take a subset of them and introduce them
in your in your lower bound as well and
then the question is what's upset
because it's not a monotone function of
the subset what subset maximizes this
lower bound here so that's a that's a
non monotone sub-module optimization
problem so it's actually intractable as
well but there are some approximation
algorithms out there so that's what we
run and the point is you don't have to
find the optimal right hand side to
still be able to find a violated
inequality with respect to your prices
so we run these Proclamation algorithms
we try to find these vile inequalities
and we generate them if if we find them
this is an up this so this is a lower
bound lower bounding the disjunction in
terms of Singleton's and pears and we
there's also they're also upper bounds
so here again we have the probability of
all the singletons and if you ignore
this term now this would just be your
usual Union bound and so this is a
refinement of the Union bound it turns
out that if you take any spanning tree
among the literals and and subtract that
away that also gives you a refinement
the of the Union bound right there so
here the problem is we want to minimize
this right hand side when we're
generating these inequalities and here
is a so that problem is one of finding a
maximum spanning tree so at least for
the upper bounds they're fast algorithms
to just find the optimal upper bound and
generate those inequalities so that's
basically the set the idea consistent
pricing within within groups and then
these constraints relate the prices
across groups so let me describe to you
the
the particular market we actually rent
so we built this on a website and it was
launched the September 16 on sic tember
September 16 2012 the elections were on
November I thick 8 2012 so about three
months ahead of time no two months ahead
of time here's what it looked like so we
had a map of the United States and each
state was shaded so here we had the
presidential election first of all each
each state was shaded with the color
proportionate to how likely the either
the Republican or the Democrat was was
winning that state at that time
according to the current market prices
if we were to close to 50 50 we shaded
in gray so for those very close to 50 50
and so what you could do then is a click
this make a prediction button and then
you had a menu of all kinds of comments
or of predictions you could make in the
elections so here's so you had things
like of course you could bet on who the
president would be who'd win and the
president by state and then you would
get down to control ones you could do
president two pairs of who'd win a
couple of states just one of them 22
states being the same either going to
the public or Democrat then you go to
groups groups of states states in a
region like the northwest southeast and
we even had some some some quirky ones
just for fun like it would there be with
the outcome in the outcome would there
be a path of red going from Canada to
Mexico or from the from or path a blue
going from the Pacific to the Atlantic
and actually those those involve
different constraints it it's fun it's
fun to think about how to generate valid
constraints for these kinds of things
you're talking about shortest path
problems and therefore cuts and things
like that this is what it looked like to
make a comment or prediction on one of
the candidates winning two states at the
same time so you would have you know you
choose first of all the party
two states then it would tell you well
give you some English version of that
that proposition give you the current
odds and given an investment of points
how much you'd return if that actually
turned out true so I said points so this
was a play money market this didn't
involve real money it's not possible to
do real money at least this certainly
basically anywhere but certainly not the
u.s. given the the regulations there on
gambling but so this was a play money
market and here's another example where
you could choose a region of the swing
states and then put arrangement that the
Republican woman maybe between six and
eight of them at any given point in time
you could look at your portfolio these
were all the trades these are all the
securities you currently hold the one
shaded in red are those that make a loss
if you sell them right away otherwise
you could also because you can sell you
don't have to wait till the end to see
how your bets pan out you can sell them
halfway through it so these are shaded
red or green depending on whether you
make a profit and you can liquid-liquid
ate the whole thing any of these at any
time so we attracted so we advertise
these this on on blogs and any possible
put a place we could we could find to
advertise we attracted 437 active users
meaning users the place at least one
trade and they place over 3000 trade
trades and there were 414 distinct
bundles traded what I mean by that is
unique kinds of trades right i had this
menu of different kinds of trades and
within that so 400 500 14 different
types of trades were placed and i
haven't put this on the slide but of
those trades half of those were unique
meaning that they were only placed once
only a single user traded on that
specific event that's that's what you
would expect out of a commercial market
is all these events where so only one
person has some information about what
they're trading on so just to stress the
fact that this is you know there's no
way you can do any kind of explicit
enumeration there's a huge number our
menu doesn't allow for all possible
combinations but it allows for a
gigantic number of combinations
and and overall we had some over 17,000
securities created so so when you place
a bet you don't just create that
security but group of securities so a
lot of securities get generated that's
basically number of variables in our
optimization and they're over almost
21,000 constraints generated in the
optimization problem so let's look at
what actually happens so the first
question we asked was whether users were
actually maximizing expected profit
because this is a play money market the
problem is there's question of were they
even trading in a rational way ie profit
maximizing way which is what you need if
you want to aggregate information so
here's the plot of what you get the
return is basically the the profit over
the amount invested and this this was
good news so you have a spike at minus 1
where people some people who lost
everything and that those are just the
users who place maybe one or two trades
and they decided to hold them until the
end and they didn't pan out so they just
all paid off zero but for the average
the mean and the median of users on this
distribution is skewed to the positive
side meaning that on average user made a
profit and when a user makes a profit
that means that they incorporated
relevant information to the market okay
their bet panned out therefore they move
the prices in the right direction and
one thing that's nice to hear is one
thing we were worried about is that we
would see spikes of both ends because
there's also this this this plausible
strategy since this is just fake money
and all you care about maybe is to be at
the top of leaderboard there there could
have been very very risky play where
people are just trying to get to the top
of leaderboard but not really trying to
maximize their their profit because they
don't care about being say tenth did the
market absorb information from users so
what I plotted here is from the they do
started until the election day for each
of those days these dots represent the
average the main profit of all the
securities that were traded that
a so if you bought the screen that day
and you held it and you made a profit
later in time that's the profit of that
security that you've trade of that day
and basically what this shows is so we
have some local regression here what it
shows is that this is what you'd expect
starts off with good profit
opportunities and as the market
incorporates more information the
property opportunities go down until
basically you get to 0 and at that point
there are no more profitable trades to
be made so it flattens out the users
place combinatorial bets that's a big
question because it would have been a
shame to allow for all these commercial
debts without users actually placing
them so the most common bets were as
you'd expect the singleton ones
especially on the presidential outcomes
we also ran we also allowed so at the
same time as the presidential election
they were also these Senate and and and
congressional House races so we also had
some securities on those and so people
the next that was the next highest
category and then the convert oriole
presidential category comes up so if you
see this is unique users placing there's
there's a ratio of basically three two
one here so pretty good ratio in terms
of unique users placing presidential
versus singleton versus comic draw bets
then there other for once further down
the most popular variables as you'd
expect what's nice about looking at most
popular variables but I spend is that
this shows you that the users were
really focusing on the the uncertain
outcomes that's so so feted so first of
all the federal election outcome is most
interesting and Florida Ohio Virginia
Colorado where exactly this way in swing
states okay at in that wardrobe and
certainty really and for example here
one of the top votes was the
Massachusetts Senate so it came in at
what ninth and that was by far the
closest Senate race I when I say closest
one way one actually good metric to
measure that by is the actual amount of
that
of money spent by the election campaigns
on those states so that's a very good
definition of a swing state if you look
at the control variables the most
popular ones are all happen to to
include the the swing states and you
have some very interesting things here
like a combination of who will win the
federal election and who in the swing
state of Ohio that's what I'm saying you
start to get these joint probabilities
out then you can start do conditionals
on how important is Ohio to the
ultimately to the election okay so let
me go into the information aggregation
performance now so there's some good
news and some bad news so I'll start
with the bad news so what I've drawn
here is so these are days before the
election and on the y-axis that you
could think of this as the accuracy of
the market so forth so precisely what we
did was we did a log score so for each
outcome that happened very free security
we looked at the actual outcome and we
looked at the probability that our
market ascribed to that outcome and then
we took a log score of that so if our
our market assigned seventy-five percent
probability to it the this and it
happened that the log score is log of
point 75 okay so it's negative but
higher is better and then we take an
average over all the securities that
were that were actually bet on in the
market because those are the events of
interest so higher is better and why is
Q this is why skew over time so it gets
worse at the end of it and we our
benchmark is something called predict
wise it's a very good benchmark it's
basically it's the statistical model
built on top of polls the prices of
other prediction markets not not why
skew but things like in trade in bed
fair and so it's it's a good benchmark
it's a hard benchmark to beat and as you
see it's much more responsive here so
there are two things here on first of
all sure why skew is doing well for
quite a while but predict wise ways
towards the end and another thing that's
really concerning is that we don't see a
lot of responsiveness here in the
and so let's break this down a bit okay
so if we break these down by Singleton's
and pears so if you look at the
singletons here basically we're not
doing well and especially at the end
sure we were better than then predict
wise for a long time but that's because
that's just because it's much more
volatile but if we look just that the
pears this is much better news so here
we look we're taking the lock score over
just the securities that had
combinations of two states and here
pretty much across we're much closer to
the optimal of the benchmark and also
what I have drawn here is to actual
benchmarks because one point to make
here is that these benchmarks like poles
or other prediction markets that use
independent markets they don't give you
probabilities of pairs so there's still
a problem for you to to somehow infer
these these pairwise prior probabilities
from these singleton probabilities and
there's different ways to do that you
know the extremes are you could assume
you know perfect independence or perfect
correlation and that's why I have to
drawn here these basically one of them
represents independence and the other
one is some amount of correlation but it
doesn't really make a difference here so
yes so that so one message is okay on
events like combinations which our
market was designed to do we are at
least getting better to the optimal of
the benchmark but there's this problem
of the prices not being responsive so
what we realized really was that and we
actually changed this throughout the
course of the prediction market was that
there is a so-called liquidity parameter
in the market which the single number
which which which controls just how how
much how responsive prices are 22 to
trade so how much you as a traitor can
move the prices with a with a certain
amount of money and we basically said
the way we obviously set that liquidy
parameter too high which we
we reduced it throughout a half way
through so what we did now instead is
what we did some kind of counterfactual
simulations we replayed all the trades
changing this liquidity parameter to at
least get a sense of how good could or
could our market have done with some
better liquidity settings so what I've
drawn here is the presidential elections
what we have here are the initial prices
the this is how the actual market
finally performed and here on the x-axis
I'm varying this liquidity parameter
here and we have the independent markets
we it applies also to independent
markets we have these independent
markets and we have our market maker
here so basically what we're getting out
of this is that not only were we not at
the best liquid well actually right so
had we set the liquidity parameter
optimally it would have been hard to
actually beat our initial prices for the
presidential elections so what that says
is that our prior for the presidential
elections was extremely good so this so
it's really not such a hard prediction
problem when you look at the
presidential elections okay even an e
that said though we did we do easily be
independent markets now the better news
that I said is if you look here at
outcomes that are much more uncertain so
Senate House governor the polling is
much lower its much it's much less clear
what will happen in those races so what
we have here is our initial prices there
were not so good our final market prices
actually improved on the initial prices
there are liquidy settings could have
been even better and and the best
liquidy settings for a comptroller
market also i'll perform the best the
query settings we could have place for
independent markets and another point to
get out of these plots is that if you
look at the optimal liquidy setting here
it's something approaching a thousand
whereas here something more along more
around you know 50 to 100 okay and we
were using us in one single liquidy set
throughout but obviously what this is
telling us is that for the markets where
there's a lot of this in hindsight this
makes sense yeah question sorry is when
we say it is easy elasticity of the
price or well we can to give it that way
yes is just yes it's the the
responsiveness how much you as an agent
coentrao k can can affect the market
price so so this is it hi les to see
though translate tile is to sit in terms
of yeah exactly so we need we saw a
future implementations what we need to
do is set the liquidity parameter I
ideally adaptively but at least be
smarter about how to set the liquidity
parameter in different markets in
accordance to how uncertain the
probabilities are in those markets
because for the presidential elections
honestly for most of the state's you
know who's going to win here's an
example of the interesting kind of
estimates you do get out of the market
like I said since you have joint
probabilities you get conditional
probabilities I just want to give you a
sampling of those so for example if you
this was the day after the first debate
so they have said they have several
presidential debates before the
elections and the faster the first
debate that consensus was that well I
had lost whatever that man he didn't
have her such great performance so
people were really wondering how that
affected his chances so if you looked at
the the conditional probabilities of
Obama and Romney winning the election
conditional on them winning one of these
swing states which is a probably you can
get out of the market these these were
the numbers the day after Obama if he
had won any of these was basically at
over ninety percent whereas Romney if
you had want any of these the highest
possible that probably one Romney given
that he wins Ohio is only forty-one
percent so this really paints a clear
picture of just how much of an uphill
battle Romney still had interested to
win this election compared to Obama here
if he had won one of these very very
important swing states he still had less
than a fifty percent chance of winning
the election
whereas Obama basically had it locked
and the probability of winning all three
states is something you also gather the
market Obama had it was a thirty-six
percent and Romney held only one chance
in ten of getting those okay let me wrap
up with just two two more examples of
the nice kinds of things you can get out
of market like this so what we also did
was as part of the market we you were
also able to bet on the number not just
who would win each state but actually
the number of electoral college votes
that each candidate would get and that
means we would have the we had these
histograms at any given point in time of
for the Democrat Republican what what
the electoral vote outcome would be so
these was the electrolytic on for Obama
in our relations a shin this was the
blue it's bimodal it did this this mode
corresponds to the case where Romney
wins and here corresponds to the case
where Obama wins because it's a majority
and when our market did was ship this
distribution so it had won a single mode
which was actually pretty close to the
actual outcome and the way that works is
it's not just because people are betting
on specific actual numbers but the
market is taking into account okay the
Ohio now has a high probability things
like this and because of the
interrelationships that influences the
shape of this histogram we've got the
same kind of thing for job numbers so
we're putting in job number so we could
ask questions like what is the chance
what are the chances of obama winning
given favorable job job job market
statistics and same same situation we
started with with a pretty plain
gaussian and what the market does is it
allows you to move that distribution and
the mode turned out it also be pretty
ghastly close to the outcome so i'll
wrap up now so the summary basically
that we get out of this is that i think
this shows that commercial markets can
succeed even if there's play money and a
moderate number of users and we can
handle really huge outcome spaces and
the conclusions were that they provide
meaningful for forecasts when the
categories are actually uncertain so we
in the presidential forecast we weren't
really beating a standard benchmarks
like polls but when
couple of things that they can't assess
like a combinations or these histograms
or also these more certain events like
the senator govorit Oriole races we were
getting improves in performance okay
wrap up there thank you thanks so much
at Sebastian very interesting talk and
we have time for some questions and he
dad what were the underlying prices that
you will always keep in track Oh was it
all of the securities that were
available in that menu or is it only if
someone actually comes along and chooses
and ass gets a price for it and trades
it we're keeping track of the market
state so the number of outstanding
shares for each security that have been
created and now that doesn't that
includes more than just the truth of the
Securities they've been trading on
they've been traded on because we also
each time someone comes and bets on some
new security we had never seen we would
create the entire group you know I
talked about these groups so that would
create maybe 24 you know extra
securities instead of just one and we
keep the outstanding shares for all of
those and that's the markets that's the
market state and from the market state
you with within groups you have this
pricing formula so you can price and and
you and you adjust the prices across
groups so when someone comes along and
just makes a trade in say I think the
singleton thing and which prices are
dated but anything that's in one of the
group with the affected groups yes so
first of all you do you you since the
amount of shares that security increases
within that group obviously the price
increases your just according to the
formula and then we run the constraint
Jenner with the largest crochet the
information propagation step we first
to see we're always generating
constraints but then we then we project
the price if needed and that might
change the price again that much so so
it's actually possible for the for you
to you know by security there you see
the price go up but then the constraint
Genevieve sorry the projection part will
will decrease it back a little bit do
you know how much money's being traded
on those addiction on betfair and real
money places ah no sorry I don't want to
quote any crazy numbers and not really
enough with that but uh if you're
interested so my colleague David Ross
I'll dis actually trades on those I
think so you can ask him or used to in
Trey doesn't exist anymore first towards
the end do you know if people updated
their predictions towards the end maybe
there was a lot of things changing and
they didn't react to this oh yeah why
was it that they got worse at the end is
at the end it was just I didn't look
into it exactly there's just a lot more
activity in speculation at the end
there's a lot more interest in the
trades and it but at that point still
the information there's not there's no
more information to be had or integrate
corporated but you get a lot more
trading activity just for just for
playing the game people get more
interested in what's going to happen the
last few days so it's my hypothesis just
one question how many people have
actually had participated played the
game it's 437 was them and was there a
sort of prize of it which I some not
well no I know the prices just was a
bragging rights for deck at the top we
saw what we did do was we we did have a
there was a league aspect to it in the
sense that you could form you know just
a little sub league with those on sub
leaderboard with maybe your friends so
that you could actually play and your
friends and you know win-win little sub
game there yeah but that's that's really
it no no further incentives then play
money and bragging rights okay thanks
very much</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>