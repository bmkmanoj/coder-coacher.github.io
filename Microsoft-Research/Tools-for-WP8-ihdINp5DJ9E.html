<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Tools for WP8 | Coder Coacher - Coaching Coders</title><meta content="Tools for WP8 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Microsoft-Research/">Microsoft Research</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Tools for WP8</b></h2><h5 class="post__date">2016-08-08</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/ihdINp5DJ9E" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">each year microsoft research helps
hundreds of influential speakers from
around the world including leading
scientists renowned experts in
technology book authors and leading
academics and makes videos of these
lectures freely available
hi everyone my name is Daniel Stafford
I'm a PM on the Windows Phone developer
platform team and today I'm going to
talk about the tools for windows phone 8
and what's new so what is new we now
have tools and templates for native and
hybrid applications as part of windows
phone e we did a big push for native so
now there's actually tools and
templating to go go along with that
there's also debugging improvements and
this is mostly around native again
improved profiling which includes a new
app monitor and emulator improvements
including hyper-v and also a simulation
dashboard so we we've added a bunch of
different project templates and to show
this I'm actually going to go into
visual studio so if we go to file maybe
file new project under visual C sharp
here we have the Windows Phone node and
now there's a couple new templates first
of all we have Windows Phones amal and
direct3d application so this application
actually uses a drawing surface as its
starting point which is drawing surfaces
just like any others animal control you
can use it behind in front of or side by
side with another example control and it
basically just renders d 3d graphics the
d3 graphics that are actually rendered
will be in a separate runtime component
also in the visual c sharp note here we
have the html5 application but don't get
too excited this is not wwa or anything
this is actually putting a web browser
control on a page and then rendering
HTML that's part of your application
under other languages visual c++ here
there's now a new node for windows phone
which includes a direct3d with zamel
application so we saw the other one this
one is actually using a drawing surface
background grid which the difference is
that it has to be at the root of the
saml tree and it covers the entire
surface all the time
so the D 3d component is still in a
separate runtime component but the frame
rate for a direct3d with sam'l
application is actually a little bit
better than the sam'l with direct3d
application also another difference is
the fact that the same old with d 3d
application is to use zamel app zamel
controls along with your project this
actually is a very thin client on top of
a essentially native game so this is
more if you want to take advantage of
some things that are only in the managed
to act like live tiles background
transfer service or launchers and
choosers and such there's also a native
only choice so that choice is basically
entirely d3d so if you want to add any
controls or anything yeah you have to do
everything yourself or use third-party
libraries and then the other stuff is
just runtime components dll's static
libraries etc so also there's the
manifest designer so the manifest
designer is basically a more friendly
you I to the WM app manifest XML file so
I'll show you that so if we use this
project that i've already created which
is just the basic zamel with d 3d
application under the properties here
we've got the WM app manifest XML and so
this is the new designer for that it
allows you to do a lot of stuff like the
display name the supported resolutions
any app icons etc etc it also allows you
to set the capabilities if I can so the
capabilities are basically anything
software related so access to the
location-based services or microphone
camera or sorry not camera well yeah
camera as well maps etc etc and also as
part of this you can click on it and see
the description
a lot of people tend to set all of these
because they're having an issue with
access and it's it personally I would
recommend that you only do the ones that
you actually really need because when
someone downloads it from the App Store
it's going to show all these
capabilities as part of your thing so
there's also the requirements tab so
this is basically the hardware
requirements that you have to meet to
actually be able to download the
application so it's includes things like
NFC or rear camera or gyroscope etc and
then lastly there's packaging packaging
allows you to set the version number for
your application and it allows you to
say what languages you support and what
the default language is in etc so
there's also a simulation dashboard so
this allows you to actually basically
simulate real-world scenarios so for
example a lot of people have issues
where you know they're going in and out
of cell range or they're switching to
Wi-Fi or something like that and I've I
personally even used a lot of
applications that tend to not handle the
scenarios very well so this is basically
a tool that you can use to try and
simulate those situations moving
different data networks or something
like that it also allows you to trigger
reminders so the reminders you know are
just the little slide that comes down
and it also allows you to simulate a
lock screen and that can be found under
tools and simulation dashboard here
so next is the debugging so as part of
this you know we've enabled native so we
wanted to also enable debugging native
obviously so in the property pages of
your application you can set whether you
want the UI task to be managed or native
and you can also debug a background
agent and you can set these
independently so you can debug the
manage part of your UI task in the
native part of your background agent if
you want you can also debug both a
background agent and a UI task in the
same debugging session so you don't
actually have to switch back and forth
however there is no mixed mode debugging
so you can't like f11 into your native
code you have to choose one or the other
also the debugger stays attached after
you've exited the application so if you
start the application press back and
then the debugger will still be attached
so that you can try to launch your
application from a live tile or from a
push notification and then it'll
continue the debugging session also new
with Windows Phone 8 is the fact that we
compile in the cloud now so visual
studio compiles into CIL which is common
interface language this used to be known
as msil it's pretty much just a name
change apps when they're submitted to
the store they get converted into em di
l which is machine dependent
intermediate language and then once the
application is downloaded by an end user
the MDI L actually generates a native
image depending on the device so this is
good for users because of the fact that
it runs a lot faster and it's good for
us because we don't actually have to
generate you know native images for
every single possible phone that comes
out but also it has the caveat of not
being able to debug as easily however
you can debug a native image it's just
not supported in the emulator so you
have to use a real device for this if
you run without debugging on
phone it actually will already run the
optimized native image if you want to
debug the native image you have to go to
tools here I'll actually just show you
in visual studio go to tools options and
then in options there's debugging here
and debugging has a couple options one
of which is enable just my code and also
suppress suppress jit optimization on
module load if you uncheck both of those
then it will actually load the native
image onto your phone so you can debug
while using the native image so there's
a bunch of emulator changes the biggest
of them being hyper v so hyper v is the
new platform that the emulator is built
on what this means to you is that you
have to actually have a computer that's
slat enabled so there's a tool called
core info exe under CC windows system32
I think it will basically tell you the
what your computer allows or what your
computer's capabilities are and so it'll
tell you if your computer slot enabled
or not there's also different ways to
find out like for example you can go
into the bios and usually there'll be a
little thing in your bios that tells you
whether you can do virtualization or not
so that has to be enabled for hyper-v to
actually work and I'll also as part of
the install for the SDK tools it'll tell
you whether hyper-v is turned on and if
you're you if your user was added
successfully to the hyper-v
administrators group which it has to be
part of that to be able to set up next
part which is networking so the
networking stack in the emulator is
actually a bit different than it used to
be to understand the capabilities of the
emulators new networking stack you can
think of it kind of like a windows phone
basically attaching to the same network
so if there's a network resource that
you're trying to actually hit if your
windows phone attached to the same
network can hit that network resource
then the emulator will be able to as
well
the emulator does require that you have
dhcp on your network because it will
actually attach itself as a separate
device and get its own IP address it's
also not possible to set the dns and
gateway settings on the emulator
manually unfortunately it will copy the
proxy settings from the host machine
though so if you have a proxy server
setup on your network it'll
automatically configure itself it should
be fine it now supports multiple
resolutions so there's wvga wxga and
720p so all of the resolutions that
Windows 8 Windows Phone 8 ships in you
can now test in the emulator and I
recommend that you actually do test in
all of the resolutions to make sure that
any of the applications that you're
developing you know all users can
actually see everything well and have a
good experience the camera now supports
photo capture device and audio capture
video video capture device these are two
classes that are used to enable some
external situations if you want to you
know take control of the camera settings
yourself like iso contrast brightness
etc so it allows you to set a lot of
that stuff so you can have a more rich
camera experience and the camera in the
emulator does support that it doesn't
use your webcam or anything still it
still has the lovely little blinking box
around the border but and lastly there's
graphics changes so we've actually
switched to software rendering as
opposed to the hardware enabled
rendering that the old emulators used to
do what this means is that it look a
little bit slower so anything that you
have this animation intensive or if
you're running a game or something like
that you'll definitely want to run it on
a device as well just to make sure that
it's it's actually running smoothly so
app monitoring allows you to collect a
lot of key metrics based on your the
quality of your application things like
events framerate CPU app responsiveness
battery consumption storyboards image
loads and garbage collection events um a
lot of this data is then compiled and
base
it'll analyze the data and give you an
actionable list of things to do based on
the data so for example you can see over
here that we have startup time resume
time and responsiveness and so if your
startup time is between 0 and 55 seconds
it'll continue to be green if it has
anything past that then it'll warn you
that your startup time is a little bit
too long so you should probably you know
take it easy on your textures or
something resume time has to be within 0
to 2 seconds for it to be considered
green and that'll actually only show up
if you resume your program so if you
press the Windows key and then back or
something like that responsiveness is
based on you i stuttering and latency
and then it also gives you a lot of
other data like the the data uploaded
the data downloaded the battery charge
remaining memory used an average memory
used so now I'm going to show you a demo
of the app monitoring stuff so here
we've got an application the pretty
simple application it's basically just
got a couple buttons and the canvas if
the designer loads there we go and
basically when you click on the button
the the code here
will actually me sorry i have to make it
a little bigger
there we go so the code here will
basically create a bunch of new bubbles
set them at a random point on the canvas
and then add some animations the
animations here I've specifically set as
cpu-bound animations so they're
dependent animations the animating the
width and the height that random
intervals in a random time span the
reason I did this is to tax the system
as much as possible so you can actually
see what's going on so we can start an
app monitoring by pressing alt f1 or you
can also go to debug here and then
there's start Windows Phone application
analysis so basically what you need to
do is just start the session which will
start up the emulator hello nope
emulators on the other screen so here
we've got our application so if I
basically do some bubbles more bubbles
eventually the UI starts to stutter so
in a normal situation this could be
something like you know listbox blinking
or if you have a lot of animations or
something going on it could stutter so
then you can end the session and then
basically this will copy the log file
parse it and then analyze it this can
take a long time depending on how long
you've actually done your app session in
this instance it would probably take
about 30 seconds so I actually already
have an appt monitor log here that I ran
a little bit earlier so you can see here
that are our startup time is fine but
our responsiveness is poor so we have
two alerts up here so we can see that
the First Alert is very low framerate
from 21 to 70 in 221 570 and then we
also have high battery consumption so
you can see here that like our frame
rate is kind of halting a little bit and
our CPU usage is incredibly high so if
we actually select a time span which
will give us more information about that
specific time range you can see here
that like we have low frame rate because
of the fact that we have cpu-bound
animation
so because we have a lot of dependent
animations on the screen it's taking a
long time to actually do these things so
it's causing the frame rate to drop
significantly another very interesting
part about this is that we can see this
frames of that specific time frame and
we can see based on certain things like
CPU usage so CPU usage is a very useful
one in this instance because we're
peaking a lot so you can see here that
this specific frame is at twenty-five
percent CPU usage which is really high
so we can see certain things about that
frame like we can see the entire visual
tree for that frame actually so this
will tell us what what is going on in
that frame so you can see here that like
we have all of these controls and all
does and it also tell you what's being
drawn to the screen and what's what's
dirty and what needs to be remeasured so
you can see here that everything
basically needs to be remeasured because
we're the fact that we're using and
dependent animation for width and height
which are both layout based which means
that they run on the UI thread so also
as part of this you can see things like
the battery consumption so our battery
consumption got pretty high when the
animation started and then it tailed off
at the very end so this is useful for
things like you know if if your app is
really using a lot of batteries because
it's loading a lot of textures or
something like that you may want to
check it out because a lot of times
users don't like that kind of stuff
another thing it'll tell you is memory
usage so you can see here that the
memory use is steadily spiked which is
what we expected and then it all has to
tell you things like when storyboards
start so here you can see that we do
have a bunch of storyboards and their
CPU bound and it'll also tell you the
start time and the duration of this of
the storyboards it'll also tell you when
you have image loads so I loaded just
one texture for the bubbles so that's
why it just shows one and it'll also
show you all the garbage collection
events
so with that QA what you disabled with
the express q okay so the question was
how much of this is enabled on the
visual studio express skew actually all
of this is enabled I believe on an
express skew yes 13 buns throughout an
investor are there any plans to add a
unit test framework I I can't answer
that one I don't really know so if you
send me that question in an email I'll
try and follow up with that for you
yes what is the story for us what is the
storyboard a storyboard is a zamel
animation so it's basically telling
zamel framework what you want to do and
how long you want to do it so I'll show
you an example so in here we have a
storyboard declared at the top here so
it's storyboard SB here and then down
here we're basically doing a double
animation so we tell the story board
what the target is in this case it's the
element that I want to actually animate
the width and then we also set the
target property which in this case is
the width property we tell it what value
to do it from and what value to do it
too so in this case we're animating it
from 25 pixels to 100 pixels and then we
also tell at what the begin time is the
duration and if you want to auto reverse
it and repeat behavior there's some
other things that you can also do but
this is most of the stuff that you'll
actually ever use yes begin time is
basically what the time in milliseconds
to actually begin after this point so
you can basically delay animations to
start after our different animations so
say for instance i wanted to animate the
width and then height i can set thus
begins i'm for the the height animation
to be the end to be the length of the
duration of the width does that make
sense so basically then we just add
those as children of the storyboard and
then we can basically tell the story
board to begin and then it will run the
animation
a storyboard is only for animations not
necessarily it's it's also can be set to
do discrete keyframes so what that means
is that you can actually basically set
properties at specific times so you can
actually do anything with it you don't
have to animate you can actually set
specific things that's I question back
there I don't reveal I'm sorry yes yet
network usage network usage you can't
see like the individual data on this
this screen but it will tell you on the
on the summary page here it will tell
you how much data was uploaded and
downloaded
you just got some questions here short
of that is any and more coming from the
pocket communication or anything like
that so about the soccer communication
stuff so yeah I can't think the f
monitor itself will actually show you
like any spikes in the network usage but
you can see at least the the summary
stats what they do this for my axis I
get more it'll just HTTP traffic is how
just reject the phone to Hitler anything
kills now all fish so basically he's
asking if if fiddler is basically the
best route which currently yes fiddler
is still kind of the best route to
monitor network traffic for any phone
apps eight writing yes one of the screen
showed of frames frames yes is the
context of a frame an actual you know
second 60 second segment of the
screenshot or is it talking about stack
frames or what is a frame in that
contact so a frame in this context is
basically one tiny little unit of time
yes so yes so you can see up here at the
top that we have this ruler this ruler
is basically the frames so the frame 238
basically has a start time and adoration
so you can see here like all of these
have start times of very very very
miniscule amounts different I'm not
entirely sure on that one I think there
was a there was a reason but I I can't
think of it off the top of my head I'm
sorry
yeah the the profiler does run on the
same threat or it runs as part of it
basically side loading so I think it's
partially due to the fact that you know
like when we have a lot more CPU and GPU
action happening it won't run as often
because of the fact that the UI thread
is very busy so if you're running you're
gonna have short phrase whereas if
something takes longer to run its gonna
have a longer right so it is thanks so
it's not a time side I don't know too
much the details by doodle there is some
it's it's not like a static time slice
so it's not like 60 milliseconds every
time but it is it does represent a unit
of work a unit time
help boarded up okay since I have
different types of phones and the screen
sizes so he's very easy way to set the
controls width and height because it's
depend on the depend on the poor and
size so that control is a little hide or
it will empty space in literacy is very
easily to identify the phone sighs and
not elicit that we thought I to the
temple so the question is basically how
to set can control widths and Heights
based on the phone sighs so the best way
that i have found personally to develop
phone or applications that actually
target different sizes is to make it so
that your application doesn't
necessarily depend on exact pixel width
so like for example in this application
i didn't i didn't specify any wits or
heights so i actually used a grid and i
defined a couple rows in my grid so this
one is to find his auto so basically
it's just saying use up however much
space you need and then the other row is
set as star which basically just says
use the remaining space and then my
columns i did the same thing so it's
basically splitting in this screen in
half maybe sort millet feel like some
complicated a lot of uncle sunday so it
won't work if you do have a complicated
application usually you can still get
away with making at least part of your
application use the rest of the space
essentially so you might have parts of
it that you have to have specific sizes
you know because they're an image or
something like that that it has to be
the same size but best practice is to
make it so that you can have part of
your application that just basically
takes up the remaining space for this
yellow devil middle them this exactly
how will be DUI in the door
and on initial our code for something
like no you may have control them to
still enjoy it a certain BTW i order
them to a certain scale or whatever
right and yeah so basically we're saying
you know any windows they do the same
thing you say that sir do we do can do
anything more to include get one can you
do anything monitoring with knapman um
I'm not sure on that one yeah due to the
fact that it's a hyper-v instance which
technically it's another instance
basically within your computer and it's
virtualized i'm not sure if not mom will
work it's worth a shot do you know if
you're not using ipsec so nothing on
corporate domain you're able to actually
just lift the traffic off the controller
now so you won't get both your desktop
and the mobile we're right yeah where
you can just sniff 2 packet now most
almost everything can be stepped from
the network hard but you cannot stiff
things'll rest I'll that's still not
gonna have enough so you won't be able
to like be men in the middle for HTTPS
but for sniffing the traffic just taking
the network cards enough down its
hyper-v conveniences yeah so you can
actually just lot easier that so
basically you can set up like a
Wireshark instance or something like
that and set it to do the hyper-v
network adapter
any other questions
alright cool in high sec</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>