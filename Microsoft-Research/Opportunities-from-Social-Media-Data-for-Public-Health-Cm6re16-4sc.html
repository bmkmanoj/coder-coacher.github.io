<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Opportunities from Social Media Data for Public Health | Coder Coacher - Coaching Coders</title><meta content="Opportunities from Social Media Data for Public Health - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Microsoft-Research/">Microsoft Research</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Opportunities from Social Media Data for Public Health</b></h2><h5 class="post__date">2016-06-21</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Cm6re16-4sc" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">each year microsoft research helps
hundreds of influential speakers from
around the world including leading
scientists renowned experts in
technology book authors and leading
academics and makes videos of these
lectures freely available
you
so so it's an honor today to have mark
prezzi with us he'll be talking about
opportunities from social media data for
Public Health mark is is a research
professor in computer science at Johns
Hopkins University and a research
scientist at the human language
technology center of excellence he's
also working with the Center for
language and speech processing in the
Center for population health information
technology his research is in natural
language processing and machine learning
and he's done working graphical models
semi-supervised learning information
extraction large-scale learning my guess
is different than regular machine
learning and speech processing and we're
very excited about the work he's been
doing I in social media and public
health it's probably the closest
collaborator in terms of shared vision
we've had with some work we're doing in
this space at Microsoft Research here as
in some background bhaktas PhD work at
you know see Pennsylvania and has been
blasting at Johns Hopkins ever since and
we were also fortunate to have one of
his students for this last summer
Michael Paul so it's a hope to keep the
collaborations and sharing of ideas and
maybe even great minds here thank you
very much so I was last here 11 years
ago when I was an intern so thanks for
having me back hopefully I will not take
that long to come back again I was in
the base class libraries team of the.net
framework you guys know what that
framework is right okay when I got here
I had no idea and like because it was
still really new and they had to explain
like dotnet on the Internet as a
different thing and stuff anyway so that
I was in my team but we were actually
not working at all on that stuff we were
the FX team hey when is that still
around does anyone know what that is
it's a static code analysis tool it
visually you give it your code it would
run through and say like you know you
should be using string builder here
instead of in catenation and this is a
you know this is I don't even know what
else did did a bunch of things like that
pse right so so my job was to build me
that bridge when I was here I don't know
if it still exists anymore anyway so
that's what I did I'm not doing
different things as you can see so what
I'm not that I in love what I did here
is just I've done other things so I'm
talking about social media but the
definition of social media on this first
slide is way more broad than the problem
should be and I'm going to actually talk
about what i would call web data in
general so let's first by talking about
public health which is where I'm
especially focused so public health is
the prevention of DS disease prolonging
of life and promotion of health in
general and for those of you who are
seeing public health for the first time
these are the sorts of things of Public
Health works on disease surveillance
studying on people self medicate illness
vaccinations drug use and here i mean
illicit drug use or recreational drug
use tobacco use educating people about
health issues these are all areas i
actually work on within public health
but I picked them to show you kind of
the breadth of things that public health
is focused on and in public health if
you've ever taken across in it you'll
see that there's very complicated nine
or ten steps cycle that I've summarized
here in the two-step cycle just because
that's really the level we need to care
about it today um you have population
which is everyone here right and then
you have dr. which i guess is Eric maybe
no one else but also your public health
professionals neither one has an MD in
the seal there's PhDs too so you all can
be included and basically these two
groups interact in the following way
there's surveillance and surveillance
just means information about the
population going to these people
surveillance sometimes has maybe
negative implications here I really mean
it just we're looking at what
information we can get out of a
population to study the health of that
population then the doctor is kind of
think about it for a while and then they
develop interventions which are things
that they can do to promote health
reduce disease in the population and
then they survey those interventions and
repeat and that's how public health
works at a very high level so I said
before that public health is really
about improving health and quality of
life and population disease all these
things in order to this effectively
you need data right you need data on the
population and that's really a big big
charm of a challenge of Public Health is
how do we get this data so traditionally
this data comes from two sources surveys
and clinical visits so surveys are we
either go door-to-door or we call you on
the phone and we say you know have you
seen a doctor lately have you have a
primary care physician do you suffer
from asthma are you a smoker we actually
do these things these are CDC funded
studies as well as other institutions
that's one way we get information the
other is clinical visit so we go to
doctors and we say how many of your
patients are smokers how many ER
patients had this disease there are
certain illnesses that are mandatory
reporting illnesses if you show up with
certain very rare rare illnesses at a
hospital the hospital has to report back
to the state health agency that you know
that there is an outbreak of this
illness so that's the normal place we
get idea from there's some less known
non-traditional mechanisms for example
we sometimes sample waste water coming
out of prisons and sometimes cities to
see what drugs are being taken and
things like that but that's a that's a
more niche let's say a meth head so
these are really the data that people
use and this is really limited the sort
of research we can do because you can
imagine if you know anything about these
two data sources there's a lot of
questions that you might want to ask
that you cannot ask using these two
methods or that's very difficult to ask
so along come social media or web data
in general this slide was made last
night so there's a couple new social
media companies that haven't included as
you can imagine I don't know if snapchat
is on here that's the new thing right so
social media has a tremendous amount of
information in it and you really hear
web data in general people talk about
politics sports entertainment what they
do for a living they tell you about what
they ate for breakfast and critically
for our talk today they talk about
health all right and so that means here
that we have an opportunity to look at
social media which really is a
reflection of the ongoing lives of
people right people kind of tweed or
write Facebook or do searches about the
sort of things they do on a daily basis
and because health is a part of
daily basis life for people we can see
part of that in in these data and so
that has tremendous implement
implications for both facets of of this
public health psychol so in terms of the
surveillance aspect it means that we can
do things that we already do in a better
faster and cheaper way right and that's
very valuable into itself because
there's a lot of things that we want to
do that we do but they're slow to get
results they might take as a whole year
to do the survey for example we can do
those things faster really exciting our
new opportunities things that we could
never do before that we now can do using
this data and I have examples of both of
that today um I don't have examples of
intervention because I don't really
focus at intervention but I want to just
tell you this does happen so these are
things like identifying people for
communication so you identify who you
want to intervene with entailing
messages specifically for them so give
you one example this in Chicago right
now there's a group that is looking
through Twitter for people who mention
that they got food poisoning at
restaurants and when they see that they
send those people linked to the public
health departments form to report on on
a restaurant food poisonings right and
so this is a way where they're basically
realizing that people mention these
events they're not being reported to the
public health department and they're
intervening with them to say hey can you
give us that information will go look at
that restaurant free all right so I'm
really going to talk about the the
examples here under surveillance and I'm
going to talk about three types of data
search logs you guys know about really
well and these are as from the level I
access them where we're looking just a
trends we really are good able to get
course trends the sort of at work you
guys can do here where you have access
to logs you can do much more fine-grain
stuff but I won't be talking about that
today social media which is really very
good for shallow content analysis so you
can't really go very deep into a single
message because these are very short
messages but you often get a lot of
information out of them nonetheless and
then web forms which are really good not
for doing trend level stuff but for
really doing focus deep knowledge
extraction and I'll give examples of
every one of these today all right any
questions so far anyone wanna argue
about something else
I'd those of you watching online cannot
okay you can send me an email and
complain but you have to wait till the
end for my email address so let's start
with talking about search logs so here's
the paper that we just published
recently with just one example the sorts
of questions that we can now ask using
this data so how our economic health and
physical health related on a population
level and what I mean by this is when
there's a recession do people have
negative presumably negative health
outcomes because of that recession we
know that the recession affects a lot of
things besides jobs for example the
divorce rate is heavily influenced by
recessions you can talk to me about why
that is not in the way you think
actually but we want to ask here does
the recess should increase for example
stress physical pain those sorts of
things and the difficulty here is
getting the data to do this sort of
study right we need a large population
we need a long span of time we want to
compare things before and during or
after resection and we have questions
about many different ailments you know
I'm just saying health in general
there's a lot of different questions we
might want to ask people about health so
we're going to get data from google
trends which if you guys know this is
basically google publishes trend data on
their kind of most popular queries i
don't remember how many of the most
popular queries but if a query has a
certain number of million people
searching it they will post trends and
this is mostly for doing things like
realizing with justin bieber is really
popular again I thought he had gone away
but that's kind of the idea behind
Google Trends we're going to use it for
health so what we did is we looked at
343 queries that we identified using the
couple seed queries than Google kind of
recommends additional query to look at
and then we hand went through them and
pick out the ones that actually are
reflective of health and we looked at
the top 100 of those queries that
increase during december two thousand
eight to the end of 2011 which was the
Great Recession and we're going to
factor in like overall search traffic
volumes and other things it's it's you
have to get that right so you're not
chasing ghosts in the day
so where were the biggest increases so
we found headache related queries when
up 41-percent hernia related 37 that's
the best hernia picture I could find
chest pain related 35-percent and when I
say related I mean a couple different
queries all searching about headache
related items and then the single query
that have the biggest bike with stomach
ulcer symptoms which one of 208
twenty-eight percent during this time
period so let me show you what this
actually looks like every one of these
lines is one of those 100 queries so you
see any given query it has a lot of
variance to it but if you look at the
trend over time here this gray area here
is the recession so you can see that
before the recession well you know what
kind of goes up and down a little bit
over time but there's this really
noticeable uptick during the recession
here so i'll just show you one query or
one set of queries headache symptoms
actually this might be just the query
headache symptoms i'm not i don't
remember off hand and you can see that
it kind of varies quite a bit this is a
linear fit to the data before the
recession started so you see a slight
decrease in the slope i think basically
the way to read that is it's going to
continue on I don't think this look
really should be decreasing slightly but
you can see that the increase here is
clearly very different from what was
going on and this is where the recession
this is where we said december two
thousand eight the recession actually
starts a little bit before whatever it
depends how you measure the recession so
that's just an example of the sort of
population level questions we can ask
just by looking at what people search
for and you guys know here the work that
eric and others is doing are doing are
asking really quite interesting
sophisticated questions in this data and
getting an answers that we normally
would never have access to and that's
really quite exciting yeah so there's
actually increased from 2008-2009 oh you
mean right right in here yeah so earlier
i'm just wondering did you guys love to
see if those do you see that type of
thing that may
so um so that's a good question I don't
know so first of all when the recession
starts is a little bit difficult so I
don't remember the dates of like Lehman
Brothers collapse and all that but I
remember September 2008 it became
apparent there was something going on
which is probably let's say
june-september it's like right around
here I don't know exactly why we use
December as the cutoff it might be that
we're basing on some other like official
recession criteria I don't really
remember but even if you just know kind
of the history you can see that
something is changing around here from
what happened before and then any one
query or even a small set of queries
it's very hard to generalize from
because there's a lot of things that
could be going on and so if you look at
the overall trend in this line here
that's when it really convinces us
something's going on we have statistical
significance numbers and all that in the
paper and such that you can look at I'm
giving you just kind of the general
plots here okay yeah you have to I mean
with like anything you have to be
careful not to over fit too much so you
know we try make some really simple
general statements we can make about the
data all right so that's why i want to
show you on search logs let's talk about
social media I'll speak about this for a
little while longer so I'm really
talking about Twitter data here although
we're looking at a bunch of other social
media sites as well but Twitter is
really the easiest to work with we don't
have fire hose access but even just
using the one percent API you can get a
lot of good data so the key thing here
is we're getting out sign that we're not
getting this there are 500 million
messages today so that's a lot of data
to work with okay and assume everyone
here knows what Twitter is oh so the
reason we're using it is not just
because of the size of the data set it's
because health really does show up in
this data set so the first tweet here
nothing like waiting in line to buy
cigarettes behind a guy in a business
suit buying gasoline with ten dollars
and dimes so this person is not saying I
am a smoker which is what I actually
care about but they're saying something
that actually indicates that they do
smoke or they're probably a smoker
obviously there's a million reasons why
well there's not a million reasons
there's a couple reasons why you could
be buying cigarettes but it's not a high
entropy distribution over those reasons
so this person is probably a smoker
and the point is we see a lot of tweets
like this that are indicative of health
and we can glean health information from
even though the person's not directly
trying to report help to us and actually
we're starting some new work on tobacco
use and so these tweets are exactly the
sort of thing we're going to be looking
for so let me just give you some
examples of the breadth of things that
we've done so we've looked at medication
use you know how people for example
seeing that people use benadryl to treat
insomnia in addition to allergies
looking at patient safety issues so
these are people reporting that their
doctors made a mistake either surgical
error prescription air mental health
this is some new work on post-traumatic
stress disorder so there's really a huge
diversity of things you can do with
these data I'm specifically going to
talk about disease surveillance today
which is the work that's gotten the most
attention in the space of Twitter health
stuff so we tell you a little bit about
what we're doing with disease
surveillance so last year many of you
remember was a really unique year when
it comes to the flu not unique once in a
hundred years but unique once in a
couple of years once in a decade where
there really was a very large flu
outbreak in the United States it reached
epidemic levels and you might have known
this not because you were sick or your
friends were sick but because there was
a large covering of this event in the in
the media this is a new york times
article from the beginning of 2013 where
they're basically saying you know this
is a really big flu year ok so this
received a lot of attention the reason
receives lot of attention is not just
because flu is inconvenience but flu is
very dangerous so most people get the
flu recover and the you know they miss a
couple days of work and they're fine but
so many people get the flu and there is
a percentage of them that have serious
health implications of that including
death and the flu kills a lot of people
in the United States every year i don't
i don't have the cystoscope hand but it
predominantly affects the elderly and
the young okay one of the reasons swine
flu was so big is because that
distribution who over hood effects was
skewed and affected kind of normally
what we consider healthy people are
unaffected by the flu to that degree
anyway so knowing what's going on in in
the flu is actually
really serious health concern in the
United States because of that the CDC
invests a lot of time and effort into
this problem and they have a really good
influenza surveillance network it's
called flu view at least that's what
they they caught when they post
information online this is a nationwide
surveillance network it has 2,700
outpatient centers which is hospitals as
well as as well as doctors offices and
they're reporting ili which means
influenza-like-illness what that means
is you go into the doctor and the doctor
says well you have a fever you have the
chills I bet you have the flu go home
and get some rest right or two here take
some take some flu medicine but there's
no necessarily there's not necessarily a
confirmation that for sure you have the
flu right and that's what you'd expect
right the doctor is not going to order a
lab test every time you go in with the
flu okay so that's what gets reported so
I I mentioned that in detail just so you
understand that the numbers that we're
going to talk about is the gold standard
here from the CDC or by no means a gold
standard right not everyone there has
the flu and 2,700 clinics is a lot but
it doesn't give you a perfect reading
into what's going on the United States
all right so while this does give you
very good data the major cons are it's
slow it takes them about two weeks to
collect this information and to publish
it and so the flu rates that could
publish every Friday are two weeks old
herb and they also get updated over time
so they they revise those estimates as
more and more reports come in and we've
recently realized they can revise them
quite a bit and there's also varying
levels of geographic granularity so
they're looking at a national level they
also look by region there's ten regions
the United States they divided up into
but they don't look at the city level
because they just don't have enough
information to look at that depth so
twitter is a very attractive source for
providing new data for influenza
surveillance because we can do things
real time right I can analyze sweets in
real time and tell you what the flu rate
is today and also it has the potential
of geographic specificity so the
questions are can we do this accurately
that will be your first question can we
do it with geographic specificity and
can we really do it in real time and
what I mean by this is there's a lot of
people who will take these
take a data set and take a method for
doing it Lou surveillance and show you
that for last year and two years ago
they could do a really good job and so
the results i'm going to present you
today on the 2012-13 flu season we
actually built the season we built our
predictive system before the season
started and then ran it on the season
and then publish the result at the end
if you know believe me the natural
submission deadline where we published
it was in I think December 2012 so
that's when we built the system and it
was before the flu season was really in
here okay alright so the first thing is
can we find flew on Twitter and if you
just look for the keyword flu you can
find a lot of examples of it but they're
probably not what you're looking for so
here are some of my favorite the Ray
Lewis flu does anyone know what the Ray
Lewis flu is Megan lived in Baltimore
you don't know the realest the Ray Lewis
flu is um I play it so rate just have
one who ray Lewis's ok Ray Lewis I know
you guys Seahawks you know ok that's
right congratulations by the way ok did
you know who he was before the Super
Bowl is the question anyway so um so the
Ray loop basically Ray Lewis was the
align but he was a linebacker for the
Ravens and he was particularly ferocious
and players would get physically ill the
week before playing him in anticipation
of what he would do it's called the Ray
Lewis flu okay anyway so you can
whatever read the article um does anyone
know what swag flu is swag swag flu does
anyone know what the swag flu is so you
should look it up an urban dictionary
it's really quite entertaining this well
I'd flu do I ever been down here a
contagious virus that spreads game
confidence and swagger among the
population of individuals so while this
might be contagious this is not really
what we're thinking of when we talk
about flu but if you actually just find
tweets with the word flu you will find
all of these as well as others that I'm
not pointing out all right and that's
not really what we want um so this is
not just a cute problem it really is a
problem so here's a plot
of flu related keywords as I is not
actually keywords it doesn't matter
where we get this these are flu related
tweets for this summer of two thousand
nine um in this summer there should not
be much flu but you see there's a pretty
significant increase right here early
June does anyone remember what was going
on in the world of health in summer 2009
mad cow no I mean that's always
happening in some degree but so don't
feel too bad I gave it this talk to a
public health department not avian flu
you're very close I able to talk to a
public health department know when
they're new either so don't feel so bad
it was swine flu swine flu really uh
broke early spring 2009 was when it came
out and then everyone was getting ready
for the fall 2009 when it was going to
be big so summer 2009 that's what was
going on and we have a blip here and
actually what that blip is is the World
Health Organization announced the
beginning of June June eleventh that
swine flu is going to be a pandemic so
our system identifies an increase in flu
when there really is no increase in flu
they're all that's going on is that more
people on Twitter are talking about flu
because there's going to be because this
press release came out so this is not
just you get cute examples but your
system is really misled by things if you
don't do a good job of identifying
exactly the tweets you want so what we
do is we're going to use some
statistical classifiers and some NLP
features and part of speech tagging all
this good stuff and we're going to have
a three stage system here the first
stages we identify tweets that are
health related right so we have
basically a set of health keywords that
we filter on and then even within those
keywords we have a classifier that says
is this related to health or not we then
take the health related tweets and say
is this about flu or not and
specifically influenza and then the
third thing we do is we say is this
tweet showing an awareness of the flu or
is it actually showing that this person
is infected with the flu so I'll give
you examples that so many Americans seem
to have bad flu right now I'm worried
this trend will reach New Zealand in
winter I might need to step up my
reclusiveness so this person doesn't
have the flu they are expressing
awareness of the flu that's very
different from my flu cough and fever is
getting worse i'm worried this person
has a flu infection okay that's what
this last stage tells the difference
between and that turns out to be really
important so we're going to use these
classifiers in order to find lots of
examples of these tweets the next
question is how do i identify
geographically where this is happening
so twitter gives us some geo tags which
is great
and we'd like to use those in order to
geotag the data we have there is now in
addition to our work there's one other
paper that i know of that is doing
non-national measurements from Twitter
data of the flu I came out the same time
as ours so before that the real focus
was on national and remember I told you
about the CDC data is one of the
weaknesses there is looking at local
data right so we really want to use
Twitter to try and look at local main
and not just national data so can we use
Twitter to attract these local trends so
is it accurate enough you know do we
have enough data is it accurate enough
of these uh finer-grained locations and
is there enough data so only this number
is actually a little higher now in the
US is about 3% of tweets or geo are
geocoded but that's a tiny fraction of
what we actually want to use so what we
did is we looked at profile information
and it turns out that people can specify
strings that are indicative of profile
of location so this person Allison says
they're in New York this person actually
says the Florida here we have someone
says Arizona so we can extract some
information about location just by
looking at profile information even if
the person isn't geo tagging their
tweets we also have more challenging
cases like new york which our system can
do there are many variations of New York
with ease and O's and all sorts of
places does anyone know where that is
right very good our system doesn't know
that you can imagine doing it with a
phonetic model of language and such but
there's a little too much so we're going
to we're going to pass up that one and
that you can see the influence Justin
Bieber has on twitter if you if you
weren't aware I so we built a very
simple system called carmen where Carmen
takes those strings and resolves to one
of about 4,000 locations that knows
about and just we have a whole paper on
this if you're curious but the one
number you have to know is we go from
about a data set with one percent
geo-located tweets to twenty-two percent
geo-located tweets and you can use our
code is available in Python Java it's
online you can extend it whatever you
walk but it's available so we use this
to get a lot more
data then the geotag data that were
provided with so the last question is
can does this actually work so let me
show you some historical data first so
this is 2009-2011 so 2009 was a really
easy year to predict because of the
waste swine flu happened there was a
huge uptick and then a huge drop and
basically as long as you predict the flu
goes up and then down you're going to do
a very good job of predicting of 2009
and so a keyword based system which is
just them these are using keywords from
Health and Human Services they run a
competition a couple years ago but
they're things like flu influenza things
like that this is our flu classifier
which is just is this about flu not is
it about infection and this is the
Google Flu Trends data if you know
Google Flu Trends great if you don't
they're using queries in order to
predict the flu rate and we can talk
about that later how they do it so these
look really similar but in 2011 it was a
very mild season so it wasn't kind of
this huge increase and decrease and
therefore a lot of systems really
struggled so here's how our system did
in where we're actually just looking at
infection tweets nationally you can see
it does a little bit better in 2009 but
who cares in 2011 it cuts the air in
half between the best Twitter method and
what Google Flu Trends has right so
really substantial improvements but how
does it do for 2012-2013 all right so
this is we built the system when then we
ran it on data as it was happening so
the black line here is the CDC data the
blue line here is the infection data
that's our system and then the dotted
line is just influenza tweets not
filtered down by infection so you can
see basic I mean well it's quite obvious
the solid blue line is much better
according the black line the dash blue
line really is two points that seem to
stand out as wrong one is this point
here that's fairly obvious so that's the
early January media coverage I mentioned
and then this point here which is
actually when the CDC made an
announcement that there was a flu
epidemic epidemic so this is the CDC
announced it and then a month later CNN
said oh wow we should do a story on it
and then New York Times everyone did a
story so this is these two increases are
really just people talking
out flu because it's in the news but
they're not actually saying they're not
actually saying that they're infected so
I don't have a great sense of of other
systems I can tell you that about this
point in the season a couple other
people published numbers of how well
they were doing and they were like point
660 our number is 0 point 93 so we do
really really well other people were
doing here we're doing a little bit
worse I don't remember how Google did
but Google actually suffered a little
bit of this problem and there was a
really good article in I think science
science news about Google Flu Trends
really overestimating and the Google
actually published a paper recently
where they said why that was a problem
that how they were fixing it so we're
actually doing a very similar to how
Google is doing on this task yes the
correlation is for temporal a concurrent
time grades yeah you know this is every
week so we're looking at a week by week
so each data point is one week so I'll
just say one other thing because you
said he said something maybe fingers so
we then took these numbers and we chose
not to believe them and try to do all
the statistical analyses we could to
show that this is not actually
significant improvement so we looked at
Auto correlations cross correlations
shifting things the first differential
of the curt i don't remember what the
call we had some statistician friends
working with us and those are all
published in our applause paper and
after doing all that we still are doing
a really good job of predicting the flu
and then the other number i'll just
throw out there is if we just do a
really simple system which says look at
the weeks where there was a big
difference like an above average
difference in the flu rate compared to
the previous week that came before it
and asked our system is this difference
going up or down or system without one
hundred percent right so that's what i
think is a more useful number when
someone looks at this they're not going
to care necessarily about these little
points here about exactly what it was
but they want to know is is this week
worse or better and on that question we
did we did as well as you can okay
so the next thing we did was we wanted
to see if this was going to be useful at
a local level so we looked at New York
City the reason we looked in New York
City is there one of the few if only
public health departments for cities the
published data mine there are other
cities that have this data but it's
either not nearly as good as in New York
City or they on publish online
apparently New York kind of neighbor
that was really into public health
anyone follows New York politics so he
invested a lot of resources in that city
and they have a really great public
health infrastructure as a result so
they have numbers like this um so they
actually published some of the numbers
online he also gave us over a billion
dollars what does this everything he's a
good guy I like him you can poke you can
put down the web so so they didn't do
not publish the numbers we actually care
about though which is doing fluke which
is doing counts and not percentages the
difference is not important here but
what this allowed us to do is a blind
study so rather than downloading their
data and running a correlation which you
might not believe us we sent them our
predictions and we asked them to do the
correlation for us based on their data
so if you don't believe me by the first
thing you might think I'm lying about
that too but you can call them and
they'll verify it so this is what they
told us how we are doing our infection
curve was point eight eight our keywords
are point seven two comparing that to
the national curve it's there's a it's
barely statistically significantly
different alright so that means is we're
almost doing as well just on New York
City as we would on the national trends
and that's very encouraging because it
means that if we can actually predict
things in a local way then we can use
this system to help enable local
decisions about how to respond to
influenza and really a lot of these
decisions are made on a local basis
right knowing the national rate is
helpful but if you want those if you
need to close a school district or run a
vaccination campaign you want to know
that in the local level so just last
thing let's go back to this curve so
remember this curve now I can tell you
is just influenza identified tweets
using a classifier this curve is
infection tweets and you can see the
blips disappear and in the summer the
infection curved
notice any difference there's no change
in the infection rate so I'll show you
this this is one of the first times in
talking about this we really want to
give public health researchers as much
of the data I've shown you here as
possible to enable them to make
decisions so we're building a website
that will do exactly that and this is
not available yet if you're interested
in it send me an email and i can share
it with you when we go into our private
beta but we're really looking to this
sort of platform to enable public health
researchers to get direct access to our
data not as a published paper the year
after but in real time to help them make
these decisions ok that's all I want to
say about social media the last thing I
want to talk about today is web forums
and this is an area where a couple
people in the field are working in but
not nearly as many as Twitter and I
really think there's a tremendous value
here that that that people have been
overlooking so we've done a number of
things here we look at quality of care
based on what people think of their
doctors looking at doctor ratings for
example we're looking at prescription
drug use which is something you guys
have done as well but what I really want
to talk about today is something that I
think is the most exciting we're just
talking about illicit drug use and
hopefully the money next to the pills
give you the illicit feeling and not
just that this is someone's prescription
well it might be someone's prescription
but not not the person taking it
necessarily all right so it tells you
see us right yes I know most about the
illicit drug market of the united states
that made us sounded weird okay think
you all know what I'm trying to say all
right very good so um so let me first
tell you the data set that we're using
so we're using a site called drugs form
if you've never heard of the site it's
the sort of thing that you really can't
believe exists so I'll tell you what the
what it's they say they are drugs form
is an information hub of high standards
in a platform where people can freely
discuss recreational drugs in a mature
intelligent manner their words not mine
you might disagree on the mature
intelligent manner of the site drugs
form offers a wealth of quality
information discussion of drug-related
politics additions to assistance for
members
struggling with addiction so this last
part may be true but this part really
discussed recreational drugs really
dominates the site that's why people go
there they don't go there to talk about
policy they go there because they're
talking about how to get hot so we have
a hundred thousand messages twenty
thousand users we have self-reported
information of those users so the use of
the site sku mail that is not because
recreational drug users skew mail in
that degree it's just because of who's
using this website so we know that's not
true by other other data fifty percent
of these people say they live the United
States and then this is the age
breakdown of the younger groups it goes
up higher I do not believe this number
at all because it's Claire's that
fifty-eight percent ascites between 20
and 29 you're not allowed to use this
website if you're under the age of 18
and I do not believe that means that
those under the age of 18 choose not to
use it I think they just lie about their
age and they would probably just select
this box so I do not trust these numbers
these numbers I kind of trust a little
bit more all right so why do we want to
use this data so we're really interested
in web-based drug research and to under
help you understand why I need to tell
you a little bit about what's going on
in the world of illicit drugs so um if
you don't know anything about this you
might assume that the world of drugs is
cocaine and heroin and LSD and math
anyone else were throwing out there
always interested to see who volunteers
which drug okay let's say those we're
all comfortable with those everyone's
heard that those are the big ones right
and that's when you hear about drug
addiction that's what we often hear
about what's going on now though is that
there's new synthetic drugs that are
being coming to market at an
ever-increasing pace in 2011 the EU
recorded 52 new drugs in the year all
right so it's an average of one a week I
don't know if they were spaced out like
that and what's going on is that people
find some drug right they tinker with it
in a lab they have a new chemical
compound and they produce a new drug
right and they do this because they're
experimenting to try and come up with
the next big thing they're also doing
this in response to policy so once we
make one drug illegal if you go back to
the lab and you can tinker with it
you have a different drug right you can
then market that again is something else
because these are new drugs they're not
illegal when they come to market and so
you can often legally purchase these
things and they often have names that
try and mask what's supposed to be going
on so that people don't realize what
they're for so they're often called
incense spices another name has anyone
heard of bath salts right so bath salts
are not bath like they're not for baths
okay they are called that because of how
they look but it's completely unrelated
it's another drug does anyone know why
bath salts are really popular all of a
sudden in the past year or so you know
did you know why she those things are
true but that's not why people now part
of it they didn't before you go look at
your logs you'll see a big spike in bath
salt queries so um about a year ago
there was an article on a man in Florida
who turned into a cannibal because he
took bath salts zoo remember this yeah
oh yeah so that's not actually true he
didn't take bath salts was in this
reporting but everyone heard about bath
salts after that and so bath salts is an
example of something that about a year
ago really got the attention of a lot of
people in the drug in the drug
enforcement and now I believe they're
legal um but you know the drug addiction
communities as this big new thing even
though we have posts on it they go back
five six years right so what's going on
is you have these new things being
introduced and they largely fly under
the radar because they're new and
they're not allowed if people know about
them but the drug users certainly know
about them and this poses a really big
problem for doctor so if someone shows
up in the ER and they've overdosed right
you want to know what they took and how
much and if they can't tell you where
you've never heard of the drug before
and you don't know how much of that drug
is a normal amount then it's very
difficult to do anything the same is
true of people who are work with
addiction right they work with teenagers
who are fighting addiction and they
never heard of the drug before it's very
hard to try and help that person so
there's a huge need for information and
they're really not a good place for this
information come from so there's sort of
questions we might have about a drug
like salvia and I'll get to stop in a
minute how does this drug vary by
demographic group in other words who's
taking it how who's using it what are
the effect
so what are the dosages of salvia is
anyone heard of salvia it's a little
more popular of a drug okay why is you
guys know why salvias popular not
counting it's not I don't think it's
legal anymore but it was for a while
you're right but what made it really
popular do you know why so if you go on
youtube and you search for videos there
are a lot of videos of high schoolers
taking salvia and then reporting
themselves webcams and uploading it to
youtube it was like a whole big thing
but this got started you gotta look at
YouTube YouTube is the place for I'm not
exaggerating YouTube has tons of drug
information there are people who study
youtube for that reason so uh Miley
Cyrus there's a video of her on a
birthday party you notice yes so there's
a picture of her that picture there's a
video of her on YouTube where she is
smoking salvia and that was a big
revelation a lot of high school kids of
oh there's a strong called salvia and
actually really increase the usage and
that's why I've become very popular
Miley Cyrus I'm not going to play the
video for you guys you guys would have
to go see it yourself TMZ it's from TMZ
that's the places up anyway so i'll buy
the but by the way it is interesting
note the second video here it recommends
justin bieber smoking weed so I point
this out not just because it's funny but
because there really is a lot of
information on YouTube about this about
what's going on it influences popularity
and people in the drug research
community public health they don't
really have any of this on their radar
um so what we wanted to do is take all
these drug messages from these drug
forms and kind of summarize them in some
way and present them in some way to
people who actually need to read them to
learn about what's going on is so that
they don't have to sit down read through
everyone right and because we know NLP a
machine-learning we thought we could do
something interesting um so we use the
model called factorial lda which i'm
just going to explain very briefly here
it's a topic model so if you're familiar
with topic models like latent Irish lay
allocation it's the same idea so word
tokens are associated with not a topic
elathan topic but instead a set of
latent variables right and that set of
latent variables allows us to jointly
model multiple things once
we might be interested in modeling topic
and perspective or sentiment and
modeling these things all at the same
time instead of a topic model where you
do these things individually as
different topics so that means instead
of a distribution over topics we have a
distribution of what we call tuples
where each tuple has its own word
distribution just like each topic would
ignore the last line because I have time
to talk about that so we looked at a
three factored model for this data set
where the drugs we had 24 drugs I could
only name for offhand but there's 24
this data is that so like tobacco and
funfetti means alcohol show up as well
so 24 doug's that's one factor model the
second factor is the way it's delivered
and we just looked at injection oral
smoking and snorting there are a lot of
other ways to get drugs in your system
that we just we didn't look at here and
then we looked at five aspects of usage
the chemistry of the drug the cultural
around it and you should see really
interesting differences in the culture
around drugs looking at alcohol versus
heroin for example you see really
different words showing up the effects
of that drug on a person the health
implications of using that drug and
information and usage like dose and
preparation so what we're going to do is
look at tuples of these things like
cannabis oral culture for example so the
way factorial lda does this I mentioned
it captures these tuples here are some
examples of what a cologne for two
tuples cocaine snorting health and
cocaine snorting usage and you can see
the health you have things like nose
blood things like that so nose bleeds
whereas the usage coke lines cut right
and even if you don't know anything
about cocaine this should make sense to
you and will critically what the model
is doing is it saying this wordlist here
and this wordlist here they should be
similar in that they're both talking
about cocaine and snorting the
difference should only be in the
influence of health versus usage the way
we do that right is we don't want to
actually learn every possible
combination of distribution here because
that would be too many to learn
independently so we need to tie these
distributions together in such a way
that encourages these two things to look
as similar as possible except for that
one difference and if you looked at a
much longer list the top words you would
see that they look much similar similar
we're just
top ones I'm so the way we do that is
the system learns for each independent
factor a list of words that are things
are useful so here are general words
about cannabis general words about oral
use in general words about chemistry
where the oral uses all drugs in all
situations this is all chemistry words
right these are learned by our model and
what the model is going to do is when it
is interested in generating the list
that corresponds to cannabis oral in
chemistry it's going to combine these
lists together to give us a distribution
that it thinks best captures all of
these right using this log linear model
right so this list here is what the
model thinks cannabis oil and chemistry
should use this distribution that's
actually too strong a constraint for our
model because in actuality there might
be some combination these words in
practice that we can't quite model and
so we want to allow it to deviate a
little bit and so what we do is we
actually sample a distribution using
this as a prior and the posterior is
going to be a little bit different right
and the posterior is going to be
capturing the nuances of the combination
of cannabis oral and chemistry in the
data so take a look at this wordlist and
think about cannabis oil in chemistry
what do you think these messages all
talk about
making your honors meeting any baking
products edibles so pop rocks right so
sure enough if we look through the data
and we say what are the messages that
are talking about these three things and
we've learned these word lists from the
data we get all these messages about how
to make properties all right so let's go
back to our example questions we don't
really actually care about pop Roddy so
much so for something like salvia we
want to know how many people are using
salvia what are the effects of it and so
we're going to use our two of FLD a as
an extractive summarization system so
what we're going to do is we're going to
look at all sentences in our corpus and
we're going to pull out sentences that
are the best examples of a specific
tuple so over the tuple cannabis oral
usage we're going to look for the
sentence that if we look at all the
tokens in that sentence and the
probability of their assignment to the
latent tuples give us a sentence that is
the best example of of that so that's
what I'm going to show you here so what
we looked at for example is how people
are using salvia so salvia smoking uses
in salvia oral usage so these two
sentences are best reflective of these
two tuples and they only differ in that
this one will be smoking this one we
oral and here's what we get the best way
is to use a torch lighter bong or pipe
bong recommended not my recommendation
it's the site and hold in each hit 20 to
40 seconds so that's clear side about
smoking salvia here on this is a little
technical but this is a about the dosage
of orally ingesting salvia yeah right
that's that's that's its that's verbatim
from the text i did not putting i
recommended what are the effects of
salvia so here the only difference is in
smoking and oral and so you can see that
this one for example is when chewed the
first effects i felt after about 15
minutes blah blah blah whereas this one
is talking more about you know he took
one large hit so again it's smoking and
then held it in laid back blah blah blah
oranges brownish light okay so actually
I just point out one interesting thing
about this data it says he then took one
large so who's he right who are they
talking about so because these drugs are
often illegal but not always the site of
for bids discussions about you using
drugs you're not allowed to say that you
use drugs or where you got them so
people have creative ways of expressing
this information so they're always
talking about their friend who uses
drugs so this person is thought about he
meaning his friend who took this drug
and then a very detailed description
what the friend had but you have other
things like people right swim which
stands for someone who was someone who
isn't me so swim took a shot of whatever
last night and then someone will reply
sweet which means someone who isn't you
we also have much more creative things
like someone will write my pet rabbit
Harry parentheses 62 mail 250 pounds
went to a club with his girlfriend last
night and did the following things so I
think it's an interesting artifact of
the data so what we did is we showed
these um we we did two things one as we
show these two colleagues of ours who
are in the medical school and work on
these and they said these look awesome
good job and give us upon the back but
we can't publish based on that so what
we then did is we took these snippets
and we took technical reports that were
written about these drugs so we have a
technical report that was written about
salvia and we act sorted the paragraph
that talks about how to use salvia if
you smoke it and we showed that to a
user and then we showed them a bunch of
these sentences and we said which of
these sentences is most helpful in
writing this tech report this paragraph
and those sentences came from our models
I discussed it plus a couple baseline
models and people pick the sentences
from our model more often than anything
else right and they were saying if I had
to write this tech report which is
exactly what these people are doing in
in the School of Medicine among other
things our examples are going to be the
most helpful for writing those reports
so we're really excited because we
really think this means that this is a
great tool for mining large amounts of
data and really finding the information
that these public health experts and our
friends the medical school really want
to know so those are the examples I want
to give you today from these three
different areas there's a lot of people
went into making all this happen and so
I wanted to thank them here if you guys
are interested in other examples I have
kind of reference but didn't go into the
detail to today we have a website social
media and health research social media
health research org which is
the group of Johns Hopkins working on
this as well as you can look at my own
website and email me specifically if you
want code and data I'm always happy to
share thank you I'm happy to take
questions
I don't know anything about specific
drugs so and I'm being recorded so don't
ask me those goods yes Twitter
corresponding to CDC data one thing it
comes up a lot is okay so they correlate
pretty highly do not perfectly so which
one's right or more accurate it's along
some dimension so that's kind of this
perpetual problem yes what I don't know
thoughts on that um so obviously there's
a lot of things when your tracks let's
talk about influenza as an example
because that's what I talked about today
so first of all the there's always the
question of good enough right so how
much information do you need in order to
make decisions and it really depends on
what decision you're trying to make so
there are a lot of things that people
can do a response to influenza so for
example something we're looking at right
now is hospitals when they know there's
going to be a big outbreak more people
come to the ER so they need more doctors
on on call they need more you know staff
there and they need more beds right so
that's something that's not that hard to
deal with if you know what's coming so
even if you have a fuzzy signal it might
be enough to make those kind decisions
whereas if you don't and you're caught
off guard it can be a real problem
because your er gets overwhelmed you
also don't want a lot of sick people
sitting in your yard all time ers have
usually not healthy places to be whereas
school closings which happen so for
example during the swine flu a lot of
schools in New York were closed other
place as well because when schools are
open parents send their kids right like
if you have kids you kind of prey the
kids feeling better and you send them to
school even though the school's say 24
hours without fever before you can send
the kid back right but you're like we're
rounding up to get 24 hours sometimes so
they will close schools because Clues
our schools our major a spot of
infection so do that you might want to
have much better information usually
there they actually want to have
diagnosed cases in this school there's a
lot of things in between those vaccine
campaigns there's running advertising so
I see ads all the time in Baltimore that
say like stay home if you feel sick
which it makes a big difference to other
people getting sick um so I think we're
certainly at the level of accuracy that
we can do many of those things but
certainly not all of them so that's
that's number one
so that's in terms of you know good
enough i would say like it's doing well
in terms of the gold standard that's
really a problem here is that we don't
have the gold standard you have this
problem all over machine learning like
so for web search right what is the
right page to show is the number one
result and you often just don't know
sometimes you do navigational queries
you kind of a good science problems you
just don't know what the right answer is
and so you don't really have a good gold
standard evaluate against all you can
say is our people happier our people you
know however we measure happiness
through click-through rates for
advertising dollars through the user
studies are people happier with what
we're doing and I think the same thing
is true here we don't really have a
great gold standard I mean there's the
CDC data but it's not perfect right so
we have to look at a lot of different
things right we have to look for is this
information useful right is it is it
being delivered a more timely matter can
we do things with it so one of the
things the CDC is doing this year is
they're running a competition to see who
can predict influenza predict meaning
what's happening next week not what's
going on right now so everyone was
really excited about this but we all
said but we don't do prediction we do
surveillance so the CDC says well do
prediction so our theory is that you can
do a better job of prediction with this
data even though it might not be as
accurate because it's more timely right
so even if there's not a gold standard
or to evaluate against there are still
many ways we can see that this data is
helping us to do a variety of things
what else to give very long answers I
can try and cut them down if you are
okay so I think yeah go for it so
obviously you're looking at Twitter data
yes if you can trackback to the really
how does your IRB said anything about
the use of that data are they just
considering it secondary data that's
just public yes any issues that they've
that you thought about or they are
thinking about okay so we could easily
do an hour talk on this topic and I'm
not saying this a joke I have colleagues
and bioethics department at Hopkins who
specialize in social medium they do give
our talks on that topic I will try and
give you a short answer um so oh really
okay well let me give you a short answer
and you can follow up questions if you
want right so let me just say a couple
general comments so one is some people
say you we need to understand the
difference between privacy and perceived
privacy that's a big one so even though
and you guys know all about this right
people mmm have signed agreements about
how they're using your services to give
you data but it doesn't mean they won't
get really furious if you use the data
in such a way right I mean if you
remember when gmail came out people read
the user agreement and got really
furious about what the user agreement
said Google is doing even though Google
wasn't doing any of those things right
but so those differences in perception
in reality and perceive privacy in real
privacy so that's something to keep in
mind there is aggregation right so are
we looking at individuals or we out
gained over populations right that makes
a big difference to a lot of people when
it comes to the IRB there is an
exemption for publicly available data
right there's many exemptions but that's
the one that really is key for us and
every piece of data we're using is
publicly available freely to download
from the internet anyone has access to
it and that is enough of an exemption
that the IRB has given us a blanket
exemption for the work right if we were
to do things like look at an individual
user or publish things that we've
inferred about the user right I would
definitely want to go back and talk the
IRB about that right and that's that's
more close to things that the IRB
very concerned about even general
characteristics like people who smoke a
bia or whatever it's pronounced are
likely to be between the ages of 18 and
24 and live in cities right so my set my
understanding right now is that right
exactly so so this is you know it's the
same question of what is public health
so you give us all time like what does
public health so one person is not
public health a million people is public
health and the dividing line is
somewhere in between right so it's the
same thing with aggregate right so
looking at the whole US population
everyone says everyone I think can agree
is accurate but as you overlay these
different demographics on top of each
other which is definitely something
we're thinking about doing you start
getting down to the level of one person
right and as you get closer and closer
to one person in a small group of people
then you have to ask these questions of
how meaningful is the aggregation and
that's actually something that when we
can start to get to that point that's
another conversation that we need to
have with the IRB about about those
sorts of issues I think doing that
segmentation is really important because
say there's a really big health problem
with people doing without with assholes
so we know that most being like a senior
in high school thing right but you can
tell her your message and tell her how
to target people for interventions yeah
we did work yeah when we get to
interventions those for sure need an IRB
approval right i should say that's very
important so just looking at public
health data looking at public data is
fine the moment you actually try and
contact the user then you absolutely
need to go through the RV yeah sorry not
even just high level developing
interventions and not actually even
coming yeah so i will say that i will
say nothing you're saying is wrong there
are different levels of comfort that
different I arbys will have so i am
telling about the experience i have with
the not to Johns Hopkins IV the Johns
Hopkins homewood IRB which is what I
which is basically the specific area
that covers me in the School of
Engineering there are three other I oh
there are many other I arbys at Hopkins
and I know some of them and have some
different perspectives on this I think
it happens to be that all them agree on
the points have said but as we get to
those different levels different arbys
will interpret them differently so
mechanical turk
example which you guys know about it I'm
sure so that was something that was very
challenging for I arbys not just from
the IRB standpoint but from a hiring
perspective right because when we said
we want to go you know we submit a
receipt and they said what's this for
what we're paying people for work right
is that you're paying people work on
these people on payroll who are they
like oh no but we're paying them we're
paying them a dollar an hour right and
we're not paying taxes on it right so um
different universities Maggie we might
notice about some of the challenges
different universities had very
different reactions to this and it took
actually a couple years for universities
to kind of fall in line in terms of what
was reasonable here but some
universities basically said you can't
use Mechanical Turk because you can't
pay people that little to do this work
Hopkins is fine with the payment the IRB
they're a little concerned about but it
depends what you're asking them to do so
if you're at if you're studying it's
very nuanced if you're studying what
they do or how they do it that is
studying a population and requires IRB
approval if you're having them do things
where you don't care about how they do
it or what they're doing but you just
need something labeled maybe then that's
not a human level experiment do you
don't need IRB approval right and that's
a very difficult line to walk and I've
had students who have done things that
the idea said no that's definitely a
human starting in the students like what
are you talking about so I think the
same thing is happening with Twitter
data I rbs are trying to wrap their
heads around this and figure it out the
same thing is also happening with
clinical data by the way right because
the sorts of things that i want i work
in clinical data as well those sort of
things i want to do with clinical data
when I talk to IRB people it blows their
mind that I'm even asking to do this not
because of the things I'm doing our in
terms of the you know I'm doing
unethical surgeries or anything like
that but just the amount of data I want
on the unpopular than they're normally
comfortable with right and so I think I
arbys are trying to figure out what to
do because there's so much value in that
and different I arbys have found
different policies they want to do in
different security protocols and all
this I think right now it's a big mess
and people are trying to figure it out
but I think there is a tendency towards
figure out ways to allow
the sort of research there's a much more
expansive answer but that's it's my not
one hour talk on the topic hey else
alright so thank you guys very much if
you are watching online email me
questions if you were too embarrassed to
get recorded to ask you a question you
can come over and ask me I'll take off
the mic thank you very much</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>