<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Data-Constrained Environmental Modelling: FetchClimate, Filzbach, and Distribution Modeller II | Coder Coacher - Coaching Coders</title><meta content="Data-Constrained Environmental Modelling: FetchClimate, Filzbach, and Distribution Modeller II - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Microsoft-Research/">Microsoft Research</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Data-Constrained Environmental Modelling: FetchClimate, Filzbach, and Distribution Modeller II</b></h2><h5 class="post__date">2016-08-08</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Ei77c33VyPA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">each year microsoft research helps
hundreds of influential speakers from
around the world including leading
scientists renowned experts in
technology book authors and leading
academics and makes videos of these
lectures freely available
alright thanks you guys part three so
firstly again I want to thank you from
bottom of my heart for being up for
trying fetch climate and I don't know if
anyone left the fetch is going it'd be
interesting to know whether some of them
finished since we tried and also I hope
that for those of you that weren't
familiar with it already you've got some
idea now about the potential power of
this very generic approach to training
models against data in order to choose
between alternative models estimate
parameters for those models that we do
care about and make predictions that
include potentially both sources of
uncertainty so we can make ensemble
predictions over multiple models where
within any one model we are including
the uncertainty in the parameters in
those predictions okay and again that
you know the main take-home point rather
than any particular tools is actually
that you know because this is this stuff
is only getting better and easier all
the time and so it's just that generic
idea that you can actually build now a
process based on a sort of ideas rich
model of the system a model of how you
think the system really works and you
can train that model against the data to
make predictions in the way that we're
used to doing for simple things like
linear regression okay so although we
did use some simple examples like that
to illustrate the fact is that this can
be done on basically any model now and
it's getting easier and faster all the
time so when you're thinking about over
the next years and decades if your
research careers I think it's safe to
say now that you can take it for granted
that you're able to constrain models
against data and make what you might
call defensible predictions of rigorous
predictions that include uncertainty and
leave you just one small example of the
potential power of that fee at the
moment the single largest source of
uncertainty in the future of the Earth's
system of the climate is actually the
behavior of the terrestrial carbon cycle
and the reason that's a huge source of
uncertainties we have lots of different
models and they all predict very
different things about the future of the
carbon cycle
some models the plant the trees grow
ever faster because of higher co2 and
they suck now more and more co2 from the
atmosphere and act as an ever more
efficient break on climate change but in
some other models around 20 50 or so
that turns around and we get mass die
back of areas like the Amazon for
example and then the vegetation turns
into a net source of co2 to the
atmosphere and therefore starts to act
as an accelerator on climate change now
the reason that we have that large
spread in predictions is because up up
until very recently it hasn't been
possible to take models that are that
complex and actually the models have to
be that complex to perform their role in
the air system models it hasn't been
possible to parameterize models that
complex against data to constrain all
the parameters and that's all the all
the model structure but but it's very
quickly going to become possible to do
that and if we do we'll have a much
better idea about the future of the
terrestrial carbon cycle and therefore
the future of the world's climate so
this technique which you can learn about
by thinking about linear regression is
something that actually could be hugely
transformative when we go all the way up
to very complicated models so to try and
illustrate that and the other thing
that's going to happen of course is that
people will develop tools that will
enable will make all of this easier and
easier to go through this pipeline from
data and models and predictions and
we're one of the groups are trying to do
that and as I say these are all
prototypes and as we saw earlier but
prototypes there are issues and so but
nonetheless we're going to try today to
use another one of these prototypes that
at the very least I hope it will help to
cement these concepts but hopefully
maybe one or more groups might get all
the way through to the end here and
we'll actually be making some
predictions with uncertainty so what I'm
going to do is start just by going
through an example of doing that which
I'll give them any time so the the URL
here is AKA ms / DM 0 and this is a
prototype tool and what it does is it's
supposed to provide just within the
browser
the opportunity to upload your data
supplement that data with fetch climate
define an arbitrary model parameter eyes
that model against the data using MCMC
sampling and then make predictions with
uncertainty just just within the browser
then you can package all that up and
share it with others and you can even
push that model in to fetch climate too
and so the group that was looking at MPP
and I know you guys I think the fetch
took too long but nonetheless that's
that's that model was created using this
so if what I was hoping that we could
try in this session which i think is an
hour long is that I have a load of
datasets and I thought different groups
could start with these try to use
distribution modeler and see if we can
get some models in to fetch climate too
and I said even if we don't hopefully
going through that will help to cement
at least some of the concepts so we go
to the browser application and we get
something like this so I'm just going to
go through this demo and hopefully you
know hopefully it will make some sense
and obviously do stop me if if it
doesn't so we have these different
actions we can perform and we can
perform the import file action here I'm
just going to go and get a very simple
file here which has took a wheat herbs
yield and when I perform that action I
now have inside the application a table
with latitude longitude and the yield
wheat these are some real data that we
took from somewhere so you know very
simple stuff but the next the immediate
thing we could do now is spring off onto
a mate chart action and say well if I
make a chart this is a generic chart
action but if but it knows that if i put
x as lawn and why is that that it that
i'm interested in a map and if i now
color according to wheat i can
immediately see how the yield of wheat
varies across the world nice little
thing there and what's happening here is
everything we're doing is being tracked
so we could run this again if we put a
different file in here now we're going
to get an updated graphic an updated
chart so and we can navigate using this
too so we can navigate back to our file
but we don't want wheat against latitude
and longitude we want wheat against
mature and precip so we can use fetch
climate to go and get that so we've
federated fetch climate into here so we
can say like for instance if I think the
data pertains to the period something
like 99 to 2000 so I could put that in
here this is just another version of the
sorts of forms you saw earlier and hit
fetch and this thing is going to go and
do the fetch climbers making my life
really risky right because we already
know that fetch climate can be can take
a while to do the fetches so why not
nest that within another prototype tool
right so what we will we me will cross
my fingers and hope that we get an
answer from fetch climate fairly soon so
it's going down that table then and
using those latitude and longitude
positions to hook out the temperature
associated with those places okay so can
you see we now have air temperature for
each of those I would have taken a
really long time usually not very
difficult to think about but really
fiddly to do in most cases and we can go
and get precipitation too so again we'll
sort of stuff for that that was quicker
that tango so now we've got temperature
and precip we can do another chart and
this time we'll look at yield instead of
against geography we'll look at it
against temperature precip and we can
see that yields tend to peak at an
intermediate temperature biologically
makes sense but that's important because
we're going to use we're going to make
sure that the model we define includes
that idea that there's an optimum
temperature and isn't just a linear
regression but actually that there's not
to them again this has been tracked and
just to make it easier i'm going to i'm
going to rename this this file here
wheat TP this so this is our main file
we have our response variable wheat next
to our predictor variables temperature
and precip so next we're going to define
a modeling and train that model against
the data but we're going to do it within
this special bayesian paradigm that we
talked through earlier so what that
means is we're going to define a model
structure s which implies a set of
parameters theta
and we're then going to estimate the
parameters given s and the data okay
just like we did before using the MCMC
sampling so let's let's let's see that
in action so we're going to spring off
on the table now onto an estimate
parameters step and we supply the the
input and the output is what we're
looking at here the predictors and the
response variables but what about the
model we haven't defined that yet so we
go off to a design model step so we're
just a blank canvas right now and this
is where it's up to us to use our brains
to define an interesting model what we
tried to give people a bit of an on ramp
onto that by not requiring you to
immediately code a model so we can do we
can get started with some point and
click so the model describes the yield
of wheat and then we can say wheat is a
continuous response variable because we
can do 10 if we want or we can do
integer values but this is a continuous
variable and we're going to give it a
niche that is a relationship with air
temperature and we're going to make that
relationship Gaussian which is a humped
relationship which and that means that
there's a peak in wheat yield at an
intermediate temperature and we're going
to do the same thing for precipitation
and so we've now defined a simple model
and you can read about the model here in
mathematics okay now obviously the thing
is with that though that's not really
what we're after right because if we're
just doing point-and-click you're
limited to just whatever we thought up
in the code for you to point and click
at and that's not the point what we want
to do is enable people to to specify a
fully rich model of how they think the
world is working so what's actually
happening here is that it although your
point in clicking each point and click
action is actually building some code in
the background so here's some code here
and it might look a bit unfamiliar right
now it's called F sharp and it's what's
it's a functional programming language
it's is a little bit like our R is a
functional programming language but the
take-home point here is that we only
have five lines to deal with and
actually these five lines are very
similar in spirit to
linear regression example that we talked
about so just to talk through that here
this one here says that is this is a
function and parameters and it says the
predicted wheat yield is equal to a
maximum parameter x a function of
temperature x function of precip is
pretty easy now these two functions
wheat air temperature and wheat PP rate
have a maximum of one mathematically as
defined up here and so it means that if
you have the perfect temperature and the
perfect precipitation you get max weeks
that's one of the parameters that's the
maximum possible yield of wheat in terms
of the expectation this sets the
expectation and then this says wheat is
equal to and in this case a log normal
distribution with a mean of pred wheat
and a sigma on it so it's not completely
clear the point is all we're doing is
we're writing out a model that's giving
us the expected yield of wheat giving
temperature given temperature and precip
and then it's saying the observe yield
of wheat is equal to a distribution
around that expectation exactly like
linear regression it's just that the
model isn't the backbone in linear
regression is a straight line and it
isn't linear anymore it's this curvy
relationship okay and we'll see but the
point is that because this is in code we
could write any model in here anything
that you can write in code you can put
in this framework so this could use you
could have if statements loops OD
solvers anything anything you can
imagine that you can do in code and well
and I'll show you an example of that in
a second so so now we've supplied the
input and output and the model structure
we have everything we need to specify we
specified everything now and so we just
hit go when we hit go this thing is
they're running the mcmc sampler i
talked about so it's starting to try
different values of these parameters and
go up and down and after a while it's
finished and then what this table shows
here is called a chain is assessed each
of these rows is one of those samples
remember those little black points I
could have been on a shape well each of
these rows is one of those
so it's a combination of parameters Mac
sweet optimal air temperature and
optimal precip so if you want to know
well okay so what do we think then we
just estimated model what's the optimal
air temperature for growing wheat well
actually if we click here we get little
histogram of the samples in that table
and because of that magic of the mcmc
metropolis hastings that histogram is an
unbiased sample of the probability
distribution posterior probability
distribution that the optimal air
temperature of wheat is each of these
values so most likely the optimal air
temperature for growing wheat is about
twelve point three degrees that's annual
average temperature pretty similar to a
Cambridge for example where we have some
of the highest wheat yields in the world
and but we can also look at the
uncertainty ago we can say well kind of
ninety-five percent of the of the
evidence is that the optimal air
temperature for growing wheats between
about 11 and 13 something like that as
simple as that so again that could be
any model and any parameter in any model
it wouldn't matter long as I can write
the code oh I'm going to get one of
these histograms at the end so that's
fine sort of biologically but now we
might say well let's go make some
predictions then with uncertainty for
that for that thing so what we can do we
can take those parameters and we can
spring off now and we can re simulate
our model now this is a phrase in
computer science we use this generative
model idea this is the forward model now
so now we've got our parameters we've
got our model we can go and create a set
of sort of pseudo data because remember
the model doesn't just say what the
expected yield of wheat is but it says
what the randomness the noise is so we
can actually create another set of
predictions so we spring off to the
simulate distribution and we say we use
this as our parameters the model
structure is the same as before and the
obvious thing to do is we can rerun it
for the original environment which is
this and what's happened then is that
the model hasn't just been wrong once
the model has just been wrong many many
times and each time it ran
it took a random draw from the from the
post dose parameter samples so to
illustrate that we can now look at our
distribution here and now each of these
points is one of our original lat long
positions so the rows are the same as
the original table but now if you had a
look at the headings you should be able
to see that this one here the pred wheat
we should have a pred wait a little bit
further on a pred we mean ya see this
see that column pred we mean but then we
have a pred we-ell 68 and l 95 well this
is the distribution around for each of
those points we don't just predict a
value we actually predict a spread of
values that represent the spread of the
parameters the uncertainty and the
parameters and once again that would be
true for whatever the model was okay so
to illustrate that visually we can do a
mate chart action and we'll go and get
me and we'll say so we can do another
map now and say long lat but now we have
a special little thing here when we look
at our predicted wheat yield which is
just here and so each of these points
then is the model that's being run for
that point in space but now instead of
being colored according to the value we
have two colors that represent the lower
and upper 95% interval and if we hover
over you should be able to see that we
get a prediction plus or minus something
or if you can see that but it's saying
in this case it's saying the predicted
yield of wheat is one point three tonnes
a hectare plus or minus naught point 18
tonnes a hectare so whenever we make a
prediction now we can include the
uncertainty in there in the predictions
and if we go and look at our so
obviously we built quite a comedy be
complicated little provenance done a
thing now and so here's our chart and we
can go and include that chart in what's
called a multi-view along with all the
other charts that we made
and another chart that we could make
actually which is relatively interesting
is instead of reapplying the model in
the original places because in the
middle of the model is this function of
wheat yield as a function of air
temperature that was one of the
functions in our code well so you can
imagine drawing that function against
temperature but there's uncertainty in
the function because there's uncertainty
in the parameters where we can view that
here by doing so now we get not just a
function that relates wheat yield to
temperature but we get uncertainty on
that function because we're not actually
sure what the optimum temperature is and
we're not sure what the sensitivity to
temperature is we actually get this
spread on the predictions again if we go
we can put that in our a multi-view here
so now we have a multi-panel view which
is showing consume out a bit I think try
this let's see that has the original
data it has the original data plotted in
climate space rather than geography it
has the model predictions plotted on and
geography with uncertainty and it
actually has one of the functions
included in the model with uncertainty
and we can make some other charts too so
just just to bring this home a little
bit that's zoom back in so for example
if we go back to our distribution again
here we could make another chart and
this time we could look at the model
predictions in climate space not in real
space so air temperature and precip
again
you see that so this is saying this is
what the model has this is what it's
inferred that this is where the optimum
temperature and preset for growing wheat
and that's the sensitivity but there's
uncertainty around that and all that
kind of stuff saying it's all sort of
makes sense what we've done there given
what we talked about well what I talked
about earlier so the idea is we had that
model which we can think of as s comes
with a set of parameters we train that
against the data we've now been able to
make predictions with that model with
uncertainty so just to illustrate I'll
try this we'll see if it works okay but
if we go back to our model remember we
said that this is it's a very simple
model at the moment it's just a
curvacious just regression modeling what
if we wanted to put a bit more biology
into the model well obviously that could
take a very long time if I did it in
front of you guys but one really simple
thing we could say is that there's some
minimum air temperature below which you
don't you get a very very low yield of
wheat we'd like to be 0 but for reasons
I won't bore you with we can't quite
make it zero but we could say so here's
the wheat air temperature function and
at the moment it's just this Gaussian
function but we can change that and say
well we think it is a Gaussian function
provided that you're not below this
threshold and if you're below that
threshold then you're really you don't
get anything so we can actually change
this function and say if air temperature
is above and this might be say a min
then we get that else we get something
very low and there's one little change
here which is this thing needs so this
again I know you won't be familiar with
this chances are this is f sharp but
this is a function and this is the
arguments of the function and then this
is what the function is on the
right-hand side so if you I've referred
to a thing called a min here and this is
debugging live in the browser and
telling me that that's not okay because
I haven't supplied it here as an
argument but I just need to supply on
the left as an arguments and hopefully
the Arab are the error message should go
away and what we can see now is that
there's a new parameter
to be estimated called a min wasn't
there before because it wasn't in the
model but we've just defined a new
parameter now one of the things I do
need to do is to give that sensible
bounds you need because if things get
too crazy so it goes from minus plus a
thousand right that's absolutely
ludicrous four degrees C then then it
the likelihood can get so low that the
chain gets lost so we just can't we just
need to give it a reasonable kind of
value so let's say it you know between
minus five and say 30 right which is I
mean minus five below freezing 30 is
really hot for a plan okay so let's say
it's between those two and now we have a
new model and we got these warnings here
because we need to re estimate the
parameters of the model so we do that
again here so now now this this this
thing isn't some pre can model it's
something that I just coded in front of
you that has this weird threshold thing
in there and hopefully and then what we
should be able to look here we've got a
new variable here called a min that
doesn't look very good actually I think
it's got a little bit lost so we can go
back there's a bit of experimentation
but it's trying to push it very low can
you see that 2 minus minus five which is
the lowest allowable bound you put on it
so I think what I might do is go back
this is part of the fun of all this if
you think of it in that way and I'm
going to make the allowable bow may be 0
or something
let's see if we get a better value
any minute now okay maybe it still wants
it to be zero yeah it's not looking
particularly good this but anyway I
thought it was worth the try so what
we'll do is we'll have a look at I'm
going to go back once more bear with me
right ok can I can't stand to leave it
like this let's see so I'm going to look
at the optimum precipitation as well
which is here this is crazy because we
shouldn't have negative values in there
so we'll have one point not doing that
and if this doesn't work I will give up
but we have tried plenty of other
examples they kind of been ok so far but
the point is in jet in general let's try
it come on give me a reasonable a min
where looks a little bit better right
and then until now we've redone that we
can look at what else needs redoing so
we need to rerun the the ensemble that's
all I think and then we should be done
so if we go back to our multi view now
we get we've now got an updated set of
predictions which are coming from this
more biological sort of model you can
see here this is the function of
temperature there which is doesn't look
too great and I think we're going to
need to update this as well
and the only reason I'm doing that is we
have a little bug in there need to rerun
it I think we could be fairly sure that
model got lost okay so i hope up and put
you off that kind of modeling for life
but the point is in general that were
able to specify any modeling code and
have that have that model fit against
the data appropriately okay so I'm going
to do now I'm going to close that down
now there's a way whenever wherever we
have one of these analyses you can save
that analysis as a single file and then
you can open it back up so i'm going to
show you one that I made earlier which
is here we'll have this one I think so
we mentioned MPP earlier natural primary
productivity net primary productivity is
the technical term for it and that's the
the rate that carbon is coming into the
vegetation and so this followed exactly
the same approach that I just described
for the wheat example so here we can
look at here's our map this is the model
predictions for primary productivity
which are higher where it's warm and wet
like in places like the Amazon okay and
this is the temperature function that is
in the middle of that and one here we go
just here and so this is annual average
temperature and this is primary
productivity this is one of these
functions with uncertainty and if want
to have a look at the model which will
be here the point here is this it's this
particular model has no this wasn't
built with point-and-click at all this
is entirely written in code and this is
a model taken from the scientific
literature it's called the Miami model
and it says if you read this last thing
here that this one here says the
predicted MPP is the minimum of two
functions one based on temperature and
one based on precip so that's just a
thing called the Miami model which you
can read about and it's been written in
code and then again we fit that model to
er-2 data and so we can have a look at
the estimate parameters step here so
when I do that I'm just re running the
parameter
estimation now there are two reasons i
want to show you that one is that that
model isn't now just some generic curve
but is actually a pre-existing model
that's taken from the literature is
still very simple but it's not something
that you're going to find in a
statistics textbook it was invented by
someone thinking about the reality of of
carbon fixation in vegetation and saying
the idea that it's limited either by
temperature or precipitation but the
second reason I wanted to show you it
was that we can actually push that model
in to fetch climate too and then go and
fetch so let me just want to illustrate
that here so here our parameters at the
moment we have to pull out a particular
set of parameters from marriage and this
is the the posterior mean so you
remember from the cloud you can pull out
your single best guess for each
parameter and these are the parameters
of the model here okay well these two
aren't but these ones here gmax p 1
sigma MPP that's the noise and t1 and t2
so they're the parameters of the Miami
model and i can now publish those
parameters alongside the model itself
and I'm saying I what does this
combination now so this is s the model
and this is Theta the parameters and I'm
taking those two things so the model is
just a little set of equations written
as code the parameters in this case just
a list of numbers t1 equals there's t2
equals that now in the future we'll be
able to predict upload the cloud or
parameters so that's just we just that's
a feature we're working on now so we
just have to provide a particular set
the model predicts MPP and what it's
saying is OK in the model it refers to
something called air a ir t you're going
to have to map that to something that's
in fetch climate now as it happens
because it's used fetch climate it's the
same got the same name but just to prove
that this is real will give this a
special name here so we'll call this lat
am 1c and we hit go and what's happening
is now though that combination of s and
the parameters theta is being put into
the exact copy of fetch climate that we
all
with you know varied degree of success
tried to use earlier right the one we
really stressed out by you're hitting it
really hard and we're going to get a
little report sheet there and they're so
now if I go to fetch climate we should
see down here something called print MPP
latin-1 can you see that that wasn't
there before when you it wasn't there
until 10 seconds ago until until we hit
go so now we can choose that model and
we can say well when do we want to run
it for so initially let's say we wanted
to run it for around about now and where
do we want to run it for somewhere riza
be interesting it might show some
variation let's say leading some
mountains here
and when you can hit fetcher once again
I'm left crossing my fingers but just to
explain what's happening there is that
the fetch climate isn't holding data for
MPP is holding the model s and the
parameters theta and when I fetch MPP
therefore it isn't going to a data set
of MPP is looking at the model and it's
saying ah ok the model needs air
temperature and it needs precip and so
for the space and time options that
we've sent so in this case this grid for
the particular time it's doing a grid of
temperature and then a grid of precip
and then with those two it's got enough
to run then the MPP model which is now
done and now we can hover over here and
see that you know it predicts for
example that MPP here is not point five
four I think we've lost the unit's
information that's enough to do list I
think whereas down here it's higher at
Northpoint 88 ok and similarly a course
and this is going to take some time
right so I stop in a second but if we
change this to a ten-year period into
the future then now what's happening is
that model that we've just defined is
going to be run for that grid for each
year from 2012 out to 20 22 so again
it's looking each of those time slices
and saying for the year 2012 i need a
grid of temperature and need a grid of
precip when i have that i can then run
the MPP model and then it's then doing
that for the next slice in the next
slice through that's the idea throw at
five o'clock now when do we finish
christened you know what they're 25
minutes ok alright so I did have this
plan to get people having a go with
distribution modeler so who fancies
having a go I mean had such a great time
in fetch climate I must be raring to get
your hands on I rather tall right i mean
there yeah there we go like Krista's
been trying out there we go so um so
that's what so let's try it shall we so
can you get you want to reassemble into
the same groups that you're in before
why not because I think you better be in
groups really and we'll see how we get
on okay so what I suggest is of course
we can try just two or three steps like
we saw together okay and then we'll see
where we go we get to from there and
then I should have been a little bit
more organized to get myself a memory
stick because I've got some example data
sets that we can use so we'll spend five
minutes giving you some random example
data sets did it it didn't work that's
really that's really mean I don't quite
know why so did he just say timed out I
think he just got bored of waiting let's
hope that's the case very very good I've
tried this very example Frieda recently
and it was fine so but that's so that's
how these things go so what we're just
waiting so you guys want to reassemble
into your groups on lots you remember
where you were sitting and yeah you okay
feel free to turn chairs around and all
that kind of stuff I know it I know it's
close to the end of the day you guys I
appreciate that you've been in here all
day is nearly finished now obviously so
you can just have a go and and again
will be very interested in your feedback
and if you want to try some of this
stuff out for yourself you can get in
touch okay and then I just had another
question by the way which was where is
the just as a reminder fetch climate to
is here ok that's the one we created
actually for this tutorial and the more
general one is fetch climate to Don I
don't know yeah so they're the URLs that
you need that song ok all right so can I
ask everyone to to try to follow exactly
what I'm doing here should we try that
we've sort of will kind of go together
this time all right so we're going to go
to the URL everyone ready we're going to
hit we're going to go and we going to
see this right everyone's seen that and
we're going to for now we're just going
to hit local storage
and we should see something like this if
one see that anyone not see that are we
good all right cool oh yeah yeah more of
those dreaded circle Z cool all right
great all right and everyone's got a
file ready on the desktop right one of
those or most people most groups have
and kristin is going to take care of the
last remainders so the first action
we're going to do then is to import that
file we're going to go and get it and
put it into the browser application
right and the file should just be a CSV
they're all dot CSVs I think so we do
import file and can you see the Browse
there see that guy's browse I'm just
going to check I've got the right one
here so yours will be on the desktop or
wherever you chose to put it ok ok and
I'm going to try maze for example so
depending on which one you chose is
everyone got there is everyone good so
you browse you get it and then you hit
go and then is everyone okay let me know
if you're not everyone got there so can
everyone see something like this cool
all right so now we're going to go and
visualize that data so we're going to
spring off from that table to a make
chart action just here you got that one
should we go it's pretty exciting right
and now we're here and we're going to do
pins everyone okay so we're going to do
pins I'm going to choose lon good
longitude is the X remember we often say
lat long but really mean long lat X Y is
latitude and we should see a map pop up
with the spots on has everyone got that
cool and and then we're going to color
we're going to color those points
according to the third column which
which in my case is maize
but in your case could well be something
else okay and so I've got something and
you should see something it looks a bit
like this okay leave you guys everyone
got something a bit like that a colorful
map anyone not got a colorful map now is
your last chance ok I'm going to assume
everything everyone's got a colorful map
now if we click on provenance here that
will always show us everything that led
up to the current object that we're in
or action so we're in a mate chart
action right now and when we click
provenance then we're going to see what
we've done so can you click provenance
and tell me that you see this is really
this is going really well so far I'm
going to convince myself that's actually
true there we go look at us brilliant
there we go you see but those guys are
getting there do you see up to click on
the on the product yeah you are this
thing here wow that's great you do
Providence here just here that's just
just hear this provenance ok now that's
not just that shows us what we've done
right but also we can navigate around so
we going to go navigate back to our
table ok so we clicked on the table do
you see what I just did amazing wasn't
it anyway look we have this so we're
going to we're going to click on the
file can you see so we're back with that
where we were so we went made a chart
but now we've come back and the charts
still there in fact we can't destroy
anything yet could have done that
feature but so we actually can't destroy
things even if we try to so it's there
and that chart will stay live but now
what we want to do is go and get the
temperature and precipitated to go with
to go with our table right and this is
where I'm feeling a bit nervous because
we're now going to hit fetch climate
several times which we tried earlier but
so let's we go now to a fetch climate
action so everyone click the fetch
climate action
and what it shows on the Left it's
saying we're springing off from this
table and these are our options in fetch
climate and you can go and fetch what
you like it doesn't have to be
temperature precipitation it could be
various other things if you like where i
usually do temperature and priests it
but you might think for instance the
diurnal air temperature range or the
humidity is just as important okay and
you can choose a range of years so now
this is averaging in between 1961 and
1990 but if you knew the data was taken
last year you put 2012 in there right
obviously so on however i would
recommend we stick with these options
right now because this is using fetch
climb at one so that's kind of point so
anyway choose air temperature and hit go
and then this is where either either it
works really well or this is the end of
the tutorial today because it depends on
how long then that slow it takes so is
anyone is everyone being able to at
least hit go and is everyone seeing this
this blue bar which means that it's
doing stuff has everyone got that is
anyone not oh okay don't you worry do I
made it okay or else oh that's alright
as long as it yeah that's all right yeah
yeah the only thing is foot for the
fetch climates work you'll need special
keyword lat and long or long and lat it
doesn't understand generic X&amp;amp;Y that's
all yeah yeah yeah yeahs won't hurt as
prisons yeah you can actually use
presence only data I show you there's a
special action for it it's called
resampled data have a look if you
resample at all it will work yeah it
will create a set of one and zero swing
how we doing with the fetch climate we
waiting again course you can
yeah so that's a good question so the
question was why would you use
distribution modeler rather than fills
back and and so distribution modeler is
a higher-level tool that's threading
together several pieces one of which is
phil's is fills back so if what you're
doing falls within this paradigm of
building a model that predicts something
from environmental predictors and you
then want to push that model to make it
available that's where distribution
model really comes into its own if
you've got just a more generic model
data problem and especially if it's a
big model with a big data set this is
would not be the best way to do it and
I'd recommend you use fills back
directly through what whatever your
choice of environment is so fills back r
if r is your choice of environment or
c++ yeah that's so i'd recommend anyone
has anyone anyone's fetch finished yet
oh there we are ok ok I should actually
stress before just just because for two
reasons one is that we're nearly done
now and second is this is being videoed
I do actually want to make it really
clear that um you know fetch climate is
a prototype and the people that built
fetch climate Moscow State University
these colleagues they've put a lot of
very clever work into making fetch
climate work as quickly as it does
because believe me there's a lot going
on actually behind the scenes and also
it does run just on a few nodes at the
moment on a shore and so although I know
I've been making light of the fact that
fetch climates been taking on time I'd
hate that to be taken to some kind of
criticism because seriously it's it's
some quite an impressive piece of work
really and I suspect if we have just had
more space on as your because you saw it
work earlier for me right that was real
so it would and it's just cuz we're all
hitting it at once then it's yours good
is it worked not yet oh
oh I got a question from where we have
many different they'd assets from where
they can they come okay so so the
question is where is all the data coming
from in fetch climate that's a really
good question there are two answers to
that so one is that there's the standard
copy of fetch climate is actually the
one at fetch climate to doc cloudapp net
this one drew but I worked oh wait oh
wait a second but also there's it's
possible to build separate copies of
fetch climate that include additional
sets of data and for this tutorial for
this for this e science workshop we
built one of those which is the one that
you've been looking at FC 2 which has
additional data for the for the Latin
American region now the generic
take-home point is that there are lots
of data sets behind either one but it's
possible to keep adding more and more
okay so most of them at the moment are
taken from national weather modeling
type places like the UK Met Office or
places like that but but over time we
hope that it will spread and spread now
you can find out because either through
the excel add-in or through the UI you
can actually find out about the data and
if you just go to AKA ms about data
sources and you can see all sorts of all
kinds of information there same time
jump jump jump so yeah so that's
something that we're keen on doing so i
probably I perhaps didn't point that out
enough so it is possible to create
additional copies of fetch climate
specialized to a certain purpose so one
for the oceans 14 deserts that kind of
thing or whatever it might be so anyone
got through the fetch climate step yet
really oh well this is great okay
although we've got we've got nine
minutes come on that's forever right so
so hows about this I'm going to suggest
that because now you can of course you
could do additional fetch climate steps
let's see to do so my got through mine
too now you could keep doing that you
could daisy chain them together to go
and get bless not because we're going to
lose another five minutes right so now
for those of you that have one of these
charts which should show a response and
a predictor we can now do another mate
chart action okay so we're let's go so
that is is everyone keeping up you got
this so you do make chart and now on the
x-axis you can put instead of latitude
or longitude put your predictor variable
air temperature and on the way you can
put maze yield you should see something
a bit like this so this is showing the
the yield of maize against air
temperature as a scatter plot and if you
want if you fancy having some fun if
that's fun to you you could color it
according to something like say latitude
if you wanted to so however you want you
can mix with those and you can do sighs
accordance along at you different so you
can create a conifer
okay so is everyone been able to get as
far as making a chart it doesn't have to
look like that one I was being silly bit
how are we doing everyone good okay all
right I'm going to suggest that we all
stay focused on on what I'm doing here
because then we got just a two or three
satellite conversations I feel like a
school teacher now you know Circle down
Klaus settle down could be in Harry
Potter could do you think I could
because it's a it's called Rick
something isn't he what's he called you
know the one that goes that turnoff
Potter he speaks through his teeth will
attend yeah Snape pot ha ok here we go
so we're going to stop so when we should
have got as far as making some kind of
chart so once again if we go from the
chart that you've made back to
Providence you should see something like
this and if we look at this thing here
this this this one just before so we got
this is a chart this is the make chart
action and this is a main file okay so
let's go back to our main file and this
is the one that has the predictor
variable and the response variable in
the same place and we want to train a
model against that right we do don't we
were desperately right so go and click
on the estimate parameters action okay
and this will happen and it says so when
you spring off onto some actions that
some actions require multiple things to
put in you have to say well what am I
putting in so you're putting in the
input the environment and so you should
get here did everyone see that so you do
estimate parameters and then choose
environment in the in the box and then
you choose here and we now need to
supply the output and that's in the same
file so you just supply the same thing
okay is that clear and then the third
thing we need to do is design our model
and you click model design model and you
get here so let me know when you've got
here and we only have two minutes left
actually so is everyone caught up with
that good okay
so we need to tell the thing what the
model is so here you're going to have to
type in the column heading of that's in
your file and in my case it was maze and
then put ad species but you'll have to
put in potato or yam or fire or whatever
it was it was in the file that you
randomly chose okay and then choose here
most of those things I think all of them
actually you want our which tells it
it's a real number it's a continuous
number you got that one you guys is
everyone roughly at this place and then
now if you click on the thing so I'm
going to click on maze I'm going to get
this and I say add leash and then here I
need to type in the my predictor
variable but if I get it it will
recognize it it will kind of guess so in
my case I've only got air temperature
and then you add it we got that far guys
everyone and then you say let's make it
a Gaussian response everyone there
because we're nearly there you know
we're doing really well we're about to
train the model and now if we hit back
on here is going to go back to our our
estimate parameters step now but now
we've filled in the model and we've got
everything the input the output in the
model and we can hit go and if you guys
tell me that you can see a blue bar
moving across the screen I'm going to be
really happy because I think that's
about as far as any reasonable person
can expect to get with a prototype tool
who's got a moving blue bar yes that's
great well these two groups three that's
really good and if anyone doesn't have a
moving blue bar certainly don't blame
yourself because don't forget this is a
prototype it's very hard to make these
tools the UI actually intuitive so I'm
not going to blame anyone for sure but
I'm just very happy that anyone has got
through that and so what you'll have
seen when the blue bar runs that this
thin up here this is the output of the
action has popped up the chain you see
that so click on the chair
mean and one of yours should say optimal
air temperature for whatever you've
modeled and if you click on that little
circle next to it you should see a
histogram and that is the bayesian
posterior probability distribution of
the optimal air temperature for whatever
it is that you've just modeled so can
anyone see that histogram oh I'm really
happy now that's really great all right
that's really good so now i'm gonna i'm
going to go through this very quickly
now because we really don't have much
time like one minute so one minute minus
two minutes i think so i think what
we'll do is I'll go through quickly if
you keep up that's great if you don't I
hope you realize that you know more
pointing and clicking and get all the
way through to what you saw before so
let's go and read let's go and actually
re simulate that model for those
original points so we can compare it to
the original so here we go keep going
off to keep up point click we're in this
chain we go to simulate distribution and
then parameters okay
so we've supplied the parameters for a
simulate distributions that we need to
supply the environment which is the one
called environment and we need to supply
the model which is the one at the top
their minds called model maze but yours
might be called model potato or model
yam tell it to take the air temperature
values from the chart and we get our
simulated distribution we can spring off
from the simulated distribution to a
mate chart step now the problem is that
that file doesn't include the lap long
positions so we're going to supplement
the mate chart by clicking input 2 and
we're going to click on our environment
again because that file does contain the
lat/long values and it will match the
rows so we just merged two tables now
choose pins do X as lon which should be
showing their minds not showing why not
that's me let's try again oh it is lon
why is that and then we can now we could
color it according to the pictures but
don't instead choose size and choose
pred now I've got pred maze but you'll
have prayed yeah more pred cassava
whatever you chose and you should see a
crazy kind of plot like this you got one
of those oh absolutely amazed that's
really great and if we choose and we can
resize those so I like to choose to size
it from 10 to 20 so just change that
number 2 10 to 20 you get a nicer
looking plot like this
and now if you click provenance again
okay go to the end where it says chart
now before it was the chart action this
is the chart itself now use that in a
new multi view and then choose whichever
view you fancy now now you're in there
you can choose the other panels by
choosing the white space here where it
says select an object and choose any
other chart that you've generated and
you will have generated to others okay
now we really are nearly done now
finally can you see there's a thing that
says exports at the top just here export
there click on that and save you
wherever you want to save it like the
desktop or whatever like on the desktop
and give it a name like last time one or
whatever it might be hit save
all right now what I want you to do
ready for this want you to open a new
tab in the browser and I want you to go
to that same old URL again AKA ms / dm0
and we're going to choose local storage
and we're going to hit this button down
here which is the import button and go
and find that file that you just saved
it's a zip file that's okay double click
it and you should see that multi-view
open in front of your eyes now if you
click provenance you can see everything
behind it everything you did and if you
go all the way back to the start and
click on your import file action and you
see there's a thing called metadata
which you didn't talk about yet you can
click on that and you can see exactly
when you started this whole thing so the
point I'm trying to illustrate there is
that everything you've just done is
stored in that one file everything you
did and you can now email it to someone
else and all they've got to do is go to
that same URL and read it in and they
can see everything you did when you did
it and they can change the options if
they want they could change the fetch
climber options they could alter the
model they could change the
visualizations etc now see now that I'm
torn because we're like this far from
pushing a model at FC two now so it
depends on who minds that was seven
minutes behind so this is um I don't
mind if anyone leaves right but there's
there's there's cuz it always there oh
no that's a different matter oh no I'm
sorry I'm okay now that's a different
thing okay well I'll just really quickly
show you them that you could if you'd
wanted to you could have gone back and
you're not going to keep up this gets
just too fast right you could have gone
chain analyze chain parameters publish
model pick the model
click that and click that okay and
that's now put the maze model that I
develop into fc2 and if you did the same
thing then there be a yam model and a
potato Mon wait so we were within like
10 minutes of having good you know you
guys made the models really I you know
okay i know you followed the screen and
they're now available for anyone to run
anywhere in the world for the past or
the future at any scale right those
models that we just built is the idea so
and that is just so great how that work
so i know you made up for for the fact
that we hit fetch climate really hard
and it got slow earlier because we
really did well there's that is so
brilliant so again let me just say from
the bottom of my heart thanks so much
for sticking with it was a long
afternoon after a long morning I know so
and you know thanks for being willing to
try these things if anyone wants to get
in touch anytime please do these are
just prototypes just the beginning and
you know thanks for being good sports
trying fetch climate listening to me
lecturing on about Bayesian statistics
and trying distribution model I really
really appreciate the interest and with
that I'll say thanks very much she is
thanks much true</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>