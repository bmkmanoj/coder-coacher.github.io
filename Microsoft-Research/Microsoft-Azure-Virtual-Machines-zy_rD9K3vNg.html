<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Microsoft Azure Virtual Machines | Coder Coacher - Coaching Coders</title><meta content="Microsoft Azure Virtual Machines - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Microsoft-Research/">Microsoft Research</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Microsoft Azure Virtual Machines</b></h2><h5 class="post__date">2014-03-21</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/zy_rD9K3vNg" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">in this video we'll look at as your
virtual machines well look at the
different kinds of VM types that are
available in Azure talk about the
different kinds of disks and images and
then we'll walk through an example where
we see how easy it is to create a new
virtual machine that contains popular
libraries for data analysis there are a
couple of ways to get a virtual machine
up and running on the cloud and we're
first going to look at cloud first
provisioning what this means is that we
build and configure a machine in the
cloud it does not exist as a separate
physical machine anywhere before hand
there are three ways to do this you can
build it by clicking through the azure
management portal or you can write a
script to do it either on Windows or on
other operating systems
finally you can write a program which
calls the azure REST API s
once your choice of provisioning is made
you will need to select the image and
instance size to start from the newly
created disk will be stored in Azure
blob storage service and your machine
will boot while we stress that Windows
Azure does not only run Windows VMs it
does of course run Windows servers very
well windows server runs great on it and
many very popular Microsoft applications
like SharePoint and sequel server also
work on Azure right out of the box when
you run Windows Server on Azure you can
run Active Directory DNS fax print and
document services is and many other
services for more information on the
Microsoft server products that are
supported on Azure please consult the
hyperlink shown in the slide
only certain distributions of Linux are
officially supported Susa enterprise 11
service pack 2 openSUSE 12.1 cent OS 6.2
and a bun to 12 point o for virtual
machine images of these distributions
are provided by partners for experts in
each other distributions of Linux can be
installed as bring your own Linux
however some integration work will be
needed for all of these supported
Windows and Linux servers virtual
machine images are available in the
azure gallery which is available from
the new vm creation portion of the azure
portal
virtual machines can be allocated in a
variety of sizes the ones displayed here
are just the list available as of this
video but new and larger ones are being
constantly added now let's take a look
at the actual process a virtual machine
creation in the azure portal after
clicking the big new button at the
bottom you're presented with a menu that
looks like this select the virtual
machine item and then you can see the
option to create a virtual machine from
the gallery when you select from gallery
we are taken to this screen on the left
is a menu so you can filter down the
list of images or look at all the images
that are available the middle section of
the image gallery displays a list of
images that you can create and store in
Windows Azure the my images section on
the far left can be populated by
capturing an existing Windows Azure
virtual machine using Susa studio to
build a migrated image or uploading your
own virtual machine as I'll explain
later by selecting platform images we
are presented with a list of just
operating systems by selecting a
particular OS of interest we get a
description of it after you select the
image you want you assign a name to the
virtual machine specify a size and
create the administrators login name and
password for Windows operating system or
specify the authentication method for a
Linux operating system some platform
images have minimum size recommendations
noted in the image description another
place to get virtual machines is the VM
Depot this is a Microsoft operated but
user contributed repository of virtual
machine images because disks are an
important aspect of how virtual machines
work will take a little time to talk
about them and their configuration on
Windows Azure here is a screenshot of a
running Windows virtual machine you can
see that there is an OS disc which
serves as the C Drive this appears to
the virtual machine as a SATA disk that
is persistent across reboots of the VM
there is also a D Drive labeled
temporary storage this is also a SATA
disk but it is not persistent this means
that if the VM powers down and then
powers up the data stored there will be
lost
however the disk is local to the virtual
machine meaning that it has a very fast
connection there can then be any number
of data discs attached to the machine
these are stored in the azure blob
service and are persistent however they
appear as scuzzy and not as SATA drives
there are some important differences
between the OS disc and data disks as
highlighted on the slide
data disks are larger than the OS disk
and can be added and removed without
rebooting the system but they cannot be
imaged also for tuning system
performance the cache behavior of the OS
disk is probably preferable as I
mentioned earlier the OS disk and the
data disks for your virtual machine are
stored in the azure storage service this
means that not only is the data
persistent across reboots but also they
inherently share the same intrinsic
benefits of anything that uses as your
storage they are highly durable being
replicated three times within a data
center and then another three times in a
second geographically distinct data
center now let's look in more detail at
virtual machine images themselves so far
we've talked about disks for the virtual
machine and the various types of them an
image is a different kind of thing
images are based operating systems which
can be cloned and then started up as new
virtual machines they have been sis
prepped and cleaned and can only be
created by uploaded by capturing a disk
however is a container for data that is
exposed into the running virtual machine
you can upload your own virtual hard
drive file and mount that as a data disc
or you can create new ones during
virtual machine creation one of the nice
things about VM images is that you can
then transport a machine from your
facility into the cloud one of the key
benefits of infrastructure-as-a-service
is flexibility and control the Windows
Azure solution provides the capability
of not only moving VHDs to the cloud but
also allows you to copy the VHDs back
down and run it locally or
another cloud provider this is great for
testing out production issues or any
other need where we require a copy of
the production server another use case
is when you already have a golden image
your institution uses for server
provisioning or you have a VM running on
premises that you would just like to run
in the azure data center first you
upload the VHD to a storage account from
there use the portal to add it as an
image if it's already been sysprep or as
a disk if it's a pre-configured VM then
you can spin up one or more virtual
machines using it the azure vm gallery
is really the easiest way to get up and
running with new virtual machines on
azure these are pre-configured high
quality virtual machine images which
have been built by Microsoft and
partners the azure portal assists the
creation and configuration of new
machines by grabbing information like
SSH keys and assisting with proper Drive
provisioning however Azure also supports
very well the use cases of customers
that want to bring their own Linux the
customer is responsible for creating
their own linux image and capturing the
configuration appropriately it's
important to note that the OS must be
running under a hyper-v virtual machine
if you're using VMware the VMDK file can
be converted using Microsoft virtual
machine converter now let's walk through
creating a simple virtual machine using
the VM Depot this machine will include a
variety of popular data analysis tools
like our studio and Python we will look
at provisioning the Machine configuring
it and ultimately we will demonstrate
connecting to a running ipython notebook
instance on our new VM the image for a
virtual machine is stored in the vm
depot the vm depot is a library of open
source virtual machine images that the
online community has contributed you can
browse the depot and start a new virtual
machine based on an image you find there
or you can add your own image to the VM
Depot to share with others although the
VM Depot site is maintained by Microsoft
Microsoft does not manage screen or
provide support for the contributed
images to access the depot you can
browse the website at vm depot ms open
tech comm here we can see there are many
images created by users and upload it to
the vm depot the one we're interested in
for this
video is the azure data analysis one
clicking on the image title takes us to
more detailed information page about the
image including a list of which regions
it's available in and the end points
that are available in the image once
it's created another way to browse the
VM Depot is via the azure management
portal here I've signed into the portal
and I've clicked on the virtual machines
tab on the left I can click the images
link at the top and now I can see
there's a link for browse VM Depot at
the bottom clicking on this brings up a
UI within the azure management portal
that lists the same images as on the web
page we'll scroll down to Azure data
analysis and we can see the same
information here to actually add to this
image to our account we click the next
button and now we can specify the region
we want to copy it into and the storage
account to use by clicking the checkmark
we will start the copy of the image note
that this particular image is very large
and we'll take it roughly 20 to 30
minutes to copy we can see the copy
begins and will take a little while
here's another copy of the image I've
made before once the image is finished
copying we simply need to register it
with our account and now we can actually
create new virtual machines using this
image to do so we simply click new
virtual machine from gallery and on the
left under my images we'll see the name
of the image we just copied first we
need to enter a virtual machine name
then we choose the size machine we want
we create then the username and a
password now it's very important for us
to remember to write down the username
and password or stored in a password
manager if we forget these there's no
way for Microsoft to retrieve them and
we must reset the virtual machine this
next pane sets up a simple cloud service
for this virtual machine it's ok if you
don't know exactly what a cloud service
is they're not really the topic of this
video so I won't say too much about them
except that they're a way to create
dynamic scalable web services using
Azure VMs and it's
messaging infrastructure since these are
built using VMs this pain appears here
in our case we're just spinning up a
single note of our Azure data analysis
VM so we can create a new cloud service
we need to ensure that our cloud service
name is unique within the cloud app net
domain and also we should make sure that
the region is the same as where the
image is located by default the only
endpoint defined on this virtual machine
is the SSH one we need to add a few more
in order to play with the spark and
shark project we need to add a mapping
for a port 40 40 now we can click the
check mark and azure will start creating
a virtual machine we can see that the
provisioning process is started and
after a few minutes the dashboard will
show the status as running now our
virtual machine is running will use
putty to SSH into it the address we put
in is the same as when we typed in
during the VM configuration we can also
see the host name here the username and
password is the same that we configured
as well in the VM configuration wizard
great now we're logged in what we can do
is start the ipython notebook on this
machine and connect to it with our web
browser ipython was already installed on
this image okay let's use a browser and
navigate to it now we have to use HTTPS
and we'll click here to accept the
self-signed certificate and continue to
the website now the password that
ipython notebook is expecting is the one
that was created by the folks that
created this VM in this case it is
capital e la s ta CLO UD 1 2 3 a clot
elastic loud 1 2 3 and now we're in we
can create a new notebook and then start
evaluating Python code in ipython
notebook to execute the cell we hit
shift enter
and here we have an inline plot from
matplotlib now let's go back to putty
and reset our password we'll shut down
the server and we can start a python
import the ipython module and run the
pastor function and now we'll enter our
new password now we need to copy this
password value the hash value and we
need to edit the file user dot ipython
profile n p server the notebook config
dot pi and down here where it says
notebook password we need to put the new
password value that we generated and now
we'll exit and save and our notebook
server will start with this new password
we've created now I use the Nano editor
but you can use whatever text editor you
would like that is installed on this VM
each year Microsoft Research helps
hundreds of influential speakers from
around the world including leading
scientists renowned experts in
technology book authors and leading
academics and makes videos of these
lectures freely available</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>