<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Anton Epple - Java everywhere again with DukeScript! - Curry On | Coder Coacher - Coaching Coders</title><meta content="Anton Epple - Java everywhere again with DukeScript! - Curry On - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Curry-On/">Curry On!</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Anton Epple - Java everywhere again with DukeScript! - Curry On</b></h2><h5 class="post__date">2015-07-22</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/3-hSOsfYdu4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">okay so my name is Anton eppler I'm a
trainer in a consultant and I run a
little company called netbeans
apparently according to the program
actually my company's name is Duke off
but I'm on the NetBeans dream team and
that somehow get mixed up so I'm not the
owner of NetBeans if you wanted to meet
him you have to go to larry ellison i'm
on twitter monaco tony and i run this
website Duke's crib com where we share
news about our technology so Duke script
is a solution to a problem that appeared
to me and other fellow Java developers
travel front-end developers when we
found out that swing or later than Java
fix didn't get us on the interesting
devices it was really around that time
when the iphone came up and there was no
java running on the iphone and then
android came along and while there was
some kind of java on android even if
there are discussions about it it's a
fork of java in a way and even though
that is great we cannot really write
cross-platform applications as we could
with swing and that was basically the
motivation so we said we want to get
java running on all these devices again
and and so we thought how can we do that
we do not want to
implement a whole UI toolkit as the Java
fix guys did because it really really is
hard work to port this to new platforms
so we thought for we were looking for
for a simple way of getting the same the
same results even better results
actually so what text what we created is
or what our our main aim was to create a
job single source cross-platform
framework single source one source that
you can deploy and you can employ to all
the platforms and while cross-platform
and Java because we like the language
and Stephen chin who is running the gel
one the Java one content chair and is a
long time javafx guru said Duke's crib
is the lightweight chava fix he always
dreamed of drink up that was very nice
of you so and but but before we start I
would like to show you a little demo if
you'll see a couple of times and I hope
the screen resolution will allow me to
run it and it's a little game so i'll
start just this is netbeans who have you
is using NetBeans we're using for Duke
script development we're using mainly
netbeans you can also use eclipse for it
but we're mainly using that means so
this is a little game you probably know
it from you have these tiles and you
have to bring them into a certain order
and you can shuffle them or you can try
to bring them into a certain order and
that is a light breakfast a simple
graphical game and we wanted to have
this as a demo application to run it on
so how does this work what we need in
order to make a Duke script running on a
platform is we need a Java Virtual
Machine and we need an HTML rendering
component and with somehow instrument
this HTML rendering component from from
Java and glue them together and by
gluing them together what we do is
basically we bind the UI to two models
to view models that are written and
defined in Java so what happens is J and
the JVM execute the business logic that
is written with our Duke script api's
java api s so developers just have to
code each other and duke script and its
java api is control this renderer
component and which renders the result
so the one the example that you just saw
was using java tags so we have the hot
spot virtual machine we have our dude
script api's and we have the check xine
web web view component and this web few
components capable of rendering html5 so
that's that's really pretty easy to do
because it also has really nice
integration with javascript so we can
call under the hood javascript api and
execute JavaScript code manipulate the
Dom do stuff like that and that's really
really easy to do on other platforms
it's slightly more complicated like all
Android for example we have dalvik which
is a nice virtual machine or art now and
we
have you stripped api's but we have the
android webkit back view which is
typically if you invoke javascript in
there it's invoked asynchronously so we
have to do some tricks to make it work
to really make it synchronize but just
as with with the demo I showed you on on
the desktop I can show you that it works
here as well got this little game here I
hope you can see it it's just the same
game and I'm even I'm incapable of
solving solving it on iOS we are using a
virtual machine called Robo p.m. or it's
not really worth the machine what it
does is under the hood it uses llvm to
compile a Java code to native code and
it has a P is for all the controls that
we have on iOS and one of these controls
is the UIF fu and that's what we're
using here to make the applications
right so I'll show the same demo
okay so i should also be able to solve
this one okay so it's it's the same
source code that runs on all these
platforms and it's also in this case the
same UI definition but we do not only
run on iOS and Android where we somehow
have a working machine or something like
that available we also run in the
browser as basically a replacement for
applets but a better version of applets
actually and this is done via two
virtual machines that we support right
now back to browser and TDM these are
work chava virtual machines that can pre
compile code to JavaScript Java code to
transcript or run it be interpreted mode
real Michael and we use a chrome or
another browser as the executing
environment so in this case the html5
prendre also hosts and runs the Java
Virtual Machine so when I can show you
the same game hopefully in the browser
okay so it's here and you can see it it
runs and looks just the same as on the
other platforms but it's basically
everything tab is happening on the on
the client sign on all the browser right
everything is happening on the client
side everything is happening in the
browser jib script is pure pure
client-side technology we have something
for the for the for the server side as
well because what we can do is we can
reuse code we can reuse the model code
the same model code on the Java EE
server as we as we use on the client and
the same api's that's the benefit of
using Duke script in combination with
the server but in general our main focus
is to provide client site UI toolkit for
you so the applications because I heard
this question today you do not need to
check your phone in order to run these
applications these applications run are
you can deploy them to the app store and
you can sell them there we have this
example application fair minesweeper
that is on google play and on itunes and
i can show it to you it also runs in the
browser it's fair minesweeper I don't
know who of you has played minesweeper
before okay that's the best turnout
deserve from goodbye questions today
okay well the the thing in the beginning
of minesweeper you typically click
around in order to free as many
fields as possible and the fair
minesweeper that doesn't allow that
because you should start thinking right
now because here but you can hear it
must be a bomb okay so if I click
somewhere here randomly it will just
punish me and put them on there so
that's fair minesweeper nice game you
can download it it gives you maybe to
two hours of fun and but it's just a
demo application okay so what we have
for the developers is we want to make it
easy for them to create the applications
and we wanted to make it really smooth
to develop the applications to modify
the applications and to test them so
because I'm running the company
web-based like the plug in the best
supported IDE is netbeans but you can
also use eclipse for for the development
I haven't tried with IntelliJ IDEA yet
because I started I wanted to do
something with it but the maven support
was really very counterintuitive so I
didn't get your projects to run but
basically we are our projects are Mabel
base or we have we provide archetypes or
maven so you can get started with any
IDE basically but netbeans is really
very well supported so we have this
plugin and with this plugin we can
create an application and we can pick a
compile it you can run it but we can
also visually debug it and i'll show you
that
so I create a new application there's a
category Duke script if you install the
plugin and i'll give it a just a
artifact ID carry on and the base
package
and then I can choose whether I want to
run this in a browser on Android devices
on iOS devices and so on and the
interesting fact about this this message
here is that it's also in the Duke
script so you can also create Dukes you
can embed cube script in swing
applications you can imagine script each
other except occasions and it's quite a
non-intrusive so in case somebody tries
to create an IDE based on on that that
is supposed to run in the browser
sometimes this API look perfectly fit in
here it would run on the browser as well
and we provide two basic archetypes that
you can play with the first one here is
the crack archetype that has a server
component and a client component to
illustrate that we can share code and
the second one is is a pure client
archetype and you can decide whether you
want a little bit of demo code or if you
want to go with them with an empty
sample we'll add a little bit of demo
code
ok
so you see for each of the platforms we
get a project created this is the
Android one this is the iOS one this is
a web version and this is a shared
client code that will run in Java X and
this is basically the container for
these for these modules that builds them
so in the meantime the projects have
been built and I should be able to run
them let me do like this
and this is a very simple devil we have
you can see the I type something into
the inbox and it synchronizes with these
these little boxes down here and I can
do some some rotation stuff like that
very simple application that shows you
it's basically a tutorial in its own to
show you how to write tests and stuff
like that what I want to show you what
this is how easy it is to develop with
Duke script so screen real estate so you
have to invest in a second screen if you
want you really want to do this it
really makes life much easier but what
you can do here is you can inspect life
inspect the application see here I have
this man here and it gets highlighted in
the running application and I also get
the CSS styles and everything it's just
like JavaScript developers know from
Firebug or are these chrome developer
tools but really integrated into your
IDE so you don't let do not have to
leave your IDE in order to do something
with the with the sample and you can
also manipulate the code here for
example we have these spans here and
this one has a margin on top of zero and
I change the margin and the application
life updates so I can manipulate the
view just save and
and code and edit the view edit CSS and
so on and that's quite nice I can also
debug the application obviously it's a
java application by the way i can not
only debug it in on the desktop but i
can also debug it on the device so if i
run the application on on my ipad i can
debug it and then set breakpoints and it
will stop so start the application again
in debug mode and i set a breakpoint
here and in the background something is
happening the I've stopped on this
breakpoint and i can now inspect the
object what is nice about model objects
in deep script is that they are have a
two-string method that creates a chasing
message so you can immediately see how
the fields are the properties are filled
and you can see the values okay so sorry
I'm confused because of the layout
because of the layout because of the
smaller resolution okay
so we have this debugger and since
recently we also have hot swapping and I
have to change something in the code
there before it runs
because there's a bug in the
spring-loaded framework that we use for
this but I do a clean and build order to
make sure that it has the most recent
version of the bug fix and I run the
application again and now I want to
change the code so first first I changed
something here type prog again and now I
go into the data model and in this data
model there is there are some some
methods for example this here is
responsible for splitting the string in
the input field and creating these
little words okay and in here I'm going
to before I split the message put
everything into our case and then I
split the message so just hit save go
back to the application and the
application now has changed as well so I
really did did hot swap the class fine
here and that is really nice because in
Java you can do that because the data is
separated from the class file so we even
keep the state so JavaScript developers
have something similar they can also
write a a JavaScript code and can sit
safe but they need to reload that means
they cannot keep the state of the
application and we can keep the state of
the running application because we use
Java so that is really really nice you
can develop your application while it's
running it's much nicer I you have to
trust me if you have a second screen it
makes life so much easier but but
imagine that this is really nice for
client-side development we also have our
own version of Chase at any JavaScript
developers here okay you know chase
fiddle so we've got our own small
version of chains fiddle where you can
run the application in the browser what
is really cool about this that it
actually runs that it actually runs
travel see in the browser so you can
like a cold here with code completion
and so on and you can hit compile and it
will compile the application in the
browser and it will run it in the
process but we don't really use it just
for for demo purposes typically and just
to show that we can what we are using in
order so in order to program the
application our AP eyes are following
the model new new model pattern and that
is basically compa created from a view
the view is in our case in our example
HTML and the view knows nothing know
something about the view model but the
view model doesn't know anything about
the view will come to why this is really
helpful you know in a second and the
view model knows the model the model is
basically the rest of the application
and can you can do something can get
data from the server or so but the view
model is basically what our java api is
are very good for it and in order to
define the view model we didn't want to
go the chopped up half the typical java
path is that you create a property and
you forget you have a setter you have
property change support stuff like that
and that is really annoying there's
really a lot of code for nothing so what
we did instead was we created a couple
of annotations the model annotation and
property
and this is basically as well it looks
already like like adjacent message
basically you define that he want a
class named task it should have property
name title of type string and property
of name complete of type boolean and
this is what the annotation processor
will generate for you and since Java 6
the annotation processors can do that in
the background and that works in Eclipse
as well as in netbeans it's basically
ide independent they will create the
class for you compile the class for you
and you will have it available
immediately and here's another more
complex model that also uses the class
we define first so this is basically the
view model of a to-do list application
and then the generated class can be used
right away and you can say like new
costliest you will get tasks this Gator
has been generated automatically for you
so here that's what you get the task
it's a type array so we'll get back a
list and we can add a new task fan so
it's really very very simple and you can
also have functions that's that's what
the what the view can call so because if
you click a button in the view something
has to happen with the view model and
for this we define functions and for
example
add task function very simple way it's a
new task and get it to the to the list
of existing tests um to string of our
model creates a json string so it's also
very easy to send to serialize
deserialize the message and send it to a
server and get it back from the server
so if you already have restful server
it's very easy to integrate it with this
we also have some very very simple ways
of creating rest endpoints in your
application so you just have to call a
method basically and it will
automatically retrieve data from the
from the rest service convert them into
objects and you will get objects
basically it's really very comfortable
and the last thing that you need to do
if you use the generated class is you
need to apply the bindings okay so on
the view side we have purely declarative
so you have simple HTML and what we do
is we using knock out and to
declaratively bind the the properties of
our HTML to our data model in char so
here for example we say we will bind the
text to the full name property of the
currently scope of the current scope
object and here we can do for each so we
can iterate over a list of addresses in
this time in this point and inside of
this for each block the scope is changed
and
binds to two properties of the objects
in there and this is really nice for
doing test-driven development so this
pattern because the view knows the view
model but the view model doesn't know
the view we do not we can coat the whole
rod logic without having a coded the
view and we do not have any references
to widgets or something like that inside
of our inside of our view more classes
so for
application a different application can
show you that the Roman
have an application you can find this
and github where I created a lot of
tests for the for the view model and
it's the few model that I just defined
in the in the slides so for this view
model i can now crow the test just using
j unit power testing g in this case test
add task i want to test how to add a
task so i create a new task list view
model and i will make sure that the list
is empty
so I get the tasks
check the size
00 and then I'll manipulate the text as
a set input which manipulates which
which basically simulates typing buy
milk and I'll call add task which
basically simulates the button click and
then I can do again my cert equals and
make sure that now I have a size of one
and let's run this test
and the test has succeeded I can also
prove that age doesn't succeed if I run
it
okay so without the need to start the UI
question yeah that is what what we
defined here in the so here I use these
these ad model and egg property
annotations to create the task list view
model it has been created in the
background for me to an annotation
processor exactly you define them like
this and if you have functions like the
add task function that we called you
define it like this so you have a static
method here that the actual class can
call it too so that is really cool
because when I was doing UI development
we had the problem that that typically
you could not really test the
application right it's really very hard
to test the application you have to have
robot class or some strange frameworks
that launch the application simulate
button clicks and stuff like that but
with the pattern like this it's really
easy so you can test the full
functionality of your view and just in
the end right the view and attach it and
this also enables the really nice
designer versus developer workflow so
you can give all the work the design
work to an external designer and he can
do he can create the HTML and the CSS
and everything for you so you code your
java application and you give a design
to a ready-made design to an HTML
belapur and he will be able to create
the view for you and I tested this sorry
I tested this myself by buying a design
on one of these graphicriver pages on
online and gave it to a service that is
XHTML to or PSD to HTML on the web I
didn't have any communication by the
webform I just submitted the design and
they gave back the design to me and I
applied it to the application and work
perfectly so I can also show you this
application running on here I was really
very happy with that because a lot of
frameworks claim that they can do that
that they have a designer developer
workflow but typically what they have is
they have a declarative design format
that they can give to their designer and
he will have to learn something new and
he will have shitty tools and will be
frustrated and nothing will come out of
this and with this approach you can just
use HTML and there are tons of HTML
developers out there designers who can
really work with that so and here we
have the application
and i can add something here and do
stuff with it and it works brilliantly
and that is really really nice because
it really streamlines your development
process um we have a lot of additional
api's we wished we had even more and
fortunately the community is starting to
pick up the different goals for example
you have a canvas API for doing a direct
immediate mode rendering so you can
create games or something like that we
have a camera API so you can take
pictures with your device and store them
on the device or send them through the
server we have gear location API so you
can track GPS signals we have a map
component based on leaflet and we have
an additional partner here in Czech
Republic and he creates this controls
j/s which is basically a rapid
application development tool that makes
it really easy and this is the last time
we all do it's also very neatly
integrated into NetBeans
and so with this tool what you can do is
you can drag and drop controls here and
containers and do data binding all of
that just by clicking some buttons so
for example if I select the component
here i can see data bind to traduce and
this will bind to Duke's crib model so
you do not even have to create the HTML
you can also do for simple applications
like this drag and drop style
application development and it will
create a cross-platform application
really why
and works just the same as as the other
part okay switch back here
we're currently developing walk going on
to new platforms like raspberry pi
embedded systems it already runs on the
Raspberry Pi but we are also targeting
for a customer different platforms and
we are also targeting Android wear
because anywhere does not really work
yet because it doesn't have a web
component web renderer component so I
cannot run to you script applications on
my watch right now which is horrible and
what we have to do in order to support
that is also to support native controls
unfortunately our API is also allow that
okay I think we have we have a few
minutes for questions we have humans for
questions okay okay components I I won't
even okay I won't even start the subject
because it's like few hours or days stop
right about native versus HTML but
actually you know have a lot of stuff
already like this but you're writing
HTML front and then writing it on iOS on
I'm dry and so on so my question is
what's what's more because I understand
the whole point of this is that Java is
compiled and run on the on the client
side and actually they're saying the
communication could be just done as a
rest service like anything else and so
the basically this is the whole the
whole thing that browser is running a
compile Java so the basic idea is to be
able to create cross-platform
applications in in town again but still
why are using
HTML ng right yes we are using an HTML
engine we that is what we're currently
doing we can also use native components
that is what what is currently under
development for android to make it
really more native and then it's
basically just a real native application
that is while it's running it's running
in the virtual machine in dalvik and
it's rendering native components so it's
a native application okay so I have
another question yeah follow up a little
bit what is the because you only just
mentioned but there is a canvas API yeah
so what is the support for different if
I don't want to go with your with your
model viewer video and model think what
is different support for our frameworks
front-end frameworks so if you don't
want to use model view viewmodel you can
for example use the canvas API and
because that that is not that is totally
independent of it so it really depends
on what kind of applications you want to
create if you want to create a form
based application then this model view
viewmodel is perfect yeah if you want to
create a game then it's forgetting its
may be nice for the screens or something
like that but but not for the fourth for
the game itself but how would you rent
separates now you can combine them and
you can separate them you can just
create an application and just use
canvas and don't use the the one of you
view model appearance at all it is
possible I the the basic demo if you we
also have an archetype
four cameras and if you use that there
is no knockout it's just just like a
drawing program or something like that
okay so there are 30 more projects are
aware and also the 14 / canvassing the
DEMA for weekend was this summer on the
web I would fight yes yes you funny
you'll find it here that's great yeah ok
so I would extend the previous question
in a much broader direction what is
January your story for interoperability
with existing libraries on sites
platforms so if I want to reuse some
JavaScript library when I compile to the
charger platform how would I do that how
easy it is it's actually fairly simple
we have we work inspired basically by
quit who the google web toolkit and we
have an annotation javascript body that
makes it really easy to create a
type-safe wrapper around javascript
existing JavaScript API so for example
the canvas canvas API is doing exactly
that if you want to see how to do it
just download the canvas API and see how
it's done in there you basically write a
call javascript call with also with an
annotation and define which parameters
go in there and edit to do it talking
about code
so like for example exactly like here so
this is basically even showing a more
complex interaction so we call you in
the body this is Java Script code and
what we talks in here is a stream
message and we call confirm method in
JavaScript which will show a dialogue
and then as a result we will invoke the
java function there is this also copied
from basically from from google web
toolkit this specific syntax for calling
for calling in to char so you can
interact in both directions
unfortunately that's all the time we
have ok so just ask me afterwards</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>