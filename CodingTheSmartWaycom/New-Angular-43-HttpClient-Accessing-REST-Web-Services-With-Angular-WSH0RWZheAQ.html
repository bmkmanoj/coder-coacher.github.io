<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>New Angular 4.3 HttpClient (Accessing REST Web Services With Angular) | Coder Coacher - Coaching Coders</title><meta content="New Angular 4.3 HttpClient (Accessing REST Web Services With Angular) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/CodingTheSmartWaycom/">CodingTheSmartWay.com</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>New Angular 4.3 HttpClient (Accessing REST Web Services With Angular)</b></h2><h5 class="post__date">2017-07-22</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/WSH0RWZheAQ" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hi guys this is a person again from
coding too smart Wacom and in this new
tutorial I'd like to introduce you to
the new HTTP client module of angular
1.3 which has been oyster few weeks ago
and the HTTP client module is the
replacement of the HTTP module of the
angular versions before and with a new
HTTP client module it is getting easier
to deal to deal with HTTP back-end
interfaces like REST API also and in
this video I'll show you how to make use
of this module how to activate it in
your angular project and we will be
building a simple sample application
showing you how to deal with HTTP
requests and responses by using that new
module okay so now the first thing we
need to do is to set up a new angular
4.3 project so that we can make use of
the HTTP client module and be HTTP
client service within that project and
again the easiest way to do so is to use
the angular command-line interface to
set up a new project if you have not
installed angular CLI yet on your system
you can do it by simply typing in NPM in
stall - tree for installing it globally
and the package name is at angular so I
should CLI and we would like to have the
latest was a version so I'm using a
latest here so if you execute this
command it's going to install angular
CLI on your system I have already
installed angular CLI so I do not need
to execute the installation right now
instead I can directly make use of
angular CLI to setup a new project and
the way we are doing that is you
the ng command and the option new
because I'd like to initiate new project
and the project name I'm using here is
ng HTTP client one so hitting return and
you can see it's downloading the project
template and then installing all the
dependencies by using NPM again in the
background and it takes a moment to
complete okay here we are you can see
installation has been completed
successfully now I'm opening up my text
editor which is atom here for that
project directory now let's first first
change into that newly created folder
okay and then opening up atom like so
pane here we are okay and if I now take
a look into package JSON as you can see
here you may notice that the angular
version the project template which is
installed on by English Elias who are
using version 4.2 point 4 for the
angular core packages here and we need
to change that to actually make use of
angular 4.3 here so I'm updating the
version information here again so
changing all the four point two point
four to four point three point oh
okay so now we have the version
information here updated I think that
everything we need to do here
okay so let's save it changing back to
the command line and now I need to
execute npm install within my project
directory again so that the angular
packages are updated to version 4.3 so
here you can see it's downloading the
packages again and installing everything
okay here we are and now we are ready to
go with the project and making use of
HTTP client module to try out if
everything is working correctly I'm able
to start up the development web server
by using ng or surf okay this is
starting up the development web server
as you can see here on localhost port of
4200 its pecking my application and now
you can see compiled as successfully and
if I now access localhost port
4200 in my browser you can see the
following result it says welcome to app
and that shows me that everything is
working and our application is running
without any errors and now we are able
to extend that application and the first
thing now we need to do is to activate
HTTP a client module for our application
and the way we are doing that is opening
up the SRC folder here opening up the
Tampa subfolder and then I need to open
up app dot module dot TS that's the file
where the main application module is
implemented and it's called a module and
in that file now I need to add the
following import statement here so it's
import HTTP client module and it's
Weibull in the following package name it
add angular common slash HTTP okay and
the next step will need to complete here
in that file is to add HTTP client
module as it is now available here in
that file to add it to the array which
is assigned to use import property of NG
module so here right after a browser
module is imported I'm adding a comma
and then an HTTP client module so that's
all what's needed to activate HTTP
client module for our application and
now within our components and that will
be the next step we can make use of the
HTTP client service which is part of the
HTTP client module so let's switch over
to app dot component PS here in the same
folder and that is the main component of
our application and let's use that
component to to try out HTTP client
service and to do that we first need to
import HTTP client here and again it's
imported from the add angular / comment
/ HTTP library and having imported HTTP
client here in that file we now can
inject it into our component class so we
are using dependency injection here in
fact and the way we are doing that is
adding a constructor here to your class
at component so let's use the keyword
constructor and then adding
the parameter here by using the private
key word and the name of the HTTP and we
are defining that it should be of type
HTTP client so what's happening here now
is set by using the private key word we
are defining that we would like to play
to create a class member which is called
HTTP and that class member is initiated
with some instance of HTTP client so
that way in which dependency injection
is working in angular and now within our
class we can access the HTTP client
instance by using HTTP and make use of
that service and that services offering
us various methods like get post put
delete patch hat and JSONP that are
those methods we are using to you on you
which HTTP requests and the methods and
names are reflecting the various HTTP
request types HTTP works we can use and
yeah let's see a first example where we
would like to use HTTP client to request
the data by using the get method next
now to demonstrate of the usage of HTTP
client to request data while using an
HTTP GET request I of course need
back-end
I can send my request to and I'm using
the github API the REST API to request
github user profile data in the next
step and to do so I'm adding here on the
on in it
interphase and extending here my class
definition by implement is not what I
like to do just a tab it implements
keyword here and then saying on in it
and this requires me to add another
method here to my class and that method
is called ng on in it ok like so and now
in this method which is a lifecycle hook
method which is called after the
component has been initiated
and that the first thing we are doing
after initiating we are using the HTTP
client instance which is available via
resist dot HTTP calling the get method
here and then the get method is
expecting one parameter and that's the
endpoint the URL of our service and in
our case it's HTTP API then dot github
dot users and then I'm passing over the
name of my github user profile ok those
n as the get method is returning and
observable I need to subscribe to that
server so that I'm informed when the
response is arriving so I'm using the
SUBSCRIBE method here and then defining
an event some handle handler method
which gets of the data here which is
returned in the response and now I can
simply print out that data object here
on my console like so ok ok so now let's
check the result of the browser and
I needed to open up the development
tools of course and here you can have
access to the console and you can see if
I extend to the object here you can see
that's when I'm printing out that's my
data object I'm I'm getting back in the
HTTP response and you can see it's
printed out so I can directly print out
the information which are returned in
JSON format here by using HTTP client
which is a very handy and you can see
here I have all the information about my
github profile label and that was
whatever that is what I was expecting to
get back actually okay now that you have
an overview of your properties which are
Weibull here in our response JSON object
you may try to do something like data
dot log into accessibility also log in
property which should be my github
username for example so and if I go back
here you can see I'm getting an error
message failed to compile and it's
saying property login does not exist on
time object and the reason is quite
clear because of the data object we are
getting back is under type to see what
the gist of type object and time object
is not defining any of those properties
but if you would like to use the
documentation here to access properties
of our object we can cast or let's say
transfer or translate our object to a
typed one and the way you can do that
I'm going to show you in the next step
so let's define an interface here of
course you can do it in a separate file
about to keep a same simple for the
moment I'm using the app dot component
on TS file so we have everything in one
place and we are defining that the
interface should be called you
responds clay and the interfaces now
containing the properties which we would
like to access by using the dot notation
so let's use three properties here I'd
like to lock in property available which
is of type string like to have the bio
property available and maybe let's say
the company property type string again
so now we have the user response
objective label here and now I can use
cast operator to convert my response
here to a typed one which is no longer
of type object but instead of type user
response to do that I'm using the
following syntax here so user response
okay and now I'm not printing out only
the login information
let's change it a little bit so let's
say we would like to have a text first
which is saying use it up in K and then
the value here and I needed three times
of course because I would like to print
out three properties so next is a bio
information which is dated by own now
and finally of company information which
is data dot company okay now let's check
the output and browser comes over again
so now you can see it's printing out the
information I would like to have the
values are accessible by using the
documentation and that's the way you are
converting your response into a typed
one okay so it's possible if we are
dealing with HTTP requests and are
trying to access a back-end API that the
request is failing because of various
reasons maybe a poor network connection
or
other circumstances which cannot be
foreseen so maybe the back end is not
reachable anymore there are different
cases therefore it's always a good idea
to include code for error handling in
your application and the way we can do
so is very easy we can pass to the
SUBSCRIBE method here we can pass in a
second handler method so the first one
is the message we are using to print out
the information here on the control and
now we can include a second method here
for handling the error case so again we
using two fat arrow syntax here to use
an anonymous method and this time we are
printing out the information that an
error has occurred okay so now maybe I'm
changing the URL here of our service to
something which is non existing and now
if I go back to the browser you can see
it's probably not error appeared because
by using that URL services not reachable
and error is happening here we are also
able to get more specific error
information therefore we need to import
them one more class type and that is
some HTTP error response from the add
angular / comment / HTTP library and now
we can use that type here to define that
the air parameter is of exactly that
type HTTP
our response like so and now within that
method we can use that object to check
for example if error dot error instance
of error we can assume that we are
facing in this case a client-side error
so let's put a crime decide error or
cured out here to the console and in any
other case we can assume that this is a
server-side
sick which is failing
ok so let's use a text so our side they
were cured here ok let's save it
check it that in the browser and you can
see as we are dealing with URL here
which is not existing with the
server-side error because the server is
not available
ok next let's move on to another example
and see how we can not receive data but
sent data to an endpoint by using an
HTTP POST request but before doing so
let's remove from the error here so that
our application is working without any
errors again you can check it here ok
it's getting back to values so it's
working so for the next example to use
an HTTP POST request we of course need
again a back-end a REST API which is
able to receive a post request and what
we are going to use here is the adjacent
placeholder project which is a way well
here at Jason placeholder dot type a
code calm and this is a service you can
just use to yeah
have Weibull an online REST API for
testing and prototyping so it's offering
that online REST API just for testing
purposes and you can see if I scroll
with a bit down it's listing the
resources so actually the end points
where Jason placeholder is offering
services and here you can see the posts
endpoint is offering us to send HTTP
requests - which are of type post that
is exactly what we would like to do so
we will be using this post API endpoint
here of Jason placeholder - to implement
the next example in our application so
back in my energy on init method here in
app component I'm now adding a second
coil here and this time we're using the
HTTP client object again which is HTTP
and then call the post method here and
the URL here now is HTTP Jason place
holder and type type echoed dot-com
slash posts because that is the endpoint
which is a Weibull for receiving post
requests and now we are handing over a
second parameter here which is the
object of data we would like to send and
this object is containing three
properties first we are sending a title
information here which is containing the
text foo next we are ascending the body
property with a text bar and finally the
user ID was well you won okay now we can
subscribe because the post method is
again returning and observable so let's
subscribe here to that observable was
the first method which is invoked if
everything is working correctly and your
arrow is secured let's simply print out
what we are getting back so the response
object and don't forget to add the error
handler here as well so to keep it
simple just printing out the information
that the narrower secured okay like so
now let's see if the post request is
working at the browser again and here
you can see in in the console output I'm
getting back another object here which
is basically containing the data I have
been sending to the service but now
we're getting back also the property ID
which shows that the data set has been
accepted and an ID was assigned so the
post requesters is working and that's
the way how to deal with the post method
of the new HTTP client service so the
next thing I'd like to talk about our
interceptors and interceptors are one of
the new features of eight of the HTTP
client module interceptors are just
sitting between your application and
bagand api and by using interceptors you
can transform basically a request coming
from your application before it's
actually submitted and send it out to
the backend
and the same is of course possible in in
um the other direction if a response
arrives from the back end and the
Interceptor can be used to transform
that response before it actually arrives
in your application and it's further
processed so to see how interceptors are
actually working on the best way to
learn about interceptors as singers to
try out another example so that's the
next thing we are doing we are going to
extend our application that introducing
an interceptor class so to implement our
interceptor class let's create a new
file here in the app folder and let's
name that file github our dot in inter
sector dot TS and from the name you can
already guess that we will later on use
an interceptor for a special use case
for adding github authentication
information to you the request header
but for the moment we will use a bit far
to implement a very simple class so
let's get started here first we need to
add a few import statements here or
first let's import in ejected ball from
the angular core package next let's
import a few things from the angular
common HTTP package what we need here is
HTTP wend HTTP interceptor HTTP
Tambor and HTTP requests a flag so next
let's import observable from the our
experience rivalry okay
so let's implement that class its export
class get up of intercept tour click
implement the HTTP interceptor interface
okay and we are adding the add
injectable decorator here okay and as we
are implementing so it implements the
HTTP interceptor interface we need to
add the intercept method here within our
class implementation and the intercept
method is being called to do on the
actual web of the Interceptor so to take
the original request and then maybe
manipulating that request and then
passing it on for further processing to
normal application again and therefore
this intercept method needs some two
parameters the first is a request itself
and let's of type HTTP request any and
it needs the parameter which is called
next and that's from the HTTP can do
to which the request is finally passed
on ok the method is returning an
observable of type HTTP event any okay
let's so now we can add a simple return
statement here return in length the dot
handle and it gets passed in the
original request and of course now you
can see this is not doing anything we
are just taking the original request and
passing it over to the next HTTP handler
of our application so no manipulation is
going on it's simply routing through the
request without making any changes are
they correct a few hours here we need to
add Brent geezers here ok and that needs
to be observable we need to add to be
here and here as well ok now everything
looks good ok next thing to activate
that our interceptor class for our
application we need to provide it to our
application and the place where we can
provide that interceptor is our main
application module and that in file app
module OTS so I'm opening that file
again and to provide it here we need to
edit it to the providers array here but
first we need to import a few things we
need to add from here at the import
statement from the HTTP library we need
to add something which is called HTTP
underscore interceptors so and then of
course we need to import our interceptor
class which is kit
KUB our interceptor and we are importing
it from our app folder here so it's
github
I'll start interceptor km episode and
now we can add an object here qzr
provided array which should contain
properties three properties we need to
use a provide property here which gets
assigned the value HTTP underscore
interceptors then we need to add the use
class property here which gets assigned
the name of our interceptor class so
github our interceptor and then we need
to edit the Mountie property which is
set true here and setting it to true
needs to be done in order to tell
angular that HTTP underscore
interceptors right here is an array of
values rather than a single value so
that's the way we are providing our own
interceptor class for application and
now I can save it okay once again go
back to the browser and check ok
everything seems to be working as
expected of the post with the get
request is delivering the data as before
and the post request is on is adding the
the post object here to the beckoned API
and suspected so nothing has changed our
interceptor clouds has been activated
but as our interceptor class is just
putting through the get request without
any changes and nothing has changed and
we cannot see any effect here ok we are
changing that in the next step and
making use of our interceptor class to
add a header data to our get request to
to deliver authentication information in
the form of the personal access token to
the github API okay so let's get back to
our interceptor class here let's change
a few things
okay so let's change here into the
method intercept and add the following
method call here so I'm calling the
request dot clone method to clone the
original HTTP request and then changing
the header data and assigning to use the
headers property a new header field
which is done by using the request dot
headers dot set method and the header
field I'd like to add is authorization
and I'm assigning as the following value
token and then I need to insert my
personal access token to the github API
here I'm going to generate a better
token from in a second but first let's
complete the implementation here okay
now we have the auth request object and
that object is containing the new header
information and of course I need to
change it here as well I'd like to pass
on to my application that changed
request object so that the request with
the header field attached is sent out to
the back to the backend so I need to
pass that into the handle method here
okay let's save it
okay so now to generate my personal
access to me let's go to the github page
I'm already logged in and now from my
users menu I can select the Settings
menu item here and if I scroll a little
bit down here you will find within the
developer settings menu box here you
will find a link personal access token
okay and then I'm saying generate new
token just entering a description here
and I'd like to access the user data and
then I can hit a general token okay and
now you can see that's my token just
copy that token here and insert it here
right after token
okay let's save it okay so now you can
check it again in the browser and you
can see so everything is still working
the post request is receiving still the
data which is good because of this now
shows us that our authentication header
information is working and to prove that
I can go back to my code and maybe
remove the leading 5 here from the
chosen so that I'm using invalid token
and if I now go back to my application
you can see now I'm getting back an
error message here a server-side error
in my get request which says
unauthorized which is correct because
I'm using an incorrect token here and if
I just insert the five here again so the
coding should be correct now again I can
go back and you can see I'm receiving
the data again and just shows that my
interceptor class is working now in my
application and getting the header
information within my get work request
before this request is sent out to the
github API
this was a person from coding the smart
wave calm hope you enjoy my new video if
you do like it please don't forget to
subscribe to my channel here on YouTube
and other don't forget to take a look at
my website at coding the smart way calm
and I hope very much to see you in the
next video bye</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>