<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Introduction To Firebase Cloud Functions | Coder Coacher - Coaching Coders</title><meta content="Introduction To Firebase Cloud Functions - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/CodingTheSmartWaycom/">CodingTheSmartWay.com</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Introduction To Firebase Cloud Functions</b></h2><h5 class="post__date">2017-09-28</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/QP8sjZuOlFY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hi guys this is Sebastian again from
coding the smart way and today in this
new tutorial I will give you an
introduction to a new five eighths
functionality and that functionality is
called cloud functions so your web and
mobile applications often require to to
run back and code for certain tasks like
maybe sending out notifications
performing some long running tasks like
resizing images generating assemble
nails and so on and yeah in the
traditional approach this back-end code
is running on your own server and now
with the firebase cloud functions
functionality you will find a complete
nodejs environment in the cloud where
you can put your JavaScript code into
and let's a function to run in the cloud
and that is great because it has various
advantages first of all you do not need
to run your own server which is great
because you do not need to to maintain
the server which is a lot of less work
you do not have your isolated code base
for your back-end code in your project
you only get built for the actual
execution time of your cloud function so
you only pay as you go you do not need
to pay for a running server which is
running all the time you only pay for
the execution time of your deployed
cloud functions and the cloud
infrastructure is of course highly
scalable so whether you are running your
account functions which is the one time
of day or you are executing thousands of
function cards
each hour that depends totally on your
use case the infrastructure is there and
you can just use it and it scales and
you just pay for what you are using so
in this tutorial you will get an
overview about firebase cloud function
functionality I'll show you what are the
triggers which are there to invoke cloud
functions how to deploy how to start a
project and then deploy your cloud
functions to firebase and then we will
go through an example step by step so
that you can see how to work with cloud
functions and yeah stay tuned here we go
so let's start by taking first look at
the firebase website and you can find it
that firebase google.com and do you make
use of the various firebase services and
you can find an overview of their
services here on the start page you can
see cloud functions on one of the
services firebase is offering so to make
use of all those services of course you
need to have in firebase account and you
can create one account for free here you
can sign up with your with your Google
credentials and if you have do so we can
go to the firebase console to to go
there you can click here go to console
I've already opened up the firebase
console here in a second tab and here
can create a new fire based project or
just choose one of your existing ones I
have prepared here the firebase demo
project and that is the console view of
the project and from the left side
navigation menu here you can see you can
access all the console views for the
various services and one of the menu
items here is called functions and if I
now click here on functions you can see
it takes me on
the functions dashboard here you can see
it here it is containing an empty list
so far because I have not deployed any
cloud functions to this project yet
later on when we have deployed our first
functions we will go back here and then
see that we can get an overview of the
deployed functions we can make use of
the lockstep here to get insights into
the executions and we can go to the
usage tab here to get an overview of the
times how many how many times each of
the cloud functions has been executed
okay if you would like to take a look at
the firebase cloud functions
documentation you can go back here to
the website here we'll find a link which
is called Docs so if I click on that
link here you can see if I go to guides
here and then selecting here from the
left side menu the menu item cloud
function that's the place where we can
find that the original firebase
documentation for cloud functions for
example here inside the writing
functions of section you can find a list
and of course if you click on one of the
items here you will get a description a
list of triggers which can be used to do
to trigger a cloud function for example
we have the real time database trigger
and this trigger can be used to execute
a cloud function each time a certain
change happens in the real time database
so for example if a user if data is
added to a certain node in the real time
database you can register a cloud
function which then is executed and is
processing those
later further or sending those data to
an external API or something like that
you can respond to those triggers and
the real-time database trigger is one of
them we have as you can see here we have
the authentication trigger we have the
analytics trigger the Cloud Storage
trigger the HTTP trigger and the cloud
pub/sub trigger and those triggers are
the starting point to register a new
cloud function here in the firebase
cloud functions functionality ok now
let's start with the initialization of a
new firebase cloud functions project and
therefore I'm opening up my terminal
window here and the first thing now I
need to do is to make sure that of the
firebase COI the 5/8 command-line
interface is installed on my system and
the way to install firebase COI
is to use NPM here so what you need to
execute is NPM install minus G and then
the package name here is firebase -
tools so this command will install it
globally on your system that's the
reason why I'm using the - G option here
I have already installed on the firebase
Eli here on my system so right now I do
not need to install it here and execute
this command instead I can move on and
use the firebase CLI and the way to use
it else to use the command firebase so
you can see it here if I hit return I
will get back all the options the
firebase command-line interface is
supporting and the first thing now I
need to do here on the common
9 is to log in to firebase and the way
to do so is to use firebase lock-in okay
so hit return and you can see I'm
already logged in if not it is opening
up a browser window so you can log in
with your firebase account and then you
are logged in and it's it's storing that
log in here for the terminal session so
now we can use the firebase a COI
we are authenticated and we can make a
use of it to initiate our cloud
functions project next
so first let's create a new project
directory and I call it FB - functions
ok then I'm changing into that directory
and within that directory I'm executing
firebase in it functions ok like so and
now you can see it's starting up the
firebase command-line interface again
and it's asking me a question here and
select the default firebase project for
this directory so here I can go through
all of my projects I've already created
in the firebase console I can say create
a new project here if I would like to do
so but for the demonstration right now
I'm using an existing project and that
is the firebase demo project here so I'm
selecting it then hitting return and now
the command-line interface is
downloading the project here and it's
asking me now if I would like to install
NPM dependencies right now and the
default option here is yes and oh that's
what I would like to do so I simply need
to hit return here again to answer was
yes and now you can see it's starting up
NPM and NPM is downloading all the
needed dependencies here to the node
modules folder installing all the
packages right inside that folder and
here you can see it's done it's saying
firebase initialization completed so the
project has been initialized
successfully and now we can go on and
open up this project in our favorite
text code text editor okay so I'm using
Visual Studio code here so I'm opening
up a Visual Studio code so here we are
and the first thing now we can do is to
have a look at the project a structure
and then you can see it here it on the
top-level directory here it contains a
file file based on a scenario as
containing firebase settings which is
empty right now and then we have the
folder here which is called functions
and within that folder first of all
there is the node underscore modules
folder where all the NPM dependencies
have been installed to the dependencies
of the projects are defined in package
dot Jason you can see it here basically
we have two dependencies that to the
firebase - admin package and the
firebase - functions package and the
most important file here is index dot IJ
s that file you can see it here is
containing the first line of code here
which is requirement of requiring here
is a fire
functions modules so we can make use of
it here and the index dot JSP is the is
the file and the project where all our
cloud function implementations goes into
so I'm removing all the comments here
inside of the index dot JSP and then
I'll start with the implementation of a
very simple first cloud function so I'm
saying exports I'm naming the function
I'm saying how a world here then I'm
using the firebase - functions module
which is a Weibull here with functions
I'm saying functions dot HTTP because
what I would like to use here for the
first example is an HTTP trigger and the
wave registering count functions for the
HTTP trigger is using functions HTTP dot
on request and the on request method
call is expecting to get passed in the
cloud function we would like to register
and me using the fat arrow syntax here
so I'm using a function which is taking
two parameters the request and the
response object basically and then I
have the function body here and to keep
it very simple for the first example the
only thing I would like to do is to send
back a text string to the browser so
amusing the response object here last
dot sent and passing in the text string
saying hello from firebase cloud
functions
claim let's save it okay I need to add
on semicolon here at the end so now the
next step is to actually deploy that
HelloWorld function to the firebase
servers so that it is a Weibull in the
cloud and can be executed by using these
HTTP trigger here and I'm switching back
to the terminal once again and to deploy
that function here from the project I'm
again using the firebase CLI by using
the firebase command here this time
together with the option deploy and then
I need to say - - only functions to only
deploy cloud functions here and the
projects otherwise I would get back an
error and using the command this way now
is deploying all the functions it can
find an index dot JSP wanted to deploy a
specific function if I have already
included multiple functions in my index
dot trans file I can use a column here
and then pass over the name of that
function and for example say hello world
but as I have only one function here in
my file I do not need this right now so
I can say firebase deploy - - only
functions and hit return here now you
can see we are getting back the response
that it is deploying to then I selected
a firebase project it takes a moment
here to complete and if everything is
working as expected we will finally get
back a message saying that the
deployment has been done successfully so
just wait for that process here to
finish
okay now you can see it's saying deplore
complete that means deploy has been
completed successfully but you have a
word function here has been credited
successfully so the result is as
expected and what we are getting back
now our two URLs the first URL here is
pointing to the projects console so onto
the back end and the second one is a
function URL and that is a URL which can
be used to trigger the function
execution because we have a registered
HTTP trigger here for that function and
that is now the URL here we can use to
trigger the function call
okay so let's copy this URL here and
then switching to the browser and
passing in that URL and you can see we
are getting back the text here hello
from firebase cloud functions so that is
what our mess at our cloud function here
is doing so far and if I now go here
back to you on the functions console and
refresh the page
you can see here in the functions
dashboard now the hello world function
is listed so the deployment has been now
made and again you can find out the
functions ul here you can see the
executions counter and you can go to the
logs here and you can go to detailed
user stats if you would like so it's
listed here in the end
- bored and if I switch over to locks
now you can see it here I can limit it
to the hello world of functioning right
now you can see here it has been
executed successfully and you can see
here is a time it took to execute that
function and even in the case of arrows
you can get all the details here in the
logs view okay now let's continue with
another example and in this example I'd
like to implement two new cloud
functions and implement both functions
in such a way that they are executed in
a row so this means the first function
makes use of an HTTP trigger and takes
as part of the URL a text parameter and
the X and that text parameter is
inserted into the firebase real time
database so the user is able to by
requesting that you are able to insert
something into the database the second
craft function then makes use of the
real time database trigger and this
function is now listening for changes
written to the real time database by the
first function each time a new value is
in asserted by the first functions a
second function is triggered and then is
reading out as at a string value
converting it to uppercase and then in
asserting it in the database again so
that is some that is the second sample
I'd like to implement and I'm back here
in the code editor in index dot ajs and
that it's a place where I will put in
the implementation of both functions so
the first function R should be called
insert into dB so let's implement that
so let's add that function here by
saying exports in third into DB equals
functions dot HTTP dot on request again
the function I'm passing in a sir
expecting to get a risk a request object
and response object as parameter and
then the function bloody is some here so
now I need to first read out the text
information which is passed into that
method call by using an URL parameter
and the parameter is called text so I'm
reading out that information by saying
Const text equals and I'm using the
request object dot query dot text
because that is the name of the ul
parameter and now I have the information
label in text so I would like to put
that now into the database and to do so
I need to first of all require the
firebase - admin module so let's edit
here const admin equals require and then
i'm passing in the module name here
firebase admin - admin ok like so and
now i need to make sure that the image
initialization is done and i need to
call admin dot initialize app and
passing functions dot config
dot firebase because the firebase
property here is containing the
configuration object for our firebase
project so I can pass it in here into
the call of initialize app so now I'm
ready to access as a real time database
so I can go back to the function body of
insert into DB and now say admin dot
database which was a method here dot ref
and I would like to insert my new items
in the pass test here in the database
and then I'm calling the push method
here to actually insert a new property
here and the property should should have
the name text and is set to the value
which is available here in text
so again text so that is the code which
is needed to insert this information
into the firebase real time database and
then as this is returning a promise so I
can respond to that promise with Zen I'm
getting a snapshot here of the database
and then I can use that snapshot in that
function here to redirect the user in
the browser to the firebase real time
database view in the console and this is
done by using the response object here
and saying wrested redirect 303 and then
the I need to
pass in as a second parameter the
reference pass in the database I would
like to open up in the browser and that
is a Weibull was snapshot dot ref okay
so that is the first function here now I
will first try it out so I need to
deploy insert into DB as a cloud
function and the next step so I can make
sure that is this first function is
already working okay so going back to
the terminal and then executing firebase
deploy - - only function so once again
and again it takes just a few seconds so
that the deployment process can be
completed okay now you can see here it's
saying creating function insert into DB
that's our new cloud function
okay here we are at this time I'm
getting back of course to function URLs
one for insert into DB and one for my
previous function hello world and now I
can take this insert into DB function
URL here so let's copy it go back to the
browser and execute this request and now
you see I'm getting back an error could
not handle the request and that is quite
clear because my function now is
expecting a URL parameter text so this
request is returning an error here okay
now let's put in a question mark here
and then inserting the text parameter
here this is this is my text okay
execute it again and now you can see
it's a wisely responding with
redirecting me to the real-time database
data view and you can see it here inside
the test node it has created a new entry
it generated a new ID here and you note
and inside at that node and now have a
property called text and this text
property is set to this is my text to
that string which I which has been
included in my URL in the text parameter
was in my function call ok so this
function now is working so we can go
back to the code editor and implement
the second function which is now taking
that string from the database turning it
into uppercase and deserting the
uppercase a string value again into
same note so the next function should be
called convert to uppercase okay so
let's say exports convert to up case
here equals functions the dot database
because now I do not want to use an HTTP
trigger again instead I'm using an real
time database trigger so that is
function store database and then I would
like to listen to a certain path in my
database so i'm using dot ref and
passing in the database paths as a
string here so it's test and then i need
to include a placeholder here for the
push ID which is generated automatically
when in asserting new notes with the
push function here so i'm using curly
braces here and saying push ID that as a
placeholder here slash text so that is
of the value i would like to listen to
and then i'm saying dot on right because
i would like to listen to right events
so when new text value is written to the
database as well as when a text value is
updated i would like to to get triggered
here and so this is on right and the
function I'm passing in is taking one
parameters at this event okay and then
within the function body here I need
first to retrieve the original text
value from the database that is done by
saying cons text equals event dot later
dot Val
that is a method you claim then
converting into uppercase I'm storing it
in upper case text equals text dot to
upper case and finally in directing this
new hopper case text into the database I
can say turn event dot Dayton ref dot
parent dot child and then along the
property here should be named upper case
text set to upper case text okay so that
is the implementation of the convert to
upper case method okay now back to the
console once again performing the
deployment here
okay you can see it's creating the
function convert to uppercase this is a
new function okay here we are you can
see again I'm getting back to function
URLs and that's clear because my cert
function now convert to uppercase is not
listening to an HTTP trigger so it's not
generating a function URL for convert
uppercase
so again I'm using the insert into DB
function URL now to try it out first in
asserting something into the DB and then
expecting that as a second step my
convert to uppercase method is triggered
automatically and converting the text to
to uppercase and in asserting a second
value in the same note in the database
so let's try it out copy that URL going
back to Chrome here so now I'm setting
text to this is my second text Kay
executing this request so now you can
see this is a result I'm getting back so
let's click here on test you can see a
second note has been inserted containing
my text information here and the
uppercase text value is now available as
well so this is the proof that my second
cloud function has been triggered
correctly after this text has been
inserted here and that the uppercase
text is now containing the exact same
string value but converted to uppercase
so this was the bass stem from coding
the smart way dot
thanks very much for watching I hope you
enjoyed my video if so please don't
forget to my to subscribe to my channel
on YouTube please also don't forget to
visit my website at coding the smart way
calm and it would be very great if I see
you in the next video stay tuned bye</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>