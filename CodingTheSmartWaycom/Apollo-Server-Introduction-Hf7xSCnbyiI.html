<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Apollo Server - Introduction | Coder Coacher - Coaching Coders</title><meta content="Apollo Server - Introduction - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/CodingTheSmartWaycom/">CodingTheSmartWay.com</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>Apollo Server - Introduction</b></h2><h5 class="post__date">2018-02-03</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Hf7xSCnbyiI" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hi guys this is Weston again from
coating the smart way calm and in this
new video I'm going to show you how to
set up a graph QL server by using Apollo
server the policy of a project can be
used within node.js server so we are
going to use no treehouse we are going
to use the Express home or framework for
setting up a web server and then we are
using Apollo server to create a graph QL
endpoint so a very practical example in
this video stay tuned
so the upon server library helps you to
connect a graph QL schema to an HTTP
server which is written on note Egeus
and by using a power server it's
possible to use all common HTTP servers
which are a Weibull for nodejs like
Express connect rest if I and so on and
in this particular example we are going
to execute in this video we are going to
use Express and the first thing we now
take a look at is the project's website
and you can see it here so if you would
like to find any information about
Apollo server you can go to apollo graph
QL comm slash servers and you will find
all the information you do need you will
find an overview showing you that graph
QL is working on Apollo server is
working together with many more
platforms we will be focusing on the
JavaScript one here and you will also
find a link to the documentation if you
would like to dive deeper into the topic
so let's start in the first step now
with setting up a new project in you
know trance project and to do so I'm
switching over to the command line and
okay so the first thing I need now to do
is to create a new empty project
directory so I'm naming this directory
note - Apollo like so and then in the
next step I'm just switching into that
directory and now I need to create a
initial package.json file because we are
setting up a node.js project we are
installing dependencies and libraries
wire is the node package manager and all
the dependencies will be will be start
in the package JSON file so the easiest
way to initiate an empty package dot
JSON file is to use the npm init command
then i'm using the - y parameter here to
skip all the initial questions you are
being asked when executing NPM ended
with a default option yes so here we can
see it that's the response a package dot
JSON file with that content is written
and if I now take a look inside the
directory you can see okay the
package.json file is available and now
we can move on with the installation of
dependencies we do need in our project
so the first thing I'd like to add to my
project is the barbel compiler because
later on we will be using when we're
writing our script we will use es6
features so most recent version of ACMA
script our specification and the node.js
runtime is not supporting es6 features
yet so we do need a compilation which is
taking our year six our syntax and
transpiling it to a formal version of
the atmos crypt specification and that
is exactly what babel is doing so the
first thing let's install babel by using
the ant
command again saying npm install - -
save - death because it's a dependency
which is all only needed at development
time and then we do need two packages
here the first package name is babble -
CLI and the second package name is
babble - preset - E&amp;amp;V okay so I'm
hitting return you can see the node
package manager is now fetching and
downloading the packages and
dependencies of those packages and
installing everything into a node
underscore modules folder so here we are
you can see everything has been
installed successfully if I now take a
look inside the folder you can see we
have a node underscore models folder
available and that's exactly the place
where all the dependencies which are
being installed Vyra NPM are stored in -
okay so now that the Babel dependencies
are installed we do need to activate
battle for our project and the way to do
so is to add new file to our project so
let's say touch and the file we do need
here is dot bärbel r/c so and now i do
need to include some current content in
that file and to do so I'm opening up my
code editor which is Visual Studio code
of course you may use any other editor
you may like I'm loading my project
directory in Visual Studio code right
now so you can see it here okay and here
on the left side in the Explorer view
you can see
here is my note underscore modules
folder my package dot JSON file and of
course the MT dot babble RC file we have
just created okay and to activate bubble
and need to include curly braces first
and inside that object here I need to
have one property which is called
presets and as a value I need to assign
an array here containing one string
element and that screen is a and B so
like so and now the configuration is
ready and bubble can be used in our
project so starting the bubble compiler
now as possible by simply typing in
bubble and then passing over the file
which should be compiled as an argument
but a starting to bubble compiler
manually after Africa change is very
inconvenient and there is a great
extension which is called bubble watch
and by using bubble watch you can
automate this task and so that the
compiler simply running after every code
change so that bubble is watching for
code changes and then doing the
compilation automatically and not only
doing the compilation automatically but
also starting the note areas web server
process again and making sure that at
the note server is running on the latest
code base and to add bubble watch as a
dependency to your project let's once
again switch to on the command line and
installed it by using NPM install bubble
- watch and we would also use the dash -
save their def attribute here ok like so
now it is added and to be able to
use Bible watch later on let's move back
to visual studio code and open a packet
or J'son and we are looking for a script
section which you can find here is
there's only one script configured yet
this is a test script and here I'm going
to add a second entry which is called
death and by using the death script we
are starting Barbeau - watch for a file
which is not yet created but will be
created in the next step which is called
server dot j s so okay I need a comma
here as well so back at the command line
later on when the server toria's is
created we can start up a babel watch
and starting the watch process by using
NPM run def this is executing the
command which is configured for the
death script so that's the easiest
option of running babel watch and yeah
having established an automatic process
for doing the compilation and for doing
the automatic restart of the server
process so of course we do need a few
more dependencies first of all we do
need to Z Express framework so let's say
NPM install Express so this is
installing the framework again into the
node underscore modules folder so here
we are having installed expressed
successfully and now we need to add via
NPM install again the graph QL package
then we need a package which is called
graph QL - tools and finally we need the
Apollo server package for being used
together with Express and that package
is called Apollo and
server dish Express okay
hitting return once again and again the
download process is started everything
is downloaded and installed here you can
see now all three packages have been
added with their respective dependencies
choose a project and now we are ready to
go with the implementation so to
implement our node.js server we first of
all need to add a new file to the
project where the implementation goes
into so let's create a new file here in
the root project folder and that file is
called server dot j/s and let's start by
implementing a very simple note jeaious
Express server and now we need to start
with importing Express from the Express
library next I can now create an
instance of Express and storing it into
app by calling Express and then I need
to configure the first endpoint so that
my server is responding if the user
tries to access that endpoint and that
is done by our apt-get and then as the
first parameter here I need to pass in
the endpoint and the second I need to
pass in the the handler function which
is then activated if this endpoint is
accessed and returning the result which
is delivered back to the browser so this
function I'm implementing it as an error
function here is taking two parameters
so request and and response object
and then we are using the response
object is sent back by calling the send
method here just a string which is
hellworld
in our case just to have a first simple
string return to the browser okay and
then I need to start up the server
process by calling ab dot listen and
then the first thing is a port number
the server should be executed on so
let's choose part number 4000 and then I
can pass in a callback function which is
executed if the server process has been
started successfully so again I'm using
error function here just printing out a
text message to the console saying
Express server running on port 4000 like
so so that's a very basic implementation
of Express server responding to the
default pass here and returning a string
hello world is a browser so now we are
ready to try it out so to start up now
the compilation process was Babel and
the node.js server process we can use
the configured script by executing npm
run death and to do so i'm just opening
up the integrated terminal here in
Visual Studio code so you can see it
here so that we have everything here on
one screen and now I'm already inside
the project directory and I can now type
in NPM run death hit return and you can
see we are getting taxi message
Express server running on port 4000 so
this is coming from our handler function
here in the call of F dot listen and
this is just confirming that everything
has been started up successfully and now
we can switch to the browser and try to
access
pod four thousand on our local machine
so localhost hit return and you can see
our server is responding and sending
back the string hello world and that is
proving that the server is working and
that we now can move on with the next
implementation step and that is adding
Apollo server to our project and
establishing a graph QL endpoint so back
here in the code editor I'm expanding
the implementation in server dot J ass a
little bit by first of all adding two
new import statements I do need to
import body powers or middleware from
body posture okay and then I need to
import graph QL Express from the Apollo
- server - Express library okay then I
am able to remove that end point here
because we do not need at that default
end point just returning a string so I
can remove it here from my application
and instead create another end point so
by calling app use again this time I'd
like to attach the endpoint to the URL -
graph QL so that it will be accessed
when you when you are opening up URL
local host port 4000 slash graph QL in
the browser
okay and then I need to use the first
middle wave here that's body Parsa doc
Jason and the second middle where at I
need to use here as a graph QL Express
middleware okay like so so saving it and
now you can see it's returning an error
message saying Apollo server requires
options and the reason is we have
started up graph QL Express here as in
middleware but we have not supplied any
options and the graphic ul server is
configured with a schema we have no
schema configured yet so I'm simply
passing an empty object here later on we
will use that object to include a schema
but for the moment we are just leaving
it empty
so next and let's add a second endpoint
to our project and the second endpoint
should be for graphical graphical is a
graphical interactive in browser graph
QL IDE and so by using that tool you can
send graph QL queries mutations and so
on to your server and so try out if
everything is working as expected
so for our testing purpose is always
good to set up a second endpoint and
make a graphical a Weibull so how to do
that first of all we need to import a
second middleware here from our Apollo
Server Express library and that
middleware is called graphic graphical
Express okay like so and nollet at the
second endpoint again at the endpoint is
added by call
F dot use and the first parameter here
is the URL extension of that endpoint
and this time we are using not graph QL
we are using graphical instead like so
and attaching the middleware here so no
not connected the Express middleware
like so so let me remove that here which
was added automatically and that
middleware here is expecting a
configuration object and the
configuration object must contain a
property which is called and point URL
in this property needs to be set to a
string value and the string value is the
end point of our graph QL server so it's
graph now slash graph QL so just to make
graphical aware of the end point we
would like to access by using the
graphical IDE so this configuration
property is needed here okay so now we
have two endpoints one for our graph QL
server and one for the graphical in
browser graph QL IDE so that's the two
endpoints we would like to set up so
let's try a server out switching to the
browser and then we can try to access
the graphical pass first so it's local
host on port 4000 slash graphical and
you can see it's working so the
graphical user interface is shown and
you can see it here the graphical user
interfaces basically spitting to split
up into two areas on the left side you
have the graphic
editor where you can type in your query
Summa tations you would like to send to
you the end point which was configured
and on the right side you will get the
result at the moment the right side is
without having executed any query yet
showing an error message you can see it
here error expected undefined
to be a graph QL schemer and that that
is because if I go back to the browser
we have passed an empty object here to
our graph QL express endpoint and yeah
having not attached a schema yet and
that is what our graph QL server needs
to work probably so the next step now is
to implement and define a schemer
implement resolvers and then attach both
to the graph QL Express endpoint to
actually get our graph QL server working
okay to bringing the code which is
needed to on define the schema let's
create a new file here and add it to the
projects folder and this file should be
called schema Dante s and what we need
inside a bad file is yeah just one one
array holding the type definitions let
me just name it
type deaths okay and then I'm starting
here with brackets and inside those
brackets I'm starting with a string and
this should be a multi-line string so I
need to use backticks here like so and
then I can start writing of the schema
definition code and the first thing I
would like to define as a custom type
and so I'm starting with a keyword type
and then the name of the custom type
and this is cause so I'd like to
implement a graph QL import endpoint
which gives us access to
yeah cause records and each of those
records it should consists of a set of
properties so let me begin with an ID
here which is an int which is an integer
then we need a title for the course
which is a string then the core should
have also which is a string again then
we do need a description for the course
topic and the UL so that is our custom
type course and next let's define our
query types so that starting with type
of query and again curly braces so I'd
like to define two queries the first
query is called all courses and is
returning an array of course objects
because the all courses query should
simply return all available courses so
the next query is just called course and
this query is taking a parameter which
is called ID and which isn't which is of
type int again and I'm attaching an
exclamation mark here just to defines as
this parameter needs to be supplied so
it's mandatory and this query is
returning an object of course so we are
selecting just one cause by ID no array
okay like so so now we have type deaths
a Weibull here is that's our definition
of the types and next we need to add
resolvers for our queries so to add the
code which is needed to create the
resolvers
let me add another file to the project
here and this file is called re solvers
is okay and resolvers are simple
functions which are assigned to the
queries we have defined and or to
mutations and those functions contain
the logic which is needed to retrieve or
a manipulate data in the back end when a
certain graph QL query mutation is made
from the client so this is some part
containing the data logic so I've
already prepared an array here let me
insert is that array first this array is
called causes data and this is just an
array of three test data sets so that we
have this in memory store we can work
with in in the resolver functions so as
you can see here each object contained
and that array consists exactly of those
properties we have defined for the
custom cost type in our schema and
having that causes data array ready here
in resolved shares we can now start and
implementing the resolve of functions we
do need for our all causes and cause
query so let's start by setting Const
resolvers and then assigning an object
here so we are using curly braces and
within the object we are using the query
property and the sign another object
here and that object is now containing
the assignment so we start with the all
causes query and we are assigning of the
resolver function here counselor
function so I'm using that syntax here
and so just to return all courses from
our array we have to find the causes
data array I simply need one line of
code and that is return causes data okay
and that is all I do need for the
resolver function for the oil causes
query so next the cost query again now
again a resolver function but this time
we are expecting to get the ID parameter
so that we can select from the array z
course which has bad ID so I needed to
define my error function here was the
following set of parameters first we
have root that's a parameter which is
simply not used and then we have a
second parameter and that parameter is
containing all the properties all the
properties which have been passed to
that query and I can use that
yes X syntax here to just extracted the
ID property so that it is available by
using the curly braces syntax here and
then okay
so and then implementing the logic to
retrieve one single record which
corresponds to the ID and that is done
by saying return cause a state and dot
filter and now I need to pass in a
filter function and again I'm using an
error function here so cause getting the
following logic return because course
dot ID
like so and then we are using three
times the equal sign for checking if the
ID is equal here and then we are
selecting the first element from that
array we are getting back in case we
have multiple matches which should not
be the case and to select the first
element from the array we are using the
index selector here by using the bracket
syntax and the first element is a
Weibull at index 0 so we need to include
the 0 here between the opening and
closing brackets ok so and finally we do
not need to you forget to X part of the
resolvers object so that we can import
it again in the schema daughter tales
file and then attach it to the schemer
and then make both away before being
used and the graphical Express
middleware okay so let's say export
default resolvers like so ok so let's
switch back to schemer jas and let me
add the following import statement here
first so now we can import resolvers
from the resolver CAS file like so and
now Z resolves object is ready
together with our type def object and
now we can build with both components
our type definitions and our resolvers
we can build up a schema which we can
then use in the middleware and to build
up the schema we do need to import
another function so import the function
we do need here is called make
executable schema
and this function is a Weibull in the
graph QL - tools library we have
installed earlier so now we can make use
of that library and import that function
and the function is used in the
following way let's define a schema
so constants Qamar and then I'm calling
to make executable schemer function here
and I'm passing as the first and only
parameter here an object in and the
object is containing first of all our
type definitions which are available and
type devs and in the second place R it
includes the resolvers object which is a
Weibull in resolvers okay like so and
now I need to make sure that the schemer
is exported so that I can import it
again in my service file and attach it
to the graph QL Express middleware and
the way it's exported here is with
export default schema okay that's all
okay now let's open up server is once
again and first of all I need to add the
import statement for schema so that
schema is becoming a Weibull here in
that file and we are importing schema
from the schemer dot JS file right here
in the project directory okay and now we
can bring in the schema here into the
configuration object which is passed to
the graph QL Express middleware okay
let's save it you can see still the
server process with babble watch it's
running here and each time I'm changing
the code here it's recognized and the
compilation is taking place and the
Express server is restarted
so that the Express nodejs server is
running on the current code okay so
everything seems to be ready now let's
check if our graph QL endpoint and
Apollo server is working by using
graphical okay back here in the browser
you can see the error which was
displayed here on the result window of
graphical is done so it seems like our
graph key our server is ready now the
schemer is successfully attached so
let's try it out by first of all writing
the query here to request all courses so
I'm using the graph QL syntax here and I
always need to start with curly braces
and now I can include my query which is
all courses and then curly braces again
and within that second pair of curly
braces I'm now ready to define which
properties I'd like to retrieve for
every single clause so I basically want
to have also the title or description
topic URL okay that's it then hit on
this execute query button and you can
see I'm getting back a data structure
which is containing here inside the data
property inside all courses a list of
all my courses three so three objects
here included and that's exactly what I
was expecting to get back by using that
query okay let's try out our second
query and request one single cause for
example the first one he was ID one so I
need to change from all courses to just
course when I need to pass and the
perimeter Rd and
signed value here which is one in that
case so executed and you can see it's
just returning one data element so again
working as expected and that is proving
that our graph to our server has been
setting up successfully by using Apollo
server and that both of our queries are
fully working so this want Sebastian
from coding the smart way comm thanks
very much for watching I hope you do
like my videos if so please don't forget
forget to subscribe to my channel on
YouTube please also don't forget to
visit my website at coding the smart way
comm and I hope very much to see you in
one of my next videos bye</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>