<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Firebase Cloud Storage With Angular | Coder Coacher - Coaching Coders</title><meta content="Firebase Cloud Storage With Angular - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/CodingTheSmartWaycom/">CodingTheSmartWay.com</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Firebase Cloud Storage With Angular</b></h2><h5 class="post__date">2018-02-17</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/C1xb_LsU31M" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hi guys my name is Sebastian from coding
this mod Wacom and today in this new
video we are going to take a look at how
to use firebase cloud start service
together with angular and there's a
library angularfire to and support for
firebase cloud starch has been added in
the most recent version so we're going
to take a look at how to apply
angularfire to in your angular
application and make use of the firebase
cloud start service so the firebase
cloud storage service is a service which
is highly scalable and which can be
integrated in your web application or
your app to store and retrieve user
generated content so for example sound
files image files video files and so on
so it's hosted on Google's cloud
platform so it's highly scalable and we
will see how to set up an angular
application install angularfire 2 and
then connect to the firebase cloud
service cloud start service and make use
of it in that video so stay tuned and
just follow along so the first step to
get started is to initiate a new angular
project and then in the next step we
will be adding the firebase and the
angular fire to library choose a project
so let me switch over to my terminal
here and to initiate a new angular
application I'm using the angular
command-line interface which gives me
access to a command called ng so if you
have not installed Engla seoi yet go to
sea lie angle
I owe and follow the steps described on
the website to make angular client a
Weibull on your system I have already
installed angular Klein
so can directly move on and use the ng
command here to initiate a new angular
project and I need to use the opt new
here so mg new and then followed by the
project name and the project name should
be mg parallel storage like so okay
hitting return you can now see of the ng
command as running it's downloading the
default angular project structure
creating that new directory mg Cloud
storage and then of the final step which
is now running installing all the
dependencies which are needed for the
angular project by using the node
package manager
NPM it's downloading all the
dependencies installing those
dependencies into the node underscore
modules folder within my project
directory and then making sure that
everything is in place and this is just
taking some seconds here to complete so
here we are you can see it's saying
successfully initialized and project ng
Cloud Storage successfully created so
everything is in place let's switch into
that newly created directory and to try
out if everything is working let's start
up the angular development web server by
using the ng command again so it's ng
surf in that case and this command is
starting up the development web server
you will see it in a second here okay
here you can see the server is up on
port 4200 here on my local machine so
localhost
and now it's running the compilation of
the project and bundling all the assets
of the project so and receiving that
measured message here compiled
successfully we can now change to you
the browser and try out to just access
that URL
so let's try it out and you can see it
here that's simply on the output of the
default angular application which has
been downloaded so you know we've made
no set no changes so far so that's all
belonging to the default implementation
and now we can move on with the next
step and the next step is to install the
firebase and the angular fire to library
and therefore I'm switching back to the
command line here
stopping the web server again and now
I'm using the NPM command to install it
and I'm using the option I here for
install and then the two libraries we do
need called firebase and angular fire
too okay
hitting return you now can see once
again it's downloading both libraries
once again into the node underscore
modules folder and installing those
libraries into the project so here we
are again you can see it completed both
libraries have been added successfully
to the project and now to begin with the
implementation let's start up the code
editor so I'm using Visual Studio code
in in that case so I can run that editor
from was in my project director here by
saying code and then dot for the current
directory and that is starting up a
Visual Studio code as you can see here
of course you are free to use any other
editor maybe you like Adam or you likes
a prime text and so on that's not really
a problem but I do think Visual Studio
code is great for developing with
angular and here we are you can see the
Android Cloud storage
project directory has been loaded into
the editor and now we are ready to go
now the first thing I need to do here
within my project I need to open up in
the SSC folder and the subfolder app the
app dot module dot ODS
because that is the main application
module for my angular application and
that's the place where I need to bring
in two more import statements so let's
say import here and what I need to
import is angular fire module from
angular fire to library and the next
thing I need to import is the angular
fire starch module because we would like
to use the cloud storage functionality
inside of our application and that is
provided by the angular fire to library
again and we need to say your slash
storage okay like so so I need to add
from here of course to okay get rid of
the error message and now I can make
those modules available to my
application and the way to do that in
angular is to add both modules in the
array which is assigned to you the
imports property here of my ad and your
module decorator which is applied to the
app module class so so far we have
browser module attached to my
application and now we can extend that
that list was angular fire module and
here I need to do something special
because of the angle of fire module has
a factory method I need to call here to
get the connection in place which is
initialized app and initialize app is
expecting to get
or receive a configuration object here
and this configuration object needs a
few properties we will include those
properties in the next step first let me
add one more module here and that is the
angular fire storage module to get it
complete
so let's complete the object which is
possibly to the initialize app method of
angular fire module and to look up the
properties and the values which needs to
assign to the configuration properties
let's switch to the browser here and
first of all you need to create your
firebase account firebase is available
at firebase google.com if you have not
created an account yet you can do so you
can use your Google credentials if you
are creating a firebase account and once
you have been locked in here to firebase
you can go to the backend to the
firebase console and from the back and
you are able to create a new fire based
project I will use an existing one I've
already created and once you are logged
in into the back and hand have opened up
a firebase project you will see the
following view here and from the start
page here from within the project view
you can click on add firebase to your
web app on that button here and this is
opening up a dialogue here which gives
you information of how to connect to
your firebase project and it gives you
your JavaScript code which can be
directly used but we do not need all of
those configuration properties which is
needed to use the API key so let me copy
it insert it here in my configuration
object then we do need the ausdom main
setting here so let's take that over to
and we do need the starch bucket and the
project ID I think so that should be
sufficient so we have those four
configuration properties now insert that
API key Oster main project ID and starch
bucket and that is all we need to get
going with the angular fire storage
functionality in our applications so now
that the relevant modules are made
available in our application we are
ready to inject the angular fire storage
service which is part of angular fire
storage module into the app component
because F component that's the default
component which is a Weibull here in app
component dot TS so we will use that
component of course you can create new
components in your angular application
and then inject the angular fire storage
service in those components as well I
will just use the component here to keep
things simple and the way to inject that
the angular fire storage service is of
course you begin with the import
statement here because we first of all
need to import that service so it's
called angular fire storage and this is
to be imported from the angular fire to
library slash storage one once again ok
like so and now to be able to inject it
here into our app component class we
need to add a constructor because
injection in angular is always done by
providing a typed construction parameter
here and that is what I will do here so
let's say private AF storage
that's the name of the variable which
cancels the instance of the service and
then we are using typescript here to say
that it should be of type angular fire
starch which which is a service class
and that is a syntax which is needed to
inject it here into the class and now we
can access all of the service
functionality by using the AF storage
class member here in the implementation
we will add next so in the next step
let's implement a first simple user
interface so that the user has of the
possibility to select a file from the
local hard drive and then select that
file for upload so to implement the user
interface I'd like to make use of some
bootstrap for classes so I need to add
the bootstrap framework here to my
angular project first and adding
bootstrap is very easy so let me open up
the integrated terminal here and visual
studio code you can see it here so I'm
located here inside my project folder as
you can see here so adding the bootstrap
package can be done by using NPM once
again and the commander is npm i for
install again and then the package name
is simply bootstrap so it's downloading
bootstrap adding it to my project
dependencies and then installing it into
the node and the score modules folder
once again and the download is running
here so we have to wait for it to
complete
okay here we are you can see bootstrap
has been added successfully to the
project and now I need to include the
bootstrap CSS file into my project so
that we can then when implementing the
template code then make use of the
bootstrap CSS classes and to do so I'm
just renaming the start dot or CSS file
here to styles dot s CSS like so and now
having renamed it to else CSS I can make
use of the import functionality which as
CSS provides by using add import here
and then importing it from the bootstrap
location in the node monomer underscore
modules folder so I can do it in the
following way inserting the tilde sign
here and then saying bootstrap slash
dist slash CSS slash boots bootstrap dot
min dot CSS ok let's save it and now we
should be ready to go to make use of
bootstrap CSS classes and the first
thing now we are going to re-implement
is the app component dot HTML file or
let's say the template code which is
implemented here in that file and as you
can see here we have a lot of content
already inside that file Weibull and
that is exactly the template code word
is responsible for outputting the page
we have saw on earlier in the browser
when accessing the angular application
and that is of course something we do
not need so just get rid of the default
code here and then we can start over
again and implement our user interface
so let me scale was a div element and
here and let's apply the bootstrap class
container
and was in that top-level div element
it's let's use another div element which
gets a CSS class card assigned like so
and then we have a div with the card -
header okay and of course we need a div
with bootstrap class card - body so and
within the header we were printing out
just the headline here and of the saying
firebase cloud storage was angular and
in the body section let's use an h5
headline here which gets a class of card
- title and the headline should be
select a file for upload okay like so
and then we do need an input element of
course to supply our application with
the file and we will use an input of
type file so that the user can select
from the hard drive and we will bind an
event handler to use a change event here
and the event handler is called upload
and gets the event parameter here we
will implement the upload method in the
next step and then we can use the accept
attribute here to specify a list of file
extensions which can be used for upload
let's say we would like to have PNG and
dot on jpg
okay so before being able to restart on
the development web server we need to
make one further adaptation here inside
the five dot angular - CIO Jason if you
are opening up the file you will find a
section which is called starts which
gets assigned an array and in that array
you will find the value starts dot CSS
and because earlier we have renamed the
file to as CSS we need to rename it here
as well so that the angular UI is then
able to find that new file so let's
include starts dot else
CSS here in that array which is assigned
to the Styles property let's save it and
now from within the integrated terminal
here let's around the server again let's
say ng surf here and this is starting up
the web server once again on localhost
port four thousand two hundred it just
takes a moment here so here it's
starting up now it's building up the
bundles once again and we need to wait
for the process here to complete and
then we can switch over to the browser
and try to access our application once
again and then hopefully see our new
updated user interface so here we are
let's go to Chrome let's access local
host port 4200 and here can see that our
user interface that's the bootstrap card
layout with the import type of file
element here and now I can click on this
file selection button here and then for
example select the test image here where
I have prepared and you can see it's
confirming that this image has been
selected and of course that's all what
is happening right now there is no up
running so far because we have not
implemented or upload Handler and that
is what we are going to do next at the
logic for uploading that file to the
firebase cloud storage
okay so let's switch back to visual
studio code and now I need to implement
the upload handler method in the app
component class and therefore I'm
switching to app dot component dot TS
and here in that class I need to add
right under the constructor I'm adding
the upload method and upload is
expecting to get the event parameter
here so to implement upload first of all
we need to import a few more things so
from the angular fire to storage library
I do need a few additional things here
I need the angular fire storage
reference then I need the angular fire
upload task okay so and to have those
classes Weibull here with an app
component I'm creating two more class
variables and let me delete the title
member here and instead I'm defining ref
as of type angular fire start reference
and then I'm defining task which should
be off top angular fire upload task like
so and now I'm making use of both ref
and task was in my upload method first
of all and I need to generate a unique
identifier which will send my identifier
in this storage
and to do so let's define a Const ID
here we using the mascot random function
and then saying to string 36 and then
I'm selecting a substring so that we
have the identifier substring - okay
like so and now I can use this dot ref
to store all the start reference and
getting the storage reference by calling
this dot I have starch so my service dot
ref and then passing in the identifier
so this gives me the start reference and
now I can initiate the upload and that's
generating an upload task so of type
angularfire upload task so I'm assigning
it to task and the way I'm initiating
the upload is by using this dot ref so
my start reference dot put and then
passing over the file which has been
selected by the user in is a Weibull
average II event object event dot target
dot files and files as an array so I
need to select the first element which
is available at index zero so like so
and this is initiating the upload and
giving me back an app and angularfire
upload task which is now Weibull in the
task object and later on we will use it
task object to extend the functionality
of our application so let's save it so
before being able to try out that the
upload is working let's first take
another look at the project overview
here in the firebase console and you can
access as a storage by clicking here on
the left-side menu on the link storage
and then it takes you to the storage we
view and you can see at the moment it's
empty so there are no files here yet
it's a saying so there's no file
uploaded so far and before trying it out
you need to make sure that your roots
here in the root section are written in
the following way so I've already
adapted the rules here it needs to say
allow read and write with out any
additional requirements by default it's
limiting the read and write access to
the starch with a condition here to only
allow locked end users read and write
but as we are not implementing
authentication as part of our
application we need to say allow read
and write to make it possible for
unauthenticated users to send files to
the starch so you should check it here
in the root step and check that it is
set to allow read comma right semicolon
okay so going back to visual studio code
you can see the web server process is
still running it has been restarted
automatically so there is no need to
restart anything manually we are ready
to go it has been restarted without
reporting any errors
so I'm now able to switch back to Chrome
and access the application once again
you can see it here and now select the
file here again my test image and then
say open and now let's go back to
firebase go back to the console
opening up my project taking a look at
the start view once again and now you
can see we have one entry here in the
final step and that is a five I have
been down uploading by using my angular
application so before it was empty now
one file is there and that's my PNG file
so that is proving that the upload is
working so far but as you saw the user
gets not any feedback in the application
in the user fail interface of our web
application and that is what we are
going to change next okay so now that
the uploading of documents to firebase
cloud storage is working we are ready to
extend our application with further
functionality and the next feature now I
would like to add is a progress bar
showing is a progress of the upload
process and again for implementing that
progress bar I am going to use some boot
strap CSS classes and first of all I'm
going to include the template code which
is needed to output the progress bar
with the help of the bootstrap CSS
classes in the template code of app
component so I need to switch to app dot
component dot HTML once again and then I
needed to bring in the code which is
needed here let's include here right
underneath the input element let's
include another div element was class
progress okay and within that div
element let's include another div
element which gets assigned at the
bootstrap classes Pro grass - BA
progress
- bar - striped and BG - successful
setting the background okay so then I
need to add a few more attributes here
to my div element which is outputting
the progress bar so the first is the
role attribute let me set roll to the
value progress bar next I do need to
bind the the width of the progress bar
to a property we will be defining later
on in the class so to bind that
properties at styling property of let me
include brackets here and then say style
dot width and set it to the following
expression string in parenthesis I'm
including the expression up reload
progress this is class member which we
will be defining later on and then
applying the synth part because that is
an observable or will be an observable
and so we need to apply the assumed pipe
here and then I need to say plus as we
need to supplied in percentage terms for
us and on the substring where with a %
okay next down let me add binding to at
a trip dot we are - value now they
included in brackets and that is set to
the say
expression here upload progress and then
see assume pipe is applied once again
okay and then we have our via - value
movement which is set to zero and then
we have their own - value max which is
set to 100 okay like so let's say fit
you can see start it again and let's
take a look at our user interface here
in the browser and you can see the
progress bar is now included here now of
course we need the functionality or to
extend the implementation of class app
component to provide us with a class
member upload progress which is of type
observable and which is giving us access
to you the actual upload progress okay
okay so let's open up MDOT component dot
TS once again I need to bring in one
more imports Tate menhir because now we
are working with an observable and
observable servable needs to be imported
from the our XJS library so from our
exchange /op servable
like so okay and then i now can define a
new class member which should be named
upload progress as used in our template
code and this should be of tagged served
or observable as typed here it's an
observable of number okay and now I can
initialize upload progress here in my
upload event handler method and this is
done by saying this
the upload progress equals this dot task
dot percentage changes that the method I
can call here and that method is giving
me back an observable of type number and
this is a sign now to upload progress so
let's save it switch back to the browser
and let's do the upload now a second
time so again I'm selecting my image
here and now you can see as it gets
uploaded to firebase start the progress
bar is filling from 0% to 100% once the
upload is completed so this is giving
feedback to the user which is always
good when working with a process which
may take some seconds to complete ok so
now we have the upload process working
and feedback is given to the user with
the progress bar showing the progress of
the upload and now we can extend our
application even further another thing
which would be good to have here is to
give the user a link to the file which
is then stored in the cloud storage and
so that the user can click on that link
once the upload is finished and then the
image for example in our case is in
displayed ok so let's do that
implementation again I'm starting in my
template code and app dot component of
HTML and bring in another area here
which is then used for giving the user
the link
so starting was a difficult now I need
to assign again bootstrap class is here
because I'd like to output is as an
alert so I'm using the bootstrap alert
class and the alert - info class and I'm
assigning the attribute roll here again
word and I'm including an angular
directive here the ng-if directive
because I want only to get this area
this alert area displayed if a download
URL is available after the upload has
concluded and to do that I'm setting the
ng-if directive here to the following
expression download URL this is another
class member we have not defined yet we
will do that in the next step
this is also an observable and that's
the reason why I need to apply the async
pipe here a sink pipe here once again
and then I'm defining this as down load
answer C so the sauce so that I can use
download as I see here in my template
code okay so within that diff section I
now wanted to output all the link
information so let's save file upload it
and then I would like to include the
link here with an anchor tag and I'm
setting the H ref attribute with the
binding syntax here to the value of
download sauce and then including the
link as text and the output as well so
again download sauce was double curly
braces here that's the angular syntax of
including a value of an expression in
the output okay so this is the adaption
we need to have here and the template
and now I need to switch back to my
class implementation app dot component
dot TS and here I need to define another
class member
this time just down load URL because
this variable has been used in our
template code in the ng-if directive and
this is of type observable and
observable is of type string here again
so now I can use the upload method once
again to initialize download URL so
let's say this dot download URL is equal
to this dot task and we get that
download URL as an observable of type
string by calling the method download
URL here from the angularfire upload
task object so like so let's go once
again back to the browser and try out
the upload process once again selecting
my image here so you can see the
progress bar is filling up until it
reaches 100% and once it reaches 100%
then the upload is finished and then
this alert is coming up saying file
uploaded and then giving me the full
link here and if I now click on that
link it displays the PNG file which has
been uploaded to the cloud storage so
there's one further extension we can
implement in our application and that is
to give the user full control of the
upload process so what means full
control we can give the use of the
option to control the upload process and
be able to pause cancel or resume the
applet process and therefore I am
switching back to visual studio code and
I'm starting again in the template app
component HTML to include three buttons
a button groups three buttons so that
the user can
controlled by using those three buttons
okay so let's include those buttons
right here underneath progress bar and
let's start with a diff section here and
I'm assigning the BTN - group CSS class
and then I'm adding the role attribute
once again and set it to steering group
and I'm including as well the ng-if
directive here once again because I
would only like to have the buttons
visible in my user interface when the
upload process is running and an upload
of state is a Weibull so let's set it to
you upload state and this is an observer
we will be defining later on in in our
class app component and as it is an
observable we need to include Azir sync
pipe or applies your sync pipe here once
again and then we are making it
available as a variable called state
here for our template so that we can
then access the state here
so next I need to include a button and
the button
I would like to assign at the class this
BTN and BTN - primary okay like so and
then assign the type property here was a
value of button like so and then I'm
adding an event handler for the click
event and each time the user clicks on
that first button let's include the
button text here as well the first
button is the button for pause pause
then if the user clicks on that button
the pods method of the task object
should be called so by using the task
will be we can control the upload
process so I can assign here tasks pause
and then finally I would like to bind to
the disabled property so I'm using
brackets here again this a boat because
I only wanted that button to be enabled
if the upload process is running because
that makes sense you can only pause an
upload process if it is running and to
achieve that behavior I can include the
following expression here and bind to
the or B as a result of that expression
bind it to the disabled attribute here
and that is state checking if state is
equal the string post if this is a case
on the upload process is is passed then
we are setting disabled to true because
that expression is becoming true and if
it is passed you cannot click on that
button again so this is the way it is
working here so let's include another
button so let's copy that line of code
here is a button element ok and insert
it again so that we have a second button
here in our button group a Weibull and
this second button is now the button
which should be used for the console
action so let's set the text to console
and in this case we are calling the
massive task dot console and that the
button should be disabled if the
following expression is true if not and
now we have two options here state equal
post or state equals running okay
let's insert another button so let's set
the last but no why do you need here
that's a button for resuming so resume
and if the user wants to resume we need
to call task resume and this button is
disabled if the following expression is
true and that is if the state
information is equal to running because
if it is running it makes no sense to
resume only when it is passed and
therefore it's not running we can click
on the button resume here okay I need
here of course for the second button I
need to close that post string here and
close the parenthesis I've used here to
open up the expression okay like so we
can check so everything is compiling
successfully the web server is still
running and now of course we need to
switch back to the implementation of app
component class to make the upload to
state a Weibull okay okay let's declare
first of all a new variable here which
is named upload state and as already
mentioned this is an observable of top
string like so and now in the upload
event handler method again we need to
initialize upload state and we can do
that right after here
we have assigned at the task object and
say this dot upload state equals equals
is this dot task and then we have a
method available which is called
snapshot changes and that is exactly
what we want to observe here snapshot
changes and then we are piping the
output to a call or two of the map
method and map is taking the result here
which is a state object and extracting
from that object the state information
which is a Weibull in the state property
so that we can access it so map is not
known as you can see here and the reason
is map is an operator from the rxjs
library so we need to include another
import statement here to make it
available so we are importing map from
our XJS operators slash map like so okay
let's see okay map is found no error
message present anymore so the
compilation is done successfully so
let's try it out once again so back here
in the browser
well--that's select our test file once
again and now you can see if I click on
open you can see the buttons are there
the upload is running okay and it's
displaying the button group as expected
now let's initialize it again so select
the file once again and now I would like
to use the pause function and then see
if we can resume the app load later on
so select that file again then clicking
on pause you can see it's pausing the
upload we are not
at a progress of 100% already we have
reached something around 90% I would say
and then we now can click on resume and
the upload is being completed and it
prints out here is the link to the file
which is then uploaded ok let's test it
out for the console action let's select
that file again and now let's cancel the
upload now you can see it's concert and
I'm not able to resume it again it's
concert so this upload is not sending a
file finally to the cloud storage so now
you can see how the application is
working as expected it's easy to get
started by with firebase cloud start
using the angular fire to library so I
hope you have been able to follow along
just try it out by yourself so this was
a bust and from coding the smart way
calm thanks very much for watching if
you do like my videos please don't
forget to subscribe to my youtube
channel and also don't forget to visit
my website at coding the smart way comm
I hope to see you in the next video
again so stay tuned
and pipe</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>