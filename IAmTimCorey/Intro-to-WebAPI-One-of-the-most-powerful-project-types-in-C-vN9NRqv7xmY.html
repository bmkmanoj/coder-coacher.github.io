<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Intro to WebAPI - One of the most powerful project types in C# | Coder Coacher - Coaching Coders</title><meta content="Intro to WebAPI - One of the most powerful project types in C# - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/IAmTimCorey/">IAmTimCorey</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Intro to WebAPI - One of the most powerful project types in C#</b></h2><h5 class="post__date">2017-12-06</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/vN9NRqv7xmY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">I think the most important c-sharp
prototype to learn is the class library
project type that's the prototype that
should store most of your real code
however the second most important
product type in my opinion is Web API
yep I think it's that important in
today's fast-paced culture where new
user interfaces are popping up all over
Web API can be a constant it allows you
to put all of your business logic data
access and more behind an interface that
just about anything can use you want a
Java Script powered website for a
front-end not a problem if you're using
Web API you want to add iOS and Android
applications that have the same
functionality as your desktop
application again not a problem the boss
decides to change from a wind form
application over to a ruby powered
website that's just user interface work
if you're using web api to get the
picture web api is a big deal in case
you didn't know I am Tim quarry and this
video I'm gonna introduce you to Web API
once we get a web api project up and
running I'm going to give you a tour of
what is possible really the basics of
web api are fairly simple next I'll show
you a tool you can use to test your API
without needing a front-end and finally
I'll show you a few tips to help make
your first API even better so let's get
started now here I'm running Visual
Studio 2017 and it's actually the 15.5
Edition the most recent update as of
this video now if you don't have Visual
Studio 2017 I would recommend that you
get it if you go to visual studio comm
you can download the Community Edition
for free
the Community Edition is amazing it's
almost exactly the same as the
Enterprise Edition which is what I'm
using now the Enterprise Edition has a
few features that you might want
eventually but really that's like the
upper two percent of what Visual Studio
does there are 98%
and the stuff that really you're gonna
use every day that's all free so
definitely go ahead and get 2017 if you
can now I'm gonna go a new project and
create a new project
I'm already here let's look where I am
I'm inside the visual studio section of
the new project dialog that's important
because you might get into other
languages like Visual Basic which looks
very very similar in their layouts but
you don't want Visual Basic you
definitely want visual C sharp so start
there but then that's a lot of project
types to look at so we can further
refine it by going to web not legacy
just web so inside the web you'll see
probably two projects you may have more
or less but the one you want is asp.net
web application and it's the dotnet
framework if we expand so you can see
dotnet framework don't choose a dotnet
core web application that's for running
on Linux or Mac OS using the.net core
framework now that is a good option if
you want to go that direction but
there's a lot more to learn there with
what you can can't do on a dotnet core
platform so we're not gonna go there
because the majority of the time when
you're talking about running c-sharp
especially in a business environment
we're talking about running on Windows
now c-sharp works best with Microsoft
sequel server that's not the only
database server can use in fact it's
just one of hundreds I can use but
that's kind of like the the peanut
butter and jelly here typically we see
c-sharp going hand in hand with sequel
Microsoft sequel and Microsoft sequel as
of today still only runs on Windows now
Microsoft is changing that there is a
version coming out soon for Linux but
that's not quite here yet
but for right now Windows platform is
more likely we're going to spend most
your time so we're going to go with a
full net frame
it's a little easier to use a lot easier
to use actually and it just takes away
some of those barriers to entry once you
get good with asp.net web applications
in the.net framework you can switch over
a dotnet core if you'd like to go that
direction and you can learn just those
changes that come along with going to a
dotnet core project so oh let's say
we're gonna choose asp.net web
applications dotnet framework now I'll
give us a name I'm gonna call it my demo
API and the solution name we'll call
this Web API demo app now hit OK and
unlike other project types were not done
yet we have to make a couple more
choices so right now since I chose Web
API it's going to default to that here
but really there's more options we have
MVC we have web forms we have an empty
project single page application as your
API and as your mobile app now we're
gonna choose Web API and if you notice
down below we have some options and
because they chose Web API we have MVC
and Web API checked over here and
they're greyed out meaning we can't
uncheck them so if we aside we want this
option we get by default MVC and Web API
now we could add web forms if you like
web forms is kind of equivalent of
WinForms but for the web and it's not
something I recommend for most
circumstances typically that's a
backward compatibility thing we could
also enable docker support which docker
is a container system that we're gonna
cover this video but I'm sure we'll be
covering in a future video so we won't
check that and again we won't check the
unit tests we're gonna be doing a unit
tests I'll be doing gonna test video
pretty soon but we're not cover it for
this video because it really is outside
of scope of what we're doing here
so right now we're getting web api and
NBC and you may think why are we getting
both and really for right now what
Microsoft has said is these two go
hand-in-hand and we're gonna see how
that works inside our project and really
I'm not complaining I can see where
eventually we won't have that anymore
but I think that I'll be somewhat of a
loss
there'll be somewhat of a a feature or
two missing if we don't have MVC added
but for right now we do have them both
here so they'll both be selected and
that's fine you could go and empty API
and choose just Web API we're not gonna
do that because that would change some
things about how the template works the
next option we have over here is the
change authentication and this is
outside a scope of this introductory
video but with web api we can add
authentication so that we can kind of
lock this down to only the people you
want to have acts you know that we want
to allow access to or things like that
now it's really easy to select
individual user accounts and then inside
a template they'll add commented out
sections for Facebook authentication
Twitter authentication Google Microsoft
and more it's really easy to implement
say Twitter authentication where my user
can just say log in with their Twitter
credentials securely on Twitter and it
will give our application a token that
says this is Tim Cory and we have
authorized that yes that's who it is
and so that is a nice way of using
somebody else's authentication system
without having to roll your own now is
also ways to hook up to Active Directory
even the azure active directory which is
kind of nice office 365 you can even do
windows authentication if you're on
intranet with this application not
something I see used very often again
for this video we're doing no
authentication
so that's it we have web api we have not
checked anything else down here we have
not changed our authentication so we
have no authentication no extra check
boxes we hit ok now it's gonna happen if
you notice the lower left-hand corner
it'll start adding nougat packages and
so there's a lot of new get packages
will get added right away that helped
build this template out that's a good
thing because that means that this is
really modular and how it's built once
the page loads once the system loads
you'll see this page right here where we
have some links you can go to help get
more information about getting started
samples tutorials and more as well as
information about a sure I had a great
system and they do give you some free
credits so I definitely recommend
checking that out I will definitely have
a video coming out soon that's gonna
cover a j''r and what the benefits are
how to use it because it essentially
allows you to run your applications or
parts of your applications in the cloud
very very easily for example just today
I needed a sequel server for a demo I
was doing in class and I had that sequel
server up and running in about three
minutes now if you've ever installed
sequel server locally or on a server you
know that just doesn't happen it's not a
three minute installation it's more like
a three hour installation sometimes so
it was definitely a really speedy
process so Azure is really a powerful
thing and then we have the a service you
can kind of skip that now it's other
stuff here we're not gonna cover yet
we'll come back to publishing in a
little bit but for now we'll leave that
alone so this right here is our Web API
as it comes default out of gate so it
looks an awful lot like a asp.net MVC
application if you're from there with
one of those I do have a video on NBC
and that may be of help to you
in kind of understanding silliest things
because I won't
cover everything over again about MVC
because that's really outside scope of
this video but some of these things
you'll see our MVC not API remember that
this template load both MVC and API into
this one project and kind of blended
them together so let's look at what is
cut API specific and what is MVC as well
so MVC were used to this home controller
here in the controllers folder and
that's what powers a main page and in
fact this is MVC you can tell that
because it's inherits from the
controller class if it's an API it
inherits from the API controller class
so the difference right away you can see
this controller is an MVC controller
what that means is it has its call of
view and a view is just a bit HTML page
in case or in this case is right here so
this HTML represents the home index view
which in the home controller the index
method will load the index control or
index view all right so and then we have
a shared layout like this is MVC so it's
it's what we've already come to expect
from MVC so it's not really anything
here yet that's API except for I kind of
open up the values controller quick but
that's really yet as far as API
specifics so far so before we go any
further I just want to launch this and
just show you that yes in fact it
launches as a web I'm sorry is it
asp.net MVC application in fact we'll
look no different than a default MVC
application there you go so if we kind
of expand its window there you go that's
default application the only difference
is we see this link right here it says
API and if we click it it's gonna tell
us that here is the API information at
me
are to see but we have an introduction
to our API and then we have one two
three four five different actions that
we can do on our API there's the get
action for just all the values there's a
get action for a specific ID of a value
there's a post of a values there's a put
of a specific value and delete now this
is the first time when we have something
API specific it's not web api specific
but just api in general and api's use
HTTP protocols that's the web protocol
and in web protocol there are four
different types of called you can make
is actually more than that but it's four
four most common types and they are get
post put and delete now you can think of
these as similar to the crud actions so
create read update and delete
well the create would be the post that's
where we create a new record or insert a
new value the read is the get that's
where you get information you know
essentially a select star from this
table you know something like that maybe
a get command then we have the update in
the crud so create read now update
update is where we modify a record that
already exists and that's the equivalent
to a put so it's right here the put is
modifying this record with information
and finally the delete is the delete so
we have create read update delete that's
that's the equivalent of crud now it's
just to be clear they're not exactly the
same but that's a really close analogy
so create read update and delete and
that's our get post put and delete
actually not that order but post get put
delete there you so with API we can call
those four different
types now we're not used to calling
those manually when you go to web page
and type in the URL and hit enter
that's a git command that's all we ever
seem to do with browsers so it's a whole
lot more under the surface that we just
don't do or at least we don't know that
we're doing it and so this is kind of
expose some of those other things that
we can do but it does mean that there's
a little more complexity than just
calling a URL in order to perform an
action so notice the API slash values is
the same URL for git as it is for post
that's because those two commands use
the same URL but they differ on protocol
and the get API slash value slash ID is
the same for git put and delete again
the same URL but different protocols so
we'll have to point those out and kind
of identify where each of those is being
used soon but this right here getting
back to where you were this is the the
page that loads whenever you call your
URL your website in this case local
hosts on port 61 455 if you do a slash
help it will give you all the different
calls you can make to all the different
API endpoints these are called endpoints
so that's case we have five already so
let's look at those five and we'll come
back to this page and actually start
making calls so that was our our layout
and our index which was both MVC we're
not going to deal with those and we're
not going to deal with the home
controller because that's again MVC now
it says scope of this video we are going
to tackle is this values controller now
this values controller comes with a kind
of starter kit or starter example of how
to use an API and it's really kind of
rough meaning it's it's not doing
anything real
it's just showing you this is how it
would look or how it work so this case
remember we had two different get calls
we had API slash values and API slash
values slash an ID
well they've put in comments here that's
the API slash values call and that's the
API slash values slash ID call and how
we know that those are the calls they
are well this method is called get and
this is an overload of get and it takes
in an ID so Web API is using a a naming
structure that allows for some
assumptions the assumption is if you
call your method get' then it's going to
be a get command if you call your method
posts it will be a post command set put
and delete now that may lock you into
something that you're just not
comfortable with and that's okay I will
show you how to break out of that
standard structure if you want to now
right now we have this get API slash
values and that gets all the values in
this case it just returns a new string
array with values 1 and 2 and that's all
expects is an ienumerable of type string
and returns those two strings whereas if
we call API slash values slash a number
an ID it returns just one value now note
it doesn't matter what the ID is it just
returns one string that says value
that's it post put and delete don't do
anything okay so we right tackle those
in a little bit but for right now we're
gonna deal with just looking at this get
so let's launch this again and see how
we can actually make a call to just the
get portion of the API now in the
comments and we'll figure out how
determinate on our own in a minute but
for right now the comments it says that
the way to call this method listen right
here is to say API slash values so let's
do that let's say our URL slash API
slash values now this is interesting
I type value not values so singular not
plural and we get this XML error and it
says message no HTTP resource was found
that matches the request for this path
all right so that's a a message look yet
if we call the wrong end point or the
wrong place so if I put values instead
now we get this array of string string
one is value one and string two is value
two so remember we were passing back
just a new string array value one and
value two now if I were to pass in a
number let just pass in a - so / - that
gives me back this string of schema and
then just value now value is what we get
we call this API endpoint though it's
passing in ID as well and so it gives me
back just the one value so we do have
some calls working to the API but this
adds a whole lot of overhead and it's a
little hard to see and we can only make
get calls so this right here at all the
junk around the schema and all the rest
even with chrome it's it's not the
greatest and that's where I want to
introduce you to a new tool now I just
want to show you a tool I'm not going to
go in depth on how to use a tool and all
different features that's a totally
separate video but I will at least
introduce you to the tool because it's a
really powerful tool to have in your
toolbox and it's free
so if you go to get postman dot-com and
download the version that works on your
operating system so it works on Mac
Windows and Linux I will assume since
you're using Visual Studio that you want
the Windows version so you choose 32-bit
or 64-bit and download that and install
it once you do you'll have this tool
right here
now there's a lot of cool things this
can do including keep a history of what
calls you've made so that you can remake
that same call over again
you can also store a collection of calls
in one chunk so that you can remember to
call certain things all together if
you're testing an API or something like
that but for right now we're just gonna
deal with this section right here now
notice first of all it says get here it
has a drop-down and there are a lot of
options here but notice get posts put
and delete that kind of matches up with
what you've already seen in our API over
here get post puts and delete so we can
make a call let's do to a get call for
now where do the same call as up here so
let's even just copy and paste this so
I'll paste it in here and then we do a
send so that's the URL I hit Send now
notice what comes back and let's see if
we can't zoom in on this there we go
so it has returned these values it's an
array and it's value 1 comma value 2 so
those two values there are what has been
returned by the API now this is in JSON
format in the browser we saw XML format
your API can return either
and typically it's smart enough to
return the the standard type or the type
of you most likely want to see in
browser it works with Jade or XML but in
most calls its JSON and that's great
because that's what most applications
going to want to see is JSON so JSON is
just JavaScript object notation it all
stands for and essentially what it means
is it's a really simple format for
creating objects or models so it's
really simple to do in this case this is
an array which got the square break
braces and then the values separated by
comma so that's all there is to it if
I'm like let's call again but this time
pass in ID and I do that it gives me
back just that one value notice it
didn't do all of the you know the array
of string or the schema type and all the
rest you can get to that stuff so
there's the headers and all the good
header information in fact there's more
information here than there is normally
especially in the browser
you kind of go hunt for it you can also
look at the raw of that it comes back
you can preview it make it pretty you
can change its type if you want and load
it again but for now I think that X I'm
sorry is JSON is all we really need so
that's the get call to our API now I
could very easily make a post call the
problem is that right now nothing will
happen because there is nothing to do
it's an empty method now we can change
that a little bit we can change it to be
something else but for right now we will
come back here to our API and talk about
how we actually get these routes that's
kind of important know how the route
gets built so it's not just magic so if
you go over to your app underscore start
and open that up
normally in MVC there's three options
and here are three items in here bundle
config filter config and route config
both web api there's a
and as Web API config if we open this up
we'll see how the routes are defined so
it says the route for default API is API
slash controller slash ID all right so
the controller is in this case the
values controller so everything will be
API slash values in this values
controller so our get is just API slash
values and it's using the git protocol
versus the post versus the put and it
does have the optional ID so that's how
the routes are set up for API especially
compared to our default for the MVC
which this under route config looks very
similar it Maps a route for default
which is controller slash action slash
ID and so it differentiates the two by
saying well the web api starts with api
instead of the controller name if you
wanted to you could even change this
this is something else
so you could say you know this doesn't
have an api the beginning that the MVC
one has a MVC slash controller slash
action / ID now you you know swap those
two around so the API doesn't have to
say slash API but this is a pretty
standard way of doing it you know saying
API slash and then whatever call you
need to make and it really tells
everybody that this is an API so that's
you know I would say leave it alone
unless you really have a reason to
change it but that's the only thing that
about API you need to know as far as how
to change the default routing that's it
so now hey let's let's do this let's
create our own controller an API
controller so in controllers I'm going
to right click and say add new
controller
I'm gonna come down here and choose the
web api to controller now you have a few
different options you have the empty web
api - controller which is just
essentially just a new class then haratz
from api controller then you have the
web api controller with actions using
entity framework not a fan of entity
framework we won't be covering that
today web api - controller with
readwrite actions that's very very
similar to what values controller is and
we have two more for OData which we
won't be covering so really I choose
between these two the empty one and the
readwrite actions so let's go the the
one that has to rewrite actions so we
have something to start from so we hit
add we're going to give it a name and
let's call this the people controller
this is all about people so just like in
fact it's identical to the values
controller but it sets everything up and
gives us our default routes so API slash
people API slash people slash five or
whatever I do you choose and then it has
all of our different options now this is
what people get a little kind of caught
up or tied up in half do things a
certain way and the biggest one out
there is when you hear people say you
have to create a restful api and eight
web api by default is a restful api and
what that means is it has certain ways
of making calls that are logical and the
way are laid out and certain things are
true so for example you say slash people
you know you don't make it the get call
for everything a list of items where if
yusei's API slash people slash a number
that get one person and you know that
every call as a post is inserting new
records whereas a
put is doing something different and
delete and all the rest but here's the
deal I understand that's the the goal to
work towards but be very careful that
you don't get so caught up in the layout
and the insistence on exactly perfect
that you never finish I'd much rather
see an API that in version one is a
little rough that you change reversion
to make a little better now don't forget
that once you start having applications
use an API it gets harder and harder to
change that version one but that's okay
there's ways of versioning api's so you
have two versions running at the same
time and that's okay but the reason I'm
saying all this is because I've seen a
lot of people go down the restful api
rabbit hole and just never come back and
the the end result usually is they don't
have a working API at all I don't want
to see that happen so if it makes sense
for your application to be a little less
restful a little more logical for you
that's okay so if you decide you know
what instead of having just you know one
or two get calls in this controller I'm
gonna have five with different names
that's okay if that's what works best in
your organization or your application so
I'll show you a little bit of how do
that just so you're prepared just know
that what I'm gonna show you won't
always toy line up with restful and
that's okay alright so getting back to
our people controller what we don't want
to have here is just a few commands
we're not gonna do a put command we're
just gonna do get get one post and maybe
delete so let's take put entirely out we
won't worry about it so now we have our
get post and delete will actually even
change this post limit but first
I need to have a model a person model
because I'm not going to deal with just
this generic new string and value one
value - we're going to do a real API or
real ish API so in our models folder
let's right-click and say add a new
class and we'll say that our class name
is person and it's public we're gonna
say string first name and we'll set that
equal to MP string to start with last
name equal to MP string and you know
what let's go ahead and give it an ID as
well and we'll start off at 0 will
manually increment this alright so we
have our person class model if we come
back over here instead of ienumerable
highest deal was I like list better
I know list is a subset or a part of
ienumerable is an ienumerable but I like
a list of person better and since the
person is not in the list here I do
control dot to add the using statement
for demo API dot models so there we go
so we return a list of person now that's
not gonna work here so here's what I do
I'm going to create a a list of type
person people equals new list of person
up here in my class and then what I do
is and creates a constructor for this
class that initializes
people Wow play it spell people that add
new person and we'll say first name
equals Tim last name equals Corey and ID
equals 1 and we'll take that record and
we're gonna paste a couple more times
and we'll say Sue Storm and Bilbo
Baggins all right so there are three
people we're gonna add and that will do
is will just return people so returns
our list of person now let's just start
right there make sure it works
once it starts up
all right so now we do is say slash API
slash and its people and there we go and
in fact we can take the same call and go
over to our postman and notice the
history right here which is kind of nice
but we can paste this in hit Send and
now we have ID of one first name is Tim
last name is Cory then sue store and
then bilbo baggins and one two and three
so there we go
we've made our call and it works by just
saying API slash people because we're
following these same conventions of
making a a get call and let's you know
change this as well so we'll say people
dot where x equals greater then X dots
ID double equals ID first or default and
it returns a person no string there we
go so now it should be since I did this
look up here it should be that when I
pass an ID in as long as in this range
if I pass an ID in then it's valid it's
gonna find that user and return them so
let's start it up again and I'll bring
up my postman again as well since I
closed that alright so slash people
slash right later slash let's do Bilbo
there you go bilbo baggins ID number
three
let's do sue where's sue and if you want
to try for me as well
there I am so now we have an API it's
actually making a call based upon the ID
of the person that we're asking for so
we're asking for person number three
again
bilbo baggins now so far we're just a
little demo data but as you notice this
list of people all the rests this is
essentially the product you get when you
make a call to a database and load it
into a list so really this is acting as
if we're actually working with a
database so instead of just doing this
lookup on a list we actually go a
database and say give me this ID now and
here's the here's the thing that a lot
of people get hung up on they'll ask me
okay you know that database access stuff
is great but how do I put that into you
know whatever user interface they they
want to use and that's really the wrong
question and I don't blame people for
asking because that's I understand why
you ask but here's the deal and so I
talked about the beginning the fav my
favorite or the most important project
type in c-sharp is the class library
project the API is a second database
calls shouldn't happen in the API or any
user interface they should happen in the
class library so at the API level it
doesn't matter what the database is or
how you're talking to it you would just
be doing calls like this where you say
you know pass back the list of people
pass back the list of people limited by
an ID or whatever you wouldn't be doing
anything where you're directly calling
or talking to a database you would say
you know my class library Dodds look up
people and that would return a list of
person and you just passed that you know
calls value back out your API so just
don't get hung up on data access
directly in API you can do it and work I
mean it's it's c-sharp code so you just
plunk it right in as if it was your
class library just don't do it put it in
a class library it makes your whole life
easier
just like Korea Web API makes your whole
life easier when it comes
your business logic and data access
because it it hides all that behind a
layer that then anybody can talk to that
layer and everything else is handled all
right and that point going forward there
is no access to a database directly it's
all through the API now let's deal with
the the post or actually saving data
putting it into our application the
first thing is they deal us from body
and string and value here's I'm going to
do person Val okay so I just said that
the posts will send in a person object
and now I can say people dot add Val
that's it so now I post is done
essentially it is takes in a person
object and adds that person to the
people object now in a real application
you want to do some testing on this to
make sure it's a valid person there's
you know all the information is populate
the way you expect it to and that kind
of stuff but for right now that's all we
need to do now let's let's open that
person up it up we have ID first name
and last name okay so let's run this and
we'll pull our postman back up and let's
do a call I can just click on this right
here and I'll do the the call to people
and I see I have three people now let's
change this to a post still a people
call but in this time I'm going to say
raw so it's a body over here
so I sit in the body the call I go raw
and let's make it JSON format this is
the where the real power of postman
comes in I can say okay I need an object
I can just come down here and start
typing okay so I'm at type a JavaScript
check which JSON starts off with career
aces but now I can say I D :
look at ID in our for first name : and
then single quotes I'll say that let's
go with Mary comma last name : sale
quotes Smith
so looks pretty familiar pretty easy to
do essentially this just says this is an
object or a model then here's all of my
model names or properties in this case
ID first name and last and they match up
with the properties in my people or
person class so and then there's a
values and if it's a string it goes
inside sealed quotes
otherwise if it's a number is just a
number and it's a post command and we'll
call that same people we hit send and
nothing comes back because I don't
return anything but if we go to our
headers here we'll see no serious
problems here I can see so now we can do
is go back and make that call let's
expand settled it to people the get call
we hit Send nothing we only have three
people so we're not quite sure why isn't
working but seems not to be in theory so
here I do we're going to go over to our
API and we're going to put a breakpoint
right inside of our post command and now
I come back over here and again this is
the power of post me I can just go back
to that command a post command
everything's still here I hit Send let's
look at the value if we can zoom in on
this
it's Mary Smith and ID so that all is
good so now the people lists which
people has three
if we skip over it now it has four and
now let's put a breakpoint on our get
call and let's make that call so they
get people mouse over that it still has
three now the reason for this is because
this instance gets wiped out every time
we make a new call and that's something
that makes it hard to do this kind of
demo stuff we have to actually save it
to a text file but we have demonstrated
is that we are actually bring in people
a person object by passing in that JSON
object it kind of maps it out based upon
the the names so that would work and if
this was stored in a database instead of
being initialized every time we
instantiate then we would actually have
a value long-term unfortunately like in
this case we we can't do that because of
the way Web API works which is okay that
allows the least see what would have
happened the same thing is true here
where we could do you know this right
here where we remove one person yes we'd
say whoops still write people dot remove
and then we'd find the person by doing
it people that wear or we could do some
other lookup magic for that but in a
real application instead of making me
just removed from a list we'd probably
call a database and say you know delete
this person so in passing the ID so
that's how to set of a basic API how to
use it really easy like I said the thing
I love the most is I can just pass in
this person object even though I'm
calling it via JSON so I'm saying okay
here's my JSON
and it just says okay I can map that out
and put it in place so in my git
commands they come back as JSON so that
I have all the values I need oh it's not
actually running that's why no response
means these servers down well I'm not
actually currently bugging so that's why
but I can get to get these the list of
person I can get that as JSON as well so
that my JavaScript can use it quite
easily so really easy to set up an API
really easy to get data going both
directions I recommend that when you
start out you start out simple just do a
git command in a post command even if
you do more in post than really you're
supposed to that's kind of okay and I
get it purists will argue with me that
you know you got separating things out
and let them argue of me okay for you
you do what works and get the job done
it's more important to have code that
ships then code that's perfect that
never reaches the market okay so the
base ones are get and post now one key
difference here in theory you could
actually store data by doing a git
command so essentially do what post does
but doing it in a git command instead
the problem with that is that all the
data instead of being on the body notice
here for our post command we put it on
the body we said here in here is the the
the text of the stuff to put in the
database not in the URL
forget commands we actually pass it in
the URL so if you want to pass in you
know say ten parameters the way you
would do that is either you would set
this route up with lots of slashes or
you would do the typical URL thing where
you say question mark and then say you
know first name equals
Tim ampersand
last name equals Cori and so on and so
forth and so now there's your properties
and your values so if you do it this way
the get command is a few problems first
of all if you have an ampersand in this
value you guys scape it out otherwise
it's gonna think it's the next property
second of all the URL is limited to
2,000 characters which sounds like a lot
until you want to save a forms worth of
data say for example you have a simple
form that has a it's a feedback form
person's name their email address and
their comments well some people are
gonna put you know nice job great job
thanks hate it whatever and their name
and email address no problem but then
some people will write a book a lot of
websites will limit you to say you know
5,000 characters well if you put those
if you max that out or get close to it
or even do half of that
that's too much the URL now certain
users won't be able to post or save
their feedback some will some won't and
you'll you know wrack your brain trying
to figure out why this won't work
the problem is get you're using gets
when you shouldn't be
however if you use posts those are
values coming the body that doesn't
touch the URL and the limitations
they're on there for a post can in
effect be unlimited now there are limits
especially when it comes to you know
uploading videos or stuff like that
there's there's some problems if you get
too big but the reality is that's more a
configuration issue than it is an actual
limitation because obviously you know
YouTube I upload gigabytes worth of a
video and it loads no problem so that's
all depends on your configuration not on
a limitation of the the actual system
HTTP limits the URL to 2,000 characters
that's it no more
so therefore don't rely on get for
sending data that you want to store it's
also a little more dangerous in the fact
that that get URL is visible even if
you're on HTTPS the problem with that is
that that URL if it has form data might
have formed a si of creating a new user
including that person's username and
password not a good thing therefore use
posts okay that works on the body it
sends data via the body and that is not
visible when you're sending HTTPS okay
so the person couldn't sniff the body if
using secure socket layer for your your
web transmission so that's just a little
bit of general advice that I have you
know kind of bumped into a few times
when I first started learning API and
even later I forget and then I'll go oh
yeah that's what that's the reason why
it's intermittently not not working you
know the big one is if I'm trying to
pass information in the get you know
maybe it's something as simple as it
makes sense to get but II really
shouldn't be for example if I was doing
some kind of filter maybe it makes sense
to do a post even though you know I'm
asking for information but I'm sending
always parameters okay now I want to
talk through a couple of different
things that we can do to make this a
little better
the first one is there may be a time
when you don't want to do a git command
or you I have more than one git command
so for example what if I wanted to have
a a public list of string called get
first names
all right so that method I want to
return Alyssa first first names in a
string so I could do something like this
right say okay let's do a list of string
called output equals new list of string
and for each P in people P dots
let's see output dot add P dot first
name it's probably easy way of doing
that but that's a pretty quick way of
doing y1 so I'm just going to loop
through all the people in the list and
just return the first names Tim su below
and add that to a list of string return
outlets a string so what a separate get
call in my API in this controller but
doesn't really fit the the way things
work now I have another get so what do
you do how do you make this call in a
way that that makes sense now you could
create a new controller called you know
people's first names controller you know
something we like that and have this one
get command in it you know and that does
this but that's passing constantly so
what you can do is you can say well this
I'm gonna specify what the route is
let's say API oops
API slash people slash gets first names
okay so now I've done is I've overridden
the default route and I've said this is
a call to API slash people slash get
first names now normally it's just API
slash people API slash people slash ID
and so forth but in this case I said
nope this is the specific route that
applies to this method
now because it kind of made sense this
matches this name doesn't have to we
call this gfn forget first names doesn't
matter these two are no longer related
where this one is an assumption that
this is a git command this is a you know
HTTP GET now this route right here is
specified with this command now I also
want to the same time tell it what type
of HTTP you know types i will accept in
this case HTTP GET that's all I want I
could say get and post or patch or
whatever but I'm gonna say just HTTP GET
notice you wanted to put column to him
so HTTP GET is all going to allow but
let's start this up and just see how it
you know see how it works what the demo
looks like so we have people slash one
set people slash one I'm gonna do people
slash get first names and the casing
does not matter so I hit Send and there
is Tim soo and Bilbo so I've called that
same controller but with a custom path
now I can even make us totally different
don't do this but I could say I don't
know peeps let's actually stop at first
I could say beeps which has nothing to
do with the people controller okay just
to demonstrate this actually would work
I'll show it but don't do this and the
reason I said don't do this is because
now I get to track down notice get pilla
first name request isn't valid but if i
now say peeps slash get first name it
comes back just fine
so again don't do this always match your
controller so people controller always
have a / that name so / people and then
you can add anything you want afterwards
this will allow you to have more than
one gettable call in the same controller
that can make sense for certain
circumstances and I'm not gonna fault
you for doing that
in fact I encourage you just get it done
okay now the other you can do with this
is you can actually modify how this call
is made to accept variables now we've
seen down below where it just assumes
since you're passing in one value an ID
that's a special case the ID you
couldn't pass and other things but up
here like I say is I don't want ID I
want a user ID that's the type int
notices and curly braces and I also want
a / H that's also an int so I have now
with these curly braces I've said this
call will have a user ID / an age I
could pass that in here user oops
int user ID and into H and now just a
show that works up a breakpoint here I'm
back to people by the way so he run this
and they come back over to postman and
it's going to be user ID and an H so
let's change it from peeps to people and
rest say user ID is 23 and age is 39 if
we run this it's gonna pause here we can
mouse over this user ID is 23 age is 39
so pulled up that off of our custom URL
the
said these are the values they'll be
there and these are the types and that
matched that up with these parameters
and past those values in so that's a
little bit more of an advanced use but I
want to show it off because that was
something that kind of got me stumped
for a while when I couldn't figure out
quite what it was doing or why I was
asking for this I had to you know figure
out how to have put those in so that's
kind of important know if you need to
pass in more than one value or different
types of values and match them up with
parameters and again this is how you
change the name of your your route if it
is not matched specifically the baked-in
names that they gave us for API
endpoints so get posts delete or put so
I've now shown you how to change the
route and how to do a specified what
type of protocol a call there's one more
thing I want to show you for we're done
and that is we launched this again I
want to show you one thing with the help
context good API if you notice now we
have people and values which i think is
really cool because now it shows us all
the different endpoints we can call if I
user in fact if we click on one it shows
all this extra information including how
to make a sample call or what the
response will be from a call
so as case the response they're
expecting is sample string 1 comma
sample string - of course it don't fill
in real information because that'd be
kind of silly but it at least shows us
what the structure will look like coming
back that's really neat but this could
be better
notice no documentation available if we
click on it
description nothing additional
information nothing so let's make this
better
the places start is to go to properties
and double-click we go to the builds
menu will come down here and see xml
documentation file and right now it's
set for the bin slash demo api xml we're
gonna change this to say that it's the
app underscore data slash documentation
dot xml remember Microsoft loves XML
files well that's the documentation it's
gonna be in its XML so gonna put in app
data and that's what comes no it's a
folder right here AppData which is empty
that's what comes with an api it's just
part of the deployment package so we're
gonna put an app date we're gonna call
it documentation I'll save this but
we're not done yet we have to go to the
the areas folder the help page folder
instead of apps start now most of stuff
we're not going to tackle this is all
stuff that Microsoft just sends with it
by default but in this help pages config
this is kind of Awesome if we scroll
down here we just need to uncomment one
line of code unclamp both because they
commented the comment whoops wrong
direction
there we go I'm coming to file to use a
documentation from XML documentation
file ok which is great the one thing you
change is the actual name it there's a
Tildy which is the root of our project
slash app data that's that folder but
says XML document Docs ml one changed
that to just documentation dot XML which
is the name we gave it over here
documentation XML so now that that's
done what will happen is every time you
build the application it's going to look
for xml comments
these are xml comments
and it's gonna take those and use those
to help build our help file which i
think is just amazing so let's go back
to the people controller and now notice
that these green squigglies are
everywhere that green squiggly says hey
you don't have xml comments yet for this
controller so I start the people
controller this is where I give you all
the information about my peeps ok the
comment doesn't matter I just want to
show you this was gonna show up all
right we won't comment the constructor
but we will comments the get first names
so triple slash here that's gonna say ok
wow you want to subscribe get first
names gets a list of the first names of
all users the unique identifiers for
this person and we want to know how old
they are ants can return a list of first
names duh okay so there's an XML comment
for just this one get call and we leave
it right there I will come over and
comment our person class represents one
specific person and then the ID from
sequel
users first name and let's get snarky
the last one and say couldn't you guess
okay just we have some comments and we
know where those comments came from so
let's run this again and I'll load that
help file again just to show you the
difference it makes
so API now right away you'll see people
this is where I give you all the
information about my peeps well that
came from that comment on the people
controller now let's look at the git
command here instead of say no
documentation it says gets a list the
first names of all users again the
documentation over this method if I open
it up it says the user ID is a unique
identifier for this person and the age
we want to know how old they are and the
resource description I'll list of first
names duh
alright so here's all the information it
tells us about what's gonna happen okay
because it's a whole lot of information
about this this peep these people as
data alright
so now when in the post when it says
here's a three things I need I need ID
first name and last name it says the ID
is the ID from sequel the first name is
the users first name and the last name
is couldn't yes okay so this
documentation has now been built using
the comments directly in our code I
think that's pretty impressive because
right out of gate you have a system for
documenting or API that will help users
actually use your application user
interface so with that being said there
are better help documentation
systems out there but a lot of them will
use these same comments and so you don't
have to the you know scrap your
documentation and start over the thing I
love about this is that your
documentation is right next to your code
you do have to go somewhere else and
remember to put a section in there and
fill it all out properly that's
important because it's more likely to
happen so I recommend you use the triple
slash comments and that you turn on that
help documentation
alright last piece of information you
need to know if we just run this
application you can actually run this
from your PC and even open up a port in
the firewall and you can have other pcs
talk to your PC and call us API that's
great for demos but how do you actually
deploy this to a web server you don't
just copy and paste what you do you
right click on your project and you're
going to come down here to publish you
got some options you can go to a sure
that's really easy you can say create
new and just publish the little Korean
new place an azure you can FTP or send
it to is like this or I can do a folder
so let's go to a folder and we'll do it
in the bin slash release slash publish
output and we'll say done and now notice
that it says publish has been successful
so if we were to right click on demo API
open folder and file explorer go to our
bin go to our release and gonna publish
output this we can just copy and paste
into any iis project or or point I asked
this folder and it will run our Web API
done that's it so we just grab this copy
and paste and we're good to go
notice this is not the same thing as
this totally different
this is the uncompelled raw stuff the
stuff we have instead of release polish
output that stuff is the compiled code
or at least the the bundled up stuff and
it's designed to be put in a web server
that's a really easy way to do the
publish but also know as we come back
here and go to our publish again we
create new profile we can also do
continuous and let's let's go back and
close this out and see if we can't get
that back but you publish we can also
automatically publish your application
to Azure with continuous delivery that
means that every time you believe it's
there ten you build it'll actually send
that build to Azure and update it and
that's a great way for testing with a
team because they can all see your
latest changes right away I don't do
that in my work environment we do use
Web API but instead what we do is every
time we push code to get certainty in
get we say you know commit to the master
branch it builds that using Visual
Studio online and so that push the
master kicks off that development build
then we do you know same through the
other branches as well so if we push the
release branch it will build the release
version of the API and that's a little
more advanced it uses some build and
deployment tools but this simple folder
profile published really simple you know
then just you can FTP those files
wherever you need to go okay or delivery
to Azure using Azure this is so simple
you just say hey go to Azure and it just
does it and just works so publishing not
that difficult it's just not a copy of
the bin folder by itself you actually
got published to a folder and then
taking that folders contents so that's
it
that's Web API who can use this pretty
much anybody browsers
use this you can have your apps mobile
iOS Android Windows Phone while still
around they can all use the API so can
Java Ruby JavaScript c-sharp directly
there's so many others you can use any
kind of tool you need pretty much can
you use a Web API this is a great way to
have some separation of concerns and
have a way to have a system that is
pretty much unchanging a back-end even
if the front-end changes all the time
and it makes those friend changes so
much easier to do so Web API definitely
something you should delve into more now
we've just scratched the surface of what
web ABI can do and how to use it
there'll be more videos in the future on
how to do more with this but I want to
get you introduced to this and
definitely recommend that you create a
few api's just to try stuff out and see
how it works all right thanks for
watching as always I am Tim quarry and
I'd really appreciate if you could put
give me a thumbs up if you if you liked
this video and leave a comment with any
suggestions for new videos or what you
thought of this video all right
thanks for watching we'll see you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>