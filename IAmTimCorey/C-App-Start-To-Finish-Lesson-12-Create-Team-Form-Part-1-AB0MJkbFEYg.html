<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>C# App Start To Finish Lesson 12 - Create Team Form Part 1 | Coder Coacher - Coaching Coders</title><meta content="C# App Start To Finish Lesson 12 - Create Team Form Part 1 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/IAmTimCorey/">IAmTimCorey</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>C# App Start To Finish Lesson 12 - Create Team Form Part 1</b></h2><h5 class="post__date">2017-06-26</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/AB0MJkbFEYg" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">welcome to lesson 12 in a c-sharp from
start to finish course my name is Tim
quarry and today we're going to start
working on the create team form in our
last couple of videos we worked on
getting a data access set up for our
create prize form in this video we're
going to do basically the same thing we
did in the prize form when at this time
it would add a new team member or a new
person and before you get to the code I
want to point something out and this is
something I cut on often but I want to
drive this point home don't get
overwhelmed by complexity break it down
into small chunks figuring out which
chunk you can do and then do that chunk
and come back and try again figure out a
new chunk to do and do that but at time
you eliminate all the chunks you can do
the problem should be very small before
you get started in the lesson I'm going
to remind you that if you'd like to get
all of these lessons right away plus all
these other bonuses click the link below
in the description to purchase this
course for just $67 and when you're
considering that don't forget to hit the
thumbs up in this video
I'd really appreciate it ok so let's get
back to the lesson let's take a look at
our form as you can see there's a lot
going on in this form especially if
you're a newer c-sharp developer I'm
sure it can be a bit overwhelming we
have 4 buttons to lists and a bunch of
tables behind the scenes that we need to
use to support this form but if we look
at this in chunks we can see there's an
add new member section that's
practically a separate form it looks and
it operates just like the prize form and
that makes it very clear chunk that we
can do and since it isn't really tied to
anything else in this form until the
very end after you've created the new
member let's start there now the first
thing I'd point out is that the add new
member is actually adding a new person
we come to a database and look at the
people table
into the design view we have first name
last name email address and cell phone
number we talked about a team member
already talking about is the person ID
and a team ID so this is more the ad
person but a form it makes sense to call
it add new member since we're talking
about team members so that in mind let's
create the events for this button now is
a couple different ways increa events if
you want the default event which we do
you can double click on the button and
that will create the event in the code
or you can go to properties go to this
lightning bolt up here we click on that
and find the event you want and either
do a drop down and select an already
created event for us or we double click
in this area in the gray space of the
white space whatever color is that your
background is if you double click here
it will create that event as well and
you can do that in any one of your
events now we're doing a default event
so I can just double click right here
and it creates that event for us now
it's comes back to naming we worked hard
to make sure that everything was named
properly we did that upfront because
when you start creating events this
created the create member button
underscore click event well that's tied
to the create member button but if I had
called this 4 or button 1 then this
would be button 1 on ask or click if I
come back over here and change this to
the create member button this event will
not change its name we have to go in and
manually change that name and that's
just a paint so my suggestion is get
your naming done first the first thing
you do relegate so you're sure your name
is locked in before you start creating
events now in this event
essentially what we want to do is you
want to take the four fields here
creates a person model out of them and
then save that to either the database or
a text file so just like let's go over
and look real quick at the prize form
code we validate the form create a prize
model save that prize model and then
clear out the form so that's essentially
we're going to do again in this one so
the first step is to validate this form
and what validation we want to have on
this form well we can just create a
method we call it is valid let's check
it out real quick it's usually good to
keep no color validate form it's usually
good to keep the same naming convention
so it just know what to expect when I
see validate form I know it's going to
do a certain task and really here we
could do some very very simple or even
if we said you know at this point where
I can put validation in we could say to
do add validation to the form and then
just return true because now we can use
this and it will work every time and
it's not how Allah date anything yet but
later we can come back and say okay now
I want to put validation in I go as to
do right here and I actually do
validation and return true or false and
so that's a way to kind of bypass the
work of validation now and come back and
do it later or come back later and say I
want up the validation make it more
impressive more you know
more robust for example for right now
we're just going to say these four
fields have to have a value for email
address we could actually validate it to
make sure that has the @ symbol and that
some things before that a symbol and if
something after that symbol and there's
a gotten in there somewhere for you know
so the Tim at I am Tim quarry dot-com so
we can validate certain things or we can
get really robots it's okay there's
certain special characters or shouldn't
have and all the rest to validate just
the email address so you know cell phone
number we could get really specific on
especially if we're expecting us we
could say okay a u.s. phone number it
has 11 numbers maximum that would be the
country code the area code and a seven
digit phone number now it doesn't
account for extensions for saying cell
phone number not a business line and we
can do all those validations but for
right now I'm just going to validate
first name last name email and cell
phone all have some type of string in
there so if first name value dot txt dot
length length equals zero return false
okay so I've got this first check here
I'll actually copy this now paste it in
and change this from first name value to
last name value and then once again for
email address and cell phone number
oops
cell phone value text dot length so dot
X dot length what does it says here's a
number the length says here's a number
of characters in this property which is
the actual value whatever's inside of
this box and so it's going to say is it
equal to 0 if it is return false let us
say if validate form so if that's true
it's a valid form therefore we do
something you can also have our eltz
here and say just our message box back
show and say you need
so in all the fields we can leave it
like that but if it's valid then we need
to do is create a person model into
control dot and the using statement for
tracker library dump models alcohol
that's P equals new person model P dot
first name equals first name value dot
text P dot last name equals last name
value dot text P dot email address
equals email value text and finally P
dot cell phone number equals cell phone
value dot text once we're done all of
that then we have to send this off to be
created we have a model now we actually
save this to our database or text file
and if you ever get lost as where you
are since we've already done this once
you can come back over here to the code
for our create prize form validate form
create the model now we go to global
config connection create prize only
instead of create prize we're going to
say global little connection right nope
that's not right
a little config there we go let's go
copy that and paste that so I'm make
sure I type it right and the using
statement for trekker library global
config dot connection dot and we have
just create price we don't want to
create a price we want to create a
person
and pass in our model so how we do that
well we have to come up here and first
look at our ID atic connection we have
the prize model create prize passing the
prize model in the same way person model
create person person model model so that
creates a new entry in our interface now
that's going to break all of our current
classes that implement I did a
connection which is actually a good
thing because I'll remind us ooh we need
to implement the solution or the the
contract for this idea t-connector or
connection and so that's case we have to
add the create person method we come
over to text connection and the same
thing happens it kicks in sit soap nope
you can't do that we have to hit control
dot that little that little light bulb
there kind of goes away it's hard to
track down half a time I get half time I
don't so I have to control dot and hit
enter for the top one in this case we
have now the create person for a text
file so come back a text file let's
start with the sequel file a sequel file
is going to do exactly the same thing as
this one does only with different values
like to copy this now I city for that
copy and paste is dangerous and it
really is so if you're not absolutely
sure you can go step by step and replace
these things don't do this actually type
it out it's up to you for as a video
it's much more convenient for me to copy
and paste than it is to go ahead and
type all's back out alright so now I've
got to fill in my parameters well I
don't have place number the first thing
I have is first name and I have last
name I have email address and cell phone
so those are four fields I have I will
probably name these the same now again
right now I'm guessing because I haven't
actually created this insert store
procedure yet so the SP people insert
now the other thing I don't have is that
model dot ID if you notice in the prize
model I have this ID actually I copy the
whole thing the person model we haven't
created idea remember we didn't actually
put our IDs and yet in their models we
left that off accidentally and so we
have to create those ideas we need to
know what those are
all right so we have an ID now so now we
can actually pull the ID back out and we
turn the model and really everything
here is wired up the way it should be
we're connecting to the tournament's
connection string we're creating our
dynamic parameter list which just
happens to be the same or the five
parameters their different parameters is
still five the first four first name
last name email address and cell phone
number and the last one is our ID which
gets passed the other direction
and so we pull that ID back out call ID
we put that into our model and return
the model so let's take this
and go over to our store procedures here
and say new store procedure we can get
rid of all this top stuff create
procedure what's the procedure name well
it's actually DB o dot SP people
underscore insert one of the parameters
at first name and that's going to be of
type let's look at the columns here
that's of type n varchar' 100 at last
name n varchar' 100 ads email address
and varchar' 100 and at cell phone
number varchar' 20 so be careful in that
that we get the types right and varchar'
versus of bar chart and the number
correct so we can limit to the same
limit as the table does and get lost
here I do have a course on sequel that
is very helpful for c-sharp developers
because it kind of gives a good
introduction all the way through
actually building real databases to
actually work and are a little more
complex than just a starter tutorial but
more real-world and how they're built
and so that really gives you a good
foundation to work with sequel databases
alright so at id int output let's say
equals zero output
I said equals zero because we may not
even pass in this variable now you will
but if someone want to call this without
passing it in we don't have it yet
that's fine will default it to zero and
they can
take this out and we can say insert into
DB Oh people and that the first name
last name email address cell phone and
that's its values at first name at last
name at email address and at cell phone
number and then finally we need to say
select at ID equals scope identity
remember that pulls in the ID of the
last created item or identity field in
this scope which is scope is this
procedure so that's our insert here
you'll grab the ID and pass it into the
ID variable I think the other direction
so if we execute this we're good to go
there we can actually refresh our list
make sure it shows up in the list and
does right there so now we should have
an implemented sequel database save for
our person and now if we come back to
our not the prize form the create team
form we can say P equals and pass it
back in but since
actually going to use that anywhere
let's not create a new variable
unnecessarily or overwrite that variable
unnecessarily in the region not using
that yet is because this is only part
one of this form we're just creating the
new member and really we're dropping it
off at that point we're done we're not
putting in this list yet we're not
putting in this list yet we're just done
and that's because this right here this
add new member section is one chunk
we're going to do that chunk and then
move on not try to do three or four or
five at once because that's where the
issues slip in when you start forgetting
about sections like oops I didn't
implement the text connector so back
over here the last thing is for me to do
is actually clear out first name value
text equals empty string last name value
dot text equals empty string email value
dot text equals empty string and cell
phone value dot text equals empty string
all right so that clears that form out
and now we have created a new member
when you say create new member now we've
just done a seagull connection but let's
test it to make sure it works and I'm
big on testing before you move on so you
can get a little bit done and test it
that's great
do that so in order to do that we have
to come back here to program and change
our database type back to sequel we had
change that you for a test our text
connector for the prize form now we're
coming back to text our sequel connector
for the create team form alright and
that's where a test right here the other
thing we have changed back over here
is we are writing the create prize form
we're not testing that anymore instead
we want to test the create team form so
let's change that in our startup and now
you can run this we get started here
okay
I also want to open up sequel here and
I'll close this out the procedure
instead I'm going to open up a new query
window and just say select star from DVO
dot people and we have nothing in the
list
they'll be important to know for when we
actually create somebody alright we're
going to say Tim Cory
Tim at I am Tim Cory calm the cellphone
number is one one one five five five one
two one two as in no I'm not giving that
out create member it blanks us out which
means something happened if we run this
query we now have Tim Cory Tina I am to
come and 101 - five five five - one two
one two
don't forget that right now we're not
validating this so it just goes in
however we put it in but sequel works so
that's really quick that didn't take
much time at all to implement this form
and part of the reason why it's because
we've done this before and so we know
what to expect another pattern to use
and so it kind of gets a lot easier it's
a lot easier that was the last time we
had to figure out how to create the
interfaces and how to set things up and
so on and so forth where this one we
just say use the same system you already
set up as you grow and develop as a
c-sharp developer you'll have some of
these things in your library your
personal library
where
whether it's a formal library half set
up or just the patterns that you
remember doing you'll have these things
to refer back to it makes your job
easier and easier which is why it seems
like senior level developers just fly
through code it's not really they're
flying to the code as much as it is
they're just reimplemented they've
already had and maybe it's a new in
different ways it made it you know a
little twist on things here and there
but they're just solving the the little
areas they're complex and the big areas
that are just kind of generic they're
reusing patterns from their previous
development career so that's just going
to keep in mind that as you get more and
more experienced this becomes easier and
easier and that's just my encouragement
to you to always be practicing the more
you practice the more you push yourself
the easier and easier these patterns
become where you can just implement
quickly okay enough of soapbox let's
move on to implementing the text
connector so before I leave this
switches back to text just we had it
ready for ourselves so I can close this
out and now I'm going to open up my text
connector and essentially do the same
thing as this only up here for the
create person and the very first thing I
need is this file up here the file name
so privates Const string and this would
be the prize I'm sorry person model or
people Wow people file equals
we can call this either person models
CSV or you could call it people models
CSV I'm going to call it person models
to fit in with the prize models because
see this lines up pretty neatly prize
models store prize models
so therefore person model goes into
person models now you know the casing
here the singular versus plural you can
figure that out for yourself names hard
Fiat what you want to do my
encouragement to you is always keep the
same pattern going in this case and they
call it plural here and I'm going to
call it the name of the model and then
PluralEyes that for the file name okay
so that's really minor but that's up to
you how you want to do it so the first
thing I do is say just follow the same
pattern here I want a list of person
model called people equals I'll you can
call it people file dot full file path
and that works the same way dot load
file dot convert to person models now we
don't have a convert to person models
yet so when you create that where do we
create that and copy that we create that
in the text connector processor and
that's right here convert to prize
models well down below it we're going to
have the public static list of person
model
convert two-person models this list of
string lines and it really is
essentially the same thing as above so
it's going to be a list of person model
when I call this output equals new list
of person model for each string line in
lines now at some point you're probably
thinking wait a minute you preached dry
but don't repeat yourself acronym and
how is this not repeating yourself
because I'm essentially copying from up
here down to here and yes it really is
pretty close the difference is it's not
the same using different models and
we'll use the different mappings down
here so it is different with that being
said there is a way you could create one
method that does any different type it
would be kind of complex and I encourage
you if you want to go down that road
instead of rewriting all that code and
it really could be kind of complex
instead think about looking into a
library called Auto mapper auto map will
do a lot of this mapping for you from
one type to another or from even this
you know that's list a string here it
can map that out into something
different like a list of prize model so
there's ways you can map it and
encourage you look at automatic if you
want to go that direction but I will
tell you this would get a little complex
and the reason it gets complex is
because we're not mapping a string to a
string most the time most the time we
have other days as well like decimal and
double and int these all need parsed
they need parse properly
and you need to handle the idea of error
handling which we haven't done yet but
the idea of what you do in those things
blow up and all that work needs you
somewhere it's different for every
column therefore it's kind of complex
therefore the easiest way to do this is
to spell out your your mapping in a
method and have a method for every
single different type of model yes it's
a lot of code but sometimes you have to
write a lot of code alright so now to
start writing code string array calls
equals line dot split single quotes with
a comma inside that splits our our line
which is one record it splits it up by
commas therefore if you have common
delimited the key here though to note is
we're splitting commas if you have
commas in your data that could be a
problem because with commas in your data
then you're adding extra columns
essentially inputting the wrong data in
the wrong columns and that's a problem
now you can wrap your strings inside of
quotes and that won't happen then if
you're careful but this split will still
split on that since what the split is
really just a really basic splitter it's
not the more complex CSV processors that
are out there the quotes will help with
opening Excel notes other things the
quotes won't help you here unless you do
a little more processing in this code so
just note that the cheap way the easy
way to fix that if you do want to have
commas is to use a different character
to split on instead of comma it could be
any character so you can even have you
know something weird like the pipe
command the pipe key you know that you
can use that you can use the hash tag
you could use the axe
well which wouldn't work really well
because you probably have email
addresses and that use of the @ symbol
to think things through but you can also
split an overload of split if you do the
control shift space in here we are using
the char separator but we could also do
down here the string separator which is
the double quotes with a string
separator we could actually separate on
more than one character so that looks
like this the double quotes inside here
we could say you know double pipe or
triple pipe or we could have you know
something weirder like maybe it's pipe
and then the carrot and then pipe you
know and if you have that in your text
you're going to have problems anyways so
you can do something complex like that
you want to split in order to get around
the idea of having commas in your data
or possibly have come as you do but in
our case I'm going to assume at least
for now
that we have no commas in our data if we
find there are commas I'll either change
the this right here something else or
I'll take those commas out in the
validation process okay so now we need
to create our person model we'll call it
P we're going to start adding to it so P
that first name equals calls 0 remember
ordering is now important calls 1 P
email addressing is the same order I've
used over and over again
since their strings it's really easy
because no parsing to do all right so
there's the four lines and I can just
say output dot add P and I forgot one am
going to change the order which is a
problem if you catch the one I missed
P dot ID equals calls zero I'm not going
to yell at me because I need to have m
dot parse call zero and again that parse
will blow up and crash our application
since it's an unhandled exception if we
pass in an on number string
okay so we've created our person model
we have added the five values to the
five properties and then you're taking
that and add it to our output list and
so the last thing is returned output so
we can save that we can come back to our
text connector and pick up we left off
which was we were just creating this
final piece here so it now we have our
people which is a list of person model
that people has now been created and
what this line has done is it has taken
our file name person models dot CSV
converge at the full path using our app
config is loaded that file making sure
to exists and if it doesn't exist it
returns like an empty list but takes
that list if there is a list of the
empty list and it converts it to a
of person model again if it's an empty
list we get an empty list of person
model otherwise we get a list of all the
people in our CSV file next we're going
to need to find the max ID in current ID
rest start off initialize at 1 remember
down here we've said that we start off
the current ID is going to be the max ID
plus 1 so if we can't find any records
then we're going to leave it at the
default which is 1 which is we want to
start the first ID at so if people dot
count is greater than 0 the current ID
equals people dot order by descending X
arrow X dot ID so that's going to order
this people list ascending by ID take
the first one take its ID add 1 to it
and that's the value of the current ID
then we're going to take our model the
one passed in to create person model dot
ID equals current ID then we'll take
that say people dot add our model so
whatever we have our list was an empty
list or list of five or ten or whatever
people we're going to add our new person
we want to create into that list just we
get down here and then we're going to
say people dot save two people file
so the people file and pass it in we
don't have that method yet what is the
people file well just like the saved
apprised file we're going to create save
to people file and that again is over
here in a text connector it's a text
connector helper or the processor save
to prized file well we're going to
public static void save to people file
this list of people or person model
models string file name now let's count
us out from it I want to show you
something over here and our overload and
give it a second to refresh this is
going to have a red squiggly under it
saying I can't find this but if we look
on our ctrl J list if we look under the
asses it has an update yet to say Miller
isn't a saved apprise file oops on the
wrong spot that's why all right there we
go
save to people file it's not there if I
had ctrl J and look for my even saved
apprise file the method we create for
that we're already using it down below
what we're using I don't find it why is
that well because the extension method
for saved a prized file is on a list of
prized model over here we have a list of
person model not prize model therefore
it's not even going to find this
extension method it will find this one
though all right where I have a list of
string lines equals new list of string
for each
we're going to say person model P in
models where I say lines that add we're
into a dollar sign syntax
finish it off a semicolon so we complete
and then inside a double quotes we're
going to say PID comma member no spaces
here P dot first name and order is
important
oops no space P dot last name P dot
email address P dot cell phone number
and what's that doing it's creating one
string that is the ID comma the first
name comma the last name comma the email
address comma the cell phone number and
that's the same order as ID first name
last name email address and cell phone
number there's our columns and there's a
columns laid out so that's going to loop
through our list of person model our
models for each one it's going to add
that entry to our lines string and then
finally have the file dot right all
lines file name dot full file path
oops file name dot full file path and
lines just like up here code copy and
pasted
what this does it writes all the lines
are going to pass in that's these where
is it right at to this file name the
file name is not good enough we need the
full file path including that name which
is what this extension method does for
us with that being said we can save that
come back
over here this is now working properly
at least it should be the last step we
need to do is return model why well we
have created our list of the existing
people we found the max ID and add one
to it or give it a one if we don't have
any people we've taken that and put it
in as our models ID number
now it has an ID number we have saved
this model along with all the rest our
models if any back to our text file and
now we're passing back the original
model it got passed in only this time it
has an ID associated with it okay that's
it so now let's start this up I can pull
this over I also pull over our folder
notice our folder has the prized models
dot csv file but not our person models
so let's add joe smith joey add smith
e.com let's just do a five five five one
two three four
not a great phone number it doesn't have
the area code or country code that's
okay
create number and now we have a person
model dot csv i can open that with
notepad pull that over and says one job
Smith Joey xpcom and our phone number
just to make sure that still works if we
do another one let's do Sue Storm Sue at
stormy net and a cell phone number
it's that will create the number and
we'll look at this file and can
and now we have ID number of two which
means we are incrementing our ID and all
the values are still there so that's
great we are now saving to our text file
as well as to our sequel file and with
that we have implemented this little
section here really pretty simple
because it's the same code or at least
mostly the same coding pattern as our
create prize form was so this chunk is
done the next chunk rail look at is
filling in these lists here our team
members list box our select team member
list or drop-down box
well ceiling why are these two up and
then look at actually creating our team
from whoever's here
alright so stick around for that before
you go you will see a link in the left
of bias course check out the intro video
on this playlist for more information
all you get if you pay also if you are
ever wondering what you could do to help
this channel out without paying money
I've listed six things that really help
I'd appreciate if you consider doing one
or more of these thanks again and don't
forget to keep practicing what you
learned</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>