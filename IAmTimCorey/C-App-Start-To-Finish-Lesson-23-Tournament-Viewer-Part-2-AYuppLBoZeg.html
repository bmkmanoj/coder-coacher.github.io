<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>C# App Start To Finish Lesson 23 - Tournament Viewer Part 2 | Coder Coacher - Coaching Coders</title><meta content="C# App Start To Finish Lesson 23 - Tournament Viewer Part 2 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/IAmTimCorey/">IAmTimCorey</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>C# App Start To Finish Lesson 23 - Tournament Viewer Part 2</b></h2><h5 class="post__date">2017-09-11</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/AYuppLBoZeg" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">welcome to lesson 23 in a c-sharp from
start to finish course my name is Tim
quarry and today we're gonna finish up
the tournament viewer forum once this is
done we'll have every forum complete
that doesn't mean we'll be done but we
sure will be closed so let's get started
just as a review here's our turn a
viewer forum we've wired up this label
right here the rounds drop down the
matchup list box the displays for team
one team two and even the values for
their scores today we're a wire up this
check box for unplayed only and we're
going to wire up the score button once a
why have a score button we'll also save
this information to either the database
or to the text file so let's start by
the modify this check box so I'll open
up my properties window we're gonna go
to the events tab and say whenever this
checked is changed I'll double click
this and what I want to do here is I
want to refill this list but only with
the unplayed ones if it's checked or all
of them if it's unchecked now we already
have something to fill that list we have
load matchups so you already have that
so let's just call this yet again I will
actually use this load matchups with the
selected drop-down item let's call that
again right here in the check unplayed
only checkbox checked changed now it
doesn't do anything yet but let's modify
this load matchups to first look to see
if that is checked so we have this loop
through and do a for each but instead of
just saying add if if we loop through it
let's right-click and say surround with
an if statement and the if statement
will say M which is the one we just are
looping over m dot winner is not equal
to no that would give us only the ones
where they're not they've not been
completed yet but that doesn't really
work our check box yet that just says
here what you do to only fill in the
ones have not yet been played so how we
modify this in order to get so the check
box determines if we show all the ones
that have been played or not well the
way to do that would be to add an or
statement here and this is where your
logic will come in for ands and ORS we
will say not unchecked let's see it's
not unchecked let's go look down here -
it says unplayed only so not unplayed
only checkbox dot checked so what this
is is saying if there's no if there's is
a winner if that's not equal to null
whoops that should be equals no not not
equals so if there is no winner
meaning the winner is null then add them
or if the unplayed only is unchecked so
you'd be not first so if let's walk
through the process as the best way to
understand a little more complex of an
if statement with an or in the middle if
we come through and the matchup has been
played that means is a winner marked so
is the winner null
No so that's a false but we have an or
here so either one can be true so is
this true unplayed only is checked if
the unplayed only is checked then this
is false because true not true is false
so z faults or NS is false as well since
they're both false then we would not add
the selected item if this was unchecked
meaning it was false not false is true
so therefore if it's unchecked will
always add the items whether they're
null or not so sometimes it helps to
draw out in paper and just illustrate it
that way but this should work and we'll
demonstrate this in a little bit but
first we have to actually mark items as
having been one so that should take care
of our checkbox whenever we check or
uncheck it will reload this list with
either all of them or the ones that have
not yet been played
now let's wire up a score button I'll
just double click here and in this score
button we need to go values from these
two fields populate their objects and
then mark which one is the winner so how
do we know
let's work here having know which team
is this is representing versus this one
well it's whoever we selected in a
matchup list box that then that first
team goes in here and a second team goes
in here therefore let's find out who is
in that matchup list box we can do that
using this code right here
so matchup model M equals and there's a
selected matchup so now we know what our
matchup is then we can say for each
matchup entry model M II in M whoops not
just M it would be m dot entries there
we go
so for each matchup model in entries
nope we can't afford to get through a
four I forgot about that I'll do it just
like this actually so let's just copy
and paste this code I'll copy that and I
will paste it down here remember you do
a four now for each which we want that I
counter it'll do the same thing but in
Reverse
so and it's still M so that's great
so instead of saying put the score into
the text field we're going to put the
text value into a score field so let's
do that we can get rid of this extra by
week stuff and we can take off the two
string and copy this actually cut it and
say equals and score is a what kind of
value a double so we'd say double dot
parse and our text value now again if
the user decides I need funny and put
something like fail in the score box
that will blow up so we'll come back
through the error handling and address
that but that's going to think about
whenever a user gives you information
you need to check it first
so in fact you know what I'm just so
concerned about the user I'm actually
going to pull us out into it's another
method bool parse or score valid equals
double double dot tryparse there's our
string and we have out and this is the
result let's just say score val and
let's say double score Val equals zero
there is a a better way of doing this in
2017 Visual Studio 2017 with c-sharp
seven they allow you to actually declare
this in line so you'd say out int score
or us out double score Val so that's a
nice new feature of C sharp seven if you
catch my video on YouTube I'll have one
on the things I like and don't like
about c-sharp 7.0 as well as one on
visuals to you itself so I'll I was up
soon if I don't already I tell you're
watching this but definitely check those
out for new stuff if you can use it but
for now we'll still do this it's not
that much more and then down here you
will wrap this an if statement surround
with if if score valid else
and this is the the problem area we
could do MDOT entries 0 dot score equals
zero or we could do nothing at all
I kind of like not doing anything all
because then they're not actually
modifying anything so let's just do a
message box dot show please enter a
valid score for team one you know it's
team one and I'm gonna do a return and
the reason being return is because I
don't want them to continue I don't want
them to actually move on to the next one
and put a score in there mafia score
because they've already broken something
so let's actually do that they'll exit
out of the entire method so we don't
need to set this information and that
will do the same thing down here where
we'll actually grab this same code if I
let's copy the entire thing we don't
need the else I'm gonna paste it right
above the code and we haven't make all
the different changes to this so score
two value team to score value team to
score value and we don't need a double
parse sorry about that there we go
if the score is valid we've already
parsed it in the score Val variable
makes our cut a little bit cleaner so
now we should have everything except for
that which we has changed and now we can
modify or take this out and we don't
need to change the text for the team
name so we'll take that out as well
so now what happens is when you click
the score button it should update the
team with the correct values now we're
not done yet
let's go after this for loop so after
you loop through both the first and a
second team and we haven't returned
early because they put bad value in we
should be OS a let's actually capture
these values outside of our if statement
so I actually say double team one score
equals zero
double team to score equals zero and so
actually your place this I'll do the
same thing down here I'll actually
replace it remember the anything inside
of Cree braces lives in that scope so a
my variables live inside scope and they
die at the end of those same curly
braces therefore I don't have access to
those variables outside of the scope of
this if statement therefore in order to
access them I have to create the
variables outside the scope in this case
I created variables in the scope of the
event method that way I can have access
to them throughout the event and the
reason why is this I'm gonna say if
team one score is greater than team to
score that means team one wins
so if team one wins when you take that
team entry and put it into our matchup
as the winner so we'd say m dot winner
equals m dot entries 0 dot team
competing so we'll take the team is
competing and mark that as the winner of
our matchup now this winner is no longer
null which that's worth checking for
when we display or not display the items
based upon if we allow completed ones
that show up
so we've taken match up entries 0 and
how do I know that's a valid spot we
don't want a out-of-bounds error in my
array I know as a valid because I know
that I have two working scores team one
and Team two because we went through
that now if I only have a team one guess
what I will still mark team one as the
winner because they really are for
example if team one is Tim's team and
team two is actually two by we only have
one team therefore team one the score if
it's greater than zero is the winner you
know this does raise the issue of high
score versus low score for the winner
and if you want to support the idea of
for example golf where the low score
wins
then what you'd have to do is reverse
this greater than to a less than if you
want to support both will have to have a
setting in our application somewhere
where we say it's high score wins or low
score wins and then you do either wrap
this and another if statement says if
high score wins do this one else do the
other one or something like that and you
can store that information in your app
config if you want or you could store it
in your database but for now we're gonna
say that high score wins
so if team one score is greater than
team to score team one score is the
winner and this is where the l's is kind
of tricky because if what if its height
in this case if I used to an else and a
tie tie will always go to team two now
we probably shouldn't have a tie but if
we did what we do so I'm gonna say else
if and say team to score is greater than
team one score oops
and I'll do em dot winner equals m dot
entries one team competing I'm gonna
leave off or I'll actually tell them
else message box dot show I do not
handle tie games so I'm not gonna mark a
winner I won't say who won I'll just say
that they're even as of right now and
that's it so there's our logic for
marking who won and who didn't and now
based upon which one is scored let's see
if it works for
and then we'll get into how we handle
savings information to the database and
some other considerations so we're going
to load our first tourney and we have
the uncanny losers let's give them a
score of five and we have to deal with
this because normally we shouldn't even
see this because they actually marked as
one already so we should already have
them either put one here or something
like that and just have it marked as
winner but let's let's mark there's a
winner and see what happens nothing
seems to have changed but we come back
to it five is in that box again that's
good if we uncheck the unplayed only
notice you only have one team now
because unque losers has completed their
round now if we mark Sue's team is
having ten and score that in theory we
have a problem and the reason we have a
problem is because I uncheck or I
checked the unplayed only we have no
entries for unplayed only and this
raises a bug in our code and it says
sequence contains no elements so I said
load match up get the first one well we
can't do that because there is no first
one in empty list so let's solve this
problem by saying surround with if
selected match ups dot count is greater
than zero now it runs just fine now it
didn't clear out this list which we got
to work on that but for now at least
this works
now here's what I do when I spot a bug
like this where I still have values over
here first of all I say is this really a
bug or is it just something we can live
with and not worry about and if it's a
bug where I say nope I really can't live
with that then what I do is I write down
a piece of paper somewhere and I find
paper is much better for this than
trying to put it in electronic format
just because electronic format tends to
draw me away from what I'm doing I get
sucked into other things especially
web-based stuff because web-based stuff
you're there you're putting your stuff
in all of a sudden you realize hey I've
got a new email and click on that or you
know you open up my new tab for my
Chrome browser and gives me the day's
headlines in the bottom you know that
the popular Bing searches and gives me
nice my six or eight popular websites to
go to the ones I go to all time well
that's distracting so I'll end up going
with three or four those websites and
looking a couple of news stories and
that has done a path and so that
electronic tool which is what's a saving
time ends up cost me you know ten
fifteen minutes
of distraction so I'll usually write
down a piece of paper but you know
there's a bug here where nothing to
match up list and the the last selected
team is still available or still
viewable so I'd probably clear it out we
also have they have to address the idea
of if it's list is blank should we even
see any of this stuff and the answer is
probably no so before we go any further
let's actually deal with this bug I
wouldn't recommend doing this in real
life and I hesitate to even do it here
because I don't want to show you things
that you really shouldn't do so but I do
want to dress it but I also don't want
to lose a threat of where we're at and
right now under the score button which
has way too much code right in the event
we should
create at least one method for this I
don't want to lose the fact that we're
not done yet in this we have to actually
save this information to the database or
to the text file so I do want to address
that as well but this is a pretty simple
fix and so let's actually address this
right away so I'm gonna pin my I just
gotta stop at first you look at my
properties again if you come up here all
right there we go
if it's this icon right here when
Mouse's and that's the property window
right now we're in the events window or
events section of our property window so
what about properties and I want to see
the names of these fields of text one
name I'm sorry team one named team one
score labeled team one score value so
I'm assuming these are the same so if I
remember team one team two I can get six
of these right away so let's go look at
the with a matchups or actually shown
load matchups what we're going to do
here is we're gonna say display matchup
info and that's it
then I call this method call display
private void display matchup info and
we're going to say if selected matchups
dot count is greater than zero so we do
have something to show if we do then
team one name dot visible equals true
and actually can make this a little bit
easier let's say bull is visible equals
and check this out make eat the parens
do that like parens around things from a
sign up now what I just do there there's
a color shortcut and I'm not always a
huge fan of shortcuts and if it all
confuses you don't do it but I'm saying
here is this right here
it was the the heart of my if statement
this is this the part the evaluates to
true or false and based upon that true
or false I do something I'm taking that
and capturing the result of it instead
of doing some kind of action on it so
I'm saying here's the evaluation store
that in a boolean I could make this back
into an if statement and if this was
true set is visible equal true and if
it's false set is visible equal to false
but I could just take this value and put
it right into is visible but now I can
say team one name that visible equals is
visible do you see why that's better
because now I don't have to specify team
one name dot visible twice once for true
once for false now I do it based upon
this boolean variable
and I saying all the values to same
boolean okay team to score label and
team to score value and now I have to
grab that's a couple others this one
right here is versus label and it's a
score button so it is visible and score
button that visible equals is visible so
now every time we load the matchups
we're going to run this check and this
check says if we have values in our
selected matchups then we set everything
to visible that's be true if we don't
have values in our matchups set
everything to invisible or false
let's see us in action
so load tourney I will mark this as
scored let's do our check versus uncheck
notice it not refresh this to take it
out of the list but now notice my score
information is gone now it's back now
it's gone
and that's based upon whether or not we
have values in our list box so that's
good but now we have to also take it out
of the list
if this is checked and we have scored it
and that's actually not too hard to do
so let's go ahead and do that right away
so the way to do this is to come down
and look at our event for the unplayed
only checkbox on our score check changed
all we do is call the load match ups
again so let's select that and let's
actually run that in the score button at
the very end and what this is going to
do I'm going to run this what's going to
do is every time we change a value and
hit score it will refresh this list and
there we go now it responds more like we
expected it to and if we score this it
even takes it all the way away so that's
great that's exactly what you wanted now
let's put a tie in here and we don't
handle tie games so everything is
working like it should the only thing we
have not yet done is whenever this
button is clicked we want to store this
in the database or text file and that's
not actually not that hard to do
so let's look back at our score button
click and we're going to clean this up
and take it out of the the button under
sort click event and do it more like
this so we're gonna need to do that in a
minute
but for now what I do is actually
complete the action and then we'll look
at how how to actually extract it out
and I may say that for our our video on
refactoring
rhe factory is an important part of an
application but if you see something we
first create it definitely do it then
but there's a lot of times you come to
an application where you're like oh that
can be done so much better and so it is
a good idea to also learn how refactor
so that maybe one that it's not
contrived necessarily I don't want to do
any contrived but is something where I
could refactor now or come back to it
refactor and for the sake of
demonstration I think I'll come back to
it and refactor alright so before we go
any further let's figure out how to save
the information now if we come over here
to our solution Explorer we have the I
data connection where we create items
create tournament create team create
person create fries and we get items
let's create a new type and pull best
spacing here arrests a void update
matchup matchup model model now why not
return type well because if we work on
an object then anything we do gets
passed back to the caller because again
it's just that address but also we're
just updating
we're just saying take the information
that I already have input the database
so I can get back next time I call the
database so let's go as sequel I believe
we're actually in sequel right now but I
can check yep we're in single right now
so let's start with sequel and it yells
at us about not having implemented
contract fully so we can do our control
dot or do the drop down and say
implement interface and then find that
entry
I've got a lot of code in here now so
we're gonna do to update our matchup
well it's actually a couple things when
you do want you to store the matchup and
two is when you store the matchup
entries now let's go to our sequel first
we'll start there and let's look at we
have matchup entries inserts but you not
have a matchup entries we're actually
doing work on it now let's also look at
what matchup entries has in it let's do
a select star from matchup first
matchups and also a select star from
matchup entries so matchups has a
tournament ID the actual ID itself the
winner and the matchup round and the
winner is the winner ID so all we need
to do to update the matchups is passed
in the ID of the winner for the matchup
entries we need to pass in the scores
and that's it because all the rest of
stuff is already taken care of now the
one thing that we may need to change and
we'll need to address this a little bit
is the idea of the team competing ID
because that will change as well we
don't want to create two different store
procedures we don't have to so let's
also work on changing that and this is a
question you have to address there is
another way of doing this which be a
which would be to create two store
procedures one to update a score one to
update the team competing ID and then
it's specialized for exactly what you
want them or you can create one that
does both I think we're going to create
the one for this
I only think we need to have two
separate ones to do almost the same
thing it's just a little bit less to
maintain our in our sequel list here so
let's create a new store procedure will
start with matchups I'll actually
spanned out the columns for this and for
matchup entries so let's get rid of the
top stuff and we're going to say DB o
dot SP match up
match ups underscore update we're going
to pass in at id int now it's nine
output it's an input this time so the
anti D and the adds winner ID that's all
we're gonna update we're not gonna allow
them to move match up to a different
round we're not gonna allow them to move
a match up to a different tournament so
therefore we only need these two values
so now we can say update DB o dot match
ups set a winner ID equals at winner ID
where ID equals at ID it's very
important and that covers my sequel
course but it's very important that you
have this where clause if you don't if
you forget and just have this guess what
happens every record has the winner ID
set to whatever you passed in every
record that's a real bummer
when you have production data
it's still a bummer when you have test
data because you just wiped out all that
information it's really a bummer if you
don't have a good backup so be careful
of that inserts you can't do a ton of
damage of the insert updates you can do
an awful lot of damage so just be
careful to have all of that and don't
accidentally select just this and hit
execute because again if something is
highlighted only that code gets run so
let's create this procedure and now we
have our procedure
it takes just ID and winner ID let's go
to our code and I will write this in the
comment and now we can copy the code for
a less complex example of a write is a
pretty simple one I'll just copy this
and use this as a pattern to get started
so it would be at ID and add winner ID
no outputs the first one is the matchup
dot or model dot ID that's right and the
second one is the model dot winner dot
ID so we need to also create that
connection the one I copied from had the
connection passed in so I have to create
that
notice how a visual so you'll clean up
my code for me and format it nicely I
was very nice of them makes our lives a
little bit easier so let's pass in the
correct store procedure name and that
should be it so now we've opted our
match up but we're not done there
back over in sequel we have to create
another stored procedure in this time
it's for match up entries and so I'll
pass in the ID and then we're gonna pass
in the team competing ID int and we'll
say equals 0 that allows us to say well
if we don't know the team competing we
don't have to pass that value in if we
won't pass it in the default is 0 so the
oven iam update is the score and we'll
also put that as a 0 oops int 0
and actually it's non-integer
it's a float there we go that's better
so now we can pass in the ID we have to
pass in the ID and then it can
optionally pass in the team competing ID
or this score or knee or both now
neither would still work but that's kind
of stupid so what this would do is if
we're updating a score we just pass a
score in if we now know who's competing
in this matchup entry we pass in just
the team competing ID and that takes
care of updating this this record and
actually now I look at it we also
allowed nulls
so let's actually put a null and says
zero remember I said that a score of
zero is actually a valid score so let's
let's do that so now we can say update
DB o dot match up entries set team
competing ID equals at team competing ID
comma score equals at score where ID
equals at ID so now I'm updating two
values the team competing ID and the
score if we don't pass in one of the
values it will be set to null all right
so let's grab this so we have ID team
competing ID and score
all right so there's our store procedure
there's our three parameters and that's
just my notes so I don't forget what to
put in each section now we will do a
copy of this and do a for each for each
now I start with the collection first
usually it just makes a little easier to
fill in what the name is gonna be so
we're gonna say model dot entries so
this will be a match up entry model I'll
call em e there's our code for calling
the store procedure I'll need to update
all these values ID is correct the team
competing actually ID is not correct
that would be m dot ID the team
competing is emmy dot team competing dot
ID and the winner is it's not a winner
it's a score hey when does that score
there we go
the reason it did that is b they double
clicked on here let's gonna hit control
V the problem was that was getting too
fast and I hit control click and that
brought up this peek at the definition
for string which okay that's kind of
cool if I'm a control click here it will
bring up the definition of model or
match up entry model and I can look
through it that's kind of neat
but I often get in too much for hurry
trying out too fast and double click and
paste at the same time and that makes me
do that so that's why happens it's a a
nice feature to have but it also can get
in my way once in a while okay so we
just change the value for score to be M
e dot score now we're passing in all
three values here but this one right
here could be a problem because if we
don't have a team competing yet then we
have we would have an error now we
should have a team competing by now
because if we're saving a matchup and
updating it
we're either updating to add the team or
we're updated to say what the new score
is but if we have a new score that means
it already has a team so in theory they
should never crash and if it does crash
that means that we're trying to set the
score for a entry that doesn't have a
team and that doesn't seem to work for
me now we have the by week but we don't
release a score for by we don't we don't
have a place to put the score so that
wouldn't cause a problem so here my
thought on this this we won all those
times when the application crashes
because we have some sort of malformed
data in here and we don't we definitely
don't want to store that then in sequel
so let's leave us alone and pass in all
three parameters and trust this will
have a value either definitely should so
that's not really trust it's more of a
it should it will
so now we have updated the matchup and
they've updated well that's the wrong
store procedure that's why you check
these things that's why I hate the copy
paste because copy paste method right
copy its whole thing here I forgot to go
all the way the bottom and change
everything that's why I sometimes do the
the comment method or I comment out
every line and then just uncomment as I
modify a line that way if I had done
that I would have seen oops
haven't done this line yet so I'm not a
big fan of copy paste and yeah I use it
a lot just because it is a huge time
saver but you have to meticulous
meticulous about making sure that you've
changed everything you use a system to
help you with that being said I think
that this is now done we've now updated
our match up let's say that we'll save
the idea connector we'll come back over
to the code behind for our tournament
viewer form and we'll say a global
configuration
I should config control dot add the
using statement dot connection dot then
you look for the update update match up
and pass in our match up I can look up
above our matchup is M but let's verify
that M is the match up are working on
therefore we pass in M now we have not
yet implemented the tax connector let's
do that real quick but not actually do
anything with it
just we can run the sequel side things
and make sure we have an updated value
going through load tournament
let's do uncanny losers first let's give
them a 1 and say score know that if I do
this they're now off the list let's
close this out and actually the close
the entire application because even if I
were to reopen at this point that model
has been updated by our code therefore
it still has the newer values the way of
verify it's in the database is closed
all the way out reopen and then check to
make sure those values are still there
let's do that and notice i'm canÃ¨
losers is Marquand nothing versus the
bye week and they have it marked as
played now I don't yet have a matchup
which we're going to take care of that
too because this should say uncanny
losers if you know at least half the
team's coming through so we'll take care
of that in a minute but at least know
we're saving to sequel now I could also
verify by going a sequel and coming to
our matchups let's go back to our this
right here and we'll say run again now
we have a winner of two for this entry
we have a score of 1 over here so we've
got data going in that's great but now
we have to deal with a text connector
side of things we can't forget about
that now again here we have most of the
code already so let's go through and add
the rest so we're going to put in here
to actually save our matchup well let's
come over your text connector processor
first that's where all of our code is
that works on things like the the
matchup model so I want to do a model
dot update
so let's scroll down here we have this
is a matchup model where you say save
match up to file and that's actually
really close to what we need so let's
actually take all the code inside here
era create a new method now whenever you
copy all the code or a big chunk of code
you should immediately think there's
probably a better way of doing this and
there is but in today's lesson we're
just going to make a similar method it's
not the same method a similar method we
may come back and refactor this or we
may not here's the biggest takeaway ssin
you should get from this though it's
more important to get your application
running than it is to write really
amazing code now don't get me wrong
amazing code is amazing but it should
not be at the expense of taking an extra
day two days three days to get your
application running the other danger of
writing amazing code is it's usually
more complex which means more debugging
time so I last see an application
written with simple code that got the
job done and got out the door and then
you said okay now it's time to refactor
and you saw if you could make that a
little more powerful by crunching it
down to one method making different
methods off of it whatever you need to
do so that's my encouragement to you I
said before I'll probably say it again
but better to ship than it is to have
awesome code that never sees the light
of day all right so I made a copy of all
this code I'm gonna create a new public
static void update matchup what's it's
called save match up to file update
match up to file that's a little bit of
a weird name but
it matches the other pattern and you
understand what it's doing this matchup
model and they'll call it model and up
here we called it matchup so let's
actually keep those two comparable that
way I paste my code in here everything
should still work the same but we don't
want to work entirely same because for
example this code right here is finding
the ID to add to our matchup we don't
need that but we also have this code
right here which adds our matchup to the
list which is great except for one thing
and that is we already have a matchup in
this list that matches our matchup it
just doesn't have a new information
we're doing update here so before we add
our match up to the matchup list we have
to take the other matchup out so for
each matchup model m in match ups if m
dot ID equals matchup ID so the two the
same ID then match ups dot remove M now
we're going to try that but sometimes
and for good reason
sometimes when you change the the list
that you're looping on it causes a
problem if that's the case
will do in fact you know what we're
going to avoid the potential it being a
problem we're say matchup model and this
would be the old matchup and then we'll
say instead of removing it will say old
matchup equals M why is that different
well we're just taking the matchup we
find and putting that address into this
instance then we're done we can say
matchups dot remove old matchup now it's
go yellow does it say it's unassigned
and the reason it says it's on a sign is
because the only way it's assigned is if
this is true at some point it does not
have to be true therefore we have to say
establish a new instance first and then
override it
that way if none of these in the 4-h if
none of them matched then what would
happen is we try to remove a new matchup
it wouldn't find any to remove and
that'd be the end of it so now we add
our matchup and we should be good to go
the rest this code should work except
for this right here entry dot save entry
to file we don't want to save our
entries to file we want to update them
therefore it will say update entry to
file
we'll come down here to the save and
read a file will actually copy his
entire things we even have a signature
of the method name now we're going to
paste it down below we'll call this
update and we don't need the file name
passed in we fixed that so we can call
it from the global context a global
config so now this the same thing so
we'll file a same pattern we'll get rid
of the the ID check will say match up
entry model will call us old entry
equals new match up entry model for each
match up entry model E in entries if e
dot ID equals old not old entry entry ID
if a tour the same then old entry equals
e then down below we say entries dot
remove old entry and now the original
value for our match up entry model is
gone
and the rest of this is fine it loops
through it updates the information and
it writes that to the config file or to
the file so therefore we should be we
don't need to pass in the file name we
should be good now to call this update
match up to file so we should be less a
model that update match up to 5
and that should be all there is to
updating our information in a text file
let's run and find out whoops we're
still in sequel so let's change this to
be a text file and write it again we
have the it might work terney sounds
good we have two values the worst team
is has a bi-week that's convenient
I'd score them let's first check this
and we'll score them and now they go off
the list now it should be that that was
called which means if I close all this
out and start over again the it might
work tournament the worst team is a
value for a score of 1 and they are
marked as complete so now we've updated
the text files as well and that was
pretty simple there wasn't a whole lot
to do there that's great but before we
congratulate a cell team for being done
we need to realize that we're not done
yet we have one more thing we need to do
when I update a team and say score they
are marked as complete that team then
needs a put into the next round
fortunately that's not too hard in our
behind our score event before we
actually call the update let's modify
our next let's call before the load
match ups just in case they also have
changed the drop-down which they don't
they could but just to be on the safe
side so we'll do is we'll update the
parent ID of the value so it's a little
hard to explain
let's look at what our models say this
model says parent matchup ID so it says
this team whoever they are came from
this parent matchup ID well now we know
what the parent matchup ID is we can go
find that because the current matchup
since it's scored this becomes the
parent we go find where that parent
matchup ID matches our current ID and
say okay well here's your team for that
tournament or for that matchup let's see
how this works so we're going to do is
do a for each we're a loop through all
of our matchups now what are our
matchups we have a list the very top of
our tournament inside our tournament
model has all the matchups there those
round of rounds so therefore we can go
through each of those rounds so list of
matchup model round in tournament dot
rounds then for each matchup model M
nope you can't do a me that's already
being used up here so let's call this
our M for round matchup in round so now
we have each matchup now we say for each
it's one more for each right this is a
matchup entry model will cause me in our
MDOT entries because don't forget that
the matchup entry is what holds the
parent matchup
because each entry has a different
parent so now we can say if m dot parent
match up dot ID now we did have I know
if you noticed we did have parent match
up ID now that's what comes from the
database remember that the database
doesn't load the object it just loads
the ID we could rely on that ID still
except for one fact if this hasn't
pulled from a database if it's pulled
just from our object which was just
created our tournament model object it
pulled from that then the parent matchup
ID would be blank or 0 we can always
trust though the parent matchup ID
because whenever we rehydrate the model
we always fill in the actual object
therefore we can trust this it's the
trustworthy want so if that parent match
up dot ID equals our m dot ID which is
our current match up ID if those two are
the same then we have a match and we can
say me dot team competing equals m dot
winner since he marked one as a winner
we can put that team in the team
competing in the next round before we go
any further though we also have to
update our match up to do that
we say update but not RM because that's
a matchup entry we update I'm sorry not
M because M is our matchup instead we
say our M for round matchup because this
is the one we actually modified the
round matchup so make sure you get that
right
don't put M even though it work it
wouldn't actually update the correct
matchup therefore you wouldn't see the
parent being updated properly so with
that being said we don't need a modify
sequel or the Tex connector because it's
already in place we already know
everything we need to know now we can
say start go to it might work low the
tournament now you've already scored
this and we didn't mark it as mark the
parent of the next round
so let's this court again and we have an
error let's pull it error message back
up for a minute I went way too quickly
it says object reference not set to an
instance of an object remember me
telling you that you'd see us message
more and more once you started using
class instances yep
you see it a lot so I'm trying to access
the ID parents match up when a record
doesn't have a parent match up remember
that every matchup doesn't have a parent
round one there is no parent match up
that it came from therefore I have to
bypass this let's move it up one line
will do a surround with well
if statements if me dot parent matchup
is not equal to null now why is that
okay I do because I'm skipping over this
logic right here well if you don't have
a parent matchup then you're obviously
not going to match our ID therefore we
can safely skip you lets it continue now
let's go around number two and notice
that while a matchup has not yet been
determined we do have the worst team for
team one if we come back over here
around one and say the best team versus
the ok team let's pretend the ok team
wins now in round two we have the worst
team versus the ok team so we've now
been able to progress to the second
round isn't that excellent so it's
nothing in round one round two only has
one game because we only have the one
game to play now we're not going to deal
yet with what happens when we win the
last game because that's once we get
things set up a little more then we'll
come back and actually do the report and
the celebration and all the rest of a
person who wins so let's let's save that
for later but for now we know that
everything is working for capturing this
information just to verify and it's
always good to verify let's come to
program dot CS change it's a sequel just
make sure it doesn't work any
differently with sequel we'll grab our
first tourney will score the uncanny
losers and it says oh you can't do that
object reference not set an instance an
object let's find out why the winner ID
is no remember I said that we should
always have a winner ID because we're
scoring this actually I was that was
actually team competing ID but we didn't
check for when our ID so why are we
storing a record that doesn't have a
winner ID match up not yet determined
you see why we don't we're not storing
it because we don't have a winner yet
for this matchup but we do know now that
one of the team competing is the uncanny
losers therefore we don't store this
information we don't actually store it
all so what we'll do is we'll actually
move the cursor up here wrap all of this
in a or surround with an if statement
and say if model dot winner is not equal
to null why well if we're just updating
the entries we don't need to update the
match up as well therefore we can skip
over this section we don't have to do it
at all let's say continue and now it
says hey wait a minute
object reference not set to an instance
of an object this is the one where I
said yeah we'll always have it I was
wrong so let's find out why well if
we're looking at this the first one is
unque losers in our model i can zoom in
here for you let's train your eyes but
if we go to the second model entry team
competing is null well that's kind of a
bummer
so what we do here well we again
surround with our if statement but here
we actually move it all up here and
we'll surround this entire thing because
you don't want to do the update if the
team competing is no biz with the team
competing is null it shouldn't have a
score either
so therefore surround with if statements
this is way attach a code because it
worked in text file and we actually
modify anything a text file save to do
this do the update therefore we thought
oh it's gonna work everywhere not so
fast so we still have some bugs in our
logic and that's ok
so if me dot team competing is not equal
to null because the team competing is
null we don't have a team compete ID and
we don't have a score they continue on
that and now to go around to we'll see
that unque and losers is in the first
spot come back to round 1 let's say that
sue wins big 124 to 0 and now those two
are updated unplayed there's nothing in
the first round round number 2 it's
uncanny noises vs. sues team so sequel
now works the same as the text files or
at least has the same outcomes and
that's all there is to wiring up our
last form at this point all the forms
are done now our application isn't done
we've got a few things left to do first
of all we need to go over all of our
exception handling now you won't do
everything necessary this whole
application we're gonna pick out a few
places where we have to put some
exception handling in to more gracefully
handle issues
the next big thing you do and it's a
pretty significant one is we need to
refactor our application our application
is working but now you go back through
and make the code better more efficient
and better at what it does we also need
to add the idea of prompting users so
we're going to send out emails whenever
a teen has been marked as ready to play
a game we're gonna send out a blast and
say okay here's your matchups
you know Tim's team is playing Sue's
team and let us know when you're
complete so we'll create those emails
and send them out and if you are one of
the paid subscribers we're also going to
add in the idea of sending text messages
to the user to say hey you're up and
you're playing you know Sue's team so
we'll do that as well but then after
we're done it leads to emailing but also
the texting if if we all view that then
we'll come back and say ok now that when
the tournament completes entirely when
all the games are done then we're going
to have some sort of system that emails
out probably or at least displays a
message that says hey sue won and beat
everyone in the contest and so for
tournament XYZ sue is the winner that
will also be the place where we'll say
okay sue is in first place therefore sue
gets X number of dollars or you know
however that works out for the prizes so
if sue has first place in first place
was marked as 50% we'll calculate how
much the entire tournament brought in
and then say sue gets half of that so
we'll do all that so it's still quite a
few steps to do but really were on the
very tail end of this application we're
almost done and now we're in the cleanup
wrap-up face so definitely stick around
we got more stuff ado but also be
encouraged that
were very very close to being done</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>