<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>C# App Start To Finish Lesson 17 - Create Tournament Form Part 3 | Coder Coacher - Coaching Coders</title><meta content="C# App Start To Finish Lesson 17 - Create Tournament Form Part 3 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/IAmTimCorey/">IAmTimCorey</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>C# App Start To Finish Lesson 17 - Create Tournament Form Part 3</b></h2><h5 class="post__date">2017-07-31</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/bpPBPi4laEM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">welcome to lesson 17 in a c-sharp from
start to finish course my name is Tim
quarry and today we're going to mostly
finish the create tournament form at
this point we only have to create
tournament button left to wire up so why
is it only got mostly finish well this
part is really two different ideas one
is about saving the data to the database
the other is about setting up the
matchups for a tournament I want to
break those two apart so we don't get
confused on what we're going to do we're
now I don't know about you but I'm
anxious to get this form working so
let's dive right in before we get
started in the lesson I want to remind
you to subscribe to this channel if you
are subscribed click the little bell
icon make sure your game e alerts when I
add new video and while you check on
that could you also give this video a
like I know that we're just getting
started
but liking a video is a simple way that
you can make this course more popular
and that helps everyone it increases the
visibility of my videos on YouTube which
generates more income for me it helps
others out because they get introduced
to this valuable content and it helps
you out because I am able to produce
more free videos ok
so let's get back to the lesson ok we
have our button here create tournament
let's jump right in and at least create
the event by double clicking ok we have
the event now what goes in here this is
where I do my comments again just we
have the different steps and they can do
that step one by one and make sure
you've got them all done our first step
is going to be to actually create the
tournament itself taking the name the
entry fee and actually create that
record for it in the database we have
the tournament's table and if we look at
this table we're going to see we have
the term it name the entry fee and it is
active or not now in a create a
tournament it's active so that we
already know that information so click
over here
let's say create tournament entry now
why is that first well we also have to
save the prizes but if you come look at
the table over here for tournament
prizes we'll see we have the tournament
ID in the prize ID well a term ID comes
from creating this record in a
tournament table
therefore we need the tournament ID for
this the prizes there for the prizes
come after we create the tournament now
some of the entries the entries we have
term ID and team ID which means we're
going to take every one in this list
take their ID as well as a tournament I
D and create entry so therefore we can
say create all of the prizes entries and
then also create all of the team entries
so those are three jobs going to do
first and then once all that is done
down here in this we for the next video
we need to create our matchups now let's
take a peek at our tournament model our
turnit model has the tournament named
the entry fee the teams entered the
prizes and the rounds which that will be
once we actually create our matchups
will populate that with our rounds so it
looks like is we can create this model
here without the rounds filled and we
can leave that blank
but everything else filled in and then
we can say save that entry and have the
either the sequel connector or the text
file connector save all the information
we need in the various tables so let's
do that let's first create our
and model we can do that right now
that's pretty simple tournament model
let's call this TM equals new turn it
model TM dot let's start with a
tournament name equals tournament name
value dot txt now TM dot entry fee
equals what we call this we call entry
fee we did entry fee value dot txt now
that's not going to go into entry fee
because entry fee is a decimal so it's a
few different things we could do one we
could do is just the easiest is say
decimal dot parse this text now the only
issue there is if the user decided to
put some of the sides a number in that
box it's going to explode and so that's
probably not the best solution and this
isn't an area where I would want the
application to crash
instead I want the application and not
go any further and then as a key
distinction between crashing and not
going any further in this case what I'm
going to do is instead of doing a parts
I'll do a tryparse I'm actually going to
take this away from here and let's
pronounce put a zero there just have a
placeholder I'm actually I come up here
before even create our tournament model
gonna say validate data I'm going to say
decimal C equals
let's start zero and then say boule fee
acceptable equals decimal tryparse entry
fee value text comma out fee now what
this does is it says I'm going to try to
convert this value right here the entry
fee value text I'm going to try to
convert that to type decimal if I do it
will send it out through this fee
variable and if I don't it was going to
zero out two feet and it will send a
false as the result of this method into
my boolean house in the first time this
so let's just move on we're going to say
if fee acceptable let's actually say not
the acceptable again if you'd rather say
fee acceptable EE equals false that's
fine too
we can do a for now message box show
saying you need to enter a valid entry
fee and then we can also do give a
caption it says invalid fee and then we
can go on get buttons you want and all
the rest
let's give it a button message box
buttons dots okay and then after that
the icon will be a error that's a little
more complicated message by
to normal but essentially all we're
doing is filling in more values that are
nobody faulted and so the message box
buttons die okay is default value but
that allows me to specify and make sure
Aaron knows but then I have a caption up
the top of the message box as well as an
actual value message box and then this
message box icon error just gives a
different icon is that that right icon
that make sure you know oops I did
something wrong so that lets the user
know there's a problem but we still need
to do the return and what this does is
it stops this processing at this point
no further so we know that if you get to
this line right here this is a valid
feet otherwise if it was not acceptable
we'd be kicked out now you can say TM
entry fee equals C now let's move on to
the prizes now the prizes are stored in
the selected prizes so you can loop
through those and say for each prize
model prize in prizes selected prizes so
for each prize in the selected prizes
list whereas ATM dots not get type
prizes dot add price we could do that
and that's a loop through each selected
prize and add it to our prizes list and
then work if we need to modify something
in each item or if you're only selecting
certain ones from its list but since
this entire list is the selected prizes
we can make our lives even easier and
I even do it for each TM . prizes equals
selected prizes because this is a list
of prizes or prize model and this is a
list of prize model and they can also
say TM dots entered teams equals
selected teams and now he populated our
tournament model now they can actually
save it so just like before
the first thing you do want to save
something is you go to ID a connection
and we're going to say let's go up here
turn model create tournament and pass in
a turnip model so it follow the same
pattern as all the other creates we're
going to pass in one model and get one
model back now that model came back
we'll have the ID which we don't have
yet so let's create that in fact just
make your lives easier we can copy it
from another model simply enough because
the idea is basically the same thing
it's just unique identifier for the
tournament all right so now you have an
ID to pass back if we need the ID let's
save this and now single connector is
going to yell us we implement the
interface by doing control dot hitting
enter and now right here we need to
create a tournament before we do let's
go a text connector and do the same
thing and implement that save that and
now over here in our sequel connector
we can actually put the logic in to save
our tournament I can copy the code from
up here just so I have the structure of
what I'm going to do again we're using
the same structure that way it's a
similar and how we do things so they can
expect certain things and so that
certain things pop out when they're
wrong so before we go any further in
this though I'm actually going to
comment out everything in here and
uncomment if I need it now before you go
any further though we need to actually
have some kind of insert statement for
each of the three of our tables so let's
create one for tournaments first so
right-click on store procedures new
stored procedure we're going to call
this base of the same naming convention
for DB OSP tournaments underscore insert
now what parameters is need well let's
find out by doing our insert statement
first insert into DB ODOT tournaments
and our values are let's expand out the
tournaments and the columns so we need a
tournament name an entry fee and we can
leave the active out actually leave it
we'll have it added but we won't
actually create a parameter for it
instead what we'll do is just assume
that every time you create a tournament
it's immediately active so say at
tournament name and that's a n bar char
200
and at entry fee and that's of type
money notice I knew those two by looking
at the columns that's n bar chart 200
that's money now we can say values at
tournament name asked entry fee and
active is one want to be true so there's
our procedure for inserting tournaments
I copy that and here I will actually
paste it in and I have my at tournament
name and entry fee
so at tournament name and I will copy
this and paste it and say entry fee the
last thing I know is B then follow the
same pattern is that I have that at ID
which is an output but if you look over
here at my procedure I don't have that
so you to add at ID int equals zero
output now I can't run create procedure
again because I've already created
procedure so I have to change it to
alter and I run this and that works now
right now it's yelling at me because it
says I don't know what that that name is
but that's because my editor window is
not caught up to the latest values intel
attempts has not been refreshed since I
ran that creates event so if I hit
control shift our valve refresh after a
minute and now it says oh yeah I know
that is and now if I were to try and
change this to create it would say you
can't do that there's already one in a
system called that so that allows us to
know
if we're on the right track or not but
you have to refresh that intellisense
otherwise it has stale information so
now we have our D passing out and that's
good so now I can uncomment this and if
you mostly could except for this whole
model thing all the information is wrong
here instead we have to get the correct
value so I'll ctrl J on each one of
these and pass in the correct values and
now I'm going to do the SP tournaments
on a score insert that's right grab back
the ID perfect but then this for each
here we want to change so instead of
model dot team members we want model dot
prizes will be prizes first and we'll
say for each prize model PZ and that
will change how we do is insert here
before we do let's actually create that
insert so we're going to minimize that
we will create a new procedure wipe out
all this
so again font conventions DB OSP prizes
it's actually termit prizes SP
tournament prizes underscore insert
again we can get rid of some of the
stuff we'll housekeeping and then we'll
also expand out the tournament prizes
column so we know which what we're deal
with and we will say we have the ad
tournament ID int at prize ID int
and at id int equals zero output and now
we can say inserts in 2d do dot
tournament prizes and the values are
tournament ID and prize ID values at
tournament ID at prize ID and then we
need to do to select at id equals scope
identity and if you remember we didn't
do that over here again patterns I
really should have pulled up a store
procedures identity for but again
another alter I'll run this and that's
good to go
this one I'll make sure I'm not
highlighting this otherwise would run
just that and I'll execute that and
that's now created so turn on ID and
prize ID two things are passing in so
paste that here we have tournaments ID
and we have prize ID and we'll actually
copy and paste the ID now we already
have the ID captured here for the
tournament
so therefore model dot ID does work for
tournament but then we need the PV dots
ID that's the prize ID so each prize in
the list will have its ID we marry that
with the tournament ID now we know this
prize goes to this tournament we have
the output of ID but we're not actually
going to capture that or keep that
against a so we'll leave that low and
we'll just not use it
and then we'll do the same pattern for
the entry of our teams
so for each team model TM in model dots
enter teams and again follow the same
pattern copy the whole thing and paste
it Li very careful to change all these
parameters so now let's go over to our
sequel and create that insert so a new
store procedure and we will say the name
is DB OSP tournament entries on a score
insert and we're going to insert at
tournament ID South later and at team ID
int and at ID int equals zero output and
now we'll say insert into DB ODOT
tournament entries tournament ID team ID
values oops
at turn ID at team ID and then we'll
capture that select at ID equals scope
identity okay again we're going to
insert into our table
or term entries each team linked with
the tournament so that's pretty much the
same thing as the prizes
so we'll change this to be tournament
entries we're going to say is tournament
and team ID and that TM de ID is the
team ID so that's good so now we loop
through each entered team and insert a
record for them now while at this point
we are done as far as saving what we
have right now in this model we're not
really done and here's why a couple of
dilaudid dress first first one is the
idea of how complicated a method gets
before you break it out now remember I
said that a method does one thing but
how you define that one thing can be a
little bit vague for example this method
does one thing it creates a tournament
meaning it stores all the information
about tournament into the database but
really that's broken up into multiple
subtasks so for example we create a
method that replaces all of this and
call it save prizes and we could call
this one save entered teams so there's
ways to get break this up into smaller
methods and that would actually make
this method a little more readable which
I kind of like so there is something to
be said for making this actually a
quarterback method where all it does it
calls private methods to do one task say
the tournament save the turnip prizes
say the entered teams so that kind of
makes sense and I'm kind of leaning that
direction
especially since really this create
tournament isn't done yet and why isn't
it done well let's look at this model we
have the ID got it the name and a GP yep
and two teams yep save those prizes yep
save those rounds
haven't touched them in fact we're not
going to touch them in this video so the
question is does the save happen now or
once we have this round's list of lists
of matchup model once that's populated
well it would seem like it'd make more
sense to wait until that's populated for
colonists meaning we're going to have
yet more to add this model down here so
I do think that that would make sense
and so let's actually break this up into
smaller private methods so I call a
first private method let's call it save
term it and take this code right here
and replace it with save tournament
passing in the model I should create
that right here so I can see it private
void save tournament I'll pass in a
tournament model called model and I'll
paste that code in there now the other
pass in notice it says I don't know what
connection you're using so we can pass
that in as well we just actually grabbed
this definition and pass it in and then
we can pass it in here and now the save
tournament does just the actual
tournament safe now passing this
connection in is safe because we're
still inside this using statement that's
okay
and we don't have a return type here
even though we are updating the model
with the new ID and that's okay
because that new ID get saved in this
model which again is just an address to
a location and so therefore since this
object also knows about that same
instance that same location on the
street then we don't have to pass that
back because we know what that value is
now you may say yourself wait a minute
we do pass back that same model type in
other methods so why don't we do it here
well I told you I don't do it here so
why are we doing over there well because
I forget that instances passed don't
have you pass back and forth once they
have been to different locations you can
modify either location and they both are
updated I forget that once in a while
and so yeah we have code in here that
really isn't necessary now it's not
hurting anything but it could be better
and I've got a whole video in this
series on refactoring that refactoring
does not happen during the process
mostly now we are refactoring here right
now because we're doing this method and
said you know what there's a better way
let's do it right the first time that's
a good thing but sometimes you you look
at sections and say you know that could
be better but now's not the time
refactoring is best done when the
application is mostly complete and the
reason for that is because sometimes
you'll refactor something too early and
then refactor again and before you know
you had this complex application that
doesn't need to be I've had people try
and debate with me whether to use a
string builder versus you know string
concatenation and that's one of those
things where yeah there's times in
places where that's valuable and there's
times in places where it's not I don't
worry about it at this face I worry
about it once my application is running
and I see how it's actually used because
sometimes you can over optimize
something too early and actually make a
slower application so we're not going to
over optimize or not going to refactor
continually we'll do a lot of that stuff
at the end in order make our application
a little better
right now we're concentrate on getting
it done and getting it working okay so
we have this save tournament method
I should have copy the signature here
now to paste it and create a new one and
this one is going to be save tournament
prizes instead of tournament model we're
going to pass in actually we'll pass in
the terminal again because we need both
the ID of the tournament as well as each
prize ID so let's grab this for each
section and paste it into its method and
again grab a signature of one of these
paste it and now it says save tournament
it's going to save tournament entries
and we will cut this and paste it in
down below now notice that in each of
these except the first one we have this
P is not existing the current context
that's because the first time we do we
said VAR RP and since we now have
separate contexts for each of these we
have two VAR p for each of them so now
we have three methods we can say say
tournament save tournament prizes and
save tournament entries and now our
create turnit method is a lot simpler to
read through we can see that does it say
the tournament that saves the prizes
that saves the entries and then each
method just does one thing this one just
save the tournament whereas the next one
just save the prizes and the next one
the entries so now it kind of refactor
this a little bit as we're doing it to
make this a little more readable and a
little more streamlined and how it works
so we're going to save all of that and
now come back to our code behind and see
that really we are done we've created a
term entry we created all the prize
entries and create all of our teen
entries and that was all done by calling
just
this one method goal config dot
connection dot create tournament cm done
now we do have a bit of a ordering issue
in the fact that we do need to do our
matchups before we actually save this
tournament since it doesn't really make
sense to call to create tournament twice
so we're going to have to actually move
this up in the process and work on doing
this somewhere up here and that's where
we'll actually wire up our matchups
where layout who plays who win so we'll
do that first and then actually save
this tournament entry now I click done
in the opposite order and first create
our matchups and then we're going to
save but I kind of want to go over a
save first
since we're confident and how that works
and we know how to wire that up because
this wire up matchups are actually sub
how the matchups work is going to get
into some kind of new territory and so I
want to a separate video to kind of walk
through that and make sure we're
comfortable with how it's going to work
so that's all we're going to do for the
sequel side of things today we're not
actually even going to test it which
makes me twitch a little bit but I think
it's important that we have our matchups
in there before we test something so you
can test the entire process start to
finish now we're not quite done yet we
can't forget with a txt connector and
type of connector has the create
tournament when you actually create our
tournament but this is a bit interesting
because with every other create like the
create team
we actually saved to the team file so
every model has its own file so
therefore we come up here we should say
private Const
I still private right private Const
string tournament file equals tournament
tournament model model CSV treasure I
get all of my singular and plural is
correct
so term models dot CSV so that's our
file a tournament file but if we follow
a pattern the first thing we do is load
the file and convert to our model so I'd
say list of tournament model tournaments
equals and it's a tournament file that
full file path that still works we have
that blowed file that works as well as
that looks to a list of string and this
is when we need to create convert to
tournament models so when you convert
this list to our tournament models so
let's create this we'll copy this to our
text connector processor
and under converted P models right
create same thing public static list of
tournament model this time convert the
turret models this list of string lines
now this one passes in a string people
file name because it has to load the
people in order to process the teams
well we'll need to do that to at some
point but first we need to figure out
what our layout is going to look like
now this is going to be a bit more
complicated so here's what I do I'm
actually going to open up the tournament
model by hitting s12 I'm going to say
that I want that to be a new horizontal
tab group so now I have down here my
tournament model now I actually collapse
down to definition so outlining collapse
the definition that gets rid of the
multi-line comments because you know
crunch them down a bit so I want to see
as much as possible down here up here in
my my converted turnip models method I'm
going to do the same thing I did up here
where I can't map out how the file looks
so let's start off with the ID comma
tournament name comma entry fee comma
now here's our first snag we have a list
of team model so we're going to do with
this
well let's make this it's going to look
like a series of IDs going to put us
inside upper end just so it's makes a
little simpler the prints are action or
file but ID pipe ID pipe ID
and this would be our entered teams so
we have our ID our term ID our entry fee
and we have a series of piped IDs ID
separated pipes that represents our
entered teams we have a comma they'll do
the same thing for prize model so ID
pipe ID pipe ID which is prize prizes
and then the really fun one what does
rounds look like well I actually start
and reverses and say rounds - so we see
it first and then kind of take in how
it's going to work
rounds is a list of a list of matchup
model that means that for every entry in
this list the entry is a list of matchup
model so to be one it can be five to ten
matchups as one entry in this list the
next entry is another list of matchup
model and so on and so forth so we have
a two-layer deep array or set of data so
we can't just do this because that's
only one layer deep we need to go deeper
therefore we're going to say that we're
going to have ID instead of pipe will
have a different character or separate
which character it really doesn't matter
too much as long as you know that
character is and it won't be used in
some way I'm going to use the carrot so
IB carrot ID carrot ID that is one
list of matchup model tell me how pipe
and then going to have another set and
then a pipe and then another set
that's the day's gonna look like this
represents one list of matchup model
this represents one list of matchup
model and this represents one list of
matchup model and then combine with with
pipe separated these represent the list
of list of matchup model hopefully lose
you there it's a little bit deeper than
normal
we're doing a list of the list remember
the each round we're going to have
matchups and then the next round is all
the winners in the previous round get
matched up again and this time they are
they are battle you get together and
then the next round is the winners in
the previous round so I have you know
say eight in here in this first set and
then we'll have for the next set and
then we'll have to the next set and so
on so that being said we need to create
this and actually break it apart from
our text file so the text box is going
to look like and now we need to break
that apart and rehydrate a tournament
model for every line so we're going to
follow up we can close out this now so
you have back our full screen so you
follow the same pattern where we create
first of all our list of tournament
model called output equals new list
tournament model and that's what we're
going to return and now it do is do our
for each
so say for each string lining lines
again as a just follow the same pattern
will first split by comma because comma
is the main separator for our file we'll
call that calls for columns then we're
going to say when you create a new model
new turret model so turn it Model T
equals new tournament model let's call
it t and we consistent what we don't
need for TM let me say T MDOT ID equals
into dot parse calls zero and then T
MDOT tournament name equals calls one
this is the simple stuff
we'll get this other way first next is
the entry fee TM entry fee equals and
this is a type decimal mouse over it so
decimal that parse calls to so those are
easy ones now when you get into the
entered teams how you do that well we're
going to split this line apart by the
pipe just we get here I should I copy
this and paste it down below but instead
of person IDs is team IDs and I in copy
the essence string so now you split
column three on the team IDs and if you
get confused which column is which I
recommend it created cheat sheet
ID equals zero tournament name equals
one entry fee equals two entered teams
equals three prizes equals four and
rounds equals five that we know a glance
ok ID comes from zero entry fee comes
from two and entered teams comes from
three just two we're short of what's
going on now just like above we're going
to do the for each on this team ID for
each string ID in in team IDs so for
each string in team IDs we're going to
do what well this is where we do look up
based upon up here we had on people so
let's do the same thing only with teams
we have to load our list of teams and
then find the team based upon the ID so
we're going to pass in the team file and
we'll have to capture that here just
like up here
so we will say right below output we're
going to say a list of team model teams
equals team file name dot full file path
dot let's just make sure you copy a
pattern up here dot load file dot
convert to team models and that takes in
the people file name which we don't have
and sits right here we don't have that
yet so you pass in the people file name
let's get a little bit long it's going
to do is actually this before every dot
I'll hit enter so we know what each step
the process is so pass in the people
file and over here we will actually grab
this entire portion and paste it at the
end of our signature to say we want that
people file name as well and we'll pass
that into our team converts a team
models and now we've got a list of our
team models so now we can do the same
thing we did here with our people all
you will do with teams so this is a
little bit get a little of space problem
so I'll do a copy this now put in
comments down here just so I see it so
you can say TM dot this is going through
the right now the team's okay so
enter teams so therefore we can say TM
entered teams dot ad and here we say
teams dot where x equals x dots ID
double equals into dot parse this is the
ID and outside here when you say first
and so what that does is it looks
through our list of teams says find me
the team with the ID that matches this
ID if you find it giving the first one
let's put that into our entered teams
just like a pattern up here the really
convenient thing here is since we did
this load teams right here the work is
already done for all the parsing of not
only a team but then every person on the
team being add to that model all that
works very done because we did up here
we're just taking that to the next level
by using this list to hydrate our
tournament model so really this line of
IDs doesn't just represent one object
each they represent an object that also
has a list of objects inside them you
would think we have to do some kind you
know multi-level to get to all those but
we don't we just need a call actually
this line right here to convert team
model that does do multi-level this is
where code reuse is so helpful
because we're not reinventing the wheel
of converting stuff over to models we do
it at the base level the simple level
and just keep adding on to it until are
this more complex level
so now I look and see I have to have
prizes well I'm going to pass in prizes
information let's start the file name
prizes file so it's passing the prizes
file and over here in our declaration
which is getting wrong which we can do
on multiple lines we want to makes more
sense now that's kind of huge we're
going to say string prize file name and
we'll take this so the same thing will
say list of prize model prizes equals
the file name dot full file path dot
load file dot convert to prize model
that takes nothing in there for that's
all set now you can come down here our
next for each we're going to say string
array prize IDs equals calls for now for
afters for dot splits on again the pipe
char the char not a string because it's
surrounded by single quotes not double
quotes and again just double checking
yes prizes in the is in the fourth as a
call for which that's the fifth one
now I do our for each I'll scroll down a
bit for each string ID in prizes or
prize IDs notice that is the same
variable name is up here and that's okay
because this string ID the scope of it
is one loop through the for each and
then it gets overwritten by the next
item once the last loop is done we get
down to here all of these IDs are no
longer in scope the scoping this right
here these curly braces therefore there
is no available ID but it's going to get
to here there forking is the same ID
name over and over again and keep
consistent with how I do things and not
mess things up by stepping on toes so I
can say TM dots
prizes dot add prize prizes dot where x
equals x dot ID equals in dot parse ID
dot first semicolon how I know to do
that I just follow the same pattern as
up here which is the same pattern as up
here we're not duplicating code because
this pattern right here is the same
pattern but with different items prizes
versus teams and we're adding them
different locations so it's not really
duplicating code you could probably
create some sort of help method that
might get you a little closer but this
right now is as close as we need to get
so now I've done all the columns except
for the big one rounds and
going to save this one for our next
video so I should come down here and say
to do capture rounds information and the
reason why I'm going to not do that now
is for the same exact reason why these
up here are so easy to do
I am reusing code from a previous call I
already needed teens before
therefore I've created this method well
down here we haven't created any of the
methods I'm going to need because we
have Lakota database here 'but we can
see kind of example we have the matchups
and we have matchup entries match up
entries if you notice have matchups and
they have parent matchups so all of this
is going to get pulled in and linked and
all the rest we haven't created the
matchups yet we haven't written that
table we haven't written to this table
so we also then created the methods to
read from each of these tables and to
rehydrate this information therefore if
we're going to do this now
capture the round information we're
going to create all those methods and
that could get kind of confusing so
instead I'm going to wait to do this
until after our next video when we
actually create the matchups in the
matchup entries I say this as is right
now and pretend like this actually
worked where you pull this in populated
Ternes model because it did to extent it
did the same level as sequel did and
that's really only need because now we
need to add a new entry so do the same
thing here as up above to frac copy us
and paste the pattern
so we're going to say if the
tournament's list of current model if
that count is greater than zero then
order by descending by the ID take the
first get the ID add one that's the new
current ID just like up here now we can
say the past in model model dot ID
equals current ID and then we can say
tournaments dot add model so I took the
past in model I get a valid ID I add it
to my list of tournaments just like up
here and now we're going to save to team
file or down here teams dot save to
tournament file only to pass in a bunch
of information we're going to pass in
red team file name and we're a pass in
the person file the people file name and
a whole bunch of other stuff annual call
it teams dot we'll call it
tournaments dot tournaments dot say you
to turn it file and this is an extension
method that we're going to put into our
text connector oops into our text
connector processor
and before you go on
note that this has to return a list we
haven't done that yet so it turn not
here we're going to say output dot add
down here output add TM and then down
below that we're going to say return
output so I kind of end up to our flow
from it but I saw that arrow I wanted to
fix it right away we have a list to turn
it getting returned and we weren't
returning anything so we have to return
output which is our list of current
model but you also have to add to output
each time we create that tournament
model entry so I took care of that so
now we have this sada team file well
we're going to create this saved a
turnit file public static void say
determent file this list of tournament
model and we'll call this models and
we'll pass in nothing for now until we
need it so again follow the pattern
we're going to say list of string lines
equals new list of string for each
current model TM in models lines dot add
I'll do our dollar sign double quotes
press on the end and come back we'll
start off easy
TM dot ID comma
no space TM dot term it name comma no
space TM dots
entry fee comma no space and then here's
where it gets interesting now let's put
empty string for now we'll come back to
that but we have let's grab this right
here so you have is list you know paces
right here so zero is ID one is turn aim
to is entry fee three is entered team's
well we don't have the entered team's
converter yet we create as people
converter and it just converts
everything based upon in this case pipe
which is perfect so we're going to
create the same kind of thing where
we'll say private static string convert
and this is not going to be a people
list it's going to be a enter team so
team list to string a list of team model
called teams again follow the same
pattern in fact a copy and paste this
entire thing and you can do that or get
close doing that you know that you have
a refactor opportunity and we do but
we're not going to do it now we'll do it
our refactoring video leaves right now
we're going to follow same pattern and
it's going to work and so I'd rather
follow the same pattern have it working
then try and figure out some kind of
complex thing to make it do things a
little better so now say if teams dot
count equal zero returned empty string
why's for every team model I'm going to
call us t just make it a little more
understandable we're going to take the
ID and add the pipe at the end and now
we just do our substring to remove the
last pipe return that output so again
this and this are practically the same
thing they're different in they use
different models they pass in different
list of models so they're really close
using the same property so in that case
we're going to do is we're going to wait
until the end and refactor that later
because it is a little more complicated
we'll get into doing generics and that's
always a little bit fun and we'll work
on how we're going to do that well game
is ID that's can be a little more
complicated but look around do it does
it make sense but for now if if you're
too complicated for you or if you're
unsure how to do it just do this I mean
this works so why knock it sure you can
make your code a little tighter a little
neater and may a little more robust by
creating one generic method but to do
that at the expense of not getting your
application done is foolish so get this
working get right and then come back and
make it better
all right so follow the pattern convert
people list a string pass in the correct
list I do the same thing here and say
pass in TM dodge entered teams and now
we can continue on with our string now
it's
this point that you realize that this
string right here is going to keep going
I think a little bit too big for our
screen and so I want to make sure that I
put some line returns in here just to
make things a little more readable the
problem is if I do that things turn red
and so the way to fix that is to
actually add our string literal
character which is the @ symbol after
the dollar sign so dollar sign then the
@ symbol and now when I do this it's
fine so I can line all these up and
arbitrary point or a point that I feel
comfortable with in this case I'm
actually not back them off to be one
line indented from lines so now we have
our ID comma the next value comma the
next value comma the next value which is
actually a set of values pipe delimited
so put a comma here and then tab over
and the next value which again I will
put an empty string for now but this
should be prizes well seems like we have
a same kind of thing here so I copy this
entire thing I'll paste it up here I'll
say convert prize list string and pass
in a prize model list call that P call
that P and instead of commas teams I'm
going to call this prizes and I'll
rename teams to prizes by hitting ctrl
dot and then hitting Enter
so now if prizes dot count equal zero
return nothing and loop through each
prize in
grab the ID substring out the last pipe
and return prizes so again you take this
and I can say convert prize list of
string and say t m dot prizes and now we
have our fifth entry our entry number
four which is prizes and the last one is
rounds comma next line tab over go to my
empty string just for now for a
placeholder and what do I put here well
I could say wait until we have our
rounds figured out and that is true but
really all this is is our IDs have to
come back up here to what's going to
look like rounds looks like this so come
back down here and put this at the
bottom so rounds looks like that we
don't have to wait to create these in
order to know how to grab their IDs out
that's not the part that's the hard part
the hard part is hydrating those models
and we're not doing that we're
dehydrating these models we're taking
the the era the tires we're just
grabbing IDs so therefore we can do this
so let's create again a copy of this now
I call this convert rounds round list
- string nut deviates a bit from our
naming convention down here it's prize
list which we have a prize model we
don't have a round model but it's easier
than saying convert list of a list of
match up entry to string so convert
round list which we call it rounds up
here so round list of string so in here
we to pass the same things we have in
our model which if we hit f12 here it's
a list of a list of match up model so
you can copy that come back over here
and say pass in that and call it rounds
so now we have the value of as last
entry and we're going to say convert to
round list T m dot rounds and this up
here is complete as far as agna lines as
long as we complete this down here and
actually create that that series of
entries which looks like this i just
going to cut that from up here and paste
it down here and that's our goal our
goal is to have as pipe delimited list
which inside of it is a caret delimited
list so therefore we write tree it just
v4 so we're going to say for each list
of match up in rounds so what this is
going to do is for each round which is a
list of match up it's going to put that
in here
now I don't have an r dot ID because
that R is actually a list of match up so
I can't really do this but never fear we
have a solution to this for each one of
these I'm going to call a new method
private static string convert match up
list to string let's see a list of match
up model called match ups look familiar
what should is the same functionality as
all the others so this list this loop
right here is actually going to call
convert match up list a string or and
that's going to create a pipe delimited
list which is a problem we're actually I
create a Tildy I'm sorry carrot
delimited list instead so get a little
confusing but hang with me from it in
our rounds for each list of matchup okay
that's right here for each list of match
up in the rounds we're going to take
that list convert it to a string that's
going to come down here and call this
which it's going to say if match up to
zero return empty string and we're going
to say match up model and we'll call
this a massive tea
MDOT this is not having ID but never
fear it will so let's pretend like it
does for now we'll come back to actually
fixing that so it does but for each list
of matchup model we're going to care it
delimit it remove the last one out put
that value that's we come back up here
and put that right here then it's going
to put a pipe then it's going to go to
the next list a matchup model and do it
again until you have no more that gets
us for each time we call this we get
this for each time is loops through we
get this plus the pipe at the very end
we have this when extra pipe at the end
which we then trim off down here and now
we have this perfect corally if it's a
theory so rent the try us out make sure
it works but that's going to take care
of all that we've already called up here
so it should be the up here in this
entry we have something it looks like
this now this ID in match up model what
our models let's actually open up person
model first copy the ID and go our match
up model remember that we first create
our models we didn't take into account
adding the ID the beginning we need to
do that therefore we have to add one
anytime that one is missing so now it
should be that this has an ID it does
and so now so far in our save termit
file which we can get rid of comments
now we have grab a or create a list of
string called lines for each model add a
line and that's all complete
and so now following a pattern from
before and let's grab let's look at
another save here's I convert our lines
now we just need to call this right here
I should copy and paste that file dot
write lines file name which we don't
have a file name so let's pass one in
like we did up here file name that full
path and the lines perfect let's go back
over text connector actually pass in
that file name what is the file name
well it is our tournament's file so
doing that we've gone through the entire
process
now one bin notes is that it's yelling
at us saying oh you need to actually
pass back a tournament model we don't
we're going to refactor this so we have
one or two options either we continue
right grading code we've been doing it
and it's not wrong it's just not
necessary or we change it now and
refactor the rest later
I like the idea of changing it now but
if I do I'm sure going to make a note to
fix this later
they can't have half one way and half
the other so actually guys change this
to be a void so now the create
tournament for the text connector is
implemented we haven't tested it yet
because we still need to fix that to do
we have it to do over here where is that
let go tasks we can find all different
to do is we have and this right here
capture rounds information we need to
actually capture the information about
the rounds before we rely on our convert
to turret models so that needs to be
done but that's not really done until
after we deal with the matchup entries
in the matchups
so we can be pretty much done here we
want to check out why we have this error
here so let's find out where our error
is in our text connector file notice a
little red dot up here we can go up to
where that is I did a connection that
says you did not implement the interface
let's say control dot to find out why
create tournament I thought we did that
so let's come down here and find that
create tournament and just see if we've
done it already and we do have a public
void create tournament we call it void
that's a problem because that's not
always said over our I to the connector
we say return a tournament model so if
we change this now we're going to have
another error in a sequel connector
because we have the create tournament
but it returns this model which we don't
need to return so you can say void now
the one thing notes and now it's done
yummy but the one thing I know is if I
had just blind the cup here and said
well implement the interface it will
create a new method for the create
tournament that had that return type and
inside the code it would say throw new
not implement exception and especially
if you don't test your code out soon
what will happen is you get down the
road thinking you've implied the create
tournament method and then you go to run
your application that says not employed
you go oh I must have forgot to do that
and implement that methods all over
again and so you don't want to do that
so make sure that you know why your
contract is yelling at you whenever I
change the contract it should yell at me
everywhere
and I do to the control diet implement
that interface but when I don't change
the contract and it yells at me I have
to figure out why is doing that and not
just blindly implement the contract
again okay so this point we've wired up
this button to do everything except for
our matchup it's going to add that to do
their Y upper matchups once that's done
then we can come over to our text
connector and complete that one to do we
have which is in here somewhere we'll
look at our our list but then we'll be
done with this button and then be great
once this form is done then our
application is most the way done and I
can't wait to complete it so let's move
right onto the next video where we
actually get the match of a match of
entries set in our system before you go
you'll see a link in the left of BIOS
course check out the intro video on this
playlist for more information all you
get if you pay also if you are ever
wondering what you could do to help this
channel out without paying money I've
listed six things that really help I'd
appreciate if you consider doing one or
more of these thanks again and don't
forget to keep practicing what you
learned</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>