<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>C# App Start To Finish Lesson 09 - Prize Form Wire Up | Coder Coacher - Coaching Coders</title><meta content="C# App Start To Finish Lesson 09 - Prize Form Wire Up - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/IAmTimCorey/">IAmTimCorey</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>C# App Start To Finish Lesson 09 - Prize Form Wire Up</b></h2><h5 class="post__date">2017-06-05</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/5oHfcyrlHeE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">welcome to lesson nine in a c-sharp from
start to finish course my name is Tim
quarry and today we're going to wire up
our prize form now that's the simple
form to start with and it doesn't have
many dependencies basically it just
takes data that you give it it makes
sure it's correct and that saves it to
the database or text file and that is
where the first tricky part will come in
how we know where to save it quite
frankly this is where you'll probably
get stuck when you're trying to build an
application this is a spot that
tutorials try to avoid or try to make
sound easy it isn't easy but there is
hope we're going to tackle this problem
head-on because I want to make sure that
you can know that you can do the hard
things and that they can be made easier
if you don't panic and if you break them
down into very small pieces so let's get
started before you get started in the
lesson I want to remind you that if
you'd like to get all of these lessons
right away plus all these other bonuses
click the link below in the description
to purchase this course for just sixty
seven dollars and when you're
considering that don't forget to hit the
thumbs up in this video I'd really
appreciate it
okay so let's get back to the lesson
here we have our prize form now before
we do anything we need to plan out what
needs to be done you should always know
what to do before you do it and this is
a great example of why you see initially
this form seems simple when the create
prize button is clicked this one right
here we take the data from these four
fields right here create the model and
save it but where do we save it to the
database a text file both how we know
where's the information gets set up how
can the code save to both types of
storage without being well ugly so let's
start off with the ugly way that it
might work and let's just sketch us out
in notepad and just listen me pseudocode
just to kind of illustrate the the first
this the first try at building this form
so pretend we've already done on our
validation because the validation is
just simple it says is this a number is
there text in here is this a number is
this number and it's one of these zero
okay that's pretty simple stuff and it's
a it create its model number you have
the prize model here so we have that
model and let's just call that model you
know the model okay so we have that
model it's populated now what do we do
with it well we could say you know if
and somehow know if we are doing a
database using sequel equals true you
have our curly braces here we have this
is just pseudo Co is not real syntax
don't get bully hung up on making sure
everything's right but if we're using
sequel then you know open database
connection saves the data and may also
get back the updated model because you
want to have when you create an entry
and data basically get an ID for it into
what I have the ID back so you can say
okay this particular prize is prize
number five or whatever so we do those
two apps and say okay but then down here
if using text file which again we don't
know we're using text file or you can
see what comes from yet we have to
figure that out too if we're doing that
if that's true then you know we do
something like this where we'd say open
text file we need to know the name of it
and the path to it and all the rest say
the data
the first you generate an ID you know
just text files don't create IDs so we
need if somebody that's saying okay
there's you know five records in the
text file the last ID is number eight
therefore this is number nine you know
whatever it is save a data you know and
so now we've got the if we're using
sequel it saves if you're the text file
it saves and then we're done with
creating this this price but this code
right here will work okay now of course
you can filled out real code with this
ID of a code is a pseudo code this would
work but think about all the places
where we talk to our database in every
one of those places we have to have code
like this where you say if using sequel
EF using text file actually connect the
database this form has to know what the
database is and how to connect to it and
all that kind of stuff and the same
thing a text file has an over the text
files where they are and all the rest
but so does the create team form so does
it create tournament form so there's a
tournament dashboard form possibly and
also the tournament viewer form we all
have to know about stuff like this and
do this kind of stuff that's an awful
lot duplicated code and quite frankly
pretty ugly
I imagine if we've said okay we want to
change where we're connecting to the
database now you got change this code
right here everywhere maybe we say yeah
we're going to add my sequel as a
database option oh boy every form we
have to now add a third if using my
sequel equals true and so on and so
forth for every form multiple places for
some form because some forms have more
than one button they do more than one
thing so this code isn't really scalable
it's definitely not draw
Adam don't repeat yourself so there's
gotta be a better way and we're going to
investigate that better way okay because
we don't want to write hard to maintain
code that's quite frankly ugly and
overused all right so let's start over
so the method that I use is to keep
pulling the thread okay with that what I
mean by that is I take the issue and
start asking questions and sometimes
Edgware those questions down and
sometimes I get an idea or a thought and
I'll write that thing down too as well
and then I start just keep keep working
at it until I drill all the way down to
the bottom of the issue or to a place
where I can say okay I can do this step
and then come back and pull a thread
again all right so this isn't going to
be easy because it's not something small
we're not doing just for this form we're
building a system that can be used by
every form what we do here determines
what every other form database does
so therefore writing things down and
mapping out means we're less likely to
forgive step and we're very very clear
in what happens so the first thing you
need to do is connect to our data source
so the question I have where I write it
down
is this how do we get that connection
information remember in our previous
pseudocode example we weren't even sure
that came from
we just knew we I have to have it okay
so that's the first question that is
generated but then that question leaves
the next question is how do we connect
to two different data sources
do the same task okay so part of the
system part of this application is we
wanted to have the ability to save to
either text files or a database or both
okay and so we want to be able to
accommodate that and really the actual
act of saving is the only thing that's
different how we actually put it into
the text file or into a database but
from the from this forints perspective
all thing to do is say I have a model
save this and then possibly get a model
back that says okay we've saved it and
here is the ID along with the rest of
the day that you saved okay
so this form is need to care if we're
saving a sequel or if we're saving to a
text file or if down Rover saved on my
sequel it just needs to care I'm saving
it so the first question here though how
we get that connection information it
sounds like we need some type of data
that's accessible from everywhere in the
application and it tells us which data
source to use that sounds like a global
variable of some type to me normally we
try very hard to avoid global variables
because they take up memory
unnecessarily but in this case we need
something globally accessible for the
lifetime of our application and that's
the exact definition of a global
variable so in this case I'm thinking
about using a static class to hold our
data normally again you wouldn't store
data and static class because its global
information and anyone can change it but
since we want global information I'm
going to need to work on the safety part
of data but I want to take advantage of
the global use and by making a static
class I can keep all the global data in
one place so let's write that down come
down here these are my questions up here
down here I'll have just some notes so
I'm going to say that I
I have a static class for data source
info and this data class is going to
tell me which data sources are available
right now it's equal or and/or a text
file or text files that's going to mean
that and how to connect to those items
before you build our class though we
need to address our second question how
do we connected to different data
sources to do the same task the key here
is you want to do the same thing just
with different data source so if you
need to do the same task but behind the
scenes it we've done two different ways
you need an interface now an interface
is a contract what it does is make a
promise that any class that implements
the contract will have the following
items whatever is in the interface so
those I am just specified in that
contract now I've got a video all about
interfaces so to get a bit lost here or
you want to get some more information
before you continue go ahead and check
that video out and come back but the
best way that i have found to understand
interfaces is to create one and use it
or at least see one created and input in
use these that kind of clicks what
happens so now we have and let's write
this down one interface line interface
for our data sources so that's the
bare-bones little plan to get started
we're going to create global variables
to hold the data source information by
using a static class and we're going to
use an interface so we can call either
eater data source the same way let's
start the interface because we're going
to need to do that in order to build a
static class we're going to have that
interface so over here in my tracker
library you want to move all our code if
possible into this library
don't forget that one of our
requirements is that we might not always
use this WinForms application to track
tournaments we may use other systems
like a web-based system and so the more
logic we can put in this library the
easier it will be later to create a new
user interface to do the same thing so
in our tracker library and you could
create a folder for this what you want
I'm going to create right in the root
now right-click on my project and say
add new item interface now one of the
pre hard-and-fast conventions for
interfaces is they start with a capital
I and that tells you this is an
interface and that's really important
when you're actually using the interface
and I'll explain more in a bit but let's
start by just doing an i data connection
so anybody that implements this
interface is a data connection whether
it's a sequel connection a text file
connection or later on it down the road
medium my sequel connection and this is
an interface so the first thing I do is
make it public go ahead and change that
font to
there we go let's make this public so I
have public interface I did a connection
now remember this is a contract and so
in this contract I'm going to specify
what methods properties and items that
need to be in here so in this case I
want just one method NSA it's going to
return prize model and it's going to be
a create prize method going to take in a
prize model called model so this is a
contract for a method it looks pretty
similar to a method except the fact we
don't have the public in front of it and
we don't have curly braces afterwards we
have this semicolon and that's because
in a contract and interface you only
ever have public items it makes no sense
to have hidden contract terms we don't
allow that we're not sleazy everything
is upfront everything is visible and so
therefore we say since everything is
public
nothing is public nothing's marked is
public because it already is public so
it looks like a method otherwise except
the fact there's no curly braces just a
semicolon and that's because we can't
put code in here this isn't this isn't
code this is just saying that whoever
implements I did a connection will have
a method called create price the code
inside their method may be radically
different it doesn't matter all we care
about is that we call create prize and
pass in a prize model you get back a
prize model that's it so in this case in
the forum when we create this model and
in the create prize method or event we
say I want to save this we're
call something that implements I did a
connection say create price we're going
to pass in our model but it won't have
an ID populated when the processing is
done it will return that same data only
now it will have the ID populated
because it's been saved either in the
text file or in the database so that's
it
that's our interface that's our contract
right now it's pretty simple because it
is one thing
it saves prizes or it creates prizes but
down the road we're add to this contract
as we have to do more things but for
right now that's all we need to do so we
stop there now let's move on to our
static class so getting a right-click on
Tracker library and say add class and
that just selects the class up here a
static classes is like a regular class
when you create it so therefore let's
call this global config and now we're
going to make this a public static class
what that means is you can't instantiate
global config it's always visible for
everyone so if you think of instantiated
classes like a blueprint where you
create the house off the blueprint in
this case it's not a blueprint it's the
actual house and everybody uses the same
house which normally means you would
want to put data in there but in this
case we actually do because we actually
want global data so let's create a
property we'll create it as a list of I
data connection
we'll call it connections now two
modifications here first we make a
static so now it's a static property
next remember I said that anyone can
mess with it and can set it and change
it for the entire application I don't
really want that so I'm going to say
private set and what this does is says
only methods inside of this global
config class can change the value of
connections but everyone can read the
value of connections so how does it help
me well I create public static void
initialize connections I'll start off by
asking for bool database and bool text
files all right so here is where I'll
actually initialize the connections now
you may say wait wait Tim you created a
list of I data connection why is that
well one of the things that I said we're
going to do is we may we have the option
of saving we may save to both a text
file or text files and a database both
and so I created this list of I did a
connection because we could have one or
more data sources to save to and pull
from so that's what this is all about
this initialize connections method is
what we're going to call the very
beginning of our application to say
these are the connections I want you to
set up in this case I just had pass in
do you want a database and do you want
text files now right now this is not
scalable this method it does two things
a database some text files but in the
future if you want to scale us out be
very easy to change this method to do
something else
maybe having array of items or just add
one more bool my sequel database or
something like that but for now we're
it's going to have these two and it's
okay to develop a method to do just what
you need to do today it's just a good
idea to keep in mind what might come
down the road tomorrow and make sure
that you can still adjust if you need to
down the road you don't want to over
engineer your application to the point
where it's unwieldy and yet it does one
little thing okay but on the other end
of the scale you don't want to build
your application just for today with no
thought about tomorrow because tomorrow
the boss will probably come to you and
say I needed to do these extra things
and it makes your life miserable to try
and redo it so just think down the road
and make sure that you're at least
keeping in mind potential upgrades or
changes for the future so we have two
boolean passed in a database and text
files well it's going to allow us to do
is say if database now I could say if
database W equals true and that's more
explicit and if it if it helps you
understand how things work this is fine
this is definitely okay but whenever you
have a boolean value you don't have to
do a comparison because it already is a
boolean value whatever is inside these
parental
that's what we have the equals and not
equals and greater than less than
because if we say I is greater than zero
the result is either true or false but
in this case this variable is already
only true or false so this case if
database so if we're going to use a my
sequel database then
do something let's come down here and
say if text files do something so a
couple notes here first of all I didn't
really do anything
I left a comment that says do something
with us in fact what I would do is
actually because it's to do ok and it's
a do list will show up in your task list
get a task list down here if you don't
have that go to your view and the task
list is right here okay but a task list
now you have two to-do lists items
create the sequel connection create the
text connection so right now I don't
have anything we're going to come back
to this and put something simple but we
don't have actual classes to implement
yet we don't have anything that uses
this kind of contract so now we have to
think about creating it now I'll pause
here for a minute and say this don't
give up some of you may be a bit lost
and that's okay this isn't a simple
tutorial I'm not teaching you how to do
hello world I'm teaching you how to
build a real world application and of
course that may frighten you as well but
if you may say oh no if I can't do this
and I can never be a programmer not true
you can do this but here's what I
recommend if at this point you're lost
just watch the rest of this video to see
how it works don't stress out about just
watch it try and pay attention try and
follow along but then go back to the
beginning watch it again this time pause
this video every time I do something
and do it along with me knowing the end
result can help you understand what's
going on and repeatedly watching will
help reinforce what you're learning as
you create it alongside me now also
means the first time you watch this you
probably shouldn't be building it along
with me unless you're really tracking
and the reason why is because sometimes
typing will distract you from what I've
said and you kind of miss things so I
recommend if you're all unsure the first
time don't type anything just watch then
go back and type a second time all right
so that's just my side don't freak out I
done this for years I know I can get you
through this so now we have a static
class right right well here okay so now
we have a static class to hold our
connection interface and it has a method
that identifies which actual classes to
put in that list and that's this down
here now it's time to create those two
classes well sort of we're going to make
sure we're going to make those classes
we aren't going to create the full logic
yet instead we're going to create
placeholder code those can get back so
we can get back to finishing off our
form and as long as you put that code on
our to-do list as well it's fine to do
in fact it's really good because we've
been creating some code here we want to
make sure we can get to the point where
we can actually use it to make sure at
least the flow works and I can start
making it actual real code so let's
create our class that will connect to
our database right click on tracker
library say add class and this class
where I call sequel connector
make it public and here's the
interesting thing with this one we're
actually going to say : after the class
name and say I data connection now today
yell at me right away and the reason why
it yells at me is because we have not
followed the contract we say we're going
to use this contract ID to connection
but there is no method in here called
create price so what we do well if we
select this we can either use this drop
down here or hit control dot and there
is this implement interface so if we do
that I notice there is explicit
interface and implement interface do the
first one
implement interface and what this does
is it creates a new method called create
price it returns a prize model and takes
in a prize model called model sound
familiar
well this right here is this right here
so it said okay you've got contract here
here's the contract said you're going to
do therefore you can go ahead and create
this method to do exactly that
now you could hand code this if you want
but it's pretty easy you just just to
say implement the contract and the great
thing is as the contract changes let's
just pretend I add another contract
entry here let's just do that when I
copy this just to show you what happen
we'll create a create prize to the
horrible thing to do but we're going to
it we come back over here and I did a
contract connection it's going to yell
us again and it says you're not
following a contract you're partly
following a contract but not the whole
contract and the way contracts work is
you have to follow the whole contract
but if I do my control dot here and say
implement interface notice only adds the
extra method that I need it hasn't
touched the first method we've it
already has that mattered
it just says what are the differences
what parts of the contract haven't you
implemented now add those so that's
really nice let's take us back out I'll
save that now note it's not yummy now
because the contract is covered I still
have that create prize method I have
this extra method now called create
prize - which isn't in the contract but
yeah it's in this class and that's okay
you can have extra stuff in this class
yours have to make sure you at least
have the contract stuff so I don't
really need this when I delete this the
other thing I know is this throw new not
implement exception and this is
brilliant
Microsoft has said we create some code
for you but we don't want you to pretend
like this code really works by the same
time we don't want to give you red
squigglies so what they said is this
method returns a prize model they're not
going to scaffold out a prize model -
and pretend the return instead they
throw a new not implemented exception so
this code will compile there's no red
squigglies but if I were to call this
method the first line of hits is going
to throw an exception and that exception
is not implemented meaning I haven't
actually put code in here this is a
dummy method and that's a brilliant way
for the system to have this method and
yet at the same time not pretend like
it's real code but in our case we're
going to get modification to this we
have to return a prize model but we get
a prize model in
so let's start by saying model dot now
there's no idea we want that ID because
in the database must go there in a
database to go to a table for prizes we
see there's an ID you want to capture
that because that's what uniquely
identifies a price so therefore let's go
back to our model our prize model and up
here I'm going to say prop int ID all
right and that's the unique identifier
for the e price so now we have a new
property so I do control J here to bring
that list back up I see ID so ID equals
let's just say one for now that's our
sample number then gets returned model
so now this method actually does
something now does it go out to sequel
and save things
no it just pretends like it did in this
case what I would do is come here oops
yes I should put my code comments let's
just do that
all right there's my triple slash
comments and those are great to have
because it describes what your method
does that way later on you say create
prize what does that do well it saves a
new prize to the database but I'm also
going to add up here what to do make the
create prize method actually saves to
the database okay and now I have my task
list yet another to do now you could say
well but go ahead and actually do that
make it save the database I'm not going
to do that because I'm already down a
rabbit trail pretty far remember the
original intent for us for this lesson
was to wire up his form and we having
looked at code behind this form we've
talked about it we having started there
because first we created you know our
static class and then we created our
interface and now we're creating a class
we still have one more to create so
that's a lot of stuff to do when really
we're just trying to save our price so
I'm not going to implement a more code
than this
but now let's go and add the text file
connector all right so right click on
tracker library add class and we're
going to say text connector for the name
and that is a class we'll make this
public and we're going to implement
using a colon I data connection again
control dot implement interface which
looks eerily familiar to our sequel
connector now before you go on I also
want to mention the reason why we put I
in front of interfaces and this goes
back to object-oriented because right
now this is just a contract and you can
have tons of contracts on one class in
fact if we wanted to I could say I
disposable and then add that interface
and that just adds one more method so
now I have two contracts on this one
class this contract says you must have a
dispose method this contract said you
must have a create prize method so we
can have both of those if we want but if
we want to actually inherit from a class
which means we don't just bring a
contract we actually bring code with us
from a class we can only do that once we
can only inherit from one class and so
when you're inheriting the first item
here has to be what you're inheriting
from before any contracts but in this
case if I didn't call this I data
connection how would I know if this is
my clat inherited from or if it's a
contract
the only way I know is a mouse or is it
oh you have its interface which only
works if you're actually in this IDE
inside Visual Studio but if you're
looking at this in a text document that
doesn't work so it just makes it a lot
more clear if you have as I in front of
it every interface will have an I in
front of it that's very clear then to
know this is an interface now if you'da
class you're inheriting from starts with
I say the class name is Indiana may have
the best class name but at such an eye
the difference will be obvious and the
reason why let's type it out now I
actually have a class called Indiana but
notice my casing here the N is lowercase
this D is not you see a difference that
they can tell an interface from actual
class name even if they both start with
I and that's why casing is important all
right
that's way off the rabbit trail I'll
make sure that you really grasp that and
again I have a video on interfaces my
youtube channel but here we're going to
do kind of the same thing as we did in
sequel connector in fact we're going to
grab that code into the same thing copy
and paste now saving you to text file is
radically different than saving to a
sequel database but at this point we're
just doing sample we're just saying
pretend like we actually saved it so in
that case we don't need to worry about
you know differences
we're just saying pretend like it works
and now add might do here
so they actually have a reminder to come
back and actually do this since this is
sample code and not just that throw new
not implement exception and the reason
why I did that do I actually want to use
this code just to show that will work
okay so now we have both of our real
classes our our full classes created now
they're pretty simple basic stuff but we
can come back to our global config and
here we can actually wire up our classes
so if it's a database we're going to say
we want to create a a sequel connector
and let's call the sequel equals new
sequel connector and then we'll say
connections dot add sequel now this is
going to break and here's why
this list has not been initialized but
one of the perks of dot or a c-sharp 6.0
because I can say equals new list of
idea connection right in my property
list right here now if using a version
of c-sharp before the c-sharp 6.0 came
out which it's really vague how
microsoft does is it's very hard to find
out what a c-sharp version version is
part of the dotnet version is and where
they all fit but essentially if you're
not using dotnet 4.6 which I believe is
Visual Studio 2015 if you're not using
that you can't do this but never fear if
you can't do that in your initialize
connections before you do anything else
just say connections equals new
political action is the same thing okay
so you can do that if your code won't
accept this this is a new way of doing
things so now I have created a connector
and I've added it to my connections list
let's change my to do here to set of the
sequel connector properly because there
may be some initialization stuff I need
to do on that class that I can't do yet
don't have an initialization stuff yet
so let's just make sure that we check
that out at some point we come back to
that it will come back to that in
actually the next video but for now this
works now I took sequel connector that's
a class type I create an instance of
that and I added it to my connections
list my connections list isn't a list of
sequel connector it's a list of I data
connection that's the interface and so
what this list does is says I'll hold
anything that implements the I data
connection contract
which is amazing because then I don't
care if it's a sequel or if it's text
file in fact let's do that text
connection text equals new text
connection connections add text so now
I've added my text file connection to my
connections and again both leads a based
upon if you said yes to this bulan is it
true to database and true to text file
so both of these can live inside of this
connections list now the one laugh in
know before you move on from this class
is that I have two if statements
I didn't combine this into an if-elsif
and the reason why is because in
else--if situation if this was true if
Davis is true we'd never add text file
even if text files was true so you can't
do this else if that won't work because
you get unexpected results you'll only
add text file if you don't have a sequel
database which if you're saying well
don't you ever want to have one
connection then yeah that that's how you
do it that's one way of doing it but
that's not what you want you want to
have the option of having one the other
or both in this case it's two if
statements now the final piece to all of
this is determining when to call this
initialize connections remember this is
when we actually set up do we have
sequel do we have a text file so we
should do that when the application
starts now down the road we may say well
I want to change how it works but for
now we know where the application starts
down here in program CS this is where
our form application actually launches
from the static void main so we have
three lines of code Microsoft has
created applications that enable visual
styles application set compatible text
rendering default an application dot run
new tournament dashboard form this is
where we determine which form gets
launched as the startup form now this is
going to be a startup form that we use
for our application when it's finally
done this is the the real startup form
but I want to modify that form in us a
minute
to actually point to my create prize
form because I want to see
that inaction once he it working so
we're going to change this line a few
minutes but for now before this line I
want to add this code let's start by
putting a comment that says initialize
the database connections and I'm going
to say my class name tracker library I
don't think I have a reference to that
so let's right click on references add
reference good projects tracker library
notice it says library so you can feel
free to check this box that's my
convention but it's a way of making sure
that you don't add the reference the
wrong direction you don't want to add a
reference to your form in your tracker
library you want to add a reference to
your library while you're in your form
so hit OK tracker library dot Lobel
config dot initialize connections and
now we're going to say do you have a
database and do you have a text file I'm
going to say true true for now let's
initialize with everything now this is
initialized everybody can use that
global information because it's global
so in terment dashboard for more load it
would have access to the connection
information but I'm actually going to
change this to say the aisle on startup
my create prize form instead because I
want to see this working when it
actually wired the form in a copy this
line because this is the line that I
want eventually instead I'm going to add
my own line is create prize form
so now instead of the tournament
dashboard form launching when the
application runs it will launch to
create prize form all right in fact we
can start now and make sure that at
least it compiles and it runs and sure
enough the create prize form started so
now we can actually get back to our
create prize form actually wire it up
amazing I like there's like 50 minutes
to get here but that's how coding works
you really need to think things through
make your plans and then implement them
in that order in order to safely create
your code otherwise you create that that
weird junky code that I talked about the
very beginning that pseudo code that I
created it really doesn't work alright
does work for scale doesn't work for
maintaining it it just isn't great so
again let's come back now to our prize
form we're going to double click on this
create prize button to launch this event
alright so create as a vent called
create prize button underscore click so
whenever we click this button then this
code will run now what do we do here
well here the first thing you need to do
let's close these other items
yes I'll save this and actually open
that form back up alright so we're going
to validate these four fields first the
first thing we'll do I'm not going to
create a private method you don't have
to just but like to keep my my event
clean so private void let's do a private
bool
private bool validate form now this is
delegate form we can run from anywhere
doesn't have to be just when you click
this button so you could create validate
this form after this last field is
filled out you know and so this way it
just as on its own we can call it from
here and say oh you didn't you weren't
valid return false is you know it's not
valid therefore stop the process so we
return bool so I have to create a bool
output equals false return bool I'm
sorry output so what I do there well I
like to create this variable called
output and that output variable is well
I may return in my case I'm actually
going to set this to be true now I would
love to set to false and then whenever
returned it these the form would be by
default not valid but it's just so much
easier to say no something is not right
and so there's a false but it is to say
everything is right side the true and
also what I mean by that
so this first field right here is the
place number and this needs me int me a
whole number and it has to be 1 or
greater all right so we can say let's
start with with this if in stat tryparse
a string is our our placeholder our text
field right here so place number so
plays number value dot text remember
these are text boxes not number boxes
therefore this is a text value not a
number value go do a tryparse we need to
give an out into results okay so this
out into result will be what we change
the value in number so we have to print
in table here I'll call it int place
number equals zero and then we'll say
right here out place number now what
this does let's actually break it down a
to line just get a little clearer
control X and cut that bool place number
valid number equals our in tryparse so
int dot tryparse
what it does is it takes a string in
this case our place number value text
the value that this text box right here
it takes that string it tries to make it
into an int so say that value is you
know the number one then it will try to
convert that out so yep that converts it
we'll put that into the place number
variable now this is an out what that
means is we can only return one value
from our try parse method and so it says
I can return a boolean saying if it's
worked or not but I also I return the
value the actual number therefore I'll
do an out parameter an out parameter
goes the opposite direction instead
passing data into this method we're
passing information out so I have to say
it's an out parameter and I have to say
a name of a variable to store the
information if that's a little confusing
don't worry we don't use out parameters
anywhere else except for try parse in
fact in c-sharp 7 which is Visual Studio
2017 we actually can change this and not
use out parameters and Static terms call
it tuple which is two values of just the
1 return value but we're not getting
that today we're not going to we're not
covering that yet I want to cover what
works now and will work in 2017 as well
so in this case it we're going to return
back a number here which we really don't
care about we have care about whether or
not this tryparse works because you see
if this text would be the text o n e
which we all know that o any translates
you know into one and that would
represent a number but when it comes to
programs they don't know that and so
they're saying it's not the actual
number one it's a text
therefore this parse isn't going to work
but it's a tryparse until a tryparse
doesn't crash when you get bad
information instead it returns a 0 here
and it says the actual method returns a
false saying nope it didn't work so now
I can take this boolean value and put it
right in the if statement if place
number valid number so but I don't
really care about it being a valid
number I wanna know if it's invalid it
was an invalid number I change this to
be false now I could say bang place
number valid number and what that means
is if not placed on odd number meaning
if this is an invalid number
then do this but that can be a little
confusing especially for new users the
other way could do it would be sa double
equals false if the place number is not
a valid number then do this code and
what I think we'll do is we will say
output equals false now one trick here
is do not put an else statement here do
not say else output equals true because
this is only one of many checks if the
last check in line is valid it would set
the output to true and in the whole form
salad that's not only how it works
instead we only said to false if
something fails we don't ever set the
true but it's already true up here so
that's our first check checking to see
if it's a valid number if it's an
invalid number so the output is false
but the next check if place number
that's the actual number that came out
is less than one remember you can't have
a place of zero or negative one or so on
and so forth output equals false so if
it's a valid number but that number is
negative one it's not a valid form now
you can go on and validate the other
items as well the place name need to
have an actual name
so therefore if place name value dot
text dot length equals zero basically if
you have nothing in the place name value
then output equals false
now in all of these you could
put some kind of logging statements or
you know update the form may have a area
somewhere maybe over here or down below
or some of that bit that has all these
error messages and each time you get an
output equals false you would you know
set an error message right here that
says the the place number is not a valid
number the place number is less than one
the place name is empty you can add
those statements and adds who some kind
of form or field in your form but that's
case I'm just going to say valid or not
alright so in this case we've done these
first two fields and then we have to
have prize amount or prize percentage to
be greater than zero one of them does
all right so we're gonna do the same
thing but remember that the price
percentage is going to be a whole number
because we're saying okay it's fifteen
the value is 15 here that's fifteen
percent whereas this one here prize
amount could be is a decimal all right
so it's money so we're talking about
thirty dollars and fifteen cents why I
don't know why you know you think you
want a whole number there one hundred
two hundred fifty 10 whatever it is but
we have to allow the fact that they
might want to say no I want to give you
nine fifty not ten dollars so therefore
the prize amount has to be a decimal so
let's create a spot for that so we'll
say decimal prize amount equals zero and
be the other one which is prize
percentage is a whole number so
enterprise percentage that could be a
double if y'all allow for you know
fifteen point five percent we're going
to say no no you had that a whole number
here
where I say equals zero again and now
we're going to the same kind of thing we
did up here with our conversion so let's
say let's move this down a little bit
let's say rule prize amounts valid
equals and it's a decimal tryparse it
works the same way as the int tryparse
it just converts to a decimal and we're
just going to say that the prize amount
value the prize amount value dot text is
our string and then out prize amount
that's our decimal the rest sends this
value to the same exact thing bool prize
percentage valid equals in tryparse
we're going to say this is the whoops
not price percentage is prize percentage
its prize percentage value dot text and
out prize percentage
all right so make sure you get the the
decimal here and the int here because
we're returning these values as that's
important to get right but now you can
come here and say if prize amount equals
false
oops prize amount valid equals false or
prize percentage valid equals false the
reason to do both is because
both of Asian have a number in them I
just start in zero
but one of these has to have a valid
number in it so they both have you a
valid number meaning they both have that
at least a zero in them so therefore if
either one is invalid then output equals
false but then we're going to say if
prize amount is less than or equal to
zero and prize percentage is less than
or equal to zero so what it's going to
do is say we could say if they're both
equal to zero but that wasn't captured
because what if one of them is below
zero that would trigger a this is okay
but really they have to be both one of
them has to be above zero so this is
saying if this one is at or below zero
and this one is at a below zero they
can't both it out so if they both are
then output equals false all right and
now we could do some more checks as we
wanted to one of the checks we could do
is if the prize percentage is between 0
and 100 it could be 0 if it's if we use
in the prize amount but let's just rest
if prize percentage is less than 0 or
prize percentage is greater than 100
okay remember a percentage has to be
between 0 and 100 you can't have
anything above a hundred percent so you
know if the turn
it brings in a thousand dollars and
you're saying I want to give them a
hundred and fifty percent well that
would mean that you are going to lose
$500 on this tournament I come from
somewhere so basically saying no you
can't allow that
so therefore output equals false so
that's if the prize percentage is below
zero or if it's above 100 all right so
that's our validation that whole code
right there we'll save that so now we're
going to say if validate form so if it's
a valid form so this returns true or
false
one more thing I'm on a note here you
could instead of having output variable
arrests you could just return false here
return false here the very bottom return
true some people have said that's better
because it doesn't do all these checks
if the first one fails the reason I did
it this way is because that way it does
all the checks in a real application
you'd want to alert the user that they
did something wrong and here's we did
wrong that's why I said you know right
here you could say that it's not a valid
place number you know you put that in
the form or something like that and you
do that for all the places where you say
input equals false so if you did that
and you did the return false up here
you'd only check the first thing so if
this form we're entirely invalid and
they hit create prize they get one
message back saying hey change place
number they do that hit create prize and
get different message back they fix that
do that they get another message back
may be annoying whereas if they hit
create prize and nothing is valid it get
all five or so or five or six messages
at once they can fix everything and
on it so that's just a little quirk
there you may see a little differently
other places but that's why I did that
way now I don't have those messages a to
set up those messages when I'm ready
alright so in the prize button click if
the form is valid then we need to do
something well may create a model and
what model is that a prize model and
right now he's yelling at me because it
doesn't see a prize model well I hit
control dot and say use tracker library
and now it knows about it
so what's a cost model equals new prize
model and we can say model dot place
name equals place named text I'm sorry
value dot text and model dots place
number equals place number value dot
text and right away we have a problem
because that's not valid it's that's a
string but place number is an int all
right so it's two ways you can go about
fixing this one way is we can do this
try parse again we can try parse the
place number and also the prize amount
and the prize percentage that's a lot of
work right in here or I'm Kenai prize
model and I can come down here I can
create a constructor now this
constructor is an empty constructor and
what it does is essentially nothing
right now it takes nothing in and just
says do this code whatever it is into
braces which is nothing that's cool we
actually want that because that allows
it to do stuff like this that's calling
that empty constructor notice the no
parameters but now I want to do seat
you are again ctor and creates another
constructor and yells at me and says you
can't do that but we can create an
overloaded constructor and that
overloaded constructor says string place
name string place number string prize
amount and string prize percentage
notice they're all strings not numbers
and what this allows me to do is I can
create this prize model on the fly and
populate it and do all the parsing here
once and then anywhere that calls it can
call this method and have a stuffed
parsed so the simple one place name oops
capital P it's important equals place
name so I'm taking this parameter and
putting it into this property so that's
the easy one but now we need to do all
those other parses so int place number
value equals zero and then we're going
to do int dot tryparse and we'll say the
place number that's a string being
passed in that's our string and then out
place number value that's the string
we're storing it in and then we'll say
and fie let's tighten this up so we'll
have it on one grouping we're going to
say place number
the actual property place number equals
place number value now I in check to see
if this pass or failed why well because
I don't really care at the end of day
all I care about is a safe person he
doesn't blow up and give me a string
that's not a number but if you give me
an invalid string I'm going to change
place number to be 0 that's what the
default is when it comes out of tryparse
if it's invalid to answer to 0 which
guess what that's the default for an int
anyway so I'm going to say don't care
about it just just do it alright so
let's do this again for our prize amount
now a prize amount is a decimal so
decimal prize amount value equals zero
decimal dot tryparse place amount
I'm sorry prize amount there we go prize
amount and then out prize amount value
and finally prize amount equals prize
amount value so same thing all over
again just for the prize amount and then
finally I have the prize percentage
which the prize percentage is actually a
double let's actually go back and fix
this over here because here we said it
was an int alright for the prize
percentage so let's just change this to
be a double and the prize for sign is
here double all right works the same way
it's just now we're using double instead
of an int okay so
over here we're going to say double
prize percentage value equals zero
double dot tryparse prize percentage and
then out prize percentage value the
thing you'll probably forget when you're
doing this at some point is to add the
out that's what I forget half a time
then wonder why it's yelling at me so
prize percentage equals prize percentage
value so now we have taken these four
string properties or string parameters
and convert them if we needed to and put
them into their respective properties
save that we come back over here to our
form instead of doing all of this we can
take all this out and notice we need to
do is open paren we now have a one of
two and let's just zoom in on that from
it so if we do this we get one of two
that really either has a default
constructor or this constructor now I
left the default constructor which I
want to have the ability to just just
say nope new prize model I'll take care
of popping the properties on my own but
in this case I can pass in those four
properties so let's do that place name
value dot text next is the place number
place number value dot text next is the
prize amount value dot text and the
final one is prize percentage value dot
text notice how it scrolled off my page
now they can fix that is after the
before the first parameter get hit enter
and then after every parameter
afterwards do the same thing and now
it's kind of collapsed or a shortened
version of it makes a little more visual
sense it's easier to read so that's up
to you so now we're creating this new
prize model and immediately populating
with a values we need without having to
do all that conversion on our side so
now we have this what's next
well once we have model we actually have
to save it so here's how we save our
model we say for each we can save our
here we want or you can say the actual I
data connection it's up to you looks
like DB Clin aim Russ a global config
dot connections and what is that it's a
list of those connections it's a list of
I did a connection so for each one of
those that we have we're going to say DB
dot now look at my options that let's
zoom in on adoptions I have the standard
equals good hash code get type into
string then I have one method called
create price what does that pass in
model which air we have was a return a
new model
so what I can do that model is I can say
that if I want to or I can just ignore
this case I don't need at this point
maybe later I will but for now I don't
need it and guess what we actually have
a completed form but are we sure it's
complete
are you sure that all that Kody wrote is
going to work I really get uncomfortable
when I start writing you know 50 100 200
lines of code without testing it so the
way I test it we can put a breakpoint
right here the very beginning of our
create prize button click and hit start
and that pops up our form the very first
thing I do is hit create price what goes
there that's good now it's going to
validate form so let's step into or f11
and to come down to our validate form
method we can keep stepping through this
we can say the first one is tryparse for
a number value dot text which is nothing
and if we step into again we can expect
this now and see that number the place
number value is invalid it's false
therefore we're going to reach output
false the place number is zero so it's
less than one it's false the place name
value text length is zero therefore
output is false
now you keep going you want to but I'll
just play a breakpoint down here and say
continue to that point hidden the green
button and they'll step again and come
back here and it just exits out that's
all it does so we probably want to add
some kind of methods there it says hey
it's an invalid form let's actually do
that just a real quick one
hit stop right now just a real quick one
so let's say your break points out and
this time we rest say it if it's not a
valid form else and let's just do a very
simple message box that show this form
has invalid information please check it
and try again and it could make it a
little more fancy with the buttons we
have all the rest but let's just do just
that if we launched it again
I'm going to back over to where it was I
hit create prize and nope it's invalid
okay we can come back over here though
and put our breakpoint inside of the
valid form now let's go back and put a
place number first place the amount the
prize amount is $50 that means zero for
prizes ange know that zero is one we
ignore but you have to have a number
there we create prize and hey it's valid
B we got to this this line right here
let's step into this and notice it comes
down to this constructor we can say
alright check that out
place name is first place that's good we
can do a tryparse and that seems to work
is place number is 1 the prize amount is
50 that's good and the prize percentage
is zero great in fact we step to the
next line you can mount our model and
see that all of that information has
been entered the ID is still 0 so now
for each I get a connection DB in global
config dot connections Mouse go into
this push you mouse over this and see
that there's two connections
the text connection and a sequel
connection so that's great we actually
have something so for the first one
which if we mouse over DB is the sequel
connector right create that prize model
are passing in our model when it comes
right towards the sequel connector and
notice we're modifying the idea t1 now
and returning that model now we're not
doing anything that model but at least
we know that it actually pretended like
it went to the database and saved it now
we're looping to the next one and that's
our text connection and again we run
this and it goes to the text connection
class and it calls the create prize to
actually save this model now it's not
actually doing anything that's ok and
we're done so we hit continue this form
is now working now there's a couple of
tweaks you wanna make 284 we're done one
tweak is when you're all done
create a valid form and actually create
it then go ahead and wipe out these
values the other thing I want to do is I
want to add these two fields start off
the value of 0 that way don't have to
add 0 to the other field so that that
last one is easy we'll go to our
properties for that for that text file
or a text box and the text will put to 0
and down here the text we're going to
put 0 and that's it that's our our
properties now set the other one is to
clear out that form well if it's a valid
form we don't want to clear the off it's
invalid form we're going to say these
four values let's just grab these and
actually copy them
and paste them down here we got to the
commas out absolutely yellows for a bit
and that's okay we can move them back
you can say equals empty string
semicolon I can do that there is last
two we don't really want to say empty
string wanna say that's a stream of zero
in it the prize amount and the prize
percentage because again the default
value for prize of Mountain price
percentage is zero now if we run this
and you won't put a breakpoint this time
so let's make sure that cleared and it
is so now you can say it's second place
the prize percentage is let's leave no
clear from this OOP it's invalid ok
prize percentage is negative 15 nope
still not it's positive 15 yep that
worked and it cleared our forum all
right so that's a lot of work by the
same time now we're done now we've got
this form created and got pattern for
how to save to a database a text file or
text files or both ok so that's all
taken care of for us so that's great now
we need to move on to actually wiring up
those classes so we have the sequel
connector class and we have our so yeah
sequel connector class a text connection
class you know why are those up to
actually do the work so in our next
video we're going to start off by doing
our sequel connector and actually
talking to our sequel database so don't
forget to stay tuned for that
before you go you will see a link on the
left of pilots course check out the
intro video in this playlist for more
information what you get if you pay also
if you are ever wondering what you could
do to help this channel out without
paying money I've listed 6 things that
really help
I appreciate if you consider doing one
or more
are these thanks again and don't forget
to keep practicing what you learned</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>