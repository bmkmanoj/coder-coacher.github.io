<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>C# App Start To Finish Lesson 08 - SQL Database Design | Coder Coacher - Coaching Coders</title><meta content="C# App Start To Finish Lesson 08 - SQL Database Design - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/IAmTimCorey/">IAmTimCorey</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>C# App Start To Finish Lesson 08 - SQL Database Design</b></h2><h5 class="post__date">2017-05-29</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/6ixfTsrhPgM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">welcome to lesson eight in a c-sharp
from start to finish course my name is
Tim quarry and today we're going to look
at our sequel database design originally
I had plan to go into logic design
directly and assume you understood where
the data came from but after thinking
that over I aside that we should at
least look at the design and structure
of a database and then go from there you
could consider this a bonus video since
it's not really about the c-sharp
project but it is kind of important to
understand if you're going to build this
on your own now if you aren't familiar
at sequel this video isn't going to be a
comprehensive overview I'm actually
developing start a finished series on
Microsoft sequel databases that should
be out shortly if it's not already
instead today I'm going to walk you
through some of the basics on how I
built this database everything is
scripted out so if you purchase the
upgrade course you'll get all the
scripts along with the items in the
package so let's jump right into our
diagram before we get started in the
lesson I want to remind you to subscribe
to this channel if you are subscribed
click the little bell icon make sure
you're gave me alerts when I add a new
video
and while you check on that could you
also give this video a like I know that
we're just getting started but liking a
video is a simple way that you can make
this course more popular and that helps
everyone it increases the visibility of
my videos on YouTube which generates
more income for me it helps others out
because they get introduced to this
valuable content and it helps you out
because I'm able to produce more free
videos okay so let's get back to the
lesson so here we have our database
diagram and it looks a little complex
but don't worry it's not that complex
what this is is just showing us how all
the different tables relate to each
other and I bring this up not to scare
you away or to just confuse you but
instead I want to point out a couple of
things again not teaching
all about sequel today I'm just getting
overview but I do want to understand how
this is designed how you really should
be thinking about a design for a
database so for example let's look at
the team members right here in the
middle notice that this has been a list
of all the members for a given team but
you don't see a person here first name
lastly and all the rest you see the
person ID and that links back to the
people table with this ID you notice the
link right here this is a one dimension
ship and so in the people table first
name last name email address and cell
phone number are all listed as columns
so you could have a person in the people
table with an ID of one and you can
reference that person more than one time
in a team members table the benefit of
that is the same person could be on more
than one team for example if there's two
different tournaments going on at the
same time it makes sense that the same
person is on two different teams or if a
term has closed or ended and the next
tournament has started you wouldn't want
to recreate that person but instead just
use the same person and add them to the
next team so the idea here with our
design is that we don't store a whole
bunch of information that is duplicated
duplicates are really bad in a database
environment and the reason why is
because if you have a duplicate record
chances are you'll update it in one
place but not the other and then you
have conflicting information and which
ones right you're not sure because if my
first name was tin and last name is
Corey and my email address was Tim at
Quarry com but then somewhere else it
days it said Tim Corey Corey at Tim calm
which ones right
it's hard to see and so that's where
this setup right here tries to minimize
duplicate information but always using
IDs instead of the actual person or
actual object so just note whenever we
try and store information we try and
store it in as tight a formation as
possible maybe we don't have as more
columns we need to for example if I were
to say you know what we're going to have
at least one but maybe five email
addresses for people I wouldn't add four
more columns for email address - email
address three email address four and so
on instead I would then create a new
table over here called email addresses
and then I'd have a column for person ID
which would be that's right here and
then a column for the email address and
that way one person could have one email
address or five but in this case I say
you know what we're going to capture one
email address and one cell phone number
and that's it so therefore it makes
sense to put them here so we don't make
our database design more complicated
than it has to be and that's the balance
you always play with we're developing a
database design so this is it this is
our database design if it should hold
all the information we need so we have a
tournament information the prizes the
entries the teams the matchups the match
of entries the team members that should
be basically we need for our entire
database but you know especially when
you're designing things now we're going
to fly but you're designing as you go
usually you forget something and so I'm
actually building this course in a way
that takes you through those kind of
decisions so that when we get down the
road we might find out oops we include
something how do you put that in because
that's real world the real world is you
never get something fully planned out
before you have to put in into code and
so how do you take those modifications
after the fact
and put into place and so we'll do that
with this database as well now let's
turn it over to the sequel server
management studio and that's here right
now okay so this is the sequel server
management studio for Microsoft sequel
server 2016 developer edition now what I
love about this is the developer edition
is free you can go to Microsoft's site
and download it but yet the developer
edition has all the same power as
Microsoft's Enterprise Edition sequel
server now Enterprise Edition is really
expensive for a developer or a single
person to buy but we don't need to put
anything in production that's the one
limitation this database has is we can't
use it in production but for development
purposes it's free to use so if you were
a corporate environment you could
develop in this and then push the
changes to your quote-unquote real
production server without an issue in
this case we need something for testing
and for developing application and this
will work just great if you're not
familiar over here on the Left I have
connected to my instance of sequel
server you can actually have more than
one instance of sequel server on your
machine at any one point in fact this
right here is the dot slash sequel 2016
instance which means that it's not the
primary or default instance on my
machine typically the default is just a
dot and so this is actually the named
sequel 2016 instance on this machine and
the reason why is which I also have an
instance for all of my work development
which of course I don't want to give
away to the world so in here I have one
database the worldwide importers
database that's actually from Microsoft
they give you a sample database to play
with and you can download that by
googling it or white importers sample
database but today we're actually going
to create our own database
now the couple ways of doing that first
you can right click on databases and say
new database and brings up this dialog
it has a whole bunch of options here but
here's what I find especially for a
development machine you don't need to
deal with all of this stuff okay now you
could just fill a name here so if you
wanted to I type in tournaments and hit
OK that would use the defaults for
everything now there is here this is the
actual data file and so you can set some
defaults here like the initial size how
large it will grow at what size and to
what maximum size and then where that's
located on the disk now if your actual
DBA
you'd want to change this path location
because you want to get the most speed
you can of your disks and so typically
what you do is you put your data file
that's right here data file on onedrive
and then your log file on a different
Drive now we're not going to do that
today
when I have worry about any those kind
of defaults because this is just for
development not for production use now
that's one way of doing it is okay
you're done but I'm going to show you a
different way if you get a new query
this right here is the query window and
it's the place where you should probably
spend most of your time as a an entry
level or even through advanced sequel
developer I find that it's much much
quicker just to do things here than it
is to try and mess around the gooeys for
most things and I'll show the exception
just a minute so to create a new base
you simply say and I'll tab down here
I'll say create database
tournaments now notice the Senate claw
at the end that's one of the newer
things in sequel server and by new or I
mean I believe it came in around 2008
maybe Soto Newars and eight years ago
probably but it's something that is
usually left off by developers just
because we forget it
but it really should be at the end of
every statement not the end of every
line the end of every statement so
create database tournaments as I execute
is says command completed successfully
this message window down here is where
you see the results when you have
results and come back over here you
don't see the database yet but if you
hit the refresh button when you're on
databases it now shows the tournament's
database if we open that up you'll see
database the diagrams tables views and
all the rest and if you open up tables
there's nothing in there that's because
it's a blank database let's go ahead and
change that what I'm going to do is I
actually going to run all of my table
scripts since writing scripts is really
boring but then I'll come back and show
you how to create a table and then also
how to create a table script I'll be
right back and I'm back okay so I've
created now all the tables using my
script that I will need for this
database now let's take a peek at one of
them just to see how a table is
constructed and now build a sample table
for you just to show you the process
that I go through so let's look at
prizes and I right-click and go a design
and then I think about the design view
is it shows us a an editor for adding
our tables instead of having just the
sequel script the sequel script can be a
bit daunting in fact let's go ahead and
look at a sequel script for this prizes
there's a single script that's a lot of
script okay and even remembering just
this part which is all we really need to
worry about this up here is nice but not
necessary necessarily but even just this
much it's a little intimidating
especially when you're a c-sharp
developer not sequel developer because
c-sharp developers have to do some
database work usually but that's not our
primary love and so if we can get away
from this it's at all possible we
probably want to and that's where this
designer comes in this designer really
makes things easy so what I have here is
my ID column this is the column names
right here and so I'm so going to zoom
in on that for you there we go so here's
our column names so my ID column which I
call ID that's a standard that I have
you don't have to have that standard but
I call it ID and then anywhere else I
call it prizes ID so that's an integer
column that's a data type so these right
here are data types that's what you're
familiar with when it comes to sequel
it's just a named a bit differently so
my ID column is first it's a type int it
does not allow nulls may you have to put
a value in there and then this key right
here indicates that's the primary key
and the way you marked as a primary key
is over here you'll see this little key
icon and you click that to add or in
this case remove the primary key from
that column and what a primary key does
is it says this is what we're going to
order all the rows by and why is it
important is it allows sequel to
optimize the database or optimize the
table if we don't have this
call it Heep and basically just what it
sounds like is throws rose on top of the
heap but then every time you want to
look for a row it has to go sorting
through that heap as if it was a garbage
dump now this is a key that we create
and in fact this column right here I D I
set as an auto incrementing column we
zoom out here and come down here I'll
pull it up and down here in the identity
specification for this column we have
yes it is an identity and the identity
increment and seed the increment is how
many we count up by so in this case one
and a seed is the starting number so the
very first item is getting number one
and the next one B two and then three
and then four which makes sense where
does going to count up but what that
does is it gives us a unique identifier
for every row in our table that sequel
will sort by that also means we add new
row to our table it knows immediately to
add to the bottom of our table because
it has the highest number you see it's a
lot that goes on behind the scenes when
it comes to a table and how it stores
information a lot make sure we optimize
our tables for most efficient storage
and retrieval and this seems to be the
best way of doing that creating this ID
now there will be obscure edge cases
where that's not the case but and here's
the deal you're a c-sharp developer
probably if you are and you're building
databases it's not because you need a
bot build the most totally optimized
database from the planet you need to
build a good really good database and
that's not the way of doing it if you
have your sequel developer friends say
hey you know
much better way of doing it which
there's a much better way with me a
little bit of way of doing it
tell them great go ahead and building
one but this is the way that gets you
the 98% of the way towards optimized for
about 2% of the effort so go ahead and
do that the next thing is the place
number again is an integer that's our
for our prize in the first place second
place third place but just the number so
1 2 3 4 again we don't allow nulls the
place name now it's a little bit
interesting here a lot of point is out
for a minute
this is where you put the place text so
first place fi rst space PLA CE e first
place so we need to have a text field of
some kind in c-sharp that'd be a string
field real simple but in sequel where
it's all about data we have to optimize
for what type of strength we want now
there's a few different string types in
sequel there's n VAR char and var claw
at n VAR char max there's varchar' we're
down here and it's other types as well
but in our case I have chosen n VAR char
and the reason for that is because this
is the type that best fits my data now
one end of our chart is it has three
distinct parts right here the N the VAR
and the char so I start a char first
char means a character so it stores
characters meaning any kind of character
you want numbers letters special
characters they all fit in here spaces
var means a variable length
meaning this number right here 50 is the
maximum number of characters that this
column will hold but var means that it
could hold three characters five
characters or 50 characters now it can't
hold 51 they can hold 50 49 1 or even
zero characters that's the variable
means the counterpart to that it does
not have the VAR there it's just n char
or char and what that does is it says
will always have 50 characters whatever
that maximum number here is and so how
it gets away with that is if you store
say a string of 5 characters it's going
to pad that string with spaces
afterwards so it's going to have the 5
characters you gave it plus 45 spaces
all right and there are times that's
useful but typically I find that it's
not useful again for about 95% of the
times when I want to store text so I
always default to varchar' or n VAR char
and that brings us to this and the
difference between varchar' and end of
our char is a type of characters it can
store a varchar' without the end front
can store just the typical ASCII
characters but the end of our char
stores unicode characters now unicode
takes up twice as much storage space in
your database but the benefit of it is
that allows for other languages
characters now I'm in the US I typically
deal with us English characters and so
if I were dealing just us characters I
would do varchar' for practically
everything but if you are dealing with
international audience or you're dealing
the option
to have international characters for
certain things you want to have this end
of our chart so that's the difference
you'll see me use both kinds in this
database and that's because of whether I
thought that I would be providing the
strings or the end-user is providing
strings and what type of strings they
are so that's a decision to make because
it does again double your storage
capacity or storage space taken up by
this data and when you're getting into
millions of rows storage space is
important again we probably get a
million rows in this project but you
know what you want to plan for as
optimized as possible Rev front best
practices okay so we can change this
number here if you want to up to I
believe four thousand but it's also the
option here of n varchar' max and that's
a bit different max will hold a ton of
data it's actually handled a bit
differently than the end of our char
because that max data is not actually
stored with your row now when you access
it and use it in the database it's
connected and doesn't look like any
difference but in the backend it's
actually stored a little bit differently
in order to allow for some optimizations
and that the max feels before when
you're going to allow the user to type a
book I mean lots of information or other
types of data one of the places I use
that is that I'm storing JSON string in
my database to be used in my friend web
application I'll usually do an n/bar
Carmack's that way I can store a very
very large JSON string without problem
okay
we had the prize amount now just like
c-sharp where we have the decimal versus
the double in sequel we have that same
differentiation so the prize amount is
dollars and cents if you're in the US
and probably something similar or at
least as soon as far as the the actual
monomers is concerned in other places in
the world so we have what's called a
money column and that is that precise
column that decimal type in in c-sharp
is probably closest equivalent but then
down here I have the prize percentage
which is just a percentage think a
number between 0 and 1 so you know 0.28
point 8 3 whatever therefore that is a
float and that's the equivalent of a
double in c-sharp so that's a table
that's a created there's a few more
things to look at the biggest thing is
the relationships so back on the diagram
we saw that the tables were all kind of
connected to each other based off of
these ID numbers in fact if you remember
back in the diagram or if you have the
companion booklet you can better put
back to it we have this ID field right
here
the prizes ID connected to the
tournament prizes table and how we do
that well wrap here I know it's kind of
small but let's zoom in here this icon
right here says relationships now if
you're doing with a previous version of
a sequel server management studio you'll
see the icons are a bit different
in fact this used to be a yellow icon it
might still be nope it's not so usually
a yellow icon but it's not anymore and
this is a little bit different but if
you mouse over it says relationships is
the same one
looking for relationships here and we
get this this is our relationships
either so what we do here is we say
these two tables are connected in this
case we have one relationship we have
the prize ID to tournament prizes table
relationship and if I come over here to
tables and column of specifications and
click the ellipsis alright
the foreign key table is the tournament
prizes and a column is prize ID the
primary key table is the prizes table
and the column is ID that's again
terminology is difficult to get through
but thinking this way the primary table
is the one that actually has the
quote-unquote Real ID that's the ID we
just created that says this is the
unique row okay think of it as row
number five how does that relate through
to the tournament prizes table
well internet prizes table there may be
more than one entry that has five for
the prize ID so therefore the tournament
prize a table is the foreign table so
primary is the one that has just as ID
that's the primary table the foreign
table is the one that uses that ID so
what this does is it links these two
columns together and says okay these two
columns are related the same data so
when I say five over here I mean the
record over here in prizes that has an
ID of five now you can
it's a really fun relationships I didn't
in this database but which we could say
is in force replication and you can say
what happens when an insert or update
happens so I could say if I delete an
entry what happens I can cascade that
delete and so what the hell do is I'll
keep my two tables and sync for example
if I delete a prize that I shouldn't
have that prize ID used anywhere and so
I can replicate then go ahead and delete
all the records where five was used or I
could set them to no or default and the
same thing update I could update the
information here so for example if I
were to change the ID in the prizes
table it would then update everywhere
set five it would now have a new number
which don't change your IDs let's just
get down to the bare facts here
don't change your IDs think of them as
unchangeable okay so that's
relationships tell you what let's go
ahead and close this out and create a
new sample table again we could do the
create table right here like that and
keep going but that's really complex and
not something you need to worry about
instead right-click on tables say new
table and then it start filling it out
so I started ID apologises is so small
I'm just going to do this edit right now
so I see ID and I choose int so type and
uncheck this allowed nulls and come over
here to the set primary key button to
add that as a primary key and then
expand down here the identity
specifications I double click on the no
of these Oh daddy
70 yes also changes these two to the
default values of 1 and 1 which is
exactly what I want so that's good now
let's let's create a table that stores
Ayano person information so let's create
a first name no spaces in the column
names don't do that just like with
variable names just don't do it I'm
going to change this to an end varchar'
and a person's name 50 is the default
value there may be a time when 50 isn't
long enough I'm thinking probably not
the first name but you really don't want
to have two messes later so let's put as
a hundred now say no you're not allowed
to have nulls then last name n varchar'
again for sure 50 is not long enough for
all names because don't forget people -
ate their last name so if they had a
long last name it hyphenated it you
don't want to as a database developer be
rooting for their hyphenated name to
include Jones because it's short you
want to make sure that you have enough
space for them as I show you just give
it a hundred the nice thing that the the
variable character is even though we can
hold 100 if we only use five characters
then the other 95 aren't stored so
actually makes our tables a little more
flexible and small so you still want put
some limits there but you do have the
option then of getting a little more
buffer to your your items all right node
and allowed knows let's do an email
address again n varchar' this one's a
little trickier because I believe the
actual limit here is 2000 and that's
really big but I believe that's the
limit that is put on email
the reality is no one has or practically
no one has a 2,000 character email
address but you should make sure you
have plenty of space for even extreme
examples so I wouldn't do two thousand
you can even have a you know something
the website or whatever application
using say you know that's just too long
pick a different one use different one
email addresses are free or practically
so so we can definitely specify
something shorter let's go with I'll say
two hundred that seems reasonably long
and then let's add a phone number and
just like with c-sharp they should
private a text character but in this
case I don't think need to have the n
for n varchar' no need unicode
characters probably since they're
typically numbers and so let's just do a
varchar' and we will make it a maximum
twenty now the phone number maybe they
don't have phones or everybody or don't
require that so we allowed nulls for
that and then let's create another
column this column will call number of
kids and still do an int we're not going
to allow nulls here but we're going to
put default in now probably my guess is
that if we look to every person in a
reasonable group of people the default
number of kids will be zero because the
people who who aren't old enough who
aren't in a relationship haven't done
yet as well as you know people who
haven't had kids whatever
so this is just an example but we want
to have a default value here instead of
no we don't want to fill it in every
time we can put a default value right
down here where it says default data are
binding and we'll set that to zero all
right and it puts in parens now its
default value would create a new record
add one more the create date and there's
actually a couple different dates and
times and other things in here there is
date date time and date time too and
then date time offsets I choose to use
date time too and here's the reason why
date is just the actual date and a time
as well which for a create date for this
row isn't good enough date time is the
old standard for storing date and time
date/time is a new standard so use a new
standard there's a reason for it and
then I don't need to store the date time
offset so let's start a date time - here
I will uncheck the allowed nulls but
then down here for default value or
binding I'm going to put get date time
and that does an error I want cancel my
changes it's actually get date there we
go get date I have a hard time switching
between sequel and c-sharp sometimes so
get date will get the system date and
time for this unit so wherever the
sequel server is running
that's a date and time it gets now if
you are dealing with any kind of overlap
between different time zones it's a much
better thing to do a get UTC date here
what UTC date will do is it will get the
date and time with a timezone
modification of zero so that way no
matter where you are in the world it's
always the same time when it comes to
relationships so if I was using this
database in California and then somebody
else use a database in New York they
might have the same time but because
it's different time zones actually three
hours difference and so let's get UTC
date we eliminate all of that and it's
using not problem but in case it is that
UTC will really saver button so just
note that if you're doing any kind of
crossing the date line where maybe
you're have a single database on the
East Coast and one replicate on the west
coast and you use both of them that'd be
a problem so in that case get UTC date
but especially for desktop applications
that's not a big deal because you're
dealing with local databases usually in
that case get date works just fine now
we get data okay so that's it
go ahead and save this I will call this
a test person table so test person and
now I can say from my Creator let's go
ahead and refresh this over here if I
were say select star from test person
notice it's going to yell at me because
I don't know who that is I do control
shift are that should refresh my well it
should refresh one window it's not it's
okay so we can do is close it out and
open up a new query window select star
from test person and now it's updated
and I can hit f5 and see there's no
records in my table it will get back to
the query syntax in a minute
but I can also right-click on my test
person table I can go design if I want
to look at again or I can say select top
thousand rows which will essentially
give me just what I saw here only if
there's more than a thousand rows at one
using the first thousand or we can say
edit the top 200 rows now this works
great because it shows us a new editor
and we can enter stuff in right away
let's just enter Tim quarry test at
quarry calm five five five one two one
two right and put a dash there number of
kids I'll leave number of kids and
create date blank so right now it's
yelling at me I have not put anything
for ID and I'm not planning for a number
of kids or create date but I filled in
all the other fields so if I hit down
here it actually creates that record
if I were to hit the execute sequel
button my right click in the white space
and saying execute sequel or by coming
over here to this button right here
where it says execute sequel little
green play button it's going to refresh
this and notice now my ID is one my
number of kids is zero and my create
date actually has a date in there and
that's great now if I want to I could go
over here and say two kids and I mouse
off it and that works if I try and
change this to be 15 for nothing so the
reason why I cannot modify the primary
key when it's an auto increment field
and that's by design there is a way to
get around that but don't just don't
okay so also notice that if I were not
filling a field where I should have
notice the first thing is not filled in
and still no email address is hello at
world dot knit five five five one two
three four I'll leave the rest blank my
mouth off it it says no rows were
updated the day in row number two is not
committed and the reason why is II
cannot insert a value of null in the
column first name and so the incidence
failed now it allows you to come back
here and modify this if I didn't want to
modify if I destroy the row I can hit
escape but in this case I'll just put
Jim and then mouse off it and that works
if I hit my play button here notice it
now has a three for the ID
- the reason why is because we generated
a - when we tried to enter the null for
first name last name of Smith it didn't
work but it's still held on to that ID
number and said nope can't use that now
some of you may be saying oh no I need
get that back somehow no just leave it
alone
let it go it's better that's gone you
want to keep with the normal system that
sequel does for auto incrementing your
fields will not hurt anything and it
will be helpful in some instances
okay so we've entered some rows here
coupling the note this editor right here
edits the top 200 rows okay when I said
ed top 200
you have 300 rows in your table you will
only see the first 200 that can be very
confusing especially if you're adding
new rows and then refreshing and they
disappear they're actually there it's
just that they're below the 200 line
there 201 or below that can be really
confusing I bumped into a couple times
and there are other ways of inserting
and updating rows but it comes down to
manual sequel scripts they're not as bad
as it sounds but it's a little more
complex I want teacher today however one
more thing I want to show you is back
here I did this select star from test
person if you're not familiar with its
sequel script syntax actually the first
thing that you should be doing is
thinking about where you're pulling
information from so what I always do is
I just say select star from and then I
put my table and I'll go back and change
my columns if I really want to in this
case star means every column now when
you're actually creating sequel scripts
and you're optimizing them for best
performance and all the rest
you don't put star because there's a few
reasons I won't get the whole list of
them basically a true sequel you know
developer DBA will probably yell at you
for a slash star but again for 95% of
your cases
it's probably fine so select star is
probably fine
that is good as every row I'm sorry
every column and then since there's no
limiters here it also goes every row now
my right click it says select top 200
rows how do that
well select top I'm sorry 1000 select
the top 1000 star from test person we
only have two so it's not going to make
a difference but that would limit us if
we had a million rows in this table
whenever you're dealing with big tables
always make sure that when you're
testing things our trying queries limit
those things down to a few hundred rows
okay so I just hit the execute or f5 and
I got my two records back here my ID of
one three first name of Tim and Jim the
last thing of Cory and Smith email
addresses and so forth what else can I
do with this well we can also do a
filter so we're last name equals Cory
knows a single quotes not double quotes
so single quotes around Cory what does
that do it gives us just the Tim query
record now if you said well I'm not sure
I know a full name by no part of name
not a problem where last name like cor %
and that's the wildcard character for I
don't know we run
that get the same results because cor %
Cory fits in those parameters now if I
didn't have that % there it's not going
to find anything because last name like
without a % it's essentially saying
equals cor so when you use that %
also unlike c-sharp if I were to type
all lowercase cor you I execute this
it's still finds curry with the
uppercase C so C sharp would not have
found that because lowercase C or re Y
is not the same as uppercase C lowercase
Ord why so sequel is not dependent on
case it's case insensitive alright so
there is the Select top 100 or 1000 star
from test person where lastname equals
Cory if we take that out now you can
take it out by either deleting it or two
dashes in a row makes it a comment I can
continue on say order by let's do a
first name so select top 1000 star from
test person order by first name this is
skipped because it's been commented out
and there you go if you want to add that
back in we took comments out and now
it's going to order because we only have
one record we really can't see if it's
ordered correctly or not
but it is so that's the basics if you
wanted to take off a top 1000 instead of
having star say just first name comma
last name those are the two columns you
want know it's a comma separation
execute that notice now that we have
first and last name in fact if we wanted
to we could say
as first space name as surname
what does ad syntax does it allow us to
rename the column so if I execute this
now notice first space name and surname
I kind of blend them together but it
does say surname so you're reading our
columns in our queries that's very
helpful because we can separate then the
display to the user from the how we
store it in the database and click
actually hide obfuscate change or
improve the names of our columns right
in our queries now again there's so much
more I can show you here but this isn't
going to be a deep dive in a sequel see
my sequel from start to finish course
for that instead I just want to give an
overview of the syntax because next
we're going to create all of our store
procedures now a store procedure it's
job is to link together or expose a
database script or a table script to the
end user in some way and so I use sort
procedures for just about all of my data
access in fact all my data access
because it allows me as a single
developer to secure my database much
more thoroughly and make sure that bad
stuff does not get in your database if
you're familiar with a sequel injection
or all those type of attacks where
people actually access from your
front-end application access your
database and destroy stuff or change
stuff or excess stuff that should price
scare you but if you use everything
through store procedures and then
properly security database then the
hackers have very little to no access
to do anything you haven't explicitly
said they can do and I love that and so
whenever possible I dissolve directly to
store procedures not to views not to
tables so if you like a query that's up
here I typically don't use views or at
least not often instead they go right to
store procedures so to create store
procedure there's no fancy editor
unfortunately just right-click and say
new store procedure and you get this and
that's a little complicated now you can
see the comments if you want makes a
little cleaner that just who created
when for what but you still have this
I'm going to show you a little bit
cleaner view that it's a little less
scary hopefully and actually has some
relationship to our current tables so
let's go ahead and add those store
procedures in and they'll come back and
I will show you how to actually look at
them and even design them be right back
alright I'm back so I've created these
store procedures here there's I think
seven of them let's go ahead and look at
this store procedure right click and say
modify that's probably easiest way of
looking at it one of the benefits are
saying modify here is if I say you know
what I need make some changes here I can
go ahead and change this in any way and
run it because it's already set for
alter and so that's the first thing to
look at
ignore this stuff up here and then also
this right here use tournaments go is
just saying make sure you're in a
tournament database right up here
because if you're the wrong database and
you add the store procedure that's a
problem so but we're in a tournaments
database so I called this so altered
procedure when I first create it I said
create procedure and that creates this
procedure notice the red squiggly says
hey there's already a store procedure of
that name in the
database and that's because we've
already created so if I want to change
it I have to change this to say alter
that's all I have to do in order to then
make modifications to this store
procedure
I call it DB o dot SP prizes underscore
get by terment so this is for the prizes
table I'm saying get the prizes by
tournament so get all the prizes for
this tournament and then this is the
value I'm passing in so I'm passing in
int and I'm calling it tournament ID
think of this as your parameter in your
method in c-sharp so this is your method
name this is the parameter this is a
parameter type so we have then the adds
and begin begin right here and then end
right here everything through store
procedure has to be between these two
blocks between begin and again thing of
these these has curly braces all right
so now no count on what that does is it
doesn't send back to the caller the
count of how many rows occurred and
that's fine set no count on just says
don't send that extra bit of information
unless you want it if you want it then
you take that entry out or set no count
off but in most cases I have not found
this necessary to send back account
especially when you have a select query
so let's query returns data so if it
returns 10 rows guess how many rows were
returned what 10 we can count so there's
no reason to have it send back two
pieces of information when just what
I'll do and that one being our actual
data so in this one I'm saying give me
all the information from the prizes
table
but then joining it and that's a little
more complex and so I'll walk you
through it again select well P dot star
and says star Y P dot star well I
renamed the DB o dot prices table to me
just pee
that's the rename right there and that
way it makes it sure so instead of
saying DB o dot prices dot star is a PDF
star makes things a lot easier
why P well Peter price and then I'm
going to inner join and what this does
is it connects two different tables and
I'm connecting them based upon the prize
table it's ID so P ID equals T T is the
D vo turnip rises renamed to T so T dot
prize ID
it's just that same relationship except
earlier we're using it we're saying
these this is the connection here and
then saying where T dot tournament ID
equals the ID passed in so what's
happening is I'm saying let's find out
the link across these two tables and
then only give me the prizes that are in
this particular tournament now again
it's going to take a little bit to
understand that that's fine if you're
confused don't worry you just have to
use this not necessary under stand it
yet down the road if you want to
understand it and if you want to do more
we actually creating store procedures
which I would recommend then go ahead
and watch my course on c-sharp from
start to finish so this is our store
procedure now how do you call it well
it's a little different and there'll be
a little bit different in c-sharp as
well but let's create a new store
procedure and then we'll call that since
we have this the
you test person table with sample data
in it so create right click on store
procedure and say notice by the way that
is inside of the programmability folder
then store procedure so right click and
say new store procedure let's get rid of
all the stuff we don't need first when I
create store procs for my company I
actually fill its information in or
create a similar template and use it but
in this case we don't need to do that
and then let's pass in orchid name so I
say tbo
now what's dbl well that's database
owner notice that all of my tables have
DB ODOT all of my store procedures have
DB ODOT by default in sequel server DB o
is your primary owner and primary schema
for your tables and stored procedures
and views you could change that in fact
if you use a sample from Microsoft
you'll see all kinds of different
schemas instead of DB l to be person dot
or address dot or company dot Beck is a
little confusing and again for a rookie
person just starting out with sequel
server don't worry about it put
everything in DB O so create create
procedure DB o dot let's call this
I always start SP don't do SP underscore
but SP SP underscore will confuse the
system into thinking this might be a
Microsoft supplied store procedure and
that's not good it makes things longer
try and figure out and it could have
some some naming issues let's call it SP
test person underscore get by last name
now
winters let's go ahead and white ball us
out and let's play about this comment as
well and we will wipe out this as well
there's a little more bare-bones
now in the parameters here I want to
bring in one parameter and that would be
last name because I'm going to get the
test person by their last name if has
more than one person with that last name
you'll bring more than one record back
so we will say at these all variables in
a store procedure just start with at
last name let's say space and varchar'
100 now if you're not sure on the the
number the how big your last name should
be you can right click on test person go
to his eye and say yep last name was 100
you could specify in your store
procedure less than the maximum if you
specify more than the maximum you'll
have a problem welcome to insert so but
less than is fine equal to is probably
best
so it's the same limitation but it's rip
to you so last name at last name space
and the type if we had one one we put
comma here and say at say first name or
whatever but in our case we only have
one parameter being passed in and then
down here inside our begin before end we
will say select star from dbo dot test
person now do I need to do dbo dot
technically no if I don't then the
system will say I'll think it's probably
dbo and so it will assume that and
prepend it but in this case it's
probably a little cleaner to say dbo
test
we're last name equals at last name of
my semicolon to be complete and we're
done
that's our stored procedure I execute
and says command completed successfully
and at first you might be thinking you
don't if you're not you know if it's
late or whatever you'll think wait what
why don't I see data and you don't see
data because this is do data yes what
you're doing is actually creating a new
store procedure you just create a new
entry here if we hit refresh you will
see that test person get my last name is
right there and if we create a new query
window I can call this by saying 'hey x
ec exec DB o dot SP test person
underscore get die last name it's not
they're just going to get me so i have
to refresh that's the control shift are
going to take a bit I can say Corre now
even if the squiggly is they're saying
note didn't find it you can still run
your your query it will still work it's
just that the editor hasn't caught up
the fact that there's new objects that
control shift are will do the refresh
they'll take a couple seconds as you saw
there it took Rhino 15 seconds or so
before actually refreshed our editor
closing and reopening also works so I'm
saying exec that's how you execute a
store procedure the name of store
procedure the full name DB OSP test
person underscore get my last name case
sensitivity is not a factor here so it
could be all lower case if you wanted to
and then after a space I put my
parameters and I can either put them in
order or I can say
at last name equals like so and then
comma separated that way as you should
do them in order and that seemed to be
fine for me if you execute notice it now
says Tim Corrie and if we look up if
you're the other person's name is so you
can select start from as Jim Smith so
last it was Smith and we execute that
now Jim Smith it down here so based upon
what we select up here and run if we get
down here so that's how store procedure
works now one thing I have to point out
yet in the Edit window if I have this
highlighted now I hit f5 look what
happens could not find store procedure
Smith the reason why whenever you have
highlighted in this window is what gets
executed so if I don't highlight the
whole thing then it won't run unless
nothing is highlighted if nothing is
highlighted then everything gets run so
for example I could come down here let's
just say select star from
devio dot test person if I can highlight
anything and hit f5 it executes the
store procedure and then down below it
also executes our our table or select
statement from our table so both could
execute if I hide just one just that one
gets executed so that's not a little tip
for the edit window so that's an
overview of our database that's really
all there is to our database I know it's
a lot by the same time it's not really
so I just want to give you an overview
so you saw again this took over an hour
to can give you a good overview of
what's going on but I thought it's
important for you get a good handle on
things
before you get into actually using this
now I don't want you to feel
uncomfortable out later going into this
and just poking around seeing what you
see trying things out maybe don't get as
complex as server seizures but maybe
create a new table try it out maybe even
try linking two tables together I want
you to feel comfortable at least seeing
this data and seeing us get coming from
sequel and not being concerned as a
black box all right coming up next we're
going back to c-sharp and look at the
logic for our prize form it's a pretty
simple form we're going to see how to
hook things up and we'll get into some
data access and setting some that up and
continue on from there so that's us next
before you go you'll see a link in the
left of BIOS course check out the intro
video on this playlist for more
information what you get if you pay also
if you are ever wondering what you could
do to help this channel out without
paying money I've listed six things that
really help
I appreciate if you consider doing one
or more of these thanks again and don't
forget to keep practicing what you
learned</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>