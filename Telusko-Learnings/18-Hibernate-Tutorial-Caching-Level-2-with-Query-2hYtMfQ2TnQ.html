<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>#18 Hibernate Tutorial | Caching Level 2 with Query | Coder Coacher - Coaching Coders</title><meta content="#18 Hibernate Tutorial | Caching Level 2 with Query - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Telusko-Learnings/">Telusko Learnings</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>#18 Hibernate Tutorial | Caching Level 2 with Query</b></h2><h5 class="post__date">2017-01-18</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/2hYtMfQ2TnQ" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so welcome back in this video we'll talk
about hibernate caching with query so
the last video what we have done is we
have used hibernate caching secondary
cache it right this time we'll go for
queries because we want the data which
we have fetched is with the help of get
methods like so when you get method as
the hibernate implementation so that
means - it will use cache
but what if you specify your own query
let's say if you are using SQL will it
work
let's try so before going before going
forward let's do a quick revision what
we have done so we have added these two
dependencies one is the eh cash and the
hibernate and KH cache then we have
specified that I want to use I want to
use this thing which is hibernate a
second level cache and factory class
then we in this we have mentioned that
we want to use cache right in the entity
any class and this let's try to
implement the query now now how do we
use query so we'll say query q1
it's q1 equal to or we say session 1 dot
create query and then we'll mention a
query here we'll say from alien where I
will say well a ID is equal to 1 is the
one that B does the data we want right
I'm going to import the package for them
we'll say watch it on iPod as the
package where you have your query then
we say so here when you're fetching data
like this we'll say q1 dot unique result
that's how you press the values easier
if you know that you'll be getting on
the one row you can use a unique result
and we can catch it here which says it's
cost it with it in itself so the first
object let's copy this and let's paste
this in this second object here we'll
say replace this special using get
method now we are using query as we said
this is q2 and session 2 it should work
now let's say if i underscore e you can
see ok record so we got an error
it says session is closed or because we
have not replaced this with q2 of let's
run this once again the bugs are
everywhere so you can see we got the
data not with the get methods but to
tell powers queries and regards this to
queries here we got this first select
query and then we got the second select
query the same data you are getting for
two times now why exactly we are doing
that or why we exactly getting that is
because whenever use second level cache
check is by default get method is not
applicable for the configuration okay so
we have specified a second level cache
rewrite but we have to also mention one
more property here because party for
venue is second level cache it will it
is nothing about forget method not for
the query for that you have to specify
one more property here and the property
name is its hibernate dodd cache dot so
you can see if i say control space there
is one more property here which is use
query caching by default this is false
you have to make it true so that it will
be available for query cache as well and
once we have done that let's see if is
working or not if I was its query and ok
no it is still going for two times the
reason is when you specify that it is
your second of our cache it should be
available for query cache a you specify
this in hibernate files like but you
have to also do that for the query
objects you have to say q1 dot there is
the method for a set cashable you have
to say true because your query don't
know that we are using cash I hear the
same thing need to be done for q2 will
say Q 2 dot sex cacheable and true
now why are you adding two times is
because the q1 will mention that I want
to use for this result so this twenty
results should be stored in the cache
tree and second time it is fetching from
the cache so after idea that both
attacks refer on this code and you can
see we got only one query which is not
executing the query two times it is
doing only one time right so that's what
we can use query with Oh word hibernate
cache
okay so that's it from this video I hope
you enjoyed it the caching concept if
you have a so if you liked it please
click on the like button and do
subscribe for further videos thank you
for watching</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>