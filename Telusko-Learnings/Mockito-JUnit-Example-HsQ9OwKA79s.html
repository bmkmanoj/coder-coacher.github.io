<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Mockito JUnit Example | Coder Coacher - Coaching Coders</title><meta content="Mockito JUnit Example - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Telusko-Learnings/">Telusko Learnings</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Mockito JUnit Example</b></h2><h5 class="post__date">2017-08-31</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/HsQ9OwKA79s" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">welcome back in the last video we have
talked about how to use de unit and why
do we need mockito in this video let's
try to implement mockito but then again
let's go back and let's recap what we
have done so if you can see we have a
class called as calculator and of course
this calculator will add two numbers
normally what we can do is if you get
these two numbers we can simply perform
an addition operation here right we can
say I plus J but let's say this is a
complex operation normally what we do is
when you work with I mean when you work
with an application it may require that
that application will interact with
something else maybe if you're using a
mobile application in your mobile
application you want to add two numbers
but then you might be using a cloud
service you are asking a cloud service
to add those two numbers now of course
for calculator doesn't it doesn't make
sense but then imagine if you have some
complex operation of course you need a
cloud service right now this is not just
for cloud service maybe for database
operation so let's say we have we have a
Calcutta service who will provide the
service for me and the way I was testing
it I was using JUnit for testing and in
the before I have done with the setup of
creating a greater object and and we
have amethyst test ad which will test it
right we have used assert equals now
what I will do here is if I look at this
capital service this is a simple
interface right now what do I do is I
want to assure of going for add let's go
for another matter which cost perform
just to get that feeling of having some
cloud service so let's say whenever I
create object of calculator and if I say
perform by passing two values let's say
2 &amp;amp; 3 the output I'm expecting is
example if I pass 2 &amp;amp; 3 the output I'm
expecting is the addition of these two
numbers which is 5 a to the first number
so addition of these two numbers which
is I plus J and I plus J and multiplied
by 2 just to have that sum operation
right you can go for any operation
doesn't matter this this is why
a patient here so I want to add these
two numbers and then multiply by two now
what I'm expecting is the addition will
be done by some cloud service maybe some
database maybe something from somewhere
else maybe some API calls it doesn't
matter and once I get the addition I
just want to multiply it by two right so
whatever not - exactly but I so whatever
value I pass maybe if I pass two and
three it will multiply that by it will
add those two those two numbers and
whatever result I get I wasn't multiply
it by I that's what I want to do now of
course if you want to make it work you
have to implement this calculator
service and you can make it work right
we'll see that later the main idea here
is I want to call this perform I just
want to test if the perform operation
works or not example if I pass to entry
the output expecting is 10 right because
- what's that no it does not really ok
10 so when I say 2 &amp;amp; 3 it means 2 plus 3
is 5 + 5 into 2 is 10 right so when I
say perform it will check for 10 now
kosher has will it work let's try now if
I want to test this application and if I
right click here if I say run as
generate you can see we got some error
and what that error is it says
calculator okay something field you can
see there is no error message as such so
what went wrong
now normally when you when your test
fails it will show you that you know
because of some problem it failed but I
feel the problem is okay the problem is
we have not gated this object and via
performing an operation here is it
possible to perform this operation of
course not right because in order to
make this work I want an object of
service right in Java we believe in this
concept that we have to pay an object
before using it and we have not created
the object yet how do we do that
how can we create object of capital
service so what we have an option as we
have we actually have to call the cloud
service but then for testing that it
doesn't make sense right so normally
what we do is we
create a stub now disturb stub is
basically a fake object now when I say
fake object what it means for testing we
have to create a fake object of Calcutta
service that you just to make it more
effective I will say I will get the
audit of service using a constructor so
I will say calculator and here I will
get the object talk calculator service I
mean empty says service itself so
whoever creates the audit observe I mean
object of calculator he will provide me
the object of service for Beckett's so
what happens is if you're actually using
a cloud service you will be getting
object of this from somewhere else but
now I want to work this calculator so of
course I have to pass an object of
calculator service so I say Calcutta
service and I will say service because
that's a dependency right because you
cannot get on it of calculator without
calculus service so I will say new
Calcutta service and of course this is
not possible now because I mean you have
to define this object by yourself this
is the stuff right you are creating a
fake object okay you are creating a fake
service so it doesn't matter what you do
if you are saying I plus J doesn't
matter what you pass it will return 0
this is a fake service I can I have not
type this code I will I simply say the
control space it has given me anonymous
inner class right but then kosher ice
why okay once you got that you can
simply pass this service your job will
be done
ok you can say this is a dummy object
now because this is not actually doing
anything right it is simply performing
this operation at least the code will
run the test will run tests will pass
off we left a different thing right
let's run this once again now so if I
said wanna run as jared test you can say
this time the test was running but it
failed because of because of the value
of course white you are adding these two
values and returning 0 so that's 0 into
into 2 will be 0 right so it says
expected 10 but it was 0 at least the
test run right but the the answer you
got is wrong so this is how you create a
stop a fake object so some time when you
want to
test unit you have to create a fake
object of some other class which are
dependent this is one way the another
way of doing it is actually by using
some framework now another framework we
can we can use here is market organ we
had discussed about that right so how
can we do that with the help of market
or framework now in order to use mockito
again there are lots of advantages I can
we'll see that advances in this video
but then before using mockito you have
to make sure that you are adding a
dependency for ma market oh how do you
get the dew point dependency it's very
simple just go to mammal depository
which is mb and repository and search
for monkey talk and it will give you the
first link market of code click on that
you can take any version i'll let me go
with the safe one which is two point
eight point nine I hope it will work and
I will copy this or okay it's a video it
is compared and let's paste it here
now once you do that you can see in your
Marron dependencies it will add the
mockito dependency as well and you can
see we got mojo dependency
okay that's perfectly fine let's go back
here now how can you create an object of
capital service now what if I say market
Oh will give you this object now first
of all capital services door is an
interface and mockito says hey don't
worry you can simply use a static method
bonus MOC so mark is a method belongs to
Paquito class and you just have to pass
a type which is calculated here so
convert a service dot plus once you
mentioned that it will give you the
object can you see that it is there's no
error here it's so simple right you
simply pass the service now and it will
be done you don't have to pay disturb
now you simply get a dereference and
simply say hey mockito give me the
object now if i say right click run as
generate test again the test is running
right test is running it is giving you
fail of course because you have not
written the logic right because you
don't have to test now if you're
thinking do we are only testing calcutta
we are not testing
servus who will test this as I mentioned
this will be a cloud service so whoever
providing me the cloud service he I mean
there it is their responsibility to test
this cloud service it's not our
responsibility right but we have to
imagine that it works now question arise
how did I make it work let's say I will
I will inform my machina framework that
hey Mac you know you are doing a great
job here so you are creating a fake
object here and is working for me but I
also want to pass my test right you can
see we have a green light here how can
you make sure that your market to
understand that when you are calling
this perform by passing 2 &amp;amp; 3 it will be
calling it will be calling this method
which is ADD and I want the answer for
this because if I don't get the answer
for this of how can I test the
application right and ok so how can we
do that so what option market of revises
or market size okay you want to make
this test pass right with some values
you can do that I will provide you an
option of when so in when you can
mention whenever you call service dot
add method by passing to aintry this
will give you so it will say then return
Oh what song oh so yeah when you use
this when this is again a static method
so whatever you do is I will simply say
a video starting import here okay you
can go for static import or you can
define everything but you can import
everything by yourself but then lets you
study input I will say market out dot
market Oh dot star so I will say I will
import all the static classes so that I
will don't have to mention every time in
fact if you import technically you don't
have to mention mockito as well you can
simply say Bach and you can see when is
not working now so we said then return
so when you when you add two numbers
when you say 2 comma 3 it will return 5
you might be thinking we are hard coding
it and that's fine right anyway we know
that this service which is a cloud
service when you pass to entry it what
it on 5 I mean we don't have to doubt
that right we the only thing that we
have to check is this perform as a user
as a developer you are writing performed
here the testing method is this one
performed not the add one and with that
I have to change this name as well it's
not it's not composite event then it
makes sense right so tell me attesting
perform okay now what we will do is
every time it calls this service by
passing two and three it will make sure
that it will give you five so this this
will give you five so that when you say
5 into 2 it will give you 10 so now we
are testing perform we are not testing
add service and that's the that's the
amazing part of mojito and you can see
we outperform in the J operation and it
failed or what something went wrong
let's verify what went wrong ok this is
bit tricky now I don't know what went
wrong let me verify once I have said one
service add by passing two values it
should return a 5 and then I'm
performing this operation I'm saying
MalK I go to service ok let me try this
once again I don't know what went wrong
let's do this once again oh it worked oh
I don't know what went wrong it did
there was something sure with the
imports so I just simply said ctrl shift
or annotators done all the arrangements
for the imports and you can see that now
it is working your test is passing right
again my intention here was not to test
ad because that is a cloud service or
maybe some other service my intention
was to test the perform but in order to
test perform I was supposed to give some
values for this ad because this is some
external service right and this is how
mockito works now there is one more
thing
how can you verify example it may happen
that you are simply hard-coding it
it may happen right you are writing a
big logic and in your code you are not
even calling a service method and you
are driving this logic by yourself I
mean it may happen right now
how can you check if your application is
actually calling the box office I mean
how do you know that
this dear application actually calling a
mock service you are adding this right
because if I doubt if I love this
application everything works fine ok so
I have made a mistake in the logic is it
oh I multiplied by 2 it should be I and
this should be plus yes I am I'm hard
coding it right and I'm not using that
service so if let me just run this once
again I will say it one as long as J on
it and as you can see the test is
passing and I'm not even using the
service with I'm not used using the mock
service now how can you make sure that
is mock service actually getting used so
mockito provides you one more thing for
that what we can do is in your test
calculator after performing your assert
all those things you can actually verify
if your mock service was actually called
some it's a verify in this verify ok we
have to again studying import this one
so I will say copy-paste and this is
verified
so all this method actually studying
methods for mockito so it solidify and
here I will say verify and in this
verify I can actually pass an object I
would say service dot add and you just
have to pass 2 and 3 now what it will do
is it will check
are you actually calling this service
actually using this service which I mean
are you calling the Box service let's
try now now I forgot this application of
course your tests will pass but
something will fail and that is it says
okay have I made a mistake here again I
don't think so oh I made a mistake it
should be bracket thickest yeah so yeah
so verify so service we are calling the
add method so we sadhana has a unit test
ok as you can see the tests fail but not
with because of the values the tests
fail because you said wanted but not in
worked it make it because in your in
your code you are not actually using the
service so this is how you can actually
verify and this is not possible with
stub ok so when you are implement
your own stub when you're not using
market oh it is difficult to check if
you are actually calling the mark
service or this stop service and that's
the beauty about market oh okay you can
see that test is passing now right so
it's so simple to use market or we just
have to add this dependency and we just
have to get a mock service using this
mark method you can pass the type which
of which you want an object or the
instance fake instance you can say and
you can power you can assign the values
so when when you are calling and by
passing two and three it should return
five so that the method which you're
testing will use that value again let me
repeat here we are not testing add
method we are testing perform and that's
why we are giving static values to this
one it may be confusing at the start I
would recommend you to type this example
by yourself right on your own machine
then you will get the true power of
mockito
okay I hope it was comfortable to
understand all these things so let me
repeat so when you are saying when it
will be your calling this it return five
and you can actually verify if it is
calling you actually using your mock
service now there is one more thing so
this is how you can get your object of
mock right there's one more way you can
you can skip this part right and you can
simply write at mock right so you can
just whenever you are want an object you
can simply at mock if you have ten mark
services you can do that if you have
fifteen mock service 20 mock service
just mention the type and at the it mark
it will be done and if you run this oh
something went wrong it says your
nullpointerexception right because when
you use annotation we just have to use
because say mockito is a different
framework and we are using that in
j-unit right so to mention that we have
to specify a rule again this is not
compulsory okay you can simply use that
mock method but in case if you are
looking for annotation this is how you
do it
so we'll say market or rule it's a
inbuilt thing so it's a monkey to rule
rule equal to since we are using genuine
here so I will say mockito
mockito J unit dot rule so that you will
mention that I'm using J unit and market
together so that's a rule and that said
you just had to mention this and now it
will create all the mock service for you
this another way right and you can see
your test pass now so that's how you do
testing with J unit and mockito I get
this this is the simplest example you
can go for in normal scenario in actual
environment it will be having some
complex example you stick with the
basics everything will remain same right
so let me repeat using J unit we are
testing individual modules but sometimes
those individual modules are dependent
on some other service which you know
that perfectly you are working right so
in this scenario I wanted to test
perform but perform is depend upon ad
which is running perfectly and that's
where we can use mojito so I hope you
enjoyed this session if you have any
query let me know in the in the comment
section and that's it thank you so much
for watching and if you're not subscribe
my channel to subscribe thank you so
much for watching</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>