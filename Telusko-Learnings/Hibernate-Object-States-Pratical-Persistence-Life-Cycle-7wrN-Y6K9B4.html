<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Hibernate Object States Pratical | Persistence Life Cycle | Coder Coacher - Coaching Coders</title><meta content="Hibernate Object States Pratical | Persistence Life Cycle - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Telusko-Learnings/">Telusko Learnings</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Hibernate Object States Pratical | Persistence Life Cycle</b></h2><h5 class="post__date">2017-11-08</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/7wrN-Y6K9B4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">welcome back aliens my name is Devin
trendy in the last video we have seen
the theory of hibernate object States or
which is also called as persistent
lifecycle in this video we'll try to
implement that now before going ahead
let me show you a class here which is
laptop so basically you're walking with
this laptop class which is actually an
entity which we are using here and it
has three properties we have an ID brand
and price and we already have a table
with this name in the database and again
that is done with the help of hibernate
itself so if I open this mask you'll and
if I say this is my tea table is
basically which is alpha and then in
this we have this laptop so if I select
star from laptop you can see we have our
we have all this brand and then price
and L ID the last one is once you know a
1 1 2 del India and 0 let's focus on 51
so let's say 50 after 50 we have 51
because this huge gap between 50 and 100
so what I will do is I will add a new
object which is I will get a new object
which is which will have 51 now let's go
back to app and let's get the object of
laptop so it was a laptop L equal to new
laptop and this this laptop will have
certain values I will say L dot a set an
ID which is let's say 51 as discussed
and then we'll say L dot said brand I
will say the brand name is Sony I don't
know anyone by sony laptop nowadays but
then we have a blind Sony and then that
set applies as maybe maybe 700 others so
that's the cost you can you are ready to
pay for Sony laptops so we have all this
we have all this data now what state it
is by default in Java when you say you
are creating an object that's a new
state but the moment you assign the
values and if you take and take this
into a hibernate of consideration it is
now in transient State
now why transient is because we got this
object but then this object is not
getting stored in data database so the
moment either on this application the
data will be there in the application
and the moment I stop the application so
when I stop it will be I will lose this
data I will lose 50 when I will lose
Sony I will lose 700 I will not be
having this data so in order to have
this data somewhere I have to persist it
or you can say I have to save it
that's why we say we have so that object
goes into persistent state so I will say
session dot save and if I pass the
object L now this goes into persistent
state yeah so if this goes into
persistence it and this data will be
stored inside database but only when you
say commit otherwise it will not getting
stored so let's say I have set the value
which is set brand is Sony
but after after saving it if I change
the value if I say hey I want to change
this I'm going to change the price not
the blonde I want to change the price
from 700 to 650 dollars I want to just
give some discount and then I want to
again you said use the value so I will
make it 650 now what do you think if I
done this code what we're getting stored
what will be what will be stored in
storing in the database would it be 700
or 651 on this code now logically if it
if you think in normal world or when you
say save it should get stored right and
that should be the value which is 700
and after saving we are changing the
price which is 650 so we are not
updating again right they are not trying
to save that data again so it should be
700 but the moment add on this code and
if I go back to my school bag when she
prices the next start on laptop if i
refresh if I go up you see that we got
Sony and we got 650 that's weird we were
expecting 700 here
but why 650 is because the moment you
say save your object is still in is in
the persistent state so what they would
make whatever changes you make with the
with the I mean with the object it is
reflected in the database as well and if
you look at the console here initially
it is it is saving it is saying that you
are storing the data so insert query but
the moment you update the data it
becomes it fast the update query yeah
now so this is your this is what you say
a transient so from translate your going
into persistent state but let's say I
want to make one more change first of
all I will I will get a new object now
just since I'm making some changes I
will say let's go for a new new brand I
will say they know whoa and then deploys
for the Nova is let's say $800 and after
some time I'm making it changes to 750
dollars and then so I want this to be
so of course I want to change the
database value as well which is 750 but
due to certain operation let's say I
have done some statements here and these
are some operations and after all these
operations I want to make some changes
because I just want to change the
business model I don't want to change
the data in the database so let's say
customer comes to me and say I will
inform customer ok I'm giving you a
special discount but then that will not
be getting stored in the database so for
database for others be wise move 700 750
but for you I want to make it 600 but
the moment I say L dot set price what do
you think what will be the final price
so it will be 600 of course because it
is still in the persistent state what I
want is I want the changes till 750 I
don't want to make the changes in the
database so in that point what you have
to do is you have to say session dot
there's a method detach the moment you
say detach this object L now you'll
object L which is a laptop object is not
in a persistent state it is a detach
state so whatever changes you make here
it doesn't matter to database and let me
show you the output so if I on this code
you can see this filing the update for
us that she's not showing there it's not
fine in the update query that's weird
what's wrong okay let me just go back
there and let's see what happens oh I'm
detaching it before they come it that's
weird okay so let's stage but let's see
what happens so if I say thing okay so
you can see it is 650 oh it's not even
took it is not even getting stored
because I'm detaching it before commit
that's my bad yeah but then so do so
let's just do that after commit I would
say cut and I should be doing this
after commit and if I run this code you
can see it is updating the query only
once
and now if I if I go back here and you
can see we go at 750 we have not we have
not got 600 so that's the power of
detach in fact after commit we don't
even need detach but then let's say if
you are using or transactional things or
if you're using some other type of maybe
some other framework to implement this
maybe you have to use it detach at that
point but anyway you got the point right
so after commit all of the detach it
will come in to detach state that means
what do I make changes you
make with the object that doesn't matter
so that's how you implement these things
in fact we have one more which is
removed so you can when you say session
okay when you say session dot remove and
if you pass the entity L from the a20
database it will remove data that will
take this object into a removed state so
that's that's how it works so that's how
you can use all the states we have
transient we have persistent we have
detached and we have removed so that's
it I hope you enjoyed this video if you
enjoyed it click on the like button and
do subscribe for the videos thank you so
much for watching</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>