<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>#10.6 Multithreading |  Synchronized Keyword | Coder Coacher - Coaching Coders</title><meta content="#10.6 Multithreading |  Synchronized Keyword - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Telusko-Learnings/">Telusko Learnings</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>#10.6 Multithreading |  Synchronized Keyword</b></h2><h5 class="post__date">2018-04-09</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/HYXwIMZpBxk" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">you
now in this video we'll talk about
synchronization not exactly it means so
for that let me add an example here and
based on like that example will we'll
write our code or we'll try to
understand what a synchronization is so
let's say we have a colosseo and the
name of the class is counter okay and in
this counter we have a variable which is
count and in this we have a method we'll
say a public void increment
now what this increment method method
will do is it will simply increment the
value of count okay so if the value of
count is initially zero and every time
you run this code every time you call
increment it will increment it will
exist the count of immediately it will
increase the value of the count for that
what we'll do is we'll try to increment
the value using a main method here what
we can do here is let me create the
object of counter so that we can
increment it let's say counter c equal
to a new counter and what i want to do
now is i want to call increment so i can
simply say c dot increment and let it on
let me create the object i mean let me
print the value of the counter so it's
the system dot out dot println will say
count o+ we'll say this is c dot count
now if i run this code you can see will
be getting the output as so we got the
output as 1 so count is 1 let me take
the output window here so that it will
be very clear for us to see the output
since we are calling event only once it
is printing count 1 what if I if I what
if I call increment 2 times so it will
it will run this I it will get it will
give you the output which is 2 right
because we are calling them in two times
now what I will do is I will call
increment multiple time so let me call
increment let's say 10,000 times
opposite the count value will be 10,000
right but it stopped using main thread I
will count I will count it for two
thought I made it I will count using two
different threads so let's create a
thread and each thread will call
increment thousand times let's do that
so we say thread t1 equal to new thread
and now we know how to create the object
of thread
we can use them like special here
directly but just to make it simple I
will be using renewable object okay I
have I want to pay to I want to I wanted
to create the object of the neighbor
here and here I will create a method
which is public void one which is
compositing for us to do right and then
in here I will creat I will run a loop
which will start with one it will go
till one thousand and then will I will
say plus plus so I got a fondue so this
for loop will run for one thousand times
and every time it should call C dot
increment every time you run this loop
it will call increment so a total the
value of comment will be thousand right
let's do that let me just do let me just
say t1 dot start I will need to work now
so I'm using only one thread now and the
count 1 is 0 that's weird why it's not
working it's because it is working if
you can see if you on this code somebody
you're getting some value you can see 0
record 2 1 9 we got to 0-5 what is
happening is as soon as you say start it
is running this loop ok it will take
some time for running right by the time
t1 is busy incrementing this the main
thing is doing nothing is printing the
count here right so what we'll do is
we'll we have to ask our main just to
wait for t1 to come to this job so for
that we have to say T 1 dot join and it
might throw an exception right now it
was exception there and I feel on this
you can say record the count 20 100 so
what we are doing now with t1 t1 tour
join is we are asking our thread to wait
so we are asking about main thread to
wait for t1 to complete its job so that
that is only one thread right I want to
use this again through it now so how do
you implement second thread let's see
that so let me just say so let's say
this is t1 done let me just copy this
code and I will make one more thread
here which is T 2 so we'll make this as
t2 and this was the same thing it will
it will increment will run this loop 4
thousand times I it will call increment
and we have to say T 2 dot start and
then we have to also wait 42 to convince
job right so we say T 2 dot join
everything seems good right so if you
run these two loops it will if we run
these two threads it will it should
increment for approximately two thousand
times right so value of count should be
two thousand and if we run this chord
that's weird we are not getting two
thousand different this once again we
are not getting two thousand now why is
that the case it's because when two
threads are doing this addition at the
same time this this statement looks very
simple why this is the incrementing the
value but this is not a simple statement
count plus plus simply means count equal
to count plus 1 that means we are doing
- we are performing to action here one
is addition and second is assignment
okay so let's say t1 and t2 the running
in parallel right so t1 comes to
increment and says hey increment I want
to execute so your increment says okay
go on
so t1 fetches the value of count which
is 0 so t1 fetch the value of count is 0
it says plus 1 it is making it one now
so I the count value for t1
I mean the count value is 1 and you
assign the value of one to count so the
current value of count is 1 now T 2
reaches TT 2 says okay count give me
your value count will say my value is 1
T 2 will say okay your value is 1 I will
add 1 the value of count now is 2 so it
will assign to now T 1 will again come
it will fetch the value of comedy's to
it will assign 1 the value of count
becomes 3 and this goes on right so for
T 1 running 4,000 times T 2 learning
4,000 times in total it should be 2000
but what is happening is somewhere in
between when T 1 reaches and ask for the
value of count so let's say the current
value is let's say 600 somewhere after
600 T 1 reaches and T 1 says hey count
give me a value count says ok my value
600 by the time T 1 is adding the value
what T 2 is doing is T 2 has also
fetched the value of count at the same
time so both are asking for the value
and the value both God is 600
both has added one which which is 601
because both have six 600 both adding
one
so they got 601 and that values assigned
to count so when it should be 602 it is
601 because instead of incrementing two
times we're incrementing only once
because both are fetching the value and
both are incrementing it at the same
time this is not happening once or twice
it is happening multiple times that
means both this thread are using this
method the same time demonstrating the
issue both the threads are accessing
this method at the same time that is
what is creating the issue what I want
now is if t1 is executing the increment
method t2 should not execute this if t2
is executing this method of t1 should
not interfere that means you want only
one thread to work with this method and
how to achieve that if you make this
method synchronize that means only one
thread can work with this method if t1
is working with increment t2 has to wait
when t2 is working with the method of t1
has to wait so maximum one only one
thread can work with this
so if you're on this for now you can see
we got the count value as 2,000 let me
on this once again you've got the value
as 2,000 it's that simple so that's how
you use synchronized method so point
remember is when you don't make your
better synchronized that means your your
method or your object counter is not
thread safe your class is not thread
safe which means that multiple threads
can access the same method at the same
time what we want is we want to make
this method synchronized so that only
one thread can use it at a time so when
t1 is executing increment t2 will not
interfere so t2 will wait and when t2 is
executing increment t1 will wait that's
the idea behind synchronized methods so
that's about synchronized keyword thank
you so much</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>