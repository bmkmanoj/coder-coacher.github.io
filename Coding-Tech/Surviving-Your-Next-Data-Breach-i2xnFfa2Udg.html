<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Surviving Your Next Data Breach | Coder Coacher - Coaching Coders</title><meta content="Surviving Your Next Data Breach - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Coding-Tech/">Coding Tech</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Surviving Your Next Data Breach</b></h2><h5 class="post__date">2018-03-19</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/i2xnFfa2Udg" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">all right so are you ready for a
revelation you will get hacked maybe not
this year but your time will come don't
worry or worry I don't know which way
you prefer you see the concept of
bulletproof security is a myth it's a
cat-and-mouse game every time you come
up with a new defense the hackers are
going to come up with a counter-attack
so they're constantly getting ahead of
you and you have to keep up and
eventually they will get ahead of you
and you won't be able to react in time
and you will get hacked and your data
will get leaked and it happens to the
best of us
it happens happen to Dropbox leaked 78
million user accounts Adobe a hundred
and fifty two million accounts LinkedIn
more recently leaked 164 million
accounts and Yahoo originally announced
about half a billion accounts but
apparently there were multiple breaches
overall several over several years and
they leaked over billion user accounts
so it happens to the best of us people
with a lot of money for security they
still got their data stolen so but this
talk is not about how to prevent the
data breaches it's about how to prepare
for that money eventually happen steps
you can take now so that when it does
happen you're in a much better situation
my name is Anna Felina I'm a project
rescue expert I develop I train I speak
at conferences I have a company and I
organize two conferences so this one in
Montreal and another one in Vancouver so
that's me save a shameless plug ways
that you can get breached
of course hackers SQL injections and
other ways that they can hack you all
sorts of clever hacking techniques but
it's not just hackers so you when you
harden your security when you hard on
your application you think in terms of
malicious attackers from the outside of
the organization but you also can have
employees who are dishonest maybe they
need some money for this month maybe
they have a gambling debt who knows they
can walk away with credit card numbers
from your company so if you're storing
them in a way the
it's accessible and you implicitly trust
everyone on the inside you can end up in
a bad situation and it's not just that
you can also hire consultants and let me
tell you a story of five-dollar
consultants what is that
all right so the story goes and this is
a true story but I will not name names
it's the sort of an enthusiastic
entrepreneur and he created a start-up
in financial tech and one day he had a
bugginess system on his production
server so he went on this website where
he can hire anyone to do anything for
$5.00 in retrospect that might have been
a bad decision especially for somebody
working in financial tech and giving
financial advice the ROI on that is
dubious so he hired a guy from a country
that I will not name and he gave him
root access to his production server I
don't really need to tell you the rest
of the story right you already know all
the things that come out of it right so
so things like that happen and maybe
you're not that interpreter or maybe you
will not hire somebody for five dollars
maybe you will you will hire someone for
a hundred thousand dollars but this is
still a possibility another story that
happened to me personally was we had so
I was helping a client and a previous
consultant decided to go into the server
and cause trouble so he just went in he
had access he had he had one of the
authorized keys there and he started
messing around first thing he did is he
pulled the plug of my own connection ban
my IP address which is a static IP which
means that I cannot get in but then I
went and used my cell phone to get a
different IP address through the cell
phone log into SSH put all the security
measures in place and then pull the plug
on him to make sure that he doesn't go
away with you know any of the private
user data so things like that happened
pretty pretty often more often they
would like to admit so it's important to
make sure that for example you don't use
server passwords I'm going to touch on
security a bit for example you should
instead
use authorized SSH keys so there's this
file called authorized keys that you
should use instead of just giving
somebody a password because if you give
everyone a password and you need to not
let one person in tomorrow you cannot do
that because now you have to change the
password you have to update it with
everyone else tell them okay here's the
new password instead you can just delete
the SSH key of the person that you no
longer want to get in so let what is
sensitive data anyway there's all sorts
of sensitive data there is passwords
credit cards Social Security numbers you
have a current location of a person and
so for example when the person turns on
the GPS you can track them except if
they want to broadcast obviously people
can always broadcast their sensitive
information if they check in on
Foursquare or swarm app you will be able
to see their location that is their
choice they can broadcast sensitive
information they can give out their
mother's maiden name online yeah they
can we can broadcast all of that they
can receive a new credit card by mail
take a picture hey look at my new credit
card and post it on Twitter that is
their choice that is not your
responsibility
but you can you should still store all
your data in a secure manner or
sometimes maybe not store at all
IP addresses also in most countries are
considered private information so you
shouldn't transmit it to someone else
without prior permission from the user
so pretty much any data that you gather
about your users is sensitive and will
focus on just the first two today the
passwords and credit cards how do you
get ready for a breach well there are
three main aspects you should store less
sensitive data the less you store once
data gets leaked well there's less data
in that leak obviously but of course you
cannot just turn off your all your
computers and put them in a closet and
you know not get them on the Internet
you still have to store stuff in order
to be able to operate so whatever you do
store make sure that when it gets stolen
it is useless so that attackers cannot
cannot immediately consume that data so
things like credit card numbers or
passwords you know their passwords will
be hashed or something like that so they
cannot they cannot use it right away and
also the third thing is you have to
implement post breech procedures now
post breech procedures is something that
you have now that you can either well
you can have a written procedure of how
to do things but you can also implement
things now so that when something does
happen you can react in seconds instead
of weeks because once you have a breach
everybody will be on high alert you're
gonna have so many things to do that you
will not be able to get to certain tasks
until maybe weeks later so you have to
implement certain things now and I will
show you some examples so storing less
sensitive data in some places it is
completely illegal to to store credit
card information and even when it is
legal you have to have PCI compliance so
you probably shouldn't because if you
are not PCI compliant what happens is
that you'll be fined anywhere between
five thousand and a hundred thousand
dollars per month and you get fined by
either MasterCard or Visa anyone you
have a contract with and even if your
contract is not directly with the credit
cards you have a contract with the
payment gateway and they have a contract
with those companies and that payment
gateway they're gonna get fined by the
credit card and it will just pass this
on to you so you have to be very careful
basically you should I recommend against
storing credit card information but yeah
right you need it for recurring billing
right that is the number one reason I
get when I tell people not to store
credit cards that is the first objection
but the thing is do you actually need
the credit card number or does the
payment gateway need the credit card
number that's the difference what are
you going to do with a plaintext credit
card number there's absolutely no reason
for you to have it if you want to
display something on a receipt you only
need the partial maybe the last four
digits same when you interact with your
customers they call they said well which
card did you charge it on oh the last
four digits are these so you don't as
the company you probably don't need it
unless you're in the business of
processing payments yourself but if
somebody does it on your behalf they
need the Playtex now credit card number
not you and they have all the compliance
they have security that goes that with
that they have insurances also so you
don't have to worry about that and this
is why what you should do is use
something a vault
so all serious payment processing
gateways they have a vault and the vault
is somewhere where you store the credit
card data so it stores it for you and so
you don't have to worry about the
security of your stuff so here's how it
works
here's how volts work you the company
gather credit card information from your
clients and you don't store it anywhere
directly you send it to the payment
gateway to the vault so you don't touch
it for too long
basically just clap it and forward it
forward it there it sends it to the
payment gateways vault stored securely
and it returns it token for you and then
you can take that token and you can
store it in your database you can take
the token it can also set send you back
a partial that you can store but not the
entire thing like no CCTV no no expiry
dates no full number it just sends you
token which is like an identifier with
which you can then go and say this is
this is what I want to charge this
client so when you are ready to process
the payments all you need is the amount
and the token you don't have access to
the plaintext credit card anymore not at
any point in your life and the token
allows you to process the charge that is
the only thing it's good for so because
they have the actual number so you send
them the identifiers charging this
credit card that I gave you previously
and if you attempt to extract extract
the credit card information all it will
give back to you is a partial that looks
like this and you can still put it on
receipts you can still communicate with
a client about that but not even a
developer with full access to your
database can can get anything out of it
so if there's a
data breach there's nothing usable in it
right there's like just four digits so
back to square one but there's one thing
to be aware when you plummet vaults and
this is sessions don't store the raw
data in sessions because where are your
sessions stored either on a file
in a database so on disk in RAM but it
is still accessible by someone right so
if you store it there during let's say a
multi-step checkout process it is it is
still accessible there even if for a
short period of time and somebody can
monitor that and leech those credit card
numbers from it so in what you should do
is once the user submits credit card
information to you you send it directly
to the vault get the token and the
partial and then store that in the
session and that means that if the user
goes through multi steps and then goes
back one step where they enter the
credit card number they will only see
this they will only see the partial and
they can edit it they will never see the
plaintext they have no need for it right
you just you are secure basically in
terms of implementation efforts this is
all nice but you wonder how long is it
taking to implement the vault
well I implement on the e-commerce
solution once and it took me about five
hours toll to do the vault part and that
means reading the documentation of the
payment gateway regarding that
implementing everything testing
deploying so basically have no excuse
not to implement that it's just a
five-hour effort for one developer so
when you do do it when you do go home
tonight or after the conference I would
suggest that you implement the vault if
you don't already have that if you're
storing any credit card information do
that mention me and I'll retweet you to
spread the good word that's a deal right
okay so my twitter is a Felina so there
are other places where you can
inadvertently store credit card
information and that is in comments so
when the users complete the transaction
they might have a field where they can
add special instructions and they might
put something like please charge half of
the transaction on this credit card
expiry day CVV and the other half on
this credit card expiry date CVV and
just put it there it's like when you put
a trash can and a recycling bin you know
and people still put pizza slices in the
recycling bin you cannot really control
what people do you can only provide
instructions also it's something that
your admins can do well I mean as in
people who manage the customer accounts
it is something that they could do put
things and notes or the customer called
me and they said to change their credit
card to this so those credit card
numbers can find their way into places
where you didn't expect them to be and
that's why I would recommend that what
you do is detect those patterns of
credit card numbers and other sensitive
information and just strip it out worst
case you just put some stars and the
person who manages the account will have
to call back the customer to get that
information to get that into the vault
properly so don't let that lying around
because if it's in comments it's in
plain text then when the data gets
leaked they will not even have that
encrypted the attackers will have it in
plain text so just be mindful of that
fact now this next thing we're going to
talk about our passwords obviously
passwords you're not gonna store them in
plain text I hope you don't but also
don't just store a hash so hashes were
the thing a few years ago you know md5
sha-1 but that's not working anymore
because there's a thing called rainbow
tables and what's a rainbow table
it's basically creates a bunch of
permutation string permutations of
possible passwords starting with the
most common passwords you have
dictionaries of common passwords like
admin password 1 2 3 4 5 things like
that Jesus is actually a very common
password it's not a joke I think it's
like number three or something so yeah
they're gonna go through they're gonna
go through those permutations and they
will pre calculate those those hashes so
they'll have in one column the plaintext
and in the other column the md5 sha-1
and other possibilities and these are
already pre-calculated you can probably
download them so you don't even need the
processing power to do that but then
there's another thing so basically yeah
when they still the credit hour when
they steal the passwords they can just
look them up and they were
be able to guess which password is the
right one and something because it's a
hash you might have multiple
possibilities of plaintext passwords but
they can detect like if they have like a
40 character thing with lots of special
characters in it and the same hash also
refers to a six character password that
has just letters a good chance that it's
the other the one with the letters so
they have algorithms to also know which
hash is the right or which plaintext is
the right one for this hash and
basically yeah they just have the
plaintext again so it's not really
slowing them down now the other thing
you can do is a salted hash the the way
a salted hash in simple terms the way it
works is it just hashes the plaintext
with an additional key which is random
you take the plaintext you store the
random key you store the resulting hash
and then when the person comes to sign
in with the plaintext
they take that they tagged the random
key and they arrive at the same hash
that you have in your database for
comparison right and because you have
this additional key the number of
permutation increases dramatically but
even that is not enough because the
processing power just keeps in
increasing and people keep calculating
those things they're creating these
massive tables with all the permutations
so as I said they're always ahead of you
or they're always getting ahead of you
so what you can do is think about what
your goal is your goal is to slow down
the attacker is to make it harder for
them or longer for them to find a match
right with the hash so what you can do
is go through multiple iterations of the
hash so we can force them to instead of
hashing once you have to you can force
them to hash maybe twenty thousand times
and that is going to slow them down
for the user who logs in because you
have to calculate the hash twenty
thousand times for the user it's it's
not going to be a big deal it's just a
few milliseconds but to the person
generating a rainbow table that is
twenty thousand more times processing
power required and the thing is you have
algorithms like bcrypt that allows you
to do this repeated hashing don't roll
your own crypto use something that
exists like like big crypt and be crypt
allows you to specify
by how many iterations you want so you
can say 20,000 today and in a year you
can say well now that computers are
faster let's do it 30,000 you just keep
increasing it so you basically make it
constantly difficult for attackers to go
and generate those rainbow tables so you
can pretty much stay ahead of them so
that's it for passwords the last part is
the response plan so you need this
emergency procedures so when things go
wrong when you are breached you can
respond very quickly and here's an
example of a procedure that you can
implement step one you log everyone out
so your you are aware that something has
been leaked you can with one click you
can log everyone out and then you can
mark all the accounts as compromised so
in the database you can have a flag
saying is compromised one and when
somebody tries to login and they are
compromised because you do want to
resume operations quickly they log in
and it forces second factor
authentication because it could be the
attacker who already did you know found
the plain text version of the password
that is trying to access say your email
account and email account leads to other
private information they can social
engineer their where their way into
anything so before that second factor
authentication because trust level has
decreased because it's a compromised
account and once they have successfully
gone through that then you force a
password change because the previous
password is tainted so you force the
password change and once they go through
those procedures you can once again mark
the this specific account as no longer
compromised and you can resume
operations and this is something you can
go and implement right now and just a
final thing what else can we do to make
it harder for attackers to to use the
data once things are leaked start
thinking about every data in terms of do
I actually need to store it or do I
actually need it myself think about
emails for example why do we need a
person's email because you need to email
them okay well are you emailing them
yourself or are you using a third party
server
like mandrill or cake mail to offload
those transactional emails well if you
do then you don't need the email they
need it maybe they need the vault for
the email addresses so once you start
thinking about that in a bit more
paranoid way maybe but you know in
security it's good to be a little
paranoid so start thinking about storing
less data or offloading data storage to
other services because when you
centralize all of your data it becomes
vulnerable people get way too much in a
data breach so you want to control what
they see
so basically together let's protect that
private data once again my name is Anna
Felina I will tweet the slides and
follow my blog at a Felina comm thank
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>