<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Code Refactoring: Learn Code Smells And Level Up Your Game! | Coder Coacher - Coaching Coders</title><meta content="Code Refactoring: Learn Code Smells And Level Up Your Game! - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Coding-Tech/">Coding Tech</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Code Refactoring: Learn Code Smells And Level Up Your Game!</b></h2><h5 class="post__date">2017-09-19</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/D4auWwMsEnY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">and I have a talk for you this year's
talk is about code smells this is a term
invented by this guy so it's really
we did not plan that I would follow
Katrina but it's the perfect talk to
follow her talk she just mentioned this
guy's name it's one of the last things
she said this is Kent back
this guy's Martin Fowler he's the man
who wrote this book which is the book
that teaches us how to do refactoring
they collaborated together on the third
chapter of that book and that's why the
they want that it's like naming things
wins and then name code smells won and
so the reason you know that term today
is because of what these guys did back
in the 1990's now I wrote a book a
couple years ago before that I wrote
code for 35 years I went to my desk
every day in real code and now I don't
do that I teach instead I teach classes
in object-oriented I'm and in my class I
have occasion to ask people if they've
heard of code smells and just like I
suspect all of you every one of my
classes so they always say oh yeah we
know what code smells are and then I ask
them to list five and no one can paint
okay I can't hear you trying but really
most of you cannot I know that okay and
so we we all think we know about this
term but it doesn't mean I don't like
your code and I can't tell you why that
is not what a code smell is there is
some opinion involved but really it's
not just that it's not just so I
disagree with how you wrote your code
the standard is higher these smells
these 22 different smells all have very
precise meanings and the power the magic
if you will of this list is that they've
given things names once you give a
complex idea name if we could just all
learn what that name stood for it means
that we can talk to each other in an
unambiguous way without having
miscommunications and so one of the
things they talk about very often when
people talk about code smell is a prefix
code smell with the word bad they say
bad smells as if
but really the definition of a code
smell is that it might indicate a
problem not that it does it might and so
you don't you don't have an obligation
to filter out all the smells it's
actually important that you not and it's
worth getting its it's also worth
getting for me with code smells because
they have such great names okay look at
this list feature env that's cool I like
this one the one that needs a code of
conduct inappropriate inappropriate
intimacy speckies shotgun surgery that's
another favorite okay and so that the
problem with this list well first of all
okay I'll confess I've had I had that
book for a really long time before I
read it I had a really hard time with it
right it's one of those books it's it's
like a recipe book and I've heard it
described as a cookbook for people it
would be like reading a cookbook if you
did not eat and so I really need the
story arc and I had a very hard time
following along like persisting with a
bunch of recipes that were just like
shrug shrug shrug shrug shrug alright
but it turns out it was really
worthwhile when I finally did it and
actually Katrina made me I'd say Katrina
made me so this there's 22 things on
this list I had a stack overflow at 22
it turns out there's a guy named whose
name I can't pronounce him and I it'll
be in the credits he wrote a paper where
he group them will throw those two away
he grouped them in five different
categories and through the magic of
keynote I can do that this is the only
reason we make stalks so we can use the
effects and so here if I did let's just
talk about this set okay this is a list
of things that just do not need to be
that big long method in large class are
probably self explanatory data clump is
when you have two or more pieces of data
that always appear together you pass
them around over and over again together
long parameter list is obvious you might
only occur once but if it's long enough
it probably there's probably an object
in there somewhere and this thing this
other wonderfully named thing called
primitive obsession we saw an example of
that in the talk between just go just
gave this is when you have like a bait
an instance of a base class like a
stirring or a number or hash or marais
and you pass it around to a bunch of
objects and they look at it and decide
what to do based on something they know
about it so you say oh I got a number
it's
six so I'll do thing X so it's eight or
I'll do something else right that's the
settlor you could just send it messages
so primitive session is when they're not
the objects are too dumb that you're
passing around these things are grouped
in a category called loaders they make
code bigger than it needs to be in the
places where you use them the next group
this one these are things that these are
ideas that are available in
object-oriented programming that you can
misuse switch statements you know
they're conditionals by in normal people
talk
that's conditionals refuse request is
when it's an inheritance problem you
have a subclass that overrides a method
that it inherits from a superclass and
and like throws an exception and says I
don't implement that thing I refuse the
bequest alternative classes with
different interfaces is pretty obvious
the other thing is temporary field it's
interesting that temporary field is on
this list right temporary fields can be
really handy but sometimes I mean that
you should have made a method with that
name right why are you giving it a name
what is it about the code that you have
now that feels like it needs that name
and so these things are all grouped in a
category that he called tool abusers I
have a lot of bikes I work on bikes I
have a garage full of bikes and I'm an
amateur mechanic which means I have
amateur tools which sometimes involves a
very short wrench a long pipe and a
hammer all right and I can tell you it
almost always turns out badly if you if
you abused your tools all right next
this group this is stuff that makes
change hard so divergent change shotgun
surgery which we've talked about a
parallel inheritance hierarchies which
is pretty obvious sometimes you have a a
couple of hierarchies that each have two
sides and then when everything you
change something you got to go add or
remove in both sides of the hierarchy
these are the kind of things that keep
you from wanting to change code or make
code harder to change now notice it
almost everything I'm talking about if
nothing ever changes it's probably okay
like coded
really embarrassing code it can it's
fine to keep really embarrassing code
you should be brave about your ugly
embarrassing code because it is not
costing you money if it's not changing
and so just because the smells exists
you know sometimes you should like own
them be proud and walk away don't let
don't let people make fun of you about
having bad code this next this next
category lazy class speculative
generality data it's okay another on top
of the effects finding the pictures is
also fun classes that don't do enough as
a lazy class right doesn't justify this
existence so I'm gonna skip specular
generality for a minute data class you
know we're object-oriented programmers
classes ought to have data and behavior
duplicated code is pretty obvious let me
go back to speculative gerontology
specular generality I'm gonna ask you to
raise your hands again who in here has
ever written some code for a feature you
thought might arrive in the future keep
your hands up for a minute all right I'm
gonna out myself with you here who in
here has ever after many months of
working around that code ripped it out
and thrown it away okay we are bad
guessers and you know I love oh I love
object-oriented design it's a thing
that's really interested me but this
this thing of speculative generality
where we say I'm gonna do something
really cool in my code for some feature
that I think we might need later this is
why people say bad things about it a
little right this is what they blame it
for it's primarily things in that
category you have to be right so the few
times that you are right have to really
be big wince that way the enormous cost
of being wrong code is read many more
times than it is written the cost the
cost that we that the the reason that we
cost money is the time we spent reading
code and if you add generality you
increase the level of abstraction of
code very often that means adding levels
of indirection which humans are terrible
at and it means it every time someone
looks at that code it's harder to
understand so you we should really try
to restrain our
selves and not speculate about the
future when the new requirements come in
they'll tell us how we wished we'd
written the code and we can do it then
dispensable sorry here that's C I did
that thing with a clicker dispensable
you've all seen it now okay so we'll
move on so the last category here is
this group feature envied and
appropriate intimacy message change in
middleman feature envy is when I have an
object there Joe's down here Joe's an
object that I know about and I send them
way more messages then I send myself it
could be that I'm more tightly coupled
to Joe than I know right
inappropriate intimacy would be if Joe
had a bunch of private methods and I
reached in and got them okay that would
be bad I'm I really have I really am
sort of pushing the code of conduct I'm
sorry I hope no one who's made
uncomfortable I that message she's
there's a law of Denver those violations
all right you got dots you have you send
a message of something you know about
and you get a response back and you send
another message to that if the types
change across those dot change that's a
message change middleman is if you have
an object these send messages and its
sole person life is to Ford those
messages to somebody else maybe you
don't need that object these things are
called they're grouped together in a
group called couplers because the effect
of this is that it binds the objects
together such that even if you even if
they're beautiful even if you've tested
them even if they're little works of art
you can't ever reach in and get one out
and use it in another context they come
as a bundle all or nothing and so there
you go 10 minutes and 34 seconds
everything you need to know about code
smells ok but we're not done we're not
done because now I'm gonna talk about
refactoring but not very much because
you just sort of talk on refactoring but
there's a thing here that people don't
know that those guys discovered in the
90s that I want you to go away today
understanding and it's this refactoring
it's just like code smells have names
and they mean very specific things
refactoring have names factories have
names they're very specific and they
come with recipes not hand-wavy recipes
very very specific concrete rest
these here's one this is page 149 Martin
Fowler's book and it looks like a recipe
right it has numbers down the side
there's little optional clauses here for
situations that might be that might be
different in your case you notice that
it refers to other recipes here where
the things are in capital letters that's
another whole recipe by itself it's
recipes within recipes within recipes in
all so all of the refactorings work in
the same way but this is not something
we don't just wave our hands and say go
refactor refactoring has a very specific
definition it's to rearrange code
without changing its behavior and all
the ways in which you can rearrange code
are already written down with
instructions by people who really
thought a lot a lot about this and so
now you know that code smells have names
and they're real things Andry factories
have names and they're real things and
they come with recipes I can give you
one last bit of news every code smell
maps to the curative refactoring recipe
ponder that for a minute what does it
mean here's a cheat sheet
this one is provided by the guys at
industrial logic notice on the top the
code smell they're talking about it's
daya Klump this is a little tiny
definition of data Klump that F 81 is a
reference to page 81 in Martin Fowler's
book the three things on the bottom are
the refactoring recipes that are
curative for that code smell so this
slide I just blew it up so you can see
it it's extracted it from this PDF which
is a couple pages along it
cross-references all the code smells and
refactorings in martin fowler's book the
refactoring book and also a book by
another guy named Joshua Carey have Skee
called refactoring to patterns and so it
turns out that this is all you need to
know the problem is solved you do not
have to reinvent this wheel
and so it turns out if you just if you
just learnt all you need to know is a
few things and many of you at least my
experience the reason I wanted to give
this talk as Mike's first I'm teaching
is somehow I think a generation has
passed since all these books were
written and that people who knew to
programming in the last 15 years I'm a
woman of a certain age you can tell
right if you're new within the last 15
years you may not have this information
I'm gonna show you some code now I'm
gonna give you I'm going to use the last
I don't know another tool to spend about
fifteen or twenty minutes looking at
code and I'll show you the practical
effect of recognizing code smells in
your code and doing refactorings my
class sale is a subclass of persistence
you can think of that as active record
if you're in the back it will not hurt
my feelings if you get up and come
forward
that's the font size of my code I didn't
know is gonna be the keynote room it
just happened okay so so we have that
and let's say I have my class foo it has
a sales total method takes some params
maybe this is a controller like thing or
something that a controller calls it
knows the name of the sale class and it
knows some other things right and those
that sale understands where and it knows
that the thing that comes back as a
response from sending the where message
you know some it also knows two
attributes that are in the sale class
and those are the name of date and the
name of cost and it knows that it can
pass a date range as an argument to
where and the query will work okay
well that's fine and then someone else
comes in and does this later someone
makes bar and bars a lot like sale buddy
they want weekly totals here it takes
params if you only need a starting date
to do this so I can calculate ending
date right here and then there's another
thing here that knows where and since
some - the thing that comes back that
knows date cost takes a date range then
later so this is like agile right people
are taking stuff off the backlog this is
what happens when you don't have code
ownership and don't have oversight I
love agile I'm not saying agile is bad
but I'm saying that that I see a lot of
code that looks like this because people
solve the proximate problem and no one
has a big picture so here comes
oh yeah of course now I have expenses
find sales that's gonna happen then we
got bass and we does expense total takes
params does this that looks a lot like
the other stuff and then this method
blows up because someone passes in a
date a bad date bad string for dates
kaboom and so someone comes in here they
get they get that bug report and they
come in here and they fix it then I got
this code let's let's just stop a minute
and try to identify all of the ideas in
this one slide a very simple code
there's the idea that I can calculate a
week I know that there's the idea that
dates might they might pass me bad dates
and I can set defaults there's the
notion that start and end date go
together as a group always when I need
it there's the idea that I haven't I no
messages that I can send away to sale
and that other object I know the name of
that that attribute and I know the name
of this attribute so I got all this
stuff it's mucked up a lot of different
ways here and it's still not so bad
right if nothing ever changes I don't
know maybe you should walk away but
here's what happens in my life this is
when I go out in the wild I look I often
I spend time with businesses very often
that or have been successful so that
means that five to six or seven years
old and they have enormous code bases
that they hate right that's why they
call me that's where I go I mean you can
imagine right so if your code bases at
home feel big and embarrass you it is
probably because your business has been
successful like you it's just the way it
is if we live long enough the chaos
accumulates and so here what happens in
these situations is after you have a
funda Barnabas and someone comes and
makes a Larry and curly and Moe and they
do kind of same thing right and then
someone does a fee fi fo and then your
code looks like this and eventually
through the power of keynote
you have duplication and message changed
a constant you have to do shotgun
surgery and if you get that wrong
something breaks in production and it
all the validation is different in
different places and all the defaults
are different in different places and
you find yourself unable to understand
this code it feels like the the
accumulation of simple problems has
created in an overwhelming mess and it
feels like you need to understand
everything in order to fix anything
and I can tell you from personal
experience that if you try to attack all
the problems at once you will never
finish it is not possible just to clean
up the whole mess at one time you can't
tell me shut the doors we're gonna do a
big big two months refactoring it'll be
fine
like that goes that goes over really
well with the people that pay the bills
so what we need is a way to reach in
here and somehow see all right we need
we need a way to pull one problem out
and fix it in confidence that it'll work
and that's where code smells come in
we're gonna do data Klump we're gonna
find a data clump and we're gonna fix it
with extract class it's gonna remove
those three colors here's the data clump
this is behavior that goes with that
data
this behavior does not belong in bard
baths it belongs with whatever object I
should make here and I'm gonna skip the
I'm gonna spare you the refactoring
because really you can look it up and my
name's suck sorry
so here's date range it takes two
arguments notice how to set defaults has
two methods one that returns a range
when they're returns a week range this
is an object that stands in for the data
clump I could use it in that place and
the way you use it is like this
so in foo I'm about to make this method
more complicated which is why people
complain about o of let's do it okay I'm
gonna get an object I temporary variable
it's a temporary variable that's a code
smell and then I'll just plug it in
right there if you run flog on this it
got worse I have a new I introduced a
whole new class and this method is
longer but watch this now this one okay
well I need that anymore I can't do it I
got this and the other one I don't need
that anymore I just do the same thing
now I got this and so these three
methods there's there's a data pump
right there the cool thing about data
clumps is that if you've taken if you
find the data con you isolate them you
make objects for them the behavior will
coalesce into the object it's like a
Field of Dreams kind of thing all right
if you build it they will come and and
what that means is that you can use date
ranges everywhere and get consistent
behavior throughout your apps their
weekly range all the validations work
the same in every place all the defaults
work the same in every place if you
change it the change goes everywhere and
everyone in your app knows sees this
they would prefer to do this rather than
to roll their own in every situation you
guys have tons of data clumps in your
app if the only thing you learn from the
stock is to going to make objects out of
them it's a big win all right but let's
do more there's a message chain here oh
I hate this message chain
I so hate it and I'm gonna have to get
back to my notes because I wrote a lot
of things do about it so what I see this
everywhere right I am way out in my own
objects fune bard bass and I have a
message seen that reach reaches into my
persistent object and then sends
messages to stuff it gives me back it's
okay for my class to know things about
sale but is not okay for my question
know things about things that sale knows
about and you know it's it's really hard
I find it hard to convince people about
how bad this is and I drew you two
pictures two completely different
pictures to try to express the same idea
here's the first one this is about the
message passing so I got my guy foo
there's that sale thing over there and I
send where to sale and then sale
inherits from persistence an active
record for you guys you can fill that in
and so that message chases up the
hierarchy chain and then behind
persistence is this whole big enormous
cloud of code that somebody else wrote
and gave us for free all right we love
them for it but up and there somehow
there's a list and there's a bunch of
other stuff there's all kinds of things
that happened back there eventually
somehow persistence in some message on
our I don't worry my pretty little head
about what that message is
and then some comes back I get this list
back it comes back to sale and then
returns it back to fill and then the
next thing foo does a sinner message all
right that's what the message passing
looks like now I'm gonna show you this
picture in a different way this is how I
think about so that's how I think about
it when I'm thinking about messages
here's how I think about it when I think
about testing
I'm trying says food food has
collaborators knows about date range in
it knows about sale these are the
immediate things I can put a ring around
these objects when I'm writing the unit
test for foo I have to get instances of
those collaborators and set them up in
order to make my test run right that's
how I setup different contexts however
here in this case foo knows about that
something that's not a client not a
direct collaborator mind it's a Clair
it's the next ring out it's in the next
circle that's where the dot is every dot
jumps a ring here and so what I did
what's what's what's happening here is I
know about my collaborators
collaborators and if you do this you've
probably seen the effects of this in
your code if you don't want to run the
database query here you have to create
stunts you have to stubbing stubs or
mocking mocks or in any situation where
there's a message change sometimes you
get in this situations where you're
trying to set up a test and you have a
million objects right you have to
instantiate a bunch of things it's this
kind of message scene thing that's the
problem
if you do that you're gonna hate
yourself and I'm gonna go a little bit
more into testing about this in a minute
but first I'm gonna just gonna fix the
message change it's really easy to fix
this so I got that problem all these
things they look just about alike the
problem here is that there's a concept
that doesn't have a need that's what
happened I have this duplication there's
an idea that underlies it and I haven't
given it a name now one of the things
that happens a lot of times when you see
this is that there's a method name or
the repeating prefix or suffix and when
you see that what you know almost
inevitably you have an object that's
trying to get out and so what this means
is that I can hide the delegate by
putting a total method on sale it's as
simple as that right I'm gonna
right my own method and you would
probably use a name scope for this all
right I'm gonna write my own method I'm
gonna put it on that class and then I'm
just gonna change this to send total
it's gonna happen on expense also of
course so once I'm done that I end up
with this code and the there's no
there's no law of Demeter violation here
I don't have a message chain up there
and so I fixed it here we've hidden the
delegate and now I want to talk a little
bit you know Justin Searle who's here
somewhere blessing him gave a talk a
couple of years ago I don't know how
long about about how much reality you
want your tests and it I reckon I can
recommend it to you if you haven't seen
it it's a couple years old now he can
probably tell us what year 2013 look up
Searle and what's the name of it he
doesn't even budgeting reality okay so
so let's look about let's look at the
kind of tests you could write for this
code you could do well okay so I know
I'm sending total to sale
right foo is really mine sale is sort of
part of the framework and sort of mine
right it it made a devil's bargain when
it when it inherited it off persistence
to for the benefits that would get to
pay the price of that dependency right
I'm happy with that bargain here's a
test I can do up a new foo I can send
the message I can check the output that
comes back this runs the database query
I'm a long way from the database foo is
not a subclass of active record of
persistence but it still ran and ran an
entire query at this point and if you do
this in enough of your code some of you
have probably already had the experience
I'm gonna look at your faces and see if
I can tell who you've had the experience
of your test suite running more and more
and more slowly as you get more and more
and more code and then finally here's
what happens it falls down people quit
using it if you want to refactor if you
want to either kind of refactorings that
katrina was showing you you must have
unit tests that run quickly and if you
couple the unit tests for these objects
that are far away - if you could be a
couple unit test for your objects -
behavior that you don't own that's far
away that's very
slow you were going to be unable to
refactor with green as a wallet your
back and so it's really really really
important we want your test Suites to
run but even more than I want them to
run quickly
it's complicated let me just go on I was
about to diverge from my presenter notes
which is always a bad idea
so that so the problem here is I'm glued
to this class I'm glued to sail I know
the name of this consonant inside my
method and I could instead depend only
on the name of the method the the the
message I'm going to send I could do
that by injecting a model now I I am NOT
unaware of the dispute that we sometimes
have about dependency injection but I I
think it's great and I'm gonna try to
convince you that you should be using it
more if I do that then I can now do this
I don't really think I'm not very
attached to sail as a class name I don't
really care I think I'm talking to a
totalizer Bowl and if I decide that I'm
gonna do real oo and think of objects in
terms of the roles that they play
instead of the class they are what it
means is I'm very comfortable with this
idea of decoupling myself from constants
and injecting players of roles if I do
that I can make a no I can make another
player of that role that in my mind it
is equally valid it is just as good all
people all things say I polymorph eyes
everything that implement influence this
message is equally good the same thing
in my eyes and so in this case what I
can do I'm just gonna I'm just gonna
clear a variable there to make that a
little simpler what I can do is get get
an instance of that model and inject it
in my test and then I have to start that
the right answer comes back this is fast
it's really fast now what does it prove
I know people many people are
uncomfortable with this so let's talk
about what this what it means to
do this test this test does this just
proves that my method if it's injected
with a total lot total izybelle some new
influence the total method will call
that method and return the result it
gets back that's what got proved here
what it does not prove is that database
cruising rails work okay it does not do
that but let me ask you the rails
framework has thorough and exhaustive
tests for whether or not their database
queries work in addition my sail class
the cell class is a subclass of
persistence it may be that I have a test
on total over there that actually runs a
query but it is not necessary for food a
jump across this message chain and do
database quick jump across the network
and do database queries at the other end
I see when I travel around slower any
tests are killing people and I think the
tests are running so this test I see run
slow for two main problems the first one
is this message chaining if you have
message changing your code if you commit
demin or violations it means that you
have to you have to new up the whole
network of objects and run all those
messages when you're on your tests and
that's gonna be slow it's gonna be hard
to understand and hard to maintain so
you should hide the delegates you should
hide the message change with delegates
the next thing is even after you've done
it which we did here it's possible that
you are tightly coupled to something
that's really slow it's really slow and
if you tightly couple yourself to slow
things and don't give yourself away to
substitute other faster players of those
roles you are doomed to slow tests now I
realize it is possible here to stub in
in sale right
I could stub that method but I and it
does work but I prefer this and it's
full I have a I have a reason right it's
not just that it I like this code better
it's that this makes you think of those
objects as players of the role not as
instances of their class I can use this
to this totalizer will double any place
in my tests where I want I could use it
over the expense test - it's a really
different these are it is not the
same thing to inject this object and
break the coupling stubbing in your test
is not equivalent to injecting the
object and breaking stubbing this is a
very much more powerful idea that will
improve all of your code not just make
that one test faster so there's one more
thing let me see how I'm doing time
we're doing great okay so though I'm
gonna do one more code refactoring
before I finish once I've done that now
that I'm here I have the duplication
here there's a thing called pull up
method pull it up into the superclass
I'm not gonna break open active record
and monkey patch it with total it seems
like a bad idea doesn't but we can use a
module here we can put that right there
and then notice what I've done the code
that I put in the module does not look
exactly like the code that I'm promoting
from these subclasses I did
I added some indirection I injected this
is just like what I just did with model
equals sale in the last example the
things that were I knew I had concrete
dependencies on my class I am now
injecting as the variables and setting
defaults this this is it so it's exactly
the same idea right this gives you
flexibility without adding much
complexity now there's a there's a name
for this code smell it's called
speculative generality right I just did
it I know I admit it all right but
here's the thing if the methods are
short so that like what we want the
problem with speculative generality is
you're wrong and it costs you money
because it increases the complexity of
code in the meantime when you try to
read it and I start to you that at least
for me I know it's partly what you're
used to for me my methods are short and
I routinely inject the dependencies and
so I do not find I find that the
increase in flexibility is more than
outweighs the increase in complexity
this does not feel very much more
complex to me then it's it's way more
useful now anybody can call this method
on a date that it would on any attribute
and some any value and so we would use a
module okay wait I just put that in this
morning which is why I didn't it was on
the side
penisy injection is awesome and you
should be using it so we can do that use
the module just like there so there we
go and so that's it if you're not
intimately familiar with code smells you
can move yourself if you're waiting to
move up to that next level of
programming to make that transition to
being to the next level proficiency the
way to do it is to go learn code smells
and to learn those recipes for
refactoring these ideas are not new
they've been around the book that book
was written in the 1990s and I know that
many of you here probably began
programming since then like for some of
you this book is older than you are and
so you might have the sense that it is
part from the old testament of
programming right but it's it's a it's a
body of work that is practical concrete
advice about how to write code and if
you're unaware of it you should go learn
it many problems that we have that feels
uninstrumented can be solved by purely
mechanical operations in the cool thing
is it doesn't take the fun out of
writing code it's not like there's
nothing left for you to do what it does
is it removes the tedium safely so that
you can concentrate on the harder
problems so if you learn when you learn
code smells it's like putting on glasses
right it turns that mess into something
like this and following the smells let
you make straightforward easy to
understand objects that are easy to test
in a pleasure reuse
wait for it so why are you running coach
smiles you should look at reek
it's Peter here maybe not okay this is
the notice they're wonderful icon is
that cool or what
so reek is a static analysis tool that
you can run against your code that'll
tell you what code smells you have so
you don't even need to really go figure
it out you can just run the name tool on
yortuk sorry I have a policy never to do
that from stage you can run this tool on
your code and it will tell you what to
go look at so smells aren't a bad thing
they're actually great and they're all
over our code but you have to kind of
lean into them like I okay I have a new
puppy and if that were my puppy he would
reach in and bite off one of those
petals and you should do it too right
it's time to learn more about smells
they're not bad they're just information
and many as much of the information is
neutral if you want if you're trying to
lose weight
maybe you should avoid pizza if you've
been on the like button long bike ride
it's the best smell ever so when I look
back at my old code code I wrote three
years or four years or five years ago
it's really common for me to look at the
code and see what full wrote this it's a
wonderful thing about our jobs it's the
very best thing right what job can you
imagine having can you imagine having a
job where you were no better today than
you were five years ago it's such a
depressing thought I love looking at my
old code and hating it because it means
I'm better means I've learned something
since then and what a wonderful thing
that is so I started this talk with a
cup of coffee and I'm gonna in the same
way right it's late I know you're tired
props is probably not the best time to
go drink coffee right now but tomorrow
morning when you get up it's gonna be a
great smell go learn the code smells and
level up your game thank you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>