<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Yes, It's Time to Learn Regular Expressions | Coder Coacher - Coaching Coders</title><meta content="Yes, It's Time to Learn Regular Expressions - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Coding-Tech/">Coding Tech</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Yes, It's Time to Learn Regular Expressions</b></h2><h5 class="post__date">2017-12-24</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/pcCUbnwN96A" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello hi I'm al Swaggart I'm probably
best known for writing Python books
including one called automate the boring
stuff with Python which is released
under a Creative Commons license so you
can read this online for free you can
check out the book and also my slides
from bitly /yes regex if you want to
follow along with the slide deck
I really encourage you to release your
own content under an open license like
Creative Commons one of the benefits
that I have is that I can take a look at
my web traffic and I noticed that the
regular expression chapter in this book
has a lot of traffic so I thought hey
this would be a good idea for a talk so
regular expressions are kind of this
intimidating topic a lot of software
developers pretty much put off learning
it for most of their careers
it seems really cryptic there's a bunch
of weird punctuation marks that have
special meaning it can be kind of hard
to learn in fact just 20 minutes before
this talk I overheard somebody in the
hallway say this quote and so I had to
update my slides with that but in
general their regular expressions are
really powerful if you have to do text
pattern matching and I really encourage
you to learn them and so yes it's time
for me to start this presentation which
is entitled yes it's time to learn
regular expressions so the first thing
that you'll learn is that they're also
called read checks for short so here's
two numbers actually it's one number and
one of these numbers is a phone number
and the other is a is the population of
Asia so which one is which well if
you're like me you've memorized every
single American phone number that exists
and you can tell that that top number is
one of them no that's not how you
actually do that at all you know it's a
phone number because you know a phone
number when you see it and you know when
you see it because you know there's a
specific pattern that the phone um that
all American phone numbers follow it's a
few digits for the area code with dashes
in the middle of it so that's what
regular expressions do you can specify a
pattern of text that you're looking for
even if you don't know the
numbers or the exact text that you're
looking for and it's really easy Python
makes this really simple it's just about
three lines of code the first is to
import the regular expression module
which is import re then you want to call
the compile function and pass it your
regular expression pattern that you're
looking for then you're gonna call the
search method on the regular expression
object that that returns and you know
pass it the haystack string I call it
the haystack string if you're looking
for one string inside of another I say
you're looking for the needle string
inside the haystack string and that's
gonna return a match object and you call
the group method on that and that will
print out the exact text that you're
looking for so did I say three lines I
meant four lines but it's still
basically just three lines of text
compile search and group and also if
you're busy scrambling to write all of
this down remember you can download
these slides at fitly slash yes right
jex so just calm down don't stop taking
notes and listen to my soothing voice
let's focus in on each one of these
parts so starting with compile and this
regular expression string of the pattern
that you're sending to compile this is
the main complicated part of pythons
regular expressions figuring out the
syntax for this so let's go back to that
phone number example what exactly is a
phone number how do you know a phone
number when you see it well it starts
off with a digit character which is one
of the ten numerals 0 through 9 followed
by another digit character and another
digit character and then a dash and so
on so we need to translate this into a
regular expression string in the regular
expression syntax and that's what we're
gonna pass to compile remember there's
compile search end group so we're gonna
use slash D which is the regular
expression syntax for a digit you want
to really pass this as a raw string
because otherwise if you don't have a
raw string you're gonna have to escape
that slash and you're gonna have all
these slashes in your regular expression
string so I tend to like to send raw
strings always to the come
I'll function so this slash D will match
a digit character and our phone numbers
are gonna have three of these for the
for the area code followed by a dash and
so on this is the regular expression
string to match a phone number after
that we get the regular expression
object and we can call search on that
and pass it our haystack string this is
the string that we're searching for that
pattern we're looking for and it will
return a match object and it'll return a
match object if it finds the pattern
otherwise it'll return none so we have
to check if the match object is none or
not and when we call group on that match
object remember a compile search group
that's going to print out the actual
text that matches the the regular
expression pattern that we were looking
for just like that now this seems I know
I said that oh it's a lot easier than
you think this is still kind of
complicated
remembering compile search group if
you're just calling the fine string
method that's a lot more straightforward
it's just one line of code but imagine
if you didn't have regular expressions
to do this fine phone number example you
would have to write Python code that
looks like this which isn't that hard to
follow but it's a lot of it and it's
really gnarly and phone numbers are
actually pretty simple patterns once you
get into really much more complicated
regular expressions the Python code that
you would have to write to do the same
thing as a small regular expression
would just explode and across pages and
pages of text and we don't want that so
let's examine that /d thing that I was
talking about earlier that that matches
a digit this is something called a
character class it's it represents a
range of characters or a class of
characters that you're looking for and
slash D is the one saying I'm looking
for a digit one of the numbers there's a
few other character classes there's /w
forward characters this is letters and
numbers and I believe also the
underscore character
there's slash s for space characters
like space and tab and newline and
there's also the capitalized versions of
these for everything that's not a digit
or not
word or not a space character character
classes are how you specify what exactly
you are looking for so whenever you're
searching through a string try not to
think of the actual semantic meaning of
whatever text you're looking for just
consider that string to be a sequence of
symbols that you're looking for and
these character classes match a certain
group of symbols you can also create
your own character classes by putting a
bunch of characters inside the square
brackets so if we wanted to say create a
character class that matched all the
vowels in the English language we just
type a AEIOU in lowercase and uppercase
inside the square brackets and now we
have a character class matching vowel
characters we can also do the same thing
as the the uppercase version of those
previous character classes by just
adding a caret character to the very
front of this character class and now
this is matching everything that's not a
Val character so that's gonna be
consonants it'll also be something like
punctuation marks or numbers that's
something that you have to keep in mind
it's everything that is literally not
those 10 characters and we can also have
ranges of characters if you want to
match say all 26 letters or all 10
numbers or all or both of those things
you can just use a dash character to
have say 0-9 and that's going to be all
10 characters and this character class
basically does the same thing as the /w
character class it's matching all the
numbers and letters so in these examples
we had the caret character at the very
beginning or those dash characters we're
not literally looking for those
characters punctuation marks in regular
expression syntax tends to have very
specific meaning so if we're actually
looking for any of these punctuation
market characters just be sure to act to
escape them with a backslash in front of
them so if say we wanted to create a
character class that matches open and
closing parentheses we can just add a
slash character in front of those
parentheses and now we have a character
class that matches the set of
parentheses either the opening or
closing
characters so character classes as I
said this is what you're looking for
inside of your regular expression that's
how you tell Python I'm looking for
these characters you can also specify a
quantity of these characters we kind of
did this with a phone number example
just by repeating the slash DS over and
over again but there's a shortcut for
this you can use curly braces and a
number in between the curly braces to
say hey I'm looking for three of these
digit characters followed by a dash and
so on for the rest of the phone number
example this matches the exact same
thing as the previous regular expression
but it's a bit more compact and here's
the pattern that we're following right
here we have slash D that's the
character class that's what we're
looking for coming first and then after
that we have the quantity that we're
looking for you're gonna see this
repeated over and over again what we're
looking for and the quantity that we're
looking for and that curly brace three
for matching three of the thing that it
comes after is really handy but there's
a bunch of these others and they're a
huge list of punctuation marks you don't
actually have to memorize these very few
people do memorize these you'll just end
up going back to a cheat sheet or
looking them up in the documentation but
you have all these punctuation marks
that mean things like hey I have slash D
I'm looking for a digit and the question
mark which means I'm looking for zero or
one of these digits or the plus sign
that means I'm looking for one or more
of these digit characters you can change
the character class that you're looking
for - and suddenly it's you know I'm
looking for a zero or one space or I'm
looking for one or more spaces or use
your own character classes like we did
with our Val example now we're looking
for zero or one Val's
and one or more Val's all those
punctuation marks you don't have to
memorize them right now just remember we
have character classes at the first part
that's what we're looking for
followed by the quantity and now for
something completely different so
Japanese words are composed of letters
and Japanese letters usually follow this
consonant vowel combination so take a
japanese word like sayonara it's made up
of four letters each of those are a
consonant and vowel it's
councilman Val consonant-vowel its
following that pattern we can create a
regular expression that will then match
this remember we have a character class
for matching vowels and then we also
have that caret one for matching that
everything that's not a vowel
technically this will match not just
consonant letters but also numbers and
punctuation marks we'll just ignore that
for right now but anyway say we wanted
to match a Japanese word which is made
up of several of these Japanese letters
we can have the plus sign that means one
or more of the thing that comes before
it but technically this isn't going to
work because remember it's just gonna
match only one of those consonant
patterns we need to specify how many of
those that we that we want to match but
we also sort of want to group these
together so this regular expression is
gonna end up matching something like but
if so it's a consonant character
followed by a bunch of vowels and it
doesn't have to be the same valid can
just be any Val that's the character
class that we're looking looking for one
or more vowel characters I'm not even
gonna attempt to pronounce this word but
what we want to do is sort of just group
together that consonant and Val together
and then have the plus sign mean one or
more of these things so we can use
parentheses to group these together and
form just sort of one giant character
class out of all these other character
classes it's still the same thing we're
specifying what we want to look for
followed by how many of them that we
want to look for so this is gonna match
something like saw saw saw saw saw saw
saw or it'll match an actual Japanese
word like sayonara so this would be a
pretty good point for me to
automatically end my talk on sayonara
but actually there's a little bit more
we're gonna go into just a small example
right here with reg X's for a comma
formatted number so if you're an
American you usually split up your
numbers into groups of three with a
comma in between them in between them so
let's create a regular expression for
this we have to figure out what exactly
it is that the pattern that we want to
match here is so it's generally going to
be something like one two three digits
for the
part and then followed by groups of the
sort of comma and three digits
afterwards and we'll have you know zero
or more of those groups so a number like
twelve is gonna have zero of those comma
groups because there's no commas or a
number like twelve thousand will have
one of those groups and I could just sit
here and show you the regular expression
for this but there's actually a lot of
nifty tools online that you can try out
these are called regex buddy websites or
regex tester websites and now i'm gonna
do something that is highly ill-advised
for anybody doing a presentation and
that is a live demo in which anything
can go wrong especially one that
requires using the internet so hopefully
the Wi-Fi is gonna hold and I can just
use this website so this is red jax-ur
com
technically it's using JavaScript style
regular expressions but regular
expressions across multiple programming
languages are so similar that it's going
to work for Python as well so let's
let's try out let's say I have my text I
have a 64 million year old egg we want
to find a regular expression that
matches let's see how much I can move
this not bad okay there we go I want to
write write a regular expression that
matches that comma delimited number so
let's see what was this this was a digit
and then I want between 1 and 3 of them
so I'll try a curly brace 1 comma 3 and
you can see as I'm typing it in real
time these websites are gonna update and
show you exactly what they're what
they're matching so these are great if
you're trying to construct a regular
expression and you sort of want to just
build it up step by step it's a lot
easier than just running your code
seeing what it matches then trying to go
back and change it this is a much more
direct method so let me finish this up
let's see we're gonna have that group of
the comma three-digit thing so I'll need
a nurse slash D and then a 3 afterwards
wait
great and I can see well oh this isn't
quite working because it's not matching
everything right here and then we'll
remember oh right I wanted not one of
these comma groups but zero or more so
I'm gonna add a star to mean zero war
and I can see okay
it matches the comma-delimited number
all right hey I got through the entire
live demo and nothing went wrong
yes live demo completes every time I do
a live demo and a talk I feel like I'm
like angering the live demo god who's
going to start chasing me from
conference to conference waiting for me
to let my guard down and just ruin the
next live demo I try right not today
okay next pipes this is a way that you
can sort of provide alternate groups to
choose from and the example that I want
to use is let's say we want to create a
regular expression to match sentences of
Monty Python words and Monty Python
words I'm gonna use underscores instead
of spaces just make them more visible
and just to make it easier and more
consistent all the Monty Python where
it's always end with an underscore but
Monty Python words will be something
like again spam or egg bacon and spam or
egg bacon sausage and spam or spam egg
spam spam bacon and spam that one only
has a little bit of spam in it so you
might think okay let's create a regular
expression we're gonna call compile
that's the first step of compile search
group and let's see we'll put these in a
group for each word and we'll have that
plus sign to mean one or more of this so
we're gonna match one or more egg and
one or more bacon except that's not
gonna quite work because what if bacon
comes before the egg and what it's
sausage comes before egg or bacon or
something like that this isn't actually
going to work as a regular expression we
we just need some way of choosing one or
another and we kind of do this if you
think about it with character classes
character classes say hey we're gonna
match a
or E or I or o or you except character
classes only worked with individual
characters we would rather we want to
match groups saying egg or bacon or
sausage etc so we can do that with the
pipe character which means or if you've
ever programmed in a language like
JavaScript or something else they also
use the or character for the boolean or
operator so it's a bit easier to
remember that way so you can just put
the pipe character in between these
groups to say I want to match egg or
bacon or sausage or and or spam and then
put all of those groups into one giant
group and then add a plus sign at the
end so that it's matching one or more of
those and that will match something like
spam spam spam spam spam spam spam
really stops sounding like a word if you
say it over and over again and the last
bit that I want to cover you actually
this is pretty much all you need for the
basics of regular expressions character
classes quantities groups pipes that's
essentially it this thing regular
expressions that you've been putting off
learning for years and years and years
it's actually not that bad the rest of
this stuff is just gravy but it's pretty
cool I really love this the dot which
basically means match any character
except for the newline this is great
because it's a great character class you
can also set a flag so that also
includes the newline but you can combine
it with the star character from several
slides back that means zero or more and
when they're powers combined they form
the dot star which just means match
whatever there's a second one to this
that is dot star question mark which
means match the least amount of whatever
because dot just means match whatever
character and we're looking for zero or
more of whatever so you can match
whatever this is great you can use this
in a string like looking for text angle
bracket in-between the angle brackets
angle bracket this looks a lot like HTML
and so let's say we want to get a
regular expression that matches this
HTML like text that's pretty simple we
can just have angle bracket dot star
quest
mark angle brackets so we're just
looking for whatever text in between
angle brackets the least amount of it
and then that would match a string
that's sort of like angle bracket to
serve humans angle bracket but remember
there's the one with the question mark
that's the least amount that's the non
greedy version and then there's just dot
star which is the greedy version it's
going to try to match the longest bit of
text and that's when you find out the
dark secret that really the string was
angle bracket to serve humans angle
bracket for dinner angle bracket ooh
plot twist and the reason this happens
is because dot star the greedy version
is going to match the first part to
serve humans and that technically
matches the pattern that it's looking
for but dot star is going to continue
looking forward to see if there's an
even larger string that it can match so
if you want to match the most amount of
text for this pattern you can use dot
star and the least amount you can use
dot star question mark that's pretty
much hit the you now have this solid
foundation you can go into the Python
documentation and sort of look up all
the rest of the neat little tricks that
you can do with regular expressions I
kind of just want to end on some best
practices some limitations to regular
expressions the first of which is really
important and that is don't ever parse
HTML with regular expressions I know I
went back into this slide and said hey
that looks like HTML don't actually do
that with regular expressions you'll end
up trading a regular expression that
sort of matches HTML and then you'll
realize oh wait it also needs to be case
insensitive so then you've changed it a
little bit and then you realize oh wait
there's some attribute that's out of
order or something weird like that and
you'll have to change the regular
expression you'll end up making a
regular expression that doesn't really
match HTML instead what you should do is
use an HTML parsing tool like
beautifulsoup
that module same thing with json you
want to use a json parser to match json
text the second thing is i used to use
this as an interview question come up
with a regular expression that matches a
strong password you know something that
has lowercase and uppercase letters and
numbers and special characters the
regular expression to do this turns out
to be this huge giant thing especially
because you have to get the all possible
order
of lowercase and uppercase and numbers
and everything and it's really awful if
your regular expression starts blowing
up into this giant thing it's probably a
good time to just break it up into
smaller regular expressions you can just
use multiple regular regular expressions
on the same bit of text something that
looks for a lowercase letter something
that looks for an uppercase character
and then finally this is kind of going
into the computer science of regular
expressions and regular languages
matching nested parentheses regular
expressions can't do this matching
parentheses rely on having the same
number of open and closed parentheses
they have to be in a certain order and
technically regular expressions aren't
turing-complete
which is a computer science term that
I'm just gonna gloss over but you can
think of this it has regular expressions
aren't programming languages they don't
have flow control or loops or variables
or things like that
and the reason I know this is because at
my last job we're doing a code review
for some web app and the user can type
in a regular expression into the text
field we wanted to validate that make
sure they were typing in a valid regular
expression and a co-worker said hey can
you actually come up with a regular
expression that matches regular
expressions and I left forward and said
no you can't because regular expression
strings have groups which require nested
parentheses and that requires a stacked
data structure which means it means it
requires a context-free grammar and
that's beyond the capabilities of
regular languages and I was so excited
because it was the only time I've ever
used my computer science degree for
something in the real world but yeah so
that's just some best practices with
regular expressions they do have their
limitations but they are so incredibly
powerful and useful to have so I
definitely encourage all of you to keep
reading about that you can find more in
the Python documentation I also have
them in the in chapter and automate the
boring stuff with Python which you can
read for free online but I really advise
that you go ahead and whatever you do
find out more about regular expressions
and use them because yes it is time to
learn regular expressions thank you very
much</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>