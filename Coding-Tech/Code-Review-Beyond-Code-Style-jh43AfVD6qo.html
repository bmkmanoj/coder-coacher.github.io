<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Code Review Beyond Code Style | Coder Coacher - Coaching Coders</title><meta content="Code Review Beyond Code Style - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Coding-Tech/">Coding Tech</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Code Review Beyond Code Style</b></h2><h5 class="post__date">2017-12-22</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/jh43AfVD6qo" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so what is code review let's first
outline the subject a bit a code review
is someone who wants to make go change
but he doesn't he isn't allowed to make
it straight to production so what he or
she does is make a couple of changes and
show it off to a peer another programmer
or someone else inside the company or
outside a company doesn't matter showing
your code before it gets merged to other
environments like staging or production
that is a code review um who can do the
code review someone else inside the
company could be a consultant outside of
the company could be the CTO could be
another junior def could be anyone
basically not all code reviews have to
be done by the city or the lead
developer so what does it look like you
push some changes to github or to
bitbucket whatever you want and someone
else is going to review that he or she
is going to look at the commits look at
the individual lines that have changed
and provide some feedback right it's a
feedback loop based on that feedback the
programmer will reply to some answers
and make yeah replied some questions
with some answers why did I do this why
did he do it
we died why did I do that and maybe
English also pushed some more commits to
fix stuff and that's a circle so it's a
basic feedback loop if you make the
feedback loop fast enough it feels like
pair programming actually so in the end
the reviewer will say oh well this is
finally in a state state that I want to
merge this in to develop branch or
master branch and push it out to staging
or production so that is approving not
everyone has the luxury to work in a
team with multiple people so you can
also do a code review or your own code
before committing code you can do git
add - p2 review individual chunks of
changes before you actually commit them
so that's also pretty useful it's a
one-man show or one-woman show
you can also work with get branches and
github and make your own bully quests
before merging them if you're if it's a
one-woman show or a one-man show
basically you review your own your own
code in a different environment on a
different screen than your IDE that's
also useful that helps with pointing out
some failures or some flaws in your own
code but why would we spend some time on
that why wouldn't we just push to
production and if it works on my machine
works in production right well basically
before I started doing this talk I was
at a meet-up and I was talking to some
person and the person wasn't happy with
his current workplace and basically
everything he said why he hated working
there was because they didn't do code
reviews the code sale sucked people were
pushing things to production production
would break more senior developers would
refer changes every time when someone
else had pushed something to master
there was no communication between the
developers so basically everything he
said that he hated about the company was
because they didn't do code reviews so
it is pretty useful to spend some time
on that it's not a waste of time for the
person that is submitting the code it is
useful because they can learn from their
peers they get feedback on their on
their code maybe there's a better way to
do this maybe there's a different design
pattern that better suits this situation
as a submitter of a code review you also
start to feel more responsible for the
product you first have to show your code
what you did there changes to your peers
it's everyone coding is a craft so
everyone likes to put out their best
effort and show it off to their peers
look what I did you start feeling more
responsible for the product and for the
code that you're putting out
you're taking pride in the code that you
craft it's also useful for the the peers
that are reviewing the code I do maybe
15 hours a week on code reviews and I
still learn every week PHP has so many
functions I still there are new
functions every week I still learn new
things or creative ways of doing of
crafting a solution I can still learn
from the most junior deaths in in my
complaint and in other companies that we
work for it also it's also useful
because I may not be working on some
features that my peers are working on
and I still want to know how that's how
that is built I can still learn from
that because maybe in two weeks time or
six months time I will be working on the
same features and I want to know upfront
how it's built I don't have to know but
I like to know because coding is craft
so it's useful as a reviewer too it's
also useful for management so if you go
back to your company and you go to your
manager and you say I want to do code
reviews well this is why it raises the
level of both your juniors and your
seniors they both learn from each other
it's making your team more coherent they
start to work better together
it also raises product awareness but
about all the features how the features
work how are they built if if someone
leaves the company in two weeks time
that and the person has built a new
feature three weeks ago and someone else
has to take over but you didn't do code
reviews it's going to be a hell of a
task to look into the code that no one
has ever seen if you dot if you had
would have done code reviews it's easy
just jump in and you've already seen
this code so it it generates better code
you get some feedback loop and you
improve the code before actually merging
it so
better code means more maintainable code
which means easier addition of new
features that's what bosses like write
some PHP CEO like sweet capital stuff
[Laughter]
this is not really good it's it's better
to do less deploys and have a feedback
cycle before pushing to production so
what should you do when you're making a
pull request right it's not as easy as
get commit against Bush click create new
public assets bit more first you get a
task assign write build a new feature
remove a feature adjust the feature read
the task what is expected plan a meeting
with with a product owner or whoever
made it made that task asks asking some
questions what is expected how should
this work is this a filter with a with a
slider this is just a plain text field
how will this look like what is expected
what what do I need to make do I need to
make a Gaussian curve filter or just
plain text search that's you know make
do some analysis just do some research
before you actually start making the
code then when you start the code test
first write make a test what is expected
and integration test that's easy
make sure that the test fails and then
start coding your way well that's the
best practice but I admit I don't always
do TDD
right so you made your test commit the
test make it go to see I see it fail
cool it fails then add some more test
certain some more commits like as a new
endpoint rename a variable make a new
CLI command that's the backup remove
some conditionals make some if-else
statements disappear by using a better
way of coding to some solid design
remove something do some good self
fixing make that a separate commit each
time everything you do is a separate
committee about commit messages I can go
on and on about that for another hour
but after this it's lunch right so I
won't do that basically what I do is I
think this commit and then I continue
writing what my commit message is this
commit fixes the code style this commit
renames this variable I don't write this
commit but I do write the rest so that's
my that's my format of doing commit
messages yours might be different but
that's okay
so you've made all the commits and then
you push it to github or bitbucket and
then you want to compare the changes to
the the base branch develop maybe or
development then you hit create new
public west there's a big former use
that it's useful create a beautiful
title what does this do write it this
adds this new feature some brief title
and then use the big box below that is
the description pull across description
to fill out all the details you want to
properly document this PR write a change
log right I remove this variable I
remove that feature I added an
and point irena build backups if your
get lab linked to the assigned issue or
the task the person that is going to
review your your PR will want to know
why you did this why why did you add
this endpoint so the person that is
reviewing your code can actually click
that and go see what the assignment was
and then use that in the in the back of
his his or her head to review your code
is this okay is this in line with the
expectations and then below the change
lock also add some description about the
decisions you made why did you use this
design pattern or why did you use this
composer package right so that it
doesn't have to be rediscover forwards
so that the reviewer doesn't have to add
a lot of questions why did you use this
or why did you rename this variable to I
instead of index something like that
then last step to write assign some
reviewers one or more write could be
yourself could be someone else
it could be multiple people right so
that's your pull request great but I
also took that said something about code
style and now I want to give you a brief
Intermezzo about Goodsell we all know
peers are too right you all know that
well you may not know but soon there's
also peers are 12 with some peach peach
peach 7 syntax stuff and there's also a
symphony code cell which is what we use
in our company this code style actually
extends PS or two with some extra rules
and on top of that we even add some more
rules it's open source so you can look
it up we add some more rules to make it
easier to review some code I'm gonna
give you some examples and then you say
left or right which one which of the
diffs
go diffs is easiest to review okay first
one which is the easiest left correct
why maybe the green isn't so clear yeah
smaller diff so it just says I added one
line the right the diff on the right is
exactly the same but there wasn't the
trailing comma here so we added the
multi-line array trailing comma rule to
our rule set of code styles because it
meets mixed easier to review code if you
look at the left one you see oh
one line has been added if you take a
look at the right one it says one line
has been removed and then you add a two
but what does this functionally change
it's easier to see the left one that the
functional changes in the left one
compared to the right one and that is
what you want as a reviewer you want to
see the functional changes you don't
care about code style you care about the
functional changes that is what your
task is to see what the functional
changes are and to give feedback on that
next example which one is the easiest
the right one right a lot of people like
to align stuff in their IDE so it's
easier to read in columns but if you
change one key of this JSON for example
then you might need to reorder in the
entire column and that makes it harder
to review sometimes you have files with
300 entries in a JSON file and it's
super hard to see what the actual
difference is if you change one key and
you make a super long key and then you
have to reformat the entire file it's
super hard to spot what the single line
that cost the change is so forget about
the alignment just do this do phpdoc
params disable it that would align the
PHP Docs
douglock also disabled a line
double-arrow disabled aligned equals
because that will if you assign stuff
with an equal sign that would align all
the equal signs I hate that I hate as a
reviewer I can't stand that it's hard to
see what has actually changed next one
is braces which one is easiest to read
the right one right the last one didn't
have changes have a code block after the
if statement so if it's a one line if
block you can actually drop the the
curly braces but it's hard to spot what
what has actually changed
okay this dark green bit helps a bit but
it's not it's not enough it's super easy
to see that oh you added one subscriber
here that's it super easy
same for constructors you can new up a
new item without using the braces just
use new with braces good cell rule if
you use that you actually enforce the
use of the braces and this one everyone
likes this one right it's at the end of
a file when you don't have a new line
after the last empty line it says no
github says no new line at the end of
the file and this week I saw this at a
client they do a slash slash slash for
slashes I don't know why and the file no
new line it's it's great just use PS or
to add some more rules if you like and
add that to your CI CI check so that
everyone has their code cell and forced
and it makes good reviewing code easier
so what should this is the end of the
intermezzo what should they reviewer do
at first we talked about what should the
submitter do what should the reviewer do
well first the don't just don't bash
about God's I'll make it an automated
tool make it the check in CI
use a lending tool and force it it's not
easy if you're working with a legacy
code base but try to work towards a
uniform code style another thing you
don't have to check as a as a reviewer
is is this code merge able github will
tell you if it's not merciful it will
tell you if the if there are conflicts
so that's something you don't have to
worry about
don't complain about duplicated code two
lines of duplicated code isn't bad if
it's readable if it's cleared if it's
more clear then just leave it use some
automated tools to report duplicated
code it's okay
if there's two lines of duplicated code
just you scrutinize ER CI or something
to note if you to notify you about it
but don't start commenting on code like
make an abstract function for this so
it's not necessary if it's readable it's
okay just keep track of your technical
depth you see I use travesty is you said
CCS fixer linting tools whatever
yes lint whatever you want just use all
those tools to make your job as a
reviewer easier if CI says that
something is not in on par with company
standards or project standards then the
CI tools will tell you so basically
everything that's automated you
shouldn't do that as a that's a don't
one last thing that's not automated is
discussing the issue the person that has
submitted to PR should already have
discussed that as that person should
already had the discussion and the
questions and why is this what would
what should this look like you don't
have to rediscover the the submitter of
the code will already have done that if
you see that the submitter of the code
didn't ask enough questions close the PR
and say please read
discusses because I I'm pretty sure that
this is not what is expected so what you
should do as a reviewer is look at PR
look at the description the changelog
the the design decisions go to the
linked issue as well to see what was
expected and what is discussed if you
read that first and then you look at the
code you will easily spot that when
something is not implemented the way it
should and then you can say maybe go
back to the project manager or the
product owner to rediscover feature
after that you go look at the code and
you look for things like the naming of
variables the naming of methods yeah you
look at design patterns or they
implement it well do the correct classes
implement the correct interfaces stuff
like that that's something that cannot
be automated
there's no AI system yet that can detect
design patterns if someone ever invents
that there were all out of jobs look at
the clarity of the code is it readable
when you have to continue developing
that feature in two or three months time
will you be able to step in and start
progressing is it clear
sometimes code is just too creative
sometimes one example we had to use
slugs in the URL but the slug had to be
unique so when it's not unique we just
add - two - three - four until it's
unique and there was a while loop which
DQ entered an index and said don't you
want to increment like from one - two -
three - four
and then I noticed that there was no
concatenation of the - and then after 15
minutes of tinkering what does this go
do I found out that actually the index
decremented to minus 2 minus 3 and that
was converted to a string and appended
to the slug that's just too creative
I had to tinker about that for 15
minutes to figure out how it was
implemented it's crazy so I stepped in
and I said it's not really clear maybe
just make it super clear add a dash and
then add the string version of the int
anyway so it needs to be clear clear ask
some questions if something is not clear
like why did you name it like this and
not use a static factory method or
something always be asking questions
even if you know just asking questions
that the the answer to the question can
be a valid reason for doing stuff like
this could be the answer to the question
could be oh I don't know I just
implemented it like this but maybe
another way is better so questions can
still go both ways it's better than
saying you should do it this way or you
should do it that way because if you ask
a question there might be a valid reason
behind it behind the decision also look
at so we looked at naming and stuff we
should also look at missing migrations
will this deploy to production
automatically will this cause any
failures in Redis or something maybe we
should clear cache when we deploy this
stuff like that that's something that a
I cannot do yet then when the cycle is
complete and you approve this
the quests you should give some credits
give it thumbs up well done
add the ship emoji or a ship that's
being shipped off some some gift or
something and make it funny you make it
cheerful give some credits like I'm glad
we finally can merge this good job also
about the questions if you have some
questions and you're discussing some
some decision
maybe link some articles or blog posts
could be useful could be that this
person or that person doesn't know this
design pattern or or doesn't know what
command bus just link an article about
command buses it's it's a way of
educating the person without having to
type an entire blog post in a pull
request so the reviewer the submitter
has also been putting the effort in to
make some atomic commits so you can
actually use this go the previous
commits in the next commit I hate that
this previous just jumps to the right
OCD you know if the reviewer has been
putting in the effort to make atomic
commit so you can use this to look at
how this person has been implementing
this take it step by step
it's like pair programming about delayed
if you're reviewing code and you've been
giving feedback on a person's pull
request it should also mind your
language language is important I already
said that you should be using some gifts
or some emojis thumbs up shaped it makes
it more cheerful also give some credit
when when you when you learn something
new if you see a function and you never
heard about that function and super
smart to use that function in this
situation
just say so I learned something new
tanks give compliments use a gift like
yeah looks good to me or if it's a super
huge PR with 500 commits and you finally
managed to ship it I feel sorry for the
camera man or a woman
ouch so a language language is important
when you're reviewing some code make it
less personal just step away from the
person that has been putting out the
code you don't have to say I'm oh my god
I'm a big fan of your code fanboying is
not really at that it's not for this
situation so
another thing I like to do when a pull
request is ready to be shipped but you
have some small amount of time left then
I ask maybe add this one more thing just
go one step further give it the extra 1%
just to see how far you can stretch the
person how far you can make this person
go to go to making the perfect coat on
the other hand if time is pressing and
the code works there's some issues with
it some naming things but basically it
works let it go
just make it ship it's also fine just
depending on the time on the order the
time till the deadline make your code
reviews change a bit if you have some
extra time push for better code if you
don't have enough time let go of some
principles and ship the code has anyone
heard about the lizard brain I see a few
nodding heads okay
the lizard brain is basically one of the
oldest parts of our brain we inherited
that from the lizards like alligators
and stuff I don't know much about
lizards but basically the lizard brain
is the thing that actually activates our
offensive mode when we get attacked so
when we get attacked we fight back it's
an old part of our brain that does that
and basically you can trigger that by
using the wrong words if you say
something like do you even know this
design pattern do you even know how to
write JavaScript that's offensive and
people fight back so mind your language
you're working with people you don't
want to offend them they're they're your
peers you
have to work with them maybe for a long
time so better be friends with your
peers and use some suggestive language
instead of saying you make it about
yourself right for example you can you
see a pull request and you know that
some things can be better use some
suggestive language like I would maybe
think about something you know make it
about you and say I would or I feel like
if we if we figure out a way to do
something like that use maybe a lot or
or wood or what do you think about this
make some suggestions and then ask for
their opinion instead of saying instead
of enforcing stuff so yeah that's
suggestive language don't trigger their
lizard brain the next thing this is a
compound emoji that's not a real one
it's called the sandwich you know
when you have to give feedback to a
person better wrap it up with something
nice
you might be giving some hard words or
maybe touch their feelings but better
start off soft right soft bun on the
bottom say like it looks like it works
good job you've been putting in a lot of
time and effort in this but there's the
next layer the layer and so funny
I'll tell you this later and so go to
the next layer and then give the
feedback what do you think about and
that class maybe change it to a factory
or I don't know maybe we or there's
already something in this project that
can do that instead of rewriting stuff
so maybe what do you think about using
this class instead of writing your own
what do you think again use some
suggestive language there and then after
the feedback return to the first soft
layer you want to soft bun to top it off
with some sesame TCS or something say
something other suggestive like maybe if
you work with this or that person I'm
pretty sure that we can collectively
finish this off and shape this code and
then move on to other things
that's topping it off with a soft bun so
start off soft give the feedback you
suggested language there you don't want
to trigger our lizard brain and then top
it off with something nice again right
so that is how I like to give feedback
and the funny thing is once you know
this technique you started notice when
someone else uses it that's sometimes
it's like wait did you just but it's
okay it's okay it's they know how to
give good feedback nents it tells you
something about them instead of telling
us something about you did wrong
and then last but not least running
ahead of schedule here but you'll be
first in the lunch queue this box
it's about merging it's the last step of
a public rest who do you think should
merge a pull request the one that has
been reviewing the code or the one that
has been putting out the effort I see
some nodding heads at both sides
basically what we feel is it's it's
personal we work with a remote team and
some people might be working in the p.m.
while we are already asleep in Europe
basically whoever presses the button and
triggers the deploy to staging has to be
has to be comfortable Fitch fixing the
deploy or fixing the incoming box neck
errors because you don't want the
staging to be down or a dust environment
for the client it has to be down when
someone who actually can fix it is
sleeping you don't want to call other
people in their sleep there's also this
little link here command line
instructions that's also pretty useful
before merging it you might consider
pulling in the code locally and test it
out right it's not only for QA engineers
to test out stuff you it's useful to
merge this code locally and check it out
before merging it into development so
wrapping up here code reviews are nice
they're useful for your entire team your
entire company it's not a waste of time
as a submitter I would like to urge you
to review your own code before
committing it or before sending in
Nepali quests you might catch some stuff
before someone else catches it maybe a
lost for dump or something automate as
much as possible
put some more linting tools in CI some
more testing environment testing tools
smoke tests whatever
maybe a I just thought about this maybe
some fakes fake some deploy it's also
useful you can do Capistrano deploy
without actually doing it so reverting
right right before you move the symlink
give some valuable feedback but stay
positive don't touch their lizard brain
try to use suggestive language and of
course the sandwich if you see the
sitch sandwich being used against
you don't be offended it's just well
played now I would like to all of you to
go to your teams go to your bosses
spread the world spread the word give
some good feedback and learn from your
peers that's it thank you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>