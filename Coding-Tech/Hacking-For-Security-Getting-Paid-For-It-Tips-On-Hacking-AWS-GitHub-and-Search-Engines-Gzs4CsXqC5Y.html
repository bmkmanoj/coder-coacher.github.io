<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Hacking For Security &amp; Getting Paid For It (Tips On Hacking AWS, GitHub, and Search Engines) | Coder Coacher - Coaching Coders</title><meta content="Hacking For Security &amp; Getting Paid For It (Tips On Hacking AWS, GitHub, and Search Engines) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Coding-Tech/">Coding Tech</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Hacking For Security &amp; Getting Paid For It (Tips On Hacking AWS, GitHub, and Search Engines)</b></h2><h5 class="post__date">2018-02-19</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Gzs4CsXqC5Y" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so the agenda for today basically what
I'm gonna talk about is lesser known or
even unknown ways to do recon to find to
find targets and this isn't just for bug
bounty hunters I want to make that
really clear if you're part of a blue
team or you're part of a red team or
basically in any position where you're
committing code this might be really
helpful to discover some assets that you
might leave out in the open for anybody
to find and more specifically for me and
been defined so recon stands for
reconnaissance if you don't know what I
like to say is that hacking it's a it's
a skill and recon is an art so finding
the little things other people don't
want you to find and on the right hand
side or left hand side if I'm going up
here we can see all the different things
you're going to be covering so a really
quick overview why do we do recon as a
bug bounty hunter why would I care to
spend extra time finding about the asset
and the answer is pretty simple I can
find a bigger attack surface to try and
poke at I can also go and I can find
more bugs based on that attack surface
and as we know more bugs equals more
money and more money is just more
problems it's science
so the most common way of doing recon in
the passages been brute-forcing and what
this means is that you might have an
asset let's just say it's hacker 1.com
and then you just brute force that asset
so you're just looking for subdomains
you're looking for any files or folders
that are included within the website it
doesn't really do you much good because
all the - all the tools that you're
using are just being used by everybody
else and even if you just run burp suite
on it
everybody has burp suite these days so
you're not really gonna have a lot of
luck but there's a lot of other tools
out there and a lot of their scripts you
can run that'll make it really easy to
enumerate the subdomains and a few of
them are on the right-hand side here the
sub lister is probably one of my
favorites but I'm gonna show you a few
other ones that you can use just to make
the most out of your recon methods here
so really quickly I just want to say
that a large percentage of people when
they get involved in this they think
that you have to have like a huge
programming background you have to like
code every day
I literally took two semesters of
programming in college and I stopped
because I was just so awful so the last
job I was that they have me building a
web app and they basically just told me
like okay John you can just like go over
to the side and maybe commit like a
hello world every once a while cuz I
just had no idea what I was doing that
doesn't mean that you can't be effective
at breaking things though so when they
were building the app I was on the
sidelines just trying to break
everything they committed and that's
kind of when I knew that I wanted to get
into bug bunny hunting so back to
brute-forcing different permutations
different environments there's a bunch
of different tools you can use Google is
your friend
everything is on Google for the most
part so how many of you in the audience
have used Amazon before in your code or
maybe used it for like your side
products or anything okay so a show of
hands so Amazon is really really hard to
secure and it's not their fault like
they gave you all the tools you need to
make sure that all of your assets are
protected but sometimes people just
don't do it and I was looking for
screenshots to use for this presentation
and I realized that all of these leaks
have happened pretty much within the
last five months so it's really
difficult for people to secure Amazon
Web Services and that really makes me
happy because when I'm going on I'm
doing recon I'm looking for the s3
buckets that are that are holding all
the assets that these companies have so
you can use it by a simple google dork
you can just type in s3 Amazon AWS comm
and then whatever you want is your
target so if I wanted to hack hacker 1
and find all their s3 buckets I would
just use this script right here to go in
finding site Google the other thing you
can do if you're not looking for just s3
buckets in particular exact same thing
go to Google type in site Amazon AWS
comm but just take out the s3 this is
pretty basic Google Dorking GUI used
Google and github to your advantage and
look for patterns and at the end we'll
get to how to automate your work so as
an example I have just a simple Google
search
uber is one of the companies on hacker
one that you can hack so if I wanted to
go and I want to find all the rest three
buckets I just go right into Google and
say hey Google give me all the s3
buckets and it's right there for me
another thing you can do is go to github
pretty much
the exact same thing there's 14,000 361
available code results for Trello that's
just Trello alone alright so I'm an
extremely lazy person and I don't want
to go and I would type into Google every
time I have any target so how can I
automate and make this really easy for
myself the first thing you can do is you
can reuse past findings that you've had
so what I see a lot of developers do is
they'll have a staging environment and
then a production environment and then
maybe like a marketing environment and
these three these three different
enumeration patterns you can use are
used across all different organizations
so it might work for uber might work for
hacker one might work for Yahoo might
work for all the other bug bounty
programs out there so I take a list and
I put it in a word doc or excuse me
a text editor sublime text don't throw
me off stage and what I do is I do a
whole list of it and sometimes this list
can get really really big so we're
talking like hundreds of thousands of
possible enumerations
and then I use tools to go ahead and
just enumerate through every single one
of them and the goal of course is the
Contra mod so John how can I automate
you just said you put everything in text
in a text editor what do you do with
that you can use different tools called
bucket finders and what these do is it
takes your big huge list and it just
enumerates off of that list so if you
have a hundred thousand things that
you're enumerated it'll enumerate off of
that enumeration so originally we had
developers and we had production and we
had marketing well what about marketing
production and marketing environment and
marketing etc etc so to go through all
the different numeration possibilities
for all of them this is a tool that was
actually built in part by one of the
people at hacker one so big shout out to
Tom and Patrick and everybody else who
contributed to it all right so let's say
that you go through all this process and
you found something really juicy it's
like the hacker one production s3 bucket
and you're feeling really good about
yourself because you just found every
single thing the hacker one uses to run
all the web services well this is the
slide where everything can go wrong and
what I mean by that is that the s3
bucket may not even be owned by the
company you're targeting because I am a
duck Amazon doesn't require you to
actually verify
that the title of your bucket has
anything to do with the company that
you're targeting so as an example that
hacker one bucket it could be owned by
some random person it doesn't matter so
you spent all your time attacking
something that isn't even owned by
hacker one and that really sucks
other situations that can happen you may
be completely out of scope
sometimes the bug many programs out
there they don't like you messing with
their Amazon services services can get
really expensive when you send requests
with them so you can also the
possibility of being out of scope the s3
bucket may not contain anything
sensitive at all there's a lot of
situations where you just run to like
plain text files and pictures which do
you no good
and then finally kind of what I talked
about earlier it's not owned by the
person you're targeting or just it's
third-party apps and developers another
really cool way that you can do
reconnaissance is through github and
github recon is pretty similar to what
we talked about in Amazon where there's
different environments that they're
gonna use before they push to production
and github is a goldmine for snippets of
code that never really make it till the
end so you have like half-finished
snippets and half-finished API calls and
end points all over the place and it's
amazing to dig through and find ones
that they don't want you to find I found
everything from secret keys to internal
credentials there's basically database
backups with database keys and github
there's domain patters that you can use
not only for their internal domains or
external domains as well it's it's
literally a treasure trove of
possibilities that you can find so
here's some examples of reconnaissance
keywords and search things you can use
so a really good one is that if you use
the company that you're trying to target
and then API key you'd be surprised how
often this one works so essentially the
API key that's supposed to be kept
private entirely
it's just publicly I get hub because
somebody committed it or it's in there
commit history another surprising one
that you'd be really amazed that works
often is just put the company website
and then password
who would have thought all the passwords
for their internal organization all the
password for their emails there's one
time and it's the only time I've ever
done it but I typed in company
calm and then routing and it was
obviously the bank routing number so
that was a weird one and why would you
put that in your code but you know what
I don't ask questions I just get
bounties so the github reconnaissance
works really well and the reason that it
works really well is because when you
find something good it can be worth a
lot of money and there's been multiple
situations where been if I have gone
through entire github profiles for hours
just to find that one snippet of like
leaked FTP credentials and that's this a
really good body yeah you can also use
Google as I said before it's it's one of
the best search engines for this type of
stuff I've sometimes used Google instead
of the actual github search just because
I find it's more accurate your mileage
may vary but there's a lot of
possibilities and as you can see in the
upper right hand corner this is all the
recent vulnerability reports that we've
submitted to different companies that
just has to do with finding their
credentials on github so one two three
four these are all critical you can do
the math there's also a few other github
recom tools that you can use and make
your life a little bit easier the one
that I like to use a lot is truffle hog
and I just wanted to point this out in
their example like when you're setting
up truffle hog this is on the main the
main page of their website
those darn Amazon access keys come back
again so Amazon's everywhere you can't
even avoid it if you want it to truffle
hog uses as their own example so please
if you're using Amazon Web Services be
careful when you're committing code
because stuff like this can happen let's
see so what could go wrong when you're
doing github reconnaissance there's a
few different things a lot of times when
you find a really old snippet of like
credentials on github it's from an
employee that doesn't work there anymore
and it's really disappointing because
you have no way to verify it because
it's usually an internal password
there's old secret keys third-party apps
sometimes companies put out like example
credentials or like demo credentials to
use for a certain amount of time so
those are obviously useless in this
regard and then there's people that are
just trying to steal certain parts of
like the API and like mash it together
and you can't really tell if it belongs
to the corporation or like the
third-party and you just have no idea
what's going on
that could be really frustrating because
they're usually just riddled with bugs
but it doesn't matter because doesn't a
lot of the organization alright so a few
different search engines that I use when
I'm doing reconnaissance as well if
you're familiar with like syrtis h or
any of those these would probably be
really familiar to you a really common
one that I see a lot is showdown and I
had to throw this gift somewhere in
there because all the things that he's
hacking you could probably get pretty
close on showed and we're finding where
these things are in addition to show
down there's archive.org and I'll
explain a little bit about how I use
that and then of course cert spotter
which is it has a great API so senseless
examples it's starting to move to a paid
model so right now if you go into census
comm you can use it I think gives you
like a certain number of requests you
can make but they're slowly gonna
transition into a paid model so if you
want to use this tool in particular I'd
highly recommend you go ahead and take a
look within the next few months before
they transfer it over but essentially
what you're looking for is you're
looking for internal certificates for
the company so if I go to census and I
type in hacker 1.com and then just put
in internal it's gonna try to find every
single internal certificate related to
hacker 1 and there's a lot so this is
just an example of one that been found
and I think the screenshot is on the
next few pages but essentially he found
in internal Jenkins instance that not
only allowed him to go ahead and see
everything in Jenkins but it allowed to
do an RC as well and it was literally
when he started doing this he told me
he's like hey John I'm gonna go and
attack this target do you want to take a
look at me it was like yeah man okay
yeah I'll think about it
ten minutes later he runs back dude I
already have an RC I don't know what
happened I'm like dude how did you and
census is the answer so if you're other
senseless examples this is basically the
target that he found the RC on snapchat
calm and you can see that on the side
here this is page 1 of 17 of all the
results and that's just for the snapshot
calm down man alright so work an example
this is the vulnerability he found the
Jenkins open instance he just threw in
his juvies groovy script and then he had
an RC so that netted him a good chunk of
change
so showdown is another really great one
you can find some weird stuff on show
Dan like really weird stuff but what I
look for is mostly Jenkin instances the
different ports you can use are really
helpful as well it's really helpful on
show Dan to specify what port you're
trying to target or else you just create
a ton of different results all over the
place and as you can see there's a ton
of different other filters you can use
as well if you're just getting to show
Dan
they have like promotions every once in
a while I swear I'm not a show Dan rep
but I literally bought it for like five
dollars for a year so wait for the
promotion if you are because it was
totally worth it in addition the person
who made show Dan wrote this book and
you can basically learn everything you
need to know about it it's a really
powerful tool alright so this is
literally the exact example of what been
found so he searched by hostname he just
threw in 1567 at the end for the port
and he got his batting for that one
alright cert spotter so sir spotter kind
of does the same thing but the really
great thing about certs Potter has a
really good API so if you'd rather just
pull everything related to a domain or a
URL use search bar to do it because it's
really fast you can find corporate
certificates servers other little things
you think the organization will never
think you'll find and just as an example
this is pretty much every single
internal Yahoo IP and all this is
publicly available because they use the
same corporate certificate for their
public starts and I got my start hacking
on Yahoo not because they had bad
security but because their scope is so
big and there's so much potential for
you to find that's basically how I
taught myself how to do all this is
based on them so thank you Yahoo if
you're here alright and finally I come
to JavaScript files so JavaScript files
are really really great for finding ural
endpoints and comments and secret
internal api's when I made this
presentation I had to block out the name
of the person and the company of where I
found this one but I just got an email
yesterday which basically gives me
permission to release my blog about this
one so at the end of my talk I'm gonna
go ahead and release the blog on my
website if you want to find out who
these people were they were really quick
to respond and the reason and the
that I found this in securing internal
API was through the JavaScript files so
John that's really great and all but
like where can I find these JavaScript
files well you can go to the web site
and just look for the JavaScript files
there or you can take you to the next
level and you can use archive.org to
look for old JavaScript files that they
may not even know the endpoints are
still active and this is a really cool
one because you can basically go back in
time to any point in time and see
whether or not the endpoints are still
open and exploit them and the way that
you can do this really really lazily is
use J esparza J Esparza takes your
entire JavaScript file and it just finds
the important bits so all the endpoints
all the internal URLs the IP addresses
you can even go ahead and look for
credit cards if you wanted to good luck
finding a JavaScript file but it's gonna
get you all the credentials and
endpoints that you need and this is
available on Ben's github so it's open
source you can use it for whatever you
wish it's a really cool tool and I
highly recommend it so we use this
because we want to find more bugs we
find more bugs like it's more money and
as we all know there's more money
there's more problems so thank you so
much for having me again</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>