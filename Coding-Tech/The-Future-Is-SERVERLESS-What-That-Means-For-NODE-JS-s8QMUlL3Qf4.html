<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>The Future Is SERVERLESS: What That Means For NODE JS | Coder Coacher - Coaching Coders</title><meta content="The Future Is SERVERLESS: What That Means For NODE JS - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Coding-Tech/">Coding Tech</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>The Future Is SERVERLESS: What That Means For NODE JS</b></h2><h5 class="post__date">2018-03-31</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/s8QMUlL3Qf4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">I'm Chris Anderson I'm a program manager
on the as your functions team I actually
started the functions project about two
years ago and it was mainly kind of the
background was as I was working on a
product that was called web jobs which
was for kind of doing background jobs in
the cloud and it was mostly just an SDK
framework you deploy it onto your own
you know instances your own vm's you had
to manage everything yourself and one
day we tried to add nodejs into it and
ended up making really really hard to
manage it actually made it worse
but the end product was really really
cool in terms of what you wrote
and so we discovered if well if we just
run this as a service we'll end up with
a better product and I kind of talked
about why we ended up going with no GS
as far as how that goes so service
nodejs I choose you there's really I
think two kind of big things it also had
to do a lot with JavaScript and then we
also talked about nodejs
JavaScript I like to say is kind of the
English of programming languages a lot
of people can speak at least a little
bit of it even if it's bad right it's
not necessary the perfect language but
it's a language which is relatively easy
to learn for a lot of people it might
not even be the most widely used
language but it's used by a good section
of the developer community out there
especially in the kind of web
application space so it's a very very
useful language for us to choose it
doesn't require any compilation which
means that a lot of the goal that we had
was for people to go ahead and get
closed running in the cloud as fast as
possible our goal was that you were
basically in the editor doing something
in like 30 seconds and that you were
actually walking away within 5 minutes
having done something and have a service
up and running in the cloud that meant
that we hadn't compilation having build
even having an IDE meant slow down to
that time and so we really focused on
that quick path first since then we've
kind of gone back and said ok for people
who do want to work in an IDE for people
who do want to have build and
compilation they still can we started to
the initial goal of quo of code in the
cloud as fast as possible and then yeah
there's just a giant great community of
which you guys are all a part of of
course which made it easy for everything
that we needed to to kind of work out of
the box already have available to us and
then nodejs nodejs is a great platform
in the case of service because it's a
very very
wait framework when you go and just
measure how fast it is for no js' to
come up and start running for the first
time versus how fast it is for say like
java or even you know c-sharp in some
cases to come up with mine for the first
time it's much faster and for the
general case and that's really useful
because in serve lists it's actually not
server less their servers back there but
those servers have to come up basically
when your request comes in or when the
Aventa shows up you know for
asynchronous messages it's not the worst
thing in the world if there's like a
second or two or you know a couple
seconds of you know latency and coming
up but a lot of the times people are
using this function in there's n HTTP
scenarios and which case any latency of
bring the instance up is impacted by the
user that's trying to use that function
and we know that in the case of like
websites latency as far as like
responding to the requests can mean lost
users and so we know that it's critical
for things come up as fast as possible
and nodejs is already kind of designed
to come up nice and quickly so it was a
great platform out of the box there and
the other nice thing was that it was
very widely used Microsoft we to make
sure that we kind of reach all
developers developers running on Windows
max Linux and Linux and nodejs was
already really really good at running in
all those places and so we know that we
have the best support across all those
various places we needed to run so what
can server let's do for nodejs
developers you know we kind of chose
nodejs to go out with in the first place
because it was very easy for us to get
going and we wanted to kind of get
started we wanted people to be able use
it easily but for people who are just
kind of already using nodejs already
used to using it why is service a useful
thing well one of the things that I came
across frequently when I was building
nodejs applications was while going
ahead and you know building my server is
really easily kind of doing background
process of messages can be a little bit
less easy to manage and maintain there's
a lot less tools out there which
understand frameworks for doing
background processing and I also have to
kind of manage the scale for those
background processing it's really easy
to scale on the HTTP request messages in
a lot of platforms but you know queues
and things like that that can be a
little bit trickier to get right and so
service makes it so I can basically go
ahead and have a function up and running
and it scales dynamically into whatever
I need to and since you pay for
execution and most servers frame
out there you don't really have to ever
overpay for your system it also means
that things are much lighter and and
frameworks become a lot less necessary
since all I'm really necessary having to
go ahead and push is just a function I'm
not having to worry about like having
that full stack of things that's gonna
manage like the various HTTP entry
points I'm not having to go through
there and worry about a lot of extra
code a lot of the times especially if
you take advantage and for instance at
Microsoft we have as your functions
where we have actually bindings to
various services you never be actually
having to bring in the SDKs to talk to
for instance like cosmos DB which is a
giant you know document based database
that we have your nephews our bindings
and just return a JSON ask from the
function and I'll get stored to the
database for you so you never actually
have to deal with working with those
SDKs it makes it very quick and of
course horizontal scaling a high scale
is easier than ever basically with
functions we just keep on throwing new
instances that's you and you never
actually have to see the instance
account worry about managing the vm3
about patching things it just keeps on
scaling and then as soon as you have no
more traffic on your service the VM just
disappear and you don't really worry
about when they're there and when
they're not you'll just kind of scale
out when you actually have requests when
you actually have usage this has turned
out to be really useful in a lot of
cases one of the first places that
someone came up to me and it's like oh
yeah as your functions it was really
useful because of that whole kind of
scaling thing was actually at a
conference someone had built the
conference app using functions and it
was really great because they had a lot
of like random requests especially like
the week leading up to the conference
from the various project managers trying
to do the conference and he would just
go through there and add a random
function to go serve that purpose and
then after the conference was done he'd
have to worry about scaling down the VMS
or anything like that he's kind of
walked away and he left it there in case
people wanted to use it randomly and
then he didn't get charged anything for
those functions running in the meantime
so it's very useful for those kinds of
use cases and just to give you a sense
before I kind of move on to what can no
js' do for service I just wanted to give
you a simple sense of how this can work
here I actually have the functions
runtime running locally on my machine
this is the simplest kind of demo of
hello world so I've got the very classic
case here your function in this case you
pull up this one your function in this
case is just gonna be exporting a
function from the module so I've got a
context option coming in or a quest
object
I can go ahead and do some log
statements I'm able to access that we
actually purposely made the request
object looked like a connect or an
express object so that way if you wanted
to use connector Express middleware
those things can still work with inside
of your function without having to do
too many tweaks and then my response
here I'm just able to add headers
straight to the message do my body here
and it just kind of works like normal
and so here let's just kind of reset the
demo you'll see here in the bottom right
that I'll see various kind of things
scroll by here the way that I got this
running is I just run funko start you
can actually do NPM install as your -
functions - core - tools - G and then
you'll have functions running on your
local machine and you can run func init
function new function and then do funko
start once you have your project going
so that spins up its listening in 7071
we can see our API hello a function
that's been hung out there because this
function is called hello based off of
the folder path and I can go ahead and
run and it sees says please pass the
name on the creature on the request body
if you want to inspect why we got that
logic back we can actually go ahead and
just hit its hash + vs code when you use
functions we go ahead and actually drop
a dot BS code filed there with a launch
that JSON which is pre-configured to
talk to your local functions runtime so
there's no set up there to get debugging
working it just automatically drops that
launch that jason file there so now that
i'm connected and go ahead and hit enter
again and you see that I've got this
breakpoint set up here I can now go
ahead and inspect the request object
look at the query object and I see that
it's actually empty there's nothing on
there a query object which is why it's
falling into this else statement which
is saying please pass and they want to
query string or the request body so we
can fix that real quick and now when I
do that I can go ahead and see that the
query object now has Chris on it and
name is now equal to Chris and so if I
go ahead and continue we now see hello
Chris with a question mark at the end of
it and it's still really fast to develop
this I don't need to go ahead and hit
funko start every single time that I've
got to change to my function and go
ahead and let's get excited rather than
kind of asking questions about it hit
enter and you can see there ago I got my
exclamation mark so the host is sitting
there constantly listening to file
changes so it's very easy to just write
some code change write some code change
I'm the other nice thing with this is
it's not just HTTP though I'm using HTTP
right now because it works entirely
locally and the Internet's been kind of
like in and out throughout the
conference but it can also still listen
to all your cue services that'll listen
to event hubs in fact if you configure
it to listen to your production services
you'll actually kind of help end up with
n plus-1 things because it'll actually
collaborate in real time with the
cloud-based instances the same way that
all the cloud instances themselves
collaborate with each other using a
storage account that's the covers so now
I just kind of understand what did you
know this is kind of what led us to you
you see how easy it is to head and write
this code if this was you know a
language that required building for
instance like you know Java is to still
be relatively easy just be a build step
and then I have to go and hit run but
because I can script it and I can live
edit things we get a really nice kind of
fast inner loop in terms of developing
ghosts and then I can just deploy it up
to the cloud or even do this from the
portal itself if the internet was
working a bit better so from there it's
kind of kind of talked to about the next
phase of things in terms of what has
been weird about running nodejs and
circles together and what can the
node.js ecosystem do to think about
service when you know we're doing the
things that a community does one of the
things that I really liked about nodejs
and JavaScript was how easy it was for
you know new developers kind of walk up
and get started with it
one of the nice things about nodejs and
javascript is since there's a lot of
client developed client-side developers
kind of already knowing javascript
already used to how that language works
it's very easy for them to walk up to no
js' to have them start building their
own backends if they needed to do that
service in some ways kind of has a
similar kind of thing about it where
server list is very easy to walk up to
and start building a cloud service and
get up and running you don't need to
worry about setting up a VM and managing
it don't need to worry about antivirus
software you don't need to worry about
firewalls all that's done for you by the
managed service so now the same class
you know those same developers who might
later get up that single VM but couldn't
really reach scalable systems you can
now use service technology to deploy
systems at scale for both you know front
end facing HTTP applications but also
back-end systems that might have even
been farther away from their area of
expertise it's a very accessible thing
to get up to so because no GS is already
kind of the star language of service
we're gonna see server lists as it's
becoming more popular bring even more
people into the server into the noche
ecosystem but there's a couple of
gotchas that those new people coming
into the nodejs ecosystem are gonna have
to deal with and some of them is that no
GS kind of started ignoring some the
lessons that we learned from the web
space and that we got kind of very
comfortable with the fact that since
these things are gonna be long running
on servers it doesn't matter if our
packages are huge and we load everything
in the world and smooth that process and
you know as long as it's not taking up
to huge event memory footprint like who
cares coming in tiny little files that
we have and things along those lines
well I also kind of mentioned before
about no jess is actually great because
for the simple cases it comes up very
quickly for the cases where you decide
to go ahead and you know import lodash
and import every single giant framework
that you can think of into memory it
takes actually a while to even just read
those things from disk and the memory
footprint then means that people who are
using those libraries inside of
functions have to pay more because they
have to pay for that memory footprint to
actually exist so if you load giant
libraries into memory more than ever
you're not having to pay for that if I
can choose a library which is you know
one megabyte versus a library which is
you know maybe 30 megabytes that can
mean big differences for my end of month
bill in the case of surplice and so now
as you know any package authors who are
listening to this talk or here in the
audience it really pays to be thinking
about how can we go ahead and reduce
what actually gets loaded there's lots
of things that can help with this you
know if we're now using you know the new
kind of you know common gf stuff or
it'll only load the parts that it needs
to in memory those are really good
things I actually wrote a tool that's
called as your functions pack what
should I actually go through there and
web pack your code all together it
doesn't necessarily do as much to reduce
memory footprint for that you'd want to
go ahead and run uglify on top of that
or the result of that web package output
but it does reduce the load time I
actually did a lot of kind of testing of
various impacts of I took the four
largest node modules I could find I put
them into a function and measured it on
an i7 with an SSD so very very fast
system they still took about two seconds
for that function to come up for the
first time because I had to start nodejs
and they just had to read all that stuff
into memory when I web packed it it
actually took about a hundred
milliseconds so it's a giant improvement
and when you're running inside a service
I may be a little bit more of commodity
hardware
you're gonna be running it's gonna take
even longer to load those modules into
memories so and a lot of the sales
providers actually have limits on the
amount of content you can actually put
up there in the first place
in the case of functions we don't
actually have any file on the size this
we even hit those issues but they have
existed in other platforms and so it's
important to think as we're writing
these packages especially if we want
these packages to work instead of
service we need to be thinking about
what those things are gonna do there's
actually a couple of examples of this
out there in the wild already beyond
just like things that I've seen as I've
tried to work with customers using
functions like on Postgres one of the
bigger and gear threads there for the
the PG module is someone talking about
hey this thing started consuming a lot
of sockets without me realizing it
because my function was kind of coming
in there and using it and using it using
it and opening up sockets and not
closing them and to be fair they were
misusing the library they didn't read
the documentation properly they weren't
kind of using it they thought it too but
they used it the way that it felt
natural to use it inside of their
function and so we might want to think
of especially for writing a package
which we know will be harmful and to use
wrong and serve lists to include a
section about hey if you're trying to
use this inside of one of the service
platforms like you know here's
instructions on how to create a
singleton instance of it outside the
function so it stays in their memory
here's how to write juris for the code
for it to go ahead and close this
connection before the functions
completed and you know some examples can
really help a long way with making sure
that anyone new is coming to this
ecosystem from server lists and de no
js' has a good time because it'll pay to
make sure the people are you know
successful in that way and then there's
one other thing that we should be kind
of mindful of is that you know nodejs
and server lists and JavaScript has
really gotten very far and Cody's been
doing really well because I think of the
strong open source nature of things and
how easy it is to get access to the
parts of the system runs on you know the
even the the core brains of like you
know you know chromium and things like
that or open source it's really really
great just how fast and how much all of
us are empowered to contribute to the
platforms that we run on and since a lot
of the service implementation today are
very vendor specific there is some risks
there so it's something that's worth
keeping in mind there's you know people
out there that are thinking about
problem ways to address some of these
problems like servos framework is one of
those cases there's you know
apex which is more of a go based one
from TJ a couple different examples so
one of the things that we're trying to
do from the function side of things is
even though we're a vendor and we are
building a specific implementation
that's mainly designed to run on Azure
it is all open source and we are working
really hard to try to build it so it is
a bit more of a portable system and so
we really do want to make sure that you
don't really feel like you're
necessarily locked in even though it's
built to run really well on Azure we are
trying to make sure that we at least
build it in the open source and
eventually we can work towards a way
where it's even open platform so with
that in mind the future is now I
encourage all of you guys who are
thinking about trying to deploy services
out into the cloud to consider service
from you know whatever vendor e that you
feel is good it's all about trying to
improve the agility with which we can
deploy services and build services which
we can trust will operate well at scale
no GS can build more with service since
you're already in good shape because you
know the language of choice on this
platform so you're already kind of ahead
of the game and I think service has
taken advantage of the fact that no GS
and JavaScript already had this great
big open community and we should try to
do our best to encourage the community
as nodejs you know community members to
stay open so thank you everyone for
listening thank you for Microsoft for
paying for me to come here and if you
ever want to learn more about what I do
for my day job check out function
Cybercom or tweet at me with cran
decodes thanks everyone</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>