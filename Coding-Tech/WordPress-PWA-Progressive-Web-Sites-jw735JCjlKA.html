<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>WordPress + PWA = Progressive Web Sites | Coder Coacher - Coaching Coders</title><meta content="WordPress + PWA = Progressive Web Sites - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Coding-Tech/">Coding Tech</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>WordPress + PWA = Progressive Web Sites</b></h2><h5 class="post__date">2017-11-02</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/jw735JCjlKA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey I'm Surma I work as an event for
advocates for the chrome team in London
and I am here to talk about my most
recent mini project I did and which is
that I built a proof-of-concept PWA but
using WordPress as the backend and so in
my title I have two words WordPress and
PWA and I feel like I should probably
justify both of them so let's talk with
the easy one
why PWA because most people I think when
the heat PWA they think about about
install ability about getting into the
homescreen and that's not something you
necessarily want for your blog like you
don't really care about your blog being
an app on your home screen
and tricking that banner so maybe the
name is a little misleading it's not a
progressive web app in this case it's
more of a progressive website and that's
okay because PWA doesn't really
necessarily mean that you need to be app
like and also I think of people never
thought about this or approach this
because they were like hey my CMS has
been around since way before the acronym
PWA was a thing so obviously it can do
PWA and that is wrong
because you can use all these new PWA
technologies with a very old system that
are already in place and that's what I
base I'm going to prove with this
project have an existing CMS have an
existing infrastructure and still turn
it into a PWA and I think the bottom
line as chris said earlier today it is
about drastically improving the user
experience and because we all know like
flaky networks are a pain slowing
websites are really awful and this can
help and all decisions that you make
your envelopment should be made from the
uterus perspective so the second word my
title is WordPress and the question
might be why WordPress why not
yuuma or Drupal or any other kind of
CMS's out there and maybe I should have
used another acronym in my title and
just called it CMS plus PWA because it
just rolls off the tongue right away
and it doesn't matter like this talk is
not gonna be wordpress specific it's
about having an existing CMS and all
techniques that I show will be
WordPress agnostic because I didn't need
to know anything about WordPress really
to to make this happen
the reason why I did choose WordPress
though because they are by many
standards the most published iam as out
there they have a 60% market share in
the CMS world so to speak and they have
a stat that says that 27% of websites
are WordPress websites just take that
number in 27 percent of websites but
just to be clear if you are like locked
in to your weird home in house pearl
written custom build CMS this talk is
still useful to you like I have not
known anything about WordPress at the
surface project I still don't know much
because I didn't need to know much to
make this entire thing happen and to
have good performance and have all these
PWA features so to talk a little more
about what WordPress is currently doing
in the PWA world I would like to invite
dan dan wants Leon to stage from
automatic
hi my name is Dan Wamsley and I am a
code wrangler at automatic I couldn't
help but overhear like he sort of
glossed over it but he's like a very old
system and totally like twelve thirteen
years old but you know we live in
technology and things move fast
so automatic is the company behind
wordpress.com and wordpress.org in for
WordPress an automatic was founded about
twelve years ago with the goal of
accelerating WordPress adoption and I
think you could argue that we didn't do
too badly you'll notice this is 28%
Cerner has not updated his slide I'll
forgive him this number grows very
quickly but it's now 28% so so I think
one of the reasons behind the the growth
of WordPress and the success of
WordPress is that our mission is to
democratize publishing and this is sort
of a mission that is deliberately very
ambitious in scope and it is underscored
by a philosophy and this philosophy has
really stood the test of time it says
that we should always be making software
that's incredibly easy to use to install
that it should ship with saying defaults
and I think crucially we should always
be trying to reach out to people who may
have been left behind web users who for
reasons of language or geography or the
kind of browser they use or the kind of
network they're on have not been able to
use the web as effectively as everyone
else and so over the years we've engaged
in some really ambitious projects to try
and live by that philosophy so I'm with
starting with the famous five minute
install bakwin's content management
systems took fifteen steps in some
arcane wizard to get installed we just
ask you a couple of questions and
everything else was done for you
WordPress every release comes out in 80
languages or more growing every year we
have a responsive and accessible UI
which is really important for the over 1
billion people in the world living with
disabilities and we scale from a USB
stick to a massive installation like
WordPress comm which is one install of
WordPress serving millions of websites
from datacenters all
of the world so every year brings new
challenges new ways to live by this
philosophy and 2017 is no different so
in 2017 users expect to be able to
create rich websites with no programming
required and with no sort of messing
about with sort of text-based widgets or
custom elements and so we've creating
the Gutenberg editor which is coming out
in WordPress five and it enables really
rich block based editing that's fully
pluggable and usable by people and I
think equally important in 2017 it's the
year of web fragmentation which is a
huge challenge you've been hearing about
all day but basically people are
accessing the web on more devices and
more kinds of networks than ever before
and this is like a really important
challenge for us as web developers
because most of us are using the web on
fast computers on faster reliable
networks and it's not always clear to us
who we're leaving behind and of course
with WordPress we're always asking who
are we leaving behind how can we help
them access the web better now I want to
pause just for a second and talk about
jetpack because I mentioned it in
passing at the start so jetpack is the
plugin that powers wordpress.com and is
also available to download on any
WordPress website and why jetpack is
important today is because it powers
over five billion page views a month
this is as part of the scale of
WordPress it's one of the more popular
plugins and it powers wordpress.com and
VIP and all of our other products and so
jetpack has this incredible reach which
is both an amazing opportunity and a
really big responsibility to make sure
that the people who are using jetpack
are not left behind are having a great
experience and I also want to talk about
the work we've done with Google in the
past so automatic and Google were both
pitching in on the HTTPS Everywhere
initiative alongside let's encrypt
alongside the e FF and this has borne
incredible fruit we now have I think 10x
the number of web sites in the top
million as versus two years ago running
HTTPS which is important because it's a
foundational building block of
progressive web apps and also we
collaborated with Google to create the
amp plugin
for WordPress which i think is probably
by far like the the biggest way that
that amp content is rendered on the web
powering billions of page views a month
so this this partnership between
automatic and WordPress has been really
powerful so we got together and decided
to investigate what could progressive
web apps provide a great experience not
just on a site by site basis but in a
cross-cutting basis could you actually
put a progressive web app technologies
into jetpack and get them out in front
of people in a way that works with any
theme with any other plug-in out of the
box so that we can get these benefits to
people and so we have some really
exciting preliminary results so what
Surma has been talking about today has
been how you might take an individual
theme or an individual site and tailor
it to use progressive web apps what
we're talking about is basically one
click with a site running this
experimental version of jetpack and you
get almost 100s across the board in
lighthouse and what we've seen is on
slow 3G with an image rich homepage say
a photo blog you can get 10 or 15 X the
load performance on that site sort of
the time to your first content paint now
how do we do this there's a lot of
hackery going on under the hood but a
lot of it is sort of sort of traditional
web hackery about how you do deferred
and async scripts and inlining scripts
and these other things combined with
progressive web apps which led us kind
of mangle the first page load to make it
super fast and then in the background
load all the remaining assets for the
other pages so that you can have a
traditional web experience that starts
and loads quickly so that's just some of
the things that we've discovered that
are possible with progressive Web Apps
and WordPress and I would love to turn
it back to Sumer for some of the nuts
and bolts yes
alright enough of the inspirational
speak let's get down to the nitty-gritty
so this is the block that I built it's
had a lot of features I said to myself I
wanted to be really fast on the first
load I wanted to have nice transitions I
wanted to have a really bandwidth
conservative approach to loading all
these things work offline full PWA
but what I also wanted to do is I wanted
to target low-end devices because I want
to make sure it's a blog it should not
require a flagship phone to render a
blog so basically all my development
that I did happened on a moto G 4 which
is the phone that we always advocate for
as a baseline for low-end devices it's
not very expensive if you can order
Amazon and basically my workstation just
looked like this with always my
development server running open on the
phone so I could see that the animation
would still be running smooth even on a
constrained phone like this along the
process
I basically documented everything so
whenever I did something I wrote in a
dog as you can see it ended up with like
11 pages of me just ranting really and
this document is really r-rated and not
fit for public consumption at all so I
will not hand that out what I will do
though is I do a youtube series called
supercharge and I'm working on the next
installation where I will basically
cover one feature of this blog per
episode and just do a step by step thing
on how you could implement this feature
or hi implemented my features and maybe
you could use those to use it on your
blog so definitely stay tuned on that
one like and subscribe our youtube
channel please either way that's Kesari
so if you are a theme author or you have
a theme running on your WordPress blog
it's important to me that you know that
this is not an all-or-nothing thing you
can cherry-pick the features that you
deem more important for your blog like
you don't have to do it the same way
that I did this is a proof of concept I
wanted to show it is possible but
there's many different solutions that
might work or might work better for you
and you don't have to do everything the
same way again
bottom line improve your UX so let's get
started with the first thing a feature
is very important to me it's the time to
first content full paint the TGF CP it's
a great acronym
and basically means how long does it
take from the second I hit enter or just
navigate to a page two until the content
is on screen it doesn't need to be fully
styled it doesn't need to be interactive
yet but the content needs to be there
and four blocks specifically this is
very important because the content is
your content it's the thing that you
want to ship to your users and I set
myself a goal to get that under one
second on 3G which is fairly ambitious
but it can be done and this is the
feature that you really notice when
you're on vacation in like on hotel
Wi-Fi when you're roaming on 2g when
you're in a country where bandwidth is
still scarce so statistics have shown
that when you make users wait we've
heard this today a couple of times if
you make them wait they're gonna bail on
you so your mission should be get on
screen as fast as possible get them busy
get them engage with your site one way
or the other and I achieve this in this
case by putting everything for the first
colorful paint into my index.html that
basically means if the user only gets
the index.html and then the network's
breaks down the site will still be
useful for the user
everybody this is page what it looks
like on the left side you have the full
load on the right side you only have the
index.html and yes it's a great
experience I mean all my assets are
missing but the content is there it's
still useful to the user they can start
reading and if the loading is still
going on in the background this visual
will enhance into the full experience by
the time the assets come in and this is
definitely better than staring at the
blank screen for 20 seconds so that's
why I wanted to take this approach and
here is a screen recording for a moto G
4 it's the wrong device frame I know but
I didn't have any other so this is
actually a proper screen recording form
the phone in my pocket and you can see
once I tab on my bookmark this is clear
cache no serviceworker over a 3G Wi-Fi
that we have in the office it simulates
a 3G with packet loss and delay you can
see I'm on screen really quickly but the
thing is loading continues to happen in
the background for more than 20 seconds
it doesn't matter though because user
doesn't notice they're they're happy
reading at this point and this is
mindset I want people to adopt more when
developing websites I think it's a busy
you can be pretty big actually mostly it
can be a bigger website as long as you
keep you so busy in our on screen fairly
quickly here's a video of a reload when
the sauce chakra is in place it's
practically instantaneous
there's things I could do better here
but with service worker stuff like this
gets really really fast so I'll gonna do
this basically I started with a
wordpress theme that is completely empty
and then just incrementally added things
that I needed for the first pains and
only add things that I needed for the
first paint and the nice thing about
WordPress are basically any kind of CMS
that is PHP driven for example is you
are basically doing server-side
rendering by default because PHP when
you have these PHP tags that inject
content into your markup that starts out
rendering and suchlike rendering is
crucial for the first wonderful paint
because you need to have the content in
there already and so it's really easy to
get a good or it's fairly easy to get a
good first content full paint with
something like WordPress for the Styles
I separate myself to the two categories
I had the critical Styles and what I
called lazy Styles the critical Styles
get in lines into the documents and the
lazy Styles get lazy loaded and that's
something that jetpack does already I
think Dan mentioned that in his segment
so my lazy Laura basic looks for element
that have the lazy log class and loads
the elements that are inside those the
interesting bit about this is that for
the styles I use a no script tag and
that means that if javascript is
disabled or not running that the link
tags inside it will still get loaded it
won't load as performant lee as with my
lazy loader but it's basically
progressive enhancement for lazy loading
if you have JavaScript you get the
better loading performance if you don't
you will still get the full visual
experience just load it a little bit
slower and I think it's a really nice
trick so just to separate what is a
critical style and what is a lazy style
critical soils are just like the very
basic coloring and space visual space
allocation so you can see there's no
embellishments there's no real like
little things flying around or anything
only the space is allocates you can see
the header is not there but the space
for it has been taken up by the
but there's styles for the text and the
background image are all in the Lazy
styles because they're not as important
second feature I want to talk about it's
a six modules I wanted to use es6
modules through and through
why because I think that's what the
future is going to be like we're just
going to use es6 modules everywhere and
because the import syntax just allows us
you to decouple your code in a much
nicer way and modules are deferred by
default which is also something it was
really important to me to have a better
loading experience as you might know not
all browsers have es6 moment support and
even back then even less had support for
it so I went for a pretty bold strategy
I just said in development I'm just
gonna use the brows that have support
for it and use no bundling no friends
piling in just native es6 module loading
and then once I go to production I'm
just gonna rely on babel to transpile to
System GS and your systems yes and those
browsers and then I'm gonna basically
use the no module tag to let the browser
decide which version to use so it is
pretty ambitious it's actually kind of
ignorance but it worked out so I can say
you all should be doing this because it
worked for me so it has to work for you
at the same time and my colleague Sergio
wrote an article about where he did it
really in-depth study how performance
unbundled loading currently is and
basically his conclusion was we can't
stop bundling because it will impact the
loading performance and I really urge
you to look into the bitly link and read
the articles was really good but also it
kinda only is true when your module tree
is decently big and for me that wasn't
the case I had like a dependency tree of
us four levels deep maybe and a total of
15 modules so as to myself I might be
able to get away without the bundling
and so I continued down my path so let's
talk about how I do load my modules with
my to branch approach basically I have a
PHP array with all the morgels and neat
and then I have a PHP for each loop to
generate the module script tags and then
I have another for loop where I just
turn it into systems yes calls the one
has no module the other one has type
module so browser can decide which
version to use depending on if they have
moral support or not but also as
I had a dependency tree look depth of
four which if you have high round-trip
times can still end up being quite
costly so I had an idea how I can reduce
that without having to resort to
bundling and there was a tweet that I
sadly didn't find but basically it says
whatever smart thing you think you did
game developers have been doing it for
ten years and you think there is a lot
of truth to that because game developers
in my opinion are the pioneers of
architecture
they usually have very very big teams
and have to work in parallel towards the
same goal and that requires the team to
have a very clear image of the
architecture and I think there's lots of
things that we asked web developers can
learn because we were just starting to
do big architecture on the web and so
the thing that I did and it's not gonna
blow anyone's mind in here is a message
bus the concept basically is just that
it allowed me to send messages that's a
message bus but it turned out that this
simple concept actually turned into a
performance primitive and actually made
my developer experience pretty great as
well here's an example so I have a
pending Commons module because the block
has support for sent for writing
comments while you're offline and using
background saying to dispatch them once
you're online so with that the pending
comments has a dependency on my
background sync manager module that I
wrote it also has a dependency on to my
Reuter module because it needs to know
when I switch from article aid to
article B to update the view of how many
comments are still pending and the route
or in turn has a dependency on the
analytics because it needs to tell the
analytics that we switched a page and we
want to update or view counter by one so
as you can see here this by itself is a
depth of free with a message bus which
is a global thing as just basically in
line because it's a very small piece of
code we basically remove all these
layers and just have independent modules
you basically end up writing
micro-services in the front end and that
turned out to be really nice you really
nice experience for me as developer
additionally I actually extended the
message for us to span all my tabs and
the serviceworker
so it means if the serviceworker used
the message bus and
the message it would go to all the taps
I'm going to talk about later why this
is really useful but here's an example
my Rooter has a navigate function and
when that gets called it does like the
fade-out and switch and Faden and all
these little things and push states but
in the end it does a dispatch on my pups
up up the message bus that I wrote and
turn on the ethics module does all the
typical analytics loading and in the end
it subscribes a navigation event and
whenever it gets one it just gets sets
the page to that URL and increases and
sends a page view event so these two
modules now are completely oblivious of
each other's existence and yet it works
and I think that's really cool one thing
that is worth noting is that no browser
has support for es6 modules and workers
so it means for every piece of code I
want to share between my serviceworker
and my main thread I had to resort back
to public of two Global's which is not
nice but in the end it will be fixed at
some points and for now it works I guess
the next big feature bandwidth
conservation as I said I want you to put
everything in your index.html for your
first content full paint but if you then
end up with an 8 megabyte index.html
you're not going to be fast so this is
where I have adopted different mindset
of what I consider necessary and what I
consider big because in emerging markets
or especially in emerging markets people
still often pay by the megabyte it
actually costs them money to look at
your blog so you have to be aware of
that
so the first load of my blog is 2 or 30
kilobytes which I personally actually
think is still a little bit too big and
it's mostly due that I to the fact that
I have 4 different weights of my web
font so if I had variable fonts I would
be great but for now I actually have
earned 40 kilobytes of fonts and the
rest is pretty small and here is one of
the major misconceptions and I hinted at
it earlier your pw8 doesn't need to be
small you can load more data in the
background your initial node needs to be
small and as I said I have everything in
my index.html so I can get on screen
very quickly and my index.html is 10
kilobytes so even over 2g that would be
pretty fast
and my set note once service worker at
some place is one kilobyte and that's
because I've caching headers and
serviceworker and that's really want to
be at but this is my other thing I have
source record and this is probably the
biggest feature I want to talk about and
that's offline
it makes resistance against flaky
networks I in this case hand rolled my
serviceworker because I didn't want to
use yet another thing so I didn't look
at the work box also when I was doing
this work box was also so pretty new in
retrospect it would have been a good fit
honestly but in this case I wrote it
myself but the thing is I wrote a theme
as I said so if other people start doing
this we're gonna end up in a space where
we're gonna have the one serviceworker
15 problem which might end up
conflicting so at some point CMS's will
have to start thinking about providing a
core service worker from the CMS itself
and allowing themes to tap into that
rather than every theme writing their
own but as I said for now I wrote my own
it's part of the theme and the first
problem here is that the serviceworker
file is part of a theme and therefore is
in the folder of the theme and by
default only gets control of requests to
the theme folder but obviously want more
than that
so my generic solution was to use the
serviceworker allowed header that
allowed me love the Circa file to take
control of a broader scope and it wasn't
really allowed and then it just inlined
my server can file with PHP and with
WordPress you could actually use the
mounting mechanisms or redirect
mechanism but this would be a generic
solution that works everywhere my
strategy must play you just cache
everything but it turns out I really did
get requests for everything because and
now at the root and that means I would
have to accept some stuff and that would
be things like the admin panel which I
really didn't want to cache the theme
preview inside the admin panel that I
really didn't want to cache and general
of some external resources that were
kind of tripping me up and that ends up
with a none fetch handler that actually
gets a little bit messy with early
returns so again this would be an
opportunity for you as to provide a
function for you that figures out for
you if you could should be caching this
or not
my Sergi that I think Jeffie mentioned
earlier is stale while revalidate so it
means I just sent or request the network
and the care
and if there's something in the cache I
use it straight away no matter if it's
stale or not just to be quick and I can
update the cache in the background one
thing it is super important if you use
the strategy is make sure your each hex
work because otherwise where the
validate will become fairly expensive so
every request will also new request the
network to check if it's a newer version
at the server and if it's not it should
be super cheap but it will only be cheap
if your e-texts work so make sure that
it actually you see this in chrome lots
of three or fours lots of very cheap
requests but as I said sometimes there
is something newer sometimes your cache
will be updated and the question is what
you do then and this is where the second
opportunity for my message bus came into
play so this is my stale wire stale
while revalidate implementation where I
ever had I go to network and the cache
and then I wait for both the network
response and the cache response and
figure out if they're changed and I used
the each hacks to figure that out and if
it's actually the case that there is a
new resource I once again send a message
to my message bus but this is running in
the serviceworker and that means that
this message will be broadcasted to all
the open tabs and that means that every
tab independently now has one of these
micro servers again running that
subscribes this event and can check if
the updated resource is either a core
item like the header the footer the
header image whatever or is the item
currently on display and if that's the
case it will fade in a green banner as
you can see in the screenshot and asking
the user to reload and I think this is a
it's not the ideal experience in terms
of user because they still have to
reload but the something that's very
easy and very safe to do the last
feature I want to talk about its
background sync the thing I did so you
can comment while you're offline and
because navigator online is a lie don't
rely on it if it's false you know that
you're offline if it's true you don't
really know if you're online so you
should always have a social worker in
place to capture these kind of requests
the recipe I used is pretty simple
I basically catch my post requests for
the comment in the serviceworker and i
synthesize the successful response so i
try it up what WordPress does if you
actually send the
comment to an online version and it just
redirects you back to the blog post
which kind of makes sense and so the
serviceworker just sunt Assizes that
response and i straw the actual request
in the queue and ID be trigger a
background sing
whenever the back ones thing comes back
to me and says i think i'm online we can
try to actually send these things i just
go to the queue and i EB and send off
the requests again here's so if you
remember this my early returns there is
one early return for comments and the
post comments as I said is just it
doesn't do anything if you don't have
back ransom support and it just go
straight to the networks and fails or it
doesn't and otherwise I just generate a
302 redirect back to the blog post and
put everything in my queue in the
serviceworker now here's the thing that
frightens me a bit first of all it's
open source that's all it's scary like I
would love for you to look at this and
if you're a theme author maybe rip out
them features put it into your theme but
I'm not going to give you the the hosted
URL which is just one of my tiny servers
hosting this thing so I'm assuming it
will go down but go nuts give it a try
let me know what you think I would love
to hear it and now for the last couple
of minutes I would like to invite dan
back on stage so we can talk about the
future of WordPress and pwace
okay so you've heard of like a lot of
exciting information here today and I'm
sure because it's late afternoon your
brains were super receptive and it
wasn't just all flowing out your ears
but you know I do want to just say that
what we've discovered through this
process was actually even more exciting
than what I thought we were gonna find
like I thought we would find one or two
things that are like that's a cool hack
but really like the whole surface area
of this whole PWA space is amazingly
exciting for content rich websites and
so what I would love for everyone to do
is if you are interested in broad
adoption of this technology think about
WordPress as a platform for getting that
adoption and check out the jetpack
branch that we linked earlier in the
slides and if you are a wordpress
developer interested in this technology
do exactly that same thing go check out
that branch and and see if you can learn
a bit about progressive web apps and
what they could mean for the users
around the world and I just want to
thank Google for the amazing opportunity
to get up here and explore this
technology and in 2018 we're going to be
rolling these features as they're ready
into jetpack and across the web thanks
very much thank you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>