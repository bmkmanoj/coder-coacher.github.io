<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>4 Years In The Life Of A NodeJS Based Platform At Conde Nast | Coder Coacher - Coaching Coders</title><meta content="4 Years In The Life Of A NodeJS Based Platform At Conde Nast - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Coding-Tech/">Coding Tech</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>4 Years In The Life Of A NodeJS Based Platform At Conde Nast</b></h2><h5 class="post__date">2018-04-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Rj-6Fch6Swc" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">my name is Ryan I work at Conde Nast who
here knows what Conde Nast is oh my god
excellent no we don't own reddit it's a
sister company to Reddit we kind of both
roll up into a bigger umbrella
corporation but the sort of story I want
to talk about today is the sort of kind
of NASA's journey through the last four
years or so using node as kind of like a
force multiplier if you will for our
engineering team I started at Conde
about a little more than four and a half
years ago and we kind of embarked on
this journey to do all this stuff so
just real quick kind of naso so what are
the brains have you owned there's a lot
of them allure traveler GQ Vanity Fair
The New Yorker pitchfork all these
brands are kind of on the sort of
cutting up underneath economist umbrella
and a lot of these are household names
as well so four years ago I joined when
Conde NASA's engineering team was kind
of going through a changing of the guard
if you will a bunch of people have left
in the media industry in New York I'm
from New York it's fairly incestuous you
know if you're not at Conde you're at
Hearst if you're not a Hearst then
you're at the New York Times but there's
this huge kind of exodus of engineers
for a whole variety of reasons and when
I join with my colleagues there with the
current CTO we essentially had two main
objectives one was that we knew we
wanted to make our own content platform
for Kanye and asked Condes business is
in the publishing industry it makes
sense as kind of a core business
capability that we should have some say
of how that functions and the second
part was we kind of needed to reinvent
the engineering culture there at Conde
Khan is a very old company write over a
hundred years old the publishing company
traditionally not considered a
technology company by any stretch of the
imagination but in the last four years I
think we've done a good job of kind of
rectifying that perception through a lot
of the choices that we've made right so
with those two goals what were the
choice area so the first thing we wanted
to do was make a very service services
oriented content platform and we want to
you know neither me or my colleagues
were in the media space or publishing
industry and we're just generic
engineers and we always architect the
system using services so we knew we want
to be an API first and then the second
choice was essentially just choosing
node as the preferred runtime and
therefore javascript has this sort of
lingua franca for the entire org and so
not only is the platform written in
JavaScript and runs on node but all the
sort of corresponding
client applications which I'll refer to
as kind of user land these are also
written in JavaScript and running on
note as well and so these are kind of
interesting and fun to do at the same
time back then in 2013
you know note is only on point eight and
the sort of ecosystem was still kind of
growing but we kind of latched on to
that wave right so I wanted to talk a
little bit about the architecture four
years ago I mean I think this is kind of
indicative of any engineering
architecture that will grow over some
period of time through various phases of
ownership at the time when I joined
there were at least four different
content management systems across
seventeen different brands the one on
the left MPP is was like a custom
homegrown java thing that was feeding
off a bunch of XML file system stuff
anybody whose team sight before good
okay yeah there you go so it's a it's an
older system very xml focused
we had a movable type so the content
entry would all centrally all happen
below and there would be these cron jobs
a mixture of cron jobs and scheduling
systems that would kind of feed in xml
file system or file system that new has
xml on it oracle there's a solar cluster
running around and then we had wordpress
we had cq5 as well that was a bosch
migration that I won't get into but
there's a whole slew of systems and the
sort of thing that we want to
approximate was essentially a cleaner
more generic domain driven design of
services right so now what we have today
is you know a generic API gateway we're
using Netflix Zul and then every single
service behind it you know micro service
or services does really matter the term
is very domain driven right so we're big
believers in DDD so one of the domains
that we have is content that's just a
generic bucket of stuff and the sort of
persistence layer is MongoDB and
elasticsearch I use the dot dot as an
indicator for kind of other domains that
we have so we have got other domains
regarding users and data and some
intelligent systems that feed all to the
Gateway but the sort of service area
that we provide for the ecosystem is
very uniform and so the editorial UI
which Christine is here with my
colleague she runs that team that's an
ember application and the sort of Vanity
Fair comm and GQ comm these are all
essentially just other node slash react
applications that just consume content
from the same data set that the
editorial application is actually
running into so it was a very sort of
normal way of doing things
so yeah and yeah so highlights so like I
said before you know I think if you look
at older
well not older but like some of the
existing content management systems
today you know 'pn source or not django
WordPress site core all these things
kind of our three things in one right
it's the editorial application it's the
sort of persistence layer and it's the
rendering time all bundled into one
so being services or anything we want to
split all these things into separate
domains go
so each leg of this tripod gets peeled
out into its own thing
and we knew that we wanted to be very
hyper media friendly like the whole API
right now is all rest based and very
hyper media focused and it's also very
linked data friendly anybody work with
link data before or RDF yeah cool all
right so in the sort of information
world or text world being linked it over
already a friendly is really good for
semantic reasons and we wanted that to
be surfaced as highlighted a surface and
highlighted as a first-class citizen
within our internal platform and
obviously with that it drives my third
point so most the content is modeled
like a graph and so the more unique
aspects of our platform allows us to
very quickly create new relationships
between new content nodes so for example
a person object in the context of this
article could be the author but within
the context of a different let's say
gallery or whatever it could be the
photographer and we can express that
really semantically really semantic
semantically rich relationship very
easily and obviously the pinnacle for
any content platform is data devoid of
styles right like nobody wants to have
HTML markup or see it inline styles or
whatever embedded in the in inside the
core data makes the content or data less
flexible that's portable and so our
choice for that was essentially a
markdown so this entire platform is
driven off of markdown much to the
chagrin of most editors we actually
interesting no we actually use our own
flavor of markdown we call it co-pilot
markdown but it's got some additional
bells and whistles to support our use
cases so just cook a valuation of a
scale right so this core platform does
about 2300 requests per second which to
be honest is a little on the chatty side
like our workload is very read heavy
most of our traffic probably at least 90
percent of our traffic is front of bike
fastly
which is a fantastic CDN and then our
just to give you a size of the content
graft
about ten million notes give or take but
in general like this is I just want to
give a sense of scale for how large this
is and now that most of Kannan s is on
the same platform it gives you a sense
of like where we are in terms of scale
yeah so all the brands are on one core
platform which is great and all and I
wanted to structure this talk kind of as
a retrospective but you know not only
all the brands are on the same platform
but JavaScript and node are essentially
again the preferred runtime and language
for all of the the entire company there
are certain spots within the
organization that where it doesn't make
sense for example a lot of our
intelligence teams and beta analytics
teams use Python just because the tool
sets there and the engineers are there
are are used to it
but for the most part any sort of
consumer application or intern
obligation will be written in a node and
react first right so retrospective so I
think if we look back four years ago
there are two main buckets kind of that
we can look at kind of like the
organizational impact of choosing node
but also standardizing a language in
runtime and then the other one is
recruiting yeah so I'll get to
recruiting a second so obviously
choosing a single runtime and a language
offers a lot of efficiencies especially
from the operation standpoint right so
our DevOps team only has to support one
kind of runtime in one language and you
know from a knowledge transfer or a
knowledge kind of sharing point of view
it's also massively efficient because
there's no there's a lot less context
switching across different languages but
I think the last two points are much
more of the kind of interesting
observations that I've seen the last
four years so the second point
engineering curiosity satisfied a lot
easier to this I mean like when there's
an announcement like let's say a
shipping email goes out to the entire
Oregon says hey you know the x y&amp;amp;z team
delivered this new application take a
look so on and so forth
engineers and our in our company are
fairly curious by nature and being able
to kind of you know rip open the code
and just immediately look at it and croc
what's going on because it's all
JavaScript has been I think a tremendous
positive that's somewhat not
quantifiable but I think the general
vibe is that it's a lot easier to kind
of
can choose ideas and share ideas from
and then the third one that is kind of a
builds upon the second point which is
that the user land ecosystem so all the
client applications written on top of
the platform is affine right like when
all of user land is in the same runtime
in the same language people can share
modules share libraries share whatever
and that enables you know a lot more
richer interaction with the entire
ecosystem so in the same way that you
know like this morning we were hearing
all the benefits of NPM which there are
many of having that same idea and
structure is really valuable from a from
a department standpoint I mean I think
these two are not necessarily indicative
of nodejs but I think it's amplified by
node largely because of the types of
engineers that come out so a lot of
front-end engineers who come you know
they can use other other front-end
modules whereas if we were let's say 10
years ago we were doing Java and doing
jsps for some reason you know maybe you
had an internal nexus maybe you didn't
but the sort of co-chairing wasn't as
strong right so but so I think four and
a half years ago again like 0.8 and I
think you know my CTO will say that like
one of the reasons why we chose
JavaScript was from like this sort of
idea of you know a friend engineer
suddenly be able to code services or so
on and so forth I personally believe
that's actually probably been false in
general like application development is
still a different you know kind of
mindset of engineering than sort of
platform engineering and that's been
true for a lot of the stuff that we've
done so far so while it is nice to be
able to say as a front engineer or let's
say an application engineer like oh I'm
curious how the platform does this they
can certainly open up the code and they
can read it and drop to some extent the
types of problems that each one of these
respective engineers are attacking are
slightly different and again like I'm
not a friend engineer by any means but
like to see react grow to where it is
now it's just an indication that the
front-end code system moves incredibly
quickly and I think a lot of application
engineers these days especially in the
web app space they had to spend a lot of
effort maintaining their own knowledge
base on helping on what's new what's
what's coming up next
and that just kind of furthers the fact
that these are two different mindsets so
you spent you know application engineer
suspend it and have spending more time
focusing on all these new stuff and
react and then the last one obviously
like you know people I mean I didn't do
you know
yes or whatever JavaScript for until I
came to Conde I came from a JVM
background but event loop in async
runtimes can be a little bit tricky Matt
Raney from when you select boxer wrote a
great blog post back in 2013 about
unbounded concurrency anybody read that
paper before our blog post its if just
Google unbounded concurrency and boxer
you'll be like the first hit but it's a
great example of like if you don't think
about the implications of the event loop
you can kind of blow it out right like
and the sort of idea of unbounded
concurrency is kind of it can be tricky
who you here uses the library async
right yeah and there's like half the
methods in there have a thing for limit
right like you like do this but you do
these million tasks but only five at a
time right so that that idea is kind of
pervasive and time requires a little bit
of a mind shift for people that aren't
used to using fun times recruiting yes
so I think this is a big deal for us I
mean again one of the goals for us back
then was to essentially revamp the
engineering team and so we chose node
because we saw where we felt like it was
kind of on this huge wave and I think
we've we've the bet kind of paid off and
in general the recruit has been really
positive I think the pool of of
JavaScript engineers or people with node
experiences growing by the day and you
know being able to latch onto a singular
runtime and and to do that has been
really good for recruiting you know for
the recruiter team it's really easy to
say like okay there's an expectation
that you probably should have JavaScript
and that kind of opens up the door for a
lot more people and then for us we make
here at Conde not here but there at
Conde where I am we actually make a lot
of use of Walmart lab stuff which is
great we use happy we use joy a lot of
those products and we use ember as well
and we've sponsored conferences in both
but I think even beyond node
you know sponsoring and rallying behind
a framework or a runtime is really good
for recruiting right it makes you know
supporting sponsoring conference is
really easy like we support Lokhande
supports a ton of nodejs events and
stuff in new york city we support things
inside for ember and so on and so forth
so from a recruitment effort being able
to I mean in this case not being a
polyglot and just focusing on a couple
handful of frameworks has really been
really good for recruiting yeah but so
not all is gravy right so for my team as
a platform to
which is about you know 10 or so about a
dozen engineers finding people that have
like really strong either distributed
systems or platform cable should say
experience with building platforms as
well as nodejs or JavaScript back in
that time was like for you and none
I think the adoption graph from this
morning from rod about like you know
that sort of bell curve of where we are
is really also relevant to the
recruiting side too right I mean back
then four years ago you know only a
handful of people who are using node let
alone using node as a platform but now
we've kind of eased into it
we've rectified this internally by
saying at least for the platform side of
teams there is no hard requirement of
knowing in the JavaScript or node it's
really just being having fluency and
like really strong depth of knowledge
and at least one language and that's
served us pretty well and as we onboard
engineers they just need to learn
JavaScript and know um and then again
JavaScript I think for most people will
agree it's fairly easy to learn you know
it's you know you can console.log to
your heart's desire but it's hard to
master there's a lot of like dirty
corners of JavaScript that we're all
very familiar with um
regrets yeah lots of them I think mostly
regrets are probably not technology
related I think well who hears on kind
of like a shared services or platform
team ok so there's like a handful of you
but so who here has that frustrations
with their organization that should be
every hand in the room yeah right so
most of our regrets are largely around
I'm not necessarily around technology
right notice is good you know it's fine
it's perfectly fine it's fast it's good
but all the regrets move have we've had
so far are largely around reshaping the
way that this hundred year old company
has to pivot itself to go from this
magazine focus thing where you only pick
it up at the airport or at the dentist's
office into sort of this Tier one
digital company and that sort of
friction is really hard which brings me
to my second point
right good platforms are extremely hard
to do anyone who comes from an
engineering which is everybody's here
everybody here you know like engineering
and platforms in general it's a game of
abstraction right like it and good
platforms typically mean that they got
the abstraction right and getting the
abstraction right is a really hard thing
to do in any industry and so that's been
really really hard for us but it's also
a tremendous
right to see this company have like that
whatever diagram that I had before you
know five different systems kind of
coalesce into a single kind of API has
been really really rewarding so it's
also it's it's it's a tremendous amount
of work but it's the payoff is huge yeah
so major takeaways right so all of Conde
is essentially running on this one
platform which is which is a big deal
for us it was a long time coming
it took us a couple years to get there
migrating all this data on to our
platform but it essentially paid off
huge dividends for us I think the
biggest take a point take away is the
second point right which is that a
singular run time whether it's you know
node or JavaScript whatever is really a
kind of force multiplier for user land
stuff if your company in value if you're
a rails company you're able to share a
lot more code if you are a JavaScript
company like your nodejs shop you're
able to share a lot more code and so
having that has been a really really
great thing for platforms and again the
Third Point you know good platforms are
tremendously hard I think anybody who's
on a shared services team will agree but
those are most of my takeaways
anyway I'm papa Juan's pretty much
everywhere Twitter github and so on and
so forth and you know I think cutting
emails probably out of date but if you
want to email you can drop me a line
there I did I want to reserve some time
for Q&amp;amp;A I don't know if we have time for
Q&amp;amp;A I think we have time for Q&amp;amp;A like
eight minutes yeah I'd love to answer
some questions if anybody has</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>