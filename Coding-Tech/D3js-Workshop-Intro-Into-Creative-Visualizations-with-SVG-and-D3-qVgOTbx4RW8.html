<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>D3js Workshop (Intro Into Creative Visualizations with SVG and D3) | Coder Coacher - Coaching Coders</title><meta content="D3js Workshop (Intro Into Creative Visualizations with SVG and D3) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Coding-Tech/">Coding Tech</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>D3js Workshop (Intro Into Creative Visualizations with SVG and D3)</b></h2><h5 class="post__date">2018-02-22</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/qVgOTbx4RW8" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so for this particular workshop I'll be
covering these things so SVG paths d3
introduction to d3 so d3 scale selection
data binding enter append and finally
nesting elements and if we have some if
we have some time at the end then we can
also cover d3s
enter update exit pattern so yeah how
many people have worked with SVG before
hands up just like the back I'm awesome
and then how many people have tried out
d3 before how brilliant okay cool so
hopefully and by the end of the day
today you'll have like a decent good
grasp of how SVG paths work and then a
good grasp of like basic core d3 at how
D 3 works so that's the goal so let's
get started here's like I so my favorite
basic SVG elements I'm so here's
actually let me back up really quickly
and say SVG elements are very similar to
HTML and that it's an XML dialect but
there's like a little bit of differences
in how you might style them or how you
might position them so here's four of
the SVG elements that use the most and
SVG elements are really great for
visualizations because it's like a like
the building blocks of SVG are like
rectangles and circles and lines and
paths I'm so for rectangles for example
you need to be able to define the XY
coordinates and the width and height to
draw a rectangle can you guys see it
fine in the back or is it too small too
small
I actually don't we actually let me try
and see if I can make the resolution
good get any better no right um okay so
how about this just have it open on your
laptop cuz everybody has a laptop right
okay have it open on your laptop and
then follow along yeah cuz this uh this
like service I use if you can see like
I'm zooming in and like it so it's great
because like it's it's scale to fit the
screen exactly as it should but it means
that I can't actually zoom um so yeah so
if you can't see anything please just
refer to the slides and your how you
should have the slides open anyways
because there's links to the exercises
links to Coast limpets and everything um
so yeah so this is all of the SVG
elements I use the most often and today
we'll be playing with the path primarily
so SVG paths I actually like asking this
question which is how many of you use
illustrator or know how to use
illustrator awesome so for those of you
that have ever used illustrator or
actually even the if you use Photoshop a
lot and there's a pen tool in Photoshop
remember how I'm will you draw a path in
Illustrator or with the pen tool in
Photoshop you basically like put down
your first Anchor Point right and then
you put down and then you click again
and you put down
sorry not anchor point sorry you put
down your first point you click and you
put down your first point and then you
click and you put down your second point
and then it like draws is temporarily
line between them right and then
actually and then it kind of looks like
that and then there's like two little
anchor points that show up and then you
and then you can drag those out like
maybe the anchor point will come out to
here and maybe you'll drag the anchor
point out to here and as you drag those
two anchor points the path starts
curving like that's right
do you guys have experience with that
cool so I'm in SVG paths when you draw
curbs so there's a few different um yeah
you can't really see but there's a few
different commands for SVG paths there's
the first there's mm so that's the Move
command and the way you use this is we
might say M 0 0 and that means move my
cursor basically move to position 0 0
where 0 is X and 0 is y so in this case
it might happen that you said okay move
me to 0 0 and then for us to draw a
curve and SVG paths the command is C and
this one I'm gonna so C goes first
Anchor Point
a x1aa y1 and then second anchor point
and then finally your x2 y2 and I will
explain that right now so let's say so
actually let me try and color coat this
this is this and this is this and
finally this is this well these are
great markers I just heard it ah yeah
yeah is it gonna be alright if I told
you okay
yep so yeah did that make sense and I
can't explain more like I can do more
examples so let's do it this way
so let's actually draw her so let's see
okay
let's define here is my x-axis here's my
y-axis here's my zero zero
um and then can anybody tell me why I
drew the Y going down yeah the screen
the screen always um with SVG your x
increases as you go right and your Y
increases as you go down that's how it
is for like most drawing if not all
drawing programs right I think yeah yeah
I think um so yeah let's do this
um let us draw a curve should we call
this maybe 10 wait that's 10 over and 10
down let's say our ending point is at
that's probably 100 right so 100 and
then 10 so this is our beginning
actually so this is our beginning and
this is our end and let's actually
together start draw a start writing down
the SVG path command yeah so help me
with this so
for this point the way that we tell SVG
paths that we want to keep begin at this
point we say move right because we start
we always move it's like you tell SVG
paths like pick up the pen and drop it
at this point so we start at this point
and we say move ten ten and then let's
do this so let's say our first anchor
point is right here
and let's call this 20 maybe 2000 second
anchor point let's call this an e zero
and so we're going to draw I should have
done this in red
and so the final curve will look like
this yeah so help me with this um what
should my SVG path command look like now
that I have M 1010 what should be the
next come in hey I hear you yes see and
then what's my x and y the first x and y
awesome thank you and then the next one
cool 80 0 and finally that was easy huh
that's it that's all you need to draw a
curve and that's like pretty much the
most powerful thing you can do with an
SVG path like draw a curve and that's
all I took so as long as you remember
your first starting point you move to it
and then you give it your first anchor
point your second anchor point and your
ending point and that's your curve then
let me teach you another one that I use
a lot of times which is L do you guys
want to guess what L is yeah mine too
I'm gonna fit that down here
and that one is also just thanks why
it's very straightforward so basically
that one is wherever it basically says
wherever um wherever your cursor is
right now do not pick up your pen or
basically wherever your pen is do not
pick up your pen and just draw a
straight line there so basically this is
your ending point so if let me see so
then I guess I will now just keep
calling any but I'm gonna use red for my
ending points so this is basically an
ending point so let's do hmm
shall we try doing that uh the cherry
ball blossom petal from yesterday are
you guys interested in that we'll go
through that together because because
the goal is for you to make your own
cuddles so once we figure out how to do
the cherry blossom petal then I'm going
to give you guys about 30 minutes to try
and come up with three petals of your
own I'm and that's why you should also
have pens and paper right next to you
because I found that um it's it actually
really helps if you can like write out
for yourself like all of the different
paths as you're coding along so let's
start out with this
uh-huh let's start out with this time
let's do like huh here's my eggs and
here's my Y let's start up huh
hold on oh wait I don't know I shouldn't
do it that way
okay let's do this you know why that
here's my zero zero here is my a hundred
zero here's my zero a hundred and then
how did I roll my pedal
cool okay
I am torn oh well we'll do it this way
okay so let's draw a petal that looks
something like this and then we're gonna
figure this out together so very first
point this probably looks like 50 zero
right so what's my first command M and
then 50 zero right okay now we have
let's figure out all the points for this
one okay this one let's see this looks
like 75 75 and then what my Y would be a
hundred right great right okay yeah I'm
pretty bad at math so you need to
correct me okay so many five a hundred
actually let me do it with the right
colors then first Anchor Point is blue
okay so we're gonna just like
guesstimate cuz obviously like we can't
quite figure it out right so guesstimate
for me what that anchor point might be
eighty and then this one thirty yeah
there's like no wrong answer it's just
like the pedo might look a little bit
different from that is all yeah I'm then
second anchor point
oh it's probably it probably should be
80 right ah
should we try 90 and then the why
somebody and so now it should be the
command is what should the command be
now
we're drawing from here to here now see
80 30
yeah cool 75 100 I'm just to make sure
I'm writing big enough for the back
right can you guys see you in the back
this is all right no bigger okay I'll
start writing bigger okay I know right
here
what should this be 50
16:56 t-55 wait Hana
well then remember remember that this is
a hundred fifty-five would be like
really yeah sooo 65 you guys want to do
65 we're gonna put this all in a
computer soon just to see what it looks
like by the way yes so let's do that so
I'm gonna try and write bigger is this B
is that good in the back okay I'm
alright cool so now again another line
thank you
another line 25 and a hundred and
finally another curve back remember this
time around we're trying to curve this
way so our first anchor point is
actually over here and then our second
anchor point is over here so let's do
that
so this one I heard 10 just now ten
seventy cool then I'm getting confused
with my clothes okay 20 20 20 right 20
30
yeah so that's a what what do I do now
see see ten seventy twenty thirty and
then we end here right fifty oh wait
that's a red so this is this point is
both our beginning and our end so 50
zero that's it there anybody put in the
numbers and then it's like really weird
to keep oh and a final new if I you can
put in Z and Z just means closed path
yeah let's try putting that in you're
gonna have to read it to me because I
can't see it
okay you start with it was M 50 zero
right and then see what was see hey
thirty oh yeah right what oh really
wait wait I don't
okay I don't know oh there we go
wait humming oops cool thank you
does that help I'll try that in a little
bit okay oh um I forgot to mention click
here for a started code and then I'm and
let me actually go through this is like
a little bit of an online editor that a
lot of the d3 community uses it's called
block builder org and then all you need
to do is sign in with your github so
where I have my little picture um it
should have a login for you I'm login
with your github hmm and then I just
fork my starter code for kit for
yourself so that you can like start
saving it for yourself and then it's
pretty straightforward um eight live
updates um and then the one that I like
using the most is a that little oh you
can't see it on
and let's see
okay so I typically like hitting this
one so that like the editor is right by
the preview section and I think for now
that's all you need to know I think and
then I'm for that piece of code and you
can this is basically my original code
for the flower petal and then we're
gonna put in another one right now
and then I should have yeah huh oh thank
you
now you need 70 75 100 and then 50 65 oh
do you see it showing up right there and
then the next one is another l/100 thank
you
and ten seventy twenty thirty thank you
well how does it feel it's just like
it's a little bit like narrow huh I like
it
okay cool okay was that fun was that fun
with friends okay all right so what Mike
Mike look it actually is pretty good
right now
no thank you okay so we're moving on and
we're going to cover two things before
we break off for an exercise again and
we're gonna cover scales and we're gonna
cover a selection and data binding so
from now on we're actually covering a d3
functionality so I guess before we get
going
um I guess let's talk about d3 a little
bit so I'm guessing everybody in here
has heard of c3 and a lot of you have
tried T three I'm su for reference here
is the d3 website and here is the
documentation and I tend to go to the
API reference all the time um which I
have to admit is like really humongous
and kind of intimidating and I'm just
because there are so many different
modules that have like so many different
things that you can do so my goal for
today is that hopefully I will cover
enough of the basics that you feel or
right going through the reference we'll
see I'm but for now the first thing
we're going to talk about is this one
right here with the scales and then
we're going to talk about selections
which is like the one right
after that yeah see okay
so let's start out with the scales does
anybody want to guess what skills are
good for before we start thanks thanks
and okay I guess I guess I did walk
myself into that one thanks uh okay so
um I don't know if I should be standing
up or stand this okay so this is what a
very typical d3 scale looks like so one
of the one of the most basic ones is
scale linear which just means that I'm
with your domain you have an input your
domain and you have an output your range
and it is basically a one-to-one mapping
so it's a linear one-to-one mapping
between your input and your output and
there's a few others that I'll mention
further down the line but for now like
let's just use scale linear as our
example and so the way that I like to
think about scales is like I'm sure
you've done lots of skills and like math
class back when you were in school or
maybe even though I don't know
I'm but like I guess when I was um the
way that I like to think about scales in
the sense of d3 in terms of data
visualization is that we use scales to
map from the input data to the display
and what I mean by that is oftentimes in
data visualization we might have a data
set that's like you know there's the
date and there's some sort of a value
let's take for example you know average
city temperature across a year or
something and maybe you want to put that
as a scatterplot or like a line chart or
something as your visualization and so
in that case you might think of it as
your
our x-axis is your time to like the date
across say a year and your y-axis might
be say the temperature across time and
so in that case your domain would be the
date or the time and that date you can
map it to the x axis the x value and
that's your output so your domain in
that case is the date and I'm your range
your output is the x value and then me
me you have another one that's your
temperature is the domain so your input
and your output is the Y value and maybe
for whatever reason you also decide to
map some other data attribute to opacity
etc etc so in data visualization we
think of the input the domain as the
data attribute and we think of it as
we're trying to map the data to
something on the screen so let's take
for example some of these things um so I
just drew something like I just wrote
down some things I'm so for example
maybe your domain is your minimum is 0
and your maximum is 100 and your range
your minimum is 0 and your maximum is 1
so if you put input 0 you'll get back 0
if you input 20 you'll get back to 0.2
if you input 75 you'll get 0.75 a
hundred and you get 1 or like maybe for
this example and maybe you want to do
something like your data has a min and
Max of 0 to 100 and then maybe for your
range you want to do 500 is your minimum
like you want to map your 0 to 500 and
you want to map your 100 to 0 um and the
reason why this might be something you
want to do and the reason why we use
scales so often in d3 and in data
visualization is because this work
hmm whoa
cool who wants this anybody want this if
not I just look over here thanks for
taking them okay so the reason why we
might want to do something like the
input being zero 100 and the output
being five hundred and zero it's because
maybe sometimes you'll have say maybe
this is your temperature let's say in
Fahrenheit cuz there's that would be
really shitty if your city goes to 100
Celsius so let's do Fahrenheit is my mic
still okay back there okay I'm and then
maybe this is your Y this is your Y
value which means that let's say this is
your screen
which means that this should be your
zero zero and this is your zero five
hundred so then that means that for what
we're trying to do we're saying okay if
you know one of these days the sari
temperature is zero then we will want to
map it to 500 so for example what the
exact for that what we have is like
maybe the first day is 0 so we map it to
here and then the next day we have 20 so
we map it here and the next one is 50
and it's 250 here and it's 75 so it's
about right here 125 on the screen and
then a hundred is here and that's just
nice because so this was a zero degrees
run and this was the 20 degrees one and
this is the 50 degrees one this is 75
degrees and this is a hundred degrees
and this is nice because like without
that scale maybe you would have had to
do something like okay so it's zero
degrees but then like we need to or it's
zero degrees but then like you know we
need to like put it all the way down
here so like you have to do like the
calculation yourself of like you know
inverting and inverting the things for
the screen cuz like Y axis goes down
like that but now if you have a scale
you just say okay Matt my like Matt my
minimum two down here I'm at my maximum
emma2 right here and so just like you
don't even need to do with the math
yourself so scales is like the way I
like to think about it is it does all
the math I don't want to do for me to
put things onto the screen
so this is what I'm the code might look
like for a scale again a little bit
small so follow along on your screen I'm
so I have some uh I have some uh there's
just kind of fake data but um so maybe I
have a I say I want a screen height or I
want a height of six hundred as in like
I might I want my visualization to fit
into you know a height of 600 pixels
let's say and then let's say I have a
data set and maybe it's something like
it has a date attribute and the
temperature attribute and then here and
then maybe I only listed out two but
like maybe there's like you know 50 or a
hundred of them or something like that
we're like two hundred points data
points however many there is and all I
have to do is say D three dot min pass
in my data array and um give me back the
minimum date D three max give me back my
maximum day
is that pretty straightforward take in
this data array and give me back
whatever the minimum date is and
whatever the maximum date is really
straightforward right because you guys
all do JavaScript right wait yeah wait
sometimes so I've taught a lot of work
and sometimes if you teach data
visualization workshops sometimes the
audience are like data scientists or
designers and sometimes they won't know
they won't have like coding much and
like beforehand so like sometimes I
can't like sometimes I have to explain
like JavaScript concepts and stuff to
them but so like sometimes they'll ask
me what this arrow is like what the fat
arrow is and all of that so just make
sure everybody is like perfectly good
with it like fat arrow and all of the
syntax is okay yeah cool okay so the
mathematics is really straightforward
um there's another one um there's a
another d3 functionality that's like
really useful and it's called D that
extent and what extent does is it gives
back and you tell it what attribute
essentially like you tell it like what
you want them in a max of and then it
returns that in an array so like here
you're just saying d3 dot extent pass in
the data array and then you say okay out
of that data array and for each of the
data objects I'm give me back the data
the date attribute and then d3 will give
it back to you as an array of men and
Max and that's cool because um you want
to pass the the domain D threes dot
domain takes in an array of min and Max
so I'm in this case it's a where we're
basically taking the min and Max from
here and passing it into the domain but
um you could also have just put in like
I called this extent here right we could
have just a dot domain extent and that
would be the exact same thing
and then of course here what I'm doing
is saying the range is I want to map the
minimum to height so like I want to map
the minimum to the bottom of that
visualization and I want to map the max
to 0 which is like you know basically
the top of the visualization
alternatively I could have like you know
giving it some padding or something and
be like okay I want to map it map the
top to like you know 20 or something
like that but that's that that's that's
how I commonly use scales I'm and some
of those Oh
before I go on how does that sound quite
straightforward right yeah no confusion
okay because you're going to use scales
later in an exercise so if you have
questions you should ask them now okay
okay so here are some of the scales I
use the most often and I use scale
linear which is like basically like a
sense of linear and a linear mapping
from the domain to the range and I also
use scale log a lot so that's a
logarithmic mapping yeah from the domain
to the range so um scale time is really
great for dates so you put in so for
that one the input needs to be a
JavaScript date object and then you can
the range could be anything the range
could be like usually the range is
actually the range should be numbers um
and so that one's really helpful
especially if you have like for example
an x-axis again that's like the input
the data input is date objects and then
you want to like map it to your x-axis
and then the there's some scales for
ordinal scales so the previous three are
the continuous skills that I use the
most often I mean for ordinal ordinal
just means that your data might be
categorical so instead of categoric
categorical and has an order so whereas
continuous could be like 0 1 2 3 or like
you knows
0.1 0.2 like it's it's a continuous
scale ordinal could be something like
mmm something categorical Nadi what's a
good ordinal scale example I'm gonna
call on you thank you I really like was
it I couldn't remember one thank you huh
we did yeah yes this is good one uh yeah
t-shirt sizes yeah and you being
categorical and you being discreet you
it's been--it's it's kind of hard
thinking up here sorry what orders
what's the discrete one that doesn't
have order no no I mean what's it called
I can't remember like scale cuz it
because it so okay okay okay thank you
um yeah those were good ones okay so
scale band um for that one
let's see T three so here is um the
reference for a d3 scale and so some of
the ones I mentioned so there's
continuous and you can have linear power
log identity time sorry the ordinal once
I mentioned just now was a it's a band
it's like basically I'm what happens is
for so each of these blue like boxes are
basically a cat like a like this could
be Monday Tuesday Wednesday so like your
domain is like Monday Tuesday Wednesday
or you know
small medium large and then your range
will be like it will literally calculate
for you and so this first box should
start at 10 pixels and the next one
should start at like 30 pixels and then
40 pixels or something like that you can
just set you can tell it I want the
padding between each of these boxes to
be 10 pixels or something and then like
it will calculate all of that for you
it's really nice um so yeah so it looks
like it looks like so this is like d3
scale band and you can say my domain and
you can say the range that it should
take up so like maybe here it's like the
domain was the three the three things
and maybe you're right yeah he actually
says that really nicely so your range
maybe this was like 0 to 600 or
something like that and then maybe I
like told it that the padding's were 10
each and they will calculate the
starting and ending point essentially or
sorry it would calculate for you yeah it
would calculate for you the start and
end for each of the domains that you put
in the categorical domains that you put
in so some really nice functionality in
here and that you can check out if you
have the time but uh yes so those are
the ones that I use the most often yep
okay so we're gonna so that's the end of
scales yeah yeah skew order no it's not
a thing is it not great wait oh my god
it's a thing oh my god Nadia I told you
you should teach this workshop yesterday
I told everybody that snotty is teaching
this workshop
thank you I learned something actually
so it was actually I think I remember it
being in v3
and then when they went to v4 I think I
just like didn't find it like I think I
just like always just went straight here
or something and I thought that he took
out ordinal like I thought he took out
scale or no so yeah yeah I'm really
there's stay order though hope so oh
yeah and then this is the colors that
Nadia is talking about so you can have
um yeah so you can input usually it
assumes wait given the number T in the
range 0 1 yeah so assumes like you give
it some number between 0 1 and it will
give you return you a color just really
nice cool let's move on
okay so we're gonna get into D 3 D 3 now
I'm so let's start with selection and
data and let's start out with this piece
of code so this piece of code basically
draws this very ugly bar chart and so
let's talk about how it's doing that now
let's talk about first of all here's our
SVG and there are five rectangle
elements in there and here we're saying
okay d3 can you go and select all of the
rectangle elements that you find that
you find in this Dom this document so
select all the records and rectangle
elements that exist in which case it
will go and select all five of these
rectangle elements because that's what's
in the Dom right now and if you actually
console.log what d3 does select our
rectangle returns this is what it looks
like and this is what this is how D 3
represents its selections underneath the
hood and in a bit we'll play with this
and then I'll ask you guys to like also
a lot of things and then I'm but for now
what you need to know is that underneath
the hood at d3 selection is basically an
array of a race weight it's a it
basically wraps all of their Dom
elements into an array that I can then
do like a bunch of operations on and
then here we say dot data and we pass in
our data set and our data set always has
to be an array it can be an array of
numbers it can be an array of you know
strings it can be an array of objects
but it always always has to be an array
and that's just because um
this is what's happening underneath the
hood so when you do dot data when you
find data what diri is essentially doing
is it's saying okay we've just selected
all of these rectangular elements and
now I've been given this data set this
array of data we're going to map them
one-to-one so here was the data right
like this is the data and it's a hundred
250 175 200 120 and here's all of the
rectangle elements that gotta selected
so d3 underneath the hood when you do
dot data just says okay 100 goes so the
first data element goes to the first
dollar first rectangle element second
one to the second third one to the third
fourth one to the fourth etc that's why
both of them like that's why the the Dom
selection that the rectangle selection
is in the array under the yuka hood and
that's why the data that you passing
needs to be in the ring because it's
gonna do that one-to-one mapping and
again this is what I'm it looks like
underneath the hood so if you go and now
console.log what d3 select all data
returns this is what it returns so now
here's the interesting thing
how does d3 bind data and so it
literally is putting in an for it's it's
literally putting into the rekt element
like this attribute underscore
underscore data underscore underscore
120 and so if you open up any of the
previous rectangles you'll see that if
you open up the first rectangle it will
have underscore underscore data 100 and
this one will say 250 175 200 and that's
how later on when we talk about how to
use the data that's been bound and
that's how D 3 is getting the data
that's been bound to the element and
using that so let me show you what I
mean by that
so now that we've found data to the
elements we are going we want to say so
right now we're doing attribute X
attribute Y attribute width and
attribute height and that's how you draw
a rectangle so yeah so I attribute X Y
width and height um and so essentially
what's happening here is we're looping
through each of the rectangles in this
election and we get passed in a data and
then index so you can see here for
example for the X attribute I'm getting
passed in a D and then I and that D is
that data that got bound to that element
so a little tiny little thing that's
what happens if I console.log the index
the data and the element itself
so let me try and see if I can walk us
through it okay let's do this let's walk
through the XY with height attributes
together so we have data a hundred we
have data 250 we have 175 200 and 120
okay and then we have rectangles 1 2 3 4
5 and let's together calculate what our
X Y width height is for each of the
rectangles yeah okay so help me here um
essentially so okay so X is supposed to
be I times and I think wrecked with I
define us thank you rekt width is equal
to 100 so wrecked with I just realized
you guys in the back can't see this hot
okay uh okay all right bigger okay so
for the first rectangle
what's my eggs thank you
why is height oh cool wait Hana height -
- D wait but what's my D yeah yeah wait
hold on actually let me do this really
quickly soo D is equal to 100 sorry you
guys in the back I is equal to 0 D let's
say D is 250 for the second one right
and then this is 175 200 120
okay so what's why what's why for my
first one
thank you and then what is w for my
first one
Oh
thank you and then height is why with
deep so do you would be a 100 cool okay
alright let's do X for this one is thank
you
100 y is 600 minus my data was my data
cool
350 my width is the same 100 okay we
don't have to do with because it's the
same every time
hi cool
we'll do the third one and then and then
we'll move on because I'm pretty sure
you guys got the idea right yeah so X
thank you
why 600 minus 175 five thank you
and then hikes five seven five cool so
did that help that's essentially what d3
is doing underneath the hood because I'm
it just basically for each of the
attributes um it executes the function
that I've passed in given the data and
the index
so here I want you guys to take like ten
minutes and I'm I believe Oh Glenn do I
not have oil mmm I don't have to code
for this one
okay you mean like a minute to try and
find that block or sorry about that code
so that you can play with it actually
No
No
okay so now try refreshing
then go to this link so it should be
right after this slide there will be
this link and open it up and that will
be that will be the bar chart this ugly
bar chart and then what I want you to do
is take five to ten minutes I'm open up
your dev console and just like try you
know like comment out pieces and then
just console.log for example just
console.log direct down here and then
try looking at what that outputs so here
for example when i console.log just the
d3 selection you can see if I open up
groups it gives me this array of
rectangles and those are actually
rectangles in the DOM and then for
example if I uncomment the dot data part
then the array of if you go on their
groups you see that array and if you
open up these rectangles all the way at
the bottom you'll see the underscore
underscore data that's bound right here
and that's how D 3 is quote-unquote
binding the data to your selection of
Dom elements and that's how underneath
the hood d3 is basically when they loops
through the dom elements to you know
apply your function to like you know if
you want to say ice attributes or y
attributes and all of that that's where
it's getting the data from that you
found so let's give ourselves five
minutes to just go through this code and
you know common things out console.log
things just so that you can get a little
bit of an intuitive understanding try to
like you know um I lost socially just
trying to put like for example in terms
and instead of like doing
returned items with or something in
chili just doing zero or saying
something and like seeing what happens
like play around with what the functions
return so that you can kind of you can
get a intuitive feeling of what's
happening and uh if you want to like do
it with your table partners and then
like you guys can kind of explore I
think the two most important things is
understanding what each of these
functions return or sorry each of these
lines return and number two and playing
around with what each of these functions
return for each of the attributes and
how that affects the overall
visualization cool let's go on to three
twenty particular moment there's no
rectangle elements so it selects nothing
zero answers an empty selection so how
are those bars those five blue bars even
appearing and the answer is that part
that's the magic that's what I like to
call a d3s black magic
so those three and those three are not
functions yeah those three functions
that are chained together the dot data
entered append those three together are
what creates those rectangle elements
that you saw earlier so let's go into
how that's working so first of all we
have the function data and you saw like
if you saw previously that dot data what
it did was it looks at the selection the
d3 selection and it compares it to the
data that we pass in right so previously
it have five rectangular elements and
they have five data elements and then
was able to just kind of one-to-one map
each of them but this time around
as you can see no d3 is like well wait I
have 0 rectangle elements so it's like
completely empty over here and I have 5
data elements on this side and d3 goes
oh okay so for me to be able to sync
that like I need to be able to match
them up one-to-one so for that to be
able to happen I need 5 rectangles to
match the data right super
straightforward and so then it will
return that imp like that data will
return that information and then we'll
say ok you know to have the data and the
rectangles the tablet data and the Dom
be in sync we need to create five new
rectangle elements and then and then da
enter will go and say okay I'm da enter
we'll say okay so we need five new
rectangles put in place holders and bind
that data and finally that append will
say okay create a rectangle element for
every one of those placeholders that's
the three functions and that's being
chained together and that's what's
happening for each of those functions
and that's it that's how that's how
those a rectangles get made super
straightforward right like it's like
that was it I'm and I always forget
actually how like quick this explanation
is so do you guys want to learn how to
do update and actually also yeah awesome
and originally I didn't have it India
Nia plans but so to follow along for
that one go back to my website or like
the slides the slides comm / early woo
and go to this slide this set of slides
called a front-end masters d3 v4 and
open that up and so I'm going to really
quickly go to the section that's a
and exiting here which I'll tell you in
a little bit what slide number that is
because I feel like this is actually the
fun part did anybody's good - oh there
we go okay so update and exit is slide
25 I should start with slide 26 and yeah
so I'm just now we covered enter a pen
which as you can guess and what it does
is it helps us create Dom elements that
don't yet exist based on the data we
pass in right so when when a user maybe
first when when I'm when someone you
know first gets to our visualization
like when we first load a web page and
we start our visualization it might be
that like we just need to create a bunch
of elements like a bunch of bars a bunch
of rectangles or something like that
because they're coming into the web page
for the very first time obviously the
DOM is going to be empty so then I'm
we're going to be entering and appending
a lot of rectangle elements but let's
say after that maybe you have like a you
know a real-time visualization or
something like that and maybe that
real-time visualization is a series of
bar charts and then every let's say
minute you know it updates or something
like that so um in that case maybe some
of the bars have to get exited like
maybe some of the bars have to be
removed from the table maybe some of the
bars need to be updated and maybe some
new bars will happen and it needs to be
entered and and so how do we do that and
that's what d3 Center update exit
pattern takes care of so that enter
update exit is so that we can go from
one state to the next and update
accordingly so the way that it works
is I said 26 okay I think I sing so I'm
oh yeah this is a pretty good example so
the reason why we have the enter update
exit paradigm is this thing called
object constancy because you might have
in the data set like for example this
one is I guess top states by H bracket
and you know it says Florida and
Pennsylvania West Virginia etc and when
I change the data the underlying data
so this one is 65 years and older
actually this data set is always fun
because like Florida is like far above
the others in terms of like 65 years old
or older because like Florida has a lot
of we retire people and let's see like
you know maybe let's see what under five
years like which states have the most
haulers actually yeah I don't know who
that would be
apparently it's Utah Wow are you are you
from there okay that makes sense but did
you guys see also see what happened I
guess it's a little bit hard to like
okay let me switch back
c16 do you see how like you know they
there was an animation there was a
transition like it you know it went from
like because Florida is no longer you
know in the top 10 so it like got pushed
down and then there's a bunch of new
ones that that appeared and there's that
so that you can see some of them move
down some of them move up um let's try
this
I do you see that some of them remain on
the screen some of them do you see how
some of them are remaining some of them
might get updated and some of them get
removed
cool yeah and so this is the concept of
object constancy that like for example
if you have Florida and Florida you know
drops like say all the way out of the
age bracket like all the way out of this
visualization and then you want to be
able to show that between one state and
the next like you don't want just like
you know like this is Florida and then
suddenly it's Arkansas but like you
don't you don't get that like
consistency between the first state and
the next and I think and I shoot that
okay so to do that I'm the secret of
being able to map being able to kind of
maintain that across different data
states from one data set to the next is
this key function so up until now for
the dot data function we pass in a data
array right and that was it all we did
was pass in a data array now what we can
do is pass in this thing called a key
function and when a key function does is
controls which data which datum is
assigned to which element and so for the
key function we always always want to
return whatever is the ID of that data
datum and so that it can get assigned to
root the right Dom element so let's take
this for example let's say for example
that this is what's currently on their
screen so let's say for example that
we've already created our first set of
rectangles and this is actually what's
currently on the screen and here's all
of the data that's already been found
right this is actually our previous data
set now 101 250 175 200 and let's
pretend for now that this is also our
data this data that's been found is also
our key and then now
let's look at the next data set this to
31:20 the first thing you can notice is
that there's now six elements instead of
the fight so what that Dana does is the
first thing it calculates is it
calculates the update selection and this
says oh hey in a new data set there's
120 and 250 and that's also in the
current selection of rectangles so that
must mean that these two rectangles
match the data so they'll remain on the
screen this is our update selection
remember that term update selection
update selection is the selected and
selection of rectangles or a selection
of elements that will remain on the
screen and then d3 will say okay now
let's figure out what's extra in the
data the new data set that's not in the
rectangle elements on their screen and
it says oh it's these ones two 3301 4575
none of that is over here in the
rectangle elements and so I say okay I
need to be able to create four
rectangles to match the data and that's
the enter selection and finally that
data will say what are the rectangle
elements that are that do not exist in
the data and that's the 100 the 175 and
the 200 and so d3 will say okay this is
the exit selection and these are the
rectangles that we need to get rid of
these are the three rectangles that we
need to get rid of so that we can match
the new data set oh yeah so enter update
exit selection now that we have that oh
this is where I show you what console
logging it looks like so what this whole
thing returns is this so this is your
enter selection the enter placeholders
here is the exit selection the three
rectangle alignments that we're supposed
to remove and then here is the - this is
the update selection the
to rectangle elements that can remain on
the screen so if you if you console.log
right here
oh sorry this bar is right here that's
what it looks like underneath the hood
the enter selection the enter
placeholders exit selection and update
selection and then we want to save that
into a variable in this case I call it
bars so that right here I can say bars
exit and that gets me in that exit
selection room and then take that exit
selection and remove them from the
screen that gets rid of all of the
rectangle elements that aren't in the
new data that removes them from the Dom
next this should look this part should
look familiar right
there's bars that enter that append
right that's exactly the same as before
and then that basically will say I get
the enter selection for each of those
four rectangle elements append or sorry
for each of those four placeholders
append a rectangle and then we want to
set the attributes with and Stroke and
for the enter selection I like to chain
the attribute attributes that don't
depend on data so like if you can see in
here it's just a rectangle with and
their stroke because neither of these
are dependent on like it will not change
no matter what the new data set is and
finally here um we basically say give me
give me the enter selection as well as
the update selection so the bars one is
the update selection so combines the two
selections the enter and update
selections into one and that's
essentially basically what is what
should be on the screen for the new data
set and then
and then calculate the XY height and
fill for the enter and update selection
basically update the attributes that are
based on the data for the enter and
update selection and that's it so
actually with these few lines of code
you can actually um actually with these
few lines of a code you can actually
have that same effect that we looked at
earlier with the age population oh yeah
the only thing that we're missing with
this one is um we just how don't have
the line for animation and that Lant
line for animation is just like one line
um but this will take care of drawing
all the rectangles and updating them on
any data change isn't that really cool
that it's like only like what that's
like 15 lines or something and then
taste care of like basically all of the
animations and transitions that you saw
earlier yeah that's all you need that's
t3 that's the core of t3 cool um so it
is 340 whoo okay so is 340 so this is
the thing that I want to do next I'm
kind of pretty excited for this one so
I'm go back to go back to the workshop
slides and what we're going to do is
turn the petals that you've created
earlier into a flower are you excited
I'm pretty excited um so um here's what
we're going to do um I'm
I click on the starter coat and this is
the same movie data that I use in my
visualization and I've already kind of
like I've what's the word I cleaned it a
little bit for you
um so use this movie data and you can
say you can see there's like data for
the rating the IMDB rating and the
number of votes the title the parental
guidence rating etc um so here's the
three things that you want to do and
these here's the mapping so the type of
petal is your parental guidance reading
the size of the flower is IMDB rating
out of 10 and the number of petals is
the number of IMDB ratings so I've
created the scales for you in this
starter code right here so what you have
to do is figure out your domains for the
size and the number of petals and then
here's basically the path lookup so like
I just say the these are the parental
guidence ratings and you just need to
add in three more petal paths to right
here
does that make sense and then add three
in there and then right down here um
I've given you instructions I've also
given you instructions right here and
let's do this for about let's try until
four I'm tentatively and then we can go
through the solutions together um and do
this with your table partners
oh and I four and I forgot to mention
for this one and you don't eat the
update exit all you need is these scales
data enter a pen um so for this one all
you need to do is take the data and
create the petals you are amazing
oh and I will not be offended at all if
you want to click on the complete code
and then take a look at this like so
this is the complete code um but if
you're going to look at the complete
code I would urge you to not copy and
paste things over but like rather like
type it out yourself like oh okay um I'm
just like have a side-by-side type it
out yourself and try and figure out what
you sh line is doing and like try and
solve that with your table partners um
and then the hint I give you is that you
need to use SVG transforms translate
rotate and scale functions to do to be
able to get all the petals but you
should end up with something like that
but again yep awesome good luck well
there we go
yeah how did that go today I just go
from my zero to sixty really fast on you
know okay so how many people were able
to get a flower awesome Nadi you don't
count um but thank you so shall we go
through it together
awesome okay
so everybody's gonna help me okay let's
get started
so first let's set the domain for scales
and we agreed that there were two scales
so the size scale is with the rating
right and then the number of petals
scale is with number of votes so let's
use c3 that extent like we talked about
earlier so let's call that const size
extent it's equal to t3 extent and we
pass in the movies data and then we use
d dot rating you can console.log of that
size extent and then cause let's do the
same thing for num petals so let's say
num pedalos extent is equal to t3 dot
can you guys see it in the back or do
you should we turn off the lights with
that hope in the back were yeah now we
need to figure out how to turn off the
lights
oh you can see it okay okay i'm t3d
extent movies and then this time we use
devotees lets console.log that to known
petals extent
inspect element here hold on I'll move
it out of the way
awesome
so the minimum that we have is five
point six for rating out of 10 and the
maximum is that Wow I know which movie
is out of 10 out of 10 and then the
number of votes minimum is 16,000
maximum is 1.6 million okay so far so
good yeah so we figure out the min and
Max domain for both of the skills and
now we have to set the skills so sorry
set domain on skills and that would be
the size scale so the size skill that
we've defined up above right here
so you can see the size scale is a scale
linear with a range of 0.1 to 1 and then
the numpy dose scale is scale quantized
and I don't know if anybody looked it up
but scale quantized is this super useful
thing that takes a continuous and
continuous domain and maps it to a
discrete range so what that means is if
you think about it number of votes and
just now you saw the number of votes is
like 16,000 oh here you guys can from
16,000 to say 1.6 million right so
that's like a continuous number that's
our domain but number of petals we want
that to be discrete we want that to be 5
petals 6 petals 7 petal 8 petal of 9
petal etc so scale quantized will help
us will help us map that continuous 16
thousand to a discrete number of petals
and that's what scale quantized is doing
so we said size scale that domain is
size extent
and then number all scale that domain is
numb petals extent
yay now that we have the domain figure
it out let's just make the petal data
for just the first movie and so first of
all let's figure out the number of
petals for that first movie and so we're
using num heddles scale and thank you so
much thank you so much for pointing it
out cuz uh
there was actually a bug in this version
in the complete version where I forgot
to use that vote so let me so number the
number of non petal scale and then we
just pass ending the the number that so
we just pass in the number of votes for
the first movie right so that would look
like movie first movie dot votes so
number of votes for the first movie a
movies movies
okay let's console.log that and see how
much that is so movies 0.9 the petals
and cool so it's three hundred fifty
four thousand and we're going to make
six petals here
wait
so far so good
okay now that we've figured out the
number of petals for our first movie we
now need to create our data array right
so we want so basically we want to
create five petals so that's five paths
and path elements right or sorry we want
to make six petals so that's six data
elements in our array right and so you
can do this a number of ways but the lot
of way that I like to do is I like to
use lodash pass in num petals which is
six and that just gives me the index um
so and this lodash dot times all it does
is you pass in a integer and it just
does of for loops that number of times
and I think you can also just do for
loops you know that number of times
whatever that you're happy with I like
using underscore or lodash times
underscore times number tools and then
for each of the petals
we want to do we want three things right
so for each of the petals actually I'm
paying me I'll just comment it for each
of the petals to draw them the first
thing we need to know is the rotation of
the petal and the second thing is we
need to know the type of pedal or the
the pedal at the path of the petal right
so the the three different petals that
you guys made earlier we need to know
which one we're using and so that's
parental guidance ratings and finally um
we want to use oh we want to know the
size of the petals the size of the
flowers so that is size of petals and
that's we're using the IMDB ratings okay
which means that what we want to do is
first of all the rotation is um
basically you want to rotate it so SVG's
rotate takes degrees so anywhere between
0 to 360 degrees so our rotation should
be our index out of our number of petals
right because that that will give you
like it's the first petal so that's 0 or
and then like and then 1 out of 6 and
then 2 out of 6
2/6 etc i'm x 360 which is our number of
degrees so that's our rotation
so rotate and then path of petal is we
can just say I called it path look up so
up here I have oh yeah path look up so
path look up and then
movies zero and the parental guidance of
that movie
and finally the size of the petals so
size and we're using size scale and for
size is we said I am DB reading some
movies the first movie dot rating cool
oh and then I need to uh I need to
actually return that to console.log
petal data
oh look at that path is undefined did
something wrong but uh
oh yeah look so the rotation is right
0-60 120 and 180 240 300 and the size
should be the same because it's it's the
same movie so let's figure out what went
wrong with the path so pathway so path
look up maybe I said paths look up not
the path look up movies 0 PG why would
that be wrong path look up I don't have
enough pedals ha thank you so much so
let's see
yep into
No
yay so I have to pass and I have the
rotation and I have the size so I have
all of the data I need to make my path
or make my pedals so far does this all
sound good okay I'll take your silence
as a yes and so now that we have the
data and then delete all my console logs
all we have to do is do the data da da
da da entered the pen from earlier so
SVG dot select all path that data put in
the petal data dot enter dot append path
so that's the that's that's that's what
we talked about earlier data that
entered the pen and now if you actually
inspect if you inspect the Dom oh my god
you can see there's six paths that were
made just as we expected so let's do the
first thing and that is um the first
thing that we need for a path is the
path string and that's a we set that on
the D attribute which I just realized I
never said I forgot to mention that
earlier so for to draw a path B all of
the path strings that we were doing
earlier with the the curves and then
lines and the move twos that needs to be
set on the D attribute of a path that
will probably have been important for me
to mention so sorry about that
and so for the key attribute what we
want to do is use the path that's been
belt so D that pop look yeah we already
have a little like thing that's been
drawn here then we want to actually
before we do that there anybody you look
up SVG transforms so for the people that
did does anybody want to talk about it
briefly
the SVG transform
so it is basically you can apply these
transforms to any of the SVG elements
and the ones that I use the most often
is translate scale and rotate and they
do exactly what they sound like
so translate will move over that element
by an X Y position scale would be a
scale of one is a hundred percent and
scale of 0.5 would be fifty percent a
scale of two would be two hundred
percent etc oh and then it'd be if you
put in only one number then it will be
scaled to both direct both the X and y
direction but if you put in two numbers
then it will be scaled to the X
direction and then the y direction and
then you have a rotation and you put in
the angle out of 360 so let's do that
um let's first do the translate
so if you notice right now this uh this
puddle is right here
because that's my zero zero and there's
absolutely no translation um and if you
notice I actually start I think I Center
all of my petals at zero zero so the
first thing I want to do is move the
petals over and so I'm just gonna say
translate a hundred a hundred oops
one hundred one hundred and that's just
like a random I'm just picking up random
magic numbers of one hundred and hundred
but I do want to say very briefly that
when I'm translating something what's
actually happening is um you can think
of it this way so let's say we have an
SVG and this is zero zero um the the way
I like to think about it is that when
you set the x and y coordinate of an SVG
element um whatever so basically
everything um let's say I draw this
rectangle and this is at 10 10 this 10
10 is relative to the parent SVG so it's
kind of like you know how if you do like
a div within a div and then you said the
outside div to position:relative and you
said the inside div to position:absolute
that's kind of what's what happens with
SVG naturally so like that's like so
that's like if you did div is
position:relative and this is div is
position:absolute it's kind of like
what's happening inside but here's an
interesting thing so right now this one
is
X is equal to 10 y is equal to 10 right
so like for this rectangle I'm saying X
is equal to 10 and Y is equal to 10 and
that's the in position absolutely
relative to the pen SVG but if I do I
translate then here's an interesting
thing
if I do this rectangle and I translate
it 10 to 10 and I have ice is 10 and Y
is 10 something really interesting
happens which is that it actually gets
let's say this is 20 and this is 20 it
actually gets positioned here this ends
up with this isn't that fascinating
okay so anybody have a guess why this
actually results in this so this is this
is 28 20 anybody have a guess why this
is happening so the reason huh yeah
exactly so
hello ok so the reason why this is
happening is that when we do our
translations essentially we're saying
okay like pretend that there's like this
pretend that this element has this like
invisible parent div and that parent div
has moved down to ten ten so instead of
for now now for this rectangle the new
coordinate system is now here so this
actually is the zero zero for this
rectangle now and then this is the new
ten ten for this rectangle with it
fascinating I love the translation No
okay but I'm saying this only because
this will also come in handy and when
we're doing the next step we have one
more exercise after this so yeah
so essentially this is really hopeful
because as you can imagine all of our
paths are relative to 0-0 like we've
defined all of these paths as like you
know like start at zero zero or at zero
50 or 50 0 or whatever and then it's
like curving to like a hundred or
something it's still it's still got its
own coordinate system but when we use
transform and translate we don't
actually have to like you know make up
new numbers or anything we just have to
say translate 100 a hundred and then it
will basically shift the coordinate
system around so that yeah so that that
happens I'm okay so I'm not that great
at CSS I'm pretty sure this is how CSS
transforms work - is it true okay like
if you do CSS transforms in session mmm
yeah so let's translate it 100 100 and
then the next thing we want to do is we
want to rotate so previously we've
calculated our rotate so all we have to
do is use that we say d dot rotate oh oh
then I'm using our string literal so
dollar sign open bracket whoo
did any I did that happen for any of you
wait you haven't been typing along or
anything right okay sometimes sometimes
people type along and then they're also
like because that happens for them and
so yeah so that happens cuz we will now
rotate at all six petals and then
finally we want to scale so scale and
then we use what we've previously
calculated so that's D size and it just
gets scaled smaller
and then because I don't want it to be
filled I just say fill none and then
stroke I'm gonna say black that's it
how's that
and you part that you want me to
elaborate on do you have your own
flowers were you able to get your own
flowers mmm cool okay are you ready to
move on because it is I believe for 36
and so we have 24 minutes to make the
rest of the flowers are you ready to
make the rest of the flowers nope
was that you though okay we let me ask
you this way so how we did we cover it
enough such that if you go back and look
at the code yourselves you'll be able to
get it or do you want me to elaborate on
any of the parts so that when you go
home and look at it yourselves you can
understand it because that's why I go
right now out of the three steps that we
talked about tell me about any of the
parts where it didn't feel quite
intuitive and you want me to cover again
the person that said no back there what
do you want me to elaborate on are you
sure it's fine okay are you ready to
move on oh oh there's okay yeah oh yeah
yeah yeah yeah huh oh yeah yes please go
do that
yeah because you guys have been here in
here for the last three and a half hour
no three hours or so yeah I went to a
pee break though so I snuck out for that
and yeah yeah please go and then in that
case are you alright with it running
over a little bit yeah yeah a tiny bit
okay so five minutes relax go outside
and then we're gonna make the rest of
the flowers get back into it
it is now before fifty three so I'm
gonna try and finish up hey thank you
okay it is for 53 and we're going to try
and finish up the last few part of the
last part yeah thank you okay so we're
gonna try and finish up the last part as
quickly as we can and that is to finish
we're going to draw the rest of the
flowers and to do that we need to be
able to ness elements so the nesting
elements is basically like we want to do
that in SPG we want to do that when we
want to apply the same styles and
transforms to a group of elements and so
in the case of the flowers basically we
have a group element in this case that
consists of both the petals and leaves
and I've applied the transform that I've
applied translate and scales on them
and then within them I have the past
that I make up the petals and it just
has a rotation apply because the
rotation is unique to the petals whereas
and the scale is applied to all the
petals so we can do the translation
scale on the group elements and we can
do the rotation on the path elements so
that's what we're gonna go for for it
and do and hopefully you will be able to
finish before the 5:30 group picture and
the food so let's start out with Camden
and go through this as quickly as I can
so this is the next piece of code and
this is just shows you how to nest
elements so essentially this is here's
the data set I'm and then we have a
group of G elements and a set of circles
on and within those group elements and
when that looks like is I'm oh so as you
can see the data is there's a set of
circles that have a red fill and a set
of circles that have a blue show so
let's see how that's working I'm an two
at the very here and I'm using I'm
saying SVG select all groups and most
tiny and then so I'm using the SVG group
element and that's child elements
because in SVG Oh Mike HTML so with HTML
you know we'll be doing well like nest
all these different elements right we
can nest divs within devs we can nest
like paragraphs we can nest like spans
we can nest begin that's almost pretty
much everything we want with HTML right
and then you can like apply styles to
them or like you can translate things or
but within the SVG the only element that
you are allowed to nest children is the
group element so if you try to nest a
rectangle within a rectangle a circle
within a rectangle any of those no
will happen like it will not work only
group elements can have things and group
elements can have group elements nested
within it I am yeah so group and group
elements circles rectangles and stuff
you can that's all of that within a
parent group component and so in this
case what we're doing is um we're saying
the same data enter a pendant pattern as
before and we're saying I'm you know
here's my set of data and basically my
data is that first like buying that
first object to my first group and
buying the second object to the second
group so then what I'm doing is
basically saying the first group of the
first data set or sorry the first data
object has a fill of right and so once I
found that I'm using it in the outer
fill and then I'm returning to that
filth and that's why previously you saw
all those circles have a red fill and
then the second one is um has a fill of
blue so then like back here you saw all
of these circles how to fill a blue so
that's what's happening is that so this
gets created to groups and then down
here when we're doing the when we're
creating a circle for when we want to
create a bunch of circles for jeunesse
within their group i'm essentially what
I'm doing is for the circle as I say I'm
select all the circles in those groups
so they're groups that we just created
I'm select the circle within those
groups and then for the data notice here
notice that I'm instead of passing in a
data a Giunta
a data array like we did before we're
actually passing in a function this is
interesting
um so I like here when we're doing a
data array we're passing in a function
what this is saying is basically
with d3 if you create if you ness
elements and those nested on the the
children actually inherit the data of
the pant so what that's what's happening
here is it's saying okay so here's the
here's the data that's already been
bound to the parents so this fill red
and a circle array tell me what tell me
the data array you want for the child
circles and so here what I'm doing is
I'm saying okay cool this data that's
been bound to the parent and for these
circles what I want is to use the array
of circles right so here I'm saying I'm
a circle array of two 2550 return that
so the child data is essentially this
like take that array of two 2550 and
return that and that's the data array
from my child circles I'm and then we do
the Senate seam enter a pen oh yeah so
we do the data enter a pen and so here's
what's happening right so we're
basically saying here's the parent group
with the with the data and then we're
going to just grab the array the child
array and that's the new set of data and
that data gets mapped to the circles
that we want to enter so it's basically
like what we talked about before with a
data enter a pen except now instead of
you know like I'm having well okay yeah
so it's basically like before when we
had data enter a panic so now we're
inheriting some data that we can do
something with as long as we return an
array again because remember that data
always always expects an array so that's
what's happening here
I'm and so all of this results in a
group container with a data that says
fill and circle and within there and we
have the circles that have those data
that data of that data bound to it I
went through that really fast um do you
want me to repeat should I repeat that
okay let me try repeating that again
really quickly let me see if I can draw
that really quick
so I have two objects the first one has
filled is bread and then let's call this
just child and that child has an array
to 2550 till blue child 10 100 150 so
when they bind this data or when I use
this data set it creates two group
elements right and then this is this red
one gets bound to this and this blue one
gets bound to the second one now the fun
thing is when we try to create any child
elements to this so like now if we say
okay like this selection of groups now
try to create any children like let's
say the children are the circles these
children actually get they actually
inherit the the data that's been
balanced to the parent so they actually
inherit this data and they will also be
able to say that they will also know oh
I am like fill red so blue but I'm
because we want to make a circle for
each one of these child arrays we just
say it okay actually give me back for
the selection of circles um I want to
create a circle for every element in the
child array so that's why we're
returning D that child and then we're
saying I want this to be applied to this
one that's to be applied to this one and
this to be applied to this one and then
for the second for the second group I
want this here this here and this here
and that's what's happening that's a lot
of legs
so yes so we're saying for its children
I want to use this array of data to
create my children elements okay and
then so the last thing we want to do is
make all the flowers and this might
sound like a lot of work but it's
actually very very minimal work now that
we've created one flower so to go from
one flower to many flowers is actually
very little work and I'm just gonna go
straight into it yeah
okay so set the main four skills is the
same as before
I'm just gonna copy that over
and then number two is now instead of
creating data for the petals now we need
to create a group for each flower right
and then we need to translate and scale
those flowers so let's do that so we
have let's call each of those flowers
let's call that selection of group
elements flowers and we say SVG not
select all group
and then the the data in this case is
the array of movies right because each
flower is equal to each movie so we do
that movie or data is movies oh yeah if
you want to type long ooh um movies
enter a pen and a pen oops
now if we inspect element if we inspect
the sweetie we'll see like a few hundred
group elements that have been made or we
should that seems like okay so now we've
created all the group elements we've
created a group element for each movie
and then right now let's just apply the
translate and scale so transform is what
the attribute is called and then what I
want to do is pass in both the data and
the index B and for the X I'm just gonna
say
I believe so
index mod three so I'm just going to
help could be on each row so mod three
times uh I just yeah let's just uh move
them over by no but let's move them over
by I think it's yeah let's move them
over by I'm just gonna do move them over
by two hundred and then I bought three
plus zero point five which just means
like just move them over by a half uh
and then for the Y basically math top
floor I had to buy by three so basically
whatever my index is divided by three
and that's the road that I'm on and
again this is just so just do those 0.5
times two hundred and then I want to do
the scale transform so that was scale is
equal to a size scale and then we pass
in the rate yes the reading for that
movie and now we return translate X
translate X Y
and scale yeah thank you and then
nothing should show up but now you'll
see for each of the groups you'll see
their translate and the scale
okay now we have the flowers so let's
make even at the petals for each bar
so now instead of selecting them from
the SVG we want to select them from the
flowers so basically instead of looking
instead of working within the SVG
container now we want to work within
each of the flower groups as our parent
container so for each flower select all
the path elements that are going to be
our petals see and then here's a bumper
so um if you want to you are more than
welcome to do let's do it this way so
dot data
let's first console.log oh yeah that's
just the first call so long and see what
happens and as you can see when they
call us a lot here it's the it's the
data from the movie it's the data that's
been bound to the parent flower group
container and so what we want is like we
did before we want to use this movie
data to create the right number of
petals right and rotate them accordingly
so use this to use this data so now we
want to say numb petals is equal to them
it was enough thank you num puddle scale
and then now we use d dot foot know if
we do num petals so still six x penny
sensing and now we want to return return
the array of petals right now we want to
return the array of petals so I'm still
doing tons so six petals and then now
now all I want to do is the rotation i /
numpad ELLs times 360 same as before and
then the right path so it was path pads
top hat look up and we use d dot in here
but I need to do I need to add in here
rest of the pencil then
cool so diva PG thank you and now let's
see if we have the right number of
petals being made for each of the groups
we happy about that but didn't enjoy
that thank you
you are saving me right now
yay yeah I try opening them up this it
also say that no okay except yeah so now
the paths are being made for each of the
flowers so now we only have a few more
steps so so we need to set the attribute
for the path so the D attribute for the
paths for each of the petals and then we
also need to rotate them that's it so
let's do that let's first rotate them so
transform D turn up rotate d dot rotate
and then add er a deep return d da oh
yeah did that happen for you
that's it right now we just need to do
actually tied to something really
awesome and which was that you said way
that I'm gonna say fill none and then
tell me what was the for their strokes
you do something where you used the
color scale so there's you is it just
here you also say color
III not be to for example who gave me
that interpolate rainbow and they should
do that I divided by numpad all skin
cool and then GG choke with so much
better than the black great yes all the
colors all the colors and you even did a
blend mode that style was a blend mode
does not work you mix okay let me
explain mode and multiply yeah no
climbing kits that bigger yeah no you're
just showing off I'm not showing off tie
it's showing off fancy does that make
you happy to see me happy
actually let's try actually Dini as a
fill instead of this photo
oh this makes me happy
okay not Ringel at the end makes all the
difference okay so I'm gonna put this
into the complete code see so that you
can take a look items with of course
their rainbow oh my chuckles all the
rainbows meryl streep uh type
it's his brilliance look at all of that
and I really sincerely hope that you got
something like this too and I knew that
three and a half hours is still like not
that much time to like you know get all
cover all of that we did today but
hopefully um it helps you get at least a
little bit familiar with SVG pods and
with the basics of d3 and then hopefully
you got some pretty flowers out of it
I'm and if you are really proud of your
flowers and I hope you are I really
really want to see them so please like
screenshot them and tweet them to me and
my handle is this is my handle right
here
please tweet me so I can be really
really proud of me because they know me
and now I have to justify my handle so
that is my that's what my initials my
initials are Charlie Strong Moosa as xyw
you I actually made the handle without
realizing the implementations of my
initials and then my my ta at the time
was like surely really and I'm like
waiting talking much just like your
handle your github handle and I was like
what about it just like we do a lot and
I was like I was like crap and that was
like seven years ago and I have now
fully embraced it so if you need to just
remember it as this sexy whoo without
the ease and if that makes it easier for
you to tweet me your flowers then so be
it
so thank you so much for joining today
thank you so much for all the funds and
the
participation and the rainbows and I
hope you have a great rest of the
conference
yeah</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>