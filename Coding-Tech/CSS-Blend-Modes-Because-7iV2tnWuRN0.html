<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>CSS Blend Modes, Because... | Coder Coacher - Coaching Coders</title><meta content="CSS Blend Modes, Because... - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Coding-Tech/">Coding Tech</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>CSS Blend Modes, Because...</b></h2><h5 class="post__date">2018-04-03</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/7iV2tnWuRN0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">thank you the intro was awesome like I
can see up here with all these things
fired up I'm just mind blown so hi I'm
here to talk to you about CSS what a
great way to kick off a JavaScript
conference right thank you
so what a beautiful place we are in
right I was so excited to come here and
if you google Singapore you get
beautiful rainbow skies and images like
this so here's my expectation of
Singapore and then here's a video from
my room at the hotel that's okay this is
life it happens I'm so happy to be here
still as you heard my name is Yuna you
can find me at you know on Twitter
github code pen all the things so if
you're interested in this topic if
you're interested in filters blend modes
a web image performance I write about
those things online at unit I am that's
my blog I also co-host a podcast called
tools day so you can check out tools day
it's bi-weekly this year where we talk
more about JavaScript things as well so
as you heard I have a brand new job I
started with like three weeks ago and
they let me come here sometimes like
thank you bustle but basically I'm doing
a lot of creative product development
and I'm super stoked to be there so
blend modes because I really wanted to
give this talk because I feel like there
is an elephant in the room when I talk
about blend modes so really this talk is
like a love letter to a specific company
that is actually sponsoring the next
break this talk is called blend modes
because but really it's called edge
should implement blend modes because
so blend modes are something that people
have been talking about for a long time
now they're not even new they're not
even like the hot new thing like CSS
critter variables they've existed for
years and this has been a ticket open on
the edge user voice website since August
2014 and it's still on the backlog
meanwhile every other browser every
single browser has been planted blend
modes three years ago like this isn't
new it's just something that's kind of
waiting to happen
I don't know why this is this is how I
feel anyway so here I'm gonna talk to
you about blend modes how to use them
and we're gonna start with some notes
and caveats about blend modes then I
gotta get into how blend modes work I'm
going to rush through this because
there's a lot of content that I want to
share with you and then we're gonna talk
about the utility of blend modes so how
you can really get the most out of them
and here is we're going to talk about
simplicity how they can help with
simplicity how they can help with
uniformity consistency and performance
so we're gonna talk at all these things
throughout this talk and then also touch
on creativity where I'll showcase some
cool things created with blend modes so
first some caveats and things to note
this is the current browser support
matrix full support on most browsers
Safari has partial support so they don't
support some of the blend modes it's
really important that you do browser
tests if you're implementing these and
also to implement them in a
progressively enhanced way and as you
can see ie an edge don't really house
the barn just like so there's two
different types of black nodes there's
mixed blend mode where you can mix
different elements together on the page
and there's also background blend mode
so background blend mode allows you to
mix elements that have multiple
backgrounds into the other backgrounds
so there are polyfills for background
blend mode that use canvas to do this
kind of mixing but I feel pretty
strongly that you shouldn't really need
to use polyfills when using blend modes
they should just be something that you
use for progressive enhancement so two
different ways to use them also I want
to say that there's
interpolation when you use variables so
if I hover over this image I'm applying
this multiply blend mode on top of this
image of Singapore but you don't see any
change you can't interpolate because
there are no keyframe values that the
CSS can apply to make those changes it's
just a switch it's binary on or off but
you can combine blend modes with any
other CSS properties including filters
and filters do interpolate so you can
sort of get this sort of blurring in
effect if you apply with filters so it's
still kind of a little bit of a hack but
this is something to note it's a little
caveat so okay let's talk about blend
modes
what are they blend modes are any way to
combine or mix pixels with each other
through a series of algorithms and those
also vary based on the blend mode there
are a lot of different blend modes out
there specifically in CSS we have a few
different blend mode groups you have the
darken group these all darken based on
the active layer on top the background
layer there's the Lightning group there
is the contrast group there's an
inversion group and finally a component
group of blend modes we're going to talk
about some of these with our beautiful
model here I'm sorry I didn't ask Thomas
I just threw this in there forgive me
the most popular blend mode that you'll
see is multiply what multiply does is it
acts as a projector if you're looking at
a projector and you have these two
layers on top of each other you're
taking the luminosity so the dark and
light values of the active layer and
multiplying them with the layer behind
it so here we just have a hot pink layer
on top of the images so we also have
something called screen and 3m is the
exact opposite of multiply so with
screen you're taking an inverse and the
way to take inversion when you're
looking at these pixel level component
changes we are going to subtract that
value from one so you take the inverse
of the active layer times the inverse of
the background layer and then you invert
all of that so you're kind of
multiplying the light values have you
all ever seen these amazing creatures
octopus and cuttlefish are so cool I saw
this video on Twitter the other day and
it just like blew my mind
they have
photoreceptive cells in there like
bodies and their skin that they can
expand or contract to camouflage with
the environment around them the seafloor
around them it's just mind-blowing to
watch this so I was really inspired by
this this little guy right here it's so
cute
so I wanted to kind of inject it into
our talk as well we have our little
octopus and so what do we want to use
here if we want to blend this octopus
into the background behind it then we
probably want to use something like
multiply right because that way it just
completely blends also one thing I want
to note is you can open dev tools and
just get a list of blend modes and start
playing that way so if we want to see
like screen this would be the exact
opposite of what we want because we want
to make sure that light fades behind it
whenever you have white and you multiply
it it disappears but when you have black
and you screen that that will disappear
so next I want to talk about to blend
modes called darken and lighten these
are similar to multiply and screen but
they work a little bit differently
because they work on the RGB values so
in this case we have RGB 10 250 darkened
by RGB 150 100 150 now when you darken
these values what you're looking for is
the darker value between any of those
channels any of those color channels so
if you compare 10 and 150 which one's
darker like you think about it RGB 0 0 0
is black so 10 is darker than 150 it's a
lower value on that spectrum and then if
we compare 200 and 100 you get 100 if
you compare 15 150 you get 50 so you
create these new tones these new values
out of these colors that you're blending
same thing with lighting we're looking
for the higher value to get the lighter
color and this also works slightly
differently than the blend modes of
screen and multiply so if I want to do a
mix blend mode of screen here and then I
want to apply a mix blend mode of
lighten you can see here that you see
more of the gray shades with the legen
and you see some of that color value
fading out with the screen because of
how differently those colors are being
generated when you mix them together
so the next two are differents and
exclusion so with difference and
exclusion they're looking for similar
pixel values and with difference if
those values are the exact same shade
the fact in color then they will turn
black so we've got some like orange on
this shirt so that turns completely
black if I remove this then you can see
that it's a shirt with black on orange
on it and then with inversion what
you're with exclusion sorry you're gonna
have those similar values 250% great so
it's much more muted now you can also do
this with octopus but you'll see that
every single pixel value will be
completely the opposite color of what we
want it to be if we want it to blend he
is now like bright red stands out not a
good look for our friend here not what
he's going for but you can use these in
really interesting ways a little while
ago I created a site called Diffie
defeat me where you can just take two
different websites and get visual
regression instantly different so you
can see visual regressions on two
different pages you can look locally
versus your production site your staging
we can compare like the what was a
twenty teen Jas comp Asia calm that's
the seer site so we can compare that to
maybe like 2016 site if I have Internet
and it's kind of like see visual disks
because this works on video it works on
iframes it works on anything it doesn't
just work on images so you could
visually see the dips between the two
years and it's just with a single line
of code with your difference blend mode
so the last section that I want to
highlight is the component blend modes
and these are interesting because you
can really understand like how this
color system works when you look at
these blend modes so you have hue
saturation luminosity the luminosity is
the light and dark value that it kind of
looks like a cone the lightest on top
the darks at the bottom the saturation
is what you get when you're coming from
a 50% gray and mixing that with a fully
saturated value of that hue component
and the hue is what the value is around
the color spectrum
in this diagram so here again we have
the hot pink what happens we mixed the
hue value is you get sort of like a
faded pink overlay on Thomas over here
if we're using saturation because that
pink is a lot more vibrant you're
keeping all those values from the shirt
from the skin from the books behind him
and you're just increasing the
saturation if I wanted to make this even
more saturated I can make this like
yellow or something and then you really
get the saturation but you're just
getting that that value from it
luminosity is just the light and dark
value because yellow is so light we're
seeing this look really faded and needed
out and then color is interesting
because it actually combines multiple
blend modes it combines the hue and the
saturation and just mixes blue not see
behind it so this image can be
black-and-white it can be color and you
would never know it doesn't really
matter what it is because you're mixing
it there so I really enjoy using blend
modes what makes me enjoy them even more
is when you can combine them with
multiple colors on a single plane and
you can do that with CSS gradients so
here's just an example of a linear
gradient with an overlay applied to it
you can really start to get creative
here and start playing like if you use
exclusion it starts to start looking
really interesting we can use color and
then I do want to note that when I say
progressive enhancement there are ways
to do this with blend modes right now if
your browser doesn't support blend modes
it's going to look like this and that's
not a great user experience you want to
make sure that your user is still seeing
something still seeing the image so
instead of applying blend modes on top
you can then apply the blend mode behind
the image and use what we just learned
about how these blend modes work to get
the same effect here I'm blending the
luminosity so just the dark and light
values of Thomas to the blend mode
behind it so users will still see the
image they just won't see it with this
effect on top so that brings me to
uniformity when you kind of get this all
down when you start playing with it you
can recreate any type of effects just by
using a CSS this is a project that I
made a little while ago called CSS
Graham where I recreated a lot of the
Instagram filters by just using CSS
filters and blend modes so you can get
anywhere really from point A to point B
by you
in a really creative way and then
applying that throughout your entire
product because CSS cascades there are a
few other ones out there there's CSS Co
which is the vsco cam filters and
there's also color filter which was
inspired by the Spotify effects from
2015 these duotone effects which we will
talk about a little bit later so
simplicity has another thing that blend
modes really give you and something that
blend modes really shine at doing I was
browsing the web recently and I saw this
being shared around this reverse knock
out text effect it was being shared on
Twitter so what you do for this is you
use an extra-wide
SVG you need to hide extra parts that
overflow hidden and you need to use an
SVG mask this feels like a little bit of
overkill for me you have to have
JavaScript in here you have to have your
CSS you it's it's pretty heavy-handed
when all you really need is a single
blend mode in CSS so here you get the
same effect you have your black
background with white text and you plot
your multiply blend mode and you get
knockout text and if you want to get
that little arrow thing that's just a
little CSS triangle which you create
with borders they can apply on the end
so you don't need these additional
dependencies you can just do it in CSS
with a couple of lines of code and
that's why I think it's so magical so
here's a little pro tip about filters
because this also camp recently if you
have a SVG that you're applying as a
background so I have this image of an
octopus apply this background you can't
edit the color of this SVG by using fill
you can't really edit it if you want to
have multiple colors either if you want
to have this dynamic range so what you
do is you can use filters for this so
filters are pretty well supported
actually what you can do isn't it just
like the brightness I can make this like
darker if I wanted to I could adjust the
contrast I could increase that to two
and then the next thing that people will
mention is well what about the color if
you can't change it from black and white
to a color if you wanted to but you can
because we have the sepia filter so we
can apply the sepia filter and then on
top of that we can apply a hue rotation
so I can apply a hero tation of like 60
degree
and now I have a green octopus and from
here I can use saturate and saturate it
too so I have like a bright green
octopus so there's a lot of things that
you can do by just getting created with
filters that you don't need to go into
code change the way that you're creating
these UIs
and just use these to apply different
effects and because it is a CSS filter
they are animatable they're interactive
you can do anything you want with hover
States etc for a user so it's just like
a good thing to know
so speaking of filters I want to quickly
talk about SVG filter effects because
this is really where you have a lot of
control when you're editing your images
and it's because with SVG filter effects
it's really the only place that you can
control the individual channels the red
channel blue tail green channel alpha
channel by applying a single filter onto
an image with CSS blend modes and
filters they're sort of shortcuts that
have derived from SVG filter effect so
you don't get all this control but this
is also among the main of simplicity so
when I'm creating SVG filter effects I
like to use the FE color matrix because
it really lets you individually select
your channel transformations and if you
kind of understand what's going on here
you can see the differences that you're
making so it looks like this basically
you have your red green blue alpha
channels and then multiplier Channel and
it defaults starts as you have one red
value on the red Channel you have one
green value on the green Channel one
blue value on blue Channel and your
alpha channel is one if you wanted to
create a transformation you can apply
different values on these an important
thing to note is that the scale is 255
in RGB land is 1 in this color matrix
transform land so that's kind of how it
equates if I wanted to reduce things
like remove all the red and blue and
just have a green colorized image it
looks like this bottom image here where
you just keep the green channels value
and you set a zero on red and blue so it
looks like this is sort of the effect
that we get if we wanted to do that by
applying these color matrix changes we
can do that we just have to have an SVG
on the page and then we have to apply
the filter you can do that in CSS but
you don't need to have all of this
complexity applying additional SVG is
when we could do a similar thing in CSS
with blend modes without having to
create a filter transformation and
include that in the page so here we're
colorizing we're using the mixed blend
mode of color and we're just picking our
color RGB 0 255 0 so I want to note one
thing that consistency browsers are
still not consistent about how they're
applying that color transformations
so here's Chrome you can see that these
two look as they do when we compare that
to Safari I don't know if you can see it
up here but the chrome one you don't
like to get that very well I'm chrome a
little bit darker Safari is little more
muted than these two values but the
blend mode stays pretty much identical
it stays the same when we look at
Firefox it doesn't even support these
sort of filter transformations but it
supports blend modes it's a little bit
more faded out there's a little bit more
bright on that blend mode and then we
can go to edge it doesn't really support
any of it but this is a reminder about
why you need to progressively enhance
your blend modes and we can change this
around to again apply that layer on top
of the color in sort of the other way
around so with edge either way you're
going to get some image if you do it
this way so blend modes are a tiny tiny
bit more consistent when you're applying
those as your color transformations on
your images so if you want to play with
filter effects there's a really great
resource that I want to share with you
where you can actually just change the
values and see what that does to your
image and this is the URL for it cast
kick that canada ios SVG - color -
filter just maybe take a picture really
quick it's a really cool resource that
you can use to really understand how
those are working so from here i want to
talk about the duotone effect that has
become massively popular I've seen this
increasingly on the web and it's a way
to really unify your images on your
application on your website so we wanted
to do this with SVG filters what we need
to do is apply a positive value and a
negative value for your highlight in
your shadow so if you wanted to have a
red highlight in the blue shadow those
are absolute values of one a negative
one we can do that you can do it on any
individual Channel so you're doing the
red Channel green Channel or blue
Channel so with blend modes you can kind
of get a similar sort of effect with
some colors but it's a lot less complex
you don't have to make all the math
happen you can just set the colors it
looks like this what we're doing is
we're
applying a darkened blend mode on the
highlight and are applying a lightened
blend mode on the shadow and we're just
layering those on top of each other so
in the middle here you see this sort of
boxed color duotone effect layer now
with the shadow whatever color you pick
if it's a lighter shadow you're going to
get rid of more of the details because
you're lightening the shadow with that
value so you can take a few disparate
images these I just found the web and
apply a blend mode and really unifies
them so it really increases the quality
of photography and it makes your site
your page or application feel more
uniform and you can use it with a single
line of code
so with CSS variables
I love variables who hears you CSS
variables not enough of you there
they're great they're true variables
that live in your route and they just
they just work so like if I wanted to
change the shadow to red and the
highlight to yellow these are truly
dynamic variables that is just changing
the style in the browser no longer the
SAS variables that you have to compose
into actual colors first these these
live in your browser so I love those if
you haven't tried them yet check them
out they're great you can use javascript
to change the SS variables and it's
super dynamic I love it um anyway let's
talk about performance
so who here agrees performance is
important all of you yeah all of you
there are four talks of performance at
this conference so let's talk about the
image performance that's something that
blend modes and filters can help us out
with as well you also don't need fancy
image editing programs that's an
important thing to note when you're
using blend modes filters editing
programs in the browser you can just do
it with your free program here so to
apply this transformation I just opened
up my preview app and I removed the
color now when you remove the color cast
of an image you can get a pretty big
size savings of that image so here is
the example here we're saving 62
kilobytes or 22% of the image size and
this one we're saving 21% of the image
size here we're saving 189 kilobytes so
because the image is bigger it's a
bigger payload that we're taking away
from the user and this is 20% so on
average you get like a 17
to 23% image savings I found by doing
this kind of transformation the black
and white doesn't have to be boring
again there's a ton we can do by
applying filters and blend modes to our
black-white images to give them those
effects that we're kind of applying to
colored images anyway here's here's that
same exact example where these colors
are black and white with the exact same
transformation applied they look almost
identical so this is probably even
closer to what you want meanwhile you're
saving image size for your users by not
sending 20% bigger images to them so
kind of on that front I did want to
mention this it's about filters not
blend modes this something that I
recently was doing some research on with
filters they like to call the contrast
swap technique so essentially what
you're doing is you're removing the
contrast of an image on your own you can
do some photoshop to get a linear
transformation of that contrast and
reapplying it in the browser with CSS
filters so here we're using contrast of
two you're doubling that contrast of
yourself manually removed in Photoshop
so this is also a JPEGs do they go this
compression algorithm but you can take
it a step further by doing it manually
yourself in the browser and getting an
effect where you're also saving around
20% of an image savings for your image
that you're setting your users so here's
an example that I just could have put
together where I was testing out these
image savings and in here I did also
apply a single filter like a single
transformation to all the images and you
can see that here so that's what the
color looks like that's the image looks
like initially and then I just apply the
filter back to it and it's a pretty
similar effect to what I would get at a
much smaller size so you can use filters
and blend modes for performance as well
if you're wondering well what about
paint doesn't that take a lot longer to
then edit your images isn't that more
work load on the browser when I profile
this at a six times CPU slow down I
found that the longest paint time took
to seven microseconds so point zero zero
zero two seven seconds browsers are
pretty good this I wouldn't really be
too worried about that unless you have
like a page of like a thousand images
trying to apply this transformation at a
time so back to your regularly scheduled
blend mode programming back to blend
modes this is me enjoying the beautiful
15 minutes of sunshine
I hadn't Singapore but it doesn't really
accurately reflect my trip so let's add
some rain with blend modes you can
dynamically just on the screen do this
kind of thing apply some filters apply
blur filter screen this onto my image to
get a much more accurate representation
of my trip here it also raised me of
those like cinema graphs where you have
an image and one part of the image is
moving while the rest day is still this
is kind of like a layer is moving and
it's it's much more performant to see so
here's a much more peaceful example
where we can add some snow a nice
portrait so I try to recreate this as a
gif and it just is so janky you don't
get the same kind of experience and also
if you look at the image size of this
video blended on top of this image it's
big like don't get me wrong this isn't a
movie like this can be optimized but
just to show you how that compares to a
gif it's like that chain you don't want
to use gifts don't use gifts people use
them use videos if you're using gifts
send them like Auto playing videos if
you have to do that
don't use gifts but you can again use
blend modes if you want get a kind of
effect live near browser you don't have
to edit after effects like you don't
have to open any video editing programs
you can just play in a medium that we're
all familiar with that we all use every
day so that brings me to creativity and
this is the section in which I want to
highlight the work of some other people
that I found that I thought was really
cool on the web and this is by Jamie
Colter who uses blend modes as well as
video to create this inkblot modal it
kind of like comes out on the screen in
a very beautiful way you can do this now
on your browser by combining these sorts
of things applying blend modes to a
video this is a great example of
visualization by Archer Kournikova and
if you remember how we learned about the
difference blend mode this visualization
is made possible
because of the differents blend mode you
have animation here and all of the
interaction between those lines as they
blend on top of each other you get that
knocked-out effect it's really
mesmerizing I really like this one and
then finally Dudley story did an example
of e-commerce with blend modes so this I
thought was great like here you could
change the color of the suit by just
clicking and changing it as a layer on
top of this image so you know what
people have to do in the past is you get
the designer that opens up this image
they have to edit every single color
themselves and then apply it and then
send the user every single color option
and again it's just being edited in
Photoshop like you get a mask and you
create it and it's not like the actual
color you'd get when you go shopping but
now you can skip that step and you can
just apply a blend mode to an image and
do it in the browser it's not sending
your user as much data from images and
it's a lot faster I want to note that
this is something that I have seen
increasingly our websites are all
starting to look the same and I wanted
to say like stop getting inspiration for
websites from other websites there's so
much more out there to get inspiration
from from nature from architecture from
art and with blend modes with these
browser capabilities we're now able to
start experimenting a lot more adding
for a lot more creativity in our work
and I want to see more of that in the
web and also I want to notice this just
because it's the norm doesn't mean it's
the best solution so like that example I
showed with the knockout text that might
be what people are using now people
think like we have to use clipping and
we have to use SVG and there's a lot of
different features there there are
solutions that we haven't even
discovered yet because maybe not all
browsers support them yet edge so
there's a lot out there that I'm really
excited to see people discover as they
start to use this more so in conclusion
you should use blend modes because of
simplicity uniformity consistency
performance creativity and finally
empathy I didn't really touch on this
during my talk too much but blend modes
are a way to have a common
to speak to your designers from these
are ways that the this is a language I
understand this is something that you
can really correlate and when you
improve your relationship with designers
and with other people that you work with
other teammates
that's when ideas really grow you're not
going to create these new ideas by
working in a silo and by a silo I mean a
skillset silo as well there are things
that you you don't know about because
it's not your background or somebody
else might not know about when you work
together when you have a common language
from which to speak that's when things
can really grow and blossom and create
these things that make the web a better
place that push the web forward so let's
make blend modes happen what you can do
is go to WP dev user voice command
upvote them and the next break is
sponsored by Microsoft so what a better
time to do it then on their time go out
vote and finally use blend modes this is
from Greg Whitworth who works on edge he
says personally I recommend using it on
production sites in a progressively
enhanced manner because they do watch
web usage so the more people use them
the more use cases that we come up with
as a community the more we'll start
seeing a more creative beautiful web
that's easier simpler more performant
for our users thank you so much
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>