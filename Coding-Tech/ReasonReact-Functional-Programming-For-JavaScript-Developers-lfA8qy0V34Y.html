<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>ReasonReact: Functional Programming For JavaScript Developers | Coder Coacher - Coaching Coders</title><meta content="ReasonReact: Functional Programming For JavaScript Developers - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Coding-Tech/">Coding Tech</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>ReasonReact: Functional Programming For JavaScript Developers</b></h2><h5 class="post__date">2018-01-29</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/lfA8qy0V34Y" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hi as Fraser said my name is Kiera I'm a
developer at culture amp and I'm here to
talk to you a little bit about reason
react one of the things I love about
programming and being in tech is that I
get to be new at something all the time
so what I don't know about you is what
you're new at I deeply suspect you're
not new at functional programming but
you may be new to react and you may have
a team that works react with react that
does not use functional programming so
today I'd like to talk to you a little
bit about react a little bit about
reason ml and bring those two concepts
together to talk to you about what
reason react is so for those of you who
have never worked with react react is a
JavaScript library that's used to create
user interfaces it's pretty popular it
gets about 1.7 million downloads a week
and last year in the state of j/s survey
it was the dominant player so out of
libraries that had been used it was the
one that rated the most highly and it
also rated most highly amongst the
things that people would choose to use
again now the way that you use react is
that you encapsulate pieces of code into
components and then you can assemble
those pieces of code into a user
interface you can also reuse those
pieces of code across your application
in react you have stateless components
and you have stateful components so a
stateless component is a piece of
JavaScript that receives some data and
just displays it it's purely
presentational with a stateful component
it knows a bit more about itself it
might know whether a modal is open or it
might manager's own data but within
these components we're just rendering
HTML and this when this came out this
was horrifying to a lot of people its
HTML rendered in JavaScript but when
when you refer to these within your
components you use like a.j an XML like
syntax and that syntax is called JSX so
here we've got that header in that
button and we're just referring to that
but if react is so popular and why would
we ever need to move beyond it and the
answer is because the underlying
language of react is JavaScript
JavaScript the language of the web
written in 10 days
India 1980s JavaScript is a very
powerful language and JavaScript I know
some people will disagree with that but
you do need to be a bit of an expert in
order to wield it without having
unexpected outcomes and that has led to
people trying to avoid JavaScript
through a bunch of different ways
they've even defined something that's
known as the JavaScript problem this is
from the Haskell website and I just want
to be clear the JavaScript community
which I'm a part of is very well aware
that its language can be problematic and
it can yield some unexpected outcomes
and then working really really hard to
try and address these issues for example
in item 1 here we've got a lack of a
module system that has been addressed in
Xmas group 2015 also known as es6 also
item number 3 here the verbose function
syntax that's been addressed in Exmouth
script 2015 we've got we've got arrow
functions it's it's a lot more concise
but we still have week typing we still
have some strange coercion behavior we
still have this this scoping that's kind
of a bit weird and unfortunately we
still need JavaScript it's the language
of the web and a few other communities
have had a bit of a crack at utilizing
their own preferred languages or
associated script versions or compilers
to try and come up with a better
solution and if you are using one of
these languages I am NOT here to say
that reason is a better option than
anything you might be using for your use
case but if your team is using
mainstream JavaScript and you would like
them
to move to a more functional programming
paradigm you might have more luck
convincing them with reason than with
another option particularly if you work
with react so if the underlying language
for reactors JavaScript the underlying
language for reason react is reason and
you get to sidestep
the JavaScript problem reason react is
essentially a simpler and safer way to
build react components but just in
reason so what is reason reason is an
umbrella project but it is an
alternative syntax for a camel and its
associated tool chain that surrounds it
it's built by the developers at Facebook
who were already using a camel in
libraries such as Flo reason has the
same semantics as I camel but just with
a friendlier syntax so what is a camel
are there any Oh camel developers here
hey my friend your time has come
so a camel is an object-oriented
imperative functional programming
language which means it's quite
pragmatic you can do a bunch of stuff
with it you can't do everything with it
ad hoc polymorphism etcetera but you can
do a bunch of stuff with it
it was functional and then around 1996
the objective typing system came into
being and but it only got renamed Oh
camel in about 2011 so here we have some
JavaScript syntax some reason syntax and
Samoa camel syntax side by side and when
reason came out in May 2016 the creator
was pinged on how can use and said why
did you create a JavaScript clone and he
said I didn't actually set out to create
a JavaScript clone what I set out to do
was take out the 15 or so things in a
camel that was really annoying to
establish the camel developers but when
you do that it just looks a little bit
like JavaScript of course since that
time they've actually made they've been
very intentional about trying to bridge
the gap between a camel and JavaScript
but in the initial stages that wasn't
the case so for me the syntax falls into
three kinds of buckets there's the
bucket that you write it like JavaScript
with reason
and when you look at it in the compiler
you look at the compiled output it looks
like JavaScript then there's C you write
it like JavaScript but when you look at
the compiled output it doesn't look like
JavaScript and then the world it this is
nothing like JavaScript area most of the
things I'm finding is falling into the
first T categories so here we have the
string syntax and that pretty much falls
into the first category there are some
minor differences with string
concatenation as you can see in the
final row but mostly it looks like
javascript compiles like JavaScript the
true and false and the end or greater
than less than equal operators that's
rights like JavaScript but under the
hood it's a little bit different so here
we have two functions one in reason one
in JavaScript and the syntax for those
functions are exactly the same so it's a
function greater than that takes two
numbers and returns true if the first
number is greater than the second number
but when you look at the buccal script
output what buckless what is happening
is they're actually using a camel
standard library so we're using the O
camel standard libraries greater than
function similarly if you create in
JavaScript you decide you assign a
variable it's let x equals 5 you can
take that variable and increment it by 1
and that's fine
but here's some reason out output from
the reason console you if you try and do
the same thing it will throw an error
instead you have to read éclair that let
binding and this is not reassigning that
variable
it's basically shadowing the original
let binding and so the original one
still exists and that is in scope until
it's reader cleared now this is the kind
of syntax that falls into this is not at
all like JavaScript and if you do want
to use the same variable and use and use
mutability you have to be very explicit
about it in reason you can't just you
can't do mutability without without
being intentional so we've got the
javascript version of x equals x plus 1
in reason you have to define a reference
and X is a reference with a value of
five so on the second line in the reason
column we can see X plus one but you
have to dereference it with the caret
first to get the value increment it by 1
and then store it back in the same
reference so this is not JavaScript land
anymore
this is functional programming land and
it's something but it the differences
are small enough that it's easier to get
on board so I found it helpful to
understand how reason fits in and how
the rest of the tool chain fits in by
looking at this blog post by Andrew
Haran and so what happens if you think
of the air Camel compiler as a modular
system it has an input phase a checking
phase and an output phase so you use the
O camel syntax you read it in and check
it against the O camel semantics and
then you can compile it out into byte
code or native code if you want to then
have a web application you can recompile
that you can send the compiled output to
jsf o camel it's a dependency but it
will recompile your JavaScript for you
then in 2016 Bloomberg came out with
buckle script and so instead of this
two-phase compilation process that was a
little bit slower they dug into the
compiler and replace the output phase so
now they're delivering you highly
performant highly readable JavaScript
code there's an example of some reason
and on line one where we're creating a
function it's add 5 it takes a number
and it returns number plus 5 then we're
using the value of that function out on
line 3
and then we're read eclair the same
function add 5 except this time it takes
two numbers on line 5 and then returns
the two numbers plus 5 and this is what
the buckles cooked output would look
like so you can see on line 5 it's it's
completely got the first thing you see
is just console.log 8 it's completely
gotten rid of the original declaration
so it's part of the dead code
elimination that buckle script does and
instead we just have what we're actually
using and then the read exploration of
the function and we're reason fits into
this is that
swaps the input phase so now you're
writing input that looks like JavaScript
and it's being checked against the air
camel semantics and then you've got
output that looks like JavaScript of
course you can use the camel compiler to
do byte code and native codes still and
some people are using reason react
native and creating mobile applications
this way which brings us to here why
would I say that you might have an
easier time convincing your team to
adopt reason than another compile to
JavaScript functional programming
language when I showed reason to my team
we had looked at functional programming
languages before but we were faster and
more productive in react but they got
very excited about this and in fact it
ended up being me because this was in
July last year being me being the one
saying it's not ready yet it's really
early it's bleeding edge but we did end
up adopting it and we really enjoyed it
and across the web in those early stages
I was seeing other react developers also
come to the same conclusion by actively
creating something that maps to the
mental model that react and JavaScript
developers are working with the reason
core team has made huge strides in
reducing the barrier to entry for
functional programming for your standard
JavaScript developer and it's not
surprising that we felt that way because
there's a bunch of research out there
that says it's way easier to assimilate
new concepts if you can unite them with
concepts that you already know so I've
talked a little bit about the syntax but
there's also the work play and the react
mental model that I found really helped
me get on board so this is what my
workflow looks like as a JavaScript
developer I use NPM and yarn to Estolano
my node modules I use a lint I use
prettier for code formatting I use flow
as a type checking system but it's kind
of a bit the same as JavaScript you need
to know flow you need to have a level of
expertise in it in order to wield it
correctly because it's quite easy to lie
to and then if you don't have proper
editor integration or etc you might not
realize that your
actually checking anything properly and
I use immutable J's for data sperm the
immutable data structures and this is
what my reason workflow looks like again
I'm using NPM and yarn
I don't need flakes I've got static
typing I don't need prettier because
I've got reformat and reformat was the
ancestor to pretty it was the
inspiration for it it existed before
that I used reason router which came out
in January which is great
before that I use buccal script director
so it's all pretty much the same thing
except for one key difference almost
everything I use in react to augment and
make my react development process better
is a dependency
whereas all those same things that I'm
using in reason has been brought down to
the language level or into the tool
chain now I really enjoy cutting react I
ship features I'm creative I'm
productive I generally have a really fun
time but upgrading dependencies and
refactoring legacy code around those
dependencies is error-prone and fraught
and I don't really enjoy that process so
part of the reason that I am so
enthusiastic about this this syntax is
that I think this is going to make
everyone who ships products lives better
it's also pretty easy to get on board
with you install a global bucket script
platform which allows you to access the
bucket script compiler and then you can
piggyback off the usual react ecosystem
so you can use create react app still
and just pass it the tag of regan reason
scripts so then you get web pack setup
and hot module reloading etc but if you
don't want all of that you just want a
really simple application you do have
just the buckle script in it version
available to you too I would suggest
installing the reason CLI tools however
because this is me trying to get up
speed with the type system
essentially when you learn a new
language you expect some friction and
for me the fact that the only friction I
had was in the type system was fantastic
it just gave me something to concentrate
on so really ten minutes to go I've got
not been speaking only for fifteen ok
great so this is what the editor
integration looks like it's a it's vyas
code and the editor integration really
helped me with getting up to speed on
the typing system it basically educated
me as a wimp so the other key similarity
i'd like to talk to about is the react
mental model so when i see a design with
my designer and i know that i need to
build that i pretty much know exactly
what I need to do with react and the
fact that I can just use the reason the
react component life cycle in reason has
been super helpful you don't lose
anything you can tell you your react
developers yes you can do this still but
you don't lose anything you just gain
type safety the only thing that you did
lose one thing you lose your lost
component will mount in my entire react
career I have used that once so I
haven't missed it yet in a reason react
the concept of props is now the concept
of labeled arguments but it's a
one-to-one mapping you use the same
concept so here is a example component
we're passing it in the data some prop
hello to some prop and then within the
example component we're accessing that
data using this props dot some prop then
in the make function in a recent
component we pass the data in the same
way but we're just using the little
tilde symbol is the symbol for a
labelled argument and we just use it
reference it in within the component
that same way you have optional leg
labelled arguments the same way that you
have optional props you have default
label arguments the same way that you
have default props and in react as we
saw you have stateless and stateful
components and in reason react
you also have stateless
and stateful components but they changed
it in the second half of last year to
the reducer component when they change
the API and in a reducer component you
define a state type here it's just very
simple it's counter intend then you
define your actions and the actions are
just the ways that your stateful
component is going to try and modify
itself either increment the count or
open and modal that kind of thing so in
the make function and every reason react
module is essentially a react module
that just defines a make function you
set your initial State so we this is the
state that we want to have rendered in
the component and then you define a
reducer function that takes action and
state you can then use pattern matching
on the actions that you've defined so if
you pass in for example the action of
click into the switch statement it will
then send and initiate the action of the
update associated with the click
function if you want to do side effects
you can do side effects but you just
have to be very intentional about it and
explicit about it and use the function
reason to react update with side-effects
it's a little bit of a verbose but it
gets the message across so in this case
you would increment the count and then
after that you would use self dot send
to initiate a new action so it's the
time in the top where I'm going to talk
a little bit about an application this
is my application
it's amazing you click a button fetch
some data it recalls the audience and
then it shows a loading spinner yeah
it's excellent let's move on so I want
to look at three real-world things that
react developer might do and how you
would then do that in a reason react
application first of all if you are
starting with reason react and you have
a product that is using react but it's
most likely that you are going to be
incorporating it into an existing
reactor plication than starting from
greenfield if you using this in
production so being able to switch
between your components is going to be
really important as far as encouraging
people to get on board with this so in
order to use a react component you
essentially define you take your react
component which is a button and it has
two props handle button click and label
and then you define a wrapper function
so here on line one we have the buckle
script module this is the foreign
function interface for reason and I find
it I really like the fact that I can
just drop in two buckle script in the
middle of a file for JavaScript Interop
and on line one the first thing we do is
we define the buckle script module and
refer to the react component which is
button we then define its external name
so it's external name is how we're going
to refer to this module within our
reason code and I've chosen the name
button Ari but you could choose anything
it's it's just arbitrary then I define
its class reason to react react class
and then I give it the name default now
this is not arbitrary this is based on
the fact that in the component it's
export default class from that module
then on line three we pass in a couple
of label documents handle button click
and label and on line four this is where
it all happens we use the reason react
wrap jeaious for reason function and
that has two labeled arguments it has a
react class which we pass the external
but external module that we've defined
and then we pass it a record which is
how the props are defined and a record
it looks like a JavaScript object but
it's not a JavaScript object and this is
what the buckle script output looks like
to that as you can see we've got the
import statement happening up on line
four and down on line eight we're
passing the wrap J's for reason function
the button default and if you want to
incorporate reason components into react
components you go through a very similar
process just defining a component
component and a make function etc
another thing you often want to do with
a application is fetch data from API
so for this we will need a couple of
dependencies will need buccal script
Jason and buccal script fetch and will
define a record type to represent the
magic eight-ball Jason responds and it's
got a question and answer in a response
type this is the Jason format that we're
expecting back and so the information
that we're interested in is nested as
adjacent object under the magic field so
here on line 18 we're using buccal
script fetch to fetch some data from the
URL within piping that into a JavaScript
promise so all of these tools that
people are used to using if they're a
reactive L but you still have promises
async await is still yet to come though
then once that promise is resolved you
pass the JSON to the function pass
response Jason that's defined on line 14
that function is responsible for
extracting the data from the field magic
and sending it to the function decode
response jason so here we have let
decode response jason and on line 8
we're using the JSON decode module and
it it's jason decode curly brackets and
what that means is that essentially
within the scope of that expression
we're opening up the JSON decode module
and we can just use all of the fields
within that we don't have to be verbose
about it we don't have to write jason
decode or field or JSON decode dot
string to access those functions when
you are fetching data from an api there
will be times when you have data and
times when you don't have data and in
JavaScript you might need to use a null
check or an undefined check but you
don't have to do that in reason it's
it's a lot nicer you use pattern
matching first you create an option type
and you wrap your data that you're
expecting in that option type and an
option type has two variants it has some
and it has none so it either has yes I
have some data or no I have no data and
then you can choose what you return
based on which option it matches which
variant it matches to so if I do have
some data please send me
and answer complainant with data passed
into it and if I don't have any data
please render a loading image so to
close I'd like to outline what reason
reactant might mean to the react
community and what it means to me on a
personal level for a start on a macro
level this is what the creators of react
believe is the future of react react was
initially the prototype for act was
initially done in SML so it was reactor
smell but they shelved that because they
felt that the community wasn't ready for
an SML language but it was still
developed in a way that it could bind to
react later you can still use a
functional programming language to bind
it later so this has been quite
intentional I once sit on the discord
channel that oh they're playing a really
long game they're like you have no idea
the creative react Jordan Wolk says in
short it is the best way to take react
to the next level and having coded in
react and reason to react I absolutely
believe that 100% but on a personal
level and yes we've all seen this meme
it's a teensy bit tired but it does
demonstrate something for me I started
off with JavaScript and HTML actually I
started off in the backend but that's
another story
and then I started creating react or
using react and I really enjoyed it
I'm now writing reasoned react I'm
feeling like I'm using all of my react
knowledge I haven't had to start all
over again but I'm unable to chunk and
learn these new things as I go and then
maybe one day I'll be doing all
functional programming I'm doing the
data 61 Haskell course next week so I'm
looking forward to my brain losing out
of my ears but the funny thing is is
that actually I'm kind of already in the
last box because I'm writing oh camel I
mean it's all I camel it just doesn't
feel like her camel it feels like you
know I'm in this middle spot and if you
can get other people to step one step
closer and go into that middle spot then
more people will be writing in a safe
way and more people will be learning the
benefits of these things that you
already value so it doesn't necessarily
feel like functioning functional
programming it just feels like writing a
new flavor of react
if you've had any interest in anything
I've had to say I would highly encourage
you to join the discord community they
have been so kind and they really help
any anybody who asks the nude question
they really take the time to go through
and there's people new people joining
every day so everyone's asking those
same questions and you can search
through it sometimes you never have to
ask there's not much on stackoverflow
but there's heaps in there and also
here's a bunch of great resources if
you're interested I'll try and post
these slides somewhere later and tweet
them with the hashtag in case you're
interested but feel free to come and
have a chat to me afterwards thank you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>