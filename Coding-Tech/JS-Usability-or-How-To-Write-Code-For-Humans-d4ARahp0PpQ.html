<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>JS Usability?! (or How To Write Code For Humans) | Coder Coacher - Coaching Coders</title><meta content="JS Usability?! (or How To Write Code For Humans) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Coding-Tech/">Coding Tech</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>JS Usability?! (or How To Write Code For Humans)</b></h2><h5 class="post__date">2018-01-17</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/d4ARahp0PpQ" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so what do we mean by JavaScript
usability it almost sounds like an
oxymoron I mean we're developers isn't
UX like one of these terms that
designers use actually if you look into
these terms usability user experience
user interface they don't really have
that much to do with they're not really
that scoped to graphical interfaces as
you might think let's look at the
definition for usability usability is
the ease of use and learn ability of a
human-made object a human-made object
can be a ton of things not just
graphical interfaces or user experience
refers to a person's total experience
using a particular product system or
service still quite generic right and
the user interface is everything
designed into an information device with
which a human being may interact
none of this about graphical interfaces
so yeah something like this is an
interface actually it's to the Google
sheets interface and the browser's
interface but this is also an interface
so this is a faucet I actually took a
picture of this last year in New York it
was in the bathroom of a fancy
restaurant it's actually pretty bad
interface if you think about it how do
you how do you get water out of this how
do you wash your hands see it is you see
this lever at the top and you're like
yeah I should probably like turn it or
lift it right there that's it it's an
affordance see you're supposed to do
something with it no believer is just
for controlling the temperature it's
actually motion activated and whoever
put this there knew that this was hard
to use because they realized it needed
documentation if you look at the bottom
right corner it shows you how to use it
the whole point of motion activated
faucets is that you shouldn't have to
worry about this stuff but they realize
this is confusing also a book isn't is a
UI remember an information device a book
is an information device the same
principles apply slides our UI this
slide is a UI so this can get a little
recursive and what is of more interest
to this talk your your code is a UI and
actually decided that I need
I want to give a talk about this I
wanted to do it for many years so I have
a lot of projects on github I get a lot
of pull requests I my projects have like
over a thousand merged pull requests at
this point so I review a lot of code and
a lot of the time I get pull requests of
someone we're really well-intentioned
really nice people I love them I love my
contributors but a lot of the time
they're like we need to add this feature
but they haven't really thought that how
people use this feature how to make it
easier for them it doesn't seem to be
part of our thinking as developers
because we haven't usually been taught
about UX so I decided I wanted to do a
talk about this and the first thing and
what's something that will be throughout
this talk documentation is the last
resort do not expect that people read
documentation this is true in classical
graphical interfaces we don't expect
people to read help anymore but in code
we still make really sloppy decisions
and well again wherever people can look
up the docs right people don't look up
the docs not when they're writing code a
lot of the time they just see existing
examples and they try to pattern match
and they only look at documentation if
things are going really if it's becoming
really confusing and especially if
they're reading code from somewhere so
do not expect that documentation will
save you documentation is a quick fix
that you slap on a bad UI to sort of
help people somehow sort of use it do
not do not depend on documentation so
one of the first principles of good UIs
which also applies to code but also but
pretty much any UI is sensible defaults
the more sensible the more sensible the
defaults the less I have to look into
documentation the less I have to worry
about how to make this thing do what I
want because it already does what I want
out of the box so let's look at an
example from native JavaScript API is
there is not exactly as it should be I
called I will call these examples API
called up shame or
so how many of you have heard of the new
URL class well it's not new anymore but
how many of you have used the URL
constructor not many okay so this talk
serves two purposes then yeah we got
native URL object so we can parse URLs
and do cool things with them how you
would expect that it would work like
this right so I try to construct a new
URL I pass it like a file named expected
to resolve in the same way it were so it
would resolve in a normal HTML link nope
error fail to construct URL invalid URL
what wasn't valid about my URL it's
perfectly valid I can put it in an
anchor tag and it will work just fine
right but no you need to provide a base
you need to provide how how to resolve
this relative URL because it's not
absolute I can do the thing in the first
line if it's an absolute URL if it's not
I have to provide another absolute URL
and it will Reiser resolved based on
that so yeah sure that works just fine
why can't this be the default I don't
know I actually suggested it to what WG
while ago many people agreed other
people disagreed they were kind of
uncomfortable with like dynamic defaults
so next principle be liberal in what you
explain what you accept do not force
people to use a specific type in your
parameters if more if more than one
unreasonable and in this case the URL is
actually a good example because yes I
can construct URLs with just strings it
works just fine
I can also construct URLs with other you
fruit through other URL objects still
works fine
I can even construct URLs from objects
that look like URLs like location
location is not a URL object it existed
before the URL object still works fine
so if you see people trying to use many
different types as parameters and they
fail they have to look at documentation
realize oh yeah I didn't I I should have
used the string there I should have used
a certain type of object write it into
your code except that type as well it
doesn't really cost you anything
and it prevents people from making
mistakes make the simple easy and the
complex possible if I could tell you one
API design guideline one UI design
guideline that would be it that is the
mark of good user interfaces and good
api's make the simple easy and the
complex possible offer a way to do
complex things but do not depend on that
way of also for shortcuts for the common
things for example we have this method
in the Dom compare document position
it's a bit mask you compare it with a
number or you can use a constant as I've
done in this case so that my code is a
little more readable and this would be
this would be pretty bad without short
that's right it's super confusing
compare document position so long so but
thankfully we also have a shortcut node
contains and that's one of the most
common cases where we want to compare
the document position of two nodes so we
have the shortcut for the common case
and we also have the big Swiss Army
knife for the more complicated cases
because compare document position
doesn't just compare but contains it
also compares like are they is is the
how really in what way are they related
in the dominant can be multiple things
that's why it's a bit mask my favorite
example of over complicating things
enabling complex cases by and making the
simple cases harder is the SVG Dom so
here we had an innocent circle you can
see it here it's just a circle with this
with the center and a radius and we
wanted to set the horizontal dimension
of the centre in JavaScript so we tried
to type
we got a reference to the circle element
and then we try to type circle dot C X
because we wanted to get the C X value
in JavaScript right we do this with HTML
all the time so we expect what what do
you expect this to return how many think
it's gonna return 50s or either as a
string or a number it doesn't matter
here how many think it's gonna
at 50 quite a few right and if I hadn't
warned you it would be more well
actually what returns is SVG animated
length it's an object and I can see in
the console it has a baseball in an
animated valve so I'm like okay yeah I
can kind of see the point if smile was
still a thing so yeah I guess I need
baseball so I type circle dot CX don't
baseball how many of you think this is
gonna return 50 I guess you're on to
this right
SVG leg it's still an object but I can
see it hasn't value property so I can
finally get my value by typing circle
dot CX dot baseball dot value and I can
finally get 50 yeah do not use the SVG
um I don't know why it's designed and
that way but do not use it just use get
attribute set attribute and save your
sanity I mean it's not just how this
whole length of these property chains
what if I didn't know about this and I
naively tried to just set circle dot CX
to some other value like I wanted to
change the center of this circle so I
did this what do you expect to happen
maybe an error how many think it's gonna
error I'm trying to set an object one
802 to a number maybe to dinner right
how many think it's gonna work so let's
then try to get the actual value and see
that it actually work was the five
applied is it five now fifty because the
SVG Dom is just giving us a big old fat
finger go to hell you're not using my
API in the way I want I'll just ignore
you yeah whatever you want to set it to
five you next big API design
guideline is parameter traps you might
have heard them as boolean traps how
many of you have heard the term boolean
traps okay no
so they're usually called boolean traps
because the biggest examples are with
boolean most boolean parameters in not
just JavaScript any programming language
are bound to be confusing unless they're
explicitly setting some boolean property
they are going to be confusing look at
this you probably know what this
parameter does just because you've read
the documentation but it's not
self-evident low note through okay I
want to close I want to clone this node
and true what is true something is true
yeah it's the subtree but it's it
indicates do I want to clone the subtree
or just the shell just the element
itself but is it self-evident does it
make sense you have to look at the
documentation to make sense of this code
here's another example it makes sense
that focuses the event right it's kind
of self-evident and you have a function
there it kind of makes sense I'm adding
an event listener on the focus event
with the callback with this callback
through through what what is through am
I actually adding the event listener if
I if it was false
would I not be adding the event listener
it's of course you know that this is
whether you're capturing or bubbling but
you know this because you've read books
you've read articles you've read the
documentation it doesn't make sense on
its own and of course why not go all the
way and have tons right why not just
start one stop one when we can have so
many let's confuse people even more and
as you can see it's not just boolean
values that have this effect
I mean keypress makes sense here okay I
mean I'm initializing a keyboard event
it's the key press event it makes sense
whoo what do all the other values mean
it's not self-evident you have to read
the documentation yes some of you might
know what actually how many of you can
understand what at least one of the
other values mean exactly so not only
you have to read the documentation
there's not one boolean argument but
tons of them and this is another one of
my favorite examples so you have to get
a reference to the parent node to
replace two nodes and then you have to
provide both children as the arguments
how many of you know which one of the
two that keep alternating is the correct
one
stop giving spoilers Christian of course
you know it I can never remember I have
I always have to look it up I always
have to type empty and replace child and
look it up it's completely unpredictable
and of course canvas canvas is full of
functions with mystery numbers what do
these numbers do if you read the canvas
tutorial it will tell you something like
change these numbers to see what a child
with what each of them is for can you
imagine getting a microwave with
unlabeled buttons and then there's a
label that says press these buttons to
see what each of them is for is that cuz
that's how I want to spend my morning
right or even in graphical you eyes we
are way past these problems can you
imagine like you would be very pissed
off if you got a dialog with like a
bunch of sliders and their labels where
yeah first parameter some other
parameter here's a third parameter a
fourth parameter four definitions of
what these parameters do look at the
documentation that is not how graphical
interfaces work why is this how our code
works so the example with the sliders in
the example from the microwave is floor
from Brett Victor's amazing essay called
learnable programming my slides actually
have the link but uh okay it's there uh
it's kind of small my slides are online
so in his essay he made the case that
these these kinds of api's are confusing
so we need better programming tools and
we need to change how we teach
programming instead of telling people
hey change these parameters around EE to
see what they do and that is a great
point but we can also make things easier
by designing API is better instead of
having something like this with mystery
numbers that I have to modify to see
what they're for why not have something
like this you can tell now what these
numbers are for the two first are for
them are for the center then the radius
then the rotation they're labeled now or
if you want to go to go even further you
can label each individual one so now you
know which one is the exit which one's
the Y but you lose the grouping so you
have to read every individual one but
both of them are valid approaches let's
not forget the code is written once but
read many times so we should optimize
for readability instead of terseness yes
it's more it's more characters if you
have labeled parameters but it makes
such a huge difference when something's
reading your code and the things you you
think are obvious when you're writing
side code are not obvious to other
people or yourself in the future
so no the the obvious solution is having
one object literal argument it gives you
labeled parameters no more guesswork
about what everything does it allows you
to have parameters in any order so you
also you're also saved from the replaced
child problem and you can also make
every parameter optional without having
to worry about their order because they
don't have an order I modern api's have
started adopting this how many of you
know that that number to local string
now accepts arguments and lets you
format numbers here's another thing you
can learn from this then even though
it's the talk is not about this so yeah
the old number to local string method
got extra arguments now that let you
format numbers they you can do digit
grouping with like commas you can do
currency formatting it's super useful no
need no more need for libraries for this
so it it has one mandatory argument the
locale
which in this example is en you can pass
in I think the Israeli locale is il
right oh okay that and all the optional
arguments are in object literals so you
don't have to remember what the order is
or give or provide dummy values that
don't mean anything
so here said this is a currency and the
currencies euros and the currency
display is by name not by symbol which
the default and it prints out 50000
euros with like a coma and everything
another example is that event listener
so our event listener is starting to get
more flags
besides capture so they realized at some
point that you know what this cannot
continue like we cannot have an event
listener focus call back through falls
through falls through falls like what
what does this mean so they adopted this
pattern with the object literal and now
you can tell that through means capture
and you can also have other flags as
well like once and that were script six
makes it even easier to provide the vote
default values for parameters straighten
the straight and the signature of the
function so here I've said I have one
parameter the default value is an object
and this object has option one and
option two which also have default
values of their own so if I call this
function without anything without any
parameters I get the default values no
errors nothing if I call it with an
empty object literal I get two default
values if I call it with an object
literal Allah only specifies one option
I get 42 as the value of that option and
the default value for the other option
and this is supported pretty much
everywhere now in modern browsers but if
you're if you're too worried about all
browsers you can always transpile the
next deadly sin of usability and not
just for code but also for you is
unnecessary error conditions try to
prevent error conditions instead of just
throwing errors at people for example if
you have a number in graphical user
interfaces you can have an input where
people type numbers and if the number is
bigger than what you expect
you can give them an error or you can
have a slider and not let them pick a
number out of range in the first place
so it's the same with code again in my
so let's create two elements a div and a
P and now again my favorite replaced
child example so none of these elements
have a parent we didn't add them in the
done and now we're trying to replace one
with the other you might argue that this
is stupid why would I ever want to do
that but things like this happen like in
in normal code you can have you can you
can you might have set these variables
ages ago and you know things like that
happen so what happens if I do this how
many of you think that nothing is gonna
happen okay how many of you think an
error is gonna happen not that many so
yeah I get an error uncaught dumb
exception fail to execute replace child
on node the note to be replaced it's not
the child of this node yeah I mean I
kind of expected that but why why have
an error condition in the first place so
the what WG realize this at some point
and they added more methods that are
easier to use like replace with
unfortunately it's not supported
anywhere yet but it will be soon and
that doesn't have an error condition
because you're not you don't have to
repair you don't have to refer to the
parent node anymore it's just the old
child than the new child no references
to any parent nodes that need to be in
sync if I try to replace the div with
the P okay nothing happens yeah you have
two floating Dom element references I
replaced them are you happy now order
parameters by importance this this is
exclusive to code it doesn't really have
much application in graphical interfaces
if you if you have parameters that
people provide more frequently and
you're not using an object literal so
you are you actually have parameters
that have an order put them in order of
importance in order of how frequently
are they used observe some people using
your API how frequently are they using
its parameter that parameter should
first my favorite bad example of this is
the history API so every time I use the
history API I have to provide null and
an empty string as the first two
arguments and then only then I can
finally provide a URL as my third
parameter which is what I was actually
interested in I don't want to provide a
state object I don't want to provide a
title then browsers don't do anything
with them I just wanted to provide a URL
the URL should be first I mean I had to
look up what these parameters actually
do because I've just gotten so much in
the habit of just blindly typing null
empty string every time I wanted to use
the history API why why not just have
this I got no these are native API so we
can't change them at this point you can
change your own code though don't do
these things double negatives thankfully
most JavaScript API vests are kind of
free of them but there is still this old
example disabled equals 4 so what is
disabled equals false
right so diya it's not disabled so it's
enabled ah right why couldn't have been
like this in the first place why do I
have to think what disabled why do I
have to think in double negatives like
people have trouble thinking in double
negatives disabled is not enabled so
just used enabled this is a kind of
controversial one so in it it has less
importance than other than other UX
principles but if you can it it's it's
good to live by it
so having boolean parameters that are
true by default is best to be avoided
humans think of absence as a negative
concept not as a positive one and also
in JavaScript as you know boolean
parameters are not just true or false
they can also be on
find if you don't provide them and the
seasoned JavaScript developers think of
undefined as false because palsy because
you know if you convert it to boolean
it's false so it's a little confusing if
the default value of a boolean parameter
is true so if I don't provide it is it's
true but if I if I do provide it and
it's false it's it's false it kind of it
doesn't make much sense does it
so no node again it's as you can tell
it's one of my favorite examples so if
you don't provide a value then it's deep
which is a sensible default I'm not
arguing that if you don't provide a
value it shouldn't clone the entire
subtree that's what you want in most
cases but to clone only to doctrine to
clone to only clone them the element
itself without the subtree you have to
provide the value false so it can be it
can trip up people when they're still
learning JavaScript it's not it it's not
a major point but it can be a little
confusing it would have been better it
would have been better if instead of the
first parameter being deep it would it
was shallow so if I provided false it
meant cloned the whole subtree if I
provided through it meant just clone the
element and the default value would
still be the same but like I said it's
not a very important point like in the
the number two locale string there is a
parameter called use grouping which is
true by default so it kind of violates
this principle so what should we do how
many of how many think that it would be
more usable if use grouping was false by
default
exactly you usually want grouping so
it's good that grouping is on by default
also should I change the parameter name
to no grouping that's a double negative
so in this case you actually can't do
much yeah this parameter will be true by
default and that's probably the best
design we can come up with
so this guideline is the lowest in
priority compared to all the others
we're gonna discuss
next one chaining is good through salt
chain I'm sure before you started using
frameworks or libraries when you were
still innocent and using vanilla
JavaScript or maybe some of you still do
you did something like this right how
many of you have done something like
this at some point quite a lot so this
is this is getting very repetitive why
do I have to keep typing audio all over
again if if setattribute just returned
the element that it's applied on instead
of undefined then I could just do this
which is still repetitive but at least
we've gotten rid of the element
reference in the beginning or my
favorite example of lack of chaining
canvas on canvas at least if you're not
using a library you have to keep typing
the same methods again and again again
on one corner on the canvas context why
can't it just be this why can't I just
not type the canvas context over and
over and it's so simple it pains me it
just takes returning this on every
method of your class it's one line just
return this if you haven't returned if
you haven't returned anything else
returning undefined is wasteful why
would you why would you return undefined
it doesn't do anything nobody will use a
value of undefined people just won't use
your return value so why not just
provide something that people can do
something useful with you can even
automate it you can have a chainable
function that you pass in a function and
it makes it chainable so you don't even
have to type return this on every
function you just pass it through
through a chain of all function like
this a few years ago I actually wrote
this library called chain bus whose
whole purpose was this just enabling
chaining on any API you pass through it
it had a plugin for Dom canvas hence the
name a while ago I actually I got so
pissed off that native api's were not
chainable that I made a library that let
you do things like this or like this on
canvas so next commandment supporting
doing things and mass again set
attributes yeah there's more than one
problems with it there are more than one
problems with it so it's not just
changing why do I have to keep typing
setattribute
over and over and over again I want to
set multiple attributes on the same
element why can't I just do this yes
it's so much easier to read when you
don't have to very mentally filter out
that the repeated set attribute you can
just see what the code is actually doing
or another kind of doing and another
kind of doing things or unmask I I want
to apply I want to set the the attribute
data foo on all the elements that have a
certain class so I'd have to get all
these elements and then run a loop over
them and an old set attribute repeatedly
on each one why can't I just do this why
don't I have set attribute on node list
to a caveat with things like this that
I've seen many times actually it's yet
another it's not another case of making
the complex easy and the simple
impossible like what this would also be
really bad if I if I have if I had to
provide an object every single time even
if I just wanted to set a name in the
value because a lot of the time yes I
just need a name and the value so do not
force people to use whatever API you've
designed to make mash things easier
provide a way for them to do the one
thing and a way for them to do lots of
things with one method
the next sin is redundancy forcing
people to provide two parameters for
things that if you can infer one from
the other again
the old term is a prime example of this
why this always bugged me why do I have
to provide a reference to the parent
node to remove a child from the dome I
could never I could never wrap my head
around this it seems that the old dome
is designed in such a way that you have
to keep doing that parent node at all
times like most even when people are
writing vanilla JavaScript they usually
create a function that just removes a
single node without having to keep
referring to the to the to the parent
node thankfully now we got element
remove which solves this problem and
this is supported pretty much everywhere
actually many people don't know about it
but yep at least we've gotten rid of
that problem
another case insert before why do I have
to go to the parent node if I just want
to insert a node before another node
there it's completely useless why can't
I just why can't the function itself do
element that parent node if it needs it
which is why we got element dot before
suddenly it's not supported anywhere yet
but it's in the spec and it will be in a
browser near you soon and we also got
after as you can imagine how many of you
have written Java in your life who quite
a few so you're familiar with things
like this get foo set foo Java Script is
no Java you need to forget about this
stuff yes this is very common when
you're writing Java you define a bunch
of private properties and then a bunch
of boilerplate functions to set them and
get them and a lot of the time what
these functions are doing is just
setting the property or getting the
property without anything else this is
just Java developers guarding themselves
against future changes what if at some
point I want to execute some code when
the name is set or what if in the future
I want to transform it in some way
before it's get so Java developers do
this
to avoid to avoid it to avoid having to
change the API in the future but in
JavaScript we don't need to do that we
can just have public properties and if
at some point we need to run code when
the when these public properties are set
or get we can just use it Atma script
five accesses which are supported
everywhere like even even in ie8 so we
can just there's absolutely no reason to
have two different methods just a sudden
get a property and have people mentally
parse the the the method name and having
to figure out oh yeah this is just
setting a value oh yeah this is just
getting a value yes it's easy it just
takes us a few milliseconds to do it but
it's it's even more overhead for our
brains when we're reading code then
something like this is much more obvious
I can see that the second line is an
assignment it's a setting the month to
one if it was if it was not set month
yeah I would I would still be able to
figure it out but I would have to spend
like a second thinking about it and it's
good if people don't have to spend
precious seconds figuring out trivial
things like this local storage is a
curious case it has a set item property
function and a get item function and it
lets you get and set arbitrary
properties but it also has it also
supports algorithm properties right on
the local storage object to get in set
so it's kind of both a hole in a
hall-of-fame example and a Hall of Shame
example because this is this is just
more verbose and I have to do more work
when I'm reading it this is nice and
short sure you cannot do things like
that with ACMA script five accessors
because accessors require you to have a
certain property name there
fixed and you can do dynamic stuff when
the that property is read but you can do
it with proxies proxies are awesome
so with proxies you can pass in an
object and the proxy returns to you an
object that mimics it in every way
anything you do to the returned object
is mirrored on the original object if
you make it so in the in the functions
you provide so it has a bunch of traps
get set has many different ones and you
can you can control every aspect of how
people use that object do they set a
random property on it that doesn't exist
you can do stuff you can respond to it
do they get the property that doesn't
exist you can respond to that too in any
way you want so that was an example of
getting assuming I had a get item
function in my object this was an
example of setting there are twelve
different traps so you can really do any
you can really control anything that
happens on that on that object naming
how as someone said I forget exactly
which one there are two hard things the
two hardest things in computer science
are naming things and encash
invalidation who was it right yes and
off by one earth so I have two
guidelines for you about naming use few
simple words and use them whole do not
make people guess what an abbreviation
means do not pointlessly use three or
four words to name a function when one
or two would suffice it gives people
more to read pointlessly it makes them
wonder if I like remove a word when I
get a new method that actually does
something for example parent node Y is
the parent node we're so used to it that
we don't question it anymore but why is
it parent node why is it not just
element dot parent I follow this always
baffled me and predictably enough jQuery
did too element dot they do like jQuery
object or parent exactly because that's
what
make sense the dot the old dome is full
of things like node parent node child
nodes but it's also inconsistent with
itself because we get first child last
child but first child last child so we
have element or child nodes and it's all
the nodes including including elements
text notes comments why couldn't that be
element or children and yes I know
you're about to scream like hey element
of children sneaking it's the it's the
children it's the element children yeah
but it would be it was why was it
designed that way first child is not the
first element child we have a separate
property for that also names should
describe what it does not how it works
keep the technical details to yourself
keep the technical details to your
implementation your users and by users I
mean the other programmers using your
code which includes you in the future
your users do not need to know how it
works they just need to use a function
and have them get the expected result
this always baffled me query selector
all why I don't think of this as as
querying when I when I think of querying
I think of databases
I don't think of like getting elements
by a selector as querying and yeah and
then we got these new methods query and
query all which do have some differences
it's not just a renaming but still so
yeah these are shorter these are better
it's if they don't have the pointless
verbosity of the other ones which I mean
query selector all kind of makes me
worried wonder if is there are there are
other methods like query something else
oh I because that's that's what happens
when you have a ton of words in your
function names people people wonder like
does this mean that they had to
differentiate from some other function
okay
so query and query all don't have the
verbosity problem but they do have the
old technical term problem I mean do not
expect that your users will have the
same technical knowledge as you there
are people that are baffled if you use
query because they don't have enough
technical knowledge to be comfortable
with terms like this assume that your
users are the the minimum amount of
technical that is needed to use your API
find and find all makes much more sense
I'm looking for elements that match this
selector they make way more sense than
this unfortunately these were in the
spec at some point they're not gonna
happen but they're not gonna happen
because they were bad for usability just
because they were conflicting with some
version of jQuery in in some cases and
this is kind of an interesting one
because based on most usability
principles using a dollar as your
function name is a terrible idea what
does a dollar do you see you look at
code you see dollars you see dollars
everywhere you're like what the hell I
see this all the time in people that are
learning JavaScript now and they are not
used to this convention yet they're like
what does this dollar do doesn't have to
do with money so in this this is a case
where this has become such a convention
where it's accepted by now even though
if you ask someone before it became so
popular they would be like this is a
terrible idea it's terrible for
usability you cannot make any sense of
it you can it's it's not readable just
just give it just give it a word get if
you want something short not a dollar
but it's something that occurs so
frequently in code that it ended up
being okay because we we just learn it
once and then we see it everywhere and
work a with it another deadly sin is
expecting that your users will use
boilerplate like calling the same
functions every time you every time
they're using your API like yeah sure if
you use this for this first function you
have to use this
and this and this as well well if
functions are used together just make a
helper function with them like this is
my favorite example of boilerplates just
to do a simple request
you have to write 1 2 3 4 lines of code
minimum they say these are more because
it's not minimum I wanted to show an
example with JSON just just to make it
even uglier but just to do a simple HTTP
request that just a simple get request
you have to write you have to write four
lines of code and these four lines of
code always go together isn't this so
much cleaner just fetch with the URL
sensible defaults get is the default I
don't need to provide it every single
damn time and then a promise and I can
get JSON out of my response if I want
here I'm transforming the response to
Jason for the next function that I'm
calling if I wanted text I wouldn't even
have to do that and by the way this is
supported pretty much everywhere now
unfortunately it doesn't do everything
that XML HTTP request does but it does
most of the useful stuff another thing
that I can't another principle that the
dome itself doesn't violate very much
like native API czar usually pretty good
when it comes to that responding to
changes so I had even though I wanted to
make this talk use native API for pretty
much all examples I realized that that
wouldn't be feasible for all of them so
I did I include some good and bad
examples from libraries but I try to
keep them as short as possible
and as few as possible so how many of
you have heard of machinery so it's a
it's a JavaScript library that lets you
do complex layouts like the ones shown
here the one on Flickr like if you have
a ton of elements with different
dimensions it lets you display them in a
pretty way it's it's pretty good of
useless
the layouts of producers are nice but it
requires you to call a layout method
anytime anything changes if you add an
element you have to call the layout
method so that the layout happens again
and this means that every single bit of
code needs to know that I'm using this
library if I remove this library in the
future for whatever reason I have to go
to every bit of code that I've written
and remove this function call its it
results in really tightly coupled parts
of code we while we cannot respond to
all possible changes so methods like
layout are still necessary and they
probably will be for the foreseeable
future we can respond to at least some
changes for example if elements are
added or removed we can respond to
changes like that we could have a
mutation observer the Cowles layout
every time the child list changes we
don't even need to inspect what the
mutations pirate parameter is the child
list has changed let's relay out it's
only like a few lines and mutation
observers are supported pretty much
everywhere I think even on i9 and soon
we'll be able to respond to even more
things like resizing if an element
changes dimensions for any way for any
reason or intersections if an element is
covered by another element or where the
element is into the viewport we can
respond to changes like these and even
more along the future there are the
Houdini set of specs it's a bunch of
specs about making about giving
developers access to native browser API
so they can add their own layout methods
for example so things like Masanori
would be able to be done with and behave
almost like a native layout method so
I'm sure some of you are thinking when
someone please think of performance I
cannot just have a mutation observers
there that keeps observing the the child
list like this is this is bad for
performance
right so first off mutation events were
bad for performance that's the reason we
got mutation observers so if you've
heard something about how mutation
events are bad for performance this does
not apply to mutation observers mutation
observers are an API designed to
overcome all these issues but also of
course they don't come for free they're
cheap but they're not free so if you can
you should try to use them with
restraint observe as little as possible
do not add for example that I want to
observe attributes as well if you don't
actually need it narrow scope as much as
possible do not just observe anything on
the document body if you can narrow your
scope down to say just the grid element
and observe when you don't need when you
don't need them anymore there's an
unobserved method actually it's a
disconnect method yeah where it says
unobserved they're mentally put
disconnect I had a brain fart when I was
making this slide and do not do not
force it on your users if your users
care more about performance than about
decoupling you should give them the
option there it make them opt in or opt
out depending on what your coding either
have them on by default and provide a
method to disable them or have them off
by default and provide a method to
enable them it even if you have to call
a method to enable this kind of
monitoring it's just one method not a
method I have to plaster all around my
code every time something changes one of
the last one of the last things that is
very specific to JavaScript a deadly sin
of JavaScript usability is forgetting to
use to string and to JSON methods in
your classes
the to string method is called every
time your object needs to be converted
to a string for whatever reason such as
when you concatenate it with a string
and my favorite bad example of this is
the attribute class the native attribute
class so if I try to convert the native
app attribute class to a string I get
this useful thing object attribute
so useful right I can do a ton of things
with it
this is just the default object to
string method whoever wrote this whoever
wrote the spec for it did not bother to
define one why instead couldn't I have
something useful like I can define it
even by myself do not do this but do not
do not do this to Native classes but do
this to your own classes do define to
string methods that do something useful
such as well let's see yes if i zoom out
that works so on your own classes do
define through string methods just for
the lulz I defined it on the attributes
class and now if I do if I concatenate
an attribute node with an empty string I
get class which is much more useful I
could also use this dot value and have
like an actual representation of the
node but anything anything that is sort
of anything other than the default is is
much more useful same with two three
with two jason methods the to jason
method controls how your object is
string if I'd so the date object has a
to jason method which is pretty decent
it just gives you a serialization of
date and I mean if you if you want to
store a date object in JSON what else
would you want it has all the
information you need to reconstruct the
object on the other hand if you try it
is to to serialize a regex
to jason you get nothing this is just
the default if you do not provide the to
json method in your objects this is what
you get two braces hopefully people are
okay with that
not really and lastly my time's up but I
hope I have five more minutes
so lastly the best JavaScript API is no
JavaScript API
some of you wear JavaScript developers
we do not often think about that we
think that everybody on the web platform
knows JavaScript every developer knows
JavaScript right but there are tons of
people they only know HTML CSS and if
you require even a line of JavaScript to
use your code they can't do it
or they can do it clumsily they cope
they copy paste and then they can't
modify it I asked a while ago
hey people who write HTML and CSS how
many of you actually are comfortable
with JavaScript and half aren't very
comfortable half one into only fifth
only 51% said they're very comfortable
with JavaScript so I mean I understand
there are many there are many libraries
that just don't make sense without
JavaScript for example jQuery you can't
have an HTML API for jQuery it's a
library for JavaScript developers but
there are many libraries for like
widgets like date pickers before we got
native date pickers accordions
slideshows autocompletes
a ton of libraries that do UI stuff and
you should be able to initialize them
and provide settings declaratively so
before we could do sliders in HTML
people were using jQuery UI for sliders
and it looked like this you needed to
have something in your HTML anyway like
an element or something and then you
would call the slider method on it and
provide all the parameters there so if
you wanted to change stuff you had to do
you had to look in two places now in
native HTML when we got sliders of
course there is a JavaScript API to them
but you can define them just with HTML
just declaratively
I can set a minimum and maximum the
increment whether I want two handles or
one suddenly the two handles are not
supported anywhere this is just a
polyfill I wrote but it's in the spec
so you can define tones of things
declaratively like anything that makes
sense to be to be this to be defined in
HTML you can define in HTML and a few
guidelines for providing HTML api is for
your libraries except classes for
boolean settings like if something is on
or off you can check it for classes
there attributes for other primitives
like strings numbers you can have data
attributes if you want if one of if a
parameter is - an object like an like a
collection like a list of other complete
values for instance you can't put all
these in an attribute unless they're
very small so the attributes should
accept the selector or an ID - another
element that has all the options and
having an it setting some some class
some attribute that if I put it on an
element it initializes it without me
having to call some function in
JavaScript
for example the ocean the ocean fleet
library that I wrote is there not a
complete library it's going quite well
so it really tries to follow this
principle you can provide the
autocomplete options either in an ad
entirely in an HTML attribute like comma
separated or you can link to another
element and it's also using the native
html5 wot to complete as a fallback and
all the options can also be provided as
data attributes like data data - main
cars except the options there are
functions like you can't do anything
with that like you don't want people to
be providing functions as HTML
attributes if they can write functions
they can provide them in JavaScript but
anything else like numbers strings they
can provide them in straight in the HTML
and also make them inheritable this is
from prism it's a syntax highlighting
library I wrote and you probably specify
the language of the highlighting VI
class and yes I know this goes against
what I just said where I was like key
value pairs use attributes but this is
what the html5 spec suggested for
old examples the html5 spec says don't
use the lung attribute use the class
like language CSS or language JavaScript
so that's what I did the base the main
point is these classes are inheritable I
can put a class on the body for what I
expect most of my code examples to be
about like I've done it and this in
these slides as well actually this saves
people from a tone of verbosity in their
HTML like imagine if every inline code
element had needed to have its own class
and if you have global settings for
example another library I wrote is
called stretch it's about having Auto
sizeable inputs and text areas depending
on the content and it has a data filter
it has a filter parameter that specifies
which elements it should apply to
otherwise it just it just applies to all
form elements and because this is a
global setting it's applied on the
filter so the script element can't be a
good host for global settings but it
shouldn't be the only one because
sometimes people do not control what's
on the script element if they're using
like weird CMS's so you should also from
you should also provide other ways but
if and if you do it on the script there
is document dot current script that lets
you get a reference to the script
element that the current that the
current code was included with then you
can get whatever attribute from it and
hopefully in the future now that we're
starting to get CSS variables maybe
we'll even have CSS api's I'm done
something a bit like this in my multi
range polyfill for like multi range
multi handle sliders so you can see in
the API section it has two sections it
has a je s1 and the CSS one and the CSS
section is like use these variables if
you want to change this thing and I
believe the more people start using CSS
variables the more we will see CSS api's
like this and then they'll have their
own talk about how to design them better
this is this is pretty much it I hope
you learned something a few words before
I leave you kind of like general advice
about usability
the first one is stay foolish and this
applies to any kind of usability not
just about code try to approach your
interface like someone with very little
technical knowledge and not that much IQ
how where would they be confused be
naive do not do not I know that when
you're writing code you know what tone
about it and it's really really hard to
get into the mindset but try to stay -
try to stay in that mindset as much as
possible cultivate this mindset for not
just your projects but other projects as
well it takes practice but eventually
you you you'll be able to like see
interfaces and be like yeah I I don't
get this and you might you might
actually get it but you know that South
someone else might not and empathy is
the most important thing about usability
get into the mind of the user the other
program is using your code be nice to
them don't be a dick to them try it try
to think like how how would you want an
interface to be if I was if I if you
were using an interface for whatever
thing you're coding how would how should
it be how how would it what would be the
most pleasant interface to use for this
and it's not coding after you've thought
of that because if you start coding
before you think of that you do what's
easier to code not what's best for
usability think as a user first thank
you very much</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>