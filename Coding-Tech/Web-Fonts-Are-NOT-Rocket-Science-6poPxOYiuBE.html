<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Web Fonts Are NOT Rocket Science | Coder Coacher - Coaching Coders</title><meta content="Web Fonts Are NOT Rocket Science - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Coding-Tech/">Coding Tech</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>Web Fonts Are NOT Rocket Science</b></h2><h5 class="post__date">2018-03-16</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/6poPxOYiuBE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so today we're going to talk about web
fonts this image is particularly
relevant because of the SpaceX Falcon
Heavy launch aster Day or this morning
to today what day is it with yesterday
alright yeah completely thrown off hmm
so yeah web fonts are rocket science not
rocket science so it's actually kind of
interesting if you look on your name
badge the text for my talk doesn't
actually include the Unicode characters
that we're missing there so it's
advertising the web fonts are rocket
science I'm here to try to convince you
today that web fonts are not rocket
science
we'll see if I'm successful in that or
not today we're going to kind of go over
that red is not good all right
the first topic is MIT the second is
invisible and unstyled text font paste
syntax and font loading strategies to
improve the web font performance on your
websites so how many people know this
guy couple all right yeah it's kind of
expected US presidential candidate Mitt
Romney lovely face better than the
alternative US presidential candidate so
I could put up there so Mitt Romney was
deciding whether or not he wanted to run
for president in January of 2015 and
ultimately he decided not to run but
slate.com ran this headline on their
website which James Muspratt took a
screenshot of and it said MIT Romney is
officially running for president the
exact opposite of what was actually
occurring and this was a web font
loading problem because MIT Romney is
not running for president and not was in
italic and I'll go over the why that is
later so this is a huge problem right
because there's a war on journalism
right now and the accuracy of headlines
is very important so similarly this
California newspaper in 1918 might have
posted a headline that said the world is
over when in fact the world war was over
or this Baltimore paper in 1912 might
have posted a headline that said that
all Titanic passengers are safe and
they're in life
actually they did do that yeah so yeah
so you web fonts are kind of a Content
problem in a performance problem rolled
into one your content problem is now
informed by our performance problem so a
little bit about rocket science before
we continue rocket science is more
commonly called aerospace engineering
it's divided into aeronautical and
astronautical things that find the air
things that fly in space completely are
irrelevant to the topic of this talk
because web fonts as I said earlier are
not rocket science
so topic - invisible and on sale text so
web browsers have chosen a default way
to load a font a web font and often that
is invisible to make the web font
rendering text the text invisible while
it's loading so after a few seconds
after the web con has successfully
loaded it will rerender using the web
font content and this is called the
flash of invisible text so hopefully the
text will come back and when it does it
will render so that's great I didn't
name that so don't get on me about
horrible acronyms so but this sort of
creates a problem right the text is
invisible the text would be readable
system fonts had been used and so at
least your complaints like this remember
when the text used to load before the
images I'm gonna complain about image
optimization so text your load before
images right the text is there the
content is there so the other approach
sort of to mitigate invisible text is to
show the fallback font while the web
font is loading so this is usually the
first local or system font in your web
font stack and this is called the flash
of unstyled text so when the web font
content comes back it will rerender
using the new web font as I mentioned
this is called the flash of unstyled con
no a text excuse me so this is kind of
pitted designers versus developers in
this sort of I don't know sort of
adversarial relationship because on one
hand designers want full control over
the medium they want the text to be
invisible wow that is interesting how it
loads all right
so they want full control over the
medium they want the the no fallback
wants to be shown until the web font has
successfully loaded and developers want
to render as quickly as possible they
want to render that Minimum Viable
Product to the user as fast as possible
and all of these things are sort of
rooted in the flash of unstyled content
which is a really old problem when it
came to CSS loading so you don't want
your HTML to render before your CSS is
finished loading so browsers will
typically block and show white screen
well that's well that's why your CSS
external CSS is loading and that's why
we do things today like inline our CSS
critical CSS and things like that and
the sort of elevation of the flash of
unstyled text to be on par with the
flash of unstyled content I feel like is
is not warranted and I think it's kind
of unfair because we have great tools to
minimize the effect of the flash of
unstyled text so we kind of have this
saying it's making a mountain out of a
molehill right the flash of unstyled
content very serious problem flash of
unstyled text not so much so how many
people are familiar with lift
coefficients nobody a one person are you
a physicist
hey nice cover your ears lift
coefficient is dimensionless unit that
relates the lift Andrade by a body
compared to the fluid density around
that body again completely irrelevant
because we're not talking about rocket
science here we're talking about web
fonts so back to Mitt Romney the easiest
way to sort of solve this mit romney web
font loading problem which i will keep
them i will keep repeating that phrase
to my death it will always be the mit
romney web font loading problem is not
to use web fonts right but we don't want
to do that that's not a good solution to
the problem the second easiest way is to
only use one web font so don't use an
italic we don't want to do that either
we want to provide technical technical
problems or technical solutions to
problems that that enable our designs
so the
easiest way to mitigate this problem is
to force a flash of unstyled text for
all of our web fonts so this sort of
default browser behavior is very
contentious it's sort of gone back and
forth for a long time and people don't
really agree and when these kind of
situations happen we need tools or we
need specifications we need standards
and web browsers that allow us to
customize that behavior but again it's
it's a very contentious topic so
historically looking back at the history
of font face in 1997 the first web
browser with web fonts came out it was
in our Explorer hey shout out to them
nice
they added font face support with the
full flash of unstyled text so by
default it would show system fonts while
the web fonts were loading opera was the
only other browser that existed at that
time on this specific chart and then in
2003 Safari came out did not have font
face support so full 6 years later only
one web browser with with the web fonts
2004 Firefox and in 2008 the second
browser finally added font face supports
web fonts a full 11 years after internet
explorer first pioneered it but they've
decided to use invisible fonts with an
unlimited timeout so until the web font
successfully loaded it would make the
entire text on your page invisible which
is not good but it is kind of
unbelievable how much weight this sort
of had on the default browser behavior
moving forward so in 2008 chrome came
out they add web fonts it was based on
WebKit which is the same as Safari at
the time so they shared that same
decision
in 2009 Firefox added web fonts with a
flash of unstyled text a nice good job
opera added it in 2009 again with the
flash of unstyled text
and then to sort of mitigate this sort
of invisible versus unstyled there was a
third behavior that was added which was
to add a timeout a three-second timeout
so if the font was invisible for more
than three seconds if it hadn't loads
loaded successfully it would render the
fallback text until the web font came
back so you would see invisible text for
up to three seconds and then after that
you'd see system fonts and then when the
web font finally came back it would
rerender using the web font content but
three seconds a maximum of three seconds
is a quite a long time so I'm gonna take
a deep breath and hit a button and we're
gonna all wait three seconds together
already 300 word all right so after 3
seconds it'll render the fallback text I
think this is Helvetica or Arial I'm not
sure don't get mad at me I don't know
the difference between them right now
and then when the web font comes back
it'll rerender using that web font
content so that's kind of nice but it
just sort of complicates the whole thing
even more so in 2011 Firefox added the
timeout which is great 2012 opera
followed suit 2013 opera switched to an
infinite time out because I don't know
why I wish they hadn't and then in 2014
chrome switched to use the timeout and
of course as many of you know opera
switched to the blank rendering engine
to follow chrome and they went back to
the timeout so yeah interesting then in
2015 edge was added and they went all in
on their unstyled text which is nice
consistency and then finally eight years
after safari added web font support they
switched to add a timeout timeout so I
feel like are very important because
without a timeout your text is sort of
or your web fonts become a single point
of failure so if they if they request
hangs your text might never render so
timeouts are very important for the
robot
our sights but again invisible text is
not a deal so this is great modern day
we have no infinite timeouts
hooray celebration with that awesome
completely red X that you all can see
and appreciate so if this is a little
bit confusing to you I actually built
the tool that will allow you to compare
the two behaviors side-by-side so go to
my website slash voice out you can play
around with timeouts just in the thing
is just emulator which will kind of show
you so you can change the load time to
whatever you want in the little text box
and I think there's different load times
this is an old screenshot there's
different load times for all your I
think for different web fonts I have on
this example so you can play around with
that and see how see the difference and
how they feel and just sort of play
around with the behavior so the
interesting thing kind of is to me at
least that the Floyd will repaint more
than the foul so if you're looking for
consistency in browser loading
progressive loading of your page boy it
may not be ideal
so overall maneuvers you want to come up
here and explain orbital maneuvers no
okay yeah I don't blame you
normal maneuver is the use of propulsion
systems to change the orbit of a
spacecraft
and I think this slide really highlights
the differences between web fonts and
rocket science they're much different as
you might imagine and again web fonts
not not rocket science as your name tag
might suggest so font face let's do a
little syntax so Ward Cunningham
famously said it's all tactile the code
runs so let's look at some actual code
so if you go to google or your favorite
search engine I duck duck oh I love that
one and look for font face syntax you'll
find this lovely giant what their what's
known as the bulletproof bulletproof
font face syntax and you'll want to take
that and burn it to the ground because
we're not gonna use it it's outdated in
archaic and it has way too many formats
we don't need to worry about that so
let's retire bulletproof font face
no longer necessary what we can do now
is just use two formats it's great it's
very simple use wofe two and wofe and
that will provide a great broad
experience for a broad number of website
web browsers so quite a bit better
compression is built into these formats
so you don't need to really worry about
compression headers or any server
configuration you can play around with
gzip and some people have found marginal
differences between the two but for the
most part you really only need to worry
about these two formats and the nice
thing is that web fonts can be
progressive enhancement right if if
rouser doesn't support this we're using
them for content fonts and that icon
fonts again so just don't use icon fonts
ever I will go out and say that just
don't just icon fonts no SVG yes but if
using for content fonts web fonts are
great they're great progressive
enhancement and if and if the web
browser doesn't support font face
fallback is fine you don't even worry
about it there's a little bonus tip for
you if you you could actually alias web
fonts and or local fonts in a you know
web browser and your CSS so if you have
a font place block and you'll save font
family Helvetica and then alias it to
Comic Sans everyone on your project will
really appreciate and be it'll be super
easy to do but debug why the well any
use some hill fatica renders as Comic
Sans so you can throw that in your
project and I'm sure your colleagues
will appreciate it all right so let's go
into a little bit about some font
learning strategies so this is kind of
the meat of the presentation how to make
our web fonts appear to render faster so
if we go back to our buddy Mitt Romney
and his web font learning problem so the
source code for this may have looked
like something like this so two versions
of a font face block the top one is just
the Roman font which is not bold not
italic and then the bottom one is then a
the the italic version of the font face
so titling gothic so each one of these
has their own sort of loading life cycle
right as contentious as that may be I
don't think that browser should do that
by default but each of them do have
their own low font loading white life
cycle so they'll have their own time
outs their own flash or visible text
and so as you can imagine the Roman
version loaded and the italic version
has not yet loaded so it's still
currently invisible so the easiest thing
we can do to mitigate this problem is to
use this new font display descriptor you
can throw on your font face block on
display swap will it means that you
enforce unstyled text by default right
from the beginning no timeouts no
anything so it will render the system
fonts immediately fall back - excuse me
render the system fonts immediately and
then rerender when the web font finishes
loading so that's kind of it
congratulations hey we did a following
strategy yeah whoo all right
oh but sorry limited browser support so
this is coming out more browsers it's
great
it's coming soon enough Safari 11.1 so
we'll be able to use this in a lot more
places and it is actually in Firefox and
Chrome right now so that's pretty good
business but this is sort of what
happens behind the scenes there's sort
of two ways this can go on the left if
your regular font loads first you'll see
that the italic version will appear as a
system font and then on the right if
your italic loads first the rest of the
text will appear as a system phone so
you can kind of see that knot right
there he's using your web font content
oh yeah I included cool arrows check
those out and cool highlights check that
out so web font content there is denoted
with the green check mark green
highlight and the fallback that's red
but I mean it's still hey it's a red
that you can see all right amazing all
right so red is the system font but it's
important that all this text is
immediately readable even if it's not
pretty
this isn't how the web the your web page
will be when it finishes loading it's
how it's how it's in flight so the text
is always readable another thing you can
kind of do which I kind of like I think
it's kind of neat is you can mix
different font display values so for
your Roman font you can use swap which
will be the flash of unstyled text and
then for your italic version in this
example we can use something called font
display optional which is just kind of
shorthand for saying if it's not in
cache don't render it it puts a
super-short like 100 millisecond timeout
and if the font doesn't come back in
that in that super short timeout it will
ignore it and then when you reload the
page again or to go to a different page
it will be in cache and render at that
point so hey congratulations we just did
our second font loading straw oh yeah
sorry
limited browser support same as font
display we're using before but here's
the different behaviors that you could
see so on the Left you'll see empty
cache version at the top is just both of
those our system fonts loading together
on the bottom on the left is when the
when the roman font has successfully
loaded and then when you have a primed
cache on the right both web fonts will
load successfully so this is really neat
I think because at any any possible
rendering of your website you're not
mixing your system fonts and your web
fonts together so if you look at the
bottom left there's oh there's kind of a
caution icon there it's using emoji not
font icons so that not there is is
actually using something called font
sentence font synthesis which is sort of
a fake italic version that browsers will
try and synthesize at runtime so font
synthesis it's a really great tool I
think to sort of mitigate some of the
the performance problems that we might
have with web font loading so when it
comes to font synthesis what the browser
will try and do if it doesn't have a web
font that matches what it what it wants
or what it wants to render so say for
example we have a one font face block at
the top of our page that's just the
Roman version non italic non bold and
then we have in our HTML content we want
an italic rendering we
a bold rendering the browser will
attempt to synthesize those using font
synthesis so it will really ugly do a
really ugly slanted version of your
Roman font and that will do a really
ugly bold version of your Roman font it
will try and fake those for you which is
not ideal for your final web page
rendering but it can be a really useful
tool while your page is loading to show
text or show web fonts as quickly as
possible
fake as much as you can so in some
respects I kind of consider font
synthesis to be a more sophisticated
unstyled text because it's not showing a
system font it's faking a web font using
another web font that it already has so
yes you can use it intentionally most
people use it unintentionally when they
have code mismatches in their in their
CSS if you aren't using it intentionally
I built a tool to let you detect that so
yeah so it's a bookmarklet and a
command-line tool it will highlight all
the the elements on your page that have
these sort of web font mismatches so
these fonts synthesized versions of your
text because if you're not super
designer person like I am not really it
might be hard to recognize this my boss
is a super designer person so he
recognizes it so I built something to
help me not look like an idiot in front
of my boss that will tell me what fonts
synthesis where font synthesis is used
on my in my code so you can use on the
command line too it will tell you all of
your mismatched elements and all of your
fonts synthesized elements so we can add
font display to our font face box that
descriptor is great but you can add it
to your page but your web fonts can
still seem very slow why is that because
font display doesn't actually change
anything about the loading the actual
doesn't change the loading of your web
fonts just changes how they render while
there
so it doesn't actually speed anything up
it's just more perceived performance so
this huge giant block of text that I'm
just flying to you on the screen right
now it's not super important but the
download checklist is just all the
things that need to be met before a font
face will start to download your and
your page so it finds a font face block
it finds a node in the document that
uses that font face so an exact match on
your font family it has to be non-empty
which is great
you don't want empty nodes just start
requesting web fonts that aren't
actually used in text and it has to
match unicode range so unicode range is
a way of specifying the specific
characters in your web font that are
available so yeah you want those to
match up otherwise you'll have
completely unnecessary web fonts so Ilya
has this great waterfall that I think
describes this pretty well so a lot of
times you'll start with your HTML or
across the HTML it will sort of build
your Dom get the response then it will
start to fetch your CSS which is great
it'll parse start parsing that response
it'll block your text in CSS well CSS is
loading and then the font doesn't
actually start to be requested until the
font face blocks and live elements in
your document that are using those fonts
are available to the web browser so this
is a super oversimplification but web
front requests often don't start until
your page is almost ready to render so
that's not great because right when your
page is about to render boom you get
invisible text so one thing one of
things you can do a really easy thing
you can do to mitigate this is to use
preload so preload allows us to tell the
browser we want to request a web font
before any of our CSS is loaded before
any of our documents have been parsed
our elements have been parsed in the
document that pairs great with fond
display so again browser support is
pending but I think this will be much
more important than even font display in
terms of improving how
web fonts load so this is what that code
looks like it's just a link element in
your header I think you can also do HTTP
header I don't know how the browser
support compares between those but this
is really easy to do you just put a wofe
- and your f there H ref I don't know
how yes in that and then the browser
will fetch that right when it parses
this this element so you'll still
include your font face blocks in your
page you'll still do everything the same
as you would have done before but the
the request triggers much earlier and
your waterfall so we've talked about a
bunch of different font learning
strategies font loading technologies you
can use that don't have super browsers
for it so let's talk about one that uses
a little bit more ubiquitous in terms of
browser support something you can use
today and in fact I am using preload
today but something will have a broader
support for browsers and that's the felt
with a class strategy so say for example
we have this two font face blocks on our
page ones using Lotto once using lotto
bold we can use something called the CSS
font learning api oh my goodness CSS
font loading api and we can sort of wrap
a class around any of any of our use of
lot o in our CSS so that the browser
doesn't actually think we're using lot o
on our page until we've added that class
in javascript so the bottom half of this
is JavaScript
it's the CSS font loading API it tells
the browser to load those two web fonts
and then when those both load
successfully we add the fonts loaded
class to our document so this is great
right we control the entire lifecycle of
our web fonts and this enforces fout for
us we sort of by press bypass the
default browser behavior for web fonts
the CSS font loading API is pretty good
in terms of browsers for it not great
and ie an edge I I just oh I wish it was
in edge so bad
ah let's justlet's
I'm just gonna do a sigh on the stage
for edge right now okay soon I hope
so there are polyfills for this you can
use something called font face observer
from Brom Stein really great polyfill so
you can put that javascript in your head
or you can load it async on make your
web fonts even slower and in IE an edge
if you want to do that and that's what
Smashing mag magazine com or smashing
mag com does today we we asynchronously
load this poly fill in when the CSS font
loading API isn't supported to sort of
deliver those web fonts to eye image so
the important thing about this font
loading strategy felt with the class is
that there's no invisible text you have
one group to repaint so we're using two
different web fonts they aren't
repainting separately they don't have
they're each each have their own
independent rendering cycle we group
them together we only repay one and it
works great with third-party hosts so if
you use google fonts or Typekit or
whatever you can use that with this
approach the only bad part about it is
that you kind of have to watch your font
family use in your style sheets just
kidding so you can use font family just
how you would before there's a post CSS
plug-in called post CSS five classes
which was heavily inspired by something
that was put out by nullify plug for now
if I hey Phil hey post CSS file without
felt with the class plug-in this is
really great because it will
automatically transform your CSS you
don't have to manage your CSS at all you
can just dump your web font families
right in there and your post CSS will
process your CSS using these font
loading font loaded classes and we'll
add those around it the bad thing about
fat with the class is that you have to
manage every web font you want to load
on your page so the default browser
behavior as I mentioned is that it won't
load web fonts that aren't used on your
document if you're loading those
a script you are in full control of what
gets loaded so if I for example
implemented felt with the class of New
York Times comm I would not necessarily
want to load 191 font face rules that
they have on their page it's so they're
sort of taking advantage of the default
browser behavior and just dumping a
bunch of font face blocks on their page
so if you have that kind of situation
you might want to go with a different
approach because that would be a lot of
flavius locks to update all right big
boy stur anybody know what the big
double booster no no anybody no no ok
it's a big dumb booster aerospace
engineering principle actually kind of
applies to how a lot of people build
websites today it's kind of it states
that a big dumb booster is much cheaper
than a smaller more efficient and more
complex rocket booster so if you just
put whatever you want on the page launch
it into space
you're as long as you don't spend a lot
of manpower on it then it will be
cheaper in the long run right so this I
think this actually kind of applies to
software development in some respects
but again web fonts are not rocket
science so let's move on to the our
fifth and final and most complex font
learning strategy I hope you're prepared
for this I know the physicist you're
ready it's critical for the data URI
it's gonna be so much different than
what we've done before just kidding the
only thing you do is just dump a data
URI for a super super subset web font
file right with your other font face
blocks so we use a lot o subset for my
use case I'm only subsetting the Wow I
use the laser pointer on this thing like
you guys are gonna see that yeah that
was awesome so I put Unicode range there
I'm only loading this super subset
version has uppercase a through Z and
lowercase a through Z so it has a very
very limited character set and this is
just a small I think it's like four
kilobyte data URI then I'm just dumping
on my page so that allows the subset
version to load somewhat instantaneously
and so this is a two-stage approach
right so when my JavaScript loads I'll
add that font stage 1 class which will
opt the document into a lotto subset
which is my date at URI version and then
I'll do the same thing that I did before
with felt with a class just and then add
fonts Stage two so if you want to kind
of see how this works on a live website
I have a little emulator on the on the
bottom of every single page on székely
comm you can toggle through these radios
and see that see the different
renderings live on my website for how
they look but the interesting part about
this strategy is you're really
minimizing your flash of unstyled text
because you're only rendering flash of
unstyled text on characters that are not
in your first stages first stage subset
so you can really get as much web web
font content in front of users as
quickly as possible with this approach
so what all but eliminates flash of
unstyled text depending on your
internationalization requirements but
you don't just want to subset your first
stage you can subset everything web
fonts often have a lot of things in them
that you might not need for your use
case so if you again if your
internationalization and licensing
requirements for your fonts allow it
I recommend sub-state subsetting your
web fonts to the smallest character set
that you can because smaller font files
will load faster I have a tool called
cliffhanger cliff cliffhanger anybody's
seen cliffhanger no-nobody all right
yeah it's just a command line tool that
will go out to your website spider all
the content on your website and return a
Unicode range for the different
characters that are being used on that
page it includes another website it's
spider so it will go out to subsequent
links that are a link to from that page
as well it just takes a lot longer so
yeah that's my website that's the
Unicode range of content that's being
used on my web site and this is the
string representation in the command
line not all the characters can
on the command line so that's why we use
Unicode code points there another thing
it can do is that it's a provides a nice
little wrapper around a sub setting tool
called P PI F T subset it's part of font
tools it's a Python thing so we'll
subset your font files for you
automatically
which is nice because those can be quite
big so for example there's some a
version I use a lot o on my website so
in some of these examples they went from
140 kilobytes down to 24 but it's not
great for user-generated content
obviously because if you don't know what
characters people are using then you
don't want missing characters in your
font just it provides some little helper
utilities as well you can you can pass
in a whitelist if you if you know what
characters you want to use you can pass
in a Unicode range you know a subset
based on those without going doubt to
spider a content on the web if you
already know what you want to use um and
then just as convenience for me I also
added this which allows you to convert
between strings and Unicode ranges which
i think is kind of nice because those
things that Unicode ranges are really
super hard to read so the point I'm
trying to make here what with sub
setting is that smaller font files would
load faster they reduce your Flash of
invisible ticks that reduce your the
impact of your flash of unstyled text
you really want to get your web font
content in front of users as quickly as
possible so the new hotness right now in
font loading kind of you guys are super
concerned about font loading hotness
variable fonts amazing they're great
what a variable font is is so for
example in this San Francisco rendering
say we might have eight different font
files that we use to render each one of
these different weights so eight
individual files a variable font allows
you to combine those into one single
variable font file which is great it
uses math or maths Maps you guys say
plural Maps here to interpolate the
different weights of your fonts in the
browser so
great but and you can play around with
this there's this great demo site called
access praxis
I think it's lorath spenny built this
loop on twitter so it's got a nice
little slider here and you can do
whereas before font weights might have
been 100 200 300 400 500 you can
actually do any number between one and a
thousand now so and you can use
fractional numbers as well so you really
get a lot more fine-grained control over
designs you want to deliver to your to
your end users so variable fonts are
great they're actually being adopted
faster than the CSS font loading API in
IE and edge because they're coming there
I think they're already on edge 17 which
isn't stable yet they're in Firefox
behind a flag they're in Safari if you
have high sierra not low sierra and then
they're also available in Chrome Canary
Wharf
sorry no in chrome stable what you're
paying for this with kilobytes right so
your single individual file might cost a
lot more to the end-user for the
variable font than it would if you had
load loaded three separate web font
files so for example this source sans
source sans is now available as a
variable font 115 kilobyte and wofe too
which is pretty hefty for a web font and
again that will elongate the amount of
time that unstyled text is shown to your
user the bigger the font file is and
really what you want to do again is to
get your web fonts rendered as quickly
as possible as much of your web fonts
content loaded as quickly as possible to
the users as you can so variable fonts I
think are great we're going to see a lot
more of them but you're gonna see a lot
more timeouts you're gonna see that
three second timeout hit a lot more when
people start to use variable fonts just
because the font files are bigger than
those three individual fight as if those
three individual files had loaded so
you're going to see a lot more two-stage
font loading with variable fonts for
sure and the other great thing is that
you force grouped repaints at the
file format level there's no way you can
render half of a variable font so this
is great for our old buddy Mitt Romney
because on his it completely destroys
this web font loading problem we don't
need to worry about the Mitt Romney web
font loading problem anymore because all
of their web fonts will render at the
same exact time so what do you think web
fonts rocket science not rocket science
kind of rocket science they might be
rocket science I don't know hopefully
that's made it a little bit easier I
have a nice little checklist so if you
want to take notes this will be the
entire presentation will be distilled
into these next two slides so get your
camera's out if you want to not worry
about all the things that you've written
down so this checklist we want to
minimize invisible text we don't want
invisible text we want the unstyled text
we want to use font synthesis where
possible and we want to reflow as little
as possible as soon as possible so we
want to render web font content as
quickly as possible we want fewer
repaints we're going to group them we're
going to trigger our downloads sooner
and we want to make our font files
smaller so practically practically
speaking these are the things we can do
these are the things that we can do and
they're available in browsers today that
we can use so we don't want invisible
text use font display use the CSS font
loading API we want group tree paints
and force by variable variable fonts but
we can also do that ourselves with the
CSS font loading API we're going to
trigger our download sooner use preload
for that we want to make our font files
smaller so used wofe to and subset as
much as possible
I wrote this guy a comprehensive guide
to font loading strategies
super long you can go out and read it
you're not it'll probably be quicker
than 40 minutes but you can go out and
read that it's got almost all the things
I mentioned here and I also run a
newsletter called font speed wants me
dead i/o so you can go subscribe to that
if you want for updates and changes to
font loading in web browsers I just want
to take like I have 10 seconds left so I
just want to thank all these people I
have been heavily inspired by all these
all the people up here on this list and
I could not have made this presentation
without them so
thank you all these people if you're
here thank you thank you thank you if
you're not here also thank you all right
that's it
Thanks</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>