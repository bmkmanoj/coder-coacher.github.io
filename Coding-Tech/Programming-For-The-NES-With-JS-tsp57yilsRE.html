<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Programming For The NES With JS | Coder Coacher - Coaching Coders</title><meta content="Programming For The NES With JS - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Coding-Tech/">Coding Tech</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Programming For The NES With JS</b></h2><h5 class="post__date">2018-04-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/tsp57yilsRE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so this is an S rom running on my
emulator and I'm gonna talk about the
next thing programming the nez with Jas
and you're like what JavaScript won't
run on a console or not on a Ness at
least you're right it won't
it's super slow and you will never act
well if you do congratulations you have
spent a lot of hours and nothing
worthwhile but I can I'm gonna show you
a bit on why I started the program the
nez and how you can also do that with
the Apes abstract syntax tree analysis
yeah okay so I'm going to talk about
three things I'm going to talk about
constraints doing new things and I'm
gonna show you a little demo if I still
have time okay so I really like
constraints and especially the Ness
constraints are very this this device is
one of the most constrained devices you
will ever encounter it has a 1.79
megahertz CPU that runs six of 6502
assembler if you don't know that that's
not a problem it's a very old version of
assembler which also ran in the
Commodore 64 and some some other old
computers it was very cheap at the time
still is very cheap you can buy it for
$10 you can buy a 6'5 or two CPU the nez
had a audio processing unit in it which
is really perfect for synth music so if
you into synth music you can do four
channels of like saws and triangles and
then one channel of beats so those
sounds you know the Mario sounds but
that wasn't really a big thing I mean
the CPU AP Wow
if we've got a CPU now but it's still
very slow so in 1985 that wasn't special
at all but what what was very special
was the PPU the picture picture
processing unit it ran a little bit
faster but it also could show sprites so
eight by eight pixel images and it could
stitch it together and it looked like a
little person was walking you could
animate and it could do scrolling of
backgrounds so either
horizontal or vertical so it also had
only two kilobytes of RAM yeah I'm just
gonna say that stuff there
a resolution was 256 pixels by 240 if
you had a pal nez so if you're on ntsc
so all the northern American countries
had NTSC as a TV system it was two
hundred and twenty four pixels NTSC ran
at 60 Hertz so that 60 frames per second
and PAL ran at 50 Hertz per second so if
you have a cartridge which isn't region
locked and you put it in like an NTSC
cartridge and you put it in the European
nez it will run slower the music will be
running slower it's super funny it only
has 64 colors and when I say 64 colors I
actually mean 56 it's not because I
could Co but can't count it's because
they're like seven shades of black on
des so yeah / / / sprite or per tile you
can only show three colors actually four
colors but one color is a background
color so that also doesn't really count
and when I mean a sprite color that's
this one so if you look carefully most
games will only have three colors per
character so mario only has three colors
Mega Man did something special and has
more colors but I mean Mega Man so and
there are only eight buttons on the nez
there's a left/right up/down select
start ba and you can do everything with
it it doesn't have a keyboard nothing
it's just very simple device then it can
only show eight sprites per scanline
okay so when I say is sprite it's not
this whole image it's just this little
tiny part because this is actually four
sprites so if you have something like
Super Mario you will have Super Mario a
Koopa I don't know some something else
and if you would have more than eight
sprites per scanline it would leave one
out so some programmers would start
flickering so you could see it at some
frames so you would have the feeling it
would still be there
then there is a an SRAM you've probably
downloaded
these things very legally at some not
dodgy site to run in your emulator and
that is actually a combination of a
character and a program ROM and I can
probably show you this so on the one
side it's the character bomb on the
other side it's a programmer
okay so constraints are really cool but
they also really suck so I'm gonna
switch to normal presentation slides now
and not something on the nez because you
know it's just doesn't make sense okay
here we go where was I okay so who a few
knows which game this is from Super
Mario 2 okay and on which platform did
this particular image come from super
nez okay yes super nez you're still with
me okay so what was this game originally
called doki doki panick yes you sir
earned a one-up okay this is what it
looked like on the nez so you so you can
see a lot less colors and no animation
because you need to cram all that
information into eight kilobytes of of
ROM okay so constraints are also the
bomb because constraints make you think
about systems or devices in a whole new
light you need to work around these
constraints to get something done so
this game Kirby's Adventure is the most
astounding piece of work made on the nez
because it could had save games it had
all these colors and it would still run
smoothly it it it's perfect so why I
talk about constraints is because I
think they're beautiful twitter has it
has constraints of 140 characters per
message
some people use these Twitter messages
to create a very long blog but I don't
think Twitter it was meant for that
another form of constraints is emoji
like you can only convey so much in one
emoji right and programming is a very
big constraint you only have four if you
have some keywords that make you like
let's say it's twenty or thirty keywords
if you're
lucky or very unlucky with a strange
language but with those constraints you
can make anything sort of right so I
love constraints this are all the images
that are used in Super Mario Super
constrained and you can see that they
really had to be creative with creating
the game for example if you look really
closely you can see that the clouds and
the bushes are the same you can't see
that on here but if you play the game
you can see the clouds and bushes are
the same a combination of sprites just a
different color so super creative and
you don't actually see it unless you see
it you know so now you will never unsee
it
okay and why do I talk about constraints
because we encounter them every day we
can encounter them in browsers it is ie
I mean we have to work around
ie not so much anymore though but it is
a constraint and we have clients that
set boundaries for a budget or for date
or they want to do certain things and
we're not always aware of it but we
always have constraints so try to find
wherever you are try to find out what
your constraints are and yeah and see if
you can work with that if you're really
into constraints you should also check
out Amanda Claussen's talk about
constraints I put here in the link so
you can go to it ok and now I want to
talk about doing new things and I used
the background image is a new game or a
relatively new nez game that came out
like in the last few few years and we
actually had the creator here Justin yay
so these games are still be made
and I think that is very cool it's it's
a very strange niche market of course
but it's it's still happening and why do
I want to talk about new things because
we have brains of course and our brains
the you know you're told that a once
your 25-man your brain capacity will
only go down this is the highlight for
you this is it which is true in some way
like it won't mature any more but there
it doesn't mean that your brain is is
done it still can learn new things and
it can learn these things very quickly
if you keep learning new things that's
actually the more you learn new things
the more you can acquire new things so
actually fun fact is that if you have
done a lot of new things on a day or
like met new people or been in a new
place if you go home that day or I don't
know to your hotel and you learn your
you pick up your textbook or your the
language you're learning you will store
that information better because you did
a lot of new things and already expanded
your being so if you go home dive into
your textbook and try to acquire all
that knowledge and when I do talk about
new things I also talked about not
embedded here people usually say this as
a bad thing like well like not invented
here means that you have to recreate
everything because you think you don't
trust other people's work something
along that line right so I actually like
it reinventing the wheel not because I
think the wheel sucks or because I think
I can do better but it's a very
educational experience so if I write my
own a friend and framework or back-end
framework it's not because I think I can
do better because I will never use my
own stuff in production I know how I
code but I know I know I now know what
those layers of abstractions mean in
other frameworks and I know what kind of
problems I need to overcome I already
said that I said that just now I said
removing abstractions what I mean with
that is sometimes when we think of a
back-end framework it's just like this
thing where you you toss data and if
stuff comes out
okay so I've
kind of an abstract way of looking at
that for the same was for me with a
sourdough bread making it was like okay
well there's this yeasty thing and
smells a bit and you toss flour at it
the oven okay done not at all it's a lot
of work but doing that thing starting to
acquire that knowledge about that
removes that abstraction from it and you
can actually have more respect for
people like bakers or plumbers or web
developers or designers if you actually
learn to do this thing it will remove
the abstract thought of what it is and
you will learn more about it if you are
into that I also linked another post
over there what I also learned was
open-source is very great because I've I
thought I was being very original I was
like okay I'm doing JavaScript and doing
nez oh yeah I must be so cool now right
now but that wasn't the case there were
lots of people are actually already
doing this a lot of people who wrote
emulators but there were also some
people writing stuff to actually make
the games himself so I found this one
guy called Michael Matuszak he's in LA I
mean he did like most of the work for
what I am showing you he brought this
abstract syntax syntax tree analysis of
JavaScript and then replaces all the
JavaScript with nez assembler I'm gonna
show you in a bit
and it uses falafel which is a pretty
great library so if you want to get into
abstract syntax trees try falafel it's
pretty fun and also if you want to get
into the chip music on the nez NPM
install and as the assembler and Leslie
sound because you can then make your own
chip music yes I can see daijiro is like
let's do this
okay so demo time I created a little
package called Rouge's because I also
did this talk at another conference so
sorry about that and you can see here
there's a few scripts this one compiles
the JavaScript to or analyze it and then
outputs an assembler file this one
compiles the the the ROM this one
creates images and this one just runs
everything
then runs the what bigger yes thank you
Thank You Thomas
how much bigger like this like that okay
there you go
thank you so let's just run npm run
built right so it does start compile and
runs the emulator so all if all goes
well yes there we go
my background algorithm was kind of
slightly off you can see it shifted but
I made this this this is a mate from a
JavaScript file so let's look at the
JavaScript file Oh
close it okay so this is the JavaScript
file it as a header reset it's basically
like HTML and CSS right then it says
background palette sprite palette and
we're gonna actually change the palette
so you what you saw was a light green
background right let's try a different
background so give me a number code
please
sorry twelve are you gonna see that it's
like green and blue okay I'll try yeah
let's do this okay thank you
item 12 boom
mmm p.m. run build it's blue there we go
how am i doing on time by the way how
much more time 12 minutes whoa okay so I
can do some more demos if you know which
game this is from you can get the power
block or the what do you call this the
upgrader I don't know what you call this
the mushroom you know does anyone know
which game this is from no it's yes mr.
gimmick this is one of the various games
on the planet you will if you find a
cartridge like this you will you like
it's worth $2,000
so yeah oh yeah background so I was
talking about you could you still get
the I mean Dustin is cheating he's a
nice developer anyone else want once the
POW block yeah there you go
sorry I almost hurt you okay backgrounds
so I use this I use this tile map editor
I like cold tiled there we go so I made
this this is the background you just saw
remember I can show you again so this is
the background only with I I kind of
messed up the algorithm and this is the
foreground so this little dude does not
have anything to do with backgrounds
okay let's so go back to the background
and let's add some more jazz logos
because who doesn't love GIS am i right
am i right yeah okay so save close this
one and I actually wrote something that
extracts the CSV data from the the tile
map file but it wasn't working this
morning so I'm just gonna go like this
copy paste so copy all this data so this
data is just like the tiles the numbers
corresponding to the tiles in the image
we put that somewhere here and then we
have all these ingest logos everything
goes well
live demos I'm sweating sorry okay JLo
goes okay let's do one more thing
thank you by the way let's do one more
thing and that's change the sprite so do
sprite swap so I use this image is the
input to create the character ROM and
now you see this little dude
is well I closed it there is this little
dude yeah everyone follow you yeah
okay so let's swap that with Kirby so we
boom select Kirby there we go
paste it put it in the place of the
other guy or girl by the way I'm sorry
think so not yes okay and if all goes
well
oh no we first need to run the image
processor okay
run the image processor now we have
Kirby yay okay okay now I need to hurry
up okay take aways what I take away from
this experience see an assembler are
totally learn about I do not have a
background in computer science or
something like that I did not know how
chips worked I did not know binary
counting I did not know bit swapping
byte swapping I did not understand all
of these things but I could it was
really easy to to learn these things
when I dug into this so the removing
abstraction I thought it was this huge
big problem I need to solve but it's
it's not it's not that I can actually do
extra decimal counting now which i think
is pretty cool but I also took it took
away is that strong community draws
people in so the Nets deaf community is
super super nice you go to the forum you
post something online and your question
or something within a day you will get a
response with someone expanding to you
okay this is how it works and sometimes
I mean there's always trolling on all
forums but usually it's it's pretty good
it really helped me to get to keep going
with this because it was a kind of a
difficult project it took me like a few
months to get this this thing going but
it really draws people in and always
lower the barrier to entry I went to
some blogs than they explained to me how
to run the the nez sender but they
didn't explain how to install it or
where to find it so I was I don't know I
felt like I was running in circles
trying to find these things but if you
do come across the things like this
write a blog post about it share it
somewhere and the next person after you
will not run into this barrier hopefully
and constraints force creativity I think
that's one of the most powerful things
I've learned yeah about that and also
nest dev is really cool people like
dustin over here then i want i want to
thank some people these are the guys
that wrote the libraries i used and i
mail some email michael Matuszak back
and forth about using his kid to 3po and
it was all fine so thank you that was my
talk</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>