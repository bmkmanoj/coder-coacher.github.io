<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Build Virtual Reality Apps With React VR | Coder Coacher - Coaching Coders</title><meta content="Build Virtual Reality Apps With React VR - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Coding-Tech/">Coding Tech</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Build Virtual Reality Apps With React VR</b></h2><h5 class="post__date">2018-05-04</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/HJg8CMPNp3w" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">today I'm here to talk to you about
reactive er we will start with the basic
concepts of virtual reality discuss the
advantage of 3d in web browsers and
learn how to get started by the end of
this talk you will know what reactive er
can do and how to do it virtual reality
is being used in many industries
besides games VR is being used in many
fields for example medicine education
and movies because of its ability to
immerse you in a scene the possibilities
are endless before diving into code I
want to talk to you about virtual
reality concepts things that we as
developers must know if we want to build
a virtual reality application so what is
virtual reality reality in a nutshell
visual virtual reality is made up of two
things stereoscopic imaging and movement
tracking let's look at these two images
are they identical they seem to be
identical but if you look closely you
can see a difference I have highlighted
a difference for you notice the figure
in the background on the right so
stereoscopic images are based on how the
human brain works it takes two images
that show the same content but from a
slightly different point of view the
offset of these images corresponds to
the distance between our eyes this
distance is called interpupillary
distance IPD for short in this way we
simulate the way we we see the world
naturally and it gives us the perception
of 3d depth headset lenses are an
integral part of the virtual reality
experience why do we use headset lenses
because they position the images on the
screen at the exact distance that they
need to be to get the desired effect
vr lenses are thick so they cause a
distortion the square that you see on
the left looks caved in through the
lenses the outcome looks something like
what what we see on the right to
compensate for this we give images that
are rounded out on the left you can see
a compensated image before the lenses
and on the right is the final desired
image so to sum up stare scopic imaging
by showing two slightly different images
to each eye using special lenses we get
the effect of depth
besides stereoscopic imaging the second
thing we need to we need to complete the
illusion of virtual space is to track
the movement of our body all vr devices
track head movement so we can look
around some devices the more expensive
ones track body movements so we can move
around
of course the more tracking sensors that
you have the better the illusion of
reality on April this year Facebook
announced the launch of react VR a new
JavaScript framework based on 3GS and
react native react VR allows developers
to build virtual reality experiences
with the help of JavaScript as the name
implies react VR uses the same concepts
as Facebook's existing react framework
just like with react for standard web
apps VR developers can now use the same
declarative model to write apps for
their 360-degree experiences so how many
of you have experience in building react
applications raise your hands please
okay almost everyone so you guys will
find it very easy to build reactive er
applications just like in animation VR
apps need to be rendered at 60 frames
per second react native as I've solved
this
issue already and that's it so it's
important to know that reactive er is
based on react native and 3js
most of the components that we use are
react native components and the 3d
rendering engine is the 3GS rendering
engine for those of you who are not
familiar with 3j s 3j s is a
cross-browser javascript library used
for displaying animated 3d graphics
let's look at some 3GS examples from the
web
so all of this is done in the web 3d in
the web so that was pretty awesome right
3d in the web it's not 3d marks don't
need to install some special application
everything is in the web so let's get
started we'll begin by installing the
tool we need first we'll install react
VR CLI next we are going to initialize
the project this will install all of the
dependencies that we need to run the
project Facebook already created a very
basic hello world application they call
it welcome to VR so if everything went
well you should see the next screen when
you open the browser so we have a basic
scene with a panoramic image of a room
and in front of us there is a text
component with the word hello
after the init we get the following file
structure there is the static assets
folder and if we want to add 3d models
textures materials images this is the
right place the entry point for the
application is the index V rjs file and
you see that there is a folder called VR
in that folder there is always a file
called client j s is used for the
application configuration all of the VR
stuff so index v rj s this is the entry
point for our our application we have a
basic react component that contains two
children panel for the panoramic image
of the room that we saw and text for the
world allo on the bottom we register the
welcome to VR component just like in
react so let's begin building our own
application the update we are going to
build together will present the solar
system planets this is what the
application is going to look like we can
see a planet with some text
there is a menu on the right to change
to another planet and some additional
info about the planet on our left so
here's the link to the application you
can try it right now just bit ly / solar
VR VR try to with your phones and see
that everything works well at the end of
this talk I will also give you a link to
the project itself you are free to use
it
okay so again bit dot ly / solar VR and
let's move on to know where to place
objects and how to move around the scene
we need to be familiar with the
coordinate system the coordinate system
is the same as OpenGL coordinates
meaning that y+ is up and we use the
right hand rule okay so this is the
y-axis and this is a positive rotation
for y this is a negative rotation okay
this is the right hand rule we can apply
transformation on any component just
like we do with CSS the syntax is a bit
different than classic CSS but you
should be familiar to those who code in
react native if I want to place an
object anywhere other than zero zero
zero I use translate if I want to change
its size I use scale and if I want to
rotate it along a certain axis I use
rotate just like in CSS just like react
native react VR provides a set of basic
primitives used to construct user
interface this is a powerful feature
developers can use the same styling and
layout system across web react native
and VR which opens the doors to directly
sharing layout styles across these
platforms view is the most fundamental
component for building a UI view is a
container that supports layout with Flex
box style and touch handling view maps
directly to the native view equivalent
on whatever platform react native is
running on either whether it that is a
UI view a div Android view etc view is
designed to be nested inside other views
and can have zero too many children of
any type text is a react component for
displaying text text support nesting and
styling as well image is a react
component for displaying different types
of images keep in mind that you must
manually specify the damage the
dimensions of your image image
dimensions are specified in meters and
is not possible to predict the intended
dimensions from the pixel width and
height of the of the actual image so
let's go back to our solar system app
and add a panel component panel is a
sphere of 1000 meter with a center
located at the local transform origin
usually it's 0 0 0 panels are images
projected onto a sphere that fully
surrounds the viewer you can create
panel compatible images by using a
special 360 camera or even with your
phone cube map images are also supported
in panel you can specify a source URL as
an array of six individual images so
let's add the panel component to our
index vrj s we need to provide an asset
to the source property note that we are
using a utility from reactive VR called
asset this allows us to load assets
directly from the static assets folder
note that this is not just any jpg but
rather one that supports 3d so this is
my jpg
let's see what it looks like in 3d this
is the result if you see something this
is the result our sphere is the cosmos
and the image surrounds us so that was
the panel component let's talk about the
flexbox layout system react vr makes use
of a flexbox tile layout algorithm to
automatically position components and
their children the library used is CSS
layout the syntax is more or less
analytical to the web flat flexbox as
you can imagine using flexbox to layout
content on a 2d plane is not optimal for
for 3d experience so it's common
practice to layout the content on
cylindrical plane this will give us a
two and a half d film let's create the
solar system application header just
like in react in with the declaration we
have a stateless component that gets a
string the name of the current planet
that we are viewing and returns a new
view with two text inside a title and a
subtitle same syntax as in react and
react native this is the resulting
header you can see the title and the
subtitle the name of the current planet
that will change them in our application
I created a menu to navigate between
planets this is our menu it's basically
a view that contains other views one per
planet one view per planet notice the
billboard in property billboarding is a
boolean property for controlling the
view rotation towards the screen meaning
that when billboarding is on the view
will always say
the viewer let me show you so here we
have two views the one on the left is
always facing us so that was Bill
boarding for the view component so this
is our menu a view with nine views one
for each planet so we built a menu for
navigating among the planets now we need
to make it clickable in VR we interact
with objects in a different way than the
web we don't necessarily click on
something it may be enough that we look
at an object for a significant amount of
time to trigger an event other than
looking we can also press a controller
to trigger a reaction to make our scene
interactable we are going to use reax vr
button a helper component that manages
the interaction state machine by default
a vr button has no appearance and will
only act as a wrapper to capture events
but it can be styled in the same ways as
a view when pressing a button in our
menu the handle click function will save
the planet the planet name in the
current planet variable so let's take a
look at our menu again now when we press
a button we are updating the current
Planet variable in our state and as a
result the header component updates
next I want to talk about loading models
there are many types of model formats
available other obj STL colada they may
come with a built in animation
they may come with material and with
texture at the moment react VR supports
the wavefront obj file file format only
and if you want to extend it I will show
you a way to do it later on under the
static assets folder I have created a
folder for models and a folder for
textures react VR provides a component
for loading models the name of this
component called model so let's load
earth here is our planet declaration you
can see there is a property called lid
the lid property specifies if the model
will be affected by lights the models
ability to define a style enables us to
apply different transformations such as
scaling rotating and translating so we
can scale the planet move it to another
place and rotate it if we want so here
is an example to a dynamic loading the
path is just changing not just earth but
rather any planet the current planet so
here is the loaded model by changing the
current planet we are causing a new
model to load every time
to make our scene more interesting we
can add animation to objects and layouts
there are two ways to create animations
in react we are using the animated
library or manually with
requestanimationframe this is an example
of requestanimationframe
what I want to do here is rotate a
planet the rotate function in this
example is called in a loop hopefully at
least 60 frames per second on each call
we are advancing the rotation by a delta
this is the result we can see the planet
rotating and if we switch planets the
new model will still rotate around
itself let's see an example of how to
use the animated library for animations
when a button is pressed we want to make
it look like it bounces a bit and also
when a planet appears we'll give it a
nice little bounce in the animated
library this effect is called spring so
let's look at the bounce effect it's
pretty easy if you use the animated
library if react VR doesn't support a
feature that you need you can build it
yourself using native modules a lot of
stuff that exists in three.js
has not yet been implemented in react VR
for example there are dozens of
geometries in three.js of which only
sphere box and cylinder exist in react
VR this tetrahedral geometry is
supported in 3GS but not in reactive VR
so let's create a native module let's
extend it for react I need to do two
things first I create a module and in
its constructor I receive the 3GS scene
from this point the three.js scene is
open to me the rows between the add
function for example are all three J's
coding I define a tetrahedral geometry a
mesh Lambert material and a new mesh
that I'm adding to the actual 3GS in the
second thing I have to do is go to my
client J's file and place my native
module in the native modules array I
also make sure that my module is
rendered down there
there is the render loop of 3GS so in in
each iteration I make sure that also my
module is rendered so here is my
tetrahedral geometry in reactive er
these tetrahedrons are going to be my
asteroids here is the final application
we are inside the panel where we loaded
an image of stars we see the header with
two text inside below that is a loaded
model the planet surrounded surrounded
by asteroids that we created by using
native modules on the right is a menu I
click on the menu switches two switches
to a different planet with a bounce the
menu button also has a spring to it and
on our left this is the info view both
the menu and the info have a billboard
property that is on and as a result
those views are always faces the entire
project is posted here feel free to use
it it's a bit dot ly / solar VR app rack
VR is relatively new time will tell if
the community will adopt it react VR is
a quick and easy way to build a 3d
application I'll be happy if you share
your applications and insights with me
that's my email up there if you have any
questions I'll be just outside after
this
thank you very much and enjoy the break</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>