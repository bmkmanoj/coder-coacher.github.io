<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Creating Interactive Frontend Apps With GopherJS And React | Coder Coacher - Coaching Coders</title><meta content="Creating Interactive Frontend Apps With GopherJS And React - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Coding-Tech/">Coding Tech</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Creating Interactive Frontend Apps With GopherJS And React</b></h2><h5 class="post__date">2018-04-10</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/IucPdpcyubg" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">welcome everybody thanks for coming
along this afternoon it's my first time
at go long a UK so today what are we
actually going to do we're gonna write a
browser based interactive front-end app
in go because it's a language we all
know and love we're going to use my ITC
video react which is a wrapper around
Facebook's react JavaScript library
we're going to learn to love go generate
and so if anybody's not used go generate
before you'll love it by the end of
today and as I said we're going to enjoy
to learn the benefits we can enjoy the
benefits of writing our front-end apps
in go and then we get our end up
hopefully with teams of happy front-end
Gophers I'm not quite sure what the
collective noun for Gophers is so I just
use team there so let's just quickly
start with some definitions for the
purposes of this talk what do I mean by
front-end I mean a browser or equivalent
on a client device which is rendering
HTML and CSS and that includes by
definition something like github x'
electron which is effectively I'm gonna
be a bit loose here a wrapper around a
browser
well the v8 engine at least for the
purposes of this talk as well the
backend could be local remote or
non-existent I'm not actually going to
dwell on that we'll focus on the front
end part either bit that runs within the
browser will talk a tiny bit more about
backends later on so what do we mean by
interactive arguably all HTML pages are
interactive if you think about it
because you can click on a link and that
does something in response to clicking
on the link so I haven't really found a
good definition here so I could equally
be abusing the term in some way shape or
form but for the purposes of this talk
intra page load responsiveness ie on a
page you're clicking on the page in some
way and the page does something into a
response to you either clicking or with
a key press for example may or may not
involve any back-end calls but there's
some visual change that happens to give
you that feeling of interactivity so
what do we mean by an app again for the
purposes of this talk it's either an
HTML page or HTML pages that are
interactive using those two definitions
of front-end and interactive we heard
before if it's just one page this is a
sort of classic single page application
which people may be aware of if it's
multiple pages that just means we've got
some some of our app effectively split
across multiple HTML pages but why is
any of this important well the browser
is an extremely good crops
cross-platform way of building front-end
amps okay you're not going to build huge
amounts of complex logic in there but it
is cross-platform and there are billions
of devices that run browsers and there's
a fairly good equality in terms of their
behavior from a JavaScript HTML and CSS
perspective between those browsers the
zero cost to adoption million that
someone just visits your site which
happens to be an application you haven't
had to do anything to put it in front of
them and there's a low cost from a
development perspective as well or at
least there should be and that's sort of
kind of a part of the problem we talked
about with javascript is that that bar
is maybe a bit higher with JavaScript so
hence why we're looking at doing this in
go so let's take a look at some examples
of interactive front-end apps and the
context here is what you're looking at
and you saw as I was just setting up the
screen there is that this presentation
is within the browser is using the go
present tool and so what we're
effectively looking at is an HTML page
and each of the slides that follow
actually have an inline iframe within
within them so there's a page within a
page which effectively allows me to show
you these apps that are all written in
go within this within the slide
presentation so let's have a look some
very basic sort of hopefully everybody
can see this okay actually may just make
this one bigger there we go that's a bit
better very simple here so we've got a
drop down that allows us to choose a
person which is then driving in the the
details pane at the bottom there some
information about that person very
simple and here we've got the button
which is allowing us to toggle so some
definition of state here and the
interactivity clearly is in this case
from me clicking the mouse you skip my
cursor back up here
so in this example here we've got a sort
of a text input up at the top here which
is simply rendering below it in a div
the markdown rendered version of that so
we can just put in some simple example
here so the interactivity here me from
me doing some key presses the state in
this application is effectively the text
in the text box at the top and if
there's a sort of functional rendering
of that again using a browser-based
markdown parser in the bottom there
click on to the next slide here the
world-famous to-do app so there's no
back end to this application here is
just simply entire this is entirely
client-side state where you can sort of
imagine we're preparing a payload that
we would then persist to the back end
via some sort of save or whatever call
that's not implemented here all of the
states here is within this front within
the front end ie within the browser
application slightly more colorful
example and I'm very grateful at this
point - Ashley McNamara and Matt Riya
were talking about this application
tomorrow so I don't want to steal too
much for their funder but I'm very
grateful to them for allowing me to use
it this is very interactive as you can
see on the left hand side of this app
here there is essentially a preview of
the gopher we're trying to build and the
right-hand side is effectively the
configuration part so the effectively
some shared state between the left-hand
side which if we change the gopher body
based on the right-hand side here we're
driving what's shown in the left-hand
side here so you can sort of start to
imagine okay well the some state going
on here some interactivity based on the
mouse click on the right-hand side here
and that state is being shared between
the left-hand side of the right-hand
side so this is all client-side logic
here there's no server-side rendering
involved here so this all of this logic
is within a go based front-end app here
so the right insight also has some state
of its own here as to which of these
panels is open and again you can sort of
start to see how again the interactivity
lends itself to actually presenting a
much more rich user interface to the
user
and then just because it's quite a bit
of fun we can shuffle that and create
ourselves a couple of fun little Gophers
there it's again entirely client-side
just a random number generated this is
effectively giving us some various
configurations of Gophers there and this
next example is credited to TJ Holloway
truck who gave me permission to actually
use this it's a great tool that he's put
together that allows you to effectively
test the latency of your website from
different geographies in the world very
very simple but it's very effective to
just make sure that your site is very
accessible and quickly so from other
places in the world this is just
randomly generated data now so when I
click on this you saw there's no host in
there but it's randomly generating ping
values essentially as if they were being
as if my site was being accessed from
California and elsewhere so the key
thing here is the dynamic part was not
only me clicking to actually set submit
something but then the HTML and the CSS
which was some sort of animation there
so again it's a much richer interface
that you're presenting to the user so
what's making all this HTML and CSS
dynamic the document object model is
something that everyone in this room or
some people may be familiar with but
it's essentially a representation that
allows a representation that allows us
to interact with a page that's been
loaded control that and JavaScript is
the language that then allows us to
manipulate that tree based structure and
put HTML elements in take them out
change the CSS which effectively gives
that us that interactivity that we've
seen in all the previous examples there
as I said this gives you this
programmatic access to the structure of
it so that gives us the change in the
structure but also the style of it we
also saw that events can be attached to
things so when I click on a button for
example I can then dictate what I want
to happen when I click on the button or
when I have a key press within a text
area for example but JavaScript really I
thought actually this was you thought
this was the reason that we weren't
talking about JavaScript today we're
going to talking about go
it is such a ubiquitous language as I
said it is the scripting language that
allows you to interact with the Dom in a
browser but as we have every sort of
heard of the introduction in the
beginning it's not something that scales
particularly well it's not something I
would choose to do maybe you wouldn't
choose to do it either but it is the
reality because it won the browser
battle and we can't escape that
unfortunately it's easily picked up and
learnt if you've opened up the developer
tools concept console in chrome then you
will also have sort of hacked around
with a bit of JavaScript you maybe you
changed the HTML elements the driven
page just to sort of mock up what your
page would look like or could look like
with a bit of dynamic with a dynamic
aspect to it it is being standardized
via the Eknath script process and maybe
there's a sort of tomorrow's world that
is a SMGs and web assembly possibly I'm
not going to talk about that too much
today I'm just going to assume that
javascript is the thing that we
ultimately have to do ultimately have to
end up with at the end of our pipeline
if we want to have an interactive
front-end app so what we do in this
situation what's the option space if we
want to build interactive front-end apps
this is a very incomplete list
javascript is obviously at the top of
the list because that's what we have to
end up with then there's effectively a
myriad of other options that sort of sit
in the middle there where you can
compile from your favorite language to
JavaScript CoffeeScript is one that was
mentioned by Miles in the previous
presentation typescript is one that a
number of people may be familiar with
familiar with closure script is another
popular one I think actually closure
script was what they use to write the
circle CI interfaces and any other
languages as well some of which may
compile to either JavaScript a SMGs or
web assembly because they're already
some web assembly implementations out
there but as they said we're just going
to focus on JavaScript here and I was to
randomly but not randomly pick one from
this list here I'm gonna pick typescript
because I've got the word typing and
that from a sort of go pro programmers
perspective is actually something that's
a positive thing
so this very brief in incomplete
analysis here is based on two years of
experience we have with a medium-sized
typescript project that's written using
the react framework the react library so
this is our experience and your
experience here may vary typescript is a
typed superset of JavaScript that's the
the important thing to start with and so
that type slash compiler aspect to it
already gives it a slightly more robust
feel than JavaScript itself so a take
against it in that respect but then the
sort of the cracks start to appear from
our perspective because it's a large
language there's a very extensive
specification there's a lot more edge
cases when you have a large language
like that particularly when it comes to
typing things if you've got a large
language and a large specification is
much harder to write tools that work
with the language to manipulate the
language to Co generate the language
there are a number of very painful
hangovers from JavaScript
because it's a superset of JavaScript
you still have hangovers in there like
the plus operator being able to operate
on absolutely any value Under the Sun
and that's a bit of a problem because
Ingo
we're not used to that there's a myriad
of compiler options and this is somewhat
a tribute if you like to the typescript
folks because they're trying to cater
for people who are coming from lots of
different backgrounds here so almost
it's something they had to do in some
respects but at the same time it doesn't
make for much fun programming because
you can't just pick up and go with it in
a way that as a go programmer you can in
our experience we haven't got hugely
high development velocity from that
perspective because we're sort of
fighting all of these things along the
way our app takes about 6 seconds to
compile and it's only a medium-sized
project so that's a bit of a problem
from our perspective and if I can just
chuck in the grenade here that is the
the famous one there's no single source
of truth as far as formatting of code is
concerned again you've got a myriad of
options as far as the the code formatter
for typescript is concerned so it's not
ideal on many fronts is there another
way well I've kind of given the
punchline away on this or
because go is the answer to this but we
ultimately have to end up with
JavaScript at the end of our pipeline so
this is where the Gopher comes in but
how do we go from go code to JavaScript
this is where it go for Jay s comes in
and that's something that folks may have
heard of so what is go for Jay s it's a
compiler that takes go code and it gives
us JavaScript as simple as that
it's an absolutely outstanding project
it really is and the target of the focus
of go for Jay s is to give you
JavaScript you can then run within the
browser which is a massive take in terms
of what we're trying to do today
Ricardo Musial and the team have done a
superb job I think it was sort of
conceived back in 2012 ish and Dimitri
Sher Ali ov and Richard have actually
got a number of really good
presentations on YouTube that explained
go for Jay s in a bit more detail so I'd
encourage you to take a look at those
well what does go for Jess actually
support because that's critical it
actually has pretty much full language
coverage including go routines which is
a bit weird because JavaScript in and of
itself and all of the engines are single
threaded and yet in go we have
concurrency and where it's available to
run on multi-core CPUs but it's
effectively simulated within the
transpiled JavaScript so we have full
coverage from a language perspective got
almost entire standard library at our
disposal as well so just think writing
any go code compiling it to JavaScript
and then just having that available
within the browser absolutely fantastic
the performance is pretty good in most
cases as well and actually the example
that exists on the Gopher GS website is
that there's an html5 gaming engine
which is effectively proof of that which
is great source map support is hugely
useful that is you've compiled from
go-to JavaScript you're running that
JavaScript within the browser you can
set a breakpoint in go code in your
browser to effectively debug what's
actually going on so that's hugely
powerful particularly where you've maybe
got some sort of nuances of what's then
going on within the browser there's a
Dom package and that wraps effectively
the JavaScript API to access the Dom so
from go code you can access the Dom I
either brow
object model of the HTML page we're
looking at and manipulate it directly
and there's a JavaScript
interoperability package as well which
effectively opens the door for us to be
able to access the millions and millions
of JavaScript packages that exist out
there orally and actually we saw from
Steve's presentation earlier on today
that JavaScript is still a hugely
popular language and so it's
unsurprising that there's this wealth of
packages and libraries exist out there
that we can use so we can run we can
write go code we can compile it to
JavaScript so that runs in the browser
this is great as I said there are lots
of existing JavaScript libraries out
there and we want to take advantage of
those instead of just reinventing the
wheel and this is where react comes in
two things now react is hugely popular
in the novice self if one's to go by
sort of github stars there's 75,000
stars on the react package alone which
makes it hugely popular but it's also
from my perspective actually a really
good pattern for developing front-end
apps as well this is as I said it's
something that we use in our project our
existing typescript project excuse me so
what is react and why react it's a
library for building user interfaces and
it presents this nice abstraction of the
Dom which is a very elegant thing
because actually directly manipulating
the Dom can be very very slow and a
costly thing because it's essentially
re-rendering something on screen and
it's not actually that doesn't actually
allow you to structure application in a
particularly nice wave you're directly
manipulating the Dom and it's very
pragmatic at the same time because it
doesn't actually mandate any data or
state patterns and if you've done any
sort of react programming or something
in angular for example you'll appreciate
that but at the same time that's
actually a really important thing
because it's not prescriptive about and
you must create your model like this you
must update your state like that unless
with it it's just within a component so
that's a real plus point from our
perspective so this nice abstraction of
the Dom is a good thing that's very
pragmatic and it's extremely widely used
so you can write a react component and
then
effectively uses it as you were to go
package and within your application as
well so it's easy to share these things
there's a nice element to reuse going on
there so let's just briefly look at the
fundamentals of react and components of
the fundamental building block of react
it's a description of at any point what
you actually what HTML or other
components you want to render and we do
that via the render method on a
component props if you want to are
effectively the parameters to that
component ie
if what arguments does is actually does
this component actually need to work
state is optional as well and that's
effectively private to a component
sometimes these components need some
sort of state in order to actually work
properly as I said before the updating
the Dom can be a costly thing so this is
where react prints presents this concept
of a virtual Dom which is much cheaper
to maintain so it uses these components
as building blocks which are effectively
descriptions of what we want to be
rendered and react builds up this shadow
representation of the Dom which is
called the virtual Dom and then takes
care for us of actually updating the
real Dom so that we have rendered on
screen what we ultimately want so how do
these components describe what should be
rendered as I said it's via the render
method which ends up being a function of
pure function of a components props and
State and as you can see here it results
ultimately in a hierarchy of components
and HTML s and HTML excuse me so here
the outer def components actually within
its render function here renders a div
and that div contains a preview
component and a chooser component and
you can see the preview component in its
render function renders some nested divs
some images etc such you get the idea
and this is effectively the hierarchy
that we get built up and if you look in
right click on a page in Chrome for
example and say inspect you'll be very
familiar with this sort of structure
okay so how about combining go for dress
and react well this is where the package
that I've written called my itcb dot IO
react comes in so what is it it's a set
of go 4j s bindings for Facebook's react
and it wrapped in and wraps excuse me
face
books javascript library and the goal
here is to present as golike as possible
an interface to declaring components
props and state along with the package
itself is a tool called react gen that
it helps just get started very quickly
by initializing a new project but also
it acts as the code generator to help us
along the way and we'll see that in a
second so let's get straight into this
by looking at how we create an
interactive front-end app in go so this
is going to be the ubiquitous hello
world app here we're just going to
create ourselves a directory change into
that directory and run react gen to just
create ourselves a simple example here
using the bootstrap template so there's
a whole load of assumptions here about
the tooling etc that I'm not going to go
into now this this is all well linked to
from the wiki and my blog post which are
at the end of the slides and I'll make
those available so let's just assume
that react gen is available is in our
path etc so what does this ultimately
look like if we just ran this and again
this is live within the browser here
because it's an iframe that's rendering
so this is what you would get ultimately
if you ran up this example here not very
exciting at the moment so what did react
gen in its init mode here actually give
us well it gave us four files a couple
of go files index dot HTML and what
looks like some sort of generated go
file as well so let's pick this apart
now let's just remember that here we're
talking about something that's loaded
within a browser so an HTML file is
effectively the entry point for our
application ie that's the thing that
gets loaded by the browser and then
everything that's within the HTML page
is effectively loaded as a side effect
of that as you can see down the bottom
there the script tag is one such thing
that is effectively a side side effect
and hello world is here is the compiled
JavaScript result of those go files that
you saw being generated I'll just point
out as well that we've got a div that's
in the middle there that is identified
by the app ID and we'll come back to
that in a second let's just remember
this is the just general structure here
just a boring HTML file that happens too
low
as a side effect that go for Jas
compiled JavaScript let's take a look at
main go is it name suggests this file is
part of a main package and we can sort
of argue afterwards about whether it
should be called main dot go but as a
result of this being a main package go
for GS then runs the main function as a
side-effect of that script having been
loaded so we've got the index dot HTML
is effectively the entry point and then
this main function gets run as a
side-effect of us having loaded that
script a couple of things to point out
here is the we're using the Dom package
here and we're using that Dom package to
get hold of a reference essentially to
the document that the Dom document and
then as you can see we're using the
document to actually get it that div
that I pointed out that's identified by
the app ID there and then what we're
doing is we're handing off to react at
this point to say I want to render a
component called
app within that Dom element there and so
we hand off to react at this point and
we'll come on to that in a second so
let's took it let's just take a quick
look at this app component we'll come on
to components more a bit later on this
is the definition of an app component
here
app death at the top here we'll look at
that naming strategy in a second
at the bottom there you can see the
definition of what it actually means
when we render an app component well no
real surprises here it renders an h1
element along with a paragraph element
with exactly the text that you saw on a
few slides earlier on so there's one
more file here that was generated by
reaction let's take a look at what that
one is and that's something that sort of
suggests that it's been generated and
has something to do with react gen and
again we can talk about naming
strategies afterwards but this comes
about as a result of the go generate
tool seeing the directive go generate
reaction in the main not go far that's
was generated here now there's an
excellent blog post from I think it's
around 2014 that Rob Pike gave it was a
talk as well where he introduced the go
generate tool as part of the go tool
chain
something that you would necessarily
have used and we'll just come on to look
at what go generate actually does in a
second in a second but what's reaction
actually doing here well it's generating
a whole load of glue glue code for us
between our component props and state
declarations and the wrapped react
library it's running at the package
level in this main package that we've
generated it was looking at all the go
files that are within that main package
and generating something as a result and
the thing that it's generating for us
the type safe methods and we'll see
these in a second that effectively just
save us writing a whole load of
boilerplate code so let's just take a
slight detour to look at go generate and
what is go generate actually doing well
that there's there's a phrase that I've
attributed to rob pike but I'm not
entirely sure whether that's correct
that cogeneration is all about writing
code to write less code and that's
perhaps a real sort of truism but it's
what we ultimately want to be doing we
don't want to be writing boilerplate
code again again just for the sake of it
particularly if it follows some sort of
methodology and so this is where
cogeneration comes in and this is where
go generate the tool comes in as well so
you starting with a go source file and
you can end up with something doesn't
matter what but you're starting with go
source code and that's what the
directive as you can see at the top
there is a special comment essentially
slash slash go colon generate that
directive there is something that go
generate understands and then it runs
the command and any argument soft words
that follow as I said there's more
details on that blog post from I think
it's December 2014 so I use cogeneration
over the whole time and I actually have
it running have such a requirement on it
that I actually have a file watcher
that's looking to see whenever any of my
files change and then automatically
reruns go generate as I save a file so
that just enables me to really
streamline my development process so
with that brief sojourn to go generate
completed let's take a look at writing
our own react components because that's
what we're it's all about today so using
the generated the initialized app that
we have as a starting point let's create
ourselves a simple component so as you
saw from the app component
previously components are defined as
struck types that have a deaf suffix the
Deaf name suffix and that strap type
just has to have a single embedded field
of the type react component deaf that's
just a way of signaling to the code
generator this is a component the
combination of that name suffix and the
embedded field there so there we go
we've just declared ourselves two
components here and the code generator
will see that so if we save that file
suddenly what happen and we'll come on
to what happens in a second but let's
just take a look now at creating a props
for this ie these are going to be the
arguments that this component it
effectively accepts props in the same
type of way or a struct type that use a
props name suffix and then you can see
here we called our component fubar so
this isn't the props type is going to be
fubar props and again the code generator
detects this component now has a
corresponding props type this props type
is not very exciting here it is
effectively just a single field called
name of type string nothing very
exciting here we're also going to give
this component some state no surprises
for guessing what the name suffix for
the state type is it's again a struct
type that has the state suffix and in
this situation it's just going to be
very very dull and it's going to have an
age field of type int in this situation
so let's just assume we put all of this
within one file it could be within
multiple files and we saved those files
and we've had go generate run either as
a result of a file watcher or we've just
run it manually
so what's reaction done for us at this
point remembering that our component is
called fubar and that the component
struct type is therefore called fubar
death react gen has generated for us an
a load of code but the most important
three methods that is actually generated
are type safe methods to get at the
props and the state and change the state
from the components perspective so you
can see here we have the implementation
here is sort of just omitted this is
effectively the doc level but within any
other method that we write on the fubar
def component we can
get the props and we'll get back the
instance of fubar props that is the
current props for that component the
same with state and set state is just a
way of the component effectively telling
react while my state has now changed and
of course that needs to be typesafe in
exactly the same way so this is what the
code generator gives us so let's quickly
now look at what we want our component
to actually do and we effectively
describe that via the render method here
and as I said before the render method
is a function of state and props so the
two lines that highlighted have
highlighted at the top there are just
the way of sending wherever we are
rendering at the moment let me just put
into a name variable the name part of
the props the same for age from the
state and then we just create ourselves
a nice little detail string again you
can just see we're using the standard
library here the thumped package to
actually create ourselves a formatted
string in this way and then the bit at
the bottom there is the crux of the
render method because we're saying well
this is going to be a div that contains
a paragraph which includes a string that
is the detail string that we've just
built up there and then belief the
paragraph we're just going to have a
button and that button is going to have
the words bump age written on it and
guess what's going to happen when we
click on that button we'll look at that
on the next slide here so this is the
click handler that we're actually using
here is defined as another helper type
effectively that wraps as you can see
the fubar def component type here now
this has to implement one single one
interface this type to in order to be
able to part be passed to the buttons on
click parameter field and that is the
onclick method unsurprisingly so it's
just an interface with a single method
in which is on click and it has that
signature they're synthetic Mouse event
so in the same way here we're just
getting the state we're bumping the age
and we're effectively telling the
component your state is now changed and
that state change will cause the
component to re-render so how do we use
this component well of course we've seen
the type declaration for the components
but we
can't actually use it and so actually
calling fubar deaf would be quite odd as
well so we simply create ourselves a
constructor function that follows the
naming strategy of the function itself
being the name of the component hence we
call this fubar fubar
has a props type so unsurprisingly we're
going to pass in an instance of the
props in this situation and then we just
hand off to another code generated
function in this situation we don't need
to worry about the details of that today
so you could just literally follow this
pattern here and that would this we just
work absolutely fine for you okay so
that's the declaration complete let's
use our component within the app that we
initialized earlier on okay so if you
remember app go was the what the the
file that was generated for us by react
Jen in it so we're now just going to
modify that by putting in the text in
bolt here which is using the constructor
function to create our cells effectively
an instance if you like of the fubar
component and we're going to pass in the
props here with the name Peter in this
situation so we're editing the file that
was created for us all the way back in
the init phase we're now just adding in
this component here so it's going to
appear after the paragraph but you can
see how this is nicely composing we're
just just building effectively the
hierarchy of components that we want to
appear on the page so what does this
actually look like very exciting we have
my name is Peter unsurprising because
effectively that's the details string if
you remember it it's using a function of
the props which was the name and the age
which the zero value of is effectively
zero for the integer field and when we
click on bump age here it's bumping the
age so as I said clicking on that the
event handler view remember it just
causes the state to be effectively
transitioned to the previous state with
the age incremented by one very exciting
so another really cool thing about
wrapping an existing library which has
got really good tooling is that actually
we can reuse a lot of the tools that
already exist so I said to you before
with the compiled JavaScript you can not
only use the debugger and step through
things it looking at go code the go code
that compiled to the JavaScript but
react also has a huge suite of tools
available where you can then look at the
structure of your react application so
you can see here I've opened the chrome
developer tools and I've switched to the
react tab having installed those
developer tools and now I can see the
structure of my app in terms of react
components and the HTML elements that
they actually render so you'll recognize
this is the the example that we're
looking at here not least from the top
part up there but we've got the app
death of the app being the outer
components which renders the div which
contains an h1 a P element and then what
follows is the fubar component that
we've just defined as part of this so
this takes us back to an example that we
saw briefly earlier on and let's remind
ourselves of what this looks like this
is the go Fry's dot me example that's
been rewritten using go
but these react wrappers so the
left-hand side as you said is sort of a
preview component the right hand side is
a chooser component that has a number of
panels okay in those panels as we saw
the state can be open closed and there's
also a little border there around the
currently selected item within that
panel so let's just look at this from a
sort of pictorial representation of what
this looks like in terms of our react
app there's this outer component a
preview component that it renders and a
chooser component and within the chooser
component you could see that we're
actually rendering a number of different
panels so this is the overall structure
of it it's the outer panel in this
situation that actually holds the state
for our application what is the current
gopher and what is the config for our
application that state that can that
that state then gets passed to the
preview component and the chooser
components as props so as you can see
the preview component takes a gopher as
effectively one of its parameters or
arguments if you will so does the
chooser the chooser also takes the
config this user also takes some sort of
event handler for when we want to update
the gopher so if you remember when we
click on something within a panel we are
effectively trying to cause the state of
the current gopher to change in some way
so we need to be past a handler within
the chooser component which we can then
also pass to each of the panels as well
so you can see that sort of that that
event handler essentially getting passed
from a chooser also down to a panel as
well so the chooser component also has
some state as well that you saw as to
which of those panels is actually open
and hence that just need only be
something as simple as an integer in
this situation so I won't go into the
detail of the the panel props there but
you can sort of guess from the name of
each of those fields there what it
actually is open indicates whether the
panel is open or closed or not and then
within the panels render function based
on the value of that props it decides to
render either the panel open or closed
as simple as that but where does this
conflict come from I've just sort of
mentioned config for the first time here
but where is it actually come from this
serves as a nice sort of segue to
talking about backends and where we
actually get data into a front-end
application because they don't just
exist in isolation but before talking
about that let's just remind ourselves
on where we stand
we've written ourselves an interactive
front-end app in go we've used my itcb
i/o react bindings around the react
Facebook's react JavaScript library and
we've also got to hand that got two
hands excuse me got to use go generate a
bit along with a react gen to help just
generate a whole load of boilerplate
code along the way we therefore have a
newfound love for go generates but we
don't have any data on our application
excuse me so what's the option space for
backends I to get this data into our
application well clearly the first
option is to have no back-end at all but
they're not forgetting we have the
entire go standard library at our
disposal almost entire we could just
decide to get that configure
raishin from adjacent rest-based API we
could speak to a service that is HTTP 1
base64 encoded protobuf we could speak
to a G RPC back-end over HTTP 2 just you
can keep listing all these options off
we web sockets the whole lot so G RPC
sounds like a fun example so let's look
at a live example within the
presentation of a G RPC back-end so
again just to put this in context this
is a front-end interactive app written
in goal that is talking to a go based G
RPC back-end live within this
presentation here is all that happens to
be running on my laptop here doesn't
matter where the back top is actually
back-end is actually running so as I
said this is a go G RPC back-end
it's using the improbable G our PC web
implementation and this is all therefore
based on protolith declarations
ultimately so very very simply and what
we're gonna do here is I'm gonna look at
the right screen so actually this is I'm
just gonna paste this in here and using
the ISBN of a book here again there's a
sort of click Handler attached by the
react application which given this ISBN
returns us the details from the go G RPC
back-end very nice sort of seemed
painless enough and here let's just type
in gorge to find ourselves some books
never actually written by someone called
George again this is just calling a G
RPC method in the backend and again but
you would never particularly know it
from the fact that this is just a
browser-based front-end so that's pretty
much it we've covered as I said writing
a go based front-end app that runs
within the browser using the react
wrapper that is Maya Sieber - io / react
it doesn't specify where you get your
data from or how you get your data
that's really up to you which i think is
a nice thing and as Ashley and Matz have
sort of kindly demonstrated allows you
to write rather cool interactive apps
that run within your browser
just a few quick thanks if you'll allow
me to all these people listed here for
their various support in sort of making
this actually happen all very much
appreciated
Johan particularly for creating a
fantastic the G RPC backend example
which is a real sort of a meeting of
really interesting technologies to my
mind amateur and Brad this is actually
being adopted within the camlistore
project albeit slowly which there's been
a huge help to me because that's forced
me to really iron out some of the rough
edges if you can iron out a rough edge
I'm not sure papered over the cracks
maybe that would be a better one so
thanks to everybody for helping in that
respect as I said I promise that there's
some links here and I'll make the slides
available as well so that you can
actually click through and interact with
them when it's hosted online as well but
I think two minutes under that's it for
today thank you very much</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>