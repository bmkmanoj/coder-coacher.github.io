<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Docker?!? But I'm a SYSADMIN! | Coder Coacher - Coaching Coders</title><meta content="Docker?!? But I'm a SYSADMIN! - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Coding-Tech/">Coding Tech</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Docker?!? But I'm a SYSADMIN!</b></h2><h5 class="post__date">2018-04-25</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/s9nuPlukp8k" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so we're gonna start off by talking
about what docker is not docker is not a
VM right and and I do this because it
frames the discussion for everything
else and most you probably like I know
it's not a VM but for a lot of people
this is an easy connection to make and I
hear it all the time even now I hear
people say oh hey you know containers
man they're just lightweight
virtualization it's just it's just a
lightweight VM it's an easy connection
to make right both of them offer this
atomic unit of compute right you have
this thing that does work that you can
move around got sort of VMs that's what
a container is but their architectures
are completely different and their use
cases are completely different really at
the core and so how do you compare and
contrast them so if you have to go back
and explain to somebody what's a
container versus a virtual machine this
is analogy that I've used now for a
little over a year that seems to work
for a lot of people virtual machines are
houses so what makes a house what's a
house a house is this fully
self-contained unit right the house has
its own plumbing its own heating its own
air conditioning if I need another house
I built I dig another foundation I've
put up some walls and I get a full house
with its own plumbing its own heating
and its own air conditioning if I'm
running a virtual machine and I've got a
web front-end and I need horizontally
scale I stand up a complete instance of
the operating system I dedicate these
resources to that that piece of work
right and it stands by itself even
though they're pretty much 90% the same
95 percent same the reason technologies
like memory deduplication work so well
with VMs is because basically all a lot
of its read-only that's exactly the same
but we still stand up to distinct
components so how's this the other thing
about a house is that they only get so
small now I'm not talking about
container houses in your backyard
because that breaks my analogy we're
talking about our like you know proper
houses right so the first house I bought
2 bedrooms 1 bath the living room in the
kitchen and it was about inner square
800 square feet about the small house I
can find smallest VM you're gonna run a
gig
a few hundred megabytes maybe vm's are
considerably larger they take longer to
boot up as well because they're booting
a full operating system they take what 5
10 15 minutes to boot depending on what
you're doing right sometimes a little
faster sometimes a little longer
containers our apartment their
apartments in an apartment building what
differentiates an apartment from a house
well one apartment share a whole bunch
of infrastructure right they share
heating plumbing air-conditioning they
share an elevator right apartments come
in a lot of different sizes my son
Corbin is in the room here somewhere I
saw him walk in he's back over there in
the corner raising his hand Corbin lives
he has his first apartment he's moved to
San Francisco and he's going to software
school down there and his apartment is a
bunk bed in a one-room studio with three
other dudes right like that's an
apartment right we call that the Alpine
Linux apartment right then you can have
a Windows server core apartment - right
which is like you know 10 gigs and it's
like a penthouse somewhere so apartments
vary greatly in size depending on the
needs of the person staying there right
the most important thing to a college
student is probably cost so what do you
get that's where you optimize for right
so that's some of the things so how does
that relate to containers containers
live in an apartment building that we
call a docker host it's any server that
runs the docker engine which is like the
doorman it starts and stops containers
it runs them it does not interrupt them
it does not interject itself between the
execution of the application and the
hardware like a VM does with a
hypervisor it just starts and stops then
they share a kernel right they share the
kernel unlike a VM they are not
monolithic and they don't standalone
every container is going to Matt is
going to share that kernel with every
other container in there now they are
isolated though they have a front door
just like a house you can't just walk
into somebody's apartment right got to
go through that front door just like
that so they got that isolation
component but because they are smaller
and they share the operating system they
boot up in about 3/8 of a second and
they can be as small as you know there
was a contest on the on Twitter to write
the very smallest hell
world container you could write and it
was like like 60 kilobits or something
that somebody wrote a container that
would start up print hello world and
exit right and so pretty small really
hard to do that in a VM so and now that
all of you like that's all not I've
finished telling you everything you know
that you already know well maybe not but
mostly so so just because they're
different doesn't mean they're mutually
exclusive so the that question that I
just answered was one that I get all the
time is what's the difference when the
container in a VM why do I care right
then the next question is well where do
I run my applications a container or a
VM where I put them like where do they
go what do I do with them the answer is
what makes the most sense right so the
subtitle for this presentation is I'm
going to give you the questions that you
need to answer in order for me to answer
the question that you want me to answer
if I can't answer for you right and this
is one of those questions where should I
run my application well I don't know
what your application is I don't know
what your requirements are what do you
value are you the college student in San
Francisco or the most important thing is
is price or use somebody who's later in
life and made a little bit of money and
the most important thing to them is they
want to live at the beach like on the on
the beach
those are vastly different priorities
right applications have vastly different
requirements depending on who you are so
you can absolutely run on your left my
right the the example of bare metal
right so containers firing up on bare
metal why would you do that a lot of
reasons you do that we're going to talk
a little bit more in detail but the big
one here is performance right if the
most important thing to you is
performance then you're probably going
to go this route because that is almost
always nearly always I just hate
absolutes where I would say always
faster right but what's the limitation
that will why did virtualization so now
- this is audience participation time
why did virtualization gain popularity
in the first wave of virtualization
density right and that's why you
wouldn't do that right you wouldn't do
that because that's a million-dollar box
and I can only drive it at 30 percent I
don't want to throw away 700,000 dollars
in compute capacity right
so you do what you do on the on the
other side right where you say all right
well here's a here's a bunch of vm's and
now I can drive the capacity the other
thing is you know sort of capacity
related but if these machines over here
aren't all the same operating system
right they're not all windows are all
Linux if you have to mix and match the
OS you have to go with the
virtualization strategy or you have to
go with two servers right you can't put
them all in the same house so you get
over there you got a docker engine it's
Windows couple apps running got Linux
got an app running and then you got some
traditional VM over there you do that
for a number of reasons right existing
skill sets right security there's
organizations that have requirements
that say you cannot share a kernel my
application cannot share a kernel with
any other application on this system
virtualization allows them to put
multiple machines on that server and
stay within the realm of that
requirement that's why today like there
was a lot of cool stuff that how many
went to the keynote this morning so my
favorite announcement the one that got
me the most jazz was hyper-v isolation
for Linux containers so I'm not gonna
I'm just gonna talk about it so hyper-v
isolation what it does is it's on
Windows containers today it actually
boots the container up in this mini VM
automatically so you get the VM
isolation right but you don't have to
stand up a VM you literally say docker
run - - isolation mode or - - isolation
equals hyper-v it's this automatic thing
that gives you the shielding so you
could do a bare-metal instantiation and
still have that isolation that you
require it was only on Windows
containers before now it's on Linux
container or it's going to be on Linux
containers that's a really big deal if
you have compliance concerns and you
should definitely track that especially
if you're a shop that runs predominantly
windows with a little bit of Linux and
you want to run those luggage containers
on on a Windows box
so definitely track that it's super
lightweight so so the question was how
lightweight is that she'll that hyper-v
that shell it's basically when you boot
the two containers they boot up I think
one without hyper-v isolation boots up
in a second and one with high
the isolation boots up in like in two
seconds right I mean it's pretty it's
not or as a magnitude it's just
fractionally more I mean it's twice as
much more talking in one second versus
two seconds which is really nothing so
you're here because you're interested in
containers you're here because you want
some guidance on the like what do you do
like what are the things that you need
to ask what are the questions you need
to answer for this
you know for this to happen for this to
make this transition and I'm going to
break it down into what ends up being
three buckets but performance
scalability and costs those things are
directly related right if I have better
performance I typically have better
scalability if I have better scalability
I have reduced costs right so if that's
the most important thing for you that'll
be you know what we talked about there
will be the most important other people
are more concerned about security right
how do I secure this and and this falls
into the camp of you you don't want to
think about containers as VMs you don't
want to go into this and say today I do
this with a container so I'm going to do
this with a or with the via excuse me
rewind today I do this with a VM I'm
going to do the same thing with the
container it doesn't make any sense in
most cases right so we'll talk about
specifically around security a couple
things that are very unique to
containers that will that you want to
think about as you look at your build
ship run pipeline like how do you take
things to production and how can you
protect your information assets more
completely than you can with VMs today
in a lot of cases and then we're going
to talk a little bit about existing
skill sets you know how many of you are
a VMware shop today and how many of you
are an AWS shop today right a sure right
so a lot of different tools right VMware
is almost universal like you'd almost
don't even ask that question anymore
like it's it's just there so so we're
gonna start with that whole discussion
about performance scalability and costs
and how you should look at that so we
did a test so I was I was on the team
that did this and as was an industry
consultant who's actually speaking at
dr. Khan his name is Brett Fisher
Brett's a super smart guy he's doing
a tox similar to this one so here's how
I position this talk this is the generic
version of a lot of really great talks
by customers where they're gonna get
into very specific examples of what I'm
telling you generally so I'm saying
generally you want to make a decision
about bare metal versus vm's you're
gonna go into a talk and they're gonna
say I went with bare metal because from
my application it looked like this and
this is what I cared about right and
when you find that customer that you
match up with then you have your answer
right so that's sort of like if you
attend my session and there's a call to
action at the end you definitely want to
be on the lookout for sessions from
Intuit ADP Visa there's one more but
it's on my last slide anyway so Bret is
giving a talk as well good guy HPE is on
the show floor basically what we did is
we when we took docker CS engine 112 so
we did this at the end of last year flew
to ESXi 6 sis bench as a benchmark and
we ran everything on wealth 72 and using
the docker engine not the rel fork but
the doctor engine and the and we ran on
DL 360s with three par storage right so
pretty mainstream you know compute
platform that you'd have and here's what
we figured out if you look at it and
what we did is we've said okay let's
first look at just reducing the number
of virtual machines the idea what we're
holding constant here is the amount of
the size of the virtual machine right
and what we're measuring is how much
work can we do how much so how much how
much wood would sis bench what would
that what would they measure in terms of
work so we started up here on your left
my right with eight VMs and we had
suspense running in each of those and we
cranked away and I don't remember the
exact numbers but the let's say that
each one of those VMs did 8,000 TPMS
whatever the measurement was so you had
eight thousand total TPMS right ATMs
each in a thousand eight thousand total
so then we said let's just reduce the
number of VMs to one so we said if this
was two cores and eight gigs of ram
let's do 16 cores and and 32 gigs around
right so one VM that equaled the same
size
as the eight so we're still using the
same amount of virtual compute resources
but what we found is that you could get
about 25% you could you could get about
twenty seven twenty percent more work
done essentially if you had a server
form of four servers doing that work so
32,000 TPMS you can get 32,000 TPMS out
of three servers you could take a server
completely out of the mix by moving to a
single virtual machine that's what I
meant by saying look it's almost always
going to be better well that we have
talked about bare metal right but this
idea of consolidating down
containers are almost always going to be
faster the other thing is that because
of the container architecture and the
way we share the disk images and the way
we share some memory we actually use 35
percent less storage 30 to 35 percent
less storage and 7 percent less Ram but
at 2 seconds but you also notice we went
from managing 8 guest operating system
managing 1 right you had eight VMs you
had to patch before now you have one
right you had four hypervisor licenses
you had to buy before now you have three
right so if that works for you it could
be some savings potentially right back
here sorry thank you for your patience
appreciate it let's do the questions at
the end up the top ok yeah maybe write
it down or something yeah it's the
general thing yeah ok he's the boss I'm
just the talent shakey at that ok so we
took that exact same thing and we moved
it from the 8 VMs right so the 8,000 TP
use or tpms
and we moved it to bare metal 8
containers running on bare metal those
eight containers were basically able to
do almost twice as much work you got
almost a doubling in of output by moving
same Hardware just going from containers
to bare metal right so if you care about
performance and you're getting the right
load on the server and you have a system
to let you provision bare metal
effectively and you know you want to
your own data center and you see all the
ands but this doesn't mean this is what
you want to do this just means this is
something you should think about in the
context of everything else you need to
think about because you don't have
enough to think about right thirty
percent less storage less ram you know
in this case we go from no hyper we get
no hypervisor in this case right and we
go to native host OS docker engine right
so you're running something on there
some linux variant or Windows Server
2016 containers right on top of that
you're patching the native host OS and
your containers of course and it reduced
data center fret so there's a whole
bunch of soft costs in there but what we
found and this is this this study and I
change the slides at the end oh no it's
there it's on the next slide I will
tweet my slides out after this talk so
you'll be able to get them and I will
put them in the docker con slack channel
as well so after my talk as soon as I'm
done here I'll go upload them somewhere
I'll put them a PDF I'll upload them
onto Google Drive or something and then
share the link there so you can have the
link to the white paper because it's on
the next slide so there's a whole bunch
of advantages there right I will say
though that this happened not
automatically so we ended up doing some
CPU pinning right to maximize it so we
tuned in we didn't just like take the
word load and dump it right we had to
look at it we had to analyze it and this
is this is a quote that if you heard me
talk about this topic before I often say
just because you put your workload in
the container does not abdicate you from
the responsibility of understanding how
your application performs
you have to know that right and so we
knew that and we had that we did some
adjustments allow us to say this is
pretty much a worst-case scenario for us
because the number one resource in this
was CPU suspension would just take all
the CPU we could get so it was a CPU
bottleneck and those are that's kind of
worst case hi this is sort of like the
marketing summary slide but at least
that's got that the value add for you
guys is right here this is where you can
get the paper and don't I don't expect
you to like write that down because
that's like the most ridiculous URL ever
but I checked with docker can't slack or
my Twitter and you can get the slides
and find it or you can Google
hpe docker containers VMS and it'll show
up and you'll also find the initial
version of this paper which did some
similar testing using a bunch of other
benchmarks in different scenarios that
show you performance increases across
the board moving from containers to VR
VMs to containers so if you care about
performance if that is your number one
thing right good but plan for higher
density plan for more containers than
you had for VMs right or put it on you
know if you're gonna go on bare metal or
put it over bigger VMs right you're
going to have some changes here you're
going to have to be flexible you're
going to have to do some testing and
you're going to have to kind of work
those things out right but none of it's
gonna come for free there's work
involved in all of it okay so container
security I have a lot of people ask me
and they say is a container as secure as
a VM like yeah I think it is but you
know but that's the that's the wrong I
mean that's I should say it's a wrong
question that's just one question
isolation is not the be-all end-all of
security right if I ask you today how do
you know that VM that you just put into
production is what you think it is how
do you know that the golden image that's
that's named appropriately is is what it
pretends to purports to be how do you
know that I didn't go in there and
change something right how do you know
that when you provide a golden image of
Windows Server 2016 and you add it to a
team to build that out into an
application that they're the ones who
did it and how do you know the
vulnerabilities that may be introduced
into that image after it comes after it
goes online not de0 of a day one or two
or 30 the most common exploits are going
to be those for unpatched
vulnerabilities that have been known
about for a long time it's not zero day
it's not keeping up on our patch records
right so our your image is up to date
right oh how many of you put passwords
in environment variables
how many of you put them in scripts see
no one's gonna raise their hand but you
do it like I know I did it you do beat
your boss is sitting next to you but
we'd never do that that's not so here we
use of yeah we have a system in place
for that sir and then at the end of the
day are you're secure are your
communication channels secure are you
communicating over TLS do you have
certificates in place how do you rotate
them out right if you were in the
keynote this seems very familiar I
assure you I wrote this slide before the
keynote I saw Thiago in the hallway I'm
like bro I totally cribbed your whole
presentation right your whole segment my
thing he was happy about that so we
think about security in terms of usable
security if it's not usable what do you
do you write the password on a post-it
note and you stick it to the monitor
because I don't want a 15 character
password that has to have four special
characters an uppercase and a lowercase
letter cannot repeat my name can I have
the word password cannot have any word
in the dictionary I don't want that
right so I stick it on a sticky note if
it's not usable they won't use it it's
it's the idea that everything that you
need for your application from the
inception of that application to the
time that it hits your server and is
running in your environment that you
know the provenance of that application
and the state of that application as it
relates to security have I been exposed
to a vulnerability and then it works it
doesn't matter where I put it right it
doesn't matter if I'm running a native
of S or Azure or vSphere or bare-metal
or my MacBook or your Windows laptop or
your surface book or your we don't run
on iPads but so so much for the mobile
revolution so this is this is stuff that
you know so everything I've talked about
sort of generic this is a commercial
product right so we do have commercial
products we sell something called darker
data center you can demo it down on the
show floor the doctor data center offers
you things that like application secrets
that you saw this morning being able to
securely lock down sensitive information
and pass it across your network over a
TLS link TLS encrypted link right but
doing that doing it keeping a workflow
that lets operators and developers do
their jobs and reduces that friction
what Solomon talked about this
making sure that if something hits the
disk the secret hits the disk it's
encrypted right and all of this happens
by default and all of this happens
literally with a three word command
docker swarm an it when you type those
three words on a docker daemon you get
TLS you get secrets you get all this
stuff because it's easy to implement and
then if you need to change it if you
need to modify it if you say well you
know what I like vault by Hashi Corp
groovy I'm happy for you then you can
use that instead of our secrets
management well you know I really I have
my own PK I setup and I want to do my
own certificate authority great do that
right but we're gonna make sure that
when you start you start in the right
place and we're gonna do it in a way
that doesn't impede you right so then
when you get it in there we have users
in our back role-based access control
right and we'll run that on any platform
you want so I'm gonna do a demo now and
I do not have a cowboy hat and I do not
have a cow skull I'm a little bit
worried at this point I'm worried
because okay so hey I have this
application here let me do this I have
this application running down here and
it's my 1.0 version of my dr. Patz
application and you can see here we're
using docker trusted registry which is a
part of universal control play which is
part of dr. EE advanced which ships
alongside universal control plane
someone's gonna play clean that mess up
but I'll leave that to the marketing
people even though I work for the
marketing person what we see is we're
using a feature called docker security
scanning and if I click on this image
over here and I view the details I can
see that I have vulnerabilities well
miss in this layer I've got a
vulnerability with Musel and then I
think the other one is in curl well
let's see we can find it
it's nope it's not there yeah so it's
over here it's when it's installing
Python or it might actually be in curl
it might be in that curl command I think
is what the guy told me but so we've got
a bunch of we've got a bunch of
applicant we got a bunch of problems and
let me tell you something about this
application this is a true story I'm not
making this up for the demo when I did
this when I put this together a week ago
there was only one vulnerability that
was known in the ensuing week additional
vulnerabilities were discovered right so
we basically we load
CVE database up into DTR that gets
updated regularly automatically if you
want it to be and you do and as these
vulnerabilities are discovered you get
the notification so how am I going to
fix this well I'm going to come over
here to my trusty I term and I'm at my
trusty Bosch cell and I'm gonna clear
this and I'm gonna just I've got and I'm
kind of doing this backwards the
original I should have actually left the
doctor found its original state the
original docker image was based on
Alpine 3.3 and that's where those
vulnerabilities came from right so I'm
actually gonna I'm gonna run it with
Alpine 3.5 right so I'm chanting I'm
updating the base image from three three
two three five and three five is clean
it doesn't have those vulnerabilities so
I do a darker build I'm so lazy hold on
I'm so lazy I don't even use the new
commands I know it's gonna bite me in
the keister one of these days
so I just filled docker to build me a
new version of the application using the
updated Alpine image and so it's going
to go off and do that it's gonna take a
couple minutes for to do that and then
what we'll do is we'll push that up to
the registry and the registry will start
scanning and when that happens I'm gonna
go ahead and I'm gonna continue talking
we'll come back to that in a minute but
let me just start that docker push for
those of you who are newer to docker
what I did was on that first command I
said build me a new docker image name it
the same thing as the image that you
just looked at but give make it version
2.0 so that's what the build command
does the dot at the end of the build
command says build up from that docker
file that I just showed you and then
this command says go put that up on that
registry for me go put that on docker
trusted registry so alright so it's
going to do that and the scan takes a
few minutes so let's go ahead and go
back to the slides while we can and
carry on to the next bit because I want
to have some time for questions so
leveraging existing skill sets what does
that mean it means I think you need to
meet the teams where they live right
meet your developers where they live
meet your operators where they live if
you were a vSphere admin and you use
vSphere every day and that's where you
want to operate your daughter container
so that's great if that is you and
you're interested and we'd love to talk
to you a little bit more about how you
use vSphere in containers we have a
couple of focus groups we're doing
you're looking for a few people to do
that so if you'd like to be part of that
effort here a docker con come see me
afterwards and we'll give you the
details on that that's just a little
thing there but you know if your
developer and you want to use a
Macintosh then we have dr. for Mac if
you want to use Windows we have docker
for Windows if you are Linux guy or gal
just put it on Linux we run the run the
the engine there right where you work
shouldn't change your IDE shouldn't
change right if your ops and you're in
the cloud now the VMware stuff like
we're still sorting out but for cloud
users we have AWS and Azure unlock right
we have ways to stand up
we have ways of standing up docker swarm
clusters really easy in these cloud
providers and then using their tools to
monitor to those things and just scale
them right so if you're an add AWS
administrator we've got a tool to help
you do that so let's take a look at that
tool actually while we're while we're
sitting here so let me get out of this
Oh what happened oh wow that's weird
it's so weird it's like I can't see it
no I don't want to see what at 729
possibilities or what all right I'm
gonna have to literally cuz like it's
got PowerPoint on my screen here and
like it's up there so I'm up on AWS but
that's not where I wanted to start
actually I wanna start here and I want
to start up in docker store so if I go
to darker store and I say get started
with docker and I want darker seee I can
come down here and I can get this docker
Community Edition for for AWS and this
will take me in the AWS console and
using this using this confirmation
template I can specify everything about
my docker swarm right so this will build
me a docker swarm in the region I want
it to with the instant sizes that I want
with the with the number of managers and
workers that I want with using the SSH
key that I want right so I specify all
these things I can choose to integrate
with cloud watch so all my logs can go
into cloud watch right and if I click
create then that goes off and does that
and what you end up with is a darker
swarm running up in well it's right
there you can actually see it let me
just clear it and make it a little
easier to say well this
over-the-shoulder thing is not easy let
me tell you so that's my swarm so I
built a one a one manager three worker
swarm cluster up in AWS so if I go back
over to Windows know
that if I go back over to this let me
see something real quick here I do this
I do this oh yeah so I end up when I end
up with the stack over here right and so
the thing is we don't just throw up
three VMs with with docker running in
them we build you a swarm cluster that
has a load balancer in front of it that
has a lock down firewall right that has
security around it when you deploy a new
application we look at that application
what ports it's using we open the
firewall rules appropriately for your
load balancer right so it stays that way
you can see everything that we create
here and the resources and then you can
see the outputs here and there's a
couple things that are important this is
this is where you fire applications
right this is the load balancer that
gets updated when you stand up a new app
right the name isn't important but we
give you a load bouncer and then we also
give you access to all the manager so
you can SSH into them and manage them
manually if you want that's what I just
did right is shd into that manager using
that was on this list we we deploy those
we deploy those resources those managers
and those workers and auto-scaling
groups right so if I come over here and
just do this I'm going to speed this up
a little bit because I want to go a
little bit faster I come over here the
note auto scaling group I have three
nodes remember that's what it showed if
I wanted more I would just come in here
and edit it and I would increase it you
want to put some rules around that knock
yourself out Suz those notes come up
they'll join the swarm cluster right so
I'm running some applications all my
logs end up over here in cloud watch
this is the log for my Redis container
that I'm running it's mapped here to
cloud watch so if I am an on if i'm an
AWS person i've got access to AWS tools
that help me manage my docker swarm this
is similar to what ECS offers or ACS
offers right same sort of idea so let's
go back while we're here and come back
to the trusted registry and let's go
back at our repositories and let's see
what happened with this boom clean right
so that was the update right so what you
would do from here on out you would just
go to the docker you'd go to your
universe
control plane you would say update the
service with version 2.0 of the
application you could set a rollback
policy that says if this fails stop and
you could start rolling out the upgrade
to all of those effective machines with
one click and you would row update all
of those images that were in production
and you could do that in sort of a
Bluegreen way and that and the blow
bouncer would help you out alright let's
jet back over here to the slides we've
got about 10 minutes okay we're good I
want to save about 10 minutes for
questions but it would be a little bit
less than that look man these good
people want 10 minutes all right we're
gonna be fast and I'll stick around for
questions as long as we because we have
a break after this so I can stick around
an answer questions
all right so real fast so you you say ok
I'm down like what do I do with my
applications there are many many ways to
deploy your applications and you're
gonna hear a lot tomorrow about
something called migrating traditional
applications right that is saying I've
got an application that's a dotnet
application or a monolithic application
in a VM today and I want to put that
thing in a container how do I do that
outside the scope of this talk but there
are talks on that if you go down to the
hands-on labs there are two different
labs on how to do that for dotnet
applications one for developers one for
operators if you are lucky lucky enough
right so maybe you do that you did that
traditional app maybe you then take that
app and you say I'm gonna start breaking
that apart and let's start pulling that
into micro services right I'm gonna put
it in a container but I'm gonna I'm
gonna pull out the auth service and then
I'm gonna pull out the the catalog
lookup service and I'm gonna pull out
the message queue and you can start
deconstructing that monolithic
applications can talk to containers they
can talk to applications running in VMs
it doesn't matter they can those things
can interact if you have new if you're
lucky enough to be in a Greenfield
situation that's great too the talk I
think it's by Northern Trust is all
about how they did a Greenfield
application in five months in a company
that's you know a hundred years old with
you know many thousands of employees
it's a really good talk so some
learnings so these cut like I said this
is a generic version if you do not have
time for those customer talks I've got
two more slides that tell you what I
learned by listening to all of them one
you have got to from the cultural side
you have to involve all the pea
from the beginning you need all the
people in the room you need your devs
you need your operations people you need
your security people in a big way right
you need executive sponsorship because
they're going to be times where people
don't want to listen to you they don't
want to move forward on this change
because it is painful I'm not it's not
easy if it was easy we'd be at 15,000
people instead of 5,500 right and
performance people right all the people
that go in and have to touch that
container you need them in the room
choose a good partner if you are able
right
someone like we have like partnerships
with a vinod with partners with IBM HP
and HP E&amp;amp;I HP Enterprise HPE right we
have a bunch of local regional partners
find somebody who has helped people down
this road there's a lot of people that
have done it you want a strong partner
in your corner when you go to make that
thing because you want that first thing
to be successful define your guardrails
what are you going to touch and what are
you not going to touch leave the
database in the VM leave it there
because that's tricky right take the web
app first leave the database alone right
you're going to make mistakes and you're
going to be flexible flexible that's a
new word so you're gonna have to be able
to deal with and you're going to have to
be an agent of change right if you were
leading this initiative you're going to
have to pick up that mantle and be an
agent of change and you're going to have
to wake up some days any weather that
was completely wrong or you know what we
thought that the the C ISO would let us
do this thing and he's not gonna let us
do it so we've got to backtrack a little
bit and sweat the small stuff
document everything use labels profusely
label everything you may not even know
when you need those labels labels can be
affixed to containers and engines to
describe things about that container and
they're completely arbitrary you could
have a label that says this runs on SSD
in the Northeast region on Amazon and
was installed by Mike right and that may
come in handy because you may have an
application where SSD is super important
you label all the machines that have SSD
it's super easy to deploy it onto those
machines because you took the time to
label them label everything sweat the
small details
pick the right project you've got to
start small don't try to boil the ocean
some people do but it could get us get a
win under your belt right it doesn't
matter it's Greenfield or micro
microservices or you know next gen 12
factor cloud native whatever you want to
call it right pick an app that makes
sense for you but know why you're
picking it like why are you doing this
application why does this application
matter make sure you have a plan for
things that can trip people up like
static port mappings right how do you
deal with static port mappings in a
world where the docker host can only
expose port 81 time right it can only
expose port 3000 one time what do you
can do about that if your application is
hardwired like and then they conflict
how you're gonna handle that
moving your your container through
different environments with different
config settings how you gonna handle
that
what do you do about that database what
do you do about that persistent data all
these problems can be solved just think
about them like going up with it you
know with thinking about that ahead of
time and then I talked about this but
adopt your processes to this brave new
world you you don't treat the VM like
you treat the container you don't patch
a running container right you patch the
underlying image and redeploy it you
don't back up the running container
maybe you can but think about that these
are different things there's things that
you configured before you can't just go
oh it was running over here with a heap
size of you know 1024 6 is the Millat
I'm just gonna put over the heap size
because it may not work right it may not
be the most optimal thing so don't just
think it's like this we talked about
lift and shift it's more like lift tweak
tune fight cry sweat and shift alright
so that is the end of my talk</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>