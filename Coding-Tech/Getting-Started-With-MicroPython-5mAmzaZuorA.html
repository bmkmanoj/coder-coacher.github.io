<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Getting Started With MicroPython | Coder Coacher - Coaching Coders</title><meta content="Getting Started With MicroPython - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Coding-Tech/">Coding Tech</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Getting Started With MicroPython</b></h2><h5 class="post__date">2018-04-14</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/5mAmzaZuorA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so quick introduction to micro Python
what's micro Python well it's an MIT
license Python about a Python 3.4 for
the Pi board for the micro a bit for the
esp8266 and for the ASP 32 created by
Damien George who's sitting over there
not that I'm making a big fuss about
this thanks for coming
as a way to run a nice civilized
embedded language on very very small
computers I'm really excited about this
because I really enjoy playing with
embedded systems and I really enjoy
writing stuff in Python I I find it a
much more relaxing than writing in in
many other languages including C so I
got into this idea that I could now
write Python on these tiny embedded
systems and I was really excited about
this and so I got more and more into the
micro pison project and I got involved
with the ESP 32 port of micro Python
which was really exciting and then I
found myself contributing to that which
meant writing C on microcontrollers
again so there's some irony built into
this project I think but these chips
come from a Chinese fabulous
manufacturer called espresso they're
they're very small as it's a very cheap
chips which is really I think redefined
the market for what a microcontroller
can do compared to like the AV ours and
the 8-bit pics and that kind of family
of chips that we've all gotten a bit
used to buy now these really really
redefine things they first came to
prominence I guess in the open source
world I first remember hearing about
them in I think Joe long Linux conf
funnily enough and they first came to
prominence as a kind of a controller
that went on the side of an Arduino to
handle Wi-Fi for it until eventually
someone noticed that there several times
as powerful as an Arduino and that it
was really a very strange relationship
where you have 99% of your computing
power over here in the communications
controller and slowly people started to
work out how we could do stuff with it
the company espresso who make them
really I think benefited a lot
from the involvement of the open-source
community and really enjoyed that
relationship and so their new product
the ESP 32 is even more open and even
more in sync with open source stuff so I
think that's really exciting and it's
more powerful and has more everything
which is really good
that's the CPU on the lollipop my
favorite photos of these things is from
a bunch of Russian guys called zip
towbars who boil chips down in acid to
see what the day looks like and I just
love these photos they illustrate one of
the cool parts about these things in the
the main part of it is is like the the
onboard ram and all of that sort of
stuff and is fairly boring looks like a
little car parking lot the bit that
looks like a chemical plant up in the
top left there is actually a Wi-Fi radio
and a Bluetooth radio built right into
the silicon there's little coils of the
things that look like little coils of
wire or actually little coils of wire on
a tiny tiny scale their little
transformers and baylin's and all that
stuff and I think it's amazing it it
looks like a chemical plant or possibly
a really difficult quake level to me as
something about it that's just really
exciting to think that we can actually
do that we can make a Wi-Fi radio right
there on the chip they're available in
many different modules and and this
confuses the hell out of people
consistently which is why I thought it
was worth having a slide for that 80 to
66 comes in a huge range of modules with
strange little ESP 12 and ESP 13 and all
of this sort of different numbers and
names and different sizes and all that
you can't go too far wrong with the ESP
12 ones they're kind of the most
widespread ones the ESP 32 thankfully
has a few less module packages available
that's the standard factor that people
use available straight from espresso
those edges sorry those edges on those
modules are actually hand solderable as
well they're like postage stamp edges
but you can hand solder them with a
little bit of practice if you don't want
to even hand solder anything you can
also buy these boards this little plug
in things like the witty cloud that
we're using for today and note MCU and
we must do one a very widespread 80 to
66 boards very useful there's also um
whole bunch of ESP 32 boards available
there's the defecates II from espresso
sparkfun Adafruit and we must all have
their own boards and that loli in 32
Lite is the one used on the lollipop did
anyone have a lovely bottle long today
the the open Harvey mini can't find you
yep cool I will talk about that in a bit
what can you use micro Python for well
one of the really fun things we did with
it was this year at buzz conf we did a
project I call rocket surgery where we
had attendees it sorry buzz conf is a
technology festival but you're camping
which is kind of cool because it means
you can let off compressed air water
rockets as a session which UTS would be
probably a little negative about if we
tried to do it although some of those
buildings are quite big so compressed
air up to like a hundred psi bunch of
water fires the rocket in the air that's
exciting but especially if the clouds
are low you don't see the rocket for
long and it's very hard to tell if your
rocket design is getting better or worse
so what we did is we stuck in a cellar
ometer and a barometer on there and you
can see this graph on the right here
we've got altitude on the top and we've
got acceleration on the bottom and it
didn't work perfectly but we started to
get some numbers back the barometer is
actually so accurate we can get altitude
within about a meter or so going up and
it was enough to see that we were really
actually firing these rockets and they
were going up to 30 or 40 meters it was
pretty exciting stuff why is that
exciting about my career Python well
because we wrote all this code it used
mqtt and that was really exciting and it
send all its telemetry back live over
the conference network and that's pretty
cool also because it runs on a computer
that cost five bucks so you can afford
to stick it on top of a rocket full of
water and fire it up in the air we did
get them all out of the trees eventually
the other big use we've got for this
year is lollipop the open hardware mini
con robot that's using an ESP 32 to
control two motors and a servo and
there's an ax seller Amador on it too
because well that cost five bucks and a
big lithium batteries try not to make
that explode when you're in the air and
they're a really fun little project the
idea
this can be a little soccer ball chasing
robot so we built them on Monday as part
of the open hardware mini comp again by
having such a cheap CPU we get to drive
the whole price of the project right
down and it moves things from being
expensive toys to cheap toys which is
cool because it means you can actually
let your kids play with them unlike
expensive toys where you go no maybe
maybe honey don't don't don't pick the
robot up don't take it to the sandpit
it's much better if you can just say
yeah well yeah kill a few CPUs won't
really matter one of the things I just
wanted to talk about the people people
always ask me this is great I've got
this micro Python I can see it I can I
can use it I can turn LEDs on and off I
feel really good about my life now and
that's great but I want to use it for
this project and for this project I need
this function or this thing or this
other thing I really can't I can't go
around implementing fast Fourier
transforms in Python can I it won't be
fast enough and so one of the things I
like to emphasize in this is well that's
okay because you could still embed C
really easily into your micro Python and
the other thing is that the newer chips
especially the ESP 32 has a huge range
of peripherals and really exciting new
development in that library their SDK is
continually being updated very rapidly
and we really need help keeping up with
that sort of process of how quickly that
gets updated so I'm really seeking more
contributors people who'd like to
contribute to the code so I just want to
run you very quickly through a few of
what's actually in the micro Python
repository so that we can work up
towards the bit of having people
contribute back and develop their own
drivers in micro person and so on so
very quickly if you look at the micro
Python main repo github micro Python
slash micro Python there's a whole pile
of files in there and that can be a bit
intimidating and so I want to do a quick
tour of what's that the first thing is
well about half of those files in that
top level are just documentation and
things like that so that's nice they're
not scary that's a good start
there's a whole bunch of stuff the
drivers and some of the modules and some
of the library code that is shared
between the different port
so that's not specific to any given one
port that might be some shared libraries
that multiple ports use etc etc so we
don't need to worry too much about them
just yet
and the actual ports to each of the
different platforms are in a directory
called slightly unimaginative leak ports
particularly I'm working on the ESP 32
port which is in that port directory as
port slash DSP 32 if you look in there
now we're back to having a whole lot of
files again and we're all scared again
but if you actually look at those files
a lot of those are just implementing
those built-in modules you've all been
typing import machine a lot to get pins
working
that's just loading up some code that
lives in mod machine as an example when
we load up we import ESP which is a way
to get a whole bunch of ESP specific
routines we can import the module we can
look in that module we can see there's a
whole bunch of things in that module
those things come straight out of the C
code we can call the function called ESP
- sighs for example which tells us the
size of the flash on our device so he's
going to do a quick dive down into where
that comes from how that data gets back
to you and how that works that function
is basically a function provided by the
expressive SDK called SPI flash gate
chip size which is not terribly
interesting but you may need to know
it's a C function though we how do we
call that from Python well the first
thing we've got to do is wrap it up so
that we take a system's size T and turn
it up into a micro pass an integer so
there's a function for that MP object
new int from you int will take that
native see int and wrap it up into being
a micro Python object that is an integer
and there you go and we call that from a
Python function or from a c function
that returns a Python object and takes a
void pointer that's great that's a C
function that returns a Python object
that's not terribly good because we
can't call that from Python so we
wrapped that up and make a Python
function out of it so you're getting an
idea here we have wrappers of wrappers
of wrappers
so we're wrapping up the C function to
become a Python function
and that's basically saying look to find
this thing it's gonna be a function it's
going to take no parameters they all
return a Python object or none so that's
okay
how does it know where to find that
function it needs a table of names so we
we add to the name table here this
Global's table for the module we say
flash size points to this function that
wraps up a see function that will return
me an integer wrapped up as a place than
the integer and then all we really have
to do is tell that module this is where
you find your symbol table then we tell
the overall config the overall port how
to find that module how to compile it in
and now when we go to call that function
it's there we can call it just like a
Python function that's kind of like a
very very lightning dive down in and
back up but I think the point I'm trying
to make is that all we're really doing
is we're wrapping up C functions and
into Python functions we're wrapping up
C objects into pies numbers we can also
unwrap them to get parameters back down
it's actually a lot it's a little
intimidating when you first look at it
but it's a lot less scary once you start
digging in and just trying stuff so
that's about that</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>