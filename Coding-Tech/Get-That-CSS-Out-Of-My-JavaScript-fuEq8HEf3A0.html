<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Get That CSS Out Of My JavaScript | Coder Coacher - Coaching Coders</title><meta content="Get That CSS Out Of My JavaScript - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Coding-Tech/">Coding Tech</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Get That CSS Out Of My JavaScript</b></h2><h5 class="post__date">2018-05-03</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/fuEq8HEf3A0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">all right so my name is brian huff i am
the director of engineering at New Relic
but more importantly on the co-creator
along with Nick Groff and max Tiber of
polish'd which is a CSS and J's library
similar to compass or bourbon for you
CSS folks and I am unsurprisingly here
to talk about CSS and j/s so before I
get started I need to figure out where
my enemies and my friends are so how
many of you have used CSS and j/s before
okay
hard to see but seems like a decent
amount how many of you use it in
production and are very happy with it
okay
I'm gonna need you to protect me from
everybody else's I go through this talk
because people tend to get a little
worked up about this before I start so a
friendly disclaimer there's a lot of
opinions in this industry we all have
them I have them you all have them
everybody thinks everybody else's suck
don't hate me for anything I say I will
try to keep as factual as possible but
some of these are my own opinions and
they are all up for discussion and
debate and I will gladly talk to anybody
after this talk about anything that I
talk about whether you think CSS and Jas
is awesome
or you want to kill us for creating it
you want to go back to using sass that's
perfectly fine
alright so much like when JSX first came
on the scene people get a little worked
up so I've been in the industry for
about 10 12 years now and a lot of the
people that I grew up in the industry
following had a lot of fun interesting
things to say about CSS and Jas when it
first came out some of these people are
clearly a little more worked up in
others I'd also say a cry for help is
probably the most extreme thing that
I've ever heard CSS and Jas called so
there's a lot of myths out there about
CSS and Jas so I want to talk about a
few of those for starters just so we can
kind of get those out of the way so
these are some of my favorite quotes
from Twitter about CSS and Jas when it
first started coming on the scene I have
replaced Twitter names with fake ones to
protect the identities of these folks
but clearly a lot of people are very
upset at us
for breaking this little do the scene so
some of the common myths are that we
don't know CSS we really really hate it
or just can't be bothered to learn it
it's the same thing as inline styles so
for those of you who are around in the
90s remember how that was we don't care
about separation of concerns and we just
like to write everything in JavaScript
so I want to talk about these briefly
first so we don't know GS so
surprisingly you have to learn a lot
about CSS to build a CSS a J's library
if you look at things whether it's style
components glamorous glamour radio many
of those you can't build these libraries
without understanding fundamentally how
CSS works there's nothing magical that
we're doing that gets around the fact
that we still have to function with CSS
so all these libraries I'm going to talk
about today and Annie that you're going
to come across have to work
fundamentally as CSS the second is is
that we hate CSS we actually love CSS
and this is our attempt to try to move
CSS as a platform forward in a world
where we're no longer worried about
documents and we're actually working
with components CSS is not ready for
that type of implementation as I'm sure
all of you is react developers know it's
the part where the components model
really falls down and this is our
attempt to try to show it as possible in
hopes that CSS will move forward
the third is it's just inline Styles
this one's kind of our fault early
implementations of CSS and J's libraries
did use inline Styles it was ugly
we fired everybody involved it really
will be okay for is we don't care about
separation of concerns and we very much
do a lot of getting very bright in here
we very much do if you've seen this
floating around this is how we look at
separation of concerns when it comes to
react components it's no longer about
splitting a document in three
separations of concerns but it's
actually on the component level so a
component level will describe its markup
it's a JavaScript functionality as well
as its Styles
so it's not that we don't want to
separate these things we just want them
separated from a component by component
standpoint as opposed to across the
document and the last one we probably do
really just want to write everything in
JavaScript that's how we are as
engineers but just like JSX and as I
mentioned earlier this does compile down
to CSS just like JSX is a JavaScript
representation of what we want the Dom
to be CSS a J's is a JavaScript
representation if we want the styles to
be so when we created CSS and Jas is a
concept and I'm speaking we generally as
a community we set out to do a few
things one was portability of components
as I mentioned earlier the sharing of
components the Styles portion was always
clunky the second is portability of
styles which is slightly different and
I'll go into that in a minute
the third is better handling of critical
CSS this is the CSS that is required on
first render to show your user a page
and platform agnostic styling so this is
the concept of being able to write code
from CSS standpoint that works both in
the browser as well as in things like
react native or react VR is trying to
deliver on that promise of one code base
everywhere so let's talk first about
portability of components so how many of
you have messed with web components or
heard of the concept of web components
or polymer or things of that nature I'll
pretend like I can see hands so it used
to be this concept called scoped Styles
and what that was supposed to deliver
was this concept that I was I could
write styles for a component and that
component wouldn't have to worry about
collisions with other components as far
as its styles were concerned so that was
like the primary use case that CSS and
J's is trying to solve so if we take
this very very basic component here how
would we style this normally and what we
do is we write some CSS we'd stick it in
another file and for any of you who've
ever used any sort of Reax UI library
whether it's like a calendar or a date
picker or something of that nature
you've probably run across this you have
to take that CSS file and you have to
stick it in your Styles folder and if
you
and sasshi imported or you cut and
pasted it in another folder it's not the
best way of doing it you're going to
require that somebody do something
manual you're going to require that they
have some sort of specific build if
you're say using something like web pack
to pull it in via and import it's not
the greatest way to share your UI
libraries if you're trying to do it for
maximum compatibility and what a lot of
people have ended up doing is you get
things like bootstrap right like
bootstrap is the ultimate version of
this where we just create this overall
library you could style everything
across our component library and that's
all that we care about right we don't
care if they collide within that as long
as we have this overall way of
describing our Styles but in a component
world that doesn't work very well so
what you see here is an example this
specific one is using style components
but it would look very similar
regardless of what library you were
using and this is how we could style
this button directly in the component so
for those of you that use CSS and jss
looks pretty familiar so within my
actual component I'm able to describe my
styles and that expands when I want to
be able to do this across multiple
components so I can have multiple
buttons that have their own styles and
there's no way for them to collide with
each other so I end up with this nice
little component that I could share
wherever I want it to and if somebody
else in my company or somebody else in
the and the community builds something
else we will stop those things from
colliding because it's just one-to-one
with the component and this is very
useful especially for third-party
libraries your own internal component
libraries and shared styles and style
guides what you're trying to do is
you're trying to come up with a way
where I can create a piece of UI that
has everything on board and I could use
it wherever I want to use it regardless
of the surrounding code I do not have to
worry about the impact that that is
going to have on my particular component
so there's a little bit of magic going
on behind the scenes with CSS and J's to
make sure that this can happen because
you can imagine if I pull in 50
components or I create like a hundred
component library for my company there's
a lot of CSS flying around so we drew a
lot of inspiration from other attempts
to do this in the CSS communities
there was objects oriented CSS by Nicole
Sullivan smacked by Jonathan snook and
probably the most relevant is BEM by
Yandex so for those of you that are not
familiar with bamm-bamm is the concept
of creating classes in a way that will
avoid having conflicting code so you
have this concept of block element and
modifier that is used to describe your
particular component and with the hopes
that that will be unique and keep you
from having any collision of styles with
other components one of the big
challenges of that is much like
everything else in CSS you're trying to
keep it up here in your brain and when
you have to do that across an entire
organization or sometimes and disjointed
communities that happen to be using your
third-party library it doesn't scale
very well as a concept it is great the
execution of it is quite clunky so we'd
go back to our the original example
where I've created this base buttons and
this is a base button style and these
are the styles that all the buttons
across my library will use and then at
the bottom here I have two instances of
that button that I've created where I've
made a specific cancel button and a
specific submit button that extends the
styles of those two of that original
base button into these two new buttons
and what that ends up compiling down to
is what you see here so basically what
we're doing is we're taking the styles
that are in that block for that
component and we are hashing that into a
unique class names now the class name
for all intents and purposes is
gibberish but what we end up getting is
that bem functionality because now any
component I have across my entire stack
that shares those exact styles will get
that class name which keeps it from
getting bloated but if I add even one
additional style to that block it will
get a completely new hash and I do not
have to worry about those colliding the
next thing I want to talk about is
portability of style so portability of
Styles is a little bit different for
those of the view sass or less or stylus
this is the concept of mix-ins there's
this particular complicated feature of
CSS that I want to implement and I want
to use over and over again it takes a
lot of CSS I want some way to kind of
pass that around and in the past this
has been traditionally done with mix ins
where I go and I google it and I find us
sitting on some site
then I cut and pasted it into my project
and I import it and I've got my mixin
and everything's hunky-dory but there's
not a good way of doing that repeatedly
we look at a sass mix in like this and
this particular one is for a concept
called CSS locks which is a fairly
complicated formula that determines
fluid transition between two break
points so if I want to go from like 300
pixels to 600 pixels and I want to scale
dynamically between those two this is
the formula that does it for you you
would not want to write this over and
over again every time you did it so this
is what it looks like implemented in
sass this is what it looks like
implemented in JavaScript almost exactly
the same with some syntax changes now I
have a piece of code like anything else
that I could throw on NPM that I can
share anywhere and this is one of the
beauties of writing your Styles in this
way is now I can create this as an
individual component or a library of
components that I can share with others
so that people within my organization or
people who use my third-party library
can get this CSS functionality directly
in their components using NPM or yarn
whatever your package manager of choice
is so now if I want to do a CSS lock on
a container it's as simple as going to
NPM and installing this package that
I've created importing it in like any
other module in JavaScript and then just
using object out a sign or in this case
I'm using object spread to add it to
that style declaration block at the top
of my component and now I have the CSS
that previously was buried somewhere and
some sass repo that I had to pull out
manually and this is what we did when we
created polished polished is a library
of about 60 modules that is the same
type of stuff you'd see encompass or
bourbon just common CSS things that are
super annoying to do over and over again
and now we've just made them a bunch of
modules that you can go in and just
import individually and add to your code
just like you would anything else in
JavaScript the next benefit is inlining
of critical CSS so critical CSS is
something that has come about as a
result of google and their page speed
alga rhythms telling us that the the
fastest way and the best practice to
our page to load quickly is to take the
CSS that is needed to initially render
the page and inline it at the top and a
style block there are tools out there
there's a tool called critical by adding
assembly that will try to do this
automatically for you but as you could
imagine it's not an easy thing like I
need to know what I'm actually seeing on
the screen and every time something
changes on the page I'm happy to go
manually update the CSS that I'm now in
lining at the top of my page it's a
manual process
it requires build tools to automate even
that does not work very well and if you
were to go and ask a hundred developers
the things they do to make their pages
faster half of them wouldn't mention it
and the other half would probably like a
less so much work for so little benefit
I'm not even gonna bother but this is
all you have to do to get this when you
do it in CSS and j/s because it is a
feature of how CSS and J's works because
at runtime the page is automatically
writing its CSS to the top when you
render on the server you automatically
get that stylesheet already generated
for you so it's already in lined at the
top in a style block just like Google
asks you to do and if your page goes and
changes updates dynamically all that
stuff is automatically just comes
onboard with CSS and J's so you're
getting that extra performance benefit
out of it without doing that extra work
nothing new in your build step and it's
just right there from the start the next
piece is styles for every platform so
this is something that we are a little
new at and we're still trying to figure
out so one of the promises of react in
general is this ability to write code
once and render to any platform and
sometimes those platforms are a little
crazy like Word docs and hauser strange
use cases that we've come up with for
react but styles are still a problem we
don't have a good way to style a
component that needs to be displayed on
the web and react native in react VR
we're just not quite there yet
so you've got this concept of react
primitives and you've probably seen
either react primitives or there's react
to wet native web these concepts of
trying to come up with react components
that have versions of the cantar 'get
different platforms right I write this
view once and that view becomes a div on
the web it becomes a web
view in iOS etc etc how can we also do
this from a styling perspective and that
is something that not only style
components but glamorous and a few other
libraries are working on to give you the
ability to write your styles in regular
run-of-the-mill CSS and have them
translated into styles that work well
across all platforms so if you look at
the example that we have here it doesn't
look any different than what I showed
you earlier we have this view component
I've applied a background color some
text color to it and this will do all
the magic behind the scenes in order to
style it both for the web as well as
native devices and we also give you the
ability to go in and do things that are
unique to the native platforms because
not everything that's available in CSS
is available on native there's also a
whole slew of other styling options on
native that we don't have access to in
regular CSS so we try to create the
ability for you to use things like font
variant and text and text shadow offset
and work with the pixel based
measurement units that are in native
versus the you know pixel or percentage
based ones or REMS or M's whatever you
happen to be using in CSS itself and
we're trying to figure out a way to kind
of bridge that gap so that you can write
styles across the board for everything
we're not quite there yet and for any of
you who've worked with react native as
well as react for the web you know that
there are quite a few differences of
that's going on there we don't because
we don't have one-to-one for everything
how do we describe to the user that hey
this rule you use just doesn't exist in
CSS do we ignore it do we do we tell the
user that's the case there's still a lot
of things to figure out here but this is
one of the things that excites me the
most because this feels like that
missing link between really having code
that can work everywhere and we're we're
kind of that now we're doing a really
good job on the JavaScript side we're
doing a good job on the markup side but
we haven't quite got there from a
styling perspective yet one talk I would
definitely consider checking out is
today in this hall a two to 40 Peggy
raise this is going to be talking about
right once render anywhere which is
going to expand
the concept generally of going in and
what does it look like to write to both
react native as well as the web and what
are some of the styling challenges are
running into so if you're interested in
this topic definitely check that out
she's going to dive a lot deeper on that
so what's the catch
I've been up here is everything's great
it's awesome this is everybody should
sign up and use it I'll you're silly if
you're not there's still a lot of things
that we need to figure out and a lot of
it falls into form versus function so
because we're not actually writing CSS
there is some processing that needs to
happen what's the right way to get
adoption so if you have used things like
glamorous or emotion or style components
you've seen that what is really an
attempt to bring this to every developer
because not everybody feels comfortable
writing JavaScript and if we're going to
get this model with enough critical mass
to get people to pay attention it has to
be more than just react developers going
in and writing JavaScript so you see
these more CSS like api's where you're
doing the string interpolation and style
components as to where it's literally or
like writing CSS and a CSS file versus
what the trade-off is is a smaller
library but writing them as objects
which feels very natural to us as
JavaScript developers but not so natural
or two maybe a UI developer that only
spends their time writing HTML or
writing regular CSS so how do we balance
those two things and that's why you see
kind of this divergence where you have
ones that are trying really really hard
to be adapted but maybe are larger
libraries because they need to process
that CSS ahead of time first is the ones
that are smaller an object base but they
have a higher barrier to entry for
everybody to use especially if you only
are used to writing CSS this also
dovetails into the build versus
performance concept so if you are not
rendering to the server you have a
regular single page app and you use
something like style components you're
going to run into an issue where we're
doing a lot of this stuff at runtime
because we are evaluating JavaScript
just like we do for your component in
JSX the CSS is generated at the time of
render and that as you can imagine can
get expensive depending on what you have
going on on the page but we don't
require any special build process for
that you don't need to install any babel
or web pack plugins you can just run and
gun and it does what it needs to do
you are going to have a slower runtime
hit now you can go a little bit further
if you look at a library like a motion
which has been gaining a lot of
popularity you have an extra build step
and you put in a plugin but then I have
very little to no runtime impact so to
us trying to find the balance between
those two is another thing that we're
working quite a bit as a community to
solve because it's amazing we will
gladly install like a 300 kilobyte
library to like show a timer but if we
have to install like 12 kilobytes for
CSS it's the end of the world so we have
to figure out where that balance is so I
definitely if this is a topic that
interest you and if I had to write a new
app right now a motion by Chi Hornberger
is definitely the one that I would check
out I think he has found a nice balance
between those concepts he has a CSS like
API similar to style components as a
very small library size I want to say
it's like 6 KB and he has incredible
performance because anything that's
static he's extracting immediately as
part of the build and given in the react
community a good portion of us are
already using webpack it's kind of a
small thing for us to add one more
plugin in there and to get this
performance so really the only runtime
impact you have is for any dynamic
styles that you might be working with
another small thing that I have to
mention is security so who would have
known that accepting user input in java
script was a bad thing if you did not
sanitize it this is just a friendly
reminder that we are doing string
interpolation tag template literals with
a lot of these CSS like AP is and if
you're accepting user inputs and
generating styles based off that user
inputs you have to sanitize that there
are some security vulnerabilities
specifically with string interpolation
in JavaScript that I'm not going to bore
you with but definitely let's check out
these articles if you're interested in
learning a bit more about that but the
CSS escape library by Matthias is
amazing and kind of the de-facto in the
community right now to get around that
security problem this probably will not
be the only one we come across so it's
definitely something keeping in mind as
you're moving your code base over to CSS
and j/s so if this all sounds great
you're not already using it and you're
sold this is the best place to start so
I've thrown this bitly link up this is a
get
repo that has examples of practically
every popular CSS and J's library you
can check out along with most
importantly benchmarks on both library
size render performance across a bunch
of different situations as far as like
how big the pages and how many Styles
you're rendering definitely worth
checking out there is a lot of good
resources there there's also a ton of
articles linked at the bottom if you
want to read about more it's still a
very heavy effort to move from regular
CSS over to CSS and j/s so it's worth
you putting this little extra effort in
at the beginning to make sure that you
don't have to backtrack later one of the
other flaws I'd say of the community we
have right now is everybody's just
trying to make their AP is a little bit
better so there's enough difference in
api's across the different libraries
that there will be some pain if you're
trying to swap between those so this is
definitely something worth checking out
another amazing article that you'll want
to read is unified styling language by
mark Dalgleish he goes super in-depth
into a lot of these topics he's also a
the creator of CSS modules which is a
competitor of CSS and Jas so you get a
different perspective and he's very
positive about why we're going the
direction that we're going and kind of
how we got there so even if you're not
sold necessarily on CSS and J's as a
concept you can kind of see him talk
about where he sees the common threads
between what he's trying to do with CSS
modules versus what the CSS and J's
community is trying to do and if you
think this is all disgusting and you
just want to write your CSS as normal
and you think we're all crazy and we're
just trying to reinvent the wheel you
have options out there it's not as
integrated as we'd like it to be which
is why we're pushing forward with CSS
and J's but there are options out there
for you to try to mimic this
functionality in your components the
affirmation CSS modules is probably the
most complete solution out there they
are still moving forward with the
polymer and web components standards you
can look at what's going on there there
is the more traditionally using what may
be what a lot of you may be using which
is the web pack CSS loader which is that
concept of just importing a CSS file at
the top of your components and web pack
does some magic to kind of inline that
CSS for you that is of course still an
option and probably the most exciting
thing for me which it seems
so small which is CSS variables because
CSS variables is giving you that ability
not only to do things like theming and
and the stuff we think of sass for but
they can be dynamically updated using
JavaScript so if you want to have these
dynamic styles and you don't want to
feel dirty by just like swapping class
names around which is the traditional
way of doing it you can do it with CSS
variables so I wanted to leave with this
tweet so Sunil pie is the creator of
glamour which is kind of in my opinion
the father of all the CSS and J's
libraries you'll find that a lot of them
have this as kind of their back-end code
and he says bring dump
I don't want CSS and J's to win I want
to be obsoleted I think this summarizes
our feeling as a community we do realize
to a certain extent we're trying to
reinvent the wheel we're trying to bring
CSS into javascript because it's a
language that we know that we have a lot
more control over to try to show what is
possible our ultimate goal is to get
this to be part of the browser platform
right we if we could do all this
natively with regular CSS I think a lot
of us would be ok with it so the goal
here is not for us to say we can do it
better everybody should just stop
writing CSS it's a horrible language why
does anybody do it it's to say here's
where we have the most control here's
the other language that most front-end
developers know and we want you to use
to take what we're doing here and bring
it in natively to the platform and
that's it thank you very much if you
guys have any questions feel free to
grab me afterwards and I'll be glad to
answer them</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>