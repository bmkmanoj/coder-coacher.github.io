<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>TensorFlowJS: Machine Learning In JavaScript | Coder Coacher - Coaching Coders</title><meta content="TensorFlowJS: Machine Learning In JavaScript - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Coding-Tech/">Coding Tech</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>TensorFlowJS: Machine Learning In JavaScript</b></h2><h5 class="post__date">2018-04-30</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/656l4IfhM10" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">good afternoon everyone my name is Veera
you can call me Tom and today I'm going
to talk about achieve learning in our
script with tencel OTS which is another
exciting thing that was announced during
the tensorflow submit a few weeks ago
first of all let me see hands how many
of you actually JavaScript developers
okay more than half I'm happy because
otherwise I would just let's skip this
talk alright I'm a Google developers
expert in machine learning based in
Bangkok I was previously a data
scientist back at Facebook at the
headquarter I recently moved back to
Asia and joined the Google gde team all
right and I'm going through this very
quickly but if you want to catch up in
any of the detail this talk is actually
available on YouTube too
okay so a lot of you here probably
already used tensorflow I saw some hands
earlier in the talk and all of us think
we probably need to do machine learning
in Python only but that is changing and
all of you have already seen this from
Martin's talk this is actually a very
basic neural network written purely in
JavaScript it was pretty much a
prototype they built this mainly for
educational purpose because it's really
really helpful for you to understand how
machines actually learn from the data so
keep this in mind I'm gonna go through
the benefit of why we would need in
browser machine learning first of all no
drivers no installs if you ever try to
build a machine learning before you
probably have to spend like half an hour
at the very least try to understand try
to install every single thing right all
the libraries and if you're lucky
everything is compatible if not you have
to reinstall everything all over again
clean up your environment all over again
so that was not very fun so with browser
and machine learning you just turn on
your browser and everything just works
so it sounds like a magic for everyone
so that's the first benefit the second
one is interactivity just what you see
from the from the playground the tencel
playground the huge benefit of that too
is basic
you can play around with it you can
change the number of neurons you can
change activation functions you can
change the data set you can try changing
everything and kind of see how things
change after you change certain things
right so interactivity is also and other
things that you probably want in ura I
product or machine learning product the
third part is that once you get all this
up and running in web browsers it means
that you can actually open this up on
your mobile phone as well and with your
mobile phones with other smartphones
these days it comes with tons of sensors
data that you could use to enhance your
machine learning application you got GPS
data you got microphone you got
accelerometer you got gyroscope we got
camera so you can feed all these data
into your machine learning model and
kind of build cool applications out of
it and the last part which is probably
the most important thing is that data
actually stays on the client because you
can actually boot the model train the
model and make predictions everything in
your web browser imagine if your big
company is a Google Facebook buy do it
the way they get data is that they
actually track every single click every
single thing we do and they actually
dump tons of data out of your browser
sent back to their servers and lock what
you actually did on the app on the web
right so with this in browser machine
learning capability a lot of things can
actually stay on your machine and that
probably has huge benefit for privacy
all right but this tool it was built as
a one-off tool and the team kind of see
the value that if we give this
capability to everybody that we can
build machine learning using javascript
to running web browser that would be
really cool and that's the beginning of
deep learn dodgiest so d blender J's
it's actually a pretty new project too
it started just August last year and the
cool part of it was that it's GPU
accelerated via WebGL right on your web
browser so if you don't know there's a
WebGL that's directly connected to your
graphic art so if you have a fancy
graphic card on your computer it means
that your web browser can actually
leverage that
and the cool part is it allows inference
and training entirely in your web
browsers and just from August 2017 up to
now there are a lot of people building a
lot of cool applications out of deep
land of jeaious one thing here is the
star transfer you can actually do
everything based on your web browser I'm
not gonna do the demo here because we're
shutting on time
but the cool part is that imagine if you
use the traditional way of machine
learning you probably have a web server
up and running to serve your tensorflow
model but with this you can actually
download the model and everything and do
the size run for write in your web
browser
which means that instead of sending say
four or five megabytes of your photo
back to the server wait for the server
to run send back four or five megabytes
of photo and let's say okay I actually
don't like this photo I want to do this
again so it's a lot of data sending back
and forth but if you can do all this in
your web browser it means that you can
simply download the model and run
everything in your model and let's say I
actually want to do thai-style transfer
using my own photo right my selfie I
probably don't want anyone any third
party to store my selfie on that server
for a long time I'm not sure what
they're gonna do with my photos so with
this running on your web browser it
means that my photo is not stored
anywhere in the world and this is
another cool application that they build
using deep learning is this is a
generative model so basically they try
to learn from tons of funds that we have
in the world on the internet and try to
learn how bold font actually work how
italic funds actually work let me show
you this photo so that you understand a
bit more so if you do both font in a
very naive way this is how you're gonna
do it you basically just expand the font
like expand the field by 2 pixels but if
you want to do it beautifully this is
how type recover would do they just
increase the the bonus of the font on
only one side and try to keep the other
side the same
is to keep the whole thing pre so
basically they try to learn that and
this is basically a vector representing
boating action and based on that then we
can build a generative model that say we
start with this particular font and we
want to try to make it a little bolder
we want to make it more slant and you
get a new font that is quite beautiful
all right okay and how many of you have
seen this the teachable machine not a
lot actually
okay if you haven't seen this I I really
I highly recommend this I would say it's
a good way to demonstrate how much
you're learning work from the beginning
to the end
they basically you need to put in the
data train it and do the prediction
based on your web browser
it was built using deep lunges but the
new version using tensorflow jet has
already came out and this was me playing
doom how many of you here know doom you
gotta be somewhat older right okay so
given that you can do prediction
training and everything based on your
web browser you can build this kind of
cool application that I can now control
the game using my webcam right so I do
this shooting action and all of a sudden
I start shooting that barrel
gasps all right all right and that was
deep learning test everybody loved it a
lot of creative applications came out of
it and during the tensorflow submit they
decided to merge and convert it into
tensorflow de Deus with tensorflow das
like deep learn Jess you can other
models create a new model directly in
your web browser you can also import pre
trained model for inference let's say
you already heard of pre terrain models
like several times today you have mobile
net you have Nash net you have all kind
of models that you've already built it
for you and you just want to use it so
if you want to do that you can simply
import it into your web browser and use
it right away and the last part is you
can retrain some of the imported model
and Martin already talked about it if
you want to train with slightly little
data you can use pre train model retrain
it a bit and make it sort of whatever
application you want all right and this
is how the not deep learn tends to flow
TAS looks like so basically it runs on
your web browser and as I told you
earlier
it runs on WebGL and it has two levels
of API the first one is called ops API
in the real doc it actually says core
API
it basically tends to flow model tens of
our safe model it allows all the
low-level operations are the tensors or
the operations I will show it to you
shortly
and it also run in eager mode right you
already heard about eager execution mode
it basically run that way so there's no
need to to build the graph in all those
and another layer is the layers API
which is the high level API that you can
simply call DNN and those kind of stuff
and that's sort of equivalent to Karis
model you can actually import in Karis
model and I will show you show it to you
shortly okay I'll move to my first demo
this is basically just to show you the
oops this is not the first one is also
not the first one oh okay this is the
first okay all right so this is just to
show you a bunch of things that you can
do using tensorflow Jas this is a quick
tool that I built just to demonstrate to
you that okay let's say in your web
browser you might have dynamic data
right your user come in your user might
click here click there everybody has
different actions so you have dynamic
input stream coming in and the code
looks something like this if you already
use tensorflow
you should be able to understand this
code almost immediately the cool part
that I want to point out is this
chaining function I really like this you
can kind of like if you're a JavaScript
developer you would love this you can
call one function you can dot app dot
another thing and
this make my life much easier and okay I
will show you the first model I'm gonna
train using the core API if you remember
the core API is the one that used very
low level operations okay so this is it
I already got the model and the code
looks something like this
it started off by declining variables if
you use tensorflow python this should be
familiar to you then I define a function
for the model I have a cubic polynomial
here and okay i define optimizer I'm
gonna use STD in this case with a
learning rate of 0.8 and then I call
optimizer minimize and that's it and
then I just run everything just like
what you would do on Python tensorflow
but a cool part again interactivity
let's say I want to change parameter of
my model let's say I don't want to train
50 iterations let's say I just want to
train for let's say 4 iterations let's
see if it works it's kind of work but
it's not that great right let's say if I
want to train for slightly more 16 ok
it's already really good and if I go all
the way up to hundred it's almost like
overfitting this date already alright so
this just to show you that with dynamic
data coming in with dynamic model
parameters you can actually adjust all
this do all the training and do
prediction in your web browser the
second one that I'm gonna show is to
train a model using layer API which is a
higher level and if you haven't heard of
it there's a theorem called universal
approximation theorem it basically says
that a simple neural network with a
single hidden layer is sufficient to
represent any function all right and I
will show that to you this is my model
it's training training and training I'm
using 8 hidden layers now down here ok
it's gonna take a while but basically
why is this training it's just going to
show you the code it's really simple you
just call TF not sequential and because
I'm having only one single hidden layer
so I only have this
one layers dot tens and then I put this
is the number of hidden nodes that I
want I use relu as activation function
and this is my input shape and then I
combine everything into the last layer
and that's it that's a very basically
you build a model in like this five
lines of code all right with this you
get this kind of model and let's see if
it can predict better if I use more
hidden nodes and hopefully it's better
okay it's slightly better but not that
great okay we don't have much time so
I'm gonna move on to the next demo okay
all right what I showed you is how to
create a model in your web browser do
the training in web browser make
prediction in web browser next thing I'm
gonna show you is how you can import
existing models into into your web
browser so in Python you can say F model
and we provide two ways of including
saved models so intensive load you
basically can call save model builders
and then call beauty AF and that's how
you get tensorflow safe model if you're
a kiosk user you can call save weights
and then you get the files that include
all the weight and your model topology
but now that you have modern Python you
want to convert it into something that
is readable by tensorflow Jes so they
provide this package peep in pip install
you can do people installed hints of
Lotte s and then you can convert
tensorflow model or you can also convert
Kyra's model into tensorflow J's
compatible model one thing that I want
to note okay so actually in the next one
so once you have the model that's
compatible in JavaScript you can simply
load it into your JavaScript code so for
tensorflow model you would call a load
frozen model right here for kiosk you
would call load model and the difference
is that for tensorflow safe model
because it's very low-level already it
doesn't allow you to retrain the model
so you can only make predictions using a
tensile model but with Kara's model
because most of them use higher level
API you can actually retrain the model
that you imported from chaos alright and
with the model conversion code what it
does is actually it does grab
optimization for you let's say your
graph has tons of notes that not
necessary for your computation it will
get rid of them for you it also does
some weight optimization for browser
caching and currently it support 90 plus
tensorflow ops they plan to support
control flow ops very soon and currently
supports 32 plus commonly used tents of
lock chaos layers for inference training
and evaluation so right now if you take
random chaos model and try to convert it
into Java tensorflow JavaScript model it
might not work if it's not using the
common layers included here all right
now I'm gonna show you the next demo
which should be pretty straightforward
so basically I just want to show off
here this is the one line of code that
got you up and running in your web
browser you just call T f dot load model
and there you go you got mobile net up
and running so here I got random photos
and it predicts that it's a seashore or
Coast for 21% probability I'm gonna
random new photo okay I don't even know
what that is let's try something else
Internet yes okay I don't know what that
is either
okay forget the photo you can do webcam
as well I think this should work there's
a class called microphone so I would try
this and see if it works yes so it's
microphone with somewhat high
probability so basically just two line
of code to load up the model and you can
all the sudden start doing all this okay
I'm flying through all this let me close
the webcam or I would crash my browser
okay okay and with this when Google
launched this and during tensorflow
summit they actually show off this emoji
scavenger hunt so now that you can
import image recognition capability into
your web browser they built this cute
game let's see if I could make it work
so basically they would ask you to show
something that they access to look for
oh no it takes a while okay be patient
okay there you go
or should how can I find it nope I think
I saw a lens cap okay they try to make
predictions based on what is seeing
right now I spy a plunger not a puncher
not a plunger okay let's see it would
ask for something that I can find here
okay no I can't find a TVI all right for
the interest of time I'm just gonna stop
this but it's really fun and it's
actually works on your mobile phone so
you can play this on your way back home
all right and what else do I have
Oh oops okay so now that you have this
object detection capability you
basically can build this in your mobile
web or your web application very easily
this is one of the example that I came
up with this is a restaurant review app
so let's say for this particular app
it's called Wong knife from Thailand and
they basically asked user to classify
food menu storefront
inside or others right so let's say your
user you go into this restaurant
classification or classification this
restaurant review right you're looking
for food photos sometimes you get
selfies you're looking for storefronts
sometimes you get something else
so the capability that allows you to
classify image right away should be like
really good for your app and I've been
asking my friends I'm gonna give a talk
in Singapore what joke should I do in
this talk and they were like ok right
now people have kind of obsessed with
this high SES and low SES so if your
startup have sense of humor and you want
to tag photo whether it's for high SES
people a low SES people you should be
able to do this in your web browser
right now ok and the last one
Martin sort of talked about this already
the transfer learning so basically you
don't have to retrain the whole model
from scratch so what I'm going to show
here is that I'm going to load up this
mobile net but instead of using the
result from mobile net directly I'll
pull out this particular layer inside
that model and I'll use this as an input
of my new model and what it would do is
something like this so then we turn on
the webcam sorry you haven't seen my
face off quite a lot during this talk ok
I gonna start adding some training
sample it would take a while all right
so this is class a it's just gonna be my
face I'm gonna move around a bit because
when I actually do prediction my face
might not be right at the same place
ok class B let me do with my watch and
hopefully it can
I actually tried earlier before the talk
it didn't work I think they like the
lighting condition in this room somehow
ruined my model but I'm just gonna try
it again let's see the third class would
be discord
alright now that I collect the data and
again everything happening in web
browser I'm gonna start doing the
training and basically I just add one
dense layer right here I just take the
input from mobile net from one of the
layers in mobile net and try to retrain
based on that so this is my model that's
it very short and I'm just gonna train
it a bit hopefully it works
okay the boss already comes out a lot
I'm guessing it's gonna work okay okay
let's go back up okay now I'm gonna do
prediction yeah this should be class a
my face and if I show my watch it should
change to Class B yes and if I hold up
my orange card here to turn out to Class
C yes it works all right
and again Google actually make it really
fun they launched a demo which is this
pac-man game but I don't think I'm gonna
embarrass myself playing pacman with my
face in front of you so if you
interested you can go to this demo
basically they would ask you to train
like how would you do up and down left
and right and you might look a little
bit funny
in front of everyone I'm not gonna show
it to you but yes that's something that
you could do out of this and currently I
think Google has beaut turns of
experiments based on tensorflow test and
a lot of them actually come from a much
inter group they basically do a bunch of
art and music applications using AI so I
think it's a lot of fun and you can try
playing around with it and dig their
github code to see how they can actually
use this tensorflow 2's in the model and
lastly one thing that you might want to
ask why would I use tensor flow test my
tensor flow in C++ code is already
really fast so this is the benchmark
from the standard tensorflow C++ so if
you train it on the CUDA 1080 TTX that's
a pretty powerful graphic card you can
do mobile net you can run mobile net to
classify image in 2.8 milliseconds and
if you use normal laptop it'd probably
take 50
six something milliseconds but we tend
to float is it can still do really fast
if you have really good graphic cards on
your computer
imagine you recognize object bit in ten
milliseconds and that's like really
really fast and let's say I'm doing this
on my OK laptop it still run under 100
milliseconds so I would say that's still
pretty fast and allow you to do a
certain level of interactivity in your
web browser and soon you should be able
to do this for the server-side thing so
a lot of you that already JavaScript
developer you probably want to do this
in no test and they I think they already
launched the beta and you should be able
to do JavaScript to to call the T tends
to flow TPU GPU and CPU it's just
another wrapper for this language for
you it should be come out like fully
soon all right
that's a quick recap with with
tensorflow test you have ops API which
is consistent with the eager execution
API in Python that allow you to build
model train model and execute your model
in your web browser it has layers API
allow you to do high level things easily
within with something like Kara's style
model building and you can import tens
of all safe model or chaos models
directly to your web browser and that
tons of demos and examples all the stuff
I show here you should be able to find
code somewhere in the tutorial in the
document that they have and if you're
interested test that tends to float that
arc you can find everything about
tensorflow digest and that's the github
where you can find all the codes alright
and if you play around with it too much
this is what you would get from your web
browser
I got it quite frequently while I was
working on the demos so be careful all
right thank you that's it for me</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>