<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>GTAC 2015: Unified Infra and CI Integration Testing (Docker/Vagrant) | Coder Coacher - Coaching Coders</title><meta content="GTAC 2015: Unified Infra and CI Integration Testing (Docker/Vagrant) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/GoogleTechTalks/">GoogleTechTalks</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>GTAC 2015: Unified Infra and CI Integration Testing (Docker/Vagrant)</b></h2><h5 class="post__date">2015-11-26</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/KtDDGZOdrbA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">next up we have maximum talking about
unified infrastructure for dev and test
and see I integration testing hi
everyone that's for no big green right I
would like to take you a couple of years
later to the Arab and Google search was
just developed to 1996 this year I
created my first object oriented C++
program during my first degree study and
it's called share taxi this is what
simple application build of a couple of
C++ classes and executed in common line
terminal let's see how its formed
so what we have we have execute execute
executable of share taxi I am as the use
of choosing the location station and
waiting for the pick up of the car of
the car the numbers on the station is
the waiting riders passengers in the
novel in the square is the numbers
inside the passengers inside the taxi
and its continuing to continue can be
back right so as you see it's what I
need is just simple pc that fits all my
developer and Esther needs and by the
way I think it was a prototype of the
Oval a couple of years later I got my
first job and they face a new challenge
how to test y2k problem bug and this
year I first realized they need def test
environments in order to test two
thousand year problem when we switch
from two digits to four digits and our
clocks and those years we tested
everything in production actually and we
switched the computer date to the future
date and hoped everything would go
smoothly indeed everything went well but
I started to think again about testing
environments and every time when I start
a new project the first question that
I'm asking myself is how to test that
software but actually what I should ask
myself is where to test that software if
I ask us developers what is the phrases
of right development you will probably
answer me requirements design
development testing production etc etc
more experienced developers probably
will start with
testing development tdd BDD orca volts
test driven design behavior driven
development what we need is def test
environment
actually I tried a lot of solutions for
their test environments starting from
client server installation on my pc to
cloud-based solution when with one click
you can get full stock on your machine
but none of them can give me that this
is actually real product you can I can
provide you a link for that my dream is
to be able to develop on long-distance
flight I have been dreaming that dream
for a long time and I almost made it
come to true when I started to use get
instead of svn or other source controls
for example so it wasn't unforgettable
feeling when I could commit on my
machine and push it when i'm online the
same i would like to achieve with other
stuff in supersonic we developed
solutions that can help us to achieve
that but before a couple of words about
myself my name is Maksym viennese I'm
developer manager euless husband father
of the meal and I am passionate about
automation as well of course I work in
at supersonic supersonic is advertising
solution mobile solutions we are helping
developers to monetize their
applications and we are using a bunch of
technologies and languages on our
development we are using peach before
back and in front end developers
JavaScript for the front scholar for the
new products java and objective-c for
mobile devices and Ruby for for
infrastructure tasks our favorite
technologies amazon web services we are
running all our server sellers on amazon
and have complementary technologies the
we think we should choose my skill
couchbase spark for data science and
satellite Saturn we are doing deployment
in three ways we're using chef and
console but we still have product that
running webos trono old will be strong
if you familiar with testing we are
doing with xunit technology speech be
units color unit j unit etc etc we using
acceptance that we are running
acceptance tests with opulent selenium
and judgment for Java scripts we
developed our solution we are calling it
porterhouse I apologize for vegetarians
to vegetarians it's made of three main
parts vagrant vagrant we choose it
because it's works for us docker I think
it's great for testers and developers
and the Ruby they just combined two
parts of vagrant in dokur really simple
good y which is vagrant and doctor I
took it from their sides because you're
vagrant this works for us it's create
and configure a lightweight reproducible
development environments this is exactly
what we need as testers and developers
and docker is the platform for
application to distribute platform to
distribute applications and platforms
applications for developers this is
exactly what we need in supersonic each
developer can choose each oven each can
can choose operating system of his
choice windows ubuntu OS it doesn't
matter and we need to provide him the f
test environment on each platform
one of the developers front-end
developers would like to run apache
mysql memcached and selenium for testing
and another one back end developer would
like to run Kafka cassandra ladies and
proprietary supersonic scholar george of
a job anyway and this well test so the
testing this back-end would like to test
it on real mobile device so we are
providing up young daughter with USB
connection to the device let's see how
it really works what we need is simple
stocky amo the describes exactly what we
need to know on our system let's see we
have my screen we have memcached
selenium and application apache server
and we can map the database on my local
machine or on a patchy server can use
repository running on my machine and if
i'm coming to test let's see on that
side for you guys i can run the same
stack with the test so i just need some
preconditions prerequisites i can run a
bunch of tests and destroy database for
example so the same stack will work for
every developer on each platform and
with simple doctor and vagrant
on Jenkins we are doing the same stuff
so we are doing continuous integration
and we are running the same bunch of
doctors with the same test is simple
Ruby script test Ruby let's see the demo
how it works
I recorded it from my pc i'm running for
boon to but it will work for others to
will increase ok so i'm showing that
nothing growling no doctors on my
machine i'm a drink to stack called
platform this is the bench of the
residential status that we have i have
two simple file stachy amal and Tessie
on inside the same start stackin test
llamo and in order to execute my staff
what I need is a vagrant up command with
to environment variables one for my
repository and the second one for the
database that they have also in my
machine if you familiar with Dockers and
vagrant this is what you will see and in
a second what i get is i'm running dr.
pc command and they and i get for
doctors in my machine with valent up
command my scale memcached application
server and selenium grid and i can start
to work with that
so I installed application server so I
have apache running inside and they have
the website i can test it I Karen
selenium test against that on the
machine actually what is good is this
system that developers and testers can
use the same stack so if that's our find
any bug he can just bring the machines
to the developer and developer can
continue to investigate it investigate
from from the same state so this is the
web application but what about mobile
applications so let's switch to mobile
stack
I destroyed all the machine before okay
so vague and disturbing itself just
destroying all the machines and now we
are starting with the new step it's
called mobile
and we have
stuckey Allen with the back end stack
ready scoff cassandra and aki ando
current site opium dr. that expose use
be so you can run at the emulator
insight or you can use actual USB device
i run the same command vagrant up with
the doctor providers
and what we have now is new stuck on my
machine with five machines or four
machines opium Cassandra Kafka and
readys and each one execute its own
service so what I can now to do is just
to take my mobile and connected to to my
laptop and get the application inside so
now i can just with my mobile drive the
application that communicates with the
backend running called my local machine
so this way i can test back end on my
local machine and once i created all my
tests i can push it to see I tool to the
junk insulin it again so all the
verification that I am doing now I'm
doing with my local machine is ready
Cassandra and if I have proprietary jar
or something called that
and now it can destroy in the same way
destroy and all the machines in my
computer screen I can start with
something else
okay so this is what's the demo hearts
walks as we had a couple of challenges
when we started to work with the Duggars
is what to do with the database or when
you start a new project you can
definitely create tests with data
population but we started with already
existing tests and we couldn't separate
between tests and data so we decided to
put my SQL docker with initial data
inside and it's huge image of my scale
it's real mysql data that we are using
and we decided to use btrfs filesystem
what's better fess can give us is the
option incremental e to take snapshots
so each time when I start a bunch of
tests I'm taking btrfs snapshot of my
scale and I'm running the same test with
the same mysql snapshot and i can
destroy it after that we cannot do the
same stuff with the readies Kafka
Cassandra so we need to use data
population at the what we are doing
developers that are creating tests
creating the oven date inside your IDs
and Cassandra
um
porterhouse little that we developed
reminds too many of you dr. Campos
actual Decker Crocker composed is the
tool that was developed by dr. community
it's called fig in the past and it's
really the same solution that we are
providing with a couple of differences
but it's important that you will see
this solution will choose what to use in
your stacks after the same stack llamo
the same llamo to execute to bring all
your machines web volumes links you can
see it and the reason that we choose to
develop our own solution is what that we
need to run it on the windows and the
days when we evaluated fig and compose a
boot boot to dock your windows didn't
work for us and also the part of the
testing is very crucial for us and with
compose we need to add additional code
to death and our simple Ruby code is
really simple it's 200 lines of code if
you take a look and compose it's
thousands of lines so this is the reason
why we decided to go for for that
solution
actually if you like this tool you can
open source it and just you can send as
the mail and we'll consider to do that
and it's pretty brittle thanks questions
if you have thank you
why vagrant if you're already using
dagger yeah it's good question actually
it's easy for us to to manage and
orchestrate all the machines also
vagrant API is very useful and another
reason for that that we need to run
everything on iOS and we need the
windows so we build the solution that
combined vagrant docker and virtualbox
for windows and is so this is why we
choose the veteran we also like the
solutions from similar to vagrant do you
push tracker images to production how do
you version control the images and what
are some lessons your team has learned
from doing this to be honest we are not
using doctors in production and two
reasons for that the maturity of the
doctors so in my opinion we are not
ready for production for our product
many of you can use doctors in
production definitely and the second
reason why we not using doctors in
production is we are using to legacy
code and it's very difficult to bring it
to doctors and for the new code that we
have written in skul it's very simple
just to take the jar and bring it to
production so we don't see the reason
for the Dockers but but if it works for
you great why would one want to run
darker with a selenium what is a use
case these case first of all you don't
need as develop our tester to install
the selenium selenium jar and the
versions of selenium so you can get it
from the doctor if you have a doctor the
second reason for that can be it is for
us we can
bring get very easily to continuous
integration to the CI so you bring up
the docker with the selenium grid and
you can run all your tests against this
doctor you can also switch between Rome
and far folks you can use different
doctors for that and it's works for us
do you run tests on docker containers
with AWS if yes how is the performance
and scalability do run tests and docker
container yeah actually what we are
running we are running Jenkins slave we
are using Jenkins we have a lot of junk
in slaves with Auto scale on Amazon on
AWS and Dockers are running inside
Jenkins slave it's works fine for us I
didn't find any issue i hope i answered
the question toronto see ya this
commands for spending up a test
environment seemed to execute really
fast does this require a super-powered
workstation it depends on what kind of
tests you are running if you're running
unit tests or integration tests you
don't need for acceptance tests on
selenium you definitely need power
workstation in order to increase the
number of real browsers that you run if
you need 10 or 20 to 100 browsers
running simultaneously you need power of
workstations
are there any killer features and
compose that are missing in porterhouse
yeah as I mentioned are running ketone
windows and was very difficult and it
just worked for us to use our own
solution more simple this swype decided
to use it and do you use a multigrid
architecture I'm not sure that I
understand what exactly multigrid
architecture but actually what we have
we have each stock running it's all in
grid and when I think I understand what
does it mean and we are not using so we
have one grid for for each stock so one
grid running I think ten to twenty
browsers depends of the provider of the
browser so firefox or chrome and we are
not using woody built architecture but
we can easily to to do that will if we
need it and that's it thank you very
much damage</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>