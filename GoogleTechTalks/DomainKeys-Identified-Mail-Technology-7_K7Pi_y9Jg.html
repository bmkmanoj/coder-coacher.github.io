<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>DomainKeys Identified Mail Technology | Coder Coacher - Coaching Coders</title><meta content="DomainKeys Identified Mail Technology - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/GoogleTechTalks/">GoogleTechTalks</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>DomainKeys Identified Mail Technology</b></h2><h5 class="post__date">2007-12-07</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/7_K7Pi_y9Jg" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">sendmail chief science officer at
sendmail inc and someone who's very near
and dear to my heart inside joke sorry
my name all that is and I'm quite
coincidentally Eric's sisters it's not a
coincidence hi
thanks this is going to be kind of
interesting for me I haven't spoken in
front of a really seriously technical
audience and way too long so you'll
forgive me if some of these slides are
maybe just a little too marketing
because it it I did pull some of these
out of more marketing presentations so
I'll apologize in advance and that's the
last time I'll apologize so a little bit
about what we're going to talk about
today
I want to just give you an overview of
email authentication an introduction to
DCAM which is one type of email
authentication and some stuff about how
it works
one important part of it which is
currently active in active discussion
right now is sender signing practices so
I'll spend a little more time on that
what you do you know now it's the thin
akkada now what a little bit about
policy management which is kind of the
same thing but in more detail and
attacks against Deacon status
availability adoption scenario this is a
lot of material and what I'm going to
try and do is go over some of this
fairly quickly but if you're interested
in something please you know raise your
hand interrupt me whatever I'm happy to
go into things in a little more depth so
come on there you
so it turns out that the what DCAM does
the wording is extremely political
there's some folks in the standards
community that get really involved in
exactly what word you use so I try and
not say something that where they're
gonna come down on me and say no no you
got it all wrong you see ruined D Kim
forever so D Kim allows the signing of
messages so that verifiers can have
certainty of the origin of that message
okay I'm supposed to put a full-stop
there
the verifiers are generally the
recipients the signers are definitely
are generally the sender's but that's
not necessarily true
d Kim is primarily there to address
phishing because it's all about identity
and phishing starts off being pretty
much identity fraud but as D Kim becomes
more widely deployed it should start to
have a real impact against spam and I'll
tell you a little bit more about that
later the the proposed standard proposed
standard by the way is a formal term
which is wipes and caps it's just a one
step on the standards track for ITF the
base standard was ratified in May which
means it's an official RFC right now and
the SSP document is not yet ratified and
there was a meeting just yesterday I had
to update my slides this morning in fact
so you've got there hot off the press
just a couple hours old and there's a
bunch of other related drafts in
progress which I'll do a quick skim over
so the nature of the internet you know I
don't shouldn't have to tell you guys
about this at all I assume I don't
because you guys did most of this so
it's all your fault there's a huge
amount of information available so forth
what do I want to get out of this
physical location is increasingly
irrelevant so that the security
approaches that we have used in the past
like seeing somebody's photo ID doesn't
work because you have to be in the same
room borders are irrelevant which means
laws become meaningless
and you have to start thinking about
things in different ways and it was
always true that not all information is
true but it's even less true or even
more true that not all information is
true less information is true than it
was before you know you know the
standard I read it on the internet it
must be true yeah right and so it's
really all caveat emptor a really caveat
lector let the reader be where is the
proper Latin for this so what we've been
using to deal with spam and phishing and
fraud and so forth so far it's been
what's generally called content scanning
you look at the message and you try and
determine whether it's good or not
some of you may remember the big paper
called a plan for spam by Paul Graham a
couple years ago wherein he said you see
the weakness of all spam is they have to
get the message across to you and so we
can recognize the message of spam and we
will be able to eliminate spam in our
generation I think that Bill Gates also
said the same thing they were both wrong
and we are getting up to the point where
it's content scanning is really good but
we can't go a lot further with it and
it's sort of like chips right we're
getting down to the atomic level and you
just can't go further than that so you
know what do we look for one of the ones
is URL reputations well people move
around their websites literally a
website now will be up for maybe five
minutes at best and they will move it
and that's specifically to get around
URL reputation they don't have time
enough for people to recognize that URL
as being bad naive Bayesian classifiers
they legitimize the content by putting
in big blocks of other text they use
noise words they permute the things
there's all kinds of things they do and
sometimes they can do a very very good
job text analysis in general they just
switch to something else they'll switch
to you know images and PDF we've seen a
lot just starting to see some spam now
that's audio files you'll see video
clips soon enough
you know smellorama when it becomes
available don't even want to think about
that spam and of course people go well
okay you can
image analysis well the problem with an
image analysis is its tend to be on skin
color or something like that which isn't
very accurate so you know the famous
quote by oh who was it
gestured Stewart in Jacobus versus Ohio
378 u.s. 184 which more or less
summarized too I can't define
pornography but I know it when I see it
and that remains by the way the legal
test to this day so we'd like to get
into identity based filtering roughly
speaking if I know who the male's from I
can make a whole bunch of assumption so
you know I'm really likely to take mail
from my sister without bothering to scan
it to see whether it's spam or not in
particular because if it is I know where
she lives so for most people ninety to
ninety nine percent it's really for most
people closer to ninety nine percent of
their legitimate email comes from people
they already know and you know there
aren't exceptions to this help desks for
example that's not true
you know info at so forth sales at our
sales people really don't do want to get
cold calls white lists can reduce the
false positive so if you know who it's
from
you can let stuff through content scan
the rest also ninety to ninety nine
percent of the spam comes from people
they don't know now this number is
probably closer to ninety than ninety
nine percent there are I think I've
actually got this elsewhere a
disproportionate amount of my spam comes
from people seems to come from people
that I know and so somehow spammers you
know we've got social networks
they've got social networks too and
they're figuring out sort of if they can
steal somebody's address book there's a
really good chance that they've
exchanged mail both directions and you
can start to build up the social network
and figure out how to spam and defraud
people based on that so you know I don't
know why people haven't talked about
that more because it's it's really
pernicious so you'd like to do identity
filtering but the problem is with email
in the standards that were created you
know twenty twenty-five years ago
you don't really know what the identity
of the sender is because nothing's
authenticated so oops wrong button so
for this reason we're getting into
sender domain authentication notice the
use of the word domain this is not user
identity this is the domain identity so
DCAM or other authentic SDA technologies
can tell if you came from google but
can't necessarily verify who inside
google you are the principle here is
that if you can push it on to a local
administrative domain is the technical
term it is up to them to place their own
place well and if they can't do that
they should get a bad reputation because
a poorly managed site is just as bad as
a site that's explicitly evil so this is
pretty obvious I've pretty much said it
identity based filtering the concept is
identify your good mail get rid of the
most of it there are two basic
technologies which are out there today
for sender domain authentication the
first is called sort of path based SPF
and sender ID which is actually more
properly known as si DF which is backed
by Microsoft is is one of them I'll do a
quick skim over this and then the
signature based schemes such as
D Kim work in a fundamentally different
way and I'll talk in that in great more
detail of course so the address based IP
based or path based I've seen all these
words around work on they only validate
the last hop ie the most recent place
that the mail came from so if it gets
forwarded it's less useful so the idea
is that I'm a email server I get a
connection from some IP address and the
initial all I know is that IP address
okay and then later in the protocol it
says hi I'm example.com I can look up
example.com and say hey is your IP
address 10.20 about 30 40 one of the
ones that you claimed
to send mail from by using a DNS record
which is SPF or s IDF the answer that is
yes then it probably is from or at least
in theory it's from example.com and if
the answer is no well you know less if
the answer is no because it might have
been legitimate mail from example.com
that got forwarded from somebody else
etc it's very very easy for the sender
all the sender has to do is put a record
into DNS and they're done now mind you
there's a lot of things about I know one
large indeed international bank one of
the biggest that decided they were going
to do s ID and first had to figure out
who's legitimately sent on their behalf
it took them six months of people of a
team of people working full time to
figure that out because they had
outsourced so much and they were so
distributed that it was a real problem
so I say this is easy for the sender
well that's after you've done the the
Scot work it does break message
forwarding the signature or cryptography
based systems are just what they say you
know be I get mail from example.com I I
then using DNS go to or excuse me I get
mail that claims to be from example.com
I go to the real example.com and say
what's your public key I've then got it
signature that's in a header field and
the message and I can verify that that
it was signed by them what that really
means of course is it verifies that it
was signed by somebody who had the
private key and so you've got to keep
that stuff secret like any asymmetric
cryptography so domain keys was one that
Yahoo did early on and D Kim pretty much
started from DK as a base and built on
that putting in various operational
experience that we'd learned
it's very secure and it does survive
forwarding but it's more expensive
computation although not
a lot more these days we don't have to
worry too much about cryptography
overhead and it is susceptible to even
innocuous message modification so for
example if you send something through a
mailing list and it puts unsubscribe
information at the bottom of the message
which a lot of them do it has now broken
that signature so that's that's both a
feature and a bug depending on where
you're sitting at the moment by the way
I should say for the path based stuff
folks like you are breaking this okay
increasingly for a lot of domains
they're going to be outsourcing that to
someplace that has this huge pool of IP
addresses that's shared among a huge
number of domains and so if I get
something from a small company I see an
IP address that just said yes it came
out of that huge cloud and that's so as
time goes on and this scenario becomes
more common this will become less and
less useful which is one of the reasons
why I think signature-based is really
important so Dee Kim so again I will
forgive me if this is over simple if you
want me to go faster just go like that
so it allows the signing of messages I
pretty much said that so that verifiers
ie typically receivers can have
certainty of their origin it signs the
message or sign messages from legitimate
desired senders can have guarantee of
delivery so in fact if I get something
and I see it's from somebody and I know
I want them that message even if it's
you know an advertiser but I want their
advertisements it will get through okay
if you've implemented it right
eventually when you have a lot of this
stuff signed you can start to throttle
back unsigned messages you can't do that
immediately because we're going to start
off we are starting off in a world where
most messages are unsigned it's
primarily yes
yes the question is about the cousin
domain problem and I've got a whole
slide on attacks against t chem and
that's that's one of the big ones and
yes I do have some answer to that
although maybe not what you want to hear
okay it is primarily designed to address
phishing but you can actually go more as
it becomes more signed when more and
more messages greater percentage of
messages legitimate messages are signed
than unsigned messages look more and
more suspicious at that point you can
start to use this for other things so
this is one of those things that has a
strong network effect is essentially
what it means it's based on you know
nice simple we did not decide we were
going to go invent a new cryptography
scheme wouldn't believe how many people
think that they can build a better
algorithm and this team of
mathematicians can we just use open SSL
it is intended to be industry-wide
internet scale published standard raw
raw so forth I actually can't take this
off I have
DCAM started with a group called est G I
have an est T G t-shirt the email
signing technical group which is a bunch
of vendors who privately got together in
a room and said we realize that spam and
phishing is killing our industry we have
to do something about it and by the way
they were all technical people and they
did not tell their management they were
doing this because they knew if they did
management would step in and say we want
to own it and the group of companies
including vicious competitors in the
outside world got together in this room
and said none of us can own it because
of any of us own it it won't work and so
it was actually one of the greatest
experiences of cooperation inside the
industry I've seen in a long a long time
so goals of D Kim the technology should
be available to everyone without
cost there's a lot of measures of cost
here but in particular it means there
can't be patents against the standards
it can't be proprietary code you can't
have to buy in for you know some online
service in order to use it etc it's
really genuinely got to be free no new
internet services
PK eyes have been in play for what
thirty years now and and someday in the
next thirty years maybe they'll get one
that the industry can agree on I don't
want to wait that long no trusted third
parties required so that's pretty much a
code saying I don't want people to have
to go to Verisign to buy a cert in order
to use this okay it's fair assigns a
trusted well it's a third party which a
lot of people seem to trust no client
user agent upgrades required because
there's just too many userupp core user
agents out there getting to all of the
servers the SMTP clients and servers out
there will be hard getting to
everybody's laptop who haven't upgraded
their system since Windows 95 is
effectively impossible and and we just
said let's go with reality here which
doesn't mean that user agents can't make
use of this it's just that it's not
required to get some useful
functionality out of it minimal changes
for naive end-users things like send
securely buttons and user agents have
not worked even though they've been
widely available for a long time users
don't understand them they don't want to
think about it it's got to be as
invisible as possible also if they get a
message one of the big discussions was
oh use s/mime well if you don't have an
S my malware reader then suddenly the
user starts getting stuff that they
don't understand in their mail and my
mother will call me because I'm her
support and that's not a support call I
want to take gee mom I'm sorry about
that I did it but it needs to validate
the message itself not just the path
that was because of the the problem I
explained earlier it needed to allow
sender delegation ie you need to be able
to outsource in the commercial world
outsourcing is incredibly common and so
this thing has to
work with that somehow and there's at
least two ways to do that and that
requires limited user keys so for
example I can give a private key to a
marketing company so that they can sign
as me but I only want them to be able to
sign as a particular user at my domain
they can't sign as the CEO and it needs
to be future proof that is to say
extensible and so forth we we already in
the process of developing this we were
using sha-1 and sha-1 got deprecated in
favor of sha-256 because sha-1 turned
out to be weaker than we had thought and
I pretty much guarantee you sha-256
will prove to be weaker than we think
now and so we have to be able to think
about shaw 409 6 or whatever it's going
to be so what DCAM does it does provide
gateway to gateway authentication that
is to say from the edge of the sender's
administrative boundary their outgoing
SMTP client technically client think of
people think of it as a server to the
recipients or I should say verifiers
incoming SMTP that's basically the
boundary if it goes through other hops
in between that's fine we don't care
about that whereas path based do care
about that sort of thing on the other
hand it's not and and it's not you know
my user agent sitting on my desktop to
your user agent sitting on your desktop
and there are weaknesses with that it
allows signers to assert responsibility
whatever that means for a message that's
another one of those words that's
getting heavily debated right now
signing a message should indicate that
you're willing to be judged on the basis
of that message in other words don't
sign crud so a good implementation will
say particularly if you've got it a
place that's hosting many domains you
don't want to sign for any domain you
just want to sign for the ones that
where you audited them for example and
you know that they're gonna do a good
job allow delegation of signing keys to
third parties is the outsourcing thing
sign transparently - nandi kim aware
readers this is the mother support
problem
it's also an issue that it has to go
through SMTP servers that don't know
about deacon without getting trashed so
an smtp extension was an automatic
non-starter because of this and actually
that's the other point so okay but
there's a whole bunch of stuff that DCAM
doesn't do it doesn't tell you whether
you want to read a message okay it just
says where it came from but you know
spammers can sign their mail fisher's
can sign their mail it doesn't do per
user authentication we have s/mime and
PGP for that that's largely a matter of
key management yes but the way the key
distribution is done in DNS right now it
doesn't scale to per user kind of things
yahoo could which has i think they told
me they've got fifty thousand domains
hosted at yahoo fifty thousand is within
reason ten million or however many users
they have is not let's just say dns
would come to its knees really quickly
with that it doesn't do encryption you
can use TLS for hop two hop encryption
but encryption was just not part of what
we were trying to do here it doesn't
solve the cousin domain problem per the
question earlier so you know look like
domains such as ebay billing comm that
just happens to be one of the early
famous ones and it doesn't do semantic
analysis of the header so in particular
the real name and the email address
might not match you can get something
says from bank of example and then in
brackets it says evil at fishers comm
and most user agents are only going to
display bank of example and they're not
going to display the rest of it and i
will talk about that later so let's look
a little bit at the technology overview
we do use a header field called dekum
signature it after a lot of debate we
decided to not tie the the signing
identity to some specific other field in
the header it's just contained in there
and the verifier gets to decide whether
they want to believe that or not that's
we knew that was contentious and it's
really starting to
get the fan right about now because it's
all about SSP the public key is stored
in DNS in a separate sub domain called
underscore domain key the underscore
guarantees it won't conflict with any
existing names we have set it up so that
in the future of other key distribution
mechanisms come along we can extend it
there but but we don't right now and key
pairs you create locally you don't have
to have certificates you don't have to
have a signer for this it's just a
simple key pair of public and a private
key ergo no third parties the namespace
can be divided up using something called
selectors essentially this allows any
domain to have multiple keys they can
you know delegate some of them off to
other people they can rotate them over
time because keys
you know keys rot with time as is
unfortunately not as well known as it
should be just like passwords and if you
find an unsigned message or a message
that's signed by somebody you don't
necessarily trust you can do a sender
signing practices lookup which I will
talk about more so let's get into the
dirt here or meet sorry I mean this is
an example of dkm header which is
partially contrived in particular these
binary fields here are really longer in
real life than this but it had to fit on
a slide so it's just a series of things
called tags they are you know some some
key word most of which are single
character just to keep them short a
equal sign and then a value the a is the
algorithm that you use for signing so in
this case it's using RSA encrypt or
signing algorithm with sha-256 hashing
query mechanism is using DNS looking for
a text record in theory we can extend
this to another record type in the
future but there are large companies
some of which are you know state north
of here who say they can't do that and
so
we kind of had to go with the flow
they're the domain that actually signed
this is example.com then there's this
thing called a signing identity which is
optional and it gives more information
on how you sign things so for example
you can sign with subdomains and so
forth this turns out to have maybe not
been a good design choice because it's
causing lots and lots of problems right
now
the selector name is in this case June
2005 dot Eng it can be pretty much
anything arbitrary as long as it's a
legal part of a sub domain name because
because messages do get slightly
modified during transmission like
sometimes MTA's will add blank lines at
the end or you know make other small
perturbations like that some of them are
make really major perturbations most of
them make small ones we've got a
canonicalization algorithm and there are
two common two canonicalization
algorithms called simple which does
almost nothing and relaxed which is a
little more willing to allow changes in
the message and this is for the header
and the body of the message as indicated
you don't want to sign the entire header
because of course headers do get
modified regularly as messages
transmitted you know fields get added
and so forth and so what this is saying
is the signer signed the from header
field the to field the subject field in
the date field and those are the only
ones you use in the signing calculation
actually I should put this in the other
order BH is the hash of the body of the
message and then B is the hash of the
header including the BH tag so you
basically hash the hash and the DNS
query is made in this case to the name
of the selector June 2005 dot ng
underscore domain key which is a
constant example.com which comes from
the D equals so the recipient of course
now needs to take this thing and get the
public key associated with with
example.com and that's going to
come back with something looks kind of
like this in this case my selector name
is an arbitrary s1 to 8/5 it's a text
record it's got a version field on it
the that believe it or not was
controversial right there
it's an RSA key this just says you're in
testing mode and this long base64
encoded not quite base64 but real close
value is in fact the public key and it's
stored as s12 $85 score domain key not
example.com okay now that you have this
what can you do with it well boy that's
not very exciting is it but actually
this is useful you've got a message does
it have a verifiable signature no you do
exactly what you do right now I just put
it up his content scanning but you can
use that a shorthand for whatever it is
you do right now okay if it is a it's
signed and verifiable is that signature
from a known friend if the answer is no
you do exactly what you do right now
otherwise you deliver the message so not
not exactly rocket science here but it
is useful because you hope that a huge
number of your huge percentage of your
legitimate wanted mail will go down that
left-hand side okay but we do want to do
better than that and that's what sender
signing practices are all about so we
have to deal allow unsigned messages to
be legitimate for now but there are
places like banks that really want to
sign all of their messages really soon
yes
yes damn they caught me it's trying to
wave my arms known friends can be for
example domains that you just want to
trust if you're a business you probably
want to trust your business partners
domains yeah you don't particularly care
who inside that there are existing today
white lists of well behaved domain names
there's more white or black lists of
poorly behaved domains and IP addresses
the other thing is that there's
something I'll get to called reputation
and so you can build reputation so even
if you don't actually know someone then
you can find out whether that domain has
a history of sending out good mail or
bad mail so that's it's not quite as arm
wavy answer to that so banks want to
start signing everything immediately and
asking the verifiers to say if you get
something from us that's unsigned it's
not from us something that seems to be
from us so you just ask the sender do
you sign everything or not so who's the
sender what we're doing is we're using
the the from field even that's being
debated right now somebody just came up
with a kind of scathing attack against
SSP just day before yesterday where he
talks about that how do you ask we're
just gonna use DNS we're using DNS for
the keys what information do you get ah
that's the rub and you'll see what the
current definition is but that's
changing really fast so the latest SSP
proposal looks for something called
underscore SSP which is still an
underscore domain key it will look up
one domain level so that you don't have
to actually they may have pulled that
out there's a big debate about whether
you want to walk up the tree or not but
I think that we decided to go up one
level only
and that's to deal with people who try
and fake subdomains and I'll show you
more about the practices later so this
is our big project right now the SSP
record is actually pretty simple it just
says in this case the policy or
practices rather is unknown this can be
unknown ie I sign I might sign some of
my mail but I don't sign all of my mail
it can be all which says I sign all of
my mail and strict which says I sign all
of my mail and I want you to be you know
please be really strict about this and
don't allow things like third-party
signatures there's a handling field that
just got added and may just get taken
out which essentially says if you it
doesn't match do I want you to just drop
the message on the floor or do I want
you to try and process it some other way
like doing content scanning and this the
T equals s says in this case this does
not apply to subdomains so don't walk up
the tree and that's just stored in the
domain key domain so yes
yeah so for example yes what that means
is if you got legitimate domains you
have to in fact put it put records at
every level in your tree but you don't
have to put them in for individual hosts
yeah and that's the whole point so in
fact if you've got you know if all
you've got is www dot something and SMTP
dot something and so forth then you only
have to put it at the example.com level
but if you've got you know Eng dot
whatever you do have to put one at the
Eng level and that can deal with WWE ng
example com so here's the algorithm now
this left-hand column looks pretty
ordinary but the now you say does the
sender sign everything which you find
out just by asking them and if they sign
everything and they want you to be
strict about it and and you are feeling
pissy that day you can just reject the
mail outright so that kind of adds that
new piece in and like I said the
financial institutions and PayPal's and
eBay's and whatnot really really really
want this but there is that question
which jumped on prematurely and so we
have to deal with the next step which is
not in scope for Dee Kim but is deikun's
and enabling technologies to deal with
reputation and accreditation now
authentication of course I said this the
Fisher's can authenticate as themselves
there's no problem with that it's free
to everyone including the bad guys so
what you want to do is say all right now
that I know it's from them do I want to
accept this mail and that's usually
generically called reputation
accreditation is a form of reputation on
some laya level accreditation uses a
trusted third party like habeas does
this where they'll go in audit you and
then give you a habeas stamp of approval
put you on their whitelist reputation on
the other hand looks at what you have
sent in the past and usually the
accreditation vendors also monitor you
and if you turn bad they pull your
accreditation
in the short run this can be a slow
changing list of the big sender so for
example you can get the list of
accredited financial institutions in the
US and you can put them in on the
assumption that banks probably aren't
spammers probably big brand names so
forth but in the long run we absolutely
have to have more dynamic lists there's
just no doubt about this it'll probably
be some kind of collaborative effort
based on feedback and whatnot we've got
Whipple's Razer for example which is it
like that but it doesn't do domain
reputation actually does message
reputation and they're actually some
ISPs where I've said would you
contribute your data to the world and
they haven't said no so that's actually
a good sign I'm rather to my surprise
now one thing to know is that something
like you know 2000 domains get
registered every day and most of those
are registered by bad guys but some of
them are registered by good guys and we
don't want to build a net where no one
no new legitimate player can get in
because it's just assumed you're evil so
we have to be you know when you come in
with an old reputation we have to make
sure that that can be used so a little
bit about what makes a good reputation
system it's pretty much the obvious
stuff it needs to be up-to-date data
which is hard and it needs to be pretty
complete which is hard you need to have
more subtlety than just good bad because
you're going to be combining a lot of
information here you know ideally you'd
be able to federate with other
reputation systems because everyone's
it's like you know the blind men and the
elephant you're all getting different
views of this one thing and of course
you need meta reputation does the
reputation provider have a good
reputation because of course the
spammers are going to set up their own
reputation service where they say oh
yeah he's great take all his mail so
this ice chart here is kind of a sample
of what you do in context so I'm just
going to go through this pretty quickly
the stuff in blue here is the
authentication and reputation so you
know first thing you probably do is look
IP rep a lot of people do this and you
reject it if it's on a blacklist this is
just DNS BLS you might want it for
example check s ID F first it's really
cheap to do if it verifies you can
probably continue on through and not do
the dkm check so this by the way there's
people are going to argue about this and
you know knives will be deployed and so
forth so this is just my example of
something that might happen you might
then check D Kim if it's not verified
with either s ID f or D Kim then you do
the standard stuff you spam scan and and
so forth and by the way always virus
scan dkm should never reputation should
never stop virus scanning if you do get
some kind of authentication you check
the whitelist and reputation if it's
known good you might want to add a
little gold star to it to pass
downstream for further processing
otherwise you might someday if it's
known bad you might reject it otherwise
you go through the standard thing that
was very fast and I apologize but I'm
running a little late so what do I do
with all that information the trivial
cases and just say accept reject a
message I accept it or I throw it away
and nothing else and but that's really
not good enough at a minimum you need
some kind of one-dimensional scoring so
you might say you know a neutral
reputation gets heavy filtering a really
negative reputation just gets rejected
outright but in between is quarantined
do light filtering if you are pretty
good but not great and just accept it if
you're really good it's a policy
management there's going to be a lot of
policy comes in not just about
reputation and and authentication you're
going to have traffic information proof
of work status the Preferences of the
final recipient etc and there are places
that are going to do this hard coded
there are places that are going to have
a whole policy language spam assassin
has kind of a language if you can call
it that but it's just for
one-dimensional scoring
you should probably be doing this on
outgoing as well as incoming mail
because you know I was at one company
where we discovered we had a salesman
who was running a cocaine business using
our email not good this is there's going
to be a lot of innovation going on here
so in the future the algorithm is going
to look more like this you're gonna take
you know DKMS PFS IDF traffic flow
domain reputation IP reputation user
preferences the phase of the moon etc
put them into this great big black box
and out the bottom is going to pop a
whole bunch of possible outcomes
including accepting it quarantine it
rejecting it slicing it dicing it so
attacks against D Kim well the first one
is of course you just include a false
signature you're a Fisher you you say
I'm from you know Bank of example and
you but you sign as as evil calm the fix
is that verifier shouldn't be stupid if
they can be tricked by this which by the
way some will already have then they
deserve what they get
you can there isn't an L equal flag
which will say I only want to verify
this many bytes of the body that was
contentious I don't believe it's a good
idea precisely because it opens up this
attack but if you can get a body that is
legitimately signed but uses L equal
then you can and you can steal that then
you can add stuff to the end of it and
in particularly if it's HTML you can
actually have it on the screen overwrite
the stuff that's already there so it
looks like a legitimate message but the
end user sees the evil message so the
fix is don't use L you can include a
real signature from a boat's domain Sun
affords the from field if the if the
sender or recipient rather just says oh
it's signed from anyone this is really
very close to the first one then you're
kind of Sol so you really have to kind
of correlate what's signed it to what
the user is going to see and so forth
this is the you've got a real signature
from a domain that is not in fact
associated with who the it appears to be
so you know accounts that secure
example.com reputation should help with
that okay so if you will example.com
will have a good rep but but secure
example.com will have a null or bad rep
and so you have to make assumptions on
that by the way semantic analysis of
this domain name which some people is
proposed is probably not a productive
approach and another one is rotating
domains quickly to avoid the bad
reputation and about the best thing you
can do is say if you've got no
reputation at all then it probably is
suspicious but not fatal and the
verifiers the reputation services should
share data as quickly as possible it's
got to be very very timely but we are
talking in this case these days five
minutes
windows sometimes three hours but
sometimes as little as five minutes so
there's a bunch of RFC's out now that
you can go read about the the base 148
71 is the critical one there's a bunch
of drafts that are being discussed now I
really really want people to encourage
people to go read these things and
comment on the list we don't have enough
input coming in and so there's some
people who are able to unduly influence
the group yes
users not the trusty milking Bank
the users
yeah the it's true that banks right now
can't really use email very much
precisely because there have the
phishing problem and the best the best
solution so far has been don't believe
anything that appears to come from your
bank they would really like to change
that they the quick communication with
companies or with customers would be
very valuable lowering costs all kinds
of stuff they really want to do this
they're pouring you know huge amounts of
money into trying to fix this problem so
that they can do that so that's true
short-term but I don't believe it'll be
true long-term they are trying to do
things like this they're trying to come
up with other ways to secure both their
websites and their mail you know we
should probably talk about that
afterwards because you know it's mostly
grab bag of tricks yes that's the meta
reputation problem that I talked about
there will have to be some kind of
reputation of reputation servers and how
do we do it with DNS Biel's today how do
you know which dns feels to trust turns
out I saw it well maybe it was a male
conference which technically I'm not
allowed to talk about but somebody did a
survey of DNS BLS and found that a few
of them were very good but the vast
majority of them were mediocre and some
of them were worse than tossing a coin
so they were just incredibly bad in
there the quality of their data we do
that today by some social process that
says we know which reputation servers
are good and there'll be a small enough
number of them that that can work we're
talking tens or hundreds not tens of
thousands yeah like we'll just have
Verisign to it let's see these are the
drafts on the table right now there are
a bunch of implementations we've got an
open source implementation all ten has
one
windows and go out and get that there
are the IETF is working on this the big
controversies around SSP does it go too
far does it go far enough what does
identity mean anyway anyway you mama is
kind of where that conversations tend to
end up and it hasn't been all that
productive so please participate in this
we've got people making sweeping claims
with no data and they just figure if
they say it loud enough people will
believe them and we'd really like to
have some data I'm gonna skip this next
slide because it's not really relevant
adoption scenario now this is just kind
of how you might expect that DCAM will
actually come in email people are tend
to be pretty conservative but you're
we're already seeing large targets that
are doing some kind of signing you guys
sign actually although I don't know that
you're the big target
Bank of America signs eBay is signing a
belief
I think PayPal is signing now and then
some of the large receivers will start
verifying it I don't know if you guys
are verifying signatures at this point
for incoming mail I do know that Yahoo
is verifying signatures incoming and
using it and and some they're getting
more and more draconian about it so
sorry Oh guess somebody in the next room
the large receivers are gonna start
pressuring other large senders to sign
this is already happening yahoo has gone
to some large senders and said starting
next year sometime if you don't sign
your mail we are going to start
throttling it it'll still get through
but it's gonna back up on your servers
we're going to severely limit how much
you can send in a given unit of time at
least that's my understanding obviously
I don't work at Yahoo percentage of good
signed messages should increase at that
point and then the unsigned ones start
to look rare
so the the basic stuff is is out there
there are implementations there was an
interoperability session in Dallas a few
weeks ago which showed very very good
interoperability between implementations
it's usable in its current state even
though there's more to do we the world
is still evolving and there's definitely
a lot of stuff going on but we have to
do that trying to put our foot in the
really big mistakes but we're going to
make some mistakes it's inevitable you
have to or you don't move and reputation
servers are the next big thing that we
have to worry about so sorry that ran on
a little long I've got one minute and 30
seconds for questions yes we we've not
talked we've not talked about merging
s/mime and DCAM for example or PGP
whatever because they work at a
different level so fundamentally it's a
layering issue you don't want to do TCP
stuff at the IP level so I don't think
that will happen there will be other
symbiosis that comes along however I can
see TLS search checking TLS certs at the
hop two hop level merged in with dkm
gateway to Gateway level things because
often those two things are the same
thing and there's kind of compatible
data they're also both about domains as
opposed to end-users which the
end-to-end stuff is but and I'm sure
there are new technologies which none of
us in this room have even heard of or at
least I haven't that will come along and
and fit in there as well there's already
some proposals to extend dekum to add
some other information for example
DNS SEC will it be real when we started
this thing people said oh but DNS isn't
secure and we said well yes that's true
but on the other hand if you can crack
DNS which of course you can D Kim's the
worst the least of your problems okay so
the final decision was we'll do this
knowing that we're building on something
that's you know kind of shaky quicksand
and whatnot in the hopes that we'll push
people over the edge and get them to go
oh wait a minute maybe we actually need
to do this will people do it yes they
will after a major event that is
disastrous that makes the front line of
every newspaper in the US and I hate to
be so cynical but that's what motivates
people to do security stuff and moats
that motivates them for about three
months and then it goes away we've seen
that over and over and over again people
say oh yes security is very important
here's your budget it's zero dollars
until such time as they're in front page
of the paper and then they go oh did we
say zero we meant to put a whole bunch
more zeroes in a five in front of it and
then they yank it later I'm not bitter
any other questions okay
um thank you I'm happy to hang around
for questions afterwards for those of
you too shy to speak up in public</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>