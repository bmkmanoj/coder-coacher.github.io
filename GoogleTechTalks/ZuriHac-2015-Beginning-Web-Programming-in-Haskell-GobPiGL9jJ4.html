<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>ZuriHac 2015 - Beginning Web Programming in Haskell | Coder Coacher - Coaching Coders</title><meta content="ZuriHac 2015 - Beginning Web Programming in Haskell - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/GoogleTechTalks/">GoogleTechTalks</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>ZuriHac 2015 - Beginning Web Programming in Haskell</b></h2><h5 class="post__date">2015-07-27</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/GobPiGL9jJ4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">okay so beginning my program in high
school my background before coming into
high school was a lot of web programming
stuff mainly using Perl and well it's
not a great language program it's nice
to kind of scripting stuff but when
you've got a boomerang services you
really want a bit more
guaranteed so I was learning all the
time and I'm starting to see these
lovely static guarantees from the type
system how if the type check to
generally would do the right thing and
it would work
so this is this is lovely in this pure
sense but my beloved a job is to do web
programming so how can I use Haskell to
do web programming and unfortunately it
time that was really not a very
straightforward task there's a lot of
stuff that I felt that you have to know
before you could even stuff in well I
thought were really basic things so just
to give you an overview of the kind of
state-of-the-art at the moment a school
is definitely a language that is ready
for web programming that's what we've
got web many different types of web
frameworks snap Scottie hack stack ISA
and they all offer different
functionality so you said it's very much
batteries included and very much like
Ruby on Rails where things like snap a
make it little bear bangles and then
we've also got some domain-specific
languages or the languages that we use
on the web lays and lucid there to
generate HTML documents
je macros is Haskell DSL for generated
JavaScript and play in generate CSS
there's relational database instructions
such as opal a and relational record
system which will give a nice Haskell
syntax for in breaking with relational
databases and there's also support for
non SQL databases like
EDX which is for talking to reader
service or acid state if you just want
an in-memory database and of course
support serialization formats so what
all the libraries are there this makes
it extremely daunting there's a lot of
choice and if you don't really know
which of these libraries you want to
pick to get going it's difficult to get
started so today I'm going to walk you
through building an application oh yeah
yeah there's a link to that on the slide
for online so today we're going to walk
through building an application so I'll
make some choices of the libraries for
us and then we'll see how we can use
these libraries to build a really simple
basic level of attachment and the
application we're going to build is
something that allows participants of
zero hack to share the work they're
doing and also people that during hack
can have an overview of who's working on
what
so the features areas people should be
able to submit the projects that they're
working on with a basic description but
also mention who the authors are and
then people can view a list of all of
these submitted projects and our stacks
going to use Spock as the underlying web
framework we're going to use lucid to
build the HTML documents and we're gonna
use Petra's simple to interact with
photographs a place and I'm going to
assume basic web programming experience
know in high school but hopefully some
people here might have already done
stuff in Python or Ruby or maybe pull
like me and then of course ask questions
at any time so if you get stuck on some
of the code we can bring up the HCI and
types and try and work for it and if you
do want to follow along maybe that's not
to do it during the talk but you did
want to get set up that's the general
approach let's just set up a directory
change it to that and then initialize of
peepal sandbox there and if you can
propel install spot post Kristin will
loose it with and all of the code is
available on dark so I'm going to put it
on github later as well so before we
don't pay enough for him to be nice to
kind of summarize pop in a slide to fill
up a picture of Spock if you will sorry
it's the only terrible joke that's going
to be this like like it's like Spock
consists of a couple of things we have a
basic HTTP server to set up applications
the server is based on kind of
underlying standard in Haskell why we've
also got a routing framework which will
allow us to define HTTP paths along with
the verbs
root those down into actual actions that
need to be executed wherever that path
is written and then we have a
domain-specific language for working
with HTTP requests and delivering
responses so in the CSO we can read
information about the HTTP requests such
as the headers request body and soul
with for marquetry i/o and interactive
databases and then we can finally
deliver a response at names like and I
find Spock a really nice framework when
we're learning how to do web programming
in Haskell because it's it's somewhat
batteries included but also not
particularly opinionated on how you put
things together so it has built-in
support for sessions for managing an
application state through the lifetime
of the server but also database
connection and Spock consists of two
main parts that you're going to be
working with smoke applications and
these are separated into two different
moments and the separation here is
because you can clearly conceptually do
two different things that you build web
applications the first thing you need to
do is to specify the routing and the
overall shape of the application and
then the second thing is working in
those individual requests and responses
which is captured here by the two
different - we have to spot em Mona
which we're going to use the structure
the application and then a spot action
Mona which is what allows us to work
with patients so I think it's time to
just jump in and start looking some
codes and we'll start with the basic
kind of hello world of web programming
so the first thing we're going to do is
define the action that runs to do hello
whoa and for that we're going to define
the spot action in which is called hello
Spock and then the body of the action we
simply emit a HTML string so that's a
string there is is in quotes it's a
literal HTML string and I've got some
HTML in there to add emphasis and then
the type of this we can see that spock
action is maybe might look a little kind
of scary though five variables but
essentially spock actions can be
parameterised over database connections
a session type and your
in this case either will lower cases
that flight variables and massively
means that we don't care about the dota
type all the session or the same type
because this doesn't work of the day
face at all it just in its a single
piece of patient so the next thing we
need to do is to be able to route this
action so people basically visit a web
page and see our hello spot example so
to do that we work we said this spot
ailment and this is a basic way that you
introduce routes first of all we've got
the HTTP verb there which is just going
to be a guest and then the string is the
HD HTTP path that people will branch to
and then finally we specify the action
that will be executed whenever people do
end up on that action and the last thing
we need to do is actually turn this into
an executable so server that we can run
and we do have to do a little bit of
work here we need to specify what
sessions are how to mix that they face
and what the application state is and
finally a port but for our example this
is all kind of not necessarily important
so I'm just gonna kind of substitute
into some dummy values so don't worry
about these kind of last three functions
they're just there it's a necessary evil
I suppose to allow us to run the
application but the really interesting
step is right at the top there so we use
run spot we specified we're gonna run
for 8,000 and then we pass our app in
there to the spot function and run spot
lender is going to give us a executable
HTTP server that will work with requests
and responses they can jump over to my
terminal now and I think I've got that
yep so I can then just run GHC make on
that I'm not using a cabal project for
definitely could certainly you one to
two minutes easy enough to just ugh see
and make for this that's going to give
me a main executable which I can run and
that's no ronan 14,000 of course if i
now visit localhost imported version you
see exactly what the most
so in only a couple of lines of code we
were able to start getting some web
programming done which is I think it's
quite exciting
so the next thing you want to do is
start looking at kind of tidying this
own because so far we've been serving
the HD HTML just the strength and that's
pretty horrific we don't really do
things like that in Haskell ideally we
want to stay working in Haskell as much
as possible and avoid working with
literal strength and the reason we do
this is go quite a few reasons first of
all syntax errors can be determined at
compile time robbing at runtime if we
have a malformed HTML document it simply
won't compile because there will be some
types errors we could also encode what
it means to be well formed in the type
so we can actually start to not only
make sure that the syntax is correct but
that it semantically makes sense and
finally we can also use Haskell as a
kind of macro language to do templating
and use it as a means of abstraction so
ordinary Haskell functions can now be
used to generate HTML documents and we
can use loops and things like that and
there are many of yourselves for doing
HTML programming but I'm gonna look at
one of the newest one lucid which I also
think is probably one of the simpler
approaches so at least if we build HTML
trees using do notation so hopefully you
can already see that the kind of shape
of these functions looks a lot like HTML
if you'll family with writing HTML by
hand and lucid explores functions for
all of the html5 elements and if suffix
ism wouldn't underscore that just
prevent as clashes with standard Haskell
functions that will be in scope by
default and to nest elements and nests
we simply nest do blocks so here we can
see that we've got a HTML element at the
top and then we nest inside that a
header and a body element as well
so that's me sorry yeah yeah so we can
protects the elusive documents by using
a GHz extension called overloaded
strings and this simply means that their
strings can represent fragments of
motion so here I'm supplying a string to
the title element and that's simply
going to separate strain the contents of
the table element HTML - hello thank you
do the same with the h1 meter and
finally to supply attributes to these
HTML elements we simply display a list
of basically pairs of the attributes and
their values
so here I've got a link down here it's
an a tag and I specify the hatre
attribute is going to be hassled or or
and the contents of the a tag is the
yeah so there is no kind of knowledge of
what it means to satisfy that HTML
schema so you can and you can also do
things such as create tables that have
no loose it does require you to have a
little bit of care instruction your
documents but I think it's quite a nice
kind of trade-off a8 can have one or two
of them so lucid has a kind of
overloading structure there so i with
the P tag we could put attributes and
every wanted but we can also leave man
and finally as I said we can now start
to use Haskell as a macro language to
start extracting some commonality away
so in the first case here with page
template I'm defining a function that
takes some HTML and then it returns more
HTML and this is a kind of overall page
template so I specify the HTML tag
I set the title at the page but for the
body of the page I use the argument that
was supplied to this function
so that's let me have straight out what
it means to be a general HTML page with
the HTML tag it started so I can make
kind of convenient functions here like
link generally when we make links you
just have a tracklist contents so rather
than wall of the same I can simply add
track this kind of common pattern by
taking a URL and action and just
applying that to a so we can rewrite our
hello to stop HTML example thereby using
what we've just built so using the page
template and explode the body of this
it's going to be what we had before and
also we can use our lead construction
now to be generous things so I think I
got some code there like
so now again we've got a slightly richer
HTML documents generated entirely
pellucid and we've got the link for that
so those there's one last thing that
I've actually get loose' to admit this
free spot so Spock only knows how to
send text strings generally down the
wire the HTML function will set the
content type hello but it still only
expects text so to interact between
Spock and lucid we need to render the
lucid data as text and I've generated a
little help of lucid which takes the
HTML fragment and just simply renders
that straight down using the HTML
function from spot feel so rendering the
lucid data as text I think you so
probably can you loose it by default
it's probably I think Shakespeare is
maybe they use which is they do go
further than rather having so what we
see here is HTML data is just Haskell
functions of us right whereas the East
approaches to use was he quoted some
template has no mark which we will see a
little bit of later then my personal
preference is to work inside so seen
static pages but obviously we need to
introduce some interactivity into our
application so we're going to connect to
a Postgres database and the first thing
that we need to do there is paint it to
our database so there's a library called
petrol simple which I can give you a
very simple interface to util postcode
servers and all we need to do to tell
Spock a tube connects both graders is to
change our DV con function earlier
indeed leak on was supplied from which
man s box over so this is going to run
on startup
it's going to be a where name how to
generate postman connections when we
demand them all I'm doing is I use the
default connection info this syntax here
is record syntax so I'm just using the
default command constraints from
changing the user Missouri hack and I'm
also changing my database and there's a
couple of configuration options that you
don't really need to worry about there
that Spock gives you connection pooling
so if you have an application with maybe
a high load with a lot of people using
it rather than reconnecting to the
database every time a request comes in
spoke with people connection to open
reads connection as its eaten and in
order to start pulling data down from
the database again as I said I like to
work inside Haskell as much as possible
so the next thing we lean our model
types as Haskell database so projects in
this application are really quite simple
they just consist of a name which is
text a description which is text and
also a list of authors just the list of
text reads and to write queries using
Postgres simple we can use this slightly
different syntax here which is a little
bit like a string but it gives us the
ability to have multiple lines and this
is called a quadrotor so Postgres simple
gives us a quality quota for sequel
statements and the reason this is a
little bit better than strings is it's
actually really hard to concatenate
these queries together and generally you
can happen even queries as strings is a
pretty bad idea in web programming
that's how you introduce all sorts of
security problems when you accidentally
start letting people submit sequel
statements your server if you do want to
get sake there's a bit richer than just
writing super light by hand there are
other libraries such as local I have
relation record but these do come quite
advanced in my opinion so I generally do
write a sequel statement even in my own
applications like by this is quite
straightforward and it's very easy to
test needs I could just make requests
are served and try exactly the same way
and finally in order to fetch today's
that we have to explain to hassle hang
to Marshall between post-grad roads and
our internal dead folks and impose go
simple there's the type class for doing
this from and from row works in this
kind of positive monad where essentially
we can enter do notation and we can pull
out one field from our row at a time
so I extract the name field the
description field and the list of
authors and here I have to work them to
the vector data type in order to get
that array back but essentially we're
unpacking this as a list of text strings
and once I passed each of these columns
I can then construct from a project page
type just by returning the project with
name description and authors from each
edge there is there's a library pull
down one of them have to get space craft
simple SOP which is one generic so
everybody knows and with that you can
just define your project data type you
have to add one line to save derive
generic and then you can say instance
primary project and just specify
basically a performance so you can do
that in a practice that is also what I
do because this is quite tedious now
when the definition of project changes
you've got to go back and change so
we've now got our internal data type and
a way to marshal it from rows back to
original they type again and we've got a
query that we need to run so to run this
I square simple gives use a query
function the query takes a database
connection and it takes a query that you
need to run and it's going to use for
turn type polymorphism here to work aims
that you need to give their list project
if you specified that this is going to
return a list of projects so it's going
to going to use that from row instant's
that we previously defined in order to
do that Marshall
so then integrate that with Spock we
needed the database connection which
we've already got and then spot gives us
the run query function which lets us use
that data phase detection handle so we
can see first of all one things changed
is now our spot action rather than being
parameterize overall the database
connection types yeah we're specifying
here that it has to work for Postgres
connections and the reason is now buddy
works Postgres connections it's because
spectral projects which we defined
previously here requires a PG connection
so then you query with virtual projects
and Spock st. going to supply a database
connection to federal projects routine
which is then going to give us back a
list of projects so now that we've got a
list of projects we need to present that
to the user and now we can just switch
back to pure functions and write some
functions that turn single projects into
HTML so I've decided years ago with a
basic tailored presentation so an
individual project gets represented as a
table produce TR function and then the
contents of the table roads to have
three columns one which is the project
name credit description and I comma
separate all of the authors in the
project and we have to use two HTML
there because the project name specified
has just been a piece of text because
that takes could contain HTML characters
which we need to escape so two HTML is
going to do that scaping and make sure
we don't accidentally inject HTML into
this and perform commerce separation I
take the list of project authors then
each one of these Freddy Krueger's into
HTML and then I can interspersed there
as a function that just puts this
element between every element of the
list but that's just going to put commas
between every single one authors and end
contacts then collapses that list of
HTML fragments down into a single HTML
range so that's very much like contact
lists except we collapse with a bit more
structure
and finally with a list of projects now
I can turn all of these projects into a
single piece of page tml so I introduced
my table element a header for table
indicating fiction authors and then I'm
using fold map over all projects which
is basically going to turn each of these
projects into a piece of HTML by using
projects of rope and then it's going to
concatenate all of those down into the
single piece of HTML which is no body
logic so now we just need to wire this
all together into spot
so I'll get Freddy to action which is
what we started to define earlier begins
by fetching the projects from the
database when we use lucid percent HTML
down to the clients
I'm going to use our page template that
we introduced before to give it a
general page structure and then I use
render projects to render all of these
projects down flanked and there is a
link here which is a spoiler next I
suppose and finally we need to change
our top level application to include a
routine for this action so I'm just
changing our default action to know this
projects house leaving is this
listless the lesson that you gave in
testing this to put the focus room so I
think that the generation of the HTML
itself you are going to see some of the
ladies let me in there
but unfortunately that doesn't really
give you any benefit because lucid which
potentially renders it is happening far
later than this essentially my
generation so what you're going to end
up doing is building the whole thing of
the memory anyway and then you send me a
fan but there's a bit of extreme things
all of this says I don't know how you
can do streaming loops that this won't
read don't press this will basically
render the whole thing there's one name
the chocolate takes and then then yeah
actually that's a lucid and does render
as later text so if Spock has support
for streaming Lee
might be able to get that laziness I
would have okay so let's pull that down
so now I've got a couple of projects
that I've already got in my database and
we can see that table as expected and
there's a little bit of a bug here my
special bullet so anybody's looking for
an easy to work on later than that
except patches for that so the very last
thing that we need to do now is to start
allowing people to submit them to the
citation so spot gives us a way to read
post parameters post parameters in HTTP
not familiar it's basically what happens
when you submit a form and to read post
page approval request we have to specify
the name of the parameter and then
spokes gonna get us back maybe a text
value that corresponds to that parameter
and I think they're saying interesting
that happening here you might not have
seen in dynamic languages which is the
Haskell is forcing us to be honest about
what's happening here it's not
necessarily true that this parameter
will even be present and questionably
people may have tried to construct the
form submission themselves or you may
have been it's taken the pram for you
reading so Haskell is forcing us to be
honest and admitting that that book
could fail at runtime and we need to be
prepared for that scenario to happen
that says I'm going to try and read some
data out of this so the first thing that
we'll try and do is read your name
parameter from the request and that
gives us a maybe a name and if we did
get an end and we carry on and we try
and read the description parameter and
that might give us a description which
gets to go on and you can see that this
is becoming quite tedious and really
quite messy code it's hard to follow
exactly what's trying to be expressed in
and in Haskell when we have this kind of
repetitive patterns we want to look at
some way of abstracting hello so this is
probably the most advanced thing we're
going to look at in this tool so this
seems passed away a little bit too bad
but there are a notion of Mona
transformers so people in the last walk
we probably looked the native owner
which lets us change a bunch of
computations together with the chance of
one of them failing and if any of those
computations fail then the whole
computation fails as a whole an ADT is a
monad transformer that basically allows
us to get that functionality
on top of the government and we use
maybe team by with two operations first
of all that we have an operation that
could fail that is an operation that
returns maybe some values we can lift
this inside the maybe T transformer just
with this maybe t pumpkin that indicates
that any function has the chance of
failing and finally once we've built up
this large maybe T computation we can
run it with run the UT which basically
kind of escape sound at this maybe team
transformer and might give us back a
value at the end the intuition here is
the value you get at the end what we
just if all of the subsequent
computations could return a value but if
any of them fail to return the value
then we're going to get nothing back at
the end so knowing that we can use baby
T does allow us to slightly abstract
that code from before and just express
the kind of essence of what we were
trying to do so now for an named
description and getting all of the
authors are things that can fail so I'm
wrapping each one of these inside maybe
T and then I could use run maybe T on
this whole computation which might give
me back a project it will give me a
project if name description and one of
the authors were present but if any of
these fields failed to look up then I
can't give you a projects or return
nothing over the only thing that maybe
weren't a lot of explanation area so
it's going on to read all the authors I
arbitrarily chosen you can have five
authors on a project so I'm doing a
basic map over zero four five here to
read each of the individual authors out
so I'll have author 0 or 4 1 or 2 2 and
so on in the post parameters each one of
these have failed so if you've maybe T
to indicate that chance of failure and
then there's a mimetic action from
sequence which is a little bit like
concatenation again where we can
basically run all of these and if all of
these succeed then we'll get back a list
of authors but if any of these fails
then it will return nothing and this
whole competition for failure maybe T is
probably a monad transformer
that's well worth having the player just
kind of in general outside of this
parameter parts and stuff probably one
of the more useful monad transformers
that you will probably announce they
come across at some point and I have to
take questions and walk through that
outside this tool and now we've got the
ability to pass projects from post
parameters we can start to look at
inserting those into the database so to
insert into a relational database we
just run a single statement here so
we've got another sequel statement at
projects and that's going to insert into
the projects table their name
description column we can use question
marks here in placeholders and pesto
symbol is going to substitute in the
values for these placeholders when we
run the query
so here new ways to run the query now
which is here specified by project we're
just going to take the project of the
one it's a database a database
connection again and it's going to
perform some I did the body we simply
execute using the database connection
move given at project statements and in
order to fill in these placeholders I'm
supplying project to X I should have
mentioned that to do to actually pass in
this project you have to indicate
address how it needs to basically unpack
that project data type to work out which
columns get which data and there's a
total of cycle to row which continents
from right and when I switch back over
to the terminal I'll show you the
definition at that finally we put all of
that together to build another spock
action now which is going to insert
product into the date place post project
the first thing we do is use project
from post which is going to give us
maybe a project so project from post is
the function we introduced earlier that
tries to pass the project from post
parameters if we didn't get a project
though we need to handle that scenario
so again that's with Haskell forcing us
to be honest of a chance of failure so
if we couldn't successfully read the
project
rendering back to the client embellish
submission and changing the response
ages to 400 and if we could successfully
get a project and I can insert that into
the database and redirect the user back
to the listing of all projects finally
we introduce that into a routing table
here using the host HTTP verb the path
is going to be forwards left products
and the action yeah there is params I
think for that which will basically give
you back a list of paths and post
parameters and their value but the same
problem that's going to apply though you
don't know what's in that list
necessarily so you will still have to do
some home pausing failure but it might
be easier to should be doing a cure so
we can actually test that action ACK so
far because we have one way to make
those post requests so the last thing we
need to do is a form that's going to
allow people to submit projects and for
this I've got another Spock action add
project form which is an action that
doesn't require database access at all
and we can see that we've got just a
slight variable here we're not requiring
a Postgres connection and in the
contents I'm using our page template and
our loops and functions again to simply
render back a form which is going to be
a post to forward slash projects and go
down to the four minutes belly laborious
we just have the project name which is a
new field description which isn't it the
field or four rows extracted one at a
time so we have to buy water roads for
the fire post parameters and we expected
and finally a submit button again to
generate the authorize I'm using map M
which is going to go through this list
of 0 to 5 and for every one of those
numbers omit this chunk of HTML so we're
going to
fine and we do need to add reason for
that I don't need to have slides so
let's just pull that down I'll just show
you the source get there kind of
finished state so here is the routing we
have our top level get groups then we
have our post route which is going to
post a single project and then we have a
get action which is going to use the add
project before and I just want to show
you that to grow instance as well which
is what's allowing us to send road to
post for a safe place so hopefully you
can see that so two road takes a project
unpacks it into its constituent parts
and then we just basically admit that
using a tuple Postgres if it already has
support percent tuples to the database
so we unpack our project into a tuple
and you thanks once again so we do have
to be careful though that when we write
the sequel stands that when you get the
order
I can now run that and a project shows
us the rather horrible form is there me
how many products at their weapon okay
well one I know that it's being worked
on is Husker mode which is a copy game
framework I guess we can call it and
then if I have product you can see that
some strains or database within
redirected accordingly and you can see
our changes so that's everything I
wanted to cover and the actual code
we're going to look at so I think it's
nice we just recapping and recover what
we've looked at so first of all we saw
that we can use eval and sandbox to set
up a basic dev environment I didn't
really go into that because that's not
my personal work but if anybody is
having any problem for that later just
give me a champion can work through that
and we saw how to use Spock to serve
HTTP application specify the routes and
side by applications and specify the
logic of what needs to happen inside
each of the groups and that was working
inside the Spock Antoinette and spot
actions no notes and then we also showed
Spock how you connect to or Postgres
database so we could run database
queries against Postgres then we use
postgrads to do is just some basic read
and write statements and we use two rows
from rome to specify the marshaling
between Postgres database and our
haskell data types we use the sequel
quasi quota to bed seek where you start
reading into our source code and we saw
that we can actually give these queries
the query function and then we assembled
all of the UI for our application using
the lucid domain-specific language and
we saw how to create basic HTML
documents with competent values and also
supplies our project eight types and map
so we Maeby's HTML documents dynamic and
we also saw Haskell is a means of
abstraction in HD
three so we broke out that page template
and we saw how we could use common
functions like maps and fault
concatenation to basically use Haskell
as a templating language for HTML
documents and then we just saw briefly
lower skin forever quickly what is
perhaps some slightly more advanced
that's worth learning although I think
that better Haskell programming which is
the use of abstraction with the maybe T
transform so that's everything I wanted
to cover today I guess we did go through
this but quickly but as I said all the
code is online the ducts Tim it's kind
of meant to be in sync with the talk
okay so if you want to walk through the
tool with the darker color at the same
time that should be possible and
obviously I'll be around for the rest of
the day and if anybody wants to kind of
hack on this project and try and improve
it maybe fix some bugs to improve the UI
and yeah definitely open to you but if
you look like on the project coordinator
IRC okay that's very high yes do you
have the URL for the plates and stuff as
well yeah
I'm going to put this on Haskell and
said github repository love so I'll do
that sometime say
I was under the impression that Spock
actually offers a more safe way of
accessing those parameters yeah
so we use this simple sample I obviously
wanted to get a simplicity the safe one
gives you a slightly more typesafe way
of doing routine I'm not sure if it's
post practice I thought it might just be
for you RL parameters so if you have
like a get project looks like one and
Spock and tell you that you expect an
integer there okay yeah if people want
to look at that simple those give you a
free expensive coverages page scripts
from deep so you can do all the city
queries and because it's just using
simple statements it no time to be
streaming results I can support but you
migraines are problems as you start to
build kind of large applications with
this and change over time because we saw
that the sequel statements don't carry
any title information until they're just
sequel statements and you have to
specify what you expect that but if we
expect doesn't match up with what's in
the query results you'll just get a
runtime error which to me is a little
unsatisfactory so some of the other
libraries like Oh bleh and relational
record give you maybe a monadic
interface or something that lets you put
a lot more information in the types at
the cost of being slightly harder to
express we're using oh my word
so very interested in the relational
record work I think it's a slightly
simpler API for night-blind but we use
post critical for a good year and until
we've kept running into problems of
changing data types and then queries
which is break the same it's nice for
this kind of work you're just sketching
prototyping
yeah so the bills product as we go we
store it's just a binary so if you are
able to maybe get like have been Cu
server or something and you run a busy
lately then you can just compile them
copy that binding straight over
so that's likely to be kind of easiest
way there are other options and there's
Haskell on naruki so it's a really big
gene seconds here as well this next book
so there's also Mia tech view works on
guru and all sounds pretty healthy on
which is helping do this kind of stuff
I'm not sure exactly I think it she'll
still around but that will do things
like put on github repositories pulldown
dependencies for you and it also does
caching so you don't have to constantly
compile
that problem programming out with yes I
want to do a smaller lightning talk at
home about the programming hostile and
try to convince PHP people that there is
advantage in programming the hostile and
the problem is also PHP is crap there is
such a large amount of PHP and so many
people they manage to have many many
libraries and it's hard to pitch with
hostile when there are still so many
things for example I've asked on Haskell
cafe and on the list and on this of that
there is nothing to do security checking
in Moscow I think no a strain work no
nothing to check roles in symphony they
have developer tool that gives you all
kinds of dimensions and my impression is
now that I would rather go with a search
to pitch against PHP live because more
future which and spoken sports more bare
bare metal yeah that's right
spoke to me has the benefit because it's
kind of so bare metal it should be
possible to bring in libraries of do
this type of specific functionality
the downside is that you set the likely
finding this yet the east of you have
made any more features but they don't
wait answer very well to the rest of the
house
which I found is a little uncomfortable
to me because I don't usually somebody's
snap especially and it's hard to borrow
those ideas which may be why we have
such a kind of lack of these jamming
libraries it's because we're quite hard
to make it gently like music reusable
over all angles but your point your
point is definite others I mean this is
it's only in the last couple of years I
think anyway that has to it became
really suitable for doing programming
but we start to get frameworks like you
saw really coming up scratch so it's
slowly just the problem than people's
own you but I see the landscape changing
quickly as more people wanting to write
web frameworks and Haskell to learn web
applications and that's what they're
willing to do that a little bit of extra
work maybe flight is available so
hopefully we'll be able to compete with
PHP in terms of their feature rich
ecosystem but we can't so I don't know I
don't really have any tips for your
nonsense
also we were saying with my having led
the toolbar snap and things like that is
kind of where we wanted to go snap
rainbow which was meant to be there was
a concept with snap looks left where the
idea is if you wanted to add like a wiki
to your application you've just
installed the wiki snap and if you
wanted to like rendering performance
information to your application you get
the rendering performance and again
these are kind of ideas
I guess the enemy because I wouldn't be
so comfortable by writing my collab on
this is this is only 99 steps around I
mean when you're running like PHP after
the engine and you're kind of still
doing this you may have the PHP fast
CGI's being kind of scenes whatever
but these servers are actually really
quite performing so I think that the
Spock series is actually quite a
performance based on top of the line
framework and there are benchmarks if
you want to have a look at this I admit
there are downsides era of running just
kind of executables many run fast but
you don't know the security engine so so
I have to work with not a spot server
but we do SSL termination and nginx and
then reverse proxying down to this and
that's also nginx is under the load
balance and things like that and these
just run off machines that are doing
very little more than running which I
think gives you quite a nice
architectures of scaling these machines
I have just needed a binary to be
running on nothing quite quickly there
are two libraries of that there is the
WebSockets library gives you access to
just the underlying web stop cradle I'm
not sure a spot will support that yet
it's it is a kind of server agnostic
library I know how about the use of the
snap but maybe not spot and there's also
a locally that I maintain socket IO
which gives you bindings to the socket
IO JavaScript so if you one thing that's
a bit more kind of pub/sub orientated
then there's also that library which you
don't have to worry about the underlying
WebSockets on it does
and notes right now in 50 minutes</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>