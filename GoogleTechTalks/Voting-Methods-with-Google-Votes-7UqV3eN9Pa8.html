<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Voting Methods with Google Votes | Coder Coacher - Coaching Coders</title><meta content="Voting Methods with Google Votes - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/GoogleTechTalks/">GoogleTechTalks</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>Voting Methods with Google Votes</b></h2><h5 class="post__date">2015-06-27</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/7UqV3eN9Pa8" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello my name's Steve Hart so this Tech
Talk is voting methods with Google votes
and what I'm going to do is talk a bit
it's kind of an introduction to social
choice theory which is all about how
groups make decisions the different
methods that people can use to to vote
and to aggregate those votes both the
methods and the algorithms and I'll go
through a number of common voting
methods and algorithms and talk about
some of their idiosyncrasies I'm using
the Google votes voting platform as the
example for every everything in this
talk so I'll start by saying what Google
votes is so Google votes is a liquid
democracy voting platform on Google+
this is an internal tool which we've
been running votes for about two years
at this point 11,000 Googlers have voted
using Google votes main cast about
75,000 votes are our biggest event has
been the micro kitchen fair which is
that that picture in the in the corner
there where we had about 8,000 Googlers
showed up and actually 4,600 Googlers
voted including a lot of people who
weren't at the event but who saw the
posts on Google+ and vote voted after
the event so in fact the entire 2014
micro kitchen lineup is based on on the
vote from from the micro kitchen fair
base all the vendors show up and
everybody pitches their their stuff
other things we've done votes on are for
example like here at Kirkland the
Halloween costume the hangouts t-shirt
and voted on the name of sate of the the
troll cafe in in Seattle
so also we've done some products at the
at the Google store I don't know if the
remote people will be able to see that
see this but this is why I'm wearing
these very spiffy boots they're very
colorful they they won over the rain
jacket and several other options okay so
I'm gonna start talking about voting
methods themselves
so the simplest one is to choice voting
or yes/no voting and if you have only
two choices things things are simple and
as soon as you give more than two
choices things get tricky but two
choices you can just use majority rule
is really only one algorithm that
applies to two choice voting you add up
the SS you add up the nose and one of
them wins that's about it so I'm not
really gonna talk much more about rule 4
for the rest of this talk the most
common I think I'll take questions at
the at the end especially since it's a
little difficult for me to see remote
people raising their hands so the one of
the most common forms of voting is
plurality voting in plurality voting you
can have multiple choices and what you
say is that whatever choice gets the
most votes votes wins and people can
only vote on one choice so majority
means greater than 50% plurality means
more than any of the other choices you
can put a little more information with a
very similar method called approval
voting and in approval voting you allow
people to vote on multiple choices it's
still kind of the same checkbox approach
there is no way in approval voting to
say your relative ranking of these
things I can't say that I like pizza
more than chicken or vice versa I can
just say I approve of both them then oh
by the way approval voting is the thing
that's its most like plus ones or
Facebook likes you just kind of click on
the things you you you approve up the
next setting more powerful voting method
is called ranked voting and in ranked
voting you can give your explicit
ordering of items in this case with
Google votes you can drag the items to
the right and drag them around and and
set the exact ranking you want then the
last method we're going to cover is
score voting or range voting and in this
you give each item a a score in this
case for google
we've implemented five-star voting and
each level has a label associated with
it we went with agree strongly agree
versus neutral disagree strongly
disagree now range voting has a few
subtleties such as what happens if
somebody doesn't cast a vote and in this
because I mean if you think about
something like like Amazon reviews you
might see something that has a very high
rating it's got four or five stars but
you know if only four people rated that
thing it doesn't really tell you that
much
maybe you'd rather have the thing that's
got a thousand ratings on it so the way
I get around this problem in Google
votes is we just require everybody to
rate rate everything so in a situation
like this where spaghetti and Asian
noodle salad have not been rated they
will be treated as one star and in fact
it warns the user it says hey by the way
these these two are things are about to
be treated as one star so they cannot
know exactly what they're getting into
so a few other features of Google votes
is one of them is is ballots so this is
its kind of similar UI paradigm as the
individual votes but this is the food
fair ballot and in this case we have 24
different categories in each of these
categories is is a vote for example
snacks chips where you vote on the
various chips so for the Food Fair we
had 25 categories and over 200 options
so we also have ways of navigating
easily as you bought on one category and
then and then go to the next one another
big thing with Google votes is the
integration with G+ so it's very easy
after you vote you have the option of
sharing and this is one of the reasons
we've gotten a very good turnout with
Google votes Ron votes we're typically
within the first day or two of running a
vote you'll get you can get hundreds or
a couple thousand votes just because you
get the viral effect that people vote
and they like things so they share and
then they reshare to their buddies
you're like for example sharing almonds
the other thing we do for Google+
integration is
we use the same widget that's used for
blogger which which is also the
basically the same widget used for
youtube comment integration although we
we use the blogger kind of configuration
to aggregate all of the Google+ posts
about the votes so which is nice because
right when you're at the point of making
the vote decision you get to look and
see what everyone else is chattering
about you can also restrict to just see
the conversation for people in your
circles okay
now to drill down a bit more detail for
the aspects of these different voting
methods we're going to take a very
specific scenario and a specific sample
and use and see how that same example
plays out four different methods and
algorithms so here we have 12 people
voting on six options on what drink do
we want to serve for say Friday dinner
and to further simplify things we've
grouped the twelve people into four
preference profiles so all the people
under Nia vote exactly the same so Nia
effectively counts as four votes so
Google votes is actually a liquid
democracy voting system which means that
you can explicitly delegate your vote to
other people so what we've done here is
that these three other people have
delegated their vote to two Nia giving
her a voting power of four these
examples will all work equally well with
non liquid democracy systems if we just
imagine that we have for people with
identical preferences so we'll start by
looking at everybody's true preferences
what do they really like so sherry
sherry has an opinion on everything I
mean she thinks has all six of the
things she has her you know likes water
before aloe juice etc whereas Lynne and
Chuck have opinions on their three top
favorites and then the other three they
they're all equivalent basically just
zero Nia has opinions on the top two
choices but then she has this third
choice which is but it's kind of a
distant third choice
I put an asterisk next to it to indicate
that she'll take hint water as above the
other three but not by much she doesn't
really like in water much and that that
will play out as we go forward so let's
look at what happens with this example
with plurality voting so basically
everybody just does the only thing they
can do which is vote for their top
choice in this case hint water vitamin
water and so forth so everybody votes
for their top choice let the screen
refresh here and then we look at the
results so the results are actually not
that great because what happened was we
had eight people who actually preferred
water of some sort and for people who
prefer tea but yet t1 because what we
saw here was boat splitting this is
because all the water people split their
votes among three different water
choices and they all lost this is a big
disadvantage of plurality voting this is
a equivalent to the problem of spoiler
candidates where you have two things
that are similar in one candidate just
kind of spoils the other one the most
famous example of that is probably the
bush-gore Nader election of 2000 so
plurality has some some major
difficulties now let's see if what
happens oh let me just go back one thing
to note here that in terms of the
Preferences table basically what we did
is we just took the first row and we
ignored all the other rows so we just
threw away a lot of valuable information
which is part of why we got a poor
result so approval roading we're gonna
let more of the information get into the
system in this case for example sherry
who had an opinion on all six items she
decides that the top four of those six
items are things that she approves of
the whole concept of approve disapprove
is some but somewhat up to the
individual but we kind of all get to
that in a second let's see well show
what that means the other voters they
all approve
they're top two choices and then let's
look at what happens so effectively what
we've done here is we've taken
everybody's preferences and we've drawn
them a kind of jagged line through the
middle where everybody takes their top
choices and they approve of them and
their bottom choices and they disapprove
and all of their top approval choices
get equal weight of one vote so we see
what happens here is that mineral water
wins now this is actually a pretty good
result in the sense of mineral water is
a pretty good compromise for this group
of people if we kind of look at the top
set of votes and kind of what's a decent
mix so in this case fairly happy with
what approval voting gave us here and it
didn't take that much difficulty for
people to just check a bunch of boxes
now we're gonna go with rank voting so
here we add in a lot more information
and so we this case would go to Sherry
remember sherry had had opinions on all
six of the options so so she's happy she
gets to put in exactly what she feels
which is ranks them one through six then
Lynn and Chuck they put in their three
choices and then we we come to to Nia
Nia has a little bit of a dilemma here
in that she she clearly ranks her first
two choices her third choice she's not
quite sure whether to rank it or not
children like hint water much but she
says well I like it better than those
other three guys so so she does drag it
over to the right and and vote on what
happens actually let me so now we get
into the distinction between methods and
algorithms because up till now all the
voting methods had a pretty clear thing
to do which is you just add everything
up and you can player compare the
winners it's as simple but with ranking
it's not so clear you kind of have all
these preferences from a budget
people and you gotta merge them all
together and make an output output
ranking so there's there's different
algorithms you can use for the same
input data first one we're gonna look at
is called the board account so into the
1700s there was a gentleman named Jean
Charles de Borda who was is very
accomplished he was a military officer a
sailor a mathematician physicist and a
political scientist and he popularized
this algorithm which which bears his
name the idea and board account is that
here we have six options so what we do
is we assign a range of six possible
point values from zero to five and we
just give each person's ranking zero to
five depending on where they fit in the
ranking here
so you add it all up hint water wins
with 43 points clear win over over
mineral water so now let's think about
this board account a bit there's a few
things that are kind of weird about
board account first we're gonna
introduce this concept from social
choice theory of irrelevant alternatives
so an irrelevant alternative is
something that someone someone or or a
choice that goes into the race that has
no chance of winning in this case we're
gonna throw in dr. pepper and coke now
only one person votes for at nia and
they're not even her first choice so you
can see what happens to the board
account as soon as we add dr. pepper and
Coke they just end up at the very bottom
they don't really do anything but yet
let's imagine that we were going to
serve the top two drink choices just by
introducing these guys at the bottom
they managed to switch around item to an
item 3 so mineral water got kicked out
of second place and dropped into third
place just because these things that
should be irrelevant so and you can kind
of see the intuition from the table you
can see how dr. pepper and Coke just
pushed mineral water down the table a
few things which which
knocked off some points so this is a one
indication that Borda count has some
problems
another thing is let's look again at who
won border count so board account that
the first and second choices were hint
water and mineral water with 43 points
and 35 points respectively and border
point it looks like in water had a
pretty good lead I mean there's not that
many voters and 43 is quite a bit above
35 but let's you know the one thing we
everyone agrees on in voting is to item
elections you know I said if there's
just two options it's easy you just vote
and you add them up it's a majority rule
so what happens if we just think about
mineral water and hen water now with the
same input data we can just ignore
everything except hint water and mineral
water and make two choice votes for
everybody so sherry for example clearly
votes for hint water Lin hint water
chuck and Nia both like mineral water
more and if you add it up this way you
actually find that mineral water beets
hint water which is another indication
that boorda has has some problems now
going back to the 1700s again there's
another another gentleman named Markie
Dee Condor say who is actually a rival
of boardís they're kind of thing kind
of lifelong rivals debating aspects of
political science and he is famous for
what's known as the Condor safe a family
of algorithms
so with Condor say voting you kind of
take this pair wise concept and you dial
it up you get that you get the matrix of
pairwise comparisons between everything
so in this case we look at mineral water
and we saw from the previous slide that
mineral water versus hint water gave
seven to five and mineral water beats
hint water and in fact we can do the
same thing with all the other options
and mineral water pairwise beats beats
everybody so we say that mineral water
is a condor say winner and it's not
shown on this slide but but
votes actually does the entire matrix
and you'll see that like hint water
beats vitamin water coconut and honesty
in pairwise comparisons as well as
vitamin water beats everybody below it
in pairwise comparisons so the Condors
say winner is is pretty nice
also again notice that the Condors say
algorithms all give mineral water as the
winner and as i said said earlier
mineral water is arguably the best the
best winner for this particular example
kind of makes the you know good
compromise so let's let's look at
another example of Condorcet voting this
is a simpler one where we only have
three users voting on three options and
let's you know let's look at say beam
versus greek or we can see lin prefers
being two greek chuck prefers being two
greek mia
greek two beam added up and you can see
the beam beats greek six to four
however greek beats potato and potato
salad beats bean salad so we have we
have a cycle here there is no Condors
say winner for this specific example and
that's known as condorcet's paradox he
you wrote about it and popularized it so
that's why the Condors say algorithms
it's considered a family of algorithms
because there are a number of voting
algorithms that are conversate compliant
and all Condors say algorithms have the
property that if there is a condor say
winner
it'll be elected but otherwise they have
different behavior so in Google votes we
implemented an algorithm called the beat
path or the Shultz algorithm this is a
this algorithm is used by a number of
organizations for example Debian Linux
actually has this algorithm written into
their constitution you can go on their
web page dig through the appendix on the
Debian Linux Constitution and you'll
find basically pseudocode to implement
the be path algorithm
Selvam also called Schwartz sequential
dropping which is a slightly different
variation that is guaranteed to always
give the same results and that's what
they have written down so the way beat
path works is that we look at all these
pairs and for each pair not only do we
see who won but we see how much do they
win by for example beam vs. Greek is
that six to four so we'll call that an
edge of strength to Greek versus potato
seven to three we will call that edge of
strength four and the other one also an
edge of strength four so what we do is
when we compare two options as we look
at all the paths between them and find
the strongest one whereas each path is
as strong as its weakest link so between
Greek and being in this very simple
example it's plus two direct but
indirectly it gets plus four so in fact
Greek beats being in this example and
then since potato beats being we have a
ranking of Greek potato and being so so
the beat path does guarantee a aggregate
ordering unless there's exact ties in
which case it gives you the exact ties
which is which is what you want
earlier we talked about the independence
of irrelevant alternatives
now beat path is not actually guaranteed
to follow independence of irrelevant
alternatives but it has a slightly
weaker property called Smith iia and
that the Smith set is basically the set
of Condor say you know the tied winners
for first according to Condor say so if
you've got a whole bunch of options and
you take all the options that will beat
everybody else head to head and beat
path guarantees that if you throw any
irrelevant alternatives that aren't in
that set they won't mess up anybody who
is in that set so it's it's stronger
than border in that regards in which
case in border you can make examples
where irrelevant alternatives can
actually kick though the first-place
winner out I'm now it turns out that for
an algorithm like this it's actually
impossible to make to satisfy
independence of irrelevant alternatives
in the 1950s an economist named Kenneth
arrow popularized something called which
is now known as the arrows impossibility
theorem it says that there's kind of
these common-sense things you'd like a
voting algorithm to have and it turns
out you can't have all of them at the
same time so if you have a voting
algorithm that's just ranking so it's
not something like score voting but just
a ranking all the inputs are rankings
then you know there's these kind of
common-sense things like more than two
choices
unrestricted domain that means that
everybody can vote for whatever you want
you don't limit people's voting choices
non dictator means that there's no one
voter who controls it all who says that
if this voter puts a above B then a is
always above B and the results so no
dictators the other one is monotonicity
which is kind of a an intuitive thing
that if I take a consistent set of votes
and and I raise up one of my one of my
candidates that should cause that
candidate to either stay the same or
raise up it should not cause that
candidate to go down this is one of the
reasons I don't like Instant Runoff
voting I mean Instant Runoff voting you
can do weird things like you don't vote
and you actually things are better if
you didn't show up to vote there's weird
cases much less you change you raise
someone your rankings and it causes them
to do worse so I'm not a fan of Instant
Runoff voting and then then there's an
independence of irrelevant alternatives
that we talked about before so you you
really just can't have your cake and eat
it too with ranking algorithms the last
type of algorithm we're going to talk
about is range and score voting so going
back to our example we see that so we're
gonna start by looking at Nia and
remember she had two strong first
choices and then kind of a distant third
choice so so Nia likes this system
because she gets to put honesty with
five stars and mineral water with four
stars and then put a little distance
between that and hint water which she
gets to Marcus
disagree and and say that that's two
levels down not just one level down and
then put everything else at one star the
lowest rating so it's more expressive in
that regard
however for Sheree who has opinions on
all six of the things it she has a
different situation in this case she has
six rankings but there's only five stars
so she runs out of stars and is forced
to put two of her options in the same
bucket she chooses to put her middle
options as three stars so vitamin water
and mineral water both get three stars
and her thing and then the other two
they just kind of fill it in with five
stars four stars and three stars for
their top three choices and what happens
at the end well the algorithm were using
is averages for Google votes and that's
that's pretty common one it's also the
same type of thing you'll see you'll see
on like Google Google ratings pages
which have five stars and and you know
Amazon or Netflix things like that so we
see that mineral water wins with three
point three three stars and again pardon
me
again mineral water is is probably the
best winner so this is you know did it
did a pretty good job here so let me add
a few more caveats of range and score
voting one is that approval voting is
just a special case of range and score
voting so in approval voting it's just a
score where you're only scores are 0 and
1 then another caveat is that notice
notice what Nia did Nia was honest and
she voted her true preference but in
this case she would have actually been
better if she had done what is called
tactical voting where people don't vote
their true preference they vote hoping
that by lying about their preference
they will get the outcome that they want
this is very common in plurality voting
where people don't bother voting for a
third party
because they think they have no choice
of winning even if they they like the
third smarted candidate more so in this
case she voted for hint water but that
actually gave him hint water a little
more support and you'll see that hint
water almost won so she would have been
better off if she had given hint water
one star and been less honest about her
rankings cuz she'd have less chance that
that one of her first two choices would
would get kicked out now there is
another common algorithm used for range
score voting which is called majority
judgment and in this case you compute
the median scores instead of the average
scores so for mineral water example we
would take up the number of five stars
four stars three stars etc the
distribution and find the median and
then we'd say okay that's what mineral
water gets and then anytime two choices
have the same median value you compare
them and you just start removing votes
from each of their medians until one of
them has medium that chain median it
changes and that's how majority judgment
work supposedly there's some properties
and majority judgment that make it more
resistant to tactical voting I'm not
real familiar with it in this specific
example majority judgment gives the
exact same rating as averages so whether
you use medians or averages it wouldn't
affect this specific example to
summarize and this is this is an opinion
slide because social choice theory has
people with very strong opinions on one
algorithm over another and I'm gonna
disown you you're no child of mine if
you're using Instant Runoff voting or
something like that you know I saw
thumbs up in the audience I agree with
that
so my opinions first plurality voting
it's awful it's it's a travesty that we
elect major world leaders using
plurality voting it's just massive
distortions there's a lot of argument to
be said that the entire two-party system
is purely an artifact of plurality
voting because third parties can't get
in
and it forces people to go after one of
the winners and it makes one of the
winning two parties become more
polarized because that's the only way
they can they can get the votes so it's
it's got lots of problems but it's easy
to implement every understands that so
everybody does it okay
boertie algorithm some people swear by
it I'm not that convinced obviously from
my talk you haven't been giving very
many arguments for why it is a good
thing there are a couple properties of
condor say algorithms where every
conversation or them fails it and you
can have border pass it but I'm not I'm
not a big fan of porta so approval
voting is pretty good I mean if you need
a lot of things you need it done quickly
with with little cognitive overhead give
people multiple choice so for the for
example for the food fair we had 200
something options you know we wanted to
just throw a bunch options at people and
they just click what they liked and then
go to the next screen and and we got we
got decent results beat path is a pretty
good uh is a good algorithm when you
want more fidelity than approval because
approval you can't actually say I like
this more than this if it's just kind of
my default algorithm I'd go with B path
or if just when in doubt give people a
ranking thing and use B path it'll give
you a pretty good result a range and
score voting one thing I didn't mention
about that is that it's it's a very good
when there's an external standard such
as Olympic diving you know everybody
holds up their their slide that says
eight point seven and in this case four
Olympic diving the judges aren't really
voting on which diver do they like the
best they're saying this specific dive
is an eight point seven and eight point
seven means something across all dives
everywhere anywhere not just the single
competition so with range score voting
is particularly good for that type of
thing
also earlier when I mentioned that
sherry couldn't fit all our votes into
the five stars that that's not a strict
property of range
or voting like if you do like Olympic
judging with you know 10.2 I mean
there's you know you've got two digits
you know as long as you've got less than
a hundred divers competing competing it
should be plenty of values for you to to
have that and then my last opinion is
that yes please use Google votes for
your group decisions it's particularly
good for things like going to choose
t-shirt or where you're gonna have your
team dinner so to conclude I wanted to
give a thanks to the Google votes team
and it in my co-lead is Greg wolf in San
Francisco the other major engineering
developer is Leo Lopez in Brazil she she
did most of the pretty UI stuff and then
also special thanks to Courtney Nelson
who has been with us for the last two
years in workplace services coordinating
numerous votes with different groups of
people setting things up answer people's
questions and and giving us customers
and then thanks to all the other members
of workplace services and other people
who have contributed to either code or
UX design over over the last couple
years so next week I'll be giving
another talk which is purely about
liquid democracy it's all about the
delegated voting what happens when you
can flow votes through a a graph your
social graph both the user experience
ramifications as well as the graph
algorithms so okay so thank you for your
time and we'll we'll end a few minutes
early</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>