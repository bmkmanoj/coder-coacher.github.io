<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>GTAC 2008: The Value of Small Tests | Coder Coacher - Coaching Coders</title><meta content="GTAC 2008: The Value of Small Tests - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/GoogleTechTalks/">GoogleTechTalks</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>GTAC 2008: The Value of Small Tests</b></h2><h5 class="post__date">2008-11-12</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/MpG2i_6nkUg" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello everybody my name is Christopher
I'm working as a software test in civic
and today I'm going to talk about the
value of small test so just to give a
little background about Who am Who am I
I was living in Austria for 130 years
that's in a small European country to
the right working in Switzerland since
one year talking today here in Seattle
and enjoying a drink afterward and if
we're able to have a good vacation just
go to New Zealand over there I can
definitely recommend it we had a bunch
of presentations here which were really
good and which were really good in terms
of pictures the message and so on I want
to make it more interactive so instead
of bothering you with so instead of
bothering you with this kind of charts
and bullet point list and so on I want
to have this like a more interactive
presentation to entertain you while
you're waiting for a lunchtime so in
general when you have any concerns or
any questions on what I'm saying here
just you know raise your hand clap your
hands saw something at me just child
let's have a conversation somehow ok
let's start so the first question is
just for me out of curiosity how many of
you are actually seeing the code of
developers so how many of you wow that's
more than expected ok how many of you
satisfied with the code quadruped to
developers
that's hard good so do you think that
developers are doing a good job on
testing the code 1 2 3 10 15 okay so to
give a little bit of egg point why I'm
asking this question so I switched to
the test engineering world about eight
years ago and I had in the beginning I
had to automate the tests for the
developers code like I had to make the
selenium tests or those web it was this
mercury stuff at this time and what all
this draft me is that I found problems
while automating which cost me a day or
two which would have been prevented in
an easy way by the developers like you
know returning null instead of the
object and so on stuff like this so I
change my mission in terms of educating
developers on how to do a better job on
the unit test level so that we can focus
on our job on automation in much a
better way in the whole presentation I
will use a small example application
which is like not complex has some
front-end web mfc whatever has some back
ends and the database right it doesn't
get it a much more detailed like this so
we keep this highly high level and I
guess whatever application you're
automating you can fit it somehow into
this paper hopefully so what kind of
developers didn't count in the last
eight years and this is the kind of
developer actually i was before i became
a test engineer a lot of self-confidence
right I white coat I submitted it might
combine I just trusted will combine
mainly and that's it I go home and the
software will work nothing more how many
of you did sort this type of developer
so those developers are from my point of
view hard to educate but when we get
back to this one however the the most
common kind of available account that
are those people who develop code and to
actually are not really sure if they're
doing the right thing right so to
develop something it compiles they might
as a unit estimate not at a unit test
but then they you know they have to ship
something to the test department and
they say well hmm let's see if it works
and twice it out once like Eddas book
application sure for my own name and if
it crashes well okay there is something
wrong I will take a look so um those are
the kind of developers I guess who who's
all this kind of delivers we're less
than the first one frustrated so those
kinds of developers are care about
quality like they want to deliver
something Goods I want to get rid of the
work afterwards like debugging and so on
but they don't know how so suddenly
management comes in and says we need the
test department so then the test
department comes in by coincidence i'm
having the same test a guy as the
model-based testing or his twin brother
so to test about the test about them
says okay but before you put something
in the production you know give it us
first we want to take a look some
staging instance canoeing whatever so
the developer says yeah that's good
somebody will check it before it goes to
production I'm fine and sets up this
test environment like copy of the
database or copy of the server both of
them white or the same database if it's
read-only hopefully only if it's
read-only so then the test that tries to
test and this is where it all started
because suddenly the testers tried to
test application which is a completely
black box from that point of view so
they saw the web front-end then you the
database is maybe a test database but it
didn't have any excess or maybe they got
access after half a year after they've
got a trusted relationship and so on and
they try to test all this functionality
between 107 implementation and so on why
are the test scripts
so two made subscription being on a
selenium webdriver and so on to catch
all the problems so that's better than
nothing right the problem was that if
you go to this direction first of all
the tests are slow as we heard yesterday
but Marcus and John saw the best way to
do it because isolation in turn secondly
even worse is when you find a problem
and the testifiers a problem he had to
talk to development a look I found a
problem in your code and then the
developer first of all says no of course
it's a feature it's all the problem you
made it the wrong way but then if he
goes in and says yeah the tide it's a
problem he takes a long time to find the
source of the problem because he might
have some lock output he might try to
run it locally which takes like ages so
there's an easy tournament time of a day
or two to fix a single problem which is
frustrating for the web developers for
the developers as well as for the
testers right the relationship is not
really the best one advanced testers at
some time decides that testing through
the web font and is not the best idea
right it's a good idea in terms of
interesting but not the best idea in
terms of testing the back end so they
fired the test scripts directly against
the server implementation and then so
this was a company I was working about
five years ago and then suddenly the
developers approached us and said hey
you know you're doing all these clips
and that's really fantastic but I want
to execute the test as well I want to
have some confidence that my staff is
doing a good work right so they heard
the term unit test somewhere and wanted
to do it so they asked us being test us
how to do it and we made the number one
error we said do it the same way we are
doing it which meant you establish a
state you talk to some database you
create some records in the database you
execute your function you want to test
like get persons get contacts execute
transaction whatever and then afterwards
we only found the state of the test this
was the biggest mistake we could do it
this time for my point of view because
the result was
that the developer salt that's hard
party unit tests is such a lot of work I
have this certain lines during the setup
work if this one line I want to test
right then I have another 10 lines of
assertions on the state of the system so
why do I do this and what's the added
benefit because at the end the testers
have this great bowling anyway it's the
same thing why do I do this okay so this
is a fictional conversation that no real
persons involved in distance on so this
is what happened to me at some time
suddenly a developer approached me and
said could it do more and then I said so
in reality I said yes let me answer
tomorrow and then I went back and asked
some experts and so on but they dentists
a tamiya you're sure you could test for
stuff which is really hard for us to web
from the script web up front and right
you could just test forever conditions
for instance and we've heard what it's
great how can I do it and said yeah if
it just go back and find out it okay
here's how to do it and I told them
basic things for my part of your basic
things but it was just important for
them to hear them from somebody which
they acknowledged as an expert in
testing domain so who knows what
dependency injection is thank you who
thinks developers know what dependency
injection is maps almost the same so it
changes in the last five years obviously
so explain them you have to make
dependency injection and even though
they said yeah we know what the Penn
State section is I said okay hold on a
minute I will just explaining my point
of view you might have the same point of
view then we are aligned if you're not
aligned take a look so I explained him
for instance in his case there was this
big an application which was talking to
the database connection which was
encapsulated in the back end application
and which was managing the connection to
some testing incidents or production
instance of the database usually
production of course Anna totem look if
you want to control your poor and being
tested like
want to test your contact manager you
need to have a database which is under
your test control you need to sort of
virtual database what so this was the
code little bit more functionality in
the real world wide but this was the
code he was taking a look at he was
having a private final member of a
database connection he was in
initializing the class with the hostname
and then setting the connection to the
hostname hard coded port hard could it
have a name of course because it's
easier right at then I told him look you
need to do depends injection so the
first thing he did was that he made a
special host name test 123 and had some
special logic in the database connection
class which worked but which was like
how to understand in a second developer
took a look at it didn't know why it's
called test database so it made test
database to the test failed WI and so on
and on I mean this example of course
it's pretty obvious to you right but
it's it's really important for my point
of view to show this kind of simple
examples to developers so basically I
just want to give you the examples you
show to your guys afterward that's where
the world so in this specific case a set
them look you need to abstract the
implementation from the distant from the
plan like you need to have something
like a database what but I don't care if
it's a real database if it's a mock
database if it's a my secret database a
secret server database or whatever you
just talk about the database interface
and what you want to have from the
interface nothing more everybody
agreeing so far everybody hungry ok and
then I told them look at the next thing
you need to achieve your goal is smoking
um what I forgot to mention earlier is I
never told them that you need to do
dependency injection need to do mocking
I told them if you want to achieve the
goal like for injecting whatever these
are the tools you will need to do this
that's a very different message I don't
tell them you know you have to do this
fancy stuff and so on I tell them you
might want to achieve this and this is
my people
how you can achieve it totally different
story but how many of you know about the
fake is about the mock is opposed great
how many of you developers know okay did
you have to expel episcopus this idea or
did you have to explain to the
developers how many did have to explain
how many got told by developers okay and
for those who had to explain was it easy
yes no yes no some hands so chat about
if you want to educate people on rocks
and fix what I tell them usually is that
a mock is a different approach in
testing like in the mind the developers
were still caught in the state based
testing right they saw what we are doing
with the test script and it's arty and
we are doing the same now we are making
stayed in the design but the mark is
fundamentally different you test the
interaction you test what your piece of
code the contact manager is really
really doing and nothing more and
nothing less which makes it easy to test
for our condition sweat and an important
thing is for the first time when you
want to show this to developers sit down
with them spend half an hour one hour to
go through a code example to go through
their code example right or maybe show
the contact manager but maybe with their
code examples spent this high of a day
to get used to the code and show them
how to do it it will pay off really so I
just concrete example I mean you know
this setting expectations on the mocks
like what do you want the code to do
executing the code being tested and then
verify the AP output if you need and
then I mean in case of travel you can
use this example in case of us plus the
examples from yesterday from lightning
talk kids of Titan there's something out
there
in case of perl hyphen idea okay so the
important thing is to explain the change
between the expectation phase and the
execution phase right they do not
establish a state but you just configure
what you expect to be done as an example
I expect the connections of such persons
methods with these parameters being
called once and it choose one exception
which is exactly this kind of oil
injection I'm talking about could be as
equally exception could be a connection
exception could be it sunday exception
whatever and then just execute the code
and you're done right usually when I
should I mean you know this I know I
know but usually when I when I showed
this to developers um it's an eye open
sometimes because they think about mocks
in a totally different way that's my
perception at least like eighty percent
of the people sing about amok like
something which the campus in ian's date
it will still come by they will do
something but it's not this change in
mind of setting expectations and
verifying the interaction that's
something you for many people easy to
enhance fight so in this case arm will
once one exception in second time you
turn something taking taking the water
example of yesterday which should try
two times and with the five minute
interval on the first two times so some
exceptional return 0 return for is
whatever on cert time success you can
control the router from both sides you
have it in your control the reason why
I'm saying this is if you give
developers and idea that unit testing is
not the pain it's not like this state
and doing something in state again but
if you get an idea that it's something
that can really control what they're
doing like this code is appealing to
many developers and then they just do it
right that suddenly say oh yeah testing
is fine yeah I will add another test
produced in error just to be sure and
they get addicted and the quality will
improve so what happened at the company
five years ago was suddenly develop a
sweater that automatically
I went out for vacation and afterward I
got those those messages like somebody
said are the tests are so small and fast
now I can bind him all the time and they
made their own plugins to wonder mean
Eclipse continuously for instance right
they just got got the spirit and improve
the quality on their own or the second
one said yeah you know I'm having this
library here the contact manager it
depends on the database connection but
the database connection is done by the
guy who went on vacation for two weeks
and only works on Fridays and Saturdays
and he's always ninety-five percent done
so I'm kind of blocked but not by
mocking out the interface I could
develop I'm component and I no longer
the critical path so suddenly the blame
goes to the real people right or told me
that suddenly they had less problems in
production they had a lot of questions
in production due to your feigning
database connection and suddenly the
program crashed because it expected the
connection to be still alive and so on
and now they could reproduce the
problems at least I mean it's always
about reproducing a problem we're
producing what happens in your code if
the network here gets plucked you can't
do this as a developer normally but here
they could suddenly and they really
appreciated this and edit tests for this
oh yeah and there was this one guy
approaching and saying you know i mucked
out the world like what but yeah you
know i mocked at the time we have this
yearly letter going out and i could
suddenly test it without changing my
local system time I said yes he got it
it was real because I usually got made
from him from China with second of two
thousand five because tested all the
time
so that improved at this time and the
mostest guy approaching a team like
joining the team the new guy on the
block who said yeah then I wait then I
beta tests which always expects and a
certain whatever and I understood what
it's doing understood water production
code is doing I see some loading faces
here so this is quite obvious stuff
right but still it's an eye-opener for
many people I mean also we are good we
have people joining in and we tell them
all this stuff in the first two weeks
and say wow we can really do that yes
you can with your keyboard okay the Ford
stuff already like if I if I if isolate
my tests and I can be sure that whenever
it's my file system yes basic system
functionality yes it seems to me like
that if you code to mock out all of the
potential interfaces of your application
you're going to really complicating your
code base I guess the usual flexible
answers it depends but yeah so the real
answer is um I agree partly so there are
many function areas which are using like
for if I use the time for writing a lock
statement it might be an overkill to
verify that it's right in the right time
right I could just execute to test and
verify the log statement is within plus
minus 10 seconds whatever or 10 seconds
plus looping and so on if you have some
time dependent function energy like to
root an example of yesterday it
definitely makes sense to it checked it
right because you want to test this
behavior that's my key takeaway it's
this so my perception is when I was a
developer in the last millennium I was
also writing you I was also having a lot
of static dependencies like for time for
the database connection the jdbc stuff
that's a miracle by itself
and I had no test from a code of course
it worked I'm safe confident so I
shipped it to the to the testers and
they gave it back yet doesn't work on it
does work no it doesn't work yeah you
had so try to reproduce the problems
right and now I'm on the other side I'm
doing TDD for all the code I'm writing
which implies that you have a lot of
rebels interfaces like eight parameters
and some from some constructors like
that time the temperature whatever but
it's beneficial for me I perceive it as
beneficial personally but in general I
would say just give the options to the
developers and some of them will use it
and some of the vids say nah I don't do
it just just educate them and give them
the option that they are intelligent
enough to pick the stuff that really
need that's my message talking about the
testability stuff of yesterday and the
lightning talks you know if people have
to write their own tests I mean you all
experience this if they have to I don't
has hardly clean up the code right
suddenly the API some more testable
somewhat they have unique IDs on the web
interface or some somehow they there's
not a humid making some credit cards
their Billings while you're testing it
just makes it obvious so by giving the
tools to the people like Jane unit like
mocking and so on they will implicitly
change their code to be better test ever
stretch goal applied test-driven
development if you see somebody making
TDD you know you did it the right way ok
any questions so far
there are side effects and we will come
to them in about two slides so I recover
it um so when developers write more and
more tests and white better tests this
also means that the code is getting
better hopefully and this also means
that your tests match catch less bugs
but you still need to provide them some
sort of infrastructure to maintain the
test to to be more aware what they are
doing it does not mean that you have to
provide the infrastructure police
provide them the information that such
infrastructure would be beneficial which
includes stuff basic stuff like a
continuous build how many of the
development teams of a continuous build
executing all the tests half of them ok
how many developer teams know the
coverage data ok that's roughly
one-third so do you know how much
coverage your web automation tests
provide your selenium tests how many ok
562 Googlers it doesn't count so it's
similar to the dashboard stuff that was
talked about yesterday morning if you
just provide the numbers and the content
to the developers they will change
something not all of them right I mean
if you have a team of thai developers
that will be two of them will say oh I
perfect code that's fine are we go home
now and then eight of them who care who
say yeah let's see okay we don't have
any coverage for this module well I have
to touch it anyway I will add some tests
you have those people in the gym you
just need to end everything right
talking about side effects yep this is
one of the texts which will be loved
most about America when I watched
yesterday evening television at this
this advertisement for medical stuff and
to say with this dark why's the
disinformation advise publisher made
available problem
so yes mocking is mocking at small tests
is a good idea but it's not everything
right because developers might yeah so
okay because developers might take it
might take it to the extreme like one
case which I guess you know there's
Sylvia doing her component there's
Ashley doing her component and so on and
just say yeah I'm or call the whole
world around it's fine and then I saw
the components together and just in the
subversion system or whatever it gets
compiled it gets shipped to testing in
the tests as well but you know it
compiles but nothing what something is
broken right then and then she says yeah
but my stuff is working fine right Jesus
yeah my stuff is working fine its value
but to the testers for it so this is a
big danger when you're anywhere people
to make small tests test the components
and so on and you will see this
happening I'm pretty sure or who saw
this happening already okay the others
will so the way you can prevent this
from my point of view is just like
similar to the talk to Marcus and Ron
yesterday who said you have this huge
web test and you have this small test
and you have this medium test in between
it's the same thing right but for the
other side you have two small test but
you always need the medium test and it
no it doesn't replace the selenium test
it just makes them easier the key the
key message is that still they should do
the component test because they can test
all kinds of functionalities all kind of
error conditions in their component and
when they integrate like you make Devon
tests where Celia has talked to Ashley
and so on the other way they can focus
on the integration problems not only
sing opponents of the components while
one of my favorites what happened to me
arm is I short-term yokomo code
everything and then the guy said to me
yeah but then I had to walk out 17
objects just for one test what's
happening there which is so there are
two answers to this the real answer is
that's
signal for bad design but if you have
some some functionality which needs to
talk to 17 other objects or 15 if you
take away the time and temperature it's
still it's still too much right so
something is really broken in this
functionality tell it is to developers
is one option but not always working out
so what I usually do to fix this problem
on the middle term is to educate them
indirectly like give talks on testable
code give talks on good architecture and
give them the chance to discover over
here this applies to me as well right
given the chance to discover on their
own that they're doing a bad job and
they want to improve and the other type
of course is the famous coverage trip I
have one test hunting everything like I
have the selenium tests running all the
functionality why do you need anything
more yeah that's of course something you
will encounter all the time who account
to this then three Googlers doesn't
count in this case usually it comes back
to the beginning of the slides like that
you have this isolation of tests and
small test and so on and on okay I
didn't find any better keep out for
cheerleading it's incredible the oil
strange
so key message educate you developers
and will make your life easier right and
you can educate them in several ways
first of all show them Tech Talks from
YouTube shortly the talk of testability
yesterday that we get an inside show
them some articles about efficient
testing subscribe to the testing block
print out the testicle and toilet
episodes persuade them with all kind of
information for my point of view at
least eighty percent of developers are
eager to pick this up and improve the
code if you want to go for a stretch
goal involve them in writing selenium
tests make them write the test slide let
them vital interests and let them see if
it's easier hard and then they were
quite naturally make a test testable we
design it and also test the small
components on their own that's it
questions answers whatever yes please
so the question was about the best
example to look for examples of marks so
what I'm usually using is i'm searching
on YouTube actually because then you
have used you find some tech talks by
Google and other companies which are
like hyphen R 1 hour and what you could
just do is schedule a meeting at two
thirty p.m. I skated a bound back
meeting and just show the video to the
guys in terms of further information
that of course the books out there and
the test the google testing blog has a
lot of information on this like recently
there were more particularly on
testability mocking the new operator
Singleton's and all your stuff yes
okay occasionally yes so we are we don't
translate anymore because there's like a
pure translation service and we have the
same subscribers on both blocks but we
might come up occasionally with switches
specific postings and if you want to
post something just you know send an
email you are invited to post as well
german english or whatever yes
mmm
I was running into that as well and
Michael argument which orbits rectifies
how to test for 40 behavior like how to
test what happens if the network here is
plucked and so on right you forget the
answer I don't care well okay then
you've got one of the first developers
the one with self-confidence right then
you have to move on to the next room and
try it again but in general this helped
and the second thing is that there's
some resistance for this new type of
testing right because you have to try
this expect stuff it's somewhat strange
global metals whatever so you might have
to guide them to the first the first few
tests but hopefully they will see the
benefit once those who if not then go to
the next one but it's not cheating it's
similar it's simulating said again this
will be GG jersey but it's not like a
hidden code for invisibility in some
games right it's not that kind of
cheating yes
have you tried in syria's class that's
too but if you want to appreciate job at
five in C++ and Java will be fine bonus
okay so the question is about a metric
to measure whether it's good or not in
the beginning to motivate the people
this is 5 divided also going well I I
mean you can come up with some kind of
matrix like coverage or whatever my
perception is if people don't feel it
like beneficial they will question the
numbers anyway so even if i signal
coverage a quiz for 40 to 80 it may be
fine for the management but developers
say yeah but you know it's did we have
these problems and still it's nasty to
do this stuff but so it might be differs
from person to person of course but my
perception is that when you talk to
somebody and show them the benefits of
this and he gets infected because
suddenly you know developers want to I'd
quality code they want but they can't
really test stuff they don't feel they
don't have the tools so it just give
them the tools to succeed in the gold
they are searching for nothing more
nothing less but the motivation has to
come from the developers right they want
to make sure that the code is working
fine in case of a secret exception they
want to make sure that the code is
working fine if the time is going
backwards okay bad example would get
idea so you just catch the motivation
and give to the tools and David Kevin
automatically hopefully yes
the last
that
and they would sit there and then we run
halfway forever
so the question was to summarize that
you had mocking in a company like two or
three years ago and then the developers
went away from walking because it was
too far away from reality well that's
because the cold was fine the test was
fine but the reality was different well
that's this problem right that you just
have this component here and Lydia are
actually think it's actually actually
thinks that she wants to isolate the
whole staff here and here called is
working fine but it's not connected to
reality so I mean you can solve this
partly with medium taste like Ashley
talks to Sarah Sarah but it doesn't
replace end-to-end tests right so it's
never if you only have two small test
it's not a full coverage it's full
coverage in terms of lines but not in
terms of tests however if you have the
error conditions here and still the full
end-to-end test for the good cases you
should be good to go normally in my
experience but let's talk about this in
detail at what I'm curious to learn new
stuff here anybody else yeah
um yes the question was about prism it
was to have unit tests before they're
able to submit um yes but again the
developers have to agree I thought they
have I mean you have to explain why you
need to prevent you from our point of
view having the president view helps to
catch the last twenty percent to write a
perfect code right that's that's for
sure but you have to have the majority
of the developers behind you on this
concern stretch goal have them were at
the principal Hewitt that's the best
thing that could happen ever else
everybody hungry
okay so enjoy your lunch
Oh</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>