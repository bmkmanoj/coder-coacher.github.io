<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>The Future of Interactive Graphics in R - A Joint Visualization and UseR Meetup | Coder Coacher - Coaching Coders</title><meta content="The Future of Interactive Graphics in R - A Joint Visualization and UseR Meetup - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/GoogleTechTalks/">GoogleTechTalks</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>The Future of Interactive Graphics in R - A Joint Visualization and UseR Meetup</b></h2><h5 class="post__date">2011-06-17</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/iSXNfZESR5I" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">it's really neat to see so many of you
coming out tonight here about something
pretty esoteric so interactive graphics
in are so before I begin to how many of
you have used our before okay let's go
and how many of you have used G teapot
or at least eight of it
okay cool so if you haven't heard of
ggplot unfortunately the first bits
gonna be a little bit boring because I'm
not really going to talk about ggplot
too much I'm just going to say kind of
you know why do I develop but why did I
bother doing this and then talk a little
bit about what's going on with ggplot at
the moment I don't want to spend too
much time in there because I want to get
to read the meat of the talk which is
with ggplot2 and in general we're an
interactive graphics and I going okay so
what why did I start developing geeky
pop - well this is sort of a really one
of the motivating examples so this is in
2004 when I was kind of I was really
into lettuce so he's they used to use
lettuce a lot and this is this plots
kind of interesting because we've got
three lines here and you can see we've
got a nice legend but we've got this
problem so we've got two h2 m in 12 H
and what I wanted to do is say well
let's have color you know given to H and
M and the line type given to that number
and you know I tried and I tried and I
tried and I could never get led us to do
that so those sort of thrown the first
of my niggles and there are a few other
things like what is the line panel not
automatically order the point so if any
of your lettuce users you might remember
the frustration of having your what
should be a nice line graph look like
crazy crazy schools and there's a few
other things you know why can you
describe a histogram with a bin widths
what's why if you have any exploit XY
plot and set the panel to a
box-and-whisker plot why was that the
same as a box-and-whisker plot what was
the real difference there and also why
was it so hard to get different datasets
on the same plot and about the same time
it started reading the grammar of
graphics by Lee Wilkinson so how many of
you have heard of this book this is I
think a really really fantastic book in
terms of laying out us of a deep
underlying theory beneath graphics and
and why
we need such a theory well basically
because it really helps us to think
about graphics and if we have a bit of
theory underlying our software system
then we can make sure we can combine
independent components more easily so
instead of having a whole lot of named
graphics what we're gonna do is figure
out one of the components that define a
plot how can we combine them together
and then create this idea of a grammar
so we can describe plots as combinations
of their component parts rather than
giving them some special name so looking
back this made me realize I've actually
been developing ggplot2 for over 5 years
now a ggplot at least so I start
developing it in 2005 and in version of
our 2.2 so it's out so now our 2.13 so
it's kind of scary that I've been
developing it for a living version sabar
now so I put a few milestones there so
it actually came out in April of 2006
and I announced in July so there was a
ggplot before ggplot2 I'll mention
slightly why that was the case and in
the ggplot2 mailing lists didn't really
get going to the end of 2008 and then
the ggplot2 book in 2009 so if you're
the highlight so in point 5 was when I
transitioned from ggplot to GT bought to
where I added this is this nice idea of
adding plot components together with
plus it wasn't really until the next
version when there was documenting and
the version after that allowed you to
actually change the plot so you could
have like white backgrounds for your
your journal needs also looking back at
my talks on ggplot2 I notice I've made
this rather present slide in 2006 when I
said hey you know implementing that
grammar was actually pretty easy we've
got this really nice elegant underlying
theory that makes it easy to kind of to
program the big picture but the hard
stuff really is the details so how do
you figure out what the detailed scales
I'll wait you tick mark how do you allow
the user to control the plot and sort of
interesting least some other milestones
so remembering the first version of
ggplot2 can
in April 2006 they in that month I got
my first question about how do you put
two plots on the same page which is
recurs today while it breaks and such
why the tick marks and the axes such in
such bad positions and in a month later
how do you get rid of the gray
background so and if any of you
subscribe to the ggplot2 mailing list
these questions continue five years
later so your so surprising that really
the big picture stuff once once you have
this nice elegant underlying theory the
big picture stuff is actually pretty
easy but as with many things the Devils
in the details getting really really
good polished visualizations requires a
lot of work tweaking these small details
ok so what's going on well one thing I'm
really really I just love about ggplot2
as the community so we've got a
fantastic mailing lists about 1500 menu
members 9,000 messages scarily I've
written a thousand of those and unlike
our help it's generally pretty friendly
you're not gonna get anyone calling your
moron or similar you don't like overflow
is also pretty good place to ask
questions I hardly answer any ggplot2
questions on Stack Overflow anymore
there's a great resource of people there
who can help you if you get stuck and
even more importantly for my sake is
then the last version about half the
fixes and features were contributed by a
community member
Takahashi koshkin so it's really great
that's of GD p-- lighters mic rating
beyond me and they have to worry so much
about me getting hit by that bad Cal
train on the way home and no more
development happening some are really do
teapot two is way way too complicated in
fact I don't really understand how a lot
of the works myself anymore and it's so
it's really difficult for me to develop
it because I don't know how it works and
it's even harder for people who never
understood how it worked to do anything
so also ggplot2 while GD plot was the
second half package at rode I've
narrowed in about 30 so I know a lot
more about our package development so
what I've been doing this
starting on the summers trying to break
it up into simpler pieces pieces that
people writing other visualization
systems and art can use you know it
doesn't matter what sort of plotting
system you use it's always hard to come
up with good scales and automatic tick
marks so rather than every person your
lattice and ggplot2 and JJ plot and
other derivative plotting systems rather
than everyone having to do that hard
work you know why not pull out all of
these all of my hard work into separate
packages so you can use the same ideas
without having to buy into the whole
ggplot2 philosophy of a whole lot of
other things that go along with that so
I'm making it easier and made some bad
decisions very early on to use proto and
C of S 3 and now as one documentation
rocks adjourn and serve two entirely
separate homegrown documentation systems
I wrote it's gonna have some tests and
the next version which is great for me
because now when I fix one bug I'm not
going to create another bug and I've had
a few cases where you know in one
version I fix a bug and they creates a
new bike and then on the next version I
fix that bug and it recreates the
original bug and it takes me a little
while to figure out that I'm going
around in circles I'm also working with
revolution analytics to get ggplot2
working with big data so this is pretty
exciting so that the idea at the end of
us you know if you've got 120 gigs of
data it should be trivial to use ggplot2
with this so this is gonna be open
source working focused work initially
and working with revolution analytics
high-performance data structures but a
lot of the backend works going to help
make ggplot2 faster for all sorts of
other data as well because unfortunately
that's really I think the biggest
downside of ggplot2 at the moment is
it's it's just dark slow sometimes so
the other thing I'm really trying to do
is kind of you know my job I'm not a
software developer I'm an academic my
job is to create research and create new
things it's not to make nice nicely
develop to our packages but so from them
so my I'm always kind of torn between
these two perspectives one of kind of
pleasing my existing
as being a good software developer and
being a good academic and producing
things I really pushed things forward
rather than execute existing things
nicely so trying to figure out how to
fund may be a full-time ggplot2
programmer and to really help others get
the a skills up to a place where they
can start developing my packages so or
how a list why not just make packages
but generally how can we get kind of
more skills programmers in the heart
community so it can instead of doing the
same things again and again badly we can
really figure out what a good ways of
developing packages so it can be
creating new things as well so you know
if you have a few million dollars lying
around send me an email and I'll be
happy to help you spend it okay so now I
want to talk about the fun stuff so
which is the future so hopefully if you
so if you don't know anything about our
which is you've got to now at the time
to wake up again but to talk about the
future really I do have to go back to
the past again and what I want to do is
compare two systems for doing research
in statistical graphics so one is a Ryan
one which John McDonald used in his
thesis in 1981 and my laptop in 2011 so
about 30 years difference so Ryan one
cost about a quarter of a million
dollars my laptop was about two thousand
so you know the cost of computers has
come down a hundred falls here than
eight megahertz computer my laptops two
gigahertz so it's about three hundred
times faster here 128 kilobytes of
memory I've got four gigabytes so thirty
thousand times as much memory but if we
look at the screen actually we come out
about even so we can cheat things a
little bit if we Adam I've got a 30 inch
monitor so if we add that into the
picture the cost goes up a little bit
and we've got a few more pixels than he
had 30 years ago but I think this is
really striking in the last 30 years
speed as a grown incredibly memory you
know both memory and disk space have
increased incredibly but we're basically
at the same number of pixels as we had
back there by and large so so what can
we do what does that mean for graphics
and you know even though our data is
getting bigger our screens are not and
even if our screens were getting bigger
you know it gets to some point where if
you have to do your analysis on a giant
wall it's not quite as convenient as
doing your laptop so what we really need
is interactivity so displaying the same
data we need ways that we can really
really quickly change what we're
displaying either change the data the
way we're displaying data or change the
way that the raw data is summarized so
it's some level whatever the size of our
data said it always has to come we can
never display more data than we have
pixels on the screen so we always have
to aggregate doesn't matter if we've got
a hundred thousand points or 100 billion
points if we want to visualize it we
need to be able to aggregate it show it
on the screen and we need to be able to
very rapidly change what we say so what
I'm going to do next is show our four
little applications I've written these
are all written in our I'm just showing
sort of what we're we're trying to go in
terms of interactivity
oops wrong one that way so this is a
little applet that I wrote after I saw
this visualization online have any of
you seen this before so it's really
interesting so and slightly creepy so
the IRS releases the state of the IRS
are basically only people in the US who
know where you lived last year and where
you live this year so they released this
information to the public about where
people are moving so what this is is a
map of the u.s. I've clicked Story
County Iowa which I'll talk about
shortly and what it's showing is where
people migrated from and to so I think
this is really neat data but if we pick
someone a little bit bigger we can see
that this representation doesn't work so
well it's kind of hard to see what's
going on yeah so I really like this this
this visualization this idea how can we
see where people are moving around the
US but didn't like this representation
so much so here's my version so
hopefully that's all look this looks
familiar to all of you we've got a map
of the United States it's broken down by
County so this is all written in our
what I'm doing is they hover around you
can see the name of the county in the in
the bottom lip so what I'm gonna do is
click on story County Iowa so this is
the the home of Iowa State where I did
my PhD and what it's showing is the gray
dots show where people have moved from
to move into Story County and the red
dots show when they leave Story County
where do they go to so thing this tells
a pretty interesting story because we
look who who's moving to Ames Iowa where
are they coming from
well basically people come from all over
Iowa and then where do they go well if
you go to Des Moines hmm this is Kansas
City in New York Denver Houston Bay area
so people move to story city from Iowa
up to historic County from Iowa and then
when they leave they go to big cities
so we can actually follow this so this
is me I moved to Houston next so when we
move to a bigger city obviously they've
got more data right this is only shows a
minimum of ten people moving from one
County to another so when we move to a
bigger city when you've got millions of
people we've got a much higher
proportion of people moving around so we
can see you know a lot of people moving
to Houston from the Northeast people
were interestingly people seem to be
leaving when they leave Texas they seem
to leave for outlying areas so these are
kind of out some of these are these big
red dots are outlying suburbs so that
the the size of the data is proportional
to the number of people I don't have a
legend here mainly because legends are
basically the hardest part of any
graphic system to write so they're still
laughing a little bit here but one day
hopefully so we can also follow well so
if we see we can look at where so I
think we're in Santa Clara County right
so you can see where people are going
from there as well again coming from the
Northeast seems and then they move out
further north or into our bang suburbs
so you know sort of I really like this
example because it's a pretty big day to
see it okay ship I mean what these
things are I think
observations so there's 2000 counties in
the u.s. so it's from every county to
every other County but obviously there
are a lot of counties you know if you
kind of pick somewhere out here this you
know there might be like five people
living in that county anyway and they
all live so there's also sort of an
interesting thing which is a problem
with a lot of of maps is that sort of
County size tends to be roughly
inversely proportional to the population
so the bigger the population tends to be
the smaller the county which is a
problem whenever you're trying to
represent data on the map because you
know you don't really want to draw
attention to this region out here where
it's basically the Rockies and no one
loves sewers over here and
Northeast governments and millions of
people but the count is really small to
me hard to see that it's also
interesting right the other thing I love
with these maps as you can see you know
this is the creature this is the
Mississippi along here right we're not
really seeing the Mississippi we're
seeing at how Fitz County borders that's
kind of a side the other thing is I've
now lived in the two states that have
the highest number of counties in the
u.s. both of which the counties were
designed so that you could ride your
horse to the county careful in the day
again as a side okay so that was sort of
one little example it's really a
complete in some sense it's a completely
novel visualization right it's not a
scatterplot it's not a line chart it's
something new the interaction is
specific for this problem okay
the next thing I want to show else and
you have to switch so again this is a
development level software so we have to
do a little bit of jumping through hoops
how many of you have heard of Jacobi and
you own a few okay so I'll talk a little
bit more about this shortly yes what's
the wrong file on me but one thing the
direction where govt is going to gob was
a software for interactive and dynamic
graphics we're basically rewriting it
all than ah so let me reduce the
dimensionality of this a little bit okay
how many people have heard of a Grand
Tour
okay any smaller so the idea of a Grand
Tour is really simple right if you want
to figure out the shape of a 3d object
what you do is you look at it from
different angles so what I've got here
is a 3d data set right I've got three
variables and I'm just randomly rotating
it around looking at it from different
projections so if you watch this for a
while and I can add on some color have
you watch this for a while you should be
able to build up a pretty good mental
model of this shape so even though so
we're not there's no 3d here right
everything's in the 2d you just seeing a
sequence of projections in the 2d and
your brain stitches this up into 3d so
neat the basic idea of the Grand Tour is
that the mathematics is exactly the same
for 3d as it is for 40 so now we have a
four-dimensional data set we're randomly
rotating it around and looking at it
from different directions so one thing
to kind of when you're looking at plots
like this no longer it's not just the
position of your points they might tell
you if they're clustered together but
it's also the relative motion so if
points are moving together then they'll
seem to belong to that group to keep
that you know if it generalizes to 40
then well we can go all the way up to 90
if we want so so you might see if you
watch this for a while that you know
I've colored these these three regions
three different colors you can see
pretty quickly right that we can
separate these out it does seem to be
some separation between these clusters
they're not intertwined so that might
give us some hope that if we're going to
and predict these cost of membership
from the data that we might be able to
succeed if we pick the right method and
then this data said you can't see that
just by looking at individual 2d
projections but that's that's just not
visible in the data so there's a few
other things we can do so the Grand Tour
just randomly wanders around you know
and there's the size of the data at this
number of dimensions gets bigger and
bigger it's going to take longer and
longer before you see anything
interesting so what we could do instead
of doing a grand tour we were randomly
moving around we could use a guided tour
so the idea of the guided tour I didn't
think a very good one so instead of
randomly going around it's gonna tour
within 10 it's gonna try and find
projections then the index I'm using is
going to find projections where the
clusters are separated it's taking
longer and longer it's doing a
stochastic kind of search to find these
projections and here's one where it's
done a pretty good job of separating out
those clusters right and then if we
really wanted to do we go ahead and
interpret this we can read off these
guys here are the axes produced
projected down the data space in the
same way you know if I'm rotating in two
dimensions this is a little bit
mind-boggling at first but you can
actually use this idea to get a fairly
good feel for four-dimensional and
higher shapes even though our brains are
not particularly well suited for the
task
so what else so this is all written in
our again this is a little bit in
elegant because I'm using as I'll talk
about shortly QT to draw this graphics
canvas and GDK to draw this GUI so we've
kind of got two completely different
graphic systems GUI systems going on but
you know we've got all sort of our usual
sliders we can make the points big and
faint if we want or whatever
so that that's the so the thing that
that's really amazing about this is this
is now actually faster than Jacobi so
gob was software purely written and see
and now in our which we've got the right
primitives that we've got the right
functions and our written and see we've
written them really well that means we
can now actually write high-performance
graphics just using our code I'll come
back to that thought in a little bit
surfaces are joint work with Bay who
might be in the room now and if she came
on up but she did sound out okay
so another thing I want to show another
kind of custom visualization I created
so they went spy myself kind of going
down these rabbit holes so I'm trying to
figure out how I can make ggplot2 faster
and so how if I'm gonna make it faster I
need to first understand where it's slow
and well there aren't any particularly
good tools and are for that is some some
of this good tools for capturing what's
going on but for visualizing exploring
that there are so this is a little tool
my grad student whipped up for me so
what we're looking at here is a
profiling data so you can see down here
down the bottom this is the function I
called the print function and the print
function called Q plot and some other
function so this is a way of exploring
what functions are taking up the most
time in ggplot2 so you can kind of see
so this is the the bottom level that
function the in cause other functions
which call other functions which call
other functions all the way up to about
20 levels down and you can see the width
of the function is how long it takes to
run so one problem with this kind of
display if we're doing this in our
graphics our vector graphics which is
normally good right it means you can put
them out to a PDF and you can kind of
zoom and infinitely and gives you all
sorts of nice things the problem is that
it doesn't give you access to kind of
the pixel size it's too far extracted
from the actual screen and so one nice
thing you can see here which is
extremely difficult to do
our graphics is when the boxes are big
enough to put the function name and the
function name appears there's a few
other features so we never hover over a
function it's going to tell me the name
in the top left corner and it's causally
going to highlight all of the other
calls of that function in here and then
finally I can click on so it can click
in here and zoom and find out what's
taking up the most time so this is kind
of interesting you can see so this
building process is where ggplot2
basically collects all the data scale
that transforms it creates a nice data
structure then ggplot Grob basically
takes that nice data structure and turns
it into a whole lot of graphics objects
and then grid draw draws those graphics
objects so this is really useful from my
perspective because they can see where's
the time going well I mean I didn't grit
down at my control so I can't really
modify what's going on here so that
suggests if I want to make this plot
faster
it's about equally between the building
of the data structures and building up
of the graphical objects and you know I
can continue to zoom in and to find out
in other ways what's going on so so this
is really neat because it allows me to
create this I'm just really this is so
neat because it allows me to understand
what's going on and and profiling doing
a much much better than I ever could
before and I've kind of been dreaming
about this tool for like the past five
years and and now the QT pane which I
talked about a little bit is is really
mature enough that you can whip
something up like this and a couple of
deaths so it's still a long way you know
my eventual goal is we want to be able
to whip something like this up and in a
couple of minutes right like in the same
way that with ggplot2 you can create an
entirely new graphic in a few minutes
we're not benching you got to do the
same thing with interactive graphics so
by figuring out what the perimeters of
interactive graphics are thinking about
how we can combine them we can create
new graphics and much much easier way
and in my mind that really if you're
using graphics for data analysis the
speed of iteration is one of the
most important things you know if it
takes you 15 hours to come up with your
graphic then you're gonna be really
really really unwilling to change it and
to me that's that's when I look at sort
of infographics on the web that's the
one thing I always wonder right you've
spent so much time making this beautiful
thing and I can see you've spent like
days and days and days and days doing
this but how do you know that's the best
view of your data and unless you can
really look at many many different views
of the data very very quickly the
chances are you're going to end up with
something suboptimal so I certainly
don't you know I I think it's great when
you're trying to communicate you do need
to spend a lot of time polishing a
graphic but you need to make sure you're
polishing the right graphic not just the
first one that came to mind okay so one
last interactive example and this is
joint work with equate pikey dye and the
entire Iowa State State graphics group
okay
so I kind of have to apologize for this
data set which is really awful it's the
crimes whoops kind of move the wrong
window there
it's the crimes data set in R so it's
really awful so just ignore the data and
focus on the idea so what I've done is
I've drawn three plots I've got a map of
the US so I've colored the states
according to their population so you can
see here's California with lots of
people again we've got you might notice
that perhaps we haven't picked the
breaks as well as we might we've got a
scatter plot here which shows the
population on the x-axis and the log10
proportion of robbed or robberies with
population and here I've got a parallel
coordinates of all of these different
different attributes so the neat things
about these graphics is that are linked
together so if I click on California
here I'm going to see there in the
scatter plot it's the biggest it's got a
pretty high rate of robbery and I can
see that in the car parallel coordinates
plot as well or I can go to the parallel
coordinates plot select some points
there that look interesting to me and
see where they are on the map and where
they are on the scatter plot so this
this idea of linked brushing is really
really important you know if you want to
get it if you want to figure out what
the multivariate relationships are on
your data really really helps to link
together
multiple views trying to put everything
onto a single plot so let's plot ok so
the idea I should explain it briefly in
the air the idea is so I've got 1 2 3 4
5 6 7 8 9 10 variables and my day is
here so it's 10 dimensional what I've
got here is each line represents an
observational each in each and the
original data set and that so and my
variables are now going across so this
is the population variable the violent
variable the murder variable rape
robbery assault and so on and the lines
connect the value for the observation
across all of those variables so
I'm not a big fan of power accordance
because the reason I think they're
difficult to read is because they try
and put everything on one plot so
typically what I think it's easier to
work with is kind of simple plots that
you then join together so the idea you
know it's kind of easier to work with so
a couple of scatter plots appeared
together you know with two scatter plots
together we can get some idea of a
four-dimensional shape of the data and
here we can connect it to a spatial view
of the data as well so I should let's
see if I can resize this okay so one
thing I can do is we can kind of brush
down so these are the states or the
highest robbery and moving down lower
and lower so can you see any spatial
pattern there it looks like there's a
bit of one right there may be robbery
get fewer robberies the cholera gets
perhaps so for this example in
particular I just wanted to show the
code that creates that briefly and here
it is so we've got basically 30 lines of
our code that creates those plots so
this really is what the future of ggplot
is going to go be really is at the
moment so there's this packages called
crane bus I'll talk a little bit more
about it shortly but the idea is we want
to create plots that know how to
communicate with one another and the
thing that really is amazing is that by
and large all of this communication is
done in pure our code will talk about
the exception so you can see here you
know I've loaded up my state's data I've
converted into a cue data frame kind of
again with the Q stands for but
basically that turns it into a mutable
data frame so a data frame that you can
actually modify and that other functions
can listen to and see what's changing
it's obviously really important if you
want to link together two plots you need
some way of communicating between them
then I create a map of that
get the cry work their love and approach
this thing on the crimes data do the
same thing convert it to this Q data
which allows us to link the different
plots together I create a parallel
coordinates plot then I specify how do I
want to link the different datasets
together I've got a data set that is the
map borders the county of the states and
I'm going to datasets a crop that's
crimes how do i how do I describe how to
match those together how do those linked
up and then finally I do that that's
scatter plot so really what we're
working towards is being really really
really easy to make sort of interactive
graphics in R so this project that's
Krampus project is really the future of
G Kobe rather than the future of GG plot
so the emphasis on this is on cran bus
is recreating kind of the most common
plots in a way that's really really
efficient so it's more like kind of
based graphics or lattice graphics it
doesn't have this idea that this is some
deep theory it doesn't really make it
possible for us to create our own
interactive graphics so I can show some
of the other the other codes of the code
for the the first one we're looking at
migration so it's about 120 lines of our
code right so if you and I can't really
show you there's nothing going on behind
the curtain but hopefully you can see
this all looks like ah right I'm just
writing in an hour I didn't need to
learn see your job or anything else I
can now start to write interactive
graphics just using what I know about
our code ok so those are kind of the
four demos that's probably the the
highlight of my talk as well talk a
little bit more now about what's going
on behind the scenes there so how
instead of just relying on my
interactive graphics how can you go out
and and create your own and aha
so there are basically three well
there's two key packages here and a
couple of other ones that we've been
working on so QT paint provides us with
a high-performance graphics canvas so
this is backed by OpenGL it allows us to
really really rapidly
pushed pixels on to the screen so its
face works comes from the QT library
uses OpenGL sets hardware accelerators
really really really fast on the other
hand we've for the linking we've got
this plumber package which gives us
mutable data frames so and are basically
whenever you think you're modifying
something you're not you're actually
making a copy and modifying that so
obviously that's a real problem if
you're trying to communicate between
different plots because nothing ever
changes you're just creating copies that
get updated so we need some kind of data
structure that allows us to communicate
between different plots into other
package to the tour package you've
really got to roll that our this is two
hours there implements basically the
ideas behind the Grand Tour in from
Jacobi and pure our code again sort of
surprising it actually turns out a lot
of these it's you can implement these
things not only that quicker to program
an R but they turn out to be actually
quicker than the equivalent C code
because you know the C code and you go B
was written by a bunch of interactive
graphics researchers the C code for like
matrix manipulation and our was written
by people who really know how to write
fast code so that sort of moving up to a
higher-level language doesn't have as
many performance penalties as you might
think it's still it can be really really
fast you know as I mentioned before the
scales package is slightly extracting
the scalloway code out of ggplot2 so it
should in future be easier to draw a
legend on these plots because it can use
leverage a lot of the code i've already
written for to do plot to to stuff the
really hard hard hard stuff and
interactive graphics like figuring out
where your tick mark should go okay so
i'm these the key t paint package is
written by michael lawrence and de pie
and sokka the the lettuce guys there's
two components to this so QT base
basically provides a complete wrapper to
QT cuties
kind of yet another set of lip or he's
parading gooeys we have chosen to go
with cutie because it for makes a nice
wraparound OpenGL a nice way that X is
the really high-performance stuff that
your graphics card can do without having
to worry too much about the fact that
there's like 200 different graphics
cards and each do things slightly
differently so QT base is very general
you can use that to write all sorts of
gooeys anything you could do with QT and
C++ you can now do an hour and then QT
paints build on top of that it's
basically it's of a next-generation
graphics canvas for us so instead of
relying on the old slow high graphics
devices which you know sort of sort of
Phyllis tration as if we just want to do
stick a million I guess I generate a
million random numbers and I plot them
you know we're sitting here waiting for
a something would be this line here
we're sitting here waiting right if we
want to go to do interactive graphics if
we want to be able to animate things we
need to be able to pushing we need to be
doing things so we can update the screen
30 times a second right we need to be
taking on the order of 30 milliseconds
not as we did here 25 seconds
so I mean one component of that is doing
you know this is obviously a really an
informative plot we need to do
aggregation right we need to do some
statistical computation we need to think
about what to display do we want here
how do we want to display that 2d
density but also we just need some being
a way of pushing pixels up onto the
screen so that's as really it as fast as
possible it's not a bottleneck fast
anymore so basically these are the
packages that do all the hard stuff
they're all written and see if you build
on top of these you don't need to know
anything about see you can just use pure
R to write fast graphics so currently
it's painful to use these packages so
you can only use them on the Mac and
some variants of Linux and requires like
eight hours of compiling stuff typically
which is not a really pleasant user
experience but we've kind of learned
from the past and really what we want
that the I am and hopefully we'll be
there by the end of summer is that
you're just going to say in our
installed up packages QT paint you don't
need to store anything outside of our
just installs everything you need and
you're up and running with interactive
graphics just like that so I think all
going well that's probably gonna make
one of the largest packages packages out
there because you never download about
20 make of system libraries and stuff
and unfortunately it's gonna have to be
on bioconductor rather than a crane
because of a disagreement over what the
what GPL 2 means in terms of
distributing source but all going well
we will have this available we really we
you know for any for interactive
graphics to take off
for this to be for people to use this
where you absolutely know that it has to
be super super simple to install and
that's really what we have quit pushing
for so there's a few years still a few
challenges we're trying to resolve both
the kind of the programming level and
and also the how do we you know how this
way to write interactive graphics and
our how can we people how can we help
you know people are experienced our
programs get up to speed on this really
quickly you know there's some really
really fundamental changes that if
you're used to working in our where all
of your objects are mutable you can
never modify them the object system is
completely different to what you might
be used to from Java or C sharp or
whatever and then all of a sudden you've
got to sort of start thinking about how
mutable objects work again how do
objects work in Java and c-sharp and
there's some a little bit of a mismatch
in terms of your thinking in an our way
and thinking in a C++ way they were
still trying to resolve also currently
you need to be able to be happy reading
documentation remember C++ and then
translating that into the original r
which is not so easy and then despite
the fact that i said that QT is supposed
to kind of abstract over these
differences in graphics cards we're
still having a few problems with that so
it's unfortunately it's kind of a little
but really depends on what version of
what graphics card you currently have
installed on your computer with or work
or not that we were fairly hopeful and
this will all get I get ironed out and
again I'm just being easy to kind of get
up and going at least on a relatively
modern computer with a modern graphics
card so with kind of that in place you
know where do we want to go and the
future and again useful to look at what
people have done in the past and I think
it for for interactive graphics tools
it's really useful to kind of break them
down along some continuum of high level
and low level so the idea of kind of low
level systems is they should you know
flexible you want to work with car you
can be writing a lot of code you're
thinking about things at this is about
graphics level and they tend to be kind
of more
research focus so we don't you don't
expect that people are gonna be picking
up these low-level things and using them
you know for data analysis almost our
users aren't interesting that kind of
thing so this kind of level what I just
talked about QT paints processing how
many people have heard of that that's
sort of a java-based web visualization
that's sort of a massive generalization
but that's pretty low level as well
you're really thinking it about this of
the pixels on the screen kind of level
no potagooos moves a little bit further
up the abstraction and that's it's
written in Java Script sort of starts to
think about about having components that
you can combine together then we move
across as we move across we kind of move
up into systems that start to have more
pre-built components so Jacoby you know
you can't create a new graphic and
Giacobbe you a new type of graphics you
can just use the existing ones that are
built in in the media so if they move
further and further up we get a more and
more polished GUI so things like tableau
a Spotfire
Mondrian or may these are really
targeted towards specific types of daily
houses these typically have for you if
you work with these with a GUI you're
thinking about visualizing data you're
not thinking about you know what the
pixels on the screen are going to be
you're using them for data analysis
these are some of the really high level
things so and then in a krampus package
which I've forgotten coming out right so
you can use these kind of built-in
graphics you can connect them in new
ways but you can't use the Cranmer's
package to come up with fundamentally
new types of graphics so personally what
I'm really interested in is basically
the grammar of interactive graphics so
how can we extend the ideas of ggplot
thinking about one of the fundamental
components of a graphic now thinking
about one of the fundamental components
of an interactive graphic and how can we
pull out those pull out those building
blocks so that we can combine them
quickly and easy to create new types of
and director
graphic so no currently with cutie
painter may take me you know two or
three days to design an interactive
graphic again you know that's too long
it really hampers experimentation I've
got no idea whether that graphic I've
just created is going to be successful
or not I need you to move to something
where I can start iterating graphics and
hours or minutes so I can really tailor
the graphic for the task but I want to
accomplish so check back in five to ten
years and I'll let you know how that's
going so unfortunately it really is a
lot it's a much bigger challenge than
just figuring out static graphics
because there's just so much more you
know what what are the possible things
you can do to a graphic is just such a
huge variety of things you know what can
you do the keyboard working you with the
mouse clicking and dragging thinking
about higher levels you know what's
really going on there and how can we
think of some way to decompose that in a
way that we get building blocks that can
be joined together orthogonal need to
create something new so that basically
concludes my talk I just wanted to
quickly say so I'm also really really
interested in the process of dairy
analysis so what do you do when you're
kind of getting data in and trying to
get understanding and insight so a lot
of what generally my my research
designers how can we make data analysis
easier and that sort of naturally raises
the question of what is data analysis
what are we doing when we do data
analysis and you know I've created tools
that work well for what I do when I
think I'm doing data analysis other
people seem to like them but I'm really
interested in any perspectives you might
have in terms of what are you doing in
ten ounces what are you struggling with
particularly in the context of our you
know what what do you find easy and our
what do you find hard an hour but also
generally in any programming language
one of the things that you're kind of
struggling with when you're trying to do
a data analysis or again if you want to
find out anything more about the
packages I've mentioned so they really
are the survey alpha of beta stage at
the moment but all the corridors of
Opel online we have some fairly reliable
ways of getting them all installed and
working on your computer so if you are
interested in experimenting and you're
prepared to put a lot of time into it
that's definitely possible and please
feel free to shoot me an email about
that and then finally if you've got
internships or jobs for my students and
trying to churn out students who are
kind of understand both the statistics
and they have the computational tools to
deal with large data so if you're
looking for undergrads or grad who can
do that I'm also really interested to
hear from them so thank you just people
have questions I mean I'm interested in
real time streaming oh yeah and that
presents a big challenge for you guys
you can represent it by consecutive
snapshots or you could also embed into
the visualization characteristics or
something
for instance the variability that the
strength of it trying other things so if
you're trying to identify trainees among
a lot of alternative objects as early as
possible part of you yes
I mean streaming is not something that
I've ever really worked with I mean my
main recommendation I Simon ebony at
AT&amp;amp;T who's also developed a lot of
interactive graphics tools and stuff for
our I think he's he would be the person
to kind of watch in terms of what's
going on the only no he's written some
papers on kind of approaches to
streaming dare and dealing with it an
hour he's on the he's involved in AT&amp;amp;T
on the u-verse team so they have huge
quantities of data coming
Simon Urban Ink
a few Google I think I plots is one of
his ah packages for interactive critics
so think people we might want to move
that'll play so I mean if people have
questions just come here to ask sorry
because we're doing recording
this is really awkward so my question is
uh what are your plans for making this
interactive stuff work with the web yeah
that's a good question so I'm in a quite
out answer in some way is that this is
not the audience I'm aiming for so I'm
in some ways I'm primarily interested in
the exploratory graphic so graphics that
you're doing for yourself as a way of
understanding the data so the
exploratory graphics you know you go
through hundreds of them you throw most
of them out a few of them give you some
insight of the data or in a few you can
keep and polish and make available in
turn into expository graphics which help
other people understand what's going on
so for exploratory graphics I'm just not
sure how useful the web is at this point
so I'm you know I'm kind of following
the you know the WebGL stuff and html5
and so on but it's still I think not
quite there so you always gonna need
some kind of data back in data analysis
back in that's gonna do all the
statistical transformation and you know
if it's points I've thought about how
can I write you know ggplot2 and
JavaScript and then I look and see
whenever I look at a graph again any
non-trivial graphic I do typically has
something horrendously statistical of it
like a nice lowest smooth curve through
the date or the density estimate and
when thinking about really meaning all
that and another programming language
just seems kind of pointless
so for exploit your graphics I don't
know I'm not convinced that the web is
ever gonna be right for that
particularly because you want to have
these sort of entering model windows
that are all linked together for
expository graphics obvious it's great
it's great to be able to think about
what's the sort of a limited interaction
I can provide to the people have a
little bit of freedom to explore the
data but I've constrained them in some
way and I think the New York Times you
know the interactive graphics are
fantastic illustration of that you get a
little bit of freedom to explore the
data it's really interesting but it's
not enough rope to hang yourself you
can't kind of get
interesting place or it's not really
confusing you know 300 GUI menus to
choose from so I don't know I mean
really what I'm aiming for is
exploratory graphics maybe the stuff I
do all have eventually become expository
but it's probably enough where for me
figuring out how to exploit your
graphics but I think it's really really
interesting it's really really important
and I think we're seeing some stuff and
I are in terms of exporting out Pro
totus graphics and things that I think
that's really neat but it's just not
something that I'm working on question
about how the interactive graphics works
with the actual database and
manipulation to the database what I'm
thinking of is you have a set of data
and you make these graphics you do
several things with them and you have a
routine and then you get more data later
on you include more data which may
change the damage now it may change so I
just want not these two completely
separated issues with them are and all
these packages or do you have to work to
sort of put new data in yes um since
that's the kind of the idea of this
plummer package that it kind of provides
a data frame that you can more that you
can sort of modify and all the plots
will find out about so of course making
sure that your interactive graphics know
what to do when the data changes I mean
I think that that's the that's the real
challenge so when you get more data what
should you do with it and also you know
none of the examples I showed here
really too much in terms of modifying
the data right that's a really other and
a really really important interactivity
you want to be able to look at different
subsets of the data or aggregated in
different ways particularly when you've
got very large data you want this idea
you know you want to get this of a broad
overview and the other zoom and
aggregating more finely as you should
have dig into the details and that
that's just something I haven't had time
to look at you
two questions first of all with the
grammar of Internet interactive graphics
it's obviously much more it'll not as
defined how is the project dealing with
the fact that the language for
describing interactive graphics
Institute finders ggplot2 and secondly
what's the best graphics card to use
with this stuff first buying a new
raster format doc so insane questions
easy to answer I've got no idea
but anything modern should work well and
presumably the bigger the numbers are
the faster will be I can't really offer
anything more specific than that in
terms of kind of figuring out what the
interactive grammar should be and you're
kind of seeing what I'm doing I mean the
way that I'm gonna slowly working my way
the errors by kind of doing lots of
these little interactive graphics and
thinking about you know one of the
commonalities between them so obviously
the interactive grammar will have to
build on the static grandma but it also
needs to think about you what can change
and as I sort of see that basically you
can change two things you can either
change the data or it can change the way
it's displayed so that it's not a
particularly brilliant insight but in
terms of thinking about you like a
ggplot2 graphic that's are you modifying
the underlying data set or you kind of
modifying the parameters where it's
transformed or the scales and so on and
then thinking about how you can going to
map those two ways you interact in the
computer with a mouse or a keyboard or
whatever and how you can kind of control
those so there's all sorts of really
simple things you know in terms of
thinking about I'm gonna do a histogram
I can make a slider that is the bin
width right I mean that's sort of a
really kind of a trivial thing it's
often useful but I mean it seems a
fairly shallow type of interactivity to
me I mean you you want more than the
kind of Excel interactivity where you
can click some spin bars and your your
graph changes so I sort of I don't
really know you haven't
down enough experimentation and you know
a lot of these enough anyone who's even
heard of Quayle Orca these are kind of
real are statistical graphics research
kind of tools and some interesting ideas
but you know when you end that day in
some ways they developed their own
grammar of interactive graphics but when
you compare them to what people are
doing and with interactive graphics on
the web there's just this huge range of
things that I think really really useful
for data analysis but statisticians have
never really thought about in the past
so you sort of and they're very early
exploration stages at the moment
so you did a wonderful job for those
where you use it to lattice you
transform Jacobi you revolutionize do
you think about the next thing are GL
for example to be included in your your
package so I've been working with
improvements yes sir our deals
interesting because our GL is basically
nice 3d graphics and are basically I
kind of think fede graphics for
statistical data are useless it's a
fairly strong claim I think there's only
really two interesting cases so 2d and
indeed so the the problem with 3d is you
know when we're looking how the way our
brain can strut to 3d reality is you
know kind of 2 percent using actual
parallax physical measurements of their
eyes and you know it's like 95 percent
heuristics like you know things that are
further away are small and things that
are close and things that are close
blocked things that are further away so
and that there works really really well
when we have some kind of underlying
physical object that we're really good
at kind of we can see stuff on screen
and we can figure out you know one of
the the 3d contours of that but when we
start moving into abstract date you know
those heuristics just they break down
and they don't really work so I've done
a little bit of experimentation I don't
know if I can I'm able to quickly
remember how to do this this is another
thing in the tour package
so if anyone's bought just chick so
anyone has bought the 3d glasses this is
the time to get them out so I've done
some experimentation I mean this is a
tour again except now we're projecting
first and three dimensions and then
we're using stereographic projections
are 2d and we're displaying that with
different colors we can do so that's
sort of one way that if we had 3d
glasses you know tricks your eyes or the
other thing we can do is just use a
whole lot of those heuristics so again
I'm displaying in projecting into 3d and
then I'm using to show depth I'm using
three things I'm using the size you know
close things are bigger I'm using things
being in front of other things and I'm
using kind of fading out the color when
they're in the distance sort of things
get foggy err and blurry in the distance
so this does you know almost an
effective job as the as the anaglyphs of
the 3d glasses so i'm for statistics and
just not kind of convinced that 3d
graphics is the right thing I mean again
just because I'm not convinced doesn't
mean it's a bad thing I mean I'm
certainly wrong about things all the
time but it you know it's just not
something I would work on I mean if
there's an interesting student a student
was interested in I think that could be
a fun pro-q thing about how do you
extend ggplot2 to kind of 3d graphics or
even more interesting how do you kind of
generalize it to indie graphics is that
I think something really interesting but
3d I'm sort of not convinced it's it's
that useful so if someone else wants to
walk up for a question on display I'm
using graphic and the meantime
so this is a like display isn't very
good but this is a tool that uses
Chernov faces
fortunately not changing very much but
hopefully you see them getting sadder
and happier so one thing that's
interesting I mean just on this note is
that you know thinking about what what
the tour is and and when you're
programming stuff and are it's just so
much easier to explore ideas then were
your programming and see so even if are
at some level is much much slower than
see there's still a big advantage to
using it because you can develop things
much much much more quickly and so that
that's really helped when we rewrite
stuff they're heavy and written see we
can experiment with it think about how
do we break it up into these independent
components what do you think you know
you can sort of hopefully tell a lot of
ggplot2 is devours the aesthetics are
really inspired by tuff T's work but
Tufte is basically a graphic design or
not a statistician and even if you look
at what his recent work is I don't know
if you
you know this is what Tufte is producing
these days so you know he has an app
yeah so he has an absolutely fantastic
sense of aesthetics and reading his
books with an eye to that you know how
can I create beautiful graphics is
really good but he tends to be a bit on
the minimalist side so he creates things
he kind of I think that Tufte takes too
many things away so you know getting rid
of grid lines altogether actually turns
out to be a bad idea because grid lines
actually help you compare curves has
changed so there's an interesting little
paper he had a proposal one of his books
to modify the boxplot in a way that kind
of subtracts a whole lot of things away
but if you compare that to the
traditional two key box what actually
tune it performs worse so there's a sort
of tension between creating beautiful
things and creating useful things and
Tufte is you know always been more about
getting beautiful things and I think he
sort of going off deep into a little bit
in terms of beautiful things you know
which is you know I think that that's
fine and he's I think he he just opened
a gallery in Chelsea so you can kind of
see all the stuff and in person now but
until you could kind of take his advice
with a grain of salt I think as with
mine of course yeah
going back to the our and the weather
and ggplot one thing at the country that
would be extremely helpful would be you
know when you you render a plot you
render into a box as your screen
X X 11 or whatever or five but it's very
difficult actually where I haven't found
a way to actually render it to a socket
to a connection so that I could easily
you know there are say said you're gonna
render this send it over there and
there's a server who knows oh god okay
update the image that you send it to the
client you can get animations on
warehouse yeah I mean I don't know cuz
show you I mean our studio is figured
out how to do it so it must be possible
like it's so it might take of all I know
how many of you have seen our studio
yeah okay highly I think there's a
meetup about a couple of weeks ago right
so I mean I've clearly figured out how
to do this stuff how to seen it over the
wire I mean just you know this is kind
of this is the thing that basically
makes me think I could be fundamentally
wrong about graphics on the web because
if you'd ask me whether that's as
possible I would see no there's no way
you could do this so I mean I just kind
of it continues to amaze me how quickly
you can do this stuff and how fast you
can kind of see if it's over a wire so
really and I think they have their
little manipulate tool that lets you
kind of do one very specific type of
manipulation where you can drag stuff
around and modify it plot I mean I think
all these these kind of little
interactive things are useful but I sort
of want to aim you know what what do we
what do we wanted ten years in the
future how can we really describe all
the types of interactivity but certainly
lots of the stuff is is really is really
interesting and and
what do you think about building in
tection spouts of getting the wrong kind
of things from dating creating all these
different visualizations are there
things they can build the interactions
to prevent kind of really going off the
rails or anything about that yeah idea
this of another way of thing you know
weird to go next with a grammar of
graphics I guess I sort of think of it
as like a poetry of graphics right so
the grammar kind of says what what can
you say but you really want to think
about you know how do you say things
effectively and you know beautifully
maybe poetry is going a little bit too
far again but so thinking about that
that next level now we know what we can
do what should you do and there's and I
think there's a lot of interesting stuff
here in terms of kind of maybe couldn't
hear can you suggest the user given that
you've looked at this plot what plot
should unique look at next I mean it
sounds a little bit like Amazon right
you've you've looked at these three
books maybe hidden these three plots
maybe you want to look at this block but
I think in terms of kind of thinking you
know what using some statistics could
have running through some possible these
are we you might want to go Knicks
because I mean the other thing I've
already talked about is in any real
analysis graphics enough a graphics
aren't enough by themselves you have to
connect them and to some modeling
framework graphics are fantastic at
revealing the unknown but I mean they're
just so so so slow right if you've got a
thousand variables you can't look at all
the individual scatter plots how do you
figure out one of the interesting ones
you should look at and it needs you sort
of need something to you need graphics
so you're not locked and too much but
you need modeling so you're steered in
the right direction and I think that
getting that that tension right is
really really important sort of how do
we lead people in the right direction
without you know chaining them so they
must go in this direction and then
that's sort of all tied up with you know
what when you create a GUI to create
plots what you to do how you create a
GUI or how you create a way of making
plots that makes it easy but doesn't
lock people under to me
predefined choices and you know certain
that you know ggplot2 is great if you're
you know an analyst who's working with
data in every single day but it was
something you're gonna pick up and use
every couple of weeks you know
command-line interfaces you just kind of
forget everything and it's a very very
slow process
I guess so I'll be hanging around for a
while yeah you're welcome to talk to me
a person or again please feel free to
send me an email particularly about data
analysis or for me if you need help
spending your Millions</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>