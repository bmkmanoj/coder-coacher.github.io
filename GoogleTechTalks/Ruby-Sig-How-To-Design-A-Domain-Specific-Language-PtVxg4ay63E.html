<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Ruby Sig: How To Design A Domain Specific Language | Coder Coacher - Coaching Coders</title><meta content="Ruby Sig: How To Design A Domain Specific Language - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/GoogleTechTalks/">GoogleTechTalks</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Ruby Sig: How To Design A Domain Specific Language</b></h2><h5 class="post__date">2007-10-08</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/PtVxg4ay63E" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so let's get started thanks very much
for coming here tonight welcome to the I
think it's our fourth fourth Ruby sig
meeting so the it's organized by SD
forum SD forum is a nonprofit
organization in Silicon Valley that
organizes sessions organized by
volunteers about software development
and so my name is Patrick Chan is all
I'm from google and with a Greg color
donato and and Bosco so who's not here
today since a few months we started
organizing these rubies sig meetings
because there's a lot of interest in the
Ruby language and we wanted a place for
Ruby enthusiasts to meet together and
discuss about new IDs in this area so
this is a fourth meeting today we're
kind of lucky we have a David Pollack
who's going to present domains
domain-specific language which is a very
interesting topics SD forum has a few
other meetings coming up like one about
the business of new media october twenty
fifth one about emerging emerging
technology showcases it's about startups
so this one is november 30 you can check
it out on their website and they have a
they have a news newsletter that you can
take at the entrance as well we hold
these meetings every month and this one
was kind of announced at the last moment
we'll make sure that for next month we
planned that a little bit in advance
thanks very much for coming and hey
David thank you thanks for having me i
really appreciate it i'm david pollack
and thank all of you for cutting out
time in your night and come coming to
listen to my chatter but it start off
with a pop quiz what's the most popular
programming language in the world bar
none
nope nope nope nope nope nope Excel
excel is far and away the most popular
programming language in the world
millions and millions and millions of
people know how to use it and use it
effectively every day it's a
domain-specific language is a
domain-specific language that one could
argue launched our whole industry can
tell you a little bit about me first of
all these are my kids Daniel and Sofia
their two-year-old twins and they're
just a riot on my background I'm a
double major in psychology and economics
I'm a lawyer and a lot of what I've done
through my academic career is figured
out how people make decisions either as
individuals or as groups and as far as I
can tell a lot of it is implicitly based
on how much things cost to do and what
are the various different alternatives
and that actually is an important thread
that runs through domain-specific
languages and runs through why now in
terms of domain-specific languages more
about me I've been writing commercial
software for 28 years first piece of
commercial software ever wrote was a
domain-specific language for the Federal
Emergency Management Agency back before
they were a joke um specifically it was
a language to allow it was a language
that ran on Apple choose it allowed on
fema aid basically fema groups to build
multimedia presentations to be
automatically broadcast over TV stations
in an emergency basically emergency
evacuation plans and way back then we
were using $3,000 Apple two computers
and they were competing with 40 thousand
dollar machines called Chiron's which
were character generation and anime
animation generation machines it wasn't
a lot I mean you really couldn't do a
lot with 64 K but hey it got the job
done arm in 92 I launched Mesa which was
the world's first real-time spreadsheet
and anybody here who use it used next up
any next step users all right um anybody
who uses OS 10 you can
download it and use it in 97 I built the
first web-based spreadsheet okay it's
the same dsl on 2001 I built for dsl's
for web-based development the grammar of
the dsl's was I'm sorry the syntax was
based on XML and the functionality the
domains were oh are mapping on web site
navigation of multi-page input forms
with validation effectively wizards and
a collections to HTML table mapping
program which on most of people in this
room go well that's pretty easy to do to
write you know for loop and iterate over
things but if you're a HTML developer
it's hard and when your domain is HTML
you want to be able to express things in
a tag based way and don't want to worry
about classes and declarations and a
whole bunch of other stuff yes sir
real-time spreadsheet is a spreadsheet
that accepts data from external feeds
and will recalculate as those feeds come
in and display there are lots basically
every spreadsheet these days does it
back in 92 it was a big thing especially
for Wall Street traders because they
could tick data into the spreadsheet
have calculations it took place
automatically and trigger external
events like trades um yet more about me
by the way please pepper me with
questions even tomatoes whatever I do
strike strategy and technology
consulting for both startups and public
companies I'm a hardcore code or you
just like can't pull my fingers away
from the keyboard although it's a lot
tougher with kids now because I can't do
those 18 hours stints of like okay I'm
just going to write more code my current
focus is on customers customization of
search and basically improving results
from RSS feeds so roadmap to the
presentation first of all people
complain that I don't put enough
graphics in my presentation so
my daughter loves this picture on the
presentation is going to come in three
sections philosophy and example and then
how to do it yourself yes sir it will be
available tomorrow a DPP Ruby com
by the way it's been a like just
disaster of a day for me i forgot my
business cards I spilled a hamburger all
over my shirt just before I got here and
had to stop an army navy store to buy
this and on top of it I had like one of
those little remote control things for
the Macintosh left it in the car anyway
technology should be driven by a balance
of need and vision and a lot of what
drives a lot of the big events in
Silicon Valley a lot of the big events
that we're used to our the visionary
events the Macintosh Netscape Navigator
things like that but there's also a lot
of need that drives us and actually be
here at Google Google is an excellent
example of not flashy the technology may
be visionary on the inside but the
interface the user is sewn on visionary
it is in a certain way visionary you're
smiling back there but it was driven by
the need for people to be able to
organize vast amounts of information
efficiently technology drives up the
value of human time you think that too
kernighan and Richie and pike when they
were developing UNIX and when they when
they were arguing that operating systems
should be written in a high level
language rather than assembly language
their argument basically boiled down to
one day not today but one day human time
will be more valuable than computer
cycles that's true I mean you can buy a
$300 pc at frys and you know throw it
away tomorrow but a lot of consultants
in Silicon Valley an hour of their time
is worth more than that pc that you can
buy frys and throw away or use for five
years interchangeable machine parts led
to the Industrial Revolution and one of
the things that is very interesting is
how quickly hardware has evolved
hardware has gone through Moore's Law
every 18 months there's a doubling in
power arm software development hasn't
gone through that cycle
that you know they're the the number of
advances I recently took a dive into
small talk and this is a language that
was fundamentally frozen back in
nineteen eighty twenty six years ago and
there are so many ideas in Smalltalk
that we're just getting around to today
looking at the small talk object
hierarchy it is gorgeous and beautiful
and richer than any other object
hierarchy I've seen and it's a 26 year
old language the software industry is
not evolving and developing as quickly
and I will argue that one of the reasons
for that is our propensity as developers
to take the semantics of our business
users take the words that they use take
the actions that we are reducing down to
code and reduce them down into code that
cannot then be restored that to the
original semantics so you lose the
meaning you lose the meaning just like
making one-off revolvers you know
Winchester made a fortune during the
Civil War how Winchester make a fortune
during the Civil War by having guns that
had replaceable parts so you didn't have
a unique gun for everybody you had the
same gun for everybody and you know part
of it broke you put a new one on you
could share bullets with other people
that was really valuable we coders
haven't figured that one out yet and
yeah there are objects but you know most
object hierarchies are libraries that at
a low level work but once you get up in
terms of the semantic meaning in terms
of the value things get lost and I mean
you look at the morass that is SI p
every single SI p implementation is you
know what 250 300 man years of work to
really implement the same accounting
system that indicates there's something
wrong and broken
say pure Wharf languages shape our
thought patterns I actually prefer
robert pirsig zen and the art of
motorcycle maintenance may the same
argument but looks a lot better when you
say say for your Wharf um list guys Java
guys see guys sequel guys Smalltalk guys
all solve problems differently I'll
think about problems differently and
yeah I've been doing Java for 10 years
before that I did C++ actually recently
to C++ project and had to remember that
i had to free memory and it was just it
actually changed my thought patterns
because i had to remember who owned the
creation in the freeing of the objects
not really that changed the flow of my
program small talk is like phenomenally
interesting because your editor gives
you about 10 lines your kind of
encouraged to make all of your methods
fit into those 10 lines and it changes
things Ruby closures I mean yeah you can
do closures in Java or something
obscenely broadly ugly that look like
closures but when you have closures it
actually changes or at least for me it
changed the way that I code and it
changed the way that I approach problems
I'm sorry I'm sorry um complex business
systems evolve based on the available
technology you have paper invoices you
have to have filing cabinets you move to
computers you move to the fact that
information can be shared across
distance it changes your business
processes think about the idea of
renting a car from a national or
international car rental chain before
networking before credit cards it's a
fundamentally different process there
was a lot more risk to the rental car
company they dealt with that risk by
charging you higher prices there were a
lot more restrictions on what you could
do with the car there were a lot more
restrictions on who they would rent to
UM and also the business processes drive
technology relational databases are a
very good example of something that has
been driven repeatedly by business um
and finally I'll talk about the
Macintosh curse files and folders who
here use original Macintosh remember the
Macintosh file system maybe you had a
hard drive and every time you boot it up
if you had more than a thousand files
and your hard drive would take like you
know five minutes for the Mac to figure
out which files went in which folders
that's because the original mac file
system was tag-based and it had to
figure out what tags were associated
with which file so it could present them
to the user in terms of being a full a
file in a folder I think my Wi-Fi is
going up and down sorry about that um
and that was a carryover from the whole
concept of Macintosh is a desktop and we
will have computer equivalence of what
are on our desk well if you have a
single piece of paper it's difficult to
put it in multiple files or put it in
multiple places or tag it with multiple
things that you can look at at different
ways but now what 22 years after
Macintosh people have discovered tagging
anybody who's done any relational
database stuff and tried to shovel the
const
to the file folder and hierarchies into
a relational database it's a pain doing
tags in a relational databases so much
easier on the other hand it's also so
much better for people because people
don't necessarily think in 10 levels of
nesting of hierarchies they think of
okay this is a joke and it came from my
wife so I want to tag it with wife and
joke this is a joke and it came from a
family member I want to tag it with
family and joke so I can look at all my
jokes or I can look at all the things
from my wife and I don't have to worry
about putting it in a folder or another
folder and if you think about the path
that the 22-year path that McIntosh led
us down and you know windows because it
copied from Macintosh and all the
thought patterns that have a wall from
that it's cursed us and now I mean who
is a guy who are the guys who first like
started doing tagging hardcore was
delicious Google did it first right no
so delish the guys are delicious said oh
this is a lot easier i'm just going to
slap this with a bunch of tags and i can
tag one thing with multiple tags and i
could just look at my tags great what a
great idea and it's changing the way
that we're thinking it's changing the
way that people are organizing their
information personally and there are
actually some enterprise products that
were shown at demo a couple of weeks ago
that use tagging at the enterprise level
so that people can tag and share
information you know social networking
in the enterprise more philosophy by the
way if you guys are bored just say shut
up and get to the meat of the matter
Dave now okay why do computers exist
tools for communication and persistence
and retrieval of information there are
tools to make life easier and more fun
because a lot of us use computers to
play games for nerds like me solving the
problem is fun but I'm a radical
minority and my guess is that most of
the people in this room were there's a
majority in this room that likes to
solve problems and the solution to the
problem with the computer is the
entertainment in itself and to a certain
degree that's a shame because we let
that run into often
least some developers let it running
into the way that they think about
solving problems for people who want the
solution rather than wanting the tool
rather than having the joy of the tool
itself and I remember I gotten a an
interesting discussion with a an elderly
relative of mine who said that she would
never be able to use a computer I said
do you use one every day just like no i
don't i said and this was back in guess
it was 95 and i said you're currently
using the most advanced computer and the
most advanced network in the world she's
like no I'm not I'm like we're talking
on the telephone she's like that's not a
computer i'm like yes it is it's just
the functionality of the computer and
the power of the computer has been
buried behind something that is so easy
and something that is so intimate to
just about everybody who has been born
in the last hundred years that we don't
realize it it's the computer and these
things called pcs popped up on our desk
and they were different than the
computers that we were used to using but
the real cool computers are the ones in
my microwave oven that figures out when
the food is reheated the real cool
computer is the telephone that allows me
to make a call or connect up to somebody
and you know with the ss7 database and
roaming and cell phones I'm not even
calling a place I can now actually
almost call a person I mean just think
about the coolness of and the power that
those computing environments give to us
business and tent I'm getting closer
dsl's really business intent is critical
to a domain-specific language you have
domain experts and you have the intent
that they want to express um business
intent is an intended behavior of a
system expressed by a business user in
other words the person that wants the
behavior to occur rather than some
external third party like a developer or
somebody else described using the
semantics of the business user you
described in the words of the business
user uses every day to describe the
problem and the solution independent of
the tool and yeah I mean you got that
feedback loop so you'll talk about the
invoice as if it's a piece of paper and
it is going to be another 20 or 30 years
before invoices stop being like mentally
a piece of paper for us but the business
intent is what the business user what
what the guy who wants the thing built
talks about thinks about and does the
domain specific language is a collection
of syntactic and semantic elements I
actually separate those two things out
it's an important separation we'll get
to it later when you're actually
designing dsl's the syntax of the dsl is
separate from the semantics a good
example of this in computer programming
languages there is Joba the language
there is java bytecode and there's
actually a Princeton PhD paper that was
done proving that there's a one-to-one
mapping back and forth between the two
so even if you have bytecode you can
reconstruct the original Java program
that the bytecode came from and if you
have a Java program you can obviously
compile it down into java bytecode so
the two are syntactically different but
semantically identical and there's also
an XML representation of Java which is
once again it's in tactically different
than Java you look you know you do a
grep or a diff and you know
yet their wicked different but they mean
the same thing collection of semantic
and syntactic elements that describe the
business intent in a particular problem
domain that can unambiguously that can
be unambiguously executed by the
computer and actually one of the one of
the big things is whether it's
unambiguous or not one of my one of the
domain-specific languages that I'm going
to refer to is sequel another one is
HTML and everybody in the room is going
to go those are so ambiguous Oracle does
sequel differently than postgres and you
get different results okay but they're
substantially similar I mean yeah you
know HTML you go to the w3c and their
reference implement of HTML is different
than firefox is well the guys that offer
will claim it it's not different from
opera but who knows is different from IE
but anyway and that can be understood by
a domain expert so the domain expert can
actually look at the syntax and the
semantics of the domain specific of a
program written in the domain specific
language or an expression and they can
understand what that means in their
business domain questions
those are my kids ha some dsl's SQL it's
a domain-specific language for storage
and retrieval of information by the way
feel free to argue at this point I
actually did a dry run of the
presentation earlier today with a couple
of my nerd friends and they said sequels
not a language because it's not touring
complete HTML that's not a language at
all it's a bunch of tags feel free to
jump in okay Excel Excel is definitely
not touring complete because if you
don't if you don't fall back into vba
there's no looping or branching there is
implicit looping and branching in Excel
because you describe the results that
you want to get and you can actually put
Excel into a loop mode where it will
iterate until it gets close to no
difference in the spreadsheet postscript
postscript is it is I think the only
touring complete language here aunt
might be touring complete I'm not sure
aunt it's nice way of describing series
of system build tasks HTML it is a
domain-specific language for describing
layout arguments pushback comments yes
sir okay
I don't know because I would argue that
you might have to have torn completeness
for describing some business problems
for example arm repeating let's say we
had a domain-specific language for
describing the process of collecting a
bill collecting a bill that's been sent
out or you know that's a subset of a
domain-specific language you might have
a repeat loop in there I'm not sure let
me and that makes it very specific and
useful and not George yeah
why use domain-specific languages the
instructions of the computer more
closely matched in business intent this
is hyper important it gets back to the
do we have interchangeable parts do we
have semantics that the people who
actually want the systems built can use
or do you have the impedance mismatch
and translation problem of writing a
spec which isn't actually even if you
write the words down in a spec you're
bound to miss stuff the spec is then
coded you have two problems with coding
one is the defects in your code there
are defects in every piece of code it's
the way of the world and the second
issue is armed you may have a
misunderstanding which is different than
a coding defect so you might have an off
by one error or something in your code
which is a defect introduced by the
programmer even though they understood
the intent and then there may be the
program you're not understanding the
intent or thinking they have a better
way to do it or it's too hard to do and
you have all these problems and the
closer you can push the business intent
to the actual business user to the
person that wants the system built the
better off you are so if you have dsl's
you have faster coding and fewer defects
because the stuff is closer to what the
business user wanted it's also quite
frankly more agile because you can do it
erations much more quickly you don't
have to go off for six months and do all
these things that build a complex system
you already have a lot of the underlying
pieces because you've listened to your
users and you've understood what their
semantics are and finally you have more
maintainable code yes sir
um I yes um and actually that that's why
the code is less maintainable and pearl
is actually I believe at least in my
experience the least maintainable code
that I've seen because even even simple
meanings get lost very quickly and pearl
C++ simple meetings get lost pretty
quickly um java might be a little bit
better ruby is good at maintaining
meaning but it only goes so far and you
know you basically lose you lose the
meaning in the plus pluses and in the
you know and even if you're a good coder
new comment your code and you have good
variable names you're still going to
lose meaning i will make another bold
argument please disagree with me dsl is
actually have been the killer apps that
have launch platforms busy calc and 123
launched the Apple to in the PC
pagemaker which is a graphical front end
on top of postscript the PostScript dsl
and for those users of early versions of
PostScript it was a very very thin layer
on top of PostScript launched the mac
okay I was fudging with powerbuilder i'm
not sure if dsl or not um finally
netscape navigator if you consider HTML
to be a dsl netscape navigator launched
the the internet as we know it yeah i
used ftp way back when I knew a lot of
people in college in the mid 80s who
used email and did that sort of thing
but it wasn't a house whole thing it
wasn't the most rapidly adopted
technology on the planet arm Netscape
Navigator change that
ok this is what am I big like hmm the
last thing is not a domain-specific
language it's syntactic sugar and
there's a difference there is something
there are things that make it easier for
developers to write code and make lines
more readable there are things that make
that are syntactically more pleasing I
mean I got to Ruby I realized you don't
have to put / ends around everything boy
that makes code look great you can have
a question mark or an exclamation point
in a method name that's awesome that's
not a dsl is by and large the syntactic
sugar is developer focus rather than
business user focused my argument is
dsl's are focused towards the business
users rather than towards the developers
object-oriented the failed meta dsl who
here sat through ibm's endless
presentations about how objects were
going to like change the world how many
people had fortune 500 company I 'it's
that we're going to fire all their
developers and only hire object
librarians it was supposed to 00 was
supposed to bring coding close to the
business at 10 and actually looking
looking at small talk and looking at the
rigorous work that one has to do to
write a good small talk application yes
but it requires a lot of a lot of work
and a lot of refactoring and a lot of
thought on the part of the developer C++
forget it java i think a lot of java
developers it it's easy to be sloppy and
java and i think a lot of java
developers are at least has been my
experience um the business intent is
lost in the sea of plus pluses and minus
minus is your point arm also with C++
and Java there's so much time spent
mapping in and out of things I mean I I
think seventy or eighty percent of the
lines of code in the Java Web Apps that
I've seen are getting stuff in and out
of the database okay that's being solved
by hibernate but there's still that
impedance mismatch um getting stuff in
and out of HTML yeah that stuff is
starting to be solved rails is a good
solution anybody here who's played with
seaside it's a better solution for kind
of having your program and having the
HTML feel like they're similar I looked
the specs for rife the other day has
anybody played with rife at all now it's
a Java object framework that has a bunch
of stuff that seaside has and I don't
know um but there's so much mapping
that's going on that you
moves a lot of the business intent and
finally I I'll get to a description of
what the separation of concerns are but
the same guys who are writing the code
there will produce no way of saying
there's a guy who's responsible for
understanding what the library or the
object hierarchy is supposed to be and
the guy that's writing the code yeah we
have architects but most architects that
I've worked with our good coders there's
a lot less separation between the guys
who are writing the code and the guys
who are trying to figure out what the
semantics of the business users are why
now oh that's my dog Archer he's really
cool um yeah I got graphics first of all
there's a there are a lot of tools
available for parsing stuff Lex and yak
existed many many moons ago but they
were really hard to use there are a lot
of tools are getting easier for parsing
XML for parts for generating overall
parsers and the performance associated
with generating parsers is a lot less
important than it was ten years ago when
he had when he had a one megahertz or
five megahertz or 25 megahertz machine
if you had to spend you know four
million machine instructions parsing
your code before you can start executing
it that was a problem when you've got
machines that can execute you know five
million lines of code or five million
instructions out of cash in like you
know a millisecond it changes things
programmers can be less efficient and
focus more on the high level stuff you
know kernighan Ritchie and pike coming
back the Ruby syntax itself and I'll
actually get into the choice of syntax
for domain-specific languages but the
Ruby syntax itself is very conducive to
expressions of expressions that can be
re parsed by humans
and keep their original intent not
having the / ends being able to have the
nice automatic generation of hashes and
in Ruby to being able to have named
parameters those sorts of things make it
easier to write code that a human can
reparse the pain is very very high once
again I'll go back to history in the
early 1920s there was a study that that
AT&amp;amp;T did that estimated that what was it
seventy percent of the unmarried women
in the country would be telephone
operators by 1950 that didn't happen um
what AT&amp;amp;T did is they figured out how to
use machines to do what people do and i
remember when i was a kid i actually
used to call the operator on a pretty
regular basis to like you know make a
long distance call do this do that i
don't think i've talked to an operator
even a directory assistance operator
these days in years i mean directory
assistance either go to google and type
in what I want or i call something that
winds up getting forward to one of these
like automated things and the automated
things now have something on the order
of a ninety percent success rate in
understanding what I say and being able
to look up what I said just pretty
amazing I still get away with charging a
buck 25 for it when it cost them three
cents anyway I'm sorry the other so one
of the one of the pieces of pain that
we're running into is a cross product of
the maintainability pain and the fact
that yeah during the dot-com era where
people were paying yes flowing infinite
amounts of money into hiring developers
to you know build sites that would have
movies delivered to your house by
bicycle messenger in 15 minutes 41 miss
Kozma um and lots and lots of people
were being hired and there was that same
estimate it was a very very analogous
estimate that you know there were going
to be eight million developers required
across the world next ten years
and then the bubble imploded and you
know those eight million jobs aren't
there I mean yeah there are still high
tech jobs but people are figuring out
how to use computers to do what
programmers used to do so it's not
stringing together the plus pluses and
all of these simple instructions for
moving bites from point A to point B
they're stringing together higher-level
semantics also I believe that the
mindset is right I'm not sure why but I
mean just the fact that dsl's are
something that people talk about
something that you know room full of
really smart guys are spending a couple
hours of their time learning about it's
like you can kind of its you can kind of
feel the tremors in the earth going okay
dsl's dsls they really are important and
bosses will buy into them back in 2001
when we were doing dsl's and I actually
call them function specific languages
back then because there was the term
domain-specific language I was like okay
now there's this new language click
everybody's like I don't want to learn a
new language can you like just do this
in Java for me it's like no it's like if
you do it this way it's going to be so
much more productive and you know we did
a couple of case studies that said we
were getting on the order of 10x
productivity improvement between Java
coders doing jsps on tomcat and the
stuff that we were doing people are like
yeah but I'm not going to like have my
developers learn a new language they
just learned java I don't want to like
people are willing to now say okay we
can have domain experts technology side
and business side we're willing to take
the risk because the pain that we're
facing in terms of maintainability and
ability to generate code is so high I
had this long term vision I just before
my kids were born I spent a bunch of
time in a hotel room in Boston writing
code it was like okay this is my last
hurrah way to be able like drink beer
with my friends from Boston or write
code for a week different people have
different last faraz i'm sorry i'm in
her
I believe that there will evolve
domain-specific languages for different
problem domains you will have language
architects that are a separate concern
from the day-to-day developers that add
secret sauce dialects for their
companies and one of the things that I
saw in Wall Street a lot of Wall Street
traders or a lot of Wall Street
investment banks consider technology to
be there on business advantage it's
actually a company that was founded by
the CIA former CEO of Swiss bank that is
putting together an open-source stack of
a lot of stuff that it takes to build a
trading trading desk application and
just allowing the top 5% rather than the
bottom ninety five percent to be built
as a secret sauce so the secret sauce
becomes the formulas the quartz put
together rather than being able to
deliver the whole system I believe that
that secret sauce the efficiencies that
UPS has design developed over the past
hundred years versus the efficiencies
that fedex has done over the last 25
years those things will become the
secret sauce on top of a domain-specific
on top of a generic domain-specific
language about shipping and you know air
travel and least cost routing and a
whole bunch of other stuff the
developers will implement projects by
gluing together the various different
domain specific languages for the
different problem domains that are
encountered by the business users
themselves so you have a shipping
problem domain and a billing problem
domain and this problem domain and that
problem domain the developers are the
ones going to wire together glue
together the applications and by the way
Ruby is one of the most excellent gluing
languages around it's my vision I'm
sticking with it let's review shared
semantics make systems more efficient
computers or good tools describing
solutions to the computers in the
semantics of the business user is good
the tool and the mindset is right to
create dsl's questions
okay one of the four dsl's that I did
back in 91 was called sitemap and it was
a domain-specific language for
describing a website hierarchies
navigation hierarchies and access
control rules for each page one of the
problems that we ran into when we were
developing websites was every time we
would make a change to wear an HTML JSP
page is located in the directory
hierarchy we would have to go and recode
eight different pages that link to that
page every time we said Oh a foo user
rather than a bar user can actually
access this page you know the the you
don't have to be a super admin you only
have to be a normal admin to be able to
change the state that a user is in
something like that you'd have to go
through and change a lot of the
different links in a lot of the
different pages and it became a very
tiresome task and it became one of the
tasks that alcohol what um having to
keep it in your head so if you've got a
site of a particular size you've got one
guy who can keep the site navigation in
his head knows all the pages that need
to be changed if a particular thing
happens and we'll go through and change
so and if you're lucky you've got
refactoring tools that will grep through
or do other stuff we sat down and we
said okay the HTML guy is just like
driving us nuts because every time he
changes something we've got to have one
of our developers the guy with the stuff
in his head go through and find all the
pages make all the changes then we have
to have open a QA ticket and we have to
go through and QA it to make sure it's
right and it's just taking a lot of time
so why don't we write a system that
describes Paige access rules on the text
for links and the hierarch the
navigation hierarchy itself so that you
know if you're in the administrative
section you can you know change your
username or change your password and if
you're in the I'll get to the example
that I actually
just for this i wrote a social
networking site for my dog I mean you
know sometimes when I'm bored I do
stupid things and so the social
networking site allows my dog to have
friends my dog to write diary entries
diary entries to be editable by the dog
walker but and by me and by my wife but
nobody else the medical diary entries
are only visible to me and my wife not
even the dog walker so it's like you
know you start looking at these complex
rules but I can also view the diary
entries assumpsit of the diary entries
for other dogs so it's like okay that's
really complex and being able to you
describe the complex rules in a simple
document is a lot easier than having to
code them in Java either in access
control files or in the JSP pages
themselves or in tag libraries so
sitemap our website navigation hierarchy
page by page access control when you
want to display the navigation for a
given page only display the accessible
links deal with changes in site layout
in a single place think about who heroes
done rails work ok so there's routes dot
RB which basically describes if a
request comes in for this URL here is
the controller here's the method on the
controller by default look up the name /
name and you'll get to the right place
so this is dog scape it's your dog's
life and on top it's the I'm viewing the
dog Dawson who is a friend of Mines dog
and I can basically view Dawson's diary
or view Dawson but when i'm looking at
archer i can view archer i can edit
archer i can remove archer i can look at
archers diary just like a Dawson's diary
I can add a diary entry which I can't do
for Dawson or I can add a dog so
basically there are certain
things that I am allowed to do to Archer
that I'm not allowed to do to Dawson and
the page the the part of the page it
just displays the navigation itself
doesn't know the rules all it knows is
it makes a single call and says give me
the available links the users on this
page it's this user here are the
parameters that were passed in as part
of the HTTP request give me the site
navigation there's a separate XML file
I'll get to the semantics that we use
then I'll get to the xml file so the
semantics were we want to have a list of
pages on the site with default links and
access control rules we want nested
navigation hierarchy and depending on
where the user is the navigation
hierarchy we might want to update the
link text on we might want to alter the
access control there may be visibility
to the link which is different than
access control so you may have a link
that isn't visible but can still be
linked can still be clicked to an
invisible link in the navigation
hierarchy maybe something that's control
contained in the body of the page but
not necessarily in the nav bar itself so
an example of this is sign up with our
service you might want to have that on
the home page if the users not logged in
and finally potentially optional
parameters so if I click on View diary
there's an optional parameter for the
dog that I'm currently viewing having
that dogs ID go in as part of the
regenerated link and finally my
java-based calls which is get navigation
to valid links okay I'm given a nested
hierarchy of navigation um there's a
separate call for get the link text in
your URL for a specific page if the
specific page is available so inside the
body of a page i might say give me the
link to the sign in page or i might say
he's a sign in page or the sign up page
visible if it's visible then give me the
link to it
so the syntax that we chose because we
were boneheads was XML and I say that
because we had this really great tool
that was really powerful and in addition
to requiring that people learn a new
language even though it's a simple
markup language it also required that
people edited stuff in a text editor
rather than having a nice graphical
front-end big suggestion if you're doing
if you're going to implement a DSL
especially if you're going to choose XML
as your syntax put a polite front end on
it there are a lot of ways of building
nice XML editors you know graphical XML
editors inside of eclipse or your other
favorite IDEs these days don't make the
mistake that David made it was a stupid
mistake anyway so we have a description
of our pages one of the pages is the URL
is feedback so um the name of the page
is feedback the link text is feedback
the name is just unique uniquely
identifies the page so even if the URL
changes every place that refers to that
page throughout the site doesn't have to
change and then the title so when the
page gets put up in your browser the
browser can get the title for the page
okay so this is just static everybody
can go give feedback the next one is
administration so the URLs
administration / remove user the name of
the page is disabled user the link text
is disabled user on the title is
disabled user now we have a condition
which is a boolean which requires that
the user who wants to access this page
be a super user the link will never be
displayed to a user that's not a super
user and the link the page will not be
accessible to anybody who's not a super
user so even if you know what the URL is
and even if you're logged in if you go
to that URL you'll automatically be
redirected to the homepage um the
superuser little macro thing is actually
defined in a separate part of the XML um
separate part of the XML with in what
alcohol aversion of language a Java
snippet within the dsl that defines what
a super user is and it's effectively one
call out to the domain object which says
user dot super you tom is super user and
that's the call that determines super
user the last one is the item itself so
there's a series of nested items which
is your nav hierarchy so page ad diary
entry refers to one of these pages the
condition is the user has to be logged
in they have to UM there has to be a dog
they're currently looking at and the
current dog can the user add entries get
the actor from the current page session
by the way this is ugly and the ruby
version of sitemap much much prettier um
and then there's a parameter that we add
to the URL it's generated which is get
the unique ID for the current dog
questions tomatoes so benefits a sitemap
first of all the navigation just works
and you don't have all of your pages
except one working the right way they
all work because they all refer to this
master document that describes site
navigation it's wicked fast um to do NAB
development and now have changes I mean
one once it actually took about three
weeks to get the semantics right but
once we got the semantics right our HTML
guy became the owner of site navigation
rather than the HTML guy and one of the
Java guys and the QA person who had to
go back and QA it it was one person that
owned it and for I think we actually use
sitemap for our development and for
various different projects in about 20
projects never had a problem with it it
always worked as advertised um the
business guys understood access control
one of the projects we use sitemap for
was financial services project financial
services guys were hyper hyper hi
/ hyper hyper concerned about security
and access control and we were actually
able to go through with the business
user not with one of the tech people
that was sent by the business user but
with the business user themselves to
figure out what the rules were for the
navigation to each page business users
were actually able to understand the
semantics and once again we never had a
failure where the business user didn't
get something that they were expecting
to get code review and secure reviews
are like pie I mean they just they
always worked quickly and what we had to
demonstrate early to the security of the
security auditors was that the
implementation of the code matched the
semantics of the domain-specific
language once we prove that the code
reviews went really really quickly
because they believe that the underlying
generated Java code was correct it's
basically saying this compiler will
compile the C code as written into a
machine code that will execute as the
seeker as you attend the C code to work
and you know yeah there's always a bug
in the compiler never anybody ever see
that um dilbert comic strip where
Gilbert's out on a date with this woman
and he goes and then I realized it was a
bug in the compiler itself she pulls out
Mesa strays into space that he goes what
did I go on for too long believe it or
not I'm married but he still talk like
that at home um anyway um once we prove
to the security guys especially that the
code that was generated from the dsl was
actually legit compiled down correctly
the code reviews went really really
quick and they weren't crawling through
the code and they weren't worrying what
you all came for how to design a DSL why
what who the sausage factory part and
the time for you to be a hero by the way
questions
why you got to identify the business
need ok I'll of coating for coatings
sake but it's not a good business case
um there is it even though um building
dsl's is a lot easier than it was 10
years ago it's still a substantial
commitment on the part of a development
team you're basically going to be
putting two or three developers aside
for two or three months at least you're
going to be sucking down immense amounts
of time of the business users there has
to be a compelling business need for
doing a DSL there are a lot of
compelling business needs but you have
to have one it's not just like ooh I
want to like you know use this XML
parser or this servlet engine because I
want something new on my resume it's a
lot it's a lot meteor than that um the
two compelling needs I mean you know at
the end of the day there there are only
really three benefits to doing any kind
of computer or any kind of product at
all it's going to make you more money
it's going to save you money from your
current revenue stream or it's going to
make your customers happier same here
you're compelling need is you need much
faster time-to-market with your existing
code or you need radically reduce
maintenance costs you know basically the
cost of maintaining existing projects is
so ghastly because the original business
intent is lost that you really need to
encapsulate the business intent in the
program itself rather than having a
human compiler compile the business
intent down into executable Java code
identify the constituents who currently
defines and maintains the business
process and in a minute I'll get to
thought leaders but the person that
defines and maintains the business
process is almost the almost always
thelma in accounting it's not the
high-level person it's the person that
has to do with the day-to-day nuts and
bolts or the business those people are
really the ones that define and maintain
the business process we don't
necessarily define strategy but they
often define process
the business user who is currently
caught in spec heck it gave me the
specifications but they don't specify
the whole problem go back you know it's
a guy who every time you generate specs
there's something wrong with them and
you never get past the spec process
because the specs just never work right
that person is a key constituent for
going and lobbying to do a DSL and
finally the business user who's
attending all the stand-ups and giving
really excellent feedback that person
who cares enough about the business
process itself that they're spending
their time in their effort and giving
you feedback if you're doing agile
development on a day to day or you know
three time a week basis those guys are
important constituents and you can often
get them on board because you can show
them how their lives are going to be
easier with a little bit of upfront
investment find the thought leader
that's the person organises in the
domain installment accounting it's the
person it's a person who maintains the
file cabinet it's the person that knows
where everything is it's the guy in the
warehouse who like has his system crawl
inside their head it's often a very
difficult task because those people are
sometimes crunching there sometimes
difficult to deal with spend time spend
effort crawl inside their head listen to
the words that they use spend a lot of
time not talking about the tools that
you have or how your tools and your ways
are going to make things better for them
understand what they say understand the
words that they use understand why they
made implementation choices it might a
lot of it is probably going to be
anecdotal why do you do things this way
well you know back in aught five blah
blah blah blah blah but they're the ones
that kind of have over the course of
their career crafted processes and yes
ultimately those processes will change
through automation but the processes
exist the way they are now and a good
foundation for a domain-specific
language
the existing processes and the existing
words that are used to describe those
processes you need a big brain huge ears
and a small ego the last one I'm like a
total failure on and I was really lucky
that doing spreadsheet development I was
dealing with Wall Street types who have
egos like you know even bigger than mine
so it's like really easy to listen to
them because if you didn't listen they'd
like you know take the two-by-four if
that wasn't working with the aluminum
bat and if that wasn't working as lead
pipe like okay listen um for the web
based development languages there was I
had a co-authored guy named Donnie
butter who is really good at listening
and also really good at taking the
two-by-four to the back of my head and
it worked out really well because one of
the things that I learned from him was
how to listen and how to understand the
challenges and the solutions to the
challenges that in our case the HTML
guys were dealing with but in a lot of
other cases it's other domains so the
first pass of the semantics this is this
is the hardest part this is doing the
outline for the book this is like
getting those first words for the term
paper out on a piece of paper you
describe a scenario using the thought
leaders words focus a lot on the
exceptions to the rules because coding
to the way things usually work is a lot
easier than understanding that most of
most people's jobs are made up dealing
with exceptions so if you think about
that from day one rather than saying oh
yeah my call to malloc will always
succeed oh yeah you know file open why
should I check to see whether I get a
negative one or not it'll just work
think about the exceptions that the
domain that the thought leaders are
dealing with on a day-to-day basis and
keep those close to yourself when you're
doing your scenarios do it on a white
board until you have unambiguous words
that can be structured into suit
code the pseudo code that the domain
expert can understand and the pseudo
code that you're pretty sure is
sufficiently is unambiguous so that you
can then take and say oh that word means
these 50 method calls and these two
hundred lines of code this word means
any oh you you can start mapping between
the semantics of the business user is
using and the code that you would
normally write to express that sort of
thing make sure that there is
unambiguous mapping right up the
scenario using your pseudo code and then
test drive sit down with the thought
leader and one or two other people
describe the goals of the scenario give
them the piece of paper with the
pseudocode on it and see if they get it
see if they understand the words that
you've written down in their English in
their language that you know how to
translate into a computer program to see
whether that language actually describes
the problem domain okay so we have pages
and the pages you know going back to the
sitemap example we have a page of HTML
okay that's one distinct element so what
are some of the attributes of the page
well you know there's this there's that
there's a title there's a link text
sometimes it'll be programmatic
sometimes it won't there are conditions
you know there's permissions as to
whether the page is visible or not so
that's like how some of those semantics
started evolving you know we just like
sat down and like hashed it out and let
me tell you there were like 30
iterations a sitemap before we got it so
that you know it didn't change for a
very long time but the HTML guy was able
to look at the code and say okay I get
it
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>