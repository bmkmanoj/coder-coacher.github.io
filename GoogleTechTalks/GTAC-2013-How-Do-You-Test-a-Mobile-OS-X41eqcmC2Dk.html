<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>GTAC 2013: How Do You Test a Mobile OS? | Coder Coacher - Coaching Coders</title><meta content="GTAC 2013: How Do You Test a Mobile OS? - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/GoogleTechTalks/">GoogleTechTalks</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>GTAC 2013: How Do You Test a Mobile OS?</b></h2><h5 class="post__date">2013-04-29</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/X41eqcmC2Dk" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello hello welcome back true to word
here we're going to we're going to start
as a reminder please do squish in as you
can to make other room for others so if
you can sort of move to the center to
leave that space that'll be great if you
are interested in the topic tables we're
going to be selecting the topic tables
for lunch here in a few minutes you can
go to G dot CEO / gtalk 2013 and you can
find a link to the moderator to go and
figure out you know what topics you want
to vote up or vote down or even suggest
any topic so please go do that right now
if you can and up next here we have
David Burns and Mooney from Mozilla here
that are going to talk about how do you
how do you test a mobile OS and a little
fact about about Mooney here she told me
that her dog is named after a test
subject in Portal so you can always go
ask her about this from that so with
that I'll let them kick it off thank you
can y'all hear me okay yeah awesome so
I'm maleeni's ass and this is david
burns and we work on automation
frameworks over at Mozilla and we're
here today to give you a rundown of the
recent challenges that Mozilla has been
facing while automating a new mobile OS
so how do you test a mobile OS that's
the question that first came into our
heads when we were tasked with
supporting this new platform and we knew
that answering this question wasn't
going to be as easy as just googling for
an answer and or just winging it as we
went along there's a depth of question
of problems that need solving and
solving them in a good and long lasting
way would save us lots of pain in the
future so today David and I are going to
talk to you about how we solve this
complex problem and share with you the
pain points and the victories we had
along the way so see here great so what
mobile it was am I talking about as some
of you might know Mozilla has been
working on something called Firefox OS
and this is an open web accessible
device that's built on top of what we
know best which is the browser so we're
using gecko which is our web rendering
engine to drive the phone itself
allowing all the applications running on
our phone to be written in CSS
JavaScript and html5 so now you might be
wondering why would we want that in a
phone well we've seen a recent trend
towards web technologies in the mobile
environment so around sixty percent of
the apps right now in google play and
the App Store have at least one part of
the app that's a webview so what this
means is that on top of your operating
system that you know needs to run your
native applications you also need to
have a web rendering engine just to show
this web view and this trend it towards
web views isn't going to go away anytime
soon we're seeing a prevalence of
frameworks like PhoneGap which allow you
to write an application once using web
technologies and deploy to multiple
mobile platforms instantaneously so
what's the problem here the problem is
that these operating systems are doing
extra work so not only are they running
native applications but they also need
to run a web rendering engine just to
show you parts of this application
so is there a way to remove this extra
work that's the goal of Firefox OS what
we want to do is unite the concerns of
the OS and the browser so your phone is
doing less work and what we want to do
is optimize it so well that we can run
on low-end devices so we get this
benefit that by optimizing our browser
we get to optimize our phone and by
targeting low-end devices we get to put
this phone out to emerging markets and
put in the hands of people who may not
have a smartphone before or may not have
had access to the internet before so
what this means is we now have to make
our browser a phone and what is that
like what do we need to do for that that
means that our browser has to do things
like send SMS is and make phone calls
and on top of that has to act like a
browser so it has to render web pages
and that gave us the automation and
tools team the task of figuring out how
we can instrument and test all these new
features in this platform so what
exactly should be test since Firefox OS
is essentially a flavor of Firefox but
on the phone we want to test all the
same parts so this means that we want to
test things like rendering now rendering
um essentially means how the web page
looks like once it's loaded and the way
that we tested is that we let the web
page load and we compare the data with
either a reference image or reference
data to make sure that they match if
they don't match then we're not giving
new mobile users an experience of the
mobile web that they deserve like we
don't want to regress in any way in
rendering another shared another shared
concern that we have with browsers is
that we want to make sure that we have a
performant phone so we need to check
performance if our phone takes too long
to execute anything that no one wants to
use no one's gonna want to use this
phone so this means that we need to test
performance for simple things like
loading application but we also want to
do stress tests so that we can make sure
that we don't provide a degraded
experience over time or that we can
catch memory leaks and all that fun
stuff but now on top of these concerns
of that we have with our browser we have
new concerns is from a smartphone we now
have to worry about application unit and
integration tests
so smart phones have a number of base
applications like the calendar or the
dialer and you want to make sure that
these applications work before you sent
out this phone to people so to do that
you want to answer questions like does
my application work don't do the fun
functional parts of this application
work does this application work with the
system app does it work while other
applications are running in the
background now this is important for us
so that we can test our own base
applications but we also want to give
this test framework to third-party
developers so that when they write their
apps they can have the confidence that
it'll work in this new environment so
Firefox OS is not just going to run on
any desktop it's going to run our phones
so now we have to worry about testing
the phone environment itself this means
things like gathering hardware metrics
so one of the hardware metrics that we
want to gather is things like boot time
so how long it takes the phone from an
off state to go into a usable state I'm
sure we all had phones at some point
where you could press the button to turn
it on and it's just not responding so
you go when you make a coffee and you
come back and you still see a boot
screen like that behavior is not
acceptable for new users it might be
okay for early adopter types but we're
going to be giving this phone to people
who may not never have had a phone
before and we want to give them a good
an optimized experience so as we develop
this phone we want to make sure that we
can gather data like boot time and make
sure that we don't redress another
important thing that we need to worry
about now that we're running on a phone
is hardware metrics as the phone is
running so things like battery life like
fact in when we all have feature phones
you could turn phone on it would run for
a week without having it to be charged
it but now with our energy guzzling
smartphones we're lucky to get two days
off a single charge so we want to be
able to make sure that as we progress
with our phone and as we build it out we
maintain a good battery life and other
hardware metrics like this now one of
our most important and interesting new
test concerns is telephony so the
smartphone one has to be able to do
things like send a text message and
check your network provider and make an
actual phone call and if you can't do
this reliably then it's nothing more
than a frustrating portable computer so
we're going to have to figure out how we
can actually solve
for testing telephony so now that we
know what we want to test in general how
do we go about doing that do we have any
tech lying around that can help us run
tests for these concerns well since
Firefox was is similar to Firefox then
we can use the tests that we run against
Firefox against it we have many existing
frameworks for Firefox but none of them
tackle all of the issues that we need to
tackle here we have things for rendering
and performance but we don't have things
for telephony we don't have a way of
communicating to to multiple instances
at the same time because we never had to
deal with cross-device communication so
what all this pointed out to was that we
needed a new framework and us being good
engineers we were wondering wait we
shouldn't just let this be a band-aid
solution we have the opportunity to
build a framework that can answer
questions not only for now but can build
for the future so that any future
framework that we build can leverage the
work that we're doing now so now that we
figured out okay we need a new framework
what exactly should it solve so this
framework has to support our existing
test frameworks so Mozilla has hundreds
of thousands of tests running against
Firefox and we want to be able to
seamlessly run them against Firefox or
less it makes no sense to go off and
make your own framework and then rewrite
all the tests like that's just madness
and unnecessary work so the ideal
framework will be able to uplift all
these frameworks into Firefox OS the
next requirement is that it should be
the foundation for future frameworks
what this means is that to run any tests
on the phone we need to be able to
communicate with that phone so the test
runner has to talk to the test device
and this is the core driving mechanism
behind all of our frameworks and any
future framework will need to solve for
this communication so our framework
should be able to provide this core
pipework that's reusable across
frameworks today and tomorrow and the
last requirement is that it should be
reusable for any gecko environment so
what that means is that whatever we
create today should work on Firefox for
Android Firefox or desktop and Firefox
OS and any gecko product in the future
this will help us write one test
framework once and then easily transm
easily run them in any other environment
later so let's get to the gritty details
of these requirements so in order to
uplift some of our existing frameworks
what do we need to do well our existing
frameworks currently rely on Firefox
add-ons to run they use add-on so that
they have access to the privileged code
sorry to the privileged space of your
test environment so they execute code
against the chrome of the environment
and this is fine for desktop because it
has the ability to run Firefox add-ons
but in the beginning days of Firefox OS
we didn't have the ability to run add
ons we first started thinking about test
solutions about four months after the
project was announced so we had very
little to work with we didn't know what
direction the product will eventually go
in but all we knew is that we're going
to be building this on top of gecko so
while we didn't have the ability to
easily uplift these frameworks using
add-ons that means that we have to
somehow integrate our framework with
gecko itself this was actually an
opportunity because instead of running
as an add-on we now get to integrate
directly into the engine and we would
get a performance boost so whatever we
select as our our framework we have to
make sure that we integrate the key
parts for every framework so that
they'll be uploaded easily without any
problems um another consideration that
we need to take into account is that
we're running on phones and we don't
want to assume that the phone will
always be connected to a computer via
USB we want to stick them in data
centers and somehow talk to them over at
the network so whatever framework we
have we want it to be able to work in a
networked environment so that we can
remotely communicate with other devices
and the last but extremely important
consideration is what can we actually
open up on the phone so we don't want to
just just test web views we want to be
able to test things like setting the
battery and check if the webview has
actually received this new information
we want to do we wanna be able to get as
much control on video device as possible
from the get-go so what can we actually
control so what this all boils down to
is we need a reusable and easy way to
control off different phones and
to control multiple devices at the same
time and all of this should be done in
an easy and reusable manner across
frameworks we want to drive the phone at
all layers and we want to have
privileges across the device so what
that means is that I want to be able to
change file permissions but I also want
to be able to do things like change app
permissions so the solution that we came
up with is a framework that we called
marionette which is essentially web
driver beats Firefox OS so why webdriver
well the phone itself is a is a web
device so webdriver was written so that
you can manipulate user views from from
user perspective so you can test web
pages in an easy and supported manner
the great thing about webdriver is that
it's the protocol behind selenium so by
implementing webdriver we get to we get
to uplift our existing selenium tests
for free and it's something that's
already familiar to testers on top of
that web driver is being proposed as the
w3c standard for browser automation so
by implementing webdriver we essentially
get to kill two birds with one stone
because we can implement open web
standards and also solve our testing
needs another great thing about
webdriver is that it solves our remote
access problem for free it's already
built in with the idea of local and
remote ends so you can communicate and
create a session a webdriver session
with one device and then also have
another session with another device
within the same test so this will allow
us to do things like cross-device
telephony um and the other thing other
consideration is how will this help us
with our uplifting frameworks problem
well webdriver has this extremely
helpful method called execute script and
what execute script does is that yeah
you know it's it's it's totally hockey
but it's awesome because it works
exactly what we need to do and what it
does is that it lets you orbit any
arbitrary JavaScript that you want in
the current application space and that's
exactly what Firefox adults we're trying
to do we use them only to execute code
on the device itself but as I mentioned
before we needed to exit
code in privileged space that is the
chrome and webdriver only cares about
content so what the user sees so what we
ended up doing is the we didn't end up
making webdriver itself we ended up
doing webdriver plus plus so we added a
few extra things to it so we needed to
access privileged space so we added a
new method called set context and what's
that context does is that it allows you
to set the current executing context of
your selenium protocol commands so you
can do things like I'm going to set the
context to content I'm going to navigate
to a web page and I'm going to check
what privileges this web page has then
I'm going to set the context to chrome
change the application permissions and
then set go back into the content and
check if my application has actually
respected these permission changes so
this helps us right extremely robust
tests but it also helps us up lift these
frameworks for free because now they can
easily execute whatever JavaScript they
want against the chrome another key
difference that our web webdriver
implementation has is that the current
webdriver implementation doesn't have a
full spec tout area on gestures and
we're phones and we have touchscreen so
that means that we want to automate user
input which is multi finger gestures so
just to get our own work off the ground
we started working on the webdriver
specification for gestures and what this
means is that we added a bunch of like
gesture commands into our into our
implementation but the general way that
we solved it is that we added the
ability the ability for you to create
any gesture you want using chains of
action primitives so that is like I can
change one finger to do press move and
release but the other finger can just
press and beliefs and then you can
change these things together to create
any gesture you need and the third
difference that this implementation of
webdriver has two other ones and Firefox
is that it's built directly into gecko
and that gave us a huge performance
boost because you're no longer running
as some secondary concern your primary
concern so to explain the gritty details
of its implementation is david burns
so how does it all work as Malini said
marionette gets kicked off every time
gecko starts up and so gecko starts up
every time the browser starts up and we
have this really nice server sitting
there waiting for us to now accept
commands and execute them and because we
it's essentially just executing Java
scripts and like large portions of
Firefox is written in JavaScript we
cannot call pretty much anything we can
go all the way as when he said from the
browser Chrome which is kind of where
all the nice security areas are down to
the very insecure parts which is a web
page and we can execute anything in
between so now we're essentially sliding
to drive of a phone of an operating
system with webdriver in a
standards-based automation API just
driving an operating system it pretty
much doesn't get any cooler than that so
I'm going to now as splitter arts into
kind of how we did things we've done a
number of things slightly different to
the way the webdriver project those
things and it's mainly because it's what
fits better with us and so we have a
dummy client which just kind of sends
arbitrary commands over to the device
the web driving project kind of does
things with HTTP its protocol is kind of
rest ish it's not proper rest but it's
close enough and it delivers a nice JSON
payload into the into a browser browser
then knows what to do with it and
because we're doing things with adjacent
packets and we're doing wall sockets
into the device we only allow one
connection and the reason why we're
doing with potc p is because we're
trying to utilize some of the other
technologies that are going into gecko
at the moment like the remote debugger
we're using a
technology I'll get back to that it's in
the server part so I'll kind of show you
how from a simple point of view I'm just
going to use the terminal we can easily
just kind of telnet into the device
don't know if anyone can see that ok
I'll leave it on the screen for a while
so we can easily tell Nate in it shows
that kind of a nice echo response from
its all net server can we have the
computer sorry they up so we can nice we
get a nice echo response from from a
device the echoes just coming from the
phone so it's so we can see what it's
doing but it means that we can go back
to slides so now we've got a nice
mechanism into the phone the server is
kind of the really nice nice part it's
the nuts and bolts that kind of drives
marionettes and kind of gives us all the
ends into the device and into browser to
be able to control it the mechanism
we're using is a what we've called the
JavaScript transport layer it's just
kind of a rule TCP in into the browser
but we are now can send Jason payloads
threats and it's got a few little extra
bits and pieces added to it which want
to importance at the moment but it gives
us this mechanism and is being used at
the moment by the remote debugger which
is part of Firefox so like if you have
an Android device with Firefox for
Android you can kind of connect your
your phone to a host computer and then
debug from Firefox straight onto the
device
the same technology as that we're just
kind of now using it for automation
we've created our own actor because it's
a an actor relationship in it and the
actor then receives all the commands
that are coming through it kind of
breaks down what's in the JSON payload
and then kind of decides where it needs
to go nor normally it goes through to a
listener and listener attaches itself to
all the content that's happening on the
page so like if you have multiple frames
a listener gets attached to each frame
so that when we switch from frame to
frame it we just can carry on executing
so where are we using it we're currently
using it on devices emulators we've got
a special build of Firefox deck of
Firefox for desktop called b2g desktop
it's kind of got a number of the all the
instance that all the things that we
need for betta g- hardware things and
we're using it on firefox it's now
become marionette is now one of the 8001
testing framework so it kind of means
that within Mozilla if you push
something into our repository and it
breaks a marionette test it will be
backed out and you kind of need to fix
it this this is kind of how we view our
test things I know it's probably not
going to be too viewable but Gundam on
the left is an commits group by pushes
into our repository on the right I've
limited the UI to only show the
marionette tests that shows all the
marionette tests so marionettes and then
hopefully by proxy selenium is now part
of the Mozilla kind of waterfall so
every push that goes into gecko now
tests marionettes it tests like the core
parts of marionette and then goes off in
tests all the different parts that it
needs to and then in the center there
it's to the left of the marionette pot
kind of shows all the different
platforms that were running on so we've
got Lennox we've got windows we've got
some mobile devices so we always know
that marionettes going to be there and
it's kind of it's become so called to
the way we do things so how's it used
and it's been retrofitted into a number
of our test suites as Malini said we've
got hundreds of thousands of tests and
like we need we need to test that tests
that things are working because because
essentially a Firefox OS is a browser on
a device we need to make sure that how
people manipulate the Dom is still
working properly how people are
rendering CSS is still working properly
our reference tests are kind of
important and we need to make sure
they'd like JavaScript and all these
other little bits and pieces that are
quarter the way Firefox works still
works on the device except we can't use
the testing frameworks before we just
need to kind of make sure the tests work
and we are starting to go into knuth
butts so telephony it's kind of
important for a mobile operating system
to be able to make telephone calls you
know internet is all great and all that
but people like to use certain phones to
make phone calls for some silly reason
and then we've got this interesting part
a mobile device has gotten multiple
parts to it and that we need to make
sure that we can access so the browser
needs to access these and then from an
automation and testing points of view we
need to be able to instrument them and
test them so this different parts
there's GPS this bluetooth there's USB
there's all these different parts of the
system cameras things like that and we
need to a browser needs to be able to
speak to the hardware the hardware goes
well here's all the the inputs that you
want and then we go from there and we
need to test all of this
so I'm going to show you a quick test on
the computer so this is just a it's
going to run an emulator emulators just
by nature are kind of slow and what this
is going to do is this is going to run a
geolocation test it starts up in
emulator it's going to set a number of
different bits of information the
background to the emulator then check it
it's going to be true emulator style
it's very slow runs everything hooray
and all our tests pass but you can see
it's kind of it's set information and
then it's retrieve the information
checked everything's working back to
slides please and then we also need to
make sure that the you are working
people need to make sure that they've
got a functioning in device that if they
go to make a phone call if they go to
set an alarm they go to do all these
things those key parts of the system are
working as they expect and they're
working a in a certain manner but it's
not just kind of making sure that
Mozilla can do make sure that the UI is
working properly OEMs who make the
devices and going to be flashing them
for us they kind of strict on making
sure that things work because it's kind
of their name that's honest on the
hardware when it goes out to people so
they want it to be of a certain quality
and for those who kind of worked with
iOS and with Android and have tried to
kind of automate the UI and then kind of
gone grey or gone bald because you
pulled your hair out we need to make
sure that we give third-party developers
who want to make apps a nice way to
automate the UI if they need to or if
they just need to kind of execute the
bits of code as they see fit we give
them that because if you give them a
nice kind of testing infrastructure you
kind of have a nice ecosystem that third
party people want to come people want to
build apps because they can prove that
their app is of a high quality so I'm
going to kind of show you a test running
on the device if you can put it on this
please okay this is where our hope of X
so this test is kind of if it wakes up
the phone
ah the demigods are struck there we go
no that's me let me show you how quickly
the phone resets
while that line it's I'll get everything
ready sorry for the technical delay
alright take 20
Oh
ok
that's why this time
that looked like it maybe not oh yes all
right so kind of we we try to reset the
phone between tests where possible
because some parts we can't kind of
clear out so what it's doing is it's
just going to set an alarm a few times
and then kind of make sure everything's
working and I've broken broken it yeah
this was working earlier oh well it's
swear it totally was working earlier
right before the talk but yeah ok we'll
we'll just kind of skip the technical
difficulties and we'll go back to slides
so kind of where we've been a lot of our
testing infrastructure we've kind of had
to be building on the fly as well so we
just kind of start to go so smoothly he
said we kind of relate to the game or we
were invited late to the game but we've
had to play a play catch up very quickly
so we had Jenkins just running in the
cloud running our unit tests a web api
test so kind of this the hardware part
of tests and they were running against
emulators luckily when we're at this
stage we didn't have hundreds of
engineers working on Firefox OS but then
things changed and we started getting
more engineers and we needed and more of
the system started being built and we
needed to start running you know our
unit tests our web api tests and our UI
tests because kind of we need to make
sure that all the functionality is
working gaia which is a code name for
the the UI needs to have be working at a
certain level and we're running these on
emulators and we were running them on
panda boards for those that don't know
pandaboard is just a android development
board and it allows us to kind of do
some neat things it's essentially just a
nexus s without a screen
and kind of looks like an Arduino
Raspberry Pi and then we went from there
and we started actually also testing on
real devices so we've got some devices
that are OEM said was going to be over
some ilk and we started testing against
those men soon we're going to be testing
as the devices that were going to also
be sending out to the public this is
what a rack of panda boards looks like
it's a number of there's a number in
there it's been the kind of this is a
unit that was designed by our IT
departments and it's a number of panda
boards they're all got Ethernet they're
all got power and what happens is
whenever a test is ready we flashed the
device it's got an SD card on it that we
can change because SD cards only have a
certain life span we can swap out we can
it flashes the SD card and then we run
our tests and we go from there one of
the things mentioned earlier is that we
also suffer greatly from flaky tests and
mobile is kind of one of those places
where you're going to get a lot of flaky
tests and a lot of it also comes down to
a hardware so one of the nice things
about the panda panda setup is we've got
a framework cause called mods pool and
we've got some in our pool we've got
lifeguards so you kind of check how
things are going if they notice that a
certain board has an increase in
failures it starts taking that board out
of commission kind of let someone know
and then we can just kind of hot swap
the device because this is just in a
data center so our IT department can go
there swap it out and carry on the other
part of our test infrastructure is
making sure that we can do stress tests
against the device kind of just running
and running and running and running
tests because kind like people don't
really switch off their phones nowadays
they go they go to bed with them on wake
up and
still running and we kind of that's kind
of the major use case that people are
going to be using and we need to make
sure that the device doesn't become
sluggish over time it doesn't crash all
the time things like that we need to
kind of do all these really weird and
wonderful stress tests we do a lot of we
started doing fuzzing over it with a
tool called orangatang which was written
by will is in our team which kind of
just those gestures on the device at a
very low level and then kind of sees
what survives and we started doing
performance test against devices one of
the important things that people want to
be able to do is like play games most
people play games on smartphones these
days and so we want to make sure that if
you're playing a game that you're kind
of getting a high enough frame rate you
know you want to aim for that 60 frames
a second so that we can kind of make
sure that it is not jerky it's not
anything like that there's no no jank
which is kind of we try scroll and it
stops for a bit and then carries on
scrolling we want to make sure that
those things aren't there and this these
types of tests mean that we can kind of
make sure that when we deliver the
device to people to OEMs and when
third-party people want to start using
it they have their confidence in what
we've done and that's it really it's
been a huge learning experience for our
team we've learned a number of weird and
wonderful things along the way and we've
tried to solve a number of problems and
hopefully we've shared it up with you or
thanks great great thank you even in
reading
that was it was fantastic I actually I
really loved that last picture there at
the racks I also learned the danger of
calling api's rest api's because
sometimes your device's just take a rest
so with that if you would like to ask a
question there's a mic in the back there
and a mic over there I feel free to grab
grab the mic if you want to ask a
question in the meantime we'll grab one
off of the moderator here so first
question up how do you automate recovery
for devices that fall off USB or get
wedged out right during testing well it
depends on the device so we have the
panda boards which we can power cycle
and we don't use USB for them we
communicate over the network outright
during testing i dont rly understand
what that means perhaps you too but for
other devices we can we have to we have
the power cycle them like we have like
we have some tests using a run directly
against our phones and we have to
currently manually reboot them but we
have someone working on a solution for
that right now because manually reboot
them is just kind of not available at
all yeah we kind of from Oscar manager
to go because we've got a kind of a big
Faraday cage in a mountain view office
and every soft and we just lost our
manager to go work in there for the day
and power cycle whenever we need yeah
that'll be solved she thought a use for
your manager perfect right looks like we
had some questions I think you were up
first so ask away sure you touched on
you I performance testing at the end
there but how do you actually what tools
do you just actually validate the UI
performance do some kind of video
recording or people are watching it yeah
so we have this tool called Ida ticker
and what that does is that it's just a
camera that's focused on the on the
screen and it captures it and checks
that the data is moving actually at 60
frames per second so it's um we have two
ways of capturing that video data one is
to plug it in a video out cable directly
to the phone and send it directly to our
computer and I
hdmi output directly and the other way
which is what we're experimenting with
right now is with high-speed cameras and
we're just making sure that each of the
frames are changing at the rate at which
we expect well thanks so fall under that
so as you're sort of swiping or moving
you know one thing is the frame rate but
how do you actually know the animation
is happening I don't know about the
animation but when it comes to swiping
one of the key things that brought us to
doing this type of testing was when we
rewrote a lot of the Firefox for Android
stuff and when you scrolled we were
getting a lot of checker boarding
happening because the date of the draw
drawing wasn't happening fast enough so
we it's a we created a framework what I
say we will let the chance he's on our
team he created a framework called IDIS
occur that just kind of watches for for
these checker boarding and then kind of
works out through that he created
orangutang which instruments android and
kind of tells it how to scroll and
things like that so it's allowed us to
kind of test against other browsers so
we could see how well we checkerboard it
well we don't want to check about how
like other browsers were handling and
the same website great second up I think
you were up and if you want you can say
your name and where you're from and then
ask your question if you just want to
ask that's fine too i am daniel from
snap interactive and my question goes to
security like obviously marionette is a
really great thing that allows you to
drive everything about the phone but
what if someone were able to get access
to that and do those kinds of things to
your phone that you don't want them to
do how do you kind of prevent something
like that from happening at the moment
marionettes is only available engine in
engineering boats so you kind of have to
build it in to Firefox OS we're working
with them from with our security team to
kind of workouts a nice way for
developers to be able to have marinade
so just kind of go in by a phone from
your your local phone company and then
kind of start working with it because
yeah security
is one of our biggest prop like concerns
privacy as well because you know people
people might be doing internet banking
on things like this we want to make sure
that they feel secure that they can do
all these things but oh so that if a
developer goes and buys it they can
start working with it so we've got a
number of ideas especially for desktop
how to sort the desktop problem the
mobile problem at the moment is just
don't put marionette on there and then
we'll kind of as and when we can solve
that problem it'll start slowly being
put back in thank you great thank you
and another question over here please
yeah hi I'm Jonathan from sauce labs and
if I recall correctly you guys said that
you in your sort of webdriver + +
protocol you speak JSON over TCP rather
than HTTP so I'm wondering whether I as
a potential Firefox OS app developer can
use standard selenium client libraries
that already exist to speak to Mary net
or whether I have to base it off of
something you guys have written so our
Marinette client library is its ninety
percent the same as the selenium library
and because we've got like ideally when
we get to a certain place what what's
going to happen is web drivers got an
idea of like the commands that has got
and then it's got a command executor and
what we want to try to do is just switch
in the command executors for Firefox
only and then kind of it just knows to
speak through that and then works
and the spec oh so says that we have to
do HTTP I've already well we've already
got a that people can use but my gut
feeling is that the selenium project is
probably going to be using straight into
it and then if you're not one of the
like languages that the selenium project
managers itself you'll probably go
through the show so we're still going to
have that and it's just essentially
takes it HTTP maps it down to our TCP
connection and goes from there so let me
take a question from moderator so those
that are watching live in remotely also
get to ask some questions here so let's
I can tell this one over to Malini I
guess do you prefer to run on automated
tests do you prefer to run your
automated tests on real devices or
emulators well ideally we'd like to run
devices all the time but that's also we
haven't solved the infrastructure
problem of how do we power cycle these
devices and devices are very finicky
emulators have been incredibly reliable
as a way of testing so we've been
running all of our tests like any time
you commit code to Mozilla we run our
test against emulators just because
they're easy to put up in VMs it's
already it's a very easy platform for us
to use and it's actually fairly
representative of the environment that
that you're running in so for most cases
emulators do just fine but we do want to
build out more device testing ok and the
last question and then I'll do some
announcements right after those
questions so please from the audience
again this is Guam I'm from Android
testing engineering so from a mobile OS
testing for sec perspectives I think
there's a lot of stack between what
you're offering to the app developer
down to the maybe the kernel or the
driver level how how do you solve the
problem of poking level layers in
between like because from the
presentation a lot of cases I've seen
are mostly kind of like integration
level or functional testing like how to
appropriate levels in between and also
sort of in related to the question you
just answered there are device specific
characteristics or flakiness or
problems when you test mostly on
emulator how do you solve that problem
for the first question would you like to
take that I'll tickle in my calendar so
for the first one I'm one of the things
Malini mentioned during the talk was
that we can set context and we can
switch between different context within
the browser so ninety percent of the
time what app developers are going to be
using well I actually probably a app
developers are going to use it
ninety-nine point nine percent they're
going to be running everything in the
content layer which is kind of just your
average web page for what we are doing
we have frameworks like what we call
mochi tests and things like that and
what that does is that will speak
through JavaScript into the chrome layer
and then kind of it'll be like the best
use case I can think of is how to how we
test the done a lot of the Dom stuff
will be happening that'll be happening
in privileged space kind of then pushes
it out to the content space and we need
to make sure that when it manipulates it
in a certain way that we can then
instrument it that way so we just kind
of we can sit in the Dom like in the
chrome space the browser Chrome and then
kind of just kind of see what it's doing
ask your questions and then see get
information back we have accents that
I'm going to let my leader you have ten
seconds and then you two can chat at
lunch so you're ten seconds so for
device-specific flakiness um on the
emulator we don't have like we are able
to distribute it to other people in our
in our code in our community so they can
use it and test and make sure that it
works in this environment if it fails um
then it's really up to them to fix those
those flaky problems but when it comes
to device specific problems um you have
to have the device on hand to fix to
resolve these clicky issues and that's
another problem but that's why we've
relied on emulator so heavily as well
all right thank you
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>