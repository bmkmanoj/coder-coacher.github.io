<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>The Virus Safe Computing Initiative at HP Labs | Coder Coacher - Coaching Coders</title><meta content="The Virus Safe Computing Initiative at HP Labs - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/GoogleTechTalks/">GoogleTechTalks</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>The Virus Safe Computing Initiative at HP Labs</b></h2><h5 class="post__date">2007-10-08</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/tQI5FsNSCp0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">i'm dan bernstein i'm hosting a series
of tech fox this month on authorization
based access control currently or
possibly formerly known as object
capabilities and we have four speakers
who are associated with HP Labs and each
of them has a different perspective a
different a different story to tell
different project to present or projects
to present so with with that we have
Alan carp today is the head of the virus
safe computing initiative at HP Labs and
he's going to give us a overview of what
his group does and I guess talk about a
couple projects yep okay first I got to
show you this that we just you know
every six to nine months the branding
office sends out a new standard format
for slides and this is this is the new
HP branded slide formats I thought that
was pretty cool all right so okay I have
to start with a disclosure with a
disclosure HP has a very active security
team we are not part of that team HP
Labs has a very active security team we
are not part of that team we are sort of
just like a skunk works off in the
corner working on security and the
reason is we take a very different view
of security than most security
professionals do and I'm going to tell
you about some of that today and you're
going to hear more about it in the next
three weeks that's okay with us the rest
of the world is crazy and we're the only
ones who are saying and my goal here is
to disinfect you of the world's
craziness and infect you with ours so
just put that in perspective in order to
demonstrate the value of our way of
thinking about security we decided to do
what many people can would consider
impossible we decided to make a virus
safe computing environment for microsoft
windows you guys can stop laughing now
we have it runs our beta releases out
okay but the operative word is safe you
see we're not going to detect the virus
we don't block the virus
we don't change the operating system we
don't touch the applications we just let
the virus run but it doesn't hurt you
and you don't spread it to others and if
we succeed in doing that we'll have made
right virus writing uninteresting and
that's the way you win this war okay now
this is a security talk and so when
anybody says security you have to ask
what do you mean by that I've come up
with 11 meanings of security there are
the 48 3 a's of security to which i've
added access control there are the
things that are normally done with
crypto and then the things related to
can I actually use my machine in other
words you know am I am i safe from
denial of service by sledgehammer now no
security person no security project can
be expert in all of these yet every
security architecture must cover them
all so when i say security i'm going to
tell you what we mean we largely focus
on access control you'll see that we
touch on some of the other things but
our primary focus is on access control
so here's the outline for the talk
what's the problem well on my computer
on many of your computers there's this
very powerful program this program can
erase file it can search looking for
secrets and sell them to the competition
in extreme cases it can even reformat
your hard drive yet there are employees
at my place and I'm sure there are
employees at this place who use this
program at work every day some of them
for hours at a time would anybody care
to venture a guess for what this very
powerful program is any guesses huh
that's right all of them he says exactly
right this one is can do all of those
things now why does solitaire have the
power to reformat your hard drive just
because you're running as administrator
I mean it's a ridiculous authority to
give it why can it plant the Trojan
horse in your startup folder well nobody
ever said that solitaire did but the
fact that it can is the root cause of
all our of many of our problems
the reason this happens is because we
use identification or role-based access
control you log into your computer and
you get your identity and then every
process you start runs with that
identity and that's a good way to keep
you from doing something you're not
allowed to do but it doesn't prevent a
program acting on your behalf from doing
something you're allowed to do that you
don't want done that's what the viruses
do right they do stuff you're allowed to
do that you don't want done we think a
better approach is to enforce the
principle of least authority give each
program only the authority it needs to
do the job the user wants done and then
you don't have to worry and it really
recognizes that we give privileges to
people but we can only control access on
processes now this approach has been
used many times in the past and it's
always failed even the NSA gave up on it
the reason is it's viewed as a usability
nightmare you keep getting these pop-up
dialog boxes may I may I may I it's a
denial of service attack against the
user so the key insight here comes from
Mark sticklers work on cap desk where he
noted that when I want to edit a file
typically I'll do something like
double-click on the icon for the file
that's an active designation that I have
to do no matter what his key insight was
that the system can also use that as an
active authorization and when we do that
we find that almost all the security
decisions disappear into the background
the actions you normally take any way
and you'll see that in the demo now
today's approach is you know every time
there's a new kind of attack an excel
macro that does something bad don't use
macros love letter will don't use email
attachments every time there's a new
class of attack we're told not to do
something else so when we get the next
class of attacks i fully expect to see
this be the recommendation i mean that's
that's what it's going on here this is
feature starvation there's there's good
reasons why we want to do that stuff and
we think that especially dynamic poll
whether we're the authorities can change
is the user wants to do different things
is far better than feature starvation it
lets you use the features that will
still be some risk but at least you get
to use the features while you limit the
risk now the group consists of five
people you're going to hear four of us
during this lecture series me mark
millar next week Tyler closed the week
after and Mark Stigler the week after
that and we've worked on or are working
on a number of different projects and
what I ask everybody on the team to do
including me is for each of those
projects produce three slides and just
to make it a little bit harder no more
than 50 words total on all three okay
and sometimes that's straightforward and
sometimes it's a really hard thing you
can ask Tyler how hard that is because
we all sweat it a couple of weeks over
getting one of his sets of three slides
now even at that limit I don't have time
to go through all of these so what I'm
going to do now is I'm going to give you
a brief summary of each of these
projects and then open it up to the
audience and show you the ones you want
and if you don't choose I will and about
15 minutes before the end we'll stop and
I'll give you the demo and wrap up okay
so let's start at the top mark millar
who you're going to hear next week has
spent the last six or seven years
working on the e language now he calls
it a language but it's far more than
that it's a full distributed secure
runtime system with some very
interesting ways of dealing with
concurrency mark Stigler used the e
language to write cap desk which is a
desktop environment it looks like any
other desktop with icons and menus and
all that kind of stuff except it's
inherently secure and distributed and
underneath it is a secure distributed
file system some just but just
transparent you just work on your
desktop as you would normally mark
millar and mark Stigler formed a company
that got a dart book contract that the
DARPA wanted a browser that they could
use in the Pentagon where the rendering
engine had been written by the Chinese
army browser to using the Pentagon with
a rendering engine it'd be written in
the truck that's quite a challenge these
guys succeeded there was a security
review there were some bugs but overall
they succeeded in building such a
browser that's the DARPA browser how
many people here know about donut
planetlab a few people planetlab is a
consortium of about 60 universities ten
companies they've got nearly a thousand
computers scattered around the world and
if you want to do an experiment in
large-scale distributed computing and
you're not at Google you can you can go
ahead and sign up and get a piece of
each one of those thousand machines so
it looks like you got a thousand
machines to yourself so for example
oceans store is one of the projects
being run on planet lab well we had a
security review of Planet lab and they
came in and told us about it and the
first thing we noticed was there's a
planet lab central now security guys
panic anytime they hear central central
point of failure central point of
vulnerability so mark Stigler Mark
Miller and Terry Stanley about two years
ago a little more than two years ago
took a memorial day weekend a three-day
weekend and they built essentially most
of what's the important part of what's
in planetlab but without a center so
they call a donut lab which is planetlab
without a center and the interesting
thing is because they use e they only
need about 12 pages of code and that
included their test application so
that's an impressive demonstration of
what you can do with the e language a
number of years ago I was involved in an
HP product called espeak and we that's
no longer being offered as a product but
we learned some important lessons one of
them was that you need to consider
structural security in a distributed
system you have certain components and
they can be plugged together together in
different ways some of those ways
actually make it possible to secure your
systems and others don't you need to
study those and we learned some lessons
and that's what structural security is
all about okay what do you do with your
passwords well it's a big mess right you
got them in your head which means you
only have a few and they're low entropy
I
I think one of the best things you can
do is write them down and keep them in
your wallet because I never heard of a
pickpocket who hacked computers or a
hacker pickpockets but I worried about
this problem and a few years ago I came
up with a little tool that lets me
calculate my passwords rather than
remember them so I only have to remember
one secret and I can get strong
different passwords for every place I
will again that's the site password tool
fishing is a big problem farming is a
problem what are we going to do about
that Tyler closed realize that the
essential problem was that you were
being asked to make an important
decision based on information provided
by the attacker the attacker chooses the
URL the attacker chooses the look and
feel of the webpage so he came up with
the pet name tool which is available for
Firefox that lets you see information
provided by you and if you don't see
that information most likely you've been
fished or farmed and you know to be very
very careful copying ye who's a grad
student fifth year grad student at
Berkeley be finishing up I hope soon
took these two tools and put them
together in a way that one user said it
has changed his life he no longer
agonizes over passwords it's a good
example of part of our philosophy which
is improving the user experience by
adding security improving the user
experience by adding security we have
about 15 users at HP Labs most of whom
use this tool because it's easier they
don't even care that they're more secure
ping is also an expert in interaction
design for security he's written a
couple of book chapters on this subject
and he's come up with ten principles for
secure interaction design Tyler again
looked at the problem of composing
services on the web not necessarily web
services in the sense of soap but how do
you put things together on the web in a
reasonable way so that it's manageable
and understandable secure
durable and all that and he came up with
something we're thrashing around on the
name the current name were using his web
keys but the basic idea is you can
compose web services with very little or
no glue coup glue code and that's the
idea behind behind the web keys Tyler
also had a consulting business in a
former life when he was living on the
beach in Anguilla and I don't you know
this but the oil tankers at sea the oil
on them changes hands several times
between when it's loaded and when it's
unloaded and those contracts have a very
complicated protocol and Tyler again
identified the essential thing the key
point that was making those protocols so
complicated and came up with the iou
protocol which came to the eye of your
protocol is simple enough to write down
on about a page and a half of text so
you greatly simplified it by identifying
the key source of the complexity and
then I've been working with the Navy the
Navy is trying to turn the DoD into a
whole bunch of web services they're
using the services oriented architecture
and the web services standards and I
looked at what they were doing and I was
giving this presentation to a group of
high-level managers program managers
these are the guys who wouldn't even
consider writing a check for less than
300 million right you know little little
stuff like that for the government and I
told them by the way before I start what
you're doing ain't going to work I can
tell you why and I can tell you how to
fix it and so over dinner I told him why
and I told them how to fix it and two
weeks later their consultants came back
and said it's not working and they said
why and it was exactly what I told them
so now I go down to Monterey every once
in a while to tell them how to fix this
stuff and that's that's what this a back
is all about and then the demo the virus
safe computing environment so that's the
overview of the projects anything that
you'd like to hear about in particular
anybody otherwise I get to choose
so NSA added code to linux to sort of do
sandboxing that's called HP has a
product on that called net top and this
is for the multi-layer sick level
security the way it works right now you
got some private in the army actually
I'm dealing with the Navy so you got
some semen in the Navy and he's dealing
with highly classified material somewhat
classified material and confidential
material and he's got three machines on
his desk on a submarine Yeah right you
know they don't got a lot of space on
the submarine and in fact worse than the
machines on the desk are the holes you
have to drill in the bulkheads to get
the cables from that turns out that's a
bigger problem for the Navy I got very
limited space there so H the NSA
developed this infrastructure based on
virtual machines VMware where you can
have one machine and run three separate
compartments NSA has certified the code
that they can't cross talk that's what
net top is a back is something different
it's a completely different way of
thinking about how to do security so
since you're my host i'm going to take
his question first and i'll explain to
you a little bit about that besides this
is the work I'm doing and I'd rather
talk about my stuff than theirs but I'll
get to it
so let me start with a sad story oh you
can see what happens when they give you
a new format that's a little too close
to the bear but I have to edit my slides
let me tell you the sad story of zebra
copy this is a true story zebra copy was
a mom-and-pop copy center in Palo Alto
down at the corner of page mill and El
Camino and they were so small that when
business was slow they dress up one of
the employees in a zebra suit stand out
and wave at cars when my son was little
he like that well they had a contract
with HP and about 2,000 HP people had
the right to order copy jobs from zebra
copy and so when an order came in zebra
copy would look at the name on the order
and check it against their list and if
the name was on the list they do the job
right and when when an employee changed
jobs HP would just send a note down to
zebra copy and they'd update their list
the first time I heard this I thought it
was a joke I mean it's the way we do
things but it's a joke why is it a joke
well at that time HP had more than
10,000 small business partners like
zebra copy and zebra copy had maybe five
hundred or a thousand clients in the
valley like this right so they must have
had a full-time person doing nothing but
updating these lists it was a nightmare
right now they're out of business now I
don't think the of extra person was the
only reason they went out of business
but it sure didn't help so what was
going on so let's say bob was one of
those people at HP who could order copy
jobs from zebra copy so Bob would send a
request to zebra copy they'd look up his
name in their policy database you know
maybe he could only order black and
white jobs and that color jobs get back
the result and if he was authorized then
they attended the job back to Bob and
very simple very straightforward but it
turns out there's a number of problems
first of all how does Bob's name get in
the zebra copy policy database what if
there's already a Bob there does he have
to be Bob queue or Bob X or Bobbsey how
many identities you have on the internet
because of such problems also Bob had to
be able to authenticate he had to learn
how to login that's why we have so many
passwords
look at how it worked we are the problem
of ambient authorities when Bob makes a
request of zebra copy they look at the
request and they look at the sea of all
the things that Bob is allowed to do and
if there's I'm actually do it so if
Bobby intended to just check his account
balance and inadvertently do it a
programming error an input error ordered
ten thousand copies 10,000 copies get
ordered or Bob's the program bob was
running had a virus and Bob intended to
just check his account balance the virus
go order 10,000 copies so there's a lot
of chance for confusion there's no
convenient way in this picture for Bob
to give a program a subset of his
authorities Bob goes on vacation and he
needs a carol to take over form how does
he do that well he can tell HP to get
Carol to the zebra copy database that's
one way of course that takes some time
and it's awkward and it's a problem
having done that let's say Carol does
something wrong you've lost track of who
was responsible for Carol's actions
right Bob was the one who said she could
do it Bob wat has chairing the blame but
you've lost track of that so what
normally happens in this case anyway is
it so hard to let somebody else take
over part of your job that you just let
them take over all then you give them
your password I don't know about here
but at HP every manager has given his or
her admin his or her password right
because you can't give part of your
authority you need them to have part of
your authority do your job so you give
them all your authority and now you have
to trust them very bad situation Bob
gets back from vacation how is he going
to do the revocation well he tells HP's
back to revoke Carol HP send zebra copy
a message says remove Carol from the
database but what if carol was already
in the database for another reason oops
how do you keep track of all this stuff
and finally there's a a very important
vulnerability that is wildly overlooked
which is the confused deputy let's say
that Bob doesn't make the request
directly but HP does it's quite likely
that HP and
more things than bob is allowed to do so
what if Bob asks HP to do something that
HP is allowed to do but Bob isn't HP
might do it right so how do you prevent
that well HP has to check Bob's
authorities before it acts as his deputy
but that means every service that acts
on behalf of somebody else has to build
its own access control mechanisms and
that's just not a recipe for success so
here's what we propose authorization
based access control now it's not much
of a change I've just moved two lines on
the architecture diagram what's going to
happen is when hv signs the contract
with zebra copy the h0 copy is going to
give HP a bunch of authorizations
independent authorizations one for each
action covered by the contract HP is
going to put him in its policy database
when bob logs in and he only has to log
into HP he will get back a bundle of
authorizations all the things he's
allowed to do with an HP with zebra copy
with other business partners just the
big bundle of and now when bob wants to
order copies from zebra copy he'll give
that running program the exact
authorization it needs to do the job he
once done that's Pola principle of least
authority has a number of advantages
remember there was no trust relationship
between Bob and zebra copy it was zebra
copy to HP HP to Bob and this makes that
explicit and making trust relationships
explicit is always a good thing I'll get
to delegation but revocation is
manageable if bob has delegated one of
those authorities he can just revoke it
whenever he gets back from vacation it's
a very simple thing very easy to do
you'll notice that zebra copy is now out
of the business of managing HP employees
so we've taken this end times m problem
and reduced it to an n plus m problem
that's another big win and furthermore
it has privacy implications because now
nobody else has to know when HP has a
reorg when somebody changes jobs or gets
fired or whatever this is pretty
important when you're talking to the
military in particular oh isn't that
nice ok
should we run my backup now maybe not
it's easier to upgrade the system if
zebra copy has a certain format for the
authorizations right zebra copy is the
only one who looks at what they mean so
if zebra copy wants to add a field to
the authorizations or change the names
of the authorizations they're the only
ones to look at it as far as HP is
concerned it's just an opaque bag of
bits that they know what rights at
grants but they don't have to have to
know how those rights are expressed so
if zebra copy wants to do an upgrade
they just do an upgrade yeah so if Bob
is delegated to Carol Carol can now do
replay attacks and it depends on the
technology you use and i am not saying
anything about the technology you use
the whole point here is to get you to
stop asking who are you and start asking
is this request authorized everything
gets simpler when you do that okay and
finally distributed policy management is
viewed as a very hard problem I actually
think with explicit authorizations with
authorization based access control
distributed policy management is quite
straightforward because it just follows
the way we do things anyway HP signs the
contract with zebra copy gets a bundle
of authorizations Bob manages the
graphics arts department so they give
him the authorizations he delegates them
to his people they delegate them to
their people it's just the way we've
managed companies for hundreds of years
and it just works and we don't need a
whole lot of infrastructure to make it
work so that's the story on
authorization based access control in
fact I was just at the tippy workshop at
Stanford and there was how do you how do
you prevent all these authorization
attacks attacks against our
authorization systems and the question
is why are we asking people to
authenticate so many times that's
opening you up the fishing look when
when you set up a new account at a bank
you get a little web you know a URL that
you can bookmark right well why does
that URL take you to a forum where you
put in a new
your ID and password why doesn't that
URL just take you directly into your
account and the URL is just a big secret
like a big random number it's a it's
it's a moral equivalent of a password
but you don't have to remember it it's
just the web link right so when so yes
we can go to all kinds we consider that
and we understand how to deal with that
there are ways to deal with that for
example it the bookmark doesn't have to
can be encrypted in the browser and you
can use a socks proxy to do the
decryption to send it to the bank right
there are ways to deal with these things
but the point is you know I can jack a
new keyboard sniffing I can do fishing i
can do fine i can do all kinds of things
if the bank link takes me to a login
page the number of tax and the way of
implementing it is much harder if I just
have a bookmark &amp;amp; pull by the way it's
easier on the user and it can be and it
can be made more secure so let me just
go back okay what else site password
okay so as I said too many rings
services require login we haven't
changed the world yet or get we'll get
there eventually we haven't changed it
yet so either you have a one or a small
number of passwords or you have a
different password for each site if you
have a different i have i just counted i
have 55 places i login i'm not going to
remember 55 different strong strong
passwords so i mentioned the piece of
paper in your wallet there these
password managers firefox has one built
in that and you can buy these things
that keep them encrypted on your machine
but then how do you get it how do you
get your password when you're not on
your machine so what are you going to do
so i just wrote this little tool you
have one password one strong password
you have to remember it's subject to a
dictionary attack so it needs to be a
strong password you have an easy to
remember name for the website and they
just get hash together to produce a
password that you can cut and paste into
the field we have a version you can get
it all
off the HP Labs download site by the way
if you're not at your own machine you
can just go to my web page and run the
program on the machine you're sitting at
using the executable sitting on the on
the web right and so you can get your
passwords wherever you are we've
actually identified a number of other
uses for example role based access
control right we can use the name and
the role as part of it to put them
together in different ways we've
actually used it for symmetric key
management when Mark Stigler first
joined HB actually lives in Arizona
comes in every second week and he
couldn't get through the VPN tunnel it
turns out his ISP had some port closed
and so we just set up a symmetric key
with a shared secret that we shared when
he was visiting one time and then we
were able to change the key by just
updating the one filled with the month
which could be in the clear or we could
just tell each other openly about the
second part with a slight change on the
server side it can be used to generate
one-time passwords and one of the things
left out of the wireless equivalent
protocol was key management and this
tool can actually be used for WEP key
management yeah so is there a simple way
to change your master password without
changing all of them no but there's a
simple way to change one password
without changing them all which has just
changed the name so Schwab makes me
change my password every year so just a
couple months ago I switched the site
name this thing from being Schwab 2005
to being Schwab 2006 that can be public
information so i actually have all my
site names and user ids actually on my
public website there's no link to it so
i know where it is and you don't hahaha
but if somebody got that it would give
them very little security information
except for schwab where my user IDs my
associates social security number so if
that's not listed but in general it's
just there so yeah
so yes so are you more vulnerable to a
keystroke logging attack so what I do is
I have site password in my startup so
when I first log into the system when
I'm least likely to have at least a hook
based logger running I type in my master
password after that there no keystrokes
to log ok so if I'm gonna log in from
another computer that's always dangerous
take your chances but if i'm at a
friends look i bought these shoes
standing in the sony store at stanford
shopping center ok i was over there my
wife was shopping i was bored i said i
needed need my shoes so i went to the
place where i'd bought them before and I
needed my password ok i'm standing at a
computer in the sony store what is the
risk that they're going to get my login
my master password and know what to do
with it quite frankly because nobody
else knows about site password so i just
i just ran the thing and got my account
got my password logged into the site and
bought my shoes ok you have to manage
your risk why are you logging in from
somebody else's machine anyway right
there are plenty of things like there
could be a hard guard where keystroke
logger there right so you manage your
risk so in this case I managed my risk
ok absolutely there are many ways you
can deal with it that make it easier did
you know that the plenty of things once
you have the idea and this is just hash
based passwords it's just an md5 hash of
the secret and the henna site name so
yeah
sure
you're going to hear more about this
next week right Markham okay yeah right
yeah so we've wanted to have electronic
cash for a long time right but we don't
have it yet so it must be very hard to
do I mean there's a lot of money to be
made if we could have electronic cash
I'm not talking about micro payments but
just electronic cash so this is the
problem you can see the game the problem
with the new style on the slides I got
to go back and double-check them so this
was the this was the problem that I
think Markham started out to solve which
is why he got into this racket no maybe
sort of any rate so it must be very
complicated so here's the situation we
have Alice and Bob that have accounts at
the same Bank Alice wants to pay Bob ten
dollars i'm going to show you the e code
she needs to do that so the first thing
alice is going to do is make a purse now
she's got the handle to an empty purse
and then she's going to tell she's going
to deposit ten dollars into her purse
you see it gets removed from the bank
then she's going to hand the purse to
Bob now bob has the handle to the purse
and then Bob is going to deposit the
money into his account now you would
think this would have to be very
complicated with all the things that
could go on money could appear money
could disappear Alice could cheat the
bank the bank of Chief Bob I mean
they're all kinds of things that could
go on but here is the totality of the e
code you need to do that even when Alice
and Bob in the bank on three different
computers talking over the open Internet
very simple because the proper way of
thinking about security was built into
the language at the very beginning what
about the bank that must be a real mess
right if it's so simple for the clients
the bank must be a real mess here is the
total code you need for that transaction
then now it's not really a bank there's
no auditing no sox compliance you know
all that other stuff but it's all the
stuff you need to
make that Bank work without any chance
of money disappearing or the bank being
cheated in any way okay and it fits on
one slide not a page of code but one
slide again that's because II thought of
mark no or thought about all the the
implications of the security actions
that he was taking basically this is a
back at the level of the individual
object now if you think that you need to
do learn a new language and learn a new
runtime system in order to make this
work you don't it turns out that what he
is doing is just good object-oriented
code design throw away all the things
that break the object oriented model and
you'll almost be there and so in fact
there's a project called Joey at at
Berkeley that's providing a filter to
verify that you're using the proper
subset of the Java language but since
it's a subset any Joey program will run
as job as a Java program it's just the
subset and the verifier they're writing
make sure that you don't use any of the
bad stuff that you shouldn't have been
using anyway so you can actually use
Java to get this level of security now
it's a bit more verbose and you can see
there's some funky library calls so you
can use e for the simpler it's hard for
me to say this without choking the
simpler syntax but in this case in this
case it yeah we have syntax arguments
all of that yes
what happens to the person when an
exception is thrown we haven't shown
that here let's see what exception would
be thrown here yeah they'll just tell me
quickly you know so and i'll repeat yeah
that's the one transfer spot and in
critical issue is that if the two
persons are person currencies or
quantifiable to the first or the imam
there's insufficient funds needlessly
cause an exception being drawn before
money is transferred once you've got
from past all those checks now you're
being home for which there's no
opportunity for apps are so let me
repeat that for this simple example of
one bank where there's only one currency
if the purse is a legitimate purse there
are no exceptions that can be thrown
once you get to that point okay but if
there are then the exception code would
deal with putting the money back in the
account so for example if Bob did some
operation against the person was invalid
well Bob would get an exception but the
purse would still be there okay but
there are no exceptions this is why it's
very careful to use things like branding
and the methods that that the arithmetic
in E is always using non overflowing
arithmetic so the number of exceptions
and in this case there are no exceptions
that can be generated but if there's a
an incompatibility in the purses you put
in dollars and I try to pull out euros
then the exception will be thrown but
nothing bad happens to the purse if the
bank crashes es e is replayable from
previous state senior decision was
precision are the states there's an
illicit presidential debate resistance
state complete transaction so you
crashing come back of your last
persistence state all right it's
inherently transactional in that sense
so okay okay so let me go to the demo
okay now HP Labs has lots of various
projects one of them is the nano
computing if you heard about this where
they're making individual circuit
elements out of molecules you know one
molecule thick switching and transistors
and all that they built the dentist
memory by a factor of 30 right it's a
it's forgotten how many gigabytes per
cubic millimeter or was square
millimeter or whatever it is but then
they got 64 kilobyte kilobytes of it but
at any rate one of the things you may
not have heard about is their work on a
molecule called vot moline vot moline is
a molecule made up of four carbon atoms
it was discovered in the early 60s by
Isaac Asimov and what it is is four
carbon atoms in a tetrahedron and it's
been rotated in for space so that one of
the carbon atoms is 1.3 seconds in the
future and our guys have figured out how
to chain these things together sort of
like a carbon nanotube so they can see
an arbitrary distance in the future okay
and they built a spreadsheet that will
calculate not predict but calculate the
value of my stock portfolio 10 years
from today now okay good i sometimes i
give this talk to table you know rooms
full of executives and nobody laughs and
I get really worried about my stock
portfolio okay any rate there physicists
and chemists and you know they don't
know much about computer security so
they get a lot of viruses so what am I
going to do so let me run this
spreadsheet for you we oops get set up
here we call this spreadsheet killer xls
because it's the killer app right this
is the ultimate killer app so the first
thing I want to do is I want to open it
the way I would
on the way you would open it on your
machine today okay and the first thing
you get of course is a stupid dialog box
dialog boxes need some translation this
one is saying do you want to get your
work done and risk your home machine or
not and really that's all that's that
it's saying and we say of course I want
to risk my whole machine really what
we're saying is we want to get our work
done okay hundred dollars invested in HP
ten years and today will be worth
133,000 dollars hey I like that okay we
don't know the rate of inflation it
might not buy a double to latte but and
by then Google will be charging for
lattes don't worry about how about a
hundred dollars invested in Microsoft
and I have just been bitten by a virus
and this virus is in the process of
eating up my desktop watch back here
right and because it's eating my desktop
it could eat up my whole machine right
this is very bad kablooey right this is
not a good situation so fortunately the
virus is either very stupid or not
really malicious because it didn't
destroy my stuff it just hit it so what
I'm going to do is I'm going to put it
back rearrange things here and now what
I'm going to do is I'm going to launch
it under Polaris I'm just going to
double click OK this is the act of
designation we start excel with the
authority to edit no spreadsheets and
add the authority to add the one edit
the one I just designated okay so we
have an error in our virus and I'm going
to have to relaunch this isn't that
interesting the virus has a bug we'll
see how we fix that how we deal with
those later it's a tiny error that we
haven't found since the late lips last
update of office so let me try one more
time I'm going to pause give it time to
thank settle down virus one more okay if
it doesn't work on the land this one
next time I'm going to give up what will
happen is it will just run the virus
will show me that
no files that can edit now the virus is
chosen not to run let me just and it's
dead so what happens is that window
comes up says I've been bitten by a
virus and it has chose me no files the
virus didn't need the authority to edit
any file so it didn't get any authority
than at any files that's the that's
about yeah I'm sorry what I'm sorry
Excel did get the authority so normally
when you start Excel you started running
as you and you give it a string
representing the name of the file you
wanted to edit Excel has to be prepared
to edit any file you my name so it needs
all your authority we started with the
authority to add edit none and add the
one you just designated sorry about that
i ran the demo just before the session
but it decided the virus decided to die
yeah right so that's a good question
what about the config files and
everything else obviously Excel needs to
its own executable it needs its fonts it
needs all kinds of stuff but those are
things it needs every time it runs so we
call that the installation endowment you
can figure that once when you configure
the application to run under Polaris and
then it just gets those authorities
every time and we have a little tool
that configures the applications for
most applications it's very
straightforward we haven't run into any
that it's more than one or two
exceptions yeah
yeah I'll show you that since you asked
we'll give it one more chance you know
it's not going to do it okay but if I
want to open another file now watch
closely what happens when I do this I'm
going to click the file open dialog box
you do that flesh that was the file
dialog box that was running with the
permissions of Excel we watch for that
file dialog box hide it and present one
that's running with my permissions now I
can select you know any other file and
give this running instance of Excel
authority to that file right and the
virus doesn't have access to that window
that full power dialog box only user
does so what we're finding our acts of
designation that are available to the
person but not the virus and as soon as
we have that we can implement the
function so we have a little service
running in the background that's
watching for that dialog box yeah yes it
was you look very most you notice how
this one is decorated with the bracks
angle brackets excel so I know that
that's running in what we call a pet
because I've given it a pet name you see
this says open for Excel it's not just
open which is better than the standard
file dialog box it actually tells me
which application which running pet is
asking for this file
the Alpha juicer probably won't get in
trouble but you know usability is more
important than small increments in
security the result is the application
as so let me let me let me repeat this
for the people who'll remote if the
virus opened the file dialog box it only
has access to the one that's running in
the confined space so the user might not
if you know the one we just showed was
hidden or didn't show up the user
wouldn't be able to grant the authority
but that fails safe so but that's not
your question yeah right well in this
case this is we do this for file dialog
boxes okay and we do label it we you
know we do the best you can I don't know
what we can do maybe we could have a
sledgehammer that says no no but how do
we know if it was you know viruses can
inject keystrokes so how do we know if
it was the user who clicked to the virus
only the user knows so we if a file
dialog box pops up surprisingly maybe
you shouldn't open a file but you
probably don't know which file did you
want to open anyway so maybe you want
that's the best we can do yeah
what about access to non file things so
one of the things we would like to do is
prevent certain applications from
getting access to the Internet our
original plan was to just use the
firewall to do that unfortunately every
firewall we've looked at has rules for
preventing network access by application
but not by user account and that's too
bad right because we'd like the main
user account to have full access to
everything the user wants and limit the
pets as needed and we haven't figured
how to do that yet so we we have several
proposals including in our own socks
proxy running on the machine and blah
blah blah we haven't done that so far
for the data let me go on and show you
have a couple more short demos okay one
of the main sources of spyware is the
browser right so here is a website that
will make my disk shine like new now I'd
like to have a shiny new disk so I'm
going to go to this website and of
course you get a dialog crazy dialog box
this one is saying do you want a shiny
new disk or not because that's what you
asked for and of course you say yes and
now I have a shiny new a shiny new disk
of course I've got spyware all over my
machine in this case it's just on my
desktop that's because the browser is
running with all of my authority now
Windows Vista is going to provide some
protection from that but not enough how
about if I go to that same website in
the browser running under Polaris first
thing is I don't care about the dialog
box I can just let it go so I don't have
to be bothered by that and of course
there's no trash on my desktop this is
actually the virus on the previous run
failing fired the virus on this run
failing that's good it's good that the
virus failed some of them fail quietly a
third source of trouble is email
attachments you know right now most
corporations are filtering most kinds of
email attachments and yet here i have
this very important email it's the
crucial windows virus update right it's
very important
that my viruses be up to date when want
an out-of-date by well we've seen the
problems without a date viruses right
they don't run and you're not allowed to
send an executable through the firewall
so what do you do will you put it in a
zip file right in fact the instructions
on the HP website tell you to do that
talk about shooting yourself in the head
so I go to launch the virus i get a
stupid dialog box i go launch the virus
i get another stupid dialog box you know
these things are like teaching a pig to
sing the pig isn't going to it's going
to waste your time and that just going
to irritate the pig right and at the end
of the day the virus has run and all my
friends and neighbors who have been
infected now we couldn't get our mitts
in to grab the double click launch here
so what we did is we added a button we
teach our users to launch attachments
with this button and this is going to
run them under Polaris so no stupid
dialog box and when the virus runs it
doesn't have the authority to do
anything bad and we've set up that
account to have one entry in the
contacts list which is the local
sysadmin so your whole environment
becomes a honeypot so those are the
those are the Polaris demo sorry the
spreadsheet didn't work yeah
you can't get the right strike so if I
were going to attack the system I would
write a virus that made the application
look like it was running strangely to
induce the person to open it I'll
outside of Polaris and the only thing we
can do is make sure that nothing will
happen strangely while you're inside
Polaris when people get confidence in it
well we tell them to do is if it's
acting strangely is open up some other
file that does something similar outside
Polaris and see if it still act
strangely and then you know it's
something in the file and maybe you
should be suspicious that's our that's
the best we can do but yes that's
exactly the attack I would mount and
that would succeed some of the time but
there are some people who answer
Nigerian letters and there's nothing we
can do about that right so we do again
we do the best we can
yeah so what layer what's the
implementation what lay are we doing we
are using a variant of the windows run
as system each application we set up a
separate account running as a restricted
user when you double-click we change the
file associations so that when I double
clicked on that dot XLS instead of it
running excel directly we did a run as
excel in that restricted user account
that's it after that it's just running
and we're out of the picture except
until the file dialog box appears so we
didn't touch the application we don't
change we're not running at any layer
we're not intercepting system calls
we're just doing using the normal
windows API and the run as facility that
they already provided so let me just
wrap up now so what you just saw was
more functional because you could use
all these features it was easier to use
because you didn't have those stupid
dialog boxes and it was more secure at
the same time most people would say
you'd have to pick two out of three you
just saw three at the same time it
actually blocks today's viruses I mean
did macro viruses all kinds of things
right it just blocks them and it's easy
to use as presentations being done under
Polaris some people have said use a Mac
because it's safer but the same kinds of
viruses will run on mac and enough
people did it there'd be viruses for the
Mac because Mac uses identification
based access control but with Polaris
you get to use your existing tools you
notice it's windows so I didn't say that
you know and love I just said that you
know right but you get to use them and
you're safe from these a whole class of
attack somebody would have to come up
with a new class of attacks now we don't
protect against attacks against the
colonel so but in that case you know
when blaster came out that was an attack
against the colonel we would provide no
protection against that Microsoft's
response is here's the patch when love
letter came out there's nothing to patch
the system is operating the way it was
designed to operate so what was
Microsoft's response to the love letter
by a smarter user right there's just
nothing they could do about it this is
the one that Polaris addresses so it's
complimentary and
and it forces Microsoft to be
responsible for bugs in its system you
know virus scanners are fighting the
last war they have they can only stop a
virus that they've seen before and now
the attack time is dropping firewalls
are a great idea I mean I recommend them
they're fine except the first step in a
perimeter defense is actually having a
perimeter Microsoft's approach you know
the trustworthy computing initiative
with quality assurance and patching
that's a good thing but if that's all
you do you only win if you achieve
perfection because as long as there's an
exploitable Floyd will be exploited what
we're doing is saying how can we reduce
the exploit ability of flaws that will
already be there right to limit the
damage that can be done that's a good
complementary question to the question
how can we prevent an attack from
succeeding which is the conventional
question asked by security experts and
finally here's a quote from a smart
person who happens to be very lazy
that's me okay the best way to solve a
problem is to avoid it if we give
processes only the rights they need to
do the job the user wants done we can
limit the damage of virus can do maybe
to the point where we've made virus
writing uninteresting okay now I got two
more slides first of all what's this
bear no guesses of course it's the polar
bear right it's the polar bear why is it
Polaris well that's the principle of
least authority for real internet
security I have a PhD in astronomy and
every astronomer knows that the Big Bear
points to the North Star so that's why
we call it Polaris we have a tech report
which is available now and we have just
been found out we've been scheduled for
the September issue of ca-siem so if you
want to read more about it you can read
the tech report I wait for your ca-siem
to come out so that's the end of the
first of our four presentations
any more questions okay sounds like we
covered I'm sorry what can you download
Polaris we have a beta test program you
have to sign our beta license agreement
you notice we didn't sign your non
disclosure agreement maybe you can't
sign our beta license agreement we're
actually a week ago let's say a week ago
two weeks ago tomorrow we all have
distributed our beta to our original
test set we are trying to get the bugs
out of that within the month we will be
looking to expand the beta program send
me email if you're interested and I send
you a copy of the license agreement for
your lawyers to look at so that's the
big barrier it seems sometimes these
macros are going to be useful things
that will be prevented actually this
won't prevent them because you're going
to let you run the macros in polaris if
it fails it probably should have because
it's trying to use authorities that the
user didn't Gramp it how do you grant it
well mostly it's through the file system
so if the macro needs to use a file its
going to have to use or what file right
and if it ask the user what file that
will be a file dialog box and then the
user can grant the authority in the
virus can't that's the primary primary
step sometimes they'll be other dialog
boxes that are non-standard and we have
a workaround for that but it's just a
workaround that's the advantage of the
bait doing the beta and not the product
yeah
primarily it's avoid using mutable
static state so if there's any global
state it must be immutable now when I
was learning object oriented programming
I got myself into a lot of trouble and
identified the source of the trouble
just for me personally for my own use
and the main thing I was getting in
trouble was I was using mutable static
State and I realized that that was
violating the object model and so just
good object oriented design seems to be
ninety percent of the way ok thank you I
think our times up anyway</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>